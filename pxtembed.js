/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved. 
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0  
 
THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE, 
MERCHANTABLITY OR NON-INFRINGEMENT. 
 
See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
"use strict";var __assign=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts;!function(e){!function(e){e[e.Unknown=0]="Unknown",e[e.EndOfFileToken=1]="EndOfFileToken",e[e.SingleLineCommentTrivia=2]="SingleLineCommentTrivia",e[e.MultiLineCommentTrivia=3]="MultiLineCommentTrivia",e[e.NewLineTrivia=4]="NewLineTrivia",e[e.WhitespaceTrivia=5]="WhitespaceTrivia",e[e.ShebangTrivia=6]="ShebangTrivia",e[e.ConflictMarkerTrivia=7]="ConflictMarkerTrivia",e[e.NumericLiteral=8]="NumericLiteral",e[e.StringLiteral=9]="StringLiteral",e[e.JsxText=10]="JsxText",e[e.JsxTextAllWhiteSpaces=11]="JsxTextAllWhiteSpaces",e[e.RegularExpressionLiteral=12]="RegularExpressionLiteral",e[e.NoSubstitutionTemplateLiteral=13]="NoSubstitutionTemplateLiteral",e[e.TemplateHead=14]="TemplateHead",e[e.TemplateMiddle=15]="TemplateMiddle",e[e.TemplateTail=16]="TemplateTail",e[e.OpenBraceToken=17]="OpenBraceToken",e[e.CloseBraceToken=18]="CloseBraceToken",e[e.OpenParenToken=19]="OpenParenToken",e[e.CloseParenToken=20]="CloseParenToken",e[e.OpenBracketToken=21]="OpenBracketToken",e[e.CloseBracketToken=22]="CloseBracketToken",e[e.DotToken=23]="DotToken",e[e.DotDotDotToken=24]="DotDotDotToken",e[e.SemicolonToken=25]="SemicolonToken",e[e.CommaToken=26]="CommaToken",e[e.LessThanToken=27]="LessThanToken",e[e.LessThanSlashToken=28]="LessThanSlashToken",e[e.GreaterThanToken=29]="GreaterThanToken",e[e.LessThanEqualsToken=30]="LessThanEqualsToken",e[e.GreaterThanEqualsToken=31]="GreaterThanEqualsToken",e[e.EqualsEqualsToken=32]="EqualsEqualsToken",e[e.ExclamationEqualsToken=33]="ExclamationEqualsToken",e[e.EqualsEqualsEqualsToken=34]="EqualsEqualsEqualsToken",e[e.ExclamationEqualsEqualsToken=35]="ExclamationEqualsEqualsToken",e[e.EqualsGreaterThanToken=36]="EqualsGreaterThanToken",e[e.PlusToken=37]="PlusToken",e[e.MinusToken=38]="MinusToken",e[e.AsteriskToken=39]="AsteriskToken",e[e.AsteriskAsteriskToken=40]="AsteriskAsteriskToken",e[e.SlashToken=41]="SlashToken",e[e.PercentToken=42]="PercentToken",e[e.PlusPlusToken=43]="PlusPlusToken",e[e.MinusMinusToken=44]="MinusMinusToken",e[e.LessThanLessThanToken=45]="LessThanLessThanToken",e[e.GreaterThanGreaterThanToken=46]="GreaterThanGreaterThanToken",e[e.GreaterThanGreaterThanGreaterThanToken=47]="GreaterThanGreaterThanGreaterThanToken",e[e.AmpersandToken=48]="AmpersandToken",e[e.BarToken=49]="BarToken",e[e.CaretToken=50]="CaretToken",e[e.ExclamationToken=51]="ExclamationToken",e[e.TildeToken=52]="TildeToken",e[e.AmpersandAmpersandToken=53]="AmpersandAmpersandToken",e[e.BarBarToken=54]="BarBarToken",e[e.QuestionToken=55]="QuestionToken",e[e.ColonToken=56]="ColonToken",e[e.AtToken=57]="AtToken",e[e.EqualsToken=58]="EqualsToken",e[e.PlusEqualsToken=59]="PlusEqualsToken",e[e.MinusEqualsToken=60]="MinusEqualsToken",e[e.AsteriskEqualsToken=61]="AsteriskEqualsToken",e[e.AsteriskAsteriskEqualsToken=62]="AsteriskAsteriskEqualsToken",e[e.SlashEqualsToken=63]="SlashEqualsToken",e[e.PercentEqualsToken=64]="PercentEqualsToken",e[e.LessThanLessThanEqualsToken=65]="LessThanLessThanEqualsToken",e[e.GreaterThanGreaterThanEqualsToken=66]="GreaterThanGreaterThanEqualsToken",e[e.GreaterThanGreaterThanGreaterThanEqualsToken=67]="GreaterThanGreaterThanGreaterThanEqualsToken",e[e.AmpersandEqualsToken=68]="AmpersandEqualsToken",e[e.BarEqualsToken=69]="BarEqualsToken",e[e.CaretEqualsToken=70]="CaretEqualsToken",e[e.Identifier=71]="Identifier",e[e.BreakKeyword=72]="BreakKeyword",e[e.CaseKeyword=73]="CaseKeyword",e[e.CatchKeyword=74]="CatchKeyword",e[e.ClassKeyword=75]="ClassKeyword",e[e.ConstKeyword=76]="ConstKeyword",e[e.ContinueKeyword=77]="ContinueKeyword",e[e.DebuggerKeyword=78]="DebuggerKeyword",e[e.DefaultKeyword=79]="DefaultKeyword",e[e.DeleteKeyword=80]="DeleteKeyword",e[e.DoKeyword=81]="DoKeyword",e[e.ElseKeyword=82]="ElseKeyword",e[e.EnumKeyword=83]="EnumKeyword",e[e.ExportKeyword=84]="ExportKeyword",e[e.ExtendsKeyword=85]="ExtendsKeyword",e[e.FalseKeyword=86]="FalseKeyword",e[e.FinallyKeyword=87]="FinallyKeyword",e[e.ForKeyword=88]="ForKeyword",e[e.FunctionKeyword=89]="FunctionKeyword",e[e.IfKeyword=90]="IfKeyword",e[e.ImportKeyword=91]="ImportKeyword",e[e.InKeyword=92]="InKeyword",e[e.InstanceOfKeyword=93]="InstanceOfKeyword",e[e.NewKeyword=94]="NewKeyword",e[e.NullKeyword=95]="NullKeyword",e[e.ReturnKeyword=96]="ReturnKeyword",e[e.SuperKeyword=97]="SuperKeyword",e[e.SwitchKeyword=98]="SwitchKeyword",e[e.ThisKeyword=99]="ThisKeyword",e[e.ThrowKeyword=100]="ThrowKeyword",e[e.TrueKeyword=101]="TrueKeyword",e[e.TryKeyword=102]="TryKeyword",e[e.TypeOfKeyword=103]="TypeOfKeyword",e[e.VarKeyword=104]="VarKeyword",e[e.VoidKeyword=105]="VoidKeyword",e[e.WhileKeyword=106]="WhileKeyword",e[e.WithKeyword=107]="WithKeyword",e[e.ImplementsKeyword=108]="ImplementsKeyword",e[e.InterfaceKeyword=109]="InterfaceKeyword",e[e.LetKeyword=110]="LetKeyword",e[e.PackageKeyword=111]="PackageKeyword",e[e.PrivateKeyword=112]="PrivateKeyword",e[e.ProtectedKeyword=113]="ProtectedKeyword",e[e.PublicKeyword=114]="PublicKeyword",e[e.StaticKeyword=115]="StaticKeyword",e[e.YieldKeyword=116]="YieldKeyword",e[e.AbstractKeyword=117]="AbstractKeyword",e[e.AsKeyword=118]="AsKeyword",e[e.AnyKeyword=119]="AnyKeyword",e[e.AsyncKeyword=120]="AsyncKeyword",e[e.AwaitKeyword=121]="AwaitKeyword",e[e.BooleanKeyword=122]="BooleanKeyword",e[e.ConstructorKeyword=123]="ConstructorKeyword",e[e.DeclareKeyword=124]="DeclareKeyword",e[e.GetKeyword=125]="GetKeyword",e[e.IsKeyword=126]="IsKeyword",e[e.KeyOfKeyword=127]="KeyOfKeyword",e[e.ModuleKeyword=128]="ModuleKeyword",e[e.NamespaceKeyword=129]="NamespaceKeyword",e[e.NeverKeyword=130]="NeverKeyword",e[e.ReadonlyKeyword=131]="ReadonlyKeyword",e[e.RequireKeyword=132]="RequireKeyword",e[e.NumberKeyword=133]="NumberKeyword",e[e.ObjectKeyword=134]="ObjectKeyword",e[e.SetKeyword=135]="SetKeyword",e[e.StringKeyword=136]="StringKeyword",e[e.SymbolKeyword=137]="SymbolKeyword",e[e.TypeKeyword=138]="TypeKeyword",e[e.UndefinedKeyword=139]="UndefinedKeyword",e[e.FromKeyword=140]="FromKeyword",e[e.GlobalKeyword=141]="GlobalKeyword",e[e.OfKeyword=142]="OfKeyword",e[e.QualifiedName=143]="QualifiedName",e[e.ComputedPropertyName=144]="ComputedPropertyName",e[e.TypeParameter=145]="TypeParameter",e[e.Parameter=146]="Parameter",e[e.Decorator=147]="Decorator",e[e.PropertySignature=148]="PropertySignature",e[e.PropertyDeclaration=149]="PropertyDeclaration",e[e.MethodSignature=150]="MethodSignature",e[e.MethodDeclaration=151]="MethodDeclaration",e[e.Constructor=152]="Constructor",e[e.GetAccessor=153]="GetAccessor",e[e.SetAccessor=154]="SetAccessor",e[e.CallSignature=155]="CallSignature",e[e.ConstructSignature=156]="ConstructSignature",e[e.IndexSignature=157]="IndexSignature",e[e.TypePredicate=158]="TypePredicate",e[e.TypeReference=159]="TypeReference",e[e.FunctionType=160]="FunctionType",e[e.ConstructorType=161]="ConstructorType",e[e.TypeQuery=162]="TypeQuery",e[e.TypeLiteral=163]="TypeLiteral",e[e.ArrayType=164]="ArrayType",e[e.TupleType=165]="TupleType",e[e.UnionType=166]="UnionType",e[e.IntersectionType=167]="IntersectionType",e[e.ParenthesizedType=168]="ParenthesizedType",e[e.ThisType=169]="ThisType",e[e.TypeOperator=170]="TypeOperator",e[e.IndexedAccessType=171]="IndexedAccessType",e[e.MappedType=172]="MappedType",e[e.LiteralType=173]="LiteralType",e[e.ObjectBindingPattern=174]="ObjectBindingPattern",e[e.ArrayBindingPattern=175]="ArrayBindingPattern",e[e.BindingElement=176]="BindingElement",e[e.ArrayLiteralExpression=177]="ArrayLiteralExpression",e[e.ObjectLiteralExpression=178]="ObjectLiteralExpression",e[e.PropertyAccessExpression=179]="PropertyAccessExpression",e[e.ElementAccessExpression=180]="ElementAccessExpression",e[e.CallExpression=181]="CallExpression",e[e.NewExpression=182]="NewExpression",e[e.TaggedTemplateExpression=183]="TaggedTemplateExpression",e[e.TypeAssertionExpression=184]="TypeAssertionExpression",e[e.ParenthesizedExpression=185]="ParenthesizedExpression",e[e.FunctionExpression=186]="FunctionExpression",e[e.ArrowFunction=187]="ArrowFunction",e[e.DeleteExpression=188]="DeleteExpression",e[e.TypeOfExpression=189]="TypeOfExpression",e[e.VoidExpression=190]="VoidExpression",e[e.AwaitExpression=191]="AwaitExpression",e[e.PrefixUnaryExpression=192]="PrefixUnaryExpression",e[e.PostfixUnaryExpression=193]="PostfixUnaryExpression",e[e.BinaryExpression=194]="BinaryExpression",e[e.ConditionalExpression=195]="ConditionalExpression",e[e.TemplateExpression=196]="TemplateExpression",e[e.YieldExpression=197]="YieldExpression",e[e.SpreadElement=198]="SpreadElement",e[e.ClassExpression=199]="ClassExpression",e[e.OmittedExpression=200]="OmittedExpression",e[e.ExpressionWithTypeArguments=201]="ExpressionWithTypeArguments",e[e.AsExpression=202]="AsExpression",e[e.NonNullExpression=203]="NonNullExpression",e[e.MetaProperty=204]="MetaProperty",e[e.TemplateSpan=205]="TemplateSpan",e[e.SemicolonClassElement=206]="SemicolonClassElement",e[e.Block=207]="Block",e[e.VariableStatement=208]="VariableStatement",e[e.EmptyStatement=209]="EmptyStatement",e[e.ExpressionStatement=210]="ExpressionStatement",e[e.IfStatement=211]="IfStatement",e[e.DoStatement=212]="DoStatement",e[e.WhileStatement=213]="WhileStatement",e[e.ForStatement=214]="ForStatement",e[e.ForInStatement=215]="ForInStatement",e[e.ForOfStatement=216]="ForOfStatement",e[e.ContinueStatement=217]="ContinueStatement",e[e.BreakStatement=218]="BreakStatement",e[e.ReturnStatement=219]="ReturnStatement",e[e.WithStatement=220]="WithStatement",e[e.SwitchStatement=221]="SwitchStatement",e[e.LabeledStatement=222]="LabeledStatement",e[e.ThrowStatement=223]="ThrowStatement",e[e.TryStatement=224]="TryStatement",e[e.DebuggerStatement=225]="DebuggerStatement",e[e.VariableDeclaration=226]="VariableDeclaration",e[e.VariableDeclarationList=227]="VariableDeclarationList",e[e.FunctionDeclaration=228]="FunctionDeclaration",e[e.ClassDeclaration=229]="ClassDeclaration",e[e.InterfaceDeclaration=230]="InterfaceDeclaration",e[e.TypeAliasDeclaration=231]="TypeAliasDeclaration",e[e.EnumDeclaration=232]="EnumDeclaration",e[e.ModuleDeclaration=233]="ModuleDeclaration",e[e.ModuleBlock=234]="ModuleBlock",e[e.CaseBlock=235]="CaseBlock",e[e.NamespaceExportDeclaration=236]="NamespaceExportDeclaration",e[e.ImportEqualsDeclaration=237]="ImportEqualsDeclaration",e[e.ImportDeclaration=238]="ImportDeclaration",e[e.ImportClause=239]="ImportClause",e[e.NamespaceImport=240]="NamespaceImport",e[e.NamedImports=241]="NamedImports",e[e.ImportSpecifier=242]="ImportSpecifier",e[e.ExportAssignment=243]="ExportAssignment",e[e.ExportDeclaration=244]="ExportDeclaration",e[e.NamedExports=245]="NamedExports",e[e.ExportSpecifier=246]="ExportSpecifier",e[e.MissingDeclaration=247]="MissingDeclaration",e[e.ExternalModuleReference=248]="ExternalModuleReference",e[e.JsxElement=249]="JsxElement",e[e.JsxSelfClosingElement=250]="JsxSelfClosingElement",e[e.JsxOpeningElement=251]="JsxOpeningElement",e[e.JsxClosingElement=252]="JsxClosingElement",e[e.JsxAttribute=253]="JsxAttribute",e[e.JsxAttributes=254]="JsxAttributes",e[e.JsxSpreadAttribute=255]="JsxSpreadAttribute",e[e.JsxExpression=256]="JsxExpression",e[e.CaseClause=257]="CaseClause",e[e.DefaultClause=258]="DefaultClause",e[e.HeritageClause=259]="HeritageClause",e[e.CatchClause=260]="CatchClause",e[e.PropertyAssignment=261]="PropertyAssignment",e[e.ShorthandPropertyAssignment=262]="ShorthandPropertyAssignment",e[e.SpreadAssignment=263]="SpreadAssignment",e[e.EnumMember=264]="EnumMember",e[e.SourceFile=265]="SourceFile",e[e.Bundle=266]="Bundle",e[e.JSDocTypeExpression=267]="JSDocTypeExpression",e[e.JSDocAllType=268]="JSDocAllType",e[e.JSDocUnknownType=269]="JSDocUnknownType",e[e.JSDocNullableType=270]="JSDocNullableType",e[e.JSDocNonNullableType=271]="JSDocNonNullableType",e[e.JSDocOptionalType=272]="JSDocOptionalType",e[e.JSDocFunctionType=273]="JSDocFunctionType",e[e.JSDocVariadicType=274]="JSDocVariadicType",e[e.JSDocComment=275]="JSDocComment",e[e.JSDocTag=276]="JSDocTag",e[e.JSDocAugmentsTag=277]="JSDocAugmentsTag",e[e.JSDocClassTag=278]="JSDocClassTag",e[e.JSDocParameterTag=279]="JSDocParameterTag",e[e.JSDocReturnTag=280]="JSDocReturnTag",e[e.JSDocTypeTag=281]="JSDocTypeTag",e[e.JSDocTemplateTag=282]="JSDocTemplateTag",e[e.JSDocTypedefTag=283]="JSDocTypedefTag",e[e.JSDocPropertyTag=284]="JSDocPropertyTag",e[e.JSDocTypeLiteral=285]="JSDocTypeLiteral",e[e.SyntaxList=286]="SyntaxList",e[e.NotEmittedStatement=287]="NotEmittedStatement",e[e.PartiallyEmittedExpression=288]="PartiallyEmittedExpression",e[e.CommaListExpression=289]="CommaListExpression",e[e.MergeDeclarationMarker=290]="MergeDeclarationMarker",e[e.EndOfDeclarationMarker=291]="EndOfDeclarationMarker",e[e.Count=292]="Count",e[e.FirstAssignment=58]="FirstAssignment",e[e.LastAssignment=70]="LastAssignment",e[e.FirstCompoundAssignment=59]="FirstCompoundAssignment",e[e.LastCompoundAssignment=70]="LastCompoundAssignment",e[e.FirstReservedWord=72]="FirstReservedWord",e[e.LastReservedWord=107]="LastReservedWord",e[e.FirstKeyword=72]="FirstKeyword",e[e.LastKeyword=142]="LastKeyword",e[e.FirstFutureReservedWord=108]="FirstFutureReservedWord",e[e.LastFutureReservedWord=116]="LastFutureReservedWord",e[e.FirstTypeNode=158]="FirstTypeNode",e[e.LastTypeNode=173]="LastTypeNode",e[e.FirstPunctuation=17]="FirstPunctuation",e[e.LastPunctuation=70]="LastPunctuation",e[e.FirstToken=0]="FirstToken",e[e.LastToken=142]="LastToken",e[e.FirstTriviaToken=2]="FirstTriviaToken",e[e.LastTriviaToken=7]="LastTriviaToken",e[e.FirstLiteralToken=8]="FirstLiteralToken",e[e.LastLiteralToken=13]="LastLiteralToken",e[e.FirstTemplateToken=13]="FirstTemplateToken",e[e.LastTemplateToken=16]="LastTemplateToken",e[e.FirstBinaryOperator=27]="FirstBinaryOperator",e[e.LastBinaryOperator=70]="LastBinaryOperator",e[e.FirstNode=143]="FirstNode",e[e.FirstJSDocNode=267]="FirstJSDocNode",e[e.LastJSDocNode=285]="LastJSDocNode",e[e.FirstJSDocTagNode=276]="FirstJSDocTagNode",e[e.LastJSDocTagNode=285]="LastJSDocTagNode"}(e.SyntaxKind||(e.SyntaxKind={})),function(e){e[e.None=0]="None",e[e.Let=1]="Let",e[e.Const=2]="Const",e[e.NestedNamespace=4]="NestedNamespace",e[e.Synthesized=8]="Synthesized",e[e.Namespace=16]="Namespace",e[e.ExportContext=32]="ExportContext",e[e.ContainsThis=64]="ContainsThis",e[e.HasImplicitReturn=128]="HasImplicitReturn",e[e.HasExplicitReturn=256]="HasExplicitReturn",e[e.GlobalAugmentation=512]="GlobalAugmentation",e[e.HasAsyncFunctions=1024]="HasAsyncFunctions",e[e.DisallowInContext=2048]="DisallowInContext",e[e.YieldContext=4096]="YieldContext",e[e.DecoratorContext=8192]="DecoratorContext",e[e.AwaitContext=16384]="AwaitContext",e[e.ThisNodeHasError=32768]="ThisNodeHasError",e[e.JavaScriptFile=65536]="JavaScriptFile",e[e.ThisNodeOrAnySubNodesHasError=131072]="ThisNodeOrAnySubNodesHasError",e[e.HasAggregatedChildData=262144]="HasAggregatedChildData",e[e.PossiblyContainsDynamicImport=524288]="PossiblyContainsDynamicImport",e[e.JSDoc=1048576]="JSDoc",e[e.BlockScoped=3]="BlockScoped",e[e.ReachabilityCheckFlags=384]="ReachabilityCheckFlags",e[e.ReachabilityAndEmitFlags=1408]="ReachabilityAndEmitFlags",e[e.ContextFlags=96256]="ContextFlags",e[e.TypeExcludesFlags=20480]="TypeExcludesFlags"}(e.NodeFlags||(e.NodeFlags={})),function(e){e[e.None=0]="None",e[e.Export=1]="Export",e[e.Ambient=2]="Ambient",e[e.Public=4]="Public",e[e.Private=8]="Private",e[e.Protected=16]="Protected",e[e.Static=32]="Static",e[e.Readonly=64]="Readonly",e[e.Abstract=128]="Abstract",e[e.Async=256]="Async",e[e.Default=512]="Default",e[e.Const=2048]="Const",e[e.HasComputedFlags=536870912]="HasComputedFlags",e[e.AccessibilityModifier=28]="AccessibilityModifier",e[e.ParameterPropertyModifier=92]="ParameterPropertyModifier",e[e.NonPublicAccessibilityModifier=24]="NonPublicAccessibilityModifier",e[e.TypeScriptModifier=2270]="TypeScriptModifier",e[e.ExportDefault=513]="ExportDefault"}(e.ModifierFlags||(e.ModifierFlags={})),function(e){e[e.None=0]="None",e[e.IntrinsicNamedElement=1]="IntrinsicNamedElement",e[e.IntrinsicIndexedElement=2]="IntrinsicIndexedElement",e[e.IntrinsicElement=3]="IntrinsicElement"}(e.JsxFlags||(e.JsxFlags={})),function(e){e[e.Succeeded=1]="Succeeded",e[e.Failed=2]="Failed",e[e.FailedAndReported=3]="FailedAndReported"}(e.RelationComparisonResult||(e.RelationComparisonResult={})),function(e){e[e.None=0]="None",e[e.Auto=1]="Auto",e[e.Loop=2]="Loop",e[e.Unique=3]="Unique",e[e.Node=4]="Node"}(e.GeneratedIdentifierKind||(e.GeneratedIdentifierKind={})),function(e){e[e.None=0]="None",e[e.Scientific=2]="Scientific",e[e.Octal=4]="Octal",e[e.HexSpecifier=8]="HexSpecifier",e[e.BinarySpecifier=16]="BinarySpecifier",e[e.OctalSpecifier=32]="OctalSpecifier",e[e.BinaryOrOctalSpecifier=48]="BinaryOrOctalSpecifier"}(e.NumericLiteralFlags||(e.NumericLiteralFlags={})),function(e){e[e.Unreachable=1]="Unreachable",e[e.Start=2]="Start",e[e.BranchLabel=4]="BranchLabel",e[e.LoopLabel=8]="LoopLabel",e[e.Assignment=16]="Assignment",e[e.TrueCondition=32]="TrueCondition",e[e.FalseCondition=64]="FalseCondition",e[e.SwitchClause=128]="SwitchClause",e[e.ArrayMutation=256]="ArrayMutation",e[e.Referenced=512]="Referenced",e[e.Shared=1024]="Shared",e[e.PreFinally=2048]="PreFinally",e[e.AfterFinally=4096]="AfterFinally",e[e.Label=12]="Label",e[e.Condition=96]="Condition"}(e.FlowFlags||(e.FlowFlags={}));var t=function(){};e.OperationCanceledException=t,function(e){e[e.Not=0]="Not",e[e.SafeModules=1]="SafeModules",e[e.Completely=2]="Completely"}(e.StructureIsReused||(e.StructureIsReused={})),function(e){e[e.Success=0]="Success",e[e.DiagnosticsPresent_OutputsSkipped=1]="DiagnosticsPresent_OutputsSkipped",e[e.DiagnosticsPresent_OutputsGenerated=2]="DiagnosticsPresent_OutputsGenerated"}(e.ExitStatus||(e.ExitStatus={})),function(e){e[e.None=0]="None",e[e.NoTruncation=1]="NoTruncation",e[e.WriteArrayAsGenericType=2]="WriteArrayAsGenericType",e[e.WriteTypeArgumentsOfSignature=32]="WriteTypeArgumentsOfSignature",e[e.UseFullyQualifiedType=64]="UseFullyQualifiedType",e[e.SuppressAnyReturnType=256]="SuppressAnyReturnType",e[e.WriteTypeParametersInQualifiedName=512]="WriteTypeParametersInQualifiedName",e[e.AllowThisInObjectLiteral=1024]="AllowThisInObjectLiteral",e[e.AllowQualifedNameInPlaceOfIdentifier=2048]="AllowQualifedNameInPlaceOfIdentifier",e[e.AllowAnonymousIdentifier=8192]="AllowAnonymousIdentifier",e[e.AllowEmptyUnionOrIntersection=16384]="AllowEmptyUnionOrIntersection",e[e.AllowEmptyTuple=32768]="AllowEmptyTuple",e[e.IgnoreErrors=60416]="IgnoreErrors",e[e.InObjectTypeLiteral=1048576]="InObjectTypeLiteral",e[e.InTypeAlias=8388608]="InTypeAlias"}(e.NodeBuilderFlags||(e.NodeBuilderFlags={})),function(e){e[e.None=0]="None",e[e.WriteArrayAsGenericType=1]="WriteArrayAsGenericType",e[e.UseTypeOfFunction=4]="UseTypeOfFunction",e[e.NoTruncation=8]="NoTruncation",e[e.WriteArrowStyleSignature=16]="WriteArrowStyleSignature",e[e.WriteOwnNameForAnyLike=32]="WriteOwnNameForAnyLike",e[e.WriteTypeArgumentsOfSignature=64]="WriteTypeArgumentsOfSignature",e[e.InElementType=128]="InElementType",e[e.UseFullyQualifiedType=256]="UseFullyQualifiedType",e[e.InFirstTypeArgument=512]="InFirstTypeArgument",e[e.InTypeAlias=1024]="InTypeAlias",e[e.SuppressAnyReturnType=4096]="SuppressAnyReturnType",e[e.AddUndefined=8192]="AddUndefined",e[e.WriteClassExpressionAsTypeLiteral=16384]="WriteClassExpressionAsTypeLiteral",e[e.InArrayType=32768]="InArrayType",e[e.UseAliasDefinedOutsideCurrentScope=65536]="UseAliasDefinedOutsideCurrentScope"}(e.TypeFormatFlags||(e.TypeFormatFlags={})),function(e){e[e.None=0]="None",e[e.WriteTypeParametersOrArguments=1]="WriteTypeParametersOrArguments",e[e.UseOnlyExternalAliasing=2]="UseOnlyExternalAliasing"}(e.SymbolFormatFlags||(e.SymbolFormatFlags={})),function(e){e[e.Accessible=0]="Accessible",e[e.NotAccessible=1]="NotAccessible",e[e.CannotBeNamed=2]="CannotBeNamed"}(e.SymbolAccessibility||(e.SymbolAccessibility={})),function(e){e[e.UnionOrIntersection=0]="UnionOrIntersection",e[e.Spread=1]="Spread"}(e.SyntheticSymbolKind||(e.SyntheticSymbolKind={})),function(e){e[e.This=0]="This",e[e.Identifier=1]="Identifier"}(e.TypePredicateKind||(e.TypePredicateKind={})),function(e){e[e.Unknown=0]="Unknown",e[e.TypeWithConstructSignatureAndValue=1]="TypeWithConstructSignatureAndValue",e[e.VoidNullableOrNeverType=2]="VoidNullableOrNeverType",e[e.NumberLikeType=3]="NumberLikeType",e[e.StringLikeType=4]="StringLikeType",e[e.BooleanType=5]="BooleanType",e[e.ArrayLikeType=6]="ArrayLikeType",e[e.ESSymbolType=7]="ESSymbolType",e[e.Promise=8]="Promise",e[e.TypeWithCallSignature=9]="TypeWithCallSignature",e[e.ObjectType=10]="ObjectType"}(e.TypeReferenceSerializationKind||(e.TypeReferenceSerializationKind={})),function(e){e[e.None=0]="None",e[e.FunctionScopedVariable=1]="FunctionScopedVariable",e[e.BlockScopedVariable=2]="BlockScopedVariable",e[e.Property=4]="Property",e[e.EnumMember=8]="EnumMember",e[e.Function=16]="Function",e[e.Class=32]="Class",e[e.Interface=64]="Interface",e[e.ConstEnum=128]="ConstEnum",e[e.RegularEnum=256]="RegularEnum",e[e.ValueModule=512]="ValueModule",e[e.NamespaceModule=1024]="NamespaceModule",e[e.TypeLiteral=2048]="TypeLiteral",e[e.ObjectLiteral=4096]="ObjectLiteral",e[e.Method=8192]="Method",e[e.Constructor=16384]="Constructor",e[e.GetAccessor=32768]="GetAccessor",e[e.SetAccessor=65536]="SetAccessor",e[e.Signature=131072]="Signature",e[e.TypeParameter=262144]="TypeParameter",e[e.TypeAlias=524288]="TypeAlias",e[e.ExportValue=1048576]="ExportValue",e[e.Alias=2097152]="Alias",e[e.Prototype=4194304]="Prototype",e[e.ExportStar=8388608]="ExportStar",e[e.Optional=16777216]="Optional",e[e.Transient=33554432]="Transient",e[e.Enum=384]="Enum",e[e.Variable=3]="Variable",e[e.Value=107455]="Value",e[e.Type=793064]="Type",e[e.Namespace=1920]="Namespace",e[e.Module=1536]="Module",e[e.Accessor=98304]="Accessor",e[e.FunctionScopedVariableExcludes=107454]="FunctionScopedVariableExcludes",e[e.BlockScopedVariableExcludes=107455]="BlockScopedVariableExcludes",e[e.ParameterExcludes=107455]="ParameterExcludes",e[e.PropertyExcludes=0]="PropertyExcludes",e[e.EnumMemberExcludes=900095]="EnumMemberExcludes",e[e.FunctionExcludes=106927]="FunctionExcludes",e[e.ClassExcludes=899519]="ClassExcludes",e[e.InterfaceExcludes=792968]="InterfaceExcludes",e[e.RegularEnumExcludes=899327]="RegularEnumExcludes",e[e.ConstEnumExcludes=899967]="ConstEnumExcludes",e[e.ValueModuleExcludes=106639]="ValueModuleExcludes",e[e.NamespaceModuleExcludes=0]="NamespaceModuleExcludes",e[e.MethodExcludes=99263]="MethodExcludes",e[e.GetAccessorExcludes=41919]="GetAccessorExcludes",e[e.SetAccessorExcludes=74687]="SetAccessorExcludes",e[e.TypeParameterExcludes=530920]="TypeParameterExcludes",e[e.TypeAliasExcludes=793064]="TypeAliasExcludes",e[e.AliasExcludes=2097152]="AliasExcludes",e[e.ModuleMember=2623475]="ModuleMember",e[e.ExportHasLocal=944]="ExportHasLocal",e[e.HasExports=1952]="HasExports",e[e.HasMembers=6240]="HasMembers",e[e.BlockScoped=418]="BlockScoped",e[e.PropertyOrAccessor=98308]="PropertyOrAccessor",e[e.ClassMember=106500]="ClassMember",e[e.Classifiable=788448]="Classifiable"}(e.SymbolFlags||(e.SymbolFlags={})),function(e){e[e.Numeric=0]="Numeric",e[e.Literal=1]="Literal"}(e.EnumKind||(e.EnumKind={})),function(e){e[e.Instantiated=1]="Instantiated",e[e.SyntheticProperty=2]="SyntheticProperty",e[e.SyntheticMethod=4]="SyntheticMethod",e[e.Readonly=8]="Readonly",e[e.Partial=16]="Partial",e[e.HasNonUniformType=32]="HasNonUniformType",e[e.ContainsPublic=64]="ContainsPublic",e[e.ContainsProtected=128]="ContainsProtected",e[e.ContainsPrivate=256]="ContainsPrivate",e[e.ContainsStatic=512]="ContainsStatic",e[e.Synthetic=6]="Synthetic"}(e.CheckFlags||(e.CheckFlags={})),function(e){e.Call="__call",e.Constructor="__constructor",e.New="__new",e.Index="__index",e.ExportStar="__export",e.Global="__global",e.Missing="__missing",e.Type="__type",e.Object="__object",e.JSXAttributes="__jsxAttributes",e.Class="__class",e.Function="__function",e.Computed="__computed",e.Resolving="__resolving__",e.ExportEquals="export=",e.Default="default"}(e.InternalSymbolName||(e.InternalSymbolName={})),function(e){e[e.TypeChecked=1]="TypeChecked",e[e.LexicalThis=2]="LexicalThis",e[e.CaptureThis=4]="CaptureThis",e[e.CaptureNewTarget=8]="CaptureNewTarget",e[e.SuperInstance=256]="SuperInstance",e[e.SuperStatic=512]="SuperStatic",e[e.ContextChecked=1024]="ContextChecked",e[e.AsyncMethodWithSuper=2048]="AsyncMethodWithSuper",e[e.AsyncMethodWithSuperBinding=4096]="AsyncMethodWithSuperBinding",e[e.CaptureArguments=8192]="CaptureArguments",e[e.EnumValuesComputed=16384]="EnumValuesComputed",e[e.LexicalModuleMergesWithClass=32768]="LexicalModuleMergesWithClass",e[e.LoopWithCapturedBlockScopedBinding=65536]="LoopWithCapturedBlockScopedBinding",e[e.CapturedBlockScopedBinding=131072]="CapturedBlockScopedBinding",e[e.BlockScopedBindingInLoop=262144]="BlockScopedBindingInLoop",e[e.ClassWithBodyScopedClassBinding=524288]="ClassWithBodyScopedClassBinding",e[e.BodyScopedClassBinding=1048576]="BodyScopedClassBinding",e[e.NeedsLoopOutParameter=2097152]="NeedsLoopOutParameter",e[e.AssignmentsMarked=4194304]="AssignmentsMarked",e[e.ClassWithConstructorReference=8388608]="ClassWithConstructorReference",e[e.ConstructorReferenceInClass=16777216]="ConstructorReferenceInClass"}(e.NodeCheckFlags||(e.NodeCheckFlags={})),function(e){e[e.Any=1]="Any",e[e.String=2]="String",e[e.Number=4]="Number",e[e.Boolean=8]="Boolean",e[e.Enum=16]="Enum",e[e.StringLiteral=32]="StringLiteral",e[e.NumberLiteral=64]="NumberLiteral",e[e.BooleanLiteral=128]="BooleanLiteral",e[e.EnumLiteral=256]="EnumLiteral",e[e.ESSymbol=512]="ESSymbol",e[e.Void=1024]="Void",e[e.Undefined=2048]="Undefined",e[e.Null=4096]="Null",e[e.Never=8192]="Never",e[e.TypeParameter=16384]="TypeParameter",e[e.Object=32768]="Object",e[e.Union=65536]="Union",e[e.Intersection=131072]="Intersection",e[e.Index=262144]="Index",e[e.IndexedAccess=524288]="IndexedAccess",e[e.FreshLiteral=1048576]="FreshLiteral",e[e.ContainsWideningType=2097152]="ContainsWideningType",e[e.ContainsObjectLiteral=4194304]="ContainsObjectLiteral",e[e.ContainsAnyFunctionType=8388608]="ContainsAnyFunctionType",e[e.NonPrimitive=16777216]="NonPrimitive",e[e.JsxAttributes=33554432]="JsxAttributes",e[e.MarkerType=67108864]="MarkerType",e[e.Nullable=6144]="Nullable",e[e.Literal=224]="Literal",e[e.Unit=6368]="Unit",e[e.StringOrNumberLiteral=96]="StringOrNumberLiteral",e[e.DefinitelyFalsy=7392]="DefinitelyFalsy",e[e.PossiblyFalsy=7406]="PossiblyFalsy",e[e.Intrinsic=16793231]="Intrinsic",e[e.Primitive=8190]="Primitive",e[e.StringLike=262178]="StringLike",e[e.NumberLike=84]="NumberLike",e[e.BooleanLike=136]="BooleanLike",e[e.EnumLike=272]="EnumLike",e[e.UnionOrIntersection=196608]="UnionOrIntersection",e[e.StructuredType=229376]="StructuredType",e[e.StructuredOrTypeVariable=1032192]="StructuredOrTypeVariable",e[e.TypeVariable=540672]="TypeVariable",e[e.Narrowable=17810175]="Narrowable",e[e.NotUnionOrUnit=16810497]="NotUnionOrUnit",e[e.RequiresWidening=6291456]="RequiresWidening",e[e.PropagatingFlags=14680064]="PropagatingFlags"}(e.TypeFlags||(e.TypeFlags={})),function(e){e[e.Class=1]="Class",e[e.Interface=2]="Interface",e[e.Reference=4]="Reference",e[e.Tuple=8]="Tuple",e[e.Anonymous=16]="Anonymous",e[e.Mapped=32]="Mapped",e[e.Instantiated=64]="Instantiated",e[e.ObjectLiteral=128]="ObjectLiteral",e[e.EvolvingArray=256]="EvolvingArray",e[e.ObjectLiteralPatternWithComputedProperties=512]="ObjectLiteralPatternWithComputedProperties",e[e.ClassOrInterface=3]="ClassOrInterface"}(e.ObjectFlags||(e.ObjectFlags={})),function(e){e[e.Invariant=0]="Invariant",e[e.Covariant=1]="Covariant",e[e.Contravariant=2]="Contravariant",e[e.Bivariant=3]="Bivariant",e[e.Independent=4]="Independent"}(e.Variance||(e.Variance={})),function(e){e[e.Call=0]="Call",e[e.Construct=1]="Construct"}(e.SignatureKind||(e.SignatureKind={})),function(e){e[e.String=0]="String",e[e.Number=1]="Number"}(e.IndexKind||(e.IndexKind={})),function(e){e[e.Contravariant=1]="Contravariant",e[e.NakedTypeVariable=2]="NakedTypeVariable",e[e.MappedType=4]="MappedType",e[e.ReturnType=8]="ReturnType"}(e.InferencePriority||(e.InferencePriority={})),function(e){e[e.InferUnionTypes=1]="InferUnionTypes",e[e.NoDefault=2]="NoDefault",e[e.AnyDefault=4]="AnyDefault"}(e.InferenceFlags||(e.InferenceFlags={})),function(e){e[e.False=0]="False",e[e.Maybe=1]="Maybe",e[e.True=-1]="True"}(e.Ternary||(e.Ternary={})),function(e){e[e.None=0]="None",e[e.ExportsProperty=1]="ExportsProperty",e[e.ModuleExports=2]="ModuleExports",e[e.PrototypeProperty=3]="PrototypeProperty",e[e.ThisProperty=4]="ThisProperty",e[e.Property=5]="Property"}(e.SpecialPropertyAssignmentKind||(e.SpecialPropertyAssignmentKind={})),function(e){e[e.Warning=0]="Warning",e[e.Error=1]="Error",e[e.Message=2]="Message"}(e.DiagnosticCategory||(e.DiagnosticCategory={})),function(e){e[e.Classic=1]="Classic",e[e.NodeJs=2]="NodeJs"}(e.ModuleResolutionKind||(e.ModuleResolutionKind={})),function(e){e[e.None=0]="None",e[e.CommonJS=1]="CommonJS",e[e.AMD=2]="AMD",e[e.UMD=3]="UMD",e[e.System=4]="System",e[e.ES2015=5]="ES2015",e[e.ESNext=6]="ESNext"}(e.ModuleKind||(e.ModuleKind={})),function(e){e[e.None=0]="None",e[e.Preserve=1]="Preserve",e[e.React=2]="React",e[e.ReactNative=3]="ReactNative"}(e.JsxEmit||(e.JsxEmit={})),function(e){e[e.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",e[e.LineFeed=1]="LineFeed"}(e.NewLineKind||(e.NewLineKind={})),function(e){e[e.Unknown=0]="Unknown",e[e.JS=1]="JS",e[e.JSX=2]="JSX",e[e.TS=3]="TS",e[e.TSX=4]="TSX",e[e.External=5]="External",e[e.JSON=6]="JSON"}(e.ScriptKind||(e.ScriptKind={})),function(e){e[e.ES3=0]="ES3",e[e.ES5=1]="ES5",e[e.ES2015=2]="ES2015",e[e.ES2016=3]="ES2016",e[e.ES2017=4]="ES2017",e[e.ESNext=5]="ESNext",e[e.Latest=5]="Latest"}(e.ScriptTarget||(e.ScriptTarget={})),function(e){e[e.Standard=0]="Standard",e[e.JSX=1]="JSX"}(e.LanguageVariant||(e.LanguageVariant={})),function(e){e[e.Simple=0]="Simple",e[e.Pretty=1]="Pretty"}(e.DiagnosticStyle||(e.DiagnosticStyle={})),function(e){e[e.None=0]="None",e[e.Recursive=1]="Recursive"}(e.WatchDirectoryFlags||(e.WatchDirectoryFlags={})),function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.backtick=96]="backtick",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.hash=35]="hash",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"}(e.CharacterCodes||(e.CharacterCodes={})),function(e){e.Ts=".ts",e.Tsx=".tsx",e.Dts=".d.ts",e.Js=".js",e.Jsx=".jsx",e.Json=".json"}(e.Extension||(e.Extension={})),function(e){e[e.None=0]="None",e[e.TypeScript=1]="TypeScript",e[e.ContainsTypeScript=2]="ContainsTypeScript",e[e.ContainsJsx=4]="ContainsJsx",e[e.ContainsESNext=8]="ContainsESNext",e[e.ContainsES2017=16]="ContainsES2017",e[e.ContainsES2016=32]="ContainsES2016",e[e.ES2015=64]="ES2015",e[e.ContainsES2015=128]="ContainsES2015",e[e.Generator=256]="Generator",e[e.ContainsGenerator=512]="ContainsGenerator",e[e.DestructuringAssignment=1024]="DestructuringAssignment",e[e.ContainsDestructuringAssignment=2048]="ContainsDestructuringAssignment",e[e.ContainsDecorators=4096]="ContainsDecorators",e[e.ContainsPropertyInitializer=8192]="ContainsPropertyInitializer",e[e.ContainsLexicalThis=16384]="ContainsLexicalThis",e[e.ContainsCapturedLexicalThis=32768]="ContainsCapturedLexicalThis",e[e.ContainsLexicalThisInComputedPropertyName=65536]="ContainsLexicalThisInComputedPropertyName",e[e.ContainsDefaultValueAssignments=131072]="ContainsDefaultValueAssignments",e[e.ContainsParameterPropertyAssignments=262144]="ContainsParameterPropertyAssignments",e[e.ContainsSpread=524288]="ContainsSpread",e[e.ContainsObjectSpread=1048576]="ContainsObjectSpread",e[e.ContainsRest=524288]="ContainsRest",e[e.ContainsObjectRest=1048576]="ContainsObjectRest",e[e.ContainsComputedPropertyName=2097152]="ContainsComputedPropertyName",e[e.ContainsBlockScopedBinding=4194304]="ContainsBlockScopedBinding",e[e.ContainsBindingPattern=8388608]="ContainsBindingPattern",e[e.ContainsYield=16777216]="ContainsYield",e[e.ContainsHoistedDeclarationOrCompletion=33554432]="ContainsHoistedDeclarationOrCompletion",e[e.ContainsDynamicImport=67108864]="ContainsDynamicImport",e[e.HasComputedFlags=536870912]="HasComputedFlags",e[e.AssertTypeScript=3]="AssertTypeScript",e[e.AssertJsx=4]="AssertJsx",e[e.AssertESNext=8]="AssertESNext",e[e.AssertES2017=16]="AssertES2017",e[e.AssertES2016=32]="AssertES2016",e[e.AssertES2015=192]="AssertES2015",e[e.AssertGenerator=768]="AssertGenerator",e[e.AssertDestructuringAssignment=3072]="AssertDestructuringAssignment",e[e.NodeExcludes=536872257]="NodeExcludes",e[e.ArrowFunctionExcludes=601249089]="ArrowFunctionExcludes",e[e.FunctionExcludes=601281857]="FunctionExcludes",e[e.ConstructorExcludes=601015617]="ConstructorExcludes",e[e.MethodOrAccessorExcludes=601015617]="MethodOrAccessorExcludes",e[e.ClassExcludes=539358529]="ClassExcludes",e[e.ModuleExcludes=574674241]="ModuleExcludes",e[e.TypeExcludes=-3]="TypeExcludes",e[e.ObjectLiteralExcludes=540087617]="ObjectLiteralExcludes",e[e.ArrayLiteralOrCallOrNewExcludes=537396545]="ArrayLiteralOrCallOrNewExcludes",e[e.VariableDeclarationListExcludes=546309441]="VariableDeclarationListExcludes",e[e.ParameterExcludes=536872257]="ParameterExcludes",e[e.CatchClauseExcludes=537920833]="CatchClauseExcludes",e[e.BindingPatternExcludes=537396545]="BindingPatternExcludes",e[e.TypeScriptClassSyntaxMask=274432]="TypeScriptClassSyntaxMask",e[e.ES2015FunctionSyntaxMask=163840]="ES2015FunctionSyntaxMask"}(e.TransformFlags||(e.TransformFlags={})),function(e){e[e.SingleLine=1]="SingleLine",e[e.AdviseOnEmitNode=2]="AdviseOnEmitNode",e[e.NoSubstitution=4]="NoSubstitution",e[e.CapturesThis=8]="CapturesThis",e[e.NoLeadingSourceMap=16]="NoLeadingSourceMap",e[e.NoTrailingSourceMap=32]="NoTrailingSourceMap",e[e.NoSourceMap=48]="NoSourceMap",e[e.NoNestedSourceMaps=64]="NoNestedSourceMaps",e[e.NoTokenLeadingSourceMaps=128]="NoTokenLeadingSourceMaps",e[e.NoTokenTrailingSourceMaps=256]="NoTokenTrailingSourceMaps",e[e.NoTokenSourceMaps=384]="NoTokenSourceMaps",e[e.NoLeadingComments=512]="NoLeadingComments",e[e.NoTrailingComments=1024]="NoTrailingComments",e[e.NoComments=1536]="NoComments",e[e.NoNestedComments=2048]="NoNestedComments",e[e.HelperName=4096]="HelperName",e[e.ExportName=8192]="ExportName",e[e.LocalName=16384]="LocalName",e[e.InternalName=32768]="InternalName",e[e.Indented=65536]="Indented",e[e.NoIndentation=131072]="NoIndentation",e[e.AsyncFunctionBody=262144]="AsyncFunctionBody",e[e.ReuseTempVariableScope=524288]="ReuseTempVariableScope",e[e.CustomPrologue=1048576]="CustomPrologue",e[e.NoHoisting=2097152]="NoHoisting",e[e.HasEndOfDeclarationMarker=4194304]="HasEndOfDeclarationMarker",e[e.Iterator=8388608]="Iterator",e[e.NoAsciiEscaping=16777216]="NoAsciiEscaping",e[e.TypeScriptClassWrapper=33554432]="TypeScriptClassWrapper"}(e.EmitFlags||(e.EmitFlags={})),function(e){e[e.Extends=1]="Extends",e[e.Assign=2]="Assign",e[e.Rest=4]="Rest",e[e.Decorate=8]="Decorate",e[e.Metadata=16]="Metadata",e[e.Param=32]="Param",e[e.Awaiter=64]="Awaiter",e[e.Generator=128]="Generator",e[e.Values=256]="Values",e[e.Read=512]="Read",e[e.Spread=1024]="Spread",e[e.Await=2048]="Await",e[e.AsyncGenerator=4096]="AsyncGenerator",e[e.AsyncDelegator=8192]="AsyncDelegator",e[e.AsyncValues=16384]="AsyncValues",e[e.ExportStar=32768]="ExportStar",e[e.MakeTemplateObject=65536]="MakeTemplateObject",e[e.FirstEmitHelper=1]="FirstEmitHelper",e[e.LastEmitHelper=65536]="LastEmitHelper",e[e.ForOfIncludes=256]="ForOfIncludes",e[e.ForAwaitOfIncludes=16384]="ForAwaitOfIncludes",e[e.AsyncGeneratorIncludes=6144]="AsyncGeneratorIncludes",e[e.AsyncDelegatorIncludes=26624]="AsyncDelegatorIncludes",e[e.SpreadIncludes=1536]="SpreadIncludes"}(e.ExternalEmitHelpers||(e.ExternalEmitHelpers={})),function(e){e[e.SourceFile=0]="SourceFile",e[e.Expression=1]="Expression",e[e.IdentifierName=2]="IdentifierName",e[e.MappedTypeParameter=3]="MappedTypeParameter",e[e.Unspecified=4]="Unspecified"}(e.EmitHint||(e.EmitHint={}))}(ts||(ts={})),function(e){e.timestamp="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now?Date.now:function(){return+new Date}}(ts||(ts={})),function(e){!function(t){var n,o,r,i="function"==typeof onProfilerEvent&&!0===onProfilerEvent.profiler?onProfilerEvent:function(e){},s=!1,a=0;t.mark=function(t){s&&(o.set(t,e.timestamp()),n.set(t,(n.get(t)||0)+1),i(t))},t.measure=function(t,n,i){if(s){var l=i&&o.get(i)||e.timestamp(),c=n&&o.get(n)||a;r.set(t,(r.get(t)||0)+(l-c))}},t.getCount=function(e){return n&&n.get(e)||0},t.getDuration=function(e){return r&&r.get(e)||0},t.forEachMeasure=function(e){r.forEach((function(t,n){e(n,t)}))},t.enable=function(){n=e.createMap(),o=e.createMap(),r=e.createMap(),s=!0,a=e.timestamp()},t.disable=function(){s=!1}}(e.performance||(e.performance={}))}(ts||(ts={})),function(e){e.versionMajorMinor="2.6",e.version=e.versionMajorMinor+".1"}(ts||(ts={})),function(e){e.isExternalModuleNameRelative=function(t){return e.pathIsRelative(t)||e.isRootedDiskPath(t)}}(ts||(ts={})),function(e){function t(){var e=Object.create(null);return e.__=void 0,delete e.__,e}function n(){return new r}e.collator="object"==typeof Intl&&"function"==typeof Intl.Collator?new Intl.Collator(void 0,{usage:"sort",sensitivity:"accent"}):void 0,e.localeCompareIsCorrect=e.collator&&e.collator.compare("a","B")<0,e.createMap=n,e.createUnderscoreEscapedMap=function(){return new r},e.createSymbolTable=function(e){var t=n();if(e)for(var o=0,r=e;o<r.length;o++){var i=r[o];t.set(i.escapedName,i)}return t},e.createMapFromTemplate=function(e){var t=new r;for(var n in e)E.call(e,n)&&t.set(n,e[n]);return t};var o,r="undefined"!=typeof Map&&"entries"in Map.prototype?Map:(o=function(){function e(e,t){this.index=0,this.data=e,this.selector=t,this.keys=Object.keys(e)}return e.prototype.next=function(){var e=this.index;return e<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[e]),done:!1}):{value:void 0,done:!0}},e}(),function(){function e(){this.data=t(),this.size=0}return e.prototype.get=function(e){return this.data[e]},e.prototype.set=function(e,t){return this.has(e)||this.size++,this.data[e]=t,this},e.prototype.has=function(e){return e in this.data},e.prototype.delete=function(e){return!!this.has(e)&&(this.size--,delete this.data[e],!0)},e.prototype.clear=function(){this.data=t(),this.size=0},e.prototype.keys=function(){return new o(this.data,(function(e,t){return t}))},e.prototype.values=function(){return new o(this.data,(function(e,t){return e[t]}))},e.prototype.entries=function(){return new o(this.data,(function(e,t){return[t,e[t]]}))},e.prototype.forEach=function(e){for(var t in this.data)e(this.data[t],t)},e}());function i(e,t){if(e)for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o)return o}}function s(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(t(o,n))return o}}function a(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return n;return-1}function l(e,t){if(e)for(var n=0,o=e;n<o.length;n++){if(o[n]===t)return!0}return!1}function c(e,t,n){for(var o=n||0;o<e.length;o++)if(l(t,e.charCodeAt(o)))return o;return-1}function u(e,t){for(var n=0,o=0;o<e.length;o++)t(e[o],o,e)&&(e[n]=e[o],n++);e.length=n}function p(e,t){var n;if(e){n=[];for(var o=0;o<e.length;o++)n.push(t(e[o],o))}return n}function d(e){var t;if(e){t=[];for(var n=0,o=e;n<o.length;n++){var r=o[n];r&&(D(r)?y(t,r):t.push(r))}}return t}function g(e,t){var n;if(e){n=[];for(var o=0;o<e.length;o++){var r=t(e[o],o);r&&(D(r)?y(n,r):n.push(r))}}return n}function h(e,t){if(e){if(!t)return e.length>0;for(var n=0,o=e;n<o.length;n++){if(t(o[n]))return!0}}return!1}function f(e,t){var n;if(e){n=[];e:for(var o=0,r=e;o<r.length;o++){for(var i=r[o],s=0,a=n;s<a.length;s++){var l=a[s];if(t?t(l,i):l===i)continue e}n.push(i)}}return n}function _(e,t,n){if(!e||!t)return e===t;if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++){if(!(n?n(e[o],t[o]):e[o]===t[o]))return!1}return!0}function m(e,t){return t<0?e.length+t:t}function y(e,t,n,o){if(void 0===t||0===t.length)return e;if(void 0===e)return t.slice(n,o);n=void 0===n?0:m(t,n),o=void 0===o?t.length:m(t,o);for(var r=n;r<o&&r<t.length;r++){void 0!==t[r]&&e.push(t[r])}return e}function k(e,t){return!l(e,t)&&(e.push(t),!0)}function b(e,t){if(e&&(t=m(e,t))<e.length)return e[t]}function v(e){return b(e,-1)}function T(e,t,n,o,r){if(e&&e.length>0){var i=e.length;if(i>0){var s=void 0===o||o<0?0:o,a=void 0===r||s+r>i-1?i-1:s+r,l=void 0;for(arguments.length<=2?(l=e[s],s++):l=n;s<=a;)l=t(l,e[s],s),s++;return l}}return n}e.toPath=function(e,t,n){return n(Q(e)?j(e):ne(e,t))},function(e){e[e.LessThan=-1]="LessThan",e[e.EqualTo=0]="EqualTo",e[e.GreaterThan=1]="GreaterThan"}(e.Comparison||(e.Comparison={})),e.length=function(e){return e?e.length:0},e.forEach=i,e.firstDefined=function(e,t){for(var n=0;n<e.length;n++){var o=t(e[n],n);if(void 0!==o)return o}},e.findAncestor=function(e,t){for(;e;){var n=t(e);if("quit"===n)return;if(n)return e;e=e.parent}},e.zipWith=function(e,t,n){var o=[];Pe.assert(e.length===t.length);for(var r=0;r<e.length;r++)o.push(n(e[r],t[r],r));return o},e.zipToMap=function(e,t){Pe.assert(e.length===t.length);for(var o=n(),r=0;r<e.length;++r)o.set(e[r],t[r]);return o},e.every=function(e,t){if(e)for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0},e.find=s,e.findLast=function(e,t){for(var n=e.length-1;n>=0;n--){var o=e[n];if(t(o,n))return o}},e.findIndex=a,e.findMap=function(e,t){for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o)return o}Pe.fail()},e.contains=l,e.indexOf=function(e,t){if(e)for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},e.indexOfAnyCharCode=c,e.countWhere=function(e,t){var n=0;if(e)for(var o=0;o<e.length;o++){t(e[o],o)&&n++}return n},e.filter=function(e,t){if(e){for(var n=e.length,o=0;o<n&&t(e[o]);)o++;if(o<n){var r=e.slice(0,o);for(o++;o<n;){var i=e[o];t(i)&&r.push(i),o++}return r}}return e},e.filterMutate=u,e.clear=function(e){e.length=0},e.map=p,e.sameMap=function(e,t){var n;if(e)for(var o=0;o<e.length;o++)if(n)n.push(t(e[o],o));else{var r=e[o],i=t(r,o);r!==i&&(n=e.slice(0,o)).push(i)}return n||e},e.flatten=d,e.flatMap=g,e.flatMapIter=function(e,t){for(var n=[];;){var o=e.next(),r=o.value;if(o.done)break;var i=t(r);i&&(D(i)?n.push.apply(n,i):n.push(i))}return n},e.sameFlatMap=function(e,t){var n;if(e)for(var o=0;o<e.length;o++){var r=e[o],i=t(r,o);(n||r!==i||D(i))&&(n||(n=e.slice(0,o)),D(i)?y(n,i):n.push(i))}return n||e},e.mapDefined=function(e,t){var n=[];if(e)for(var o=0;o<e.length;o++){var r=t(e[o],o);void 0!==r&&n.push(r)}return n},e.mapDefinedIter=function(e,t){for(var n=[];;){var o=e.next(),r=o.value;if(o.done)break;var i=t(r);void 0!==i&&n.push(i)}return n},e.span=function(e,t){if(e){for(var n=0;n<e.length;n++)if(!t(e[n],n))return[e.slice(0,n),e.slice(n)];return[e.slice(0),[]]}},e.spanMap=function(e,t,n){var o;if(e){o=[];for(var r=e.length,i=void 0,s=void 0,a=0,l=0;a<r;){for(;l<r;){if(s=t(e[l],l),0===l)i=s;else if(s!==i)break;l++}if(a<l){var c=n(e.slice(a,l),i,a,l);c&&o.push(c),a=l}i=s,l++}}return o},e.mapEntries=function(e,t){if(e){var o=n();return e.forEach((function(e,n){var r=t(n,e),i=r[0],s=r[1];o.set(i,s)})),o}},e.some=h,e.concatenate=function(e,t){return h(t)?h(e)?e.concat(t):t:e},e.deduplicate=f,e.arrayIsEqualTo=_,e.changesAffectModuleResolution=function(e,t){return!(e&&e.module===t.module&&e.moduleResolution===t.moduleResolution&&e.noResolve===t.noResolve&&e.target===t.target&&e.noLib===t.noLib&&e.jsx===t.jsx&&e.allowJs===t.allowJs&&e.rootDir===t.rootDir&&e.configFilePath===t.configFilePath&&e.baseUrl===t.baseUrl&&e.maxNodeModuleJsDepth===t.maxNodeModuleJsDepth&&_(e.lib,t.lib)&&_(e.typeRoots,t.typeRoots)&&_(e.rootDirs,t.rootDirs)&&x(e.paths,t.paths))},e.compact=function(e){var t;if(e)for(var n=0;n<e.length;n++){var o=e[n];!t&&o||(t||(t=e.slice(0,n)),o&&t.push(o))}return t||e},e.relativeComplement=function(e,t,n,o,r){if(void 0===n&&(n=L),void 0===o&&(o=0),void 0===r&&(r=0),!t||!e||0===t.length||0===e.length)return t;var i=[];e:for(;r<t.length;r++){t:for(;o<e.length;o++)switch(n(t[r],e[o])){case-1:break t;case 0:continue e;case 1:continue t}i.push(t[r])}return i},e.sum=function(e,t){for(var n=0,o=0,r=e;o<r.length;o++){n+=r[o][t]}return n},e.append=function(e,t){return void 0===t?e:void 0===e?[t]:(e.push(t),e)},e.addRange=y,e.pushIfUnique=k,e.appendIfUnique=function(e,t){return e?(k(e,t),e):[t]},e.stableSort=function(e,t){return void 0===t&&(t=L),e.map((function(e,t){return t})).sort((function(n,o){return t(e[n],e[o])||L(n,o)})).map((function(t){return e[t]}))},e.rangeEquals=function(e,t,n,o){for(;n<o;){if(e[n]!==t[n])return!1;n++}return!0},e.elementAt=b,e.firstOrUndefined=function(e){return b(e,0)},e.first=function(e){return Pe.assert(0!==e.length),e[0]},e.lastOrUndefined=v,e.last=function(e){return Pe.assert(0!==e.length),e[e.length-1]},e.singleOrUndefined=function(e){return e&&1===e.length?e[0]:void 0},e.singleOrMany=function(e){return e&&1===e.length?e[0]:e},e.replaceElement=function(e,t,n){var o=e.slice(0);return o[t]=n,o},e.binarySearch=function(e,t,n,o){if(!e||0===e.length)return-1;var r=o||0,i=e.length-1;for(n=void 0!==n?n:function(e,t){return e<t?-1:e>t?1:0};r<=i;){var s=r+(i-r>>1),a=e[s];if(0===n(a,t))return s;n(a,t)>0?i=s-1:r=s+1}return~r},e.reduceLeft=T,e.reduceRight=function(e,t,n,o,r){if(e){var i=e.length;if(i>0){var s=void 0===o||o>i-1?i-1:o,a=void 0===r||s-r<0?0:s-r,l=void 0;for(arguments.length<=2?(l=e[s],s--):l=n;s>=a;)l=t(l,e[s],s),s--;return l}}return n};var E=Object.prototype.hasOwnProperty;function S(e,t){return E.call(e,t)}function C(e,t){e.forEach((function(e,n){t.set(n,e)}))}function x(e,t,n){if(e===t)return!0;if(!e||!t)return!1;for(var o in e)if(E.call(e,o)){if(void 0===!E.call(t,o))return!1;if(n?!n(e[o],t[o]):e[o]!==t[o])return!1}for(var o in t)if(E.call(t,o)&&!E.call(e,o))return!1;return!0}function B(e,t,o){for(var r=n(),i=0,s=e;i<s.length;i++){var a=s[i];r.set(t(a),o?o(a):a)}return r}function A(e,t){var n=this.get(e);return n?n.push(t):this.set(e,n=[t]),n}function I(e,t){var n=this.get(e);n&&($e(n,t),n.length||this.delete(e))}function D(e){return Array.isArray?Array.isArray(e):e instanceof Array}function N(e){return"string"==typeof e}function w(e){var t;return function(){return e&&(t=e(),e=void 0),t}}function R(e,t,n,o,r){if(r){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return function(e){return T(i,(function(e,t){return t(e)}),e)}}return o?function(r){return o(n(t(e(r))))}:n?function(o){return n(t(e(o)))}:t?function(n){return t(e(n))}:e?function(t){return e(t)}:function(e){return e}}function O(e,t,n){return n=n||0,e.replace(/{(\d+)}/g,(function(e,o){return t[+o+n]}))}function P(t){return e.localizedDiagnosticMessages&&e.localizedDiagnosticMessages[t.key]||t.message}function L(e,t){return e===t?0:void 0===e?-1:void 0===t?1:e<t?-1:1}function M(t,n,o){if(t===n)return 0;if(void 0===t)return-1;if(void 0===n)return 1;if(o){if(e.collator){var r=e.localeCompareIsCorrect?e.collator.compare(t,n):t.localeCompare(n,void 0,{usage:"sort",sensitivity:"accent"});return r<0?-1:r>0?1:0}if((t=t.toUpperCase())===(n=n.toUpperCase()))return 0}return t<n?-1:1}function F(e,t){return M(e,t,!0)}function U(e){return e.file?e.file.fileName:void 0}function H(e,t){return L(U(e),U(t))||L(e.start,t.start)||L(e.length,t.length)||L(e.code,t.code)||function(e,t){for(;e&&t;){var n=L(N(e)?e:e.messageText,N(t)?t:t.messageText);if(n)return n;e=N(e)?void 0:e.next,t=N(t)?void 0:t.next}if(!e&&!t)return 0;return e?1:-1}(e.messageText,t.messageText)||0}function V(e){if(e.length<2)return e;for(var t=[e[0]],n=e[0],o=1;o<e.length;o++){var r=e[o];0===H(r,n)||(t.push(r),n=r)}return t}function G(e){return e.replace(/\\/g,"/")}function W(e){if(47===e.charCodeAt(0)){if(47!==e.charCodeAt(1))return 1;var t=e.indexOf("/",2);if(t<0)return 2;var n=e.indexOf("/",t+1);return n<0?t+1:n+1}if(58===e.charCodeAt(1))return 47===e.charCodeAt(2)?3:2;if(0===e.lastIndexOf("file:///",0))return"file:///".length;var o=e.indexOf("://");return-1!==o?o+"://".length:0}e.hasProperty=S,e.getProperty=function(e,t){return E.call(e,t)?e[t]:void 0},e.getOwnKeys=function(e){var t=[];for(var n in e)E.call(e,n)&&t.push(n);return t},e.getOwnValues=function(e){var t=[];for(var n in e)E.call(e,n)&&t.push(e[n]);return t},e.arrayFrom=function(e,t){for(var n,o=[],r=e.next(),i=r.value,s=r.done;!s;i=(n=e.next()).value,s=n.done,n)o.push(t?t(i):i);return o},e.forEachEntry=function(e,t){for(var n,o=e.entries(),r=o.next(),i=r.value,s=r.done;!s;i=(n=o.next()).value,s=n.done,n){var a=i[0],l=t(i[1],a);if(l)return l}},e.forEachKey=function(e,t){for(var n,o=e.keys(),r=o.next(),i=r.value,s=r.done;!s;i=(n=o.next()).value,s=n.done,n){var a=t(i);if(a)return a}},e.copyEntries=C,e.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var o=0,r=t;o<r.length;o++){var i=r[o];for(var s in i)S(i,s)&&(e[s]=i[s])}return e},e.equalOwnProperties=x,e.arrayToMap=B,e.arrayToNumericMap=function(e,t){for(var n=[],o=0,r=e;o<r.length;o++){var i=r[o];n[t(i)]=i}return n},e.arrayToSet=function(e,t){return B(e,t||function(e){return e},(function(){return!0}))},e.cloneMap=function(e){var t=n();return C(e,t),t},e.clone=function(e){var t={};for(var n in e)E.call(e,n)&&(t[n]=e[n]);return t},e.extend=function(e,t){var n={};for(var o in t)E.call(t,o)&&(n[o]=t[o]);for(var o in e)E.call(e,o)&&(n[o]=e[o]);return n},e.createMultiMap=function(){var e=n();return e.add=A,e.remove=I,e},e.isArray=D,e.isString=N,e.tryCast=function(e,t){return void 0!==e&&t(e)?e:void 0},e.cast=function(e,t){if(void 0!==e&&t(e))return e;Pe.fail("Invalid cast. The supplied value did not pass the test '"+Pe.getFunctionName(t)+"'.")},e.noop=function(){},e.returnFalse=function(){return!1},e.returnTrue=function(){return!0},e.identity=function(e){return e},e.notImplemented=function(){throw new Error("Not implemented")},e.memoize=w,e.chain=function(e,t,n,o,r){if(r){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return function(e){return R.apply(void 0,p(i,(function(t){return t(e)})))}}return o?function(r){return R(e(r),t(r),n(r),o(r))}:n?function(o){return R(e(o),t(o),n(o))}:t?function(n){return R(e(n),t(n))}:e?function(t){return R(e(t))}:function(e){return function(e){return e}}},e.compose=R,e.formatStringFromArgs=O,e.localizedDiagnosticMessages=void 0,e.getLocaleSpecificMessage=P,e.createFileDiagnostic=function(e,t,n,o){Pe.assertGreaterThanOrEqual(t,0),Pe.assertGreaterThanOrEqual(n,0),e&&(Pe.assertLessThanOrEqual(t,e.text.length),Pe.assertLessThanOrEqual(t+n,e.text.length));var r=P(o);return arguments.length>4&&(r=O(r,arguments,4)),{file:e,start:t,length:n,messageText:r,category:o.category,code:o.code}},e.formatMessage=function(e,t){var n=P(t);return arguments.length>2&&(n=O(n,arguments,2)),n},e.createCompilerDiagnostic=function(e){var t=P(e);return arguments.length>1&&(t=O(t,arguments,1)),{file:void 0,start:void 0,length:void 0,messageText:t,category:e.category,code:e.code}},e.createCompilerDiagnosticFromMessageChain=function(e){return{file:void 0,start:void 0,length:void 0,code:e.code,category:e.category,messageText:e.next?e:e.messageText}},e.chainDiagnosticMessages=function(e,t){var n=P(t);return arguments.length>2&&(n=O(n,arguments,2)),{messageText:n,category:t.category,code:t.code,next:e}},e.concatenateDiagnosticMessageChains=function(e,t){for(var n=e;n.next;)n=n.next;return n.next=t,e},e.compareValues=L,e.compareStrings=M,e.compareStringsCaseInsensitive=F,e.compareDiagnostics=H,e.sortAndDeduplicateDiagnostics=function(e){return V(e.sort(H))},e.deduplicateSortedDiagnostics=V,e.normalizeSlashes=G,e.getRootLength=W,e.directorySeparator="/";function K(t,n){for(var o=[],r=0,i=t.substr(n).split(e.directorySeparator);r<i.length;r++){var s=i[r];"."!==s&&(".."===s&&o.length>0&&".."!==v(o)?o.pop():s&&o.push(s))}return o}function j(e){return z(e).path}function z(t){var n=W(t=G(t)),o=t.substr(0,n),r=K(t,n);if(r.length){var i=o+r.join(e.directorySeparator);return{path:$(t)?i+e.directorySeparator:i,parts:r}}return{path:o,parts:r}}function $(e){return 47===e.charCodeAt(e.length-1)}function X(t){return t.substr(0,Math.max(W(t),t.lastIndexOf(e.directorySeparator)))}function Y(e){return e&&!Q(e)&&de(e,"://")}function J(e){return e.target||0}function q(t){return"number"==typeof t.module?t.module:J(t)>=2?e.ModuleKind.ES2015:e.ModuleKind.CommonJS}function Z(e){for(var t=!1,n=0;n<e.length;n++)if(42===e.charCodeAt(n)){if(t)return!1;t=!0}return!0}function Q(e){return e&&0!==W(e)}function ee(e,t){var n=K(e,t);return[e.substr(0,t)].concat(n)}function te(e,t){var n=W(e=G(e));return 0===n&&(n=W(e=ae(G(t),e))),ee(e,n)}function ne(e,t){return oe(te(e,t))}function oe(t){if(t&&t.length)return t[0]+t.slice(1).join(e.directorySeparator)}function re(t,n){return Y(t)?function(t){for(var n=t.length,o=t.indexOf("://")+"://".length;o<n&&47===t.charCodeAt(o);)o++;if(o===n)return[t];var r=t.indexOf(e.directorySeparator,o);return-1!==r?ee(t,o=r+1):[t+e.directorySeparator]}(t):te(t,n)}function ie(t,n,o,r,i){var s,a=re(n,o),l=re(t,o);for(l.length>1&&""===v(l)&&l.pop(),s=0;s<a.length&&s<l.length&&r(l[s])===r(a[s]);s++);if(s){for(var c="",u=a.slice(s,a.length);s<l.length;s++)""!==l[s]&&(c=c+".."+e.directorySeparator);return c+u.join(e.directorySeparator)}var p=oe(a);return i&&Q(p)&&(p="file:///"+p),p}function se(t){if(void 0!==t){var n=t.lastIndexOf(e.directorySeparator);return n<0?t:t.substring(n+1)}}function ae(t,n){return t&&t.length?n&&n.length?0!==W(n)?n:t.charAt(t.length-1)===e.directorySeparator?t+n:t+e.directorySeparator+n:t:n}function le(t){return t.charAt(t.length-1)===e.directorySeparator?t.substr(0,t.length-1):t}function ce(e,t,n,o){if(void 0===e||void 0===t)return!1;if(e===t)return!0;if((e=le(e))===(t=le(t)))return!0;var r=te(e,n),i=te(t,n);if(i.length<r.length)return!1;for(var s=0;s<r.length;s++){if(0!==M(r[s],i[s],o))return!1}return!0}function ue(e,t){return 0===e.lastIndexOf(t,0)}function pe(e,t){var n=e.length-t.length;return n>=0&&e.indexOf(t,n)===n}function de(e,t){return-1!==e.indexOf(t)}function ge(e){return de(se(e),".")}function he(e,t){return e.length>t.length&&pe(e,t)}function fe(e,t){for(var n=0,o=t;n<o.length;n++){if(he(e,o[n]))return!0}return!1}e.normalizePath=j,e.normalizePathAndParts=z,e.pathEndsWithDirectorySeparator=$,e.getDirectoryPath=X,e.isUrl=Y,e.pathIsRelative=function(e){return/^\.\.?($|[\\/])/.test(e)},e.moduleHasNonRelativeName=function(t){return!e.isExternalModuleNameRelative(t)},e.getEmitScriptTarget=J,e.getEmitModuleKind=q,e.getEmitModuleResolutionKind=function(t){var n=t.moduleResolution;return void 0===n&&(n=q(t)===e.ModuleKind.CommonJS?e.ModuleResolutionKind.NodeJs:e.ModuleResolutionKind.Classic),n},e.hasZeroOrOneAsteriskCharacter=Z,e.isRootedDiskPath=Q,e.convertToRelativePath=function(e,t,n){return Q(e)?ie(t,e,t,n,!1):e},e.getNormalizedPathComponents=te,e.getNormalizedAbsolutePath=ne,e.getNormalizedPathFromPathComponents=oe,e.getRelativePathToDirectoryOrUrl=ie,e.getBaseFileName=se,e.combinePaths=ae,e.removeTrailingDirectorySeparator=le,e.ensureTrailingDirectorySeparator=function(t){return t.charAt(t.length-1)!==e.directorySeparator?t+e.directorySeparator:t},e.comparePaths=function(e,t,n,o){if(e===t)return 0;if(void 0===e)return-1;if(void 0===t)return 1;e=le(e),t=le(t);for(var r=te(e,n),i=te(t,n),s=Math.min(r.length,i.length),a=0;a<s;a++){var l=M(r[a],i[a],o);if(0!==l)return l}return L(r.length,i.length)},e.containsPath=ce,e.startsWith=ue,e.removePrefix=function(e,t){return ue(e,t)?e.substr(t.length):e},e.endsWith=pe,e.stringContains=de,e.hasExtension=ge,e.fileExtensionIs=he,e.fileExtensionIsOneOf=fe;var _e=/[^\w\s\/]/g,me=[42,63];e.commonPackageFolders=["node_modules","bower_components","jspm_packages"];var ye="(?!("+e.commonPackageFolders.join("|")+")(/|$))",ke={singleAsteriskRegexFragment:"([^./]|(\\.(?!min\\.js$))?)*",doubleAsteriskRegexFragment:"(/"+ye+"[^/.][^/]*)*?",replaceWildcardCharacter:function(e){return xe(e,ke.singleAsteriskRegexFragment)}},be={singleAsteriskRegexFragment:"[^/]*",doubleAsteriskRegexFragment:"(/"+ye+"[^/.][^/]*)*?",replaceWildcardCharacter:function(e){return xe(e,be.singleAsteriskRegexFragment)}},ve={singleAsteriskRegexFragment:"[^/]*",doubleAsteriskRegexFragment:"(/.+?)?",replaceWildcardCharacter:function(e){return xe(e,ve.singleAsteriskRegexFragment)}},Te={files:ke,directories:be,exclude:ve};function Ee(e,t,n){var o=Se(e,t,n);if(o&&o.length)return"^("+o.map((function(e){return"("+e+")"})).join("|")+")"+("exclude"===n?"($|/)":"$")}function Se(t,n,o){if(void 0!==t&&0!==t.length)return g(t,(function(t){return t&&function(t,n,o,r){var i=r.singleAsteriskRegexFragment,s=r.doubleAsteriskRegexFragment,a=r.replaceWildcardCharacter,l="",c=!1,u=!1,p=te(t,n),d=v(p);if("exclude"!==o&&"**"===d)return;p[0]=le(p[0]),Ce(d)&&p.push("**","*");for(var g=0,h=0,f=p;h<f.length;h++){var _=f[h];if("**"===_){if(c)return;l+=s,c=!0}else if("directories"===o&&(l+="(",g++),u&&(l+=e.directorySeparator),"exclude"!==o){var m="";42===_.charCodeAt(0)?(m+="([^./]"+i+")?",_=_.substr(1)):63===_.charCodeAt(0)&&(m+="[^./]",_=_.substr(1)),(m+=_.replace(_e,a))!==_&&(l+=ye),l+=m}else l+=_.replace(_e,a);u=!0}for(;g>0;)l+=")?",g--;return l}(t,n,o,Te[o])}))}function Ce(e){return!/[.*?]/.test(e)}function xe(e,t){return"*"===e?t:"?"===e?"[^/]":"\\"+e}function Be(e,t,n,o,r){e=j(e);var i=ae(r=j(r),e);return{includeFilePatterns:p(Se(n,i,"files"),(function(e){return"^"+e+"$"})),includeFilePattern:Ee(n,i,"files"),includeDirectoryPattern:Ee(n,i,"directories"),excludePattern:Ee(t,i,"exclude"),basePaths:Ie(e,n,o)}}function Ae(e,t,n,o,r,i,s,l){for(var c=Be(e=j(e),n,o,r,i=j(i)),u=r?"":"i",p=c.includeFilePatterns&&c.includeFilePatterns.map((function(e){return new RegExp(e,u)})),g=c.includeDirectoryPattern&&new RegExp(c.includeDirectoryPattern,u),h=c.excludePattern&&new RegExp(c.excludePattern,u),f=p?p.map((function(){return[]})):[[]],_=r?M:F,m=0,y=c.basePaths;m<y.length;m++){var k=y[m];b(k,ae(i,k),s)}return d(f);function b(e,n,o){for(var r=l(e),i=r.files,s=r.directories,c=function(o){var r=ae(e,o),i=ae(n,o);if(t&&!fe(r,t))return"continue";if(h&&h.test(i))return"continue";if(p){var s=a(p,(function(e){return e.test(i)}));-1!==s&&f[s].push(r)}else f[0].push(r)},u=0,d=i=i.slice().sort(_);u<d.length;u++){c(k=d[u])}if(void 0===o||0!=--o)for(var m=0,y=s=s.slice().sort(_);m<y.length;m++){var k=y[m],v=ae(e,k),T=ae(n,k);g&&!g.test(T)||h&&h.test(T)||b(v,T,o)}}}function Ie(t,n,o){var r=[t];if(n){for(var i=[],s=0,a=n;s<a.length;s++){var l=a[s],c=Q(l)?l:j(ae(t,l));i.push(De(c))}i.sort(o?M:F);for(var u=function(n){e.every(r,(function(e){return!ce(e,n,t,!o)}))&&r.push(n)},p=0,d=i;p<d.length;p++){u(d[p])}}return r}function De(t){var n=c(t,me);return n<0?ge(t)?le(X(t)):t:t.substring(0,t.lastIndexOf(e.directorySeparator,n))}function Ne(e){switch(e.substr(e.lastIndexOf(".")).toLowerCase()){case".js":return 1;case".jsx":return 2;case".ts":return 3;case".tsx":return 4;case".json":return 6;default:return 0}}e.getRegularExpressionForWildcard=Ee,e.isImplicitGlob=Ce,e.getFileMatcherPatterns=Be,e.matchFiles=Ae,e.ensureScriptKind=function(e,t){return t||Ne(e)||3},e.getScriptKindFromFileName=Ne,e.supportedTypeScriptExtensions=[".ts",".tsx",".d.ts"],e.supportedTypescriptExtensionsForExtractExtension=[".d.ts",".ts",".tsx"],e.supportedJavascriptExtensions=[".js",".jsx"];var we=e.supportedTypeScriptExtensions.concat(e.supportedJavascriptExtensions);function Re(t,n){var o=t&&t.allowJs;return n&&0!==n.length&&o?f(we.concat(n.map((function(e){return e.extension})))):o?we:e.supportedTypeScriptExtensions}function Oe(e,t){return e<2?0:e<t.length?2:t.length}e.getSupportedExtensions=Re,e.hasJavaScriptFileExtension=function(t){return i(e.supportedJavascriptExtensions,(function(e){return he(t,e)}))},e.hasTypeScriptFileExtension=function(t){return i(e.supportedTypeScriptExtensions,(function(e){return he(t,e)}))},e.isSupportedSourceFileName=function(e,t,n){if(!e)return!1;for(var o=0,r=Re(t,n);o<r.length;o++){if(he(e,r[o]))return!0}return!1},function(e){e[e.TypeScriptFiles=0]="TypeScriptFiles",e[e.DeclarationAndJavaScriptFiles=2]="DeclarationAndJavaScriptFiles",e[e.Highest=0]="Highest",e[e.Lowest=2]="Lowest"}(e.ExtensionPriority||(e.ExtensionPriority={})),e.getExtensionPriority=function(e,t){for(var n=t.length-1;n>=0;n--)if(he(e,t[n]))return Oe(n,t);return 0},e.adjustExtensionPriority=Oe,e.getNextLowestExtensionPriority=function(e,t){return e<2?2:t.length};var Pe,Le=[".d.ts",".ts",".js",".tsx",".jsx"];function Me(e){for(var t=0,n=Le;t<n.length;t++){var o=Fe(e,n[t]);if(void 0!==o)return o}return e}function Fe(e,t){return he(e,t)?Ue(e,t):void 0}function Ue(e,t){return e.substring(0,e.length-t.length)}function He(e,t){this.flags=e,this.escapedName=t,this.declarations=void 0}function Ve(e,t){this.flags=t,Pe.isDebugging&&(this.checker=e)}function Ge(){}function We(e,t,n){this.id=0,this.kind=e,this.pos=t,this.end=n,this.flags=0,this.modifierFlagsCache=0,this.transformFlags=0,this.parent=void 0,this.original=void 0}function Ke(e,t,n){this.fileName=e,this.text=t,this.skipTrivia=n||function(e){return e}}function je(e,t){for(var n=t;n<e.length-1;n++)e[n]=e[n+1];e.pop()}function ze(e,t){e[t]=e[e.length-1],e.pop()}function $e(e,t){!function(e,t){for(var n=0;n<e.length;n++)if(t(e[n])){ze(e,n);break}}(e,(function(e){return e===t}))}function Xe(e){return e?function(e){return e}:function(e){return e.toLowerCase()}}function Ye(e,t,n){for(var o=void 0,r=-1,i=0,s=e;i<s.length;i++){var a=s[i],l=t(a);Je(l,n)&&l.prefix.length>r&&(r=l.prefix.length,o=a)}return o}function Je(e,t){var n=e.prefix,o=e.suffix;return t.length>=n.length+o.length&&ue(t,n)&&pe(t,o)}function qe(e){Pe.assert(Z(e));var t=e.indexOf("*");return-1===t?void 0:{prefix:e.substr(0,t),suffix:e.substr(t+1)}}function Ze(t){return s(e.supportedTypescriptExtensionsForExtractExtension,(function(e){return he(t,e)}))||s(e.supportedJavascriptExtensions,(function(e){return he(t,e)}))}e.removeFileExtension=Me,e.tryRemoveExtension=Fe,e.removeExtension=Ue,e.changeExtension=function(e,t){return Me(e)+t},e.objectAllocator={getNodeConstructor:function(){return We},getTokenConstructor:function(){return We},getIdentifierConstructor:function(){return We},getSourceFileConstructor:function(){return We},getSymbolConstructor:function(){return He},getTypeConstructor:function(){return Ve},getSignatureConstructor:function(){return Ge},getSourceMapSourceConstructor:function(){return Ke}},function(e){e[e.None=0]="None",e[e.Normal=1]="Normal",e[e.Aggressive=2]="Aggressive",e[e.VeryAggressive=3]="VeryAggressive"}(e.AssertionLevel||(e.AssertionLevel={})),function(e){function t(e,n){var o=new Error(e?"Debug Failure. "+e:"Debug Failure.");throw Error.captureStackTrace&&Error.captureStackTrace(o,n||t),o}e.currentAssertionLevel=0,e.isDebugging=!1,e.shouldAssert=function(t){return e.currentAssertionLevel>=t},e.assert=function e(n,o,r,i){n||(r&&(o+="\r\nVerbose Debug Information: "+("string"==typeof r?r:r())),t(o?"False expression: "+o:"False expression.",i||e))},e.assertEqual=function(e,n,o,r){e!==n&&t("Expected "+e+" === "+n+". "+(o?r?o+" "+r:o:""))},e.assertLessThan=function(e,n,o){e>=n&&t("Expected "+e+" < "+n+". "+(o||""))},e.assertLessThanOrEqual=function(e,n){e>n&&t("Expected "+e+" <= "+n)},e.assertGreaterThanOrEqual=function(e,n){e<n&&t("Expected "+e+" >= "+n)},e.fail=t,e.assertNever=function e(n,o,r){return t(o||"Illegal value: "+n,r||e)},e.getFunctionName=function(e){if("function"!=typeof e)return"";if(e.hasOwnProperty("name"))return e.name;var t=Function.prototype.toString.call(e),n=/^function\s+([\w\$]+)\s*\(/.exec(t);return n?n[1]:""}}(Pe=e.Debug||(e.Debug={})),e.orderedRemoveItem=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return je(e,n),!0;return!1},e.orderedRemoveItemAt=je,e.unorderedRemoveItemAt=ze,e.unorderedRemoveItem=$e,e.createGetCanonicalFileName=Xe,e.matchPatternOrExact=function(e,t){for(var n=[],o=0,r=e;o<r.length;o++){var i=r[o],s=qe(i);if(s)n.push(s);else if(i===t)return i}return Ye(n,(function(e){return e}),t)},e.patternText=function(e){return e.prefix+"*"+e.suffix},e.matchedText=function(e,t){return Pe.assert(Je(e,t)),t.substr(e.prefix.length,t.length-e.suffix.length)},e.findBestPatternMatch=Ye,e.tryParsePattern=qe,e.positionIsSynthesized=function(e){return!(e>=0)},e.extensionIsTypeScript=function(e){return".ts"===e||".tsx"===e||".d.ts"===e},e.extensionFromPath=function(e){var t=Ze(e);if(void 0!==t)return t;Pe.fail("File "+e+" has unknown extension.")},e.isAnySupportedFileExtension=function(e){return void 0!==Ze(e)},e.tryGetExtensionFromPath=Ze,e.getAnyExtensionFromPath=function(e){var t=se(e),n=t.lastIndexOf(".");if(n>=0)return t.substring(n)},e.isCheckJsEnabledForFile=function(e,t){return e.checkJsDirective?e.checkJsDirective.enabled:t.checkJs},e.and=function(e,t){return function(n){return e(n)&&t(n)}},e.assertTypeIsNever=function(e){},e.createCachedDirectoryStructureHost=function(t){var o=n(),r=w((function(){return t.getCurrentDirectory()})),i=Xe(t.useCaseSensitiveFileNames);return{useCaseSensitiveFileNames:t.useCaseSensitiveFileNames,newLine:t.newLine,readFile:function(e,n){return t.readFile(e,n)},write:function(e){return t.write(e)},writeFile:function(e,n,o){var r=l(s(e));r&&y(r,c(e),!0);return t.writeFile(e,n,o)},fileExists:function(e){var n=l(s(e));return n&&_(n.files,c(e))||t.fileExists(e)},directoryExists:function(e){var n=s(e);return o.has(n)||t.directoryExists(e)},createDirectory:function(e){var n=l(s(e)),o=c(e);n&&m(n.directories,o,!0);t.createDirectory(e)},getCurrentDirectory:r,getDirectories:function(e){var n=s(e),o=g(e,n);if(o)return o.directories.slice();return t.getDirectories(e)},readDirectory:function(e,n,o,i,l){var c=s(e),u=g(e,c);if(u)return Ae(e,n,o,i,t.useCaseSensitiveFileNames,r(),l,(function(e){var t=s(e);if(t===c)return u;return a(t)||d(e,t)}));return t.readDirectory(e,n,o,i,l)},addOrDeleteFileOrDirectory:function(e,n){if(a(n))t.directoryExists(e)||o.delete(n);else{var r=l(n);if(r){var i=c(e);if(r){var s={fileExists:t.fileExists(n),directoryExists:t.directoryExists(n)};return y(r,i,s.fileExists),m(r.directories,i,s.directoryExists),s}}}},addOrDeleteFile:function(t,n,o){if(o===e.FileWatcherEventKind.Changed)return;var r=l(n);r&&y(r,c(t),o===e.FileWatcherEventKind.Created)},clearCache:function(){o.clear()},exit:function(e){return t.exit(e)}};function s(t){return e.toPath(t,r(),i)}function a(e){return o.get(e)}function l(e){return a(X(e))}function c(e){return se(j(e))}function d(e,n){var r={files:p(t.readDirectory(e,void 0,void 0,["*.*"]),c)||[],directories:t.getDirectories(e)||[]};return o.set(n,r),r}function g(e,t){var n=a(t);if(n)return n;try{return d(e,t)}catch(e){return void Pe.assert(!o.has(t))}}function f(e,t){return i(e)===i(t)}function _(e,t){return h(e,(function(e){return f(e,t)}))}function m(e,t,n){if(_(e,t)){if(!n)return u(e,(function(e){return!f(e,t)}))}else if(n)return e.push(t)}function y(e,t,n){m(e.files,t,n)}}}(ts||(ts={})),function(e){var t;function n(){if("undefined"!=typeof process){var e=process.version;if(e){var t=e.indexOf(".");if(-1!==t)return parseInt(e.substring(1,t))}}}e.setStackTraceLimit=function(){Error.stackTraceLimit<100&&(Error.stackTraceLimit=100)},function(e){e[e.Created=0]="Created",e[e.Changed=1]="Changed",e[e.Deleted=2]="Deleted"}(t=e.FileWatcherEventKind||(e.FileWatcherEventKind={})),e.getNodeMajorVersion=n,e.sys=function(){function o(t,n){var r=e.getDirectoryPath(t),i=""!==r&&t!==r&&!n.directoryExists(r);i&&o(r,n),!i&&n.directoryExists(t)||n.createDirectory(t)}var r,i;if("undefined"!=typeof ChakraHost?(i=ChakraHost.realpath&&function(e){return ChakraHost.realpath(e)},r={newLine:ChakraHost.newLine||"\r\n",args:ChakraHost.args,useCaseSensitiveFileNames:!!ChakraHost.useCaseSensitiveFileNames,write:ChakraHost.echo,readFile:function(e,t){return ChakraHost.readFile(e)},writeFile:function(e,t,n){n&&(t="\ufeff"+t),ChakraHost.writeFile(e,t)},resolvePath:ChakraHost.resolvePath,fileExists:ChakraHost.fileExists,directoryExists:ChakraHost.directoryExists,createDirectory:ChakraHost.createDirectory,getExecutingFilePath:function(){return ChakraHost.executingFile},getCurrentDirectory:function(){return ChakraHost.currentDirectory},getDirectories:ChakraHost.getDirectories,getEnvironmentVariable:ChakraHost.getEnvironmentVariable||function(){return""},readDirectory:function(t,n,o,r,i){var s=e.getFileMatcherPatterns(t,o,r,!!ChakraHost.useCaseSensitiveFileNames,ChakraHost.currentDirectory);return ChakraHost.readDirectory(t,n,s.basePaths,s.excludePattern,s.includeFilePattern,s.includeDirectoryPattern)},exit:ChakraHost.quit,realpath:i}):"undefined"!=typeof process&&process.nextTick&&!process.browser&&"undefined"!=typeof require&&(r=function(){var o,r,i=require("fs"),s=require("path"),a=require("os"),l=require("crypto"),c=process.env.TSC_NONPOLLING_WATCHER,u=function(){var n=e.createMap(),o=e.createMultiMap();return{addFile:function(t,n){return i(t,n),r(e.getDirectoryPath(t)),{fileName:t,callback:n}},removeFile:function(t){var r,i,s,a,l;a=t.fileName,l=t.callback,o.remove(a,l),r=t.fileName,i=e.getDirectoryPath(r),(s=n.get(i))&&(s.referenceCount-=1,s.referenceCount<=0&&(s.close(),n.delete(i)))}};function r(r){var i=n.get(r);i?i.referenceCount+=1:((i=f(r||".",(function(n,i){return function(n,r,i){var s=e.isString(r)?e.getNormalizedAbsolutePath(r,i):void 0;if("change"===n||"rename"===n){var a=o.get(s);if(a)for(var l=0,c=a;l<c.length;l++)(0,c[l])(s,t.Changed)}}(n,i,r)}))).referenceCount=1,n.set(r,i))}function i(e,t){o.add(e,t)}}(),p=n()>=4,d=a.platform(),g="win32"!==d&&"win64"!==d&&!y((o=__filename,o.replace(/\w/g,(function(e){var t=e.toUpperCase();return e===t?e.toLowerCase():t}))));function h(e,n,o){return i.watchFile(e,{persistent:!0,interval:o||250},r),{close:function(){return i.unwatchFile(e,r)}};function r(o,r){var i=0==+o.mtime,s=0==+r.mtime,a=i&&!s,l=!i&&s?t.Created:a?t.Deleted:t.Changed;l===t.Changed&&+o.mtime<=+r.mtime||n(e,l)}}function f(e,n,o){var r,s=k(e)?a():l();return{close:function(){s.close()}};function a(){void 0===r&&(r=!p||"win32"!==process.platform&&"darwin"!==process.platform?{persistent:!0}:{persistent:!0,recursive:!!o});var t=i.watch(e,r,n);return t.on("error",(function(){k(e)||(s=l(),n("rename",""))})),t}function l(){return h(e,(function(o,r){r===t.Created&&k(e)&&(s.close(),s=a(),n("rename",""))}))}}function _(t){try{for(var n=i.readdirSync(t||".").sort(),o=[],r=[],s=0,a=n;s<a.length;s++){var l=a[s];if("."!==l&&".."!==l){var c=e.combinePaths(t,l),u=void 0;try{u=i.statSync(c)}catch(e){continue}u.isFile()?o.push(l):u.isDirectory()&&r.push(l)}}return{files:o,directories:r}}catch(e){return{files:[],directories:[]}}}function m(e,t){try{var n=i.statSync(e);switch(t){case 0:return n.isFile();case 1:return n.isDirectory()}}catch(e){return!1}}function y(e){return m(e,0)}function k(e){return m(e,1)}!function(e){e[e.File=0]="File",e[e.Directory=1]="Directory"}(r||(r={}));var b={args:process.argv.slice(2),newLine:a.EOL,useCaseSensitiveFileNames:g,write:function(e){process.stdout.write(e)},readFile:function(e,t){if(y(e)){var n=i.readFileSync(e),o=n.length;if(o>=2&&254===n[0]&&255===n[1]){o&=-2;for(var r=0;r<o;r+=2){var s=n[r];n[r]=n[r+1],n[r+1]=s}return n.toString("utf16le",2)}return o>=2&&255===n[0]&&254===n[1]?n.toString("utf16le",2):o>=3&&239===n[0]&&187===n[1]&&191===n[2]?n.toString("utf8",3):n.toString("utf8")}},writeFile:function(e,t,n){var o;n&&(t="\ufeff"+t);try{o=i.openSync(e,"w"),i.writeSync(o,t,void 0,"utf8")}finally{void 0!==o&&i.closeSync(o)}},watchFile:function(e,t,n){if(c){var o=u.addFile(e,t);return{close:function(){return u.removeFile(o)}}}return h(e,t,n)},watchDirectory:function(t,n,o){return f(t,(function(o,r){"rename"===o&&n(r?e.normalizePath(e.combinePaths(t,r)):r)}),o)},resolvePath:function(e){return s.resolve(e)},fileExists:y,directoryExists:k,createDirectory:function(e){b.directoryExists(e)||i.mkdirSync(e)},getExecutingFilePath:function(){return __filename},getCurrentDirectory:function(){return process.cwd()},getDirectories:function(t){return e.filter(i.readdirSync(t),(function(n){return m(e.combinePaths(t,n),1)}))},getEnvironmentVariable:function(e){return process.env[e]||""},readDirectory:function(t,n,o,r,i){return e.matchFiles(t,n,o,r,g,process.cwd(),i,_)},getModifiedTime:function(e){try{return i.statSync(e).mtime}catch(e){return}},createHash:function(e){var t=l.createHash("md5");return t.update(e),t.digest("hex")},getMemoryUsage:function(){return global.gc&&global.gc(),process.memoryUsage().heapUsed},getFileSize:function(e){try{var t=i.statSync(e);if(t.isFile())return t.size}catch(e){}return 0},exit:function(e){process.exit(e)},realpath:function(e){return i.realpathSync(e)},debugMode:e.some(process.execArgv,(function(e){return/^--(inspect|debug)(-brk)?(=\d+)?$/i.test(e)})),tryEnableSourceMapsForHost:function(){try{require("source-map-support").install()}catch(e){}},setTimeout:setTimeout,clearTimeout:clearTimeout};return b}()),r){var s=r.writeFile;r.writeFile=function(t,n,i){var a=e.getDirectoryPath(e.normalizeSlashes(t));a&&!r.directoryExists(a)&&o(a,r),s.call(r,t,n,i)}}return r}(),e.sys&&e.sys.getEnvironmentVariable&&(e.Debug.currentAssertionLevel=/^development$/i.test(e.sys.getEnvironmentVariable("NODE_ENV"))?1:0),e.sys&&e.sys.debugMode&&(e.Debug.isDebugging=!0)}(ts||(ts={})),function(e){function t(e,t,n,o){return{code:e,category:t,key:n,message:o}}e.Diagnostics={Unterminated_string_literal:t(1002,e.DiagnosticCategory.Error,"Unterminated_string_literal_1002","Unterminated string literal."),Identifier_expected:t(1003,e.DiagnosticCategory.Error,"Identifier_expected_1003","Identifier expected."),_0_expected:t(1005,e.DiagnosticCategory.Error,"_0_expected_1005","'{0}' expected."),A_file_cannot_have_a_reference_to_itself:t(1006,e.DiagnosticCategory.Error,"A_file_cannot_have_a_reference_to_itself_1006","A file cannot have a reference to itself."),Trailing_comma_not_allowed:t(1009,e.DiagnosticCategory.Error,"Trailing_comma_not_allowed_1009","Trailing comma not allowed."),Asterisk_Slash_expected:t(1010,e.DiagnosticCategory.Error,"Asterisk_Slash_expected_1010","'*/' expected."),Unexpected_token:t(1012,e.DiagnosticCategory.Error,"Unexpected_token_1012","Unexpected token."),A_rest_parameter_must_be_last_in_a_parameter_list:t(1014,e.DiagnosticCategory.Error,"A_rest_parameter_must_be_last_in_a_parameter_list_1014","A rest parameter must be last in a parameter list."),Parameter_cannot_have_question_mark_and_initializer:t(1015,e.DiagnosticCategory.Error,"Parameter_cannot_have_question_mark_and_initializer_1015","Parameter cannot have question mark and initializer."),A_required_parameter_cannot_follow_an_optional_parameter:t(1016,e.DiagnosticCategory.Error,"A_required_parameter_cannot_follow_an_optional_parameter_1016","A required parameter cannot follow an optional parameter."),An_index_signature_cannot_have_a_rest_parameter:t(1017,e.DiagnosticCategory.Error,"An_index_signature_cannot_have_a_rest_parameter_1017","An index signature cannot have a rest parameter."),An_index_signature_parameter_cannot_have_an_accessibility_modifier:t(1018,e.DiagnosticCategory.Error,"An_index_signature_parameter_cannot_have_an_accessibility_modifier_1018","An index signature parameter cannot have an accessibility modifier."),An_index_signature_parameter_cannot_have_a_question_mark:t(1019,e.DiagnosticCategory.Error,"An_index_signature_parameter_cannot_have_a_question_mark_1019","An index signature parameter cannot have a question mark."),An_index_signature_parameter_cannot_have_an_initializer:t(1020,e.DiagnosticCategory.Error,"An_index_signature_parameter_cannot_have_an_initializer_1020","An index signature parameter cannot have an initializer."),An_index_signature_must_have_a_type_annotation:t(1021,e.DiagnosticCategory.Error,"An_index_signature_must_have_a_type_annotation_1021","An index signature must have a type annotation."),An_index_signature_parameter_must_have_a_type_annotation:t(1022,e.DiagnosticCategory.Error,"An_index_signature_parameter_must_have_a_type_annotation_1022","An index signature parameter must have a type annotation."),An_index_signature_parameter_type_must_be_string_or_number:t(1023,e.DiagnosticCategory.Error,"An_index_signature_parameter_type_must_be_string_or_number_1023","An index signature parameter type must be 'string' or 'number'."),readonly_modifier_can_only_appear_on_a_property_declaration_or_index_signature:t(1024,e.DiagnosticCategory.Error,"readonly_modifier_can_only_appear_on_a_property_declaration_or_index_signature_1024","'readonly' modifier can only appear on a property declaration or index signature."),Accessibility_modifier_already_seen:t(1028,e.DiagnosticCategory.Error,"Accessibility_modifier_already_seen_1028","Accessibility modifier already seen."),_0_modifier_must_precede_1_modifier:t(1029,e.DiagnosticCategory.Error,"_0_modifier_must_precede_1_modifier_1029","'{0}' modifier must precede '{1}' modifier."),_0_modifier_already_seen:t(1030,e.DiagnosticCategory.Error,"_0_modifier_already_seen_1030","'{0}' modifier already seen."),_0_modifier_cannot_appear_on_a_class_element:t(1031,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_class_element_1031","'{0}' modifier cannot appear on a class element."),super_must_be_followed_by_an_argument_list_or_member_access:t(1034,e.DiagnosticCategory.Error,"super_must_be_followed_by_an_argument_list_or_member_access_1034","'super' must be followed by an argument list or member access."),Only_ambient_modules_can_use_quoted_names:t(1035,e.DiagnosticCategory.Error,"Only_ambient_modules_can_use_quoted_names_1035","Only ambient modules can use quoted names."),Statements_are_not_allowed_in_ambient_contexts:t(1036,e.DiagnosticCategory.Error,"Statements_are_not_allowed_in_ambient_contexts_1036","Statements are not allowed in ambient contexts."),A_declare_modifier_cannot_be_used_in_an_already_ambient_context:t(1038,e.DiagnosticCategory.Error,"A_declare_modifier_cannot_be_used_in_an_already_ambient_context_1038","A 'declare' modifier cannot be used in an already ambient context."),Initializers_are_not_allowed_in_ambient_contexts:t(1039,e.DiagnosticCategory.Error,"Initializers_are_not_allowed_in_ambient_contexts_1039","Initializers are not allowed in ambient contexts."),_0_modifier_cannot_be_used_in_an_ambient_context:t(1040,e.DiagnosticCategory.Error,"_0_modifier_cannot_be_used_in_an_ambient_context_1040","'{0}' modifier cannot be used in an ambient context."),_0_modifier_cannot_be_used_with_a_class_declaration:t(1041,e.DiagnosticCategory.Error,"_0_modifier_cannot_be_used_with_a_class_declaration_1041","'{0}' modifier cannot be used with a class declaration."),_0_modifier_cannot_be_used_here:t(1042,e.DiagnosticCategory.Error,"_0_modifier_cannot_be_used_here_1042","'{0}' modifier cannot be used here."),_0_modifier_cannot_appear_on_a_data_property:t(1043,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_data_property_1043","'{0}' modifier cannot appear on a data property."),_0_modifier_cannot_appear_on_a_module_or_namespace_element:t(1044,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_module_or_namespace_element_1044","'{0}' modifier cannot appear on a module or namespace element."),A_0_modifier_cannot_be_used_with_an_interface_declaration:t(1045,e.DiagnosticCategory.Error,"A_0_modifier_cannot_be_used_with_an_interface_declaration_1045","A '{0}' modifier cannot be used with an interface declaration."),A_declare_modifier_is_required_for_a_top_level_declaration_in_a_d_ts_file:t(1046,e.DiagnosticCategory.Error,"A_declare_modifier_is_required_for_a_top_level_declaration_in_a_d_ts_file_1046","A 'declare' modifier is required for a top level declaration in a .d.ts file."),A_rest_parameter_cannot_be_optional:t(1047,e.DiagnosticCategory.Error,"A_rest_parameter_cannot_be_optional_1047","A rest parameter cannot be optional."),A_rest_parameter_cannot_have_an_initializer:t(1048,e.DiagnosticCategory.Error,"A_rest_parameter_cannot_have_an_initializer_1048","A rest parameter cannot have an initializer."),A_set_accessor_must_have_exactly_one_parameter:t(1049,e.DiagnosticCategory.Error,"A_set_accessor_must_have_exactly_one_parameter_1049","A 'set' accessor must have exactly one parameter."),A_set_accessor_cannot_have_an_optional_parameter:t(1051,e.DiagnosticCategory.Error,"A_set_accessor_cannot_have_an_optional_parameter_1051","A 'set' accessor cannot have an optional parameter."),A_set_accessor_parameter_cannot_have_an_initializer:t(1052,e.DiagnosticCategory.Error,"A_set_accessor_parameter_cannot_have_an_initializer_1052","A 'set' accessor parameter cannot have an initializer."),A_set_accessor_cannot_have_rest_parameter:t(1053,e.DiagnosticCategory.Error,"A_set_accessor_cannot_have_rest_parameter_1053","A 'set' accessor cannot have rest parameter."),A_get_accessor_cannot_have_parameters:t(1054,e.DiagnosticCategory.Error,"A_get_accessor_cannot_have_parameters_1054","A 'get' accessor cannot have parameters."),Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value:t(1055,e.DiagnosticCategory.Error,"Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Prom_1055","Type '{0}' is not a valid async function return type in ES5/ES3 because it does not refer to a Promise-compatible constructor value."),Accessors_are_only_available_when_targeting_ECMAScript_5_and_higher:t(1056,e.DiagnosticCategory.Error,"Accessors_are_only_available_when_targeting_ECMAScript_5_and_higher_1056","Accessors are only available when targeting ECMAScript 5 and higher."),An_async_function_or_method_must_have_a_valid_awaitable_return_type:t(1057,e.DiagnosticCategory.Error,"An_async_function_or_method_must_have_a_valid_awaitable_return_type_1057","An async function or method must have a valid awaitable return type."),The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:t(1058,e.DiagnosticCategory.Error,"The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_t_1058","The return type of an async function must either be a valid promise or must not contain a callable 'then' member."),A_promise_must_have_a_then_method:t(1059,e.DiagnosticCategory.Error,"A_promise_must_have_a_then_method_1059","A promise must have a 'then' method."),The_first_parameter_of_the_then_method_of_a_promise_must_be_a_callback:t(1060,e.DiagnosticCategory.Error,"The_first_parameter_of_the_then_method_of_a_promise_must_be_a_callback_1060","The first parameter of the 'then' method of a promise must be a callback."),Enum_member_must_have_initializer:t(1061,e.DiagnosticCategory.Error,"Enum_member_must_have_initializer_1061","Enum member must have initializer."),Type_is_referenced_directly_or_indirectly_in_the_fulfillment_callback_of_its_own_then_method:t(1062,e.DiagnosticCategory.Error,"Type_is_referenced_directly_or_indirectly_in_the_fulfillment_callback_of_its_own_then_method_1062","Type is referenced directly or indirectly in the fulfillment callback of its own 'then' method."),An_export_assignment_cannot_be_used_in_a_namespace:t(1063,e.DiagnosticCategory.Error,"An_export_assignment_cannot_be_used_in_a_namespace_1063","An export assignment cannot be used in a namespace."),The_return_type_of_an_async_function_or_method_must_be_the_global_Promise_T_type:t(1064,e.DiagnosticCategory.Error,"The_return_type_of_an_async_function_or_method_must_be_the_global_Promise_T_type_1064","The return type of an async function or method must be the global Promise<T> type."),In_ambient_enum_declarations_member_initializer_must_be_constant_expression:t(1066,e.DiagnosticCategory.Error,"In_ambient_enum_declarations_member_initializer_must_be_constant_expression_1066","In ambient enum declarations member initializer must be constant expression."),Unexpected_token_A_constructor_method_accessor_or_property_was_expected:t(1068,e.DiagnosticCategory.Error,"Unexpected_token_A_constructor_method_accessor_or_property_was_expected_1068","Unexpected token. A constructor, method, accessor, or property was expected."),_0_modifier_cannot_appear_on_a_type_member:t(1070,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_type_member_1070","'{0}' modifier cannot appear on a type member."),_0_modifier_cannot_appear_on_an_index_signature:t(1071,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_an_index_signature_1071","'{0}' modifier cannot appear on an index signature."),A_0_modifier_cannot_be_used_with_an_import_declaration:t(1079,e.DiagnosticCategory.Error,"A_0_modifier_cannot_be_used_with_an_import_declaration_1079","A '{0}' modifier cannot be used with an import declaration."),Invalid_reference_directive_syntax:t(1084,e.DiagnosticCategory.Error,"Invalid_reference_directive_syntax_1084","Invalid 'reference' directive syntax."),Octal_literals_are_not_available_when_targeting_ECMAScript_5_and_higher_Use_the_syntax_0:t(1085,e.DiagnosticCategory.Error,"Octal_literals_are_not_available_when_targeting_ECMAScript_5_and_higher_Use_the_syntax_0_1085","Octal literals are not available when targeting ECMAScript 5 and higher. Use the syntax '{0}'."),An_accessor_cannot_be_declared_in_an_ambient_context:t(1086,e.DiagnosticCategory.Error,"An_accessor_cannot_be_declared_in_an_ambient_context_1086","An accessor cannot be declared in an ambient context."),_0_modifier_cannot_appear_on_a_constructor_declaration:t(1089,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_constructor_declaration_1089","'{0}' modifier cannot appear on a constructor declaration."),_0_modifier_cannot_appear_on_a_parameter:t(1090,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_parameter_1090","'{0}' modifier cannot appear on a parameter."),Only_a_single_variable_declaration_is_allowed_in_a_for_in_statement:t(1091,e.DiagnosticCategory.Error,"Only_a_single_variable_declaration_is_allowed_in_a_for_in_statement_1091","Only a single variable declaration is allowed in a 'for...in' statement."),Type_parameters_cannot_appear_on_a_constructor_declaration:t(1092,e.DiagnosticCategory.Error,"Type_parameters_cannot_appear_on_a_constructor_declaration_1092","Type parameters cannot appear on a constructor declaration."),Type_annotation_cannot_appear_on_a_constructor_declaration:t(1093,e.DiagnosticCategory.Error,"Type_annotation_cannot_appear_on_a_constructor_declaration_1093","Type annotation cannot appear on a constructor declaration."),An_accessor_cannot_have_type_parameters:t(1094,e.DiagnosticCategory.Error,"An_accessor_cannot_have_type_parameters_1094","An accessor cannot have type parameters."),A_set_accessor_cannot_have_a_return_type_annotation:t(1095,e.DiagnosticCategory.Error,"A_set_accessor_cannot_have_a_return_type_annotation_1095","A 'set' accessor cannot have a return type annotation."),An_index_signature_must_have_exactly_one_parameter:t(1096,e.DiagnosticCategory.Error,"An_index_signature_must_have_exactly_one_parameter_1096","An index signature must have exactly one parameter."),_0_list_cannot_be_empty:t(1097,e.DiagnosticCategory.Error,"_0_list_cannot_be_empty_1097","'{0}' list cannot be empty."),Type_parameter_list_cannot_be_empty:t(1098,e.DiagnosticCategory.Error,"Type_parameter_list_cannot_be_empty_1098","Type parameter list cannot be empty."),Type_argument_list_cannot_be_empty:t(1099,e.DiagnosticCategory.Error,"Type_argument_list_cannot_be_empty_1099","Type argument list cannot be empty."),Invalid_use_of_0_in_strict_mode:t(1100,e.DiagnosticCategory.Error,"Invalid_use_of_0_in_strict_mode_1100","Invalid use of '{0}' in strict mode."),with_statements_are_not_allowed_in_strict_mode:t(1101,e.DiagnosticCategory.Error,"with_statements_are_not_allowed_in_strict_mode_1101","'with' statements are not allowed in strict mode."),delete_cannot_be_called_on_an_identifier_in_strict_mode:t(1102,e.DiagnosticCategory.Error,"delete_cannot_be_called_on_an_identifier_in_strict_mode_1102","'delete' cannot be called on an identifier in strict mode."),A_for_await_of_statement_is_only_allowed_within_an_async_function_or_async_generator:t(1103,e.DiagnosticCategory.Error,"A_for_await_of_statement_is_only_allowed_within_an_async_function_or_async_generator_1103","A 'for-await-of' statement is only allowed within an async function or async generator."),A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement:t(1104,e.DiagnosticCategory.Error,"A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement_1104","A 'continue' statement can only be used within an enclosing iteration statement."),A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement:t(1105,e.DiagnosticCategory.Error,"A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement_1105","A 'break' statement can only be used within an enclosing iteration or switch statement."),Jump_target_cannot_cross_function_boundary:t(1107,e.DiagnosticCategory.Error,"Jump_target_cannot_cross_function_boundary_1107","Jump target cannot cross function boundary."),A_return_statement_can_only_be_used_within_a_function_body:t(1108,e.DiagnosticCategory.Error,"A_return_statement_can_only_be_used_within_a_function_body_1108","A 'return' statement can only be used within a function body."),Expression_expected:t(1109,e.DiagnosticCategory.Error,"Expression_expected_1109","Expression expected."),Type_expected:t(1110,e.DiagnosticCategory.Error,"Type_expected_1110","Type expected."),A_default_clause_cannot_appear_more_than_once_in_a_switch_statement:t(1113,e.DiagnosticCategory.Error,"A_default_clause_cannot_appear_more_than_once_in_a_switch_statement_1113","A 'default' clause cannot appear more than once in a 'switch' statement."),Duplicate_label_0:t(1114,e.DiagnosticCategory.Error,"Duplicate_label_0_1114","Duplicate label '{0}'."),A_continue_statement_can_only_jump_to_a_label_of_an_enclosing_iteration_statement:t(1115,e.DiagnosticCategory.Error,"A_continue_statement_can_only_jump_to_a_label_of_an_enclosing_iteration_statement_1115","A 'continue' statement can only jump to a label of an enclosing iteration statement."),A_break_statement_can_only_jump_to_a_label_of_an_enclosing_statement:t(1116,e.DiagnosticCategory.Error,"A_break_statement_can_only_jump_to_a_label_of_an_enclosing_statement_1116","A 'break' statement can only jump to a label of an enclosing statement."),An_object_literal_cannot_have_multiple_properties_with_the_same_name_in_strict_mode:t(1117,e.DiagnosticCategory.Error,"An_object_literal_cannot_have_multiple_properties_with_the_same_name_in_strict_mode_1117","An object literal cannot have multiple properties with the same name in strict mode."),An_object_literal_cannot_have_multiple_get_Slashset_accessors_with_the_same_name:t(1118,e.DiagnosticCategory.Error,"An_object_literal_cannot_have_multiple_get_Slashset_accessors_with_the_same_name_1118","An object literal cannot have multiple get/set accessors with the same name."),An_object_literal_cannot_have_property_and_accessor_with_the_same_name:t(1119,e.DiagnosticCategory.Error,"An_object_literal_cannot_have_property_and_accessor_with_the_same_name_1119","An object literal cannot have property and accessor with the same name."),An_export_assignment_cannot_have_modifiers:t(1120,e.DiagnosticCategory.Error,"An_export_assignment_cannot_have_modifiers_1120","An export assignment cannot have modifiers."),Octal_literals_are_not_allowed_in_strict_mode:t(1121,e.DiagnosticCategory.Error,"Octal_literals_are_not_allowed_in_strict_mode_1121","Octal literals are not allowed in strict mode."),A_tuple_type_element_list_cannot_be_empty:t(1122,e.DiagnosticCategory.Error,"A_tuple_type_element_list_cannot_be_empty_1122","A tuple type element list cannot be empty."),Variable_declaration_list_cannot_be_empty:t(1123,e.DiagnosticCategory.Error,"Variable_declaration_list_cannot_be_empty_1123","Variable declaration list cannot be empty."),Digit_expected:t(1124,e.DiagnosticCategory.Error,"Digit_expected_1124","Digit expected."),Hexadecimal_digit_expected:t(1125,e.DiagnosticCategory.Error,"Hexadecimal_digit_expected_1125","Hexadecimal digit expected."),Unexpected_end_of_text:t(1126,e.DiagnosticCategory.Error,"Unexpected_end_of_text_1126","Unexpected end of text."),Invalid_character:t(1127,e.DiagnosticCategory.Error,"Invalid_character_1127","Invalid character."),Declaration_or_statement_expected:t(1128,e.DiagnosticCategory.Error,"Declaration_or_statement_expected_1128","Declaration or statement expected."),Statement_expected:t(1129,e.DiagnosticCategory.Error,"Statement_expected_1129","Statement expected."),case_or_default_expected:t(1130,e.DiagnosticCategory.Error,"case_or_default_expected_1130","'case' or 'default' expected."),Property_or_signature_expected:t(1131,e.DiagnosticCategory.Error,"Property_or_signature_expected_1131","Property or signature expected."),Enum_member_expected:t(1132,e.DiagnosticCategory.Error,"Enum_member_expected_1132","Enum member expected."),Variable_declaration_expected:t(1134,e.DiagnosticCategory.Error,"Variable_declaration_expected_1134","Variable declaration expected."),Argument_expression_expected:t(1135,e.DiagnosticCategory.Error,"Argument_expression_expected_1135","Argument expression expected."),Property_assignment_expected:t(1136,e.DiagnosticCategory.Error,"Property_assignment_expected_1136","Property assignment expected."),Expression_or_comma_expected:t(1137,e.DiagnosticCategory.Error,"Expression_or_comma_expected_1137","Expression or comma expected."),Parameter_declaration_expected:t(1138,e.DiagnosticCategory.Error,"Parameter_declaration_expected_1138","Parameter declaration expected."),Type_parameter_declaration_expected:t(1139,e.DiagnosticCategory.Error,"Type_parameter_declaration_expected_1139","Type parameter declaration expected."),Type_argument_expected:t(1140,e.DiagnosticCategory.Error,"Type_argument_expected_1140","Type argument expected."),String_literal_expected:t(1141,e.DiagnosticCategory.Error,"String_literal_expected_1141","String literal expected."),Line_break_not_permitted_here:t(1142,e.DiagnosticCategory.Error,"Line_break_not_permitted_here_1142","Line break not permitted here."),or_expected:t(1144,e.DiagnosticCategory.Error,"or_expected_1144","'{' or ';' expected."),Declaration_expected:t(1146,e.DiagnosticCategory.Error,"Declaration_expected_1146","Declaration expected."),Import_declarations_in_a_namespace_cannot_reference_a_module:t(1147,e.DiagnosticCategory.Error,"Import_declarations_in_a_namespace_cannot_reference_a_module_1147","Import declarations in a namespace cannot reference a module."),Cannot_use_imports_exports_or_module_augmentations_when_module_is_none:t(1148,e.DiagnosticCategory.Error,"Cannot_use_imports_exports_or_module_augmentations_when_module_is_none_1148","Cannot use imports, exports, or module augmentations when '--module' is 'none'."),File_name_0_differs_from_already_included_file_name_1_only_in_casing:t(1149,e.DiagnosticCategory.Error,"File_name_0_differs_from_already_included_file_name_1_only_in_casing_1149","File name '{0}' differs from already included file name '{1}' only in casing."),new_T_cannot_be_used_to_create_an_array_Use_new_Array_T_instead:t(1150,e.DiagnosticCategory.Error,"new_T_cannot_be_used_to_create_an_array_Use_new_Array_T_instead_1150","'new T[]' cannot be used to create an array. Use 'new Array<T>()' instead."),const_declarations_must_be_initialized:t(1155,e.DiagnosticCategory.Error,"const_declarations_must_be_initialized_1155","'const' declarations must be initialized."),const_declarations_can_only_be_declared_inside_a_block:t(1156,e.DiagnosticCategory.Error,"const_declarations_can_only_be_declared_inside_a_block_1156","'const' declarations can only be declared inside a block."),let_declarations_can_only_be_declared_inside_a_block:t(1157,e.DiagnosticCategory.Error,"let_declarations_can_only_be_declared_inside_a_block_1157","'let' declarations can only be declared inside a block."),Unterminated_template_literal:t(1160,e.DiagnosticCategory.Error,"Unterminated_template_literal_1160","Unterminated template literal."),Unterminated_regular_expression_literal:t(1161,e.DiagnosticCategory.Error,"Unterminated_regular_expression_literal_1161","Unterminated regular expression literal."),An_object_member_cannot_be_declared_optional:t(1162,e.DiagnosticCategory.Error,"An_object_member_cannot_be_declared_optional_1162","An object member cannot be declared optional."),A_yield_expression_is_only_allowed_in_a_generator_body:t(1163,e.DiagnosticCategory.Error,"A_yield_expression_is_only_allowed_in_a_generator_body_1163","A 'yield' expression is only allowed in a generator body."),Computed_property_names_are_not_allowed_in_enums:t(1164,e.DiagnosticCategory.Error,"Computed_property_names_are_not_allowed_in_enums_1164","Computed property names are not allowed in enums."),A_computed_property_name_in_an_ambient_context_must_directly_refer_to_a_built_in_symbol:t(1165,e.DiagnosticCategory.Error,"A_computed_property_name_in_an_ambient_context_must_directly_refer_to_a_built_in_symbol_1165","A computed property name in an ambient context must directly refer to a built-in symbol."),A_computed_property_name_in_a_class_property_declaration_must_directly_refer_to_a_built_in_symbol:t(1166,e.DiagnosticCategory.Error,"A_computed_property_name_in_a_class_property_declaration_must_directly_refer_to_a_built_in_symbol_1166","A computed property name in a class property declaration must directly refer to a built-in symbol."),A_computed_property_name_in_a_method_overload_must_directly_refer_to_a_built_in_symbol:t(1168,e.DiagnosticCategory.Error,"A_computed_property_name_in_a_method_overload_must_directly_refer_to_a_built_in_symbol_1168","A computed property name in a method overload must directly refer to a built-in symbol."),A_computed_property_name_in_an_interface_must_directly_refer_to_a_built_in_symbol:t(1169,e.DiagnosticCategory.Error,"A_computed_property_name_in_an_interface_must_directly_refer_to_a_built_in_symbol_1169","A computed property name in an interface must directly refer to a built-in symbol."),A_computed_property_name_in_a_type_literal_must_directly_refer_to_a_built_in_symbol:t(1170,e.DiagnosticCategory.Error,"A_computed_property_name_in_a_type_literal_must_directly_refer_to_a_built_in_symbol_1170","A computed property name in a type literal must directly refer to a built-in symbol."),A_comma_expression_is_not_allowed_in_a_computed_property_name:t(1171,e.DiagnosticCategory.Error,"A_comma_expression_is_not_allowed_in_a_computed_property_name_1171","A comma expression is not allowed in a computed property name."),extends_clause_already_seen:t(1172,e.DiagnosticCategory.Error,"extends_clause_already_seen_1172","'extends' clause already seen."),extends_clause_must_precede_implements_clause:t(1173,e.DiagnosticCategory.Error,"extends_clause_must_precede_implements_clause_1173","'extends' clause must precede 'implements' clause."),Classes_can_only_extend_a_single_class:t(1174,e.DiagnosticCategory.Error,"Classes_can_only_extend_a_single_class_1174","Classes can only extend a single class."),implements_clause_already_seen:t(1175,e.DiagnosticCategory.Error,"implements_clause_already_seen_1175","'implements' clause already seen."),Interface_declaration_cannot_have_implements_clause:t(1176,e.DiagnosticCategory.Error,"Interface_declaration_cannot_have_implements_clause_1176","Interface declaration cannot have 'implements' clause."),Binary_digit_expected:t(1177,e.DiagnosticCategory.Error,"Binary_digit_expected_1177","Binary digit expected."),Octal_digit_expected:t(1178,e.DiagnosticCategory.Error,"Octal_digit_expected_1178","Octal digit expected."),Unexpected_token_expected:t(1179,e.DiagnosticCategory.Error,"Unexpected_token_expected_1179","Unexpected token. '{' expected."),Property_destructuring_pattern_expected:t(1180,e.DiagnosticCategory.Error,"Property_destructuring_pattern_expected_1180","Property destructuring pattern expected."),Array_element_destructuring_pattern_expected:t(1181,e.DiagnosticCategory.Error,"Array_element_destructuring_pattern_expected_1181","Array element destructuring pattern expected."),A_destructuring_declaration_must_have_an_initializer:t(1182,e.DiagnosticCategory.Error,"A_destructuring_declaration_must_have_an_initializer_1182","A destructuring declaration must have an initializer."),An_implementation_cannot_be_declared_in_ambient_contexts:t(1183,e.DiagnosticCategory.Error,"An_implementation_cannot_be_declared_in_ambient_contexts_1183","An implementation cannot be declared in ambient contexts."),Modifiers_cannot_appear_here:t(1184,e.DiagnosticCategory.Error,"Modifiers_cannot_appear_here_1184","Modifiers cannot appear here."),Merge_conflict_marker_encountered:t(1185,e.DiagnosticCategory.Error,"Merge_conflict_marker_encountered_1185","Merge conflict marker encountered."),A_rest_element_cannot_have_an_initializer:t(1186,e.DiagnosticCategory.Error,"A_rest_element_cannot_have_an_initializer_1186","A rest element cannot have an initializer."),A_parameter_property_may_not_be_declared_using_a_binding_pattern:t(1187,e.DiagnosticCategory.Error,"A_parameter_property_may_not_be_declared_using_a_binding_pattern_1187","A parameter property may not be declared using a binding pattern."),Only_a_single_variable_declaration_is_allowed_in_a_for_of_statement:t(1188,e.DiagnosticCategory.Error,"Only_a_single_variable_declaration_is_allowed_in_a_for_of_statement_1188","Only a single variable declaration is allowed in a 'for...of' statement."),The_variable_declaration_of_a_for_in_statement_cannot_have_an_initializer:t(1189,e.DiagnosticCategory.Error,"The_variable_declaration_of_a_for_in_statement_cannot_have_an_initializer_1189","The variable declaration of a 'for...in' statement cannot have an initializer."),The_variable_declaration_of_a_for_of_statement_cannot_have_an_initializer:t(1190,e.DiagnosticCategory.Error,"The_variable_declaration_of_a_for_of_statement_cannot_have_an_initializer_1190","The variable declaration of a 'for...of' statement cannot have an initializer."),An_import_declaration_cannot_have_modifiers:t(1191,e.DiagnosticCategory.Error,"An_import_declaration_cannot_have_modifiers_1191","An import declaration cannot have modifiers."),Module_0_has_no_default_export:t(1192,e.DiagnosticCategory.Error,"Module_0_has_no_default_export_1192","Module '{0}' has no default export."),An_export_declaration_cannot_have_modifiers:t(1193,e.DiagnosticCategory.Error,"An_export_declaration_cannot_have_modifiers_1193","An export declaration cannot have modifiers."),Export_declarations_are_not_permitted_in_a_namespace:t(1194,e.DiagnosticCategory.Error,"Export_declarations_are_not_permitted_in_a_namespace_1194","Export declarations are not permitted in a namespace."),Catch_clause_variable_cannot_have_a_type_annotation:t(1196,e.DiagnosticCategory.Error,"Catch_clause_variable_cannot_have_a_type_annotation_1196","Catch clause variable cannot have a type annotation."),Catch_clause_variable_cannot_have_an_initializer:t(1197,e.DiagnosticCategory.Error,"Catch_clause_variable_cannot_have_an_initializer_1197","Catch clause variable cannot have an initializer."),An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive:t(1198,e.DiagnosticCategory.Error,"An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive_1198","An extended Unicode escape value must be between 0x0 and 0x10FFFF inclusive."),Unterminated_Unicode_escape_sequence:t(1199,e.DiagnosticCategory.Error,"Unterminated_Unicode_escape_sequence_1199","Unterminated Unicode escape sequence."),Line_terminator_not_permitted_before_arrow:t(1200,e.DiagnosticCategory.Error,"Line_terminator_not_permitted_before_arrow_1200","Line terminator not permitted before arrow."),Import_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_import_Asterisk_as_ns_from_mod_import_a_from_mod_import_d_from_mod_or_another_module_format_instead:t(1202,e.DiagnosticCategory.Error,"Import_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_import_Asterisk_as_1202","Import assignment cannot be used when targeting ECMAScript modules. Consider using 'import * as ns from \"mod\"', 'import {a} from \"mod\"', 'import d from \"mod\"', or another module format instead."),Export_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_export_default_or_another_module_format_instead:t(1203,e.DiagnosticCategory.Error,"Export_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_export_default_or__1203","Export assignment cannot be used when targeting ECMAScript modules. Consider using 'export default' or another module format instead."),Cannot_re_export_a_type_when_the_isolatedModules_flag_is_provided:t(1205,e.DiagnosticCategory.Error,"Cannot_re_export_a_type_when_the_isolatedModules_flag_is_provided_1205","Cannot re-export a type when the '--isolatedModules' flag is provided."),Decorators_are_not_valid_here:t(1206,e.DiagnosticCategory.Error,"Decorators_are_not_valid_here_1206","Decorators are not valid here."),Decorators_cannot_be_applied_to_multiple_get_Slashset_accessors_of_the_same_name:t(1207,e.DiagnosticCategory.Error,"Decorators_cannot_be_applied_to_multiple_get_Slashset_accessors_of_the_same_name_1207","Decorators cannot be applied to multiple get/set accessors of the same name."),Cannot_compile_namespaces_when_the_isolatedModules_flag_is_provided:t(1208,e.DiagnosticCategory.Error,"Cannot_compile_namespaces_when_the_isolatedModules_flag_is_provided_1208","Cannot compile namespaces when the '--isolatedModules' flag is provided."),Ambient_const_enums_are_not_allowed_when_the_isolatedModules_flag_is_provided:t(1209,e.DiagnosticCategory.Error,"Ambient_const_enums_are_not_allowed_when_the_isolatedModules_flag_is_provided_1209","Ambient const enums are not allowed when the '--isolatedModules' flag is provided."),Invalid_use_of_0_Class_definitions_are_automatically_in_strict_mode:t(1210,e.DiagnosticCategory.Error,"Invalid_use_of_0_Class_definitions_are_automatically_in_strict_mode_1210","Invalid use of '{0}'. Class definitions are automatically in strict mode."),A_class_declaration_without_the_default_modifier_must_have_a_name:t(1211,e.DiagnosticCategory.Error,"A_class_declaration_without_the_default_modifier_must_have_a_name_1211","A class declaration without the 'default' modifier must have a name."),Identifier_expected_0_is_a_reserved_word_in_strict_mode:t(1212,e.DiagnosticCategory.Error,"Identifier_expected_0_is_a_reserved_word_in_strict_mode_1212","Identifier expected. '{0}' is a reserved word in strict mode."),Identifier_expected_0_is_a_reserved_word_in_strict_mode_Class_definitions_are_automatically_in_strict_mode:t(1213,e.DiagnosticCategory.Error,"Identifier_expected_0_is_a_reserved_word_in_strict_mode_Class_definitions_are_automatically_in_stric_1213","Identifier expected. '{0}' is a reserved word in strict mode. Class definitions are automatically in strict mode."),Identifier_expected_0_is_a_reserved_word_in_strict_mode_Modules_are_automatically_in_strict_mode:t(1214,e.DiagnosticCategory.Error,"Identifier_expected_0_is_a_reserved_word_in_strict_mode_Modules_are_automatically_in_strict_mode_1214","Identifier expected. '{0}' is a reserved word in strict mode. Modules are automatically in strict mode."),Invalid_use_of_0_Modules_are_automatically_in_strict_mode:t(1215,e.DiagnosticCategory.Error,"Invalid_use_of_0_Modules_are_automatically_in_strict_mode_1215","Invalid use of '{0}'. Modules are automatically in strict mode."),Identifier_expected_esModule_is_reserved_as_an_exported_marker_when_transforming_ECMAScript_modules:t(1216,e.DiagnosticCategory.Error,"Identifier_expected_esModule_is_reserved_as_an_exported_marker_when_transforming_ECMAScript_modules_1216","Identifier expected. '__esModule' is reserved as an exported marker when transforming ECMAScript modules."),Export_assignment_is_not_supported_when_module_flag_is_system:t(1218,e.DiagnosticCategory.Error,"Export_assignment_is_not_supported_when_module_flag_is_system_1218","Export assignment is not supported when '--module' flag is 'system'."),Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_the_experimentalDecorators_option_to_remove_this_warning:t(1219,e.DiagnosticCategory.Error,"Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_t_1219","Experimental support for decorators is a feature that is subject to change in a future release. Set the 'experimentalDecorators' option to remove this warning."),Generators_are_only_available_when_targeting_ECMAScript_2015_or_higher:t(1220,e.DiagnosticCategory.Error,"Generators_are_only_available_when_targeting_ECMAScript_2015_or_higher_1220","Generators are only available when targeting ECMAScript 2015 or higher."),Generators_are_not_allowed_in_an_ambient_context:t(1221,e.DiagnosticCategory.Error,"Generators_are_not_allowed_in_an_ambient_context_1221","Generators are not allowed in an ambient context."),An_overload_signature_cannot_be_declared_as_a_generator:t(1222,e.DiagnosticCategory.Error,"An_overload_signature_cannot_be_declared_as_a_generator_1222","An overload signature cannot be declared as a generator."),_0_tag_already_specified:t(1223,e.DiagnosticCategory.Error,"_0_tag_already_specified_1223","'{0}' tag already specified."),Signature_0_must_be_a_type_predicate:t(1224,e.DiagnosticCategory.Error,"Signature_0_must_be_a_type_predicate_1224","Signature '{0}' must be a type predicate."),Cannot_find_parameter_0:t(1225,e.DiagnosticCategory.Error,"Cannot_find_parameter_0_1225","Cannot find parameter '{0}'."),Type_predicate_0_is_not_assignable_to_1:t(1226,e.DiagnosticCategory.Error,"Type_predicate_0_is_not_assignable_to_1_1226","Type predicate '{0}' is not assignable to '{1}'."),Parameter_0_is_not_in_the_same_position_as_parameter_1:t(1227,e.DiagnosticCategory.Error,"Parameter_0_is_not_in_the_same_position_as_parameter_1_1227","Parameter '{0}' is not in the same position as parameter '{1}'."),A_type_predicate_is_only_allowed_in_return_type_position_for_functions_and_methods:t(1228,e.DiagnosticCategory.Error,"A_type_predicate_is_only_allowed_in_return_type_position_for_functions_and_methods_1228","A type predicate is only allowed in return type position for functions and methods."),A_type_predicate_cannot_reference_a_rest_parameter:t(1229,e.DiagnosticCategory.Error,"A_type_predicate_cannot_reference_a_rest_parameter_1229","A type predicate cannot reference a rest parameter."),A_type_predicate_cannot_reference_element_0_in_a_binding_pattern:t(1230,e.DiagnosticCategory.Error,"A_type_predicate_cannot_reference_element_0_in_a_binding_pattern_1230","A type predicate cannot reference element '{0}' in a binding pattern."),An_export_assignment_can_only_be_used_in_a_module:t(1231,e.DiagnosticCategory.Error,"An_export_assignment_can_only_be_used_in_a_module_1231","An export assignment can only be used in a module."),An_import_declaration_can_only_be_used_in_a_namespace_or_module:t(1232,e.DiagnosticCategory.Error,"An_import_declaration_can_only_be_used_in_a_namespace_or_module_1232","An import declaration can only be used in a namespace or module."),An_export_declaration_can_only_be_used_in_a_module:t(1233,e.DiagnosticCategory.Error,"An_export_declaration_can_only_be_used_in_a_module_1233","An export declaration can only be used in a module."),An_ambient_module_declaration_is_only_allowed_at_the_top_level_in_a_file:t(1234,e.DiagnosticCategory.Error,"An_ambient_module_declaration_is_only_allowed_at_the_top_level_in_a_file_1234","An ambient module declaration is only allowed at the top level in a file."),A_namespace_declaration_is_only_allowed_in_a_namespace_or_module:t(1235,e.DiagnosticCategory.Error,"A_namespace_declaration_is_only_allowed_in_a_namespace_or_module_1235","A namespace declaration is only allowed in a namespace or module."),The_return_type_of_a_property_decorator_function_must_be_either_void_or_any:t(1236,e.DiagnosticCategory.Error,"The_return_type_of_a_property_decorator_function_must_be_either_void_or_any_1236","The return type of a property decorator function must be either 'void' or 'any'."),The_return_type_of_a_parameter_decorator_function_must_be_either_void_or_any:t(1237,e.DiagnosticCategory.Error,"The_return_type_of_a_parameter_decorator_function_must_be_either_void_or_any_1237","The return type of a parameter decorator function must be either 'void' or 'any'."),Unable_to_resolve_signature_of_class_decorator_when_called_as_an_expression:t(1238,e.DiagnosticCategory.Error,"Unable_to_resolve_signature_of_class_decorator_when_called_as_an_expression_1238","Unable to resolve signature of class decorator when called as an expression."),Unable_to_resolve_signature_of_parameter_decorator_when_called_as_an_expression:t(1239,e.DiagnosticCategory.Error,"Unable_to_resolve_signature_of_parameter_decorator_when_called_as_an_expression_1239","Unable to resolve signature of parameter decorator when called as an expression."),Unable_to_resolve_signature_of_property_decorator_when_called_as_an_expression:t(1240,e.DiagnosticCategory.Error,"Unable_to_resolve_signature_of_property_decorator_when_called_as_an_expression_1240","Unable to resolve signature of property decorator when called as an expression."),Unable_to_resolve_signature_of_method_decorator_when_called_as_an_expression:t(1241,e.DiagnosticCategory.Error,"Unable_to_resolve_signature_of_method_decorator_when_called_as_an_expression_1241","Unable to resolve signature of method decorator when called as an expression."),abstract_modifier_can_only_appear_on_a_class_method_or_property_declaration:t(1242,e.DiagnosticCategory.Error,"abstract_modifier_can_only_appear_on_a_class_method_or_property_declaration_1242","'abstract' modifier can only appear on a class, method, or property declaration."),_0_modifier_cannot_be_used_with_1_modifier:t(1243,e.DiagnosticCategory.Error,"_0_modifier_cannot_be_used_with_1_modifier_1243","'{0}' modifier cannot be used with '{1}' modifier."),Abstract_methods_can_only_appear_within_an_abstract_class:t(1244,e.DiagnosticCategory.Error,"Abstract_methods_can_only_appear_within_an_abstract_class_1244","Abstract methods can only appear within an abstract class."),Method_0_cannot_have_an_implementation_because_it_is_marked_abstract:t(1245,e.DiagnosticCategory.Error,"Method_0_cannot_have_an_implementation_because_it_is_marked_abstract_1245","Method '{0}' cannot have an implementation because it is marked abstract."),An_interface_property_cannot_have_an_initializer:t(1246,e.DiagnosticCategory.Error,"An_interface_property_cannot_have_an_initializer_1246","An interface property cannot have an initializer."),A_type_literal_property_cannot_have_an_initializer:t(1247,e.DiagnosticCategory.Error,"A_type_literal_property_cannot_have_an_initializer_1247","A type literal property cannot have an initializer."),A_class_member_cannot_have_the_0_keyword:t(1248,e.DiagnosticCategory.Error,"A_class_member_cannot_have_the_0_keyword_1248","A class member cannot have the '{0}' keyword."),A_decorator_can_only_decorate_a_method_implementation_not_an_overload:t(1249,e.DiagnosticCategory.Error,"A_decorator_can_only_decorate_a_method_implementation_not_an_overload_1249","A decorator can only decorate a method implementation, not an overload."),Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5:t(1250,e.DiagnosticCategory.Error,"Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_1250","Function declarations are not allowed inside blocks in strict mode when targeting 'ES3' or 'ES5'."),Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Class_definitions_are_automatically_in_strict_mode:t(1251,e.DiagnosticCategory.Error,"Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Class_d_1251","Function declarations are not allowed inside blocks in strict mode when targeting 'ES3' or 'ES5'. Class definitions are automatically in strict mode."),Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Modules_are_automatically_in_strict_mode:t(1252,e.DiagnosticCategory.Error,"Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Modules_1252","Function declarations are not allowed inside blocks in strict mode when targeting 'ES3' or 'ES5'. Modules are automatically in strict mode."),_0_tag_cannot_be_used_independently_as_a_top_level_JSDoc_tag:t(1253,e.DiagnosticCategory.Error,"_0_tag_cannot_be_used_independently_as_a_top_level_JSDoc_tag_1253","'{0}' tag cannot be used independently as a top level JSDoc tag."),A_const_initializer_in_an_ambient_context_must_be_a_string_or_numeric_literal:t(1254,e.DiagnosticCategory.Error,"A_const_initializer_in_an_ambient_context_must_be_a_string_or_numeric_literal_1254","A 'const' initializer in an ambient context must be a string or numeric literal."),with_statements_are_not_allowed_in_an_async_function_block:t(1300,e.DiagnosticCategory.Error,"with_statements_are_not_allowed_in_an_async_function_block_1300","'with' statements are not allowed in an async function block."),await_expression_is_only_allowed_within_an_async_function:t(1308,e.DiagnosticCategory.Error,"await_expression_is_only_allowed_within_an_async_function_1308","'await' expression is only allowed within an async function."),can_only_be_used_in_an_object_literal_property_inside_a_destructuring_assignment:t(1312,e.DiagnosticCategory.Error,"can_only_be_used_in_an_object_literal_property_inside_a_destructuring_assignment_1312","'=' can only be used in an object literal property inside a destructuring assignment."),The_body_of_an_if_statement_cannot_be_the_empty_statement:t(1313,e.DiagnosticCategory.Error,"The_body_of_an_if_statement_cannot_be_the_empty_statement_1313","The body of an 'if' statement cannot be the empty statement."),Global_module_exports_may_only_appear_in_module_files:t(1314,e.DiagnosticCategory.Error,"Global_module_exports_may_only_appear_in_module_files_1314","Global module exports may only appear in module files."),Global_module_exports_may_only_appear_in_declaration_files:t(1315,e.DiagnosticCategory.Error,"Global_module_exports_may_only_appear_in_declaration_files_1315","Global module exports may only appear in declaration files."),Global_module_exports_may_only_appear_at_top_level:t(1316,e.DiagnosticCategory.Error,"Global_module_exports_may_only_appear_at_top_level_1316","Global module exports may only appear at top level."),A_parameter_property_cannot_be_declared_using_a_rest_parameter:t(1317,e.DiagnosticCategory.Error,"A_parameter_property_cannot_be_declared_using_a_rest_parameter_1317","A parameter property cannot be declared using a rest parameter."),An_abstract_accessor_cannot_have_an_implementation:t(1318,e.DiagnosticCategory.Error,"An_abstract_accessor_cannot_have_an_implementation_1318","An abstract accessor cannot have an implementation."),A_default_export_can_only_be_used_in_an_ECMAScript_style_module:t(1319,e.DiagnosticCategory.Error,"A_default_export_can_only_be_used_in_an_ECMAScript_style_module_1319","A default export can only be used in an ECMAScript-style module."),Type_of_await_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:t(1320,e.DiagnosticCategory.Error,"Type_of_await_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member_1320","Type of 'await' operand must either be a valid promise or must not contain a callable 'then' member."),Type_of_yield_operand_in_an_async_generator_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:t(1321,e.DiagnosticCategory.Error,"Type_of_yield_operand_in_an_async_generator_must_either_be_a_valid_promise_or_must_not_contain_a_cal_1321","Type of 'yield' operand in an async generator must either be a valid promise or must not contain a callable 'then' member."),Type_of_iterated_elements_of_a_yield_Asterisk_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:t(1322,e.DiagnosticCategory.Error,"Type_of_iterated_elements_of_a_yield_Asterisk_operand_must_either_be_a_valid_promise_or_must_not_con_1322","Type of iterated elements of a 'yield*' operand must either be a valid promise or must not contain a callable 'then' member."),Dynamic_import_cannot_be_used_when_targeting_ECMAScript_2015_modules:t(1323,e.DiagnosticCategory.Error,"Dynamic_import_cannot_be_used_when_targeting_ECMAScript_2015_modules_1323","Dynamic import cannot be used when targeting ECMAScript 2015 modules."),Dynamic_import_must_have_one_specifier_as_an_argument:t(1324,e.DiagnosticCategory.Error,"Dynamic_import_must_have_one_specifier_as_an_argument_1324","Dynamic import must have one specifier as an argument."),Specifier_of_dynamic_import_cannot_be_spread_element:t(1325,e.DiagnosticCategory.Error,"Specifier_of_dynamic_import_cannot_be_spread_element_1325","Specifier of dynamic import cannot be spread element."),Dynamic_import_cannot_have_type_arguments:t(1326,e.DiagnosticCategory.Error,"Dynamic_import_cannot_have_type_arguments_1326","Dynamic import cannot have type arguments"),String_literal_with_double_quotes_expected:t(1327,e.DiagnosticCategory.Error,"String_literal_with_double_quotes_expected_1327","String literal with double quotes expected."),Property_value_can_only_be_string_literal_numeric_literal_true_false_null_object_literal_or_array_literal:t(1328,e.DiagnosticCategory.Error,"Property_value_can_only_be_string_literal_numeric_literal_true_false_null_object_literal_or_array_li_1328","Property value can only be string literal, numeric literal, 'true', 'false', 'null', object literal or array literal."),_0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write_0:t(1329,e.DiagnosticCategory.Error,"_0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write__1329","'{0}' accepts too few arguments to be used as a decorator here. Did you mean to call it first and write '@{0}()'?"),Duplicate_identifier_0:t(2300,e.DiagnosticCategory.Error,"Duplicate_identifier_0_2300","Duplicate identifier '{0}'."),Initializer_of_instance_member_variable_0_cannot_reference_identifier_1_declared_in_the_constructor:t(2301,e.DiagnosticCategory.Error,"Initializer_of_instance_member_variable_0_cannot_reference_identifier_1_declared_in_the_constructor_2301","Initializer of instance member variable '{0}' cannot reference identifier '{1}' declared in the constructor."),Static_members_cannot_reference_class_type_parameters:t(2302,e.DiagnosticCategory.Error,"Static_members_cannot_reference_class_type_parameters_2302","Static members cannot reference class type parameters."),Circular_definition_of_import_alias_0:t(2303,e.DiagnosticCategory.Error,"Circular_definition_of_import_alias_0_2303","Circular definition of import alias '{0}'."),Cannot_find_name_0:t(2304,e.DiagnosticCategory.Error,"Cannot_find_name_0_2304","Cannot find name '{0}'."),Module_0_has_no_exported_member_1:t(2305,e.DiagnosticCategory.Error,"Module_0_has_no_exported_member_1_2305","Module '{0}' has no exported member '{1}'."),File_0_is_not_a_module:t(2306,e.DiagnosticCategory.Error,"File_0_is_not_a_module_2306","File '{0}' is not a module."),Cannot_find_module_0:t(2307,e.DiagnosticCategory.Error,"Cannot_find_module_0_2307","Cannot find module '{0}'."),Module_0_has_already_exported_a_member_named_1_Consider_explicitly_re_exporting_to_resolve_the_ambiguity:t(2308,e.DiagnosticCategory.Error,"Module_0_has_already_exported_a_member_named_1_Consider_explicitly_re_exporting_to_resolve_the_ambig_2308","Module {0} has already exported a member named '{1}'. Consider explicitly re-exporting to resolve the ambiguity."),An_export_assignment_cannot_be_used_in_a_module_with_other_exported_elements:t(2309,e.DiagnosticCategory.Error,"An_export_assignment_cannot_be_used_in_a_module_with_other_exported_elements_2309","An export assignment cannot be used in a module with other exported elements."),Type_0_recursively_references_itself_as_a_base_type:t(2310,e.DiagnosticCategory.Error,"Type_0_recursively_references_itself_as_a_base_type_2310","Type '{0}' recursively references itself as a base type."),A_class_may_only_extend_another_class:t(2311,e.DiagnosticCategory.Error,"A_class_may_only_extend_another_class_2311","A class may only extend another class."),An_interface_may_only_extend_a_class_or_another_interface:t(2312,e.DiagnosticCategory.Error,"An_interface_may_only_extend_a_class_or_another_interface_2312","An interface may only extend a class or another interface."),Type_parameter_0_has_a_circular_constraint:t(2313,e.DiagnosticCategory.Error,"Type_parameter_0_has_a_circular_constraint_2313","Type parameter '{0}' has a circular constraint."),Generic_type_0_requires_1_type_argument_s:t(2314,e.DiagnosticCategory.Error,"Generic_type_0_requires_1_type_argument_s_2314","Generic type '{0}' requires {1} type argument(s)."),Type_0_is_not_generic:t(2315,e.DiagnosticCategory.Error,"Type_0_is_not_generic_2315","Type '{0}' is not generic."),Global_type_0_must_be_a_class_or_interface_type:t(2316,e.DiagnosticCategory.Error,"Global_type_0_must_be_a_class_or_interface_type_2316","Global type '{0}' must be a class or interface type."),Global_type_0_must_have_1_type_parameter_s:t(2317,e.DiagnosticCategory.Error,"Global_type_0_must_have_1_type_parameter_s_2317","Global type '{0}' must have {1} type parameter(s)."),Cannot_find_global_type_0:t(2318,e.DiagnosticCategory.Error,"Cannot_find_global_type_0_2318","Cannot find global type '{0}'."),Named_property_0_of_types_1_and_2_are_not_identical:t(2319,e.DiagnosticCategory.Error,"Named_property_0_of_types_1_and_2_are_not_identical_2319","Named property '{0}' of types '{1}' and '{2}' are not identical."),Interface_0_cannot_simultaneously_extend_types_1_and_2:t(2320,e.DiagnosticCategory.Error,"Interface_0_cannot_simultaneously_extend_types_1_and_2_2320","Interface '{0}' cannot simultaneously extend types '{1}' and '{2}'."),Excessive_stack_depth_comparing_types_0_and_1:t(2321,e.DiagnosticCategory.Error,"Excessive_stack_depth_comparing_types_0_and_1_2321","Excessive stack depth comparing types '{0}' and '{1}'."),Type_0_is_not_assignable_to_type_1:t(2322,e.DiagnosticCategory.Error,"Type_0_is_not_assignable_to_type_1_2322","Type '{0}' is not assignable to type '{1}'."),Cannot_redeclare_exported_variable_0:t(2323,e.DiagnosticCategory.Error,"Cannot_redeclare_exported_variable_0_2323","Cannot redeclare exported variable '{0}'."),Property_0_is_missing_in_type_1:t(2324,e.DiagnosticCategory.Error,"Property_0_is_missing_in_type_1_2324","Property '{0}' is missing in type '{1}'."),Property_0_is_private_in_type_1_but_not_in_type_2:t(2325,e.DiagnosticCategory.Error,"Property_0_is_private_in_type_1_but_not_in_type_2_2325","Property '{0}' is private in type '{1}' but not in type '{2}'."),Types_of_property_0_are_incompatible:t(2326,e.DiagnosticCategory.Error,"Types_of_property_0_are_incompatible_2326","Types of property '{0}' are incompatible."),Property_0_is_optional_in_type_1_but_required_in_type_2:t(2327,e.DiagnosticCategory.Error,"Property_0_is_optional_in_type_1_but_required_in_type_2_2327","Property '{0}' is optional in type '{1}' but required in type '{2}'."),Types_of_parameters_0_and_1_are_incompatible:t(2328,e.DiagnosticCategory.Error,"Types_of_parameters_0_and_1_are_incompatible_2328","Types of parameters '{0}' and '{1}' are incompatible."),Index_signature_is_missing_in_type_0:t(2329,e.DiagnosticCategory.Error,"Index_signature_is_missing_in_type_0_2329","Index signature is missing in type '{0}'."),Index_signatures_are_incompatible:t(2330,e.DiagnosticCategory.Error,"Index_signatures_are_incompatible_2330","Index signatures are incompatible."),this_cannot_be_referenced_in_a_module_or_namespace_body:t(2331,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_a_module_or_namespace_body_2331","'this' cannot be referenced in a module or namespace body."),this_cannot_be_referenced_in_current_location:t(2332,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_current_location_2332","'this' cannot be referenced in current location."),this_cannot_be_referenced_in_constructor_arguments:t(2333,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_constructor_arguments_2333","'this' cannot be referenced in constructor arguments."),this_cannot_be_referenced_in_a_static_property_initializer:t(2334,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_a_static_property_initializer_2334","'this' cannot be referenced in a static property initializer."),super_can_only_be_referenced_in_a_derived_class:t(2335,e.DiagnosticCategory.Error,"super_can_only_be_referenced_in_a_derived_class_2335","'super' can only be referenced in a derived class."),super_cannot_be_referenced_in_constructor_arguments:t(2336,e.DiagnosticCategory.Error,"super_cannot_be_referenced_in_constructor_arguments_2336","'super' cannot be referenced in constructor arguments."),Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors:t(2337,e.DiagnosticCategory.Error,"Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors_2337","Super calls are not permitted outside constructors or in nested functions inside constructors."),super_property_access_is_permitted_only_in_a_constructor_member_function_or_member_accessor_of_a_derived_class:t(2338,e.DiagnosticCategory.Error,"super_property_access_is_permitted_only_in_a_constructor_member_function_or_member_accessor_of_a_der_2338","'super' property access is permitted only in a constructor, member function, or member accessor of a derived class."),Property_0_does_not_exist_on_type_1:t(2339,e.DiagnosticCategory.Error,"Property_0_does_not_exist_on_type_1_2339","Property '{0}' does not exist on type '{1}'."),Only_public_and_protected_methods_of_the_base_class_are_accessible_via_the_super_keyword:t(2340,e.DiagnosticCategory.Error,"Only_public_and_protected_methods_of_the_base_class_are_accessible_via_the_super_keyword_2340","Only public and protected methods of the base class are accessible via the 'super' keyword."),Property_0_is_private_and_only_accessible_within_class_1:t(2341,e.DiagnosticCategory.Error,"Property_0_is_private_and_only_accessible_within_class_1_2341","Property '{0}' is private and only accessible within class '{1}'."),An_index_expression_argument_must_be_of_type_string_number_symbol_or_any:t(2342,e.DiagnosticCategory.Error,"An_index_expression_argument_must_be_of_type_string_number_symbol_or_any_2342","An index expression argument must be of type 'string', 'number', 'symbol', or 'any'."),This_syntax_requires_an_imported_helper_named_1_but_module_0_has_no_exported_member_1:t(2343,e.DiagnosticCategory.Error,"This_syntax_requires_an_imported_helper_named_1_but_module_0_has_no_exported_member_1_2343","This syntax requires an imported helper named '{1}', but module '{0}' has no exported member '{1}'."),Type_0_does_not_satisfy_the_constraint_1:t(2344,e.DiagnosticCategory.Error,"Type_0_does_not_satisfy_the_constraint_1_2344","Type '{0}' does not satisfy the constraint '{1}'."),Argument_of_type_0_is_not_assignable_to_parameter_of_type_1:t(2345,e.DiagnosticCategory.Error,"Argument_of_type_0_is_not_assignable_to_parameter_of_type_1_2345","Argument of type '{0}' is not assignable to parameter of type '{1}'."),Call_target_does_not_contain_any_signatures:t(2346,e.DiagnosticCategory.Error,"Call_target_does_not_contain_any_signatures_2346","Call target does not contain any signatures."),Untyped_function_calls_may_not_accept_type_arguments:t(2347,e.DiagnosticCategory.Error,"Untyped_function_calls_may_not_accept_type_arguments_2347","Untyped function calls may not accept type arguments."),Value_of_type_0_is_not_callable_Did_you_mean_to_include_new:t(2348,e.DiagnosticCategory.Error,"Value_of_type_0_is_not_callable_Did_you_mean_to_include_new_2348","Value of type '{0}' is not callable. Did you mean to include 'new'?"),Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures:t(2349,e.DiagnosticCategory.Error,"Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatur_2349","Cannot invoke an expression whose type lacks a call signature. Type '{0}' has no compatible call signatures."),Only_a_void_function_can_be_called_with_the_new_keyword:t(2350,e.DiagnosticCategory.Error,"Only_a_void_function_can_be_called_with_the_new_keyword_2350","Only a void function can be called with the 'new' keyword."),Cannot_use_new_with_an_expression_whose_type_lacks_a_call_or_construct_signature:t(2351,e.DiagnosticCategory.Error,"Cannot_use_new_with_an_expression_whose_type_lacks_a_call_or_construct_signature_2351","Cannot use 'new' with an expression whose type lacks a call or construct signature."),Type_0_cannot_be_converted_to_type_1:t(2352,e.DiagnosticCategory.Error,"Type_0_cannot_be_converted_to_type_1_2352","Type '{0}' cannot be converted to type '{1}'."),Object_literal_may_only_specify_known_properties_and_0_does_not_exist_in_type_1:t(2353,e.DiagnosticCategory.Error,"Object_literal_may_only_specify_known_properties_and_0_does_not_exist_in_type_1_2353","Object literal may only specify known properties, and '{0}' does not exist in type '{1}'."),This_syntax_requires_an_imported_helper_but_module_0_cannot_be_found:t(2354,e.DiagnosticCategory.Error,"This_syntax_requires_an_imported_helper_but_module_0_cannot_be_found_2354","This syntax requires an imported helper but module '{0}' cannot be found."),A_function_whose_declared_type_is_neither_void_nor_any_must_return_a_value:t(2355,e.DiagnosticCategory.Error,"A_function_whose_declared_type_is_neither_void_nor_any_must_return_a_value_2355","A function whose declared type is neither 'void' nor 'any' must return a value."),An_arithmetic_operand_must_be_of_type_any_number_or_an_enum_type:t(2356,e.DiagnosticCategory.Error,"An_arithmetic_operand_must_be_of_type_any_number_or_an_enum_type_2356","An arithmetic operand must be of type 'any', 'number' or an enum type."),The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access:t(2357,e.DiagnosticCategory.Error,"The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access_2357","The operand of an increment or decrement operator must be a variable or a property access."),The_left_hand_side_of_an_instanceof_expression_must_be_of_type_any_an_object_type_or_a_type_parameter:t(2358,e.DiagnosticCategory.Error,"The_left_hand_side_of_an_instanceof_expression_must_be_of_type_any_an_object_type_or_a_type_paramete_2358","The left-hand side of an 'instanceof' expression must be of type 'any', an object type or a type parameter."),The_right_hand_side_of_an_instanceof_expression_must_be_of_type_any_or_of_a_type_assignable_to_the_Function_interface_type:t(2359,e.DiagnosticCategory.Error,"The_right_hand_side_of_an_instanceof_expression_must_be_of_type_any_or_of_a_type_assignable_to_the_F_2359","The right-hand side of an 'instanceof' expression must be of type 'any' or of a type assignable to the 'Function' interface type."),The_left_hand_side_of_an_in_expression_must_be_of_type_any_string_number_or_symbol:t(2360,e.DiagnosticCategory.Error,"The_left_hand_side_of_an_in_expression_must_be_of_type_any_string_number_or_symbol_2360","The left-hand side of an 'in' expression must be of type 'any', 'string', 'number', or 'symbol'."),The_right_hand_side_of_an_in_expression_must_be_of_type_any_an_object_type_or_a_type_parameter:t(2361,e.DiagnosticCategory.Error,"The_right_hand_side_of_an_in_expression_must_be_of_type_any_an_object_type_or_a_type_parameter_2361","The right-hand side of an 'in' expression must be of type 'any', an object type or a type parameter."),The_left_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type:t(2362,e.DiagnosticCategory.Error,"The_left_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type_2362","The left-hand side of an arithmetic operation must be of type 'any', 'number' or an enum type."),The_right_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type:t(2363,e.DiagnosticCategory.Error,"The_right_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type_2363","The right-hand side of an arithmetic operation must be of type 'any', 'number' or an enum type."),The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access:t(2364,e.DiagnosticCategory.Error,"The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access_2364","The left-hand side of an assignment expression must be a variable or a property access."),Operator_0_cannot_be_applied_to_types_1_and_2:t(2365,e.DiagnosticCategory.Error,"Operator_0_cannot_be_applied_to_types_1_and_2_2365","Operator '{0}' cannot be applied to types '{1}' and '{2}'."),Function_lacks_ending_return_statement_and_return_type_does_not_include_undefined:t(2366,e.DiagnosticCategory.Error,"Function_lacks_ending_return_statement_and_return_type_does_not_include_undefined_2366","Function lacks ending return statement and return type does not include 'undefined'."),Type_parameter_name_cannot_be_0:t(2368,e.DiagnosticCategory.Error,"Type_parameter_name_cannot_be_0_2368","Type parameter name cannot be '{0}'."),A_parameter_property_is_only_allowed_in_a_constructor_implementation:t(2369,e.DiagnosticCategory.Error,"A_parameter_property_is_only_allowed_in_a_constructor_implementation_2369","A parameter property is only allowed in a constructor implementation."),A_rest_parameter_must_be_of_an_array_type:t(2370,e.DiagnosticCategory.Error,"A_rest_parameter_must_be_of_an_array_type_2370","A rest parameter must be of an array type."),A_parameter_initializer_is_only_allowed_in_a_function_or_constructor_implementation:t(2371,e.DiagnosticCategory.Error,"A_parameter_initializer_is_only_allowed_in_a_function_or_constructor_implementation_2371","A parameter initializer is only allowed in a function or constructor implementation."),Parameter_0_cannot_be_referenced_in_its_initializer:t(2372,e.DiagnosticCategory.Error,"Parameter_0_cannot_be_referenced_in_its_initializer_2372","Parameter '{0}' cannot be referenced in its initializer."),Initializer_of_parameter_0_cannot_reference_identifier_1_declared_after_it:t(2373,e.DiagnosticCategory.Error,"Initializer_of_parameter_0_cannot_reference_identifier_1_declared_after_it_2373","Initializer of parameter '{0}' cannot reference identifier '{1}' declared after it."),Duplicate_string_index_signature:t(2374,e.DiagnosticCategory.Error,"Duplicate_string_index_signature_2374","Duplicate string index signature."),Duplicate_number_index_signature:t(2375,e.DiagnosticCategory.Error,"Duplicate_number_index_signature_2375","Duplicate number index signature."),A_super_call_must_be_the_first_statement_in_the_constructor_when_a_class_contains_initialized_properties_or_has_parameter_properties:t(2376,e.DiagnosticCategory.Error,"A_super_call_must_be_the_first_statement_in_the_constructor_when_a_class_contains_initialized_proper_2376","A 'super' call must be the first statement in the constructor when a class contains initialized properties or has parameter properties."),Constructors_for_derived_classes_must_contain_a_super_call:t(2377,e.DiagnosticCategory.Error,"Constructors_for_derived_classes_must_contain_a_super_call_2377","Constructors for derived classes must contain a 'super' call."),A_get_accessor_must_return_a_value:t(2378,e.DiagnosticCategory.Error,"A_get_accessor_must_return_a_value_2378","A 'get' accessor must return a value."),Getter_and_setter_accessors_do_not_agree_in_visibility:t(2379,e.DiagnosticCategory.Error,"Getter_and_setter_accessors_do_not_agree_in_visibility_2379","Getter and setter accessors do not agree in visibility."),get_and_set_accessor_must_have_the_same_type:t(2380,e.DiagnosticCategory.Error,"get_and_set_accessor_must_have_the_same_type_2380","'get' and 'set' accessor must have the same type."),A_signature_with_an_implementation_cannot_use_a_string_literal_type:t(2381,e.DiagnosticCategory.Error,"A_signature_with_an_implementation_cannot_use_a_string_literal_type_2381","A signature with an implementation cannot use a string literal type."),Specialized_overload_signature_is_not_assignable_to_any_non_specialized_signature:t(2382,e.DiagnosticCategory.Error,"Specialized_overload_signature_is_not_assignable_to_any_non_specialized_signature_2382","Specialized overload signature is not assignable to any non-specialized signature."),Overload_signatures_must_all_be_exported_or_non_exported:t(2383,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_exported_or_non_exported_2383","Overload signatures must all be exported or non-exported."),Overload_signatures_must_all_be_ambient_or_non_ambient:t(2384,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_ambient_or_non_ambient_2384","Overload signatures must all be ambient or non-ambient."),Overload_signatures_must_all_be_public_private_or_protected:t(2385,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_public_private_or_protected_2385","Overload signatures must all be public, private or protected."),Overload_signatures_must_all_be_optional_or_required:t(2386,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_optional_or_required_2386","Overload signatures must all be optional or required."),Function_overload_must_be_static:t(2387,e.DiagnosticCategory.Error,"Function_overload_must_be_static_2387","Function overload must be static."),Function_overload_must_not_be_static:t(2388,e.DiagnosticCategory.Error,"Function_overload_must_not_be_static_2388","Function overload must not be static."),Function_implementation_name_must_be_0:t(2389,e.DiagnosticCategory.Error,"Function_implementation_name_must_be_0_2389","Function implementation name must be '{0}'."),Constructor_implementation_is_missing:t(2390,e.DiagnosticCategory.Error,"Constructor_implementation_is_missing_2390","Constructor implementation is missing."),Function_implementation_is_missing_or_not_immediately_following_the_declaration:t(2391,e.DiagnosticCategory.Error,"Function_implementation_is_missing_or_not_immediately_following_the_declaration_2391","Function implementation is missing or not immediately following the declaration."),Multiple_constructor_implementations_are_not_allowed:t(2392,e.DiagnosticCategory.Error,"Multiple_constructor_implementations_are_not_allowed_2392","Multiple constructor implementations are not allowed."),Duplicate_function_implementation:t(2393,e.DiagnosticCategory.Error,"Duplicate_function_implementation_2393","Duplicate function implementation."),Overload_signature_is_not_compatible_with_function_implementation:t(2394,e.DiagnosticCategory.Error,"Overload_signature_is_not_compatible_with_function_implementation_2394","Overload signature is not compatible with function implementation."),Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local:t(2395,e.DiagnosticCategory.Error,"Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local_2395","Individual declarations in merged declaration '{0}' must be all exported or all local."),Duplicate_identifier_arguments_Compiler_uses_arguments_to_initialize_rest_parameters:t(2396,e.DiagnosticCategory.Error,"Duplicate_identifier_arguments_Compiler_uses_arguments_to_initialize_rest_parameters_2396","Duplicate identifier 'arguments'. Compiler uses 'arguments' to initialize rest parameters."),Declaration_name_conflicts_with_built_in_global_identifier_0:t(2397,e.DiagnosticCategory.Error,"Declaration_name_conflicts_with_built_in_global_identifier_0_2397","Declaration name conflicts with built-in global identifier '{0}'."),Duplicate_identifier_this_Compiler_uses_variable_declaration_this_to_capture_this_reference:t(2399,e.DiagnosticCategory.Error,"Duplicate_identifier_this_Compiler_uses_variable_declaration_this_to_capture_this_reference_2399","Duplicate identifier '_this'. Compiler uses variable declaration '_this' to capture 'this' reference."),Expression_resolves_to_variable_declaration_this_that_compiler_uses_to_capture_this_reference:t(2400,e.DiagnosticCategory.Error,"Expression_resolves_to_variable_declaration_this_that_compiler_uses_to_capture_this_reference_2400","Expression resolves to variable declaration '_this' that compiler uses to capture 'this' reference."),Duplicate_identifier_super_Compiler_uses_super_to_capture_base_class_reference:t(2401,e.DiagnosticCategory.Error,"Duplicate_identifier_super_Compiler_uses_super_to_capture_base_class_reference_2401","Duplicate identifier '_super'. Compiler uses '_super' to capture base class reference."),Expression_resolves_to_super_that_compiler_uses_to_capture_base_class_reference:t(2402,e.DiagnosticCategory.Error,"Expression_resolves_to_super_that_compiler_uses_to_capture_base_class_reference_2402","Expression resolves to '_super' that compiler uses to capture base class reference."),Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_type_2:t(2403,e.DiagnosticCategory.Error,"Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_t_2403","Subsequent variable declarations must have the same type.  Variable '{0}' must be of type '{1}', but here has type '{2}'."),The_left_hand_side_of_a_for_in_statement_cannot_use_a_type_annotation:t(2404,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_in_statement_cannot_use_a_type_annotation_2404","The left-hand side of a 'for...in' statement cannot use a type annotation."),The_left_hand_side_of_a_for_in_statement_must_be_of_type_string_or_any:t(2405,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_in_statement_must_be_of_type_string_or_any_2405","The left-hand side of a 'for...in' statement must be of type 'string' or 'any'."),The_left_hand_side_of_a_for_in_statement_must_be_a_variable_or_a_property_access:t(2406,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_in_statement_must_be_a_variable_or_a_property_access_2406","The left-hand side of a 'for...in' statement must be a variable or a property access."),The_right_hand_side_of_a_for_in_statement_must_be_of_type_any_an_object_type_or_a_type_parameter:t(2407,e.DiagnosticCategory.Error,"The_right_hand_side_of_a_for_in_statement_must_be_of_type_any_an_object_type_or_a_type_parameter_2407","The right-hand side of a 'for...in' statement must be of type 'any', an object type or a type parameter."),Setters_cannot_return_a_value:t(2408,e.DiagnosticCategory.Error,"Setters_cannot_return_a_value_2408","Setters cannot return a value."),Return_type_of_constructor_signature_must_be_assignable_to_the_instance_type_of_the_class:t(2409,e.DiagnosticCategory.Error,"Return_type_of_constructor_signature_must_be_assignable_to_the_instance_type_of_the_class_2409","Return type of constructor signature must be assignable to the instance type of the class."),The_with_statement_is_not_supported_All_symbols_in_a_with_block_will_have_type_any:t(2410,e.DiagnosticCategory.Error,"The_with_statement_is_not_supported_All_symbols_in_a_with_block_will_have_type_any_2410","The 'with' statement is not supported. All symbols in a 'with' block will have type 'any'."),Property_0_of_type_1_is_not_assignable_to_string_index_type_2:t(2411,e.DiagnosticCategory.Error,"Property_0_of_type_1_is_not_assignable_to_string_index_type_2_2411","Property '{0}' of type '{1}' is not assignable to string index type '{2}'."),Property_0_of_type_1_is_not_assignable_to_numeric_index_type_2:t(2412,e.DiagnosticCategory.Error,"Property_0_of_type_1_is_not_assignable_to_numeric_index_type_2_2412","Property '{0}' of type '{1}' is not assignable to numeric index type '{2}'."),Numeric_index_type_0_is_not_assignable_to_string_index_type_1:t(2413,e.DiagnosticCategory.Error,"Numeric_index_type_0_is_not_assignable_to_string_index_type_1_2413","Numeric index type '{0}' is not assignable to string index type '{1}'."),Class_name_cannot_be_0:t(2414,e.DiagnosticCategory.Error,"Class_name_cannot_be_0_2414","Class name cannot be '{0}'."),Class_0_incorrectly_extends_base_class_1:t(2415,e.DiagnosticCategory.Error,"Class_0_incorrectly_extends_base_class_1_2415","Class '{0}' incorrectly extends base class '{1}'."),Class_static_side_0_incorrectly_extends_base_class_static_side_1:t(2417,e.DiagnosticCategory.Error,"Class_static_side_0_incorrectly_extends_base_class_static_side_1_2417","Class static side '{0}' incorrectly extends base class static side '{1}'."),Class_0_incorrectly_implements_interface_1:t(2420,e.DiagnosticCategory.Error,"Class_0_incorrectly_implements_interface_1_2420","Class '{0}' incorrectly implements interface '{1}'."),A_class_may_only_implement_another_class_or_interface:t(2422,e.DiagnosticCategory.Error,"A_class_may_only_implement_another_class_or_interface_2422","A class may only implement another class or interface."),Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_accessor:t(2423,e.DiagnosticCategory.Error,"Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_access_2423","Class '{0}' defines instance member function '{1}', but extended class '{2}' defines it as instance member accessor."),Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_property:t(2424,e.DiagnosticCategory.Error,"Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_proper_2424","Class '{0}' defines instance member function '{1}', but extended class '{2}' defines it as instance member property."),Class_0_defines_instance_member_property_1_but_extended_class_2_defines_it_as_instance_member_function:t(2425,e.DiagnosticCategory.Error,"Class_0_defines_instance_member_property_1_but_extended_class_2_defines_it_as_instance_member_functi_2425","Class '{0}' defines instance member property '{1}', but extended class '{2}' defines it as instance member function."),Class_0_defines_instance_member_accessor_1_but_extended_class_2_defines_it_as_instance_member_function:t(2426,e.DiagnosticCategory.Error,"Class_0_defines_instance_member_accessor_1_but_extended_class_2_defines_it_as_instance_member_functi_2426","Class '{0}' defines instance member accessor '{1}', but extended class '{2}' defines it as instance member function."),Interface_name_cannot_be_0:t(2427,e.DiagnosticCategory.Error,"Interface_name_cannot_be_0_2427","Interface name cannot be '{0}'."),All_declarations_of_0_must_have_identical_type_parameters:t(2428,e.DiagnosticCategory.Error,"All_declarations_of_0_must_have_identical_type_parameters_2428","All declarations of '{0}' must have identical type parameters."),Interface_0_incorrectly_extends_interface_1:t(2430,e.DiagnosticCategory.Error,"Interface_0_incorrectly_extends_interface_1_2430","Interface '{0}' incorrectly extends interface '{1}'."),Enum_name_cannot_be_0:t(2431,e.DiagnosticCategory.Error,"Enum_name_cannot_be_0_2431","Enum name cannot be '{0}'."),In_an_enum_with_multiple_declarations_only_one_declaration_can_omit_an_initializer_for_its_first_enum_element:t(2432,e.DiagnosticCategory.Error,"In_an_enum_with_multiple_declarations_only_one_declaration_can_omit_an_initializer_for_its_first_enu_2432","In an enum with multiple declarations, only one declaration can omit an initializer for its first enum element."),A_namespace_declaration_cannot_be_in_a_different_file_from_a_class_or_function_with_which_it_is_merged:t(2433,e.DiagnosticCategory.Error,"A_namespace_declaration_cannot_be_in_a_different_file_from_a_class_or_function_with_which_it_is_merg_2433","A namespace declaration cannot be in a different file from a class or function with which it is merged."),A_namespace_declaration_cannot_be_located_prior_to_a_class_or_function_with_which_it_is_merged:t(2434,e.DiagnosticCategory.Error,"A_namespace_declaration_cannot_be_located_prior_to_a_class_or_function_with_which_it_is_merged_2434","A namespace declaration cannot be located prior to a class or function with which it is merged."),Ambient_modules_cannot_be_nested_in_other_modules_or_namespaces:t(2435,e.DiagnosticCategory.Error,"Ambient_modules_cannot_be_nested_in_other_modules_or_namespaces_2435","Ambient modules cannot be nested in other modules or namespaces."),Ambient_module_declaration_cannot_specify_relative_module_name:t(2436,e.DiagnosticCategory.Error,"Ambient_module_declaration_cannot_specify_relative_module_name_2436","Ambient module declaration cannot specify relative module name."),Module_0_is_hidden_by_a_local_declaration_with_the_same_name:t(2437,e.DiagnosticCategory.Error,"Module_0_is_hidden_by_a_local_declaration_with_the_same_name_2437","Module '{0}' is hidden by a local declaration with the same name."),Import_name_cannot_be_0:t(2438,e.DiagnosticCategory.Error,"Import_name_cannot_be_0_2438","Import name cannot be '{0}'."),Import_or_export_declaration_in_an_ambient_module_declaration_cannot_reference_module_through_relative_module_name:t(2439,e.DiagnosticCategory.Error,"Import_or_export_declaration_in_an_ambient_module_declaration_cannot_reference_module_through_relati_2439","Import or export declaration in an ambient module declaration cannot reference module through relative module name."),Import_declaration_conflicts_with_local_declaration_of_0:t(2440,e.DiagnosticCategory.Error,"Import_declaration_conflicts_with_local_declaration_of_0_2440","Import declaration conflicts with local declaration of '{0}'."),Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module:t(2441,e.DiagnosticCategory.Error,"Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module_2441","Duplicate identifier '{0}'. Compiler reserves name '{1}' in top level scope of a module."),Types_have_separate_declarations_of_a_private_property_0:t(2442,e.DiagnosticCategory.Error,"Types_have_separate_declarations_of_a_private_property_0_2442","Types have separate declarations of a private property '{0}'."),Property_0_is_protected_but_type_1_is_not_a_class_derived_from_2:t(2443,e.DiagnosticCategory.Error,"Property_0_is_protected_but_type_1_is_not_a_class_derived_from_2_2443","Property '{0}' is protected but type '{1}' is not a class derived from '{2}'."),Property_0_is_protected_in_type_1_but_public_in_type_2:t(2444,e.DiagnosticCategory.Error,"Property_0_is_protected_in_type_1_but_public_in_type_2_2444","Property '{0}' is protected in type '{1}' but public in type '{2}'."),Property_0_is_protected_and_only_accessible_within_class_1_and_its_subclasses:t(2445,e.DiagnosticCategory.Error,"Property_0_is_protected_and_only_accessible_within_class_1_and_its_subclasses_2445","Property '{0}' is protected and only accessible within class '{1}' and its subclasses."),Property_0_is_protected_and_only_accessible_through_an_instance_of_class_1:t(2446,e.DiagnosticCategory.Error,"Property_0_is_protected_and_only_accessible_through_an_instance_of_class_1_2446","Property '{0}' is protected and only accessible through an instance of class '{1}'."),The_0_operator_is_not_allowed_for_boolean_types_Consider_using_1_instead:t(2447,e.DiagnosticCategory.Error,"The_0_operator_is_not_allowed_for_boolean_types_Consider_using_1_instead_2447","The '{0}' operator is not allowed for boolean types. Consider using '{1}' instead."),Block_scoped_variable_0_used_before_its_declaration:t(2448,e.DiagnosticCategory.Error,"Block_scoped_variable_0_used_before_its_declaration_2448","Block-scoped variable '{0}' used before its declaration."),Class_0_used_before_its_declaration:t(2449,e.DiagnosticCategory.Error,"Class_0_used_before_its_declaration_2449","Class '{0}' used before its declaration."),Enum_0_used_before_its_declaration:t(2450,e.DiagnosticCategory.Error,"Enum_0_used_before_its_declaration_2450","Enum '{0}' used before its declaration."),Cannot_redeclare_block_scoped_variable_0:t(2451,e.DiagnosticCategory.Error,"Cannot_redeclare_block_scoped_variable_0_2451","Cannot redeclare block-scoped variable '{0}'."),An_enum_member_cannot_have_a_numeric_name:t(2452,e.DiagnosticCategory.Error,"An_enum_member_cannot_have_a_numeric_name_2452","An enum member cannot have a numeric name."),The_type_argument_for_type_parameter_0_cannot_be_inferred_from_the_usage_Consider_specifying_the_type_arguments_explicitly:t(2453,e.DiagnosticCategory.Error,"The_type_argument_for_type_parameter_0_cannot_be_inferred_from_the_usage_Consider_specifying_the_typ_2453","The type argument for type parameter '{0}' cannot be inferred from the usage. Consider specifying the type arguments explicitly."),Variable_0_is_used_before_being_assigned:t(2454,e.DiagnosticCategory.Error,"Variable_0_is_used_before_being_assigned_2454","Variable '{0}' is used before being assigned."),Type_argument_candidate_1_is_not_a_valid_type_argument_because_it_is_not_a_supertype_of_candidate_0:t(2455,e.DiagnosticCategory.Error,"Type_argument_candidate_1_is_not_a_valid_type_argument_because_it_is_not_a_supertype_of_candidate_0_2455","Type argument candidate '{1}' is not a valid type argument because it is not a supertype of candidate '{0}'."),Type_alias_0_circularly_references_itself:t(2456,e.DiagnosticCategory.Error,"Type_alias_0_circularly_references_itself_2456","Type alias '{0}' circularly references itself."),Type_alias_name_cannot_be_0:t(2457,e.DiagnosticCategory.Error,"Type_alias_name_cannot_be_0_2457","Type alias name cannot be '{0}'."),An_AMD_module_cannot_have_multiple_name_assignments:t(2458,e.DiagnosticCategory.Error,"An_AMD_module_cannot_have_multiple_name_assignments_2458","An AMD module cannot have multiple name assignments."),Type_0_has_no_property_1_and_no_string_index_signature:t(2459,e.DiagnosticCategory.Error,"Type_0_has_no_property_1_and_no_string_index_signature_2459","Type '{0}' has no property '{1}' and no string index signature."),Type_0_has_no_property_1:t(2460,e.DiagnosticCategory.Error,"Type_0_has_no_property_1_2460","Type '{0}' has no property '{1}'."),Type_0_is_not_an_array_type:t(2461,e.DiagnosticCategory.Error,"Type_0_is_not_an_array_type_2461","Type '{0}' is not an array type."),A_rest_element_must_be_last_in_a_destructuring_pattern:t(2462,e.DiagnosticCategory.Error,"A_rest_element_must_be_last_in_a_destructuring_pattern_2462","A rest element must be last in a destructuring pattern."),A_binding_pattern_parameter_cannot_be_optional_in_an_implementation_signature:t(2463,e.DiagnosticCategory.Error,"A_binding_pattern_parameter_cannot_be_optional_in_an_implementation_signature_2463","A binding pattern parameter cannot be optional in an implementation signature."),A_computed_property_name_must_be_of_type_string_number_symbol_or_any:t(2464,e.DiagnosticCategory.Error,"A_computed_property_name_must_be_of_type_string_number_symbol_or_any_2464","A computed property name must be of type 'string', 'number', 'symbol', or 'any'."),this_cannot_be_referenced_in_a_computed_property_name:t(2465,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_a_computed_property_name_2465","'this' cannot be referenced in a computed property name."),super_cannot_be_referenced_in_a_computed_property_name:t(2466,e.DiagnosticCategory.Error,"super_cannot_be_referenced_in_a_computed_property_name_2466","'super' cannot be referenced in a computed property name."),A_computed_property_name_cannot_reference_a_type_parameter_from_its_containing_type:t(2467,e.DiagnosticCategory.Error,"A_computed_property_name_cannot_reference_a_type_parameter_from_its_containing_type_2467","A computed property name cannot reference a type parameter from its containing type."),Cannot_find_global_value_0:t(2468,e.DiagnosticCategory.Error,"Cannot_find_global_value_0_2468","Cannot find global value '{0}'."),The_0_operator_cannot_be_applied_to_type_symbol:t(2469,e.DiagnosticCategory.Error,"The_0_operator_cannot_be_applied_to_type_symbol_2469","The '{0}' operator cannot be applied to type 'symbol'."),Symbol_reference_does_not_refer_to_the_global_Symbol_constructor_object:t(2470,e.DiagnosticCategory.Error,"Symbol_reference_does_not_refer_to_the_global_Symbol_constructor_object_2470","'Symbol' reference does not refer to the global Symbol constructor object."),A_computed_property_name_of_the_form_0_must_be_of_type_symbol:t(2471,e.DiagnosticCategory.Error,"A_computed_property_name_of_the_form_0_must_be_of_type_symbol_2471","A computed property name of the form '{0}' must be of type 'symbol'."),Spread_operator_in_new_expressions_is_only_available_when_targeting_ECMAScript_5_and_higher:t(2472,e.DiagnosticCategory.Error,"Spread_operator_in_new_expressions_is_only_available_when_targeting_ECMAScript_5_and_higher_2472","Spread operator in 'new' expressions is only available when targeting ECMAScript 5 and higher."),Enum_declarations_must_all_be_const_or_non_const:t(2473,e.DiagnosticCategory.Error,"Enum_declarations_must_all_be_const_or_non_const_2473","Enum declarations must all be const or non-const."),In_const_enum_declarations_member_initializer_must_be_constant_expression:t(2474,e.DiagnosticCategory.Error,"In_const_enum_declarations_member_initializer_must_be_constant_expression_2474","In 'const' enum declarations member initializer must be constant expression."),const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_import_declaration_or_export_assignment:t(2475,e.DiagnosticCategory.Error,"const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475","'const' enums can only be used in property or index access expressions or the right hand side of an import declaration or export assignment."),A_const_enum_member_can_only_be_accessed_using_a_string_literal:t(2476,e.DiagnosticCategory.Error,"A_const_enum_member_can_only_be_accessed_using_a_string_literal_2476","A const enum member can only be accessed using a string literal."),const_enum_member_initializer_was_evaluated_to_a_non_finite_value:t(2477,e.DiagnosticCategory.Error,"const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477","'const' enum member initializer was evaluated to a non-finite value."),const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN:t(2478,e.DiagnosticCategory.Error,"const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478","'const' enum member initializer was evaluated to disallowed value 'NaN'."),Property_0_does_not_exist_on_const_enum_1:t(2479,e.DiagnosticCategory.Error,"Property_0_does_not_exist_on_const_enum_1_2479","Property '{0}' does not exist on 'const' enum '{1}'."),let_is_not_allowed_to_be_used_as_a_name_in_let_or_const_declarations:t(2480,e.DiagnosticCategory.Error,"let_is_not_allowed_to_be_used_as_a_name_in_let_or_const_declarations_2480","'let' is not allowed to be used as a name in 'let' or 'const' declarations."),Cannot_initialize_outer_scoped_variable_0_in_the_same_scope_as_block_scoped_declaration_1:t(2481,e.DiagnosticCategory.Error,"Cannot_initialize_outer_scoped_variable_0_in_the_same_scope_as_block_scoped_declaration_1_2481","Cannot initialize outer scoped variable '{0}' in the same scope as block scoped declaration '{1}'."),The_left_hand_side_of_a_for_of_statement_cannot_use_a_type_annotation:t(2483,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_of_statement_cannot_use_a_type_annotation_2483","The left-hand side of a 'for...of' statement cannot use a type annotation."),Export_declaration_conflicts_with_exported_declaration_of_0:t(2484,e.DiagnosticCategory.Error,"Export_declaration_conflicts_with_exported_declaration_of_0_2484","Export declaration conflicts with exported declaration of '{0}'."),The_left_hand_side_of_a_for_of_statement_must_be_a_variable_or_a_property_access:t(2487,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_of_statement_must_be_a_variable_or_a_property_access_2487","The left-hand side of a 'for...of' statement must be a variable or a property access."),Type_must_have_a_Symbol_iterator_method_that_returns_an_iterator:t(2488,e.DiagnosticCategory.Error,"Type_must_have_a_Symbol_iterator_method_that_returns_an_iterator_2488","Type must have a '[Symbol.iterator]()' method that returns an iterator."),An_iterator_must_have_a_next_method:t(2489,e.DiagnosticCategory.Error,"An_iterator_must_have_a_next_method_2489","An iterator must have a 'next()' method."),The_type_returned_by_the_next_method_of_an_iterator_must_have_a_value_property:t(2490,e.DiagnosticCategory.Error,"The_type_returned_by_the_next_method_of_an_iterator_must_have_a_value_property_2490","The type returned by the 'next()' method of an iterator must have a 'value' property."),The_left_hand_side_of_a_for_in_statement_cannot_be_a_destructuring_pattern:t(2491,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_in_statement_cannot_be_a_destructuring_pattern_2491","The left-hand side of a 'for...in' statement cannot be a destructuring pattern."),Cannot_redeclare_identifier_0_in_catch_clause:t(2492,e.DiagnosticCategory.Error,"Cannot_redeclare_identifier_0_in_catch_clause_2492","Cannot redeclare identifier '{0}' in catch clause."),Tuple_type_0_with_length_1_cannot_be_assigned_to_tuple_with_length_2:t(2493,e.DiagnosticCategory.Error,"Tuple_type_0_with_length_1_cannot_be_assigned_to_tuple_with_length_2_2493","Tuple type '{0}' with length '{1}' cannot be assigned to tuple with length '{2}'."),Using_a_string_in_a_for_of_statement_is_only_supported_in_ECMAScript_5_and_higher:t(2494,e.DiagnosticCategory.Error,"Using_a_string_in_a_for_of_statement_is_only_supported_in_ECMAScript_5_and_higher_2494","Using a string in a 'for...of' statement is only supported in ECMAScript 5 and higher."),Type_0_is_not_an_array_type_or_a_string_type:t(2495,e.DiagnosticCategory.Error,"Type_0_is_not_an_array_type_or_a_string_type_2495","Type '{0}' is not an array type or a string type."),The_arguments_object_cannot_be_referenced_in_an_arrow_function_in_ES3_and_ES5_Consider_using_a_standard_function_expression:t(2496,e.DiagnosticCategory.Error,"The_arguments_object_cannot_be_referenced_in_an_arrow_function_in_ES3_and_ES5_Consider_using_a_stand_2496","The 'arguments' object cannot be referenced in an arrow function in ES3 and ES5. Consider using a standard function expression."),Module_0_resolves_to_a_non_module_entity_and_cannot_be_imported_using_this_construct:t(2497,e.DiagnosticCategory.Error,"Module_0_resolves_to_a_non_module_entity_and_cannot_be_imported_using_this_construct_2497","Module '{0}' resolves to a non-module entity and cannot be imported using this construct."),Module_0_uses_export_and_cannot_be_used_with_export_Asterisk:t(2498,e.DiagnosticCategory.Error,"Module_0_uses_export_and_cannot_be_used_with_export_Asterisk_2498","Module '{0}' uses 'export =' and cannot be used with 'export *'."),An_interface_can_only_extend_an_identifier_Slashqualified_name_with_optional_type_arguments:t(2499,e.DiagnosticCategory.Error,"An_interface_can_only_extend_an_identifier_Slashqualified_name_with_optional_type_arguments_2499","An interface can only extend an identifier/qualified-name with optional type arguments."),A_class_can_only_implement_an_identifier_Slashqualified_name_with_optional_type_arguments:t(2500,e.DiagnosticCategory.Error,"A_class_can_only_implement_an_identifier_Slashqualified_name_with_optional_type_arguments_2500","A class can only implement an identifier/qualified-name with optional type arguments."),A_rest_element_cannot_contain_a_binding_pattern:t(2501,e.DiagnosticCategory.Error,"A_rest_element_cannot_contain_a_binding_pattern_2501","A rest element cannot contain a binding pattern."),_0_is_referenced_directly_or_indirectly_in_its_own_type_annotation:t(2502,e.DiagnosticCategory.Error,"_0_is_referenced_directly_or_indirectly_in_its_own_type_annotation_2502","'{0}' is referenced directly or indirectly in its own type annotation."),Cannot_find_namespace_0:t(2503,e.DiagnosticCategory.Error,"Cannot_find_namespace_0_2503","Cannot find namespace '{0}'."),Type_must_have_a_Symbol_asyncIterator_method_that_returns_an_async_iterator:t(2504,e.DiagnosticCategory.Error,"Type_must_have_a_Symbol_asyncIterator_method_that_returns_an_async_iterator_2504","Type must have a '[Symbol.asyncIterator]()' method that returns an async iterator."),A_generator_cannot_have_a_void_type_annotation:t(2505,e.DiagnosticCategory.Error,"A_generator_cannot_have_a_void_type_annotation_2505","A generator cannot have a 'void' type annotation."),_0_is_referenced_directly_or_indirectly_in_its_own_base_expression:t(2506,e.DiagnosticCategory.Error,"_0_is_referenced_directly_or_indirectly_in_its_own_base_expression_2506","'{0}' is referenced directly or indirectly in its own base expression."),Type_0_is_not_a_constructor_function_type:t(2507,e.DiagnosticCategory.Error,"Type_0_is_not_a_constructor_function_type_2507","Type '{0}' is not a constructor function type."),No_base_constructor_has_the_specified_number_of_type_arguments:t(2508,e.DiagnosticCategory.Error,"No_base_constructor_has_the_specified_number_of_type_arguments_2508","No base constructor has the specified number of type arguments."),Base_constructor_return_type_0_is_not_a_class_or_interface_type:t(2509,e.DiagnosticCategory.Error,"Base_constructor_return_type_0_is_not_a_class_or_interface_type_2509","Base constructor return type '{0}' is not a class or interface type."),Base_constructors_must_all_have_the_same_return_type:t(2510,e.DiagnosticCategory.Error,"Base_constructors_must_all_have_the_same_return_type_2510","Base constructors must all have the same return type."),Cannot_create_an_instance_of_the_abstract_class_0:t(2511,e.DiagnosticCategory.Error,"Cannot_create_an_instance_of_the_abstract_class_0_2511","Cannot create an instance of the abstract class '{0}'."),Overload_signatures_must_all_be_abstract_or_non_abstract:t(2512,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_abstract_or_non_abstract_2512","Overload signatures must all be abstract or non-abstract."),Abstract_method_0_in_class_1_cannot_be_accessed_via_super_expression:t(2513,e.DiagnosticCategory.Error,"Abstract_method_0_in_class_1_cannot_be_accessed_via_super_expression_2513","Abstract method '{0}' in class '{1}' cannot be accessed via super expression."),Classes_containing_abstract_methods_must_be_marked_abstract:t(2514,e.DiagnosticCategory.Error,"Classes_containing_abstract_methods_must_be_marked_abstract_2514","Classes containing abstract methods must be marked abstract."),Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2:t(2515,e.DiagnosticCategory.Error,"Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2_2515","Non-abstract class '{0}' does not implement inherited abstract member '{1}' from class '{2}'."),All_declarations_of_an_abstract_method_must_be_consecutive:t(2516,e.DiagnosticCategory.Error,"All_declarations_of_an_abstract_method_must_be_consecutive_2516","All declarations of an abstract method must be consecutive."),Cannot_assign_an_abstract_constructor_type_to_a_non_abstract_constructor_type:t(2517,e.DiagnosticCategory.Error,"Cannot_assign_an_abstract_constructor_type_to_a_non_abstract_constructor_type_2517","Cannot assign an abstract constructor type to a non-abstract constructor type."),A_this_based_type_guard_is_not_compatible_with_a_parameter_based_type_guard:t(2518,e.DiagnosticCategory.Error,"A_this_based_type_guard_is_not_compatible_with_a_parameter_based_type_guard_2518","A 'this'-based type guard is not compatible with a parameter-based type guard."),An_async_iterator_must_have_a_next_method:t(2519,e.DiagnosticCategory.Error,"An_async_iterator_must_have_a_next_method_2519","An async iterator must have a 'next()' method."),Duplicate_identifier_0_Compiler_uses_declaration_1_to_support_async_functions:t(2520,e.DiagnosticCategory.Error,"Duplicate_identifier_0_Compiler_uses_declaration_1_to_support_async_functions_2520","Duplicate identifier '{0}'. Compiler uses declaration '{1}' to support async functions."),Expression_resolves_to_variable_declaration_0_that_compiler_uses_to_support_async_functions:t(2521,e.DiagnosticCategory.Error,"Expression_resolves_to_variable_declaration_0_that_compiler_uses_to_support_async_functions_2521","Expression resolves to variable declaration '{0}' that compiler uses to support async functions."),The_arguments_object_cannot_be_referenced_in_an_async_function_or_method_in_ES3_and_ES5_Consider_using_a_standard_function_or_method:t(2522,e.DiagnosticCategory.Error,"The_arguments_object_cannot_be_referenced_in_an_async_function_or_method_in_ES3_and_ES5_Consider_usi_2522","The 'arguments' object cannot be referenced in an async function or method in ES3 and ES5. Consider using a standard function or method."),yield_expressions_cannot_be_used_in_a_parameter_initializer:t(2523,e.DiagnosticCategory.Error,"yield_expressions_cannot_be_used_in_a_parameter_initializer_2523","'yield' expressions cannot be used in a parameter initializer."),await_expressions_cannot_be_used_in_a_parameter_initializer:t(2524,e.DiagnosticCategory.Error,"await_expressions_cannot_be_used_in_a_parameter_initializer_2524","'await' expressions cannot be used in a parameter initializer."),Initializer_provides_no_value_for_this_binding_element_and_the_binding_element_has_no_default_value:t(2525,e.DiagnosticCategory.Error,"Initializer_provides_no_value_for_this_binding_element_and_the_binding_element_has_no_default_value_2525","Initializer provides no value for this binding element and the binding element has no default value."),A_this_type_is_available_only_in_a_non_static_member_of_a_class_or_interface:t(2526,e.DiagnosticCategory.Error,"A_this_type_is_available_only_in_a_non_static_member_of_a_class_or_interface_2526","A 'this' type is available only in a non-static member of a class or interface."),The_inferred_type_of_0_references_an_inaccessible_this_type_A_type_annotation_is_necessary:t(2527,e.DiagnosticCategory.Error,"The_inferred_type_of_0_references_an_inaccessible_this_type_A_type_annotation_is_necessary_2527","The inferred type of '{0}' references an inaccessible 'this' type. A type annotation is necessary."),A_module_cannot_have_multiple_default_exports:t(2528,e.DiagnosticCategory.Error,"A_module_cannot_have_multiple_default_exports_2528","A module cannot have multiple default exports."),Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module_containing_async_functions:t(2529,e.DiagnosticCategory.Error,"Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module_containing_async_func_2529","Duplicate identifier '{0}'. Compiler reserves name '{1}' in top level scope of a module containing async functions."),Property_0_is_incompatible_with_index_signature:t(2530,e.DiagnosticCategory.Error,"Property_0_is_incompatible_with_index_signature_2530","Property '{0}' is incompatible with index signature."),Object_is_possibly_null:t(2531,e.DiagnosticCategory.Error,"Object_is_possibly_null_2531","Object is possibly 'null'."),Object_is_possibly_undefined:t(2532,e.DiagnosticCategory.Error,"Object_is_possibly_undefined_2532","Object is possibly 'undefined'."),Object_is_possibly_null_or_undefined:t(2533,e.DiagnosticCategory.Error,"Object_is_possibly_null_or_undefined_2533","Object is possibly 'null' or 'undefined'."),A_function_returning_never_cannot_have_a_reachable_end_point:t(2534,e.DiagnosticCategory.Error,"A_function_returning_never_cannot_have_a_reachable_end_point_2534","A function returning 'never' cannot have a reachable end point."),Enum_type_0_has_members_with_initializers_that_are_not_literals:t(2535,e.DiagnosticCategory.Error,"Enum_type_0_has_members_with_initializers_that_are_not_literals_2535","Enum type '{0}' has members with initializers that are not literals."),Type_0_cannot_be_used_to_index_type_1:t(2536,e.DiagnosticCategory.Error,"Type_0_cannot_be_used_to_index_type_1_2536","Type '{0}' cannot be used to index type '{1}'."),Type_0_has_no_matching_index_signature_for_type_1:t(2537,e.DiagnosticCategory.Error,"Type_0_has_no_matching_index_signature_for_type_1_2537","Type '{0}' has no matching index signature for type '{1}'."),Type_0_cannot_be_used_as_an_index_type:t(2538,e.DiagnosticCategory.Error,"Type_0_cannot_be_used_as_an_index_type_2538","Type '{0}' cannot be used as an index type."),Cannot_assign_to_0_because_it_is_not_a_variable:t(2539,e.DiagnosticCategory.Error,"Cannot_assign_to_0_because_it_is_not_a_variable_2539","Cannot assign to '{0}' because it is not a variable."),Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property:t(2540,e.DiagnosticCategory.Error,"Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property_2540","Cannot assign to '{0}' because it is a constant or a read-only property."),The_target_of_an_assignment_must_be_a_variable_or_a_property_access:t(2541,e.DiagnosticCategory.Error,"The_target_of_an_assignment_must_be_a_variable_or_a_property_access_2541","The target of an assignment must be a variable or a property access."),Index_signature_in_type_0_only_permits_reading:t(2542,e.DiagnosticCategory.Error,"Index_signature_in_type_0_only_permits_reading_2542","Index signature in type '{0}' only permits reading."),Duplicate_identifier_newTarget_Compiler_uses_variable_declaration_newTarget_to_capture_new_target_meta_property_reference:t(2543,e.DiagnosticCategory.Error,"Duplicate_identifier_newTarget_Compiler_uses_variable_declaration_newTarget_to_capture_new_target_me_2543","Duplicate identifier '_newTarget'. Compiler uses variable declaration '_newTarget' to capture 'new.target' meta-property reference."),Expression_resolves_to_variable_declaration_newTarget_that_compiler_uses_to_capture_new_target_meta_property_reference:t(2544,e.DiagnosticCategory.Error,"Expression_resolves_to_variable_declaration_newTarget_that_compiler_uses_to_capture_new_target_meta__2544","Expression resolves to variable declaration '_newTarget' that compiler uses to capture 'new.target' meta-property reference."),A_mixin_class_must_have_a_constructor_with_a_single_rest_parameter_of_type_any:t(2545,e.DiagnosticCategory.Error,"A_mixin_class_must_have_a_constructor_with_a_single_rest_parameter_of_type_any_2545","A mixin class must have a constructor with a single rest parameter of type 'any[]'."),Property_0_has_conflicting_declarations_and_is_inaccessible_in_type_1:t(2546,e.DiagnosticCategory.Error,"Property_0_has_conflicting_declarations_and_is_inaccessible_in_type_1_2546","Property '{0}' has conflicting declarations and is inaccessible in type '{1}'."),The_type_returned_by_the_next_method_of_an_async_iterator_must_be_a_promise_for_a_type_with_a_value_property:t(2547,e.DiagnosticCategory.Error,"The_type_returned_by_the_next_method_of_an_async_iterator_must_be_a_promise_for_a_type_with_a_value__2547","The type returned by the 'next()' method of an async iterator must be a promise for a type with a 'value' property."),Type_0_is_not_an_array_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator:t(2548,e.DiagnosticCategory.Error,"Type_0_is_not_an_array_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator_2548","Type '{0}' is not an array type or does not have a '[Symbol.iterator]()' method that returns an iterator."),Type_0_is_not_an_array_type_or_a_string_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator:t(2549,e.DiagnosticCategory.Error,"Type_0_is_not_an_array_type_or_a_string_type_or_does_not_have_a_Symbol_iterator_method_that_returns__2549","Type '{0}' is not an array type or a string type or does not have a '[Symbol.iterator]()' method that returns an iterator."),Generic_type_instantiation_is_excessively_deep_and_possibly_infinite:t(2550,e.DiagnosticCategory.Error,"Generic_type_instantiation_is_excessively_deep_and_possibly_infinite_2550","Generic type instantiation is excessively deep and possibly infinite."),Property_0_does_not_exist_on_type_1_Did_you_mean_2:t(2551,e.DiagnosticCategory.Error,"Property_0_does_not_exist_on_type_1_Did_you_mean_2_2551","Property '{0}' does not exist on type '{1}'. Did you mean '{2}'?"),Cannot_find_name_0_Did_you_mean_1:t(2552,e.DiagnosticCategory.Error,"Cannot_find_name_0_Did_you_mean_1_2552","Cannot find name '{0}'. Did you mean '{1}'?"),Computed_values_are_not_permitted_in_an_enum_with_string_valued_members:t(2553,e.DiagnosticCategory.Error,"Computed_values_are_not_permitted_in_an_enum_with_string_valued_members_2553","Computed values are not permitted in an enum with string valued members."),Expected_0_arguments_but_got_1:t(2554,e.DiagnosticCategory.Error,"Expected_0_arguments_but_got_1_2554","Expected {0} arguments, but got {1}."),Expected_at_least_0_arguments_but_got_1:t(2555,e.DiagnosticCategory.Error,"Expected_at_least_0_arguments_but_got_1_2555","Expected at least {0} arguments, but got {1}."),Expected_0_arguments_but_got_a_minimum_of_1:t(2556,e.DiagnosticCategory.Error,"Expected_0_arguments_but_got_a_minimum_of_1_2556","Expected {0} arguments, but got a minimum of {1}."),Expected_at_least_0_arguments_but_got_a_minimum_of_1:t(2557,e.DiagnosticCategory.Error,"Expected_at_least_0_arguments_but_got_a_minimum_of_1_2557","Expected at least {0} arguments, but got a minimum of {1}."),Expected_0_type_arguments_but_got_1:t(2558,e.DiagnosticCategory.Error,"Expected_0_type_arguments_but_got_1_2558","Expected {0} type arguments, but got {1}."),Type_0_has_no_properties_in_common_with_type_1:t(2559,e.DiagnosticCategory.Error,"Type_0_has_no_properties_in_common_with_type_1_2559","Type '{0}' has no properties in common with type '{1}'."),Value_of_type_0_has_no_properties_in_common_with_type_1_Did_you_mean_to_call_it:t(2560,e.DiagnosticCategory.Error,"Value_of_type_0_has_no_properties_in_common_with_type_1_Did_you_mean_to_call_it_2560","Value of type '{0}' has no properties in common with type '{1}'. Did you mean to call it?"),Object_literal_may_only_specify_known_properties_but_0_does_not_exist_in_type_1_Did_you_mean_to_write_2:t(2561,e.DiagnosticCategory.Error,"Object_literal_may_only_specify_known_properties_but_0_does_not_exist_in_type_1_Did_you_mean_to_writ_2561","Object literal may only specify known properties, but '{0}' does not exist in type '{1}'. Did you mean to write '{2}'?"),Base_class_expressions_cannot_reference_class_type_parameters:t(2562,e.DiagnosticCategory.Error,"Base_class_expressions_cannot_reference_class_type_parameters_2562","Base class expressions cannot reference class type parameters."),The_containing_function_or_module_body_is_too_large_for_control_flow_analysis:t(2563,e.DiagnosticCategory.Error,"The_containing_function_or_module_body_is_too_large_for_control_flow_analysis_2563","The containing function or module body is too large for control flow analysis."),JSX_element_attributes_type_0_may_not_be_a_union_type:t(2600,e.DiagnosticCategory.Error,"JSX_element_attributes_type_0_may_not_be_a_union_type_2600","JSX element attributes type '{0}' may not be a union type."),The_return_type_of_a_JSX_element_constructor_must_return_an_object_type:t(2601,e.DiagnosticCategory.Error,"The_return_type_of_a_JSX_element_constructor_must_return_an_object_type_2601","The return type of a JSX element constructor must return an object type."),JSX_element_implicitly_has_type_any_because_the_global_type_JSX_Element_does_not_exist:t(2602,e.DiagnosticCategory.Error,"JSX_element_implicitly_has_type_any_because_the_global_type_JSX_Element_does_not_exist_2602","JSX element implicitly has type 'any' because the global type 'JSX.Element' does not exist."),Property_0_in_type_1_is_not_assignable_to_type_2:t(2603,e.DiagnosticCategory.Error,"Property_0_in_type_1_is_not_assignable_to_type_2_2603","Property '{0}' in type '{1}' is not assignable to type '{2}'."),JSX_element_type_0_does_not_have_any_construct_or_call_signatures:t(2604,e.DiagnosticCategory.Error,"JSX_element_type_0_does_not_have_any_construct_or_call_signatures_2604","JSX element type '{0}' does not have any construct or call signatures."),JSX_element_type_0_is_not_a_constructor_function_for_JSX_elements:t(2605,e.DiagnosticCategory.Error,"JSX_element_type_0_is_not_a_constructor_function_for_JSX_elements_2605","JSX element type '{0}' is not a constructor function for JSX elements."),Property_0_of_JSX_spread_attribute_is_not_assignable_to_target_property:t(2606,e.DiagnosticCategory.Error,"Property_0_of_JSX_spread_attribute_is_not_assignable_to_target_property_2606","Property '{0}' of JSX spread attribute is not assignable to target property."),JSX_element_class_does_not_support_attributes_because_it_does_not_have_a_0_property:t(2607,e.DiagnosticCategory.Error,"JSX_element_class_does_not_support_attributes_because_it_does_not_have_a_0_property_2607","JSX element class does not support attributes because it does not have a '{0}' property."),The_global_type_JSX_0_may_not_have_more_than_one_property:t(2608,e.DiagnosticCategory.Error,"The_global_type_JSX_0_may_not_have_more_than_one_property_2608","The global type 'JSX.{0}' may not have more than one property."),JSX_spread_child_must_be_an_array_type:t(2609,e.DiagnosticCategory.Error,"JSX_spread_child_must_be_an_array_type_2609","JSX spread child must be an array type."),Cannot_augment_module_0_with_value_exports_because_it_resolves_to_a_non_module_entity:t(2649,e.DiagnosticCategory.Error,"Cannot_augment_module_0_with_value_exports_because_it_resolves_to_a_non_module_entity_2649","Cannot augment module '{0}' with value exports because it resolves to a non-module entity."),A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_members_defined_in_other_enums:t(2651,e.DiagnosticCategory.Error,"A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_memb_2651","A member initializer in a enum declaration cannot reference members declared after it, including members defined in other enums."),Merged_declaration_0_cannot_include_a_default_export_declaration_Consider_adding_a_separate_export_default_0_declaration_instead:t(2652,e.DiagnosticCategory.Error,"Merged_declaration_0_cannot_include_a_default_export_declaration_Consider_adding_a_separate_export_d_2652","Merged declaration '{0}' cannot include a default export declaration. Consider adding a separate 'export default {0}' declaration instead."),Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1:t(2653,e.DiagnosticCategory.Error,"Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1_2653","Non-abstract class expression does not implement inherited abstract member '{0}' from class '{1}'."),Exported_external_package_typings_file_cannot_contain_tripleslash_references_Please_contact_the_package_author_to_update_the_package_definition:t(2654,e.DiagnosticCategory.Error,"Exported_external_package_typings_file_cannot_contain_tripleslash_references_Please_contact_the_pack_2654","Exported external package typings file cannot contain tripleslash references. Please contact the package author to update the package definition."),Exported_external_package_typings_file_0_is_not_a_module_Please_contact_the_package_author_to_update_the_package_definition:t(2656,e.DiagnosticCategory.Error,"Exported_external_package_typings_file_0_is_not_a_module_Please_contact_the_package_author_to_update_2656","Exported external package typings file '{0}' is not a module. Please contact the package author to update the package definition."),JSX_expressions_must_have_one_parent_element:t(2657,e.DiagnosticCategory.Error,"JSX_expressions_must_have_one_parent_element_2657","JSX expressions must have one parent element."),Type_0_provides_no_match_for_the_signature_1:t(2658,e.DiagnosticCategory.Error,"Type_0_provides_no_match_for_the_signature_1_2658","Type '{0}' provides no match for the signature '{1}'."),super_is_only_allowed_in_members_of_object_literal_expressions_when_option_target_is_ES2015_or_higher:t(2659,e.DiagnosticCategory.Error,"super_is_only_allowed_in_members_of_object_literal_expressions_when_option_target_is_ES2015_or_highe_2659","'super' is only allowed in members of object literal expressions when option 'target' is 'ES2015' or higher."),super_can_only_be_referenced_in_members_of_derived_classes_or_object_literal_expressions:t(2660,e.DiagnosticCategory.Error,"super_can_only_be_referenced_in_members_of_derived_classes_or_object_literal_expressions_2660","'super' can only be referenced in members of derived classes or object literal expressions."),Cannot_export_0_Only_local_declarations_can_be_exported_from_a_module:t(2661,e.DiagnosticCategory.Error,"Cannot_export_0_Only_local_declarations_can_be_exported_from_a_module_2661","Cannot export '{0}'. Only local declarations can be exported from a module."),Cannot_find_name_0_Did_you_mean_the_static_member_1_0:t(2662,e.DiagnosticCategory.Error,"Cannot_find_name_0_Did_you_mean_the_static_member_1_0_2662","Cannot find name '{0}'. Did you mean the static member '{1}.{0}'?"),Cannot_find_name_0_Did_you_mean_the_instance_member_this_0:t(2663,e.DiagnosticCategory.Error,"Cannot_find_name_0_Did_you_mean_the_instance_member_this_0_2663","Cannot find name '{0}'. Did you mean the instance member 'this.{0}'?"),Invalid_module_name_in_augmentation_module_0_cannot_be_found:t(2664,e.DiagnosticCategory.Error,"Invalid_module_name_in_augmentation_module_0_cannot_be_found_2664","Invalid module name in augmentation, module '{0}' cannot be found."),Invalid_module_name_in_augmentation_Module_0_resolves_to_an_untyped_module_at_1_which_cannot_be_augmented:t(2665,e.DiagnosticCategory.Error,"Invalid_module_name_in_augmentation_Module_0_resolves_to_an_untyped_module_at_1_which_cannot_be_augm_2665","Invalid module name in augmentation. Module '{0}' resolves to an untyped module at '{1}', which cannot be augmented."),Exports_and_export_assignments_are_not_permitted_in_module_augmentations:t(2666,e.DiagnosticCategory.Error,"Exports_and_export_assignments_are_not_permitted_in_module_augmentations_2666","Exports and export assignments are not permitted in module augmentations."),Imports_are_not_permitted_in_module_augmentations_Consider_moving_them_to_the_enclosing_external_module:t(2667,e.DiagnosticCategory.Error,"Imports_are_not_permitted_in_module_augmentations_Consider_moving_them_to_the_enclosing_external_mod_2667","Imports are not permitted in module augmentations. Consider moving them to the enclosing external module."),export_modifier_cannot_be_applied_to_ambient_modules_and_module_augmentations_since_they_are_always_visible:t(2668,e.DiagnosticCategory.Error,"export_modifier_cannot_be_applied_to_ambient_modules_and_module_augmentations_since_they_are_always__2668","'export' modifier cannot be applied to ambient modules and module augmentations since they are always visible."),Augmentations_for_the_global_scope_can_only_be_directly_nested_in_external_modules_or_ambient_module_declarations:t(2669,e.DiagnosticCategory.Error,"Augmentations_for_the_global_scope_can_only_be_directly_nested_in_external_modules_or_ambient_module_2669","Augmentations for the global scope can only be directly nested in external modules or ambient module declarations."),Augmentations_for_the_global_scope_should_have_declare_modifier_unless_they_appear_in_already_ambient_context:t(2670,e.DiagnosticCategory.Error,"Augmentations_for_the_global_scope_should_have_declare_modifier_unless_they_appear_in_already_ambien_2670","Augmentations for the global scope should have 'declare' modifier unless they appear in already ambient context."),Cannot_augment_module_0_because_it_resolves_to_a_non_module_entity:t(2671,e.DiagnosticCategory.Error,"Cannot_augment_module_0_because_it_resolves_to_a_non_module_entity_2671","Cannot augment module '{0}' because it resolves to a non-module entity."),Cannot_assign_a_0_constructor_type_to_a_1_constructor_type:t(2672,e.DiagnosticCategory.Error,"Cannot_assign_a_0_constructor_type_to_a_1_constructor_type_2672","Cannot assign a '{0}' constructor type to a '{1}' constructor type."),Constructor_of_class_0_is_private_and_only_accessible_within_the_class_declaration:t(2673,e.DiagnosticCategory.Error,"Constructor_of_class_0_is_private_and_only_accessible_within_the_class_declaration_2673","Constructor of class '{0}' is private and only accessible within the class declaration."),Constructor_of_class_0_is_protected_and_only_accessible_within_the_class_declaration:t(2674,e.DiagnosticCategory.Error,"Constructor_of_class_0_is_protected_and_only_accessible_within_the_class_declaration_2674","Constructor of class '{0}' is protected and only accessible within the class declaration."),Cannot_extend_a_class_0_Class_constructor_is_marked_as_private:t(2675,e.DiagnosticCategory.Error,"Cannot_extend_a_class_0_Class_constructor_is_marked_as_private_2675","Cannot extend a class '{0}'. Class constructor is marked as private."),Accessors_must_both_be_abstract_or_non_abstract:t(2676,e.DiagnosticCategory.Error,"Accessors_must_both_be_abstract_or_non_abstract_2676","Accessors must both be abstract or non-abstract."),A_type_predicate_s_type_must_be_assignable_to_its_parameter_s_type:t(2677,e.DiagnosticCategory.Error,"A_type_predicate_s_type_must_be_assignable_to_its_parameter_s_type_2677","A type predicate's type must be assignable to its parameter's type."),Type_0_is_not_comparable_to_type_1:t(2678,e.DiagnosticCategory.Error,"Type_0_is_not_comparable_to_type_1_2678","Type '{0}' is not comparable to type '{1}'."),A_function_that_is_called_with_the_new_keyword_cannot_have_a_this_type_that_is_void:t(2679,e.DiagnosticCategory.Error,"A_function_that_is_called_with_the_new_keyword_cannot_have_a_this_type_that_is_void_2679","A function that is called with the 'new' keyword cannot have a 'this' type that is 'void'."),A_0_parameter_must_be_the_first_parameter:t(2680,e.DiagnosticCategory.Error,"A_0_parameter_must_be_the_first_parameter_2680","A '{0}' parameter must be the first parameter."),A_constructor_cannot_have_a_this_parameter:t(2681,e.DiagnosticCategory.Error,"A_constructor_cannot_have_a_this_parameter_2681","A constructor cannot have a 'this' parameter."),get_and_set_accessor_must_have_the_same_this_type:t(2682,e.DiagnosticCategory.Error,"get_and_set_accessor_must_have_the_same_this_type_2682","'get' and 'set' accessor must have the same 'this' type."),this_implicitly_has_type_any_because_it_does_not_have_a_type_annotation:t(2683,e.DiagnosticCategory.Error,"this_implicitly_has_type_any_because_it_does_not_have_a_type_annotation_2683","'this' implicitly has type 'any' because it does not have a type annotation."),The_this_context_of_type_0_is_not_assignable_to_method_s_this_of_type_1:t(2684,e.DiagnosticCategory.Error,"The_this_context_of_type_0_is_not_assignable_to_method_s_this_of_type_1_2684","The 'this' context of type '{0}' is not assignable to method's 'this' of type '{1}'."),The_this_types_of_each_signature_are_incompatible:t(2685,e.DiagnosticCategory.Error,"The_this_types_of_each_signature_are_incompatible_2685","The 'this' types of each signature are incompatible."),_0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead:t(2686,e.DiagnosticCategory.Error,"_0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead_2686","'{0}' refers to a UMD global, but the current file is a module. Consider adding an import instead."),All_declarations_of_0_must_have_identical_modifiers:t(2687,e.DiagnosticCategory.Error,"All_declarations_of_0_must_have_identical_modifiers_2687","All declarations of '{0}' must have identical modifiers."),Cannot_find_type_definition_file_for_0:t(2688,e.DiagnosticCategory.Error,"Cannot_find_type_definition_file_for_0_2688","Cannot find type definition file for '{0}'."),Cannot_extend_an_interface_0_Did_you_mean_implements:t(2689,e.DiagnosticCategory.Error,"Cannot_extend_an_interface_0_Did_you_mean_implements_2689","Cannot extend an interface '{0}'. Did you mean 'implements'?"),An_import_path_cannot_end_with_a_0_extension_Consider_importing_1_instead:t(2691,e.DiagnosticCategory.Error,"An_import_path_cannot_end_with_a_0_extension_Consider_importing_1_instead_2691","An import path cannot end with a '{0}' extension. Consider importing '{1}' instead."),_0_is_a_primitive_but_1_is_a_wrapper_object_Prefer_using_0_when_possible:t(2692,e.DiagnosticCategory.Error,"_0_is_a_primitive_but_1_is_a_wrapper_object_Prefer_using_0_when_possible_2692","'{0}' is a primitive, but '{1}' is a wrapper object. Prefer using '{0}' when possible."),_0_only_refers_to_a_type_but_is_being_used_as_a_value_here:t(2693,e.DiagnosticCategory.Error,"_0_only_refers_to_a_type_but_is_being_used_as_a_value_here_2693","'{0}' only refers to a type, but is being used as a value here."),Namespace_0_has_no_exported_member_1:t(2694,e.DiagnosticCategory.Error,"Namespace_0_has_no_exported_member_1_2694","Namespace '{0}' has no exported member '{1}'."),Left_side_of_comma_operator_is_unused_and_has_no_side_effects:t(2695,e.DiagnosticCategory.Error,"Left_side_of_comma_operator_is_unused_and_has_no_side_effects_2695","Left side of comma operator is unused and has no side effects."),The_Object_type_is_assignable_to_very_few_other_types_Did_you_mean_to_use_the_any_type_instead:t(2696,e.DiagnosticCategory.Error,"The_Object_type_is_assignable_to_very_few_other_types_Did_you_mean_to_use_the_any_type_instead_2696","The 'Object' type is assignable to very few other types. Did you mean to use the 'any' type instead?"),An_async_function_or_method_must_return_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES2015_in_your_lib_option:t(2697,e.DiagnosticCategory.Error,"An_async_function_or_method_must_return_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_in_2697","An async function or method must return a 'Promise'. Make sure you have a declaration for 'Promise' or include 'ES2015' in your `--lib` option."),Spread_types_may_only_be_created_from_object_types:t(2698,e.DiagnosticCategory.Error,"Spread_types_may_only_be_created_from_object_types_2698","Spread types may only be created from object types."),Static_property_0_conflicts_with_built_in_property_Function_0_of_constructor_function_1:t(2699,e.DiagnosticCategory.Error,"Static_property_0_conflicts_with_built_in_property_Function_0_of_constructor_function_1_2699","Static property '{0}' conflicts with built-in property 'Function.{0}' of constructor function '{1}'."),Rest_types_may_only_be_created_from_object_types:t(2700,e.DiagnosticCategory.Error,"Rest_types_may_only_be_created_from_object_types_2700","Rest types may only be created from object types."),The_target_of_an_object_rest_assignment_must_be_a_variable_or_a_property_access:t(2701,e.DiagnosticCategory.Error,"The_target_of_an_object_rest_assignment_must_be_a_variable_or_a_property_access_2701","The target of an object rest assignment must be a variable or a property access."),_0_only_refers_to_a_type_but_is_being_used_as_a_namespace_here:t(2702,e.DiagnosticCategory.Error,"_0_only_refers_to_a_type_but_is_being_used_as_a_namespace_here_2702","'{0}' only refers to a type, but is being used as a namespace here."),The_operand_of_a_delete_operator_must_be_a_property_reference:t(2703,e.DiagnosticCategory.Error,"The_operand_of_a_delete_operator_must_be_a_property_reference_2703","The operand of a delete operator must be a property reference."),The_operand_of_a_delete_operator_cannot_be_a_read_only_property:t(2704,e.DiagnosticCategory.Error,"The_operand_of_a_delete_operator_cannot_be_a_read_only_property_2704","The operand of a delete operator cannot be a read-only property."),An_async_function_or_method_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option:t(2705,e.DiagnosticCategory.Error,"An_async_function_or_method_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_de_2705","An async function or method in ES5/ES3 requires the 'Promise' constructor.  Make sure you have a declaration for the 'Promise' constructor or include 'ES2015' in your `--lib` option."),Required_type_parameters_may_not_follow_optional_type_parameters:t(2706,e.DiagnosticCategory.Error,"Required_type_parameters_may_not_follow_optional_type_parameters_2706","Required type parameters may not follow optional type parameters."),Generic_type_0_requires_between_1_and_2_type_arguments:t(2707,e.DiagnosticCategory.Error,"Generic_type_0_requires_between_1_and_2_type_arguments_2707","Generic type '{0}' requires between {1} and {2} type arguments."),Cannot_use_namespace_0_as_a_value:t(2708,e.DiagnosticCategory.Error,"Cannot_use_namespace_0_as_a_value_2708","Cannot use namespace '{0}' as a value."),Cannot_use_namespace_0_as_a_type:t(2709,e.DiagnosticCategory.Error,"Cannot_use_namespace_0_as_a_type_2709","Cannot use namespace '{0}' as a type."),_0_are_specified_twice_The_attribute_named_0_will_be_overwritten:t(2710,e.DiagnosticCategory.Error,"_0_are_specified_twice_The_attribute_named_0_will_be_overwritten_2710","'{0}' are specified twice. The attribute named '{0}' will be overwritten."),A_dynamic_import_call_returns_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES2015_in_your_lib_option:t(2711,e.DiagnosticCategory.Error,"A_dynamic_import_call_returns_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES20_2711","A dynamic import call returns a 'Promise'. Make sure you have a declaration for 'Promise' or include 'ES2015' in your `--lib` option."),A_dynamic_import_call_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option:t(2712,e.DiagnosticCategory.Error,"A_dynamic_import_call_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declarat_2712","A dynamic import call in ES5/ES3 requires the 'Promise' constructor.  Make sure you have a declaration for the 'Promise' constructor or include 'ES2015' in your `--lib` option."),Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_property_1_in_0_with_0_1:t(2713,e.DiagnosticCategory.Error,"Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_p_2713","Cannot access '{0}.{1}' because '{0}' is a type, but not a namespace. Did you mean to retrieve the type of the property '{1}' in '{0}' with '{0}[\"{1}\"]'?"),The_expression_of_an_export_assignment_must_be_an_identifier_or_qualified_name_in_an_ambient_context:t(2714,e.DiagnosticCategory.Error,"The_expression_of_an_export_assignment_must_be_an_identifier_or_qualified_name_in_an_ambient_context_2714","The expression of an export assignment must be an identifier or qualified name in an ambient context."),Type_parameter_0_has_a_circular_default:t(2716,e.DiagnosticCategory.Error,"Type_parameter_0_has_a_circular_default_2716","Type parameter '{0}' has a circular default."),Import_declaration_0_is_using_private_name_1:t(4e3,e.DiagnosticCategory.Error,"Import_declaration_0_is_using_private_name_1_4000","Import declaration '{0}' is using private name '{1}'."),Type_parameter_0_of_exported_class_has_or_is_using_private_name_1:t(4002,e.DiagnosticCategory.Error,"Type_parameter_0_of_exported_class_has_or_is_using_private_name_1_4002","Type parameter '{0}' of exported class has or is using private name '{1}'."),Type_parameter_0_of_exported_interface_has_or_is_using_private_name_1:t(4004,e.DiagnosticCategory.Error,"Type_parameter_0_of_exported_interface_has_or_is_using_private_name_1_4004","Type parameter '{0}' of exported interface has or is using private name '{1}'."),Type_parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1:t(4006,e.DiagnosticCategory.Error,"Type_parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1_4006","Type parameter '{0}' of constructor signature from exported interface has or is using private name '{1}'."),Type_parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1:t(4008,e.DiagnosticCategory.Error,"Type_parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1_4008","Type parameter '{0}' of call signature from exported interface has or is using private name '{1}'."),Type_parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1:t(4010,e.DiagnosticCategory.Error,"Type_parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1_4010","Type parameter '{0}' of public static method from exported class has or is using private name '{1}'."),Type_parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1:t(4012,e.DiagnosticCategory.Error,"Type_parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1_4012","Type parameter '{0}' of public method from exported class has or is using private name '{1}'."),Type_parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1:t(4014,e.DiagnosticCategory.Error,"Type_parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1_4014","Type parameter '{0}' of method from exported interface has or is using private name '{1}'."),Type_parameter_0_of_exported_function_has_or_is_using_private_name_1:t(4016,e.DiagnosticCategory.Error,"Type_parameter_0_of_exported_function_has_or_is_using_private_name_1_4016","Type parameter '{0}' of exported function has or is using private name '{1}'."),Implements_clause_of_exported_class_0_has_or_is_using_private_name_1:t(4019,e.DiagnosticCategory.Error,"Implements_clause_of_exported_class_0_has_or_is_using_private_name_1_4019","Implements clause of exported class '{0}' has or is using private name '{1}'."),extends_clause_of_exported_class_0_has_or_is_using_private_name_1:t(4020,e.DiagnosticCategory.Error,"extends_clause_of_exported_class_0_has_or_is_using_private_name_1_4020","'extends' clause of exported class '{0}' has or is using private name '{1}'."),extends_clause_of_exported_interface_0_has_or_is_using_private_name_1:t(4022,e.DiagnosticCategory.Error,"extends_clause_of_exported_interface_0_has_or_is_using_private_name_1_4022","'extends' clause of exported interface '{0}' has or is using private name '{1}'."),Exported_variable_0_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4023,e.DiagnosticCategory.Error,"Exported_variable_0_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named_4023","Exported variable '{0}' has or is using name '{1}' from external module {2} but cannot be named."),Exported_variable_0_has_or_is_using_name_1_from_private_module_2:t(4024,e.DiagnosticCategory.Error,"Exported_variable_0_has_or_is_using_name_1_from_private_module_2_4024","Exported variable '{0}' has or is using name '{1}' from private module '{2}'."),Exported_variable_0_has_or_is_using_private_name_1:t(4025,e.DiagnosticCategory.Error,"Exported_variable_0_has_or_is_using_private_name_1_4025","Exported variable '{0}' has or is using private name '{1}'."),Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4026,e.DiagnosticCategory.Error,"Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot__4026","Public static property '{0}' of exported class has or is using name '{1}' from external module {2} but cannot be named."),Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2:t(4027,e.DiagnosticCategory.Error,"Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2_4027","Public static property '{0}' of exported class has or is using name '{1}' from private module '{2}'."),Public_static_property_0_of_exported_class_has_or_is_using_private_name_1:t(4028,e.DiagnosticCategory.Error,"Public_static_property_0_of_exported_class_has_or_is_using_private_name_1_4028","Public static property '{0}' of exported class has or is using private name '{1}'."),Public_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4029,e.DiagnosticCategory.Error,"Public_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_name_4029","Public property '{0}' of exported class has or is using name '{1}' from external module {2} but cannot be named."),Public_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2:t(4030,e.DiagnosticCategory.Error,"Public_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2_4030","Public property '{0}' of exported class has or is using name '{1}' from private module '{2}'."),Public_property_0_of_exported_class_has_or_is_using_private_name_1:t(4031,e.DiagnosticCategory.Error,"Public_property_0_of_exported_class_has_or_is_using_private_name_1_4031","Public property '{0}' of exported class has or is using private name '{1}'."),Property_0_of_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4032,e.DiagnosticCategory.Error,"Property_0_of_exported_interface_has_or_is_using_name_1_from_private_module_2_4032","Property '{0}' of exported interface has or is using name '{1}' from private module '{2}'."),Property_0_of_exported_interface_has_or_is_using_private_name_1:t(4033,e.DiagnosticCategory.Error,"Property_0_of_exported_interface_has_or_is_using_private_name_1_4033","Property '{0}' of exported interface has or is using private name '{1}'."),Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4034,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_name_1_from_private_4034","Parameter '{0}' of public static property setter from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_private_name_1:t(4035,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_private_name_1_4035","Parameter '{0}' of public static property setter from exported class has or is using private name '{1}'."),Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4036,e.DiagnosticCategory.Error,"Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_4036","Parameter '{0}' of public property setter from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_private_name_1:t(4037,e.DiagnosticCategory.Error,"Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_private_name_1_4037","Parameter '{0}' of public property setter from exported class has or is using private name '{1}'."),Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4038,e.DiagnosticCategory.Error,"Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_externa_4038","Return type of public static property getter from exported class has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_1:t(4039,e.DiagnosticCategory.Error,"Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_private_4039","Return type of public static property getter from exported class has or is using name '{0}' from private module '{1}'."),Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_private_name_0:t(4040,e.DiagnosticCategory.Error,"Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_private_name_0_4040","Return type of public static property getter from exported class has or is using private name '{0}'."),Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4041,e.DiagnosticCategory.Error,"Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_external_modul_4041","Return type of public property getter from exported class has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_1:t(4042,e.DiagnosticCategory.Error,"Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_4042","Return type of public property getter from exported class has or is using name '{0}' from private module '{1}'."),Return_type_of_public_property_getter_from_exported_class_has_or_is_using_private_name_0:t(4043,e.DiagnosticCategory.Error,"Return_type_of_public_property_getter_from_exported_class_has_or_is_using_private_name_0_4043","Return type of public property getter from exported class has or is using private name '{0}'."),Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:t(4044,e.DiagnosticCategory.Error,"Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_name_0_from_private_mod_4044","Return type of constructor signature from exported interface has or is using name '{0}' from private module '{1}'."),Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_0:t(4045,e.DiagnosticCategory.Error,"Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_0_4045","Return type of constructor signature from exported interface has or is using private name '{0}'."),Return_type_of_call_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:t(4046,e.DiagnosticCategory.Error,"Return_type_of_call_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1_4046","Return type of call signature from exported interface has or is using name '{0}' from private module '{1}'."),Return_type_of_call_signature_from_exported_interface_has_or_is_using_private_name_0:t(4047,e.DiagnosticCategory.Error,"Return_type_of_call_signature_from_exported_interface_has_or_is_using_private_name_0_4047","Return type of call signature from exported interface has or is using private name '{0}'."),Return_type_of_index_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:t(4048,e.DiagnosticCategory.Error,"Return_type_of_index_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1_4048","Return type of index signature from exported interface has or is using name '{0}' from private module '{1}'."),Return_type_of_index_signature_from_exported_interface_has_or_is_using_private_name_0:t(4049,e.DiagnosticCategory.Error,"Return_type_of_index_signature_from_exported_interface_has_or_is_using_private_name_0_4049","Return type of index signature from exported interface has or is using private name '{0}'."),Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4050,e.DiagnosticCategory.Error,"Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_external_module__4050","Return type of public static method from exported class has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_private_module_1:t(4051,e.DiagnosticCategory.Error,"Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_private_module_1_4051","Return type of public static method from exported class has or is using name '{0}' from private module '{1}'."),Return_type_of_public_static_method_from_exported_class_has_or_is_using_private_name_0:t(4052,e.DiagnosticCategory.Error,"Return_type_of_public_static_method_from_exported_class_has_or_is_using_private_name_0_4052","Return type of public static method from exported class has or is using private name '{0}'."),Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4053,e.DiagnosticCategory.Error,"Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_c_4053","Return type of public method from exported class has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_private_module_1:t(4054,e.DiagnosticCategory.Error,"Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_private_module_1_4054","Return type of public method from exported class has or is using name '{0}' from private module '{1}'."),Return_type_of_public_method_from_exported_class_has_or_is_using_private_name_0:t(4055,e.DiagnosticCategory.Error,"Return_type_of_public_method_from_exported_class_has_or_is_using_private_name_0_4055","Return type of public method from exported class has or is using private name '{0}'."),Return_type_of_method_from_exported_interface_has_or_is_using_name_0_from_private_module_1:t(4056,e.DiagnosticCategory.Error,"Return_type_of_method_from_exported_interface_has_or_is_using_name_0_from_private_module_1_4056","Return type of method from exported interface has or is using name '{0}' from private module '{1}'."),Return_type_of_method_from_exported_interface_has_or_is_using_private_name_0:t(4057,e.DiagnosticCategory.Error,"Return_type_of_method_from_exported_interface_has_or_is_using_private_name_0_4057","Return type of method from exported interface has or is using private name '{0}'."),Return_type_of_exported_function_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4058,e.DiagnosticCategory.Error,"Return_type_of_exported_function_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named_4058","Return type of exported function has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_exported_function_has_or_is_using_name_0_from_private_module_1:t(4059,e.DiagnosticCategory.Error,"Return_type_of_exported_function_has_or_is_using_name_0_from_private_module_1_4059","Return type of exported function has or is using name '{0}' from private module '{1}'."),Return_type_of_exported_function_has_or_is_using_private_name_0:t(4060,e.DiagnosticCategory.Error,"Return_type_of_exported_function_has_or_is_using_private_name_0_4060","Return type of exported function has or is using private name '{0}'."),Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4061,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_can_4061","Parameter '{0}' of constructor from exported class has or is using name '{1}' from external module {2} but cannot be named."),Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4062,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_private_module_2_4062","Parameter '{0}' of constructor from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_constructor_from_exported_class_has_or_is_using_private_name_1:t(4063,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_from_exported_class_has_or_is_using_private_name_1_4063","Parameter '{0}' of constructor from exported class has or is using private name '{1}'."),Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4064,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_name_1_from_private_mod_4064","Parameter '{0}' of constructor signature from exported interface has or is using name '{1}' from private module '{2}'."),Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1:t(4065,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1_4065","Parameter '{0}' of constructor signature from exported interface has or is using private name '{1}'."),Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4066,e.DiagnosticCategory.Error,"Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2_4066","Parameter '{0}' of call signature from exported interface has or is using name '{1}' from private module '{2}'."),Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1:t(4067,e.DiagnosticCategory.Error,"Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1_4067","Parameter '{0}' of call signature from exported interface has or is using private name '{1}'."),Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4068,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_external_module__4068","Parameter '{0}' of public static method from exported class has or is using name '{1}' from external module {2} but cannot be named."),Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4069,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_private_module_2_4069","Parameter '{0}' of public static method from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1:t(4070,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1_4070","Parameter '{0}' of public static method from exported class has or is using private name '{1}'."),Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4071,e.DiagnosticCategory.Error,"Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_c_4071","Parameter '{0}' of public method from exported class has or is using name '{1}' from external module {2} but cannot be named."),Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4072,e.DiagnosticCategory.Error,"Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_private_module_2_4072","Parameter '{0}' of public method from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1:t(4073,e.DiagnosticCategory.Error,"Parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1_4073","Parameter '{0}' of public method from exported class has or is using private name '{1}'."),Parameter_0_of_method_from_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4074,e.DiagnosticCategory.Error,"Parameter_0_of_method_from_exported_interface_has_or_is_using_name_1_from_private_module_2_4074","Parameter '{0}' of method from exported interface has or is using name '{1}' from private module '{2}'."),Parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1:t(4075,e.DiagnosticCategory.Error,"Parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1_4075","Parameter '{0}' of method from exported interface has or is using private name '{1}'."),Parameter_0_of_exported_function_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4076,e.DiagnosticCategory.Error,"Parameter_0_of_exported_function_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named_4076","Parameter '{0}' of exported function has or is using name '{1}' from external module {2} but cannot be named."),Parameter_0_of_exported_function_has_or_is_using_name_1_from_private_module_2:t(4077,e.DiagnosticCategory.Error,"Parameter_0_of_exported_function_has_or_is_using_name_1_from_private_module_2_4077","Parameter '{0}' of exported function has or is using name '{1}' from private module '{2}'."),Parameter_0_of_exported_function_has_or_is_using_private_name_1:t(4078,e.DiagnosticCategory.Error,"Parameter_0_of_exported_function_has_or_is_using_private_name_1_4078","Parameter '{0}' of exported function has or is using private name '{1}'."),Exported_type_alias_0_has_or_is_using_private_name_1:t(4081,e.DiagnosticCategory.Error,"Exported_type_alias_0_has_or_is_using_private_name_1_4081","Exported type alias '{0}' has or is using private name '{1}'."),Default_export_of_the_module_has_or_is_using_private_name_0:t(4082,e.DiagnosticCategory.Error,"Default_export_of_the_module_has_or_is_using_private_name_0_4082","Default export of the module has or is using private name '{0}'."),Type_parameter_0_of_exported_type_alias_has_or_is_using_private_name_1:t(4083,e.DiagnosticCategory.Error,"Type_parameter_0_of_exported_type_alias_has_or_is_using_private_name_1_4083","Type parameter '{0}' of exported type alias has or is using private name '{1}'."),Conflicting_definitions_for_0_found_at_1_and_2_Consider_installing_a_specific_version_of_this_library_to_resolve_the_conflict:t(4090,e.DiagnosticCategory.Message,"Conflicting_definitions_for_0_found_at_1_and_2_Consider_installing_a_specific_version_of_this_librar_4090","Conflicting definitions for '{0}' found at '{1}' and '{2}'. Consider installing a specific version of this library to resolve the conflict."),Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4091,e.DiagnosticCategory.Error,"Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2_4091","Parameter '{0}' of index signature from exported interface has or is using name '{1}' from private module '{2}'."),Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_private_name_1:t(4092,e.DiagnosticCategory.Error,"Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_private_name_1_4092","Parameter '{0}' of index signature from exported interface has or is using private name '{1}'."),Property_0_of_exported_class_expression_may_not_be_private_or_protected:t(4094,e.DiagnosticCategory.Error,"Property_0_of_exported_class_expression_may_not_be_private_or_protected_4094","Property '{0}' of exported class expression may not be private or protected."),The_current_host_does_not_support_the_0_option:t(5001,e.DiagnosticCategory.Error,"The_current_host_does_not_support_the_0_option_5001","The current host does not support the '{0}' option."),Cannot_find_the_common_subdirectory_path_for_the_input_files:t(5009,e.DiagnosticCategory.Error,"Cannot_find_the_common_subdirectory_path_for_the_input_files_5009","Cannot find the common subdirectory path for the input files."),File_specification_cannot_end_in_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0:t(5010,e.DiagnosticCategory.Error,"File_specification_cannot_end_in_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0_5010","File specification cannot end in a recursive directory wildcard ('**'): '{0}'."),File_specification_cannot_contain_multiple_recursive_directory_wildcards_Asterisk_Asterisk_Colon_0:t(5011,e.DiagnosticCategory.Error,"File_specification_cannot_contain_multiple_recursive_directory_wildcards_Asterisk_Asterisk_Colon_0_5011","File specification cannot contain multiple recursive directory wildcards ('**'): '{0}'."),Cannot_read_file_0_Colon_1:t(5012,e.DiagnosticCategory.Error,"Cannot_read_file_0_Colon_1_5012","Cannot read file '{0}': {1}."),Failed_to_parse_file_0_Colon_1:t(5014,e.DiagnosticCategory.Error,"Failed_to_parse_file_0_Colon_1_5014","Failed to parse file '{0}': {1}."),Unknown_compiler_option_0:t(5023,e.DiagnosticCategory.Error,"Unknown_compiler_option_0_5023","Unknown compiler option '{0}'."),Compiler_option_0_requires_a_value_of_type_1:t(5024,e.DiagnosticCategory.Error,"Compiler_option_0_requires_a_value_of_type_1_5024","Compiler option '{0}' requires a value of type {1}."),Could_not_write_file_0_Colon_1:t(5033,e.DiagnosticCategory.Error,"Could_not_write_file_0_Colon_1_5033","Could not write file '{0}': {1}."),Option_project_cannot_be_mixed_with_source_files_on_a_command_line:t(5042,e.DiagnosticCategory.Error,"Option_project_cannot_be_mixed_with_source_files_on_a_command_line_5042","Option 'project' cannot be mixed with source files on a command line."),Option_isolatedModules_can_only_be_used_when_either_option_module_is_provided_or_option_target_is_ES2015_or_higher:t(5047,e.DiagnosticCategory.Error,"Option_isolatedModules_can_only_be_used_when_either_option_module_is_provided_or_option_target_is_ES_5047","Option 'isolatedModules' can only be used when either option '--module' is provided or option 'target' is 'ES2015' or higher."),Option_0_can_only_be_used_when_either_option_inlineSourceMap_or_option_sourceMap_is_provided:t(5051,e.DiagnosticCategory.Error,"Option_0_can_only_be_used_when_either_option_inlineSourceMap_or_option_sourceMap_is_provided_5051","Option '{0} can only be used when either option '--inlineSourceMap' or option '--sourceMap' is provided."),Option_0_cannot_be_specified_without_specifying_option_1:t(5052,e.DiagnosticCategory.Error,"Option_0_cannot_be_specified_without_specifying_option_1_5052","Option '{0}' cannot be specified without specifying option '{1}'."),Option_0_cannot_be_specified_with_option_1:t(5053,e.DiagnosticCategory.Error,"Option_0_cannot_be_specified_with_option_1_5053","Option '{0}' cannot be specified with option '{1}'."),A_tsconfig_json_file_is_already_defined_at_Colon_0:t(5054,e.DiagnosticCategory.Error,"A_tsconfig_json_file_is_already_defined_at_Colon_0_5054","A 'tsconfig.json' file is already defined at: '{0}'."),Cannot_write_file_0_because_it_would_overwrite_input_file:t(5055,e.DiagnosticCategory.Error,"Cannot_write_file_0_because_it_would_overwrite_input_file_5055","Cannot write file '{0}' because it would overwrite input file."),Cannot_write_file_0_because_it_would_be_overwritten_by_multiple_input_files:t(5056,e.DiagnosticCategory.Error,"Cannot_write_file_0_because_it_would_be_overwritten_by_multiple_input_files_5056","Cannot write file '{0}' because it would be overwritten by multiple input files."),Cannot_find_a_tsconfig_json_file_at_the_specified_directory_Colon_0:t(5057,e.DiagnosticCategory.Error,"Cannot_find_a_tsconfig_json_file_at_the_specified_directory_Colon_0_5057","Cannot find a tsconfig.json file at the specified directory: '{0}'."),The_specified_path_does_not_exist_Colon_0:t(5058,e.DiagnosticCategory.Error,"The_specified_path_does_not_exist_Colon_0_5058","The specified path does not exist: '{0}'."),Invalid_value_for_reactNamespace_0_is_not_a_valid_identifier:t(5059,e.DiagnosticCategory.Error,"Invalid_value_for_reactNamespace_0_is_not_a_valid_identifier_5059","Invalid value for '--reactNamespace'. '{0}' is not a valid identifier."),Option_paths_cannot_be_used_without_specifying_baseUrl_option:t(5060,e.DiagnosticCategory.Error,"Option_paths_cannot_be_used_without_specifying_baseUrl_option_5060","Option 'paths' cannot be used without specifying '--baseUrl' option."),Pattern_0_can_have_at_most_one_Asterisk_character:t(5061,e.DiagnosticCategory.Error,"Pattern_0_can_have_at_most_one_Asterisk_character_5061","Pattern '{0}' can have at most one '*' character."),Substitution_0_in_pattern_1_in_can_have_at_most_one_Asterisk_character:t(5062,e.DiagnosticCategory.Error,"Substitution_0_in_pattern_1_in_can_have_at_most_one_Asterisk_character_5062","Substitution '{0}' in pattern '{1}' in can have at most one '*' character."),Substitutions_for_pattern_0_should_be_an_array:t(5063,e.DiagnosticCategory.Error,"Substitutions_for_pattern_0_should_be_an_array_5063","Substitutions for pattern '{0}' should be an array."),Substitution_0_for_pattern_1_has_incorrect_type_expected_string_got_2:t(5064,e.DiagnosticCategory.Error,"Substitution_0_for_pattern_1_has_incorrect_type_expected_string_got_2_5064","Substitution '{0}' for pattern '{1}' has incorrect type, expected 'string', got '{2}'."),File_specification_cannot_contain_a_parent_directory_that_appears_after_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0:t(5065,e.DiagnosticCategory.Error,"File_specification_cannot_contain_a_parent_directory_that_appears_after_a_recursive_directory_wildca_5065","File specification cannot contain a parent directory ('..') that appears after a recursive directory wildcard ('**'): '{0}'."),Substitutions_for_pattern_0_shouldn_t_be_an_empty_array:t(5066,e.DiagnosticCategory.Error,"Substitutions_for_pattern_0_shouldn_t_be_an_empty_array_5066","Substitutions for pattern '{0}' shouldn't be an empty array."),Invalid_value_for_jsxFactory_0_is_not_a_valid_identifier_or_qualified_name:t(5067,e.DiagnosticCategory.Error,"Invalid_value_for_jsxFactory_0_is_not_a_valid_identifier_or_qualified_name_5067","Invalid value for 'jsxFactory'. '{0}' is not a valid identifier or qualified-name."),Concatenate_and_emit_output_to_single_file:t(6001,e.DiagnosticCategory.Message,"Concatenate_and_emit_output_to_single_file_6001","Concatenate and emit output to single file."),Generates_corresponding_d_ts_file:t(6002,e.DiagnosticCategory.Message,"Generates_corresponding_d_ts_file_6002","Generates corresponding '.d.ts' file."),Specify_the_location_where_debugger_should_locate_map_files_instead_of_generated_locations:t(6003,e.DiagnosticCategory.Message,"Specify_the_location_where_debugger_should_locate_map_files_instead_of_generated_locations_6003","Specify the location where debugger should locate map files instead of generated locations."),Specify_the_location_where_debugger_should_locate_TypeScript_files_instead_of_source_locations:t(6004,e.DiagnosticCategory.Message,"Specify_the_location_where_debugger_should_locate_TypeScript_files_instead_of_source_locations_6004","Specify the location where debugger should locate TypeScript files instead of source locations."),Watch_input_files:t(6005,e.DiagnosticCategory.Message,"Watch_input_files_6005","Watch input files."),Redirect_output_structure_to_the_directory:t(6006,e.DiagnosticCategory.Message,"Redirect_output_structure_to_the_directory_6006","Redirect output structure to the directory."),Do_not_erase_const_enum_declarations_in_generated_code:t(6007,e.DiagnosticCategory.Message,"Do_not_erase_const_enum_declarations_in_generated_code_6007","Do not erase const enum declarations in generated code."),Do_not_emit_outputs_if_any_errors_were_reported:t(6008,e.DiagnosticCategory.Message,"Do_not_emit_outputs_if_any_errors_were_reported_6008","Do not emit outputs if any errors were reported."),Do_not_emit_comments_to_output:t(6009,e.DiagnosticCategory.Message,"Do_not_emit_comments_to_output_6009","Do not emit comments to output."),Do_not_emit_outputs:t(6010,e.DiagnosticCategory.Message,"Do_not_emit_outputs_6010","Do not emit outputs."),Allow_default_imports_from_modules_with_no_default_export_This_does_not_affect_code_emit_just_typechecking:t(6011,e.DiagnosticCategory.Message,"Allow_default_imports_from_modules_with_no_default_export_This_does_not_affect_code_emit_just_typech_6011","Allow default imports from modules with no default export. This does not affect code emit, just typechecking."),Skip_type_checking_of_declaration_files:t(6012,e.DiagnosticCategory.Message,"Skip_type_checking_of_declaration_files_6012","Skip type checking of declaration files."),Do_not_resolve_the_real_path_of_symlinks:t(6013,e.DiagnosticCategory.Message,"Do_not_resolve_the_real_path_of_symlinks_6013","Do not resolve the real path of symlinks."),Specify_ECMAScript_target_version_Colon_ES3_default_ES5_ES2015_ES2016_ES2017_or_ESNEXT:t(6015,e.DiagnosticCategory.Message,"Specify_ECMAScript_target_version_Colon_ES3_default_ES5_ES2015_ES2016_ES2017_or_ESNEXT_6015","Specify ECMAScript target version: 'ES3' (default), 'ES5', 'ES2015', 'ES2016', 'ES2017', or 'ESNEXT'."),Specify_module_code_generation_Colon_none_commonjs_amd_system_umd_es2015_or_ESNext:t(6016,e.DiagnosticCategory.Message,"Specify_module_code_generation_Colon_none_commonjs_amd_system_umd_es2015_or_ESNext_6016","Specify module code generation: 'none', 'commonjs', 'amd', 'system', 'umd', 'es2015', or 'ESNext'."),Print_this_message:t(6017,e.DiagnosticCategory.Message,"Print_this_message_6017","Print this message."),Print_the_compiler_s_version:t(6019,e.DiagnosticCategory.Message,"Print_the_compiler_s_version_6019","Print the compiler's version."),Compile_the_project_given_the_path_to_its_configuration_file_or_to_a_folder_with_a_tsconfig_json:t(6020,e.DiagnosticCategory.Message,"Compile_the_project_given_the_path_to_its_configuration_file_or_to_a_folder_with_a_tsconfig_json_6020","Compile the project given the path to its configuration file, or to a folder with a 'tsconfig.json'."),Syntax_Colon_0:t(6023,e.DiagnosticCategory.Message,"Syntax_Colon_0_6023","Syntax: {0}"),options:t(6024,e.DiagnosticCategory.Message,"options_6024","options"),file:t(6025,e.DiagnosticCategory.Message,"file_6025","file"),Examples_Colon_0:t(6026,e.DiagnosticCategory.Message,"Examples_Colon_0_6026","Examples: {0}"),Options_Colon:t(6027,e.DiagnosticCategory.Message,"Options_Colon_6027","Options:"),Version_0:t(6029,e.DiagnosticCategory.Message,"Version_0_6029","Version {0}"),Insert_command_line_options_and_files_from_a_file:t(6030,e.DiagnosticCategory.Message,"Insert_command_line_options_and_files_from_a_file_6030","Insert command line options and files from a file."),File_change_detected_Starting_incremental_compilation:t(6032,e.DiagnosticCategory.Message,"File_change_detected_Starting_incremental_compilation_6032","File change detected. Starting incremental compilation..."),KIND:t(6034,e.DiagnosticCategory.Message,"KIND_6034","KIND"),FILE:t(6035,e.DiagnosticCategory.Message,"FILE_6035","FILE"),VERSION:t(6036,e.DiagnosticCategory.Message,"VERSION_6036","VERSION"),LOCATION:t(6037,e.DiagnosticCategory.Message,"LOCATION_6037","LOCATION"),DIRECTORY:t(6038,e.DiagnosticCategory.Message,"DIRECTORY_6038","DIRECTORY"),STRATEGY:t(6039,e.DiagnosticCategory.Message,"STRATEGY_6039","STRATEGY"),FILE_OR_DIRECTORY:t(6040,e.DiagnosticCategory.Message,"FILE_OR_DIRECTORY_6040","FILE OR DIRECTORY"),Compilation_complete_Watching_for_file_changes:t(6042,e.DiagnosticCategory.Message,"Compilation_complete_Watching_for_file_changes_6042","Compilation complete. Watching for file changes."),Generates_corresponding_map_file:t(6043,e.DiagnosticCategory.Message,"Generates_corresponding_map_file_6043","Generates corresponding '.map' file."),Compiler_option_0_expects_an_argument:t(6044,e.DiagnosticCategory.Error,"Compiler_option_0_expects_an_argument_6044","Compiler option '{0}' expects an argument."),Unterminated_quoted_string_in_response_file_0:t(6045,e.DiagnosticCategory.Error,"Unterminated_quoted_string_in_response_file_0_6045","Unterminated quoted string in response file '{0}'."),Argument_for_0_option_must_be_Colon_1:t(6046,e.DiagnosticCategory.Error,"Argument_for_0_option_must_be_Colon_1_6046","Argument for '{0}' option must be: {1}."),Locale_must_be_of_the_form_language_or_language_territory_For_example_0_or_1:t(6048,e.DiagnosticCategory.Error,"Locale_must_be_of_the_form_language_or_language_territory_For_example_0_or_1_6048","Locale must be of the form <language> or <language>-<territory>. For example '{0}' or '{1}'."),Unsupported_locale_0:t(6049,e.DiagnosticCategory.Error,"Unsupported_locale_0_6049","Unsupported locale '{0}'."),Unable_to_open_file_0:t(6050,e.DiagnosticCategory.Error,"Unable_to_open_file_0_6050","Unable to open file '{0}'."),Corrupted_locale_file_0:t(6051,e.DiagnosticCategory.Error,"Corrupted_locale_file_0_6051","Corrupted locale file {0}."),Raise_error_on_expressions_and_declarations_with_an_implied_any_type:t(6052,e.DiagnosticCategory.Message,"Raise_error_on_expressions_and_declarations_with_an_implied_any_type_6052","Raise error on expressions and declarations with an implied 'any' type."),File_0_not_found:t(6053,e.DiagnosticCategory.Error,"File_0_not_found_6053","File '{0}' not found."),File_0_has_unsupported_extension_The_only_supported_extensions_are_1:t(6054,e.DiagnosticCategory.Error,"File_0_has_unsupported_extension_The_only_supported_extensions_are_1_6054","File '{0}' has unsupported extension. The only supported extensions are {1}."),Suppress_noImplicitAny_errors_for_indexing_objects_lacking_index_signatures:t(6055,e.DiagnosticCategory.Message,"Suppress_noImplicitAny_errors_for_indexing_objects_lacking_index_signatures_6055","Suppress noImplicitAny errors for indexing objects lacking index signatures."),Do_not_emit_declarations_for_code_that_has_an_internal_annotation:t(6056,e.DiagnosticCategory.Message,"Do_not_emit_declarations_for_code_that_has_an_internal_annotation_6056","Do not emit declarations for code that has an '@internal' annotation."),Specify_the_root_directory_of_input_files_Use_to_control_the_output_directory_structure_with_outDir:t(6058,e.DiagnosticCategory.Message,"Specify_the_root_directory_of_input_files_Use_to_control_the_output_directory_structure_with_outDir_6058","Specify the root directory of input files. Use to control the output directory structure with --outDir."),File_0_is_not_under_rootDir_1_rootDir_is_expected_to_contain_all_source_files:t(6059,e.DiagnosticCategory.Error,"File_0_is_not_under_rootDir_1_rootDir_is_expected_to_contain_all_source_files_6059","File '{0}' is not under 'rootDir' '{1}'. 'rootDir' is expected to contain all source files."),Specify_the_end_of_line_sequence_to_be_used_when_emitting_files_Colon_CRLF_dos_or_LF_unix:t(6060,e.DiagnosticCategory.Message,"Specify_the_end_of_line_sequence_to_be_used_when_emitting_files_Colon_CRLF_dos_or_LF_unix_6060","Specify the end of line sequence to be used when emitting files: 'CRLF' (dos) or 'LF' (unix)."),NEWLINE:t(6061,e.DiagnosticCategory.Message,"NEWLINE_6061","NEWLINE"),Option_0_can_only_be_specified_in_tsconfig_json_file:t(6064,e.DiagnosticCategory.Error,"Option_0_can_only_be_specified_in_tsconfig_json_file_6064","Option '{0}' can only be specified in 'tsconfig.json' file."),Enables_experimental_support_for_ES7_decorators:t(6065,e.DiagnosticCategory.Message,"Enables_experimental_support_for_ES7_decorators_6065","Enables experimental support for ES7 decorators."),Enables_experimental_support_for_emitting_type_metadata_for_decorators:t(6066,e.DiagnosticCategory.Message,"Enables_experimental_support_for_emitting_type_metadata_for_decorators_6066","Enables experimental support for emitting type metadata for decorators."),Enables_experimental_support_for_ES7_async_functions:t(6068,e.DiagnosticCategory.Message,"Enables_experimental_support_for_ES7_async_functions_6068","Enables experimental support for ES7 async functions."),Specify_module_resolution_strategy_Colon_node_Node_js_or_classic_TypeScript_pre_1_6:t(6069,e.DiagnosticCategory.Message,"Specify_module_resolution_strategy_Colon_node_Node_js_or_classic_TypeScript_pre_1_6_6069","Specify module resolution strategy: 'node' (Node.js) or 'classic' (TypeScript pre-1.6)."),Initializes_a_TypeScript_project_and_creates_a_tsconfig_json_file:t(6070,e.DiagnosticCategory.Message,"Initializes_a_TypeScript_project_and_creates_a_tsconfig_json_file_6070","Initializes a TypeScript project and creates a tsconfig.json file."),Successfully_created_a_tsconfig_json_file:t(6071,e.DiagnosticCategory.Message,"Successfully_created_a_tsconfig_json_file_6071","Successfully created a tsconfig.json file."),Suppress_excess_property_checks_for_object_literals:t(6072,e.DiagnosticCategory.Message,"Suppress_excess_property_checks_for_object_literals_6072","Suppress excess property checks for object literals."),Stylize_errors_and_messages_using_color_and_context_experimental:t(6073,e.DiagnosticCategory.Message,"Stylize_errors_and_messages_using_color_and_context_experimental_6073","Stylize errors and messages using color and context (experimental)."),Do_not_report_errors_on_unused_labels:t(6074,e.DiagnosticCategory.Message,"Do_not_report_errors_on_unused_labels_6074","Do not report errors on unused labels."),Report_error_when_not_all_code_paths_in_function_return_a_value:t(6075,e.DiagnosticCategory.Message,"Report_error_when_not_all_code_paths_in_function_return_a_value_6075","Report error when not all code paths in function return a value."),Report_errors_for_fallthrough_cases_in_switch_statement:t(6076,e.DiagnosticCategory.Message,"Report_errors_for_fallthrough_cases_in_switch_statement_6076","Report errors for fallthrough cases in switch statement."),Do_not_report_errors_on_unreachable_code:t(6077,e.DiagnosticCategory.Message,"Do_not_report_errors_on_unreachable_code_6077","Do not report errors on unreachable code."),Disallow_inconsistently_cased_references_to_the_same_file:t(6078,e.DiagnosticCategory.Message,"Disallow_inconsistently_cased_references_to_the_same_file_6078","Disallow inconsistently-cased references to the same file."),Specify_library_files_to_be_included_in_the_compilation_Colon:t(6079,e.DiagnosticCategory.Message,"Specify_library_files_to_be_included_in_the_compilation_Colon_6079","Specify library files to be included in the compilation: "),Specify_JSX_code_generation_Colon_preserve_react_native_or_react:t(6080,e.DiagnosticCategory.Message,"Specify_JSX_code_generation_Colon_preserve_react_native_or_react_6080","Specify JSX code generation: 'preserve', 'react-native', or 'react'."),File_0_has_an_unsupported_extension_so_skipping_it:t(6081,e.DiagnosticCategory.Message,"File_0_has_an_unsupported_extension_so_skipping_it_6081","File '{0}' has an unsupported extension, so skipping it."),Only_amd_and_system_modules_are_supported_alongside_0:t(6082,e.DiagnosticCategory.Error,"Only_amd_and_system_modules_are_supported_alongside_0_6082","Only 'amd' and 'system' modules are supported alongside --{0}."),Base_directory_to_resolve_non_absolute_module_names:t(6083,e.DiagnosticCategory.Message,"Base_directory_to_resolve_non_absolute_module_names_6083","Base directory to resolve non-absolute module names."),Deprecated_Use_jsxFactory_instead_Specify_the_object_invoked_for_createElement_when_targeting_react_JSX_emit:t(6084,e.DiagnosticCategory.Message,"Deprecated_Use_jsxFactory_instead_Specify_the_object_invoked_for_createElement_when_targeting_react__6084","[Deprecated] Use '--jsxFactory' instead. Specify the object invoked for createElement when targeting 'react' JSX emit"),Enable_tracing_of_the_name_resolution_process:t(6085,e.DiagnosticCategory.Message,"Enable_tracing_of_the_name_resolution_process_6085","Enable tracing of the name resolution process."),Resolving_module_0_from_1:t(6086,e.DiagnosticCategory.Message,"Resolving_module_0_from_1_6086","======== Resolving module '{0}' from '{1}'. ========"),Explicitly_specified_module_resolution_kind_Colon_0:t(6087,e.DiagnosticCategory.Message,"Explicitly_specified_module_resolution_kind_Colon_0_6087","Explicitly specified module resolution kind: '{0}'."),Module_resolution_kind_is_not_specified_using_0:t(6088,e.DiagnosticCategory.Message,"Module_resolution_kind_is_not_specified_using_0_6088","Module resolution kind is not specified, using '{0}'."),Module_name_0_was_successfully_resolved_to_1:t(6089,e.DiagnosticCategory.Message,"Module_name_0_was_successfully_resolved_to_1_6089","======== Module name '{0}' was successfully resolved to '{1}'. ========"),Module_name_0_was_not_resolved:t(6090,e.DiagnosticCategory.Message,"Module_name_0_was_not_resolved_6090","======== Module name '{0}' was not resolved. ========"),paths_option_is_specified_looking_for_a_pattern_to_match_module_name_0:t(6091,e.DiagnosticCategory.Message,"paths_option_is_specified_looking_for_a_pattern_to_match_module_name_0_6091","'paths' option is specified, looking for a pattern to match module name '{0}'."),Module_name_0_matched_pattern_1:t(6092,e.DiagnosticCategory.Message,"Module_name_0_matched_pattern_1_6092","Module name '{0}', matched pattern '{1}'."),Trying_substitution_0_candidate_module_location_Colon_1:t(6093,e.DiagnosticCategory.Message,"Trying_substitution_0_candidate_module_location_Colon_1_6093","Trying substitution '{0}', candidate module location: '{1}'."),Resolving_module_name_0_relative_to_base_url_1_2:t(6094,e.DiagnosticCategory.Message,"Resolving_module_name_0_relative_to_base_url_1_2_6094","Resolving module name '{0}' relative to base url '{1}' - '{2}'."),Loading_module_as_file_Slash_folder_candidate_module_location_0_target_file_type_1:t(6095,e.DiagnosticCategory.Message,"Loading_module_as_file_Slash_folder_candidate_module_location_0_target_file_type_1_6095","Loading module as file / folder, candidate module location '{0}', target file type '{1}'."),File_0_does_not_exist:t(6096,e.DiagnosticCategory.Message,"File_0_does_not_exist_6096","File '{0}' does not exist."),File_0_exist_use_it_as_a_name_resolution_result:t(6097,e.DiagnosticCategory.Message,"File_0_exist_use_it_as_a_name_resolution_result_6097","File '{0}' exist - use it as a name resolution result."),Loading_module_0_from_node_modules_folder_target_file_type_1:t(6098,e.DiagnosticCategory.Message,"Loading_module_0_from_node_modules_folder_target_file_type_1_6098","Loading module '{0}' from 'node_modules' folder, target file type '{1}'."),Found_package_json_at_0:t(6099,e.DiagnosticCategory.Message,"Found_package_json_at_0_6099","Found 'package.json' at '{0}'."),package_json_does_not_have_a_0_field:t(6100,e.DiagnosticCategory.Message,"package_json_does_not_have_a_0_field_6100","'package.json' does not have a '{0}' field."),package_json_has_0_field_1_that_references_2:t(6101,e.DiagnosticCategory.Message,"package_json_has_0_field_1_that_references_2_6101","'package.json' has '{0}' field '{1}' that references '{2}'."),Allow_javascript_files_to_be_compiled:t(6102,e.DiagnosticCategory.Message,"Allow_javascript_files_to_be_compiled_6102","Allow javascript files to be compiled."),Option_0_should_have_array_of_strings_as_a_value:t(6103,e.DiagnosticCategory.Error,"Option_0_should_have_array_of_strings_as_a_value_6103","Option '{0}' should have array of strings as a value."),Checking_if_0_is_the_longest_matching_prefix_for_1_2:t(6104,e.DiagnosticCategory.Message,"Checking_if_0_is_the_longest_matching_prefix_for_1_2_6104","Checking if '{0}' is the longest matching prefix for '{1}' - '{2}'."),Expected_type_of_0_field_in_package_json_to_be_string_got_1:t(6105,e.DiagnosticCategory.Message,"Expected_type_of_0_field_in_package_json_to_be_string_got_1_6105","Expected type of '{0}' field in 'package.json' to be 'string', got '{1}'."),baseUrl_option_is_set_to_0_using_this_value_to_resolve_non_relative_module_name_1:t(6106,e.DiagnosticCategory.Message,"baseUrl_option_is_set_to_0_using_this_value_to_resolve_non_relative_module_name_1_6106","'baseUrl' option is set to '{0}', using this value to resolve non-relative module name '{1}'."),rootDirs_option_is_set_using_it_to_resolve_relative_module_name_0:t(6107,e.DiagnosticCategory.Message,"rootDirs_option_is_set_using_it_to_resolve_relative_module_name_0_6107","'rootDirs' option is set, using it to resolve relative module name '{0}'."),Longest_matching_prefix_for_0_is_1:t(6108,e.DiagnosticCategory.Message,"Longest_matching_prefix_for_0_is_1_6108","Longest matching prefix for '{0}' is '{1}'."),Loading_0_from_the_root_dir_1_candidate_location_2:t(6109,e.DiagnosticCategory.Message,"Loading_0_from_the_root_dir_1_candidate_location_2_6109","Loading '{0}' from the root dir '{1}', candidate location '{2}'."),Trying_other_entries_in_rootDirs:t(6110,e.DiagnosticCategory.Message,"Trying_other_entries_in_rootDirs_6110","Trying other entries in 'rootDirs'."),Module_resolution_using_rootDirs_has_failed:t(6111,e.DiagnosticCategory.Message,"Module_resolution_using_rootDirs_has_failed_6111","Module resolution using 'rootDirs' has failed."),Do_not_emit_use_strict_directives_in_module_output:t(6112,e.DiagnosticCategory.Message,"Do_not_emit_use_strict_directives_in_module_output_6112","Do not emit 'use strict' directives in module output."),Enable_strict_null_checks:t(6113,e.DiagnosticCategory.Message,"Enable_strict_null_checks_6113","Enable strict null checks."),Unknown_option_excludes_Did_you_mean_exclude:t(6114,e.DiagnosticCategory.Error,"Unknown_option_excludes_Did_you_mean_exclude_6114","Unknown option 'excludes'. Did you mean 'exclude'?"),Raise_error_on_this_expressions_with_an_implied_any_type:t(6115,e.DiagnosticCategory.Message,"Raise_error_on_this_expressions_with_an_implied_any_type_6115","Raise error on 'this' expressions with an implied 'any' type."),Resolving_type_reference_directive_0_containing_file_1_root_directory_2:t(6116,e.DiagnosticCategory.Message,"Resolving_type_reference_directive_0_containing_file_1_root_directory_2_6116","======== Resolving type reference directive '{0}', containing file '{1}', root directory '{2}'. ========"),Resolving_using_primary_search_paths:t(6117,e.DiagnosticCategory.Message,"Resolving_using_primary_search_paths_6117","Resolving using primary search paths..."),Resolving_from_node_modules_folder:t(6118,e.DiagnosticCategory.Message,"Resolving_from_node_modules_folder_6118","Resolving from node_modules folder..."),Type_reference_directive_0_was_successfully_resolved_to_1_primary_Colon_2:t(6119,e.DiagnosticCategory.Message,"Type_reference_directive_0_was_successfully_resolved_to_1_primary_Colon_2_6119","======== Type reference directive '{0}' was successfully resolved to '{1}', primary: {2}. ========"),Type_reference_directive_0_was_not_resolved:t(6120,e.DiagnosticCategory.Message,"Type_reference_directive_0_was_not_resolved_6120","======== Type reference directive '{0}' was not resolved. ========"),Resolving_with_primary_search_path_0:t(6121,e.DiagnosticCategory.Message,"Resolving_with_primary_search_path_0_6121","Resolving with primary search path '{0}'."),Root_directory_cannot_be_determined_skipping_primary_search_paths:t(6122,e.DiagnosticCategory.Message,"Root_directory_cannot_be_determined_skipping_primary_search_paths_6122","Root directory cannot be determined, skipping primary search paths."),Resolving_type_reference_directive_0_containing_file_1_root_directory_not_set:t(6123,e.DiagnosticCategory.Message,"Resolving_type_reference_directive_0_containing_file_1_root_directory_not_set_6123","======== Resolving type reference directive '{0}', containing file '{1}', root directory not set. ========"),Type_declaration_files_to_be_included_in_compilation:t(6124,e.DiagnosticCategory.Message,"Type_declaration_files_to_be_included_in_compilation_6124","Type declaration files to be included in compilation."),Looking_up_in_node_modules_folder_initial_location_0:t(6125,e.DiagnosticCategory.Message,"Looking_up_in_node_modules_folder_initial_location_0_6125","Looking up in 'node_modules' folder, initial location '{0}'."),Containing_file_is_not_specified_and_root_directory_cannot_be_determined_skipping_lookup_in_node_modules_folder:t(6126,e.DiagnosticCategory.Message,"Containing_file_is_not_specified_and_root_directory_cannot_be_determined_skipping_lookup_in_node_mod_6126","Containing file is not specified and root directory cannot be determined, skipping lookup in 'node_modules' folder."),Resolving_type_reference_directive_0_containing_file_not_set_root_directory_1:t(6127,e.DiagnosticCategory.Message,"Resolving_type_reference_directive_0_containing_file_not_set_root_directory_1_6127","======== Resolving type reference directive '{0}', containing file not set, root directory '{1}'. ========"),Resolving_type_reference_directive_0_containing_file_not_set_root_directory_not_set:t(6128,e.DiagnosticCategory.Message,"Resolving_type_reference_directive_0_containing_file_not_set_root_directory_not_set_6128","======== Resolving type reference directive '{0}', containing file not set, root directory not set. ========"),Resolving_real_path_for_0_result_1:t(6130,e.DiagnosticCategory.Message,"Resolving_real_path_for_0_result_1_6130","Resolving real path for '{0}', result '{1}'."),Cannot_compile_modules_using_option_0_unless_the_module_flag_is_amd_or_system:t(6131,e.DiagnosticCategory.Error,"Cannot_compile_modules_using_option_0_unless_the_module_flag_is_amd_or_system_6131","Cannot compile modules using option '{0}' unless the '--module' flag is 'amd' or 'system'."),File_name_0_has_a_1_extension_stripping_it:t(6132,e.DiagnosticCategory.Message,"File_name_0_has_a_1_extension_stripping_it_6132","File name '{0}' has a '{1}' extension - stripping it."),_0_is_declared_but_its_value_is_never_read:t(6133,e.DiagnosticCategory.Error,"_0_is_declared_but_its_value_is_never_read_6133","'{0}' is declared but its value is never read."),Report_errors_on_unused_locals:t(6134,e.DiagnosticCategory.Message,"Report_errors_on_unused_locals_6134","Report errors on unused locals."),Report_errors_on_unused_parameters:t(6135,e.DiagnosticCategory.Message,"Report_errors_on_unused_parameters_6135","Report errors on unused parameters."),The_maximum_dependency_depth_to_search_under_node_modules_and_load_JavaScript_files:t(6136,e.DiagnosticCategory.Message,"The_maximum_dependency_depth_to_search_under_node_modules_and_load_JavaScript_files_6136","The maximum dependency depth to search under node_modules and load JavaScript files."),Cannot_import_type_declaration_files_Consider_importing_0_instead_of_1:t(6137,e.DiagnosticCategory.Error,"Cannot_import_type_declaration_files_Consider_importing_0_instead_of_1_6137","Cannot import type declaration files. Consider importing '{0}' instead of '{1}'."),Property_0_is_declared_but_its_value_is_never_read:t(6138,e.DiagnosticCategory.Error,"Property_0_is_declared_but_its_value_is_never_read_6138","Property '{0}' is declared but its value is never read."),Import_emit_helpers_from_tslib:t(6139,e.DiagnosticCategory.Message,"Import_emit_helpers_from_tslib_6139","Import emit helpers from 'tslib'."),Auto_discovery_for_typings_is_enabled_in_project_0_Running_extra_resolution_pass_for_module_1_using_cache_location_2:t(6140,e.DiagnosticCategory.Error,"Auto_discovery_for_typings_is_enabled_in_project_0_Running_extra_resolution_pass_for_module_1_using__6140","Auto discovery for typings is enabled in project '{0}'. Running extra resolution pass for module '{1}' using cache location '{2}'."),Parse_in_strict_mode_and_emit_use_strict_for_each_source_file:t(6141,e.DiagnosticCategory.Message,"Parse_in_strict_mode_and_emit_use_strict_for_each_source_file_6141",'Parse in strict mode and emit "use strict" for each source file.'),Module_0_was_resolved_to_1_but_jsx_is_not_set:t(6142,e.DiagnosticCategory.Error,"Module_0_was_resolved_to_1_but_jsx_is_not_set_6142","Module '{0}' was resolved to '{1}', but '--jsx' is not set."),Module_0_was_resolved_as_locally_declared_ambient_module_in_file_1:t(6144,e.DiagnosticCategory.Message,"Module_0_was_resolved_as_locally_declared_ambient_module_in_file_1_6144","Module '{0}' was resolved as locally declared ambient module in file '{1}'."),Module_0_was_resolved_as_ambient_module_declared_in_1_since_this_file_was_not_modified:t(6145,e.DiagnosticCategory.Message,"Module_0_was_resolved_as_ambient_module_declared_in_1_since_this_file_was_not_modified_6145","Module '{0}' was resolved as ambient module declared in '{1}' since this file was not modified."),Specify_the_JSX_factory_function_to_use_when_targeting_react_JSX_emit_e_g_React_createElement_or_h:t(6146,e.DiagnosticCategory.Message,"Specify_the_JSX_factory_function_to_use_when_targeting_react_JSX_emit_e_g_React_createElement_or_h_6146","Specify the JSX factory function to use when targeting 'react' JSX emit, e.g. 'React.createElement' or 'h'."),Resolution_for_module_0_was_found_in_cache:t(6147,e.DiagnosticCategory.Message,"Resolution_for_module_0_was_found_in_cache_6147","Resolution for module '{0}' was found in cache."),Directory_0_does_not_exist_skipping_all_lookups_in_it:t(6148,e.DiagnosticCategory.Message,"Directory_0_does_not_exist_skipping_all_lookups_in_it_6148","Directory '{0}' does not exist, skipping all lookups in it."),Show_diagnostic_information:t(6149,e.DiagnosticCategory.Message,"Show_diagnostic_information_6149","Show diagnostic information."),Show_verbose_diagnostic_information:t(6150,e.DiagnosticCategory.Message,"Show_verbose_diagnostic_information_6150","Show verbose diagnostic information."),Emit_a_single_file_with_source_maps_instead_of_having_a_separate_file:t(6151,e.DiagnosticCategory.Message,"Emit_a_single_file_with_source_maps_instead_of_having_a_separate_file_6151","Emit a single file with source maps instead of having a separate file."),Emit_the_source_alongside_the_sourcemaps_within_a_single_file_requires_inlineSourceMap_or_sourceMap_to_be_set:t(6152,e.DiagnosticCategory.Message,"Emit_the_source_alongside_the_sourcemaps_within_a_single_file_requires_inlineSourceMap_or_sourceMap__6152","Emit the source alongside the sourcemaps within a single file; requires '--inlineSourceMap' or '--sourceMap' to be set."),Transpile_each_file_as_a_separate_module_similar_to_ts_transpileModule:t(6153,e.DiagnosticCategory.Message,"Transpile_each_file_as_a_separate_module_similar_to_ts_transpileModule_6153","Transpile each file as a separate module (similar to 'ts.transpileModule')."),Print_names_of_generated_files_part_of_the_compilation:t(6154,e.DiagnosticCategory.Message,"Print_names_of_generated_files_part_of_the_compilation_6154","Print names of generated files part of the compilation."),Print_names_of_files_part_of_the_compilation:t(6155,e.DiagnosticCategory.Message,"Print_names_of_files_part_of_the_compilation_6155","Print names of files part of the compilation."),The_locale_used_when_displaying_messages_to_the_user_e_g_en_us:t(6156,e.DiagnosticCategory.Message,"The_locale_used_when_displaying_messages_to_the_user_e_g_en_us_6156","The locale used when displaying messages to the user (e.g. 'en-us')"),Do_not_generate_custom_helper_functions_like_extends_in_compiled_output:t(6157,e.DiagnosticCategory.Message,"Do_not_generate_custom_helper_functions_like_extends_in_compiled_output_6157","Do not generate custom helper functions like '__extends' in compiled output."),Do_not_include_the_default_library_file_lib_d_ts:t(6158,e.DiagnosticCategory.Message,"Do_not_include_the_default_library_file_lib_d_ts_6158","Do not include the default library file (lib.d.ts)."),Do_not_add_triple_slash_references_or_imported_modules_to_the_list_of_compiled_files:t(6159,e.DiagnosticCategory.Message,"Do_not_add_triple_slash_references_or_imported_modules_to_the_list_of_compiled_files_6159","Do not add triple-slash references or imported modules to the list of compiled files."),Deprecated_Use_skipLibCheck_instead_Skip_type_checking_of_default_library_declaration_files:t(6160,e.DiagnosticCategory.Message,"Deprecated_Use_skipLibCheck_instead_Skip_type_checking_of_default_library_declaration_files_6160","[Deprecated] Use '--skipLibCheck' instead. Skip type checking of default library declaration files."),List_of_folders_to_include_type_definitions_from:t(6161,e.DiagnosticCategory.Message,"List_of_folders_to_include_type_definitions_from_6161","List of folders to include type definitions from."),Disable_size_limitations_on_JavaScript_projects:t(6162,e.DiagnosticCategory.Message,"Disable_size_limitations_on_JavaScript_projects_6162","Disable size limitations on JavaScript projects."),The_character_set_of_the_input_files:t(6163,e.DiagnosticCategory.Message,"The_character_set_of_the_input_files_6163","The character set of the input files."),Emit_a_UTF_8_Byte_Order_Mark_BOM_in_the_beginning_of_output_files:t(6164,e.DiagnosticCategory.Message,"Emit_a_UTF_8_Byte_Order_Mark_BOM_in_the_beginning_of_output_files_6164","Emit a UTF-8 Byte Order Mark (BOM) in the beginning of output files."),Do_not_truncate_error_messages:t(6165,e.DiagnosticCategory.Message,"Do_not_truncate_error_messages_6165","Do not truncate error messages."),Output_directory_for_generated_declaration_files:t(6166,e.DiagnosticCategory.Message,"Output_directory_for_generated_declaration_files_6166","Output directory for generated declaration files."),A_series_of_entries_which_re_map_imports_to_lookup_locations_relative_to_the_baseUrl:t(6167,e.DiagnosticCategory.Message,"A_series_of_entries_which_re_map_imports_to_lookup_locations_relative_to_the_baseUrl_6167","A series of entries which re-map imports to lookup locations relative to the 'baseUrl'."),List_of_root_folders_whose_combined_content_represents_the_structure_of_the_project_at_runtime:t(6168,e.DiagnosticCategory.Message,"List_of_root_folders_whose_combined_content_represents_the_structure_of_the_project_at_runtime_6168","List of root folders whose combined content represents the structure of the project at runtime."),Show_all_compiler_options:t(6169,e.DiagnosticCategory.Message,"Show_all_compiler_options_6169","Show all compiler options."),Deprecated_Use_outFile_instead_Concatenate_and_emit_output_to_single_file:t(6170,e.DiagnosticCategory.Message,"Deprecated_Use_outFile_instead_Concatenate_and_emit_output_to_single_file_6170","[Deprecated] Use '--outFile' instead. Concatenate and emit output to single file"),Command_line_Options:t(6171,e.DiagnosticCategory.Message,"Command_line_Options_6171","Command-line Options"),Basic_Options:t(6172,e.DiagnosticCategory.Message,"Basic_Options_6172","Basic Options"),Strict_Type_Checking_Options:t(6173,e.DiagnosticCategory.Message,"Strict_Type_Checking_Options_6173","Strict Type-Checking Options"),Module_Resolution_Options:t(6174,e.DiagnosticCategory.Message,"Module_Resolution_Options_6174","Module Resolution Options"),Source_Map_Options:t(6175,e.DiagnosticCategory.Message,"Source_Map_Options_6175","Source Map Options"),Additional_Checks:t(6176,e.DiagnosticCategory.Message,"Additional_Checks_6176","Additional Checks"),Experimental_Options:t(6177,e.DiagnosticCategory.Message,"Experimental_Options_6177","Experimental Options"),Advanced_Options:t(6178,e.DiagnosticCategory.Message,"Advanced_Options_6178","Advanced Options"),Provide_full_support_for_iterables_in_for_of_spread_and_destructuring_when_targeting_ES5_or_ES3:t(6179,e.DiagnosticCategory.Message,"Provide_full_support_for_iterables_in_for_of_spread_and_destructuring_when_targeting_ES5_or_ES3_6179","Provide full support for iterables in 'for-of', spread, and destructuring when targeting 'ES5' or 'ES3'."),Enable_all_strict_type_checking_options:t(6180,e.DiagnosticCategory.Message,"Enable_all_strict_type_checking_options_6180","Enable all strict type-checking options."),List_of_language_service_plugins:t(6181,e.DiagnosticCategory.Message,"List_of_language_service_plugins_6181","List of language service plugins."),Scoped_package_detected_looking_in_0:t(6182,e.DiagnosticCategory.Message,"Scoped_package_detected_looking_in_0_6182","Scoped package detected, looking in '{0}'"),Reusing_resolution_of_module_0_to_file_1_from_old_program:t(6183,e.DiagnosticCategory.Message,"Reusing_resolution_of_module_0_to_file_1_from_old_program_6183","Reusing resolution of module '{0}' to file '{1}' from old program."),Reusing_module_resolutions_originating_in_0_since_resolutions_are_unchanged_from_old_program:t(6184,e.DiagnosticCategory.Message,"Reusing_module_resolutions_originating_in_0_since_resolutions_are_unchanged_from_old_program_6184","Reusing module resolutions originating in '{0}' since resolutions are unchanged from old program."),Disable_strict_checking_of_generic_signatures_in_function_types:t(6185,e.DiagnosticCategory.Message,"Disable_strict_checking_of_generic_signatures_in_function_types_6185","Disable strict checking of generic signatures in function types."),Enable_strict_checking_of_function_types:t(6186,e.DiagnosticCategory.Message,"Enable_strict_checking_of_function_types_6186","Enable strict checking of function types."),Variable_0_implicitly_has_an_1_type:t(7005,e.DiagnosticCategory.Error,"Variable_0_implicitly_has_an_1_type_7005","Variable '{0}' implicitly has an '{1}' type."),Parameter_0_implicitly_has_an_1_type:t(7006,e.DiagnosticCategory.Error,"Parameter_0_implicitly_has_an_1_type_7006","Parameter '{0}' implicitly has an '{1}' type."),Member_0_implicitly_has_an_1_type:t(7008,e.DiagnosticCategory.Error,"Member_0_implicitly_has_an_1_type_7008","Member '{0}' implicitly has an '{1}' type."),new_expression_whose_target_lacks_a_construct_signature_implicitly_has_an_any_type:t(7009,e.DiagnosticCategory.Error,"new_expression_whose_target_lacks_a_construct_signature_implicitly_has_an_any_type_7009","'new' expression, whose target lacks a construct signature, implicitly has an 'any' type."),_0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type:t(7010,e.DiagnosticCategory.Error,"_0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type_7010","'{0}', which lacks return-type annotation, implicitly has an '{1}' return type."),Function_expression_which_lacks_return_type_annotation_implicitly_has_an_0_return_type:t(7011,e.DiagnosticCategory.Error,"Function_expression_which_lacks_return_type_annotation_implicitly_has_an_0_return_type_7011","Function expression, which lacks return-type annotation, implicitly has an '{0}' return type."),Construct_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type:t(7013,e.DiagnosticCategory.Error,"Construct_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type_7013","Construct signature, which lacks return-type annotation, implicitly has an 'any' return type."),Element_implicitly_has_an_any_type_because_index_expression_is_not_of_type_number:t(7015,e.DiagnosticCategory.Error,"Element_implicitly_has_an_any_type_because_index_expression_is_not_of_type_number_7015","Element implicitly has an 'any' type because index expression is not of type 'number'."),Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type:t(7016,e.DiagnosticCategory.Error,"Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type_7016","Could not find a declaration file for module '{0}'. '{1}' implicitly has an 'any' type."),Element_implicitly_has_an_any_type_because_type_0_has_no_index_signature:t(7017,e.DiagnosticCategory.Error,"Element_implicitly_has_an_any_type_because_type_0_has_no_index_signature_7017","Element implicitly has an 'any' type because type '{0}' has no index signature."),Object_literal_s_property_0_implicitly_has_an_1_type:t(7018,e.DiagnosticCategory.Error,"Object_literal_s_property_0_implicitly_has_an_1_type_7018","Object literal's property '{0}' implicitly has an '{1}' type."),Rest_parameter_0_implicitly_has_an_any_type:t(7019,e.DiagnosticCategory.Error,"Rest_parameter_0_implicitly_has_an_any_type_7019","Rest parameter '{0}' implicitly has an 'any[]' type."),Call_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type:t(7020,e.DiagnosticCategory.Error,"Call_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type_7020","Call signature, which lacks return-type annotation, implicitly has an 'any' return type."),_0_implicitly_has_type_any_because_it_does_not_have_a_type_annotation_and_is_referenced_directly_or_indirectly_in_its_own_initializer:t(7022,e.DiagnosticCategory.Error,"_0_implicitly_has_type_any_because_it_does_not_have_a_type_annotation_and_is_referenced_directly_or__7022","'{0}' implicitly has type 'any' because it does not have a type annotation and is referenced directly or indirectly in its own initializer."),_0_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions:t(7023,e.DiagnosticCategory.Error,"_0_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_reference_7023","'{0}' implicitly has return type 'any' because it does not have a return type annotation and is referenced directly or indirectly in one of its return expressions."),Function_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions:t(7024,e.DiagnosticCategory.Error,"Function_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_ref_7024","Function implicitly has return type 'any' because it does not have a return type annotation and is referenced directly or indirectly in one of its return expressions."),Generator_implicitly_has_type_0_because_it_does_not_yield_any_values_Consider_supplying_a_return_type:t(7025,e.DiagnosticCategory.Error,"Generator_implicitly_has_type_0_because_it_does_not_yield_any_values_Consider_supplying_a_return_typ_7025","Generator implicitly has type '{0}' because it does not yield any values. Consider supplying a return type."),JSX_element_implicitly_has_type_any_because_no_interface_JSX_0_exists:t(7026,e.DiagnosticCategory.Error,"JSX_element_implicitly_has_type_any_because_no_interface_JSX_0_exists_7026","JSX element implicitly has type 'any' because no interface 'JSX.{0}' exists."),Unreachable_code_detected:t(7027,e.DiagnosticCategory.Error,"Unreachable_code_detected_7027","Unreachable code detected."),Unused_label:t(7028,e.DiagnosticCategory.Error,"Unused_label_7028","Unused label."),Fallthrough_case_in_switch:t(7029,e.DiagnosticCategory.Error,"Fallthrough_case_in_switch_7029","Fallthrough case in switch."),Not_all_code_paths_return_a_value:t(7030,e.DiagnosticCategory.Error,"Not_all_code_paths_return_a_value_7030","Not all code paths return a value."),Binding_element_0_implicitly_has_an_1_type:t(7031,e.DiagnosticCategory.Error,"Binding_element_0_implicitly_has_an_1_type_7031","Binding element '{0}' implicitly has an '{1}' type."),Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation:t(7032,e.DiagnosticCategory.Error,"Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation_7032","Property '{0}' implicitly has type 'any', because its set accessor lacks a parameter type annotation."),Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation:t(7033,e.DiagnosticCategory.Error,"Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation_7033","Property '{0}' implicitly has type 'any', because its get accessor lacks a return type annotation."),Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined:t(7034,e.DiagnosticCategory.Error,"Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined_7034","Variable '{0}' implicitly has type '{1}' in some locations where its type cannot be determined."),Try_npm_install_types_Slash_0_if_it_exists_or_add_a_new_declaration_d_ts_file_containing_declare_module_0:t(7035,e.DiagnosticCategory.Error,"Try_npm_install_types_Slash_0_if_it_exists_or_add_a_new_declaration_d_ts_file_containing_declare_mod_7035","Try `npm install @types/{0}` if it exists or add a new declaration (.d.ts) file containing `declare module '{0}';`"),Dynamic_import_s_specifier_must_be_of_type_string_but_here_has_type_0:t(7036,e.DiagnosticCategory.Error,"Dynamic_import_s_specifier_must_be_of_type_string_but_here_has_type_0_7036","Dynamic import's specifier must be of type 'string', but here has type '{0}'."),You_cannot_rename_this_element:t(8e3,e.DiagnosticCategory.Error,"You_cannot_rename_this_element_8000","You cannot rename this element."),You_cannot_rename_elements_that_are_defined_in_the_standard_TypeScript_library:t(8001,e.DiagnosticCategory.Error,"You_cannot_rename_elements_that_are_defined_in_the_standard_TypeScript_library_8001","You cannot rename elements that are defined in the standard TypeScript library."),import_can_only_be_used_in_a_ts_file:t(8002,e.DiagnosticCategory.Error,"import_can_only_be_used_in_a_ts_file_8002","'import ... =' can only be used in a .ts file."),export_can_only_be_used_in_a_ts_file:t(8003,e.DiagnosticCategory.Error,"export_can_only_be_used_in_a_ts_file_8003","'export=' can only be used in a .ts file."),type_parameter_declarations_can_only_be_used_in_a_ts_file:t(8004,e.DiagnosticCategory.Error,"type_parameter_declarations_can_only_be_used_in_a_ts_file_8004","'type parameter declarations' can only be used in a .ts file."),implements_clauses_can_only_be_used_in_a_ts_file:t(8005,e.DiagnosticCategory.Error,"implements_clauses_can_only_be_used_in_a_ts_file_8005","'implements clauses' can only be used in a .ts file."),interface_declarations_can_only_be_used_in_a_ts_file:t(8006,e.DiagnosticCategory.Error,"interface_declarations_can_only_be_used_in_a_ts_file_8006","'interface declarations' can only be used in a .ts file."),module_declarations_can_only_be_used_in_a_ts_file:t(8007,e.DiagnosticCategory.Error,"module_declarations_can_only_be_used_in_a_ts_file_8007","'module declarations' can only be used in a .ts file."),type_aliases_can_only_be_used_in_a_ts_file:t(8008,e.DiagnosticCategory.Error,"type_aliases_can_only_be_used_in_a_ts_file_8008","'type aliases' can only be used in a .ts file."),_0_can_only_be_used_in_a_ts_file:t(8009,e.DiagnosticCategory.Error,"_0_can_only_be_used_in_a_ts_file_8009","'{0}' can only be used in a .ts file."),types_can_only_be_used_in_a_ts_file:t(8010,e.DiagnosticCategory.Error,"types_can_only_be_used_in_a_ts_file_8010","'types' can only be used in a .ts file."),type_arguments_can_only_be_used_in_a_ts_file:t(8011,e.DiagnosticCategory.Error,"type_arguments_can_only_be_used_in_a_ts_file_8011","'type arguments' can only be used in a .ts file."),parameter_modifiers_can_only_be_used_in_a_ts_file:t(8012,e.DiagnosticCategory.Error,"parameter_modifiers_can_only_be_used_in_a_ts_file_8012","'parameter modifiers' can only be used in a .ts file."),non_null_assertions_can_only_be_used_in_a_ts_file:t(8013,e.DiagnosticCategory.Error,"non_null_assertions_can_only_be_used_in_a_ts_file_8013","'non-null assertions' can only be used in a .ts file."),enum_declarations_can_only_be_used_in_a_ts_file:t(8015,e.DiagnosticCategory.Error,"enum_declarations_can_only_be_used_in_a_ts_file_8015","'enum declarations' can only be used in a .ts file."),type_assertion_expressions_can_only_be_used_in_a_ts_file:t(8016,e.DiagnosticCategory.Error,"type_assertion_expressions_can_only_be_used_in_a_ts_file_8016","'type assertion expressions' can only be used in a .ts file."),Octal_literal_types_must_use_ES2015_syntax_Use_the_syntax_0:t(8017,e.DiagnosticCategory.Error,"Octal_literal_types_must_use_ES2015_syntax_Use_the_syntax_0_8017","Octal literal types must use ES2015 syntax. Use the syntax '{0}'."),Octal_literals_are_not_allowed_in_enums_members_initializer_Use_the_syntax_0:t(8018,e.DiagnosticCategory.Error,"Octal_literals_are_not_allowed_in_enums_members_initializer_Use_the_syntax_0_8018","Octal literals are not allowed in enums members initializer. Use the syntax '{0}'."),Report_errors_in_js_files:t(8019,e.DiagnosticCategory.Message,"Report_errors_in_js_files_8019","Report errors in .js files."),JSDoc_types_can_only_be_used_inside_documentation_comments:t(8020,e.DiagnosticCategory.Error,"JSDoc_types_can_only_be_used_inside_documentation_comments_8020","JSDoc types can only be used inside documentation comments."),JSDoc_typedef_tag_should_either_have_a_type_annotation_or_be_followed_by_property_or_member_tags:t(8021,e.DiagnosticCategory.Error,"JSDoc_typedef_tag_should_either_have_a_type_annotation_or_be_followed_by_property_or_member_tags_8021","JSDoc '@typedef' tag should either have a type annotation or be followed by '@property' or '@member' tags."),JSDoc_0_is_not_attached_to_a_class:t(8022,e.DiagnosticCategory.Error,"JSDoc_0_is_not_attached_to_a_class_8022","JSDoc '@{0}' is not attached to a class."),JSDoc_0_1_does_not_match_the_extends_2_clause:t(8023,e.DiagnosticCategory.Error,"JSDoc_0_1_does_not_match_the_extends_2_clause_8023","JSDoc '@{0} {1}' does not match the 'extends {2}' clause."),JSDoc_param_tag_has_name_0_but_there_is_no_parameter_with_that_name:t(8024,e.DiagnosticCategory.Error,"JSDoc_param_tag_has_name_0_but_there_is_no_parameter_with_that_name_8024","JSDoc '@param' tag has name '{0}', but there is no parameter with that name."),Class_declarations_cannot_have_more_than_one_augments_or_extends_tag:t(8025,e.DiagnosticCategory.Error,"Class_declarations_cannot_have_more_than_one_augments_or_extends_tag_8025","Class declarations cannot have more than one `@augments` or `@extends` tag."),Only_identifiers_Slashqualified_names_with_optional_type_arguments_are_currently_supported_in_a_class_extends_clause:t(9002,e.DiagnosticCategory.Error,"Only_identifiers_Slashqualified_names_with_optional_type_arguments_are_currently_supported_in_a_clas_9002","Only identifiers/qualified-names with optional type arguments are currently supported in a class 'extends' clause."),class_expressions_are_not_currently_supported:t(9003,e.DiagnosticCategory.Error,"class_expressions_are_not_currently_supported_9003","'class' expressions are not currently supported."),Language_service_is_disabled:t(9004,e.DiagnosticCategory.Error,"Language_service_is_disabled_9004","Language service is disabled."),JSX_attributes_must_only_be_assigned_a_non_empty_expression:t(17e3,e.DiagnosticCategory.Error,"JSX_attributes_must_only_be_assigned_a_non_empty_expression_17000","JSX attributes must only be assigned a non-empty 'expression'."),JSX_elements_cannot_have_multiple_attributes_with_the_same_name:t(17001,e.DiagnosticCategory.Error,"JSX_elements_cannot_have_multiple_attributes_with_the_same_name_17001","JSX elements cannot have multiple attributes with the same name."),Expected_corresponding_JSX_closing_tag_for_0:t(17002,e.DiagnosticCategory.Error,"Expected_corresponding_JSX_closing_tag_for_0_17002","Expected corresponding JSX closing tag for '{0}'."),JSX_attribute_expected:t(17003,e.DiagnosticCategory.Error,"JSX_attribute_expected_17003","JSX attribute expected."),Cannot_use_JSX_unless_the_jsx_flag_is_provided:t(17004,e.DiagnosticCategory.Error,"Cannot_use_JSX_unless_the_jsx_flag_is_provided_17004","Cannot use JSX unless the '--jsx' flag is provided."),A_constructor_cannot_contain_a_super_call_when_its_class_extends_null:t(17005,e.DiagnosticCategory.Error,"A_constructor_cannot_contain_a_super_call_when_its_class_extends_null_17005","A constructor cannot contain a 'super' call when its class extends 'null'."),An_unary_expression_with_the_0_operator_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Consider_enclosing_the_expression_in_parentheses:t(17006,e.DiagnosticCategory.Error,"An_unary_expression_with_the_0_operator_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_ex_17006","An unary expression with the '{0}' operator is not allowed in the left-hand side of an exponentiation expression. Consider enclosing the expression in parentheses."),A_type_assertion_expression_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Consider_enclosing_the_expression_in_parentheses:t(17007,e.DiagnosticCategory.Error,"A_type_assertion_expression_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Con_17007","A type assertion expression is not allowed in the left-hand side of an exponentiation expression. Consider enclosing the expression in parentheses."),JSX_element_0_has_no_corresponding_closing_tag:t(17008,e.DiagnosticCategory.Error,"JSX_element_0_has_no_corresponding_closing_tag_17008","JSX element '{0}' has no corresponding closing tag."),super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class:t(17009,e.DiagnosticCategory.Error,"super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class_17009","'super' must be called before accessing 'this' in the constructor of a derived class."),Unknown_type_acquisition_option_0:t(17010,e.DiagnosticCategory.Error,"Unknown_type_acquisition_option_0_17010","Unknown type acquisition option '{0}'."),super_must_be_called_before_accessing_a_property_of_super_in_the_constructor_of_a_derived_class:t(17011,e.DiagnosticCategory.Error,"super_must_be_called_before_accessing_a_property_of_super_in_the_constructor_of_a_derived_class_17011","'super' must be called before accessing a property of 'super' in the constructor of a derived class."),_0_is_not_a_valid_meta_property_for_keyword_1_Did_you_mean_2:t(17012,e.DiagnosticCategory.Error,"_0_is_not_a_valid_meta_property_for_keyword_1_Did_you_mean_2_17012","'{0}' is not a valid meta-property for keyword '{1}'. Did you mean '{2}'?"),Meta_property_0_is_only_allowed_in_the_body_of_a_function_declaration_function_expression_or_constructor:t(17013,e.DiagnosticCategory.Error,"Meta_property_0_is_only_allowed_in_the_body_of_a_function_declaration_function_expression_or_constru_17013","Meta-property '{0}' is only allowed in the body of a function declaration, function expression, or constructor."),Circularity_detected_while_resolving_configuration_Colon_0:t(18e3,e.DiagnosticCategory.Error,"Circularity_detected_while_resolving_configuration_Colon_0_18000","Circularity detected while resolving configuration: {0}"),A_path_in_an_extends_option_must_be_relative_or_rooted_but_0_is_not:t(18001,e.DiagnosticCategory.Error,"A_path_in_an_extends_option_must_be_relative_or_rooted_but_0_is_not_18001","A path in an 'extends' option must be relative or rooted, but '{0}' is not."),The_files_list_in_config_file_0_is_empty:t(18002,e.DiagnosticCategory.Error,"The_files_list_in_config_file_0_is_empty_18002","The 'files' list in config file '{0}' is empty."),No_inputs_were_found_in_config_file_0_Specified_include_paths_were_1_and_exclude_paths_were_2:t(18003,e.DiagnosticCategory.Error,"No_inputs_were_found_in_config_file_0_Specified_include_paths_were_1_and_exclude_paths_were_2_18003","No inputs were found in config file '{0}'. Specified 'include' paths were '{1}' and 'exclude' paths were '{2}'."),Add_missing_super_call:t(90001,e.DiagnosticCategory.Message,"Add_missing_super_call_90001","Add missing 'super()' call."),Make_super_call_the_first_statement_in_the_constructor:t(90002,e.DiagnosticCategory.Message,"Make_super_call_the_first_statement_in_the_constructor_90002","Make 'super()' call the first statement in the constructor."),Change_extends_to_implements:t(90003,e.DiagnosticCategory.Message,"Change_extends_to_implements_90003","Change 'extends' to 'implements'."),Remove_declaration_for_Colon_0:t(90004,e.DiagnosticCategory.Message,"Remove_declaration_for_Colon_0_90004","Remove declaration for: '{0}'."),Implement_interface_0:t(90006,e.DiagnosticCategory.Message,"Implement_interface_0_90006","Implement interface '{0}'."),Implement_inherited_abstract_class:t(90007,e.DiagnosticCategory.Message,"Implement_inherited_abstract_class_90007","Implement inherited abstract class."),Add_this_to_unresolved_variable:t(90008,e.DiagnosticCategory.Message,"Add_this_to_unresolved_variable_90008","Add 'this.' to unresolved variable."),Adding_a_tsconfig_json_file_will_help_organize_projects_that_contain_both_TypeScript_and_JavaScript_files_Learn_more_at_https_Colon_Slash_Slashaka_ms_Slashtsconfig:t(90009,e.DiagnosticCategory.Error,"Adding_a_tsconfig_json_file_will_help_organize_projects_that_contain_both_TypeScript_and_JavaScript__90009","Adding a tsconfig.json file will help organize projects that contain both TypeScript and JavaScript files. Learn more at https://aka.ms/tsconfig."),Type_0_is_not_assignable_to_type_1_Two_different_types_with_this_name_exist_but_they_are_unrelated:t(90010,e.DiagnosticCategory.Error,"Type_0_is_not_assignable_to_type_1_Two_different_types_with_this_name_exist_but_they_are_unrelated_90010","Type '{0}' is not assignable to type '{1}'. Two different types with this name exist, but they are unrelated."),Import_0_from_1:t(90013,e.DiagnosticCategory.Message,"Import_0_from_1_90013","Import '{0}' from \"{1}\"."),Change_0_to_1:t(90014,e.DiagnosticCategory.Message,"Change_0_to_1_90014","Change '{0}' to '{1}'."),Add_0_to_existing_import_declaration_from_1:t(90015,e.DiagnosticCategory.Message,"Add_0_to_existing_import_declaration_from_1_90015","Add '{0}' to existing import declaration from \"{1}\"."),Declare_property_0:t(90016,e.DiagnosticCategory.Message,"Declare_property_0_90016","Declare property '{0}'."),Add_index_signature_for_property_0:t(90017,e.DiagnosticCategory.Message,"Add_index_signature_for_property_0_90017","Add index signature for property '{0}'."),Disable_checking_for_this_file:t(90018,e.DiagnosticCategory.Message,"Disable_checking_for_this_file_90018","Disable checking for this file."),Ignore_this_error_message:t(90019,e.DiagnosticCategory.Message,"Ignore_this_error_message_90019","Ignore this error message."),Initialize_property_0_in_the_constructor:t(90020,e.DiagnosticCategory.Message,"Initialize_property_0_in_the_constructor_90020","Initialize property '{0}' in the constructor."),Initialize_static_property_0:t(90021,e.DiagnosticCategory.Message,"Initialize_static_property_0_90021","Initialize static property '{0}'."),Change_spelling_to_0:t(90022,e.DiagnosticCategory.Message,"Change_spelling_to_0_90022","Change spelling to '{0}'."),Declare_method_0:t(90023,e.DiagnosticCategory.Message,"Declare_method_0_90023","Declare method '{0}'."),Declare_static_method_0:t(90024,e.DiagnosticCategory.Message,"Declare_static_method_0_90024","Declare static method '{0}'."),Prefix_0_with_an_underscore:t(90025,e.DiagnosticCategory.Message,"Prefix_0_with_an_underscore_90025","Prefix '{0}' with an underscore."),Rewrite_as_the_indexed_access_type_0:t(90026,e.DiagnosticCategory.Message,"Rewrite_as_the_indexed_access_type_0_90026","Rewrite as the indexed access type '{0}'."),Declare_static_property_0:t(90027,e.DiagnosticCategory.Message,"Declare_static_property_0_90027","Declare static property '{0}'."),Call_decorator_expression:t(90028,e.DiagnosticCategory.Message,"Call_decorator_expression_90028","Call decorator expression."),Convert_function_to_an_ES2015_class:t(95001,e.DiagnosticCategory.Message,"Convert_function_to_an_ES2015_class_95001","Convert function to an ES2015 class"),Convert_function_0_to_class:t(95002,e.DiagnosticCategory.Message,"Convert_function_0_to_class_95002","Convert function '{0}' to class"),Extract_symbol:t(95003,e.DiagnosticCategory.Message,"Extract_symbol_95003","Extract symbol"),Extract_to_0_in_1:t(95004,e.DiagnosticCategory.Message,"Extract_to_0_in_1_95004","Extract to {0} in {1}"),Extract_function:t(95005,e.DiagnosticCategory.Message,"Extract_function_95005","Extract function"),Extract_constant:t(95006,e.DiagnosticCategory.Message,"Extract_constant_95006","Extract constant"),Extract_to_0_in_enclosing_scope:t(95007,e.DiagnosticCategory.Message,"Extract_to_0_in_enclosing_scope_95007","Extract to {0} in enclosing scope"),Extract_to_0_in_1_scope:t(95008,e.DiagnosticCategory.Message,"Extract_to_0_in_1_scope_95008","Extract to {0} in {1} scope"),Annotate_with_type_from_JSDoc:t(95009,e.DiagnosticCategory.Message,"Annotate_with_type_from_JSDoc_95009","Annotate with type from JSDoc"),Annotate_with_types_from_JSDoc:t(95010,e.DiagnosticCategory.Message,"Annotate_with_types_from_JSDoc_95010","Annotate with types from JSDoc"),Infer_type_of_0_from_usage:t(95011,e.DiagnosticCategory.Message,"Infer_type_of_0_from_usage_95011","Infer type of '{0}' from usage."),Infer_parameter_types_from_usage:t(95012,e.DiagnosticCategory.Message,"Infer_parameter_types_from_usage_95012","Infer parameter types from usage.")}}(ts||(ts={})),function(e){function t(e){return e>=71}e.tokenIsIdentifierOrKeyword=t;var n=e.createMapFromTemplate({abstract:117,any:119,as:118,boolean:122,break:72,case:73,catch:74,class:75,continue:77,const:76,constructor:123,debugger:78,declare:124,default:79,delete:80,do:81,else:82,enum:83,export:84,extends:85,false:86,finally:87,for:88,from:140,function:89,get:125,if:90,implements:108,import:91,in:92,instanceof:93,interface:109,is:126,keyof:127,let:110,module:128,namespace:129,never:130,new:94,null:95,number:133,object:134,package:111,private:112,protected:113,public:114,readonly:131,require:132,global:141,return:96,set:135,static:115,string:136,super:97,switch:98,symbol:137,this:99,throw:100,true:101,try:102,type:138,typeof:103,undefined:139,var:104,void:105,while:106,with:107,yield:116,async:120,await:121,of:142,"{":17,"}":18,"(":19,")":20,"[":21,"]":22,".":23,"...":24,";":25,",":26,"<":27,">":29,"<=":30,">=":31,"==":32,"!=":33,"===":34,"!==":35,"=>":36,"+":37,"-":38,"**":40,"*":39,"/":41,"%":42,"++":43,"--":44,"<<":45,"</":28,">>":46,">>>":47,"&":48,"|":49,"^":50,"!":51,"~":52,"&&":53,"||":54,"?":55,":":56,"=":58,"+=":59,"-=":60,"*=":61,"**=":62,"/=":63,"%=":64,"<<=":65,">>=":66,">>>=":67,"&=":68,"|=":69,"^=":70,"@":57}),o=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1569,1594,1600,1610,1649,1747,1749,1749,1765,1766,1786,1788,1808,1808,1810,1836,1920,1957,2309,2361,2365,2365,2384,2384,2392,2401,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2784,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2877,2877,2908,2909,2911,2913,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3294,3294,3296,3297,3333,3340,3342,3344,3346,3368,3370,3385,3424,3425,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3805,3840,3840,3904,3911,3913,3946,3976,3979,4096,4129,4131,4135,4137,4138,4176,4181,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6067,6176,6263,6272,6312,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8319,8319,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12329,12337,12341,12344,12346,12353,12436,12445,12446,12449,12538,12540,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65138,65140,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],r=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,768,846,864,866,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1155,1158,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1425,1441,1443,1465,1467,1469,1471,1471,1473,1474,1476,1476,1488,1514,1520,1522,1569,1594,1600,1621,1632,1641,1648,1747,1749,1756,1759,1768,1770,1773,1776,1788,1808,1836,1840,1866,1920,1968,2305,2307,2309,2361,2364,2381,2384,2388,2392,2403,2406,2415,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2492,2494,2500,2503,2504,2507,2509,2519,2519,2524,2525,2527,2531,2534,2545,2562,2562,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2649,2652,2654,2654,2662,2676,2689,2691,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2784,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2876,2883,2887,2888,2891,2893,2902,2903,2908,2909,2911,2913,2918,2927,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3006,3010,3014,3016,3018,3021,3031,3031,3047,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3134,3140,3142,3144,3146,3149,3157,3158,3168,3169,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3262,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3297,3302,3311,3330,3331,3333,3340,3342,3344,3346,3368,3370,3385,3390,3395,3398,3400,3402,3405,3415,3415,3424,3425,3430,3439,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3805,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3946,3953,3972,3974,3979,3984,3991,3993,4028,4038,4038,4096,4129,4131,4135,4137,4138,4140,4146,4150,4153,4160,4169,4176,4185,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,4969,4977,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6099,6112,6121,6160,6169,6176,6263,6272,6313,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8255,8256,8319,8319,8400,8412,8417,8417,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12335,12337,12341,12344,12346,12353,12436,12441,12442,12445,12446,12449,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65056,65059,65075,65076,65101,65103,65136,65138,65140,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65381,65470,65474,65479,65482,65487,65490,65495,65498,65500],i=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,880,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1162,1319,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1568,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1957,1969,1969,1994,2026,2036,2037,2042,2042,2048,2069,2074,2074,2084,2084,2088,2088,2112,2136,2208,2208,2210,2220,2308,2361,2365,2365,2384,2384,2392,2401,2417,2423,2425,2431,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3024,3024,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3133,3160,3161,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3294,3294,3296,3297,3313,3314,3333,3340,3342,3344,3346,3386,3389,3389,3406,3406,3424,3425,3450,3455,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3807,3840,3840,3904,3911,3913,3948,3976,3980,4096,4138,4159,4159,4176,4181,4186,4189,4193,4193,4197,4198,4206,4208,4213,4225,4238,4238,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5905,5920,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6263,6272,6312,6314,6314,6320,6389,6400,6428,6480,6509,6512,6516,6528,6571,6593,6599,6656,6678,6688,6740,6823,6823,6917,6963,6981,6987,7043,7072,7086,7087,7098,7141,7168,7203,7245,7247,7258,7293,7401,7404,7406,7409,7413,7414,7424,7615,7680,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8348,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11502,11506,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11823,11823,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42527,42538,42539,42560,42606,42623,42647,42656,42735,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43009,43011,43013,43015,43018,43020,43042,43072,43123,43138,43187,43250,43255,43259,43259,43274,43301,43312,43334,43360,43388,43396,43442,43471,43471,43520,43560,43584,43586,43588,43595,43616,43638,43642,43642,43648,43695,43697,43697,43701,43702,43705,43709,43712,43712,43714,43714,43739,43741,43744,43754,43762,43764,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44002,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],s=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,768,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1155,1159,1162,1319,1329,1366,1369,1369,1377,1415,1425,1469,1471,1471,1473,1474,1476,1477,1479,1479,1488,1514,1520,1522,1552,1562,1568,1641,1646,1747,1749,1756,1759,1768,1770,1788,1791,1791,1808,1866,1869,1969,1984,2037,2042,2042,2048,2093,2112,2139,2208,2208,2210,2220,2276,2302,2304,2403,2406,2415,2417,2423,2425,2431,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2500,2503,2504,2507,2510,2519,2519,2524,2525,2527,2531,2534,2545,2561,2563,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2641,2641,2649,2652,2654,2654,2662,2677,2689,2691,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2787,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2876,2884,2887,2888,2891,2893,2902,2903,2908,2909,2911,2915,2918,2927,2929,2929,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3006,3010,3014,3016,3018,3021,3024,3024,3031,3031,3046,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3140,3142,3144,3146,3149,3157,3158,3160,3161,3168,3171,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3260,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3299,3302,3311,3313,3314,3330,3331,3333,3340,3342,3344,3346,3386,3389,3396,3398,3400,3402,3406,3415,3415,3424,3427,3430,3439,3450,3455,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3807,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3948,3953,3972,3974,3991,3993,4028,4038,4038,4096,4169,4176,4253,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4957,4959,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5908,5920,5940,5952,5971,5984,5996,5998,6e3,6002,6003,6016,6099,6103,6103,6108,6109,6112,6121,6155,6157,6160,6169,6176,6263,6272,6314,6320,6389,6400,6428,6432,6443,6448,6459,6470,6509,6512,6516,6528,6571,6576,6601,6608,6617,6656,6683,6688,6750,6752,6780,6783,6793,6800,6809,6823,6823,6912,6987,6992,7001,7019,7027,7040,7155,7168,7223,7232,7241,7245,7293,7376,7378,7380,7414,7424,7654,7676,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8204,8205,8255,8256,8276,8276,8305,8305,8319,8319,8336,8348,8400,8412,8417,8417,8421,8432,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11647,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11744,11775,11823,11823,12293,12295,12321,12335,12337,12341,12344,12348,12353,12438,12441,12442,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42539,42560,42607,42612,42621,42623,42647,42655,42737,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43047,43072,43123,43136,43204,43216,43225,43232,43255,43259,43259,43264,43309,43312,43347,43360,43388,43392,43456,43471,43481,43520,43574,43584,43597,43600,43609,43616,43638,43642,43643,43648,43714,43739,43741,43744,43759,43762,43766,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44010,44012,44013,44016,44025,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65024,65039,65056,65062,65075,65076,65101,65103,65136,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500];function a(e,t){if(e<t[0])return!1;for(var n,o=0,r=t.length;o+1<r;){if(n=o+(r-o)/2,t[n-=n%2]<=e&&e<=t[n+1])return!0;e<t[n]?r=n:o=n+2}return!1}function l(e,t){return a(e,t>=1?i:o)}e.isUnicodeIdentifierStart=l;var c,u=(c=[],n.forEach((function(e,t){c[e]=t})),c);function p(e){for(var t=new Array,n=0,o=0;n<e.length;){var r=e.charCodeAt(n);switch(n++,r){case 13:10===e.charCodeAt(n)&&n++;case 10:t.push(o),o=n;break;default:r>127&&m(r)&&(t.push(o),o=n)}}return t.push(o),t}function d(t,n,o,r){e.Debug.assert(n>=0&&n<t.length);var i=t[n]+o;return n<t.length-1?e.Debug.assert(i<t[n+1]):void 0!==r&&e.Debug.assert(i<=r.length),i}function g(e){return e.lineMap||(e.lineMap=p(e.text))}function h(t,n){var o=e.binarySearch(t,n);return o<0&&(o=~o-1,e.Debug.assert(-1!==o,"position cannot precede the beginning of the file")),{line:o,character:n-t[o]}}function f(e){return _(e)||m(e)}function _(e){return 32===e||9===e||11===e||12===e||160===e||133===e||5760===e||e>=8192&&e<=8203||8239===e||8287===e||12288===e||65279===e}function m(e){return 10===e||13===e||8232===e||8233===e}function y(e){return e>=48&&e<=57}function k(e){return e>=48&&e<=55}e.tokenToString=function(e){return u[e]},e.stringToToken=function(e){return n.get(e)},e.computeLineStarts=p,e.getPositionOfLineAndCharacter=function(e,t,n){return d(g(e),t,n,e.text)},e.computePositionOfLineAndCharacter=d,e.getLineStarts=g,e.computeLineAndCharacterOfPosition=h,e.getLineAndCharacterOfPosition=function(e,t){return h(g(e),t)},e.isWhiteSpaceLike=f,e.isWhiteSpaceSingleLine=_,e.isLineBreak=m,e.isOctalDigit=k,e.couldStartTrivia=function(e,t){var n=e.charCodeAt(t);switch(n){case 13:case 10:case 9:case 11:case 12:case 32:case 47:case 60:case 124:case 61:case 62:return!0;case 35:return 0===t;default:return n>127}},e.skipTrivia=function(t,n,o,r){if(void 0===r&&(r=!1),e.positionIsSynthesized(n))return n;for(;;){var i=t.charCodeAt(n);switch(i){case 13:10===t.charCodeAt(n+1)&&n++;case 10:if(n++,o)return n;continue;case 9:case 11:case 12:case 32:n++;continue;case 47:if(r)break;if(47===t.charCodeAt(n+1)){for(n+=2;n<t.length&&!m(t.charCodeAt(n));)n++;continue}if(42===t.charCodeAt(n+1)){for(n+=2;n<t.length;){if(42===t.charCodeAt(n)&&47===t.charCodeAt(n+1)){n+=2;break}n++}continue}break;case 60:case 124:case 61:case 62:if(v(t,n)){n=T(t,n);continue}break;case 35:if(0===n&&S(t,n)){n=C(t,n);continue}break;default:if(i>127&&f(i)){n++;continue}}return n}};var b="<<<<<<<".length;function v(t,n){if(e.Debug.assert(n>=0),0===n||m(t.charCodeAt(n-1))){var o=t.charCodeAt(n);if(n+b<t.length){for(var r=0;r<b;r++)if(t.charCodeAt(n+r)!==o)return!1;return 61===o||32===t.charCodeAt(n+b)}}return!1}function T(t,n,o){o&&o(e.Diagnostics.Merge_conflict_marker_encountered,b);var r=t.charCodeAt(n),i=t.length;if(60===r||62===r)for(;n<i&&!m(t.charCodeAt(n));)n++;else for(e.Debug.assert(124===r||61===r);n<i;){var s=t.charCodeAt(n);if((61===s||62===s)&&s!==r&&v(t,n))break;n++}return n}var E=/^#!.*/;function S(t,n){return e.Debug.assert(0===n),E.test(t)}function C(e,t){return t+=E.exec(e)[0].length}function x(e,t,n,o,r,i,s){var a,l,c,u,p=!1,d=o||0===n,g=s;e:for(;n>=0&&n<t.length;){var h=t.charCodeAt(n);switch(h){case 13:10===t.charCodeAt(n+1)&&n++;case 10:if(n++,o)break e;d=!0,p&&(u=!0);continue;case 9:case 11:case 12:case 32:n++;continue;case 47:var _=t.charCodeAt(n+1),y=!1;if(47===_||42===_){var k=47===_?2:3,b=n;if(n+=2,47===_)for(;n<t.length;){if(m(t.charCodeAt(n))){y=!0;break}n++}else for(;n<t.length;){if(42===t.charCodeAt(n)&&47===t.charCodeAt(n+1)){n+=2;break}n++}if(d){if(p){if(g=r(a,l,c,u,i,g),!e&&g)return g;p=!1}a=b,l=n,c=k,u=y,p=!0}continue}break e;default:if(h>127&&f(h)){p&&m(h)&&(u=!0),n++;continue}break e}}return p&&(g=r(a,l,c,u,i,g)),g}function B(e,t,n,o,r){return x(!0,e,t,!1,n,o,r)}function A(e,t,n,o,r){return x(!0,e,t,!0,n,o,r)}function I(e,t,n,o,r,i){return i||(i=[]),i.push({kind:n,pos:e,end:t,hasTrailingNewLine:o}),i}function D(e,t){return e>=65&&e<=90||e>=97&&e<=122||36===e||95===e||e>127&&l(e,t)}function N(e,t){return e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||36===e||95===e||e>127&&function(e,t){return a(e,t>=1?s:r)}(e,t)}e.forEachLeadingCommentRange=function(e,t,n,o){return x(!1,e,t,!1,n,o)},e.forEachTrailingCommentRange=function(e,t,n,o){return x(!1,e,t,!0,n,o)},e.reduceEachLeadingCommentRange=B,e.reduceEachTrailingCommentRange=A,e.getLeadingCommentRanges=function(e,t){return B(e,t,I,void 0,void 0)},e.getTrailingCommentRanges=function(e,t){return A(e,t,I,void 0,void 0)},e.getShebang=function(e){var t=E.exec(e);if(t)return t[0]},e.isIdentifierStart=D,e.isIdentifierPart=N,e.isIdentifierText=function(e,t){if(!D(e.charCodeAt(0),t))return!1;for(var n=1;n<e.length;n++)if(!N(e.charCodeAt(n),t))return!1;return!0},e.createScanner=function(o,r,i,s,a,l,c){var u,p,d,g,h,b,E,x,B,A;return void 0===i&&(i=0),X(s,l,c),{getStartPos:function(){return d},getTextPos:function(){return u},getToken:function(){return h},getTokenPos:function(){return g},getTokenText:function(){return s.substring(g,u)},getTokenValue:function(){return b},hasExtendedUnicodeEscape:function(){return x},hasPrecedingLineBreak:function(){return E},isIdentifier:function(){return 71===h||h>107},isReservedWord:function(){return h>=72&&h<=107},isUnterminated:function(){return B},getNumericLiteralFlags:function(){return A},reScanGreaterToken:function(){if(29===h){if(62===s.charCodeAt(u))return 62===s.charCodeAt(u+1)?61===s.charCodeAt(u+2)?(u+=3,h=67):(u+=2,h=47):61===s.charCodeAt(u+1)?(u+=2,h=66):(u++,h=46);if(61===s.charCodeAt(u))return u++,h=31}return h},reScanSlashToken:function(){if(41===h||63===h){for(var t=g+1,n=!1,r=!1;;){if(t>=p){B=!0,I(e.Diagnostics.Unterminated_regular_expression_literal);break}var i=s.charCodeAt(t);if(m(i)){B=!0,I(e.Diagnostics.Unterminated_regular_expression_literal);break}if(n)n=!1;else{if(47===i&&!r){t++;break}91===i?r=!0:92===i?n=!0:93===i&&(r=!1)}t++}for(;t<p&&N(s.charCodeAt(t),o);)t++;u=t,b=s.substring(g,u),h=12}return h},reScanTemplateToken:function(){return e.Debug.assert(18===h,"'reScanTemplateToken' should only be called on a '}'"),u=g,h=F()},scanJsxIdentifier:function(){if(t(h)){for(var e=u;u<p;){var n=s.charCodeAt(u);if(45!==n&&!(e===u?D(n,o):N(n,o)))break;u++}b+=s.substr(e,u-e)}return h},scanJsxAttributeValue:function(){switch(d=u,s.charCodeAt(u)){case 34:case 39:return b=M(!1),h=9;default:return j()}},reScanJsxToken:function(){return u=g=d,h=z()},scanJsxToken:z,scanJSDocToken:function(){if(u>=p)return h=1;d=u,g=u;var e=s.charCodeAt(u);switch(e){case 9:case 11:case 12:case 32:for(;u<p&&_(s.charCodeAt(u));)u++;return h=5;case 64:return u++,h=57;case 10:case 13:return u++,h=4;case 42:return u++,h=39;case 123:return u++,h=17;case 125:return u++,h=18;case 91:return u++,h=21;case 93:return u++,h=22;case 60:return u++,h=27;case 62:return u++,h=29;case 61:return u++,h=58;case 44:return u++,h=26;case 46:return u++,h=23}if(D(e,5)){for(u++;N(s.charCodeAt(u),5)&&u<p;)u++;return h=71}return u+=1,h=0},scan:j,getText:function(){return s},setText:X,setScriptTarget:function(e){o=e},setLanguageVariant:function(e){i=e},setOnError:function(e){a=e},setTextPos:Y,tryScan:function(e){return $(e,!1)},lookAhead:function(e){return $(e,!0)},scanRange:function(e,t,n){var o=p,r=u,i=d,a=g,l=h,c=E,f=b,_=x,m=B;X(s,e,t);var y=n();return p=o,u=r,d=i,g=a,h=l,E=c,b=f,x=_,B=m,y}};function I(e,t){a&&a(e,t||0)}function w(){for(var t=u;y(s.charCodeAt(u));)u++;if(46===s.charCodeAt(u))for(u++;y(s.charCodeAt(u));)u++;var n=u;if(69===s.charCodeAt(u)||101===s.charCodeAt(u))if(u++,A=2,43!==s.charCodeAt(u)&&45!==s.charCodeAt(u)||u++,y(s.charCodeAt(u))){for(u++;y(s.charCodeAt(u));)u++;n=u}else I(e.Diagnostics.Digit_expected);return""+ +s.substring(t,n)}function R(){for(var e=u;k(s.charCodeAt(u));)u++;return+s.substring(e,u)}function O(e){return L(e,!1)}function P(e){return L(e,!0)}function L(e,t){for(var n=0,o=0;n<e||t;){var r=s.charCodeAt(u);if(r>=48&&r<=57)o=16*o+r-48;else if(r>=65&&r<=70)o=16*o+r-65+10;else{if(!(r>=97&&r<=102))break;o=16*o+r-97+10}u++,n++}return n<e&&(o=-1),o}function M(t){void 0===t&&(t=!0);for(var n=s.charCodeAt(u),o="",r=++u;;){if(u>=p){o+=s.substring(r,u),B=!0,I(e.Diagnostics.Unterminated_string_literal);break}var i=s.charCodeAt(u);if(i===n){o+=s.substring(r,u),u++;break}if(92===i&&t)o+=s.substring(r,u),o+=U(),r=u;else{if(m(i)){o+=s.substring(r,u),B=!0,I(e.Diagnostics.Unterminated_string_literal);break}u++}}return o}function F(){for(var t,n=96===s.charCodeAt(u),o=++u,r="";;){if(u>=p){r+=s.substring(o,u),B=!0,I(e.Diagnostics.Unterminated_template_literal),t=n?13:16;break}var i=s.charCodeAt(u);if(96===i){r+=s.substring(o,u),u++,t=n?13:16;break}if(36===i&&u+1<p&&123===s.charCodeAt(u+1)){r+=s.substring(o,u),u+=2,t=n?14:15;break}92!==i?13!==i?u++:(r+=s.substring(o,u),++u<p&&10===s.charCodeAt(u)&&u++,r+="\n",o=u):(r+=s.substring(o,u),r+=U(),o=u)}return e.Debug.assert(void 0!==t),b=r,t}function U(){if(++u>=p)return I(e.Diagnostics.Unexpected_end_of_text),"";var t=s.charCodeAt(u);switch(u++,t){case 48:return"\0";case 98:return"\b";case 116:return"\t";case 110:return"\n";case 118:return"\v";case 102:return"\f";case 114:return"\r";case 39:return"'";case 34:return'"';case 117:return u<p&&123===s.charCodeAt(u)?(x=!0,u++,function(){var t=P(1),n=!1;t<0?(I(e.Diagnostics.Hexadecimal_digit_expected),n=!0):t>1114111&&(I(e.Diagnostics.An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive),n=!0);u>=p?(I(e.Diagnostics.Unexpected_end_of_text),n=!0):125===s.charCodeAt(u)?u++:(I(e.Diagnostics.Unterminated_Unicode_escape_sequence),n=!0);if(n)return"";return function(t){if(e.Debug.assert(0<=t&&t<=1114111),t<=65535)return String.fromCharCode(t);var n=Math.floor((t-65536)/1024)+55296,o=(t-65536)%1024+56320;return String.fromCharCode(n,o)}(t)}()):H(4);case 120:return H(2);case 13:u<p&&10===s.charCodeAt(u)&&u++;case 10:case 8232:case 8233:return"";default:return String.fromCharCode(t)}}function H(t){var n=O(t);return n>=0?String.fromCharCode(n):(I(e.Diagnostics.Hexadecimal_digit_expected),"")}function V(){if(u+5<p&&117===s.charCodeAt(u+1)){var e=u;u+=2;var t=O(4);return u=e,t}return-1}function G(){for(var e="",t=u;u<p;){var n=s.charCodeAt(u);if(N(n,o))u++;else{if(92!==n)break;if(!((n=V())>=0&&N(n,o)))break;e+=s.substring(t,u),e+=String.fromCharCode(n),t=u+=6}}return e+=s.substring(t,u)}function W(){var e=b.length;if(e>=2&&e<=11){var t=b.charCodeAt(0);if(t>=97&&t<=122&&void 0!==(h=n.get(b)))return h}return h=71}function K(t){e.Debug.assert(2===t||8===t,"Expected either base 2 or base 8");for(var n=0,o=0;;){var r=s.charCodeAt(u),i=r-48;if(!y(r)||i>=t)break;n=n*t+i,u++,o++}return 0===o?-1:n}function j(){for(d=u,x=!1,E=!1,B=!1,A=0;;){if(g=u,u>=p)return h=1;var t=s.charCodeAt(u);if(35===t&&0===u&&S(s,u)){if(u=C(s,u),r)continue;return h=6}switch(t){case 10:case 13:if(E=!0,r){u++;continue}return 13===t&&u+1<p&&10===s.charCodeAt(u+1)?u+=2:u++,h=4;case 9:case 11:case 12:case 32:if(r){u++;continue}for(;u<p&&_(s.charCodeAt(u));)u++;return h=5;case 33:return 61===s.charCodeAt(u+1)?61===s.charCodeAt(u+2)?(u+=3,h=35):(u+=2,h=33):(u++,h=51);case 34:case 39:return b=M(),h=9;case 96:return h=F();case 37:return 61===s.charCodeAt(u+1)?(u+=2,h=64):(u++,h=42);case 38:return 38===s.charCodeAt(u+1)?(u+=2,h=53):61===s.charCodeAt(u+1)?(u+=2,h=68):(u++,h=48);case 40:return u++,h=19;case 41:return u++,h=20;case 42:return 61===s.charCodeAt(u+1)?(u+=2,h=61):42===s.charCodeAt(u+1)?61===s.charCodeAt(u+2)?(u+=3,h=62):(u+=2,h=40):(u++,h=39);case 43:return 43===s.charCodeAt(u+1)?(u+=2,h=43):61===s.charCodeAt(u+1)?(u+=2,h=59):(u++,h=37);case 44:return u++,h=26;case 45:return 45===s.charCodeAt(u+1)?(u+=2,h=44):61===s.charCodeAt(u+1)?(u+=2,h=60):(u++,h=38);case 46:return y(s.charCodeAt(u+1))?(b=w(),h=8):46===s.charCodeAt(u+1)&&46===s.charCodeAt(u+2)?(u+=3,h=24):(u++,h=23);case 47:if(47===s.charCodeAt(u+1)){for(u+=2;u<p&&!m(s.charCodeAt(u));)u++;if(r)continue;return h=2}if(42===s.charCodeAt(u+1)){u+=2;for(var n=!1;u<p;){var a=s.charCodeAt(u);if(42===a&&47===s.charCodeAt(u+1)){u+=2,n=!0;break}m(a)&&(E=!0),u++}if(n||I(e.Diagnostics.Asterisk_Slash_expected),r)continue;return B=!n,h=3}return 61===s.charCodeAt(u+1)?(u+=2,h=63):(u++,h=41);case 48:var l;if(u+2<p&&(88===s.charCodeAt(u+1)||120===s.charCodeAt(u+1)))return u+=2,(l=P(1))<0&&(I(e.Diagnostics.Hexadecimal_digit_expected),l=0),b=""+l,A=8,h=8;if(u+2<p&&(66===s.charCodeAt(u+1)||98===s.charCodeAt(u+1)))return u+=2,(l=K(2))<0&&(I(e.Diagnostics.Binary_digit_expected),l=0),b=""+l,A=16,h=8;if(u+2<p&&(79===s.charCodeAt(u+1)||111===s.charCodeAt(u+1)))return u+=2,(l=K(8))<0&&(I(e.Diagnostics.Octal_digit_expected),l=0),b=""+l,A=32,h=8;if(u+1<p&&k(s.charCodeAt(u+1)))return b=""+R(),A=4,h=8;case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return b=w(),h=8;case 58:return u++,h=56;case 59:return u++,h=25;case 60:if(v(s,u)){if(u=T(s,u,I),r)continue;return h=7}return 60===s.charCodeAt(u+1)?61===s.charCodeAt(u+2)?(u+=3,h=65):(u+=2,h=45):61===s.charCodeAt(u+1)?(u+=2,h=30):1===i&&47===s.charCodeAt(u+1)&&42!==s.charCodeAt(u+2)?(u+=2,h=28):(u++,h=27);case 61:if(v(s,u)){if(u=T(s,u,I),r)continue;return h=7}return 61===s.charCodeAt(u+1)?61===s.charCodeAt(u+2)?(u+=3,h=34):(u+=2,h=32):62===s.charCodeAt(u+1)?(u+=2,h=36):(u++,h=58);case 62:if(v(s,u)){if(u=T(s,u,I),r)continue;return h=7}return u++,h=29;case 63:return u++,h=55;case 91:return u++,h=21;case 93:return u++,h=22;case 94:return 61===s.charCodeAt(u+1)?(u+=2,h=70):(u++,h=50);case 123:return u++,h=17;case 124:if(v(s,u)){if(u=T(s,u,I),r)continue;return h=7}return 124===s.charCodeAt(u+1)?(u+=2,h=54):61===s.charCodeAt(u+1)?(u+=2,h=69):(u++,h=49);case 125:return u++,h=18;case 126:return u++,h=52;case 64:return u++,h=57;case 92:var c=V();return c>=0&&D(c,o)?(u+=6,b=String.fromCharCode(c)+G(),h=W()):(I(e.Diagnostics.Invalid_character),u++,h=0);default:if(D(t,o)){for(u++;u<p&&N(t=s.charCodeAt(u),o);)u++;return b=s.substring(g,u),92===t&&(b+=G()),h=W()}if(_(t)){u++;continue}if(m(t)){E=!0,u++;continue}return I(e.Diagnostics.Invalid_character),u++,h=0}}}function z(){if(d=g=u,u>=p)return h=1;var e=s.charCodeAt(u);if(60===e)return 47===s.charCodeAt(u+1)?(u+=2,h=28):(u++,h=27);if(123===e)return u++,h=17;for(var t=0;u<p&&123!==(e=s.charCodeAt(u));){if(60===e){if(v(s,u))return u=T(s,u,I),h=7;break}m(e)&&0===t?t=-1:f(e)||(t=u),u++}return-1===t?11:10}function $(e,t){var n=u,o=d,r=g,i=h,s=b,a=E,l=e();return l&&!t||(u=n,d=o,g=r,h=i,b=s,E=a),l}function X(e,t,n){s=e||"",p=void 0===n?s.length:t+n,Y(t||0)}function Y(t){e.Debug.assert(t>=0),u=t,d=t,g=t,h=0,E=!1,b=void 0,x=!1,B=!1}}}(ts||(ts={})),function(e){e.emptyArray=[],e.emptyMap=e.createMap(),e.externalHelpersModuleNameText="tslib",e.getDeclarationOfKind=function(e,t){var n=e.declarations;if(n)for(var o=0,r=n;o<r.length;o++){var i=r[o];if(i.kind===t)return i}};var t,n,o=(t="",{string:function(){return t},writeKeyword:n=function(e){return t+=e},writeOperator:n,writePunctuation:n,writeSpace:n,writeStringLiteral:n,writeParameter:n,writeProperty:n,writeSymbol:n,writeLine:function(){return t+=" "},increaseIndent:e.noop,decreaseIndent:e.noop,clear:function(){return t=""},trackSymbol:e.noop,reportInaccessibleThisError:e.noop,reportPrivateInBaseOfClassExpression:e.noop});function r(e){return e.end-e.pos}function i(t){return function(t){if(!(262144&t.flags)){(0!=(32768&t.flags)||e.forEachChild(t,i))&&(t.flags|=131072),t.flags|=262144}}(t),0!=(131072&t.flags)}function s(e){for(;e&&265!==e.kind;)e=e.parent;return e}function a(t,n){e.Debug.assert(t>=0);var o=e.getLineStarts(n),r=t,i=n.text;if(r+1===o.length)return i.length-1;var s=o[r],a=o[r+1]-1;for(e.Debug.assert(e.isLineBreak(i.charCodeAt(a)));s<=a&&e.isLineBreak(i.charCodeAt(a));)a--;return a}function l(e){return void 0===e||e.pos===e.end&&e.pos>=0&&1!==e.kind}function c(e){return!l(e)}function u(e,t){return 42===e.charCodeAt(t.pos+1)&&33===e.charCodeAt(t.pos+2)}function p(t,n,o){return l(t)?t.pos:e.isJSDocNode(t)?e.skipTrivia((n||s(t)).text,t.pos,!1,!0):o&&e.hasJSDocNodes(t)?p(t.jsDoc[0]):286===t.kind&&t._children.length>0?p(t._children[0],n,o):e.skipTrivia((n||s(t)).text,t.pos)}function d(t,n,o){if(void 0===o&&(o=!1),l(n))return"";var r=t.text;return r.substring(o?n.pos:e.skipTrivia(r,n.pos),n.end)}function g(t,n){return l(n)?"":t.substring(e.skipTrivia(t,n.pos),n.end)}function h(e,t){return void 0===t&&(t=!1),d(s(e),e,t)}function f(e,t){var n=e.pos,o=t.pos;return n<o?-1:o<n?1:0}function _(e){var t=e.emitNode;return t&&t.flags}function m(e){return e.length>=2&&95===e.charCodeAt(0)&&95===e.charCodeAt(1)?"_"+e:e}function y(e){var t=le(e);return 226===t.kind&&260===t.parent.kind}function k(e){return e&&233===e.kind&&(9===e.name.kind||v(e))}function b(t){return e.isModuleDeclaration(t)&&9===t.name.kind}function v(e){return!!(512&e.flags)}function T(t,n){switch(t.kind){case 265:case 235:case 260:case 233:case 214:case 215:case 216:case 152:case 151:case 153:case 154:case 228:case 186:case 187:return!0;case 207:return n&&!e.isFunctionLike(n)}return!1}function E(e){return 0===r(e)?"(Missing)":h(e)}function S(e){switch(e.kind){case 71:return e.escapedText;case 9:case 8:return m(e.text);case 144:if(te(e.expression))return m(e.expression.text)}}function C(t,n,o,r,i,s){var a=B(t,n);return e.createFileDiagnostic(t,a.start,a.length,o,r,i,s)}function x(t,n){var o=e.createScanner(t.languageVersion,!0,t.languageVariant,t.text,void 0,n);o.scan();var r=o.getTokenPos();return e.createTextSpanFromBounds(r,o.getTextPos())}function B(t,n){var o=n;switch(n.kind){case 265:var r=e.skipTrivia(t.text,0,!1);return r===t.text.length?e.createTextSpan(0,0):x(t,r);case 226:case 176:case 229:case 199:case 230:case 233:case 232:case 264:case 228:case 186:case 151:case 153:case 154:case 231:o=n.name;break;case 187:return function(t,n){var o=e.skipTrivia(t.text,n.pos);if(n.body&&207===n.body.kind){var r=e.getLineAndCharacterOfPosition(t,n.body.pos).line;if(r<e.getLineAndCharacterOfPosition(t,n.body.end).line)return e.createTextSpan(o,a(r,t)-o+1)}return e.createTextSpanFromBounds(o,n.end)}(t,n)}if(void 0===o)return x(t,n.pos);var i=l(o)?o.pos:e.skipTrivia(t.text,o.pos);return e.createTextSpanFromBounds(i,o.end)}function A(t){return!!(2&e.getCombinedNodeFlags(t))||!!(2048&e.getCombinedModifierFlags(t))}e.usingSingleLineStringWriter=function(e){var t=o.string();try{return e(o),o.string()}finally{o.clear(),o.writeKeyword(t)}},e.getFullWidth=r,e.getResolvedModule=function(e,t){return e&&e.resolvedModules&&e.resolvedModules.get(t)},e.setResolvedModule=function(t,n,o){t.resolvedModules||(t.resolvedModules=e.createMap()),t.resolvedModules.set(n,o)},e.setResolvedTypeReferenceDirective=function(t,n,o){t.resolvedTypeReferenceDirectiveNames||(t.resolvedTypeReferenceDirectiveNames=e.createMap()),t.resolvedTypeReferenceDirectiveNames.set(n,o)},e.moduleResolutionIsEqualTo=function(e,t){return e.isExternalLibraryImport===t.isExternalLibraryImport&&e.extension===t.extension&&e.resolvedFileName===t.resolvedFileName&&(n=e.packageId,o=t.packageId,n===o||n&&o&&n.name===o.name&&n.subModuleName===o.subModuleName&&n.version===o.version);var n,o},e.typeDirectiveIsEqualTo=function(e,t){return e.resolvedFileName===t.resolvedFileName&&e.primary===t.primary},e.hasChangesInResolutions=function(t,n,o,r){e.Debug.assert(t.length===n.length);for(var i=0;i<t.length;i++){var s=n[i],a=o&&o.get(t[i]);if(a?!s||!r(a,s):s)return!0}return!1},e.containsParseError=i,e.getSourceFileOfNode=s,e.isStatementWithLocals=function(e){switch(e.kind){case 207:case 235:case 214:case 215:case 216:return!0}return!1},e.getStartPositionOfLine=function(t,n){return e.Debug.assert(t>=0),e.getLineStarts(n)[t]},e.nodePosToString=function(t){var n=s(t),o=e.getLineAndCharacterOfPosition(n,t.pos);return n.fileName+"("+(o.line+1)+","+(o.character+1)+")"},e.getEndLinePosition=a,e.nodeIsMissing=l,e.nodeIsPresent=c,e.isRecognizedTripleSlashComment=function(t,n,o){if(47===t.charCodeAt(n+1)&&n+2<o&&47===t.charCodeAt(n+2)){var r=t.substring(n,o);return!!(r.match(e.fullTripleSlashReferencePathRegEx)||r.match(e.fullTripleSlashAMDReferencePathRegEx)||r.match(I)||r.match(D))}return!1},e.isPinnedComment=u,e.getTokenPosOfNode=p,e.getNonDecoratorTokenPosOfNode=function(t,n){return l(t)||!t.decorators?p(t,n):e.skipTrivia((n||s(t)).text,t.decorators.end)},e.getSourceTextOfNodeFromSourceFile=d,e.getTextOfNodeFromSourceText=g,e.getTextOfNode=h,e.indexOfNode=function(t,n){return e.binarySearch(t,n,f)},e.getEmitFlags=_,e.getLiteralText=function(t,n){if(!ce(t)&&t.parent)return d(n,t);var o=16777216&_(t)?ye:Ee;switch(t.kind){case 9:return t.singleQuote?"'"+o(t.text,39)+"'":'"'+o(t.text,34)+'"';case 13:return"`"+o(t.text,96)+"`";case 14:return"`"+o(t.text,96)+"${";case 15:return"}"+o(t.text,96)+"${";case 16:return"}"+o(t.text,96)+"`";case 8:case 12:return t.text}e.Debug.fail("Literal kind '"+t.kind+"' not accounted for.")},e.getTextOfConstantValue=function(t){return e.isString(t)?'"'+Ee(t)+'"':""+t},e.escapeLeadingUnderscores=m,e.escapeIdentifier=function(e){return e},e.makeIdentifierFromModuleName=function(t){return e.getBaseFileName(t).replace(/^(\d)/,"_$1").replace(/\W/g,"_")},e.isBlockOrCatchScoped=function(t){return 0!=(3&e.getCombinedNodeFlags(t))||y(t)},e.isCatchClauseVariableDeclarationOrBindingElement=y,e.isAmbientModule=k,e.isModuleWithStringLiteralName=b,e.isNonGlobalAmbientModule=function(t){return e.isModuleDeclaration(t)&&e.isStringLiteral(t.name)},e.isShorthandAmbientModuleSymbol=function(e){return(t=e.valueDeclaration)&&233===t.kind&&!t.body;var t},e.isBlockScopedContainerTopLevel=function(t){return 265===t.kind||233===t.kind||e.isFunctionLike(t)},e.isGlobalScopeAugmentation=v,e.isExternalModuleAugmentation=function(t){if(!t||!k(t))return!1;switch(t.parent.kind){case 265:return e.isExternalModule(t.parent);case 234:return k(t.parent.parent)&&!e.isExternalModule(t.parent.parent.parent)}return!1},e.isEffectiveExternalModule=function(t,n){return e.isExternalModule(t)||n.isolatedModules},e.isBlockScope=T,e.isDeclarationWithTypeParameters=function(t){switch(t.kind){case 155:case 156:case 150:case 157:case 160:case 161:case 273:case 229:case 199:case 230:case 231:case 282:case 228:case 151:case 152:case 153:case 154:case 186:case 187:return!0;default:return e.assertTypeIsNever(t),!1}},e.isAnyImportSyntax=function(e){switch(e.kind){case 238:case 237:return!0;default:return!1}},e.getEnclosingBlockScopeContainer=function(e){for(var t=e.parent;t;){if(T(t,t.parent))return t;t=t.parent}},e.declarationNameToString=E,e.getNameFromIndexInfo=function(e){return e.declaration?E(e.declaration.parameters[0].name):void 0},e.getTextOfPropertyName=S,e.entityNameToString=function t(n){switch(n.kind){case 71:return 0===r(n)?e.idText(n):h(n);case 143:return t(n.left)+"."+t(n.right);case 179:return t(n.expression)+"."+t(n.name)}},e.createDiagnosticForNode=function(e,t,n,o,r){return C(s(e),e,t,n,o,r)},e.createDiagnosticForNodeInSourceFile=C,e.createDiagnosticForNodeFromMessageChain=function(e,t){var n=s(e),o=B(n,e);return{file:n,start:o.start,length:o.length,code:t.code,category:t.category,messageText:t.next?t:t.messageText}},e.getSpanOfTokenAtPosition=x,e.getErrorSpanForNode=B,e.isExternalOrCommonJsModule=function(e){return void 0!==(e.externalModuleIndicator||e.commonJsModuleIndicator)},e.isConstEnumDeclaration=function(e){return 232===e.kind&&A(e)},e.isConst=A,e.isLet=function(t){return!!(1&e.getCombinedNodeFlags(t))},e.isSuperCall=function(e){return 181===e.kind&&97===e.expression.kind},e.isImportCall=function(e){return 181===e.kind&&91===e.expression.kind},e.isPrologueDirective=function(e){return 210===e.kind&&9===e.expression.kind},e.getLeadingCommentRangesOfNode=function(t,n){return 10!==t.kind?e.getLeadingCommentRanges(n.text,t.pos):void 0},e.getJSDocCommentRanges=function(t,n){var o=146===t.kind||145===t.kind||186===t.kind||187===t.kind||185===t.kind?e.concatenate(e.getTrailingCommentRanges(n,t.pos),e.getLeadingCommentRanges(n,t.pos)):e.getLeadingCommentRanges(n,t.pos);return e.filter(o,(function(e){return 42===n.charCodeAt(e.pos+1)&&42===n.charCodeAt(e.pos+2)&&47!==n.charCodeAt(e.pos+3)}))},e.fullTripleSlashReferencePathRegEx=/^(\/\/\/\s*<reference\s+path\s*=\s*)('|")(.+?)\2.*?\/>/;var I=/^(\/\/\/\s*<reference\s+types\s*=\s*)('|")(.+?)\2.*?\/>/;e.fullTripleSlashAMDReferencePathRegEx=/^(\/\/\/\s*<amd-dependency\s+path\s*=\s*)('|")(.+?)\2.*?\/>/;var D=/^(\/\/\/\s*<reference\s+no-default-lib\s*=\s*)('|")(.+?)\2\s*\/>/;function N(t){if(158<=t.kind&&t.kind<=173)return!0;switch(t.kind){case 119:case 133:case 136:case 122:case 137:case 139:case 130:return!0;case 105:return 190!==t.parent.kind;case 201:return!qe(t);case 71:(143===t.parent.kind&&t.parent.right===t||179===t.parent.kind&&t.parent.name===t)&&(t=t.parent),e.Debug.assert(71===t.kind||143===t.kind||179===t.kind,"'node' was expected to be a qualified name, identifier or property access in 'isPartOfTypeNode'.");case 143:case 179:case 99:var n=t.parent;if(162===n.kind)return!1;if(158<=n.kind&&n.kind<=173)return!0;switch(n.kind){case 201:return!qe(n);case 145:return t===n.constraint;case 149:case 148:case 146:case 226:return t===n.type;case 228:case 186:case 187:case 152:case 151:case 150:case 153:case 154:return t===n.type;case 155:case 156:case 157:case 184:return t===n.type;case 181:case 182:return n.typeArguments&&e.indexOf(n.typeArguments,t)>=0;case 183:return!1}}return!1}function w(e){if(e)switch(e.kind){case 176:case 264:case 146:case 261:case 149:case 148:case 262:case 226:return!0}return!1}function R(t,n){for(;;){if(!(t=t.parent))return;switch(t.kind){case 144:if(e.isClassLike(t.parent.parent))return t;t=t.parent;break;case 147:146===t.parent.kind&&e.isClassElement(t.parent.parent)?t=t.parent.parent:e.isClassElement(t.parent)&&(t=t.parent);break;case 187:if(!n)continue;case 228:case 186:case 233:case 149:case 148:case 151:case 150:case 152:case 153:case 154:case 155:case 156:case 157:case 232:case 265:return t}}}function O(e){switch(e.kind){case 229:return!0;case 149:return 229===e.parent.kind;case 153:case 154:case 151:return void 0!==e.body&&229===e.parent.kind;case 146:return void 0!==e.parent.body&&(152===e.parent.kind||151===e.parent.kind||154===e.parent.kind)&&229===e.parent.parent.kind}return!1}function P(e){return void 0!==e.decorators&&O(e)}function L(e){return P(e)||M(e)}function M(t){switch(t.kind){case 229:return e.forEach(t.members,L);case 151:case 154:return e.forEach(t.parameters,P)}}function F(e){var t=e.parent;return(251===t.kind||250===t.kind||252===t.kind)&&t.tagName===e}function U(e){switch(e.kind){case 97:case 95:case 101:case 86:case 12:case 177:case 178:case 179:case 180:case 181:case 182:case 183:case 202:case 184:case 203:case 185:case 186:case 199:case 187:case 190:case 188:case 189:case 192:case 193:case 194:case 195:case 198:case 196:case 13:case 200:case 249:case 250:case 197:case 191:case 204:return!0;case 143:for(;143===e.parent.kind;)e=e.parent;return 162===e.parent.kind||F(e);case 71:if(162===e.parent.kind||F(e))return!0;case 8:case 9:case 99:return H(e);default:return!1}}function H(e){var t=e.parent;switch(t.kind){case 226:case 146:case 149:case 148:case 264:case 261:case 176:return t.initializer===e;case 210:case 211:case 212:case 213:case 219:case 220:case 221:case 257:case 223:return t.expression===e;case 214:var n=t;return n.initializer===e&&227!==n.initializer.kind||n.condition===e||n.incrementor===e;case 215:case 216:var o=t;return o.initializer===e&&227!==o.initializer.kind||o.expression===e;case 184:case 202:case 205:case 144:return e===t.expression;case 147:case 256:case 255:case 263:return!0;case 201:return t.expression===e&&qe(t);default:return U(t)}}function V(e){return 237===e.kind&&248===e.moduleReference.kind}function G(e){return W(e)}function W(e){return e&&!!(65536&e.flags)}function K(e){if(!W(e))return 0;if(58!==e.operatorToken.kind||179!==e.left.kind)return 0;var t=e.left;if(71===t.expression.kind){var n=t.expression;return"exports"===n.escapedText?1:"module"===n.escapedText&&"exports"===t.name.escapedText?2:5}if(99===t.expression.kind)return 4;if(179===t.expression.kind){var o=t.expression;if(71===o.expression.kind){if("module"===o.expression.escapedText&&"exports"===o.name.escapedText)return 1;if("prototype"===o.name.escapedText)return 3}}return 0}function j(t){return e.isExpressionStatement(t)&&t.expression&&e.isBinaryExpression(t.expression)&&58===t.expression.operatorToken.kind&&t.expression.right}function z(t,n){return e.isVariableStatement(t)&&t.declarationList.declarations.length>0&&(!n||t.declarationList.declarations[0].initializer===n)&&t.declarationList.declarations[0].initializer}function $(t,n){return e.isVariableStatement(t)&&t.declarationList.declarations.length>0&&(!n||t.declarationList.declarations[0]===n)&&t.declarationList.declarations[0]}function X(e){return 233===e.kind&&e.body&&233===e.body.kind&&e.body}function Y(t){var n;return function t(o){var r=o.parent;r&&(261===r.kind||X(r))&&t(r);r&&r.parent&&($(r.parent,o)||j(r.parent))&&t(r.parent);r&&r.parent&&r.parent.parent&&z(r.parent.parent,o)&&t(r.parent.parent);146===o.kind&&(n=e.addRange(n,e.getJSDocParameterTags(o)));w(o)&&o.initializer&&e.hasJSDocNodes(o.initializer)&&(n=e.addRange(n,o.initializer.jsDoc));e.hasJSDocNodes(o)&&(n=e.addRange(n,o.jsDoc))}(t),n||e.emptyArray}function J(t){return e.Debug.assert(275===t.parent.kind),t.parent.parent}function q(e){return void 0!==e.dotDotDotToken}function Z(e){for(var t=e.parent;;){switch(t.kind){case 194:var n=t.operatorToken.kind;return Xe(n)&&t.left===e?58===n?1:2:0;case 192:case 193:var o=t.operator;return 43===o||44===o?2:0;case 215:case 216:return t.initializer===e?1:0;case 185:case 177:case 198:e=t;break;case 262:if(t.name!==e)return 0;e=t.parent;break;case 261:if(t.name===e)return 0;e=t.parent;break;default:return 0}t=e.parent}}function Q(e){return Ze(e.expression)}function ee(e,t){if(e)for(var n=0,o=e;n<o.length;n++){var r=o[n];if(r.token===t)return r}}function te(e){var t=e.kind;return 9===t||8===t}function ne(t){var n=e.getNameOfDeclaration(t);return n&&oe(n)}function oe(e){return 144===e.kind&&!te(e.expression)&&!re(e.expression)}function re(t){return e.isPropertyAccessExpression(t)&&ae(t.expression)}function ie(t){if(71===t.kind)return t.escapedText;if(9===t.kind||8===t.kind)return m(t.text);if(144===t.kind){var n=t.expression;if(re(n))return se(e.idText(n.name));if(9===n.kind||8===n.kind)return m(n.text)}}function se(e){return"__@"+e}function ae(e){return 71===e.kind&&"Symbol"===e.escapedText}function le(e){for(;176===e.kind;)e=e.parent.parent;return e}function ce(t){return e.positionIsSynthesized(t.pos)||e.positionIsSynthesized(t.end)}function ue(e,t,n){switch(e){case 182:return n?0:1;case 192:case 189:case 190:case 188:case 191:case 195:case 197:return 1;case 194:switch(t){case 40:case 58:case 59:case 60:case 62:case 61:case 63:case 64:case 65:case 66:case 67:case 68:case 70:case 69:return 1}}return 0}function pe(e){return 194===e.kind?e.operatorToken.kind:192===e.kind||193===e.kind?e.operator:e.kind}function de(e,t,n){switch(e){case 99:case 97:case 71:case 95:case 101:case 86:case 8:case 9:case 177:case 178:case 186:case 187:case 199:case 249:case 250:case 12:case 13:case 196:case 185:case 200:return 19;case 183:case 179:case 180:return 18;case 182:return n?18:17;case 181:return 17;case 193:return 16;case 192:case 189:case 190:case 188:case 191:return 15;case 194:switch(t){case 51:case 52:return 15;case 40:case 39:case 41:case 42:return 14;case 37:case 38:return 13;case 45:case 46:case 47:return 12;case 27:case 30:case 29:case 31:case 92:case 93:return 11;case 32:case 34:case 33:case 35:return 10;case 48:return 9;case 50:return 8;case 49:return 7;case 53:return 6;case 54:return 5;case 58:case 59:case 60:case 62:case 61:case 63:case 64:case 65:case 66:case 67:case 68:case 70:case 69:return 3;case 26:return 0;default:return-1}case 195:return 4;case 197:return 2;case 198:return 1;case 289:return 0;default:return-1}}e.isPartOfTypeNode=N,e.isChildOfNodeWithKind=function(e,t){for(;e;){if(e.kind===t)return!0;e=e.parent}return!1},e.forEachReturnStatement=function(t,n){return function t(o){switch(o.kind){case 219:return n(o);case 235:case 207:case 211:case 212:case 213:case 214:case 215:case 216:case 220:case 221:case 257:case 258:case 222:case 224:case 260:return e.forEachChild(o,t)}}(t)},e.forEachYieldExpression=function(t,n){return function t(o){switch(o.kind){case 197:n(o);var r=o.expression;return void(r&&t(r));case 232:case 230:case 233:case 231:case 229:case 199:return;default:if(e.isFunctionLike(o)){var i=o.name;if(i&&144===i.kind)return void t(i.expression)}else N(o)||e.forEachChild(o,t)}}(t)},e.getRestParameterElementType=function(t){return t&&164===t.kind?t.elementType:t&&159===t.kind?e.singleOrUndefined(t.typeArguments):void 0},e.isVariableLike=w,e.introducesArgumentsExoticObject=function(e){switch(e.kind){case 151:case 150:case 152:case 153:case 154:case 228:case 186:return!0}return!1},e.unwrapInnermostStatementOfLabel=function(e,t){for(;;){if(t&&t(e),222!==e.statement.kind)return e.statement;e=e.statement}},e.isFunctionBlock=function(t){return t&&207===t.kind&&e.isFunctionLike(t.parent)},e.isObjectLiteralMethod=function(e){return e&&151===e.kind&&178===e.parent.kind},e.isObjectLiteralOrClassExpressionMethod=function(e){return 151===e.kind&&(178===e.parent.kind||199===e.parent.kind)},e.isIdentifierTypePredicate=function(e){return e&&1===e.kind},e.isThisTypePredicate=function(e){return e&&0===e.kind},e.getPropertyAssignment=function(t,n,o){return e.filter(t.properties,(function(e){if(261===e.kind){var t=S(e.name);return n===t||o&&o===t}}))},e.getContainingFunction=function(t){return e.findAncestor(t.parent,e.isFunctionLike)},e.getContainingClass=function(t){return e.findAncestor(t.parent,e.isClassLike)},e.getThisContainer=R,e.getNewTargetContainer=function(e){var t=R(e,!1);if(t)switch(t.kind){case 152:case 228:case 186:return t}},e.getSuperContainer=function(t,n){for(;;){if(!(t=t.parent))return t;switch(t.kind){case 144:t=t.parent;break;case 228:case 186:case 187:if(!n)continue;case 149:case 148:case 151:case 150:case 152:case 153:case 154:return t;case 147:146===t.parent.kind&&e.isClassElement(t.parent.parent)?t=t.parent.parent:e.isClassElement(t.parent)&&(t=t.parent)}}},e.getImmediatelyInvokedFunctionExpression=function(e){if(186===e.kind||187===e.kind){for(var t=e,n=e.parent;185===n.kind;)t=n,n=n.parent;if(181===n.kind&&n.expression===t)return n}},e.isSuperProperty=function(e){var t=e.kind;return(179===t||180===t)&&97===e.expression.kind},e.getEntityNameFromTypeNode=function(e){switch(e.kind){case 159:return e.typeName;case 201:return Ze(e.expression)?e.expression:void 0;case 71:case 143:return e}},e.getInvokedExpression=function(t){return 183===t.kind?t.tag:e.isJsxOpeningLikeElement(t)?t.tagName:t.expression},e.nodeCanBeDecorated=O,e.nodeIsDecorated=P,e.nodeOrChildIsDecorated=L,e.childIsDecorated=M,e.isJSXTagName=F,e.isPartOfExpression=U,e.isInExpressionContext=H,e.isExternalModuleImportEqualsDeclaration=V,e.getExternalModuleImportEqualsDeclarationExpression=function(t){return e.Debug.assert(V(t)),t.moduleReference.expression},e.isInternalModuleImportEqualsDeclaration=function(e){return 237===e.kind&&248!==e.moduleReference.kind},e.isSourceFileJavaScript=G,e.isInJavaScriptFile=W,e.isInJSDoc=function(e){return e&&!!(1048576&e.flags)},e.isJSDocIndexSignature=function(t){return e.isTypeReferenceNode(t)&&e.isIdentifier(t.typeName)&&"Object"===t.typeName.escapedText&&t.typeArguments&&2===t.typeArguments.length&&(136===t.typeArguments[0].kind||133===t.typeArguments[0].kind)},e.isRequireCall=function(e,t){if(181!==e.kind)return!1;var n=e,o=n.expression,r=n.arguments;if(71!==o.kind||"require"!==o.escapedText)return!1;if(1!==r.length)return!1;var i=r[0];return!t||9===i.kind||13===i.kind},e.isSingleOrDoubleQuote=function(e){return 39===e||34===e},e.isStringDoubleQuoted=function(e,t){return 34===d(t,e).charCodeAt(0)},e.isDeclarationOfFunctionOrClassExpression=function(e){if(e.valueDeclaration&&226===e.valueDeclaration.kind){var t=e.valueDeclaration;return t.initializer&&(186===t.initializer.kind||199===t.initializer.kind)}return!1},e.getRightMostAssignedExpression=function(e){for(;Je(e,!0);)e=e.right;return e},e.isExportsIdentifier=function(t){return e.isIdentifier(t)&&"exports"===t.escapedText},e.isModuleExportsPropertyAccessExpression=function(t){return e.isPropertyAccessExpression(t)&&e.isIdentifier(t.expression)&&"module"===t.expression.escapedText&&"exports"===t.name.escapedText},e.getSpecialPropertyAssignmentKind=K,e.getExternalModuleName=function(e){if(238===e.kind)return e.moduleSpecifier;if(237===e.kind){var t=e.moduleReference;if(248===t.kind)return t.expression}return 244===e.kind?e.moduleSpecifier:b(e)?e.name:void 0},e.getNamespaceDeclarationNode=function(e){if(237===e.kind)return e;var t=e.importClause;return t&&t.namedBindings&&240===t.namedBindings.kind?t.namedBindings:void 0},e.isDefaultImport=function(e){return 238===e.kind&&e.importClause&&!!e.importClause.name},e.hasQuestionToken=function(e){if(e)switch(e.kind){case 146:case 151:case 150:case 262:case 261:case 149:case 148:return void 0!==e.questionToken}return!1},e.isJSDocConstructSignature=function(e){return 273===e.kind&&e.parameters.length>0&&e.parameters[0].name&&"new"===e.parameters[0].name.escapedText},e.getAllJSDocs=function(t){return e.isJSDocTypedefTag(t)?[t.parent]:Y(t)},e.getSourceOfAssignment=j,e.getSingleInitializerOfVariableStatement=z,e.getSingleVariableOfVariableStatement=$,e.getNestedModuleDeclaration=X,e.getJSDocCommentsAndTags=Y,e.getParameterSymbolFromJSDoc=function(t){if(t.symbol)return t.symbol;if(e.isIdentifier(t.name)){var n=t.name.escapedText,o=J(t),r=j(o)||z(o)||$(o)||X(o)||o;if(r&&e.isFunctionLike(r)){var i=e.find(r.parameters,(function(e){return 71===e.name.kind&&e.name.escapedText===n}));return i&&i.symbol}}},e.getJSDocHost=J,e.getTypeParameterFromJsDoc=function(t){var n=t.name.escapedText,o=t.parent.parent.parent.typeParameters;return e.find(o,(function(e){return e.name.escapedText===n}))},e.hasRestParameter=function(t){var n=e.lastOrUndefined(t.parameters);return n&&q(n)},e.isRestParameter=q,function(e){e[e.None=0]="None",e[e.Definite=1]="Definite",e[e.Compound=2]="Compound"}(e.AssignmentKind||(e.AssignmentKind={})),e.getAssignmentTargetKind=Z,e.isAssignmentTarget=function(e){return 0!==Z(e)},e.isDeleteTarget=function(e){if(179!==e.kind&&180!==e.kind)return!1;for(e=e.parent;e&&185===e.kind;)e=e.parent;return e&&188===e.kind},e.isNodeDescendantOf=function(e,t){for(;e;){if(e===t)return!0;e=e.parent}return!1},e.isInAmbientContext=function(e){for(;e;){if(We(e,2)||265===e.kind&&e.isDeclarationFile)return!0;e=e.parent}return!1},e.isDeclarationName=function(t){switch(t.kind){case 71:case 9:case 8:return e.isDeclaration(t.parent)&&t.parent.name===t;default:return!1}},e.isAnyDeclarationName=function(t){switch(t.kind){case 71:case 9:case 8:if(e.isDeclaration(t.parent))return t.parent.name===t;var n=t.parent.parent;return e.isBinaryExpression(n)&&0!==K(n)&&e.getNameOfDeclaration(n)===t;default:return!1}},e.isLiteralComputedPropertyDeclarationName=function(t){return(9===t.kind||8===t.kind)&&144===t.parent.kind&&e.isDeclaration(t.parent.parent)},e.isIdentifierName=function(e){var t=e.parent;switch(t.kind){case 149:case 148:case 151:case 150:case 153:case 154:case 264:case 261:case 179:return t.name===e;case 143:if(t.right===e){for(;143===t.kind;)t=t.parent;return 162===t.kind}return!1;case 176:case 242:return t.propertyName===e;case 246:case 253:return!0}return!1},e.isAliasSymbolDeclaration=function(e){return 237===e.kind||236===e.kind||239===e.kind&&!!e.name||240===e.kind||242===e.kind||246===e.kind||243===e.kind&&Q(e)},e.exportAssignmentIsAlias=Q,e.getClassExtendsHeritageClauseElement=function(e){var t=ee(e.heritageClauses,85);return t&&t.types.length>0?t.types[0]:void 0},e.getClassImplementsHeritageClauseElements=function(e){var t=ee(e.heritageClauses,108);return t?t.types:void 0},e.getInterfaceBaseTypeNodes=function(e){var t=ee(e.heritageClauses,85);return t?t.types:void 0},e.getHeritageClause=ee,e.tryResolveScriptReference=function(t,n,o){if(!t.getCompilerOptions().noResolve){var r=e.isRootedDiskPath(o.fileName)?o.fileName:e.combinePaths(e.getDirectoryPath(n.fileName),o.fileName);return t.getSourceFile(r)}},e.getAncestor=function(e,t){for(;e;){if(e.kind===t)return e;e=e.parent}},e.getFileReferenceFromReferencePath=function(t,n){var o=new RegExp(D.source,"gim");if(/^\/\/\/\s*<reference\s+/gim.test(t)){if(o.test(t))return{isNoDefaultLib:!0};var r=e.fullTripleSlashReferencePathRegEx.exec(t),i=!r&&I.exec(t),s=r||i;if(s){var a=n.pos+s[1].length+s[2].length;return{fileReference:{pos:a,end:a+s[3].length,fileName:s[3]},isNoDefaultLib:!1,isTypeReferenceDirective:!!i}}return{diagnosticMessage:e.Diagnostics.Invalid_reference_directive_syntax,isNoDefaultLib:!1}}},e.isKeyword=function(e){return 72<=e&&e<=142},e.isTrivia=function(e){return 2<=e&&e<=7},function(e){e[e.Normal=0]="Normal",e[e.Generator=1]="Generator",e[e.Async=2]="Async",e[e.Invalid=4]="Invalid",e[e.AsyncGenerator=3]="AsyncGenerator"}(e.FunctionFlags||(e.FunctionFlags={})),e.getFunctionFlags=function(e){if(!e)return 4;var t=0;switch(e.kind){case 228:case 186:case 151:e.asteriskToken&&(t|=1);case 187:We(e,256)&&(t|=2)}return e.body||(t|=4),t},e.isAsyncFunction=function(e){switch(e.kind){case 228:case 186:case 187:case 151:return void 0!==e.body&&void 0===e.asteriskToken&&We(e,256)}return!1},e.isStringOrNumericLiteral=te,e.hasDynamicName=ne,e.isDynamicName=oe,e.isWellKnownSymbolSyntactically=re,e.getPropertyNameForPropertyNameNode=ie,e.getTextOfIdentifierOrLiteral=function(t){if(t){if(71===t.kind)return e.idText(t);if(9===t.kind||8===t.kind)return t.text}},e.getEscapedTextOfIdentifierOrLiteral=function(e){if(e){if(71===e.kind)return e.escapedText;if(9===e.kind||8===e.kind)return m(e.text)}},e.getPropertyNameForKnownSymbolName=se,e.isESSymbolIdentifier=ae,e.isPushOrUnshiftIdentifier=function(e){return"push"===e.escapedText||"unshift"===e.escapedText},e.isParameterDeclaration=function(e){return 146===le(e).kind},e.getRootDeclaration=le,e.nodeStartsNewLexicalEnvironment=function(e){var t=e.kind;return 152===t||186===t||228===t||187===t||151===t||153===t||154===t||233===t||265===t},e.nodeIsSynthesized=ce,e.getOriginalSourceFile=function(t){return e.getParseTreeNode(t,e.isSourceFile)||t},function(e){e[e.Left=0]="Left",e[e.Right=1]="Right"}(e.Associativity||(e.Associativity={})),e.getExpressionAssociativity=function(e){var t=pe(e),n=182===e.kind&&void 0!==e.arguments;return ue(e.kind,t,n)},e.getOperatorAssociativity=ue,e.getExpressionPrecedence=function(e){var t=pe(e),n=182===e.kind&&void 0!==e.arguments;return de(e.kind,t,n)},e.getOperator=pe,e.getOperatorPrecedence=de,e.createDiagnosticCollection=function(){var t=[],n=e.createMap(),o=!1,r=0;return{add:function(e){var i;e.file?(i=n.get(e.file.fileName))||(i=[],n.set(e.file.fileName,i)):i=t;i.push(e),o=!0,r++},getGlobalDiagnostics:function(){return i(),t},getDiagnostics:function(o){if(i(),o)return n.get(o)||[];var r=[];function s(e){r.push(e)}return e.forEach(t,s),n.forEach((function(t){e.forEach(t,s)})),e.sortAndDeduplicateDiagnostics(r)},getModificationCount:function(){return r},reattachFileDiagnostics:function(t){e.forEach(n.get(t.fileName),(function(e){return e.file=t}))}};function i(){o&&(o=!1,t=e.sortAndDeduplicateDiagnostics(t),n.forEach((function(t,o){n.set(o,e.sortAndDeduplicateDiagnostics(t))})))}};var ge=/[\\\"\u0000-\u001f\t\v\f\b\r\n\u2028\u2029\u0085]/g,he=/[\\\'\u0000-\u001f\t\v\f\b\r\n\u2028\u2029\u0085]/g,fe=/[\\\`\u0000-\u001f\t\v\f\b\r\n\u2028\u2029\u0085]/g,_e=e.createMapFromTemplate({"\0":"\\0","\t":"\\t","\v":"\\v","\f":"\\f","\b":"\\b","\r":"\\r","\n":"\\n","\\":"\\\\",'"':'\\"',"'":"\\'","`":"\\`","\u2028":"\\u2028","\u2029":"\\u2029","":"\\u0085"}),me=/\\0[0-9]/g;function ye(e,t){var n=96===t?fe:39===t?he:ge;return e.replace(n,be).replace(me,ke)}function ke(e){return"\\x00"+e.charAt(e.length-1)}function be(e){return _e.get(e)||ve(e.charCodeAt(0))}function ve(e){return"\\u"+("0000"+e.toString(16).toUpperCase()).slice(-4)}e.escapeString=ye,e.isIntrinsicJsxName=function(e){var t=e.substr(0,1);return t.toLowerCase()===t};var Te=/[^\u0000-\u007F]/g;function Ee(e,t){return e=ye(e,t),Te.test(e)?e.replace(Te,(function(e){return ve(e.charCodeAt(0))})):e}e.escapeNonAsciiString=Ee;var Se=["","    "];function Ce(e){return void 0===Se[e]&&(Se[e]=Ce(e-1)+Se[1]),Se[e]}function xe(){return Se[1].length}function Be(e,t){return t.moduleName||Ae(e,t.fileName)}function Ae(t,n){var o=function(e){return t.getCanonicalFileName(e)},r=e.toPath(t.getCommonSourceDirectory(),t.getCurrentDirectory(),o),i=e.getNormalizedAbsolutePath(n,t.getCurrentDirectory()),s=e.getRelativePathToDirectoryOrUrl(r,i,r,o,!1);return e.removeFileExtension(s)}function Ie(e,t,n){return!(t.noEmitForJsFiles&&G(e)||e.isDeclarationFile||n(e))}function De(t,n,o){var r=e.getNormalizedAbsolutePath(t.fileName,n.getCurrentDirectory()),i=n.getCommonSourceDirectory();return r=0===n.getCanonicalFileName(r).indexOf(n.getCanonicalFileName(i))?r.substring(i.length):r,e.combinePaths(o,r)}function Ne(t,n){return e.getLineAndCharacterOfPosition(t,n).line}function we(t,n){return e.computeLineAndCharacterOfPosition(t,n).line}function Re(e){if(e&&e.parameters.length>0){var t=2===e.parameters.length&&Oe(e.parameters[0]);return e.parameters[t?1:0]}}function Oe(e){return Pe(e.name)}function Pe(e){return e&&71===e.kind&&Le(e)}function Le(e){return 99===e.originalKeywordKind}function Me(t,n){return t.type?t.type:n||W(t)?e.getJSDocType(t):void 0}function Fe(e,t,n,o){Ue(e,t,n.pos,o)}function Ue(e,t,n,o){o&&o.length&&n!==o[0].pos&&we(e,n)!==we(e,o[0].pos)&&t.writeLine()}function He(e,t,n,o,r,i,s,a){if(o&&o.length>0){r&&n.write(" ");for(var l=!1,c=0,u=o;c<u.length;c++){var p=u[c];l&&(n.write(" "),l=!1),a(e,t,n,p.pos,p.end,s),p.hasTrailingNewLine?n.writeLine():l=!0}l&&i&&n.write(" ")}}function Ve(e,t,n,o,r,i){var s=Math.min(t,i-1),a=e.substring(r,s).replace(/^\s+|\s+$/g,"");a?(n.write(a),s!==t&&n.writeLine()):n.writeLiteral(o)}function Ge(t,n,o){for(var r=0;n<o&&e.isWhiteSpaceSingleLine(t.charCodeAt(n));n++)9===t.charCodeAt(n)?r+=xe()-r%xe():r++;return r}function We(e,t){return!!Ke(e,t)}function Ke(e,t){return je(e)&t}function je(e){if(536870912&e.modifierFlagsCache)return-536870913&e.modifierFlagsCache;var t=ze(e);return e.modifierFlagsCache=536870912|t,t}function ze(e){var t=0;if(e.modifiers)for(var n=0,o=e.modifiers;n<o.length;n++){t|=$e(o[n].kind)}return(4&e.flags||71===e.kind&&e.isInJSDocNamespace)&&(t|=1),t}function $e(e){switch(e){case 115:return 32;case 114:return 4;case 113:return 16;case 112:return 8;case 117:return 128;case 84:return 1;case 124:return 2;case 76:return 2048;case 79:return 512;case 120:return 256;case 131:return 64}return 0}function Xe(e){return e>=58&&e<=70}function Ye(t){if(201===t.kind&&85===t.parent.token&&e.isClassLike(t.parent.parent))return t.parent.parent}function Je(t,n){return e.isBinaryExpression(t)&&(n?58===t.operatorToken.kind:Xe(t.operatorToken.kind))&&e.isLeftHandSideExpression(t.left)}function qe(e){return void 0!==Ye(e)}function Ze(e){return 71===e.kind||179===e.kind&&Ze(e.expression)}e.getIndentString=Ce,e.getIndentSize=xe,e.createTextWriter=function(t){var n,o,r,i,s;function a(e){e&&e.length&&(r&&(n+=Ce(o),r=!1),n+=e)}function l(){n="",o=0,r=!0,i=0,s=0}return l(),{write:a,rawWrite:function(e){void 0!==e&&(r&&(r=!1),n+=e)},writeTextOfNode:function(e,t){a(g(e,t))},writeLiteral:function(t){if(t&&t.length){a(t);var o=e.computeLineStarts(t);o.length>1&&(i=i+o.length-1,s=n.length-t.length+e.lastOrUndefined(o))}},writeLine:function(){r||(i++,s=(n+=t).length,r=!0)},increaseIndent:function(){o++},decreaseIndent:function(){o--},getIndent:function(){return o},getTextPos:function(){return n.length},getLine:function(){return i+1},getColumn:function(){return r?o*xe()+1:n.length-s+1},getText:function(){return n},isAtStartOfLine:function(){return r},reset:l}},e.getResolvedExternalModuleName=Be,e.getExternalModuleNameFromDeclaration=function(e,t,n){var o=t.getExternalModuleFileFromDeclaration(n);if(o&&!o.isDeclarationFile)return Be(e,o)},e.getExternalModuleNameFromPath=Ae,e.getOwnEmitOutputFilePath=function(t,n,o){var r=n.getCompilerOptions();return(r.outDir?e.removeFileExtension(De(t,n,r.outDir)):e.removeFileExtension(t.fileName))+o},e.getDeclarationEmitOutputFilePath=function(t,n){var o=n.getCompilerOptions(),r=o.declarationDir||o.outDir,i=r?De(t,n,r):t.fileName;return e.removeFileExtension(i)+".d.ts"},e.getSourceFilesToEmit=function(t,n){var o=t.getCompilerOptions(),r=function(e){return t.isSourceFileFromExternalLibrary(e)};if(o.outFile||o.out){var i=e.getEmitModuleKind(o),s=i===e.ModuleKind.AMD||i===e.ModuleKind.System;return e.filter(t.getSourceFiles(),(function(t){return(s||!e.isExternalModule(t))&&Ie(t,o,r)}))}var a=void 0===n?t.getSourceFiles():[n];return e.filter(a,(function(e){return Ie(e,o,r)}))},e.sourceFileMayBeEmitted=Ie,e.getSourceFilePathInNewDir=De,e.writeFile=function(t,n,o,r,i,s){t.writeFile(o,r,i,(function(t){n.add(e.createCompilerDiagnostic(e.Diagnostics.Could_not_write_file_0_Colon_1,o,t))}),s)},e.getLineOfLocalPosition=Ne,e.getLineOfLocalPositionFromLineMap=we,e.getFirstConstructorWithBody=function(t){return e.forEach(t.members,(function(e){if(152===e.kind&&c(e.body))return e}))},e.getSetAccessorTypeAnnotationNode=function(e){var t=Re(e);return t&&t.type},e.getThisParameter=function(e){if(e.parameters.length){var t=e.parameters[0];if(Oe(t))return t}},e.parameterIsThisKeyword=Oe,e.isThisIdentifier=Pe,e.identifierIsThisKeyword=Le,e.getAllAccessorDeclarations=function(t,n){var o,r,i,s;return ne(n)?(o=n,153===n.kind?i=n:154===n.kind?s=n:e.Debug.fail("Accessor has wrong kind")):e.forEach(t,(function(e){153!==e.kind&&154!==e.kind||We(e,32)!==We(n,32)||ie(e.name)===ie(n.name)&&(o?r||(r=e):o=e,153!==e.kind||i||(i=e),154!==e.kind||s||(s=e))})),{firstAccessor:o,secondAccessor:r,getAccessor:i,setAccessor:s}},e.getEffectiveTypeAnnotationNode=Me,e.getEffectiveReturnTypeNode=function(t,n){return t.type?t.type:n||W(t)?e.getJSDocReturnType(t):void 0},e.getEffectiveTypeParameterDeclarations=function(t,n){if(t.typeParameters)return t.typeParameters;if(n||W(t)){var o=e.getJSDocTemplateTag(t);return o&&o.typeParameters}},e.getEffectiveSetAccessorTypeAnnotationNode=function(e,t){var n=Re(e);return n&&Me(n,t)},e.emitNewLineBeforeLeadingComments=Fe,e.emitNewLineBeforeLeadingCommentsOfPosition=Ue,e.emitNewLineBeforeLeadingCommentOfPosition=function(e,t,n,o){n!==o&&we(e,n)!==we(e,o)&&t.writeLine()},e.emitComments=He,e.emitDetachedComments=function(t,n,o,r,i,s,a){var l,c;if(a?0===i.pos&&(l=e.filter(e.getLeadingCommentRanges(t,i.pos),(function(e){return u(t,e)}))):l=e.getLeadingCommentRanges(t,i.pos),l){for(var p=[],d=void 0,g=0,h=l;g<h.length;g++){var f=h[g];if(d){var _=we(n,d.end);if(we(n,f.pos)>=_+2)break}p.push(f),d=f}if(p.length){_=we(n,e.lastOrUndefined(p).end);we(n,e.skipTrivia(t,i.pos))>=_+2&&(Fe(n,o,i,l),He(t,n,o,p,!1,!0,s,r),c={nodePos:i.pos,detachedCommentEndPos:e.lastOrUndefined(p).end})}}return c},e.writeCommentRange=function(t,n,o,r,i,s){if(42===t.charCodeAt(r+1))for(var a=e.computeLineAndCharacterOfPosition(n,r),l=n.length,c=void 0,u=r,p=a.line;u<i;p++){var d=p+1===l?t.length+1:n[p+1];if(u!==r){void 0===c&&(c=Ge(t,n[a.line],r));var g=o.getIndent()*xe()-c+Ge(t,u,d);if(g>0){var h=g%xe(),f=Ce((g-h)/xe());for(o.rawWrite(f);h;)o.rawWrite(" "),h--}else o.rawWrite("")}Ve(t,i,o,s,u,d),u=d}else o.write(t.substring(r,i))},e.hasModifiers=function(e){return 0!==je(e)},e.hasModifier=We,e.getSelectedModifierFlags=Ke,e.getModifierFlags=je,e.getModifierFlagsNoCache=ze,e.modifierToFlag=$e,e.isLogicalOperator=function(e){return 54===e||53===e||51===e},e.isAssignmentOperator=Xe,e.tryGetClassExtendingExpressionWithTypeArguments=Ye,e.isAssignmentExpression=Je,e.isDestructuringAssignment=function(e){if(Je(e,!0)){var t=e.left.kind;return 178===t||177===t}return!1},e.isExpressionWithTypeArgumentsInClassExtendsClause=qe,e.isExpressionWithTypeArgumentsInClassImplementsClause=function(t){return 201===t.kind&&Ze(t.expression)&&t.parent&&108===t.parent.token&&t.parent.parent&&e.isClassLike(t.parent.parent)},e.isEntityNameExpression=Ze,e.isRightSideOfQualifiedNameOrPropertyAccess=function(e){return 143===e.parent.kind&&e.parent.right===e||179===e.parent.kind&&e.parent.name===e},e.isEmptyObjectLiteral=function(e){return 178===e.kind&&0===e.properties.length},e.isEmptyArrayLiteral=function(e){return 177===e.kind&&0===e.elements.length},e.getLocalSymbolForExportDefault=function(t){return function(t){return t&&e.length(t.declarations)>0&&We(t.declarations[0],512)}(t)?t.declarations[0].localSymbol:void 0},e.tryExtractTypeScriptExtension=function(t){return e.find(e.supportedTypescriptExtensionsForExtractExtension,(function(n){return e.fileExtensionIs(t,n)}))};var Qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.convertToBase64=function(t){for(var n,o,r,i,s="",a=function(t){for(var n=[],o=t.length,r=0;r<o;r++){var i=t.charCodeAt(r);i<128?n.push(i):i<2048?(n.push(i>>6|192),n.push(63&i|128)):i<65536?(n.push(i>>12|224),n.push(i>>6&63|128),n.push(63&i|128)):i<131072?(n.push(i>>18|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(63&i|128)):e.Debug.assert(!1,"Unexpected code point")}return n}(t),l=0,c=a.length;l<c;)n=a[l]>>2,o=(3&a[l])<<4|a[l+1]>>4,r=(15&a[l+1])<<2|a[l+2]>>6,i=63&a[l+2],l+1>=c?r=i=64:l+2>=c&&(i=64),s+=Qe.charAt(n)+Qe.charAt(o)+Qe.charAt(r)+Qe.charAt(i),l+=3;return s};var et;function tt(t,n,o){void 0===t&&(t=0);var r=function(t){var n=[];for(var o in t){var r=t[o];"number"==typeof r&&n.push([r,o])}return e.stableSort(n,(function(t,n){return e.compareValues(t[0],n[0])}))}(n);if(0===t)return r.length>0&&0===r[0][0]?r[0][1]:"0";if(o){for(var i="",s=t,a=r.length-1;a>=0&&0!==s;a--){var l=r[a],c=l[0],u=l[1];0!==c&&(s&c)===c&&(s&=~c,i=u+(i?", ":"")+i)}if(0===s)return i}else for(var p=0,d=r;p<d.length;p++){var g=d[p];c=g[0],u=g[1];if(c===t)return u}return t.toString()}function nt(e,t){return{pos:e,end:t}}function ot(e,t){return nt(t,e.end)}function rt(e){return e.decorators&&e.decorators.length>0?ot(e,e.decorators.end):e}function it(e,t,n){return st(at(e,n),t.end,n)}function st(e,t,n){return e===t||Ne(n,e)===Ne(n,t)}function at(t,n){return e.positionIsSynthesized(t.pos)?-1:e.skipTrivia(n.text,t.pos)}function lt(e){return void 0!==e.initializer}function ct(e){return 33554432&e.flags?e.checkFlags:0}function ut(e){var t=e.parent;if(!t)return 0;switch(t.kind){case 193:case 192:var n=t.operator;return 43===n||44===n?s():0;case 194:var o=t,r=o.left,i=o.operatorToken;return r===e&&Xe(i.kind)?s():0;case 179:return t.name!==e?0:ut(t);default:return 0}function s(){return t.parent&&210===t.parent.kind?1:2}}e.getNewLineCharacter=function(t,n){switch(t.newLine){case 0:return"\r\n";case 1:return"\n"}return n?n.newLine:e.sys?e.sys.newLine:"\r\n"},e.formatSyntaxKind=function(t){return tt(t,e.SyntaxKind,!1)},e.formatModifierFlags=function(t){return tt(t,e.ModifierFlags,!0)},e.formatTransformFlags=function(t){return tt(t,e.TransformFlags,!0)},e.formatEmitFlags=function(t){return tt(t,e.EmitFlags,!0)},e.formatSymbolFlags=function(t){return tt(t,e.SymbolFlags,!0)},e.formatTypeFlags=function(t){return tt(t,e.TypeFlags,!0)},e.formatObjectFlags=function(t){return tt(t,e.ObjectFlags,!0)},e.createRange=nt,e.moveRangeEnd=function(e,t){return nt(e.pos,t)},e.moveRangePos=ot,e.moveRangePastDecorators=rt,e.moveRangePastModifiers=function(e){return e.modifiers&&e.modifiers.length>0?ot(e,e.modifiers.end):rt(e)},e.isCollapsedRange=function(e){return e.pos===e.end},e.createTokenRange=function(t,n){return nt(t,t+e.tokenToString(n).length)},e.rangeIsOnSingleLine=function(e,t){return it(e,e,t)},e.rangeStartPositionsAreOnSameLine=function(e,t,n){return st(at(e,n),at(t,n),n)},e.rangeEndPositionsAreOnSameLine=function(e,t,n){return st(e.end,t.end,n)},e.rangeStartIsOnSameLineAsRangeEnd=it,e.rangeEndIsOnSameLineAsRangeStart=function(e,t,n){return st(e.end,at(t,n),n)},e.positionsAreOnSameLine=st,e.getStartPositionOfRange=at,e.isDeclarationNameOfEnumOrNamespace=function(t){var n=e.getParseTreeNode(t);if(n)switch(n.parent.kind){case 232:case 233:return n===n.parent.name}return!1},e.getInitializedVariables=function(t){return e.filter(t.declarations,lt)},e.isWatchSet=function(e){return e.watch&&e.hasOwnProperty("watch")},e.getCheckFlags=ct,e.getDeclarationModifierFlagsFromSymbol=function(t){if(t.valueDeclaration){var n=e.getCombinedModifierFlags(t.valueDeclaration);return t.parent&&32&t.parent.flags?n:-29&n}if(6&ct(t)){var o=t.checkFlags;return(256&o?8:64&o?4:16)|(512&o?32:0)}return 4194304&t.flags?36:0},e.levenshtein=function(e,t){for(var n=new Array(t.length+1),o=new Array(t.length+1),r=0;r<t.length+1;r++)n[r]=r,o[r]=-1;for(r=1;r<e.length+1;r++){o[0]=r;for(var i=1;i<t.length+1;i++)o[i]=Math.min(n[i]+1,o[i-1]+1,n[i-1]+(e[r-1]===t[i-1]?0:2));var s=n;n=o,o=s}return n[n.length-1]},e.skipAlias=function(e,t){return 2097152&e.flags?t.getAliasedSymbol(e):e},e.getCombinedLocalAndExportSymbolFlags=function(e){return e.exportSymbol?e.exportSymbol.flags|e.flags:e.flags},e.isWriteOnlyAccess=function(e){return 1===ut(e)},e.isWriteAccess=function(e){return 0!==ut(e)},function(e){e[e.Read=0]="Read",e[e.Write=1]="Write",e[e.ReadWrite=2]="ReadWrite"}(et||(et={})),e.compareDataObjects=function e(t,n){if(!t||!n||Object.keys(t).length!==Object.keys(n).length)return!1;for(var o in t)if("object"==typeof t[o]){if(!e(t[o],n[o]))return!1}else if("function"!=typeof t[o]&&t[o]!==n[o])return!1;return!0},e.clearMap=function(e,t){e.forEach(t),e.clear()},e.mutateMap=function(e,t,n){var o=n.createNewValue,r=n.onDeleteValue,i=n.onExistingValue;e.forEach((function(n,o){var s=t.get(o);void 0===s?(e.delete(o),r(n,o)):i&&i(n,s,o)})),t.forEach((function(t,n){e.has(n)||e.set(n,o(n,t))}))},e.forEachAncestorDirectory=function(t,n){for(;;){var o=n(t);if(void 0!==o)return o;var r=e.getDirectoryPath(t);if(r===t)return;t=r}}}(ts||(ts={})),function(e){function t(e){return e.start+e.length}function n(e){return 0===e.length}function o(e,t){if(e<0)throw new Error("start < 0");if(t<0)throw new Error("length < 0");return{start:e,length:t}}function r(e,t){return o(e,t-e)}function i(e,t){if(t<0)throw new Error("newLength < 0");return{span:e,newLength:t}}function s(t){return!!e.isBindingPattern(t)&&e.every(t.elements,a)}function a(t){return!!e.isOmittedExpression(t)||s(t.name)}function l(t){for(;t&&(176===t.kind||e.isBindingPattern(t));)t=t.parent;return t}function c(e,t){if(e)for(;void 0!==e.original;)e=e.original;return!t||t(e)?e:void 0}function u(e){return 0==(8&e.flags)}function p(e){var t=e;return t.length>=3&&95===t.charCodeAt(0)&&95===t.charCodeAt(1)&&95===t.charCodeAt(2)?t.substr(1):t}function d(t){var n=h(t);return e.isIdentifier(n)?n:void 0}function g(t){return t.name||function(t){var n=t.parent.parent;if(n){if(e.isDeclaration(n))return d(n);switch(n.kind){case 208:return n.declarationList&&n.declarationList.declarations[0]?d(n.declarationList.declarations[0]):void 0;case 210:var o=n.expression;switch(o.kind){case 179:return o.name;case 180:var r=o.argumentExpression;if(e.isIdentifier(r))return r}return;case 1:return;case 185:return d(n.expression);case 222:return e.isDeclaration(n.statement)||e.isExpression(n.statement)?d(n.statement):void 0;default:e.Debug.assertNever(n,"Found typedef tag attached to node which it should not be!")}}}(t)}function h(t){if(t){switch(t.kind){case 284:case 279:var n=t.name;if(143===n.kind)return n.right;break;case 194:var o=t;switch(e.getSpecialPropertyAssignmentKind(o)){case 1:case 4:case 5:case 3:return o.left.name;default:return}case 283:return g(t);case 243:var r=t.expression;return e.isIdentifier(r)?r:void 0}return t.name}}function f(t){if(t.name&&e.isIdentifier(t.name)){var n=t.name.escapedText;return m(t.parent).filter((function(t){return e.isJSDocParameterTag(t)&&e.isIdentifier(t.name)&&t.name.escapedText===n}))}}function _(e){return y(e,280)}function m(t){var n=t.jsDocCache;return void 0===n&&(t.jsDocCache=n=e.flatMap(e.getJSDocCommentsAndTags(t),(function(t){return e.isJSDoc(t)?t.tags:t}))),n}function y(t,n){var o=m(t);return e.find(o,(function(e){return e.kind===n}))}e.getDefaultLibFileName=function(e){switch(e.target){case 5:return"lib.esnext.full.d.ts";case 4:return"lib.es2017.full.d.ts";case 3:return"lib.es2016.full.d.ts";case 2:return"lib.es6.d.ts";default:return"lib.d.ts"}},e.textSpanEnd=t,e.textSpanIsEmpty=n,e.textSpanContainsPosition=function(e,n){return n>=e.start&&n<t(e)},e.textSpanContainsTextSpan=function(e,n){return n.start>=e.start&&t(n)<=t(e)},e.textSpanOverlapsWith=function(e,n){return Math.max(e.start,n.start)<Math.min(t(e),t(n))},e.textSpanOverlap=function(e,n){var o=Math.max(e.start,n.start),i=Math.min(t(e),t(n));if(o<i)return r(o,i)},e.textSpanIntersectsWithTextSpan=function(e,n){return n.start<=t(e)&&t(n)>=e.start},e.textSpanIntersectsWith=function(e,n,o){var r=n+o;return n<=t(e)&&r>=e.start},e.decodedTextSpanIntersectsWith=function(e,t,n,o){return n<=e+t&&n+o>=e},e.textSpanIntersectsWithPosition=function(e,n){return n<=t(e)&&n>=e.start},e.textSpanIntersection=function(e,n){var o=Math.max(e.start,n.start),i=Math.min(t(e),t(n));if(o<=i)return r(o,i)},e.createTextSpan=o,e.createTextSpanFromBounds=r,e.textChangeRangeNewSpan=function(e){return o(e.span.start,e.newLength)},e.textChangeRangeIsUnchanged=function(e){return n(e.span)&&0===e.newLength},e.createTextChangeRange=i,e.unchangedTextChangeRange=i(o(0,0),0),e.collapseTextChangeRangesAcrossMultipleVersions=function(n){if(0===n.length)return e.unchangedTextChangeRange;if(1===n.length)return n[0];for(var o=n[0],s=o.span.start,a=t(o.span),l=s+o.newLength,c=1;c<n.length;c++){var u=n[c],p=s,d=a,g=l,h=u.span.start,f=t(u.span),_=h+u.newLength;s=Math.min(p,h),a=Math.max(d,d+(f-g)),l=Math.max(_,_+(g-f))}return i(r(s,a),l-s)},e.getTypeParameterOwner=function(t){if(t&&145===t.kind)for(var n=t;n;n=n.parent)if(e.isFunctionLike(n)||e.isClassLike(n)||230===n.kind)return n},e.isParameterPropertyDeclaration=function(t){return e.hasModifier(t,92)&&152===t.parent.kind&&e.isClassLike(t.parent.parent)},e.isEmptyBindingPattern=s,e.isEmptyBindingElement=a,e.getCombinedModifierFlags=function(t){t=l(t);var n=e.getModifierFlags(t);return 226===t.kind&&(t=t.parent),t&&227===t.kind&&(n|=e.getModifierFlags(t),t=t.parent),t&&208===t.kind&&(n|=e.getModifierFlags(t)),n},e.getCombinedNodeFlags=function(e){var t=(e=l(e)).flags;return 226===e.kind&&(e=e.parent),e&&227===e.kind&&(t|=e.flags,e=e.parent),e&&208===e.kind&&(t|=e.flags),t},e.validateLocaleAndSetLanguage=function(t,n,o){var r=/^([a-z]+)([_\-]([a-z]+))?$/.exec(t.toLowerCase());if(r){var i=r[1];s(i,r[3],o)||s(i,void 0,o)}else o&&o.push(e.createCompilerDiagnostic(e.Diagnostics.Locale_must_be_of_the_form_language_or_language_territory_For_example_0_or_1,"en","ja-jp"));function s(t,o,r){var i=e.normalizePath(n.getExecutingFilePath()),s=e.getDirectoryPath(i),a=e.combinePaths(s,t);if(o&&(a=a+"-"+o),a=n.resolvePath(e.combinePaths(a,"diagnosticMessages.generated.json")),!n.fileExists(a))return!1;var l="";try{l=n.readFile(a)}catch(t){return r&&r.push(e.createCompilerDiagnostic(e.Diagnostics.Unable_to_open_file_0,a)),!1}try{e.localizedDiagnosticMessages=JSON.parse(l)}catch(t){return r&&r.push(e.createCompilerDiagnostic(e.Diagnostics.Corrupted_locale_file_0,a)),!1}return!0}},e.getOriginalNode=c,e.isParseTreeNode=u,e.getParseTreeNode=function(e,t){return void 0===e||u(e)?e:!u(e=c(e))||t&&!t(e)?void 0:e},e.unescapeLeadingUnderscores=p,e.idText=function(e){return p(e.escapedText)},e.symbolName=function(e){return p(e.escapedName)},e.unescapeIdentifier=function(e){return e},e.getNameOfJSDocTypedef=g,e.getNameOfDeclaration=h,e.getJSDocParameterTags=f,e.hasJSDocParameterTags=function(e){return!!y(e,279)},e.getJSDocAugmentsTag=function(e){return y(e,277)},e.getJSDocClassTag=function(e){return y(e,278)},e.getJSDocReturnTag=_,e.getJSDocTemplateTag=function(e){return y(e,282)},e.getJSDocTypeTag=function(e){var t=y(e,281);if(t&&t.typeExpression&&t.typeExpression.type)return t},e.getJSDocType=function(t){var n=y(t,281);if(!n&&146===t.kind){var o=f(t);o&&(n=e.find(o,(function(e){return!!e.typeExpression})))}return n&&n.typeExpression&&n.typeExpression.type},e.getJSDocReturnType=function(e){var t=_(e);return t&&t.typeExpression&&t.typeExpression.type},e.getJSDocTags=m,e.getAllJSDocTagsOfKind=function(t,n){var o=m(t);return e.filter(o,(function(e){return e.kind===n}))}}(ts||(ts={})),function(e){e.isNumericLiteral=function(e){return 8===e.kind},e.isStringLiteral=function(e){return 9===e.kind},e.isJsxText=function(e){return 10===e.kind},e.isRegularExpressionLiteral=function(e){return 12===e.kind},e.isNoSubstitutionTemplateLiteral=function(e){return 13===e.kind},e.isTemplateHead=function(e){return 14===e.kind},e.isTemplateMiddle=function(e){return 15===e.kind},e.isTemplateTail=function(e){return 16===e.kind},e.isIdentifier=function(e){return 71===e.kind},e.isQualifiedName=function(e){return 143===e.kind},e.isComputedPropertyName=function(e){return 144===e.kind},e.isTypeParameterDeclaration=function(e){return 145===e.kind},e.isParameter=function(e){return 146===e.kind},e.isDecorator=function(e){return 147===e.kind},e.isPropertySignature=function(e){return 148===e.kind},e.isPropertyDeclaration=function(e){return 149===e.kind},e.isMethodSignature=function(e){return 150===e.kind},e.isMethodDeclaration=function(e){return 151===e.kind},e.isConstructorDeclaration=function(e){return 152===e.kind},e.isGetAccessorDeclaration=function(e){return 153===e.kind},e.isSetAccessorDeclaration=function(e){return 154===e.kind},e.isCallSignatureDeclaration=function(e){return 155===e.kind},e.isConstructSignatureDeclaration=function(e){return 156===e.kind},e.isIndexSignatureDeclaration=function(e){return 157===e.kind},e.isTypePredicateNode=function(e){return 158===e.kind},e.isTypeReferenceNode=function(e){return 159===e.kind},e.isFunctionTypeNode=function(e){return 160===e.kind},e.isConstructorTypeNode=function(e){return 161===e.kind},e.isTypeQueryNode=function(e){return 162===e.kind},e.isTypeLiteralNode=function(e){return 163===e.kind},e.isArrayTypeNode=function(e){return 164===e.kind},e.isTupleTypeNode=function(e){return 165===e.kind},e.isUnionTypeNode=function(e){return 166===e.kind},e.isIntersectionTypeNode=function(e){return 167===e.kind},e.isParenthesizedTypeNode=function(e){return 168===e.kind},e.isThisTypeNode=function(e){return 169===e.kind},e.isTypeOperatorNode=function(e){return 170===e.kind},e.isIndexedAccessTypeNode=function(e){return 171===e.kind},e.isMappedTypeNode=function(e){return 172===e.kind},e.isLiteralTypeNode=function(e){return 173===e.kind},e.isObjectBindingPattern=function(e){return 174===e.kind},e.isArrayBindingPattern=function(e){return 175===e.kind},e.isBindingElement=function(e){return 176===e.kind},e.isArrayLiteralExpression=function(e){return 177===e.kind},e.isObjectLiteralExpression=function(e){return 178===e.kind},e.isPropertyAccessExpression=function(e){return 179===e.kind},e.isElementAccessExpression=function(e){return 180===e.kind},e.isCallExpression=function(e){return 181===e.kind},e.isNewExpression=function(e){return 182===e.kind},e.isTaggedTemplateExpression=function(e){return 183===e.kind},e.isTypeAssertion=function(e){return 184===e.kind},e.isParenthesizedExpression=function(e){return 185===e.kind},e.skipPartiallyEmittedExpressions=function(e){for(;288===e.kind;)e=e.expression;return e},e.isFunctionExpression=function(e){return 186===e.kind},e.isArrowFunction=function(e){return 187===e.kind},e.isDeleteExpression=function(e){return 188===e.kind},e.isTypeOfExpression=function(e){return 191===e.kind},e.isVoidExpression=function(e){return 190===e.kind},e.isAwaitExpression=function(e){return 191===e.kind},e.isPrefixUnaryExpression=function(e){return 192===e.kind},e.isPostfixUnaryExpression=function(e){return 193===e.kind},e.isBinaryExpression=function(e){return 194===e.kind},e.isConditionalExpression=function(e){return 195===e.kind},e.isTemplateExpression=function(e){return 196===e.kind},e.isYieldExpression=function(e){return 197===e.kind},e.isSpreadElement=function(e){return 198===e.kind},e.isClassExpression=function(e){return 199===e.kind},e.isOmittedExpression=function(e){return 200===e.kind},e.isExpressionWithTypeArguments=function(e){return 201===e.kind},e.isAsExpression=function(e){return 202===e.kind},e.isNonNullExpression=function(e){return 203===e.kind},e.isMetaProperty=function(e){return 204===e.kind},e.isTemplateSpan=function(e){return 205===e.kind},e.isSemicolonClassElement=function(e){return 206===e.kind},e.isBlock=function(e){return 207===e.kind},e.isVariableStatement=function(e){return 208===e.kind},e.isEmptyStatement=function(e){return 209===e.kind},e.isExpressionStatement=function(e){return 210===e.kind},e.isIfStatement=function(e){return 211===e.kind},e.isDoStatement=function(e){return 212===e.kind},e.isWhileStatement=function(e){return 213===e.kind},e.isForStatement=function(e){return 214===e.kind},e.isForInStatement=function(e){return 215===e.kind},e.isForOfStatement=function(e){return 216===e.kind},e.isContinueStatement=function(e){return 217===e.kind},e.isBreakStatement=function(e){return 218===e.kind},e.isReturnStatement=function(e){return 219===e.kind},e.isWithStatement=function(e){return 220===e.kind},e.isSwitchStatement=function(e){return 221===e.kind},e.isLabeledStatement=function(e){return 222===e.kind},e.isThrowStatement=function(e){return 223===e.kind},e.isTryStatement=function(e){return 224===e.kind},e.isDebuggerStatement=function(e){return 225===e.kind},e.isVariableDeclaration=function(e){return 226===e.kind},e.isVariableDeclarationList=function(e){return 227===e.kind},e.isFunctionDeclaration=function(e){return 228===e.kind},e.isClassDeclaration=function(e){return 229===e.kind},e.isInterfaceDeclaration=function(e){return 230===e.kind},e.isTypeAliasDeclaration=function(e){return 231===e.kind},e.isEnumDeclaration=function(e){return 232===e.kind},e.isModuleDeclaration=function(e){return 233===e.kind},e.isModuleBlock=function(e){return 234===e.kind},e.isCaseBlock=function(e){return 235===e.kind},e.isNamespaceExportDeclaration=function(e){return 236===e.kind},e.isImportEqualsDeclaration=function(e){return 237===e.kind},e.isImportDeclaration=function(e){return 238===e.kind},e.isImportClause=function(e){return 239===e.kind},e.isNamespaceImport=function(e){return 240===e.kind},e.isNamedImports=function(e){return 241===e.kind},e.isImportSpecifier=function(e){return 242===e.kind},e.isExportAssignment=function(e){return 243===e.kind},e.isExportDeclaration=function(e){return 244===e.kind},e.isNamedExports=function(e){return 245===e.kind},e.isExportSpecifier=function(e){return 246===e.kind},e.isMissingDeclaration=function(e){return 247===e.kind},e.isExternalModuleReference=function(e){return 248===e.kind},e.isJsxElement=function(e){return 249===e.kind},e.isJsxSelfClosingElement=function(e){return 250===e.kind},e.isJsxOpeningElement=function(e){return 251===e.kind},e.isJsxClosingElement=function(e){return 252===e.kind},e.isJsxAttribute=function(e){return 253===e.kind},e.isJsxAttributes=function(e){return 254===e.kind},e.isJsxSpreadAttribute=function(e){return 255===e.kind},e.isJsxExpression=function(e){return 256===e.kind},e.isCaseClause=function(e){return 257===e.kind},e.isDefaultClause=function(e){return 258===e.kind},e.isHeritageClause=function(e){return 259===e.kind},e.isCatchClause=function(e){return 260===e.kind},e.isPropertyAssignment=function(e){return 261===e.kind},e.isShorthandPropertyAssignment=function(e){return 262===e.kind},e.isSpreadAssignment=function(e){return 263===e.kind},e.isEnumMember=function(e){return 264===e.kind},e.isSourceFile=function(e){return 265===e.kind},e.isBundle=function(e){return 266===e.kind},e.isJSDocTypeExpression=function(e){return 267===e.kind},e.isJSDocAllType=function(e){return 268===e.kind},e.isJSDocUnknownType=function(e){return 269===e.kind},e.isJSDocNullableType=function(e){return 270===e.kind},e.isJSDocNonNullableType=function(e){return 271===e.kind},e.isJSDocOptionalType=function(e){return 272===e.kind},e.isJSDocFunctionType=function(e){return 273===e.kind},e.isJSDocVariadicType=function(e){return 274===e.kind},e.isJSDoc=function(e){return 275===e.kind},e.isJSDocAugmentsTag=function(e){return 277===e.kind},e.isJSDocParameterTag=function(e){return 279===e.kind},e.isJSDocReturnTag=function(e){return 280===e.kind},e.isJSDocTypeTag=function(e){return 281===e.kind},e.isJSDocTemplateTag=function(e){return 282===e.kind},e.isJSDocTypedefTag=function(e){return 283===e.kind},e.isJSDocPropertyTag=function(e){return 284===e.kind},e.isJSDocPropertyLikeTag=function(e){return 284===e.kind||279===e.kind},e.isJSDocTypeLiteral=function(e){return 285===e.kind}}(ts||(ts={})),function(e){function t(e){return e>=143}function n(e){return 8<=e&&e<=13}function o(e){switch(e){case 117:case 120:case 76:case 124:case 79:case 84:case 114:case 112:case 113:case 131:case 115:return!0}return!1}function r(e){return e&&s(e.kind)}function i(e){switch(e){case 228:case 151:case 152:case 153:case 154:case 186:case 187:return!0;default:return!1}}function s(e){switch(e){case 150:case 155:case 156:case 157:case 160:case 273:case 161:return!0;default:return i(e)}}function a(e){switch(e.kind){case 174:case 178:return!0}return!1}function l(e){switch(e.kind){case 175:case 177:return!0}return!1}function c(e){switch(e){case 179:case 180:case 182:case 181:case 249:case 250:case 183:case 177:case 185:case 178:case 199:case 186:case 71:case 12:case 8:case 9:case 13:case 196:case 86:case 95:case 99:case 101:case 97:case 203:case 204:case 91:return!0;default:return!1}}function u(e){switch(e){case 192:case 193:case 188:case 189:case 190:case 191:case 184:return!0;default:return c(e)}}function p(t){return function(e){switch(e){case 195:case 197:case 187:case 194:case 198:case 202:case 200:case 289:case 288:return!0;default:return u(e)}}(e.skipPartiallyEmittedExpressions(t).kind)}function d(e){return 288===e.kind}function g(e){return 287===e.kind}function h(e){return 228===e||247===e||229===e||230===e||231===e||232===e||233===e||238===e||237===e||244===e||243===e||236===e}function f(e){return 218===e||217===e||225===e||212===e||210===e||209===e||215===e||216===e||214===e||211===e||222===e||219===e||221===e||223===e||224===e||208===e||213===e||220===e||287===e||291===e||290===e}function _(e){return e.kind>=276&&e.kind<=285}e.isSyntaxList=function(e){return 286===e.kind},e.isNode=function(e){return t(e.kind)},e.isNodeKind=t,e.isToken=function(e){return e.kind>=0&&e.kind<=142},e.isNodeArray=function(e){return e.hasOwnProperty("pos")&&e.hasOwnProperty("end")},e.isLiteralKind=n,e.isLiteralExpression=function(e){return n(e.kind)},e.isTemplateLiteralKind=function(e){return 13<=e&&e<=16},e.isTemplateMiddleOrTemplateTail=function(e){var t=e.kind;return 15===t||16===t},e.isStringTextContainingNode=function(e){switch(e.kind){case 9:case 14:case 15:case 16:case 13:return!0;default:return!1}},e.isGeneratedIdentifier=function(t){return e.isIdentifier(t)&&t.autoGenerateKind>0},e.isModifierKind=o,e.isModifier=function(e){return o(e.kind)},e.isEntityName=function(e){var t=e.kind;return 143===t||71===t},e.isPropertyName=function(e){var t=e.kind;return 71===t||9===t||8===t||144===t},e.isBindingName=function(e){var t=e.kind;return 71===t||174===t||175===t},e.isFunctionLike=r,e.isFunctionLikeDeclaration=function(e){return e&&i(e.kind)},e.isFunctionLikeKind=s,e.isFunctionOrModuleBlock=function(t){return e.isSourceFile(t)||e.isModuleBlock(t)||e.isBlock(t)&&r(t.parent)},e.isClassElement=function(e){var t=e.kind;return 152===t||149===t||151===t||153===t||154===t||157===t||206===t||247===t},e.isClassLike=function(e){return e&&(229===e.kind||199===e.kind)},e.isAccessor=function(e){return e&&(153===e.kind||154===e.kind)},e.isTypeElement=function(e){var t=e.kind;return 156===t||155===t||148===t||150===t||157===t||247===t},e.isObjectLiteralElementLike=function(e){var t=e.kind;return 261===t||262===t||263===t||151===t||153===t||154===t||247===t},e.isTypeNode=function(e){return(t=e.kind)>=158&&t<=173||119===t||133===t||134===t||122===t||136===t||137===t||99===t||105===t||139===t||95===t||130===t||201===t||268===t||269===t||270===t||271===t||272===t||273===t||274===t;var t},e.isFunctionOrConstructorTypeNode=function(e){switch(e.kind){case 160:case 161:return!0}return!1},e.isBindingPattern=function(e){if(e){var t=e.kind;return 175===t||174===t}return!1},e.isAssignmentPattern=function(e){var t=e.kind;return 177===t||178===t},e.isArrayBindingElement=function(e){var t=e.kind;return 176===t||200===t},e.isDeclarationBindingElement=function(e){switch(e.kind){case 226:case 146:case 176:return!0}return!1},e.isBindingOrAssignmentPattern=function(e){return a(e)||l(e)},e.isObjectBindingOrAssignmentPattern=a,e.isArrayBindingOrAssignmentPattern=l,e.isPropertyAccessOrQualifiedName=function(e){var t=e.kind;return 179===t||143===t},e.isCallLikeExpression=function(e){switch(e.kind){case 251:case 250:case 181:case 182:case 183:case 147:return!0;default:return!1}},e.isCallOrNewExpression=function(e){return 181===e.kind||182===e.kind},e.isTemplateLiteral=function(e){var t=e.kind;return 196===t||13===t},e.isLeftHandSideExpression=function(t){return c(e.skipPartiallyEmittedExpressions(t).kind)},e.isUnaryExpression=function(t){return u(e.skipPartiallyEmittedExpressions(t).kind)},e.isUnaryExpressionWithWrite=function(e){switch(e.kind){case 193:return!0;case 192:return 43===e.operator||44===e.operator;default:return!1}},e.isExpression=p,e.isAssertionExpression=function(e){var t=e.kind;return 184===t||202===t},e.isPartiallyEmittedExpression=d,e.isNotEmittedStatement=g,e.isNotEmittedOrPartiallyEmittedNode=function(e){return g(e)||d(e)},e.isIterationStatement=function e(t,n){switch(t.kind){case 214:case 215:case 216:case 212:case 213:return!0;case 222:return n&&e(t.statement,n)}return!1},e.isForInOrOfStatement=function(e){return 215===e.kind||216===e.kind},e.isConciseBody=function(t){return e.isBlock(t)||p(t)},e.isFunctionBody=function(t){return e.isBlock(t)},e.isForInitializer=function(t){return e.isVariableDeclarationList(t)||p(t)},e.isModuleBody=function(e){var t=e.kind;return 234===t||233===t||71===t},e.isNamespaceBody=function(e){var t=e.kind;return 234===t||233===t},e.isJSDocNamespaceBody=function(e){var t=e.kind;return 71===t||233===t},e.isNamedImportBindings=function(e){var t=e.kind;return 241===t||240===t},e.isModuleOrEnumDeclaration=function(e){return 233===e.kind||232===e.kind},e.isDeclaration=function(t){return 145===t.kind?282!==t.parent.kind||e.isInJavaScriptFile(t):187===(n=t.kind)||176===n||229===n||199===n||152===n||232===n||264===n||246===n||228===n||186===n||153===n||239===n||237===n||242===n||230===n||253===n||151===n||150===n||233===n||236===n||240===n||146===n||261===n||149===n||148===n||154===n||262===n||231===n||145===n||226===n||283===n;var n},e.isDeclarationStatement=function(e){return h(e.kind)},e.isStatementButNotDeclaration=function(e){return f(e.kind)},e.isStatement=function(t){var n=t.kind;return f(n)||h(n)||function(t){if(207!==t.kind)return!1;if(void 0!==t.parent&&(224===t.parent.kind||260===t.parent.kind))return!1;return!e.isFunctionBlock(t)}(t)},e.isModuleReference=function(e){var t=e.kind;return 248===t||143===t||71===t},e.isJsxTagNameExpression=function(e){var t=e.kind;return 99===t||71===t||179===t},e.isJsxChild=function(e){var t=e.kind;return 249===t||256===t||250===t||10===t},e.isJsxAttributeLike=function(e){var t=e.kind;return 253===t||255===t},e.isStringLiteralOrJsxExpression=function(e){var t=e.kind;return 9===t||256===t},e.isJsxOpeningLikeElement=function(e){var t=e.kind;return 251===t||250===t},e.isCaseOrDefaultClause=function(e){var t=e.kind;return 257===t||258===t},e.isJSDocNode=function(e){return e.kind>=267&&e.kind<=285},e.isJSDocCommentContainingNode=function(e){return 275===e.kind||_(e)},e.isJSDocTag=_,e.isSetAccessor=function(e){return 154===e.kind},e.isGetAccessor=function(e){return 153===e.kind},e.hasJSDocNodes=function(e){return!!e.jsDoc&&e.jsDoc.length>0}}(ts||(ts={})),function(e){var t,n,o,r,i,s,a;function l(e,t){return t&&e(t)}function c(e,t,n){if(n){if(t)return t(n);for(var o=0,r=n;o<r.length;o++){var i=e(r[o]);if(i)return i}}}function u(e,t,n){if(e&&!(e.kind<=142))switch(e.kind){case 143:return l(t,e.left)||l(t,e.right);case 145:return l(t,e.name)||l(t,e.constraint)||l(t,e.default)||l(t,e.expression);case 262:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.name)||l(t,e.questionToken)||l(t,e.equalsToken)||l(t,e.objectAssignmentInitializer);case 263:return l(t,e.expression);case 146:case 149:case 148:case 261:case 226:case 176:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.propertyName)||l(t,e.dotDotDotToken)||l(t,e.name)||l(t,e.questionToken)||l(t,e.type)||l(t,e.initializer);case 160:case 161:case 155:case 156:case 157:return c(t,n,e.decorators)||c(t,n,e.modifiers)||c(t,n,e.typeParameters)||c(t,n,e.parameters)||l(t,e.type);case 151:case 150:case 152:case 153:case 154:case 186:case 228:case 187:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.asteriskToken)||l(t,e.name)||l(t,e.questionToken)||c(t,n,e.typeParameters)||c(t,n,e.parameters)||l(t,e.type)||l(t,e.equalsGreaterThanToken)||l(t,e.body);case 159:return l(t,e.typeName)||c(t,n,e.typeArguments);case 158:return l(t,e.parameterName)||l(t,e.type);case 162:return l(t,e.exprName);case 163:return c(t,n,e.members);case 164:return l(t,e.elementType);case 165:return c(t,n,e.elementTypes);case 166:case 167:return c(t,n,e.types);case 168:case 170:return l(t,e.type);case 171:return l(t,e.objectType)||l(t,e.indexType);case 172:return l(t,e.readonlyToken)||l(t,e.typeParameter)||l(t,e.questionToken)||l(t,e.type);case 173:return l(t,e.literal);case 174:case 175:case 177:return c(t,n,e.elements);case 178:return c(t,n,e.properties);case 179:return l(t,e.expression)||l(t,e.name);case 180:return l(t,e.expression)||l(t,e.argumentExpression);case 181:case 182:return l(t,e.expression)||c(t,n,e.typeArguments)||c(t,n,e.arguments);case 183:return l(t,e.tag)||l(t,e.template);case 184:return l(t,e.type)||l(t,e.expression);case 185:case 188:case 189:case 190:return l(t,e.expression);case 192:return l(t,e.operand);case 197:return l(t,e.asteriskToken)||l(t,e.expression);case 191:return l(t,e.expression);case 193:return l(t,e.operand);case 194:return l(t,e.left)||l(t,e.operatorToken)||l(t,e.right);case 202:return l(t,e.expression)||l(t,e.type);case 203:return l(t,e.expression);case 204:return l(t,e.name);case 195:return l(t,e.condition)||l(t,e.questionToken)||l(t,e.whenTrue)||l(t,e.colonToken)||l(t,e.whenFalse);case 198:return l(t,e.expression);case 207:case 234:return c(t,n,e.statements);case 265:return c(t,n,e.statements)||l(t,e.endOfFileToken);case 208:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.declarationList);case 227:return c(t,n,e.declarations);case 210:return l(t,e.expression);case 211:return l(t,e.expression)||l(t,e.thenStatement)||l(t,e.elseStatement);case 212:return l(t,e.statement)||l(t,e.expression);case 213:return l(t,e.expression)||l(t,e.statement);case 214:return l(t,e.initializer)||l(t,e.condition)||l(t,e.incrementor)||l(t,e.statement);case 215:return l(t,e.initializer)||l(t,e.expression)||l(t,e.statement);case 216:return l(t,e.awaitModifier)||l(t,e.initializer)||l(t,e.expression)||l(t,e.statement);case 217:case 218:return l(t,e.label);case 219:return l(t,e.expression);case 220:return l(t,e.expression)||l(t,e.statement);case 221:return l(t,e.expression)||l(t,e.caseBlock);case 235:return c(t,n,e.clauses);case 257:return l(t,e.expression)||c(t,n,e.statements);case 258:return c(t,n,e.statements);case 222:return l(t,e.label)||l(t,e.statement);case 223:return l(t,e.expression);case 224:return l(t,e.tryBlock)||l(t,e.catchClause)||l(t,e.finallyBlock);case 260:return l(t,e.variableDeclaration)||l(t,e.block);case 147:return l(t,e.expression);case 229:case 199:case 230:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.name)||c(t,n,e.typeParameters)||c(t,n,e.heritageClauses)||c(t,n,e.members);case 231:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.name)||c(t,n,e.typeParameters)||l(t,e.type);case 232:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.name)||c(t,n,e.members);case 264:return l(t,e.name)||l(t,e.initializer);case 233:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.name)||l(t,e.body);case 237:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.name)||l(t,e.moduleReference);case 238:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.importClause)||l(t,e.moduleSpecifier);case 239:return l(t,e.name)||l(t,e.namedBindings);case 236:case 240:return l(t,e.name);case 241:case 245:return c(t,n,e.elements);case 244:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.exportClause)||l(t,e.moduleSpecifier);case 242:case 246:return l(t,e.propertyName)||l(t,e.name);case 243:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.expression);case 196:return l(t,e.head)||c(t,n,e.templateSpans);case 205:return l(t,e.expression)||l(t,e.literal);case 144:return l(t,e.expression);case 259:return c(t,n,e.types);case 201:return l(t,e.expression)||c(t,n,e.typeArguments);case 248:return l(t,e.expression);case 247:return c(t,n,e.decorators);case 289:return c(t,n,e.elements);case 249:return l(t,e.openingElement)||c(t,n,e.children)||l(t,e.closingElement);case 250:case 251:return l(t,e.tagName)||l(t,e.attributes);case 254:return c(t,n,e.properties);case 253:return l(t,e.name)||l(t,e.initializer);case 255:return l(t,e.expression);case 256:return l(t,e.dotDotDotToken)||l(t,e.expression);case 252:return l(t,e.tagName);case 267:case 271:case 270:case 272:return l(t,e.type);case 273:return c(t,n,e.parameters)||l(t,e.type);case 274:return l(t,e.type);case 275:return c(t,n,e.tags);case 279:case 284:return e.isNameFirst?l(t,e.name)||l(t,e.typeExpression):l(t,e.typeExpression)||l(t,e.name);case 280:case 281:return l(t,e.typeExpression);case 277:return l(t,e.class);case 282:return c(t,n,e.typeParameters);case 283:return e.typeExpression&&267===e.typeExpression.kind?l(t,e.typeExpression)||l(t,e.fullName):l(t,e.fullName)||l(t,e.typeExpression);case 285:if(e.jsDocPropertyTags)for(var o=0,r=e.jsDocPropertyTags;o<r.length;o++){l(t,r[o])}return;case 288:return l(t,e.expression)}}!function(e){e[e.None=0]="None",e[e.Yield=1]="Yield",e[e.Await=2]="Await",e[e.Type=4]="Type",e[e.RequireCompleteParameterList=8]="RequireCompleteParameterList",e[e.IgnoreMissingOpenBrace=16]="IgnoreMissingOpenBrace",e[e.JSDoc=32]="JSDoc"}(t||(t={})),e.createNode=function(t,s,a){return 265===t?new(i||(i=e.objectAllocator.getSourceFileConstructor()))(t,s,a):71===t?new(r||(r=e.objectAllocator.getIdentifierConstructor()))(t,s,a):e.isNodeKind(t)?new(n||(n=e.objectAllocator.getNodeConstructor()))(t,s,a):new(o||(o=e.objectAllocator.getTokenConstructor()))(t,s,a)},e.forEachChild=u,e.createSourceFile=function(t,n,o,r,i){void 0===r&&(r=!1),e.performance.mark("beforeParse");var a=s.parseSourceFile(t,n,o,void 0,r,i);return e.performance.mark("afterParse"),e.performance.measure("Parse","beforeParse","afterParse"),a},e.parseIsolatedEntityName=function(e,t){return s.parseIsolatedEntityName(e,t)},e.parseJsonText=function(e,t){return s.parseJsonText(e,t)},e.isExternalModule=function(e){return void 0!==e.externalModuleIndicator},e.updateSourceFile=function(e,t,n,o){var r=a.updateSourceFile(e,t,n,o);return r.flags|=524288&e.flags,r},e.parseIsolatedJSDocComment=function(e,t,n){var o=s.JSDocParser.parseIsolatedJSDocComment(e,t,n);return o&&o.jsDoc&&s.fixupParentReferences(o.jsDoc),o},e.parseJSDocTypeExpressionForTests=function(e,t,n){return s.JSDocParser.parseJSDocTypeExpressionForTests(e,t,n)},function(t){var n,o,r,i,s,a,l,c,p,d,g,h,f,_,m,y,k,b=e.createScanner(5,!0),v=10240,T=!1;function E(e){return 4===e||2===e||1===e||6===e?1:0}function S(t,s,c,u){n=e.objectAllocator.getNodeConstructor(),o=e.objectAllocator.getTokenConstructor(),r=e.objectAllocator.getIdentifierConstructor(),i=e.objectAllocator.getSourceFileConstructor(),p=t,l=c,a=[],f=0,g=e.createMap(),h=0,d=0,_=1===u||2===u||6===u?65536:0,T=!1,b.setText(p),b.setOnError(j),b.setScriptTarget(s),b.setLanguageVariant(E(u))}function C(){b.setText(""),b.setOnError(void 0),a=void 0,s=void 0,g=void 0,l=void 0,p=void 0}function x(t){var n=e.getJSDocCommentRanges(t,s.text);if(n)for(var o=0,r=n;o<r.length;o++){var i=r[o],a=k.parseJSDocComment(t,i.pos,i.end-i.pos);a&&(t.jsDoc||(t.jsDoc=[]),t.jsDoc.push(a))}return t}function B(t){var n=t;return void u(t,(function t(o){if(o.parent!==n){o.parent=n;var r=n;if(n=o,u(o,t),e.hasJSDocNodes(o))for(var i=0,s=o.jsDoc;i<s.length;i++){var a=s[i];a.parent=o,n=a,u(a,t)}n=r}}))}function A(t,n,o){var r=new i(265,0,p.length);return d++,r.text=p,r.bindDiagnostics=[],r.languageVersion=n,r.fileName=e.normalizePath(t),r.languageVariant=E(o),r.isDeclarationFile=e.fileExtensionIs(r.fileName,".d.ts"),r.scriptKind=o,r}function I(e,t){e?_|=t:_&=~t}function D(e){I(e,2048)}function N(e){I(e,4096)}function w(e){I(e,8192)}function R(e){I(e,16384)}function O(e,t){var n=e&_;if(n){I(!1,n);var o=t();return I(!0,n),o}return t()}function P(e,t){var n=e&~_;if(n){I(!0,n);var o=t();return I(!1,n),o}return t()}function L(e){return O(2048,e)}function M(e){return P(16384,e)}function F(e){return 0!=(_&e)}function U(){return F(4096)}function H(){return F(2048)}function V(){return F(8192)}function G(){return F(16384)}function W(e,t){var n=b.getTokenPos();K(n,b.getTextPos()-n,e,t)}function K(t,n,o,r){var i=e.lastOrUndefined(a);i&&t===i.start||a.push(e.createFileDiagnostic(s,t,n,o,r)),T=!0}function j(e,t){K(b.getTextPos(),t||0,e)}function z(){return b.getStartPos()}function $(){return c}function X(){return c=b.scan()}function Y(){return c=b.reScanGreaterToken()}function J(){return c=b.scanJsxIdentifier()}function q(){return c=b.scanJsxToken()}function Z(t,n){var o=c,r=a.length,i=T,s=_,l=n?b.lookAhead(t):b.tryScan(t);return e.Debug.assert(s===_),l&&!n||(c=o,a.length=r,T=i),l}function Q(e){return Z(e,!0)}function ee(e){return Z(e,!1)}function te(){return 71===$()||(116!==$()||!U())&&((121!==$()||!G())&&$()>107)}function ne(t,n,o){return void 0===o&&(o=!0),$()===t?(o&&X(),!0):(n?W(n):W(e.Diagnostics._0_expected,e.tokenToString(t)),!1)}function oe(e){return $()===e&&(X(),!0)}function re(e){if($()===e)return se()}function ie(e,t,n,o){return re(e)||de(e,t,n,o)}function se(){var e=ce($());return X(),pe(e)}function ae(){return 25===$()||(18===$()||1===$()||b.hasPrecedingLineBreak())}function le(){return ae()?(25===$()&&X(),!0):ne(25)}function ce(t,i){return d++,i>=0||(i=b.getStartPos()),e.isNodeKind(t)?new n(t,i,i):71===t?new r(t,i,i):new o(t,i,i)}function ue(e,t,n){var o=e.length,r=o>=1&&o<=4?e.slice():e;return r.pos=t,r.end=void 0===n?b.getStartPos():n,r}function pe(e,t){return e.end=void 0===t?b.getStartPos():t,_&&(e.flags|=_),T&&(T=!1,e.flags|=32768),e}function de(t,n,o,r){n?K(b.getStartPos(),0,o,r):W(o,r);var i=ce(t,b.getStartPos());return 71===t?i.escapedText="":(e.isLiteralKind(t)||e.isTemplateLiteralKind(t))&&(i.text=""),pe(i)}function ge(e){var t=g.get(e);return void 0===t&&g.set(e,t=e),t}function he(t,n){if(h++,t){var o=ce(71);return 71!==$()&&(o.originalKeywordKind=$()),o.escapedText=e.escapeLeadingUnderscores(ge(b.getTokenValue())),X(),pe(o)}return de(71,1===$(),n||e.Diagnostics.Identifier_expected)}function fe(e){return he(te(),e)}function _e(t){return he(e.tokenIsIdentifierOrKeyword($()),t)}function me(){return e.tokenIsIdentifierOrKeyword($())||9===$()||8===$()}function ye(e){if(9===$()||8===$()){var t=Ke();return t.text=ge(t.text),t}return e&&21===$()?function(){var e=ce(144);return ne(21),e.expression=L(Dt),ne(22),pe(e)}():_e()}function ke(){return ye(!0)}function be(e){return $()===e&&ee(Te)}function ve(){return X(),!b.hasPrecedingLineBreak()&&Ee()}function Te(){return 76===$()?83===X():84===$()?(X(),79===$()?Q(Se):39!==$()&&118!==$()&&17!==$()&&Ee()):79===$()?Se():115===$()?(X(),Ee()):ve()}function Ee(){return 21===$()||17===$()||39===$()||24===$()||me()}function Se(){return X(),75===$()||89===$()||109===$()||117===$()&&Q(bn)||120===$()&&Q(vn)}function Ce(t,n){if(Oe(t))return!0;switch(t){case 0:case 1:case 3:return!(25===$()&&n)&&Cn();case 2:return 73===$()||79===$();case 4:return Q(st);case 5:return Q(jn)||25===$()&&!n;case 6:return 21===$()||me();case 12:return 21===$()||39===$()||24===$()||me();case 17:return me();case 9:return 21===$()||24===$()||me();case 7:return 17===$()?Q(xe):n?te()&&!Ie():At()&&!Ie();case 8:return Rn();case 10:return 26===$()||24===$()||Rn();case 18:return te();case 11:case 15:return 26===$()||24===$()||It();case 16:return Ze();case 19:case 20:return 26===$()||mt();case 21:return no();case 22:return e.tokenIsIdentifierOrKeyword($());case 13:return e.tokenIsIdentifierOrKeyword($())||17===$();case 14:return!0}e.Debug.fail("Non-exhaustive case in 'isListElement'.")}function xe(){if(e.Debug.assert(17===$()),18===X()){var t=X();return 26===t||17===t||85===t||108===t}return!0}function Be(){return X(),te()}function Ae(){return X(),e.tokenIsIdentifierOrKeyword($())}function Ie(){return(108===$()||85===$())&&Q(De)}function De(){return X(),It()}function Ne(e){if(1===$())return!0;switch(e){case 1:case 2:case 4:case 5:case 6:case 12:case 9:case 22:return 18===$();case 3:return 18===$()||73===$()||79===$();case 7:return 17===$()||85===$()||108===$();case 8:return function(){if(ae())return!0;if(Ht($()))return!0;if(36===$())return!0;return!1}();case 18:return 29===$()||19===$()||17===$()||85===$()||108===$();case 11:return 20===$()||25===$();case 15:case 20:case 10:return 22===$();case 16:case 17:return 20===$()||22===$();case 19:return 26!==$();case 21:return 17===$()||18===$();case 13:return 29===$()||41===$();case 14:return 27===$()&&Q(lo)}}function we(e,t){var n=f;f|=1<<e;for(var o=[],r=z();!Ne(e);)if(Ce(e,!1)){var i=Re(e,t);o.push(i)}else if(Pe(e))break;return f=n,ue(o,r)}function Re(e,t){var n=Oe(e);return n?function(e){return b.setTextPos(e.end),X(),e}(n):t()}function Oe(t){if(!T&&l){var n=l.currentNode(b.getStartPos());if(!e.nodeIsMissing(n))if(!n.intersectsChange)if(!e.containsParseError(n))if((96256&n.flags)===_&&function(e,t){switch(t){case 5:return function(e){if(e)switch(e.kind){case 152:case 157:case 153:case 154:case 149:case 206:return!0;case 151:var t=e;return!(71===t.name.kind&&123===t.name.originalKeywordKind)}return!1}(e);case 2:return function(e){if(e)switch(e.kind){case 257:case 258:return!0}return!1}(e);case 0:case 1:case 3:return function(e){if(e)switch(e.kind){case 228:case 208:case 207:case 211:case 210:case 223:case 219:case 221:case 218:case 217:case 215:case 216:case 214:case 213:case 220:case 209:case 224:case 222:case 212:case 225:case 238:case 237:case 244:case 243:case 233:case 229:case 230:case 232:case 231:return!0}return!1}(e);case 6:return function(e){return 264===e.kind}(e);case 4:return function(e){if(e)switch(e.kind){case 156:case 150:case 157:case 148:case 155:return!0}return!1}(e);case 8:return function(e){if(226!==e.kind)return!1;return void 0===e.initializer}(e);case 16:return function(e){if(146!==e.kind)return!1;return void 0===e.initializer}(e);case 17:return!1}return!1}(n,t))return n}}function Pe(t){return W(function(t){switch(t){case 0:case 1:return e.Diagnostics.Declaration_or_statement_expected;case 2:return e.Diagnostics.case_or_default_expected;case 3:return e.Diagnostics.Statement_expected;case 17:case 4:return e.Diagnostics.Property_or_signature_expected;case 5:return e.Diagnostics.Unexpected_token_A_constructor_method_accessor_or_property_was_expected;case 6:return e.Diagnostics.Enum_member_expected;case 7:return e.Diagnostics.Expression_expected;case 8:return e.Diagnostics.Variable_declaration_expected;case 9:return e.Diagnostics.Property_destructuring_pattern_expected;case 10:return e.Diagnostics.Array_element_destructuring_pattern_expected;case 11:return e.Diagnostics.Argument_expression_expected;case 12:return e.Diagnostics.Property_assignment_expected;case 15:return e.Diagnostics.Expression_or_comma_expected;case 16:return e.Diagnostics.Parameter_declaration_expected;case 18:return e.Diagnostics.Type_parameter_declaration_expected;case 19:return e.Diagnostics.Type_argument_expected;case 20:return e.Diagnostics.Type_expected;case 21:return e.Diagnostics.Unexpected_token_expected;case 22:case 13:case 14:return e.Diagnostics.Identifier_expected}}(t)),!!function(){for(var e=0;e<23;e++)if(f&1<<e&&(Ce(e,!0)||Ne(e)))return!0;return!1}()||(X(),!1)}function Le(e,t,n){var o=f;f|=1<<e;for(var r=[],i=z(),s=-1;;)if(Ce(e,!1)){var a=b.getStartPos();if(r.push(Re(e,t)),s=b.getTokenPos(),oe(26))continue;if(s=-1,Ne(e))break;ne(26),n&&25===$()&&!b.hasPrecedingLineBreak()&&X(),a===b.getStartPos()&&X()}else{if(Ne(e))break;if(Pe(e))break}f=o;var l=ue(r,i);return s>=0&&(l.hasTrailingComma=!0),l}function Me(){return ue([],z())}function Fe(e,t,n,o){if(ne(n)){var r=Le(e,t);return ne(o),r}return Me()}function Ue(e,t){for(var n=e?_e(t):fe(t),o=b.getStartPos();oe(23);){if(27===$()){n.jsdocDotPos=o;break}o=b.getStartPos(),n=He(n,Ve(e))}return n}function He(e,t){var n=ce(143,e.pos);return n.left=e,n.right=t,pe(n)}function Ve(t){if(b.hasPrecedingLineBreak()&&e.tokenIsIdentifierOrKeyword($())&&Q(kn))return de(71,!0,e.Diagnostics.Identifier_expected);return t?_e():fe()}function Ge(){var t,n=ce(196);n.head=(t=je($()),e.Debug.assert(14===t.kind,"Template head has wrong token kind"),t),e.Debug.assert(14===n.head.kind,"Template head has wrong token kind");var o=[],r=z();do{o.push(We())}while(15===e.lastOrUndefined(o).literal.kind);return n.templateSpans=ue(o,r),pe(n)}function We(){var t,n,o=ce(205);return o.expression=L(Dt),18===$()?(c=b.reScanTemplateToken(),n=je($()),e.Debug.assert(15===n.kind||16===n.kind,"Template fragment has wrong token kind"),t=n):t=ie(16,!1,e.Diagnostics._0_expected,e.tokenToString(18)),o.literal=t,pe(o)}function Ke(){return je($())}function je(e){var t=ce(e),n=b.getTokenValue();return t.text=n,b.hasExtendedUnicodeEscape()&&(t.hasExtendedUnicodeEscape=!0),b.isUnterminated()&&(t.isUnterminated=!0),8===t.kind&&(t.numericLiteralFlags=b.getNumericLiteralFlags()),X(),pe(t),t}function ze(){var t=ce(159);return t.typeName=Ue(!0,e.Diagnostics.Type_expected),b.hasPrecedingLineBreak()||27!==$()||(t.typeArguments=Fe(19,Ct,27,29)),pe(t)}function $e(){var e=ce(146);return 99!==$()&&94!==$()||(e.name=_e(),ne(56)),e.type=Ct(),pe(e)}function Xe(e){var t=ce(e);return X(),t.type=_t(),pe(t)}function Ye(){var e=ce(145);return e.name=fe(),oe(85)&&(mt()||!It()?e.constraint=Ct():e.expression=jt()),oe(58)&&(e.default=Ct()),pe(e)}function Je(){if(27===$())return Fe(18,Ye,27,29)}function qe(){if(oe(56))return Ct()}function Ze(){return 24===$()||Rn()||e.isModifierKind($())||57===$()||mt(!0)}function Qe(t){var n=ce(146);return 99===$()?(n.name=he(!0),n.type=qe(),pe(n)):(n.decorators=zn(),n.modifiers=$n(),n.dotDotDotToken=re(24),n.name=On(),0===e.getFullWidth(n.name)&&!e.hasModifiers(n)&&e.isModifierKind($())&&X(),n.questionToken=re(55),n.type=qe(),n.initializer=Nt(!0,t),x(pe(n)))}function et(t,n,o){32&n||(o.typeParameters=Je()),o.parameters=function(e){if(ne(19)){var t=U(),n=G();N(!!(1&e)),R(!!(2&e));var o=Le(16,32&e?$e:function(){return Qe(!!(8&e))});if(N(t),R(n),!ne(20)&&8&e)return;return o}return 8&e?void 0:Me()}(n),o.type=function(t,n){return function(t,n){if(36===t)return ne(t),!0;if(oe(56))return!0;if(n&&36===$())return W(e.Diagnostics._0_expected,e.tokenToString(56)),X(),!0;return!1}(t,n)?function(){var e=te()&&ee(St),t=Ct();if(e){var n=ce(158,e.pos);return n.parameterName=e,n.type=t,pe(n)}return t}():void 0}(t,!!(4&n))}function tt(){oe(26)||le()}function nt(e){var t=ce(e);return 156===e&&ne(94),et(56,4,t),tt(),x(pe(t))}function ot(){return 21===$()&&Q(rt)}function rt(){if(X(),24===$()||22===$())return!0;if(e.isModifierKind($())){if(X(),te())return!0}else{if(!te())return!1;X()}return 56===$()||26===$()||55===$()&&(X(),56===$()||26===$()||22===$())}function it(e,t,n){var o=ce(157,e);return o.decorators=t,o.modifiers=n,o.parameters=Fe(16,Qe,21,22),o.type=Bt(),tt(),x(pe(o))}function st(){if(19===$()||27===$())return!0;for(var t;e.isModifierKind($());)t=!0,X();return 21===$()||(me()&&(t=!0,X()),!!t&&(19===$()||27===$()||55===$()||56===$()||26===$()||ae()))}function at(){if(19===$()||27===$())return nt(155);if(94===$()&&Q(lt))return nt(156);var e=z(),t=$n();return ot()?it(e,void 0,t):function(e,t){var n=ke(),o=re(55);if(19===$()||27===$()){var r=ce(150,e);return r.modifiers=t,r.name=n,r.questionToken=o,et(56,4,r),tt(),x(pe(r))}var i=ce(148,e);return i.modifiers=t,i.name=n,i.questionToken=o,i.type=Bt(),58===$()&&(i.initializer=Gn()),tt(),x(pe(i))}(e,t)}function lt(){return X(),19===$()||27===$()}function ct(){var e;return ne(17)?(e=we(4,at),ne(18)):e=Me(),e}function ut(){return X(),131===$()&&X(),21===$()&&Be()&&92===X()}function pt(){var e=ce(172);return ne(17),e.readonlyToken=re(131),ne(21),e.typeParameter=function(){var e=ce(145);return e.name=fe(),ne(92),e.constraint=Ct(),pe(e)}(),ne(22),e.questionToken=re(55),e.type=Bt(),le(),ne(18),pe(e)}function dt(e){var t=ce(e);return 161===e&&ne(94),et(36,4,t),x(pe(t))}function gt(){var e=se();return 23===$()?void 0:e}function ht(e){var t,n=ce(173);e&&((t=ce(192)).operator=38,X());var o=101===$()||86===$()?se():je($());return e&&(t.operand=o,pe(t),o=t),n.literal=o,pe(n)}function ft(){return 8===X()}function _t(){switch($()){case 119:case 136:case 133:case 122:case 137:case 139:case 130:case 134:return ee(gt)||ze();case 39:return n=ce(268),X(),pe(n);case 55:return function(){var e,t=b.getStartPos();return X(),26===$()||18===$()||20===$()||29===$()||58===$()||49===$()?pe(e=ce(269,t)):((e=ce(270,t)).type=Ct(),pe(e))}();case 89:return function(){if(Q(ao)){var e=ce(273);return X(),et(56,36,e),x(pe(e))}var t=ce(159);return t.typeName=_e(),pe(t)}();case 24:return Xe(274);case 51:return Xe(271);case 13:case 9:case 8:case 101:case 86:return ht();case 38:return Q(ft)?ht(!0):ze();case 105:case 95:return se();case 99:var e=(t=ce(169),X(),pe(t));return 126!==$()||b.hasPrecedingLineBreak()?e:function(e){X();var t=ce(158,e.pos);return t.parameterName=e,t.type=Ct(),pe(t)}(e);case 103:return function(){var e=ce(162);return ne(103),e.exprName=Ue(!0),pe(e)}();case 17:return Q(ut)?pt():function(){var e=ce(163);return e.members=ct(),pe(e)}();case 21:return function(){var e=ce(165);return e.elementTypes=Fe(20,Ct,21,22),pe(e)}();case 19:return function(){var e=ce(168);return ne(19),e.type=Ct(),ne(20),pe(e)}();default:return ze()}var t,n}function mt(e){switch($()){case 119:case 136:case 133:case 122:case 137:case 105:case 139:case 95:case 99:case 103:case 130:case 17:case 21:case 27:case 49:case 48:case 94:case 9:case 8:case 101:case 86:case 134:case 39:case 55:case 51:case 24:return!0;case 38:return!e&&Q(ft);case 19:return!e&&Q(yt);default:return te()}}function yt(){return X(),20===$()||Ze()||mt()}function kt(e,t){X();var n=ce(e,t.pos);return n.type=t,pe(n)}function bt(){switch($()){case 127:return e=127,t=ce(170),ne(e),t.operator=e,t.type=bt(),pe(t)}var e,t;return function(){for(var e=_t();!b.hasPrecedingLineBreak();)switch($()){case 58:if(!(1048576&_))return e;e=kt(272,e);break;case 51:e=kt(271,e);break;case 55:e=kt(270,e);break;case 21:var t;ne(21),mt()?((t=ce(171,e.pos)).objectType=e,t.indexType=Ct(),ne(22),e=pe(t)):((t=ce(164,e.pos)).elementType=e,ne(22),e=pe(t));break;default:return e}return e}()}function vt(e,t,n){oe(n);var o=t();if($()===n){for(var r=[o];oe(n);)r.push(t());var i=ce(e,o.pos);i.types=ue(r,o.pos),o=pe(i)}return o}function Tt(){return vt(167,bt,48)}function Et(){if(X(),20===$()||24===$())return!0;if(function(){if(e.isModifierKind($())&&$n(),te()||99===$())return X(),!0;if(21===$()||17===$()){var t=a.length;return On(),t===a.length}return!1}()){if(56===$()||26===$()||55===$()||58===$())return!0;if(20===$()&&(X(),36===$()))return!0}return!1}function St(){var e=fe();if(126===$()&&!b.hasPrecedingLineBreak())return X(),e}function Ct(){return O(20480,xt)}function xt(){return 27===$()||19===$()&&Q(Et)?dt(160):94===$()?dt(161):vt(166,Tt,49)}function Bt(){return oe(56)?Ct():void 0}function At(){switch($()){case 99:case 97:case 95:case 101:case 86:case 8:case 9:case 13:case 14:case 19:case 21:case 17:case 89:case 75:case 94:case 41:case 63:case 71:return!0;case 91:return Q(lt);default:return te()}}function It(){if(At())return!0;switch($()){case 37:case 38:case 52:case 51:case 80:case 103:case 105:case 43:case 44:case 27:case 121:case 116:return!0;default:return!!function(){if(H()&&92===$())return!1;return Gt()>0}()||te()}}function Dt(){var e=V();e&&w(!1);for(var t,n=wt();t=re(26);)n=Wt(n,t,wt());return e&&w(!0),n}function Nt(t,n){if(58!==$()){if(b.hasPrecedingLineBreak()||t&&17===$()||!It())return;if(t&&n){var o=de(71,!0,e.Diagnostics._0_expected,"=");return o.escapedText="= not found",o}}return ne(58),wt()}function wt(){if(function(){if(116===$())return!!U()||Q(Tn);return!1}())return t=ce(197),X(),b.hasPrecedingLineBreak()||39!==$()&&!It()||(t.asteriskToken=re(39),t.expression=wt()),pe(t);var t,n=function(){var t=function(){if(19===$()||27===$()||120===$())return Q(Ot);if(36===$())return 1;return 0}();if(0===t)return;var n=1===t?Mt(!0):ee(Pt);if(!n)return;var o=e.hasModifier(n,256),r=$();return n.equalsGreaterThanToken=ie(36,!1,e.Diagnostics._0_expected,"=>"),n.body=36===r||17===r?Ft(o):fe(),x(pe(n))}()||function(){if(120===$()&&1===Q(Lt)){var e=Xn();return Rt(Ut(0),e)}return}();if(n)return n;var o=Ut(0);return 71===o.kind&&36===$()?Rt(o):e.isLeftHandSideExpression(o)&&e.isAssignmentOperator(Y())?Wt(o,se(),wt()):function(t){var n=re(55);if(!n)return t;var o=ce(195,t.pos);return o.condition=t,o.questionToken=n,o.whenTrue=O(v,wt),o.colonToken=ie(56,!1,e.Diagnostics._0_expected,e.tokenToString(56)),o.whenFalse=wt(),pe(o)}(o)}function Rt(t,n){var o;e.Debug.assert(36===$(),"parseSimpleArrowFunctionExpression should only have been called if we had a =>"),n?(o=ce(187,n.pos)).modifiers=n:o=ce(187,t.pos);var r=ce(146,t.pos);return r.name=t,pe(r),o.parameters=ue([r],r.pos,r.end),o.equalsGreaterThanToken=ie(36,!1,e.Diagnostics._0_expected,"=>"),o.body=Ft(!!n),x(pe(o))}function Ot(){if(120===$()){if(X(),b.hasPrecedingLineBreak())return 0;if(19!==$()&&27!==$())return 0}var t=$(),n=X();if(19===t){if(20===n)switch(X()){case 36:case 56:case 17:return 1;default:return 0}return 21===n||17===n?2:24===n?1:te()?56===X()?1:2:0}return e.Debug.assert(27===t),te()?1===s.languageVariant?Q((function(){var e=X();if(85===e)switch(X()){case 58:case 29:return!1;default:return!0}else if(26===e)return!0;return!1}))?1:0:2:0}function Pt(){return Mt(!1)}function Lt(){if(120===$()){if(X(),b.hasPrecedingLineBreak()||36===$())return 0;var e=Ut(0);if(!b.hasPrecedingLineBreak()&&71===e.kind&&36===$())return 1}return 0}function Mt(t){var n=ce(187);if(n.modifiers=Xn(),et(56,(e.hasModifier(n,256)?2:0)|(t?0:8),n),n.parameters&&(t||!(36!==$()&&17!==$()||e.find(n.parameters,(function(t){return t.initializer&&e.isIdentifier(t.initializer)&&"= not found"===t.initializer.escapedText})))))return n}function Ft(e){return 17===$()?hn(e?2:0):25===$()||89===$()||75===$()||!Cn()||17!==$()&&89!==$()&&75!==$()&&57!==$()&&It()?e?M(wt):O(16384,wt):hn(16|(e?2:0))}function Ut(e){return Vt(e,jt())}function Ht(e){return 92===e||142===e}function Vt(e,t){for(;;){Y();var n=Gt();if(!(40===$()?n>=e:n>e))break;if(92===$()&&H())break;if(118===$()){if(b.hasPrecedingLineBreak())break;X(),t=Kt(t,Ct())}else t=Wt(t,se(),Ut(n))}return t}function Gt(){switch($()){case 54:return 1;case 53:return 2;case 49:return 3;case 50:return 4;case 48:return 5;case 32:case 33:case 34:case 35:return 6;case 27:case 29:case 30:case 31:case 93:case 92:case 118:return 7;case 45:case 46:case 47:return 8;case 37:case 38:return 9;case 39:case 41:case 42:return 10;case 40:return 11}return-1}function Wt(e,t,n){var o=ce(194,e.pos);return o.left=e,o.operatorToken=t,o.right=n,pe(o)}function Kt(e,t){var n=ce(202,e.pos);return n.expression=e,n.type=t,pe(n)}function jt(){if(function(){switch($()){case 37:case 38:case 52:case 51:case 80:case 103:case 105:case 121:return!1;case 27:if(1!==s.languageVariant)return!1;default:return!0}}()){var t=$t();return 40===$()?Vt(Gt(),t):t}var n=$(),o=zt();if(40===$()){var r=e.skipTrivia(p,o.pos);184===o.kind?K(r,o.end-r,e.Diagnostics.A_type_assertion_expression_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Consider_enclosing_the_expression_in_parentheses):K(r,o.end-r,e.Diagnostics.An_unary_expression_with_the_0_operator_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Consider_enclosing_the_expression_in_parentheses,e.tokenToString(n))}return o}function zt(){switch($()){case 37:case 38:case 52:case 51:return(e=ce(192)).operator=$(),X(),e.operand=zt(),pe(e);case 80:return function(){var e=ce(188);return X(),e.expression=zt(),pe(e)}();case 103:return function(){var e=ce(189);return X(),e.expression=zt(),pe(e)}();case 105:return function(){var e=ce(190);return X(),e.expression=zt(),pe(e)}();case 27:return function(){var e=ce(184);return ne(27),e.type=Ct(),ne(29),e.expression=zt(),pe(e)}();case 121:if(121===$()&&(G()||Q(Tn)))return function(){var e=ce(191);return X(),e.expression=zt(),pe(e)}();default:return $t()}var e}function $t(){if(43===$()||44===$())return(t=ce(192)).operator=$(),X(),t.operand=Xt(),pe(t);if(1===s.languageVariant&&27===$()&&Q(Ae))return qt(!0);var t,n=Xt();return e.Debug.assert(e.isLeftHandSideExpression(n)),43!==$()&&44!==$()||b.hasPrecedingLineBreak()?n:((t=ce(193,n.pos)).operand=n,t.operator=$(),X(),pe(t))}function Xt(){var t;return 91===$()&&Q(lt)?(s.flags|=524288,t=se()):t=97===$()?function(){var t=se();if(19===$()||23===$()||21===$())return t;var n=ce(179,t.pos);return n.expression=t,ie(23,!1,e.Diagnostics.super_must_be_followed_by_an_argument_list_or_member_access),n.name=Ve(!0),pe(n)}():Yt(),function(e){for(;;)if(e=nn(e),27!==$()){if(19!==$())return e;(t=ce(181,e.pos)).expression=e,t.arguments=on(),e=pe(t)}else{var t,n=ee(rn);if(!n)return e;(t=ce(181,e.pos)).expression=e,t.typeArguments=n,t.arguments=on(),e=pe(t)}}(t)}function Yt(){return nn(function(){switch($()){case 8:case 9:case 13:return Ke();case 99:case 97:case 95:case 101:case 86:return se();case 19:return t=ce(185),ne(19),t.expression=L(Dt),ne(20),x(pe(t));case 21:return function(){var e=ce(177);ne(21),b.hasPrecedingLineBreak()&&(e.multiLine=!0);return e.elements=Le(15,sn),ne(22),pe(e)}();case 17:return un();case 120:if(!Q(vn))break;return pn();case 75:return qn(b.getStartPos(),void 0,void 0,199);case 89:return pn();case 94:return function(){var e=b.getStartPos();if(ne(94),oe(23)){var t=ce(204,e);return t.keywordToken=94,t.name=_e(),pe(t)}var n=ce(182,e);n.expression=Yt(),n.typeArguments=ee(rn),(n.typeArguments||19===$())&&(n.arguments=on());return pe(n)}();case 41:case 63:if(12===(c=b.reScanSlashToken()))return Ke();break;case 14:return Ge()}var t;return fe(e.Diagnostics.Expression_expected)}())}function Jt(e,t){return e.kind===t.kind&&(71===e.kind?e.escapedText===t.escapedText:99===e.kind||e.name.escapedText===t.name.escapedText&&Jt(e.expression,t.expression))}function qt(t){var n,o=function(e){var t=b.getStartPos();ne(27);var n,o=Qt(),r=(i=ce(254),i.properties=we(13,tn),pe(i));var i;29===$()?(n=ce(251,t),q()):(ne(41),e?ne(29):(ne(29,void 0,!1),q()),n=ce(250,t));return n.tagName=o,n.attributes=r,pe(n)}(t);if(251===o.kind){var r=ce(249,o.pos);r.openingElement=o,r.children=function(t){var n=[],o=z(),r=f;f|=16384;for(;c=b.reScanJsxToken(),28!==$();){if(1===$()){K(t.pos,t.end-t.pos,e.Diagnostics.JSX_element_0_has_no_corresponding_closing_tag,e.getTextOfNodeFromSourceText(p,t));break}if(7===$())break;var i=Zt();i&&n.push(i)}return f=r,ue(n,o)}(r.openingElement.tagName),r.closingElement=function(e){var t=ce(252);ne(28),t.tagName=Qt(),e?ne(29):(ne(29,void 0,!1),q());return pe(t)}(t),Jt(r.openingElement.tagName,r.closingElement.tagName)||K(r.closingElement.pos,r.closingElement.end-r.closingElement.pos,e.Diagnostics.Expected_corresponding_JSX_closing_tag_for_0,e.getTextOfNodeFromSourceText(p,r.openingElement.tagName)),n=pe(r)}else e.Debug.assert(250===o.kind),n=o;if(t&&27===$()){var i=ee((function(){return qt(!0)}));if(i){W(e.Diagnostics.JSX_expressions_must_have_one_parent_element);var s=ce(194,n.pos);return s.end=i.end,s.left=n,s.right=i,s.operatorToken=de(26,!1,void 0),s.operatorToken.pos=s.operatorToken.end=s.right.pos,s}}return n}function Zt(){switch($()){case 10:case 11:return(t=ce(10,b.getStartPos())).containsOnlyWhiteSpaces=11===c,c=b.scanJsxToken(),pe(t);case 17:return en(!1);case 27:return qt(!1)}var t;e.Debug.fail("Unknown JSX child kind "+$())}function Qt(){J();for(var e=99===$()?se():_e();oe(23);){var t=ce(179,e.pos);t.expression=e,t.name=Ve(!0),e=pe(t)}return e}function en(e){var t=ce(256);return ne(17),18!==$()&&(t.dotDotDotToken=re(24),t.expression=wt()),e?ne(18):(ne(18,void 0,!1),q()),pe(t)}function tn(){if(17===$())return function(){var e=ce(255);return ne(17),ne(24),e.expression=Dt(),ne(18),pe(e)}();J();var e=ce(253);if(e.name=_e(),58===$())switch(c=b.scanJsxAttributeValue()){case 9:e.initializer=Ke();break;default:e.initializer=en(!0)}return pe(e)}function nn(e){for(;;){if(re(23)){var t=ce(179,e.pos);t.expression=e,t.name=Ve(!0),e=pe(t)}else if(51!==$()||b.hasPrecedingLineBreak())if(V()||!oe(21)){if(13!==$()&&14!==$())return e;var n=ce(183,e.pos);n.tag=e,n.template=13===$()?Ke():Ge(),e=pe(n)}else{var o=ce(180,e.pos);if(o.expression=e,22!==$()&&(o.argumentExpression=L(Dt),9===o.argumentExpression.kind||8===o.argumentExpression.kind)){var r=o.argumentExpression;r.text=ge(r.text)}ne(22),e=pe(o)}else{X();var i=ce(203,e.pos);i.expression=e,e=pe(i)}}}function on(){ne(19);var e=Le(11,an);return ne(20),e}function rn(){if(oe(27)){var e=Le(19,Ct);if(ne(29))return e&&function(){switch($()){case 19:case 23:case 20:case 22:case 56:case 25:case 55:case 32:case 34:case 33:case 35:case 53:case 54:case 50:case 48:case 49:case 18:case 1:return!0;case 26:case 17:default:return!1}}()?e:void 0}}function sn(){return 24===$()?(e=ce(198),ne(24),e.expression=wt(),pe(e)):26===$()?ce(200):wt();var e}function an(){return O(v,sn)}function ln(e,t,n){return be(125)?Wn(153,e,t,n):be(135)?Wn(154,e,t,n):void 0}function cn(){var e=b.getStartPos();if(re(24)){var t=ce(263,e);return t.expression=wt(),x(pe(t))}var n=zn(),o=$n(),r=ln(e,n,o);if(r)return r;var i=re(39),s=te(),a=ke(),l=re(55);if(i||19===$()||27===$())return Hn(e,n,o,i,a,l);if(s&&(26===$()||18===$()||58===$())){var c=ce(262,e);c.name=a,c.questionToken=l;var u=re(58);return u&&(c.equalsToken=u,c.objectAssignmentInitializer=L(wt)),x(pe(c))}var p=ce(261,e);return p.modifiers=o,p.name=a,p.questionToken=l,ne(56),p.initializer=L(wt),x(pe(p))}function un(){var e=ce(178);return ne(17),b.hasPrecedingLineBreak()&&(e.multiLine=!0),e.properties=Le(12,cn,!0),ne(18),pe(e)}function pn(){var t=V();t&&w(!1);var n=ce(186);n.modifiers=$n(),ne(89),n.asteriskToken=re(39);var o=n.asteriskToken?1:0,r=e.hasModifier(n,256)?2:0;return n.name=o&&r?P(20480,dn):o?function(e){return P(4096,e)}(dn):r?M(dn):dn(),et(56,o|r,n),n.body=hn(o|r),t&&w(!0),x(pe(n))}function dn(){return te()?fe():void 0}function gn(e,t){var n=ce(207);return ne(17,t)||e?(b.hasPrecedingLineBreak()&&(n.multiLine=!0),n.statements=we(1,Bn),ne(18)):n.statements=Me(),pe(n)}function hn(e,t){var n=U();N(!!(1&e));var o=G();R(!!(2&e));var r=V();r&&w(!1);var i=gn(!!(16&e),t);return r&&w(!0),N(n),R(o),i}function fn(){var e=z();ne(88);var t=re(121);ne(19);var n,o=void 0;if(25!==$()&&(o=104===$()||110===$()||76===$()?Ln(!0):P(2048,Dt)),t?ne(142):oe(142)){var r=ce(216,e);r.awaitModifier=t,r.initializer=o,r.expression=L(wt),ne(20),n=r}else if(oe(92)){var i=ce(215,e);i.initializer=o,i.expression=L(Dt),ne(20),n=i}else{var s=ce(214,e);s.initializer=o,ne(25),25!==$()&&20!==$()&&(s.condition=L(Dt)),ne(25),20!==$()&&(s.incrementor=L(Dt)),ne(20),n=s}return n.statement=Bn(),pe(n)}function _n(e){var t=ce(e);return ne(218===e?72:77),ae()||(t.label=fe()),le(),pe(t)}function mn(){return 73===$()?(e=ce(257),ne(73),e.expression=L(Dt),ne(56),e.statements=we(3,Bn),pe(e)):function(){var e=ce(258);return ne(79),ne(56),e.statements=we(3,Bn),pe(e)}();var e}function yn(){var e=ce(224);return ne(102),e.tryBlock=gn(!1),e.catchClause=74===$()?function(){var e=ce(260);ne(74),oe(19)?(e.variableDeclaration=Pn(),ne(20)):e.variableDeclaration=void 0;return e.block=gn(!1),pe(e)}():void 0,e.catchClause&&87!==$()||(ne(87),e.finallyBlock=gn(!1)),pe(e)}function kn(){return X(),e.tokenIsIdentifierOrKeyword($())&&!b.hasPrecedingLineBreak()}function bn(){return X(),75===$()&&!b.hasPrecedingLineBreak()}function vn(){return X(),89===$()&&!b.hasPrecedingLineBreak()}function Tn(){return X(),(e.tokenIsIdentifierOrKeyword($())||8===$()||9===$())&&!b.hasPrecedingLineBreak()}function En(){for(;;)switch($()){case 104:case 110:case 76:case 89:case 75:case 83:return!0;case 109:case 138:return X(),!b.hasPrecedingLineBreak()&&te();case 128:case 129:return In();case 117:case 120:case 124:case 112:case 113:case 114:case 131:if(X(),b.hasPrecedingLineBreak())return!1;continue;case 141:return X(),17===$()||71===$()||84===$();case 91:return X(),9===$()||39===$()||17===$()||e.tokenIsIdentifierOrKeyword($());case 84:if(X(),58===$()||39===$()||17===$()||79===$()||118===$())return!0;continue;case 115:X();continue;default:return!1}}function Sn(){return Q(En)}function Cn(){switch($()){case 57:case 25:case 17:case 104:case 110:case 89:case 75:case 83:case 90:case 81:case 106:case 88:case 77:case 72:case 96:case 107:case 98:case 100:case 102:case 78:case 74:case 87:return!0;case 91:return Sn()||Q(lt);case 76:case 84:return Sn();case 120:case 124:case 109:case 128:case 129:case 138:case 141:return!0;case 114:case 112:case 113:case 115:case 131:return Sn()||!Q(kn);default:return It()}}function xn(){return X(),te()||17===$()||21===$()}function Bn(){switch($()){case 25:return e=ce(209),ne(25),pe(e);case 17:return gn(!1);case 104:return Fn(b.getStartPos(),void 0,void 0);case 110:if(Q(xn))return Fn(b.getStartPos(),void 0,void 0);break;case 89:return Un(b.getStartPos(),void 0,void 0);case 75:return Jn(b.getStartPos(),void 0,void 0);case 90:return function(){var e=ce(211);return ne(90),ne(19),e.expression=L(Dt),ne(20),e.thenStatement=Bn(),e.elseStatement=oe(82)?Bn():void 0,pe(e)}();case 81:return function(){var e=ce(212);return ne(81),e.statement=Bn(),ne(106),ne(19),e.expression=L(Dt),ne(20),oe(25),pe(e)}();case 106:return function(){var e=ce(213);return ne(106),ne(19),e.expression=L(Dt),ne(20),e.statement=Bn(),pe(e)}();case 88:return fn();case 77:return _n(217);case 72:return _n(218);case 96:return function(){var e=ce(219);return ne(96),ae()||(e.expression=L(Dt)),le(),pe(e)}();case 107:return function(){var e=ce(220);return ne(107),ne(19),e.expression=L(Dt),ne(20),e.statement=Bn(),pe(e)}();case 98:return function(){var e=ce(221);ne(98),ne(19),e.expression=L(Dt),ne(20);var t=ce(235,b.getStartPos());return ne(17),t.clauses=we(2,mn),ne(18),e.caseBlock=pe(t),pe(e)}();case 100:return function(){var e=ce(223);return ne(100),e.expression=b.hasPrecedingLineBreak()?void 0:L(Dt),le(),pe(e)}();case 102:case 74:case 87:return yn();case 78:return function(){var e=ce(225);return ne(78),le(),pe(e)}();case 57:return An();case 120:case 109:case 138:case 128:case 129:case 124:case 76:case 83:case 84:case 91:case 112:case 113:case 114:case 117:case 115:case 131:case 141:if(Sn())return An()}var e;return function(){var e=b.getStartPos(),t=L(Dt);if(71===t.kind&&oe(56)){var n=ce(222,e);return n.label=t,n.statement=Bn(),x(pe(n))}var o=ce(210,e);return o.expression=t,le(),x(pe(o))}()}function An(){var t=z(),n=zn(),o=$n();switch($()){case 104:case 110:case 76:return Fn(t,n,o);case 89:return Un(t,n,o);case 75:return Jn(t,n,o);case 109:return function(e,t,n){var o=ce(230,e);return o.decorators=t,o.modifiers=n,ne(109),o.name=fe(),o.typeParameters=Je(),o.heritageClauses=Zn(),o.members=ct(),x(pe(o))}(t,n,o);case 138:return function(e,t,n){var o=ce(231,e);return o.decorators=t,o.modifiers=n,ne(138),o.name=fe(),o.typeParameters=Je(),ne(58),o.type=Ct(),le(),x(pe(o))}(t,n,o);case 83:return function(e,t,n){var o=ce(232,e);o.decorators=t,o.modifiers=n,ne(83),o.name=fe(),ne(17)?(o.members=Le(6,oo),ne(18)):o.members=Me();return x(pe(o))}(t,n,o);case 141:case 128:case 129:return function(e,t,n){var o=0;if(141===$())return so(e,t,n);if(oe(129))o|=16;else if(ne(128),9===$())return so(e,t,n);return io(e,t,n,o)}(t,n,o);case 91:return function(e,t,n){ne(91);var o,r=b.getStartPos();if(te()&&(o=fe(),26!==$()&&140!==$()))return function(e,t,n,o){var r=ce(237,e);return r.decorators=t,r.modifiers=n,r.name=o,ne(58),r.moduleReference=function(){return 132===$()&&Q(ao)?function(){var e=ce(248);return ne(132),ne(19),e.expression=co(),ne(20),pe(e)}():Ue(!1)}(),le(),x(pe(r))}(e,t,n,o);var i=ce(238,e);i.decorators=t,i.modifiers=n,(o||39===$()||17===$())&&(i.importClause=function(e,t){var n=ce(239,t);e&&(n.name=e);n.name&&!oe(26)||(n.namedBindings=39===$()?(o=ce(240),ne(39),ne(118),o.name=fe(),pe(o)):uo(241));var o;return pe(n)}(o,r),ne(140));return i.moduleSpecifier=co(),le(),pe(i)}(t,n,o);case 84:switch(X(),$()){case 79:case 58:return function(e,t,n){var o=ce(243,e);o.decorators=t,o.modifiers=n,oe(58)?o.isExportEquals=!0:ne(79);return o.expression=wt(),le(),pe(o)}(t,n,o);case 118:return function(e,t,n){var o=ce(236,e);return o.decorators=t,o.modifiers=n,ne(118),ne(129),o.name=fe(),le(),pe(o)}(t,n,o);default:return function(e,t,n){var o=ce(244,e);o.decorators=t,o.modifiers=n,oe(39)?(ne(140),o.moduleSpecifier=co()):(o.exportClause=uo(245),(140===$()||9===$()&&!b.hasPrecedingLineBreak())&&(ne(140),o.moduleSpecifier=co()));return le(),pe(o)}(t,n,o)}default:if(n||o){var r=de(247,!0,e.Diagnostics.Declaration_expected);return r.pos=t,r.decorators=n,r.modifiers=o,pe(r)}}}function In(){return X(),!b.hasPrecedingLineBreak()&&(te()||9===$())}function Dn(e,t){if(17===$()||!ae())return hn(e,t);le()}function Nn(){if(26===$())return ce(200);var e=ce(176);return e.dotDotDotToken=re(24),e.name=On(),e.initializer=Nt(!1),pe(e)}function wn(){var e=ce(176);e.dotDotDotToken=re(24);var t=te(),n=ke();return t&&56!==$()?e.name=n:(ne(56),e.propertyName=n,e.name=On()),e.initializer=Nt(!1),pe(e)}function Rn(){return 17===$()||21===$()||te()}function On(){return 21===$()?(e=ce(175),ne(21),e.elements=Le(10,Nn),ne(22),pe(e)):17===$()?function(){var e=ce(174);return ne(17),e.elements=Le(9,wn),ne(18),pe(e)}():fe();var e}function Pn(){var e=ce(226);return e.name=On(),e.type=Bt(),Ht($())||(e.initializer=Gn()),pe(e)}function Ln(t){var n=ce(227);switch($()){case 104:break;case 110:n.flags|=1;break;case 76:n.flags|=2;break;default:e.Debug.fail()}if(X(),142===$()&&Q(Mn))n.declarations=Me();else{var o=H();D(t),n.declarations=Le(8,Pn),D(o)}return pe(n)}function Mn(){return Be()&&20===X()}function Fn(e,t,n){var o=ce(208,e);return o.decorators=t,o.modifiers=n,o.declarationList=Ln(!1),le(),x(pe(o))}function Un(t,n,o){var r=ce(228,t);r.decorators=n,r.modifiers=o,ne(89),r.asteriskToken=re(39),r.name=e.hasModifier(r,512)?dn():fe();var i=r.asteriskToken?1:0,s=e.hasModifier(r,256)?2:0;return et(56,i|s,r),r.body=Dn(i|s,e.Diagnostics.or_expected),x(pe(r))}function Hn(t,n,o,r,i,s,a){var l=ce(151,t);l.decorators=n,l.modifiers=o,l.asteriskToken=r,l.name=i,l.questionToken=s;var c=r?1:0,u=e.hasModifier(l,256)?2:0;return et(56,c|u,l),l.body=Dn(c|u,a),x(pe(l))}function Vn(t,n,o,r,i){var s=ce(149,t);return s.decorators=n,s.modifiers=o,s.name=r,s.questionToken=i,s.type=Bt(),s.initializer=e.hasModifier(s,32)?L(Gn):O(6144,Gn),le(),x(pe(s))}function Gn(){return Nt(!1)}function Wn(e,t,n,o){var r=ce(e,t);return r.decorators=n,r.modifiers=o,r.name=ke(),et(56,0,r),r.body=Dn(0),x(pe(r))}function Kn(e){switch(e){case 114:case 112:case 113:case 115:case 131:return!0;default:return!1}}function jn(){var t;if(57===$())return!0;for(;e.isModifierKind($());){if(Kn(t=$()))return!0;X()}if(39===$())return!0;if(me()&&(t=$(),X()),21===$())return!0;if(void 0!==t){if(!e.isKeyword(t)||135===t||125===t)return!0;switch($()){case 19:case 27:case 56:case 58:case 55:return!0;default:return ae()}}return!1}function zn(){for(var e,t=z();;){var n=z();if(!oe(57))break;var o=ce(147,n);o.expression=P(8192,Xt),pe(o),(e||(e=[])).push(o)}return e&&ue(e,t)}function $n(t){for(var n,o=z();;){var r=b.getStartPos(),i=$();if(76===$()&&t){if(!ee(ve))break}else if(!e.isModifierKind($())||!ee(Te))break;var s=pe(ce(i,r));(n||(n=[])).push(s)}return n&&ue(n,o)}function Xn(){var e;if(120===$()){var t=b.getStartPos(),n=$();X(),e=ue([pe(ce(n,t))],t)}return e}function Yn(){if(25===$()){var t=ce(206);return X(),pe(t)}var n=z(),o=zn(),r=$n(!0),i=ln(n,o,r);return i||(123===$()?function(t,n,o){var r=ce(152,t);return r.decorators=n,r.modifiers=o,ne(123),et(56,0,r),r.body=Dn(0,e.Diagnostics.or_expected),x(pe(r))}(n,o,r):ot()?it(n,o,r):e.tokenIsIdentifierOrKeyword($())||9===$()||8===$()||39===$()||21===$()?function(t,n,o){var r=re(39),i=ke(),s=re(55);return r||19===$()||27===$()?Hn(t,n,o,r,i,s,e.Diagnostics.or_expected):Vn(t,n,o,i,s)}(n,o,r):o||r?Vn(n,o,r,de(71,!0,e.Diagnostics.Declaration_expected),void 0):void e.Debug.fail("Should not have attempted to parse class member declaration."))}function Jn(e,t,n){return qn(e,t,n,229)}function qn(e,t,n,o){var r=ce(o,e);return r.decorators=t,r.modifiers=n,ne(75),r.name=!te()||108===$()&&Q(Ae)?void 0:fe(),r.typeParameters=Je(),r.heritageClauses=Zn(),ne(17)?(r.members=we(5,Yn),ne(18)):r.members=Me(),x(pe(r))}function Zn(){if(no())return we(21,Qn)}function Qn(){var e=$();if(85===e||108===e){var t=ce(259);return t.token=e,X(),t.types=Le(7,eo),pe(t)}}function eo(){var e=ce(201);return e.expression=Xt(),e.typeArguments=to(),pe(e)}function to(){return 27===$()?Fe(19,Ct,27,29):void 0}function no(){return 85===$()||108===$()}function oo(){var e=ce(264,b.getStartPos());return e.name=ke(),e.initializer=L(Gn),x(pe(e))}function ro(){var e=ce(234,b.getStartPos());return ne(17)?(e.statements=we(1,Bn),ne(18)):e.statements=Me(),pe(e)}function io(e,t,n,o){var r=ce(233,e),i=16&o;return r.decorators=t,r.modifiers=n,r.flags|=o,r.name=fe(),r.body=oe(23)?io(z(),void 0,void 0,4|i):ro(),x(pe(r))}function so(e,t,n){var o=ce(233,e);return o.decorators=t,o.modifiers=n,141===$()?(o.name=fe(),o.flags|=512):(o.name=Ke(),o.name.text=ge(o.name.text)),17===$()?o.body=ro():le(),pe(o)}function ao(){return 19===X()}function lo(){return 41===X()}function co(){if(9===$()){var e=Ke();return e.text=ge(e.text),e}return Dt()}function uo(e){var t=ce(e);return t.elements=Fe(22,241===e?go:po,17,18),pe(t)}function po(){return ho(246)}function go(){return ho(242)}function ho(t){var n=ce(t),o=e.isKeyword($())&&!te(),r=b.getTokenPos(),i=b.getTextPos(),s=_e();return 118===$()?(n.propertyName=s,ne(118),o=e.isKeyword($())&&!te(),r=b.getTokenPos(),i=b.getTextPos(),n.name=_e()):n.name=s,242===t&&o&&K(r,i-r,e.Diagnostics.Identifier_expected),pe(n)}function fo(t){for(var n,o=e.createScanner(t.languageVersion,!1,0,p),r=[],i=[],s=[],l=void 0;;){var c=o.scan();if(2!==c){if(e.isTrivia(c))continue;break}var u={kind:o.getToken(),pos:o.getTokenPos(),end:o.getTextPos()},d=p.substring(u.pos,u.end),g=e.getFileReferenceFromReferencePath(d,u);if(g){var h=g.fileReference;t.hasNoDefaultLib=g.isNoDefaultLib;var f=g.diagnosticMessage;h&&(g.isTypeReferenceDirective?i.push(h):r.push(h)),f&&a.push(e.createFileDiagnostic(t,u.pos,u.end-u.pos,f))}else{var _=/^\/\/\/\s*<amd-module\s+name\s*=\s*('|")(.+?)\1/gim.exec(d);_&&(n&&a.push(e.createFileDiagnostic(t,u.pos,u.end-u.pos,e.Diagnostics.An_AMD_module_cannot_have_multiple_name_assignments)),n=_[2]);if(/^\/\/\/\s*<amd-dependency\s/gim.exec(d)){var m=/\spath\s*=\s*('|")(.+?)\1/gim.exec(d),y=/\sname\s*=\s*('|")(.+?)\1/gim.exec(d);if(m){var k={path:m[2],name:y?y[2]:void 0};s.push(k)}}var b=/^\/\/\/?\s*(@ts-check|@ts-nocheck)\s*$/gim.exec(d);b&&(l={enabled:0===e.compareStrings(b[1],"@ts-check",!0),end:u.end,pos:u.pos})}}t.referencedFiles=r,t.typeReferenceDirectives=i,t.amdDependencies=s,t.moduleName=n,t.checkJsDirective=l}t.parseSourceFile=function(t,n,o,r,i,l){S(n,o,r,l=e.ensureScriptKind(t,l));var c=function(t,n,o,r){(s=A(t,n,r)).flags=_,X(),fo(s),s.statements=we(0,Bn),e.Debug.assert(1===$()),s.endOfFileToken=x(se()),function(t){t.externalModuleIndicator=e.forEach(t.statements,(function(t){return e.hasModifier(t,1)||237===t.kind&&248===t.moduleReference.kind||238===t.kind||243===t.kind||244===t.kind?t:void 0}))}(s),s.nodeCount=d,s.identifierCount=h,s.identifiers=g,s.parseDiagnostics=a,o&&B(s);return s}(t,o,i,l);return C(),c},t.parseIsolatedEntityName=function(e,t){S(e,t,void 0,1),X();var n=Ue(!0),o=1===$()&&!a.length;return C(),o?n:void 0},t.parseJsonText=function(t,n){S(n,2,void 0,6);var o=s=A(t,2,6);return X(),1===$()?s.endOfFileToken=se():17===$()||Q((function(){return 9===$()}))?(o.jsonObject=un(),s.endOfFileToken=ie(1,!1,e.Diagnostics.Unexpected_token)):ne(17),s.parseDiagnostics=a,C(),o},t.fixupParentReferences=B,function(e){e[e.SourceElements=0]="SourceElements",e[e.BlockStatements=1]="BlockStatements",e[e.SwitchClauses=2]="SwitchClauses",e[e.SwitchClauseStatements=3]="SwitchClauseStatements",e[e.TypeMembers=4]="TypeMembers",e[e.ClassMembers=5]="ClassMembers",e[e.EnumMembers=6]="EnumMembers",e[e.HeritageClauseElement=7]="HeritageClauseElement",e[e.VariableDeclarations=8]="VariableDeclarations",e[e.ObjectBindingElements=9]="ObjectBindingElements",e[e.ArrayBindingElements=10]="ArrayBindingElements",e[e.ArgumentExpressions=11]="ArgumentExpressions",e[e.ObjectLiteralMembers=12]="ObjectLiteralMembers",e[e.JsxAttributes=13]="JsxAttributes",e[e.JsxChildren=14]="JsxChildren",e[e.ArrayLiteralMembers=15]="ArrayLiteralMembers",e[e.Parameters=16]="Parameters",e[e.RestProperties=17]="RestProperties",e[e.TypeParameters=18]="TypeParameters",e[e.TypeArguments=19]="TypeArguments",e[e.TupleElementTypes=20]="TupleElementTypes",e[e.HeritageClauses=21]="HeritageClauses",e[e.ImportOrExportSpecifiers=22]="ImportOrExportSpecifiers",e[e.Count=23]="Count"}(m||(m={})),function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Unknown=2]="Unknown"}(y||(y={})),function(t){function n(e){var t=ce(267,b.getTokenPos());if(ne(17)||!e)return t.type=P(1048576,Ct),ne(18),B(t),pe(t)}var o,r;function i(t,o){var r=p;t=t||0;var i,s,a,l=void 0===o?r.length:t+o;o=l-t,e.Debug.assert(t>=0),e.Debug.assert(t<=l),e.Debug.assert(l<=r.length);var u,d=[];return function(e,t){return 47===e.charCodeAt(t)&&42===e.charCodeAt(t+1)&&42===e.charCodeAt(t+2)&&42!==e.charCodeAt(t+3)}(r,t)?(b.scanRange(t+3,o-5,(function(){var e=!0,n=1,o=void 0,c=t-Math.max(r.lastIndexOf("\n",t),0)+4;function p(e){o||(o=c),d.push(e),c+=e.length}for(B();5===$();)B();for(4===$()&&(n=0,c=0,B());1!==$();){switch($()){case 57:0===n||1===n?(h(d),_(c),n=0,e=!1,o=void 0,c++):p(b.getTokenText());break;case 4:d.push(b.getTokenText()),n=0,c=0;break;case 39:var f=b.getTokenText();1===n||2===n?(n=2,p(f)):(n=1,c+=f.length);break;case 71:p(b.getTokenText()),n=2;break;case 5:var m=b.getTokenText();2===n?d.push(m):void 0!==o&&c+m.length>o&&d.push(m.slice(o-c-1)),c+=m.length;break;case 1:break;default:n=2,p(b.getTokenText())}e?B():e=!0}g(d),h(d),u=function(){var e=ce(275,t);return e.tags=i&&ue(i,s,a),e.comment=d.length?d.join(""):void 0,pe(e,l)}()})),u):u;function g(e){for(;e.length&&("\n"===e[0]||"\r"===e[0]);)e.shift()}function h(e){for(;e.length&&("\n"===e[e.length-1]||"\r"===e[e.length-1]);)e.pop()}function f(){for(;5===$()||4===$();)B()}function _(t){e.Debug.assert(57===$());var n=ce(57,b.getTokenPos());n.end=b.getTextPos(),B();var o=A();if(f(),o){var r;if(o)switch(o.escapedText){case"augments":case"extends":r=function(e,t){var n=ce(277,e.pos);return n.atToken=e,n.tagName=t,n.class=function(){var e=oe(17),t=ce(201);t.expression=function(){var e=A(!0);for(;oe(23);){var t=ce(179,e.pos);t.expression=e,t.name=A(),e=pe(t)}return e}(),t.typeArguments=to();var n=pe(t);e&&ne(18);return n}(),pe(n)}(n,o);break;case"class":case"constructor":r=function(e,t){var n=ce(278,e.pos);return n.atToken=e,n.tagName=t,pe(n)}(n,o);break;case"arg":case"argument":case"param":r=T(n,o,1);break;case"return":case"returns":r=function(t,n){e.forEach(i,(function(e){return 280===e.kind}))&&K(n.pos,b.getTokenPos()-n.pos,e.Diagnostics._0_tag_already_specified,n.escapedText);var o=ce(280,t.pos);return o.atToken=t,o.tagName=n,o.typeExpression=y(),pe(o)}(n,o);break;case"template":r=function(t,n){e.forEach(i,(function(e){return 282===e.kind}))&&K(n.pos,b.getTokenPos()-n.pos,e.Diagnostics._0_tag_already_specified,n.escapedText);var o=[],r=z();for(;;){var s=A();if(f(),!s)return void K(b.getStartPos(),0,e.Diagnostics.Identifier_expected);var a=ce(145,s.pos);if(a.name=s,pe(a),o.push(a),26!==$())break;B(),f()}var l=ce(282,t.pos);return l.atToken=t,l.tagName=n,l.typeParameters=ue(o,r),pe(l),l}(n,o);break;case"type":r=E(n,o);break;case"typedef":r=function(e,t){var n=y();f();var o=ce(283,e.pos);if(o.atToken=e,o.tagName=t,o.fullName=c(0),o.fullName)for(var r=o.fullName;;){if(71===r.kind||!r.body){o.name=71===r.kind?r:r.name;break}r=r.body}if(f(),o.typeExpression=n,!n||v(n.type)){for(var i=void 0,s=void 0,a=void 0,l=b.getStartPos();i=ee((function(){return C(0)}));)if(s||(s=ce(285,l)),281===i.kind){if(a)break;a=i}else s.jsDocPropertyTags||(s.jsDocPropertyTags=[]),s.jsDocPropertyTags.push(i);s&&(n&&164===n.type.kind&&(s.isArrayType=!0),o.typeExpression=a&&a.typeExpression&&!v(a.typeExpression.type)?a.typeExpression:pe(s))}return pe(o);function c(e){var t=b.getTokenPos(),n=A();if(n&&oe(23)){var o=ce(233,t);return o.flags|=e,o.name=n,o.body=c(4),pe(o)}return n&&4&e&&(n.isInJSDocNamespace=!0),n}}(n,o);break;default:r=m(n,o)}else r=m(n,o);r&&function(e,t){e.comment=t.join(""),i?i.push(e):(i=[e],s=e.pos);a=e.end}(r,function(e){var t,n=[],o=0;function r(o){t||(t=e),n.push(o),e+=o.length}for(;57!==$()&&1!==$();){switch($()){case 4:o>=1&&(o=0,n.push(b.getTokenText())),e=0;break;case 57:break;case 5:if(2===o)r(b.getTokenText());else{var i=b.getTokenText();void 0!==t&&e+i.length>t&&n.push(i.slice(t-e-1)),e+=i.length}break;case 39:if(0===o){o=1,e+=b.getTokenText().length;break}default:o=2,r(b.getTokenText())}if(57===$())break;B()}return g(n),h(n),n}(t+r.end-r.pos))}}function m(e,t){var n=ce(276,e.pos);return n.atToken=e,n.tagName=t,pe(n)}function y(){return f(),17===$()?n():void 0}function k(){var e=oe(21),t=function(){var e=A(!0);oe(21)&&ne(22);for(;oe(23);){var t=A(!0);oe(21)&&ne(22),e=He(e,t)}return e}();return e&&(f(),re(58)&&Dt(),ne(22)),{name:t,isBracketed:e}}function v(t){switch(t.kind){case 134:return!0;case 164:return v(t.elementType);default:return e.isTypeReferenceNode(t)&&e.isIdentifier(t.typeName)&&"Object"===t.typeName.escapedText}}function T(e,t,n){var o=y(),r=!o;f();var i=k(),s=i.name,a=i.isBracketed;f(),r&&(o=y());var l=ce(1===n?279:284,e.pos),c=function(e,t){if(e&&v(e.type)){for(var n=ce(267,b.getTokenPos()),o=void 0,r=void 0,i=b.getStartPos(),s=void 0;o=ee((function(){return C(1,t)}));)s||(s=[]),s.push(o);if(s)return(r=ce(285,i)).jsDocPropertyTags=s,164===e.type.kind&&(r.isArrayType=!0),n.type=pe(r),pe(n)}}(o,s);return c&&(o=c,r=!0),l.atToken=e,l.tagName=t,l.typeExpression=o,l.name=s,l.isNameFirst=r,l.isBracketed=a,pe(l)}function E(t,o){e.forEach(i,(function(e){return 281===e.kind}))&&K(o.pos,b.getTokenPos()-o.pos,e.Diagnostics._0_tag_already_specified,o.escapedText);var r=ce(281,t.pos);return r.atToken=t,r.tagName=o,r.typeExpression=n(!0),pe(r)}function S(t,n){for(;!e.isIdentifier(t)||!e.isIdentifier(n);){if(e.isIdentifier(t)||e.isIdentifier(n)||t.right.escapedText!==n.right.escapedText)return!1;t=t.left,n=n.left}return t.escapedText===n.escapedText}function C(t,n){for(var o=!0,r=!1;;)switch(B(),$()){case 57:if(o){var i=x(t);return!(i&&279===i.kind&&(e.isIdentifier(i.name)||!S(n,i.name.left)))&&i}r=!1;break;case 4:o=!0,r=!1;break;case 39:r&&(o=!1),r=!0;break;case 71:o=!1;break;case 1:return!1}}function x(t){e.Debug.assert(57===$());var n=ce(57,b.getStartPos());n.end=b.getTextPos(),B();var o=A();if(f(),!o)return!1;switch(o.escapedText){case"type":return 0===t&&E(n,o);case"prop":case"property":return 0===t&&T(n,o,t);case"arg":case"argument":case"param":return 1===t&&T(n,o,t)}return!1}function B(){return c=b.scanJSDocToken()}function A(t){if(void 0===t&&(t=!1),!e.tokenIsIdentifierOrKeyword($()))return t?de(71,!0,e.Diagnostics.Identifier_expected):void W(e.Diagnostics.Identifier_expected);var n=b.getTokenPos(),o=b.getTextPos(),i=ce(71,n);return i.escapedText=e.escapeLeadingUnderscores(r.substring(n,o)),pe(i,o),B(),i}}t.parseJSDocTypeExpressionForTests=function(e,t,o){S(e,5,void 0,1),s=A("file.js",5,1),b.setText(e,t,o),c=b.scan();var r=n(),i=a;return C(),r?{jsDocTypeExpression:r,diagnostics:i}:void 0},t.parseJSDocTypeExpression=n,t.parseIsolatedJSDocComment=function(e,t,n){S(e,5,void 0,1),s={languageVariant:0,text:e};var o=i(t,n),r=a;return C(),o?{jsDoc:o,diagnostics:r}:void 0},t.parseJSDocComment=function(t,n,o){var r,l=c,u=a.length,p=T,d=i(n,o);return d&&(d.parent=t),e.isInJavaScriptFile(t)&&(s.jsDocDiagnostics||(s.jsDocDiagnostics=[]),(r=s.jsDocDiagnostics).push.apply(r,a)),c=l,a.length=u,T=p,d},function(e){e[e.BeginningOfLine=0]="BeginningOfLine",e[e.SawAsterisk=1]="SawAsterisk",e[e.SavingComments=2]="SavingComments"}(o||(o={})),function(e){e[e.Property=0]="Property",e[e.Parameter=1]="Parameter"}(r||(r={})),t.parseJSDocCommentWorker=i}(k=t.JSDocParser||(t.JSDocParser={}))}(s||(s={})),function(t){function n(t,n,r,s,a,l){return void(n?p(t):c(t));function c(t){var n="";if(l&&o(t)&&(n=s.substring(t.pos,t.end)),t._children&&(t._children=void 0),t.pos+=r,t.end+=r,l&&o(t)&&e.Debug.assert(n===a.substring(t.pos,t.end)),u(t,c,p),e.hasJSDocNodes(t))for(var d=0,g=t.jsDoc;d<g.length;d++){u(g[d],c,p)}i(t,l)}function p(e){e._children=void 0,e.pos+=r,e.end+=r;for(var t=0,n=e;t<n.length;t++){c(n[t])}}}function o(e){switch(e.kind){case 9:case 8:case 71:return!0}return!1}function r(t,n,o,r,i){e.Debug.assert(t.end>=n,"Adjusting an element that was entirely before the change range"),e.Debug.assert(t.pos<=o,"Adjusting an element that was entirely after the change range"),e.Debug.assert(t.pos<=t.end),t.pos=Math.min(t.pos,r),t.end>=o?t.end+=i:t.end=Math.min(t.end,r),e.Debug.assert(t.pos<=t.end),t.parent&&(e.Debug.assert(t.pos>=t.parent.pos),e.Debug.assert(t.end<=t.parent.end))}function i(t,n){if(n){var o=t.pos;u(t,(function(t){e.Debug.assert(t.pos>=o),o=t.end})),e.Debug.assert(o<=t.end)}}function a(t,n){var o,r=t;if(u(t,(function t(i){if(e.nodeIsMissing(i))return;if(!(i.pos<=n))return e.Debug.assert(i.pos>n),!0;if(i.pos>=r.pos&&(r=i),n<i.end)return u(i,t),!0;e.Debug.assert(i.end<=n),o=i})),o){var i=function(e){for(;;){var t=s(e);if(!t)return e;e=t}}(o);i.pos>r.pos&&(r=i)}return r;function s(t){var n=void 0;return u(t,(function(t){e.nodeIsPresent(t)&&(n=t)})),n}}function l(t,n,o,r){var i=t.text;if(o&&(e.Debug.assert(i.length-o.span.length+o.newLength===n.length),r||e.Debug.shouldAssert(3))){var s=i.substr(0,o.span.start),a=n.substr(0,o.span.start);e.Debug.assert(s===a);var l=i.substring(e.textSpanEnd(o.span),i.length),c=n.substring(e.textSpanEnd(e.textChangeRangeNewSpan(o)),n.length);e.Debug.assert(l===c)}}var c;t.updateSourceFile=function(t,o,c,p){if(l(t,o,c,p=p||e.Debug.shouldAssert(2)),e.textChangeRangeIsUnchanged(c))return t;if(0===t.statements.length)return s.parseSourceFile(t.fileName,o,t.languageVersion,void 0,!0,t.scriptKind);var d=t;e.Debug.assert(!d.hasBeenIncrementallyParsed),d.hasBeenIncrementallyParsed=!0;var g=t.text,h=function(t){var n=t.statements,o=0;e.Debug.assert(o<n.length);var r=n[o],i=-1;return{currentNode:function(t){return t!==i&&(r&&r.end===t&&o<n.length-1&&(o++,r=n[o]),r&&r.pos===t||s(t)),i=t,e.Debug.assert(!r||r.pos===t),r}};function s(e){return n=void 0,o=-1,r=void 0,void u(t,i,s);function i(t){return e>=t.pos&&e<t.end&&(u(t,i,s),!0)}function s(t){if(e>=t.pos&&e<t.end)for(var a=0;a<t.length;a++){var l=t[a];if(l){if(l.pos===e)return n=t,o=a,r=l,!0;if(l.pos<e&&e<l.end)return u(l,i,s),!0}}return!1}}}(t),f=function(t,n){for(var o=1,r=n.span.start,i=0;r>0&&i<=o;i++){var s=a(t,r);e.Debug.assert(s.pos<=r);var l=s.pos;r=Math.max(0,l-1)}var c=e.createTextSpanFromBounds(r,e.textSpanEnd(n.span)),u=n.newLength+(n.span.start-r);return e.createTextChangeRange(c,u)}(t,c);l(t,o,f,p),e.Debug.assert(f.span.start<=c.span.start),e.Debug.assert(e.textSpanEnd(f.span)===e.textSpanEnd(c.span)),e.Debug.assert(e.textSpanEnd(e.textChangeRangeNewSpan(f))===e.textSpanEnd(e.textChangeRangeNewSpan(c)));var _=e.textChangeRangeNewSpan(f).length-f.span.length;return function(t,o,s,a,l,c,p,d){return void g(t);function g(t){if(e.Debug.assert(t.pos<=t.end),t.pos>s)n(t,!1,l,c,p,d);else{var f=t.end;if(f>=o)return t.intersectsChange=!0,t._children=void 0,r(t,o,s,a,l),u(t,g,h),void i(t,d);e.Debug.assert(f<o)}}function h(t){if(e.Debug.assert(t.pos<=t.end),t.pos>s)n(t,!0,l,c,p,d);else{var i=t.end;if(i>=o){t.intersectsChange=!0,t._children=void 0,r(t,o,s,a,l);for(var u=0,h=t;u<h.length;u++){g(h[u])}}else e.Debug.assert(i<o)}}}(d,f.span.start,e.textSpanEnd(f.span),e.textSpanEnd(e.textChangeRangeNewSpan(f)),_,g,o,p),s.parseSourceFile(t.fileName,o,t.languageVersion,h,!0,t.scriptKind)},function(e){e[e.Value=-1]="Value"}(c||(c={}))}(a||(a={}))}(ts||(ts={})),function(e){var t;function n(t){if(230===t.kind||231===t.kind)return 0;if(e.isConstEnumDeclaration(t))return 2;if(238!==t.kind&&237!==t.kind||e.hasModifier(t,1)){if(234===t.kind){var o=0;return e.forEachChild(t,(function(e){switch(n(e)){case 0:return!1;case 2:return o=2,!1;case 1:return o=1,!0}})),o}if(233===t.kind){var r=t.body;return r?n(r):1}return 71===t.kind&&t.isInJSDocNamespace?0:1}return 0}!function(e){e[e.NonInstantiated=0]="NonInstantiated",e[e.Instantiated=1]="Instantiated",e[e.ConstEnumOnly=2]="ConstEnumOnly"}(e.ModuleInstanceState||(e.ModuleInstanceState={})),e.getModuleInstanceState=n,function(e){e[e.None=0]="None",e[e.IsContainer=1]="IsContainer",e[e.IsBlockScopedContainer=2]="IsBlockScopedContainer",e[e.IsControlFlowContainer=4]="IsControlFlowContainer",e[e.IsFunctionLike=8]="IsFunctionLike",e[e.IsFunctionExpression=16]="IsFunctionExpression",e[e.HasLocals=32]="HasLocals",e[e.IsInterface=64]="IsInterface",e[e.IsObjectLiteralOrClassExpressionMethod=128]="IsObjectLiteralOrClassExpressionMethod"}(t||(t={}));var o=function(){var t,o,a,l,c,u,p,d,g,h,f,_,m,y,k,b,v,T,E,S,C,x,B=0,A={flags:1},I={flags:1},D=0;function N(n,o,r,i,s){return e.createDiagnosticForNodeInSourceFile(e.getSourceFileOfNode(n)||t,n,o,r,i,s)}return function(n,r){t=n,o=r,a=e.getEmitScriptTarget(o),E=function(e,t){return!(!(void 0===t.alwaysStrict?t.strict:t.alwaysStrict)||e.isDeclarationFile)||!!e.externalModuleIndicator}(t,r),C=e.createUnderscoreEscapedMap(),B=0,x=t.isDeclarationFile,S=e.objectAllocator.getSymbolConstructor(),t.locals||(be(t),t.symbolCount=B,t.classifiableNames=C),t=void 0,o=void 0,a=void 0,l=void 0,c=void 0,u=void 0,p=void 0,d=!1,g=void 0,h=void 0,f=void 0,_=void 0,m=void 0,y=void 0,b=void 0,v=!1,T=0,D=0};function w(e,t){return B++,new S(e,t)}function R(t,n,o){if(t.flags|=o,n.symbol=t,t.declarations?t.declarations.push(n):t.declarations=[n],1952&o&&!t.exports&&(t.exports=e.createSymbolTable()),6240&o&&!t.members&&(t.members=e.createSymbolTable()),107455&o){var r=t.valueDeclaration;(!r||r.kind!==n.kind&&233===r.kind)&&(t.valueDeclaration=n)}}function O(t){if(243===t.kind)return t.isExportEquals?"export=":"default";var n=e.getNameOfDeclaration(t);if(n){if(e.isAmbientModule(t)){var o=e.getTextOfIdentifierOrLiteral(n);return e.isGlobalScopeAugmentation(t)?"__global":'"'+o+'"'}if(144===n.kind){var r=n.expression;return e.isStringOrNumericLiteral(r)?e.escapeLeadingUnderscores(r.text):(e.Debug.assert(e.isWellKnownSymbolSyntactically(r)),e.getPropertyNameForKnownSymbolName(e.idText(r.name)))}return e.getEscapedTextOfIdentifierOrLiteral(n)}switch(t.kind){case 152:return"__constructor";case 160:case 155:return"__call";case 161:case 156:return"__new";case 157:return"__index";case 244:return"__export";case 194:if(2===e.getSpecialPropertyAssignmentKind(t))return"export=";e.Debug.fail("Unknown binary declaration kind");break;case 228:case 229:return e.hasModifier(t,512)?"default":void 0;case 273:return e.isJSDocConstructSignature(t)?"__new":"__call";case 146:e.Debug.assert(273===t.parent.kind);var i=t.parent;return"arg"+e.indexOf(i.parameters,t);case 283:var s=e.getNameOfJSDocTypedef(t);return void 0!==s?s.escapedText:void 0}}function P(t){return t.name?e.declarationNameToString(t.name):e.unescapeLeadingUnderscores(O(t))}function L(n,o,r,i,s,a){e.Debug.assert(!e.hasDynamicName(r));var l,c=e.hasModifier(r,512),u=c&&o?"default":O(r);if(void 0===u)l=w(0,"__missing");else if(l=n.get(u),788448&i&&C.set(u,!0),l){if(a&&!l.isReplaceableByMethod)return l;if(l.flags&s)if(l.isReplaceableByMethod)n.set(u,l=w(0,u));else{r.name&&(r.name.parent=r);var p=2&l.flags?e.Diagnostics.Cannot_redeclare_block_scoped_variable_0:e.Diagnostics.Duplicate_identifier_0;l.declarations&&l.declarations.length&&(c||l.declarations&&l.declarations.length&&(c||243===r.kind&&!r.isExportEquals))&&(p=e.Diagnostics.A_module_cannot_have_multiple_default_exports),e.forEach(l.declarations,(function(n){t.bindDiagnostics.push(N(e.getNameOfDeclaration(n)||n,p,P(n)))})),t.bindDiagnostics.push(N(e.getNameOfDeclaration(r)||r,p,P(r))),l=w(0,u)}}else n.set(u,l=w(0,u)),a&&(l.isReplaceableByMethod=!0);return R(l,r,i),l.parent=o,l}function M(t,n,o){var r=1&e.getCombinedModifierFlags(t);if(2097152&n)return 246===t.kind||237===t.kind&&r?L(c.symbol.exports,c.symbol,t,n,o):L(c.locals,void 0,t,n,o);283===t.kind&&e.Debug.assert(e.isInJavaScriptFile(t));var i=283===t.kind&&t.name&&71===t.name.kind&&t.name.isInJSDocNamespace;if(!e.isAmbientModule(t)&&(r||32&c.flags)||i){var s=107455&n?1048576:0,a=L(c.locals,void 0,t,s,o);return a.exportSymbol=L(c.symbol.exports,c.symbol,t,n,o),t.localSymbol=a,a}return L(c.locals,void 0,t,n,o)}function F(e){if(x)V(e);else if(536870912&e.transformFlags)x=!0,V(e),x=!1,D|=e.transformFlags&~i(e.kind);else{var t=D;D=0,V(e),D=t|r(e,D)}}function U(t){if(void 0!==t)if(x)e.forEach(t,be);else{var n=D;D=0;for(var o=0,r=0,i=t;r<i.length;r++){var s=i[r];be(s),o|=-536870913&s.transformFlags}t.transformFlags=536870912|o,D|=n}}function H(t){e.forEachChild(t,be,U)}function V(r){if(e.hasJSDocNodes(r))if(e.isInJavaScriptFile(r))for(var i=0,a=r.jsDoc;i<a.length;i++){be(a[i])}else for(var l=0,c=r.jsDoc;l<c.length;l++){s(r,c[l])}if(function(t){if(!(1&g.flags))return!1;if(g===A){if(e.isStatementButNotDeclaration(t)&&209!==t.kind||229===t.kind||233===t.kind&&function(e){var t=n(e);return 1===t||2===t&&o.preserveConstEnums}(t)||232===t.kind&&(!e.isConstEnumDeclaration(t)||o.preserveConstEnums))g=I,!o.allowUnreachableCode&&!e.isInAmbientContext(t)&&(208!==t.kind||3&e.getCombinedNodeFlags(t.declarationList)||e.forEach(t.declarationList.declarations,(function(e){return e.initializer})))&&ke(t,e.Diagnostics.Unreachable_code_detected)}return!0}(r))H(r);else switch(r.kind){case 213:!function(e){var t=$(),n=z(),o=z();Y(t,g),g=t,ne(e.expression,n,o),g=ee(n),oe(e.statement,o,t),Y(t,g),g=ee(o)}(r);break;case 212:!function(t){var n=$(),o=222===t.parent.kind?e.lastOrUndefined(b):void 0,r=o?o.continueTarget:z(),i=o?o.breakTarget:z();Y(n,g),g=n,oe(t.statement,i,r),Y(r,g),g=ee(r),ne(t.expression,n,i),g=ee(i)}(r);break;case 214:!function(e){var t=$(),n=z(),o=z();be(e.initializer),Y(t,g),g=t,ne(e.condition,n,o),g=ee(n),oe(e.statement,o,t),be(e.incrementor),Y(t,g),g=ee(o)}(r);break;case 215:case 216:!function(e){var t=$(),n=z();Y(t,g),g=t,216===e.kind&&be(e.awaitModifier);be(e.expression),Y(n,g),be(e.initializer),227!==e.initializer.kind&&se(e.initializer);oe(e.statement,n,t),Y(t,g),g=ee(n)}(r);break;case 211:!function(e){var t=z(),n=z(),o=z();ne(e.expression,t,n),g=ee(t),be(e.thenStatement),Y(o,g),g=ee(n),be(e.elseStatement),Y(o,g),g=ee(o)}(r);break;case 219:case 223:!function(e){be(e.expression),219===e.kind&&(v=!0,_&&Y(_,g));g=A}(r);break;case 218:case 217:!function(e){if(be(e.label),e.label){var t=function(e){if(b)for(var t=0,n=b;t<n.length;t++){var o=n[t];if(o.name===e)return o}return}(e.label.escapedText);t&&(t.referenced=!0,re(e,t.breakTarget,t.continueTarget))}else re(e,h,f)}(r);break;case 224:!function(e){var t=z(),n=g;be(e.tryBlock),Y(t,g);var o=g,r=A;e.catchClause&&(g=n,be(e.catchClause),Y(t,g),r=g);if(e.finallyBlock){var i={flags:2048,antecedent:n,lock:{}};if(Y(t,i),g=ee(t),be(e.finallyBlock),1&g.flags||1&o.flags&&1&r.flags&&(g=o===I||r===I?I:A),!(1&g.flags)){var s={flags:4096,antecedent:g};i.lock=s,g=s}}else g=ee(t)}(r);break;case 221:!function(t){var n=z();be(t.expression);var o=h,r=k;h=n,k=g,be(t.caseBlock),Y(n,g);var i=e.forEach(t.caseBlock.clauses,(function(e){return 258===e.kind}));t.possiblyExhaustive=!i&&!n.antecedents,i||Y(n,q(k,t,0,0));h=o,k=r,g=ee(n)}(r);break;case 235:!function(t){var n=D;D=0;for(var r=t.clauses,i=A,s=0;s<r.length;s++){for(var a=s;!r[s].statements.length&&s+1<r.length;)be(r[s]),s++;var l=z();Y(l,q(k,t.parent,a,s+1)),Y(l,i),g=ee(l);var c=r[s];be(c),i=g,1&g.flags||s===r.length-1||!o.noFallthroughCasesInSwitch||ke(c,e.Diagnostics.Fallthrough_case_in_switch)}r.transformFlags=536870912|D,D|=n}(r);break;case 257:!function(e){var t=g;g=k,be(e.expression),g=t,U(e.statements)}(r);break;case 222:!function(n){var r=$(),i=z();be(n.label),Y(r,g);var s=function(e,t,n){var o={name:e,breakTarget:t,continueTarget:n,referenced:!1};return(b||(b=[])).push(o),o}(n.label.escapedText,i,r);be(n.statement),b.pop(),s.referenced||o.allowUnusedLabels||t.bindDiagnostics.push(N(n.label,e.Diagnostics.Unused_label));n.statement&&212===n.statement.kind||(Y(i,g),g=ee(i))}(r);break;case 192:!function(e){if(51===e.operator){var t=m;m=y,y=t,H(e),y=m,m=t}else H(e),43!==e.operator&&44!==e.operator||se(e.operand)}(r);break;case 193:!function(e){H(e),(43===e.operator||44===e.operator)&&se(e.operand)}(r);break;case 194:!function(t){var n=t.operatorToken.kind;if(53===n||54===n)if(function(e){for(;185===e.parent.kind||192===e.parent.kind&&51===e.parent.operator;)e=e.parent;return!function(e){var t=e.parent;switch(t.kind){case 211:case 213:case 212:return t.expression===e;case 214:case 195:return t.condition===e}return!1}(e)&&!te(e.parent)}(t)){var o=z();ae(t,o,o),g=ee(o)}else ae(t,m,y);else{if(H(t),e.isAssignmentOperator(n)&&!e.isAssignmentTarget(t))if(se(t.left),58===n&&180===t.left.kind)j(t.left.expression)&&(g=Q(g,t))}}(r);break;case 188:!function(e){H(e),179===e.expression.kind&&se(e.expression)}(r);break;case 195:!function(e){var t=z(),n=z(),o=z();ne(e.condition,t,n),g=ee(t),be(e.questionToken),be(e.whenTrue),Y(o,g),g=ee(n),be(e.colonToken),be(e.whenFalse),Y(o,g),g=ee(o)}(r);break;case 226:!function(t){H(t),(t.initializer||e.isForInOrOfStatement(t.parent.parent))&&le(t)}(r);break;case 181:!function(t){var n=t.expression;for(;185===n.kind;)n=n.expression;186===n.kind||187===n.kind?(U(t.typeArguments),U(t.arguments),be(t.expression)):H(t);if(179===t.expression.kind){var o=t.expression;j(o.expression)&&e.isPushOrUnshiftIdentifier(o.name)&&(g=Q(g,t))}}(r);break;case 275:!function(t){e.forEachChild(t,(function(e){283!==e.kind&&be(e)}))}(r);break;case 283:!function(t){e.forEachChild(t,(function(e){t.fullName&&e===t.name&&71!==t.fullName.kind||be(e)}))}(r);break;default:H(r)}}function G(e){switch(e.kind){case 71:case 99:case 179:return W(e);case 181:return function(e){if(e.arguments)for(var t=0,n=e.arguments;t<n.length;t++){if(W(n[t]))return!0}if(179===e.expression.kind&&W(e.expression.expression))return!0;return!1}(e);case 185:return G(e.expression);case 194:return function(e){switch(e.operatorToken.kind){case 58:return W(e.left);case 32:case 33:case 34:case 35:return j(e.left)||j(e.right)||K(e.right,e.left)||K(e.left,e.right);case 93:return j(e.left);case 26:return G(e.right)}return!1}(e);case 192:return 51===e.operator&&G(e.operand)}return!1}function W(e){return 71===e.kind||99===e.kind||97===e.kind||179===e.kind&&W(e.expression)}function K(e,t){return 189===e.kind&&j(e.expression)&&9===t.kind}function j(e){switch(e.kind){case 185:return j(e.expression);case 194:switch(e.operatorToken.kind){case 58:return j(e.left);case 26:return j(e.right)}}return W(e)}function z(){return{flags:4,antecedents:void 0}}function $(){return{flags:8,antecedents:void 0}}function X(e){e.flags|=512&e.flags?1024:512}function Y(t,n){1&n.flags||e.contains(t.antecedents,n)||((t.antecedents||(t.antecedents=[])).push(n),X(n))}function J(e,t,n){return 1&t.flags?t:n?101===n.kind&&64&e||86===n.kind&&32&e?A:G(n)?(X(t),{flags:e,expression:n,antecedent:t}):t:32&e?t:A}function q(e,t,n,o){return G(t.expression)?(X(e),{flags:128,switchStatement:t,clauseStart:n,clauseEnd:o,antecedent:e}):e}function Z(e,t){return X(e),{flags:16,antecedent:e,node:t}}function Q(e,t){return X(e),{flags:256,antecedent:e,node:t}}function ee(e){var t=e.antecedents;return t?1===t.length?t[0]:e:A}function te(e){for(;;)if(185===e.kind)e=e.expression;else{if(192!==e.kind||51!==e.operator)return 194===e.kind&&(53===e.operatorToken.kind||54===e.operatorToken.kind);e=e.operand}}function ne(e,t,n){var o=m,r=y;m=t,y=n,be(e),m=o,y=r,e&&te(e)||(Y(t,J(32,g,e)),Y(n,J(64,g,e)))}function oe(e,t,n){var o=h,r=f;h=t,f=n,be(e),h=o,f=r}function re(e,t,n){var o=218===e.kind?t:n;o&&(Y(o,g),g=A)}function ie(e){194===e.kind&&58===e.operatorToken.kind?se(e.left):se(e)}function se(e){if(W(e))g=Z(g,e);else if(177===e.kind)for(var t=0,n=e.elements;t<n.length;t++){var o=n[t];198===o.kind?se(o.expression):ie(o)}else if(178===e.kind)for(var r=0,i=e.properties;r<i.length;r++){var s=i[r];261===s.kind?ie(s.initializer):262===s.kind?se(s.name):263===s.kind&&se(s.expression)}}function ae(e,t,n){var o={flags:4,antecedents:void 0};53===e.operatorToken.kind?ne(e.left,o,n):ne(e.left,t,o),g=ee(o),be(e.operatorToken),ne(e.right,t,n)}function le(t){var n=e.isOmittedExpression(t)?void 0:t.name;if(e.isBindingPattern(n))for(var o=0,r=n.elements;o<r.length;o++){le(r[o])}else g=Z(g,t)}function ce(e){p&&(p.nextContainer=e),p=e}function ue(n,o,r){switch(c.kind){case 233:return M(n,o,r);case 265:return function(n,o,r){return e.isExternalModule(t)?M(n,o,r):L(t.locals,void 0,n,o,r)}(n,o,r);case 199:case 229:return function(t,n,o){return e.hasModifier(t,32)?L(c.symbol.exports,c.symbol,t,n,o):L(c.symbol.members,c.symbol,t,n,o)}(n,o,r);case 232:return L(c.symbol.exports,c.symbol,n,o,r);case 163:case 285:case 178:case 230:case 254:return L(c.symbol.members,c.symbol,n,o,r);case 160:case 161:case 155:case 156:case 157:case 151:case 150:case 152:case 153:case 154:case 228:case 186:case 187:case 273:case 231:case 172:return L(c.locals,void 0,n,o,r)}}function pe(t){e.isInAmbientContext(t)&&!function(e){var t=265===e.kind?e:e.body;if(t&&(265===t.kind||234===t.kind))for(var n=0,o=t.statements;n<o.length;n++){var r=o[n];if(244===r.kind||243===r.kind)return!0}return!1}(t)?t.flags|=32:t.flags&=-33}function de(e){var t=n(e),o=0!==t;return ue(e,o?512:1024,o?106639:0),t}function ge(e,t,n){var o=w(t,n);8&t&&(o.parent=c.symbol),R(o,e,t)}function he(t,n,o){switch(u.kind){case 233:M(t,n,o);break;case 265:if(e.isExternalModule(c)){M(t,n,o);break}default:u.locals||(u.locals=e.createSymbolTable(),ce(u)),L(u.locals,void 0,t,n,o)}}function fe(n){E&&n.originalKeywordKind>=108&&n.originalKeywordKind<=116&&!e.isIdentifierName(n)&&!e.isInAmbientContext(n)&&(t.parseDiagnostics.length||t.bindDiagnostics.push(N(n,function(n){if(e.getContainingClass(n))return e.Diagnostics.Identifier_expected_0_is_a_reserved_word_in_strict_mode_Class_definitions_are_automatically_in_strict_mode;if(t.externalModuleIndicator)return e.Diagnostics.Identifier_expected_0_is_a_reserved_word_in_strict_mode_Modules_are_automatically_in_strict_mode;return e.Diagnostics.Identifier_expected_0_is_a_reserved_word_in_strict_mode}(n),e.declarationNameToString(n))))}function _e(n,o){if(o&&71===o.kind){var r=o;if(s=r,e.isIdentifier(s)&&("eval"===s.escapedText||"arguments"===s.escapedText)){var i=e.getErrorSpanForNode(t,o);t.bindDiagnostics.push(e.createFileDiagnostic(t,i.start,i.length,function(n){if(e.getContainingClass(n))return e.Diagnostics.Invalid_use_of_0_Class_definitions_are_automatically_in_strict_mode;if(t.externalModuleIndicator)return e.Diagnostics.Invalid_use_of_0_Modules_are_automatically_in_strict_mode;return e.Diagnostics.Invalid_use_of_0_in_strict_mode}(n),e.idText(r)))}}var s}function me(e){E&&_e(e,e.name)}function ye(n){if(a<2&&265!==u.kind&&233!==u.kind&&!e.isFunctionLike(u)){var o=e.getErrorSpanForNode(t,n);t.bindDiagnostics.push(e.createFileDiagnostic(t,o.start,o.length,function(n){return e.getContainingClass(n)?e.Diagnostics.Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Class_definitions_are_automatically_in_strict_mode:t.externalModuleIndicator?e.Diagnostics.Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Modules_are_automatically_in_strict_mode:e.Diagnostics.Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5}(n)))}}function ke(n,o,r,i,s){var a=e.getSpanOfTokenAtPosition(t,n.pos);t.bindDiagnostics.push(e.createFileDiagnostic(t,a.start,a.length,o,r,i,s))}function be(n){if(n){n.parent=l;var o=E;if(e.isInJavaScriptFile(n)&&function(t){if(!e.hasJSDocNodes(t))return;for(var n=0,o=t.jsDoc;n<o.length;n++){var r=o[n];if(r.tags)for(var i=0,s=r.tags;i<s.length;i++){var a=s[i];if(283===a.kind){var c=l;l=r,be(a),l=c}}}}(n),function(n){switch(n.kind){case 71:if(n.isInJSDocNamespace){for(var o=n.parent;o&&283!==o.kind;)o=o.parent;he(o,524288,793064);break}case 99:return g&&(e.isExpression(n)||262===l.kind)&&(n.flowNode=g),fe(n);case 179:g&&W(n)&&(n.flowNode=g);break;case 194:switch(e.getSpecialPropertyAssignmentKind(n)){case 1:Se(n);break;case 2:!function(n){var o=e.getRightMostAssignedExpression(n.right);if(e.isEmptyObjectLiteral(o)||Ce(o))return void Ee(n);Ee(n),L(t.symbol.exports,t.symbol,n,1049092,0)}(n);break;case 3:!function(e){var t=e.left,n=t.expression,o=n.expression;t.parent=e,o.parent=n,n.parent=t,Ie(o.escapedText,t,!0)}(n);break;case 4:!function(t){e.Debug.assert(e.isInJavaScriptFile(t));var n=e.getThisContainer(t,!1);switch(n.kind){case 228:case 186:n.symbol.members=n.symbol.members||e.createSymbolTable(),L(n.symbol.members,n.symbol,t,4,0);break;case 152:case 149:case 151:case 153:case 154:var o=n.parent;L(e.hasModifier(n,32)?o.symbol.exports:o.symbol.members,o.symbol,t,4,0,!0)}}(n);break;case 5:!function(t){var n=t.left,o=n.expression;e.isIdentifier(o)&&(n.parent=t,o.parent=n,xe(o)?Se(t):Ie(o.escapedText,n,!1))}(n);break;case 0:break;default:e.Debug.fail("Unknown special property assignment kind")}return function(t){E&&e.isLeftHandSideExpression(t.left)&&e.isAssignmentOperator(t.operatorToken.kind)&&_e(t,t.left)}(n);case 260:return function(e){E&&e.variableDeclaration&&_e(e,e.variableDeclaration.name)}(n);case 188:return function(n){if(E&&71===n.expression.kind){var o=e.getErrorSpanForNode(t,n.expression);t.bindDiagnostics.push(e.createFileDiagnostic(t,o.start,o.length,e.Diagnostics.delete_cannot_be_called_on_an_identifier_in_strict_mode))}}(n);case 8:return function(n){E&&4&n.numericLiteralFlags&&t.bindDiagnostics.push(N(n,e.Diagnostics.Octal_literals_are_not_allowed_in_strict_mode))}(n);case 193:return function(e){E&&_e(e,e.operand)}(n);case 192:return function(e){E&&(43!==e.operator&&44!==e.operator||_e(e,e.operand))}(n);case 220:return function(t){E&&ke(t,e.Diagnostics.with_statements_are_not_allowed_in_strict_mode)}(n);case 169:return void(d=!0);case 158:return function(e){var t=e.parameterName,n=e.type;t&&71===t.kind&&fe(t);t&&169===t.kind&&(d=!0);be(n)}(n);case 145:return ue(n,262144,530920);case 146:return function(t){E&&!e.isInAmbientContext(t)&&_e(t,t.name);e.isBindingPattern(t.name)?ge(t,1,"__"+e.indexOf(t.parent.parameters,t)):ue(t,1,107455);if(e.isParameterPropertyDeclaration(t)){var n=t.parent.parent;L(n.symbol.members,n.symbol,t,4|(t.questionToken?16777216:0),0)}}(n);case 226:return De(n);case 176:return n.flowNode=g,De(n);case 149:case 148:return function(e){return Ne(e,4|(e.questionToken?16777216:0),0)}(n);case 261:case 262:return Ne(n,4,0);case 264:return Ne(n,8,900095);case 155:case 156:case 157:return ue(n,131072,0);case 151:case 150:return Ne(n,8192|(n.questionToken?16777216:0),e.isObjectLiteralMethod(n)?0:99263);case 228:return function(n){t.isDeclarationFile||e.isInAmbientContext(n)||e.isAsyncFunction(n)&&(T|=1024);me(n),E?(ye(n),he(n,16,106927)):ue(n,16,106927)}(n);case 152:return ue(n,16384,0);case 153:return Ne(n,32768,41919);case 154:return Ne(n,65536,74687);case 160:case 273:case 161:return function(t){var n=w(131072,O(t));R(n,t,131072);var o=w(2048,"__type");R(o,t,2048),o.members=e.createSymbolTable(),o.members.set(n.escapedName,n)}(n);case 163:case 285:case 172:return function(e){return ge(e,2048,"__type")}(n);case 178:return function(n){var o;if(function(e){e[e.Property=1]="Property",e[e.Accessor=2]="Accessor"}(o||(o={})),E)for(var r=e.createUnderscoreEscapedMap(),i=0,s=n.properties;i<s.length;i++){var a=s[i];if(263!==a.kind&&71===a.name.kind){var l=a.name,c=261===a.kind||262===a.kind||151===a.kind?1:2,u=r.get(l.escapedText);if(u){if(1===c&&1===u){var p=e.getErrorSpanForNode(t,l);t.bindDiagnostics.push(e.createFileDiagnostic(t,p.start,p.length,e.Diagnostics.An_object_literal_cannot_have_multiple_properties_with_the_same_name_in_strict_mode))}}else r.set(l.escapedText,c)}}return ge(n,4096,"__object")}(n);case 186:case 187:return function(n){t.isDeclarationFile||e.isInAmbientContext(n)||e.isAsyncFunction(n)&&(T|=1024);g&&(n.flowNode=g);me(n);var o=n.name?n.name.escapedText:"__function";return ge(n,16,o)}(n);case 181:e.isInJavaScriptFile(n)&&function(n){!t.commonJsModuleIndicator&&e.isRequireCall(n,!1)&&Ee(n)}(n);break;case 199:case 229:return E=!0,function(n){if(229===n.kind)he(n,32,899519);else{ge(n,32,n.name?n.name.escapedText:"__class"),n.name&&C.set(n.name.escapedText,!0)}var o=n.symbol,r=w(4194308,"prototype"),i=o.exports.get(r.escapedName);i&&(n.name&&(n.name.parent=n),t.bindDiagnostics.push(N(i.declarations[0],e.Diagnostics.Duplicate_identifier_0,e.symbolName(r))));o.exports.set(r.escapedName,r),r.parent=o}(n);case 230:return he(n,64,792968);case 231:return he(n,524288,793064);case 232:return function(t){return e.isConst(t)?he(t,128,899967):he(t,256,899327)}(n);case 233:return function(n){if(pe(n),e.isAmbientModule(n))if(e.hasModifier(n,1)&&ke(n,e.Diagnostics.export_modifier_cannot_be_applied_to_ambient_modules_and_module_augmentations_since_they_are_always_visible),e.isExternalModuleAugmentation(n))de(n);else{var o=void 0;if(9===n.name.kind){var r=n.name.text;e.hasZeroOrOneAsteriskCharacter(r)?o=e.tryParsePattern(r):ke(n.name,e.Diagnostics.Pattern_0_can_have_at_most_one_Asterisk_character,r)}var i=ue(n,512,106639);o&&(t.patternAmbientModules||(t.patternAmbientModules=[])).push({pattern:o,symbol:i})}else{var s=de(n);if(0!==s)if(304&n.symbol.flags)n.symbol.constEnumOnlyModule=!1;else{var a=2===s;void 0===n.symbol.constEnumOnlyModule?n.symbol.constEnumOnlyModule=a:n.symbol.constEnumOnlyModule=n.symbol.constEnumOnlyModule&&a}}}(n);case 254:return function(e){return ge(e,4096,"__jsxAttributes")}(n);case 253:return function(e,t,n){return ue(e,t,n)}(n,4,0);case 237:case 240:case 242:case 246:return ue(n,2097152,2097152);case 236:return function(n){n.modifiers&&n.modifiers.length&&t.bindDiagnostics.push(N(n,e.Diagnostics.Modifiers_cannot_appear_here));if(265!==n.parent.kind)return void t.bindDiagnostics.push(N(n,e.Diagnostics.Global_module_exports_may_only_appear_at_top_level));var o=n.parent;if(!e.isExternalModule(o))return void t.bindDiagnostics.push(N(n,e.Diagnostics.Global_module_exports_may_only_appear_in_module_files));if(!o.isDeclarationFile)return void t.bindDiagnostics.push(N(n,e.Diagnostics.Global_module_exports_may_only_appear_in_declaration_files));t.symbol.globalExports=t.symbol.globalExports||e.createSymbolTable(),L(t.symbol.globalExports,t.symbol,n,2097152,2097152)}(n);case 239:return function(e){e.name&&ue(e,2097152,2097152)}(n);case 244:return function(e){c.symbol&&c.symbol.exports?e.exportClause||L(c.symbol.exports,c.symbol,e,8388608,0):ge(e,8388608,O(e))}(n);case 243:return function(t){if(c.symbol&&c.symbol.exports){var n=243===t.kind&&e.exportAssignmentIsAlias(t)?2097152:4;L(c.symbol.exports,c.symbol,t,n,2097204)}else ge(t,2097152,O(t))}(n);case 265:return ve(n.statements),pe(t),void(e.isExternalModule(t)&&Te());case 207:if(!e.isFunctionLike(n.parent))return;case 234:return ve(n.statements);case 279:if(285!==n.parent.kind)break;case 284:var r=n;return ue(r,r.isBracketed||r.typeExpression&&272===r.typeExpression.type.kind?16777220:4,0);case 283:var i=n.fullName;if(!i||71===i.kind)he(n,524288,793064)}}(n),n.kind>142){var i=l;l=n;var s=function(t){switch(t.kind){case 199:case 229:case 232:case 178:case 163:case 285:case 254:return 1;case 230:return 65;case 233:case 231:case 172:return 33;case 265:return 37;case 151:if(e.isObjectLiteralOrClassExpressionMethod(t))return 173;case 152:case 228:case 150:case 153:case 154:case 155:case 273:case 160:case 156:case 157:case 161:return 45;case 186:case 187:return 61;case 234:return 4;case 149:return t.initializer?4:0;case 260:case 214:case 215:case 216:case 235:return 2;case 207:return e.isFunctionLike(t.parent)?0:2}return 0}(n);0===s?F(n):function(t,n){var o=c,r=u;if(1&n?(c=u=t,32&n&&(c.locals=e.createSymbolTable()),ce(c)):2&n&&((u=t).locals=void 0),4&n){var i=g,s=h,a=f,l=_,p=b,m=v,y=16&n&&!e.hasModifier(t,256)&&!!e.getImmediatelyInvokedFunctionExpression(t);y?_={flags:4,antecedents:void 0}:(g={flags:2},144&n&&(g.container=t),_=void 0),h=void 0,f=void 0,b=void 0,v=!1,F(t),t.flags&=-1409,!(1&g.flags)&&8&n&&e.nodeIsPresent(t.body)&&(t.flags|=128,v&&(t.flags|=256)),265===t.kind&&(t.flags|=T),y?(Y(_,g),g=ee(_)):g=i,h=s,f=a,_=l,b=p,v=m}else 64&n?(d=!1,F(t),t.flags=d?64|t.flags:-65&t.flags):F(t);c=o,u=r}(n,s),l=i}else x||0!=(536870912&n.transformFlags)||(D|=r(n,0));E=o}}function ve(n){if(!E)for(var o=0,r=n;o<r.length;o++){var i=r[o];if(!e.isPrologueDirective(i))return;if(s=i,a=void 0,'"use strict"'===(a=e.getTextOfNodeFromSourceText(t.text,s.expression))||"'use strict'"===a)return void(E=!0)}var s,a}function Te(){ge(t,512,'"'+e.removeFileExtension(t.fileName)+'"')}function Ee(e){t.commonJsModuleIndicator||(t.commonJsModuleIndicator=e,t.externalModuleIndicator||Te())}function Se(e){Ee(e),L(t.symbol.exports,t.symbol,e.left,1048580,0)}function Ce(t){return e.isExportsIdentifier(t)||e.isModuleExportsPropertyAccessExpression(t)||e.isIdentifier(t)&&xe(t)}function xe(t){var n=Ae(t.escapedText);return n&&n.valueDeclaration&&e.isVariableDeclaration(n.valueDeclaration)&&n.valueDeclaration.initializer&&Be(n.valueDeclaration.initializer)}function Be(t){return Ce(t)||e.isAssignmentExpression(t,!0)&&(Be(t.left)||Be(t.right))}function Ae(e){return c.symbol&&c.symbol.exports&&c.symbol.exports.get(e)||c.locals&&c.locals.get(e)}function Ie(t,n,o){var r=Ae(t);(r&&e.isDeclarationOfFunctionOrClassExpression(r)&&(r=r.valueDeclaration.initializer.symbol),r&&48&r.flags)&&L(o?r.members||(r.members=e.createSymbolTable()):r.exports||(r.exports=e.createSymbolTable()),r,n,4,0)}function De(t){E&&_e(t,t.name),e.isBindingPattern(t.name)||(e.isBlockOrCatchScoped(t)?function(e){he(e,2,107455)}(t):e.isParameterDeclaration(t)?ue(t,1,107455):ue(t,1,107454))}function Ne(n,o,r){return t.isDeclarationFile||e.isInAmbientContext(n)||!e.isAsyncFunction(n)||(T|=1024),g&&e.isObjectLiteralOrClassExpressionMethod(n)&&(n.flowNode=g),e.hasDynamicName(n)?ge(n,o,"__computed"):ue(n,o,r)}}();function r(t,n){var o=t.kind;switch(o){case 181:return function(e,t){var n=t,o=e.expression,r=o.kind;e.typeArguments&&(n|=3);(524288&t||function(e,t){switch(t){case 97:return!0;case 179:case 180:return 97===e.expression.kind}return!1}(o,r))&&(n|=192);91===o.kind&&(n|=67108864,16384&t&&(n|=32768));return e.transformFlags=536870912|n,-537396546&n}(t,n);case 182:return function(e,t){var n=t;e.typeArguments&&(n|=3);524288&t&&(n|=192);return e.transformFlags=536870912|n,-537396546&n}(t,n);case 233:return function(t,n){var o=3;0==(2&e.getModifierFlags(t))&&(o|=n);return t.transformFlags=536870912|o,-574674242&o}(t,n);case 185:return function(e,t){var n=t,o=e.expression,r=o.kind,i=o.transformFlags;202!==r&&184!==r||(n|=3);1024&i&&(n|=1024);return e.transformFlags=536870912|n,-536872258&n}(t,n);case 194:return function(e,t){var n=t,o=e.operatorToken.kind,r=e.left.kind;58===o&&178===r?n|=3272:58===o&&177===r?n|=3264:40!==o&&62!==o||(n|=32);return e.transformFlags=536870912|n,-536872258&n}(t,n);case 210:return function(e,t){var n=t;1024&e.expression.transformFlags&&(n|=192);return e.transformFlags=536870912|n,-536872258&n}(t,n);case 146:return function(t,n){var o=n,r=t.name,i=t.initializer,s=t.dotDotDotToken;(t.questionToken||t.type||4096&n||e.isThisIdentifier(r))&&(o|=3);e.hasModifier(t,92)&&(o|=262147);1048576&n&&(o|=8);(8388608&n||i||s)&&(o|=131264);return t.transformFlags=536870912|o,-536872258&o}(t,n);case 187:return function(t,n){var o=192|n;(e.hasModifier(t,2270)||t.typeParameters||t.type)&&(o|=3);e.hasModifier(t,256)&&(o|=16);1048576&n&&(o|=8);16384&n&&(o|=32768);return t.transformFlags=536870912|o,-601249090&o}(t,n);case 186:return function(t,n){var o=n;(e.hasModifier(t,2270)||t.typeParameters||t.type)&&(o|=3);e.hasModifier(t,256)&&(o|=t.asteriskToken?8:16);1048576&n&&(o|=8);163840&n&&(o|=192);t.asteriskToken&&(o|=768);return t.transformFlags=536870912|o,-601281858&o}(t,n);case 228:return function(t,n){var o,r=e.getModifierFlags(t);!t.body||2&r?o=3:(o=33554432|n,(2270&r||t.typeParameters||t.type)&&(o|=3),256&r&&(o|=t.asteriskToken?8:16),1048576&n&&(o|=8),163840&n&&(o|=192),t.asteriskToken&&(o|=768));return t.transformFlags=536870912|o,-601281858&o}(t,n);case 226:return function(e,t){var n=t;n|=8388800,1048576&t&&(n|=8);e.type&&(n|=3);return e.transformFlags=536870912|n,-536872258&n}(t,n);case 227:return function(e,t){var n=33554432|t;8388608&t&&(n|=192);3&e.flags&&(n|=4194496);return e.transformFlags=536870912|n,-546309442&n}(t,n);case 208:return function(t,n){var o,r=t.declarationList.transformFlags;e.hasModifier(t,2)?o=3:(o=n,8388608&r&&(o|=192));return t.transformFlags=536870912|o,-536872258&o}(t,n);case 222:return function(t,n){var o=n;4194304&n&&e.isIterationStatement(t,!0)&&(o|=192);return t.transformFlags=536870912|o,-536872258&o}(t,n);case 229:return function(t,n){var o;e.hasModifier(t,2)?o=3:(o=192|n,(274432&n||t.typeParameters)&&(o|=3),65536&n&&(o|=16384));return t.transformFlags=536870912|o,-539358530&o}(t,n);case 199:return function(e,t){var n=192|t;(274432&t||e.typeParameters)&&(n|=3);65536&t&&(n|=16384);return e.transformFlags=536870912|n,-539358530&n}(t,n);case 259:return function(t,n){var o=n;switch(t.token){case 85:o|=192;break;case 108:o|=3;break;default:e.Debug.fail("Unexpected token for heritage clause")}return t.transformFlags=536870912|o,-536872258&o}(t,n);case 260:return function(t,n){var o=n;t.variableDeclaration?e.isBindingPattern(t.variableDeclaration.name)&&(o|=192):o|=8;return t.transformFlags=536870912|o,-537920834&o}(t,n);case 201:return function(e,t){var n=192|t;e.typeArguments&&(n|=3);return e.transformFlags=536870912|n,-536872258&n}(t,n);case 152:return function(t,n){var o=n;!e.hasModifier(t,2270)&&t.body||(o|=3);1048576&n&&(o|=8);return t.transformFlags=536870912|o,-601015618&o}(t,n);case 149:return function(e,t){var n=3|t;e.initializer&&(n|=8192);return e.transformFlags=536870912|n,-536872258&n}(t,n);case 151:return function(t,n){var o=192|n;(t.decorators||e.hasModifier(t,2270)||t.typeParameters||t.type||!t.body)&&(o|=3);1048576&n&&(o|=8);e.hasModifier(t,256)&&(o|=t.asteriskToken?8:16);t.asteriskToken&&(o|=768);return t.transformFlags=536870912|o,-601015618&o}(t,n);case 153:case 154:return function(t,n){var o=n;(t.decorators||e.hasModifier(t,2270)||t.type||!t.body)&&(o|=3);1048576&n&&(o|=8);return t.transformFlags=536870912|o,-601015618&o}(t,n);case 237:return function(t,n){var o=n;e.isExternalModuleImportEqualsDeclaration(t)||(o|=3);return t.transformFlags=536870912|o,-536872258&o}(t,n);case 179:return function(e,t){var n=t;97===e.expression.kind&&(n|=16384);return e.transformFlags=536870912|n,-536872258&n}(t,n);default:return function(e,t,n){var o=n,r=536872257;switch(t){case 120:case 191:o|=24;break;case 114:case 112:case 113:case 117:case 124:case 76:case 232:case 264:case 184:case 202:case 203:case 131:o|=3;break;case 249:case 250:case 251:case 10:case 252:case 253:case 254:case 255:case 256:o|=4;break;case 13:case 14:case 15:case 16:case 196:case 183:case 262:case 115:case 204:o|=192;break;case 9:e.hasExtendedUnicodeEscape&&(o|=192);break;case 8:48&e.numericLiteralFlags&&(o|=192);break;case 216:e.awaitModifier&&(o|=8),o|=192;break;case 197:o|=16777416;break;case 119:case 133:case 130:case 134:case 136:case 122:case 137:case 105:case 145:case 148:case 150:case 155:case 156:case 157:case 158:case 159:case 160:case 161:case 162:case 163:case 164:case 165:case 166:case 167:case 168:case 230:case 231:case 169:case 170:case 171:case 172:case 173:case 236:o=3,r=-3;break;case 144:o|=2097152,16384&n&&(o|=65536);break;case 198:o|=524480;break;case 263:o|=1048584;break;case 97:o|=192;break;case 99:o|=16384;break;case 174:o|=8388800,524288&n&&(o|=1048584),r=537396545;break;case 175:o|=8388800,r=537396545;break;case 176:o|=192,e.dotDotDotToken&&(o|=524288);break;case 147:o|=4099;break;case 178:r=540087617,2097152&n&&(o|=192),65536&n&&(o|=16384),1048576&n&&(o|=8);break;case 177:case 182:r=537396545,524288&n&&(o|=192);break;case 212:case 213:case 214:case 215:4194304&n&&(o|=192);break;case 265:32768&n&&(o|=192);break;case 219:case 217:case 218:o|=33554432}return e.transformFlags=536870912|o,o&~r}(t,o,n)}}function i(e){if(e>=158&&e<=173)return-3;switch(e){case 181:case 182:case 177:return 537396545;case 233:return 574674241;case 146:return 536872257;case 187:return 601249089;case 186:case 228:return 601281857;case 227:return 546309441;case 229:case 199:return 539358529;case 152:return 601015617;case 151:case 153:case 154:return 601015617;case 119:case 133:case 130:case 136:case 134:case 122:case 137:case 105:case 145:case 148:case 150:case 155:case 156:case 157:case 230:case 231:return-3;case 178:return 540087617;case 260:return 537920833;case 174:case 175:return 537396545;default:return 536872257}}function s(t,n){n.parent=t,e.forEachChild(n,(function(e){return s(n,e)}))}e.bindSourceFile=function(t,n){e.performance.mark("beforeBind"),o(t,n),e.performance.mark("afterBind"),e.performance.measure("Bind","beforeBind","afterBind")},e.computeTransformFlagsForNode=r,e.getTransformFlagsSubtreeExclusions=i}(ts||(ts={})),function(e){e.createGetSymbolWalker=function(t,n,o,r,i,s,a,l,c){return function(u){void 0===u&&(u=function(){return!0});var p=[],d=[];return{walkType:function(t){try{return g(t),{visitedTypes:e.getOwnValues(p),visitedSymbols:e.getOwnValues(d)}}finally{e.clear(p),e.clear(d)}},walkSymbol:function(t){try{return _(t),{visitedTypes:e.getOwnValues(p),visitedSymbols:e.getOwnValues(d)}}finally{e.clear(p),e.clear(d)}}};function g(t){if(t&&(!p[t.id]&&(p[t.id]=t,!_(t.symbol)))){if(32768&t.flags){var n=t,r=n.objectFlags;4&r&&function(t){g(t.target),e.forEach(t.typeArguments,g)}(t),32&r&&function(e){g(e.typeParameter),g(e.constraintType),g(e.templateType),g(e.modifiersType)}(t),3&r&&(f(i=t),e.forEach(i.typeParameters,g),e.forEach(o(i),g),g(i.thisType)),24&r&&f(n)}var i;16384&t.flags&&function(e){g(l(e))}(t),196608&t.flags&&function(t){e.forEach(t.types,g)}(t),262144&t.flags&&function(e){g(e.type)}(t),524288&t.flags&&function(e){g(e.objectType),g(e.indexType),g(e.constraint)}(t)}}function h(o){o.typePredicate&&g(o.typePredicate.type),e.forEach(o.typeParameters,g);for(var r=0,i=o.parameters;r<i.length;r++){_(i[r])}g(t(o)),g(n(o))}function f(e){g(a(e,0)),g(a(e,1));for(var t=r(e),n=0,o=t.callSignatures;n<o.length;n++){h(o[n])}for(var i=0,s=t.constructSignatures;i<s.length;i++){h(s[i])}for(var l=0,c=t.properties;l<c.length;l++){_(c[l])}}function _(t){if(t){var n=e.getSymbolId(t);if(!d[n]){if(d[n]=t,!u(t))return!0;g(i(t)),1952&t.flags&&t.exports.forEach(_),e.forEach(t.declarations,(function(e){if(e.type&&162===e.type.kind){var t=e.type;_(s(c(t.exprName)))}}))}}}}}}(ts||(ts={})),function(e){function t(t){t.trace(e.formatMessage.apply(void 0,arguments))}function n(e,t){return e.traceResolution&&void 0!==t.trace}function o(e,t){return t&&{path:t.path,extension:t.ext,packageId:e}}function r(e){return o(void 0,e)}var i;function s(t){if(t)return e.Debug.assert(e.extensionIsTypeScript(t.extension)),{fileName:t.path,packageId:t.packageId}}function a(e,t,n){return{resolvedModule:e&&{resolvedFileName:e.path,extension:e.extension,isExternalLibraryImport:t,packageId:e.packageId},failedLookupLocations:n}}function l(e,t){try{var n=t.readFile(e);return n?JSON.parse(n):{}}catch(e){return{}}}function c(t,n){return t.typeRoots?t.typeRoots:(t.configFilePath?o=e.getDirectoryPath(t.configFilePath):n.getCurrentDirectory&&(o=n.getCurrentDirectory()),void 0!==o?function(t,n){if(!n.directoryExists)return[e.combinePaths(t,u)];var o;return e.forEachAncestorDirectory(e.normalizePath(t),(function(t){var r=e.combinePaths(t,u);n.directoryExists(r)&&(o||(o=[])).push(r)})),o}(o,n):void 0);var o}e.trace=t,e.isTraceEnabled=n,function(e){e[e.TypeScript=0]="TypeScript",e[e.JavaScript=1]="JavaScript",e[e.DtsOnly=2]="DtsOnly"}(i||(i={})),e.getEffectiveTypeRoots=c;var u=e.combinePaths("node_modules","@types");function p(n,o,i,s,a,l){return e.isExternalModuleNameRelative(o)?function(n,o,r,i,s,a){if(!a.compilerOptions.rootDirs)return;a.traceEnabled&&t(a.host,e.Diagnostics.rootDirs_option_is_set_using_it_to_resolve_relative_module_name_0,o);for(var l,c,u=e.normalizePath(e.combinePaths(r,o)),p=0,d=a.compilerOptions.rootDirs;p<d.length;p++){var g=d[p],h=e.normalizePath(g);e.endsWith(h,e.directorySeparator)||(h+=e.directorySeparator);var f=e.startsWith(u,h)&&(void 0===c||c.length<h.length);a.traceEnabled&&t(a.host,e.Diagnostics.Checking_if_0_is_the_longest_matching_prefix_for_1_2,h,u,f),f&&(c=h,l=g)}if(c){a.traceEnabled&&t(a.host,e.Diagnostics.Longest_matching_prefix_for_0_is_1,u,c);var m=u.substr(c.length);a.traceEnabled&&t(a.host,e.Diagnostics.Loading_0_from_the_root_dir_1_candidate_location_2,m,c,u);var y=i(n,u,s,!_(r,a.host),a);if(y)return y;a.traceEnabled&&t(a.host,e.Diagnostics.Trying_other_entries_in_rootDirs);for(var k=0,b=a.compilerOptions.rootDirs;k<b.length;k++){if((g=b[k])!==l){var v=e.combinePaths(e.normalizePath(g),m);a.traceEnabled&&t(a.host,e.Diagnostics.Loading_0_from_the_root_dir_1_candidate_location_2,m,g,v);var T=i(n,v,s,!_(e.getDirectoryPath(v),a.host),a);if(T)return T}}a.traceEnabled&&t(a.host,e.Diagnostics.Module_resolution_using_rootDirs_has_failed)}return}(n,o,i,s,a,l):function(n,o,i,s,a){if(!a.compilerOptions.baseUrl)return;a.traceEnabled&&t(a.host,e.Diagnostics.baseUrl_option_is_set_to_0_using_this_value_to_resolve_non_relative_module_name_1,a.compilerOptions.baseUrl,o);var l=void 0;a.compilerOptions.paths&&(a.traceEnabled&&t(a.host,e.Diagnostics.paths_option_is_specified_looking_for_a_pattern_to_match_module_name_0,o),l=e.matchPatternOrExact(e.getOwnKeys(a.compilerOptions.paths),o));if(l){var c=e.isString(l)?void 0:e.matchedText(l,o),u=e.isString(l)?l:e.patternText(l);return a.traceEnabled&&t(a.host,e.Diagnostics.Module_name_0_matched_pattern_1,o,u),e.forEach(a.compilerOptions.paths[u],(function(o){var l=c?o.replace("*",c):o,u=e.normalizePath(e.combinePaths(a.compilerOptions.baseUrl,l));a.traceEnabled&&t(a.host,e.Diagnostics.Trying_substitution_0_candidate_module_location_Colon_1,o,l);var p=e.tryGetExtensionFromPath(u);if(void 0!==p){var d=b(u,s,!1,a);if(void 0!==d)return r({path:d,ext:p})}return i(n,u,s,!_(e.getDirectoryPath(u),a.host),a)}))}var p=e.normalizePath(e.combinePaths(a.compilerOptions.baseUrl,o));return a.traceEnabled&&t(a.host,e.Diagnostics.Resolving_module_name_0_relative_to_base_url_1_2,o,a.compilerOptions.baseUrl,p),i(n,p,s,!_(e.getDirectoryPath(p),a.host),a)}(n,o,s,a,l)}function d(t,n,o,r,i){return g(t,e.getDirectoryPath(n),o,r,i,!1)}function g(o,r,s,l,c,u){var d=n(s,l),g=[],_={compilerOptions:s,host:l,traceEnabled:d},m=u?k(i.JavaScript):k(i.TypeScript)||k(i.JavaScript);if(m&&m.value){var y=m.value;return a(y.resolved,y.isExternalLibraryImport,g)}return{resolvedModule:void 0,failedLookupLocations:g};function k(n){var a=p(n,o,r,(function(e,t,n,o,r){return f(e,t,n,o,r,!0)}),g,_);if(a)return O({resolved:a,isExternalLibraryImport:!1});if(e.isExternalModuleNameRelative(o)){var u=e.normalizePathAndParts(e.combinePaths(r,o)),m=u.path,y=u.parts,k=f(n,m,g,!1,_,!0);return k&&O({resolved:k,isExternalLibraryImport:e.contains(y,"node_modules")})}d&&t(l,e.Diagnostics.Loading_module_0_from_node_modules_folder_target_file_type_1,o,i[n]);var b=B(n,o,r,g,_,c);if(b){var v=b.value;return s.preserveSymlinks||(v=v&&__assign({},b.value,{path:h(b.value.path,l,d),extension:b.value.extension})),{value:v&&{resolved:v,isExternalLibraryImport:!0}}}}}function h(n,o,r){if(!o.realpath)return n;var i=e.normalizePath(o.realpath(n));return r&&t(o,e.Diagnostics.Resolving_real_path_for_0_result_1,n,i),i}function f(n,o,s,a,l,c){if(l.traceEnabled&&t(l.host,e.Diagnostics.Loading_module_as_file_Slash_folder_candidate_module_location_0_target_file_type_1,o,i[n]),!e.pathEndsWithDirectorySeparator(o)){if(!a){var u=e.getDirectoryPath(o);_(u,l.host)||(l.traceEnabled&&t(l.host,e.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,u),a=!0)}var p=y(n,o,s,a,l);if(p)return r(p)}a||(_(o,l.host)||(l.traceEnabled&&t(l.host,e.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,o),a=!0));return v(n,o,s,a,l,c)}function _(e,t){return!t.directoryExists||t.directoryExists(e)}function m(e,t,n,o,i){return r(y(e,t,n,o,i))}function y(n,o,r,i,s){var a=k(o,n,r,i,s);if(a)return a;if(e.hasJavaScriptFileExtension(o)){var l=e.removeFileExtension(o);if(s.traceEnabled){var c=o.substring(l.length);t(s.host,e.Diagnostics.File_name_0_has_a_1_extension_stripping_it,o,c)}return k(l,n,r,i,s)}}function k(t,n,o,r,s){if(!r){var a=e.getDirectoryPath(t);a&&(r=!_(a,s.host))}switch(n){case i.DtsOnly:return l(".d.ts");case i.TypeScript:return l(".ts")||l(".tsx")||l(".d.ts");case i.JavaScript:return l(".js")||l(".jsx")}function l(e){var n=b(t+e,o,r,s);return n&&{path:n,ext:e}}}function b(n,o,r,i){if(!r){if(i.host.fileExists(n))return i.traceEnabled&&t(i.host,e.Diagnostics.File_0_exist_use_it_as_a_name_resolution_result,n),n;i.traceEnabled&&t(i.host,e.Diagnostics.File_0_does_not_exist,n)}o.push(n)}function v(e,t,n,r,i,s){void 0===s&&(s=!0);var a=s?E(t,"",n,r,i):{packageJsonContent:void 0,packageId:void 0},l=a.packageJsonContent;return o(a.packageId,T(e,t,n,r,i,l))}function T(n,o,r,s,a,l){var c=l&&function(n,o,r,s,a){var l=function(n,o,r,i){return n?s("typings")||s("types"):s("main");function s(n){if(e.hasProperty(o,n)){var s=o[n];if(e.isString(s)){var a=e.normalizePath(e.combinePaths(r,s));return i.traceEnabled&&t(i.host,e.Diagnostics.package_json_has_0_field_1_that_references_2,n,s,a),a}i.traceEnabled&&t(i.host,e.Diagnostics.Expected_type_of_0_field_in_package_json_to_be_string_got_1,n,typeof s)}else i.traceEnabled&&t(i.host,e.Diagnostics.package_json_does_not_have_a_0_field,n)}}(o!==i.JavaScript,n,r,a);if(!l)return;var c=!_(e.getDirectoryPath(l),a.host),u=b(l,s,c,a);if(u){var p=u&&function(t,n){var o=e.tryGetExtensionFromPath(n);return void 0!==o&&function(e,t){switch(e){case i.JavaScript:return".js"===t||".jsx"===t;case i.TypeScript:return".ts"===t||".tsx"===t||".d.ts"===t;case i.DtsOnly:return".d.ts"===t}}(t,o)?{path:n,ext:o}:void 0}(o,u);if(p)return p;a.traceEnabled&&t(a.host,e.Diagnostics.File_0_has_an_unsupported_extension_so_skipping_it,u)}var d=f(o===i.DtsOnly?i.TypeScript:o,l,s,c,a,!1);if(d)return e.Debug.assert(void 0===d.packageId),{path:d.path,ext:d.extension}}(l,n,o,r,a);if(c)return c;var u=!s&&_(o,a.host);return y(n,e.combinePaths(o,"index"),r,!u,a)}function E(n,o,r,i,s){var a=s.host,c=s.traceEnabled,u=!i&&_(n,a),p=S(n);if(u&&a.fileExists(p)){c&&t(a,e.Diagnostics.Found_package_json_at_0,p);var d=l(p,a);return{found:!0,packageJsonContent:d,packageId:"string"==typeof d.name&&"string"==typeof d.version?{name:d.name,subModuleName:o,version:d.version}:void 0}}return u&&c&&t(a,e.Diagnostics.File_0_does_not_exist,p),r.push(p),{found:!1,packageJsonContent:void 0,packageId:void 0}}function S(t){return e.combinePaths(t,"package.json")}function C(t,n,r,i,s,a){var l,c,u=e.normalizePath(e.combinePaths(r,n)),p=E(u,"",s,!i,a);if(p.found)l=p.packageJsonContent,c=p.packageId;else{var d=x(n),g=d.packageName,h=d.rest;if(""!==h)c=E(e.combinePaths(r,g),h,s,!i,a).packageId}return o(c,y(t,u,s,!i,a)||T(t,u,s,!i,a,l))}function x(t){var n=t.indexOf(e.directorySeparator);return"@"===t[0]&&(n=t.indexOf(e.directorySeparator,n+1)),-1===n?{packageName:t,rest:""}:{packageName:t.slice(0,n),rest:t.slice(n+1)}}function B(e,t,n,o,r,i){return A(e,t,n,o,r,!1,i)}function A(t,n,o,r,i,s,a){var l=a&&a.getOrCreateCacheForModuleName(n);return e.forEachAncestorDirectory(e.normalizeSlashes(o),(function(o){if("node_modules"!==e.getBaseFileName(o)){var a=w(l,n,o,i.traceEnabled,i.host);return a||O(I(t,n,o,r,i,s))}}))}function I(n,o,r,s,a,l){void 0===l&&(l=!1);var c=e.combinePaths(r,"node_modules"),u=_(c,a.host);!u&&a.traceEnabled&&t(a.host,e.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,c);var p=l?void 0:C(n,o,c,u,s,a);if(p)return p;if(n!==i.JavaScript){var d=e.combinePaths(c,"@types"),g=u;return u&&!_(d,a.host)&&(a.traceEnabled&&t(a.host,e.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,d),g=!1),C(i.DtsOnly,function(n,o){var r=N(n);o.traceEnabled&&r!==n&&t(o.host,e.Diagnostics.Scoped_package_detected_looking_in_0,r);return r}(o,a),d,g,s,a)}}e.resolveTypeReferenceDirective=function(o,r,a,l){var u=n(a,l),p={compilerOptions:a,host:l,traceEnabled:u},d=c(a,l);u&&(void 0===r?void 0===d?t(l,e.Diagnostics.Resolving_type_reference_directive_0_containing_file_not_set_root_directory_not_set,o):t(l,e.Diagnostics.Resolving_type_reference_directive_0_containing_file_not_set_root_directory_1,o,d):void 0===d?t(l,e.Diagnostics.Resolving_type_reference_directive_0_containing_file_1_root_directory_not_set,o,r):t(l,e.Diagnostics.Resolving_type_reference_directive_0_containing_file_1_root_directory_2,o,r,d));var g,f=[],m=function(){if(d&&d.length)return u&&t(l,e.Diagnostics.Resolving_with_primary_search_path_0,d.join(", ")),e.forEach(d,(function(n){var r=e.combinePaths(n,o),a=e.getDirectoryPath(r),c=_(a,l);return!c&&u&&t(l,e.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,a),s(v(i.DtsOnly,r,f,!c,p))}));u&&t(l,e.Diagnostics.Root_directory_cannot_be_determined_skipping_primary_search_paths)}(),y=!0;return m||(m=function(){var n,a=r&&e.getDirectoryPath(r);if(void 0!==a){u&&t(l,e.Diagnostics.Looking_up_in_node_modules_folder_initial_location_0,a);var c=B(i.DtsOnly,o,a,f,p,void 0);return!(n=s(c&&c.value))&&u&&t(l,e.Diagnostics.Type_reference_directive_0_was_not_resolved,o),n}u&&t(l,e.Diagnostics.Containing_file_is_not_specified_and_root_directory_cannot_be_determined_skipping_lookup_in_node_modules_folder)}(),y=!1),m&&(a.preserveSymlinks||(m=__assign({},m,{fileName:h(m.fileName,l,u)})),u&&t(l,e.Diagnostics.Type_reference_directive_0_was_successfully_resolved_to_1_primary_Colon_2,o,m.fileName,y),g={primary:y,resolvedFileName:m.fileName,packageId:m.packageId}),{resolvedTypeReferenceDirective:g,failedLookupLocations:f}},e.getAutomaticTypeDirectiveNames=function(t,n){if(t.types)return t.types;var o=[];if(n.directoryExists&&n.getDirectories){var r=c(t,n);if(r)for(var i=0,s=r;i<s.length;i++){var a=s[i];if(n.directoryExists(a))for(var u=0,p=n.getDirectories(a);u<p.length;u++){var d=p[u],g=e.normalizePath(d),h=S(e.combinePaths(a,g));n.fileExists(h)&&null===l(h,n).typings||o.push(e.getBaseFileName(g))}}}return o},e.createModuleResolutionCache=function(t,n){var o=e.createMap(),r=e.createMap();return{getOrCreateCacheForDirectory:function(r){var i=e.toPath(r,t,n),s=o.get(i);s||(s=e.createMap(),o.set(i,s));return s},getOrCreateCacheForModuleName:function(o){if(e.isExternalModuleNameRelative(o))return;var i=r.get(o);i||(i=function(){var o=e.createMap();return{get:r,set:i};function r(r){return o.get(e.toPath(r,t,n))}function i(r,i){var a=e.toPath(r,t,n);if(!o.has(a)){o.set(a,i);for(var l=s(a,i.resolvedModule&&i.resolvedModule.resolvedFileName),c=a;;){var u=e.getDirectoryPath(c);if(u===c||o.has(u))break;if(o.set(u,i),(c=u)===l)break}}}function s(o,r){if(void 0!==r){for(var i=e.toPath(e.getDirectoryPath(r),t,n),s=0;s<Math.min(o.length,i.length)&&o.charCodeAt(s)===i.charCodeAt(s);)s++;var a=o.lastIndexOf(e.directorySeparator,s);if(!(a<0))return o.substr(0,a)}}}(),r.set(o,i));return i}}},e.resolveModuleName=function(o,r,i,s,a){var l=n(i,s);l&&t(s,e.Diagnostics.Resolving_module_0_from_1,o,r);var c=e.getDirectoryPath(r),u=a&&a.getOrCreateCacheForDirectory(c),p=u&&u.get(o);if(p)l&&t(s,e.Diagnostics.Resolution_for_module_0_was_found_in_cache,o);else{var g=i.moduleResolution;switch(void 0===g?(g=e.getEmitModuleKind(i)===e.ModuleKind.CommonJS?e.ModuleResolutionKind.NodeJs:e.ModuleResolutionKind.Classic,l&&t(s,e.Diagnostics.Module_resolution_kind_is_not_specified_using_0,e.ModuleResolutionKind[g])):l&&t(s,e.Diagnostics.Explicitly_specified_module_resolution_kind_Colon_0,e.ModuleResolutionKind[g]),g){case e.ModuleResolutionKind.NodeJs:p=d(o,r,i,s,a);break;case e.ModuleResolutionKind.Classic:p=R(o,r,i,s,a);break;default:e.Debug.fail("Unexpected moduleResolution: "+g)}if(u){u.set(o,p);var h=a.getOrCreateCacheForModuleName(o);h&&h.set(c,p)}}return l&&(p.resolvedModule?t(s,e.Diagnostics.Module_name_0_was_successfully_resolved_to_1,o,p.resolvedModule.resolvedFileName):t(s,e.Diagnostics.Module_name_0_was_not_resolved,o)),p},e.nodeModuleNameResolver=d,e.resolveJavaScriptModule=function(t,n,o){var r=g(t,n,{moduleResolution:e.ModuleResolutionKind.NodeJs,allowJs:!0},o,void 0,!0),i=r.resolvedModule,s=r.failedLookupLocations;if(!i)throw new Error("Could not resolve JS module '"+t+"' starting at '"+n+"'. Looked in: "+s.join(", "));return i.resolvedFileName},e.directoryProbablyExists=_,e.getPackageName=x;var D="__";function N(t){if(e.startsWith(t,"@")){var n=t.replace(e.directorySeparator,D);if(n!==t)return n.slice(1)}return t}function w(n,o,r,i,s){var a=n&&n.get(r);if(a)return i&&t(s,e.Diagnostics.Resolution_for_module_0_was_found_in_cache,o),{value:a.resolvedModule&&{path:a.resolvedModule.resolvedFileName,extension:a.resolvedModule.extension,packageId:a.resolvedModule.packageId}}}function R(t,o,r,s,l){var c=n(r,s),u={compilerOptions:r,host:s,traceEnabled:c},d=[],g=e.getDirectoryPath(o),h=f(i.TypeScript)||f(i.JavaScript);return a(h&&h.value,!1,d);function f(n){var o=p(n,t,g,m,d,u);if(o)return{value:o};var r=l&&l.getOrCreateCacheForModuleName(t);if(e.isExternalModuleNameRelative(t)){var a=e.normalizePath(e.combinePaths(g,t));return O(m(n,a,d,!1,u))}var h=e.forEachAncestorDirectory(g,(function(o){var i=w(r,t,o,c,s);if(i)return i;var a=e.normalizePath(e.combinePaths(o,t));return O(m(n,a,d,!1,u))}));return h||(n===i.TypeScript?function(e,t,n,o){return A(i.DtsOnly,e,t,n,o,!0,void 0)}(t,g,d,u):void 0)}}function O(e){return void 0!==e?{value:e}:void 0}e.getTypesPackageName=function(e){return"@types/"+N(e)},e.getPackageNameFromAtTypesDirectory=function(t){var n=e.removePrefix(t,"@types/");return n!==t?e.stringContains(n,D)?"@"+n.replace(D,e.directorySeparator):n:t},e.classicNameResolver=R,e.loadModuleFromGlobalCache=function(o,r,s,l,c){var u=n(s,l);u&&t(l,e.Diagnostics.Auto_discovery_for_typings_is_enabled_in_project_0_Running_extra_resolution_pass_for_module_1_using_cache_location_2,r,o,c);var p={compilerOptions:s,host:l,traceEnabled:u},d=[];return a(I(i.DtsOnly,o,c,d,p),!0,d)}}(ts||(ts={})),function(e){var t=/^".+"$/,n=1,o=1,r=1,i=1;function s(e){return e.id||(e.id=o,o++),e.id}function a(e){return e.id||(e.id=n,n++),e.id}function l(t,n){var o=e.getModuleInstanceState(t);return 1===o||n&&2===o}function c(t){switch(t.parent.kind){case 242:case 246:return!0;default:return e.isDeclarationName(t)}}function u(e){switch(e.kind){case 239:case 237:case 240:case 242:return!0;case 71:return 242===e.parent.kind;default:return!1}}e.getNodeId=s,e.getSymbolId=a,e.isInstantiatedModule=l,e.createTypeChecker=function(n,o){var p,d,g,h=e.objectAllocator.getSymbolConstructor(),f=e.objectAllocator.getTypeConstructor(),_=e.objectAllocator.getSignatureConstructor(),m=0,y=0,k=0,b=0,v=e.createSymbolTable(),T=e.identity,E=n.getCompilerOptions(),S=e.getEmitScriptTarget(E),C=e.getEmitModuleKind(E),x=!!E.noUnusedLocals||!!E.noUnusedParameters,B=void 0!==E.allowSyntheticDefaultImports?E.allowSyntheticDefaultImports:C===e.ModuleKind.System,A=void 0===E.strictNullChecks?E.strict:E.strictNullChecks,I=void 0===E.strictFunctionTypes?E.strict:E.strictFunctionTypes,D=void 0===E.noImplicitAny?E.strict:E.noImplicitAny,N=void 0===E.noImplicitThis?E.strict:E.noImplicitThis,w=function(){var t,o=n.getResolvedTypeReferenceDirectives();o&&(t=e.createMap(),o.forEach((function(e,o){if(e){var r=n.getSourceFile(e.resolvedFileName);t.set(r.path,o)}})));return{getReferencedExportContainer:Ch,getReferencedImportDeclaration:xh,getReferencedDeclarationWithCollidingName:Ah,isDeclarationWithCollidingName:Ih,isValueAliasDeclaration:function(t){return!(t=e.getParseTreeNode(t))||Dh(t)},hasGlobalName:zh,isReferencedAliasDeclaration:function(t,n){return!(t=e.getParseTreeNode(t))||Oh(t,n)},getNodeCheckFlags:function(t){return(t=e.getParseTreeNode(t))?Fh(t):void 0},isTopLevelValueImportEqualsWithEntityName:Nh,isDeclarationVisible:Lo,isImplementationOfOverload:Ph,isRequiredInitializedParameter:Lh,isOptionalUninitializedParameterProperty:Mh,writeTypeOfDeclaration:Wh,writeReturnTypeOfSignatureDeclaration:Kh,writeTypeOfExpression:jh,isSymbolAccessible:yo,isEntityNameVisible:vo,getConstantValue:function(t){return(t=e.getParseTreeNode(t,Hh))?Vh(t):void 0},collectLinkedAliases:Mo,getReferencedValueDeclaration:Xh,getTypeReferenceSerializationKind:Gh,isOptionalParameter:Ni,moduleExportsSomeValue:Sh,isArgumentsLocalBinding:Eh,getExternalModuleFileFromDeclaration:qh,getTypeReferenceDirectivesForEntityName:function(e){if(!t)return;var n=179===e.kind||71===e.kind&&jl(e)?1156031:794600,o=Vn(e,n,!0);return o&&o!==j?r(o,n):void 0},getTypeReferenceDirectivesForSymbol:r,isLiteralConstDeclaration:Yh,writeLiteralConstValue:Jh,getJsxFactoryEntity:function(){return Nt}};function r(n,o){if(t&&function(n){if(!n.declarations)return!1;var o=n;for(;;){var r=to(o);if(!r)break;o=r}if(o.valueDeclaration&&265===o.valueDeclaration.kind&&512&o.flags)return!1;for(var i=0,s=n.declarations;i<s.length;i++){var a=s[i],l=e.getSourceFileOfNode(a);if(t.has(l.path))return!0}return!1}(n)){for(var r,i=0,s=n.declarations;i<s.length;i++){var a=s[i];if(a.symbol&&a.symbol.flags&o){var l=e.getSourceFileOfNode(a),c=t.get(l.path);if(!c)return;(r||(r=[])).push(c)}}return r}}}(),R=function(){return{typeToTypeNode:function(e,o,r){var i=t(o,r),s=n(e,i);return i.encounteredError?void 0:s},indexInfoToIndexSignatureDeclaration:function(e,n,o,i){var s=t(o,i),a=r(e,n,s);return s.encounteredError?void 0:a},signatureToSignatureDeclaration:function(e,n,o,r){var s=t(o,r),a=i(e,n,s);return s.encounteredError?void 0:a}};function t(e,t){return{enclosingDeclaration:e,flags:t,encounteredError:!1,symbolStack:void 0}}function n(t,a){var c=a.flags&e.NodeBuilderFlags.InTypeAlias;if(a.flags&=~e.NodeBuilderFlags.InTypeAlias,t){if(1&t.flags)return e.createKeywordTypeNode(119);if(2&t.flags)return e.createKeywordTypeNode(136);if(4&t.flags)return e.createKeywordTypeNode(133);if(8&t.flags)return e.createKeywordTypeNode(122);if(256&t.flags&&!(65536&t.flags)){var u=to(t.symbol),p=l(u,a,793064,!1),d=Rr(u)===t?p:e.createQualifiedName(p,Oo(t.symbol,a));return e.createTypeReferenceNode(d,void 0)}if(272&t.flags){var g=l(t.symbol,a,793064,!1);return e.createTypeReferenceNode(g,void 0)}if(32&t.flags)return e.createLiteralTypeNode(e.setEmitFlags(e.createLiteral(t.value),16777216));if(64&t.flags)return e.createLiteralTypeNode(e.createLiteral(t.value));if(128&t.flags)return"true"===t.intrinsicName?e.createTrue():e.createFalse();if(1024&t.flags)return e.createKeywordTypeNode(105);if(2048&t.flags)return e.createKeywordTypeNode(139);if(4096&t.flags)return e.createKeywordTypeNode(95);if(8192&t.flags)return e.createKeywordTypeNode(130);if(512&t.flags)return e.createKeywordTypeNode(137);if(16777216&t.flags)return e.createKeywordTypeNode(134);if(16384&t.flags&&t.isThisType)return a.flags&e.NodeBuilderFlags.InObjectTypeLiteral&&(a.encounteredError||a.flags&e.NodeBuilderFlags.AllowThisInObjectLiteral||(a.encounteredError=!0)),e.createThis();var h=yn(t);if(4&h)return e.Debug.assert(!!(32768&t.flags)),function(t){var r=t.typeArguments||e.emptyArray;if(t.target===Se){if(a.flags&e.NodeBuilderFlags.WriteArrayAsGenericType){var i=n(r[0],a);return e.createTypeReferenceNode("Array",[i])}var s=n(r[0],a);return e.createArrayTypeNode(s)}if(8&t.target.objectFlags){if(r.length>0){var l=o(r.slice(0,es(t)),a);if(l&&l.length>0)return e.createTupleTypeNode(l)}return a.encounteredError||a.flags&e.NodeBuilderFlags.AllowEmptyTuple?e.createTupleTypeNode([]):void(a.encounteredError=!0)}var c=t.target.outerTypeParameters,u=0,p=void 0;if(c)for(var d=c.length;u<d;){var g=u,h=Yi(c[u]);do{u++}while(u<d&&Yi(c[u])===h);if(!e.rangeEquals(c,r,g,u)){var f=o(r.slice(g,u),a),_=f&&e.createNodeArray(f),m=b(h);(71===m.kind?m:m.right).typeArguments=_,p?(e.Debug.assert(!p.right),p=v(p,m),p=e.createQualifiedName(p,void 0)):p=e.createQualifiedName(m,void 0)}}var y=void 0,k=b(t.symbol);p?(e.Debug.assert(!p.right),y=p=v(p,k)):y=k;var T=void 0;if(r.length>0){var E=(t.target.typeParameters||e.emptyArray).length;T=o(r.slice(u,E),a)}return T&&((71===y.kind?y:y.right).typeArguments=void 0),e.createTypeReferenceNode(y,T)}(t);if(16384&t.flags||3&h){g=t.symbol?l(t.symbol,a,793064,!1):e.createIdentifier("?");return e.createTypeReferenceNode(g,void 0)}if(!c&&t.aliasSymbol&&mo(t.aliasSymbol,a.enclosingDeclaration)){g=b(t.aliasSymbol);var f=o(t.aliasTypeArguments,a);return e.createTypeReferenceNode(g,f)}if(196608&t.flags){var _=o(65536&t.flags?Io(t.types):t.types,a);return _&&_.length>0?e.createUnionOrIntersectionTypeNode(65536&t.flags?166:167,_):void(a.encounteredError||a.flags&e.NodeBuilderFlags.AllowEmptyUnionOrIntersection||(a.encounteredError=!0))}if(48&h)return e.Debug.assert(!!(32768&t.flags)),function(t){var n=t.symbol;if(n){if(32&n.flags&&!ar(n)||896&n.flags||s())return function(t,n){var o=l(t,a,n,!1);return e.createTypeQueryNode(o)}(n,107455);if(e.contains(a.symbolStack,n)){var o=No(t);if(o){var r=l(o,a,793064,!1);return e.createTypeReferenceNode(r,void 0)}return e.createKeywordTypeNode(119)}a.symbolStack||(a.symbolStack=[]),a.symbolStack.push(n);var i=k(t);return a.symbolStack.pop(),i}return k(t);function s(){var t=!!(8192&n.flags)&&e.some(n.declarations,(function(t){return e.hasModifier(t,32)})),o=!!(16&n.flags)&&(n.parent||e.forEach(n.declarations,(function(e){return 265===e.parent.kind||234===e.parent.kind})));if(t||o)return e.contains(a.symbolStack,n)}}(t);if(262144&t.flags){var m=n(t.type,a);return e.createTypeOperatorNode(m)}if(524288&t.flags){var y=n(t.objectType,a);m=n(t.indexType,a);return e.createIndexedAccessTypeNode(y,m)}e.Debug.fail("Should be unreachable.")}else a.encounteredError=!0;function k(t){if(ri(t))return function(t){e.Debug.assert(!!(32768&t.flags));var o=t.declaration&&t.declaration.readonlyToken?e.createToken(131):void 0,r=t.declaration&&t.declaration.questionToken?e.createToken(55):void 0,i=s(ti(t),a),l=n(oi(t),a),c=e.createMappedTypeNode(o,i,r,l);return e.setEmitFlags(c,1)}(t);var o=ii(t);if(!o.properties.length&&!o.stringIndexInfo&&!o.numberIndexInfo){if(!o.callSignatures.length&&!o.constructSignatures.length)return e.setEmitFlags(e.createTypeLiteralNode(void 0),1);if(1===o.callSignatures.length&&!o.constructSignatures.length)return i(o.callSignatures[0],160,a);if(1===o.constructSignatures.length&&!o.callSignatures.length)return i(o.constructSignatures[0],161,a)}var c=a.flags;a.flags|=e.NodeBuilderFlags.InObjectTypeLiteral;var u=function(t){for(var o=[],s=0,c=t.callSignatures;s<c.length;s++){var u=c[s];o.push(i(u,155,a))}for(var p=0,d=t.constructSignatures;p<d.length;p++){u=d[p];o.push(i(u,156,a))}t.stringIndexInfo&&o.push(r(t.stringIndexInfo,0,a));t.numberIndexInfo&&o.push(r(t.numberIndexInfo,1,a));var g=t.properties;if(!g)return o;for(var h=0,f=g;h<f.length;h++){var _=f[h],m=cr(_),y=a.enclosingDeclaration;a.enclosingDeclaration=void 0;var k=l(_,a,107455,!0);a.enclosingDeclaration=y;var b=16777216&_.flags?e.createToken(55):void 0;if(8208&_.flags&&!si(m).length)for(var v=0,T=Ti(m,0);v<T.length;v++){var E=i(u=T[v],150,a);E.name=k,E.questionToken=b,o.push(E)}else{var S=m?n(m,a):e.createKeywordTypeNode(119),C=ed(_)?[e.createToken(131)]:void 0,x=e.createPropertySignature(C,k,b,S,void 0);o.push(x)}}return o.length?o:void 0}(o);a.flags=c;var p=e.createTypeLiteralNode(u);return e.setEmitFlags(p,1)}function b(t){return 32&t.flags||!lo(t.escapedName)?l(t,a,793064,!1):e.createIdentifier("")}function v(t,n){if(e.Debug.assert(void 0===t.right),71===n.kind)return t.right=n,t;for(var o=n;71!==o.left.kind;)o=o.left;return t.right=o.left,o.left=t,n}}function o(t,o){if(e.some(t)){for(var r=[],i=0;i<t.length;++i){var s=n(t[i],o);s&&r.push(s)}return r}}function r(t,o,r){var i=e.getNameFromIndexInfo(t)||"x",s=e.createKeywordTypeNode(0===o?136:133),a=e.createParameter(void 0,void 0,void 0,i,void 0,s,void 0),l=n(t.type,r);return e.createIndexSignature(void 0,t.isReadonly?[e.createToken(131)]:void 0,[a],l)}function i(t,o,r){var i,l=t.typeParameters&&t.typeParameters.map((function(e){return s(e,r)})),c=t.parameters.map((function(e){return a(e,r)}));if(t.thisParameter){var u=a(t.thisParameter,r);c.unshift(u)}if(t.typePredicate){var p=t.typePredicate,d=1===p.kind?e.setEmitFlags(e.createIdentifier(p.parameterName),16777216):e.createThisTypeNode(),g=n(p.type,r);i=e.createTypePredicateNode(d,g)}else{var h=Mi(t);i=h&&n(h,r)}return r.flags&e.NodeBuilderFlags.SuppressAnyReturnType?i&&119===i.kind&&(i=void 0):i||(i=e.createKeywordTypeNode(119)),e.createSignatureDeclaration(o,l,c,i)}function s(t,o){var r=l(t.symbol,o,793064,!0),i=Xi(t),s=i&&n(i,o),a=fi(t),c=a&&n(a,o);return e.createTypeParameterDeclaration(r,s,c)}function a(t,o){var r=e.getDeclarationOfKind(t,146);if(un(t)&&t.isRestParameter)return e.createParameter(void 0,void 0,t.isRestParameter?e.createToken(24):void 0,"args",void 0,n(Ne,o),void 0);var i=r.modifiers&&r.modifiers.map(e.getSynthesizedClone),s=e.isRestParameter(r)?e.createToken(24):void 0,a=r.name?71===r.name.kind?e.setEmitFlags(e.getSynthesizedClone(r.name),16777216):function t(n){var o=e.visitEachChild(n,t,e.nullTransformationContext,void 0,t),r=e.nodeIsSynthesized(o)?o:e.getSynthesizedClone(o);return 176===r.kind&&(r.initializer=void 0),e.setEmitFlags(r,16777217)}(r.name):e.symbolName(t),l=Ni(r)?e.createToken(55):void 0,c=cr(t);Lh(r)&&(c=bl(c,2048));var u=n(c,o);return e.createParameter(void 0,i,s,a,l,u,void 0)}function l(t,n,r,i){var s;return!(262144&t.flags)&&(n.enclosingDeclaration||n.flags&e.NodeBuilderFlags.UseFullyQualifiedType)?(s=function t(o,r,i){var s,a=fo(o,n.enclosingDeclaration,r,!1);if(!a||_o(a[0],n.enclosingDeclaration,1===a.length?r:ho(r))){var l=to(a?a[0]:o);if(l){var c=t(l,ho(r),!1);c&&(s=l,a=c.concat(a||[o]))}}if(a)return a;if(i||(s||!e.forEach(o.declarations,ko))&&!(6144&o.flags))return[o]}(t,r,!0),e.Debug.assert(s&&s.length>0)):s=[t],!i||1===s.length||n.encounteredError||n.flags&e.NodeBuilderFlags.AllowQualifedNameInPlaceOfIdentifier||(n.encounteredError=!0),function t(r,i){e.Debug.assert(r&&0<=i&&i<r.length);var s,a=r[i];if(n.flags&e.NodeBuilderFlags.WriteTypeParametersInQualifiedName&&i>0){var l=r[i-1],c=void 0;if(1&e.getCheckFlags(a))c=mr(l);else 524384&jg(l).flags&&(c=_r(a));s=o(c,n)}var u=Oo(a,n),p=e.setEmitFlags(e.createIdentifier(u,s),16777216);return i>0?e.createQualifiedName(t(r,i-1),p):p}(s,s.length-1)}}(),O=cn(4,"undefined");O.declarations=[];var P,L,M=cn(4,"arguments"),F={getNodeCount:function(){return e.sum(n.getSourceFiles(),"nodeCount")},getIdentifierCount:function(){return e.sum(n.getSourceFiles(),"identifierCount")},getSymbolCount:function(){return e.sum(n.getSourceFiles(),"symbolCount")+y},getTypeCount:function(){return m},isUndefinedSymbol:function(e){return e===O},isArgumentsSymbol:function(e){return e===M},isUnknownSymbol:function(e){return e===j},getMergedSymbol:Qn,getDiagnostics:uh,getGlobalDiagnostics:function(){return ph(),It.getGlobalDiagnostics()},getTypeOfSymbolAtLocation:function(t,n){return(n=e.getParseTreeNode(n))?function(t,n){if(t=t.exportSymbol||t,71===n.kind&&(e.isRightSideOfQualifiedNameOrPropertyAccess(n)&&(n=n.parent),e.isPartOfExpression(n)&&!e.isAssignmentTarget(n))){var o=xd(n);if(no(mn(n).resolvedSymbol)===t)return o}return cr(t)}(t,n):Y},getSymbolsOfParameterPropertyDeclaration:function(t,n){return t=e.getParseTreeNode(t,e.isParameter),e.Debug.assert(void 0!==t,"Cannot get symbols of a synthetic parameter that cannot be resolved to a parse-tree node."),function(t,n){var o=t.parent,r=t.parent.parent,i=bn(o.locals,n,107455),s=bn(r.symbol.members,n,107455);if(i&&s)return[i,s];e.Debug.fail("There should exist two symbols, one as property declaration and one as parameter declaration")}(t,e.escapeLeadingUnderscores(n))},getDeclaredTypeOfSymbol:Rr,getPropertiesOfType:li,getPropertyOfType:function(t,n){return bi(t,e.escapeLeadingUnderscores(n))},getIndexInfoOfType:Ci,getSignaturesOfType:Ti,getIndexTypeOfType:xi,getBaseTypes:Sr,getBaseTypeOfLiteralType:dl,getWidenedType:Bl,getTypeFromTypeNode:function(t){return(t=e.getParseTreeNode(t,e.isTypeNode))?da(t):Y},getParameterType:Hp,getReturnTypeOfSignature:Mi,getNullableType:bl,getNonNullableType:vl,typeToTypeNode:R.typeToTypeNode,indexInfoToIndexSignatureDeclaration:R.indexInfoToIndexSignatureDeclaration,signatureToSignatureDeclaration:R.signatureToSignatureDeclaration,getSymbolsInScope:function(t,n){return(t=e.getParseTreeNode(t))?function(t,n){if(dh(t))return[];var o=e.createSymbolTable(),r=!1;return i(),Ai(o);function i(){for(;t;){switch(t.locals&&!kn(t)&&a(t.locals,n),t.kind){case 233:a(eo(t).exports,2623475&n);break;case 232:a(eo(t).exports,8&n);break;case 199:t.name&&s(t.symbol,n);case 229:case 230:r||a(eo(t).members,793064&n);break;case 186:t.name&&s(t.symbol,n)}e.introducesArgumentsExoticObject(t)&&s(M,n),r=e.hasModifier(t,32),t=t.parent}a(st,n)}function s(t,n){if(e.getCombinedLocalAndExportSymbolFlags(t)&n){var r=t.escapedName;o.has(r)||o.set(r,t)}}function a(e,t){t&&e.forEach((function(e){s(e,t)}))}}(t,n):[]},getSymbolAtLocation:function(t){return(t=e.getParseTreeNode(t))?kh(t):void 0},getShorthandAssignmentValueSymbol:function(t){return(t=e.getParseTreeNode(t))?function(e){if(e&&262===e.kind)return Vn(e.name,2204607);return}(t):void 0},getExportSpecifierLocalTargetSymbol:function(t){return(t=e.getParseTreeNode(t,e.isExportSpecifier))?function(e){return e.parent.parent.moduleSpecifier?Nn(e.parent.parent,e):Vn(e.propertyName||e.name,2998271)}(t):void 0},getExportSymbolOfSymbol:function(e){return Qn(e.exportSymbol||e)},getTypeAtLocation:function(t){return(t=e.getParseTreeNode(t))?bh(t):Y},getPropertySymbolOfDestructuringAssignment:function(t){return(t=e.getParseTreeNode(t,e.isIdentifier))?function(e){var t=vh(e.parent.parent);return t&&bi(t,e.escapedText)}(t):void 0},signatureToString:function(t,n,o,r){return xo(t,e.getParseTreeNode(n),o,r)},typeToString:function(t,n,o){return Bo(t,e.getParseTreeNode(n),o)},getSymbolDisplayBuilder:Po,symbolToString:function(t,n,o){return Co(t,e.getParseTreeNode(n),o)},getAugmentedPropertiesOfType:function(t){t=_i(t);var n=e.createSymbolTable(li(t));(Ti(t,0).length||Ti(t,1).length)&&e.forEach(li(Ee),(function(e){n.has(e.escapedName)||n.set(e.escapedName,e)}));return co(n)},getRootSymbols:function t(n){if(6&e.getCheckFlags(n)){var o=[],r=n.escapedName;return e.forEach(_n(n).containingType.types,(function(e){var t=bi(e,r);t&&o.push(t)})),o}if(33554432&n.flags){var i=n;if(i.leftSpread)return t(i.leftSpread).concat(t(i.rightSpread));if(i.syntheticOrigin)return t(i.syntheticOrigin);for(var s=void 0,a=n;a=_n(a).target;)s=a;if(s)return[s]}return[n]},getContextualType:function(t){return(t=e.getParseTreeNode(t,e.isExpression))?cu(t):void 0},getFullyQualifiedName:Hn,getResolvedSignature:function(t,n,o){t=e.getParseTreeNode(t,e.isCallLikeExpression),P=o;var r=t?Np(t,n):void 0;return P=void 0,r},getConstantValue:function(t){return(t=e.getParseTreeNode(t,Hh))?Vh(t):void 0},isValidPropertyAccess:function(t,n){return!!(t=e.getParseTreeNode(t,e.isPropertyAccessOrQualifiedName))&&function(e,t){var n=179===e.kind?e.expression:e.left;return ep(e,n,t,Bl(Bd(n)))}(t,e.escapeLeadingUnderscores(n))},getSignatureFromDeclaration:function(t){return(t=e.getParseTreeNode(t,e.isFunctionLike))?Oi(t):void 0},isImplementationOfOverload:function(t){var n=e.getParseTreeNode(t,e.isFunctionLike);return n?Ph(n):void 0},getImmediateAliasedSymbol:function(t){e.Debug.assert(0!=(2097152&t.flags),"Should only get Alias here.");var n=_n(t);if(!n.immediateTarget){var o=Dn(t);e.Debug.assert(!!o),n.immediateTarget=Rn(o,!0)}return n.immediateTarget},getAliasedSymbol:Ln,getEmitResolver:function(e,t){return uh(e,t),w},getExportsOfModule:Xn,getExportsAndPropertiesOfModule:function(t){var n=Xn(t),o=jn(t);o!==t&&e.addRange(n,li(cr(o)));return n},getSymbolWalker:e.createGetSymbolWalker(Fi,Mi,Sr,ii,cr,Kl,Si,Xi,Qg),getAmbientModules:function(){be||(be=[],st.forEach((function(e,n){t.test(n)&&be.push(e)})));return be},getAllAttributesTypeFromJsxOpeningLikeElement:function(t){return(t=e.getParseTreeNode(t,e.isJsxOpeningLikeElement))?function(e){return Cu(e.tagName)?Ou(e):Pu(e,!0)}(t):void 0},getJsxIntrinsicTagNames:function(){var t=Bu(zt);return t?li(t):e.emptyArray},isOptionalParameter:function(t){return!!(t=e.getParseTreeNode(t,e.isParameter))&&Ni(t)},tryGetMemberInModuleExports:function(t,n){return Yn(e.escapeLeadingUnderscores(t),n)},tryGetMemberInModuleExportsAndProperties:function(t,n){return function(e,t){var n=Yn(e,t);if(!n){var o=jn(t);if(o!==t)return bi(cr(o),e)}return n}(e.escapeLeadingUnderscores(t),n)},tryFindAmbientModuleWithoutAugmentations:function(e){return Di(e,!1)},getApparentType:_i,getUnionType:Hs,createAnonymousType:po,createSignature:Wr,createSymbol:cn,createIndexInfo:zi,getAnyType:function(){return $},getStringType:function(){return ee},getNumberType:function(){return te},createPromiseType:Kp,createArrayType:Ds,getBooleanType:function(){return re},getVoidType:function(){return se},getUndefinedType:function(){return J},getNullType:function(){return Z},getESSymbolType:function(){return ie},getNeverType:function(){return ae},isSymbolAccessible:yo,isArrayLikeType:ll,getAllPossiblePropertiesOfTypes:function(t){var n=Hs(t);if(!(65536&n.flags))return li(n);for(var o=e.createSymbolTable(),r=0,i=t;r<i.length;r++)for(var s=i[r],a=0,l=li(s);a<l.length;a++){var c=l[a].escapedName;o.has(c)||o.set(c,mi(n,c))}return e.arrayFrom(o.values())},getSuggestionForNonexistentProperty:function(e,t){return Ju(e,t)},getSuggestionForNonexistentSymbol:function(t,n,o){return qu(t,e.escapeLeadingUnderscores(n),o)},getBaseConstraintOfType:pi,resolveName:function(t,n,o){return Tn(n,e.escapeLeadingUnderscores(t),o,void 0,void 0,!1)},getJsxNamespace:function(){return e.unescapeLeadingUnderscores(an())}},U=[],H=e.createMap(),V=e.createMap(),G=e.createMap(),W=e.createMap(),K=[],j=cn(4,"unknown"),z=cn(0,"__resolving__"),$=so(1,"any"),X=so(1,"any"),Y=so(1,"unknown"),J=so(2048,"undefined"),q=A?J:so(2099200,"undefined"),Z=so(4096,"null"),Q=A?Z:so(2101248,"null"),ee=so(2,"string"),te=so(4,"number"),ne=so(128,"true"),oe=so(128,"false"),re=((L=Hs([ne,oe])).flags|=8,L.intrinsicName="boolean",L),ie=so(512,"symbol"),se=so(1024,"void"),ae=so(8192,"never"),le=so(8192,"never"),ce=so(16777216,"object"),ue=po(void 0,v,e.emptyArray,e.emptyArray,void 0,void 0),pe=cn(2048,"__type");pe.members=e.createSymbolTable();var de=po(pe,v,e.emptyArray,e.emptyArray,void 0,void 0),ge=po(void 0,v,e.emptyArray,e.emptyArray,void 0,void 0);ge.instantiations=e.createMap();var he=po(void 0,v,e.emptyArray,e.emptyArray,void 0,void 0);he.flags|=8388608;var fe=po(void 0,v,e.emptyArray,e.emptyArray,void 0,void 0),_e=po(void 0,v,e.emptyArray,e.emptyArray,void 0,void 0),me=po(void 0,v,e.emptyArray,e.emptyArray,void 0,void 0),ye=io(16384),ke=io(16384);ke.constraint=ye;var be,ve,Te,Ee,Se,Ce,xe,Be,Ae,Ie,De,Ne,we,Re,Oe,Pe,Le,Me,Fe,Ue,He,Ve,Ge,We,Ke,je,ze,$e,Xe,Ye,Je,qe,Ze,Qe=io(16384),et=Wr(void 0,void 0,void 0,e.emptyArray,$,void 0,0,!1,!1),tt=Wr(void 0,void 0,void 0,e.emptyArray,Y,void 0,0,!1,!1),nt=Wr(void 0,void 0,void 0,e.emptyArray,$,void 0,0,!1,!1),ot=Wr(void 0,void 0,void 0,e.emptyArray,le,void 0,0,!1,!1),rt=zi(ee,!0),it=zi($,!1),st=e.createSymbolTable(),at=0,lt=0,ct=0,ut=!1,pt=ua(""),dt=ua(0),gt=[],ht=[],ft=[],_t=0,mt=[],yt=[],kt=[],bt=[],vt=[],Tt=[],Et=[],St=[],Ct=[],xt=[],Bt=[],At=[],It=e.createDiagnosticCollection();!function(e){e[e.None=0]="None",e[e.TypeofEQString=1]="TypeofEQString",e[e.TypeofEQNumber=2]="TypeofEQNumber",e[e.TypeofEQBoolean=4]="TypeofEQBoolean",e[e.TypeofEQSymbol=8]="TypeofEQSymbol",e[e.TypeofEQObject=16]="TypeofEQObject",e[e.TypeofEQFunction=32]="TypeofEQFunction",e[e.TypeofEQHostObject=64]="TypeofEQHostObject",e[e.TypeofNEString=128]="TypeofNEString",e[e.TypeofNENumber=256]="TypeofNENumber",e[e.TypeofNEBoolean=512]="TypeofNEBoolean",e[e.TypeofNESymbol=1024]="TypeofNESymbol",e[e.TypeofNEObject=2048]="TypeofNEObject",e[e.TypeofNEFunction=4096]="TypeofNEFunction",e[e.TypeofNEHostObject=8192]="TypeofNEHostObject",e[e.EQUndefined=16384]="EQUndefined",e[e.EQNull=32768]="EQNull",e[e.EQUndefinedOrNull=65536]="EQUndefinedOrNull",e[e.NEUndefined=131072]="NEUndefined",e[e.NENull=262144]="NENull",e[e.NEUndefinedOrNull=524288]="NEUndefinedOrNull",e[e.Truthy=1048576]="Truthy",e[e.Falsy=2097152]="Falsy",e[e.Discriminatable=4194304]="Discriminatable",e[e.All=8388607]="All",e[e.BaseStringStrictFacts=933633]="BaseStringStrictFacts",e[e.BaseStringFacts=3145473]="BaseStringFacts",e[e.StringStrictFacts=4079361]="StringStrictFacts",e[e.StringFacts=4194049]="StringFacts",e[e.EmptyStringStrictFacts=3030785]="EmptyStringStrictFacts",e[e.EmptyStringFacts=3145473]="EmptyStringFacts",e[e.NonEmptyStringStrictFacts=1982209]="NonEmptyStringStrictFacts",e[e.NonEmptyStringFacts=4194049]="NonEmptyStringFacts",e[e.BaseNumberStrictFacts=933506]="BaseNumberStrictFacts",e[e.BaseNumberFacts=3145346]="BaseNumberFacts",e[e.NumberStrictFacts=4079234]="NumberStrictFacts",e[e.NumberFacts=4193922]="NumberFacts",e[e.ZeroStrictFacts=3030658]="ZeroStrictFacts",e[e.ZeroFacts=3145346]="ZeroFacts",e[e.NonZeroStrictFacts=1982082]="NonZeroStrictFacts",e[e.NonZeroFacts=4193922]="NonZeroFacts",e[e.BaseBooleanStrictFacts=933252]="BaseBooleanStrictFacts",e[e.BaseBooleanFacts=3145092]="BaseBooleanFacts",e[e.BooleanStrictFacts=4078980]="BooleanStrictFacts",e[e.BooleanFacts=4193668]="BooleanFacts",e[e.FalseStrictFacts=3030404]="FalseStrictFacts",e[e.FalseFacts=3145092]="FalseFacts",e[e.TrueStrictFacts=1981828]="TrueStrictFacts",e[e.TrueFacts=4193668]="TrueFacts",e[e.SymbolStrictFacts=1981320]="SymbolStrictFacts",e[e.SymbolFacts=4193160]="SymbolFacts",e[e.ObjectStrictFacts=6166480]="ObjectStrictFacts",e[e.ObjectFacts=8378320]="ObjectFacts",e[e.FunctionStrictFacts=6164448]="FunctionStrictFacts",e[e.FunctionFacts=8376288]="FunctionFacts",e[e.UndefinedFacts=2457472]="UndefinedFacts",e[e.NullFacts=2340752]="NullFacts"}(Ze||(Ze={}));var Dt,Nt,wt,Rt,Ot,Pt,Lt,Mt,Ft=e.createMapFromTemplate({string:1,number:2,boolean:4,symbol:8,undefined:16384,object:16,function:32}),Ut=e.createMapFromTemplate({string:128,number:256,boolean:512,symbol:1024,undefined:131072,object:2048,function:4096}),Ht=e.createMapFromTemplate({string:ee,number:te,boolean:re,symbol:ie,undefined:J}),Vt=Hs(e.arrayFrom(Ft.keys(),ua)),Gt=!1,Wt=!1,Kt=e.createUnderscoreEscapedMap(),jt="JSX",zt="IntrinsicElements",$t="ElementClass",Xt="ElementAttributesProperty",Yt="ElementChildrenAttribute",Jt="Element",qt="IntrinsicAttributes",Zt="IntrinsicClassAttributes",Qt=e.createMap(),en=e.createMap(),tn=e.createMap(),nn=e.createMap(),on=e.createMap();!function(e){e[e.Type=0]="Type",e[e.ResolvedBaseConstructorType=1]="ResolvedBaseConstructorType",e[e.DeclaredType=2]="DeclaredType",e[e.ResolvedReturnType=3]="ResolvedReturnType"}(Pt||(Pt={})),function(e){e[e.Normal=0]="Normal",e[e.SkipContextSensitive=1]="SkipContextSensitive",e[e.Inferential=2]="Inferential"}(Lt||(Lt={})),function(e){e[e.None=0]="None",e[e.Bivariant=1]="Bivariant",e[e.Strict=2]="Strict"}(Mt||(Mt={}));var rn=e.createSymbolTable();rn.set(O.escapedName,O);var sn=e.and(sh,(function(t){return!e.isAccessor(t)}));return function(){for(var t=0,o=n.getSourceFiles();t<o.length;t++){var r=o[t];e.bindSourceFile(r,E)}for(var i,s=0,a=n.getSourceFiles();s<a.length;s++){r=a[s];if(e.isExternalOrCommonJsModule(r)||hn(st,r.locals),r.patternAmbientModules&&r.patternAmbientModules.length&&(ve=e.concatenate(ve,r.patternAmbientModules)),r.moduleAugmentations.length&&(i||(i=[])).push(r.moduleAugmentations),r.symbol&&r.symbol.globalExports)r.symbol.globalExports.forEach((function(e,t){st.has(t)||st.set(t,e)}))}if(i)for(var l=0,c=i;l<c.length;l++)for(var u=c[l],p=0,d=u;p<d.length;p++){fn(d[p])}(function(t,n,o){function r(t,n){return function(o){return It.add(e.createDiagnosticForNode(o,n,t))}}n.forEach((function(n,i){var s=t.get(i);s?e.forEach(s.declarations,r(e.unescapeLeadingUnderscores(i),o)):t.set(i,n)}))})(st,rn,e.Diagnostics.Declaration_name_conflicts_with_built_in_global_identifier_0),_n(O).type=q,_n(M).type=gs("IArguments",0,!0),_n(j).type=Y,Se=gs("Array",1,!0),Te=gs("Object",0,!0),Ee=gs("Function",0,!0),xe=gs("String",0,!0),Be=gs("Number",0,!0),Ae=gs("Boolean",0,!0),Ie=gs("RegExp",0,!0),Ne=Ds($),we=Ds(X),Ce=Es("ReadonlyArray",1),Re=Ce?Cs(Ce,[$]):Ne,De=Es("ThisType",1)}(),F;function an(){return Dt||(Dt="React",E.jsxFactory?(Nt=e.parseIsolatedEntityName(E.jsxFactory,S))&&(Dt=Qg(Nt).escapedText):E.reactNamespace&&(Dt=e.escapeLeadingUnderscores(E.reactNamespace))),Dt}function ln(t,n,o,r,i){var s=t?e.createDiagnosticForNode(t,n,o,r,i):e.createCompilerDiagnostic(n,o,r,i);It.add(s)}function cn(e,t){y++;var n=new h(33554432|e,t);return n.checkFlags=0,n}function un(e){return 0!=(33554432&e.flags)}function pn(e,t){t.mergeId||(t.mergeId=r,r++),mt[t.mergeId]=e}function dn(t){var n=cn(t.flags,t.escapedName);return n.declarations=t.declarations?t.declarations.slice():[],n.parent=t.parent,t.valueDeclaration&&(n.valueDeclaration=t.valueDeclaration),t.constEnumOnlyModule&&(n.constEnumOnlyModule=!0),t.members&&(n.members=e.cloneMap(t.members)),t.exports&&(n.exports=e.cloneMap(t.exports)),pn(n,t),n}function gn(t,n){if(t.flags&(r=n.flags,i=0,2&r&&(i|=107455),1&r&&(i|=107454),4&r&&(i|=0),8&r&&(i|=900095),16&r&&(i|=106927),32&r&&(i|=899519),64&r&&(i|=792968),256&r&&(i|=899327),128&r&&(i|=899967),512&r&&(i|=106639),8192&r&&(i|=99263),32768&r&&(i|=41919),65536&r&&(i|=74687),262144&r&&(i|=530920),524288&r&&(i|=793064),2097152&r&&(i|=2097152),i))if(1024&t.flags)ln(e.getNameOfDeclaration(n.declarations[0]),e.Diagnostics.Cannot_augment_module_0_with_value_exports_because_it_resolves_to_a_non_module_entity,Co(t));else{var o=2&t.flags||2&n.flags?e.Diagnostics.Cannot_redeclare_block_scoped_variable_0:e.Diagnostics.Duplicate_identifier_0;e.forEach(n.declarations,(function(t){ln(e.getNameOfDeclaration(t)||t,o,Co(n))})),e.forEach(t.declarations,(function(t){ln(e.getNameOfDeclaration(t)||t,o,Co(n))}))}else 512&n.flags&&512&t.flags&&t.constEnumOnlyModule&&!n.constEnumOnlyModule&&(t.constEnumOnlyModule=!1),t.flags|=n.flags,n.valueDeclaration&&(!t.valueDeclaration||233===t.valueDeclaration.kind&&233!==n.valueDeclaration.kind)&&(t.valueDeclaration=n.valueDeclaration),e.addRange(t.declarations,n.declarations),n.members&&(t.members||(t.members=e.createSymbolTable()),hn(t.members,n.members)),n.exports&&(t.exports||(t.exports=e.createSymbolTable()),hn(t.exports,n.exports)),pn(t,n);var r,i}function hn(e,t){t.forEach((function(t,n){var o=e.get(n);o?(33554432&o.flags||(o=dn(o),e.set(n,o)),gn(o,t)):e.set(n,t)}))}function fn(t){var n=t.parent;if(n.symbol.declarations[0]===n)if(e.isGlobalScopeAugmentation(n))hn(st,n.symbol.exports);else{var o=Wn(t,t,e.isInAmbientContext(t.parent.parent)?void 0:e.Diagnostics.Invalid_module_name_in_augmentation_module_0_cannot_be_found,!0);if(!o)return;1920&(o=jn(o)).flags?gn(o=33554432&o.flags?o:dn(o),n.symbol):ln(t,e.Diagnostics.Cannot_augment_module_0_because_it_resolves_to_a_non_module_entity,t.text)}else e.Debug.assert(n.symbol.declarations.length>1)}function _n(e){if(33554432&e.flags)return e;var t=a(e);return yt[t]||(yt[t]={})}function mn(e){var t=s(e);return kt[t]||(kt[t]={flags:0})}function yn(e){return 32768&e.flags?e.objectFlags:0}function kn(t){return 265===t.kind&&!e.isExternalOrCommonJsModule(t)}function bn(t,n,o){if(o){var r=t.get(n);if(r){if(e.Debug.assert(0==(1&e.getCheckFlags(r)),"Should never get an instantiated symbol here."),r.flags&o)return r;if(2097152&r.flags){var i=Ln(r);if(i===j||i.flags&o)return r}}}}function vn(t,o){var r=e.getSourceFileOfNode(t),i=e.getSourceFileOfNode(o);if(r!==i){if(C&&(r.externalModuleIndicator||i.externalModuleIndicator)||!E.outFile&&!E.out||jl(o)||e.isInAmbientContext(t))return!0;if(c(o,t))return!0;var s=n.getSourceFiles();return e.indexOf(s,r)<=e.indexOf(s,i)}if(t.pos<=o.pos){if(176===t.kind){var a=e.getAncestor(o,176);return a?e.findAncestor(a,e.isBindingElement)!==e.findAncestor(t,e.isBindingElement)||t.pos<a.pos:vn(e.getAncestor(t,226),o)}return 226!==t.kind||!function(t,n){var o=e.getEnclosingBlockScopeContainer(t);switch(t.parent.parent.kind){case 208:case 214:case 216:if(An(n,t,o))return!0}return e.isForInOrOfStatement(t.parent.parent)&&An(n,t.parent.parent.expression,o)}(t,o)}if(246===o.parent.kind||243===o.parent.kind&&o.parent.isExportEquals)return!0;if(243===o.kind&&o.isExportEquals)return!0;var l=e.getEnclosingBlockScopeContainer(t);return jl(o)||c(o,t,l);function c(t,n,o){return!!e.findAncestor(t,(function(r){if(r===o)return"quit";if(e.isFunctionLike(r))return!0;if(r.parent&&149===r.parent.kind&&r.parent.initializer===r)if(e.hasModifier(r.parent,32)){if(151===n.kind)return!0}else if(!(149===n.kind&&!e.hasModifier(n,32))||e.getContainingClass(t)!==e.getContainingClass(n))return!0}))}}function Tn(e,t,n,o,r,i,s){return En(e,t,n,o,r,i,bn,s)}function En(t,n,o,r,i,s,a,l){var c,u,p,d,g,h=t,f=t,_=!1;e:for(;t;){if(t.locals&&!kn(t)&&(c=a(t.locals,n,o))){var m=!0;if(e.isFunctionLike(t)&&u&&u!==t.body&&(o&c.flags&793064&&275!==u.kind&&(m=!!(262144&c.flags)&&(u===t.type||146===u.kind||145===u.kind)),107455&o&&1&c.flags&&(m=146===u.kind||u===t.type&&146===c.valueDeclaration.kind)),m)break e;c=void 0}switch(t.kind){case 265:if(!e.isExternalOrCommonJsModule(t))break;_=!0;case 233:var y=eo(t).exports;if(265===t.kind||e.isAmbientModule(t)){if(c=y.get("default")){var k=e.getLocalSymbolForExportDefault(c);if(k&&c.flags&o&&k.escapedName===n)break e;c=void 0}var b=y.get(n);if(b&&2097152===b.flags&&e.getDeclarationOfKind(b,246))break}if(c=a(y,n,2623475&o))break e;break;case 232:if(c=a(eo(t).exports,n,8&o))break e;break;case 149:case 148:if(e.isClassLike(t.parent)&&!e.hasModifier(t,32)){var v=ro(t.parent);v&&v.locals&&a(v.locals,n,107455&o)&&(d=t)}break;case 229:case 199:case 230:if(c=a(eo(t).members,n,793064&o)){if(!Cn(c,t)){c=void 0;break}if(u&&e.hasModifier(u,32))return void ln(f,e.Diagnostics.Static_members_cannot_reference_class_type_parameters);break e}if(199===t.kind&&32&o){var T=t.name;if(T&&n===T.escapedText){c=t.symbol;break e}}break;case 201:if(u===t.expression&&85===t.parent.token){var E=t.parent.parent;if(e.isClassLike(E)&&(c=a(eo(E).members,n,793064&o)))return void(r&&ln(f,e.Diagnostics.Base_class_expressions_cannot_reference_class_type_parameters))}break;case 144:if(g=t.parent.parent,(e.isClassLike(g)||230===g.kind)&&(c=a(eo(g).members,n,793064&o)))return void ln(f,e.Diagnostics.A_computed_property_name_cannot_reference_a_type_parameter_from_its_containing_type);break;case 151:case 150:case 152:case 153:case 154:case 228:case 187:if(3&o&&"arguments"===n){c=M;break e}break;case 186:if(3&o&&"arguments"===n){c=M;break e}if(16&o){var S=t.name;if(S&&n===S.escapedText){c=t.symbol;break e}}break;case 147:t.parent&&146===t.parent.kind&&(t=t.parent),t.parent&&e.isClassElement(t.parent)&&(t=t.parent)}207!==t.kind&&(p=t),u=t,t=t.parent}if(s&&c&&r&&x&&c!==p.symbol&&(c.isReferenced=!0),!c){if(u&&(e.Debug.assert(265===u.kind),u.commonJsModuleIndicator&&"exports"===n))return u.symbol;c=a(st,n,o)}if(c){if(r){if(d){var C=d.name;return void ln(f,e.Diagnostics.Initializer_of_instance_member_variable_0_cannot_reference_identifier_1_declared_in_the_constructor,e.declarationNameToString(C),Sn(i))}if(f&&(2&o||(32&o||384&o)&&107455==(107455&o))){var B=no(c);(2&B.flags||32&B.flags||384&B.flags)&&function(t,n){e.Debug.assert(!!(2&t.flags||32&t.flags||384&t.flags));var o=e.forEach(t.declarations,(function(t){return e.isBlockOrCatchScoped(t)||e.isClassLike(t)||232===t.kind?t:void 0}));e.Debug.assert(void 0!==o,"Declaration to checkResolvedBlockScopedVariable is undefined"),e.isInAmbientContext(o)||vn(o,n)||(2&t.flags?ln(n,e.Diagnostics.Block_scoped_variable_0_used_before_its_declaration,e.declarationNameToString(e.getNameOfDeclaration(o))):32&t.flags?ln(n,e.Diagnostics.Class_0_used_before_its_declaration,e.declarationNameToString(e.getNameOfDeclaration(o))):256&t.flags&&ln(n,e.Diagnostics.Enum_0_used_before_its_declaration,e.declarationNameToString(e.getNameOfDeclaration(o))))}(B,f)}if(c&&_&&107455==(107455&o)){var A=c.declarations;A&&1===A.length&&236===A[0].kind&&ln(f,e.Diagnostics._0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead,e.unescapeLeadingUnderscores(n))}}return c}if(r&&!(f&&(function(t,n,o){if(71===t.kind&&hh(t)||jl(t))return!1;var r=e.getThisContainer(t,!0),i=r;for(;i;){if(e.isClassLike(i.parent)){var s=eo(i.parent);if(!s)break;if(bi(cr(s),n))return ln(t,e.Diagnostics.Cannot_find_name_0_Did_you_mean_the_static_member_1_0,Sn(o),Co(s)),!0;if(i===r&&!e.hasModifier(i,32))if(bi(Rr(s).thisType,n))return ln(t,e.Diagnostics.Cannot_find_name_0_Did_you_mean_the_instance_member_this_0,Sn(o)),!0}i=i.parent}return!1}(f,n,i)||xn(f)||function(t,n,o){if(1920===o){var r=Pn(Tn(t,n,792640,void 0,void 0,!1)),i=t.parent;if(r){if(e.isQualifiedName(i)){e.Debug.assert(i.left===t,"Should only be resolving left side of qualified name as a namespace");var s=i.right.escapedText;if(bi(Rr(r),s))return ln(i,e.Diagnostics.Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_property_1_in_0_with_0_1,e.unescapeLeadingUnderscores(n),e.unescapeLeadingUnderscores(s)),!0}return ln(t,e.Diagnostics._0_only_refers_to_a_type_but_is_being_used_as_a_namespace_here,e.unescapeLeadingUnderscores(n)),!0}}return!1}(f,n,o)||function(t,n,o){if(107455&o){if("any"===n||"string"===n||"number"===n||"boolean"===n||"never"===n)return ln(t,e.Diagnostics._0_only_refers_to_a_type_but_is_being_used_as_a_value_here,e.unescapeLeadingUnderscores(n)),!0;var r=Pn(Tn(t,n,792640,void 0,void 0,!1));if(r&&!(1024&r.flags))return ln(t,e.Diagnostics._0_only_refers_to_a_type_but_is_being_used_as_a_value_here,e.unescapeLeadingUnderscores(n)),!0}return!1}(f,n,o)||function(t,n,o){if(107031&o){if(Pn(Tn(t,n,1024,void 0,void 0,!1)))return ln(t,e.Diagnostics.Cannot_use_namespace_0_as_a_value,e.unescapeLeadingUnderscores(n)),!0}else if(792640&o){if(Pn(Tn(t,n,1024,void 0,void 0,!1)))return ln(t,e.Diagnostics.Cannot_use_namespace_0_as_a_type,e.unescapeLeadingUnderscores(n)),!0}return!1}(f,n,o)))){var I=void 0;l&&_t<10&&(I=qu(h,n,o))&&ln(f,l,Sn(i),I),I||ln(f,r,Sn(i)),_t++}}function Sn(t){return e.isString(t)?e.unescapeLeadingUnderscores(t):e.declarationNameToString(t)}function Cn(e,t){for(var n=0,o=e.declarations;n<o.length;n++){var r=o[n];if(145===r.kind&&r.parent===t)return!0}return!1}function xn(t){var n=Bn(t),o=!(!n||!Vn(n,64,!0));return o&&ln(t,e.Diagnostics.Cannot_extend_an_interface_0_Did_you_mean_implements,e.getTextOfNode(n)),o}function Bn(t){switch(t.kind){case 71:case 179:return t.parent?Bn(t.parent):void 0;case 201:if(e.isEntityNameExpression(t.expression))return t.expression;default:return}}function An(t,n,o){return n&&!!e.findAncestor(t,(function(t){return t===o||e.isFunctionLike(t)?"quit":t===n}))}function In(e){switch(e.kind){case 237:return e;case 239:return e.parent;case 240:return e.parent.parent;case 242:return e.parent.parent.parent;default:return}}function Dn(t){return e.find(t.declarations,e.isAliasSymbolDeclaration)}function Nn(t,n,o){var r=Gn(t,t.moduleSpecifier),i=zn(r,t.moduleSpecifier,o);if(i){var s=n.propertyName||n.name;if(s.escapedText){if(e.isShorthandAmbientModuleSymbol(r))return r;var a=void 0;a=r&&r.exports&&r.exports.get("export=")?bi(cr(i),s.escapedText):function(e,t){if(3&e.flags){var n=e.valueDeclaration.type;if(n)return Pn(bi(da(n),t))}}(i,s.escapedText),a=Pn(a,o);var l=function(e,t,n){if(1536&e.flags)return Pn(Jn(e).get(t),n)}(i,s.escapedText,o);!l&&B&&"default"===s.escapedText&&(l=jn(r,o)||Pn(r,o));var c=l&&a?function(t,n){if(t===j&&n===j)return j;if(794600&t.flags)return t;var o=cn(t.flags|n.flags,t.escapedName);return o.declarations=e.concatenate(t.declarations,n.declarations),o.parent=t.parent||n.parent,t.valueDeclaration&&(o.valueDeclaration=t.valueDeclaration),n.members&&(o.members=n.members),t.exports&&(o.exports=t.exports),o}(a,l):l||a;return c||ln(s,e.Diagnostics.Module_0_has_no_exported_member_1,Hn(r),e.declarationNameToString(s)),c}}}function wn(e,t,n){return e.parent.parent.moduleSpecifier?Nn(e.parent.parent,e,n):Vn(e.propertyName||e.name,t,!1,n)}function Rn(t,n){switch(t.kind){case 237:return function(t,n){return 248===t.moduleReference.kind?jn(Gn(t,e.getExternalModuleImportEqualsDeclarationExpression(t))):Un(t.moduleReference,n)}(t,n);case 239:return function(t,n){var o=Gn(t,t.parent.moduleSpecifier);if(o){var r=void 0;if(e.isShorthandAmbientModuleSymbol(o))r=o;else{var i=o.exports.get("export=");r=i?bi(cr(i),"default"):Pn(o.exports.get("default"),n)}if(r||B){if(!r&&B)return jn(o,n)||Pn(o,n)}else ln(t.name,e.Diagnostics.Module_0_has_no_default_export,Co(o));return r}}(t,n);case 240:return function(e,t){var n=e.parent.parent.moduleSpecifier;return zn(Gn(e,n),n,t)}(t,n);case 242:return function(e,t){return Nn(e.parent.parent.parent,e,t)}(t,n);case 246:return wn(t,901119,n);case 243:return function(e,t){return Vn(e.expression,901119,!1,t)}(t,n);case 236:return function(e,t){return jn(e.parent.symbol,t)}(t,n)}}function On(e,t){return void 0===t&&(t=901119),e&&2097152==(e.flags&(2097152|t))}function Pn(e,t){return!t&&On(e)?Ln(e):e}function Ln(t){e.Debug.assert(0!=(2097152&t.flags),"Should only get Alias here.");var n=_n(t);if(n.target)n.target===z&&(n.target=j);else{n.target=z;var o=Dn(t);e.Debug.assert(!!o);var r=Rn(o);n.target===z?n.target=r||j:ln(o,e.Diagnostics.Circular_definition_of_import_alias_0,Co(t))}return n.target}function Mn(e){var t=eo(e),n=Ln(t);n&&((n===j||107455&n.flags&&!Rh(n))&&Fn(t))}function Fn(t){var n=_n(t);if(!n.referenced){n.referenced=!0;var o=Dn(t);e.Debug.assert(!!o),243===o.kind?yd(o.expression):246===o.kind?yd(o.propertyName||o.name):e.isInternalModuleImportEqualsDeclaration(o)&&yd(o.moduleReference)}}function Un(t,n){return 71===t.kind&&e.isRightSideOfQualifiedNameOrPropertyAccess(t)&&(t=t.parent),71===t.kind||143===t.parent.kind?Vn(t,1920,!1,n):(e.Debug.assert(237===t.parent.kind),Vn(t,901119,!1,n))}function Hn(e){return e.parent?Hn(e.parent)+"."+Co(e):Co(e)}function Vn(t,n,o,r,i){if(!e.nodeIsMissing(t)){var s;if(71===t.kind){var a=1920===n?e.Diagnostics.Cannot_find_namespace_0:e.Diagnostics.Cannot_find_name_0;if(!(s=Tn(i||t,t.escapedText,n,o?void 0:a,t,!0)))return}else if(143===t.kind||179===t.kind){var l=void 0;if(143===t.kind)l=t.left;else{if(179!==t.kind||185!==t.expression.kind&&!e.isEntityNameExpression(t.expression))return;l=t.expression}var c=143===t.kind?t.right:t.name,u=Vn(l,1920,o,!1,i);if(!u||e.nodeIsMissing(c))return;if(u===j)return u;if(!(s=bn(Jn(u),c.escapedText,n)))return void(o||ln(c,e.Diagnostics.Namespace_0_has_no_exported_member_1,Hn(u),e.declarationNameToString(c)))}else{if(185===t.kind)return e.isEntityNameExpression(t.expression)?Vn(t.expression,n,o,r,i):void 0;e.Debug.assertNever(t,"Unknown entity name kind.")}return e.Debug.assert(0==(1&e.getCheckFlags(s)),"Should never get an instantiated symbol here."),s.flags&n||r?s:Ln(s)}}function Gn(t,n){return Wn(t,n,e.Diagnostics.Cannot_find_module_0)}function Wn(e,t,n,o){if(void 0===o&&(o=!1),9===t.kind||13===t.kind){var r=t;return Kn(e,r.text,n,r,o)}}function Kn(t,o,r,i,s){if(void 0===s&&(s=!1),void 0!==o){if(e.startsWith(o,"@types/"))ln(i,e.Diagnostics.Cannot_import_type_declaration_files_Consider_importing_0_instead_of_1,e.removePrefix(o,"@types/"),o);var a=Di(o,!0);if(a)return a;var l=e.getResolvedModule(e.getSourceFileOfNode(t),o),c=l&&e.getResolutionDiagnostic(E,l),u=l&&!c&&n.getSourceFile(l.resolvedFileName);if(u)return u.symbol?Qn(u.symbol):void(r&&ln(i,e.Diagnostics.File_0_is_not_a_module,u.fileName));if(ve){var p=e.findBestPatternMatch(ve,(function(e){return e.pattern}),o);if(p)return Qn(p.symbol)}if(l&&!e.extensionIsTypeScript(l.extension)&&void 0===c||c===e.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type){if(s)ln(i,e.Diagnostics.Invalid_module_name_in_augmentation_Module_0_resolves_to_an_untyped_module_at_1_which_cannot_be_augmented,o,l.resolvedFileName);else if(D&&r){var d=l.isExternalLibraryImport?e.chainDiagnosticMessages(void 0,e.Diagnostics.Try_npm_install_types_Slash_0_if_it_exists_or_add_a_new_declaration_d_ts_file_containing_declare_module_0,o):void 0;d=e.chainDiagnosticMessages(d,e.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type,o,l.resolvedFileName),It.add(e.createDiagnosticForNodeFromMessageChain(i,d))}}else if(r)if(c)ln(i,c,o,l.resolvedFileName);else{var g=e.tryExtractTypeScriptExtension(o);if(g)ln(i,e.Diagnostics.An_import_path_cannot_end_with_a_0_extension_Consider_importing_1_instead,g,e.removeExtension(o,g));else ln(i,r,o)}}}function jn(e,t){return e&&Qn(Pn(e.exports.get("export="),t))||e}function zn(t,n,o){var r=jn(t,o);return o||!r||1539&r.flags||ln(n,e.Diagnostics.Module_0_resolves_to_a_non_module_entity_and_cannot_be_imported_using_this_construct,Co(t)),r}function $n(e){return void 0!==e.exports.get("export=")}function Xn(e){return Ai(qn(e))}function Yn(e,t){var n=qn(t);if(n)return n.get(e)}function Jn(e){return 1536&e.flags?qn(e):e.exports||v}function qn(t){var n=_n(t);return n.resolvedExports||(n.resolvedExports=function(t){var n=[];return o(t=jn(t))||v;function o(t){if(t&&1952&t.flags&&e.pushIfUnique(n,t)){var r=e.cloneMap(t.exports),i=t.exports.get("__export");if(i){for(var s=e.createSymbolTable(),a=e.createMap(),l=0,c=i.declarations;l<c.length;l++){var u=c[l];Zn(s,o(Gn(u,u.moduleSpecifier)),a,u)}a.forEach((function(t,n){var o=t.exportsWithDuplicate;if("export="!==n&&o&&o.length&&!r.has(n))for(var i=0,s=o;i<s.length;i++){var l=s[i];It.add(e.createDiagnosticForNode(l,e.Diagnostics.Module_0_has_already_exported_a_member_named_1_Consider_explicitly_re_exporting_to_resolve_the_ambiguity,a.get(n).specifierText,e.unescapeLeadingUnderscores(n)))}})),Zn(r,s)}return r}}}(t))}function Zn(t,n,o,r){n&&n.forEach((function(n,i){if("default"!==i){var s=t.get(i);if(s){if(o&&r&&s&&Pn(s)!==Pn(n)){var a=o.get(i);a.exportsWithDuplicate?a.exportsWithDuplicate.push(r):a.exportsWithDuplicate=[r]}}else t.set(i,n),o&&r&&o.set(i,{specifierText:e.getTextOfNode(r.moduleSpecifier)})}}))}function Qn(e){var t;return e&&e.mergeId&&(t=mt[e.mergeId])?t:e}function eo(e){return Qn(e.symbol)}function to(e){return Qn(e.parent)}function no(e){return e&&0!=(1048576&e.flags)?Qn(e.exportSymbol):e}function oo(e){return!!(107455&e.flags||2097152&e.flags&&107455&Ln(e).flags)}function ro(t){for(var n=0,o=t.members;n<o.length;n++){var r=o[n];if(152===r.kind&&e.nodeIsPresent(r.body))return r}}function io(e){var t=new f(F,e);return m++,t.id=m,t}function so(e,t){var n=io(e);return n.intrinsicName=t,n}function ao(e,t){var n=io(32768);return n.objectFlags=e,n.symbol=t,n}function lo(e){return 95===e.charCodeAt(0)&&95===e.charCodeAt(1)&&95!==e.charCodeAt(2)&&64!==e.charCodeAt(2)}function co(t){var n;return t.forEach((function(e,t){lo(t)||(n||(n=[]),oo(e)&&n.push(e))})),n||e.emptyArray}function uo(e,t,n,o,r,i){return e.members=t,e.properties=co(t),e.callSignatures=n,e.constructSignatures=o,r&&(e.stringIndexInfo=r),i&&(e.numberIndexInfo=i),e}function po(e,t,n,o,r,i){return uo(ao(16,e),t,n,o,r,i)}function go(t,n){for(var o,r=t;r;r=r.parent){if(r.locals&&!kn(r)&&(o=n(r.locals)))return o;switch(r.kind){case 265:if(!e.isExternalOrCommonJsModule(r))break;case 233:if(o=n(eo(r).exports))return o}}return n(st)}function ho(e){return 107455===e?107455:1920}function fo(t,n,o,r){if(t&&!function(e){if(e.declarations&&e.declarations.length){for(var t=0,n=e.declarations;t<n.length;t++){switch(n[t].kind){case 149:case 151:case 153:case 154:continue;default:return!1}}return!0}return!1}(t)){var i=[];return go(n,s)}function s(c){if(e.pushIfUnique(i,c)){var u=function(i){if(l(i.get(t.escapedName)))return[t];return e.forEachEntry(i,(function(t){if(2097152&t.flags&&"export="!==t.escapedName&&!e.getDeclarationOfKind(t,246)&&!(function(t){return t&&t.declarations&&t.declarations[0]&&e.isNamespaceExportDeclaration(t.declarations[0])}(t)&&n&&e.isExternalModule(e.getSourceFileOfNode(n)))&&(!r||e.some(t.declarations,e.isExternalModuleImportEqualsDeclaration))){var i=Ln(t);if(l(t,i))return[t];var c=i.exports?s(i.exports):void 0;if(c&&a(t,ho(o)))return[t].concat(c)}}))}(c);return i.pop(),u}}function a(e,t){return!_o(e,n,t)||!!fo(e.parent,n,ho(t),r)}function l(n,r){return t===(r||n)&&!e.some(n.declarations,ko)&&a(n,o)}}function _o(t,n,o){var r=!1;return go(n,(function(n){var i=n.get(t.escapedName);return!!i&&(i===t||!!((i=2097152&i.flags&&!e.getDeclarationOfKind(i,246)?Ln(i):i).flags&o)&&(r=!0,!0))})),r}function mo(e,t){return 0===yo(e,t,793064,!1).accessibility}function yo(t,n,o,r){if(t&&n&&!(262144&t.flags)){for(var i=t,s=o;t;){var a=fo(t,n,s,!1);if(a){var l=bo(a[0],r);return l||{accessibility:1,errorSymbolName:Co(i,n,o),errorModuleName:t!==i?Co(t,n,1920):void 0}}s=ho(o),t=to(t)}var c=e.forEach(i.declarations,u);if(c)if(c!==u(n))return{accessibility:2,errorSymbolName:Co(i,n,o),errorModuleName:Co(c)};return{accessibility:1,errorSymbolName:Co(i,n,o)}}return{accessibility:0};function u(t){var n=e.findAncestor(t,ko);return n&&eo(n)}}function ko(t){return e.isAmbientModule(t)||265===t.kind&&e.isExternalOrCommonJsModule(t)}function bo(t,n){var o;if(!e.forEach(t.declarations,(function(t){return!function(t){if(!Lo(t)){var r=In(t);return!(!r||e.hasModifier(r,1)||!Lo(r.parent))&&(n&&(mn(t).isVisible=!0,o=e.appendIfUnique(o,r)),!0)}return!0}(t)})))return{accessibility:0,aliasesToMakeVisible:o}}function vo(t,n){var o;o=162===t.parent.kind||e.isExpressionWithTypeArgumentsInClassExtendsClause(t.parent)?1156031:143===t.kind||179===t.kind||237===t.parent.kind?1920:793064;var r=Qg(t),i=Tn(n,r.escapedText,o,void 0,void 0,!1);return i&&bo(i,!0)||{accessibility:1,errorSymbolName:e.getTextOfNode(r),errorNode:r}}function To(t,n){t.writeKeyword(e.tokenToString(n))}function Eo(t,n){t.writePunctuation(e.tokenToString(n))}function So(e){e.writeSpace(" ")}function Co(t,n,o){return e.usingSingleLineStringWriter((function(e){Po().buildSymbolDisplay(t,e,n,o)}))}function xo(t,n,o,r){return e.usingSingleLineStringWriter((function(e){Po().buildSignatureDisplay(t,e,n,o,r)}))}function Bo(t,n,o){var r=R.typeToTypeNode(t,n,function(t){var n=e.NodeBuilderFlags.None;if(!t)return n;8&t&&(n|=e.NodeBuilderFlags.NoTruncation);256&t&&(n|=e.NodeBuilderFlags.UseFullyQualifiedType);4096&t&&(n|=e.NodeBuilderFlags.SuppressAnyReturnType);1&t&&(n|=e.NodeBuilderFlags.WriteArrayAsGenericType);64&t&&(n|=e.NodeBuilderFlags.WriteTypeArgumentsOfSignature);return n}(o)|e.NodeBuilderFlags.IgnoreErrors|e.NodeBuilderFlags.WriteTypeParametersInQualifiedName);e.Debug.assert(void 0!==r,"should always get typenode");var i=e.createTextWriter(""),s=e.createPrinter({removeComments:!0}),a=n&&e.getSourceFileOfNode(n);s.writeNode(4,r,a,i);var l=i.getText(),c=E.noErrorTruncation||8&o?void 0:100;return c&&l.length>=c?l.substr(0,c-"...".length)+"...":l}function Ao(t,n,o){return e.usingSingleLineStringWriter((function(e){Po().buildTypePredicateDisplay(t,e,n,o)}))}function Io(e){for(var t=[],n=0,o=0;o<e.length;o++){var r=e[o];if(n|=r.flags,!(6144&r.flags)){if(384&r.flags){var i=128&r.flags?re:Ir(r);if(65536&i.flags){var s=i.types.length;if(o+s<=e.length&&e[o+s-1]===i.types[s-1]){t.push(i),o+=s-1;continue}}}t.push(r)}}return 4096&n&&t.push(Z),2048&n&&t.push(J),t||e}function Do(e){return 8===e?"private":16===e?"protected":"public"}function No(t){if(t.symbol&&2048&t.symbol.flags){var n=e.findAncestor(t.symbol.declarations[0].parent,(function(e){return 168!==e.kind}));if(231===n.kind)return eo(n)}}function wo(t){return t&&t.parent&&234===t.parent.kind&&e.isExternalModuleAugmentation(t.parent.parent)}function Ro(t){return 32&t.flags?'"'+e.escapeString(t.value)+'"':""+t.value}function Oo(t,n){if(t.declarations&&t.declarations.length){var o=t.declarations[0],r=e.getNameOfDeclaration(o);if(r)return e.declarationNameToString(r);if(o.parent&&226===o.parent.kind)return e.declarationNameToString(o.parent.name);switch(!n||n.encounteredError||n.flags&e.NodeBuilderFlags.AllowAnonymousIdentifier||(n.encounteredError=!0),o.kind){case 199:return"(Anonymous class)";case 186:case 187:return"(Anonymous function)"}}if(t.syntheticLiteralTypeOrigin){var i=t.syntheticLiteralTypeOrigin.value;if(!e.isIdentifierText(i,E.target))return'"'+e.escapeString(i,34)+'"'}return e.symbolName(t)}function Po(){function t(e,t){t.writeSymbol(Oo(e),e)}function n(n,o,i,s,a,l){var c;function u(n){if(c){if(1&a)if(1&e.getCheckFlags(n))p(mr(2097152&c.flags?Ln(c):c),n.mapper,o,i);else r(c,o,i);!function(t,n){var o=Oo(t),r=o.charCodeAt(0);e.isIdentifierStart(r,S)?(Eo(n,23),n.writeSymbol(o,t)):(Eo(n,21),e.isSingleOrDoubleQuote(r)?n.writeStringLiteral(o):n.writeSymbol(o,t),Eo(n,22))}(n,o)}else t(n,o);c=n}o.trackSymbol(n,i,s),262144&n.flags||!i&&!(256&l)?u(n):function t(n,o,r){var s=fo(n,i,o,!!(2&a));if(!s||_o(s[0],i,1===s.length?o:ho(o))){var l=to(s?s[0]:n);l&&t(l,ho(o),!1)}if(s)for(var p=0,d=s;p<d.length;p++)u(d[p]);else!r&&(!c&&e.forEach(n.declarations,ko)||6144&n.flags)||u(n)}(n,s,!0)}function o(o,r,i,s,a){var l=16416&s,c=!1;return u(o,s);function u(o,a){var l=-1025&a;if(16793231&o.flags)r.writeKeyword(32&s||!Ko(o)?o.intrinsicName:"any");else if(16384&o.flags&&o.isThisType)c&&r.reportInaccessibleThisError(),r.writeKeyword("this");else if(4&yn(o))!function(t,n){var o=t.typeArguments||e.emptyArray;if(t.target!==Se||1&n)if(8&t.target.objectFlags)Eo(r,21),p(t.typeArguments.slice(0,es(t)),26),Eo(r,22);else if(16384&n&&t.symbol.valueDeclaration&&199===t.symbol.valueDeclaration.kind)g(t,n);else{var i=t.target.outerTypeParameters,s=0;if(i)for(var a=i.length;s<a;){var l=s,c=Yi(i[s]);do{s++}while(s<a&&Yi(i[s])===c);e.rangeEquals(i,o,l,s)||(d(c,o,l,s,n),Eo(r,23))}var h=(t.target.typeParameters||e.emptyArray).length;d(t.symbol,o,s,h,n)}else u(o[0],32896),Eo(r,21),Eo(r,22)}(o,l);else if(256&o.flags&&!(65536&o.flags)){var h=to(o.symbol);n(h,r,i,793064,0,l),Rr(h)!==o&&(Eo(r,23),t(o.symbol,r))}else if(3&yn(o)||16656&o.flags)n(o.symbol,r,i,793064,0,l);else if(1024&a||!o.aliasSymbol||!(65536&a||mo(o.aliasSymbol,i)))196608&o.flags?function(e,t){128&t&&Eo(r,19);65536&e.flags?p(Io(e.types),49):p(e.types,48);128&t&&Eo(r,20)}(o,l):48&yn(o)?g(o,l):96&o.flags?r.writeStringLiteral(Ro(o)):262144&o.flags?(128&a&&Eo(r,19),r.writeKeyword("keyof"),So(r),u(o.type,128),128&a&&Eo(r,20)):524288&o.flags?(u(o.objectType,128),Eo(r,21),u(o.indexType,0),Eo(r,22)):(Eo(r,17),So(r),Eo(r,24),So(r),Eo(r,18));else{var f=o.aliasTypeArguments;d(o.aliasSymbol,f,0,e.length(f),l)}}function p(e,t){for(var n=0;n<e.length;n++)n>0&&(26!==t&&So(r),Eo(r,t),So(r)),u(e[n],26===t?0:128)}function d(e,t,o,s,a){if((32&e.flags||!lo(e.escapedName))&&n(e,r,i,793064,0,a),o<s){for(Eo(r,27),u(t[o],512),o++;o<s;)Eo(r,26),So(r),u(t[o],0),o++;Eo(r,29)}}function g(t,o){var s=t.symbol;if(s)if(32&s.flags&&!ar(s)&&!(199===s.valueDeclaration.kind&&16384&o)||896&s.flags)h(t,o);else if(function(){var t=!!(8192&s.flags)&&e.some(s.declarations,(function(t){return e.hasModifier(t,32)})),n=!!(16&s.flags)&&(s.parent||e.some(s.declarations,(function(e){return 265===e.parent.kind||234===e.parent.kind})));if(t||n)return!!(4&o)||e.contains(a,s)}())h(t,o);else if(e.contains(a,s)){var l=No(t);l?n(l,r,i,793064,0,o):To(r,119)}else{a||(a=[]),16&t.objectFlags&&t.symbol&&32&t.symbol.flags?y(t,o):(a.push(s),y(t,o),a.pop())}else y(t,o)}function h(e,t){32768&t&&Eo(r,19),To(r,103),So(r),n(e.symbol,r,i,107455,0,t),32768&t&&Eo(r,20)}function m(e){ed(e)&&(To(r,131),So(r)),n(e,r),16777216&e.flags&&Eo(r,55)}function y(n,o){if(ri(n))!function(e){Eo(r,17),r.writeLine(),r.increaseIndent(),e.declaration.readonlyToken&&(To(r,131),So(r));Eo(r,21),t(ti(e).symbol,r),So(r),To(r,92),So(r),u(ni(e),0),Eo(r,22),e.declaration.questionToken&&Eo(r,55);Eo(r,56),So(r),u(oi(e),0),Eo(r,25),r.writeLine(),r.decreaseIndent(),Eo(r,18)}(n);else{var p=ii(n);if(!p.properties.length&&!p.stringIndexInfo&&!p.numberIndexInfo){if(!p.callSignatures.length&&!p.constructSignatures.length)return Eo(r,17),void Eo(r,18);if(1===p.callSignatures.length&&!p.constructSignatures.length){var d=function(e,t){if(128&t)return!0;if(512&t){var n=e.target&&64&t?e.target.typeParameters:e.typeParameters;return n&&0!==n.length}return!1}(p.callSignatures[0],o);return d&&Eo(r,19),f(p.callSignatures[0],r,i,16|l,void 0,a),void(d&&Eo(r,20))}if(1===p.constructSignatures.length&&!p.callSignatures.length)return 128&o&&Eo(r,19),To(r,94),So(r),f(p.constructSignatures[0],r,i,16|l,void 0,a),void(128&o&&Eo(r,20))}var g=c;c=!0,Eo(r,17),r.writeLine(),r.increaseIndent(),function(t){for(var n=0,o=t.callSignatures;n<o.length;n++){f(v=o[n],r,i,l,void 0,a),Eo(r,25),r.writeLine()}for(var c=0,p=t.constructSignatures;c<p.length;c++){f(v=p[c],r,i,l,1,a),Eo(r,25),r.writeLine()}_(t.stringIndexInfo,r,0,i,s,a),_(t.numberIndexInfo,r,1,i,s,a);for(var d=0,g=t.properties;d<g.length;d++){var h=g[d];if(16384&s){if(4194304&h.flags)continue;24&e.getDeclarationModifierFlagsFromSymbol(h)&&r.reportPrivateInBaseOfClassExpression(e.symbolName(h))}var y=cr(h);if(8208&h.flags&&!si(y).length)for(var k=0,b=Ti(y,0);k<b.length;k++){var v=b[k];m(h),f(v,r,i,l,void 0,a),Eo(r,25),r.writeLine()}else m(h),Eo(r,56),So(r),u(y,16384&s),Eo(r,25),r.writeLine()}}(p),r.decreaseIndent(),Eo(r,18),c=g}}}function r(e,t,n,o){var r=jg(e);(32&r.flags||64&r.flags||524288&r.flags)&&c(_r(e),t,n,o)}function i(e,n,r,i,s){t(e.symbol,n);var a=ci(e);a&&(So(n),To(n,85),So(n),o(a,n,r,i,s));var l=fi(e);l&&(So(n),Eo(n,58),So(n),o(l,n,r,i,s))}function s(n,r,i,s,l){var c=n.valueDeclaration;(c?e.isRestParameter(c):un(n)&&n.isRestParameter)&&Eo(r,24),c&&e.isBindingPattern(c.name)?a(c.name,r,i,s,l):t(n,r),c&&Ni(c)&&Eo(r,55),Eo(r,56),So(r);var u=cr(n);c&&Lh(c)&&(u=bl(u,2048)),o(u,r,i,s,l)}function a(e,t,n,o,r){if(174===e.kind)Eo(t,17),u(e.elements,t,(function(e){return l(e,t,n,o,r)})),Eo(t,18);else if(175===e.kind){Eo(t,21);var i=e.elements;u(i,t,(function(e){return l(e,t,n,o,r)})),i&&i.hasTrailingComma&&Eo(t,26),Eo(t,22)}}function l(n,o,r,i,s){e.isOmittedExpression(n)||(e.Debug.assert(176===n.kind),n.propertyName&&(o.writeProperty(e.getTextOfNode(n.propertyName)),Eo(o,56),So(o)),e.isBindingPattern(n.name)?a(n.name,o,r,i,s):(n.dotDotDotToken&&Eo(o,24),t(n.symbol,o)))}function c(e,t,n,o,r){e&&e.length&&(Eo(t,27),u(e,t,(function(e){return i(e,t,n,o,r)})),Eo(t,29))}function u(e,t,n){for(var o=0;o<e.length;o++)o>0&&(Eo(t,26),So(t)),n(e[o])}function p(e,t,n,r){if(e&&e.length){Eo(n,27);for(var i=512,s=0;s<e.length;s++)s>0&&(Eo(n,26),So(n),i=0),o(t(e[s]),n,r,i);Eo(n,29)}}function d(e,t,n,o,r,i){Eo(n,19),e&&s(e,n,o,r,i);for(var a=0;a<t.length;a++)(a>0||e)&&(Eo(n,26),So(n)),s(t[a],n,o,r,i);Eo(n,20)}function g(t,n,r,i,s){e.isIdentifierTypePredicate(t)?n.writeParameter(t.parameterName):To(n,99),So(n),To(n,126),So(n),o(t.type,n,r,i,s)}function h(e,t,n,r,i){var s=Mi(e);4096&r&&Ko(s)||(16&r?(So(t),Eo(t,36)):Eo(t,56),So(t),e.typePredicate?g(e.typePredicate,t,n,r,i):o(s,t,n,r,i))}function f(e,t,n,o,r,i){1===r&&(To(t,94),So(t)),e.target&&64&o?p(e.target.typeParameters,e.mapper,t,n):c(e.typeParameters,t,n,o,i),d(e.thisParameter,e.parameters,t,n,o,i),h(e,t,n,o,i)}function _(t,n,r,i,s,a){if(t){switch(t.isReadonly&&(To(n,131),So(n)),Eo(n,21),n.writeParameter(t.declaration?e.declarationNameToString(t.declaration.parameters[0].name):"x"),Eo(n,56),So(n),r){case 1:To(n,133);break;case 0:To(n,136)}Eo(n,22),Eo(n,56),So(n),o(t.type,n,i,s,a),Eo(n,25),n.writeLine()}}return Ot||(Ot={buildSymbolDisplay:n,buildTypeDisplay:o,buildTypeParameterDisplay:i,buildTypePredicateDisplay:g,buildParameterDisplay:s,buildDisplayForParametersAndDelimiters:d,buildDisplayForTypeParametersAndDelimiters:c,buildTypeParameterDisplayFromSymbol:r,buildSignatureDisplay:f,buildIndexSignatureDisplay:_,buildReturnTypeDisplay:h})}function Lo(t){if(t){var n=mn(t);return void 0===n.isVisible&&(n.isVisible=!!function(){switch(t.kind){case 176:return Lo(t.parent.parent);case 226:if(e.isBindingPattern(t.name)&&!t.name.elements.length)return!1;case 233:case 229:case 230:case 231:case 228:case 232:case 237:if(e.isExternalModuleAugmentation(t))return!0;var n=Go(t);return 1&e.getCombinedModifierFlags(t)||237!==t.kind&&265!==n.kind&&e.isInAmbientContext(n)?Lo(n):kn(n);case 149:case 148:case 153:case 154:case 151:case 150:if(e.hasModifier(t,24))return!1;case 152:case 156:case 155:case 157:case 146:case 234:case 160:case 161:case 163:case 159:case 164:case 165:case 166:case 167:case 168:return Lo(t.parent);case 239:case 240:case 242:return!1;case 145:case 265:case 236:return!0;case 243:default:return!1}}()),n.isVisible}return!1}function Mo(t){var n;t.parent&&243===t.parent.kind?n=Tn(t.parent,t.escapedText,2998271,e.Diagnostics.Cannot_find_name_0,t,!1):246===t.parent.kind&&(n=wn(t.parent,2998271));var o=[];return n&&function t(n){e.forEach(n,(function(n){mn(n).isVisible=!0;var r=In(n)||n;if(e.pushIfUnique(o,r),e.isInternalModuleImportEqualsDeclaration(n)){var i=Tn(n,Qg(n.moduleReference).escapedText,901119,void 0,void 0,!1);i&&t(i.declarations)}}))}(n.declarations),o}function Fo(e,t){var n=Uo(e,t);if(n>=0){for(var o=gt.length,r=n;r<o;r++)ht[r]=!1;return!1}return gt.push(e),ht.push(!0),ft.push(t),!0}function Uo(e,t){for(var n=gt.length-1;n>=0;n--){if(Ho(gt[n],ft[n]))return-1;if(gt[n]===e&&ft[n]===t)return n}return-1}function Ho(t,n){return 0===n?_n(t).type:2===n?_n(t).declaredType:1===n?t.resolvedBaseConstructorType:3===n?t.resolvedReturnType:void e.Debug.fail("Unhandled TypeSystemPropertyName "+n)}function Vo(){return gt.pop(),ft.pop(),ht.pop()}function Go(t){return(t=e.findAncestor(e.getRootDeclaration(t),(function(e){switch(e.kind){case 226:case 227:case 242:case 241:case 240:case 239:return!1;default:return!0}})))&&t.parent}function Wo(e,t){var n=bi(e,t);return n?cr(n):void 0}function Ko(e){return e&&0!=(1&e.flags)}function jo(e){var t=eo(e);return t&&_n(t).type||Zo(e,!1)}function zo(t){return 144===t.kind&&!e.isStringOrNumericLiteral(t.expression)}function $o(t,n,o){if(8192&(t=kc(t,(function(e){return!(6144&e.flags)}))).flags)return ue;if(65536&t.flags)return bc(t,(function(e){return $o(e,n,o)}));for(var r=e.createSymbolTable(),i=e.createUnderscoreEscapedMap(),s=0,a=n;s<a.length;s++){var l=a[s];i.set(e.getTextOfPropertyName(l),!0)}for(var c=0,u=li(t);c<u.length;c++){var p=u[c],d=i.has(p.escapedName),g=24&e.getDeclarationModifierFlagsFromSymbol(p),h=65536&p.flags&&!(32768&p.flags);d||g||sa(p)||h||r.set(p.escapedName,p)}var f=Ci(t,0),_=Ci(t,1);return po(o,r,e.emptyArray,e.emptyArray,f,_)}function Xo(t){var n,o=t.parent,r=jo(o.parent);if(r===Y)return Y;if(!r)return t.initializer?bd(t):r;if(Ko(r))return r;if(174===o.kind)if(t.dotDotDotToken){if(!Eu(r))return ln(t,e.Diagnostics.Rest_types_may_only_be_created_from_object_types),Y;for(var i=[],s=0,a=o.elements;s<a.length;s++){var l=a[s];l.dotDotDotToken||i.push(l.propertyName||l.name)}n=$o(r,i,t.symbol)}else{var c=t.propertyName||t.name;if(zo(c))return $;var u=e.getTextOfPropertyName(c),p=Wo(r,u);if(!(n=p&&Oc(t,p)||ku(u)&&xi(r,1)||xi(r,0)))return ln(c,e.Diagnostics.Type_0_has_no_property_1_and_no_string_index_signature,Bo(r),e.declarationNameToString(c)),Y}else{var d=Dg(r,o,!1,!1);if(t.dotDotDotToken)n=Ds(d);else{var g=""+e.indexOf(o.elements,t);if(!(n=cl(r)?Wo(r,g):d))return hl(r)?ln(t,e.Diagnostics.Tuple_type_0_with_length_1_cannot_be_assigned_to_tuple_with_length_2,Bo(r),es(r),o.elements.length):ln(t,e.Diagnostics.Type_0_has_no_property_1,Bo(r),g),Y}}return!A||!t.initializer||2048&_l(yd(t.initializer))||(n=nc(n,131072)),t.initializer?Hs([n,yd(t.initializer)],!0):n}function Yo(t){var n=e.getJSDocType(t);if(n)return da(n)}function Jo(t){var n=e.skipParentheses(t);return 177===n.kind&&0===n.elements.length}function qo(e,t){return A&&t?bl(e,2048):e}function Zo(t,n){if(215===t.parent.parent.kind){var o=zs(Ku(t.parent.parent.expression));return 278528&o.flags?o:ee}if(216===t.parent.parent.kind){var r=t.parent.parent;return Ig(r.expression,r.awaitModifier)||$}if(e.isBindingPattern(t.parent))return Xo(t);var i,s,a=e.getEffectiveTypeAnnotationNode(t);if(a)return qo(da(a),t.questionToken&&n);if((D||e.isInJavaScriptFile(t))&&226===t.kind&&!e.isBindingPattern(t.name)&&!(1&e.getCombinedModifierFlags(t))&&!e.isInAmbientContext(t)){if(!(2&e.getCombinedNodeFlags(t)||t.initializer&&(i=t.initializer,s=e.skipParentheses(i),95!==s.kind&&(71!==s.kind||Kl(s)!==O))))return X;if(t.initializer&&Jo(t.initializer))return we}if(146===t.kind){var l=t.parent;if(154===l.kind&&!e.hasDynamicName(l)){var c=e.getDeclarationOfKind(t.parent.symbol,153);if(c){var u=Oi(c),p=ff(l);return p&&t===p?(e.Debug.assert(!p.type),cr(u.thisParameter)):Mi(u)}}var d=void 0;if(d="this"===t.symbol.escapedName?Qc(l):eu(t))return qo(d,t.questionToken&&n)}return t.initializer?qo(d=bd(t),t.questionToken&&n):e.isJsxAttribute(t)?ne:262===t.kind?Gc(t.name):e.isBindingPattern(t.name)?er(t.name,!1,!0):void 0}function Qo(t,n,o){return t.initializer?bd(t):e.isBindingPattern(t.name)?er(t.name,n,o):(o&&D&&!nr(t)&&Il(t,$),$)}function er(t,n,o){return 174===t.kind?function(t,n,o){var r,i=e.createSymbolTable(),s=!1;e.forEach(t.elements,(function(t){var a=t.propertyName||t.name;if(zo(a))s=!0;else if(t.dotDotDotToken)r=zi($,!1);else{var l=e.getTextOfPropertyName(a),c=cn(4|(t.initializer?16777216:0),l);c.type=Qo(t,n,o),c.bindingElement=t,i.set(c.escapedName,c)}}));var a=po(void 0,i,e.emptyArray,e.emptyArray,r,void 0);return n&&(a.pattern=t),s&&(a.objectFlags|=512),a}(t,n,o):function(t,n,o){var r=t.elements,i=e.lastOrUndefined(r);if(0===r.length||!e.isOmittedExpression(i)&&i.dotDotDotToken)return S>=2?As($):Ne;var s=ws(e.map(r,(function(t){return e.isOmittedExpression(t)?$:Qo(t,n,o)})));return n&&((s=Qi(s)).pattern=t),s}(t,n,o)}function tr(e,t){var n=Zo(e,!0);return n?(t&&Dl(e,n),261===e.kind?n:Bl(n)):(n=e.dotDotDotToken?Ne:$,t&&D&&(nr(e)||Il(e,n)),n)}function nr(t){var n=e.getRootDeclaration(t);return Gd(146===n.kind?n.parent:n)}function or(t){var n,o=_n(t);if(!o.type){if(4194304&t.flags)return o.type=(n=Rr(to(t))).typeParameters?Zi(n,e.map(n.typeParameters,(function(e){return $}))):n;var r=t.valueDeclaration;if(e.isCatchClauseVariableDeclarationOrBindingElement(r))return o.type=$;if(243===r.kind)return o.type=Bd(r.expression);if(e.isInJavaScriptFile(r)&&e.isJSDocPropertyLikeTag(r)&&r.typeExpression)return o.type=da(r.typeExpression.type);if(!Fo(t,0))return Y;var i=void 0;i=194===r.kind||179===r.kind&&194===r.parent.kind?function(t){for(var n,o=[],r=!1,i=!1,s=0,a=t.declarations;s<a.length;s++){var l=a[s],c=194===l.kind?l:179===l.kind?e.getAncestor(l,194):void 0;if(!c)return Y;e.isPropertyAccessExpression(c.left)&&99===c.left.expression.kind&&(152===e.getThisContainer(c,!1).kind?r=!0:i=!0);var u=Yo(c.parent);if(u){var p=Bl(u);if(n){if(n!==Y&&p!==Y&&!Ia(n,p)){var d=e.getNameOfDeclaration(l);ln(d,e.Diagnostics.Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_type_2,e.declarationNameToString(d),Bo(n),Bo(p))}}else n=p}else n||o.push(gl(yd(c.right)))}return Bl(qo(n||Hs(o,!0),i&&!r))}(t):tr(r,!0),Vo()||(i=lr(t)),o.type=i}return o.type}function rr(t){if(t){if(153===t.kind){var n=e.getEffectiveReturnTypeNode(t);return n&&da(n)}var o=e.getEffectiveSetAccessorTypeAnnotationNode(t);return o&&da(o)}}function ir(e){return Li(Oi(e))}function sr(t){var n=_n(t);if(!n.type){var o=e.getDeclarationOfKind(t,153),r=e.getDeclarationOfKind(t,154);if(o&&e.isInJavaScriptFile(o)){var i=Yo(o);if(i)return n.type=i}if(!Fo(t,0))return Y;var s=void 0,a=rr(o);if(a)s=a;else{var l=rr(r);l?s=l:o&&o.body?s=zp(o):(D&&(r?ln(r,e.Diagnostics.Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation,Co(t)):(e.Debug.assert(!!o,"there must existed getter as we are current checking either setter or getter in this function"),ln(o,e.Diagnostics.Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation,Co(t)))),s=$)}if(!Vo())if(s=$,D)ln(e.getDeclarationOfKind(t,153),e.Diagnostics._0_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions,Co(t));n.type=s}return n.type}function ar(e){var t=Er(xr(e));return 540672&t.flags?t:void 0}function lr(t){return e.getEffectiveTypeAnnotationNode(t.valueDeclaration)?(ln(t.valueDeclaration,e.Diagnostics._0_is_referenced_directly_or_indirectly_in_its_own_type_annotation,Co(t)),Y):(D&&ln(t.valueDeclaration,e.Diagnostics._0_implicitly_has_type_any_because_it_does_not_have_a_type_annotation_and_is_referenced_directly_or_indirectly_in_its_own_initializer,Co(t)),$)}function cr(t){return 1&e.getCheckFlags(t)?function(t){var n=_n(t);if(!n.type)if(100===b)ln(t.valueDeclaration,e.Diagnostics.Generic_type_instantiation_is_excessively_deep_and_possibly_infinite),n.type=Y;else{if(!Fo(t,0))return Y;b++;var o=Ea(cr(n.target),n.mapper);b--,Vo()||(o=lr(t)),n.type=o}return n.type}(t):7&t.flags?or(t):9136&t.flags?function(t){var n=_n(t);if(!n.type)if(1536&t.flags&&e.isShorthandAmbientModuleSymbol(t))n.type=$;else{var o=ao(16,t);if(32&t.flags){var r=ar(t);n.type=r?Ks([o,r]):o}else n.type=A&&16777216&t.flags?bl(o,2048):o}return n.type}(t):8&t.flags?function(e){var t=_n(e);return t.type||(t.type=Nr(e)),t.type}(t):98304&t.flags?sr(t):2097152&t.flags?function(e){var t=_n(e);if(!t.type){var n=Ln(e);t.type=107455&n.flags?cr(n):Y}return t.type}(t):Y}function ur(e,t){return void 0!==e&&void 0!==t&&0!=(4&yn(e))&&e.target===t}function pr(e){return 4&yn(e)?e.target:e}function dr(t,n){return function t(o){if(7&yn(o)){var r=pr(o);return r===n||e.forEach(Sr(r),t)}if(131072&o.flags)return e.forEach(o.types,t)}(t)}function gr(t,n){for(var o=0,r=n;o<r.length;o++){var i=wr(eo(r[o]));t=e.appendIfUnique(t,i)}return t}function hr(t,n){for(;;){if(!(t=t.parent))return;switch(t.kind){case 229:case 199:case 230:case 155:case 156:case 150:case 160:case 161:case 273:case 228:case 151:case 186:case 187:case 231:case 282:case 172:var o=hr(t,n);if(172===t.kind)return e.append(o,wr(eo(t.typeParameter)));var r=gr(o,e.getEffectiveTypeParameterDeclarations(t)||e.emptyArray),i=n&&(229===t.kind||199===t.kind||230===t.kind)&&xr(eo(t)).thisType;return i?e.append(r,i):r}}}function fr(t){return hr(32&t.flags?t.valueDeclaration:e.getDeclarationOfKind(t,230))}function _r(e){for(var t,n=0,o=e.declarations;n<o.length;n++){var r=o[n];if(230===r.kind||229===r.kind||199===r.kind||231===r.kind){var i=r;i.typeParameters&&(t=gr(t,i.typeParameters))}}return t}function mr(t){return e.concatenate(fr(t),_r(t))}function yr(e){var t=Ti(e,1);if(1===t.length){var n=t[0];return!n.typeParameters&&1===n.parameters.length&&n.hasRestParameter&&Up(n.parameters[0])===Ne}return!1}function kr(e){if(Cr(e)&&Ti(e,1).length>0)return!0;if(540672&e.flags){var t=pi(e);return t&&Cr(t)&&yr(t)}return!1}function br(t){var n=t.symbol.valueDeclaration;if(e.isInJavaScriptFile(n)){var o=e.getJSDocAugmentsTag(n);if(o)return o.class}return e.getClassExtendsHeritageClauseElement(n)}function vr(t,n,o){var r=e.length(n),i=e.isInJavaScriptFile(o);return e.filter(Ti(t,1),(function(t){return(i||r>=wi(t.typeParameters))&&r<=e.length(t.typeParameters)}))}function Tr(t,n,o){var r=vr(t,n,o),i=e.map(n,da);return e.sameMap(r,(function(t){return e.some(t.typeParameters)?Ui(t,i,e.isInJavaScriptFile(o)):t}))}function Er(t){if(!t.resolvedBaseConstructorType){var n=t.symbol.valueDeclaration,o=e.getClassExtendsHeritageClauseElement(n),r=br(t);if(!r)return t.resolvedBaseConstructorType=J;if(!Fo(t,1))return Y;var i=Bd(r.expression);if(o&&r!==o&&(e.Debug.assert(!o.typeArguments),Bd(o.expression)),163840&i.flags&&ii(i),!Vo())return ln(t.symbol.valueDeclaration,e.Diagnostics._0_is_referenced_directly_or_indirectly_in_its_own_base_expression,Co(t.symbol)),t.resolvedBaseConstructorType=Y;if(!(1&i.flags||i===Q||kr(i)))return ln(r.expression,e.Diagnostics.Type_0_is_not_a_constructor_function_type,Bo(i)),t.resolvedBaseConstructorType=Y;t.resolvedBaseConstructorType=i}return t.resolvedBaseConstructorType}function Sr(t){return t.resolvedBaseTypes||(8&t.objectFlags?t.resolvedBaseTypes=[Ds(Hs(t.typeParameters))]:96&t.symbol.flags?(32&t.symbol.flags&&function(t){t.resolvedBaseTypes=e.emptyArray;var n=_i(Er(t));if(!(163841&n.flags))return;var o,r=br(t),i=ls(r),s=n&&n.symbol?Rr(n.symbol):void 0;if(n.symbol&&32&n.symbol.flags&&function(e){var t=e.outerTypeParameters;if(t){var n=t.length-1,o=e.typeArguments;return t[n].symbol!==o[n].symbol}return!0}(s))o=ts(r,n.symbol,i);else if(1&n.flags)o=n;else{var a=Tr(n,r.typeArguments,r);if(!a.length)return void ln(r.expression,e.Diagnostics.No_base_constructor_has_the_specified_number_of_type_arguments);o=Mi(a[0])}if(o===Y)return;if(!Cr(o))return void ln(r.expression,e.Diagnostics.Base_constructor_return_type_0_is_not_a_class_or_interface_type,Bo(o));if(t===o||dr(o,t))return void ln(t.symbol.valueDeclaration,e.Diagnostics.Type_0_recursively_references_itself_as_a_base_type,Bo(t,void 0,1));t.resolvedBaseTypes=[o]}(t),64&t.symbol.flags&&function(t){t.resolvedBaseTypes=t.resolvedBaseTypes||e.emptyArray;for(var n=0,o=t.symbol.declarations;n<o.length;n++){var r=o[n];if(230===r.kind&&e.getInterfaceBaseTypeNodes(r))for(var i=0,s=e.getInterfaceBaseTypeNodes(r);i<s.length;i++){var a=s[i],l=da(a);l!==Y&&(Cr(l)?t===l||dr(l,t)?ln(r,e.Diagnostics.Type_0_recursively_references_itself_as_a_base_type,Bo(t,void 0,1)):t.resolvedBaseTypes===e.emptyArray?t.resolvedBaseTypes=[l]:t.resolvedBaseTypes.push(l):ln(a,e.Diagnostics.An_interface_may_only_extend_a_class_or_another_interface))}}}(t)):e.Debug.fail("type must be class or interface")),t.resolvedBaseTypes}function Cr(t){return 16809985&t.flags&&!ri(t)||131072&t.flags&&!e.forEach(t.types,(function(e){return!Cr(e)}))}function xr(t){var n=_n(t);if(!n.declaredType){var o=32&t.flags?1:2,r=n.declaredType=ao(o,t),i=fr(t),s=_r(t);(i||s||1===o||!function(t){for(var n=0,o=t.declarations;n<o.length;n++){var r=o[n];if(230===r.kind){if(64&r.flags)return!1;var i=e.getInterfaceBaseTypeNodes(r);if(i)for(var s=0,a=i;s<a.length;s++){var l=a[s];if(e.isEntityNameExpression(l.expression)){var c=Vn(l.expression,793064,!0);if(!c||!(64&c.flags)||xr(c).thisType)return!1}}}}return!0}(t))&&(r.objectFlags|=4,r.typeParameters=e.concatenate(i,s),r.outerTypeParameters=i,r.localTypeParameters=s,r.instantiations=e.createMap(),r.instantiations.set(Ji(r.typeParameters),r),r.target=r,r.typeArguments=r.typeParameters,r.thisType=io(16384),r.thisType.isThisType=!0,r.thisType.symbol=t,r.thisType.constraint=r)}return n.declaredType}function Br(t){var n=t.initializer;if(!n)return!e.isInAmbientContext(t);switch(n.kind){case 9:case 8:return!0;case 192:return 38===n.operator&&8===n.operand.kind;case 71:return e.nodeIsMissing(n)||!!eo(t.parent).exports.get(n.escapedText);default:return!1}}function Ar(e){var t=_n(e);if(void 0!==t.enumKind)return t.enumKind;for(var n=!1,o=0,r=e.declarations;o<r.length;o++){var i=r[o];if(232===i.kind)for(var s=0,a=i.members;s<a.length;s++){var l=a[s];if(l.initializer&&9===l.initializer.kind)return t.enumKind=1;Br(l)||(n=!0)}}return t.enumKind=n?0:1}function Ir(e){return 256&e.flags&&!(65536&e.flags)?Rr(to(e.symbol)):e}function Dr(e){var t=_n(e);if(t.declaredType)return t.declaredType;if(1===Ar(e)){k++;for(var n=[],o=0,r=e.declarations;o<r.length;o++){var i=r[o];if(232===i.kind)for(var s=0,a=i.members;s<a.length;s++){var l=a[s],c=ua(Uh(l),k,eo(l));_n(eo(l)).declaredType=c,n.push(c)}}if(n.length){var u=Hs(n,!1,e,void 0);return 65536&u.flags&&(u.flags|=256,u.symbol=e),t.declaredType=u}}var p=io(16);return p.symbol=e,t.declaredType=p}function Nr(e){var t=_n(e);if(!t.declaredType){var n=Dr(to(e));t.declaredType||(t.declaredType=n)}return t.declaredType}function wr(e){var t=_n(e);if(!t.declaredType){var n=io(16384);n.symbol=e,t.declaredType=n}return t.declaredType}function Rr(e){return Or(e)||Y}function Or(t){return 96&t.flags?xr(t):524288&t.flags?function(t){var n=_n(t);if(!n.declaredType){if(!Fo(t,2))return Y;var o=e.find(t.declarations,(function(e){return 283===e.kind||231===e.kind})),r=283===o.kind?o.typeExpression:o.type,i=r?da(r):Y;if(Vo()){var s=_r(t);s&&(n.typeParameters=s,n.instantiations=e.createMap(),n.instantiations.set(Ji(s),i))}else i=Y,ln(o.name,e.Diagnostics.Type_alias_0_circularly_references_itself,Co(t));n.declaredType=i}return n.declaredType}(t):262144&t.flags?wr(t):384&t.flags?Dr(t):8&t.flags?Nr(t):2097152&t.flags?function(e){var t=_n(e);return t.declaredType||(t.declaredType=Rr(Ln(e))),t.declaredType}(t):void 0}function Pr(e){switch(e.kind){case 119:case 136:case 133:case 122:case 137:case 134:case 105:case 139:case 95:case 130:case 173:return!0;case 164:return Pr(e.elementType);case 159:return function(e){if(e.typeArguments)for(var t=0,n=e.typeArguments;t<n.length;t++)if(!Pr(n[t]))return!1;return!0}(e)}return!1}function Lr(t){var n=e.getEffectiveTypeAnnotationNode(t);return n?Pr(n):!t.initializer}function Mr(t){if(t.declarations&&1===t.declarations.length){var n=t.declarations[0];if(n)switch(n.kind){case 149:case 148:return Lr(n);case 151:case 150:case 152:return function(t){if(152!==t.kind){var n=e.getEffectiveReturnTypeNode(t);if(!n||!Pr(n))return!1}for(var o=0,r=t.parameters;o<r.length;o++)if(!Lr(r[o]))return!1;return!0}(n)}}return!1}function Fr(t,n,o){for(var r=e.createSymbolTable(),i=0,s=t;i<s.length;i++){var a=s[i];r.set(a.escapedName,o&&Mr(a)?a:ba(a,n))}return r}function Ur(e,t){for(var n=0,o=t;n<o.length;n++){var r=o[n];e.has(r.escapedName)||e.set(r.escapedName,r)}}function Hr(e){if(!e.declaredProperties){var t=e.symbol;e.declaredProperties=co(t.members),e.declaredCallSignatures=Pi(t.members.get("__call")),e.declaredConstructSignatures=Pi(t.members.get("__new")),e.declaredStringIndexInfo=$i(t,0),e.declaredNumberIndexInfo=$i(t,1)}return e}function Vr(t,n){if(4&yn(t)){var o=t.target,r=t.typeArguments;if(e.length(o.typeParameters)===e.length(r))return Zi(o,e.concatenate(r,[n||o.thisType]))}else if(131072&t.flags)return Ks(e.map(t.types,(function(e){return Vr(e,n)})));return t}function Gr(t,n,o,r){var i,s,a,l,c,u;e.rangeEquals(o,r,0,o.length)?(i=T,s=n.symbol?n.symbol.members:e.createSymbolTable(n.declaredProperties),a=n.declaredCallSignatures,l=n.declaredConstructSignatures,c=n.declaredStringIndexInfo,u=n.declaredNumberIndexInfo):(i=_a(o,r),s=Fr(n.declaredProperties,i,1===o.length),a=fa(n.declaredCallSignatures,i),l=fa(n.declaredConstructSignatures,i),c=Sa(n.declaredStringIndexInfo,i),u=Sa(n.declaredNumberIndexInfo,i));var p=Sr(n);if(p.length){n.symbol&&s===n.symbol.members&&(s=e.createSymbolTable(n.declaredProperties));for(var d=e.lastOrUndefined(r),g=0,h=p;g<h.length;g++){var f=h[g],_=d?Vr(Ea(f,i),d):f;Ur(s,li(_)),a=e.concatenate(a,Ti(_,0)),l=e.concatenate(l,Ti(_,1)),c||(c=_===$?zi($,!1):Ci(_,0)),u=u||Ci(_,1)}}uo(t,s,a,l,c,u)}function Wr(e,t,n,o,r,i,s,a,l){var c=new _(F);return c.declaration=e,c.typeParameters=t,c.parameters=o,c.thisParameter=n,c.resolvedReturnType=r,c.typePredicate=i,c.minArgumentCount=s,c.hasRestParameter=a,c.hasLiteralTypes=l,c}function Kr(e){return Wr(e.declaration,e.typeParameters,e.thisParameter,e.parameters,e.resolvedReturnType,e.typePredicate,e.minArgumentCount,e.hasRestParameter,e.hasLiteralTypes)}function jr(e,t,n,o,r){for(var i=0,s=e;i<s.length;i++){var a=s[i];if(rl(a,t,n,o,r,Da))return a}}function zr(t,n,o){if(n.typeParameters){if(o>0)return;for(var r=1;r<t.length;r++)if(!jr(t[r],n,!1,!1,!1))return;return[n]}var i=void 0;for(r=0;r<t.length;r++){var s=r===o?n:jr(t[r],n,!0,!0,!0);if(!s)return;i=e.appendIfUnique(i,s)}return i}function $r(t,n){for(var o=e.map(t,(function(e){return Ti(e,n)})),r=void 0,i=0;i<o.length;i++)for(var s=0,a=o[i];s<a.length;s++){var l=a[s];if(!r||!jr(r,l,!1,!0,!0)){var c=zr(o,l,i);if(c){var u=l;if(c.length>1){if(u=Kr(l),e.forEach(c,(function(e){return e.thisParameter}))){var p=Hs(e.map(c,(function(e){return cr(e.thisParameter)||$})),!0);u.thisParameter=El(l.thisParameter,p)}u.resolvedReturnType=void 0,u.unionSignatures=c}(r||(r=[])).push(u)}}}return r||e.emptyArray}function Xr(e,t){for(var n=[],o=!1,r=0,i=e;r<i.length;r++){var s=Ci(i[r],t);if(!s)return;n.push(s.type),o=o||s.isReadonly}return zi(Hs(n,!0),o)}function Yr(e,t){return e?t?Ks([e,t]):e:t}function Jr(e,t){return e?t?zi(Ks([e.type,t.type]),e.isReadonly&&t.isReadonly):e:t}function qr(e,t){return e&&t&&zi(Hs([e.type,t.type]),e.isReadonly||t.isReadonly)}function Zr(t){for(var n,o,r=e.emptyArray,i=e.emptyArray,s=t.types,a=e.countWhere(s,yr),l=function(l){var c=t.types[l];if(0===a||a===s.length&&0===l||!yr(c)){var u=Ti(c,1);u.length&&a>0&&(u=e.map(u,(function(e){var t=Kr(e);return t.resolvedReturnType=function(e,t,n){for(var o=[],r=0;r<t.length;r++)r===n?o.push(e):yr(t[r])&&o.push(Mi(Ti(t[r],1)[0]));return Ks(o)}(Mi(e),s,l),t}))),i=e.concatenate(i,u)}r=e.concatenate(r,Ti(c,0)),n=Jr(n,Ci(c,0)),o=Jr(o,Ci(c,1))},c=0;c<s.length;c++)l(c);uo(t,v,r,i,n,o)}function Qr(t){var n=t.symbol;if(t.target)uo(t,i=Fr(si(t.target),t.mapper,!1),o=fa(Ti(t.target,0),t.mapper),r=fa(Ti(t.target,1),t.mapper),s=Sa(Ci(t.target,0),t.mapper),l=Sa(Ci(t.target,1),t.mapper));else if(2048&n.flags){var o=Pi((i=n.members).get("__call")),r=Pi(i.get("__new"));uo(t,i,o,r,s=$i(n,0),l=$i(n,1))}else{var i=v,s=void 0;if(n.exports&&(i=Jn(n)),32&n.flags){var a=Er(c=xr(n));704512&a.flags?Ur(i=e.createSymbolTable(co(i)),li(a)):a===$&&(s=zi($,!1))}var l=384&n.flags?rt:void 0;if(uo(t,i,e.emptyArray,e.emptyArray,s,l),8208&n.flags&&(t.callSignatures=Pi(n)),32&n.flags){var c=xr(n);(r=Pi(n.members.get("__constructor"))).length||(r=function(t){var n=Ti(Er(t),1);if(0===n.length)return[Wr(void 0,t.localTypeParameters,void 0,e.emptyArray,t,void 0,0,!1,!1)];for(var o=br(t),r=e.isInJavaScriptFile(o),i=ls(o),s=e.length(i),a=[],l=0,c=n;l<c.length;l++){var u=c[l],p=wi(u.typeParameters),d=e.length(u.typeParameters);if((r||s>=p)&&s<=d){var g=d?Hi(u,Ri(i,u.typeParameters,p,r)):Kr(u);g.typeParameters=t.localTypeParameters,g.resolvedReturnType=t,a.push(g)}}return a}(c)),t.constructSignatures=r}}}function ei(t){var n,o=e.createSymbolTable();uo(t,v,e.emptyArray,e.emptyArray,void 0,void 0);var r=ti(t),i=ni(t),s=oi(t),a=_i(function(e){if(!e.modifiersType){var t=e.declaration.typeParameter.constraint;if(170===t.kind)e.modifiersType=Ea(da(t.type),e.mapper||T);else{var n=ni(ea(e.declaration)),o=n&&16384&n.flags?ci(n):n;e.modifiersType=o&&262144&o.flags?Ea(o.type,e.mapper||T):ue}}return e.modifiersType}(t)),l=!!t.declaration.readonlyToken,c=!!t.declaration.questionToken;if(170===t.declaration.typeParameter.constraint.kind){for(var u=0,p=li(a);u<p.length;u++){var d=p[u];h(js(d),d)}(1&a.flags||Ci(a,0))&&h(ee)}else{var g=540672&i.flags?_i(i):i;yc(262144&g.flags?zs(_i(g.type)):g,h)}function h(i,u){var p;"object"==typeof u&&(p=u);var d=_a([r],[i]),g=t.mapper?ma(t.mapper,d):d,h=Ea(s,g);if(32&i.flags){var f=e.escapeLeadingUnderscores(i.value),_=bi(a,f),m=cn(4|(c||!!(_&&16777216&_.flags)?16777216:0),f);m.checkFlags=l||_&&ed(_)?8:0,m.type=h,p&&(m.syntheticOrigin=p,m.declarations=p.declarations),m.syntheticLiteralTypeOrigin=i,o.set(f,m)}else 3&i.flags&&(n=zi(h,l))}uo(t,o,e.emptyArray,e.emptyArray,n,void 0)}function ti(e){return e.typeParameter||(e.typeParameter=wr(eo(e.declaration.typeParameter)))}function ni(e){return e.constraintType||(e.constraintType=Ea(ci(ti(e)),e.mapper||T)||Y)}function oi(e){return e.templateType||(e.templateType=e.declaration.type?Ea(qo(da(e.declaration.type),!!e.declaration.questionToken),e.mapper||T):Y)}function ri(e){return 32&yn(e)&&Ys(ni(e))}function ii(t){return t.members||(32768&t.flags?4&t.objectFlags?function(t){var n=Hr(t.target),o=e.concatenate(n.typeParameters,[n.thisType]);Gr(t,n,o,t.typeArguments&&t.typeArguments.length===o.length?t.typeArguments:e.concatenate(t.typeArguments,[t]))}(t):3&t.objectFlags?function(t){Gr(t,Hr(t),e.emptyArray,e.emptyArray)}(t):16&t.objectFlags?Qr(t):32&t.objectFlags&&ei(t):65536&t.flags?function(e){var t=$r(e.types,0),n=$r(e.types,1),o=Xr(e.types,0),r=Xr(e.types,1);uo(e,v,t,n,o,r)}(t):131072&t.flags&&Zr(t)),t}function si(t){return 32768&t.flags?ii(t).properties:e.emptyArray}function ai(e,t){if(32768&e.flags){var n=ii(e).members.get(t);if(n&&oo(n))return n}}function li(t){return 196608&(t=_i(t)).flags?function(t){if(!t.resolvedProperties){for(var n=e.createSymbolTable(),o=0,r=t.types;o<r.length;o++){for(var i=0,s=li(r[o]);i<s.length;i++){var a=s[i];if(!n.has(a.escapedName)){var l=ki(t,a.escapedName);l&&n.set(a.escapedName,l)}}if(65536&t.flags)break}t.resolvedProperties=co(n)}return t.resolvedProperties}(t):si(t)}function ci(e){return di(e)?Xi(e):void 0}function ui(e){var t=qs(e);if(t)return t;var n=pi(e.objectType),o=pi(e.indexType);return n||o?Zs(n||e.objectType,o||e.indexType):void 0}function pi(e){if(737280&e.flags){var t=gi(e);if(t!==fe&&t!==_e)return t}else if(262144&e.flags)return ee}function di(e){return gi(e)!==_e}function gi(t){var n,o;if(!t.resolvedBaseConstraint){n=[];var r=i(t);t.resolvedBaseConstraint=o?_e:Vr(r||fe,t)}return t.resolvedBaseConstraint;function i(t){if(!e.contains(n,t)){n.push(t);var r=function(e){if(16384&e.flags){var t=Xi(e);return e.isThisType?t:t?i(t):void 0}if(196608&e.flags){for(var n=e.types,o=[],r=0,s=n;r<s.length;r++){var a=i(s[r]);a&&o.push(a)}return 65536&e.flags&&o.length===n.length?Hs(o):131072&e.flags&&o.length?Ks(o):void 0}if(262144&e.flags)return ee;if(524288&e.flags){var l=qs(e);if(l)return i(l);var c=i(e.objectType),u=i(e.indexType),p=c&&u?Zs(c,u):void 0;return p&&p!==Y?i(p):void 0}if(ri(e))return ue;return e}(t);return n.pop(),r}o=!0}}function hi(t){if(t.default)t.default===me&&(t.default=_e);else if(t.target){var n=hi(t.target);t.default=n?Ea(n,t.mapper):fe}else{t.default=me;var o=t.symbol&&e.forEach(t.symbol.declarations,(function(t){return e.isTypeParameterDeclaration(t)&&t.default})),r=o?da(o):fe;t.default===me&&(t.default=r)}return t.default}function fi(e){var t=hi(e);return t!==fe&&t!==_e?t:void 0}function _i(e){var t=540672&e.flags?pi(e)||ue:e;return 131072&t.flags?function(e){return e.resolvedApparentType||(e.resolvedApparentType=Vr(e,e))}(t):262178&t.flags?xe:84&t.flags?Be:136&t.flags?Ae:512&t.flags?hs(S>=2):16777216&t.flags?ue:t}function mi(t,n){for(var o,r=t.types,i=65536&t.flags,s=i?24:0,a=i?0:16777216,l=4,c=0,u=0,p=r;u<p.length;u++){if((k=_i(p[u]))!==Y){var d=(y=bi(k,n))?e.getDeclarationModifierFlagsFromSymbol(y):0;!y||d&s?i&&(c|=16):(a&=y.flags,o=e.appendIfUnique(o,y),c|=(ed(y)?8:0)|(24&d?0:64)|(16&d?128:0)|(8&d?256:0)|(32&d?512:0),Gu(y)||(l=2))}}if(o){if(1===o.length&&!(16&c))return o[0];for(var g=[],h=[],f=void 0,_=0,m=o;_<m.length;_++){var y;(y=m[_]).declarations&&e.addRange(h,y.declarations);var k=cr(y);f?k!==f&&(c|=32):f=k,g.push(k)}var b=cn(4|a,n);return b.checkFlags=l|c,b.containingType=t,b.declarations=h,b.type=i?Hs(g):Ks(g),b}}function yi(t,n){var o=t.propertyCache||(t.propertyCache=e.createSymbolTable()),r=o.get(n);return r||(r=mi(t,n))&&o.set(n,r),r}function ki(t,n){var o=yi(t,n);return!o||16&e.getCheckFlags(o)?void 0:o}function bi(e,t){if(32768&(e=_i(e)).flags){var n=ii(e),o=n.members.get(t);if(o&&oo(o))return o;if(n===he||n.callSignatures.length||n.constructSignatures.length){var r=ai(Ee,t);if(r)return r}return ai(Te,t)}if(196608&e.flags)return ki(e,t)}function vi(t,n){if(229376&t.flags){var o=ii(t);return 0===n?o.callSignatures:o.constructSignatures}return e.emptyArray}function Ti(e,t){return vi(_i(e),t)}function Ei(e,t){if(229376&e.flags){var n=ii(e);return 0===t?n.stringIndexInfo:n.numberIndexInfo}}function Si(e,t){var n=Ei(e,t);return n&&n.type}function Ci(e,t){return Ei(_i(e),t)}function xi(e,t){return Si(_i(e),t)}function Bi(e,t){if(Tl(e)){for(var n=[],o=0,r=li(e);o<r.length;o++){var i=r[o];(0===t||ku(i.escapedName))&&n.push(cr(i))}if(n.length)return Hs(n,!0)}}function Ai(e){var t=[];return e.forEach((function(e,n){lo(n)||t.push(e)})),t}function Ii(t){if(e.isInJavaScriptFile(t)){if(t.type&&272===t.type.kind)return!0;var n=e.getJSDocParameterTags(t);if(n)for(var o=0,r=n;o<r.length;o++){var i=r[o];if(i.isBracketed)return!0;if(i.typeExpression)return 272===i.typeExpression.type.kind}}}function Di(t,n){if(!e.isExternalModuleNameRelative(t)){var o=bn(st,'"'+t+'"',512);return o&&n?Qn(o):o}}function Ni(t){if(e.hasQuestionToken(t)||Ii(t))return!0;if(t.initializer){var n=t.parent,o=Oi(n),r=e.indexOf(n.parameters,t);return e.Debug.assert(r>=0),r>=o.minArgumentCount}var i=e.getImmediatelyInvokedFunctionExpression(t.parent);return!!i&&(!t.type&&!t.dotDotDotToken&&e.indexOf(t.parent.parameters,t)>=i.arguments.length)}function wi(t){var n,o=0;if(t)for(var r=0;r<t.length;r++)(n=t[r]).symbol&&e.forEach(n.symbol.declarations,(function(t){return e.isTypeParameterDeclaration(t)&&t.default}))||(o=r+1);return o}function Ri(t,n,o,r){var i=e.length(n);if(i){var s=e.length(t);if((r||s>=o)&&s<=i){t||(t=[]);for(var a=s;a<i;a++)t[a]=Gl(r);for(a=s;a<i;a++){var l=_a(n,t),c=fi(n[a]);t[a]=c?Ea(c,l):Gl(r)}}}return t}function Oi(t){var n,o,r,i=mn(t);if(!i.resolvedSignature){for(var s=[],a=!1,l=0,c=void 0,u=void 0,p=e.getImmediatelyInvokedFunctionExpression(t),d=e.isJSDocConstructSignature(t),g=!p&&!d&&e.isInJavaScriptFile(t)&&!e.hasJSDocParameterTags(t),h=d?1:0;h<t.parameters.length;h++){var f=t.parameters[h],_=f.symbol;if(_&&4&_.flags&&!e.isBindingPattern(f.name))_=Tn(f,_.escapedName,107455,void 0,void 0,!1);0===h&&"this"===_.escapedName?(u=!0,c=f.symbol):s.push(_),f.type&&173===f.type.kind&&(a=!0),f.initializer||f.questionToken||f.dotDotDotToken||p&&s.length>p.arguments.length&&!f.type||Ii(f)||g||(l=s.length)}if(!(153!==t.kind&&154!==t.kind||e.hasDynamicName(t)||u&&c)){var m=153===t.kind?154:153,y=e.getDeclarationOfKind(t.symbol,m);y&&(c=(r=ff(y))&&r.symbol)}var k=152===t.kind?xr(Qn(t.parent.symbol)):void 0,b=k?k.localTypeParameters:function(t){var n;return e.forEach(e.getEffectiveTypeParameterDeclarations(t),(function(t){var o=wr(t.symbol);n=e.appendIfUnique(n,o)})),n}(t),v=function(t,n,o){if(n)return da(t.parameters[0].type);if(o)return o;var r=e.getEffectiveReturnTypeNode(t);if(r)return da(r);if(153===t.kind&&!e.hasDynamicName(t)){return rr(e.getDeclarationOfKind(t.symbol,154))}if(e.nodeIsMissing(t.body))return $}(t,d,k),T=t.type&&158===t.type.kind?(n=t.type,71===(o=n.parameterName).kind?{kind:1,parameterName:o?o.escapedText:void 0,parameterIndex:o?Dd(n.parent.parameters,o):void 0,type:da(n.type)}:{kind:0,type:da(n.type)}):void 0,E=e.hasRestParameter(t);if(!E&&e.isInJavaScriptFile(t)&&function(t){var n=mn(t);void 0===n.containsArgumentsReference&&(8192&n.flags?n.containsArgumentsReference=!0:n.containsArgumentsReference=o(t.body));return n.containsArgumentsReference;function o(t){if(!t)return!1;switch(t.kind){case 71:return"arguments"===t.escapedText&&e.isPartOfExpression(t);case 149:case 151:case 153:case 154:return 144===t.name.kind&&o(t.name);default:return!e.nodeStartsNewLexicalEnvironment(t)&&!e.isPartOfTypeNode(t)&&e.forEachChild(t,o)}}}(t)){E=!0;var S=cn(3,"args");S.type=Ne,S.isRestParameter=!0,s.push(S)}i.resolvedSignature=Wr(t,b,c,s,v,T,l,E,a)}return i.resolvedSignature}function Pi(t){if(!t)return e.emptyArray;for(var n=[],o=0;o<t.declarations.length;o++){var r=t.declarations[o];switch(r.kind){case 160:case 161:case 228:case 151:case 150:case 152:case 155:case 156:case 157:case 153:case 154:case 186:case 187:case 273:if(o>0&&r.body){var i=t.declarations[o-1];if(r.parent===i.parent&&r.kind===i.kind&&r.pos===i.end)break}n.push(Oi(r))}}return n}function Li(e){if(e.thisParameter)return cr(e.thisParameter)}function Mi(t){if(!t.resolvedReturnType){if(!Fo(t,3))return Y;var n=void 0;if(n=t.target?Ea(Mi(t.target),t.mapper):t.unionSignatures?Hs(e.map(t.unionSignatures,Mi),!0):zp(t.declaration),!Vo()&&(n=$,D)){var o=t.declaration,r=e.getNameOfDeclaration(o);r?ln(r,e.Diagnostics._0_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions,e.declarationNameToString(r)):ln(o,e.Diagnostics.Function_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions)}t.resolvedReturnType=n}return t.resolvedReturnType}function Fi(t){if(t.hasRestParameter){var n=cr(e.lastOrUndefined(t.parameters));if(4&yn(n)&&n.target===Se)return n.typeArguments[0]}return $}function Ui(t,n,o){n=Ri(n,t.typeParameters,wi(t.typeParameters),o);var r=t.instantiations||(t.instantiations=e.createMap()),i=Ji(n),s=r.get(i);return s||r.set(i,s=Hi(t,n)),s}function Hi(e,t){return ka(e,_a(e.typeParameters,t),!0)}function Vi(e){return e.typeParameters?e.erasedSignatureCache||(e.erasedSignatureCache=function(e){return ka(e,(t=e.typeParameters,_a(t,void 0)),!0);var t}(e)):e}function Gi(t){return t.typeParameters?t.canonicalSignatureCache||(t.canonicalSignatureCache=function(t){return Ui(t,e.map(t.typeParameters,(function(e){return e.target&&!ci(e.target)?e.target:e})),e.isInJavaScriptFile(t.declaration))}(t)):t}function Wi(t){if(!t.isolatedSignatureType){var n=152===t.declaration.kind||156===t.declaration.kind,o=ao(16);o.members=v,o.properties=e.emptyArray,o.callSignatures=n?e.emptyArray:[t],o.constructSignatures=n?[t]:e.emptyArray,t.isolatedSignatureType=o}return t.isolatedSignatureType}function Ki(e){return e.members.get("__index")}function ji(e,t){var n=1===t?133:136,o=Ki(e);if(o)for(var r=0,i=o.declarations;r<i.length;r++){var s=i[r];if(1===s.parameters.length){var a=s.parameters[0];if(a&&a.type&&a.type.kind===n)return s}}}function zi(e,t,n){return{type:e,isReadonly:t,declaration:n}}function $i(t,n){var o=ji(t,n);if(o)return zi(o.type?da(o.type):$,e.hasModifier(o,64),o)}function Xi(t){if(!t.constraint)if(t.target){var n=ci(t.target);t.constraint=n?Ea(n,t.mapper):fe}else{var o=function(t){return t.symbol&&e.getDeclarationOfKind(t.symbol,145).constraint}(t);t.constraint=o?da(o):fe}return t.constraint===fe?void 0:t.constraint}function Yi(t){return eo(e.getDeclarationOfKind(t.symbol,145).parent)}function Ji(e){var t="";if(e)for(var n=e.length,o=0;o<n;){for(var r=e[o].id,i=1;o+i<n&&e[o+i].id===r+i;)i++;t.length&&(t+=","),t+=r,i>1&&(t+=":"+i),o+=i}return t}function qi(e,t){for(var n=0,o=0,r=e;o<r.length;o++){var i=r[o];i.flags&t||(n|=i.flags)}return 14680064&n}function Zi(e,t){var n=Ji(t),o=e.instantiations.get(n);return o||(o=ao(4,e.symbol),e.instantiations.set(n,o),o.flags|=t?qi(t,0):0,o.target=e,o.typeArguments=t),o}function Qi(e){var t=io(e.flags);return t.symbol=e.symbol,t.objectFlags=e.objectFlags,t.target=e.target,t.typeArguments=e.typeArguments,t}function es(t){return e.length(t.target.typeParameters)}function ts(t,n,o){var r=Rr(Qn(n)),i=r.localTypeParameters;if(i){var s=e.length(t.typeArguments),a=wi(i),l=e.isInJavaScriptFile(t);return!l&&(s<a||s>i.length)?(ln(t,a===i.length?e.Diagnostics.Generic_type_0_requires_1_type_argument_s:e.Diagnostics.Generic_type_0_requires_between_1_and_2_type_arguments,Bo(r,void 0,1),a,i.length),Y):Zi(r,e.concatenate(r.outerTypeParameters,Ri(o,i,a,l)))}return t.typeArguments?(ln(t,e.Diagnostics.Type_0_is_not_generic,Bo(r)),Y):r}function ns(t,n,o){var r=Rr(n),i=_n(n).typeParameters;if(i){var s=e.length(t.typeArguments),a=wi(i);return s<a||s>i.length?(ln(t,a===i.length?e.Diagnostics.Generic_type_0_requires_1_type_argument_s:e.Diagnostics.Generic_type_0_requires_between_1_and_2_type_arguments,Co(n),a,i.length),Y):function(t,n){var o=Rr(t),r=_n(t),i=r.typeParameters,s=Ji(n),a=r.instantiations.get(s);return a||r.instantiations.set(s,a=Ea(o,_a(i,Ri(n,i,wi(i),e.isInJavaScriptFile(t.valueDeclaration))))),a}(n,o)}return t.typeArguments?(ln(t,e.Diagnostics.Type_0_is_not_generic,Co(n)),Y):r}function os(t){switch(t.kind){case 159:return t.typeName;case 201:var n=t.expression;if(e.isEntityNameExpression(n))return n}}function rs(e,t){return e&&Vn(e,t)||j}function is(t,n,o){return 96&n.flags?ts(t,n,o):524288&n.flags?ns(t,n,o):16&n.flags&&ss(t)&&(n.members||e.getJSDocClassTag(n.valueDeclaration))?Rp(n):void 0}function ss(e){return 1048576&e.flags&&159===e.kind}function as(t){var n=mn(t);if(!n.resolvedType){var o=void 0,r=void 0,i=793064;ss(t)&&(r=function(t){if(e.isIdentifier(t.typeName)){if("Object"===t.typeName.escapedText){if(e.isJSDocIndexSignature(t)){var n=da(t.typeArguments[0]),o=zi(da(t.typeArguments[1]),!1);return po(void 0,v,e.emptyArray,e.emptyArray,n===ee&&o,n===te&&o)}return $}switch(t.typeName.escapedText){case"String":return ee;case"Number":return te;case"Boolean":return re;case"Void":return se;case"Undefined":return J;case"Null":return Z;case"Function":case"function":return Ee;case"Array":case"array":return t.typeArguments&&t.typeArguments.length?void 0:Ne;case"Promise":case"promise":return t.typeArguments&&t.typeArguments.length?void 0:Kp($)}}}(t),i|=107455),r||(r=function(t,n){var o=ls(t);if(n===j)return Y;var r=is(t,n,o);if(r)return r;var i=Or(n);if(void 0!==i)return o?(ln(t,e.Diagnostics.Type_0_is_not_generic,Co(n)),Y):i;if(!(107455&n.flags&&ss(t)))return Y;var s=cr(n);if(s.symbol&&!Op(s)){var a=is(t,s.symbol,o);if(a)return a}return rs(os(t),793064),s}(t,o=rs(os(t),i))),n.resolvedSymbol=o,n.resolvedType=r}return n.resolvedType}function ls(t){return e.map(t.typeArguments,da)}function cs(e){var t=mn(e);return t.resolvedType||(t.resolvedType=Bl(Bd(e.exprName))),t.resolvedType}function us(t,n){function o(e){for(var t=0,n=e.declarations;t<n.length;t++){var o=n[t];switch(o.kind){case 229:case 230:case 232:return o}}}if(!t)return n?ge:ue;var r=Rr(t);return 32768&r.flags?e.length(r.typeParameters)!==n?(ln(o(t),e.Diagnostics.Global_type_0_must_have_1_type_parameter_s,e.symbolName(t),n),n?ge:ue):r:(ln(o(t),e.Diagnostics.Global_type_0_must_be_a_class_or_interface_type,e.symbolName(t)),n?ge:ue)}function ps(t,n){return ds(t,107455,n?e.Diagnostics.Cannot_find_global_value_0:void 0)}function ds(e,t,n){return Tn(void 0,e,t,n,e,!1)}function gs(t,n,o){var r=function(t,n){return ds(t,793064,n?e.Diagnostics.Cannot_find_global_type_0:void 0)}(t,o);return r||o?us(r,n):void 0}function hs(e){return Pe||(Pe=gs("Symbol",0,e))||ue}function fs(e){return Me||(Me=gs("Promise",1,e))||ge}function _s(e){return Fe||(Fe=ps("Promise",e))}function ms(e){return We||(We=gs("AsyncIterable",1,e))||ge}function ys(e){return Ke||(Ke=gs("AsyncIterator",1,e))||ge}function ks(e){return je||(je=gs("AsyncIterableIterator",1,e))||ge}function bs(e){return He||(He=gs("Iterable",1,e))||ge}function vs(e){return Ve||(Ve=gs("Iterator",1,e))||ge}function Ts(e){return Ge||(Ge=gs("IterableIterator",1,e))||ge}function Es(e,t){void 0===t&&(t=0);var n=ds(e,793064,void 0);return n&&us(n,t)}function Ss(e,t){var n=ds(e,1920,void 0),o=n&&bn(n.exports,t,793064);return o&&Rr(o)}function Cs(e,t){return e!==ge?Zi(e,t):ue}function xs(e){return Cs(Le||(Le=gs("TypedPropertyDescriptor",1,!0))||ge,[e])}function Bs(e){return Cs(ks(!0),[e])}function As(e){return Cs(bs(!0),[e])}function Is(e){return Cs(Ts(!0),[e])}function Ds(e){return Cs(Se,[e])}function Ns(t){return U[t]||(U[t]=function(t){for(var n=[],o=[],r=0;r<t;r++){var i=io(16384);n.push(i);var s=cn(4,""+r);s.type=i,o.push(s)}var a=ao(12);return a.typeParameters=n,a.outerTypeParameters=void 0,a.localTypeParameters=n,a.instantiations=e.createMap(),a.instantiations.set(Ji(a.typeParameters),a),a.target=a,a.typeArguments=a.typeParameters,a.thisType=io(16384),a.thisType.isThisType=!0,a.thisType.constraint=a,a.declaredProperties=o,a.declaredCallSignatures=e.emptyArray,a.declaredConstructSignatures=e.emptyArray,a.declaredStringIndexInfo=void 0,a.declaredNumberIndexInfo=void 0,a}(t))}function ws(e){return Zi(Ns(e.length),e)}function Rs(e,t){for(var n=0,o=e.length-1,r=t.id;n<=o;){var i=n+(o-n>>1),s=e[i].id;if(s===r)return i;s>r?o=i-1:n=i+1}return~n}function Os(e,t){return Rs(e,t)>=0}function Ps(e,t){var n=t.flags;if(65536&n)Ls(e,t.types);else if(1&n)e.containsAny=!0;else if(!A&&6144&n)2048&n&&(e.containsUndefined=!0),4096&n&&(e.containsNull=!0),2097152&n||(e.containsNonWideningType=!0);else if(!(8192&n||131072&n&&function(e){for(var t=0,n=0,o=e.types;n<o.length;n++){var r=o[n];if(6368&r.flags&&6368&t)return!0;if(6144&(t|=r.flags)&&16809984&t)return!0}return!1}(t))){2&n&&(e.containsString=!0),4&n&&(e.containsNumber=!0),96&n&&(e.containsStringOrNumberLiteral=!0);var o=e.length,r=o&&t.id>e[o-1].id?~o:Rs(e,t);r<0&&(32768&n&&16&t.objectFlags&&t.symbol&&8208&t.symbol.flags&&Ms(e,t)||e.splice(~r,0,t))}}function Ls(e,t){for(var n=0,o=t;n<o.length;n++){Ps(e,o[n])}}function Ms(e,t){for(var n=0,o=e;n<o.length;n++){if(Ia(o[n],t))return!0}return!1}function Fs(e,t){for(var n=0,o=t;n<o.length;n++){var r=o[n];if(e!==r&&wa(e,r))return!0}return!1}function Us(t){if(0!==t.length&&!function(e){var t=e[0];if(256&t.flags){for(var n=to(t.symbol),o=1;o<e.length;o++){var r=e[o];if(!(256&r.flags)||n!==to(r.symbol))return!1}return!0}return!1}(t))for(var n=t.length;n>0;)Fs(t[--n],t)&&e.orderedRemoveItemAt(t,n)}function Hs(t,n,o,r){if(0===t.length)return ae;if(1===t.length)return t[0];var i=[];return Ls(i,t),i.containsAny?$:(n?Us(i):i.containsStringOrNumberLiteral&&function(t){for(var n=t.length;n>0;){var o=t[--n];(32&o.flags&&t.containsString||64&o.flags&&t.containsNumber||96&o.flags&&1048576&o.flags&&Os(t,o.regularType))&&e.orderedRemoveItemAt(t,n)}}(i),0===i.length?i.containsNull?i.containsNonWideningType?Z:Q:i.containsUndefined?i.containsNonWideningType?J:q:ae:Vs(i,o,r))}function Vs(e,t,n){if(0===e.length)return ae;if(1===e.length)return e[0];var o=Ji(e),r=H.get(o);r||(r=io(65536|qi(e,6144)),H.set(o,r),r.types=e,r.aliasSymbol=t,r.aliasTypeArguments=n);return r}function Gs(t,n){131072&n.flags?Ws(t,n.types):1&n.flags?t.containsAny=!0:8192&n.flags?t.containsNever=!0:16&yn(n)&&Va(n)?t.containsEmptyObject=!0:!A&&6144&n.flags||e.contains(t,n)||(32768&n.flags&&(t.containsObjectType=!0),65536&n.flags&&void 0===t.unionIndex&&(t.unionIndex=t.length),32768&n.flags&&16&n.objectFlags&&n.symbol&&8208&n.symbol.flags&&Ms(t,n)||t.push(n))}function Ws(e,t){for(var n=0,o=t;n<o.length;n++){Gs(e,o[n])}}function Ks(t,n,o){if(0===t.length)return ue;var r=[];if(Ws(r,t),r.containsNever)return ae;if(r.containsAny)return $;if(r.containsEmptyObject&&!r.containsObjectType&&r.push(ue),1===r.length)return r[0];var i=r.unionIndex;if(void 0!==i){var s=r[i];return Hs(e.map(s.types,(function(t){return Ks(e.replaceElement(r,i,t))})),!1,n,o)}var a=Ji(r),l=V.get(a);l||(l=io(131072|qi(r,6144)),V.set(a,l),l.types=r,l.aliasSymbol=n,l.aliasTypeArguments=o);return l}function js(t){return 24&e.getDeclarationModifierFlagsFromSymbol(t)||e.startsWith(t.escapedName,"__@")?ae:ua(e.symbolName(t))}function zs(t){return rd(t,540672)?function(e){return e.resolvedIndexType||(e.resolvedIndexType=io(262144),e.resolvedIndexType.type=e),e.resolvedIndexType}(t):32&yn(t)?ni(t):1&t.flags||Ci(t,0)?ee:function(t){return Hs(e.map(li(t),js))}(t)}function $s(t,n,o,r){var i=o&&180===o.kind?o:void 0,s=96&n.flags?e.escapeLeadingUnderscores(""+n.value):i&&rp(i.argumentExpression,n,!1)?e.getPropertyNameForKnownSymbolName(e.idText(i.argumentExpression.name)):void 0;if(void 0!==s){var a=bi(t,s);if(a){if(i){if(e.isAssignmentTarget(i)&&(td(i,a)||nd(i)))return ln(i.argumentExpression,e.Diagnostics.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,Co(a)),Y;r&&(mn(o).resolvedSymbol=a)}return cr(a)}}if(!(6144&n.flags)&&id(n,262774)){if(Ko(t))return $;var l=id(n,84)&&Ci(t,1)||Ci(t,0)||void 0;if(l)return i&&l.isReadonly&&(e.isAssignmentTarget(i)||e.isDeleteTarget(i))&&ln(i,e.Diagnostics.Index_signature_in_type_0_only_permits_reading,Bo(t)),l.type;if(i&&!sd(t))return D&&!E.suppressImplicitAnyIndexErrors&&(xi(t,1)?ln(i.argumentExpression,e.Diagnostics.Element_implicitly_has_an_any_type_because_index_expression_is_not_of_type_number):ln(i,e.Diagnostics.Element_implicitly_has_an_any_type_because_type_0_has_no_index_signature,Bo(t))),$}if(o){var c=180===o.kind?o.argumentExpression:o.indexType;return 96&n.flags?ln(c,e.Diagnostics.Property_0_does_not_exist_on_type_1,""+n.value,Bo(t)):6&n.flags?ln(c,e.Diagnostics.Type_0_has_no_matching_index_signature_for_type_1,Bo(t),Bo(n)):ln(c,e.Diagnostics.Type_0_cannot_be_used_as_an_index_type,Bo(n)),Y}return $}function Xs(t){return!!(540672&t.flags)||(32&yn(t)?Ys(ni(t)):!!(196608&t.flags)&&e.forEach(t.types,Xs))}function Ys(t){return!!(802816&t.flags)||!!(196608&t.flags)&&e.forEach(t.types,Ys)}function Js(e){if(32768&e.flags&&!ri(e)){var t=ii(e);return 0===t.properties.length&&0===t.callSignatures.length&&0===t.constructSignatures.length&&t.stringIndexInfo&&!t.numberIndexInfo}return!1}function qs(t){var n=t.objectType;if(131072&n.flags&&Xs(n)&&e.some(n.types,Js)){for(var o=[],r=[],i=0,s=n.types;i<s.length;i++){var a=s[i];Js(a)?r.push(xi(a,0)):o.push(a)}return Hs([Zs(Ks(o),t.indexType),Ks(r)])}if(ri(n)){var l=_a([ti(n)],[t.indexType]),c=n.mapper,u=c?ma(c,l):l;return Ea(oi(n),u)}}function Zs(e,t,n){if(Ys(t)||(!n||180!==n.kind)&&Xs(e)){if(1&e.flags)return e;var o=e.id+","+t.id,r=W.get(o);return r||W.set(o,r=function(e,t){var n=io(524288);return n.objectType=e,n.indexType=t,n}(e,t)),r}var i=_i(e);if(65536&t.flags&&!(8&t.flags)){for(var s=[],a=0,l=t.types;a<l.length;a++){var c=$s(i,l[a],n,!1);if(c===Y)return Y;s.push(c)}return Hs(s)}return $s(i,t,n,!0)}function Qs(e){var t=mn(e);return t.resolvedType||(t.resolvedType=Zs(da(e.objectType),da(e.indexType),e)),t.resolvedType}function ea(e){var t=mn(e);if(!t.resolvedType){var n=ao(32,e.symbol);n.declaration=e,n.aliasSymbol=na(e),n.aliasTypeArguments=oa(e),t.resolvedType=n,ni(n)}return t.resolvedType}function ta(t){var n=mn(t);if(!n.resolvedType){var o=na(t);if(0!==t.symbol.members.size||o){var r=ao(16,t.symbol);r.aliasSymbol=o,r.aliasTypeArguments=oa(t),e.isJSDocTypeLiteral(t)&&t.isArrayType&&(r=Ds(r)),n.resolvedType=r}else n.resolvedType=de}return n.resolvedType}function na(e){return 231===e.parent.kind?eo(e.parent):void 0}function oa(e){var t=na(e);return t?_r(t):void 0}function ra(t,n,o,r){if(1&t.flags||1&n.flags)return $;if(8192&t.flags)return n;if(8192&n.flags)return t;if(65536&t.flags)return bc(t,(function(e){return ra(e,n,o,r)}));if(65536&n.flags)return bc(n,(function(e){return ra(t,e,o,r)}));if(16777216&n.flags)return ce;if(262654&n.flags)return t;var i,s,a=e.createSymbolTable(),l=e.createUnderscoreEscapedMap();t===ue?(i=Ci(n,0),s=Ci(n,1)):(i=qr(Ci(t,0),Ci(n,0)),s=qr(Ci(t,1),Ci(n,1)));for(var c=0,u=li(n);c<u.length;c++){var p=65536&(f=u[c]).flags&&!(32768&f.flags);24&e.getDeclarationModifierFlagsFromSymbol(f)?l.set(f.escapedName,!0):sa(f)||p||a.set(f.escapedName,ia(f))}for(var d=0,g=li(t);d<g.length;d++){var h=g[d];if(!(65536&h.flags&&!(32768&h.flags)||l.has(h.escapedName)||sa(h)))if(a.has(h.escapedName)){var f,_=cr(f=a.get(h.escapedName));if(16777216&f.flags){var m=e.concatenate(h.declarations,f.declarations),y=cn(4|16777216&h.flags,h.escapedName);y.type=Hs([cr(h),nc(_,131072)]),y.leftSpread=h,y.rightSpread=f,y.declarations=m,a.set(h.escapedName,y)}}else a.set(h.escapedName,ia(h))}var k=po(void 0,a,e.emptyArray,e.emptyArray,i,s);return k.flags|=r,k.flags|=5242880,k.objectFlags|=128,k.symbol=o,k}function ia(e){if(!ed(e))return e;var t=cn(4|16777216&e.flags,e.escapedName);return t.type=cr(e),t.declarations=e.declarations,t.syntheticOrigin=e,t}function sa(t){return 8192&t.flags&&e.find(t.declarations,(function(t){return e.isClassLike(t.parent)}))}function aa(e,t,n){var o=io(e);return o.symbol=n,o.value=t,o}function la(e){if(96&e.flags&&!(1048576&e.flags)){if(!e.freshType){var t=aa(1048576|e.flags,e.value,e.symbol);t.regularType=e,e.freshType=t}return e.freshType}return e}function ca(e){return 96&e.flags&&1048576&e.flags?e.regularType:e}function ua(e,t,n){var o="number"==typeof e?"#":"@",r=t?t+o+e:o+e,i=G.get(r);if(!i){var s=("number"==typeof e?64:32)|(t?256:0);G.set(r,i=aa(s,e,n))}return i}function pa(t){var n=mn(t);return n.resolvedType||(n.resolvedType=function(t){var n=e.getThisContainer(t,!1),o=n&&n.parent;return!o||!e.isClassLike(o)&&230!==o.kind||e.hasModifier(n,32)||152===n.kind&&!e.isNodeDescendantOf(t,n.body)?(ln(t,e.Diagnostics.A_this_type_is_available_only_in_a_non_static_member_of_a_class_or_interface),Y):xr(eo(o)).thisType}(t)),n.resolvedType}function da(t){switch(t.kind){case 119:case 268:case 269:return $;case 136:return ee;case 133:return te;case 122:return re;case 137:return ie;case 105:return se;case 139:return J;case 95:return Z;case 130:return ae;case 134:return 65536&t.flags?$:ce;case 169:case 99:return pa(t);case 173:return function(e){var t=mn(e);return t.resolvedType||(t.resolvedType=ca(Bd(e.literal))),t.resolvedType}(t);case 159:return as(t);case 158:return re;case 201:return as(t);case 162:return cs(t);case 164:return function(e){var t=mn(e);return t.resolvedType||(t.resolvedType=Ds(da(e.elementType))),t.resolvedType}(t);case 165:return function(t){var n=mn(t);return n.resolvedType||(n.resolvedType=ws(e.map(t.elementTypes,da))),n.resolvedType}(t);case 166:return function(t){var n=mn(t);return n.resolvedType||(n.resolvedType=Hs(e.map(t.types,da),!1,na(t),oa(t))),n.resolvedType}(t);case 167:return function(t){var n=mn(t);return n.resolvedType||(n.resolvedType=Ks(e.map(t.types,da),na(t),oa(t))),n.resolvedType}(t);case 270:return function(e){var t=da(e.type);return A?Hs([t,Z]):t}(t);case 168:case 271:case 272:case 267:return da(t.type);case 160:case 161:case 163:case 285:case 273:return ta(t);case 170:return function(e){var t=mn(e);return t.resolvedType||(t.resolvedType=zs(da(e.type))),t.resolvedType}(t);case 171:return Qs(t);case 172:return ea(t);case 71:case 143:var n=kh(t);return n&&Rr(n);case 274:return function(e){var t=mn(e);if(!t.resolvedType){var n=da(e.type);t.resolvedType=n?Ds(n):Y}return t.resolvedType}(t);default:return Y}}function ga(e,t,n){if(e&&e.length){for(var o=[],r=0,i=e;r<i.length;r++){var s=i[r];o.push(n(s,t))}return o}return e}function ha(e,t){return ga(e,t,Ea)}function fa(e,t){return ga(e,t,ka)}function _a(t,n){return e.Debug.assert(void 0===n||t.length===n.length),1===t.length?(a=t[0],l=n?n[0]:$,function(e){return e===a?l:e}):2===t.length?(o=t[0],r=n?n[0]:$,i=t[1],s=n?n[1]:$,function(e){return e===o?r:e===i?s:e}):function(e,t){return function(n){for(var o=0;o<e.length;o++)if(n===e[o])return t?t[o]:$;return n}}(t,n);var o,r,i,s,a,l}function ma(e,t){return function(n){return Ea(e(n),t)}}function ya(e){var t=io(16384);return t.symbol=e.symbol,t.target=e,t}function ka(t,n,o){var r,i;if(t.typeParameters&&!o){r=e.map(t.typeParameters,ya),n=ma(_a(t.typeParameters,r),n);for(var s=0,a=r;s<a.length;s++){a[s].mapper=n}}t.typePredicate&&(i=function(t,n){return e.isIdentifierTypePredicate(t)?{kind:1,parameterName:t.parameterName,parameterIndex:t.parameterIndex,type:Ea(t.type,n)}:{kind:0,type:Ea(t.type,n)}}(t.typePredicate,n));var l=Wr(t.declaration,r,t.thisParameter&&ba(t.thisParameter,n),ga(t.parameters,n,ba),void 0,i,t.minArgumentCount,t.hasRestParameter,t.hasLiteralTypes);return l.target=t,l.mapper=n,l}function ba(t,n){if(1&e.getCheckFlags(t)){var o=_n(t);t=o.target,n=ma(o.mapper,n)}var r=cn(t.flags,t.escapedName);return r.checkFlags=1,r.declarations=t.declarations,r.parent=t.parent,r.target=t,r.mapper=n,t.valueDeclaration&&(r.valueDeclaration=t.valueDeclaration),t.isRestParameter&&(r.isRestParameter=t.isRestParameter),r}function va(t,n){var o=64&t.objectFlags?t.target:t,r=o.symbol,i=_n(r),s=i.typeParameters;if(!s){var a=r.declarations[0],l=hr(a,!0)||e.emptyArray;s=2048&r.flags&&!o.aliasTypeArguments?e.filter(l,(function(t){return function(t,n){if(t.symbol&&t.symbol.declarations&&1===t.symbol.declarations.length){var o=t.symbol.declarations[0].parent;if(e.findAncestor(n,(function(e){return 207===e.kind?"quit":e===o})))return e.forEachChild(n,r)}return!0;function r(n){switch(n.kind){case 169:return t.isThisType;case 71:return!t.isThisType&&e.isPartOfTypeNode(n)&&da(n)===t;case 162:return!0}return e.forEachChild(n,r)}}(t,a)})):l,i.typeParameters=s,s.length&&(i.instantiations=e.createMap(),i.instantiations.set(Ji(s),o))}if(s.length){var c=64&t.objectFlags?ma(t.mapper,n):n,u=e.map(s,c),p=Ji(u),d=i.instantiations.get(p);if(!d){var g=_a(s,u);d=32&o.objectFlags?function(e,t){var n=ni(e);if(262144&n.flags){var o=n.type;if(16384&o.flags){var r=Ea(o,t);if(o!==r)return bc(r,(function(n){return function(e){return 704513&e.flags}(n)?Ta(e,function(e,t,n){return function(o){return o===e?t:n(o)}}(o,n,t)):n}))}}return Ta(e,t)}(o,g):Ta(o,g),i.instantiations.set(p,d)}return d}return t}function Ta(e,t){var n=ao(64|e.objectFlags,e.symbol);return 32&e.objectFlags&&(n.declaration=e.declaration),n.target=e,n.mapper=t,n.aliasSymbol=e.aliasSymbol,n.aliasTypeArguments=ha(e.aliasTypeArguments,t),n}function Ea(e,t){if(e&&t!==T){if(16384&e.flags)return t(e);if(32768&e.flags){if(16&e.objectFlags)return e.symbol&&14384&e.symbol.flags&&e.symbol.declarations?va(e,t):e;if(32&e.objectFlags)return va(e,t);if(4&e.objectFlags)return Zi(e.target,ha(e.typeArguments,t))}if(65536&e.flags&&!(8190&e.flags))return Hs(ha(e.types,t),!1,e.aliasSymbol,ha(e.aliasTypeArguments,t));if(131072&e.flags)return Ks(ha(e.types,t),e.aliasSymbol,ha(e.aliasTypeArguments,t));if(262144&e.flags)return zs(Ea(e.type,t));if(524288&e.flags)return Zs(Ea(e.objectType,t),Ea(e.indexType,t))}return e}function Sa(e,t){return e&&zi(Ea(e.type,t),e.isReadonly,e.declaration)}function Ca(t){switch(e.Debug.assert(151!==t.kind||e.isObjectLiteralMethod(t)),t.kind){case 186:case 187:case 151:return xa(t);case 178:return e.forEach(t.properties,Ca);case 177:return e.forEach(t.elements,Ca);case 195:return Ca(t.whenTrue)||Ca(t.whenFalse);case 194:return 54===t.operatorToken.kind&&(Ca(t.left)||Ca(t.right));case 261:return Ca(t.initializer);case 185:return Ca(t.expression);case 254:return e.forEach(t.properties,Ca);case 253:return t.initializer&&Ca(t.initializer);case 256:return t.expression&&Ca(t.expression)}return!1}function xa(t){if(t.typeParameters)return!1;if(e.forEach(t.parameters,(function(t){return!e.getEffectiveTypeAnnotationNode(t)})))return!0;if(187!==t.kind){var n=e.firstOrUndefined(t.parameters);if(!n||!e.parameterIsThisKeyword(n))return!0}return 207!==t.body.kind&&Ca(t.body)}function Ba(t){return(du(t)||e.isObjectLiteralMethod(t))&&xa(t)}function Aa(t){if(32768&t.flags){var n=ii(t);if(n.constructSignatures.length){var o=ao(16,t.symbol);return o.members=n.members,o.properties=n.properties,o.callSignatures=e.emptyArray,o.constructSignatures=e.emptyArray,o}}else if(131072&t.flags)return Ks(e.map(t.types,Aa));return t}function Ia(e,t){return Ka(e,t,nn)}function Da(e,t){return Ka(e,t,nn)?-1:0}function Na(e,t){return Ka(e,t,en)?-1:0}function wa(e,t){return Ka(e,t,Qt)}function Ra(e,t){return Ka(e,t,en)}function Oa(e,t){return pr(e)===pr(t)||wa(e,t)&&!Ia(e,t)}function Pa(e,t){return Ka(e,t,tn)}function La(e,t,n,o,r){return ja(e,t,en,n,o,r)}function Ma(e,t,n,o,r){return ja(e,t,tn,n,o,r)}function Fa(t,n,o,r,i,s,a){if(t===n)return-1;if(!n.hasRestParameter&&t.minArgumentCount>n.parameters.length)return 0;t.typeParameters&&t.typeParameters!==n.typeParameters&&(t=pp(t,n=Gi(n),void 0,a));var l=n.declaration?n.declaration.kind:0,c=!o&&I&&151!==l&&150!==l&&152!==l,u=-1,p=Li(t);if(p&&p!==se){var d=Li(n);if(d){if(!(k=!c&&a(p,d,!1)||a(d,p,i)))return i&&s(e.Diagnostics.The_this_types_of_each_signature_are_incompatible),0;u&=k}}for(var g=Ha(t),h=Ha(n),f=function(e,t,n,o){return e.hasRestParameter===n.hasRestParameter?e.hasRestParameter?Math.max(t,o)+1:Math.min(t,o):e.hasRestParameter?o:t}(t,g,n,h),_=t.parameters,m=n.parameters,y=0;y<f;y++){var k,b=y<g?Up(_[y]):Fi(t),v=y<h?Up(m[y]):Fi(n),T=o?void 0:up(vl(b)),E=o?void 0:up(vl(v));if(!(k=T&&E&&!T.typePredicate&&!E.typePredicate&&(6144&_l(b))==(6144&_l(v))?Fa(E,T,c?2:1,!1,i,s,a):!o&&!c&&a(b,v,!1)||a(v,b,i)))return i&&s(e.Diagnostics.Types_of_parameters_0_and_1_are_incompatible,e.symbolName(_[y<g?y:g]),e.symbolName(m[y<h?y:h])),0;u&=k}if(!r){var S=Mi(n);if(S===se)return u;var C=Mi(t);if(n.typePredicate){if(t.typePredicate)u&=function(t,n,o,r,i,s,a){if(t.kind!==n.kind)return i&&(s(e.Diagnostics.A_this_based_type_guard_is_not_compatible_with_a_parameter_based_type_guard),s(e.Diagnostics.Type_predicate_0_is_not_assignable_to_1,Ao(t),Ao(n))),0;if(1===t.kind){var l=t,c=n;if(l.parameterIndex-(e.getThisParameter(o)?1:0)!==c.parameterIndex-(e.getThisParameter(r)?1:0))return i&&(s(e.Diagnostics.Parameter_0_is_not_in_the_same_position_as_parameter_1,l.parameterName,c.parameterName),s(e.Diagnostics.Type_predicate_0_is_not_assignable_to_1,Ao(t),Ao(n))),0}var u=a(t.type,n.type,i);0===u&&i&&s(e.Diagnostics.Type_predicate_0_is_not_assignable_to_1,Ao(t),Ao(n));return u}(t.typePredicate,n.typePredicate,t.declaration,n.declaration,i,s,a);else if(e.isIdentifierTypePredicate(n.typePredicate))return i&&s(e.Diagnostics.Signature_0_must_be_a_type_predicate,xo(t)),0}else u&=1===o&&a(S,C,!1)||a(C,S,i)}return u}function Ua(e,t){var n=Vi(e),o=Vi(t),r=Mi(n),i=Mi(o);return!(i!==se&&!Ka(i,r,en)&&!Ka(r,i,en))&&0!==Fa(n,o,0,!0,!1,void 0,Na)}function Ha(e){var t=e.parameters.length;return e.hasRestParameter?t-1:t}function Va(t){return 32768&t.flags?0===(n=ii(t)).properties.length&&0===n.callSignatures.length&&0===n.constructSignatures.length&&!n.stringIndexInfo&&!n.numberIndexInfo:!!(16777216&t.flags)||(65536&t.flags?e.forEach(t.types,Va):!!(131072&t.flags)&&!e.forEach(t.types,(function(e){return!Va(e)})));var n}function Ga(t,n,o){if(t===n)return!0;var r=a(t)+","+a(n),i=on.get(r);if(void 0!==i)return i;if(!(t.escapedName===n.escapedName&&256&t.flags&&256&n.flags))return on.set(r,!1),!1;for(var s=cr(n),l=0,c=li(cr(t));l<c.length;l++){var u=c[l];if(8&u.flags){var p=bi(s,u.escapedName);if(!(p&&8&p.flags))return o&&o(e.Diagnostics.Property_0_is_missing_in_type_1,e.symbolName(u),Bo(Rr(n),void 0,256)),on.set(r,!1),!1}}return on.set(r,!0),!0}function Wa(e,t,n,o){var r=e.flags,i=t.flags;if(8192&i)return!1;if(1&i||8192&r)return!0;if(262178&r&&2&i)return!0;if(32&r&&256&r&&32&i&&!(256&i)&&e.value===t.value)return!0;if(84&r&&4&i)return!0;if(64&r&&256&r&&64&i&&!(256&i)&&e.value===t.value)return!0;if(136&r&&8&i)return!0;if(16&r&&16&i&&Ga(e.symbol,t.symbol,o))return!0;if(256&r&&256&i){if(65536&r&&65536&i&&Ga(e.symbol,t.symbol,o))return!0;if(224&r&&224&i&&e.value===t.value&&Ga(to(e.symbol),to(t.symbol),o))return!0}if(2048&r&&(!A||3072&i))return!0;if(4096&r&&(!A||4096&i))return!0;if(32768&r&&16777216&i)return!0;if(n===en||n===tn){if(1&r)return!0;if(68&r&&!(256&r)&&(16&i||64&i&&256&i))return!0}return!1}function Ka(e,t,n){if(96&e.flags&&1048576&e.flags&&(e=e.regularType),96&t.flags&&1048576&t.flags&&(t=t.regularType),e===t||n!==nn&&Wa(e,t,n))return!0;if(32768&e.flags&&32768&t.flags){var o=n.get(qa(e,t,n));if(void 0!==o)return 1===o}return!!(1032192&e.flags||1032192&t.flags)&&ja(e,t,n,void 0)}function ja(t,n,o,r,i,s){var a,l,c,u,p,d=0,g=0;!function(e){e[e.None=0]="None",e[e.Source=1]="Source",e[e.Target=2]="Target",e[e.Both=3]="Both"}(p||(p={}));var h=0,f=!1,_=!1;e.Debug.assert(o!==nn||!r,"no error reporting in identity checking");var m=b(t,n,!!r,i);return f?ln(r,e.Diagnostics.Excessive_stack_depth_comparing_types_0_and_1,Bo(t),Bo(n)):a&&(s&&(a=e.concatenateDiagnosticMessageChains(s,a)),It.add(e.createDiagnosticForNodeFromMessageChain(r,a))),0!==m;function y(t,n,o,i){e.Debug.assert(!!r),a=e.chainDiagnosticMessages(a,t,n,o,i)}function k(t,n,r){var i=Bo(n),s=Bo(r);i===s&&(i=Bo(n,void 0,256),s=Bo(r,void 0,256)),t||(t=o===tn?e.Diagnostics.Type_0_is_not_comparable_to_type_1:i===s?e.Diagnostics.Type_0_is_not_assignable_to_type_1_Two_different_types_with_this_name_exist_but_they_are_unrelated:e.Diagnostics.Type_0_is_not_assignable_to_type_1),y(t,i,s)}function b(t,n,r,i){if(96&t.flags&&1048576&t.flags&&(t=t.regularType),96&n.flags&&1048576&n.flags&&(n=n.regularType),t===n)return-1;if(o===nn)return function(e,t){var n;if(32768&e.flags&&32768&t.flags)return B(e,t,!1);if((65536&e.flags&&65536&t.flags||131072&e.flags&&131072&t.flags)&&(n=T(e,t))&&(n&=T(t,e)))return n;return 0}(t,n);if(Wa(t,n,o,r?y:void 0))return-1;if(128&yn(t)&&1048576&t.flags){if(v(t,n,r))return r&&k(i,t,n),0;(function(e){if(!(196608&e.flags))return!1;for(var t=!1,n=0,o=e.types;n<o.length;n++)if(!(6144&o[n].flags)){if(t)return!0;t=!0}return!1})(n)&&(t=Sl(t))}if(o!==tn&&!(196608&t.flags)&&!(65536&n.flags)&&!_&&t!==Te&&(li(t).length>0||Ti(t,0).length>0||Ti(t,1).length>0)&&A(n)&&!function(e,t){for(var n=!!(33554432&e.flags),o=0,r=li(e);o<r.length;o++){if(Hu(t,r[o].escapedName,n))return!0}return!1}(t,n)){if(r){var s=Ti(t,0),l=Ti(t,1);s.length>0&&b(Mi(s[0]),n,!1)||l.length>0&&b(Mi(l[0]),n,!1)?y(e.Diagnostics.Value_of_type_0_has_no_properties_in_common_with_type_1_Did_you_mean_to_call_it,Bo(t),Bo(n)):y(e.Diagnostics.Type_0_has_no_properties_in_common_with_type_1,Bo(t),Bo(n))}return 0}var c=0,u=a,p=_;return _=!1,65536&t.flags?c=o===tn?x(t,n,r&&!(8190&t.flags)):function(e,t,n){for(var o=-1,r=e.types,i=0,s=r;i<s.length;i++){var a=b(s[i],t,n);if(!a)return 0;o&=a}return o}(t,n,r&&!(8190&t.flags)):(65536&n.flags?c=S(t,n,r&&!(8190&t.flags)&&!(8190&n.flags)):131072&n.flags?(_=!0,c=function(e,t,n){for(var o=-1,r=t.types,i=0,s=r;i<s.length;i++){var a=b(e,s[i],n);if(!a)return 0;o&=a}return o}(t,n,r)):131072&t.flags&&(c=x(t,n,!1)),!c&&(1032192&t.flags||1032192&n.flags)&&(c=B(t,n,r))&&(a=u)),_=p,!c&&r&&(32768&t.flags&&8190&n.flags?function(t,n){var o=Bo(t),r=Bo(n);(xe===t&&ee===n||Be===t&&te===n||Ae===t&&re===n||hs(!1)===t&&ie===n)&&y(e.Diagnostics._0_is_a_primitive_but_1_is_a_wrapper_object_Prefer_using_0_when_possible,r,o)}(t,n):t.symbol&&32768&t.flags&&Te===t&&y(e.Diagnostics.The_Object_type_is_assignable_to_very_few_other_types_Did_you_mean_to_use_the_any_type_instead),k(i,t,n)),c}function v(t,n,i){if(rd(n,32768)&&!(512&yn(n))){var s=!!(33554432&t.flags);if((o===en||o===tn)&&(mc(Te,n)||!s&&Va(n)))return!1;if(65536&n.flags){var a=C(t,n);if(a)return v(t,a,i)}for(var l=function(o){if(!Hu(n,o.escapedName,s)){if(i)if(e.Debug.assert(!!r),e.isJsxAttributes(r)||e.isJsxOpeningLikeElement(r))y(e.Diagnostics.Property_0_does_not_exist_on_type_1,Co(o),Bo(n));else{var a=t.symbol&&e.firstOrUndefined(t.symbol.declarations),l=void 0;if(o.valueDeclaration&&e.findAncestor(o.valueDeclaration,(function(e){return e===a}))){var c=o.valueDeclaration;e.Debug.assertNode(c,e.isObjectLiteralElementLike),r=c,e.isIdentifier(c.name)&&(l=Ju(c.name,n))}void 0!==l?y(e.Diagnostics.Object_literal_may_only_specify_known_properties_but_0_does_not_exist_in_type_1_Did_you_mean_to_write_2,Co(o),Bo(n),l):y(e.Diagnostics.Object_literal_may_only_specify_known_properties_and_0_does_not_exist_in_type_1,Co(o),Bo(n))}return{value:!0}}},c=0,u=si(t);c<u.length;c++){var p=l(u[c]);if("object"==typeof p)return p.value}}return!1}function T(e,t){for(var n=-1,o=0,r=e.types;o<r.length;o++){var i=S(r[o],t,!1);if(!i)return 0;n&=i}return n}function S(e,t,n){var o=t.types;if(65536&t.flags&&Os(o,e))return-1;for(var r=0,i=o;r<i.length;r++){var s=b(e,i[r],!1);if(s)return s}n&&b(e,C(e,t)||o[o.length-1],!0);return 0}function C(e,t){var n,o=si(e);if(o){var r=function(e,t){for(var n,o=0,r=e;o<r.length;o++){var i=r[o];if(Zl(t,i.escapedName)){if(n)return;n=i}}return n}(o,t);if(r)for(var i=cr(r),s=0,a=t.types;s<a.length;s++){var l=a[s],c=Wo(l,r.escapedName);if(c&&b(i,c)){if(n)return;n=l}}}return n}function x(e,t,n){var o=e.types;if(65536&e.flags&&Os(o,t))return-1;for(var r=o.length,i=0;i<r;i++){var s=b(o[i],t,n&&i===r-1);if(s)return s}return 0}function B(t,n,r){if(f)return 0;var i=qa(t,n,o),s=o.get(i);if(void 0!==s){if(!r||2!==s)return 1===s?-1:0;o.set(i,3)}if(l){for(var p=0;p<d;p++)if(i===l[p])return 1;if(100===g)return f=!0,0}else l=[],c=[],u=[];var _=d;l[d]=i,d++,c[g]=t,u[g]=n,g++;var m=h;1&h||!nl(t,c,g)||(h|=1),2&h||!nl(n,u,g)||(h|=2);var k=3!==h?function(t,n,r){var i,s=a;if(16384&n.flags){if(32&yn(t)&&ni(t)===zs(n))if(!t.declaration.questionToken)if(i=b(oi(t),Zs(n,ti(t)),r))return i}else if(262144&n.flags){if(262144&t.flags&&(i=b(n.type,t.type,!1)))return i;if((l=function(e){return 16384&e.flags?ci(e):524288&e.flags?ui(e):pi(e)}(n.type))&&(i=b(t,zs(l),r)))return i}else if(524288&n.flags){if((l=ui(n))&&(i=b(t,l,r)))return a=s,i}if(16384&t.flags){if(32&yn(n)&&ni(n)===zs(t)){if(i=b(Zs(t,ti(n)),oi(n),r))return a=s,i}else if((l=ci(t))||!(16777216&n.flags))if((!l||1&l.flags)&&(l=ue),i=b(l,n,r&&l!==ue))return a=s,i}else if(524288&t.flags){var l;if(l=ui(t)){if(i=b(l,n,r))return a=s,i}else if(524288&n.flags&&t.indexType===n.indexType&&(i=b(t.objectType,n.objectType,r)))return i}else{if(4&yn(t)&&4&yn(n)&&t.target===n.target&&!(67108864&t.flags||67108864&n.flags)){var c=$a(t.target);if(i=function(t,n,r,i){var s=t.typeArguments||e.emptyArray,a=n.typeArguments||e.emptyArray;if(s.length!==a.length&&o===nn)return 0;for(var l=s.length<=a.length?s.length:a.length,c=-1,u=0;u<l;u++){var p=u<r.length?r[u]:1;if(4!==p){var d=s[u],g=a[u],h=-1;if(1===p?h=b(d,g,i):2===p?h=b(g,d,i):3===p?(h=b(g,d,!1))||(h=b(d,g,i)):(h=b(d,g,i))&&(h&=b(g,d,i)),!h)return 0;c&=h}}return c}(t,n,c,r))return i;if(c!==e.emptyArray&&!function(e,t){for(var n=0;n<t.length;n++)if(1===t[n]&&1024&e.typeArguments[n].flags)return!0;return!1}(n,c)){if(!r||!e.some(c,(function(e){return 0===e})))return 0;a=s}}var u=!!(8190&t.flags);if(o!==nn&&(t=_i(t)),163840&t.flags&&32768&n.flags){var p=r&&a===s&&!u;if(!function(e){return 32&yn(e)&&!!e.declaration.questionToken}(n)||ri(t)||!Va(t)?ri(n)?i=ri(t)?function(e,t,n){var r,i=!!e.declaration.readonlyToken,s=!!e.declaration.questionToken,a=!!t.declaration.readonlyToken,l=!!t.declaration.questionToken;if((o===nn?i===a&&s===l:o===tn||!s||l)&&(r=b(ni(t),ni(e),n))){var c=_a([ti(e)],[ti(t)]);return r&b(Ea(oi(e),c),oi(t),n)}return 0}(t,n,p):0:(i=function(t,n,r){if(o===nn)return function(e,t){if(!(32768&e.flags&&32768&t.flags))return 0;var n=si(e),o=si(t);if(n.length!==o.length)return 0;for(var r=-1,i=0,s=n;i<s.length;i++){var a=s[i],l=ai(t,a.escapedName);if(!l)return 0;var c=ol(a,l,b);if(!c)return 0;r&=c}return r}(t,n);var i=o===Qt&&!(128&yn(t)),s=Ml(t,n,i);if(s)return r&&y(e.Diagnostics.Property_0_is_missing_in_type_1,Co(s),Bo(t)),0;for(var a=-1,l=si(n),c=0,u=l;c<u.length;c++){var p=u[c];if(!(4194304&p.flags)){var d=bi(t,p.escapedName);if(d&&d!==p){var g=e.getDeclarationModifierFlagsFromSymbol(d),h=e.getDeclarationModifierFlagsFromSymbol(p);if(8&g||8&h){if(256&e.getCheckFlags(d))return r&&y(e.Diagnostics.Property_0_has_conflicting_declarations_and_is_inaccessible_in_type_1,Co(d),Bo(t)),0;if(d.valueDeclaration!==p.valueDeclaration)return r&&(8&g&&8&h?y(e.Diagnostics.Types_have_separate_declarations_of_a_private_property_0,Co(p)):y(e.Diagnostics.Property_0_is_private_in_type_1_but_not_in_type_2,Co(p),Bo(8&g?t:n),Bo(8&g?n:t))),0}else if(16&h){if(!el(d,p))return r&&y(e.Diagnostics.Property_0_is_protected_but_type_1_is_not_a_class_derived_from_2,Co(p),Bo(Qa(d)||t),Bo(Qa(p)||n)),0}else if(16&g)return r&&y(e.Diagnostics.Property_0_is_protected_in_type_1_but_public_in_type_2,Co(p),Bo(t),Bo(n)),0;var f=b(cr(d),cr(p),r);if(!f)return r&&y(e.Diagnostics.Types_of_property_0_are_incompatible,Co(p)),0;if(a&=f,o!==tn&&16777216&d.flags&&!(16777216&p.flags))return r&&y(e.Diagnostics.Property_0_is_optional_in_type_1_but_required_in_type_2,Co(p),Bo(t),Bo(n)),0}}}return a}(t,n,p))&&(i&=I(t,n,0,p))&&(i&=I(t,n,1,p))&&(i&=w(t,n,0,u,p))&&(i&=w(t,n,1,u,p)):i=-1,i)return a=s,i}}return 0}(t,n,r):1;if(h=m,g--,k){if(-1===k||0===g){for(p=_;p<d;p++)o.set(l[p],1);d=_}}else o.set(i,r?3:2),d=_;return k}function A(t){if(32768&t.flags){var n=ii(t);return 0===n.callSignatures.length&&0===n.constructSignatures.length&&!n.stringIndexInfo&&!n.numberIndexInfo&&n.properties.length>0&&e.every(n.properties,(function(e){return!!(16777216&e.flags)}))}return!!(131072&t.flags)&&e.every(t.types,A)}function I(t,n,r,i){if(o===nn)return function(e,t,n){var o=Ti(e,n),r=Ti(t,n);if(o.length!==r.length)return 0;for(var i=-1,s=0;s<o.length;s++){var a=rl(o[s],r[s],!1,!1,!1,b);if(!a)return 0;i&=a}return i}(t,n,r);if(n===he||t===he)return-1;var s=Ti(t,r),l=Ti(n,r);if(1===r&&s.length&&l.length){if(tl(t)&&!tl(n))return i&&y(e.Diagnostics.Cannot_assign_an_abstract_constructor_type_to_a_non_abstract_constructor_type),0;if(!function(t,n,o){if(!t.declaration||!n.declaration)return!0;var r=e.getSelectedModifierFlags(t.declaration,24),i=e.getSelectedModifierFlags(n.declaration,24);if(8===i)return!0;if(16===i&&8!==r)return!0;if(16!==i&&!r)return!0;o&&y(e.Diagnostics.Cannot_assign_a_0_constructor_type_to_a_1_constructor_type,Do(r),Do(i));return!1}(s[0],l[0],i))return 0}var c=-1,u=a;if(64&yn(t)&&64&yn(n)&&t.symbol===n.symbol)for(var p=0;p<l.length;p++){if(!(v=D(s[p],l[p],!0,i)))return 0;c&=v}else if(1===s.length&&1===l.length){var d=o===tn||E.noStrictGenericChecks;c=D(s[0],l[0],d,i)}else e:for(var g=0,h=l;g<h.length;g++){for(var f=h[g],_=i,m=0,k=s;m<k.length;m++){var v;if(v=D(k[m],f,!0,_)){c&=v,a=u;continue e}_=!1}return _&&y(e.Diagnostics.Type_0_provides_no_match_for_the_signature_1,Bo(t),xo(f,void 0,void 0,r)),0}return c}function D(e,t,n,o){return Fa(n?Vi(e):e,n?Vi(t):t,0,!1,o,y,b)}function N(t,n,o){var r=b(t.type,n.type,o);return!r&&o&&y(e.Diagnostics.Index_signatures_are_incompatible),r}function w(t,n,r,i,s){if(o===nn)return function(e,t,n){var o=Ci(t,n),r=Ci(e,n);if(!r&&!o)return-1;if(r&&o&&r.isReadonly===o.isReadonly)return b(r.type,o.type);return 0}(t,n,r);var a=Ci(n,r);if(!a||1&a.type.flags&&!i)return-1;var l=Ci(t,r)||1===r&&Ci(t,0);if(l)return N(l,a,s);if(ri(t))return 0===r&&b(oi(t),a.type,s);if(Tl(t)){var c=-1;if(0===r){var u=Ci(t,1);u&&(c=N(u,a,s))}return c&&(c&=function(t,n,o,r){for(var i=-1,s=0,a=si(t);s<a.length;s++){var l=a[s];if(0===o||ku(l.escapedName)){var c=b(cr(l),n,r);if(!c)return r&&y(e.Diagnostics.Property_0_is_incompatible_with_index_signature,Co(l)),0;i&=c}}return i}(t,a.type,r,s)),c}return s&&y(e.Diagnostics.Index_signature_is_missing_in_type_0,Bo(t)),0}}function za(t,n,o){var r=Zi(t,e.map(t.typeParameters,(function(e){return e===n?o:e})));return r.flags|=67108864,r}function $a(t){if(!I)return e.emptyArray;var n=t.typeParameters||e.emptyArray,o=t.variances;if(!o){if(t===Se||t===Ce)o=[1];else{t.variances=e.emptyArray,o=[];for(var r=0,i=n;r<i.length;r++){var s=i[r],a=za(t,s,ye),l=za(t,s,ke),c=(Ra(l,a)?1:0)|(Ra(a,l)?2:0);3===c&&Ra(za(t,s,Qe),a)&&(c=4),o.push(c)}}t.variances=o}return o}function Xa(e){return 16384&e.flags&&!Xi(e)}function Ya(t){return 4&yn(t)&&e.some(t.typeArguments,(function(e){return Xa(e)||Ya(e)}))}function Ja(t,n,o){void 0===o&&(o=0);for(var r=""+t.target.id,i=0,s=t.typeArguments;i<s.length;i++){var a=s[i];if(Xa(a)){var l=e.indexOf(n,a);l<0&&(l=n.length,n.push(a)),r+="="+l}else o<4&&Ya(a)?r+="<"+Ja(a,n,o+1)+">":r+="-"+a.id}return r}function qa(e,t,n){if(n===nn&&e.id>t.id){var o=e;e=t,t=o}if(Ya(e)&&Ya(t)){var r=[];return Ja(e,r)+","+Ja(t,r)}return e.id+","+t.id}function Za(t,n){if(!(6&e.getCheckFlags(t)))return n(t);for(var o=0,r=t.containingType.types;o<r.length;o++){var i=bi(r[o],t.escapedName),s=i&&Za(i,n);if(s)return s}}function Qa(e){return e.parent&&32&e.parent.flags?Rr(to(e)):void 0}function el(t,n){return!Za(n,(function(n){return!!(16&e.getDeclarationModifierFlagsFromSymbol(n))&&(o=t,r=Qa(n),!Za(o,(function(e){var t=Qa(e);return!!t&&dr(t,r)})));var o,r}))}function tl(t){if(16&yn(t)){var n=t.symbol;if(n&&32&n.flags){var o=zg(n);if(o&&e.hasModifier(o,128))return!0}}return!1}function nl(e,t,n){if(n>=5&&32768&e.flags){var o=e.symbol;if(o)for(var r=0,i=0;i<n;i++){var s=t[i];if(32768&s.flags&&s.symbol===o&&++r>=5)return!0}}return!1}function ol(t,n,o){if(t===n)return-1;var r=24&e.getDeclarationModifierFlagsFromSymbol(t);if(r!==(24&e.getDeclarationModifierFlagsFromSymbol(n)))return 0;if(r){if(jg(t)!==jg(n))return 0}else if((16777216&t.flags)!=(16777216&n.flags))return 0;return ed(t)!==ed(n)?0:o(cr(t),cr(n))}function rl(t,n,o,r,i,s){if(t===n)return-1;if(!function(e,t,n){if(e.parameters.length===t.parameters.length&&e.minArgumentCount===t.minArgumentCount&&e.hasRestParameter===t.hasRestParameter)return!0;var o=e.hasRestParameter?1:0,r=t.hasRestParameter?1:0;return!!(n&&e.minArgumentCount<=t.minArgumentCount&&(o>r||o===r&&e.parameters.length>=t.parameters.length))}(t,n,o))return 0;if(e.length(t.typeParameters)!==e.length(n.typeParameters))return 0;t=Vi(t),n=Vi(n);var a=-1;if(!r){var l=Li(t);if(l){var c=Li(n);if(c){if(!(d=s(l,c)))return 0;a&=d}}}for(var u=n.parameters.length,p=0;p<u;p++){var d;if(!(d=s(il(t,p)?Fi(t):Up(t.parameters[p]),il(n,p)?Fi(n):Up(n.parameters[p]))))return 0;a&=d}return i||(a&=s(Mi(t),Mi(n))),a}function il(e,t){return e.hasRestParameter&&t>=e.parameters.length-1}function sl(t){return function(e){for(var t,n=0,o=e;n<o.length;n++){var r=o[n],i=dl(r);if(t||(t=i),i===r||i!==t)return!1}return!0}(t)?Hs(t):e.reduceLeft(t,(function(e,t){return wa(e,t)?t:e}))}function al(e){return 4&yn(e)&&e.target===Se}function ll(e){return 4&yn(e)&&(e.target===Se||e.target===Ce)||!(6144&e.flags)&&Ra(e,Re)}function cl(e){return!!bi(e,"0")}function ul(e){return!!(6368&e.flags)}function pl(t){return!!(8&t.flags)||(65536&t.flags?!!(256&t.flags)||!e.forEach(t.types,(function(e){return!ul(e)})):ul(t))}function dl(t){return 256&t.flags?Ir(t):32&t.flags?ee:64&t.flags?te:128&t.flags?re:65536&t.flags?Hs(e.sameMap(t.types,dl)):t}function gl(t){return 256&t.flags?Ir(t):32&t.flags&&1048576&t.flags?ee:64&t.flags&&1048576&t.flags?te:128&t.flags?re:65536&t.flags?Hs(e.sameMap(t.types,gl)):t}function hl(e){return!!(4&yn(e)&&8&e.target.objectFlags)}function fl(e){for(var t=0,n=0,o=e;n<o.length;n++){t|=_l(o[n])}return t}function _l(e){return 65536&e.flags?fl(e.types):32&e.flags?""===e.value?32:0:64&e.flags?0===e.value?64:0:128&e.flags?e===oe?128:0:7406&e.flags}function ml(e){return 7392&_l(e)?kc(e,(function(e){return!(7392&_l(e))})):e}function yl(e){return bc(e,kl)}function kl(e){return 2&e.flags?pt:4&e.flags?dt:8&e.flags||e===oe?oe:7168&e.flags||32&e.flags&&""===e.value||64&e.flags&&0===e.value?e:ae}function bl(e,t){var n=t&~e.flags&6144;return 0===n?e:Hs(2048===n?[e,J]:4096===n?[e,Z]:[e,J,Z])}function vl(e){return A?nc(e,524288):e}function Tl(e){return e.symbol&&0!=(6656&e.symbol.flags)&&0===Ti(e,0).length&&0===Ti(e,1).length}function El(e,t){var n=cn(e.flags,e.escapedName);return n.declarations=e.declarations,n.parent=e.parent,n.type=t,n.target=e,e.valueDeclaration&&(n.valueDeclaration=e.valueDeclaration),n}function Sl(t){if(!(128&yn(t)&&1048576&t.flags))return t;var n=t.regularType;if(n)return n;var o=t,r=function(t,n){for(var o=e.createSymbolTable(),r=0,i=si(t);r<i.length;r++){var s=i[r],a=cr(s),l=n(a);o.set(s.escapedName,l===a?s:El(s,l))}return o}(t,Sl),i=po(o.symbol,r,o.callSignatures,o.constructSignatures,o.stringIndexInfo,o.numberIndexInfo);return i.flags=-1048577&o.flags,i.objectFlags|=128,t.regularType=i,i}function Cl(e){var t=cr(e),n=Bl(t);return n===t?e:El(e,n)}function xl(e){return 6144&e.flags?e:Bl(e)}function Bl(t){if(6291456&t.flags){if(6144&t.flags)return $;if(128&yn(t))return function(t){for(var n=e.createSymbolTable(),o=0,r=si(t);o<r.length;o++){var i=r[o];n.set(i.escapedName,4&i.flags?Cl(i):i)}var s=Ci(t,0),a=Ci(t,1);return po(t.symbol,n,e.emptyArray,e.emptyArray,s&&zi(Bl(s.type),s.isReadonly),a&&zi(Bl(a.type),a.isReadonly))}(t);if(65536&t.flags)return Hs(e.sameMap(t.types,xl));if(al(t)||hl(t))return Zi(t.target,e.sameMap(t.typeArguments,Bl))}return t}function Al(t){var n=!1;if(65536&t.flags)for(var o=0,r=t.types;o<r.length;o++){Al(c=r[o])&&(n=!0)}if(al(t)||hl(t))for(var i=0,s=t.typeArguments;i<s.length;i++){Al(c=s[i])&&(n=!0)}if(128&yn(t))for(var a=0,l=si(t);a<l.length;a++){var c,u=l[a];2097152&(c=cr(u)).flags&&(Al(c)||ln(u.valueDeclaration,e.Diagnostics.Object_literal_s_property_0_implicitly_has_an_1_type,e.symbolName(u),Bo(Bl(c))),n=!0)}return n}function Il(t,n){var o,r=Bo(Bl(n));switch(t.kind){case 149:case 148:o=e.Diagnostics.Member_0_implicitly_has_an_1_type;break;case 146:o=t.dotDotDotToken?e.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type:e.Diagnostics.Parameter_0_implicitly_has_an_1_type;break;case 176:o=e.Diagnostics.Binding_element_0_implicitly_has_an_1_type;break;case 228:case 151:case 150:case 153:case 154:case 186:case 187:if(!t.name)return void ln(t,e.Diagnostics.Function_expression_which_lacks_return_type_annotation_implicitly_has_an_0_return_type,r);o=e.Diagnostics._0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type;break;default:o=e.Diagnostics.Variable_0_implicitly_has_an_1_type}ln(t,o,e.declarationNameToString(e.getNameOfDeclaration(t)),r)}function Dl(e,t){o&&D&&2097152&t.flags&&(Al(t)||Il(e,t))}function Nl(e,t,n){var o,r=e.parameters.length,i=t.parameters.length;o=e.hasRestParameter&&t.hasRestParameter?Math.max(r,i):e.hasRestParameter?i:t.hasRestParameter?r:Math.min(r,i);for(var s=0;s<o;s++)n(Hp(e,s),Hp(t,s))}function wl(t,n,o,r){var i=r?e.map(r,Ol):e.map(t.typeParameters,Rl),s=function(e){for(var t=0;t<i.length;t++)if(e===i[t].typeParameter)return i[t].isFixed=!0,Vl(s,t);return e};return s.signature=t,s.inferences=i,s.flags=n,s.compareTypes=o||Na,s}function Rl(e){return{typeParameter:e,candidates:void 0,inferredType:void 0,priority:void 0,topLevel:!0,isFixed:!1}}function Ol(e){return{typeParameter:e.typeParameter,candidates:e.candidates&&e.candidates.slice(),inferredType:e.inferredType,priority:e.priority,topLevel:e.topLevel,isFixed:e.isFixed}}function Pl(t){var n=yn(t);return!!(802816&t.flags||4&n&&e.forEach(t.typeArguments,Pl)||16&n&&t.symbol&&10288&t.symbol.flags||32&n||196608&t.flags&&function(t){void 0===t.couldContainTypeVariables&&(t.couldContainTypeVariables=e.forEach(t.types,Pl));return t.couldContainTypeVariables}(t))}function Ll(t,n){return t===n||196608&t.flags&&e.forEach(t.types,(function(e){return Ll(e,n)}))}function Ml(e,t,n){for(var o=0,r=si(t);o<r.length;o++){var i=r[o];if(n||!(16777216&i.flags))if(!bi(e,i.escapedName))return i}}function Fl(t,n,o,r){var i,s;function a(t,n){if(Pl(n))if(t.aliasSymbol&&t.aliasTypeArguments&&t.aliasSymbol===n.aliasSymbol)for(var p=t.aliasTypeArguments,d=n.aliasTypeArguments,g=0;g<p.length;g++)a(p[g],d[g]);else{if(65536&t.flags&&65536&n.flags&&!(256&t.flags&&256&n.flags)||131072&t.flags&&131072&n.flags){if(t===n){for(var h=0,f=t.types;h<f.length;h++){a(B=f[h],B)}return}for(var _=void 0,m=0,y=t.types;m<y.length;m++){if(Ul(B=y[m],n.types))(_||(_=[])).push(B),a(B,B);else if(96&B.flags){var k=dl(B);Ul(k,n.types)&&(_||(_=[])).push(B,k)}}_&&(t=Hl(t,_),n=Hl(n,_))}if(540672&n.flags){if(8388608&t.flags||t===le)return;var b=c(n);if(b)return void(b.isFixed||(!b.candidates||r<b.priority?(b.candidates=[t],b.priority=r):r===b.priority&&b.candidates.push(t),8&r||!(16384&n.flags)||Ll(o,n)||(b.topLevel=!1)))}else if(4&yn(t)&&4&yn(n)&&t.target===n.target){p=t.typeArguments||e.emptyArray,d=n.typeArguments||e.emptyArray;var v=p.length<d.length?p.length:d.length,T=$a(t.target);for(g=0;g<v;g++)g<T.length&&2===T[g]?l(p[g],d[g]):a(p[g],d[g])}else if(262144&t.flags&&262144&n.flags)a(t.type,n.type);else if(524288&t.flags&&524288&n.flags)a(t.objectType,n.objectType),a(t.indexType,n.indexType);else if(196608&n.flags){for(var E=0,S=void 0,C=0,x=d=n.types;C<x.length;C++){var B;c(B=x[C])?(S=B,E++):a(t,B)}if(1===E){var A=r;r|=2,a(t,S),r=A}}else if(65536&t.flags)for(var I=0,D=p=t.types;I<D.length;I++){a(D[I],n)}else if(163840&(t=_i(t)).flags){var N=t.id+","+n.id;if(s&&s.get(N))return;(s||(s=e.createMap())).set(N,!0);var w=32768&n.flags&&!(16&yn(n)&&n.symbol&&32&n.symbol.flags)?n.symbol:void 0;if(w){if(e.contains(i,w))return;(i||(i=[])).push(w),u(t,n),i.pop()}else u(t,n)}}}function l(e,t){I?(r^=1,a(e,t),r^=1):a(e,t)}function c(e){if(540672&e.flags)for(var n=0,o=t;n<o.length;n++){var r=o[n];if(e===r.typeParameter)return r}}function u(t,n){if(ri(t)&&ri(n)&&(a(ni(t),ni(n)),a(oi(t),oi(n))),32&yn(n)){var o=ni(n);if(262144&o.flags){var i=c(o.type);if(i&&!i.isFixed){var s=function(t,n){var o=li(t),r=Ci(t,0);if(0!==o.length||r){for(var i=Rl(Zs(ni(n).type,ti(n))),s=[i],a=oi(n),l=!n.declaration.readonlyToken,c=n.declaration.questionToken?0:16777216,u=e.createSymbolTable(),p=0,d=o;p<d.length;p++){var g=d[p],h=m(cr(g));if(!h)return;var f=cn(4|g.flags&c,g.escapedName);f.checkFlags=l&&ed(g)?8:0,f.declarations=g.declarations,f.type=h,u.set(g.escapedName,f)}if(r){var _=m(r.type);if(!_)return;r=zi(_,l&&r.isReadonly)}return po(void 0,u,e.emptyArray,e.emptyArray,r,void 0)}function m(e){return i.candidates=void 0,Fl(s,e,a),i.candidates&&Hs(i.candidates,!0)}}(t,n);if(s){var l=r;r|=4,a(s,i.typeParameter),r=l}}return}if(16384&o.flags)return a(zs(t),o),void a(Hs(e.map(li(t),cr)),oi(n))}Ml(t,n,!1)&&Ml(n,t,!1)||(function(e,t){for(var n=si(t),o=0,r=n;o<r.length;o++){var i=r[o],s=bi(e,i.escapedName);s&&a(cr(s),cr(i))}}(t,n),p(t,n,0),p(t,n,1),function(e,t){var n=xi(t,0);if(n){(r=xi(e,0)||Bi(e,0))&&a(r,n)}var o=xi(t,1);if(o){var r;(r=xi(e,1)||xi(e,0)||Bi(e,1))&&a(r,o)}}(t,n))}function p(e,t,n){for(var o=Ti(e,n),r=Ti(t,n),i=o.length,s=r.length,a=i<s?i:s,l=0;l<a;l++)d(Vi(o[i-a+l]),Vi(r[s-a+l]))}function d(e,t){Nl(e,t,l),e.typePredicate&&t.typePredicate&&e.typePredicate.kind===t.typePredicate.kind?a(e.typePredicate.type,t.typePredicate.type):a(Mi(e),Mi(t))}void 0===r&&(r=0),a(n,o)}function Ul(e,t){for(var n=0,o=t;n<o.length;n++){if(Ia(o[n],e))return!0}return!1}function Hl(e,t){for(var n=[],o=0,r=e.types;o<r.length;o++){var i=r[o];Ul(i,t)||n.push(i)}return 65536&e.flags?Hs(n):Ks(n)}function Vl(t,n){var o,r=t.inferences[n],i=r.inferredType;if(!i){if(r.candidates){var s=t.signature,a=r.topLevel&&!function(e){var t=ci(e);return t&&rd(t,270334)}(r.typeParameter)&&(r.isFixed||!Ll(Mi(s),r.typeParameter))?e.sameMap(r.candidates,gl):r.candidates;i=Bl(1&r.priority?(o=a,e.reduceLeft(o,(function(e,t){return wa(t,e)?t:e}))):1&t.flags||8&r.priority?Hs(a,!0):function(t){if(!A)return sl(t);var n=e.filter(t,(function(e){return!(6144&e.flags)}));return n.length?bl(sl(n),6144&fl(t)):Hs(t,!0)}(a))}else if(2&t.flags)i=le;else{var l=fi(r.typeParameter);i=l?Ea(l,ma(function(t,n){return function(o){return e.indexOf(t,o)>=n?ue:o}}(t.signature.typeParameters,n),t)):Gl(!!(4&t.flags))}r.inferredType=i;var c=ci(t.signature.typeParameters[n]);if(c){var u=Ea(c,t);t.compareTypes(i,Vr(u,i))||(r.inferredType=i=u)}}return i}function Gl(e){return e?$:ue}function Wl(e){for(var t=[],n=0;n<e.inferences.length;n++)t.push(Vl(e,n));return t}function Kl(t){var n=mn(t);return n.resolvedSymbol||(n.resolvedSymbol=!e.nodeIsMissing(t)&&Tn(t,t.escapedText,1156031,e.Diagnostics.Cannot_find_name_0,t,!e.isWriteOnlyAccess(t),e.Diagnostics.Cannot_find_name_0_Did_you_mean_1)||j),n.resolvedSymbol}function jl(t){return!!e.findAncestor(t,(function(e){return 162===e.kind||71!==e.kind&&143!==e.kind&&"quit"}))}function zl(t){if(71===t.kind){var n=Kl(t);return n!==j?(Uc(t)?"@":"")+a(n):void 0}if(99===t.kind)return"0";if(179===t.kind)return(r=zl(t.expression))&&r+"."+e.idText(t.name);if(176===t.kind){var o=t.parent.parent,r=176===o.kind?zl(o):o.initializer&&zl(o.initializer),i=$l(t);return r&&i&&r+"."+i}}function $l(t){if(174!==t.parent.kind)return""+t.parent.elements.indexOf(t);var n=t.propertyName||t.name;switch(n.kind){case 71:return e.idText(n);case 144:return e.isStringOrNumericLiteral(n.expression)?n.expression.text:void 0;case 9:case 8:return n.text;default:e.Debug.fail("Unexpected name kind for binding element name")}}function Xl(e,t){switch(e.kind){case 71:return 71===t.kind&&Kl(e)===Kl(t)||(226===t.kind||176===t.kind)&&no(Kl(e))===eo(t);case 99:return 99===t.kind;case 97:return 97===t.kind;case 179:return 179===t.kind&&e.name.escapedText===t.name.escapedText&&Xl(e.expression,t.expression);case 176:if(179!==t.kind)return!1;var n=t;if(n.name.escapedText!==$l(e))return!1;if(176===e.parent.parent.kind&&Xl(e.parent.parent,n.expression))return!0;if(226===e.parent.parent.kind){var o=e.parent.parent.initializer;return o&&Xl(o,n.expression)}}return!1}function Yl(e,t){for(;179===e.kind;)if(Xl(e=e.expression,t))return!0;return!1}function Jl(e,t){return 179===t.kind&&Yl(e,t.expression)&&Zl(ql(t.expression),t.name.escapedText)}function ql(e){if(71===e.kind)return cr(Kl(e));if(179===e.kind){var t=ql(e.expression);return t&&Wo(t,e.name.escapedText)}}function Zl(t,n){if(t&&65536&t.flags){var o=yi(t,n);if(o&&2&e.getCheckFlags(o))return void 0===o.isDiscriminantProperty&&(o.isDiscriminantProperty=32&o.checkFlags&&pl(cr(o))),o.isDiscriminantProperty}return!1}function Ql(e,t){return Xl(e,t)||Yl(e,t)}function ec(e,t){if(e!==t){if(8192&t.flags)return t;var n=kc(e,(function(e){return function(e,t){if(!(65536&e.flags))return Ra(e,t);for(var n=0,o=e.types;n<o.length;n++)if(Ra(o[n],t))return!0;return!1}(t,e)}));if(!(8192&n.flags))return n}return e}function tc(e){var t=e.flags;if(2&t)return A?4079361:4194049;if(32&t){var n=""===e.value;return A?n?3030785:1982209:n?3145473:4194049}if(20&t)return A?4079234:4193922;if(64&t){var o=0===e.value;return A?o?3030658:1982082:o?3145346:4193922}return 8&t?A?4078980:4193668:136&t?A?e===oe?3030404:1981828:e===oe?3145092:4193668:32768&t?function(e){var t=ii(e);return!!(t.callSignatures.length||t.constructSignatures.length||t.members.get("bind")&&wa(e,Ee))}(e)?A?6164448:8376288:A?6166480:8378320:3072&t?2457472:4096&t?2340752:512&t?A?1981320:4193160:16777216&t?A?6166480:8378320:540672&t?tc(pi(e)||ue):196608&t?function(e){for(var t=0,n=0,o=e;n<o.length;n++)t|=tc(o[n]);return t}(e.types):8388607}function nc(e,t){if(524288&e.flags){var n=pi(e)||ue,o=kc(n,(function(e){return 0!=(tc(e)&t)}));return o!==n?o:e}return kc(e,(function(e){return 0!=(tc(e)&t)}))}function oc(e,t){if(t){var n=xd(t);return Hs([nc(e,131072),n])}return e}function rc(t,n){var o=e.getTextOfPropertyName(n);return Wo(t,o)||ku(o)&&xi(t,1)||xi(t,0)||Y}function ic(e,t){return cl(e)&&Wo(e,""+t)||Dg(e,void 0,!1,!1)||Y}function sc(e){return Ds(Dg(e,void 0,!1,!1)||Y)}function ac(e){return 194===e.parent.kind&&e.parent.left===e||216===e.parent.kind&&e.parent.initializer===e}function lc(e){return rc(cc(e.parent),e.name)}function cc(t){var n=t.parent;switch(n.kind){case 215:return ee;case 216:return Ig(n.expression,n.awaitModifier)||Y;case 194:return function(e){return 177===e.parent.kind&&ac(e.parent)||261===e.parent.kind&&ac(e.parent.parent)?oc(cc(e),e.right):xd(e.right)}(n);case 188:return J;case 177:return function(t,n){return ic(cc(t),e.indexOf(t.elements,n))}(n,t);case 198:return function(e){return sc(cc(e.parent))}(n);case 261:return lc(n);case 262:return function(e){return oc(lc(e),e.objectAssignmentInitializer)}(n)}return Y}function uc(e){return e.initializer?function(e){return mn(e).resolvedType||xd(e)}(e.initializer):215===e.parent.parent.kind?ee:216===e.parent.parent.kind&&Ig(e.parent.parent.expression,e.parent.parent.awaitModifier)||Y}function pc(t){return 226===t.kind?uc(t):function(t){var n=t.parent,o=pc(n.parent);return oc(174===n.kind?rc(o,t.propertyName||t.name):t.dotDotDotToken?sc(o):ic(o,e.indexOf(n.elements,t)),t.initializer)}(t)}function dc(e){return 226===e.kind||176===e.kind?pc(e):cc(e)}function gc(e){switch(e.kind){case 185:return gc(e.expression);case 194:switch(e.operatorToken.kind){case 58:return gc(e.left);case 26:return gc(e.right)}}return e}function hc(e){var t=e.parent;return 185===t.kind||194===t.kind&&58===t.operatorToken.kind&&t.left===e||194===t.kind&&26===t.operatorToken.kind&&t.right===e?hc(t):e}function fc(e){if(257===e.kind){var t=ca(xd(e.expression));return ul(t)?t:void 0}return ae}function _c(t){var n=mn(t);if(!n.switchTypes){n.switchTypes=[];for(var o=0,r=t.caseBlock.clauses;o<r.length;o++){var i=fc(r[o]);if(void 0===i)return n.switchTypes=e.emptyArray;n.switchTypes.push(i)}}return n.switchTypes}function mc(e,t){return e===t||65536&t.flags&&function(e,t){if(65536&e.flags){for(var n=0,o=e.types;n<o.length;n++){var r=o[n];if(!Os(t.types,r))return!1}return!0}if(256&e.flags&&Ir(e)===t)return!0;return Os(t.types,e)}(e,t)}function yc(t,n){return 65536&t.flags?e.forEach(t.types,n):n(t)}function kc(t,n){if(65536&t.flags){var o=t.types,r=e.filter(o,n);return r===o?t:Vs(r)}return n(t)?t:ae}function bc(e,t){if(!(65536&e.flags))return t(e);for(var n,o,r=0,i=e.types;r<i.length;r++){var s=t(i[r]);s&&(n?o?o.push(s):o=[n,s]:n=s)}return o?Hs(o):n}function vc(e,t){return kc(e,(function(e){return 0!=(e.flags&t)}))}function Tc(e,t){return mc(ee,e)&&rd(t,32)||mc(te,e)&&rd(t,64)?bc(e,(function(e){return 2&e.flags?vc(t,34):4&e.flags?vc(t,68):e})):e}function Ec(e){return 0===e.flags}function Sc(e){return 0===e.flags?e.type:e}function Cc(e,t){return t?{flags:0,type:e}:e}function xc(e){return K[e.id]||(K[e.id]=function(e){var t=ao(256);return t.elementType=e,t}(e))}function Bc(e,t){var n=dl(function(e){var t=e.contextualType;e.contextualType=$;var n=xd(e);return e.contextualType=t,n}(t));return mc(n,e.elementType)?e:xc(Hs([e.elementType,n]))}function Ac(e){return e.finalArrayType||(e.finalArrayType=8192&(t=e.elementType).flags?we:Ds(65536&t.flags?Hs(t.types,!0):t));var t}function Ic(e){return 256&yn(e)?Ac(e):e}function Dc(e){return 256&yn(e)?e.elementType:ae}function Nc(t,n){return function(e){for(var t=!1,n=0,o=e;n<o.length;n++){var r=o[n];if(!(8192&r.flags)){if(!(256&yn(r)))return!1;t=!0}}return t}(t)?xc(Hs(e.map(t,Dc))):Hs(e.sameMap(t,Ic),n)}function wc(t){var n=hc(t),o=n.parent,r=179===o.kind&&("length"===o.name.escapedText||181===o.parent.kind&&e.isPushOrUnshiftIdentifier(o.name)),i=180===o.kind&&o.expression===n&&194===o.parent.kind&&58===o.parent.operatorToken.kind&&o.parent.left===o&&!e.isAssignmentTarget(o.parent)&&id(xd(o.argumentExpression),84);return r||i}function Rc(t){var n=mn(t);return void 0===n.maybeTypePredicate&&(n.maybeTypePredicate=function(t){if(97!==t.expression.kind){var n=Ku(t.expression);if(n!==le){var o=_i(n);if(o!==Y){var r=Ti(o,0);return!!e.forEach(r,(function(e){return e.typePredicate}))}}}return!1}(t)),n.maybeTypePredicate}function Oc(t,n,o,r,s){var a;void 0===o&&(o=n);var l=0;if(ut)return Y;if(!t.flowNode||!s&&!(17810175&n.flags))return n;var c=ct,u=Sc(d(t.flowNode));ct=c;var p=256&yn(u)&&wc(t)?Ne:Ic(u);return 203===t.parent.kind&&8192&nc(p,524288).flags?n:p;function d(i){if(2500===l)return ut=!0,s=t,a=e.findAncestor(s,e.isFunctionOrModuleBlock),u=e.getSourceFileOfNode(s),p=e.getSpanOfTokenAtPosition(u,a.statements.pos),It.add(e.createFileDiagnostic(u,p.start,p.length,e.Diagnostics.The_containing_function_or_module_body_is_too_large_for_control_flow_analysis)),Y;var s,a,u,p;for(l++;;){var k=i.flags;if(1024&k)for(var b=c;b<ct;b++)if(St[b]===i)return l--,Ct[b];var v=void 0;if(4096&k)i.locked=!0,v=d(i.antecedent),i.locked=!1;else{if(2048&k){i=i.antecedent;continue}if(16&k){if(!(v=g(i))){i=i.antecedent;continue}}else if(96&k)v=f(i);else if(128&k)v=_(i);else if(12&k){if(1===i.antecedents.length){i=i.antecedents[0];continue}v=4&k?m(i):y(i)}else if(256&k){if(!(v=h(i))){i=i.antecedent;continue}}else if(2&k){var T=i.container;if(T&&T!==r&&179!==t.kind&&99!==t.kind){i=T.flowNode;continue}v=o}else v=Tg(n)}return 1024&k&&(St[ct]=i,Ct[ct]=v,ct++),l--,v}}function g(o){var r=o.node;if(Xl(t,r)){if(2===e.getAssignmentTargetKind(r)){var i=d(o.antecedent);return Cc(dl(Sc(i)),Ec(i))}if(n===X||n===we){if(function(e){return 226===e.kind&&e.initializer&&Jo(e.initializer)||176!==e.kind&&194===e.parent.kind&&Jo(e.parent.right)}(r))return xc(ae);var s=dl(dc(r));return Ra(s,n)?s:Ne}return 65536&n.flags?ec(n,dc(r)):n}if(Yl(t,r))return n}function h(e){if(n===X||n===we){var o=e.node,r=181===o.kind?o.expression.expression:o.left.expression;if(Xl(t,gc(r))){var i=d(e.antecedent),s=Sc(i);if(256&yn(s)){var a=s;if(181===o.kind)for(var l=0,c=o.arguments;l<c.length;l++){a=Bc(a,c[l])}else id(xd(o.left.argumentExpression),84)&&(a=Bc(a,o.right));return a===s?i:Cc(a,Ec(i))}return i}}}function f(e){var t=d(e.antecedent),n=Sc(t);if(8192&n.flags)return t;var o=0!=(32&e.flags),r=Ic(n),i=I(r,e.expression,o);if(i===r)return t;var s=Ec(t);return Cc(s&&8192&i.flags?le:i,s)}function _(e){var n=d(e.antecedent),o=Sc(n),r=e.switchStatement.expression;return Xl(t,r)?o=C(o,e.switchStatement,e.clauseStart,e.clauseEnd):k(r,o)&&(o=b(o,r,(function(t){return C(t,e.switchStatement,e.clauseStart,e.clauseEnd)}))),Cc(o,Ec(n))}function m(t){for(var r=[],i=!1,s=!1,a=0,l=t.antecedents;a<l.length;a++){var c=l[a];if(!(2048&c.flags&&c.lock.locked)){var u=d(c),p=Sc(u);if(p===n&&n===o)return p;e.pushIfUnique(r,p),mc(p,n)||(i=!0),Ec(u)&&(s=!0)}}return Cc(Nc(r,i),s)}function y(o){var r=function(e){return e.id||(e.id=i,i++),e.id}(o),s=bt[r]||(bt[r]=e.createMap());if(!a&&!(a=zl(t)))return n;var l=s.get(a);if(l)return l;for(var c=at;c<lt;c++)if(vt[c]===o&&Tt[c]===a&&Et[c].length)return Cc(Nc(Et[c],!1),!0);var u,p=[],g=!1;vt[lt]=o,Tt[lt]=a,Et[lt]=p;for(var h=0,f=o.antecedents;h<f.length;h++){var _=f[h];lt++;var m=d(_);lt--,u||(u=m);var y=Sc(m),k=s.get(a);if(k)return k;if(e.pushIfUnique(p,y),mc(y,n)||(g=!0),y===n)break}var b=Nc(p,g);return Ec(u)?Cc(b,!0):(s.set(a,b),b)}function k(e,n){return 179===e.kind&&65536&n.flags&&Xl(t,e.expression)&&Zl(n,e.name.escapedText)}function b(e,t,n){var o=t.name.escapedText,r=Wo(e,o),i=r&&n(r);return r===i?e:kc(e,(function(e){return Pa(Wo(e,o),i)}))}function v(e,o,r){return Xl(t,o)?nc(e,r?1048576:2097152):k(o,n)?b(e,o,(function(e){return nc(e,r?1048576:2097152)})):Jl(t,o)?n:e}function T(o,r,i){switch(r.operatorToken.kind){case 58:return v(o,r.left,i);case 32:case 33:case 34:case 35:var s=r.operatorToken.kind,a=gc(r.left),l=gc(r.right);if(189===a.kind&&9===l.kind)return S(o,a,s,l,i);if(189===l.kind&&9===a.kind)return S(o,l,s,a,i);if(Xl(t,a))return E(o,s,l,i);if(Xl(t,l))return E(o,s,a,i);if(k(a,n))return b(o,a,(function(e){return E(e,s,l,i)}));if(k(l,n))return b(o,l,(function(e){return E(e,s,a,i)}));if(Jl(t,a)||Jl(t,l))return n;break;case 93:return function(o,r,i){var s=gc(r.left);if(!Xl(t,s))return Yl(t,s)?n:o;var a,l=xd(r.right);if(!wa(l,Ee))return o;var c=bi(l,"prototype");if(c){var u=cr(c);Ko(u)||(a=u)}if(Ko(o)&&(a===Te||a===Ee))return o;if(!a){var p=void 0;2&yn(l)?p=Hr(l).declaredConstructSignatures:16&yn(l)&&(p=Ti(l,1)),p&&p.length&&(a=Hs(e.map(p,(function(e){return Mi(Vi(e))}))))}if(a)return x(o,a,i,Oa);return o}(o,r,i);case 26:return I(o,r.right,i)}return o}function E(e,t,n,o){if(1&e.flags)return e;33!==t&&35!==t||(o=!o);var r=xd(n);if(6144&r.flags)return A?nc(e,32===t||33===t?o?65536:524288:95===n.kind?o?32768:262144:o?16384:131072):e;if(16810497&e.flags)return e;if(o){var i=kc(e,(function(e){return Pa(t=e,n=r)||Pa(n,t);var t,n}));return 8192&i.flags?e:Tc(i,r)}if(ul(r)){var s=ca(r);return kc(e,(function(e){return ca(e)!==s}))}return e}function S(e,o,r,i,s){var a=gc(o.expression);if(!Xl(t,a))return Yl(t,a)?n:e;if(33!==r&&35!==r||(s=!s),s&&!(65536&e.flags)){var l=Ht.get(i.text);if(l){if(wa(l,e))return l;if(540672&e.flags)if(wa(l,pi(e)||$))return Ks([e,l])}}return nc(e,s?Ft.get(i.text)||64:Ut.get(i.text)||8192)}function C(t,n,o,r){var i=_c(n);if(!i.length)return t;var s=i.slice(o,r),a=o===r||e.contains(s,ae),l=Hs(s),c=8192&l.flags?ae:Tc(kc(t,(function(e){return Pa(l,e)})),l);if(!a)return c;var u=kc(t,(function(t){return!(ul(t)&&e.contains(i,ca(t)))}));return 8192&c.flags?u:Hs([c,u])}function x(e,t,n,o){if(!n)return kc(e,(function(e){return!o(e,t)}));if(65536&e.flags){var r=kc(e,(function(e){return o(e,t)}));if(!(8192&r.flags))return r}return wa(t,e)?t:Ra(e,t)?e:Ra(t,e)?t:Ks([e,t])}function B(o,r,i){if(!function(e,t){if(e.arguments)for(var n=0,o=e.arguments;n<o.length;n++)if(Ql(t,o[n]))return!0;return!(179!==e.expression.kind||!Ql(t,e.expression.expression))}(r,t)||!Rc(r))return o;var s=Np(r),a=s.typePredicate;if(!a)return o;if(Ko(o)&&(a.type===Te||a.type===Ee))return o;if(e.isIdentifierTypePredicate(a)){var l=r.arguments[a.parameterIndex-(s.thisParameter?1:0)];if(l){if(Xl(t,l))return x(o,a.type,i,wa);if(Yl(t,l))return n}}else{var c=e.skipParentheses(r.expression);if(180===c.kind||179===c.kind){var u=c,p=e.skipParentheses(u.expression);if(Xl(t,p))return x(o,a.type,i,wa);if(Yl(t,p))return n}}return o}function I(e,t,n){switch(t.kind){case 71:case 99:case 97:case 179:return v(e,t,n);case 181:return B(e,t,n);case 185:return I(e,t.expression,n);case 194:return T(e,t,n);case 192:if(51===t.operator)return I(e,t.operand,!n)}return e}}function Pc(t){return e.findAncestor(t.parent,(function(t){return e.isFunctionLike(t)&&!e.getImmediatelyInvokedFunctionExpression(t)||234===t.kind||265===t.kind||149===t.kind}))}function Lc(t){var n,o=e.getRootDeclaration(t.valueDeclaration).parent,r=mn(o);return 4194304&r.flags||(r.flags|=4194304,n=o,e.findAncestor(n.parent,(function(t){return e.isFunctionLike(t)&&!!(4194304&mn(t).flags)}))||Mc(o)),t.isAssigned||!1}function Mc(t){if(71===t.kind){if(e.isAssignmentTarget(t)){var n=Kl(t);n.valueDeclaration&&146===e.getRootDeclaration(n.valueDeclaration).kind&&(n.isAssigned=!0)}}else e.forEachChild(t,Mc)}function Fc(e){return 3&e.flags&&0!=(2&Vu(e))&&cr(e)!==we}function Uc(e){var t=e.parent;return 179===t.kind||181===t.kind&&t.expression===e||180===t.kind&&t.expression===e}function Hc(e){return 540672&e.flags&&rd(pi(e)||ue,6144)}function Vc(e,t){var n=cr(e);return Uc(t)&&yc(n,Hc)?bc(Bl(n),_i):n}function Gc(t){var n=Kl(t);if(n===j)return Y;if(n===M){var o=e.getContainingFunction(t);return S<2&&(187===o.kind?ln(t,e.Diagnostics.The_arguments_object_cannot_be_referenced_in_an_arrow_function_in_ES3_and_ES5_Consider_using_a_standard_function_expression):e.hasModifier(o,256)&&ln(t,e.Diagnostics.The_arguments_object_cannot_be_referenced_in_an_async_function_or_method_in_ES3_and_ES5_Consider_using_a_standard_function_or_method)),mn(o).flags|=8192,cr(n)}!On(n,107455)||jl(t)||Rh(Ln(n))||Fn(n);var r=no(n),i=r.valueDeclaration;if(32&r.flags)if(229===i.kind&&e.nodeIsDecorated(i))for(o=e.getContainingClass(t);void 0!==o;){if(o===i&&o.name!==t){mn(i).flags|=8388608,mn(t).flags|=16777216;break}o=e.getContainingClass(o)}else if(199===i.kind)for(o=e.getThisContainer(t,!1);void 0!==o;){if(o.parent===i){149===o.kind&&e.hasModifier(o,32)&&(mn(i).flags|=8388608,mn(t).flags|=16777216);break}o=e.getThisContainer(o,!1)}yg(t,t),hg(t,t),fg(t,t),function(t,n){if(S>=2||0==(34&n.flags)||260===n.valueDeclaration.parent.kind)return;var o=e.getEnclosingBlockScopeContainer(n.valueDeclaration),r=function(t,n){return!!e.findAncestor(t,(function(t){return t===n?"quit":e.isFunctionLike(t)}))}(t.parent,o),i=o,s=!1;for(;i&&!e.nodeStartsNewLexicalEnvironment(i);){if(e.isIterationStatement(i,!1)){s=!0;break}i=i.parent}s&&(r&&(mn(i).flags|=65536),214===o.kind&&e.getAncestor(n.valueDeclaration,227).parent===o&&function(t,n){var o=t;for(;185===o.parent.kind;)o=o.parent;var r=!1;if(e.isAssignmentTarget(o))r=!0;else if(192===o.parent.kind||193===o.parent.kind){var i=o.parent;r=43===i.operator||44===i.operator}if(!r)return!1;return!!e.findAncestor(o,(function(e){return e===n?"quit":e===n.statement}))}(t,o)&&(mn(n.valueDeclaration).flags|=2097152),mn(n.valueDeclaration).flags|=262144);r&&(mn(n.valueDeclaration).flags|=131072)}(t,n);var s=Vc(r,t),a=e.getAssignmentTargetKind(t);if(a){if(!(3&r.flags))return ln(t,e.Diagnostics.Cannot_assign_to_0_because_it_is_not_a_variable,Co(n)),Y;if(ed(r))return ln(t,e.Diagnostics.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,Co(n)),Y}var l=2097152&r.flags;if(3&r.flags){if(1===a)return s}else{if(!l)return s;i=e.find(n.declarations,u)}if(!i)return s;for(var c=146===e.getRootDeclaration(i).kind,p=Pc(i),d=Pc(t),g=d!==p;d!==p&&(186===d.kind||187===d.kind||e.isObjectLiteralOrClassExpressionMethod(d))&&(Fc(r)||c&&!Lc(r));)d=Pc(d);var h=c||l||g||s!==X&&s!==we&&(!A||0!=(1&s.flags)||jl(t)||246===t.parent.kind)||203===t.parent.kind||e.isInAmbientContext(i),f=Oc(t,s,h?c?function(e,t){return A&&146===t.kind&&t.initializer&&2048&_l(e)&&!(2048&_l(Bd(t.initializer)))?nc(e,131072):e}(s,e.getRootDeclaration(i)):s:s===X||s===we?J:bl(s,2048),d,!h);if(s===X||s===we){if(f===X||f===we)return D&&(ln(e.getNameOfDeclaration(i),e.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined,Co(n),Bo(f)),ln(t,e.Diagnostics.Variable_0_implicitly_has_an_1_type,Co(n),Bo(f))),Tg(f)}else if(!h&&!(2048&_l(s))&&2048&_l(f))return ln(t,e.Diagnostics.Variable_0_is_used_before_being_assigned,Co(n)),s;return a?dl(f):f}function Wc(e,t){(mn(e).flags|=2,149===t.kind||152===t.kind)?mn(t.parent).flags|=4:mn(t).flags|=4}function Kc(t){return e.isSuperCall(t)?t:e.isFunctionLike(t)?void 0:e.forEachChild(t,Kc)}function jc(e){var t=mn(e);return void 0===t.hasSuperCall&&(t.superCall=Kc(e.body),t.hasSuperCall=!!t.superCall),t.superCall}function zc(e){return Er(Rr(eo(e)))===Q}function $c(t,n,o){var r=n.parent;if(e.getClassExtendsHeritageClauseElement(r)&&!zc(r)){var i=jc(n);(!i||i.end>t.pos)&&ln(t,o)}}function Xc(t){var n=e.getThisContainer(t,!0),o=!1;switch(152===n.kind&&$c(t,n,e.Diagnostics.super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class),187===n.kind&&(n=e.getThisContainer(n,!1),o=S<2),n.kind){case 233:ln(t,e.Diagnostics.this_cannot_be_referenced_in_a_module_or_namespace_body);break;case 232:ln(t,e.Diagnostics.this_cannot_be_referenced_in_current_location);break;case 152:Yc(t,n)&&ln(t,e.Diagnostics.this_cannot_be_referenced_in_constructor_arguments);break;case 149:case 148:e.hasModifier(n,32)&&ln(t,e.Diagnostics.this_cannot_be_referenced_in_a_static_property_initializer);break;case 144:ln(t,e.Diagnostics.this_cannot_be_referenced_in_a_computed_property_name)}if(o&&Wc(t,n),e.isFunctionLike(n)&&(!tu(t)||e.getThisParameter(n))){if(186===n.kind&&194===n.parent.kind&&3===e.getSpecialPropertyAssignmentKind(n.parent)){var r=Bd(n.parent.left.expression.expression).symbol;if(r&&r.members&&16&r.flags)return Rp(r)}var i=ir(n)||Qc(n);if(i)return i}if(e.isClassLike(n.parent)){var s,a=eo(n.parent);return Oc(t,s=e.hasModifier(n,32)?cr(a):Rr(a).thisType)}if(e.isInJavaScriptFile(t)&&((s=function(t){var n=e.getJSDocType(t);if(n&&273===n.kind){var o=n;if(o.parameters.length>0&&o.parameters[0].name&&"this"===o.parameters[0].name.escapedText)return da(o.parameters[0].type)}}(n))&&s!==Y))return s;return N&&ln(t,e.Diagnostics.this_implicitly_has_type_any_because_it_does_not_have_a_type_annotation),$}function Yc(t,n){return!!e.findAncestor(t,(function(e){return e===n?"quit":146===e.kind}))}function Jc(t){var n=181===t.parent.kind&&t.parent.expression===t,o=e.getSuperContainer(t,!0),r=!1;if(!n)for(;o&&187===o.kind;)o=e.getSuperContainer(o,!0),r=S<2;var i=0;if(!function(t){if(!t)return!1;if(n)return 152===t.kind;if(e.isClassLike(t.parent)||178===t.parent.kind)return e.hasModifier(t,32)?151===t.kind||150===t.kind||153===t.kind||154===t.kind:151===t.kind||150===t.kind||153===t.kind||154===t.kind||149===t.kind||148===t.kind||152===t.kind;return!1}(o)){var s=e.findAncestor(t,(function(e){return e===o?"quit":144===e.kind}));return s&&144===s.kind?ln(t,e.Diagnostics.super_cannot_be_referenced_in_a_computed_property_name):n?ln(t,e.Diagnostics.Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors):o&&o.parent&&(e.isClassLike(o.parent)||178===o.parent.kind)?ln(t,e.Diagnostics.super_property_access_is_permitted_only_in_a_constructor_member_function_or_member_accessor_of_a_derived_class):ln(t,e.Diagnostics.super_can_only_be_referenced_in_members_of_derived_classes_or_object_literal_expressions),Y}if(n||152!==o.kind||$c(t,o,e.Diagnostics.super_must_be_called_before_accessing_a_property_of_super_in_the_constructor_of_a_derived_class),i=e.hasModifier(o,32)||n?512:256,mn(t).flags|=i,151===o.kind&&e.hasModifier(o,256)&&(e.isSuperProperty(t.parent)&&e.isAssignmentTarget(t.parent)?mn(o).flags|=4096:mn(o).flags|=2048),r&&Wc(t.parent,o),178===o.parent.kind)return S<2?(ln(t,e.Diagnostics.super_is_only_allowed_in_members_of_object_literal_expressions_when_option_target_is_ES2015_or_higher),Y):$;var a=o.parent,l=Rr(eo(a)),c=l&&Sr(l)[0];return c?152===o.kind&&Yc(t,o)?(ln(t,e.Diagnostics.super_cannot_be_referenced_in_constructor_arguments),Y):512===i?Er(l):Vr(c,l.thisType):(e.getClassExtendsHeritageClauseElement(a)||ln(t,e.Diagnostics.super_can_only_be_referenced_in_a_derived_class),Y)}function qc(e){return 4&yn(e)&&e.target===De?e.typeArguments[0]:void 0}function Zc(t){return bc(t,(function(t){return 131072&t.flags?e.forEach(t.types,qc):qc(t)}))}function Qc(t){if(187!==t.kind){if(Ba(t)){var n=fu(t);if(n){var o=n.thisParameter;if(o)return cr(o)}}var r=e.isInJavaScriptFile(t);if(N||r){var i=function(e){return 151!==e.kind&&153!==e.kind&&154!==e.kind||178!==e.parent.kind?186===e.kind&&261===e.parent.kind?e.parent.parent:void 0:e.parent}(t);if(i){for(var s=lu(i),a=i,l=s;l;){var c=Zc(l);if(c)return Ea(c,uu(i));if(261!==a.parent.kind)break;l=lu(a=a.parent.parent)}return s?vl(s):yd(i)}var u=t.parent;if(194===u.kind&&58===u.operatorToken.kind){var p=u.left;if(179===p.kind||180===p.kind){var d=p.expression;if(r&&e.isIdentifier(d)){var g=e.getSourceFileOfNode(u);if(g.commonJsModuleIndicator&&Kl(d)===g.symbol)return}return yd(d)}}}}}function eu(t){var n=t.parent;if(Ba(n)){var o=e.getImmediatelyInvokedFunctionExpression(n);if(o&&o.arguments){var r=e.indexOf(n.parameters,t);if(t.dotDotDotToken){for(var i=[],s=r;s<o.arguments.length;s++)i.push(gl(Bd(o.arguments[s])));return i.length?Ds(Hs(i)):void 0}var a=mn(o),l=a.resolvedSignature;a.resolvedSignature=et;var c=r<o.arguments.length?gl(Bd(o.arguments[r])):t.initializer?void 0:q;return a.resolvedSignature=l,c}var u=fu(n);if(u){var p=e.hasRestParameter(n),d=n.parameters.length-(p?1:0);r=e.indexOf(n.parameters,t);if(void 0===e.getThisParameter(n)||u.thisParameter||(e.Debug.assert(0!==r),r-=1),r<d)return Hp(u,r);if(p&&r===n.parameters.length-1&&il(u,n.parameters.length-1))return cr(e.lastOrUndefined(u.parameters))}}}function tu(t){for(;t.parent&&!e.isFunctionLike(t.parent);){if(146===t.parent.kind&&t.parent.initializer===t)return!0;t=t.parent}return!1}function nu(t){if(152===t.kind||e.getEffectiveReturnTypeNode(t)||Lg(t))return Mi(Oi(t));var n=gu(t);return n&&!function(e){return!e.resolvedReturnType&&Uo(e,3)>=0}(n)?Mi(n):void 0}function ou(t,n){var o=_p(t),r=e.indexOf(o,n);if(r>=0)return Hp(mn(t).resolvedSignature===nt?nt:Np(t),r)}function ru(e,t){return bc(e,(function(e){var n=229376&e.flags?bi(e,t):void 0;return n?cr(n):void 0}))}function iu(e,t){return bc(e,(function(e){return Si(e,t)}))}function su(t){var n=lu(t.parent);if(n){if(!e.hasDynamicName(t)){var o=ru(n,eo(t).escapedName);if(o)return o}return yu(t.name)&&iu(n,1)||iu(n,0)}}function au(e,t){return e&&(ru(e,""+t)||iu(e,1)||Ng(e,void 0,!1,!1,!1))}function lu(e){var t=cu(e);return t&&_i(t)}function cu(t){if(!dh(t)){if(t.contextualType)return t.contextualType;var n=t.parent;switch(n.kind){case 226:case 146:case 149:case 148:case 176:return function(t){var n=t.parent;if(t===n.initializer){var o=e.getEffectiveTypeAnnotationNode(n);if(o)return da(o);if(146===n.kind){var r=eu(n);if(r)return r}if(e.isBindingPattern(n.name))return er(n.name,!0,!1);if(e.isBindingPattern(n.parent)){var i=n.parent.parent,s=n.propertyName||n.name;if(176!==i.kind){var a=e.getEffectiveTypeAnnotationNode(i);if(a&&!e.isBindingPattern(s)){var l=e.getTextOfPropertyName(s);if(l)return Wo(da(a),l)}}}}}(t);case 187:case 219:return function(t){var n=e.getContainingFunction(t);if(n){var o=e.getFunctionFlags(n);if(1&o)return;var r=nu(n);return 2&o?r&&zd(r):r}}(t);case 197:return function(t){var n=e.getContainingFunction(t);if(n){var o=e.getFunctionFlags(n),r=nu(n);if(r)return t.asteriskToken?r:Og(r,0!=(2&o))}}(n);case 181:case 182:return ou(n,t);case 184:case 202:return da(n.type);case 194:return function(t){var n=t.parent,o=n.operatorToken.kind;if(e.isAssignmentOperator(o)){if(t===n.right){switch(e.getSpecialPropertyAssignmentKind(n)){case 0:break;case 5:if(!n.left.symbol)break;case 1:case 2:case 3:case 4:return}return xd(n.left)}}else{if(54===o){var r=cu(n);return r||t!==n.right||(r=xd(n.left,!0)),r}if((53===o||26===o)&&t===n.right)return cu(n)}}(t);case 261:case 262:return su(n);case 263:return lu(n.parent);case 177:var o=n;return au(lu(o),e.indexOfNode(o.elements,t));case 195:return function(e){var t=e.parent;return e===t.whenTrue||e===t.whenFalse?cu(t):void 0}(t);case 205:return e.Debug.assert(196===n.parent.kind),function(e,t){if(183===e.parent.kind)return ou(e.parent,t)}(n.parent,t);case 185:var r=e.isInJavaScriptFile(n)?e.getJSDocTypeTag(n):void 0;return r?da(r.typeExpression.type):cu(n);case 256:return function(t){var n=cu(e.isJsxAttributeLike(t.parent)?t.parent.parent:t.parent.openingElement.attributes);if(n&&!Ko(n)){if(e.isJsxAttribute(t.parent))return ru(n,t.parent.name.escapedText);if(249===t.parent.kind){var o=Nu();return o&&""!==o?ru(n,o):$}return n}}(n);case 253:case 255:return function(t){var n=cu(t.parent);if(e.isJsxAttribute(t)){if(!n||Ko(n))return;return ru(n,t.name.escapedText)}return n}(n);case 251:case 250:return Lu(n)}}}function uu(t){return(t=e.findAncestor(t,(function(e){return!!e.contextualMapper})))?t.contextualMapper:T}function pu(t,n){var o=vi(t,0);if(1===o.length){var r=o[0];if(!function(t,n){for(var o=0;o<n.parameters.length;o++){var r=n.parameters[o];if(r.initializer||r.questionToken||r.dotDotDotToken||Ii(r))break}n.parameters.length&&e.parameterIsThisKeyword(n.parameters[0])&&o--;return(t.hasRestParameter?Number.MAX_VALUE:t.parameters.length)<o}(r,n))return r}}function du(e){return 186===e.kind||187===e.kind}function gu(t){return du(t)||e.isObjectLiteralMethod(t)?fu(t):void 0}function hu(t){return e.isObjectLiteralMethod(t)?function(t){if(e.Debug.assert(e.isObjectLiteralMethod(t)),!dh(t))return su(t)}(t):lu(t)}function fu(t){e.Debug.assert(151!==t.kind||e.isObjectLiteralMethod(t));var n=hu(t);if(n){if(!(65536&n.flags))return pu(n,t);for(var o,r,i=0,s=n.types;i<s.length;i++){var a=pu(s[i],t);if(a)if(o){if(!rl(o[0],a,!1,!0,!0,Da))return;o.push(a)}else o=[a]}return o&&((r=Kr(o[0])).resolvedReturnType=void 0,r.unionSignatures=o),r}}function _u(e){return 176===e.kind&&!!e.initializer||194===e.kind&&58===e.operatorToken.kind}function mu(t,n){for(var o=t.elements,r=!1,i=[],s=e.isAssignmentTarget(t),a=lu(t),l=0;l<o.length;l++){var c=o[l];if(s&&198===c.kind){var u=Bd(c.expression,n),p=xi(u,1)||Ng(u,void 0,!1,!1,!1);p&&i.push(p)}else{var d=Td(c,n,au(a,l));i.push(d)}r=r||198===c.kind}if(!r){if(s&&i.length)return(d=Qi(ws(i))).pattern=t,d;var g=lu(t);if(g&&function(t){return!!(65536&t.flags?e.forEach(t.types,cl):cl(t))}(g)){var h=g.pattern;if(h&&(175===h.kind||177===h.kind))for(var f=h.elements,_=i.length;_<f.length;_++){var m=f[_];_u(m)?i.push(g.typeArguments[_]):(200!==m.kind&&ln(m,e.Diagnostics.Initializer_provides_no_value_for_this_binding_element_and_the_binding_element_has_no_default_value),i.push(Y))}if(i.length)return ws(i)}}return Ds(i.length?Hs(i,!0):A?ae:q)}function yu(e){switch(e.kind){case 144:return function(e){return id(bu(e),84)}(e);case 71:return ku(e.escapedText);case 8:case 9:return ku(e.text);default:return!1}}function ku(e){return(+e).toString()===e}function bu(t){var n=mn(t.expression);return n.resolvedType||(n.resolvedType=Bd(t.expression),6144&n.resolvedType.flags||!id(n.resolvedType,262774)&&!Ra(n.resolvedType,Hs([ee,te,ie]))?ln(t,e.Diagnostics.A_computed_property_name_must_be_of_type_string_number_symbol_or_any):rp(t.expression,n.resolvedType,!0)),n.resolvedType}function vu(e,t,n,o){for(var r=[],i=0;i<n.length;i++)(0===o||yu(e[i+t].name))&&r.push(cr(n[i]));return zi(r.length?Hs(r,!0):J,!1)}function Tu(t,n){var o=e.isAssignmentTarget(t);!function(t,n){for(var o=e.createUnderscoreEscapedMap(),r=1,i=2,s=4,a=i|s,l=0,c=t.properties;l<c.length;l++){var u=c[l];if(263!==u.kind){var p=u.name;if(144===p.kind&&pf(p),262===u.kind&&!n&&u.objectAssignmentInitializer)return xf(u.equalsToken,e.Diagnostics.can_only_be_used_in_an_object_literal_property_inside_a_destructuring_assignment);if(u.modifiers)for(var d=0,g=u.modifiers;d<g.length;d++){var h=g[d];120===h.kind&&151===u.kind||xf(h,e.Diagnostics._0_modifier_cannot_be_used_here,e.getTextOfNode(h))}var f=void 0;261===u.kind||262===u.kind?(gf(u.questionToken,e.Diagnostics.An_object_member_cannot_be_declared_optional),8===p.kind&&If(p),f=r):151===u.kind?f=r:153===u.kind?f=i:154===u.kind?f=s:e.Debug.assertNever(u,"Unexpected syntax kind:"+u.kind);var _=e.getPropertyNameForPropertyNameNode(p);if(void 0!==_){var m=o.get(_);if(m)if(f===r&&m===r)xf(p,e.Diagnostics.Duplicate_identifier_0,e.getTextOfNode(p));else{if(!(f&a&&m&a))return xf(p,e.Diagnostics.An_object_literal_cannot_have_property_and_accessor_with_the_same_name);if(m===a||f===m)return xf(p,e.Diagnostics.An_object_literal_cannot_have_multiple_get_Slashset_accessors_with_the_same_name);o.set(_,f|m)}else o.set(_,f)}}}}(t,o);for(var r=e.createSymbolTable(),i=[],s=ue,a=0,l=lu(t),c=l&&l.pattern&&(174===l.pattern.kind||178===l.pattern.kind),u=!l&&e.isInJavaScriptFile(t),p=0,d=!1,g=!1,h=!1,f=e.isInJavaScriptFile(t),_=0,m=0;m<t.properties.length;m++){var y=t.properties[m],k=y.symbol,b=void 0;if(261===y.kind||262===y.kind||e.isObjectLiteralMethod(y)){var v=void 0;f&&(v=Yo(y));var T=void 0;if(261===y.kind){if(144===y.name.kind){var C=bu(y.name);224&C.flags&&(b=e.escapeLeadingUnderscores(""+C.value))}T=Ed(y,n)}else 151===y.kind?T=Sd(y,n):(e.Debug.assert(262===y.kind),T=Td(y.name,n));v&&(La(T,v,y),T=v),p|=T.flags;var x=cn(4|k.flags,b||k.escapedName);if(o)(261===y.kind&&_u(y.initializer)||262===y.kind&&y.objectAssignmentInitializer)&&(x.flags|=16777216),!b&&e.hasDynamicName(y)&&(d=!0);else if(c&&!(512&yn(l))){var B=bi(l,k.escapedName);B?x.flags|=16777216&B.flags:E.suppressExcessPropertyErrors||Ci(l,0)||ln(y.name,e.Diagnostics.Object_literal_may_only_specify_known_properties_and_0_does_not_exist_in_type_1,Co(k),Bo(l))}x.declarations=k.declarations,x.parent=k.parent,k.valueDeclaration&&(x.valueDeclaration=k.valueDeclaration),x.type=T,x.target=k,k=x}else{if(263===y.kind){if(S<2&&Zh(y,2),i.length>0&&(s=ra(s,D(),t.symbol,a),i=[],r=e.createSymbolTable(),g=!1,h=!1,p=0),!Eu(T=Bd(y.expression)))return ln(y,e.Diagnostics.Spread_types_may_only_be_created_from_object_types),Y;s=ra(s,T,t.symbol,a),_=m+1;continue}e.Debug.assert(153===y.kind||154===y.kind),lh(y)}!b&&e.hasDynamicName(y)?yu(y.name)?h=!0:g=!0:r.set(k.escapedName,k),i.push(k)}if(c)for(var A=0,I=li(l);A<I.length;A++){x=I[A];r.get(x.escapedName)||(16777216&x.flags||ln(x.valueDeclaration||x.bindingElement,e.Diagnostics.Initializer_provides_no_value_for_this_binding_element_and_the_binding_element_has_no_default_value),r.set(x.escapedName,x),i.push(x))}return s!==ue?(i.length>0&&(s=ra(s,D(),t.symbol,a)),s):D();function D(){var n=u?it:g?vu(t.properties,_,i,0):void 0,s=h&&!u?vu(t.properties,_,i,1):void 0,l=po(t.symbol,r,e.emptyArray,e.emptyArray,n,s),c=E.suppressExcessPropertyErrors?0:1048576;return l.flags|=4194304|c|14680064&p,l.objectFlags|=128,d&&(l.objectFlags|=512),o&&(l.pattern=t),6144&l.flags||(a|=14680064&l.flags),l}}function Eu(t){return!!(16777217&t.flags||7392&_l(t)&&Eu(ml(t))||32768&t.flags&&!ri(t)||196608&t.flags&&!e.forEach(t.types,(function(e){return!Eu(e)})))}function Su(t){return!e.stringContains(t,"-")}function Cu(t){switch(t.kind){case 179:case 99:return!1;case 71:return e.isIntrinsicJsxName(t.escapedText);default:e.Debug.fail()}}function xu(t,n,o){for(var r,i=t.attributes,s=e.createSymbolTable(),a=ue,l=[],c=!1,u=!1,p=Nu(),d=0,g=i.properties;d<g.length;d++){var h=g[d],f=h.symbol;if(e.isJsxAttribute(h)){var _=h.initializer?Bd(h.initializer,o):ne,m=cn(33554436|f.flags,f.escapedName);m.declarations=f.declarations,m.parent=f.parent,f.valueDeclaration&&(m.valueDeclaration=f.valueDeclaration),m.type=_,m.target=f,s.set(m.escapedName,m),l.push(m),h.name.escapedText===p&&(u=!0)}else{e.Debug.assert(255===h.kind),l.length>0&&(a=ra(a,A(i.symbol,s),t.symbol,0),l=[],s=e.createSymbolTable()),Ko(_=Bd(h.expression))&&(c=!0),Eu(_)?a=ra(a,_,t.symbol,0):r=r?Ks([r,_]):_}}if(!c){a!==ue&&(l.length>0&&(a=ra(a,A(i.symbol,s),t.symbol,0)),l=li(a)),s=e.createSymbolTable();for(var y=0,k=l;y<k.length;y++){var b=k[y];n&&!n(b)||s.set(b.escapedName,b)}}var v=249===t.parent.kind?t.parent:void 0;if(v&&v.openingElement===t&&v.children.length>0){for(var T=[],E=0,S=v.children;E<S.length;E++){var C=S[E];10===C.kind?C.containsOnlyWhiteSpaces||T.push(ee):T.push(Bd(C,o))}if(!c&&p&&""!==p){u&&ln(i,e.Diagnostics._0_are_specified_twice_The_attribute_named_0_will_be_overwritten,e.unescapeLeadingUnderscores(p));var x=cn(33554436,p);x.type=1===T.length?T[0]:Ds(Hs(T,!1)),s.set(p,x)}}if(c)return $;var B=A(i.symbol,s);return r&&s.size?Ks([r,B]):r||B;function A(t,n){var o=po(t,n,e.emptyArray,e.emptyArray,void 0,void 0);return o.flags|=37748736,o.objectFlags|=128,o}}function Bu(e){var t=Kt.get(e);return void 0===t&&Kt.set(e,t=Ss(jt,e)||Y),t}function Au(t){var n=mn(t);if(!n.resolvedSymbol){var o=Bu(zt);if(o!==Y){if(!e.isIdentifier(t.tagName))throw e.Debug.fail();var r=bi(o,t.tagName.escapedText);return r?(n.jsxFlags|=1,n.resolvedSymbol=r):xi(o,0)?(n.jsxFlags|=2,n.resolvedSymbol=o.symbol):(ln(t,e.Diagnostics.Property_0_does_not_exist_on_type_1,e.idText(t.tagName),"JSX."+zt),n.resolvedSymbol=j)}return D&&ln(t,e.Diagnostics.JSX_element_implicitly_has_type_any_because_no_interface_JSX_0_exists,e.unescapeLeadingUnderscores(zt)),n.resolvedSymbol=j}return n.resolvedSymbol}function Iu(t){var n=ds(jt,1920,void 0),o=n&&bn(n.exports,t,793064),r=o&&Rr(o),i=r&&li(r);if(i){if(0===i.length)return"";if(1===i.length)return i[0].escapedName;i.length>1&&ln(o.declarations[0],e.Diagnostics.The_global_type_JSX_0_may_not_have_more_than_one_property,e.unescapeLeadingUnderscores(t))}}function Du(){return Gt||(Gt=!0,wt=Iu(Xt)),wt}function Nu(){return Wt||(Wt=!0,Rt=Iu(Yt)),Rt}function wu(e){if(e){if(131072&e.flags){for(var t=[],n=0,o=e.types;n<o.length;n++){var r=o[n];t.push(_i(r))}return Ks(t)}return _i(e)}}function Ru(t,n,o,r){if(void 0===o&&(o=Bd(t.tagName)),65536&o.flags)return Hs(o.types.map((function(e){return Ru(t,n,e,r)})),!0);if(2&o.flags)return $;if(32&o.flags){var i=Bu(zt);if(i!==Y){var s=o.value,a=bi(i,e.escapeLeadingUnderscores(s));if(a)return cr(a);var l=xi(i,0);if(l)return l;ln(t,e.Diagnostics.Property_0_does_not_exist_on_type_1,s,"JSX."+zt)}return $}var c=function(t,n){if(e.Debug.assert(!(65536&n.flags)),Ko(n))return $;var o=Ti(n,1);if(0===o.length&&0===(o=Ti(n,0)).length)return ln(t.tagName,e.Diagnostics.JSX_element_type_0_does_not_have_any_construct_or_call_signatures,e.getTextOfNode(t.tagName)),Y;for(var r=[],i=0,s=o;i<s.length;i++){var a=s[i];if(a.typeParameters){var l=e.isInJavaScriptFile(t),c=Ri(void 0,a.typeParameters,0,l);r.push(Ui(a,c,l))}else r.push(a)}return Hs(e.map(r,Mi),!0)}(t,o),u=n?function(t,n,o,r){if(e.Debug.assert(!(65536&n.flags)),!r||!Ra(o,r)){var i=Fu();if(i){var s=[];Ap(t,n,s);for(var a=void 0,l=void 0,c=0,u=s;c<u.length;c++){var p=u[c],d=Mi(p),g=d&&(0===p.parameters.length?ue:cr(p.parameters[0]));if(g=wu(g),d&&Ra(d,i)){for(var h=!0,f=0,_=t.attributes.properties;f<_.length;f++){var m=_[f];if(e.isJsxAttribute(m)&&Su(m.name.escapedText)&&!bi(g,m.name.escapedText)){h=!1;break}}h&&(a=Yr(a,g)),l=Yr(l,g)}}a||(a=l);var y=Bu(qt);return y!==Y&&(a=Yr(y,a)),a}}}(t,o,c,r):function(t,n,o,r){if(e.Debug.assert(!(65536&n.flags)),!r||!Ra(o,r)){var i=Fu();if(i){var s=Ap(t,n,void 0);if(s!==tt){var a=s&&Mi(s),l=a&&(0===s.parameters.length?ue:cr(s.parameters[0]));if(l=wu(l),a&&Ra(a,i)){var c=Bu(qt);return c!==Y&&(l=Yr(c,l)),l}}}}}(t,o,c,r);if(u)return u;if(r&&ja(c,r,en,t,e.Diagnostics.JSX_element_type_0_is_not_a_constructor_function_for_JSX_elements),Ko(c))return c;var p=Du();if(void 0===p)return $;if(""===p)return c;var d=Wo(c,p);if(d){if(Ko(d)||d===Y)return d;var g=d,h=Bu(Zt);if(h!==Y){var f=_r(h.symbol);f?1===f.length&&(g=Yr(Zi(h,[c]),g)):g=Yr(d,h)}var _=Bu(qt);return _!==Y&&(g=Yr(_,g)),g}return ue}function Ou(t){e.Debug.assert(Cu(t.tagName));var n=mn(t);if(!n.resolvedJsxElementAttributesType){var o=Au(t);return 1&n.jsxFlags?n.resolvedJsxElementAttributesType=cr(o):2&n.jsxFlags?n.resolvedJsxElementAttributesType=$i(o,0).type:n.resolvedJsxElementAttributesType=Y}return n.resolvedJsxElementAttributesType}function Pu(e,t){var n=mn(e),o=t?"resolvedJsxElementAllAttributesType":"resolvedJsxElementAttributesType";if(!n[o]){var r=function(){$e||($e=Ss(jt,$t));return $e}();return n[o]=Ru(e,t,void 0,r)}return n[o]}function Lu(e){return Cu(e.tagName)?Ou(e):Pu(e,!1)}function Mu(){return Xe||(Xe=Ss(jt,Jt)),Xe}function Fu(){if(!Ye){var e=Mu();e&&(Ye=Hs([e,Z]))}return Ye}function Uu(t){var n;!function(t){for(var n=e.createUnderscoreEscapedMap(),o=0,r=t.attributes.properties;o<r.length;o++){var i=r[o];if(255!==i.kind){var s=i,a=s.name;if(n.get(a.escapedText))return xf(a,e.Diagnostics.JSX_elements_cannot_have_multiple_attributes_with_the_same_name);n.set(a.escapedText,!0);var l=s.initializer;if(l&&256===l.kind&&!l.expression)return xf(s.initializer,e.Diagnostics.JSX_attributes_must_only_be_assigned_a_non_empty_expression)}}}(t),n=t,0===(E.jsx||0)&&ln(n,e.Diagnostics.Cannot_use_JSX_unless_the_jsx_flag_is_provided),void 0===Mu()&&D&&ln(n,e.Diagnostics.JSX_element_implicitly_has_type_any_because_the_global_type_JSX_Element_does_not_exist);var o=It&&2===E.jsx?e.Diagnostics.Cannot_find_name_0:void 0,r=an(),i=Tn(t.tagName,r,107455,o,r,!0);i&&(i.isReferenced=!0,2097152&i.flags&&!Rh(Ln(i))&&Fn(i)),function(t){var n=Cu(t.tagName)?Ou(t):Pu(t,!1),o=xu(t,(function(e){return Su(e.escapedName)||!!bi(n,e.escapedName)}));if(n===ue&&(Ko(o)||o.properties.length>0))ln(t,e.Diagnostics.JSX_element_class_does_not_support_attributes_because_it_does_not_have_a_0_property,e.unescapeLeadingUnderscores(Du()));else{if(La(o,n,t.attributes.properties.length>0?t.attributes:t)&&!Ko(o)&&!Ko(n))for(var r=0,i=t.attributes.properties;r<i.length;r++){var s=i[r];if(e.isJsxAttribute(s)&&!Hu(n,s.name.escapedText,!0)){ln(s,e.Diagnostics.Property_0_does_not_exist_on_type_1,e.idText(s.name),Bo(n));break}}}}(t)}function Hu(e,t,n){if(32768&e.flags){var o=ii(e);if(o.stringIndexInfo||o.numberIndexInfo&&ku(t)||ai(e,t)||n&&!Su(t))return!0}else if(196608&e.flags)for(var r=0,i=e.types;r<i.length;r++){if(Hu(i[r],t,n))return!0}return!1}function Vu(t){return t.valueDeclaration?e.getCombinedNodeFlags(t.valueDeclaration):0}function Gu(t){return!!(8192&t.flags||4&e.getCheckFlags(t))}function Wu(t,n,o,r){var i=e.getDeclarationModifierFlagsFromSymbol(r),s=179===t.kind||226===t.kind?t.name:t.right;if(256&e.getCheckFlags(r))return ln(s,e.Diagnostics.Property_0_has_conflicting_declarations_and_is_inaccessible_in_type_1,Co(r),Bo(o)),!1;if(97===n.kind){if(S<2)if(Za(r,(function(e){var t,n=(t=e).valueDeclaration?t.valueDeclaration.kind:149;return 151!==n&&150!==n})))return ln(s,e.Diagnostics.Only_public_and_protected_methods_of_the_base_class_are_accessible_via_the_super_keyword),!1;if(128&i)return ln(s,e.Diagnostics.Abstract_method_0_in_class_1_cannot_be_accessed_via_super_expression,Co(r),Bo(Qa(r))),!1}if(!(24&i))return!0;if(8&i)return!!_h(t,zg(to(r)))||(ln(s,e.Diagnostics.Property_0_is_private_and_only_accessible_within_class_1,Co(r),Bo(Qa(r))),!1);if(97===n.kind)return!0;var a=fh(t,(function(t){var n=Rr(eo(t));return function(t,n){return Za(n,(function(n){return!!(16&e.getDeclarationModifierFlagsFromSymbol(n))&&!dr(t,Qa(n))}))?void 0:t}(n,r)?n:void 0}));return a?!!(32&i)||(16384&o.flags&&o.isThisType&&(o=ci(o)),!!(3&yn(pr(o))&&dr(o,a))||(ln(s,e.Diagnostics.Property_0_is_protected_and_only_accessible_through_an_instance_of_class_1,Co(r),Bo(a)),!1)):(ln(s,e.Diagnostics.Property_0_is_protected_and_only_accessible_within_class_1_and_its_subclasses,Co(r),Bo(Qa(r)||o)),!1)}function Ku(e){return ju(Bd(e),e)}function ju(t,n){var o=6144&(A?_l(t):t.flags);if(o){ln(n,2048&o?4096&o?e.Diagnostics.Object_is_possibly_null_or_undefined:e.Diagnostics.Object_is_possibly_undefined:e.Diagnostics.Object_is_possibly_null);var r=vl(t);return 14336&r.flags?Y:r}return t}function zu(e){return Xu(e,e.expression,e.name)}function $u(e){return Xu(e,e.left,e.right)}function Xu(t,n,o){var r=Ku(n);if(Ko(r)||r===le)return r;var i=_i(Bl(r));if(i===Y||16384&r.flags&&Ko(i))return i;var s=bi(i,o.escapedText);if(!s){var a=Ci(i,0);return a&&a.type?(a.isReadonly&&(e.isAssignmentTarget(t)||e.isDeleteTarget(t))&&ln(t,e.Diagnostics.Index_signature_in_type_0_only_permits_reading,Bo(i)),a.type):(o.escapedText&&!xn(t)&&function(t,n){var o;if(65536&n.flags&&!(8190&n.flags))for(var r=0,i=n.types;r<i.length;r++){var s=i[r];if(!bi(s,t.escapedText)){o=e.chainDiagnosticMessages(o,e.Diagnostics.Property_0_does_not_exist_on_type_1,e.declarationNameToString(t),Bo(s));break}}var a=Ju(t,n);o=void 0!==a?e.chainDiagnosticMessages(o,e.Diagnostics.Property_0_does_not_exist_on_type_1_Did_you_mean_2,e.declarationNameToString(t),Bo(n),a):e.chainDiagnosticMessages(o,e.Diagnostics.Property_0_does_not_exist_on_type_1,e.declarationNameToString(t),Bo(n));It.add(e.createDiagnosticForNodeFromMessageChain(t,o))}(o,16384&r.flags&&r.isThisType?i:r),Y)}!function(t,n,o){var r=t.valueDeclaration;if(!r)return;!function(t){return!!e.findAncestor(t,(function(t){switch(t.kind){case 149:return!0;case 261:return!1;default:return!e.isPartOfExpression(t)&&"quit"}}))}(n)||vn(r,o)||function(e){var t=cr(e.parent);for(;;){if(!(t=Yu(t)))return!1;var n=ai(t,e.escapedName);if(n&&n.valueDeclaration)return!0}}(t)?229!==r.kind||159===n.parent.kind||e.isInAmbientContext(r)||vn(r,o)||ln(o,e.Diagnostics.Class_0_used_before_its_declaration,e.idText(o)):ln(o,e.Diagnostics.Block_scoped_variable_0_used_before_its_declaration,e.idText(o))}(s,t,o),Qu(s,t,99===n.kind),mn(t).resolvedSymbol=s,Wu(t,n,i,s);var l=Vc(s,t),c=e.getAssignmentTargetKind(t);if(c&&(td(t,s)||nd(t)))return ln(o,e.Diagnostics.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,e.idText(o)),Y;if(!(179===t.kind&&1!==c&&(98311&s.flags||8192&s.flags&&65536&l.flags)))return l;var u=Oc(t,l);return c?dl(u):u}function Yu(t){var n=Sr(t);if(0!==n.length)return e.Debug.assert(1===n.length),n[0]}function Ju(t,n){var o=Zu(e.idText(t),li(n),107455);return o&&e.symbolName(o)}function qu(t,n,o){var r=En(t,n,o,void 0,n,!1,(function(t,n,o){return bn(t,n,o)||Zu(e.unescapeLeadingUnderscores(n),e.arrayFrom(t.values()),o)}));return r&&e.symbolName(r)}function Zu(t,n,o){var r=.4*t.length,i=Math.min(3,.34*t.length),s=Number.MAX_VALUE,a=void 0,l=!1;if(!(t.length>30)){t=t.toLowerCase();for(var c=0,u=n;c<u.length;c++){var p=u[c],d=e.symbolName(p);if(p.flags&o&&d&&Math.abs(d.length-t.length)<i){if((d=d.toLowerCase())===t)return p;if(l)continue;if(d.length<3||t.length<3||"eval"===d||"intl"===d||"undefined"===d||"map"===d||"nan"===d||"set"===d)continue;var g=e.levenshtein(t,d);if(g>r)continue;g<3?(l=!0,a=p):g<s&&(s=g,a=p)}}return a}}function Qu(t,n,o){if(t&&x&&106500&t.flags&&t.valueDeclaration&&e.hasModifier(t.valueDeclaration,8)&&(!n||!e.isWriteOnlyAccess(n))){if(o){var r=e.findAncestor(n,e.isFunctionLikeDeclaration);if(r&&r.symbol===t)return}1&e.getCheckFlags(t)?_n(t).target.isReferenced=!0:t.isReferenced=!0}}function ep(t,n,o,r){if(r!==Y&&!Ko(r)){var i=bi(r,o);if(i)return Wu(t,n,r,i);if(e.isInJavaScriptFile(n)&&65536&r.flags)for(var s=0,a=r.types;s<a.length;s++){if(ep(t,n,o,a[s]))return!0}return!1}return!0}function tp(t){var n=t.initializer;if(227===n.kind){var o=n.declarations[0];if(o&&!e.isBindingPattern(o.name))return eo(o)}else if(71===n.kind)return Kl(n)}function np(e){return xi(e,1)&&!xi(e,0)}function op(t){var n=Ku(t.expression),o=t.argumentExpression;if(!o){var r,i=e.getSourceFileOfNode(t);if(182===t.parent.kind&&t.parent.expression===t)Cf(i,r=e.skipTrivia(i.text,t.expression.end),t.end-r,e.Diagnostics.new_T_cannot_be_used_to_create_an_array_Use_new_Array_T_instead);else Cf(i,r=t.end-"]".length,t.end-r,e.Diagnostics.Expression_expected);return Y}var s=function(t){var n=e.skipParentheses(t);if(71===n.kind){var o=Kl(n);if(3&o.flags)for(var r=t,i=t.parent;i;){if(215===i.kind&&r===i.statement&&tp(i)===o&&np(xd(i.expression)))return!0;r=i,i=i.parent}}return!1}(o)?te:Bd(o);return n===Y||n===le?n:sd(n)&&9!==o.kind?(ln(o,e.Diagnostics.A_const_enum_member_can_only_be_accessed_using_a_string_literal),Y):Vd(Zs(n,s,t),t)}function rp(t,n,o){if(n===Y)return!1;if(!e.isWellKnownSymbolSyntactically(t))return!1;if(0==(512&n.flags))return o&&ln(t,e.Diagnostics.A_computed_property_name_of_the_form_0_must_be_of_type_symbol,e.getTextOfNode(t)),!1;var r=t.expression,i=Kl(r);if(!i)return!1;var s,a=(s=!0,Oe||(Oe=ps("Symbol",s)));return!!a&&(i===a||(o&&ln(r,e.Diagnostics.Symbol_reference_does_not_refer_to_the_global_Symbol_constructor_object),!1))}function ip(t){return e.isCallOrNewExpression(t)}function sp(t){return ip(t)&&e.forEach(t.typeArguments,ah),183===t.kind?Bd(t.template):147!==t.kind&&e.forEach(t.arguments,(function(e){Bd(e)})),et}function ap(e){return sp(e),tt}function lp(e){for(var t=0;t<e.length;t++){var n=e[t];if(n&&198===n.kind)return t}return-1}function cp(t,n,o,r){var i,s,a;void 0===r&&(r=!1);var l=-1;if(e.isJsxOpeningLikeElement(t))return!0;if(183===t.kind){var c=t;if(i=n.length,s=void 0,196===c.template.kind){var u=c.template,p=e.lastOrUndefined(u.templateSpans);e.Debug.assert(void 0!==p),a=e.nodeIsMissing(p.literal)||!!p.literal.isUnterminated}else{var d=c.template;e.Debug.assert(13===d.kind),a=!!d.isUnterminated}}else if(147===t.kind)s=void 0,i=mp(t,void 0,o);else{var g=t;if(!g.arguments)return e.Debug.assert(182===g.kind),0===o.minArgumentCount;i=r?n.length+1:n.length,a=g.arguments.end===g.end,s=g.typeArguments,l=lp(n)}var h=e.length(o.typeParameters),f=wi(o.typeParameters);if(!(!s||s.length>=f&&s.length<=h))return!1;if(l>=0)return il(o,l)||l>=o.minArgumentCount;if(!o.hasRestParameter&&i>o.parameters.length)return!1;var _=i>=o.minArgumentCount;return a||_}function up(e){if(32768&e.flags){var t=ii(e);if(1===t.callSignatures.length&&0===t.constructSignatures.length&&0===t.properties.length&&!t.stringIndexInfo&&!t.numberIndexInfo)return t.callSignatures[0]}}function pp(t,n,o,r){var i=wl(t,1,r);return Nl(n,t,(function(e,t){Fl(i.inferences,Ea(e,o||T),t)})),o||Fl(i.inferences,Mi(n),Mi(t),8),Ui(t,Wl(i),e.isInJavaScriptFile(n.declaration))}function dp(t,n,o,r,i){for(var s=0,a=i.inferences;s<a.length;s++){var l=a[s];l.isFixed||(l.inferredType=void 0)}if(147!==t.kind){var c=cu(t);if(c){var u=Ea(c,function(e){return e&&function(e){return!!e.signature}(e)?wl(e.signature,2|e.flags,e.compareTypes,e.inferences):e}(uu(t))),p=up(u),d=p&&p.typeParameters?Wi(Ui(p,p.typeParameters,e.isInJavaScriptFile(t))):u,g=Mi(n);Fl(i.inferences,d,g,8)}}var h=Li(n);if(h){var f=fp(t),_=f?Bd(f):se;Fl(i.inferences,_,h)}for(var m=mp(t,o,n),y=0;y<m;y++){if(void 0===(v=vp(t,o,y))||200!==v.kind){var k=Hp(n,y),b=bp(t,y);if(void 0===b)b=md(v,k,r&&void 0!==r[y]?T:i);Fl(i.inferences,b,k)}}if(r)for(y=0;y<m;y++)if(!1===r[y]){var v=o[y];k=Hp(n,y);Fl(i.inferences,md(v,k,i),k)}return Wl(i)}function gp(t,n,o,r){for(var i,s=e.isInJavaScriptFile(t.declaration),a=t.typeParameters,l=Ri(e.map(n,da),a,wi(a),s),c=0;c<n.length;c++){e.Debug.assert(void 0!==a[c],"Should not call checkTypeArguments with too many type arguments");var u=ci(a[c]);if(u){var p=o&&r&&e.chainDiagnosticMessages(void 0,e.Diagnostics.Type_0_does_not_satisfy_the_constraint_1),d=r||e.Diagnostics.Type_0_does_not_satisfy_the_constraint_1;i||(i=_a(a,l));var g=l[c];if(!La(g,Vr(Ea(u,i),g),o?n[c]:void 0,d,p))return!1}}return l}function hp(t,n,o,r,i,s){if(e.isJsxOpeningLikeElement(t))return function(t,n,o){if(t.attributes.end===t.end)return!0;for(var r=e.Diagnostics.Argument_of_type_0_is_not_assignable_to_parameter_of_type_1,i=Hp(n,0),s=md(t.attributes,i,void 0),a=0,l=li(s);a<l.length;a++){var c=l[a];if(!bi(i,c.escapedName)&&Su(c.escapedName))return!1}return ja(s,i,o,void 0,r)}(t,o,r);var a=Li(o);if(a&&a!==se&&182!==t.kind){var l=fp(t),c=l?Bd(l):se,u=s?l||t:void 0,p=e.Diagnostics.The_this_context_of_type_0_is_not_assignable_to_method_s_this_of_type_1;if(!ja(c,Li(o),r,u,p))return!1}for(var d=e.Diagnostics.Argument_of_type_0_is_not_assignable_to_parameter_of_type_1,g=mp(t,n,o),h=0;h<g;h++){var f=vp(t,n,h);if(void 0===f||200!==f.kind){var _=Hp(o,h),m=bp(t,h)||md(f,_,i&&i[h]?T:void 0);if(!ja(i?Sl(m):m,_,r,u=s?Tp(t,h,f):void 0,d))return!1}}return!0}function fp(e){if(181===e.kind){var t=e.expression;if(179===t.kind)return t.expression;if(180===t.kind)return t.expression}}function _p(t){if(183===t.kind){var n=t.template,o=[void 0];return 196===n.kind&&e.forEach(n.templateSpans,(function(e){o.push(e.expression)})),o}return 147===t.kind?void 0:e.isJsxOpeningLikeElement(t)?t.attributes.properties.length>0?[t.attributes]:e.emptyArray:t.arguments||e.emptyArray}function mp(e,t,n){if(147!==e.kind)return t.length;switch(e.parent.kind){case 229:case 199:return 1;case 149:return 2;case 151:case 153:case 154:return 0===S?2:n.parameters.length>=3?3:2;case 146:return 3}}function yp(t){if(229===t.kind)return cr(eo(t));if(146===t.kind&&152===(t=t.parent).kind)return cr(eo(t));return 149===t.kind||151===t.kind||153===t.kind||154===t.kind?function(t){var n=eo(t.parent);return e.hasModifier(t,32)?cr(n):Rr(n)}(t):(e.Debug.fail("Unsupported decorator target."),Y)}function kp(t,n){return 0===n?yp(t.parent):1===n?function(t){if(229===t.kind)return e.Debug.fail("Class decorators should not have a second synthetic argument."),Y;if(146===t.kind&&152===(t=t.parent).kind)return $;if(149===t.kind||151===t.kind||153===t.kind||154===t.kind){var n=t;switch(n.name.kind){case 71:return ua(e.idText(n.name));case 8:case 9:return ua(n.name.text);case 144:var o=bu(n.name);return id(o,512)?o:ee;default:return e.Debug.fail("Unsupported property name."),Y}}return e.Debug.fail("Unsupported decorator target."),Y}(t.parent):2===n?function(t){return 229===t.kind?(e.Debug.fail("Class decorators should not have a third synthetic argument."),Y):146===t.kind?te:149===t.kind?(e.Debug.fail("Property decorators should not have a third synthetic argument."),Y):151===t.kind||153===t.kind||154===t.kind?xs(bh(t)):(e.Debug.fail("Unsupported decorator target."),Y)}(t.parent):(e.Debug.fail("Decorators should not have a fourth synthetic argument."),Y)}function bp(e,t){return 147===e.kind?kp(e,t):0===t&&183===e.kind?ze||(ze=gs("TemplateStringsArray",0,!0))||ue:void 0}function vp(e,t,n){if(147!==e.kind&&(0!==n||183!==e.kind))return t[n]}function Tp(e,t,n){return 147===e.kind?e.expression:0===t&&183===e.kind?e.template:n}function Ep(t,n,r,i){var s,a=183===t.kind,l=147===t.kind,c=e.isJsxOpeningLikeElement(t);a||l||c||(s=t.typeArguments,97!==t.expression.kind&&e.forEach(s,ah));var u=r||[];if(function(t,n){var o,r,i,s,a=0,l=-1;e.Debug.assert(!n.length);for(var c=0,u=t;c<u.length;c++){var p=u[c],d=p.declaration&&eo(p.declaration),g=p.declaration&&p.declaration.parent;r&&d!==r?(i=a=n.length,o=g):o&&g===o?i++:(o=g,i=a),r=d,p.hasLiteralTypes?(s=++l,a++):s=i,n.splice(s,0,p)}}(n,u),!u.length)return It.add(e.createDiagnosticForNode(t,e.Diagnostics.Call_target_does_not_contain_any_signatures)),ap(t);var p,d,g,h,f=_p(t),_=1===u.length&&!u[0].typeParameters,m=0;if(!l&&!_)for(var y=a?1:0;y<f.length;y++)Ca(f[y])&&(p||(p=new Array(f.length)),p[y]=!0,m++);var k=r&&181===t.kind&&t.arguments.hasTrailingComma;if(u.length>1&&(h=F(u,Qt,k)),h||(h=F(u,en,k)),h)return h;if(d){if(c)return d;hp(t,f,d,en,void 0,!0)}else if(g)gp(g,t.typeArguments,!0,i);else if(s&&e.every(n,(function(t){return e.length(t.typeParameters)!==s.length}))){for(var b=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,T=0,E=n;T<E.length;T++){var S=E[T];b=Math.min(b,wi(S.typeParameters)),v=Math.max(v,e.length(S.typeParameters))}var C=b<v?b+"-"+v:b;It.add(e.createDiagnosticForNode(t,e.Diagnostics.Expected_0_type_arguments_but_got_1,C,s.length))}else if(f){b=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY;for(var x=0,B=n;x<B.length;x++){S=B[x];b=Math.min(b,S.minArgumentCount),v=Math.max(v,S.parameters.length)}var A=e.some(n,(function(e){return e.hasRestParameter})),I=lp(f)>-1,D=(C=A?b:b<v?b+"-"+v:b,f.length-(I?1:0)),N=A&&I?e.Diagnostics.Expected_at_least_0_arguments_but_got_a_minimum_of_1:A?e.Diagnostics.Expected_at_least_0_arguments_but_got_1:I?e.Diagnostics.Expected_0_arguments_but_got_a_minimum_of_1:e.Diagnostics.Expected_0_arguments_but_got_1;It.add(e.createDiagnosticForNode(t,N,C,D))}else i&&It.add(e.createDiagnosticForNode(t,i));if(!o){e.Debug.assert(u.length>0);var w=function(e,t){for(var n=-1,o=-1,r=0;r<e.length;r++){var i=e[r];if(i.hasRestParameter||i.parameters.length>=t)return r;i.parameters.length>o&&(o=i.parameters.length,n=r)}return n}(u,void 0===P?f.length:P),R=u[w],O=R.typeParameters;if(O&&ip(t)&&t.typeArguments){for(var L=t.typeArguments.map(bh);L.length>O.length;)L.pop();for(;L.length<O.length;)L.push(Gl(e.isInJavaScriptFile(t)));var M=Hi(R,L);return u[w]=M,M}return R}return ap(t);function F(n,o,r){if(void 0===r&&(r=!1),d=void 0,g=void 0,_){var i=n[0];if(!cp(t,f,i,r))return;return hp(t,f,i,o,p,!1)?i:void(d=i)}for(var a=0;a<n.length;a++){var l=n[a];if(cp(t,f,l,r)){i=void 0;for(var c=l.typeParameters?wl(l,e.isInJavaScriptFile(t)?4:0):void 0;;){if((i=l).typeParameters){var u=void 0;if(s){var h=gp(i,s,!1);if(!h){g=l;break}u=h}else u=dp(t,i,f,p,c);i=Ui(i,u,e.isInJavaScriptFile(i.declaration))}if(!hp(t,f,i,o,p,!1)){d=i;break}if(0===m)return n[a]=i,i;--m>0?p[e.indexOf(p,!0)]=!1:p=void 0}}}}}function Sp(e,t,n,o){return!!Ko(e)||(!!(Ko(t)&&16384&e.flags)||!n&&!o&&(!(65536&e.flags)&&Ra(e,Ee)))}function Cp(t,n){if(t.arguments&&S<1){var o=lp(t.arguments);o>=0&&ln(t.arguments[o],e.Diagnostics.Spread_operator_in_new_expressions_is_only_available_when_targeting_ECMAScript_5_and_higher)}var r=Ku(t.expression);if(r===le)return ot;if((r=_i(r))===Y)return ap(t);if(Ko(r))return t.typeArguments&&ln(t,e.Diagnostics.Untyped_function_calls_may_not_accept_type_arguments),sp(t);var i=Ti(r,1);if(i.length){if(!function(t,n){if(!n||!n.declaration)return!0;var o=n.declaration,r=e.getSelectedModifierFlags(o,24);if(!r)return!0;var i=zg(o.parent.symbol),s=Rr(o.parent.symbol);if(!_h(t,i)){var a=e.getContainingClass(t);if(a)for(var l=Sr(bh(a));l.length;){var c=l[0];if(16&r&&c.symbol===o.parent.symbol)return!0;l=Sr(c)}return 8&r&&ln(t,e.Diagnostics.Constructor_of_class_0_is_private_and_only_accessible_within_the_class_declaration,Bo(s)),16&r&&ln(t,e.Diagnostics.Constructor_of_class_0_is_protected_and_only_accessible_within_the_class_declaration,Bo(s)),!1}return!0}(t,i[0]))return ap(t);var s=r.symbol&&zg(r.symbol);return s&&e.hasModifier(s,128)?(ln(t,e.Diagnostics.Cannot_create_an_instance_of_the_abstract_class_0,e.declarationNameToString(e.getNameOfDeclaration(s))),ap(t)):Ep(t,i,n)}var a=Ti(r,0);if(a.length){var l=Ep(t,a,n);return wp(l.declaration)||Mi(l)===se||ln(t,e.Diagnostics.Only_a_void_function_can_be_called_with_the_new_keyword),Li(l)===se&&ln(t,e.Diagnostics.A_function_that_is_called_with_the_new_keyword_cannot_have_a_this_type_that_is_void),l}return ln(t,e.Diagnostics.Cannot_use_new_with_an_expression_whose_type_lacks_a_call_or_construct_signature),ap(t)}function xp(t){switch(t.parent.kind){case 229:case 199:return e.Diagnostics.Unable_to_resolve_signature_of_class_decorator_when_called_as_an_expression;case 146:return e.Diagnostics.Unable_to_resolve_signature_of_parameter_decorator_when_called_as_an_expression;case 149:return e.Diagnostics.Unable_to_resolve_signature_of_property_decorator_when_called_as_an_expression;case 151:case 153:case 154:return e.Diagnostics.Unable_to_resolve_signature_of_method_decorator_when_called_as_an_expression}}function Bp(t,n){var o=Bd(t.expression),r=_i(o);if(r===Y)return ap(t);var i,s,a=Ti(r,0),l=Ti(r,1);if(Sp(o,r,a.length,l.length))return sp(t);if(i=t,(s=a).length&&e.every(s,(function(e){return 0===e.minArgumentCount&&!e.hasRestParameter&&e.parameters.length<mp(i,void 0,e)}))){var c=e.getTextOfNode(t.expression,!1);return ln(t,e.Diagnostics._0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write_0,c),ap(t)}var u=xp(t);if(!a.length){var p=void 0;return p=e.chainDiagnosticMessages(p,e.Diagnostics.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,Bo(r)),p=e.chainDiagnosticMessages(p,u),It.add(e.createDiagnosticForNodeFromMessageChain(t,p)),ap(t)}return Ep(t,a,n,u)}function Ap(t,n,o){return e.Debug.assert(!(65536&n.flags)),Ip(t,n,o)}function Ip(e,t,n){if(65536&t.flags){for(var o=void 0,r=0,i=t.types;r<i.length;r++){var s=i[r];o=o||Ip(e,s,n)}return o}var a=t&&Ti(t,0);if(a&&a.length>0)return Ep(e,a,n)}function Dp(t,n){switch(t.kind){case 181:return function(t,n){if(97===t.expression.kind){var o=Jc(t.expression);if(o!==Y){var r=e.getClassExtendsHeritageClauseElement(e.getContainingClass(t));if(r)return Ep(t,Tr(o,r.typeArguments,r),n)}return sp(t)}var i=Ku(t.expression);if(i===le)return ot;var s=_i(i);if(s===Y)return ap(t);var a=Ti(s,0),l=Ti(s,1);return Sp(i,s,a.length,l.length)?(i!==Y&&t.typeArguments&&ln(t,e.Diagnostics.Untyped_function_calls_may_not_accept_type_arguments),sp(t)):a.length?Ep(t,a,n):(l.length?ln(t,e.Diagnostics.Value_of_type_0_is_not_callable_Did_you_mean_to_include_new,Bo(i)):ln(t,e.Diagnostics.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,Bo(s)),ap(t))}(t,n);case 182:return Cp(t,n);case 183:return function(t,n){var o=Bd(t.tag),r=_i(o);if(r===Y)return ap(t);var i=Ti(r,0),s=Ti(r,1);return Sp(o,r,i.length,s.length)?sp(t):i.length?Ep(t,i,n):(ln(t,e.Diagnostics.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,Bo(r)),ap(t))}(t,n);case 147:return Bp(t,n);case 251:case 250:return Ip(t,Bd(t.tagName),n)||tt}e.Debug.assertNever(t,"Branch in 'resolveSignature' should be unreachable.")}function Np(e,t){var n=mn(e),o=n.resolvedSignature;if(o&&o!==nt&&!t)return o;n.resolvedSignature=nt;var r=Dp(e,t);return n.resolvedSignature=at===lt?r:o,r}function wp(t){if(t&&e.isInJavaScriptFile(t)){if(e.getJSDocClassTag(t))return!0;var n=e.isFunctionDeclaration(t)||e.isFunctionExpression(t)?eo(t):e.isVariableDeclaration(t)&&t.initializer&&e.isFunctionExpression(t.initializer)?eo(t.initializer):void 0;return n&&void 0!==n.members}return!1}function Rp(t){var n=_n(t);return n.inferredClassType||(n.inferredClassType=po(t,t.members||v,e.emptyArray,e.emptyArray,void 0,void 0)),n.inferredClassType}function Op(e){return e.symbol&&16&yn(e)&&_n(e.symbol).inferredClassType===e}function Pp(t){af(t,t.typeArguments)||lf(t.arguments);var n=Np(t);if(97===t.expression.kind)return se;if(182===t.kind){var o=n.declaration;if(o&&152!==o.kind&&156!==o.kind&&161!==o.kind&&!e.isJSDocConstructSignature(o)){var r=Bd(t.expression).symbol;r||71!==t.expression.kind||(r=Kl(t.expression));var i=r&&function(t){if(e.isDeclarationOfFunctionOrClassExpression(t)&&(t=eo(t.valueDeclaration.initializer)),wp(t.valueDeclaration))return Rp(t);if(3&t.flags){var n=cr(t);if(n.symbol&&!Op(n)&&wp(n.symbol.valueDeclaration))return Rp(n.symbol)}}(r);return i||(D&&ln(t,e.Diagnostics.new_expression_whose_target_lacks_a_construct_signature_implicitly_has_an_any_type),$)}}return e.isInJavaScriptFile(t)&&function(t){if(!e.isRequireCall(t,!0))return!1;if(!e.isIdentifier(t.expression))throw e.Debug.fail();var n=Tn(t.expression,t.expression.escapedText,107455,void 0,void 0,!0);if(!n)return!0;if(2097152&n.flags)return!1;var o=16&n.flags?228:3&n.flags?226:0;if(0!==o){var r=e.getDeclarationOfKind(n,o);return e.isInAmbientContext(r)}return!1}(t)?function(e){var t=Gn(e,e);if(t){var n=jn(t);if(n)return cr(n)}return $}(t.arguments[0]):Mi(n)}function Lp(t){if(lf(t.arguments)||function(t){if(C===e.ModuleKind.ES2015)return xf(t,e.Diagnostics.Dynamic_import_cannot_be_used_when_targeting_ECMAScript_2015_modules);if(t.typeArguments)return xf(t,e.Diagnostics.Dynamic_import_cannot_have_type_arguments);var n=t.arguments;if(1!==n.length)return xf(t,e.Diagnostics.Dynamic_import_must_have_one_specifier_as_an_argument);if(e.isSpreadElement(n[0]))xf(n[0],e.Diagnostics.Specifier_of_dynamic_import_cannot_be_spread_element)}(t),0===t.arguments.length)return jp(t,$);for(var n=t.arguments[0],o=yd(n),r=1;r<t.arguments.length;++r)yd(t.arguments[r]);(2048&o.flags||4096&o.flags||!Ra(o,ee))&&ln(n,e.Diagnostics.Dynamic_import_s_specifier_must_be_of_type_string_but_here_has_type_0,Bo(o));var i=Gn(t,n);if(i){var s=zn(i,n,!0);if(s)return jp(t,function(t,n){if(B&&t&&t!==Y){var o=t;if(!o.syntheticType)if(bi(t,"default"))o.syntheticType=t;else{var r=e.createSymbolTable(),i=cn(2097152,"default");i.target=Pn(n),r.set("default",i);var s=cn(2048,"__type"),a=po(s,r,e.emptyArray,e.emptyArray,void 0,void 0);s.type=a,o.syntheticType=Ks([t,a])}return o.syntheticType}return t}(cr(s),s))}return jp(t,$)}function Mp(t,n,r,i){var s=Sl(dl(Bd(r,i)));ah(n);var a=da(n);o&&a!==Y&&(Pa(a,Bl(s))||Ma(s,a,t,e.Diagnostics.Type_0_cannot_be_converted_to_type_1));return a}function Fp(t){!function(t){if(94===t.keywordToken&&"target"!==t.name.escapedText)xf(t.name,e.Diagnostics._0_is_not_a_valid_meta_property_for_keyword_1_Did_you_mean_2,t.name.escapedText,e.tokenToString(t.keywordToken),"target")}(t);var n=e.getNewTargetContainer(t);return n?152===n.kind?cr(eo(n.parent)):cr(eo(n)):(ln(t,e.Diagnostics.Meta_property_0_is_only_allowed_in_the_body_of_a_function_declaration_function_expression_or_constructor,"new.target"),Y)}function Up(e){var t=cr(e);if(A){var n=e.valueDeclaration;if(n&&n.initializer)return bl(t,2048)}return t}function Hp(e,t){return e.hasRestParameter?t<e.parameters.length-1?Up(e.parameters[t]):Fi(e):t<e.parameters.length?Up(e.parameters[t]):$}function Vp(e){return e.parameters.length>0?Hp(e,0):ae}function Gp(t){for(var n=0,o=t.elements;n<o.length;n++){var r=o[n];e.isOmittedExpression(r)||(71===r.name.kind?_n(eo(r)).type=Xo(r):Gp(r.name))}}function Wp(e,t){var n=_n(e);if(!n.type){n.type=t;var o=e.valueDeclaration;71!==o.name.kind&&(n.type===ue&&(n.type=er(o.name)),Gp(o.name))}}function Kp(e){var t=fs(!0);return t!==ge?Zi(t,[e=Yd(e)||ue]):ue}function jp(t,n){var o=Kp(n);return o===ue?(ln(t,e.isImportCall(t)?e.Diagnostics.A_dynamic_import_call_returns_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES2015_in_your_lib_option:e.Diagnostics.An_async_function_or_method_must_return_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES2015_in_your_lib_option),Y):(_s(!0)||ln(t,e.isImportCall(t)?e.Diagnostics.A_dynamic_import_call_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option:e.Diagnostics.An_async_function_or_method_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option),o)}function zp(t,n){var o=gu(t);if(!t.body)return Y;var r,i=e.getFunctionFlags(t);if(207!==t.body.kind)r=yd(t.body,n),2&i&&(r=Xd(r,t,e.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member));else{var s=void 0;if(1&i){if(!(s=e.concatenate(function(t,n){var o=[],r=e.getFunctionFlags(t);return e.forEachYieldExpression(t.body,(function(t){var i=t.expression;if(i){var s=yd(i,n);t.asteriskToken&&(s=Dg(s,t.expression,!1,0!=(2&r))),2&r&&(s=Xd(s,i,t.asteriskToken?e.Diagnostics.Type_of_iterated_elements_of_a_yield_Asterisk_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:e.Diagnostics.Type_of_yield_operand_in_an_async_generator_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member)),e.pushIfUnique(o,s)}})),o}(t,n),Yp(t,n)))||0===s.length){var a=2&i?Bs($):Is($);return D&&ln(t.asteriskToken,e.Diagnostics.Generator_implicitly_has_type_0_because_it_does_not_yield_any_values_Consider_supplying_a_return_type,Bo(a)),a}}else{if(!(s=Yp(t,n)))return 2&i?jp(t,ae):ae;if(0===s.length)return 2&i?jp(t,se):se}r=Hs(s,!0),1&i&&(r=2&i?Bs(r):Is(r))}o||Dl(t,r),!ul(r)||o&&vd(o===Oi(t)?r:Mi(o))||(r=gl(r));var l=Bl(r);return 2==(3&i)?jp(t,l):l}function $p(t){if(!t.possiblyExhaustive)return!1;var n=xd(t.expression);if(!pl(n))return!1;var o,r,i=_c(t);return!!i.length&&(o=bc(n,ca),r=i,65536&o.flags?!e.forEach(o.types,(function(t){return!e.contains(r,t)})):e.contains(r,o))}function Xp(t){if(!(128&t.flags))return!1;var n=e.lastOrUndefined(t.body.statements);return!n||221!==n.kind||!$p(n)}function Yp(t,n){var o=e.getFunctionFlags(t),r=[],i=Xp(t),s=!1;if(e.forEachReturnStatement(t.body,(function(a){var l=a.expression;if(l){var c=yd(l,n);2&o&&(c=Xd(c,t,e.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member)),8192&c.flags&&(s=!0),e.pushIfUnique(r,c)}else i=!0})),0!==r.length||i||!s&&186!==t.kind&&187!==t.kind)return A&&r.length&&i&&e.pushIfUnique(r,J),r}function Jp(t,n){if(o&&(!n||!rd(n,1025))&&!e.nodeIsMissing(t.body)&&207===t.body.kind&&Xp(t)){var r=256&t.flags;if(n&&8192&n.flags)ln(e.getEffectiveReturnTypeNode(t),e.Diagnostics.A_function_returning_never_cannot_have_a_reachable_end_point);else if(n&&!r)ln(e.getEffectiveReturnTypeNode(t),e.Diagnostics.A_function_whose_declared_type_is_neither_void_nor_any_must_return_a_value);else if(n&&A&&!Ra(J,n))ln(e.getEffectiveReturnTypeNode(t),e.Diagnostics.Function_lacks_ending_return_statement_and_return_type_does_not_include_undefined);else if(E.noImplicitReturns){if(!n){if(!r)return;if(Mg(t,Mi(Oi(t))))return}ln(e.getEffectiveReturnTypeNode(t)||t,e.Diagnostics.Not_all_code_paths_return_a_value)}}}function qp(t,n){if(e.Debug.assert(151!==t.kind||e.isObjectLiteralMethod(t)),1===n&&Ca(t))return lh(t),he;sf(t)||186!==t.kind||df(t);var r=mn(t),i=cr(t.symbol);if(!(1024&r.flags)){var s=fu(t);if(!(1024&r.flags)){if(r.flags|=1024,s){var a=Ti(i,0)[0];if(Ca(t)){var l=uu(t);2===n&&function(t,n,o){for(var r=t.parameters.length-(t.hasRestParameter?1:0),i=0;i<r;i++){var s=t.parameters[i].valueDeclaration;if(s.type){var a=e.getEffectiveTypeAnnotationNode(s);a&&Fl(o.inferences,da(a),Hp(n,i))}}}(a,s,l),function(t,n){t.typeParameters=n.typeParameters,n.thisParameter&&(!(i=t.thisParameter)||i.valueDeclaration&&!i.valueDeclaration.type)&&(i||(t.thisParameter=El(n.thisParameter,void 0)),Wp(t.thisParameter,cr(n.thisParameter)));for(var o=t.parameters.length-(t.hasRestParameter?1:0),r=0;r<o;r++){var i=t.parameters[r];e.getEffectiveTypeAnnotationNode(i.valueDeclaration)||Wp(i,Hp(n,r))}t.hasRestParameter&&il(n,t.parameters.length-1)&&(!un(i=e.lastOrUndefined(t.parameters))&&e.getEffectiveTypeAnnotationNode(i.valueDeclaration)||Wp(i,cr(e.lastOrUndefined(n.parameters))))}(a,l===T?s:ka(s,l))}if(!e.getEffectiveReturnTypeNode(t)&&!a.resolvedReturnType){var c=zp(t,n);a.resolvedReturnType||(a.resolvedReturnType=c)}}wd(t),lh(t)}}return o&&151!==t.kind&&(yg(t,t.name),hg(t,t.name),fg(t,t.name)),i}function Zp(t){e.Debug.assert(151!==t.kind||e.isObjectLiteralMethod(t));var n=e.getFunctionFlags(t),o=e.getEffectiveReturnTypeNode(t),r=o&&(2==(3&n)?Jd(t):da(o));if(0==(1&n)&&Jp(t,r),t.body){if(o||Mi(Oi(t)),207===t.body.kind)ah(t.body);else{var i=Bd(t.body);if(r)if(2==(3&n))La(Xd(i,t.body,e.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member),r,t.body);else La(i,r,t.body)}ig(t)}}function Qp(e,t,n){return!!id(t,84)||(ln(e,n),!1)}function ed(t){return!!(8&e.getCheckFlags(t)||4&t.flags&&64&e.getDeclarationModifierFlagsFromSymbol(t)||3&t.flags&&2&Vu(t)||98304&t.flags&&!(65536&t.flags)||8&t.flags)}function td(t,n){if(ed(n)){if(4&n.flags&&(179===t.kind||180===t.kind)&&99===t.expression.kind){var o=e.getContainingFunction(t);return!o||152!==o.kind||!(o.parent===n.valueDeclaration.parent||o===n.valueDeclaration.parent)}return!0}return!1}function nd(t){if(179===t.kind||180===t.kind){var n=e.skipParentheses(t.expression);if(71===n.kind){var o=mn(n).resolvedSymbol;if(2097152&o.flags){var r=Dn(o);return r&&240===r.kind}}}return!1}function od(t,n){var o=e.skipOuterExpressions(t,3);return 71===o.kind||179===o.kind||180===o.kind||(ln(t,n),!1)}function rd(e,t){if(e.flags&t)return!0;if(196608&e.flags)for(var n=0,o=e.types;n<o.length;n++){if(rd(o[n],t))return!0}return!1}function id(e,t,n){return!!(e.flags&t)||!(n&&7169&e.flags)&&(84&t&&Ra(e,te)||262178&t&&Ra(e,ee)||136&t&&Ra(e,re)||1024&t&&Ra(e,se)||8192&t&&Ra(e,ae)||4096&t&&Ra(e,Z)||2048&t&&Ra(e,J)||512&t&&Ra(e,ie)||16777216&t&&Ra(e,ce))}function sd(e){return 16&yn(e)&&e.symbol&&ad(e.symbol)}function ad(e){return 0!=(128&e.flags)}function ld(t,n,o){if(261===n.kind||262===n.kind){var r=n.name;if(144===r.kind&&bu(r),zo(r))return;var i=e.getTextOfPropertyName(r);if(l=Ko(t)?t:Wo(t,i)||ku(i)&&xi(t,1)||xi(t,0))return 262===n.kind?ud(n,l):ud(n.initializer,l);ln(r,e.Diagnostics.Type_0_has_no_property_1_and_no_string_index_signature,Bo(t),e.declarationNameToString(r))}else{if(263===n.kind){S<5&&Zh(n,4);var s=[];if(o)for(var a=0;a<o.length-1;a++)s.push(o[a].name);var l=$o(t,s,t.symbol);return ud(n.expression,l)}ln(n,e.Diagnostics.Property_assignment_expected)}}function cd(t,n,o,r,i){var s=t.elements,a=s[o];if(200!==a.kind)if(198!==a.kind){var l=""+o,c=Ko(n)?n:cl(n)?Wo(n,l):r;if(c)return ud(a,c,i);Bd(a),hl(n)?ln(a,e.Diagnostics.Tuple_type_0_with_length_1_cannot_be_assigned_to_tuple_with_length_2,Bo(n),es(n),s.length):ln(a,e.Diagnostics.Type_0_has_no_property_1,Bo(n),l)}else if(o<s.length-1)ln(a,e.Diagnostics.A_rest_element_must_be_last_in_a_destructuring_pattern);else{var u=a.expression;if(194!==u.kind||58!==u.operatorToken.kind)return ud(u,Ds(r),i);ln(u.operatorToken,e.Diagnostics.A_rest_element_cannot_have_an_initializer)}}function ud(t,n,o){var r;if(262===t.kind){var i=t;i.objectAssignmentInitializer&&(!A||2048&_l(Bd(i.objectAssignmentInitializer))||(n=nc(n,131072)),fd(i.name,i.equalsToken,i.objectAssignmentInitializer,o)),r=t.name}else r=t;return 194===r.kind&&58===r.operatorToken.kind&&(hd(r,o),r=r.left),178===r.kind?function(e,t){for(var n=e.properties,o=0,r=n;o<r.length;o++)ld(t,r[o],n);return t}(r,n):177===r.kind?function(e,t,n){S<2&&E.downlevelIteration&&Zh(e,512);for(var o=Dg(t,e,!1,!1)||Y,r=e.elements,i=0;i<r.length;i++)cd(e,t,i,o,n);return t}(r,n,o):function(t,n,o){var r=Bd(t,o),i=263===t.parent.kind?e.Diagnostics.The_target_of_an_object_rest_assignment_must_be_a_variable_or_a_property_access:e.Diagnostics.The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access;od(t,i)&&La(n,r,t,void 0);return n}(r,n,o)}function pd(t){switch((t=e.skipParentheses(t)).kind){case 71:case 9:case 12:case 183:case 196:case 13:case 8:case 101:case 86:case 95:case 139:case 186:case 199:case 187:case 177:case 178:case 189:case 203:case 250:case 249:return!0;case 195:return pd(t.whenTrue)&&pd(t.whenFalse);case 194:return!e.isAssignmentOperator(t.operatorToken.kind)&&(pd(t.left)&&pd(t.right));case 192:case 193:switch(t.operator){case 51:case 37:case 38:case 52:return!0}return!1;case 190:case 184:case 202:default:return!1}}function dd(e,t){return 0!=(6144&t.flags)||Pa(e,t)}function gd(e,t){var n=Ra(e,t),o=Ra(t,e);return o&&!n?e:n&&!o?t:Hs([e,t],!0)}function hd(e,t){return fd(e.left,e.operatorToken,e.right,t,e)}function fd(t,n,r,i,s){var a=n.kind;if(58===a&&(178===t.kind||177===t.kind))return ud(t,Bd(r,i),i);var l,c=Bd(t,i),u=Bd(r,i);switch(a){case 39:case 40:case 61:case 62:case 41:case 63:case 42:case 64:case 38:case 60:case 45:case 65:case 46:case 66:case 47:case 67:case 49:case 69:case 50:case 70:case 48:case 68:if(c===le||u===le)return le;c=ju(c,t),u=ju(u,r);var p=void 0;if(136&c.flags&&136&u.flags&&void 0!==(p=function(e){switch(e){case 49:case 69:return 54;case 50:case 70:return 35;case 48:case 68:return 53;default:return}}(n.kind)))ln(s||n,e.Diagnostics.The_0_operator_is_not_allowed_for_boolean_types_Consider_using_1_instead,e.tokenToString(n.kind),e.tokenToString(p));else{var d=Qp(t,c,e.Diagnostics.The_left_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type),g=Qp(r,u,e.Diagnostics.The_right_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type);d&&g&&y(te)}return te;case 37:case 59:if(c===le||u===le)return le;id(c,262178)||id(u,262178)||(c=ju(c,t),u=ju(u,r));var h=void 0;return id(c,84,!0)&&id(u,84,!0)?h=te:id(c,262178,!0)||id(u,262178,!0)?h=ee:(Ko(c)||Ko(u))&&(h=c===Y||u===Y?Y:$),h&&!m(a)?h:h?(59===a&&y(h),h):(k(),$);case 27:case 29:case 30:case 31:return m(a)&&(c=dl(ju(c,t)),u=dl(ju(u,r)),Pa(c,u)||Pa(u,c)||k()),re;case 32:case 33:case 34:case 35:var f=pl(c),_=pl(u);return f&&_||(c=f?dl(c):c,u=_?dl(u):u),dd(c,u)||dd(u,c)||k(),re;case 93:return function(t,n,o,r){return o===le||r===le?le:(!Ko(o)&&id(o,8190)&&ln(t,e.Diagnostics.The_left_hand_side_of_an_instanceof_expression_must_be_of_type_any_an_object_type_or_a_type_parameter),Ko(r)||Ti(r,0).length||Ti(r,1).length||wa(r,Ee)||ln(n,e.Diagnostics.The_right_hand_side_of_an_instanceof_expression_must_be_of_type_any_or_of_a_type_assignable_to_the_Function_interface_type),re)}(t,r,c,u);case 92:return function(t,n,o,r){return o===le||r===le?le:(o=ju(o,t),r=ju(r,n),Pa(o,ee)||id(o,596)||ln(t,e.Diagnostics.The_left_hand_side_of_an_in_expression_must_be_of_type_any_string_number_or_symbol),id(r,17317888)||ln(n,e.Diagnostics.The_right_hand_side_of_an_in_expression_must_be_of_type_any_an_object_type_or_a_type_parameter),re)}(t,r,c,u);case 53:return 1048576&tc(c)?Hs([yl(A?c:dl(u)),u]):c;case 54:return 2097152&tc(c)?gd(ml(c),u):c;case 58:return y(u),Sl(u);case 26:return!E.allowUnreachableCode&&pd(t)&&(71!==(l=r).kind||"eval"!==l.escapedText)&&ln(t,e.Diagnostics.Left_side_of_comma_operator_is_unused_and_has_no_side_effects),u}function m(n){var o=rd(c,512)?t:rd(u,512)?r:void 0;return!o||(ln(o,e.Diagnostics.The_0_operator_cannot_be_applied_to_type_symbol,e.tokenToString(n)),!1)}function y(n){o&&e.isAssignmentOperator(a)&&od(t,e.Diagnostics.The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access)&&La(n,c,t,void 0)}function k(){ln(s||n,e.Diagnostics.Operator_0_cannot_be_applied_to_types_1_and_2,e.tokenToString(n.kind),Bo(c),Bo(u))}}function _d(t){if(o&&(4096&t.flags&&!function(t){for(var n=t,o=t.parent;o;){if(e.isFunctionLike(o)&&n===o.body)return!1;if(e.isClassLike(n))return!0;n=o,o=o.parent}return!1}(t)||Sf(t,e.Diagnostics.A_yield_expression_is_only_allowed_in_a_generator_body),tu(t)&&ln(t,e.Diagnostics.yield_expressions_cannot_be_used_in_a_parameter_initializer)),t.expression){var n=e.getContainingFunction(t),r=n&&e.getFunctionFlags(n);if(t.asteriskToken&&(3==(3&r)&&S<5&&Zh(t,26624),1==(3&r)&&S<2&&E.downlevelIteration&&Zh(t,256)),1&r){var i=yd(t.expression),s=void 0,a=!!t.asteriskToken;a&&(s=Dg(i,t.expression,!1,0!=(2&r)));var l=e.getEffectiveReturnTypeNode(n);if(l){var c=Og(da(l),0!=(2&r))||$;La(a?2&r?Yd(s,t.expression,e.Diagnostics.Type_of_iterated_elements_of_a_yield_Asterisk_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member):s:2&r?Yd(i,t.expression,e.Diagnostics.Type_of_yield_operand_in_an_async_generator_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member):i,c,t.expression,void 0)}}}return $}function md(e,t,n){var o=e.contextualType,r=e.contextualMapper;e.contextualType=t,e.contextualMapper=n;var i=Bd(e,n===T?1:n?2:0);return e.contextualType=o,e.contextualMapper=r,i}function yd(e,t){var n=mn(e);if(!n.resolvedType){var o=at;at=lt,n.resolvedType=Bd(e,t),at=o}return n.resolvedType}function kd(t){return 184===(t=e.skipParentheses(t)).kind||202===t.kind}function bd(t){var n=xd(t.initializer,!0);return 2&e.getCombinedNodeFlags(t)||64&e.getCombinedModifierFlags(t)&&!e.isParameterPropertyDeclaration(t)||kd(t.initializer)?n:gl(n)}function vd(e){if(e){if(540672&e.flags){var t=pi(e)||ue;if(30&t.flags)return!0;e=t}return rd(e,262368)}return!1}function Td(e,t,n){2===arguments.length&&(n=cu(e));var o=Bd(e,t),r=kd(e)||vd(n);return r?o:gl(o)}function Ed(e,t){return 144===e.name.kind&&bu(e.name),Td(e.initializer,t)}function Sd(e,t){return mf(e),144===e.name.kind&&bu(e.name),Cd(e,qp(e,t),t)}function Cd(e,t,n){if(2===n){var o=up(t);if(o&&o.typeParameters){var r=lu(e);if(r){var i=up(vl(r));if(i&&!i.typeParameters)return Wi(pp(o,i,uu(e)))}}}return t}function xd(t,n){if(181===t.kind&&97!==t.expression.kind&&!e.isRequireCall(t,!0)){var o=up(Ku(t.expression));if(o&&!o.typeParameters)return Mi(o)}return n?yd(t):Bd(t)}function Bd(t,n){var r;143===t.kind?r=$u(t):r=Cd(t,function(t,n){switch(t.kind){case 71:return Gc(t);case 99:return Xc(t);case 97:return Jc(t);case 95:return Q;case 13:case 9:return la(ua(t.text));case 8:return If(t),la(ua(+t.text));case 101:return ne;case 86:return oe;case 196:return function(t){return e.forEach(t.templateSpans,(function(e){Bd(e.expression)})),ee}(t);case 12:return Ie;case 177:return mu(t,n);case 178:return Tu(t,n);case 179:return zu(t);case 180:return op(t);case 181:if(91===t.expression.kind)return Lp(t);case 182:return Pp(t);case 183:return function(e){return S<2&&Zh(e,65536),Mi(Np(e))}(t);case 185:return function(t,n){var o=e.isInJavaScriptFile(t)?e.getJSDocTypeTag(t):void 0;if(o)return Mp(o,o.typeExpression.type,t.expression,n);return Bd(t.expression,n)}(t,n);case 199:return function(e){return Kg(e),lh(e),cr(eo(e))}(t);case 186:case 187:return qp(t,n);case 189:return function(e){return Bd(e.expression),Vt}(t);case 184:case 202:return function(e){return Mp(e,e.type,e.expression)}(t);case 203:return function(e){return vl(Bd(e.expression))}(t);case 204:return Fp(t);case 188:return function(t){Bd(t.expression);var n=e.skipParentheses(t.expression);if(179!==n.kind&&180!==n.kind)return ln(n,e.Diagnostics.The_operand_of_a_delete_operator_must_be_a_property_reference),re;var o=no(mn(n).resolvedSymbol);return o&&ed(o)&&ln(n,e.Diagnostics.The_operand_of_a_delete_operator_cannot_be_a_read_only_property),re}(t);case 190:return function(e){return Bd(e.expression),q}(t);case 191:return function(t){return o&&(16384&t.flags||Sf(t,e.Diagnostics.await_expression_is_only_allowed_within_an_async_function),tu(t)&&ln(t,e.Diagnostics.await_expressions_cannot_be_used_in_a_parameter_initializer)),Xd(Bd(t.expression),t,e.Diagnostics.Type_of_await_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member)}(t);case 192:return function(t){var n=Bd(t.operand);if(n===le)return le;if(8===t.operand.kind){if(38===t.operator)return la(ua(-t.operand.text));if(37===t.operator)return la(ua(+t.operand.text))}switch(t.operator){case 37:case 38:case 52:return ju(n,t.operand),rd(n,512)&&ln(t.operand,e.Diagnostics.The_0_operator_cannot_be_applied_to_type_symbol,e.tokenToString(t.operator)),te;case 51:var o=3145728&tc(n);return 1048576===o?oe:2097152===o?ne:re;case 43:case 44:return Qp(t.operand,ju(n,t.operand),e.Diagnostics.An_arithmetic_operand_must_be_of_type_any_number_or_an_enum_type)&&od(t.operand,e.Diagnostics.The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access),te}return Y}(t);case 193:return function(t){var n=Bd(t.operand);return n===le?le:(Qp(t.operand,ju(n,t.operand),e.Diagnostics.An_arithmetic_operand_must_be_of_type_any_number_or_an_enum_type)&&od(t.operand,e.Diagnostics.The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access),te)}(t);case 194:return hd(t,n);case 195:return function(e,t){return Bd(e.condition),gd(Bd(e.whenTrue,t),Bd(e.whenFalse,t))}(t,n);case 198:return function(e,t){return S<2&&E.downlevelIteration&&Zh(e,1536),Dg(Bd(e.expression,t),e.expression,!1,!1)}(t,n);case 200:return q;case 197:return _d(t);case 256:return function(t,n){if(t.expression){var o=Bd(t.expression,n);return t.dotDotDotToken&&o!==$&&!al(o)&&ln(t,e.Diagnostics.JSX_spread_child_must_be_an_array_type),o}return Y}(t,n);case 249:return function(e){return Uu(e.openingElement),Cu(e.closingElement.tagName)?Au(e.closingElement):Bd(e.closingElement.tagName),Mu()||$}(t);case 250:return function(e){return Uu(e),Mu()||$}(t);case 254:return function(e,t){return xu(e.parent,void 0,t)}(t,n);case 251:e.Debug.fail("Shouldn't ever directly check a JsxOpeningElement")}return Y}(t,n),n);sd(r)&&(179===t.parent.kind&&t.parent.expression===t||180===t.parent.kind&&t.parent.expression===t||(71===t.kind||143===t.kind)&&mh(t)||ln(t,e.Diagnostics.const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_import_declaration_or_export_assignment));return r}function Ad(t){t.expression&&Sf(t.expression,e.Diagnostics.Type_expected),ah(t.constraint),ah(t.default);var n=wr(eo(t));di(n)||ln(t.constraint,e.Diagnostics.Type_parameter_0_has_a_circular_constraint,Bo(n)),function(e){return hi(e)!==_e}(n)||ln(t.default,e.Diagnostics.Type_parameter_0_has_a_circular_default,Bo(n));var r=ci(n),i=fi(n);r&&i&&La(i,Vr(r,i),t.default,e.Diagnostics.Type_0_does_not_satisfy_the_constraint_1),o&&Hg(t.name,e.Diagnostics.Type_parameter_name_cannot_be_0)}function Id(t){ef(t)||tf(t),Eg(t);var n=e.getContainingFunction(t);e.hasModifier(t,92)&&(152===n.kind&&e.nodeIsPresent(n.body)||ln(t,e.Diagnostics.A_parameter_property_is_only_allowed_in_a_constructor_implementation)),t.questionToken&&e.isBindingPattern(t.name)&&n.body&&ln(t,e.Diagnostics.A_binding_pattern_parameter_cannot_be_optional_in_an_implementation_signature),t.name&&e.isIdentifier(t.name)&&("this"===t.name.escapedText||"new"===t.name.escapedText)&&(0!==e.indexOf(n.parameters,t)&&ln(t,e.Diagnostics.A_0_parameter_must_be_the_first_parameter,t.name.escapedText),152!==n.kind&&156!==n.kind&&161!==n.kind||ln(t,e.Diagnostics.A_constructor_cannot_have_a_this_parameter)),!t.dotDotDotToken||e.isBindingPattern(t.name)||al(cr(t.symbol))||ln(t,e.Diagnostics.A_rest_parameter_must_be_of_an_array_type)}function Dd(e,t){if(e)for(var n=0;n<e.length;n++){var o=e[n];if(71===o.name.kind&&o.name.escapedText===t.escapedText)return n}return-1}function Nd(t,n,o){for(var r=0,i=t.elements;r<i.length;r++){var s=i[r];if(!e.isOmittedExpression(s)){var a=s.name;if(71===a.kind&&a.escapedText===o)return ln(n,e.Diagnostics.A_type_predicate_cannot_reference_element_0_in_a_binding_pattern,o),!0;if((175===a.kind||174===a.kind)&&Nd(a,n,o))return!0}}}function wd(t){157===t.kind?function(t){ef(t)||tf(t)||function(t){var n=t.parameters[0];if(1!==t.parameters.length)return xf(n?n.name:t,e.Diagnostics.An_index_signature_must_have_exactly_one_parameter);if(n.dotDotDotToken)return xf(n.dotDotDotToken,e.Diagnostics.An_index_signature_cannot_have_a_rest_parameter);if(e.hasModifiers(n))return xf(n.name,e.Diagnostics.An_index_signature_parameter_cannot_have_an_accessibility_modifier);if(n.questionToken)return xf(n.questionToken,e.Diagnostics.An_index_signature_parameter_cannot_have_a_question_mark);if(n.initializer)return xf(n.name,e.Diagnostics.An_index_signature_parameter_cannot_have_an_initializer);if(!n.type)return xf(n.name,e.Diagnostics.An_index_signature_parameter_must_have_a_type_annotation);if(136!==n.type.kind&&133!==n.type.kind)return xf(n.name,e.Diagnostics.An_index_signature_parameter_type_must_be_string_or_number);if(!t.type)xf(t,e.Diagnostics.An_index_signature_must_have_a_type_annotation)}(t)}(t):160!==t.kind&&228!==t.kind&&161!==t.kind&&155!==t.kind&&152!==t.kind&&156!==t.kind||sf(t);var n=e.getFunctionFlags(t);if(4&n||(3==(3&n)&&S<5&&Zh(t,6144),2==(3&n)&&S<4&&Zh(t,64),0!=(3&n)&&S<2&&Zh(t,128)),Vg(t.typeParameters),e.forEach(t.parameters,Id),t.type&&ah(t.type),o){!function(t){if(!e.hasRestParameter(t)||e.isInAmbientContext(t)||e.nodeIsMissing(t.body))return;e.forEach(t.parameters,(function(t){t.name&&!e.isBindingPattern(t.name)&&t.name.escapedText===M.escapedName&&ln(t,e.Diagnostics.Duplicate_identifier_arguments_Compiler_uses_arguments_to_initialize_rest_parameters)}))}(t);var r=e.getEffectiveReturnTypeNode(t);if(D&&!r)switch(t.kind){case 156:ln(t,e.Diagnostics.Construct_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type);break;case 155:ln(t,e.Diagnostics.Call_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type)}if(r){var i=e.getFunctionFlags(t);if(1==(5&i)){var s=da(r);if(s===se)ln(r,e.Diagnostics.A_generator_cannot_have_a_void_type_annotation);else{var a=Og(s,0!=(2&i))||$;La(2&i?Bs(a):Is(a),s,r)}}else 2==(3&i)&&Jd(t)}x&&!t.body&&ug(t)}}function Rd(t){for(var n=e.createMap(),o=0,r=t.members;o<r.length;o++){var i=r[o];if(148===i.kind){var s=void 0;switch(i.name.kind){case 9:case 8:s=i.name.text;break;case 71:s=e.idText(i.name);break;default:continue}n.get(s)?(ln(e.getNameOfDeclaration(i.symbol.valueDeclaration),e.Diagnostics.Duplicate_identifier_0,s),ln(i.name,e.Diagnostics.Duplicate_identifier_0,s)):n.set(s,!0)}}}function Od(t){if(230===t.kind){var n=eo(t);if(n.declarations.length>0&&n.declarations[0]!==t)return}var o=Ki(eo(t));if(o)for(var r=!1,i=!1,s=0,a=o.declarations;s<a.length;s++){var l=a[s];if(1===l.parameters.length&&l.parameters[0].type)switch(l.parameters[0].type.kind){case 136:i?ln(l,e.Diagnostics.Duplicate_string_index_signature):i=!0;break;case 133:r?ln(l,e.Diagnostics.Duplicate_number_index_signature):r=!0}}}function Pd(t){ef(t)||tf(t)||function(t){if(e.isClassLike(t.parent)){if(_f(t.name,e.Diagnostics.A_computed_property_name_in_a_class_property_declaration_must_directly_refer_to_a_built_in_symbol))return!0}else if(230===t.parent.kind){if(_f(t.name,e.Diagnostics.A_computed_property_name_in_an_interface_must_directly_refer_to_a_built_in_symbol))return!0;if(t.initializer)return xf(t.initializer,e.Diagnostics.An_interface_property_cannot_have_an_initializer)}else if(163===t.parent.kind){if(_f(t.name,e.Diagnostics.A_computed_property_name_in_a_type_literal_must_directly_refer_to_a_built_in_symbol))return!0;if(t.initializer)return xf(t.initializer,e.Diagnostics.A_type_literal_property_cannot_have_an_initializer)}if(e.isInAmbientContext(t)&&t.initializer)return Sf(t.initializer,e.Diagnostics.Initializers_are_not_allowed_in_ambient_contexts)}(t)||pf(t.name),Eg(t)}function Ld(t){wd(t),function(t){if(t.typeParameters)return Cf(t,t.typeParameters.pos,t.typeParameters.end-t.typeParameters.pos,e.Diagnostics.Type_parameters_cannot_appear_on_a_constructor_declaration)}(t)||function(t){if(t.type)xf(t.type,e.Diagnostics.Type_annotation_cannot_appear_on_a_constructor_declaration)}(t),ah(t.body),ig(t);var n=eo(t);if(t===e.getDeclarationOfKind(n,t.kind)&&Kd(n),!e.nodeIsMissing(t.body)&&o){var r=t.parent;if(e.getClassExtendsHeritageClauseElement(r)){Wc(t.parent,r);var i=zc(r),s=jc(t);if(s){if(i&&ln(s,e.Diagnostics.A_constructor_cannot_contain_a_super_call_when_its_class_extends_null),e.some(t.parent.members,(function(t){return 149===t.kind&&!e.hasModifier(t,32)&&!!t.initializer}))||e.some(t.parameters,(function(t){return e.hasModifier(t,92)}))){for(var a=void 0,l=0,c=t.body.statements;l<c.length;l++){var u=c[l];if(210===u.kind&&e.isSuperCall(u.expression)){a=u;break}if(!e.isPrologueDirective(u))break}a||ln(t,e.Diagnostics.A_super_call_must_be_the_first_statement_in_the_constructor_when_a_class_contains_initialized_properties_or_has_parameter_properties)}}else i||ln(t,e.Diagnostics.Constructors_for_derived_classes_must_contain_a_super_call)}}}function Md(t){if(o){if(sf(t)||function(t){var n=t.kind;if(S<1)return xf(t.name,e.Diagnostics.Accessors_are_only_available_when_targeting_ECMAScript_5_and_higher);if(e.isInAmbientContext(t))return xf(t.name,e.Diagnostics.An_accessor_cannot_be_declared_in_an_ambient_context);if(void 0===t.body&&!e.hasModifier(t,128))return Cf(t,t.end-1,";".length,e.Diagnostics._0_expected,"{");if(t.body&&e.hasModifier(t,128))return xf(t,e.Diagnostics.An_abstract_accessor_cannot_have_an_implementation);if(t.typeParameters)return xf(t.name,e.Diagnostics.An_accessor_cannot_have_type_parameters);if(!function(e){return ff(e)||e.parameters.length===(153===e.kind?0:1)}(t))return xf(t.name,153===n?e.Diagnostics.A_get_accessor_cannot_have_parameters:e.Diagnostics.A_set_accessor_must_have_exactly_one_parameter);if(154===n){if(t.type)return xf(t.name,e.Diagnostics.A_set_accessor_cannot_have_a_return_type_annotation);var o=t.parameters[0];if(o.dotDotDotToken)return xf(o.dotDotDotToken,e.Diagnostics.A_set_accessor_cannot_have_rest_parameter);if(o.questionToken)return xf(o.questionToken,e.Diagnostics.A_set_accessor_cannot_have_an_optional_parameter);if(o.initializer)return xf(t.name,e.Diagnostics.A_set_accessor_parameter_cannot_have_an_initializer)}}(t)||pf(t.name),ng(t),wd(t),153===t.kind&&!e.isInAmbientContext(t)&&e.nodeIsPresent(t.body)&&128&t.flags&&(256&t.flags||ln(t.name,e.Diagnostics.A_get_accessor_must_return_a_value)),144===t.name.kind&&bu(t.name),!e.hasDynamicName(t)){var n=153===t.kind?154:153,r=e.getDeclarationOfKind(t.symbol,n);if(r){var i=e.getModifierFlags(t),s=e.getModifierFlags(r);(28&i)!=(28&s)&&ln(t.name,e.Diagnostics.Getter_and_setter_accessors_do_not_agree_in_visibility),(128&i)!=(128&s)&&ln(t.name,e.Diagnostics.Accessors_must_both_be_abstract_or_non_abstract),Fd(t,r,rr,e.Diagnostics.get_and_set_accessor_must_have_the_same_type),Fd(t,r,ir,e.Diagnostics.get_and_set_accessor_must_have_the_same_this_type)}}var a=sr(eo(t));153===t.kind&&Jp(t,a)}ah(t.body),ig(t)}function Fd(e,t,n,o){var r=n(e),i=n(t);r&&i&&!Ia(r,i)&&ln(e,o)}function Ud(t,n){for(var o,r,i=wi(t),s=!0,a=0;a<t.length;a++){var l=ci(t[a]);if(l){o||(r=_a(t,o=Ri(e.map(n,da),t,i,e.isInJavaScriptFile(n[a]))));var c=o[a];s=s&&La(c,Ea(l,r),n[a],e.Diagnostics.Type_0_does_not_satisfy_the_constraint_1)}}return s}function Hd(t){af(t,t.typeArguments),159!==t.kind||void 0===t.typeName.jsdocDotPos||e.isInJavaScriptFile(t)||e.isInJSDoc(t)||Cf(t,t.typeName.jsdocDotPos,1,e.Diagnostics.JSDoc_types_can_only_be_used_inside_documentation_comments);var n=as(t);if(n!==Y){if(t.typeArguments&&(e.forEach(t.typeArguments,ah),o)){var r=mn(t).resolvedSymbol;if(!r)return void(e.isJSDocIndexSignature(t)||ln(t,e.Diagnostics.Type_0_is_not_generic,Bo(n)));var i=524288&r.flags&&_n(r).typeParameters;!i&&4&yn(n)&&(i=n.target.localTypeParameters),Ud(i,t.typeArguments)}16&n.flags&&8&mn(t).resolvedSymbol.flags&&ln(t,e.Diagnostics.Enum_type_0_has_members_with_initializers_that_are_not_literals,Bo(n))}}function Vd(t,n){if(!(524288&t.flags))return t;var o=t.objectType,r=t.indexType;return Ra(r,zs(o))?(180===n.kind&&e.isAssignmentTarget(n)&&32&yn(o)&&o.declaration.readonlyToken&&ln(n,e.Diagnostics.Index_signature_in_type_0_only_permits_reading,Bo(o)),t):(Ci(_i(o),1)&&id(r,84)||ln(n,e.Diagnostics.Type_0_cannot_be_used_to_index_type_1,Bo(r),Bo(o)),t)}function Gd(t){return e.hasModifier(t,8)&&e.isInAmbientContext(t)}function Wd(t,n){var o=e.getCombinedModifierFlags(t);return 230!==t.parent.kind&&229!==t.parent.kind&&199!==t.parent.kind&&e.isInAmbientContext(t)&&(2&o||(o|=1),o|=2),o&n}function Kd(t){if(o){for(var n,r,i,s=0,a=155,l=!1,c=!0,u=!1,p=t.declarations,d=0!=(16384&t.flags),g=!1,h=!1,f=0,_=p;f<_.length;f++){var m=_[f],y=e.isInAmbientContext(m),k=230===m.parent.kind||163===m.parent.kind||y;if(k&&(i=void 0),228===m.kind||151===m.kind||150===m.kind||152===m.kind){var b=Wd(m,155);s|=b,a&=b,l=l||e.hasQuestionToken(m),c=c&&e.hasQuestionToken(m),e.nodeIsPresent(m.body)&&n?d?h=!0:g=!0:i&&i.parent===m.parent&&i.end!==m.pos&&B(i),e.nodeIsPresent(m.body)?n||(n=m):u=!0,i=m,k||(r=m)}}if(h&&e.forEach(p,(function(t){ln(t,e.Diagnostics.Multiple_constructor_implementations_are_not_allowed)})),g&&e.forEach(p,(function(t){ln(e.getNameOfDeclaration(t),e.Diagnostics.Duplicate_function_implementation)})),!r||r.body||e.hasModifier(r,128)||r.questionToken||B(r),u&&(function(t,n,o,r,i){if(0!=(r^i)){var s=Wd(x(t,n),o);e.forEach(t,(function(t){var n=Wd(t,o)^s;1&n?ln(e.getNameOfDeclaration(t),e.Diagnostics.Overload_signatures_must_all_be_exported_or_non_exported):2&n?ln(e.getNameOfDeclaration(t),e.Diagnostics.Overload_signatures_must_all_be_ambient_or_non_ambient):24&n?ln(e.getNameOfDeclaration(t)||t,e.Diagnostics.Overload_signatures_must_all_be_public_private_or_protected):128&n&&ln(e.getNameOfDeclaration(t),e.Diagnostics.Overload_signatures_must_all_be_abstract_or_non_abstract)}))}}(p,n,155,s,a),function(t,n,o,r){if(o!==r){var i=e.hasQuestionToken(x(t,n));e.forEach(t,(function(t){e.hasQuestionToken(t)!==i&&ln(e.getNameOfDeclaration(t),e.Diagnostics.Overload_signatures_must_all_be_optional_or_required)}))}}(p,n,l,c),n))for(var v=Pi(t),T=Oi(n),E=0,S=v;E<S.length;E++){var C=S[E];if(!Ua(T,C)){ln(C.declaration,e.Diagnostics.Overload_signature_is_not_compatible_with_function_implementation);break}}}function x(e,t){return void 0!==t&&t.parent===e[0].parent?t:e[0]}function B(t){if(!t.name||!e.nodeIsMissing(t.name)){var n=!1,o=e.forEachChild(t.parent,(function(e){if(n)return e;n=e===t}));if(o&&o.pos===t.end&&o.kind===t.kind){var r=o.name||o,i=o.name;if(t.name&&i&&(e.isComputedPropertyName(t.name)&&e.isComputedPropertyName(i)||!e.isComputedPropertyName(t.name)&&!e.isComputedPropertyName(i)&&e.getEscapedTextOfIdentifierOrLiteral(t.name)===e.getEscapedTextOfIdentifierOrLiteral(i))){if((151===t.kind||150===t.kind)&&e.hasModifier(t,32)!==e.hasModifier(o,32))ln(r,e.hasModifier(t,32)?e.Diagnostics.Function_overload_must_be_static:e.Diagnostics.Function_overload_must_not_be_static);return}if(e.nodeIsPresent(o.body))return void ln(r,e.Diagnostics.Function_implementation_name_must_be_0,e.declarationNameToString(t.name))}var s=t.name||t;d?ln(s,e.Diagnostics.Constructor_implementation_is_missing):e.hasModifier(t,128)?ln(s,e.Diagnostics.All_declarations_of_an_abstract_method_must_be_consecutive):ln(s,e.Diagnostics.Function_implementation_is_missing_or_not_immediately_following_the_declaration)}}}function jd(t){if(o){var n=t.localSymbol;if((n||(n=eo(t)).exportSymbol)&&e.getDeclarationOfKind(n,t.kind)===t){for(var r=0,i=0,s=0,a=0,l=n.declarations;a<l.length;a++){var c=y(_=l[a]),u=Wd(_,513);1&u?512&u?s|=c:r|=c:i|=c}var p,d=r&i,g=s&(r|i);if(d||g)for(var h=0,f=n.declarations;h<f.length;h++){c=y(_=f[h]);var _,m=e.getNameOfDeclaration(_);c&g?ln(m,e.Diagnostics.Merged_declaration_0_cannot_include_a_default_export_declaration_Consider_adding_a_separate_export_default_0_declaration_instead,e.declarationNameToString(m)):c&d&&ln(m,e.Diagnostics.Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local,e.declarationNameToString(m))}!function(e){e[e.None=0]="None",e[e.ExportValue=1]="ExportValue",e[e.ExportType=2]="ExportType",e[e.ExportNamespace=4]="ExportNamespace"}(p||(p={}))}}function y(t){switch(t.kind){case 230:case 231:case 283:return 2;case 233:return e.isAmbientModule(t)||0!==e.getModuleInstanceState(t)?5:4;case 229:case 232:return 3;case 237:case 240:case 239:var n=0,o=Ln(eo(t));return e.forEach(o.declarations,(function(e){n|=y(e)})),n;case 226:case 176:case 228:case 242:return 1;default:e.Debug.fail(e.SyntaxKind[t.kind])}}}function zd(e,t,n){var o=$d(e,t);return o&&Yd(o,t,n)}function $d(t,n){if(!Ko(t)){var o=t;if(o.promisedTypeOfPromise)return o.promisedTypeOfPromise;if(ur(t,fs(!1)))return o.promisedTypeOfPromise=t.typeArguments[0];var r=Wo(t,"then");if(!Ko(r)){var i=r?Ti(r,0):e.emptyArray;if(0!==i.length){var s=nc(Hs(e.map(i,Vp)),524288);if(!Ko(s)){var a=Ti(s,0);if(0!==a.length)return o.promisedTypeOfPromise=Hs(e.map(a,Vp),!0);n&&ln(n,e.Diagnostics.The_first_parameter_of_the_then_method_of_a_promise_must_be_a_callback)}}else n&&ln(n,e.Diagnostics.A_promise_must_have_a_then_method)}}}function Xd(e,t,n){return Yd(e,t,n)||Y}function Yd(t,n,o){var r=t;if(r.awaitedTypeOfType)return r.awaitedTypeOfType;if(Ko(t))return r.awaitedTypeOfType=t;if(65536&t.flags){for(var i=void 0,s=0,a=t.types;s<a.length;s++){var l=a[s];i=e.append(i,Yd(l,n,o))}if(!i)return;return r.awaitedTypeOfType=Hs(i)}var c=$d(t);if(c){if(t.id===c.id||e.indexOf(At,c.id)>=0)return void(n&&ln(n,e.Diagnostics.Type_is_referenced_directly_or_indirectly_in_the_fulfillment_callback_of_its_own_then_method));At.push(t.id);var u=Yd(c,n,o);if(At.pop(),!u)return;return r.awaitedTypeOfType=u}var p=Wo(t,"then");if(!(p&&Ti(p,0).length>0))return r.awaitedTypeOfType=t;n&&(e.Debug.assert(!!o),ln(n,o))}function Jd(t){var n,o=e.getEffectiveReturnTypeNode(t),r=da(o);if(S>=2){if(r===Y)return Y;var i=fs(!0);if(i!==ge&&!ur(r,i))return ln(o,e.Diagnostics.The_return_type_of_an_async_function_or_method_must_be_the_global_Promise_T_type),Y}else{if(function(t){Zd(t&&e.getEntityNameFromTypeNode(t))}(o),r===Y)return Y;var s=e.getEntityNameFromTypeNode(o);if(void 0===s)return ln(o,e.Diagnostics.Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value,Bo(r)),Y;var a=Vn(s,107455,!0),l=a?cr(a):Y;if(l===Y)return 71===s.kind&&"Promise"===s.escapedText&&pr(r)===fs(!1)?ln(o,e.Diagnostics.An_async_function_or_method_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option):ln(o,e.Diagnostics.Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value,e.entityNameToString(s)),Y;var c=(n=!0,Ue||(Ue=gs("PromiseConstructorLike",0,n))||ue);if(c===ue)return ln(o,e.Diagnostics.Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value,e.entityNameToString(s)),Y;if(!La(l,c,o,e.Diagnostics.Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value))return Y;var u=s&&Qg(s),p=bn(t.locals,u.escapedText,107455);if(p)return ln(p.valueDeclaration,e.Diagnostics.Duplicate_identifier_0_Compiler_uses_declaration_1_to_support_async_functions,e.idText(u),e.entityNameToString(s)),Y}return Xd(r,t,e.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member)}function qd(t){var n=Mi(Np(t));if(!(1&n.flags)){var o,r,i=xp(t);switch(t.parent.kind){case 229:o=Hs([cr(eo(t.parent)),se]);break;case 146:o=se,r=e.chainDiagnosticMessages(r,e.Diagnostics.The_return_type_of_a_parameter_decorator_function_must_be_either_void_or_any);break;case 149:o=se,r=e.chainDiagnosticMessages(r,e.Diagnostics.The_return_type_of_a_property_decorator_function_must_be_either_void_or_any);break;case 151:case 153:case 154:o=Hs([xs(bh(t.parent)),se])}La(n,o,t,i,r)}}function Zd(e){if(e){var t=Qg(e),n=2097152|(71===e.kind?793064:1920),o=Tn(t,t.escapedText,n,void 0,void 0,!0);o&&2097152&o.flags&&oo(o)&&!Rh(Ln(o))&&Fn(o)}}function Qd(t){var n=eg(t);n&&e.isEntityName(n)&&Zd(n)}function eg(t){if(t)switch(t.kind){case 167:case 166:for(var n=void 0,o=0,r=t.types;o<r.length;o++){var i=eg(r[o]);if(!i)return;if(n){if(!e.isIdentifier(n)||!e.isIdentifier(i)||n.escapedText!==i.escapedText)return}else n=i}return n;case 168:return eg(t.type);case 159:return t.typeName}}function tg(t){var n=e.getEffectiveTypeAnnotationNode(t);return e.isRestParameter(t)?e.getRestParameterElementType(n):n}function ng(t){if(t.decorators&&e.nodeCanBeDecorated(t)){E.experimentalDecorators||ln(t,e.Diagnostics.Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_the_experimentalDecorators_option_to_remove_this_warning);var n=t.decorators[0];if(Zh(n,8),146===t.kind&&Zh(n,32),E.emitDecoratorMetadata)switch(Zh(n,16),t.kind){case 229:var o=e.getFirstConstructorWithBody(t);if(o)for(var r=0,i=o.parameters;r<i.length;r++){Qd(tg(i[r]))}break;case 151:case 153:case 154:for(var s=0,a=t.parameters;s<a.length;s++){Qd(tg(a[s]))}Qd(e.getEffectiveReturnTypeNode(t));break;case 149:Qd(e.getEffectiveTypeAnnotationNode(t));break;case 146:Qd(tg(t))}e.forEach(t.decorators,qd)}}function og(e){switch(e.kind){case 71:return e;case 179:return e.name;default:return}}function rg(t){ng(t),wd(t);var n=e.getFunctionFlags(t);if(t.name&&144===t.name.kind&&bu(t.name),!e.hasDynamicName(t)){var r=eo(t),i=t.localSymbol||r,s=e.find(i.declarations,(function(e){return e.kind===t.kind&&!(65536&e.flags)}));t===s&&Kd(i),r.parent&&e.getDeclarationOfKind(r,t.kind)===t&&Kd(r)}ah(t.body);var a=e.getEffectiveReturnTypeNode(t);if(0==(1&n)){var l=a&&(2&n?Jd(t):da(a));Jp(t,l)}o&&!a&&(D&&e.nodeIsMissing(t.body)&&!Gd(t)&&Il(t,$),1&n&&e.nodeIsPresent(t.body)&&Mi(Oi(t))),ig(t)}function ig(e){qe&&qe.push(e)}function sg(t){230!==t.parent.kind&&x&&!e.isInAmbientContext(t)&&t.locals.forEach((function(t){if(!t.isReferenced)if(t.valueDeclaration&&146===e.getRootDeclaration(t.valueDeclaration).kind){var n=e.getRootDeclaration(t.valueDeclaration),o=e.getNameOfDeclaration(t.valueDeclaration);!E.noUnusedParameters||e.isParameterPropertyDeclaration(n)||e.parameterIsThisKeyword(n)||(r=o)&&lg(r)||ln(o,e.Diagnostics._0_is_declared_but_its_value_is_never_read,e.symbolName(t))}else E.noUnusedLocals&&e.forEach(t.declarations,(function(n){return ag(n,e.symbolName(t))}));var r}))}function ag(t,n){var o=e.getNameOfDeclaration(t)||t;if(lg(o)){var r=e.getRootDeclaration(o.parent);if(226===r.kind&&e.isForInOrOfStatement(r.parent.parent)||145===r.kind)return}(function(t){if(e.isBindingElement(t)&&e.isObjectBindingPattern(t.parent)){var n=e.lastOrUndefined(t.parent.elements);return n!==t&&!!n.dotDotDotToken}return!1})(71===o.kind?o.parent:o)||ln(o,e.Diagnostics._0_is_declared_but_its_value_is_never_read,n)}function lg(t){return 71===t.kind&&95===e.idText(t).charCodeAt(0)}function cg(t){if(E.noUnusedLocals&&!e.isInAmbientContext(t)&&t.members)for(var n=0,o=t.members;n<o.length;n++){var r=o[n];if(151===r.kind||149===r.kind)!r.symbol.isReferenced&&e.hasModifier(r,8)&&ln(r.name,e.Diagnostics._0_is_declared_but_its_value_is_never_read,e.symbolName(r.symbol));else if(152===r.kind)for(var i=0,s=r.parameters;i<s.length;i++){var a=s[i];!a.symbol.isReferenced&&e.hasModifier(a,8)&&ln(a.name,e.Diagnostics.Property_0_is_declared_but_its_value_is_never_read,e.symbolName(a.symbol))}}}function ug(t){if(E.noUnusedLocals&&!e.isInAmbientContext(t)&&t.typeParameters){var n=eo(t);if((n&&n.declarations&&e.lastOrUndefined(n.declarations))!==t)return;for(var o=0,r=t.typeParameters;o<r.length;o++){var i=r[o];Qn(i.symbol).isReferenced||lg(i.name)||ln(i.name,e.Diagnostics._0_is_declared_but_its_value_is_never_read,e.symbolName(i.symbol))}}}function pg(t){E.noUnusedLocals&&!e.isInAmbientContext(t)&&t.locals.forEach((function(t){if(!t.isReferenced&&!t.exportSymbol)for(var n=0,o=t.declarations;n<o.length;n++){var r=o[n];e.isAmbientModule(r)||ag(r,e.symbolName(t))}}))}function dg(t){if(207===t.kind&&Af(t),e.isFunctionOrModuleBlock(t)){var n=ut;e.forEach(t.statements,ah),ut=n}else e.forEach(t.statements,ah);t.locals&&ig(t)}function gg(t,n,o){if(!n||n.escapedText!==o)return!1;if(149===t.kind||148===t.kind||151===t.kind||150===t.kind||153===t.kind||154===t.kind)return!1;if(e.isInAmbientContext(t))return!1;var r=e.getRootDeclaration(t);return 146!==r.kind||!e.nodeIsMissing(r.parent.body)}function hg(e,t){gg(e,t,"_this")&&xt.push(e)}function fg(e,t){gg(e,t,"_newTarget")&&Bt.push(e)}function _g(t){e.findAncestor(t,(function(n){if(4&Fh(n))return 71!==t.kind?ln(e.getNameOfDeclaration(t),e.Diagnostics.Duplicate_identifier_this_Compiler_uses_variable_declaration_this_to_capture_this_reference):ln(t,e.Diagnostics.Expression_resolves_to_variable_declaration_this_that_compiler_uses_to_capture_this_reference),!0}))}function mg(t){e.findAncestor(t,(function(n){if(8&Fh(n))return 71!==t.kind?ln(e.getNameOfDeclaration(t),e.Diagnostics.Duplicate_identifier_newTarget_Compiler_uses_variable_declaration_newTarget_to_capture_new_target_meta_property_reference):ln(t,e.Diagnostics.Expression_resolves_to_variable_declaration_newTarget_that_compiler_uses_to_capture_new_target_meta_property_reference),!0}))}function yg(t,n){if(gg(t,n,"_super")){var o=e.getContainingClass(t);if(o&&!e.isInAmbientContext(o))if(e.getClassExtendsHeritageClauseElement(o))ln(t,71!==t.kind?e.Diagnostics.Duplicate_identifier_super_Compiler_uses_super_to_capture_base_class_reference:e.Diagnostics.Expression_resolves_to_super_that_compiler_uses_to_capture_base_class_reference)}}function kg(t,n){if(!(C>=e.ModuleKind.ES2015)&&(gg(t,n,"require")||gg(t,n,"exports"))&&(233!==t.kind||1===e.getModuleInstanceState(t))){var o=Go(t);265===o.kind&&e.isExternalOrCommonJsModule(o)&&ln(n,e.Diagnostics.Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module,e.declarationNameToString(n),e.declarationNameToString(n))}}function bg(t,n){if(!(S>=4)&&gg(t,n,"Promise")&&(233!==t.kind||1===e.getModuleInstanceState(t))){var o=Go(t);265===o.kind&&e.isExternalOrCommonJsModule(o)&&1024&o.flags&&ln(n,e.Diagnostics.Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module_containing_async_functions,e.declarationNameToString(n),e.declarationNameToString(n))}}function vg(t){if(146===e.getRootDeclaration(t).kind){var n=e.getContainingFunction(t);!function o(r){if(e.isTypeNode(r)||e.isDeclarationName(r))return;if(179===r.kind)return o(r.expression);if(71!==r.kind)return e.forEachChild(r,o);var i=Tn(r,r.escapedText,2204607,void 0,void 0,!1);if(!i||i===j||!i.valueDeclaration)return;if(i.valueDeclaration===t)return void ln(r,e.Diagnostics.Parameter_0_cannot_be_referenced_in_its_initializer,e.declarationNameToString(t.name));if(e.getEnclosingBlockScopeContainer(i.valueDeclaration)===n){if(146===i.valueDeclaration.kind||176===i.valueDeclaration.kind){if(i.valueDeclaration.pos<t.pos)return;if(e.findAncestor(r,(function(n){return n===t.initializer?"quit":e.isFunctionLike(n.parent)||149===n.parent.kind&&!e.hasModifier(n.parent,32)&&e.isClassLike(n.parent.parent)})))return}ln(r,e.Diagnostics.Initializer_of_parameter_0_cannot_reference_identifier_1_declared_after_it,e.declarationNameToString(t.name),e.declarationNameToString(r))}}(t.initializer)}}function Tg(e){return e===X?$:e===we?Ne:e}function Eg(t){if(ng(t),ah(t.type),t.name){if(144===t.name.kind&&(bu(t.name),t.initializer&&yd(t.initializer)),176===t.kind){174===t.parent.kind&&S<5&&Zh(t,4),t.propertyName&&144===t.propertyName.kind&&bu(t.propertyName);var n=t.parent.parent,o=jo(n),r=t.propertyName||t.name,i=bi(o,e.getTextOfPropertyName(r));Qu(i,void 0,!1),n.initializer&&i&&Wu(n,n.initializer,o,i)}if(e.isBindingPattern(t.name)&&(175===t.name.kind&&S<2&&E.downlevelIteration&&Zh(t,512),e.forEach(t.name.elements,ah)),t.initializer&&146===e.getRootDeclaration(t).kind&&e.nodeIsMissing(e.getContainingFunction(t).body))ln(t,e.Diagnostics.A_parameter_initializer_is_only_allowed_in_a_function_or_constructor_implementation);else if(e.isBindingPattern(t.name))t.initializer&&215!==t.parent.parent.kind&&(La(yd(t.initializer),tr(t),t,void 0),vg(t));else{var s=eo(t),a=Tg(or(s));if(t===s.valueDeclaration)t.initializer&&215!==t.parent.parent.kind&&(La(yd(t.initializer),a,t,void 0),vg(t));else{var l=Tg(tr(t));a===Y||l===Y||Ia(a,l)||ln(t.name,e.Diagnostics.Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_type_2,e.declarationNameToString(t.name),Bo(a),Bo(l)),t.initializer&&La(yd(t.initializer),l,t,void 0),function(t,n){if(146===t.kind&&226===n.kind||226===t.kind&&146===n.kind)return!0;if(e.hasQuestionToken(t)!==e.hasQuestionToken(n))return!1;var o=504;return e.getSelectedModifierFlags(t,o)===e.getSelectedModifierFlags(n,o)}(t,s.valueDeclaration)||(ln(e.getNameOfDeclaration(s.valueDeclaration),e.Diagnostics.All_declarations_of_0_must_have_identical_modifiers,e.declarationNameToString(t.name)),ln(t.name,e.Diagnostics.All_declarations_of_0_must_have_identical_modifiers,e.declarationNameToString(t.name)))}149!==t.kind&&148!==t.kind&&(jd(t),226!==t.kind&&176!==t.kind||function(t){if(0==(3&e.getCombinedNodeFlags(t))&&!e.isParameterDeclaration(t)&&(226!==t.kind||t.initializer)){var n=eo(t);if(1&n.flags){if(!e.isIdentifier(t.name))throw e.Debug.fail();var o=Tn(t,t.name.escapedText,3,void 0,void 0,!1);if(o&&o!==n&&2&o.flags&&3&Vu(o)){var r=e.getAncestor(o.valueDeclaration,227),i=208===r.parent.kind&&r.parent.parent?r.parent.parent:void 0;if(!i||!(207===i.kind&&e.isFunctionLike(i.parent)||234===i.kind||233===i.kind||265===i.kind)){var s=Co(o);ln(t,e.Diagnostics.Cannot_initialize_outer_scoped_variable_0_in_the_same_scope_as_block_scoped_declaration_1,s,s)}}}}}(t),yg(t,t.name),hg(t,t.name),fg(t,t.name),kg(t,t.name),bg(t,t.name))}}}function Sg(t){return function(t){if(215!==t.parent.parent.kind&&216!==t.parent.parent.kind)if(e.isInAmbientContext(t)){if(t.initializer){if(!e.isConst(t)||t.type){var n="=".length;return Cf(t,t.initializer.pos-n,n,e.Diagnostics.Initializers_are_not_allowed_in_ambient_contexts)}if(!yf(t.initializer))return xf(t.initializer,e.Diagnostics.A_const_initializer_in_an_ambient_context_must_be_a_string_or_numeric_literal)}if(t.initializer&&(!e.isConst(t)||!yf(t.initializer))){n="=".length;return Cf(t,t.initializer.pos-n,n,e.Diagnostics.Initializers_are_not_allowed_in_ambient_contexts)}}else if(!t.initializer){if(e.isBindingPattern(t.name)&&!e.isBindingPattern(t.parent))return xf(t,e.Diagnostics.A_destructuring_declaration_must_have_an_initializer);if(e.isConst(t))return xf(t,e.Diagnostics.const_declarations_must_be_initialized)}E.module===e.ModuleKind.ES2015||E.module===e.ModuleKind.ESNext||E.module===e.ModuleKind.System||E.noEmit||e.isInAmbientContext(t.parent.parent)||!e.hasModifier(t.parent.parent,1)||kf(t.name);(e.isLet(t)||e.isConst(t))&&bf(t.name)}(t),Eg(t)}function Cg(t){return function(t){if(t.dotDotDotToken){var n=t.parent.elements;if(t!==e.lastOrUndefined(n))return xf(t,e.Diagnostics.A_rest_element_must_be_last_in_a_destructuring_pattern);if(175===t.name.kind||174===t.name.kind)return xf(t.name,e.Diagnostics.A_rest_element_cannot_contain_a_binding_pattern);if(t.initializer)Cf(t,t.initializer.pos-1,1,e.Diagnostics.A_rest_element_cannot_have_an_initializer)}}(t),Eg(t)}function xg(t){ef(t)||tf(t)||vf(t.declarationList)||function(t){if(!Tf(t.parent)){if(e.isLet(t.declarationList))return xf(t,e.Diagnostics.let_declarations_can_only_be_declared_inside_a_block);if(e.isConst(t.declarationList))xf(t,e.Diagnostics.const_declarations_can_only_be_declared_inside_a_block)}}(t),e.forEach(t.declarationList.declarations,ah)}function Bg(t){hf(t);var n=Ku(t.expression);if(227===t.initializer.kind){var o=t.initializer.declarations[0];o&&e.isBindingPattern(o.name)&&ln(o.name,e.Diagnostics.The_left_hand_side_of_a_for_in_statement_cannot_be_a_destructuring_pattern),Ag(t)}else{var r=t.initializer,i=Bd(r);177===r.kind||178===r.kind?ln(r,e.Diagnostics.The_left_hand_side_of_a_for_in_statement_cannot_be_a_destructuring_pattern):Ra(function(e){var t=zs(e);return t!==ae?t:ee}(n),i)?od(r,e.Diagnostics.The_left_hand_side_of_a_for_in_statement_must_be_a_variable_or_a_property_access):ln(r,e.Diagnostics.The_left_hand_side_of_a_for_in_statement_must_be_of_type_string_or_any)}id(n,17317888)||ln(t.expression,e.Diagnostics.The_right_hand_side_of_a_for_in_statement_must_be_of_type_any_an_object_type_or_a_type_parameter),ah(t.statement),t.locals&&ig(t)}function Ag(e){var t=e.initializer;t.declarations.length>=1&&Sg(t.declarations[0])}function Ig(e,t){return Dg(Ku(e),e,!0,void 0!==t)}function Dg(e,t,n,o){return Ko(e)?e:Ng(e,t,n,o,!0)||$}function Ng(t,n,o,r,i){var s=S>=2,a=!s&&E.downlevelIteration;if(s||a||r){var l=wg(t,s?n:void 0,r,!0,i);if(l||s)return l}var c=t,u=!1,p=!1;if(o){if(65536&c.flags){var d=t.types,g=e.filter(d,(function(e){return!(262178&e.flags)}));g!==d&&(c=Hs(g,!0))}else 262178&c.flags&&(c=ae);if((p=c!==t)&&(S<1&&n&&(ln(n,e.Diagnostics.Using_a_string_in_a_for_of_statement_is_only_supported_in_ECMAScript_5_and_higher),u=!0),8192&c.flags))return ee}if(!ll(c)){if(n&&!u)ln(n,!o||p?a?e.Diagnostics.Type_0_is_not_an_array_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator:e.Diagnostics.Type_0_is_not_an_array_type:a?e.Diagnostics.Type_0_is_not_an_array_type_or_a_string_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator:e.Diagnostics.Type_0_is_not_an_array_type_or_a_string_type,Bo(c));return p?ee:void 0}var h=xi(c,1);return p&&h?262178&h.flags?ee:Hs([h,ee],!0):h}function wg(t,n,o,r,i){if(!Ko(t))return bc(t,(function(t){var s=t;if(o){if(s.iteratedTypeOfAsyncIterable)return s.iteratedTypeOfAsyncIterable;if(ur(t,ms(!1))||ur(t,ks(!1)))return s.iteratedTypeOfAsyncIterable=t.typeArguments[0]}if(r){if(s.iteratedTypeOfIterable)return s.iteratedTypeOfIterable;if(ur(t,bs(!1))||ur(t,Ts(!1)))return s.iteratedTypeOfIterable=t.typeArguments[0]}var a=o&&Wo(t,e.getPropertyNameForKnownSymbolName("asyncIterator")),l=a||r&&Wo(t,e.getPropertyNameForKnownSymbolName("iterator"));if(Ko(l))return;var c=l&&Ti(l,0);if(!e.some(c))return void(n&&(ln(n,o?e.Diagnostics.Type_must_have_a_Symbol_asyncIterator_method_that_returns_an_async_iterator:e.Diagnostics.Type_must_have_a_Symbol_iterator_method_that_returns_an_iterator),n=void 0));var u=Rg(Hs(e.map(c,Mi),!0),n,!!a);i&&n&&u&&La(t,a?function(e){return Cs(ms(!0),[e])}(u):As(u),n);return a?s.iteratedTypeOfAsyncIterable=u:s.iteratedTypeOfIterable=u}))}function Rg(t,n,o){if(!Ko(t)){var r=t;if(o?r.iteratedTypeOfAsyncIterator:r.iteratedTypeOfIterator)return o?r.iteratedTypeOfAsyncIterator:r.iteratedTypeOfIterator;if(ur(t,(o?ys:vs)(!1)))return o?r.iteratedTypeOfAsyncIterator=t.typeArguments[0]:r.iteratedTypeOfIterator=t.typeArguments[0];var i=Wo(t,"next");if(!Ko(i)){var s=i?Ti(i,0):e.emptyArray;if(0!==s.length){var a=Hs(e.map(s,Mi),!0);if(!(Ko(a)||o&&Ko(a=zd(a,n,e.Diagnostics.The_type_returned_by_the_next_method_of_an_async_iterator_must_be_a_promise_for_a_type_with_a_value_property)))){var l=a&&Wo(a,"value");if(l)return o?r.iteratedTypeOfAsyncIterator=l:r.iteratedTypeOfIterator=l;n&&ln(n,o?e.Diagnostics.The_type_returned_by_the_next_method_of_an_async_iterator_must_be_a_promise_for_a_type_with_a_value_property:e.Diagnostics.The_type_returned_by_the_next_method_of_an_iterator_must_have_a_value_property)}}else n&&ln(n,o?e.Diagnostics.An_async_iterator_must_have_a_next_method:e.Diagnostics.An_iterator_must_have_a_next_method)}}}function Og(e,t){if(!Ko(e))return wg(e,void 0,t,!t,!1)||Rg(e,void 0,t)}function Pg(t){Af(t)||function(t){var n=t;for(;n;){if(e.isFunctionLike(n))return xf(t,e.Diagnostics.Jump_target_cannot_cross_function_boundary);switch(n.kind){case 222:if(t.label&&n.label.escapedText===t.label.escapedText)return!!(217===t.kind&&!e.isIterationStatement(n.statement,!0))&&xf(t,e.Diagnostics.A_continue_statement_can_only_jump_to_a_label_of_an_enclosing_iteration_statement);break;case 221:if(218===t.kind&&!t.label)return!1;break;default:if(e.isIterationStatement(n,!1)&&!t.label)return!1}n=n.parent}t.label?xf(t,218===t.kind?e.Diagnostics.A_break_statement_can_only_jump_to_a_label_of_an_enclosing_statement:e.Diagnostics.A_continue_statement_can_only_jump_to_a_label_of_an_enclosing_iteration_statement):xf(t,218===t.kind?e.Diagnostics.A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement:e.Diagnostics.A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement)}(t)}function Lg(t){return 153===t.kind&&void 0!==e.getEffectiveSetAccessorTypeAnnotationNode(e.getDeclarationOfKind(t.symbol,154))}function Mg(t,n){var o=2==(3&e.getFunctionFlags(t))?$d(n):n;return o&&rd(o,1025)}function Fg(t){Af(t)||void 0===t.expression&&function(t,n,o,r,i){var s=e.getSourceFileOfNode(t);if(!Ef(s)){var a=e.getSpanOfTokenAtPosition(s,t.pos);It.add(e.createFileDiagnostic(s,e.textSpanEnd(a),0,n,o,r,i))}}(t,e.Diagnostics.Line_break_not_permitted_here),t.expression&&Bd(t.expression)}function Ug(t){var n,o=ji(t.symbol,1),r=ji(t.symbol,0),i=xi(t,0),s=xi(t,1);if((i||s)&&(e.forEach(si(t),(function(e){var n=cr(e);p(e,n,t,r,i,0),p(e,n,t,o,s,1)})),1&yn(t)&&e.isClassLike(t.symbol.valueDeclaration)))for(var a=0,l=t.symbol.valueDeclaration.members;a<l.length;a++){var c=l[a];if(!e.hasModifier(c,32)&&e.hasDynamicName(c)){var u=cr(c.symbol);p(c.symbol,u,t,r,i,0),p(c.symbol,u,t,o,s,1)}}i&&s&&(!(n=o||r)&&2&yn(t)&&(n=e.forEach(Sr(t),(function(e){return xi(e,0)&&xi(e,1)}))?void 0:t.symbol.declarations[0]));function p(t,n,o,r,i,s){if(i){var a=t.valueDeclaration;if(1!==s||(a?yu(e.getNameOfDeclaration(a)):ku(t.escapedName))){var l;if(!a||194!==a.kind&&144!==e.getNameOfDeclaration(a).kind&&t.parent!==o.symbol){if(r)l=r;else if(2&yn(o)){l=e.forEach(Sr(o),(function(e){return ai(e,t.escapedName)&&xi(e,s)}))?void 0:o.symbol.declarations[0]}}else l=a;if(l&&!Ra(n,i))ln(l,0===s?e.Diagnostics.Property_0_of_type_1_is_not_assignable_to_string_index_type_2:e.Diagnostics.Property_0_of_type_1_is_not_assignable_to_numeric_index_type_2,Co(t),Bo(n),Bo(i))}}}n&&!Ra(s,i)&&ln(n,e.Diagnostics.Numeric_index_type_0_is_not_assignable_to_string_index_type_1,Bo(s),Bo(i))}function Hg(e,t){switch(e.escapedText){case"any":case"number":case"boolean":case"string":case"symbol":case"void":case"object":ln(e,t,e.escapedText)}}function Vg(t){if(t)for(var n=!1,r=0;r<t.length;r++){var i=t[r];if(Ad(i),o){i.default?n=!0:n&&ln(i,e.Diagnostics.Required_type_parameters_may_not_follow_optional_type_parameters);for(var s=0;s<r;s++)t[s].symbol===i.symbol&&ln(i.name,e.Diagnostics.Duplicate_identifier_0,e.declarationNameToString(i.name))}}}function Gg(t){if(1!==t.declarations.length){var n=_n(t);if(!n.typeParametersChecked){n.typeParametersChecked=!0;var o=function(t){return e.filter(t.declarations,(function(e){return 229===e.kind||230===e.kind}))}(t);if(o.length<=1)return;if(!function(t,n){for(var o=e.length(n),r=wi(n),i=0,s=t;i<s.length;i++){var a=s[i],l=e.length(a.typeParameters);if(l<r||l>o)return!1;for(var c=0;c<l;c++){var u=a.typeParameters[c],p=n[c];if(u.name.escapedText!==p.symbol.escapedName)return!1;var d=u.constraint&&da(u.constraint),g=Xi(p);if((d||g)&&(!d||!g||!Ia(d,g)))return!1;var h=u.default&&da(u.default),f=fi(p);if(h&&f&&!Ia(h,f))return!1}}return!0}(o,Rr(t).localTypeParameters))for(var r=Co(t),i=0,s=o;i<s.length;i++){ln(s[i].name,e.Diagnostics.All_declarations_of_0_must_have_identical_type_parameters,r)}}}}function Wg(t){e.forEach(t.members,ah),ig(t)}function Kg(t){!function(t){var n=e.getSourceFileOfNode(t);(function(t){var n=!1,o=!1;if(!ef(t)&&!tf(t)&&t.heritageClauses)for(var r=0,i=t.heritageClauses;r<i.length;r++){var s=i[r];if(85===s.token){if(n)return Sf(s,e.Diagnostics.extends_clause_already_seen);if(o)return Sf(s,e.Diagnostics.extends_clause_must_precede_implements_clause);if(s.types.length>1)return Sf(s.types[1],e.Diagnostics.Classes_can_only_extend_a_single_class);n=!0}else{if(e.Debug.assert(108===s.token),o)return Sf(s,e.Diagnostics.implements_clause_already_seen);o=!0}cf(s)}})(t)||rf(t.typeParameters,n)}(t),ng(t),t.name&&(Hg(t.name,e.Diagnostics.Class_name_cannot_be_0),hg(t,t.name),fg(t,t.name),kg(t,t.name),bg(t,t.name)),Vg(t.typeParameters),jd(t);var n=eo(t),r=Rr(n),i=Vr(r),s=cr(n);Gg(n),function(t){var n;!function(e){e[e.Getter=1]="Getter",e[e.Setter=2]="Setter",e[e.Method=4]="Method",e[e.Property=3]="Property"}(n||(n={}));for(var o=e.createUnderscoreEscapedMap(),r=e.createUnderscoreEscapedMap(),i=0,s=t.members;i<s.length;i++){var a=s[i];if(152===a.kind)for(var l=0,c=a.parameters;l<c.length;l++){var u=c[l];e.isParameterPropertyDeclaration(u)&&!e.isBindingPattern(u.name)&&g(o,u.name,u.name.escapedText,3)}else{var p=e.hasModifier(a,32)?r:o,d=a.name&&e.getPropertyNameForPropertyNameNode(a.name);if(d)switch(a.kind){case 153:g(p,a.name,d,1);break;case 154:g(p,a.name,d,2);break;case 149:g(p,a.name,d,3);break;case 151:g(p,a.name,d,4)}}}function g(t,n,o,r){var i=t.get(o);i?4&i?4!==r&&ln(n,e.Diagnostics.Duplicate_identifier_0,e.getTextOfNode(n)):i&r?ln(n,e.Diagnostics.Duplicate_identifier_0,e.getTextOfNode(n)):t.set(o,i|r):t.set(o,r)}}(t),e.isInAmbientContext(t)||function(t){for(var n=0,o=t.members;n<o.length;n++){var r=o[n],i=r.name;if(e.hasModifier(r,32)&&i){var s=e.getPropertyNameForPropertyNameNode(i);switch(s){case"name":case"length":case"caller":case"arguments":case"prototype":ln(i,e.Diagnostics.Static_property_0_conflicts_with_built_in_property_Function_0_of_constructor_function_1,s,Oo(eo(t)))}}}}(t);var a=e.getClassExtendsHeritageClauseElement(t);if(a){S<2&&Zh(a.parent,1);var l=Sr(r);if(l.length&&o){var c=l[0],u=Er(r),p=_i(u);if(function(t,n){var o=Ti(t,1);if(o.length){var r=o[0].declaration;if(r&&e.hasModifier(r,8))_h(n,zg(t.symbol))||ln(n,e.Diagnostics.Cannot_extend_a_class_0_Class_constructor_is_marked_as_private,Hn(t.symbol))}}(p,a),ah(a.expression),e.some(a.typeArguments)){e.forEach(a.typeArguments,ah);for(var d=0,g=vr(p,a.typeArguments,a);d<g.length;d++){if(!Ud(g[d].typeParameters,a.typeArguments))break}}if(La(i,Vr(c,r.thisType),t.name||t,e.Diagnostics.Class_0_incorrectly_extends_base_class_1),La(s,Aa(p),t.name||t,e.Diagnostics.Class_static_side_0_incorrectly_extends_base_class_static_side_1),540672&u.flags&&!yr(s)&&ln(t.name||t,e.Diagnostics.A_mixin_class_must_have_a_constructor_with_a_single_rest_parameter_of_type_any),!(p.symbol&&32&p.symbol.flags||540672&u.flags)){var h=Tr(p,a.typeArguments,a);e.forEach(h,(function(e){return Mi(e)!==c}))&&ln(a.expression,e.Diagnostics.Base_constructors_must_all_have_the_same_return_type)}!function(t,n){for(var o=li(n),r=0,i=o;r<i.length;r++){var s=i[r],a=jg(s);if(!(4194304&a.flags)){var l=jg(ai(t,a.escapedName)),c=e.getDeclarationModifierFlagsFromSymbol(a);if(e.Debug.assert(!!l,"derived should point to something, even if it is the base class' declaration."),l)if(l===a){var u=zg(t.symbol);!(128&c)||u&&e.hasModifier(u,128)||(199===u.kind?ln(u,e.Diagnostics.Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1,Co(s),Bo(n)):ln(u,e.Diagnostics.Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2,Bo(t),Co(s),Bo(n)))}else{var p=e.getDeclarationModifierFlagsFromSymbol(l);if(8&c||8&p)continue;if(Gu(a)&&Gu(l)||98308&a.flags&&98308&l.flags)continue;var d=void 0;d=Gu(a)?98304&l.flags?e.Diagnostics.Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_accessor:e.Diagnostics.Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_property:4&a.flags?e.Diagnostics.Class_0_defines_instance_member_property_1_but_extended_class_2_defines_it_as_instance_member_function:e.Diagnostics.Class_0_defines_instance_member_accessor_1_but_extended_class_2_defines_it_as_instance_member_function,ln(e.getNameOfDeclaration(l.valueDeclaration)||l.valueDeclaration,d,Bo(n),Co(a),Bo(t))}}}}(r,c)}}var f=e.getClassImplementsHeritageClauseElements(t);if(f)for(var _=0,m=f;_<m.length;_++){var y=m[_];if(e.isEntityNameExpression(y.expression)||ln(y.expression,e.Diagnostics.A_class_can_only_implement_an_identifier_Slashqualified_name_with_optional_type_arguments),Hd(y),o){var k=da(y);k!==Y&&(Cr(k)?La(i,Vr(k,r.thisType),t.name||t,e.Diagnostics.Class_0_incorrectly_implements_interface_1):ln(y,e.Diagnostics.A_class_may_only_implement_another_class_or_interface))}}o&&(Ug(r),Od(t))}function jg(t){return 1&e.getCheckFlags(t)?t.target:t}function zg(t){return e.forEach(t.declarations,(function(t){return e.isClassLike(t)?t:void 0}))}function $g(t){if(ef(t)||tf(t)||function(t){var n=!1;if(t.heritageClauses)for(var o=0,r=t.heritageClauses;o<r.length;o++){var i=r[o];if(85!==i.token)return e.Debug.assert(108===i.token),Sf(i,e.Diagnostics.Interface_declaration_cannot_have_implements_clause);if(n)return Sf(i,e.Diagnostics.extends_clause_already_seen);n=!0,cf(i)}}(t),Vg(t.typeParameters),o){Hg(t.name,e.Diagnostics.Interface_name_cannot_be_0),jd(t);var n=eo(t);if(Gg(n),t===e.getDeclarationOfKind(n,230)){var r=Rr(n),i=Vr(r);if(function(t,n){var o=Sr(t);if(o.length<2)return!0;var r=e.createUnderscoreEscapedMap();e.forEach(Hr(t).declaredProperties,(function(e){r.set(e.escapedName,{prop:e,containingType:t})}));for(var i=!0,s=0,a=o;s<a.length;s++)for(var l=a[s],c=0,u=li(Vr(l,t.thisType));c<u.length;c++){var p=u[c],d=r.get(p.escapedName);if(d){if(d.containingType!==t&&0===ol(d.prop,p,Da)){i=!1;var g=Bo(d.containingType),h=Bo(l),f=e.chainDiagnosticMessages(void 0,e.Diagnostics.Named_property_0_of_types_1_and_2_are_not_identical,Co(p),g,h);f=e.chainDiagnosticMessages(f,e.Diagnostics.Interface_0_cannot_simultaneously_extend_types_1_and_2,Bo(t),g,h),It.add(e.createDiagnosticForNodeFromMessageChain(n,f))}}else r.set(p.escapedName,{prop:p,containingType:l})}return i}(r,t.name)){for(var s=0,a=Sr(r);s<a.length;s++){La(i,Vr(a[s],r.thisType),t.name,e.Diagnostics.Interface_0_incorrectly_extends_interface_1)}Ug(r)}}Rd(t)}e.forEach(e.getInterfaceBaseTypeNodes(t),(function(t){e.isEntityNameExpression(t.expression)||ln(t.expression,e.Diagnostics.An_interface_can_only_extend_an_identifier_Slashqualified_name_with_optional_type_arguments),Hd(t)})),e.forEach(t.members,ah),o&&(Od(t),ig(t))}function Xg(e){var t=mn(e);if(!(16384&t.flags)){t.flags|=16384;for(var n=0,o=0,r=e.members;o<r.length;o++){var i=r[o],s=Yg(i,n);mn(i).enumMemberValue=s,n="number"==typeof s?s+1:void 0}}}function Yg(t,n){if(zo(t.name))ln(t.name,e.Diagnostics.Computed_property_names_are_not_allowed_in_enums);else{var o=e.getTextOfPropertyName(t.name);ku(o)&&!function(e){return"Infinity"===e||"-Infinity"===e||"NaN"===e}(o)&&ln(t.name,e.Diagnostics.An_enum_member_cannot_have_a_numeric_name)}return t.initializer?function(t){var n=Ar(eo(t.parent)),o=e.isConst(t.parent),r=t.initializer,i=1!==n||Br(t)?s(r):void 0;if(void 0!==i)o&&"number"==typeof i&&!isFinite(i)&&ln(r,isNaN(i)?e.Diagnostics.const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN:e.Diagnostics.const_enum_member_initializer_was_evaluated_to_a_non_finite_value);else{if(1===n)return ln(r,e.Diagnostics.Computed_values_are_not_permitted_in_an_enum_with_string_valued_members),0;o?ln(r,e.Diagnostics.In_const_enum_declarations_member_initializer_must_be_constant_expression):e.isInAmbientContext(t.parent)?ln(r,e.Diagnostics.In_ambient_enum_declarations_member_initializer_must_be_constant_expression):La(Bd(r),Rr(eo(t.parent)),r,void 0)}return i;function s(n){switch(n.kind){case 192:var o=s(n.operand);if("number"==typeof o)switch(n.operator){case 37:return o;case 38:return-o;case 52:return~o}break;case 194:var r=s(n.left),i=s(n.right);if("number"==typeof r&&"number"==typeof i)switch(n.operatorToken.kind){case 49:return r|i;case 48:return r&i;case 46:return r>>i;case 47:return r>>>i;case 45:return r<<i;case 50:return r^i;case 39:return r*i;case 41:return r/i;case 37:return r+i;case 38:return r-i;case 42:return r%i}break;case 9:return n.text;case 8:return If(n),+n.text;case 185:return s(n.expression);case 71:return e.nodeIsMissing(n)?0:a(n,eo(t.parent),n.escapedText);case 180:case 179:var l=n;if(Jg(l)){var c=xd(l.expression);if(c.symbol&&384&c.symbol.flags){var u=void 0;if(179===l.kind)u=l.name.escapedText;else{var p=l.argumentExpression;e.Debug.assert(e.isLiteralExpression(p)),u=e.escapeLeadingUnderscores(p.text)}return a(n,c.symbol,u)}}}}function a(n,o,r){var i=o.exports.get(r);if(i){var s=i.valueDeclaration;if(s!==t)return vn(s,t)?mn(s).enumMemberValue:(ln(n,e.Diagnostics.A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_members_defined_in_other_enums),0)}}}(t):!e.isInAmbientContext(t.parent)||e.isConst(t.parent)?void 0!==n?n:void ln(t.name,e.Diagnostics.Enum_member_must_have_initializer):void 0}function Jg(e){return 71===e.kind||179===e.kind&&Jg(e.expression)||180===e.kind&&Jg(e.expression)&&9===e.argumentExpression.kind}function qg(t){if(o){var n=e.isGlobalScopeAugmentation(t),r=e.isInAmbientContext(t);n&&!r&&ln(t.name,e.Diagnostics.Augmentations_for_the_global_scope_should_have_declare_modifier_unless_they_appear_in_already_ambient_context);var i=e.isAmbientModule(t);if(oh(t,i?e.Diagnostics.An_ambient_module_declaration_is_only_allowed_at_the_top_level_in_a_file:e.Diagnostics.A_namespace_declaration_is_only_allowed_in_a_namespace_or_module))return;ef(t)||tf(t)||r||9!==t.name.kind||xf(t.name,e.Diagnostics.Only_ambient_modules_can_use_quoted_names),e.isIdentifier(t.name)&&(hg(t,t.name),kg(t,t.name),bg(t,t.name)),jd(t);var s=eo(t);if(512&s.flags&&s.declarations.length>1&&!r&&l(t,E.preserveConstEnums||E.isolatedModules)){var a=function(t){for(var n=0,o=t.declarations;n<o.length;n++){var r=o[n];if((229===r.kind||228===r.kind&&e.nodeIsPresent(r.body))&&!e.isInAmbientContext(r))return r}}(s);a&&(e.getSourceFileOfNode(t)!==e.getSourceFileOfNode(a)?ln(t.name,e.Diagnostics.A_namespace_declaration_cannot_be_in_a_different_file_from_a_class_or_function_with_which_it_is_merged):t.pos<a.pos&&ln(t.name,e.Diagnostics.A_namespace_declaration_cannot_be_located_prior_to_a_class_or_function_with_which_it_is_merged));var c=e.getDeclarationOfKind(s,229);c&&(d=t,g=c,h=e.getEnclosingBlockScopeContainer(d),f=e.getEnclosingBlockScopeContainer(g),kn(h)?kn(f):!kn(f)&&h===f)&&(mn(t).flags|=32768)}if(i)if(e.isExternalModuleAugmentation(t)){if((n||33554432&eo(t).flags)&&t.body)for(var u=0,p=t.body.statements;u<p.length;u++){Zg(p[u],n)}}else kn(t.parent)?n?ln(t.name,e.Diagnostics.Augmentations_for_the_global_scope_can_only_be_directly_nested_in_external_modules_or_ambient_module_declarations):e.isExternalModuleNameRelative(e.getTextOfIdentifierOrLiteral(t.name))&&ln(t.name,e.Diagnostics.Ambient_module_declaration_cannot_specify_relative_module_name):ln(t.name,n?e.Diagnostics.Augmentations_for_the_global_scope_can_only_be_directly_nested_in_external_modules_or_ambient_module_declarations:e.Diagnostics.Ambient_modules_cannot_be_nested_in_other_modules_or_namespaces)}var d,g,h,f;t.body&&(ah(t.body),e.isGlobalScopeAugmentation(t)||ig(t))}function Zg(t,n){switch(t.kind){case 208:for(var o=0,r=t.declarationList.declarations;o<r.length;o++){Zg(r[o],n)}break;case 243:case 244:Sf(t,e.Diagnostics.Exports_and_export_assignments_are_not_permitted_in_module_augmentations);break;case 237:case 238:Sf(t,e.Diagnostics.Imports_are_not_permitted_in_module_augmentations_Consider_moving_them_to_the_enclosing_external_module);break;case 176:case 226:var i=t.name;if(e.isBindingPattern(i)){for(var s=0,a=i.elements;s<a.length;s++){Zg(a[s],n)}break}case 229:case 232:case 228:case 230:case 233:case 231:if(n)return;var l=eo(t);if(l){var c=!(33554432&l.flags);c||(c=e.isExternalModuleAugmentation(l.parent.declarations[0]))}}}function Qg(e){switch(e.kind){case 71:return e;case 143:do{e=e.left}while(71!==e.kind);return e;case 179:do{e=e.expression}while(71!==e.kind);return e}}function eh(t){var n=e.getExternalModuleName(t);if(!e.nodeIsMissing(n)&&9!==n.kind)return ln(n,e.Diagnostics.String_literal_expected),!1;var o=234===t.parent.kind&&e.isAmbientModule(t.parent.parent);return 265===t.parent.kind||o?!(o&&e.isExternalModuleNameRelative(e.getTextOfIdentifierOrLiteral(n))&&!wo(t))||(ln(t,e.Diagnostics.Import_or_export_declaration_in_an_ambient_module_declaration_cannot_reference_module_through_relative_module_name),!1):(ln(n,244===t.kind?e.Diagnostics.Export_declarations_are_not_permitted_in_a_namespace:e.Diagnostics.Import_declarations_in_a_namespace_cannot_reference_a_module),!1)}function th(t){var n=eo(t),o=Ln(n);if(o!==j){var r=(1156031&n.flags?107455:0)|(793064&n.flags?793064:0)|(1920&n.flags?1920:0);if(o.flags&r)ln(t,246===t.kind?e.Diagnostics.Export_declaration_conflicts_with_exported_declaration_of_0:e.Diagnostics.Import_declaration_conflicts_with_local_declaration_of_0,Co(n));!E.isolatedModules||246!==t.kind||107455&o.flags||e.isInAmbientContext(t)||ln(t,e.Diagnostics.Cannot_re_export_a_type_when_the_isolatedModules_flag_is_provided)}}function nh(e){hg(e,e.name),kg(e,e.name),bg(e,e.name),th(e)}function oh(e,t){var n=265===e.parent.kind||234===e.parent.kind||233===e.parent.kind;return n||Sf(e,t),!n}function rh(t){if(th(t),!t.parent.parent.moduleSpecifier){var n=t.propertyName||t.name,o=Tn(n,n.escapedText,2998271,void 0,void 0,!0);o&&(o===O||kn(Go(o.declarations[0])))?ln(n,e.Diagnostics.Cannot_export_0_Only_local_declarations_can_be_exported_from_a_module,e.idText(n)):Mn(t)}}function ih(t){var n=eo(t),o=_n(n);if(!o.exportsChecked){var r=n.exports.get("export=");if(r&&function(t){return e.forEachEntry(t.exports,(function(e,t){return"export="!==t}))}(n)){var i=Dn(r)||r.valueDeclaration;wo(i)||ln(i,e.Diagnostics.An_export_assignment_cannot_be_used_in_a_module_with_other_exported_elements)}var s=qn(n);s&&s.forEach((function(t,n){var o=t.declarations,r=t.flags;if("__export"!==n&&!(1984&r)){var i=e.countWhere(o,sn);if(!(524288&r&&i<=2)&&i>1)for(var s=0,a=o;s<a.length;s++){var l=a[s];sh(l)&&It.add(e.createDiagnosticForNode(l,e.Diagnostics.Cannot_redeclare_exported_variable_0,e.unescapeLeadingUnderscores(n)))}}})),o.exportsChecked=!0}}function sh(e){return 228!==e.kind&&151!==e.kind||!!e.body}function ah(t){if(t){if(e.isInJavaScriptFile(t)&&t.jsDoc)for(var n=0,r=t.jsDoc;n<r.length;n++){var i=r[n].tags;e.forEach(i,ah)}var s=t.kind;if(p)switch(s){case 233:case 229:case 230:case 228:p.throwIfCancellationRequested()}switch(s){case 145:return Ad(t);case 146:return Id(t);case 149:case 148:return Pd(t);case 160:case 161:case 155:case 156:case 157:return wd(t);case 151:case 150:return function(t){mf(t)||pf(t.name),rg(t),e.hasModifier(t,128)&&t.body&&ln(t,e.Diagnostics.Method_0_cannot_have_an_implementation_because_it_is_marked_abstract,e.declarationNameToString(t.name))}(t);case 152:return Ld(t);case 153:case 154:return Md(t);case 159:return Hd(t);case 158:return function(t){var n=function(e){switch(e.parent.kind){case 187:case 155:case 228:case 186:case 160:case 151:case 150:var t=e.parent;if(e===t.type)return t}}(t);if(n){var o=Oi(n).typePredicate;if(o){ah(t.type);var r=t.parameterName;if(e.isThisTypePredicate(o))pa(r);else if(o.parameterIndex>=0)if(n.parameters[o.parameterIndex].dotDotDotToken)ln(r,e.Diagnostics.A_type_predicate_cannot_reference_a_rest_parameter);else{var i=e.chainDiagnosticMessages(void 0,e.Diagnostics.A_type_predicate_s_type_must_be_assignable_to_its_parameter_s_type);La(o.type,bh(n.parameters[o.parameterIndex]),t.type,void 0,i)}else if(r){for(var s=!1,a=0,l=n.parameters;a<l.length;a++){var c=l[a].name;if(e.isBindingPattern(c)&&Nd(c,r,o.parameterName)){s=!0;break}}s||ln(t.parameterName,e.Diagnostics.Cannot_find_parameter_0,o.parameterName)}}}else ln(t,e.Diagnostics.A_type_predicate_is_only_allowed_in_return_type_position_for_functions_and_methods)}(t);case 162:return function(e){cs(e)}(t);case 163:return function(t){e.forEach(t.members,ah),o&&(Ug(ta(t)),Od(t),Rd(t))}(t);case 164:return function(e){ah(e.elementType)}(t);case 165:return function(t){of(t.elementTypes)||0!==t.elementTypes.length||xf(t,e.Diagnostics.A_tuple_type_element_list_cannot_be_empty),e.forEach(t.elementTypes,ah)}(t);case 166:case 167:return function(t){e.forEach(t.types,ah)}(t);case 168:case 170:return ah(t.type);case 277:return function(t){var n=e.getJSDocHost(t);if(e.isClassDeclaration(n)||e.isClassExpression(n)){var o=e.getAllJSDocTagsOfKind(n,277);e.Debug.assert(o.length>0),o.length>1&&ln(o[1],e.Diagnostics.Class_declarations_cannot_have_more_than_one_augments_or_extends_tag);var r=og(t.class.expression),i=e.getClassExtendsHeritageClauseElement(n);if(i){var s=og(i.expression);s&&r.escapedText!==s.escapedText&&ln(r,e.Diagnostics.JSDoc_0_1_does_not_match_the_extends_2_clause,e.idText(t.tagName),e.idText(r),e.idText(s))}}else ln(n,e.Diagnostics.JSDoc_0_is_not_attached_to_a_class,e.idText(t.tagName))}(t);case 283:return function(t){t.typeExpression||ln(t.name,e.Diagnostics.JSDoc_typedef_tag_should_either_have_a_type_annotation_or_be_followed_by_property_or_member_tags)}(t);case 279:return function(t){ah(t.typeExpression),e.getParameterSymbolFromJSDoc(t)||ln(t.name,e.Diagnostics.JSDoc_param_tag_has_name_0_but_there_is_no_parameter_with_that_name,e.idText(143===t.name.kind?t.name.right:t.name))}(t);case 273:wd(t);case 274:case 271:case 270:case 268:case 269:return void(e.isInJavaScriptFile(t)||e.isInJSDoc(t)||xf(t,e.Diagnostics.JSDoc_types_can_only_be_used_inside_documentation_comments));case 267:return ah(t.type);case 171:return function(e){ah(e.objectType),ah(e.indexType),Vd(Qs(e),e)}(t);case 172:return function(e){ah(e.typeParameter),ah(e.type),La(ni(ea(e)),ee,e.typeParameter.constraint)}(t);case 228:return function(e){o&&(rg(e),df(e),yg(e,e.name),hg(e,e.name),fg(e,e.name),kg(e,e.name),bg(e,e.name))}(t);case 207:case 234:return dg(t);case 208:return xg(t);case 210:return function(e){Af(e),Bd(e.expression)}(t);case 211:return function(t){Af(t),Bd(t.expression),ah(t.thenStatement),209===t.thenStatement.kind&&ln(t.thenStatement,e.Diagnostics.The_body_of_an_if_statement_cannot_be_the_empty_statement),ah(t.elseStatement)}(t);case 212:return function(e){Af(e),ah(e.statement),Bd(e.expression)}(t);case 213:return function(e){Af(e),Bd(e.expression),ah(e.statement)}(t);case 214:return function(t){Af(t)||t.initializer&&227===t.initializer.kind&&vf(t.initializer),t.initializer&&(227===t.initializer.kind?e.forEach(t.initializer.declarations,Sg):Bd(t.initializer)),t.condition&&Bd(t.condition),t.incrementor&&Bd(t.incrementor),ah(t.statement),t.locals&&ig(t)}(t);case 215:return Bg(t);case 216:return function(t){if(hf(t),216===t.kind&&(t.awaitModifier?2==(6&e.getFunctionFlags(e.getContainingFunction(t)))&&S<5&&Zh(t,16384):E.downlevelIteration&&S<2&&Zh(t,256)),227===t.initializer.kind)Ag(t);else{var n=t.initializer,o=Ig(t.expression,t.awaitModifier);if(177===n.kind||178===n.kind)ud(n,o||Y);else{var r=Bd(n);od(n,e.Diagnostics.The_left_hand_side_of_a_for_of_statement_must_be_a_variable_or_a_property_access),o&&La(o,r,n,void 0)}}ah(t.statement),t.locals&&ig(t)}(t);case 217:case 218:return Pg(t);case 219:return function(t){Af(t)||e.getContainingFunction(t)||Sf(t,e.Diagnostics.A_return_statement_can_only_be_used_within_a_function_body);var n=e.getContainingFunction(t);if(n){var o=Mi(Oi(n));if(A||t.expression||8192&o.flags){var r=t.expression?yd(t.expression):J,i=e.getFunctionFlags(n);if(1&i)return;if(154===n.kind)t.expression&&ln(t,e.Diagnostics.Setters_cannot_return_a_value);else if(152===n.kind)t.expression&&!La(r,o,t)&&ln(t,e.Diagnostics.Return_type_of_constructor_signature_must_be_assignable_to_the_instance_type_of_the_class);else if(e.getEffectiveReturnTypeNode(n)||Lg(n))if(2&i){var s=$d(o),a=Xd(r,t,e.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member);s&&La(a,s,t)}else La(r,o,t)}else 152!==n.kind&&E.noImplicitReturns&&!Mg(n,o)&&ln(t,e.Diagnostics.Not_all_code_paths_return_a_value)}}(t);case 220:return function(t){Af(t)||16384&t.flags&&Sf(t,e.Diagnostics.with_statements_are_not_allowed_in_an_async_function_block),Bd(t.expression);var n=e.getSourceFileOfNode(t);if(!Ef(n)){var o=e.getSpanOfTokenAtPosition(n,t.pos).start;Cf(n,o,t.statement.pos-o,e.Diagnostics.The_with_statement_is_not_supported_All_symbols_in_a_with_block_will_have_type_any)}}(t);case 221:return function(t){var n;Af(t);var r=!1,i=Bd(t.expression),s=pl(i);e.forEach(t.caseBlock.clauses,(function(a){if(258===a.kind&&!r)if(void 0===n)n=a;else{var l=e.getSourceFileOfNode(t),c=e.skipTrivia(l.text,a.pos);Cf(l,c,(a.statements.length>0?a.statements[0].pos:a.end)-c,e.Diagnostics.A_default_clause_cannot_appear_more_than_once_in_a_switch_statement),r=!0}if(o&&257===a.kind){var u=a,p=Bd(u.expression),d=pl(p),g=i;d&&s||(p=d?dl(p):p,g=dl(i)),dd(g,p)||Ma(p,g,u.expression,void 0)}e.forEach(a.statements,ah)})),t.caseBlock.locals&&ig(t.caseBlock)}(t);case 222:return function(t){Af(t)||e.findAncestor(t.parent,(function(n){if(e.isFunctionLike(n))return"quit";if(222===n.kind&&n.label.escapedText===t.label.escapedText){var o=e.getSourceFileOfNode(t);return xf(t.label,e.Diagnostics.Duplicate_label_0,e.getTextOfNodeFromSourceText(o.text,t.label)),!0}})),ah(t.statement)}(t);case 223:return Fg(t);case 224:return function(t){Af(t),dg(t.tryBlock);var n=t.catchClause;if(n){if(n.variableDeclaration)if(n.variableDeclaration.type)Sf(n.variableDeclaration.type,e.Diagnostics.Catch_clause_variable_cannot_have_a_type_annotation);else if(n.variableDeclaration.initializer)Sf(n.variableDeclaration.initializer,e.Diagnostics.Catch_clause_variable_cannot_have_an_initializer);else{var o=n.block.locals;o&&e.forEachKey(n.locals,(function(t){var n=o.get(t);n&&0!=(2&n.flags)&&xf(n.valueDeclaration,e.Diagnostics.Cannot_redeclare_identifier_0_in_catch_clause,t)}))}dg(n.block)}t.finallyBlock&&dg(t.finallyBlock)}(t);case 226:return Sg(t);case 176:return Cg(t);case 229:return function(t){t.name||e.hasModifier(t,512)||Sf(t,e.Diagnostics.A_class_declaration_without_the_default_modifier_must_have_a_name),Kg(t),e.forEach(t.members,ah),ig(t)}(t);case 230:return $g(t);case 231:return function(t){ef(t)||tf(t),Hg(t.name,e.Diagnostics.Type_alias_name_cannot_be_0),Vg(t.typeParameters),ah(t.type),ig(t)}(t);case 232:return function(t){if(o){ef(t)||tf(t),Hg(t.name,e.Diagnostics.Enum_name_cannot_be_0),hg(t,t.name),fg(t,t.name),kg(t,t.name),bg(t,t.name),jd(t),Xg(t);var n=e.isConst(t);E.isolatedModules&&n&&e.isInAmbientContext(t)&&ln(t.name,e.Diagnostics.Ambient_const_enums_are_not_allowed_when_the_isolatedModules_flag_is_provided);var r=eo(t);if(t===e.getDeclarationOfKind(r,t.kind)){r.declarations.length>1&&e.forEach(r.declarations,(function(t){e.isConstEnumDeclaration(t)!==n&&ln(e.getNameOfDeclaration(t),e.Diagnostics.Enum_declarations_must_all_be_const_or_non_const)}));var i=!1;e.forEach(r.declarations,(function(t){if(232!==t.kind)return!1;var n=t;if(!n.members.length)return!1;var o=n.members[0];o.initializer||(i?ln(o.name,e.Diagnostics.In_an_enum_with_multiple_declarations_only_one_declaration_can_omit_an_initializer_for_its_first_enum_element):i=!0)}))}}}(t);case 233:return qg(t);case 238:return function(t){if(!oh(t,e.Diagnostics.An_import_declaration_can_only_be_used_in_a_namespace_or_module)&&(ef(t)||tf(t)||!e.hasModifiers(t)||Sf(t,e.Diagnostics.An_import_declaration_cannot_have_modifiers),eh(t))){var n=t.importClause;n&&(n.name&&nh(n),n.namedBindings&&(240===n.namedBindings.kind?nh(n.namedBindings):e.forEach(n.namedBindings.elements,nh)))}}(t);case 237:return function(t){if(!oh(t,e.Diagnostics.An_import_declaration_can_only_be_used_in_a_namespace_or_module)&&(ef(t)||tf(t),e.isInternalModuleImportEqualsDeclaration(t)||eh(t)))if(nh(t),e.hasModifier(t,1)&&Mn(t),e.isInternalModuleImportEqualsDeclaration(t)){var n=Ln(eo(t));if(n!==j){if(107455&n.flags){var o=Qg(t.moduleReference);1920&Vn(o,108479).flags||ln(o,e.Diagnostics.Module_0_is_hidden_by_a_local_declaration_with_the_same_name,e.declarationNameToString(o))}793064&n.flags&&Hg(t.name,e.Diagnostics.Import_name_cannot_be_0)}}else C>=e.ModuleKind.ES2015&&!e.isInAmbientContext(t)&&xf(t,e.Diagnostics.Import_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_import_Asterisk_as_ns_from_mod_import_a_from_mod_import_d_from_mod_or_another_module_format_instead)}(t);case 244:return function(t){if(!oh(t,e.Diagnostics.An_export_declaration_can_only_be_used_in_a_module)&&(ef(t)||tf(t)||!e.hasModifiers(t)||Sf(t,e.Diagnostics.An_export_declaration_cannot_have_modifiers),!t.moduleSpecifier||eh(t)))if(t.exportClause){e.forEach(t.exportClause.elements,rh);var n=234===t.parent.kind&&e.isAmbientModule(t.parent.parent),o=!n&&234===t.parent.kind&&!t.moduleSpecifier&&e.isInAmbientContext(t);265===t.parent.kind||n||o||ln(t,e.Diagnostics.Export_declarations_are_not_permitted_in_a_namespace)}else{var r=Gn(t,t.moduleSpecifier);r&&$n(r)&&ln(t.moduleSpecifier,e.Diagnostics.Module_0_uses_export_and_cannot_be_used_with_export_Asterisk,Co(r)),C!==e.ModuleKind.System&&C!==e.ModuleKind.ES2015&&C!==e.ModuleKind.ESNext&&Zh(t,32768)}}(t);case 243:return function(t){if(!oh(t,e.Diagnostics.An_export_assignment_can_only_be_used_in_a_module)){var n=265===t.parent.kind?t.parent:t.parent.parent;233!==n.kind||e.isAmbientModule(n)?(ef(t)||tf(t)||!e.hasModifiers(t)||Sf(t,e.Diagnostics.An_export_assignment_cannot_have_modifiers),71===t.expression.kind?Mn(t):yd(t.expression),ih(n),e.isInAmbientContext(t)&&!e.isEntityNameExpression(t.expression)&&xf(t.expression,e.Diagnostics.The_expression_of_an_export_assignment_must_be_an_identifier_or_qualified_name_in_an_ambient_context),t.isExportEquals&&!e.isInAmbientContext(t)&&(C>=e.ModuleKind.ES2015?xf(t,e.Diagnostics.Export_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_export_default_or_another_module_format_instead):C===e.ModuleKind.System&&xf(t,e.Diagnostics.Export_assignment_is_not_supported_when_module_flag_is_system))):t.isExportEquals?ln(t,e.Diagnostics.An_export_assignment_cannot_be_used_in_a_namespace):ln(t,e.Diagnostics.A_default_export_can_only_be_used_in_an_ECMAScript_style_module)}}(t);case 209:case 225:return void Af(t);case 247:return function(e){ng(e)}(t)}}}function lh(e){Je&&Je.push(e)}function ch(t){e.performance.mark("beforeCheck"),function(t){var n=mn(t);if(!(1&n.flags)){if(E.skipLibCheck&&t.isDeclarationFile||E.skipDefaultLibCheck&&t.hasNoDefaultLib)return;!function(t){e.isInAmbientContext(t)&&function(t){for(var n=0,o=t.statements;n<o.length;n++){var r=o[n];if((e.isDeclaration(r)||208===r.kind)&&Bf(r))return!0}}(t)}(t),e.clear(xt),e.clear(Bt),Je=[],qe=o&&x?[]:void 0,ut=!1,e.forEach(t.statements,ah),function(){for(var e=0,t=Je;e<t.length;e++){var n=t[e];switch(n.kind){case 186:case 187:case 151:case 150:Zp(n);break;case 153:case 154:Md(n);break;case 199:Wg(n)}}}(),e.isExternalModule(t)&&ig(t),t.isDeclarationFile||function(){if(qe)for(var e=0,t=qe;e<t.length;e++){var n=t[e];switch(n.kind){case 265:case 233:pg(n);break;case 229:case 199:cg(n),ug(n);break;case 230:ug(n);break;case 207:case 235:case 214:case 215:case 216:sg(n);break;case 152:case 186:case 228:case 187:case 151:case 153:case 154:n.body&&sg(n),ug(n);break;case 150:case 155:case 156:case 157:case 160:case 161:case 231:ug(n)}}}(),Je=void 0,qe=void 0,e.isExternalOrCommonJsModule(t)&&ih(t),xt.length&&(e.forEach(xt,_g),e.clear(xt)),Bt.length&&(e.forEach(Bt,mg),e.clear(Bt)),n.flags|=1}}(t),e.performance.mark("afterCheck"),e.performance.measure("Check","beforeCheck","afterCheck")}function uh(t,o){try{return p=o,function(t){if(ph(),t){var o=It.getGlobalDiagnostics(),r=o.length;ch(t);var i=It.getDiagnostics(t.fileName),s=It.getGlobalDiagnostics();if(s!==o){var a=e.relativeComplement(o,s,e.compareDiagnostics);return e.concatenate(a,i)}return 0===r&&s.length>0?e.concatenate(s,i):i}return e.forEach(n.getSourceFiles(),ch),It.getDiagnostics()}(t)}finally{p=void 0}}function ph(){if(!o)throw new Error("Trying to get diagnostics from a type checker that does not produce them.")}function dh(e){if(e)for(;e.parent;){if(220===e.parent.kind&&e.parent.statement===e)return!0;e=e.parent}return!1}function gh(e){switch(e.kind){case 145:case 229:case 230:case 231:case 232:return!0}}function hh(e){for(var t=e;t.parent&&143===t.parent.kind;)t=t.parent;return t.parent&&159===t.parent.kind}function fh(t,n){for(var o;(t=e.getContainingClass(t))&&!(o=n(t)););return o}function _h(e,t){return!!fh(e,(function(e){return e===t}))}function mh(e){return void 0!==function(e){for(;143===e.parent.kind;)e=e.parent;return 237===e.parent.kind?e.parent.moduleReference===e&&e.parent:243===e.parent.kind?e.parent.expression===e&&e.parent:void 0}(e)}function yh(t){if(e.isDeclarationName(t))return eo(t.parent);if(e.isInJavaScriptFile(t)&&179===t.parent.kind&&t.parent===t.parent.parent.left){var n=function(t){switch(e.getSpecialPropertyAssignmentKind(t.parent.parent)){case 1:case 3:return eo(t.parent);case 4:case 2:case 5:return eo(t.parent.parent)}}(t);if(n)return n}if(243===t.parent.kind&&e.isEntityNameExpression(t))return Vn(t,2998271);if(179!==t.kind&&mh(t)){var o=e.getAncestor(t,237);return e.Debug.assert(void 0!==o),Un(t,!0)}if(e.isRightSideOfQualifiedNameOrPropertyAccess(t)&&(t=t.parent),function(e){for(var t=e;t.parent&&179===t.parent.kind;)t=t.parent;return t.parent&&201===t.parent.kind}(t)){var r=0;201===t.parent.kind?(r=793064,e.isExpressionWithTypeArgumentsInClassExtendsClause(t.parent)&&(r|=107455)):r=1920;var i=Vn(t,r|=2097152);if(i)return i}if(279===t.parent.kind)return e.getParameterSymbolFromJSDoc(t.parent);if(145===t.parent.kind&&282===t.parent.parent.kind){e.Debug.assert(!e.isInJavaScriptFile(t));var s=e.getTypeParameterFromJsDoc(t.parent);return s&&s.symbol}if(e.isPartOfExpression(t)){if(e.nodeIsMissing(t))return;if(71===t.kind)return e.isJSXTagName(t)&&Cu(t)?Au(t.parent):Vn(t,107455,!1,!0);if(179===t.kind||143===t.kind){var a=mn(t);return a.resolvedSymbol||(179===t.kind?zu(t):$u(t)),a.resolvedSymbol}}else{if(hh(t))return Vn(t,r=159===t.parent.kind?793064:1920,!1,!0);if(253===t.parent.kind)return bi(Lu((l=t.parent).parent.parent),l.name.escapedText)||j}var l;return 158===t.parent.kind?Vn(t,1):void 0}function kh(t){if(265===t.kind)return e.isExternalModule(t)?Qn(t.symbol):void 0;if(!dh(t)){if(c(t))return eo(t.parent);if(e.isLiteralComputedPropertyDeclarationName(t))return eo(t.parent.parent);if(71===t.kind){if(mh(t))return yh(t);if(176===t.parent.kind&&174===t.parent.parent.kind&&t===t.parent.propertyName){var n=bh(t.parent.parent),o=n&&bi(n,t.escapedText);if(o)return o}}switch(t.kind){case 71:case 179:case 143:return yh(t);case 99:var r=e.getThisContainer(t,!1);if(e.isFunctionLike(r)){var i=Oi(r);if(i.thisParameter)return i.thisParameter}if(e.isInExpressionContext(t))return Bd(t).symbol;case 169:return pa(t).symbol;case 97:return Bd(t).symbol;case 123:var s=t.parent;return s&&152===s.kind?s.parent.symbol:void 0;case 9:if(e.isExternalModuleImportEqualsDeclaration(t.parent.parent)&&e.getExternalModuleImportEqualsDeclarationExpression(t.parent.parent)===t||(238===t.parent.kind||244===t.parent.kind)&&t.parent.moduleSpecifier===t||e.isInJavaScriptFile(t)&&e.isRequireCall(t.parent,!1)||e.isImportCall(t.parent))return Gn(t,t);case 8:var a=e.isElementAccessExpression(t.parent)?t.parent.argumentExpression===t?xd(t.parent.expression):void 0:e.isLiteralTypeNode(t.parent)&&e.isIndexedAccessTypeNode(t.parent.parent)?da(t.parent.parent.objectType):void 0;return a&&bi(a,e.escapeLeadingUnderscores(t.text));case 79:return eo(t.parent);default:return}}}function bh(t){if(dh(t))return Y;if(e.isPartOfTypeNode(t)){var n=da(t);if(n&&e.isExpressionWithTypeArgumentsInClassImplementsClause(t))n=Vr(n,(o=bh(e.getContainingClass(t))).thisType);return n}if(e.isPartOfExpression(t))return Th(t);if(e.isExpressionWithTypeArgumentsInClassExtendsClause(t)){var o,r=Sr(o=Rr(eo(e.getContainingClass(t))))[0];return r&&Vr(r,o.thisType)}if(gh(t))return Rr(i=eo(t));if(function(e){return 71===e.kind&&gh(e.parent)&&e.parent.name===e}(t))return(i=kh(t))&&Rr(i);if(e.isDeclaration(t))return cr(i=eo(t));if(c(t))return(i=kh(t))&&cr(i);if(e.isBindingPattern(t))return Zo(t.parent,!0);if(mh(t)){var i,s=(i=kh(t))&&Rr(i);return s!==Y?s:cr(i)}return Y}function vh(t){if(e.Debug.assert(178===t.kind||177===t.kind),216===t.parent.kind)return ud(t,Ig(t.parent.expression,t.parent.awaitModifier)||Y);if(194===t.parent.kind)return ud(t,xd(t.parent.right)||Y);if(261===t.parent.kind)return ld(vh(t.parent.parent)||Y,t.parent);e.Debug.assert(177===t.parent.kind);var n=vh(t.parent),o=Dg(n||Y,t.parent,!1,!1)||Y;return cd(t.parent,n,e.indexOf(t.parent.elements,t),o||Y)}function Th(t){return e.isRightSideOfQualifiedNameOrPropertyAccess(t)&&(t=t.parent),ca(xd(t))}function Eh(t){if(!e.isGeneratedIdentifier(t)&&(t=e.getParseTreeNode(t,e.isIdentifier)))return!(179===t.parent.kind&&t.parent.name===t)&&$h(t)===M;return!1}function Sh(t){var n=Gn(t.parent,t);if(!n||e.isShorthandAmbientModuleSymbol(n))return!0;var o=$n(n),r=_n(n=jn(n));return void 0===r.exportsSomeValue&&(r.exportsSomeValue=o?!!(107455&n.flags):e.forEachEntry(qn(n),(function(e){return(e=Pn(e))&&!!(107455&e.flags)}))),r.exportsSomeValue}function Ch(t,n){if(t=e.getParseTreeNode(t,e.isIdentifier)){var o=$h(t,function(t){var n=t.parent;return n&&e.isModuleOrEnumDeclaration(n)&&t===n.name}(t));if(o){if(1048576&o.flags){var r=Qn(o.exportSymbol);if(!n&&944&r.flags)return;o=r}var i=to(o);if(i){if(512&i.flags&&265===i.valueDeclaration.kind){var s=i.valueDeclaration;return s!==e.getSourceFileOfNode(t)?void 0:s}return e.findAncestor(t.parent,(function(t){return e.isModuleOrEnumDeclaration(t)&&eo(t)===i}))}}}}function xh(t){if(t=e.getParseTreeNode(t,e.isIdentifier)){var n=$h(t);if(On(n,107455))return Dn(n)}}function Bh(t){if(418&t.flags){var n=_n(t);if(void 0===n.isDeclarationWithCollidingName){var o=e.getEnclosingBlockScopeContainer(t.valueDeclaration);if(e.isStatementWithLocals(o)){var r=mn(t.valueDeclaration);if(Tn(o.parent,t.escapedName,107455,void 0,void 0,!1))n.isDeclarationWithCollidingName=!0;else if(131072&r.flags){var i=262144&r.flags,s=e.isIterationStatement(o,!1),a=207===o.kind&&e.isIterationStatement(o.parent,!1);n.isDeclarationWithCollidingName=!(e.isBlockScopedContainerTopLevel(o)||i&&(s||a))}else n.isDeclarationWithCollidingName=!1}}return n.isDeclarationWithCollidingName}return!1}function Ah(t){if(!e.isGeneratedIdentifier(t)&&(t=e.getParseTreeNode(t,e.isIdentifier))){var n=$h(t);if(n&&Bh(n))return n.valueDeclaration}}function Ih(t){if(t=e.getParseTreeNode(t,e.isDeclaration)){var n=eo(t);if(n)return Bh(n)}return!1}function Dh(t){switch(t.kind){case 237:case 239:case 240:case 242:case 246:return wh(eo(t)||j);case 244:var n=t.exportClause;return n&&e.forEach(n.elements,Dh);case 243:return!t.expression||71!==t.expression.kind||wh(eo(t)||j)}return!1}function Nh(t){return!(void 0===(t=e.getParseTreeNode(t,e.isImportEqualsDeclaration))||265!==t.parent.kind||!e.isInternalModuleImportEqualsDeclaration(t))&&(wh(eo(t))&&t.moduleReference&&!e.nodeIsMissing(t.moduleReference))}function wh(e){var t=Ln(e);return t===j||107455&t.flags&&(E.preserveConstEnums||!Rh(t))}function Rh(e){return ad(e)||e.constEnumOnlyModule}function Oh(t,n){if(e.isAliasSymbolDeclaration(t)){var o=eo(t);if(o&&_n(o).referenced)return!0}return!!n&&e.forEachChild(t,(function(e){return Oh(e,n)}))}function Ph(t){if(e.nodeIsPresent(t.body)){var n=Pi(eo(t));return n.length>1||1===n.length&&n[0].declaration!==t}return!1}function Lh(t){return A&&!Ni(t)&&t.initializer&&!e.hasModifier(t,92)}function Mh(t){return A&&Ni(t)&&!t.initializer&&e.hasModifier(t,92)}function Fh(e){return mn(e).flags}function Uh(e){return Xg(e.parent),mn(e).enumMemberValue}function Hh(e){switch(e.kind){case 264:case 179:case 180:return!0}return!1}function Vh(t){if(264===t.kind)return Uh(t);var n=mn(t).resolvedSymbol;return n&&8&n.flags&&e.isConstEnumDeclaration(n.valueDeclaration.parent)?Uh(n.valueDeclaration):void 0}function Gh(t,n){if(!(t=e.getParseTreeNode(t,e.isEntityName)))return e.TypeReferenceSerializationKind.Unknown;if(n&&!(n=e.getParseTreeNode(n)))return e.TypeReferenceSerializationKind.Unknown;var o=Vn(t,107455,!0,!1,n),r=Vn(t,793064,!0,!1,n);if(o&&o===r){var i=_s(!1);if(i&&o===i)return e.TypeReferenceSerializationKind.Promise;var s=cr(o);if(s&&kr(s))return e.TypeReferenceSerializationKind.TypeWithConstructSignatureAndValue}if(!r)return e.TypeReferenceSerializationKind.ObjectType;var a=Rr(r);return a===Y?e.TypeReferenceSerializationKind.Unknown:1&a.flags?e.TypeReferenceSerializationKind.ObjectType:id(a,15360)?e.TypeReferenceSerializationKind.VoidNullableOrNeverType:id(a,136)?e.TypeReferenceSerializationKind.BooleanType:id(a,84)?e.TypeReferenceSerializationKind.NumberLikeType:id(a,262178)?e.TypeReferenceSerializationKind.StringLikeType:hl(a)?e.TypeReferenceSerializationKind.ArrayLikeType:id(a,512)?e.TypeReferenceSerializationKind.ESSymbolType:function(e){return 32768&e.flags&&Ti(e,0).length>0}(a)?e.TypeReferenceSerializationKind.TypeWithCallSignature:al(a)?e.TypeReferenceSerializationKind.ArrayLikeType:e.TypeReferenceSerializationKind.ObjectType}function Wh(e,t,n,o){var r=eo(e),i=!r||133120&r.flags?Y:gl(cr(r));8192&n&&(i=bl(i,2048)),Po().buildTypeDisplay(i,o,t,n)}function Kh(e,t,n,o){var r=Oi(e);Po().buildTypeDisplay(Mi(r),o,t,n)}function jh(e,t,n,o){var r=Bl(Th(e));Po().buildTypeDisplay(r,o,t,n)}function zh(t){return st.has(e.escapeLeadingUnderscores(t))}function $h(t,n){var o=mn(t).resolvedSymbol;if(o)return o;var r=t;if(n){var i=t.parent;e.isDeclaration(i)&&t===i.name&&(r=Go(i))}return Tn(r,t.escapedText,3253183,void 0,void 0,!0)}function Xh(t){if(!e.isGeneratedIdentifier(t)&&(t=e.getParseTreeNode(t,e.isIdentifier))){var n=$h(t);if(n)return no(n).valueDeclaration}}function Yh(t){if(e.isConst(t)){var n=cr(eo(t));return!!(96&n.flags&&1048576&n.flags)}return!1}function Jh(e,t){var n=cr(eo(e));t.writeStringLiteral(Ro(n))}function qh(t){var n=e.getExternalModuleName(t),o=Wn(n,n,void 0);if(o)return e.getDeclarationOfKind(o,265)}function Zh(t,n){if((d&n)!==n&&E.importHelpers){var o=e.getSourceFileOfNode(t);if(e.isEffectiveExternalModule(o,E)&&!e.isInAmbientContext(t)){var r=function(t,n){g||(g=Kn(t,e.externalHelpersModuleNameText,e.Diagnostics.This_syntax_requires_an_imported_helper_but_module_0_cannot_be_found,n)||j);return g}(o,t);if(r!==j)for(var i=n&~d,s=1;s<=65536;s<<=1)if(i&s){var a=Qh(s);bn(r.exports,e.escapeLeadingUnderscores(a),107455)||ln(t,e.Diagnostics.This_syntax_requires_an_imported_helper_named_1_but_module_0_has_no_exported_member_1,e.externalHelpersModuleNameText,a)}d|=n}}}function Qh(t){switch(t){case 1:return"__extends";case 2:return"__assign";case 4:return"__rest";case 8:return"__decorate";case 16:return"__metadata";case 32:return"__param";case 64:return"__awaiter";case 128:return"__generator";case 256:return"__values";case 512:return"__read";case 1024:return"__spread";case 2048:return"__await";case 4096:return"__asyncGenerator";case 8192:return"__asyncDelegator";case 16384:return"__asyncValues";case 32768:return"__exportStar";case 65536:return"__makeTemplateObject";default:e.Debug.fail("Unrecognized helper")}}function ef(t){if(!t.decorators)return!1;if(!e.nodeCanBeDecorated(t))return 151!==t.kind||e.nodeIsPresent(t.body)?Sf(t,e.Diagnostics.Decorators_are_not_valid_here):Sf(t,e.Diagnostics.A_decorator_can_only_decorate_a_method_implementation_not_an_overload);if(153===t.kind||154===t.kind){var n=e.getAllAccessorDeclarations(t.parent.members,t);if(n.firstAccessor.decorators&&t===n.secondAccessor)return Sf(t,e.Diagnostics.Decorators_cannot_be_applied_to_multiple_get_Slashset_accessors_of_the_same_name)}return!1}function tf(t){var n,o,r,i,s=function(t){return!!t.modifiers&&(function(t){switch(t.kind){case 153:case 154:case 152:case 149:case 148:case 151:case 150:case 157:case 233:case 238:case 237:case 244:case 243:case 186:case 187:case 146:return!1;default:if(234===t.parent.kind||265===t.parent.kind)return!1;switch(t.kind){case 228:return nf(t,120);case 229:return nf(t,117);case 230:case 208:case 231:return!0;case 232:return nf(t,76);default:return e.Debug.fail(),!1}}}(t)?Sf(t,e.Diagnostics.Modifiers_cannot_appear_here):void 0)}(t);if(void 0!==s)return s;for(var a=0,l=0,c=t.modifiers;l<c.length;l++){var u=c[l];if(131!==u.kind){if(148===t.kind||150===t.kind)return xf(u,e.Diagnostics._0_modifier_cannot_appear_on_a_type_member,e.tokenToString(u.kind));if(157===t.kind)return xf(u,e.Diagnostics._0_modifier_cannot_appear_on_an_index_signature,e.tokenToString(u.kind))}switch(u.kind){case 76:if(232!==t.kind&&229===t.parent.kind)return xf(t,e.Diagnostics.A_class_member_cannot_have_the_0_keyword,e.tokenToString(76));break;case 114:case 113:case 112:var p=Do(e.modifierToFlag(u.kind));if(28&a)return xf(u,e.Diagnostics.Accessibility_modifier_already_seen);if(32&a)return xf(u,e.Diagnostics._0_modifier_must_precede_1_modifier,p,"static");if(64&a)return xf(u,e.Diagnostics._0_modifier_must_precede_1_modifier,p,"readonly");if(256&a)return xf(u,e.Diagnostics._0_modifier_must_precede_1_modifier,p,"async");if(234===t.parent.kind||265===t.parent.kind)return xf(u,e.Diagnostics._0_modifier_cannot_appear_on_a_module_or_namespace_element,p);if(128&a)return 112===u.kind?xf(u,e.Diagnostics._0_modifier_cannot_be_used_with_1_modifier,p,"abstract"):xf(u,e.Diagnostics._0_modifier_must_precede_1_modifier,p,"abstract");a|=e.modifierToFlag(u.kind);break;case 115:if(32&a)return xf(u,e.Diagnostics._0_modifier_already_seen,"static");if(64&a)return xf(u,e.Diagnostics._0_modifier_must_precede_1_modifier,"static","readonly");if(256&a)return xf(u,e.Diagnostics._0_modifier_must_precede_1_modifier,"static","async");if(234===t.parent.kind||265===t.parent.kind)return xf(u,e.Diagnostics._0_modifier_cannot_appear_on_a_module_or_namespace_element,"static");if(146===t.kind)return xf(u,e.Diagnostics._0_modifier_cannot_appear_on_a_parameter,"static");if(128&a)return xf(u,e.Diagnostics._0_modifier_cannot_be_used_with_1_modifier,"static","abstract");a|=32,n=u;break;case 131:if(64&a)return xf(u,e.Diagnostics._0_modifier_already_seen,"readonly");if(149!==t.kind&&148!==t.kind&&157!==t.kind&&146!==t.kind)return xf(u,e.Diagnostics.readonly_modifier_can_only_appear_on_a_property_declaration_or_index_signature);a|=64,i=u;break;case 84:if(1&a)return xf(u,e.Diagnostics._0_modifier_already_seen,"export");if(2&a)return xf(u,e.Diagnostics._0_modifier_must_precede_1_modifier,"export","declare");if(128&a)return xf(u,e.Diagnostics._0_modifier_must_precede_1_modifier,"export","abstract");if(256&a)return xf(u,e.Diagnostics._0_modifier_must_precede_1_modifier,"export","async");if(229===t.parent.kind)return xf(u,e.Diagnostics._0_modifier_cannot_appear_on_a_class_element,"export");if(146===t.kind)return xf(u,e.Diagnostics._0_modifier_cannot_appear_on_a_parameter,"export");a|=1;break;case 79:var d=265===t.parent.kind?t.parent:t.parent.parent;if(233===d.kind&&!e.isAmbientModule(d))return xf(u,e.Diagnostics.A_default_export_can_only_be_used_in_an_ECMAScript_style_module);a|=512;break;case 124:if(2&a)return xf(u,e.Diagnostics._0_modifier_already_seen,"declare");if(256&a)return xf(u,e.Diagnostics._0_modifier_cannot_be_used_in_an_ambient_context,"async");if(229===t.parent.kind)return xf(u,e.Diagnostics._0_modifier_cannot_appear_on_a_class_element,"declare");if(146===t.kind)return xf(u,e.Diagnostics._0_modifier_cannot_appear_on_a_parameter,"declare");if(e.isInAmbientContext(t.parent)&&234===t.parent.kind)return xf(u,e.Diagnostics.A_declare_modifier_cannot_be_used_in_an_already_ambient_context);a|=2,o=u;break;case 117:if(128&a)return xf(u,e.Diagnostics._0_modifier_already_seen,"abstract");if(229!==t.kind){if(151!==t.kind&&149!==t.kind&&153!==t.kind&&154!==t.kind)return xf(u,e.Diagnostics.abstract_modifier_can_only_appear_on_a_class_method_or_property_declaration);if(229!==t.parent.kind||!e.hasModifier(t.parent,128))return xf(u,e.Diagnostics.Abstract_methods_can_only_appear_within_an_abstract_class);if(32&a)return xf(u,e.Diagnostics._0_modifier_cannot_be_used_with_1_modifier,"static","abstract");if(8&a)return xf(u,e.Diagnostics._0_modifier_cannot_be_used_with_1_modifier,"private","abstract")}a|=128;break;case 120:if(256&a)return xf(u,e.Diagnostics._0_modifier_already_seen,"async");if(2&a||e.isInAmbientContext(t.parent))return xf(u,e.Diagnostics._0_modifier_cannot_be_used_in_an_ambient_context,"async");if(146===t.kind)return xf(u,e.Diagnostics._0_modifier_cannot_appear_on_a_parameter,"async");a|=256,r=u}}return 152===t.kind?32&a?xf(n,e.Diagnostics._0_modifier_cannot_appear_on_a_constructor_declaration,"static"):128&a?xf(n,e.Diagnostics._0_modifier_cannot_appear_on_a_constructor_declaration,"abstract"):256&a?xf(r,e.Diagnostics._0_modifier_cannot_appear_on_a_constructor_declaration,"async"):64&a?xf(i,e.Diagnostics._0_modifier_cannot_appear_on_a_constructor_declaration,"readonly"):void 0:(238===t.kind||237===t.kind)&&2&a?xf(o,e.Diagnostics.A_0_modifier_cannot_be_used_with_an_import_declaration,"declare"):146===t.kind&&92&a&&e.isBindingPattern(t.name)?xf(t,e.Diagnostics.A_parameter_property_may_not_be_declared_using_a_binding_pattern):146===t.kind&&92&a&&t.dotDotDotToken?xf(t,e.Diagnostics.A_parameter_property_cannot_be_declared_using_a_rest_parameter):256&a?function(t,n){switch(t.kind){case 151:case 228:case 186:case 187:return!1}return xf(n,e.Diagnostics._0_modifier_cannot_be_used_here,"async")}(t,r):void 0}function nf(e,t){return e.modifiers.length>1||e.modifiers[0].kind!==t}function of(t){if(t&&t.hasTrailingComma){var n=t.end-",".length,o=t.end;return Cf(t[0],n,o-n,e.Diagnostics.Trailing_comma_not_allowed)}}function rf(t,n){if(of(t))return!0;if(t&&0===t.length){var o=t.pos-"<".length;return Cf(n,o,e.skipTrivia(n.text,t.end)+">".length-o,e.Diagnostics.Type_parameter_list_cannot_be_empty)}}function sf(t){var n=e.getSourceFileOfNode(t);return ef(t)||tf(t)||rf(t.typeParameters,n)||function(t){for(var n=!1,o=t.length,r=0;r<o;r++){var i=t[r];if(i.dotDotDotToken){if(r!==o-1)return xf(i.dotDotDotToken,e.Diagnostics.A_rest_parameter_must_be_last_in_a_parameter_list);if(e.isBindingPattern(i.name))return xf(i.name,e.Diagnostics.A_rest_element_cannot_contain_a_binding_pattern);if(i.questionToken)return xf(i.questionToken,e.Diagnostics.A_rest_parameter_cannot_be_optional);if(i.initializer)return xf(i.name,e.Diagnostics.A_rest_parameter_cannot_have_an_initializer)}else if(i.questionToken){if(n=!0,i.initializer)return xf(i.name,e.Diagnostics.Parameter_cannot_have_question_mark_and_initializer)}else if(n&&!i.initializer)return xf(i.name,e.Diagnostics.A_required_parameter_cannot_follow_an_optional_parameter)}}(t.parameters)||function(t,n){if(187===t.kind){var o=t;if(e.getLineAndCharacterOfPosition(n,o.equalsGreaterThanToken.pos).line!==e.getLineAndCharacterOfPosition(n,o.equalsGreaterThanToken.end).line)return xf(o.equalsGreaterThanToken,e.Diagnostics.Line_terminator_not_permitted_before_arrow)}return!1}(t,n)}function af(t,n){return of(n)||function(t,n){if(n&&0===n.length){var o=e.getSourceFileOfNode(t),r=n.pos-"<".length;return Cf(o,r,e.skipTrivia(o.text,n.end)+">".length-r,e.Diagnostics.Type_argument_list_cannot_be_empty)}}(t,n)}function lf(t){return function(t){if(t)for(var n=0,o=t;n<o.length;n++){var r=o[n];if(200===r.kind)return Cf(r,r.pos,0,e.Diagnostics.Argument_expression_expected)}}(t)}function cf(t){var n=t.types;if(of(n))return!0;if(n&&0===n.length){var o=e.tokenToString(t.token);return Cf(t,n.pos,0,e.Diagnostics._0_list_cannot_be_empty,o)}return e.forEach(n,uf)}function uf(e){return af(e,e.typeArguments)}function pf(t){if(144!==t.kind)return!1;var n=t;return 194===n.expression.kind&&26===n.expression.operatorToken.kind?xf(n.expression,e.Diagnostics.A_comma_expression_is_not_allowed_in_a_computed_property_name):void 0}function df(t){if(t.asteriskToken){if(e.Debug.assert(228===t.kind||186===t.kind||151===t.kind),e.isInAmbientContext(t))return xf(t.asteriskToken,e.Diagnostics.Generators_are_not_allowed_in_an_ambient_context);if(!t.body)return xf(t.asteriskToken,e.Diagnostics.An_overload_signature_cannot_be_declared_as_a_generator)}}function gf(e,t){if(e)return xf(e,t)}function hf(t){if(Af(t))return!0;if(216===t.kind&&t.awaitModifier&&0==(16384&t.flags))return xf(t.awaitModifier,e.Diagnostics.A_for_await_of_statement_is_only_allowed_within_an_async_function_or_async_generator);if(227===t.initializer.kind){var n=t.initializer;if(!vf(n)){var o=n.declarations;if(!o.length)return!1;if(o.length>1){var r=215===t.kind?e.Diagnostics.Only_a_single_variable_declaration_is_allowed_in_a_for_in_statement:e.Diagnostics.Only_a_single_variable_declaration_is_allowed_in_a_for_of_statement;return Sf(n.declarations[1],r)}var i=o[0];if(i.initializer){var r=215===t.kind?e.Diagnostics.The_variable_declaration_of_a_for_in_statement_cannot_have_an_initializer:e.Diagnostics.The_variable_declaration_of_a_for_of_statement_cannot_have_an_initializer;return xf(i.name,r)}if(i.type)return xf(i,r=215===t.kind?e.Diagnostics.The_left_hand_side_of_a_for_in_statement_cannot_use_a_type_annotation:e.Diagnostics.The_left_hand_side_of_a_for_of_statement_cannot_use_a_type_annotation)}}return!1}function ff(t){if(t.parameters.length===(153===t.kind?1:2))return e.getThisParameter(t)}function _f(t,n){if(e.isDynamicName(t))return xf(t,n)}function mf(t){if(function(t){if(t.modifiers&&178===t.parent.kind){if(!(2&e.getFunctionFlags(t)))return Sf(t,e.Diagnostics.Modifiers_cannot_appear_here);if(t.modifiers.length>1)return Sf(t,e.Diagnostics.Modifiers_cannot_appear_here)}}(t)||sf(t)||df(t))return!0;if(178===t.parent.kind){if(gf(t.questionToken,e.Diagnostics.An_object_member_cannot_be_declared_optional))return!0;if(void 0===t.body)return Cf(t,t.end-1,";".length,e.Diagnostics._0_expected,"{")}if(e.isClassLike(t.parent)){if(e.isInAmbientContext(t))return _f(t.name,e.Diagnostics.A_computed_property_name_in_an_ambient_context_must_directly_refer_to_a_built_in_symbol);if(!t.body)return _f(t.name,e.Diagnostics.A_computed_property_name_in_a_method_overload_must_directly_refer_to_a_built_in_symbol)}else{if(230===t.parent.kind)return _f(t.name,e.Diagnostics.A_computed_property_name_in_an_interface_must_directly_refer_to_a_built_in_symbol);if(163===t.parent.kind)return _f(t.name,e.Diagnostics.A_computed_property_name_in_a_type_literal_must_directly_refer_to_a_built_in_symbol)}}function yf(e){return 9===e.kind||8===e.kind||192===e.kind&&38===e.operator&&8===e.operand.kind}function kf(t){if(71===t.kind){if("__esModule"===e.idText(t))return xf(t,e.Diagnostics.Identifier_expected_esModule_is_reserved_as_an_exported_marker_when_transforming_ECMAScript_modules)}else for(var n=0,o=t.elements;n<o.length;n++){var r=o[n];if(!e.isOmittedExpression(r))return kf(r.name)}}function bf(t){if(71===t.kind){if(110===t.originalKeywordKind)return xf(t,e.Diagnostics.let_is_not_allowed_to_be_used_as_a_name_in_let_or_const_declarations)}else for(var n=0,o=t.elements;n<o.length;n++){var r=o[n];e.isOmittedExpression(r)||bf(r.name)}}function vf(t){var n=t.declarations;return!!of(t.declarations)||(t.declarations.length?void 0:Cf(t,n.pos,n.end-n.pos,e.Diagnostics.Variable_declaration_list_cannot_be_empty))}function Tf(e){switch(e.kind){case 211:case 212:case 213:case 220:case 214:case 215:case 216:return!1;case 222:return Tf(e.parent)}return!0}function Ef(e){return e.parseDiagnostics.length>0}function Sf(t,n,o,r,i){var s=e.getSourceFileOfNode(t);if(!Ef(s)){var a=e.getSpanOfTokenAtPosition(s,t.pos);return It.add(e.createFileDiagnostic(s,a.start,a.length,n,o,r,i)),!0}}function Cf(t,n,o,r,i,s,a){var l=e.getSourceFileOfNode(t);if(!Ef(l))return It.add(e.createFileDiagnostic(l,n,o,r,i,s,a)),!0}function xf(t,n,o,r,i){if(!Ef(e.getSourceFileOfNode(t)))return It.add(e.createDiagnosticForNode(t,n,o,r,i)),!0}function Bf(t){return 230!==t.kind&&231!==t.kind&&238!==t.kind&&237!==t.kind&&244!==t.kind&&243!==t.kind&&236!==t.kind&&!e.hasModifier(t,515)&&Sf(t,e.Diagnostics.A_declare_modifier_is_required_for_a_top_level_declaration_in_a_d_ts_file)}function Af(t){if(e.isInAmbientContext(t)){if(e.isAccessor(t.parent))return mn(t).hasReportedStatementInAmbientContext=!0;if(!mn(t).hasReportedStatementInAmbientContext&&e.isFunctionLike(t.parent))return mn(t).hasReportedStatementInAmbientContext=Sf(t,e.Diagnostics.An_implementation_cannot_be_declared_in_ambient_contexts);if(207===t.parent.kind||234===t.parent.kind||265===t.parent.kind){var n=mn(t.parent);if(!n.hasReportedStatementInAmbientContext)return n.hasReportedStatementInAmbientContext=Sf(t,e.Diagnostics.Statements_are_not_allowed_in_ambient_contexts)}}}function If(t){if(4&t.numericLiteralFlags){var n=void 0;if(S>=1?n=e.Diagnostics.Octal_literals_are_not_available_when_targeting_ECMAScript_5_and_higher_Use_the_syntax_0:e.isChildOfNodeWithKind(t,173)?n=e.Diagnostics.Octal_literal_types_must_use_ES2015_syntax_Use_the_syntax_0:e.isChildOfNodeWithKind(t,264)&&(n=e.Diagnostics.Octal_literals_are_not_allowed_in_enums_members_initializer_Use_the_syntax_0),n){var o=e.isPrefixUnaryExpression(t.parent)&&38===t.parent.operator,r=(o?"-":"")+"0o"+t.text;return xf(o?t.parent:t,n,r)}}}}}(ts||(ts={})),function(e){function t(t){var n=e.createNode(t,-1,-1);return n.flags|=8,n}function n(t,n){return t!==n&&(Rt(t,n),Bt(t,n),n.startsOnNewLine&&(t.startsOnNewLine=!0),e.aggregateTransformFlags(t)),t}function o(t,n){if(t){if(e.isNodeArray(t))return t}else t=[];var o=t;return o.pos=-1,o.end=-1,o.hasTrailingComma=n,o}function r(e){if(void 0!==e){var n=t(e.kind);for(var o in n.flags|=e.flags,Rt(n,e),e)!n.hasOwnProperty(o)&&e.hasOwnProperty(o)&&(n[o]=e[o]);return n}}function i(t){return"number"==typeof t?s(t+""):"boolean"==typeof t?t?d():g():e.isString(t)?a(t):(n=t,(o=a(e.getTextOfIdentifierOrLiteral(n))).textSourceNode=n,o);var n,o}function s(e){var n=t(8);return n.text=e,n.numericLiteralFlags=0,n}function a(e){var n=t(9);return n.text=e,n}function l(n,r){var i=t(71);return i.escapedText=e.escapeLeadingUnderscores(n),i.originalKeywordKind=n?e.stringToToken(n):0,i.autoGenerateKind=0,i.autoGenerateId=0,r&&(i.typeArguments=o(r)),i}e.updateNode=n,e.createNodeArray=o,e.getSynthesizedClone=r,e.createLiteral=i,e.createNumericLiteral=s,e.createIdentifier=l,e.updateIdentifier=function(t,o){return t.typeArguments!==o?n(l(e.idText(t),o),t):t};var c,u=0;function p(e){return t(e)}function d(){return t(101)}function g(){return t(86)}function h(e,n){var o=t(143);return o.left=e,o.right=St(n),o}function f(e){var n=t(144);return n.expression=e,n}function _(e,n,o){var r=t(145);return r.name=St(e),r.constraint=n,r.default=o,r}function m(n,o,r,i,s,a,l){var c=t(146);return c.decorators=Ct(n),c.modifiers=Ct(o),c.dotDotDotToken=r,c.name=St(i),c.questionToken=s,c.type=a,c.initializer=l?e.parenthesizeExpressionForList(l):void 0,c}function y(n){var o=t(147);return o.expression=e.parenthesizeForAccess(n),o}function k(e,n,o,r,i){var s=t(148);return s.modifiers=Ct(e),s.name=St(n),s.questionToken=o,s.type=r,s.initializer=i,s}function b(e,n,o,r,i,s){var a=t(149);return a.decorators=Ct(e),a.modifiers=Ct(n),a.name=St(o),a.questionToken=r,a.type=i,a.initializer=s,a}function v(e,t,n,o,r){var i=B(150,e,t,n);return i.name=St(o),i.questionToken=r,i}function T(e,n,r,i,s,a,l,c,u){var p=t(151);return p.decorators=Ct(e),p.modifiers=Ct(n),p.asteriskToken=r,p.name=St(i),p.questionToken=s,p.typeParameters=Ct(a),p.parameters=o(l),p.type=c,p.body=u,p}function E(e,n,r,i){var s=t(152);return s.decorators=Ct(e),s.modifiers=Ct(n),s.typeParameters=void 0,s.parameters=o(r),s.type=void 0,s.body=i,s}function S(e,n,r,i,s,a){var l=t(153);return l.decorators=Ct(e),l.modifiers=Ct(n),l.name=St(r),l.typeParameters=void 0,l.parameters=o(i),l.type=s,l.body=a,l}function C(e,n,r,i,s){var a=t(154);return a.decorators=Ct(e),a.modifiers=Ct(n),a.name=St(r),a.typeParameters=void 0,a.parameters=o(i),a.body=s,a}function x(e,n,r,i){var s=t(157);return s.decorators=Ct(e),s.modifiers=Ct(n),s.parameters=o(r),s.type=i,s}function B(e,n,o,r){var i=t(e);return i.typeParameters=Ct(n),i.parameters=Ct(o),i.type=r,i}function A(e,t,o,r){return e.typeParameters!==t||e.parameters!==o||e.type!==r?n(B(e.kind,t,o,r),e):e}function I(e,n){var o=t(158);return o.parameterName=St(e),o.type=n,o}function D(n,o){var r=t(159);return r.typeName=St(n),r.typeArguments=o&&e.parenthesizeTypeParameters(o),r}function N(e){var n=t(162);return n.exprName=e,n}function w(e){var n=t(163);return n.members=o(e),n}function R(n){var o=t(164);return o.elementType=e.parenthesizeArrayTypeMember(n),o}function O(e){var n=t(165);return n.elementTypes=o(e),n}function P(n,o){var r=t(n);return r.types=e.parenthesizeElementTypeMembers(o),r}function L(e,t){return e.types!==t?n(P(e.kind,t),e):e}function M(e){var n=t(168);return n.type=e,n}function F(n){var o=t(170);return o.operator=127,o.type=e.parenthesizeElementTypeMember(n),o}function U(n,o){var r=t(171);return r.objectType=e.parenthesizeElementTypeMember(n),r.indexType=o,r}function H(e,n,o,r){var i=t(172);return i.readonlyToken=e,i.typeParameter=n,i.questionToken=o,i.type=r,i}function V(e){var n=t(173);return n.literal=e,n}function G(e){var n=t(174);return n.elements=o(e),n}function W(e){var n=t(175);return n.elements=o(e),n}function K(e,n,o,r){var i=t(176);return i.dotDotDotToken=e,i.propertyName=St(n),i.name=St(o),i.initializer=r,i}function j(n,r){var i=t(177);return i.elements=e.parenthesizeListElements(o(n)),r&&(i.multiLine=!0),i}function z(e,n){var r=t(178);return r.properties=o(e),n&&(r.multiLine=!0),r}function $(n,o){var r=t(179);return r.expression=e.parenthesizeForAccess(n),r.name=St(o),At(r,131072),r}function X(n,o){var r,s=t(180);return s.expression=e.parenthesizeForAccess(n),s.argumentExpression=(r=o,e.isString(r)||"number"==typeof r?i(r):r),s}function Y(n,r,i){var s=t(181);return s.expression=e.parenthesizeForAccess(n),s.typeArguments=Ct(r),s.arguments=e.parenthesizeListElements(o(i)),s}function J(n,r,i){var s=t(182);return s.expression=e.parenthesizeForNew(n),s.typeArguments=Ct(r),s.arguments=i?e.parenthesizeListElements(o(i)):void 0,s}function q(n,o){var r=t(183);return r.tag=e.parenthesizeForAccess(n),r.template=o,r}function Z(n,o){var r=t(184);return r.type=n,r.expression=e.parenthesizePrefixOperand(o),r}function Q(e){var n=t(185);return n.expression=e,n}function ee(e,n,r,i,s,a,l){var c=t(186);return c.modifiers=Ct(e),c.asteriskToken=n,c.name=St(r),c.typeParameters=Ct(i),c.parameters=o(s),c.type=a,c.body=l,c}function te(n,r,i,s,a,l){var c=t(187);return c.modifiers=Ct(n),c.typeParameters=Ct(r),c.parameters=o(i),c.type=s,c.equalsGreaterThanToken=a||p(36),c.body=e.parenthesizeConciseBody(l),c}function ne(n){var o=t(188);return o.expression=e.parenthesizePrefixOperand(n),o}function oe(n){var o=t(189);return o.expression=e.parenthesizePrefixOperand(n),o}function re(n){var o=t(190);return o.expression=e.parenthesizePrefixOperand(n),o}function ie(n){var o=t(191);return o.expression=e.parenthesizePrefixOperand(n),o}function se(n,o){var r=t(192);return r.operator=n,r.operand=e.parenthesizePrefixOperand(o),r}function ae(n,o){var r=t(193);return r.operand=e.parenthesizePostfixOperand(n),r.operator=o,r}function le(n,o,r){var i,s=t(194),a="number"==typeof(i=o)?p(i):i,l=a.kind;return s.left=e.parenthesizeBinaryOperand(l,n,!0,void 0),s.operatorToken=a,s.right=e.parenthesizeBinaryOperand(l,r,!1,s.left),s}function ce(n,o,r,i,s){var a=t(195);return a.condition=e.parenthesizeForConditionalHead(n),a.questionToken=s?o:p(55),a.whenTrue=e.parenthesizeSubexpressionOfConditionalExpression(s?r:o),a.colonToken=s?i:p(56),a.whenFalse=e.parenthesizeSubexpressionOfConditionalExpression(s||r),a}function ue(e,n){var r=t(196);return r.head=e,r.templateSpans=o(n),r}function pe(e,n){var o=t(197);return o.asteriskToken=e&&39===e.kind?e:void 0,o.expression=e&&39!==e.kind?e:n,o}function de(n){var o=t(198);return o.expression=e.parenthesizeExpressionForList(n),o}function ge(e,n,r,i,s){var a=t(199);return a.decorators=void 0,a.modifiers=Ct(e),a.name=St(n),a.typeParameters=Ct(r),a.heritageClauses=Ct(i),a.members=o(s),a}function he(n,o){var r=t(201);return r.expression=e.parenthesizeForAccess(o),r.typeArguments=Ct(n),r}function fe(e,n){var o=t(202);return o.expression=e,o.type=n,o}function _e(n){var o=t(203);return o.expression=e.parenthesizeForAccess(n),o}function me(e,n){var o=t(204);return o.keywordToken=e,o.name=n,o}function ye(e,n){var o=t(205);return o.expression=e,o.literal=n,o}function ke(e,n){var r=t(207);return r.statements=o(e),n&&(r.multiLine=n),r}function be(n,o){var r=t(208);return r.decorators=void 0,r.modifiers=Ct(n),r.declarationList=e.isArray(o)?Me(o):o,r}function ve(n){var o=t(210);return o.expression=e.parenthesizeExpressionForExpressionStatement(n),o}function Te(e,n,o){var r=t(211);return r.expression=e,r.thenStatement=n,r.elseStatement=o,r}function Ee(e,n){var o=t(212);return o.statement=e,o.expression=n,o}function Se(e,n){var o=t(213);return o.expression=e,o.statement=n,o}function Ce(e,n,o,r){var i=t(214);return i.initializer=e,i.condition=n,i.incrementor=o,i.statement=r,i}function xe(e,n,o){var r=t(215);return r.initializer=e,r.expression=n,r.statement=o,r}function Be(e,n,o,r){var i=t(216);return i.awaitModifier=e,i.initializer=n,i.expression=o,i.statement=r,i}function Ae(e){var n=t(217);return n.label=St(e),n}function Ie(e){var n=t(218);return n.label=St(e),n}function De(e){var n=t(219);return n.expression=e,n}function Ne(e,n){var o=t(220);return o.expression=e,o.statement=n,o}function we(n,o){var r=t(221);return r.expression=e.parenthesizeExpressionForList(n),r.caseBlock=o,r}function Re(e,n){var o=t(222);return o.label=St(e),o.statement=n,o}function Oe(e){var n=t(223);return n.expression=e,n}function Pe(e,n,o){var r=t(224);return r.tryBlock=e,r.catchClause=n,r.finallyBlock=o,r}function Le(n,o,r){var i=t(226);return i.name=St(n),i.type=o,i.initializer=void 0!==r?e.parenthesizeExpressionForList(r):void 0,i}function Me(e,n){var r=t(227);return r.flags|=3&n,r.declarations=o(e),r}function Fe(e,n,r,i,s,a,l,c){var u=t(228);return u.decorators=Ct(e),u.modifiers=Ct(n),u.asteriskToken=r,u.name=St(i),u.typeParameters=Ct(s),u.parameters=o(a),u.type=l,u.body=c,u}function Ue(e,n,r,i,s,a){var l=t(229);return l.decorators=Ct(e),l.modifiers=Ct(n),l.name=St(r),l.typeParameters=Ct(i),l.heritageClauses=Ct(s),l.members=o(a),l}function He(e,n,r,i,s,a){var l=t(230);return l.decorators=Ct(e),l.modifiers=Ct(n),l.name=St(r),l.typeParameters=Ct(i),l.heritageClauses=Ct(s),l.members=o(a),l}function Ve(e,n,o,r,i){var s=t(231);return s.decorators=Ct(e),s.modifiers=Ct(n),s.name=St(o),s.typeParameters=Ct(r),s.type=i,s}function Ge(e,n,r,i){var s=t(232);return s.decorators=Ct(e),s.modifiers=Ct(n),s.name=St(r),s.members=o(i),s}function We(e,n,o,r,i){var s=t(233);return s.flags|=532&i,s.decorators=Ct(e),s.modifiers=Ct(n),s.name=o,s.body=r,s}function Ke(e){var n=t(234);return n.statements=o(e),n}function je(e){var n=t(235);return n.clauses=o(e),n}function ze(e){var n=t(236);return n.name=St(e),n}function $e(e,n,o,r){var i=t(237);return i.decorators=Ct(e),i.modifiers=Ct(n),i.name=St(o),i.moduleReference=r,i}function Xe(e,n,o,r){var i=t(238);return i.decorators=Ct(e),i.modifiers=Ct(n),i.importClause=o,i.moduleSpecifier=r,i}function Ye(e,n){var o=t(239);return o.name=e,o.namedBindings=n,o}function Je(e){var n=t(240);return n.name=e,n}function qe(e){var n=t(241);return n.elements=o(e),n}function Ze(e,n){var o=t(242);return o.propertyName=e,o.name=n,o}function Qe(e,n,o,r){var i=t(243);return i.decorators=Ct(e),i.modifiers=Ct(n),i.isExportEquals=o,i.expression=r,i}function et(e,n,o,r){var i=t(244);return i.decorators=Ct(e),i.modifiers=Ct(n),i.exportClause=o,i.moduleSpecifier=r,i}function tt(e){var n=t(245);return n.elements=o(e),n}function nt(e,n){var o=t(246);return o.propertyName=St(e),o.name=St(n),o}function ot(e){var n=t(248);return n.expression=e,n}function rt(e,n,r){var i=t(249);return i.openingElement=e,i.children=o(n),i.closingElement=r,i}function it(e,n){var o=t(250);return o.tagName=e,o.attributes=n,o}function st(e,n){var o=t(251);return o.tagName=e,o.attributes=n,o}function at(e){var n=t(252);return n.tagName=e,n}function lt(e,n){var o=t(253);return o.name=e,o.initializer=n,o}function ct(e){var n=t(254);return n.properties=o(e),n}function ut(e){var n=t(255);return n.expression=e,n}function pt(e,n){var o=t(256);return o.dotDotDotToken=e,o.expression=n,o}function dt(n,r){var i=t(257);return i.expression=e.parenthesizeExpressionForList(n),i.statements=o(r),i}function gt(e){var n=t(258);return n.statements=o(e),n}function ht(e,n){var r=t(259);return r.token=e,r.types=o(n),r}function ft(n,o){var r=t(260);return r.variableDeclaration=e.isString(n)?Le(n):n,r.block=o,r}function _t(n,o){var r=t(261);return r.name=St(n),r.questionToken=void 0,r.initializer=void 0!==o?e.parenthesizeExpressionForList(o):void 0,r}function mt(n,o){var r=t(262);return r.name=St(n),r.objectAssignmentInitializer=void 0!==o?e.parenthesizeExpressionForList(o):void 0,r}function yt(n){var o=t(263);return o.expression=void 0!==n?e.parenthesizeExpressionForList(n):void 0,o}function kt(n,o){var r=t(264);return r.name=St(n),r.initializer=o&&e.parenthesizeExpressionForList(o),r}function bt(e,n){var o=t(288);return o.expression=e,o.original=n,Bt(o,n),o}function vt(t){if(e.nodeIsSynthesized(t)&&!e.isParseTreeNode(t)&&!t.original&&!t.emitNode&&!t.id){if(289===t.kind)return t.elements;if(e.isBinaryExpression(t)&&26===t.operatorToken.kind)return[t.left,t.right]}return t}function Tt(n){var r=t(289);return r.elements=o(e.sameFlatMap(n,vt)),r}function Et(t){var n=e.createNode(266);return n.sourceFiles=t,n}function St(t){return e.isString(t)?l(t):t}function Ct(e){return e?o(e):void 0}function xt(t){if(!t.emitNode){if(e.isParseTreeNode(t)){if(265===t.kind)return t.emitNode={annotatedNodes:[t]};xt(e.getSourceFileOfNode(t)).annotatedNodes.push(t)}t.emitNode={}}return t.emitNode}function Bt(e,t){return t&&(e.pos=t.pos,e.end=t.end),e}function At(e,t){return xt(e).flags=t,e}function It(e){var t=e.emitNode;return t&&t.leadingComments}function Dt(e,t){return xt(e).leadingComments=t,e}function Nt(e){var t=e.emitNode;return t&&t.trailingComments}function wt(e,t){return xt(e).trailingComments=t,e}function Rt(t,n){if(t.original=n,n){var o=n.emitNode;o&&(t.emitNode=function(t,n){var o=t.flags,r=t.leadingComments,i=t.trailingComments,s=t.commentRange,a=t.sourceMapRange,l=t.tokenSourceMapRanges,c=t.constantValue,u=t.helpers;n||(n={});r&&(n.leadingComments=e.addRange(r.slice(),n.leadingComments));i&&(n.trailingComments=e.addRange(i.slice(),n.trailingComments));o&&(n.flags=o);s&&(n.commentRange=s);a&&(n.sourceMapRange=a);l&&(n.tokenSourceMapRanges=function(e,t){t||(t=[]);for(var n in e)t[n]=e[n];return t}(l,n.tokenSourceMapRanges));void 0!==c&&(n.constantValue=c);u&&(n.helpers=e.addRange(n.helpers,u));return n}(o,t.emitNode))}return t}e.createTempVariable=function(e){var t=l("");return t.autoGenerateKind=1,t.autoGenerateId=u,u++,e&&e(t),t},e.createLoopVariable=function(){var e=l("");return e.autoGenerateKind=2,e.autoGenerateId=u,u++,e},e.createUniqueName=function(e){var t=l(e);return t.autoGenerateKind=3,t.autoGenerateId=u,u++,t},e.getGeneratedNameForNode=function(e){var t=l("");return t.autoGenerateKind=4,t.autoGenerateId=u,t.original=e,u++,t},e.createToken=p,e.createSuper=function(){return t(97)},e.createThis=function(){return t(99)},e.createNull=function(){return t(95)},e.createTrue=d,e.createFalse=g,e.createQualifiedName=h,e.updateQualifiedName=function(e,t,o){return e.left!==t||e.right!==o?n(h(t,o),e):e},e.createComputedPropertyName=f,e.updateComputedPropertyName=function(e,t){return e.expression!==t?n(f(t),e):e},e.createTypeParameterDeclaration=_,e.updateTypeParameterDeclaration=function(e,t,o,r){return e.name!==t||e.constraint!==o||e.default!==r?n(_(t,o,r),e):e},e.createParameter=m,e.updateParameter=function(e,t,o,r,i,s,a,l){return e.decorators!==t||e.modifiers!==o||e.dotDotDotToken!==r||e.name!==i||e.questionToken!==s||e.type!==a||e.initializer!==l?n(m(t,o,r,i,s,a,l),e):e},e.createDecorator=y,e.updateDecorator=function(e,t){return e.expression!==t?n(y(t),e):e},e.createPropertySignature=k,e.updatePropertySignature=function(e,t,o,r,i,s){return e.modifiers!==t||e.name!==o||e.questionToken!==r||e.type!==i||e.initializer!==s?n(k(t,o,r,i,s),e):e},e.createProperty=b,e.updateProperty=function(e,t,o,r,i,s,a){return e.decorators!==t||e.modifiers!==o||e.name!==r||e.questionToken!==i||e.type!==s||e.initializer!==a?n(b(t,o,r,i,s,a),e):e},e.createMethodSignature=v,e.updateMethodSignature=function(e,t,o,r,i,s){return e.typeParameters!==t||e.parameters!==o||e.type!==r||e.name!==i||e.questionToken!==s?n(v(t,o,r,i,s),e):e},e.createMethod=T,e.updateMethod=function(e,t,o,r,i,s,a,l,c,u){return e.decorators!==t||e.modifiers!==o||e.asteriskToken!==r||e.name!==i||e.questionToken!==s||e.typeParameters!==a||e.parameters!==l||e.type!==c||e.body!==u?n(T(t,o,r,i,s,a,l,c,u),e):e},e.createConstructor=E,e.updateConstructor=function(e,t,o,r,i){return e.decorators!==t||e.modifiers!==o||e.parameters!==r||e.body!==i?n(E(t,o,r,i),e):e},e.createGetAccessor=S,e.updateGetAccessor=function(e,t,o,r,i,s,a){return e.decorators!==t||e.modifiers!==o||e.name!==r||e.parameters!==i||e.type!==s||e.body!==a?n(S(t,o,r,i,s,a),e):e},e.createSetAccessor=C,e.updateSetAccessor=function(e,t,o,r,i,s){return e.decorators!==t||e.modifiers!==o||e.name!==r||e.parameters!==i||e.body!==s?n(C(t,o,r,i,s),e):e},e.createCallSignature=function(e,t,n){return B(155,e,t,n)},e.updateCallSignature=function(e,t,n,o){return A(e,t,n,o)},e.createConstructSignature=function(e,t,n){return B(156,e,t,n)},e.updateConstructSignature=function(e,t,n,o){return A(e,t,n,o)},e.createIndexSignature=x,e.updateIndexSignature=function(e,t,o,r,i){return e.parameters!==r||e.type!==i||e.decorators!==t||e.modifiers!==o?n(x(t,o,r,i),e):e},e.createSignatureDeclaration=B,e.createKeywordTypeNode=function(e){return t(e)},e.createTypePredicateNode=I,e.updateTypePredicateNode=function(e,t,o){return e.parameterName!==t||e.type!==o?n(I(t,o),e):e},e.createTypeReferenceNode=D,e.updateTypeReferenceNode=function(e,t,o){return e.typeName!==t||e.typeArguments!==o?n(D(t,o),e):e},e.createFunctionTypeNode=function(e,t,n){return B(160,e,t,n)},e.updateFunctionTypeNode=function(e,t,n,o){return A(e,t,n,o)},e.createConstructorTypeNode=function(e,t,n){return B(161,e,t,n)},e.updateConstructorTypeNode=function(e,t,n,o){return A(e,t,n,o)},e.createTypeQueryNode=N,e.updateTypeQueryNode=function(e,t){return e.exprName!==t?n(N(t),e):e},e.createTypeLiteralNode=w,e.updateTypeLiteralNode=function(e,t){return e.members!==t?n(w(t),e):e},e.createArrayTypeNode=R,e.updateArrayTypeNode=function(e,t){return e.elementType!==t?n(R(t),e):e},e.createTupleTypeNode=O,e.updateTypleTypeNode=function(e,t){return e.elementTypes!==t?n(O(t),e):e},e.createUnionTypeNode=function(e){return P(166,e)},e.updateUnionTypeNode=function(e,t){return L(e,t)},e.createIntersectionTypeNode=function(e){return P(167,e)},e.updateIntersectionTypeNode=function(e,t){return L(e,t)},e.createUnionOrIntersectionTypeNode=P,e.createParenthesizedType=M,e.updateParenthesizedType=function(e,t){return e.type!==t?n(M(t),e):e},e.createThisTypeNode=function(){return t(169)},e.createTypeOperatorNode=F,e.updateTypeOperatorNode=function(e,t){return e.type!==t?n(F(t),e):e},e.createIndexedAccessTypeNode=U,e.updateIndexedAccessTypeNode=function(e,t,o){return e.objectType!==t||e.indexType!==o?n(U(t,o),e):e},e.createMappedTypeNode=H,e.updateMappedTypeNode=function(e,t,o,r,i){return e.readonlyToken!==t||e.typeParameter!==o||e.questionToken!==r||e.type!==i?n(H(t,o,r,i),e):e},e.createLiteralTypeNode=V,e.updateLiteralTypeNode=function(e,t){return e.literal!==t?n(V(t),e):e},e.createObjectBindingPattern=G,e.updateObjectBindingPattern=function(e,t){return e.elements!==t?n(G(t),e):e},e.createArrayBindingPattern=W,e.updateArrayBindingPattern=function(e,t){return e.elements!==t?n(W(t),e):e},e.createBindingElement=K,e.updateBindingElement=function(e,t,o,r,i){return e.propertyName!==o||e.dotDotDotToken!==t||e.name!==r||e.initializer!==i?n(K(t,o,r,i),e):e},e.createArrayLiteral=j,e.updateArrayLiteral=function(e,t){return e.elements!==t?n(j(t,e.multiLine),e):e},e.createObjectLiteral=z,e.updateObjectLiteral=function(e,t){return e.properties!==t?n(z(t,e.multiLine),e):e},e.createPropertyAccess=$,e.updatePropertyAccess=function(t,o,r){return t.expression!==o||t.name!==r?n(At($(o,r),e.getEmitFlags(t)),t):t},e.createElementAccess=X,e.updateElementAccess=function(e,t,o){return e.expression!==t||e.argumentExpression!==o?n(X(t,o),e):e},e.createCall=Y,e.updateCall=function(e,t,o,r){return e.expression!==t||e.typeArguments!==o||e.arguments!==r?n(Y(t,o,r),e):e},e.createNew=J,e.updateNew=function(e,t,o,r){return e.expression!==t||e.typeArguments!==o||e.arguments!==r?n(J(t,o,r),e):e},e.createTaggedTemplate=q,e.updateTaggedTemplate=function(e,t,o){return e.tag!==t||e.template!==o?n(q(t,o),e):e},e.createTypeAssertion=Z,e.updateTypeAssertion=function(e,t,o){return e.type!==t||e.expression!==o?n(Z(t,o),e):e},e.createParen=Q,e.updateParen=function(e,t){return e.expression!==t?n(Q(t),e):e},e.createFunctionExpression=ee,e.updateFunctionExpression=function(e,t,o,r,i,s,a,l){return e.name!==r||e.modifiers!==t||e.asteriskToken!==o||e.typeParameters!==i||e.parameters!==s||e.type!==a||e.body!==l?n(ee(t,o,r,i,s,a,l),e):e},e.createArrowFunction=te,e.updateArrowFunction=function(t,o,r,i,s,a,l){var c,u;return void 0===l?(c=t.equalsGreaterThanToken,u=e.cast(a,e.isConciseBody)):(c=e.cast(a,(function(e){return 36===e.kind})),u=l),t.modifiers!==o||t.typeParameters!==r||t.parameters!==i||t.type!==s||t.equalsGreaterThanToken!==c||t.body!==u?n(te(o,r,i,s,c,u),t):t},e.createDelete=ne,e.updateDelete=function(e,t){return e.expression!==t?n(ne(t),e):e},e.createTypeOf=oe,e.updateTypeOf=function(e,t){return e.expression!==t?n(oe(t),e):e},e.createVoid=re,e.updateVoid=function(e,t){return e.expression!==t?n(re(t),e):e},e.createAwait=ie,e.updateAwait=function(e,t){return e.expression!==t?n(ie(t),e):e},e.createPrefix=se,e.updatePrefix=function(e,t){return e.operand!==t?n(se(e.operator,t),e):e},e.createPostfix=ae,e.updatePostfix=function(e,t){return e.operand!==t?n(ae(t,e.operator),e):e},e.createBinary=le,e.updateBinary=function(e,t,o,r){return e.left!==t||e.right!==o?n(le(t,r||e.operatorToken,o),e):e},e.createConditional=ce,e.updateConditional=function t(o,r){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];if(2===i.length){var a=i[0],l=i[1];return t(o,r,o.questionToken,a,o.colonToken,l)}e.Debug.assert(4===i.length);var c=i[0],u=i[1],p=i[2],d=i[3];return o.condition!==r||o.questionToken!==c||o.whenTrue!==u||o.colonToken!==p||o.whenFalse!==d?n(ce(r,c,u,p,d),o):o},e.createTemplateExpression=ue,e.updateTemplateExpression=function(e,t,o){return e.head!==t||e.templateSpans!==o?n(ue(t,o),e):e},e.createTemplateHead=function(e){var n=t(14);return n.text=e,n},e.createTemplateMiddle=function(e){var n=t(15);return n.text=e,n},e.createTemplateTail=function(e){var n=t(16);return n.text=e,n},e.createNoSubstitutionTemplateLiteral=function(e){var n=t(13);return n.text=e,n},e.createYield=pe,e.updateYield=function(e,t,o){return e.expression!==o||e.asteriskToken!==t?n(pe(t,o),e):e},e.createSpread=de,e.updateSpread=function(e,t){return e.expression!==t?n(de(t),e):e},e.createClassExpression=ge,e.updateClassExpression=function(e,t,o,r,i,s){return e.modifiers!==t||e.name!==o||e.typeParameters!==r||e.heritageClauses!==i||e.members!==s?n(ge(t,o,r,i,s),e):e},e.createOmittedExpression=function(){return t(200)},e.createExpressionWithTypeArguments=he,e.updateExpressionWithTypeArguments=function(e,t,o){return e.typeArguments!==t||e.expression!==o?n(he(t,o),e):e},e.createAsExpression=fe,e.updateAsExpression=function(e,t,o){return e.expression!==t||e.type!==o?n(fe(t,o),e):e},e.createNonNullExpression=_e,e.updateNonNullExpression=function(e,t){return e.expression!==t?n(_e(t),e):e},e.createMetaProperty=me,e.updateMetaProperty=function(e,t){return e.name!==t?n(me(e.keywordToken,t),e):e},e.createTemplateSpan=ye,e.updateTemplateSpan=function(e,t,o){return e.expression!==t||e.literal!==o?n(ye(t,o),e):e},e.createSemicolonClassElement=function(){return t(206)},e.createBlock=ke,e.updateBlock=function(e,t){return e.statements!==t?n(ke(t,e.multiLine),e):e},e.createVariableStatement=be,e.updateVariableStatement=function(e,t,o){return e.modifiers!==t||e.declarationList!==o?n(be(t,o),e):e},e.createEmptyStatement=function(){return t(209)},e.createStatement=ve,e.updateStatement=function(e,t){return e.expression!==t?n(ve(t),e):e},e.createIf=Te,e.updateIf=function(e,t,o,r){return e.expression!==t||e.thenStatement!==o||e.elseStatement!==r?n(Te(t,o,r),e):e},e.createDo=Ee,e.updateDo=function(e,t,o){return e.statement!==t||e.expression!==o?n(Ee(t,o),e):e},e.createWhile=Se,e.updateWhile=function(e,t,o){return e.expression!==t||e.statement!==o?n(Se(t,o),e):e},e.createFor=Ce,e.updateFor=function(e,t,o,r,i){return e.initializer!==t||e.condition!==o||e.incrementor!==r||e.statement!==i?n(Ce(t,o,r,i),e):e},e.createForIn=xe,e.updateForIn=function(e,t,o,r){return e.initializer!==t||e.expression!==o||e.statement!==r?n(xe(t,o,r),e):e},e.createForOf=Be,e.updateForOf=function(e,t,o,r,i){return e.awaitModifier!==t||e.initializer!==o||e.expression!==r||e.statement!==i?n(Be(t,o,r,i),e):e},e.createContinue=Ae,e.updateContinue=function(e,t){return e.label!==t?n(Ae(t),e):e},e.createBreak=Ie,e.updateBreak=function(e,t){return e.label!==t?n(Ie(t),e):e},e.createReturn=De,e.updateReturn=function(e,t){return e.expression!==t?n(De(t),e):e},e.createWith=Ne,e.updateWith=function(e,t,o){return e.expression!==t||e.statement!==o?n(Ne(t,o),e):e},e.createSwitch=we,e.updateSwitch=function(e,t,o){return e.expression!==t||e.caseBlock!==o?n(we(t,o),e):e},e.createLabel=Re,e.updateLabel=function(e,t,o){return e.label!==t||e.statement!==o?n(Re(t,o),e):e},e.createThrow=Oe,e.updateThrow=function(e,t){return e.expression!==t?n(Oe(t),e):e},e.createTry=Pe,e.updateTry=function(e,t,o,r){return e.tryBlock!==t||e.catchClause!==o||e.finallyBlock!==r?n(Pe(t,o,r),e):e},e.createDebuggerStatement=function(){return t(225)},e.createVariableDeclaration=Le,e.updateVariableDeclaration=function(e,t,o,r){return e.name!==t||e.type!==o||e.initializer!==r?n(Le(t,o,r),e):e},e.createVariableDeclarationList=Me,e.updateVariableDeclarationList=function(e,t){return e.declarations!==t?n(Me(t,e.flags),e):e},e.createFunctionDeclaration=Fe,e.updateFunctionDeclaration=function(e,t,o,r,i,s,a,l,c){return e.decorators!==t||e.modifiers!==o||e.asteriskToken!==r||e.name!==i||e.typeParameters!==s||e.parameters!==a||e.type!==l||e.body!==c?n(Fe(t,o,r,i,s,a,l,c),e):e},e.createClassDeclaration=Ue,e.updateClassDeclaration=function(e,t,o,r,i,s,a){return e.decorators!==t||e.modifiers!==o||e.name!==r||e.typeParameters!==i||e.heritageClauses!==s||e.members!==a?n(Ue(t,o,r,i,s,a),e):e},e.createInterfaceDeclaration=He,e.updateInterfaceDeclaration=function(e,t,o,r,i,s,a){return e.decorators!==t||e.modifiers!==o||e.name!==r||e.typeParameters!==i||e.heritageClauses!==s||e.members!==a?n(He(t,o,r,i,s,a),e):e},e.createTypeAliasDeclaration=Ve,e.updateTypeAliasDeclaration=function(e,t,o,r,i,s){return e.decorators!==t||e.modifiers!==o||e.name!==r||e.typeParameters!==i||e.type!==s?n(Ve(t,o,r,i,s),e):e},e.createEnumDeclaration=Ge,e.updateEnumDeclaration=function(e,t,o,r,i){return e.decorators!==t||e.modifiers!==o||e.name!==r||e.members!==i?n(Ge(t,o,r,i),e):e},e.createModuleDeclaration=We,e.updateModuleDeclaration=function(e,t,o,r,i){return e.decorators!==t||e.modifiers!==o||e.name!==r||e.body!==i?n(We(t,o,r,i,e.flags),e):e},e.createModuleBlock=Ke,e.updateModuleBlock=function(e,t){return e.statements!==t?n(Ke(t),e):e},e.createCaseBlock=je,e.updateCaseBlock=function(e,t){return e.clauses!==t?n(je(t),e):e},e.createNamespaceExportDeclaration=ze,e.updateNamespaceExportDeclaration=function(e,t){return e.name!==t?n(ze(t),e):e},e.createImportEqualsDeclaration=$e,e.updateImportEqualsDeclaration=function(e,t,o,r,i){return e.decorators!==t||e.modifiers!==o||e.name!==r||e.moduleReference!==i?n($e(t,o,r,i),e):e},e.createImportDeclaration=Xe,e.updateImportDeclaration=function(e,t,o,r,i){return e.decorators!==t||e.modifiers!==o||e.importClause!==r||e.moduleSpecifier!==i?n(Xe(t,o,r,i),e):e},e.createImportClause=Ye,e.updateImportClause=function(e,t,o){return e.name!==t||e.namedBindings!==o?n(Ye(t,o),e):e},e.createNamespaceImport=Je,e.updateNamespaceImport=function(e,t){return e.name!==t?n(Je(t),e):e},e.createNamedImports=qe,e.updateNamedImports=function(e,t){return e.elements!==t?n(qe(t),e):e},e.createImportSpecifier=Ze,e.updateImportSpecifier=function(e,t,o){return e.propertyName!==t||e.name!==o?n(Ze(t,o),e):e},e.createExportAssignment=Qe,e.updateExportAssignment=function(e,t,o,r){return e.decorators!==t||e.modifiers!==o||e.expression!==r?n(Qe(t,o,e.isExportEquals,r),e):e},e.createExportDeclaration=et,e.updateExportDeclaration=function(e,t,o,r,i){return e.decorators!==t||e.modifiers!==o||e.exportClause!==r||e.moduleSpecifier!==i?n(et(t,o,r,i),e):e},e.createNamedExports=tt,e.updateNamedExports=function(e,t){return e.elements!==t?n(tt(t),e):e},e.createExportSpecifier=nt,e.updateExportSpecifier=function(e,t,o){return e.propertyName!==t||e.name!==o?n(nt(t,o),e):e},e.createExternalModuleReference=ot,e.updateExternalModuleReference=function(e,t){return e.expression!==t?n(ot(t),e):e},e.createJsxElement=rt,e.updateJsxElement=function(e,t,o,r){return e.openingElement!==t||e.children!==o||e.closingElement!==r?n(rt(t,o,r),e):e},e.createJsxSelfClosingElement=it,e.updateJsxSelfClosingElement=function(e,t,o){return e.tagName!==t||e.attributes!==o?n(it(t,o),e):e},e.createJsxOpeningElement=st,e.updateJsxOpeningElement=function(e,t,o){return e.tagName!==t||e.attributes!==o?n(st(t,o),e):e},e.createJsxClosingElement=at,e.updateJsxClosingElement=function(e,t){return e.tagName!==t?n(at(t),e):e},e.createJsxAttribute=lt,e.updateJsxAttribute=function(e,t,o){return e.name!==t||e.initializer!==o?n(lt(t,o),e):e},e.createJsxAttributes=ct,e.updateJsxAttributes=function(e,t){return e.properties!==t?n(ct(t),e):e},e.createJsxSpreadAttribute=ut,e.updateJsxSpreadAttribute=function(e,t){return e.expression!==t?n(ut(t),e):e},e.createJsxExpression=pt,e.updateJsxExpression=function(e,t){return e.expression!==t?n(pt(e.dotDotDotToken,t),e):e},e.createCaseClause=dt,e.updateCaseClause=function(e,t,o){return e.expression!==t||e.statements!==o?n(dt(t,o),e):e},e.createDefaultClause=gt,e.updateDefaultClause=function(e,t){return e.statements!==t?n(gt(t),e):e},e.createHeritageClause=ht,e.updateHeritageClause=function(e,t){return e.types!==t?n(ht(e.token,t),e):e},e.createCatchClause=ft,e.updateCatchClause=function(e,t,o){return e.variableDeclaration!==t||e.block!==o?n(ft(t,o),e):e},e.createPropertyAssignment=_t,e.updatePropertyAssignment=function(e,t,o){return e.name!==t||e.initializer!==o?n(_t(t,o),e):e},e.createShorthandPropertyAssignment=mt,e.updateShorthandPropertyAssignment=function(e,t,o){return e.name!==t||e.objectAssignmentInitializer!==o?n(mt(t,o),e):e},e.createSpreadAssignment=yt,e.updateSpreadAssignment=function(e,t){return e.expression!==t?n(yt(t),e):e},e.createEnumMember=kt,e.updateEnumMember=function(e,t,o){return e.name!==t||e.initializer!==o?n(kt(t,o),e):e},e.updateSourceFileNode=function(e,r){if(e.statements!==r){var i=t(265);return i.flags|=e.flags,i.statements=o(r),i.endOfFileToken=e.endOfFileToken,i.fileName=e.fileName,i.path=e.path,i.text=e.text,void 0!==e.amdDependencies&&(i.amdDependencies=e.amdDependencies),void 0!==e.moduleName&&(i.moduleName=e.moduleName),void 0!==e.referencedFiles&&(i.referencedFiles=e.referencedFiles),void 0!==e.typeReferenceDirectives&&(i.typeReferenceDirectives=e.typeReferenceDirectives),void 0!==e.languageVariant&&(i.languageVariant=e.languageVariant),void 0!==e.isDeclarationFile&&(i.isDeclarationFile=e.isDeclarationFile),void 0!==e.renamedDependencies&&(i.renamedDependencies=e.renamedDependencies),void 0!==e.hasNoDefaultLib&&(i.hasNoDefaultLib=e.hasNoDefaultLib),void 0!==e.languageVersion&&(i.languageVersion=e.languageVersion),void 0!==e.scriptKind&&(i.scriptKind=e.scriptKind),void 0!==e.externalModuleIndicator&&(i.externalModuleIndicator=e.externalModuleIndicator),void 0!==e.commonJsModuleIndicator&&(i.commonJsModuleIndicator=e.commonJsModuleIndicator),void 0!==e.identifiers&&(i.identifiers=e.identifiers),void 0!==e.nodeCount&&(i.nodeCount=e.nodeCount),void 0!==e.identifierCount&&(i.identifierCount=e.identifierCount),void 0!==e.symbolCount&&(i.symbolCount=e.symbolCount),void 0!==e.parseDiagnostics&&(i.parseDiagnostics=e.parseDiagnostics),void 0!==e.bindDiagnostics&&(i.bindDiagnostics=e.bindDiagnostics),void 0!==e.lineMap&&(i.lineMap=e.lineMap),void 0!==e.classifiableNames&&(i.classifiableNames=e.classifiableNames),void 0!==e.resolvedModules&&(i.resolvedModules=e.resolvedModules),void 0!==e.resolvedTypeReferenceDirectiveNames&&(i.resolvedTypeReferenceDirectiveNames=e.resolvedTypeReferenceDirectiveNames),void 0!==e.imports&&(i.imports=e.imports),void 0!==e.moduleAugmentations&&(i.moduleAugmentations=e.moduleAugmentations),n(i,e)}return e},e.getMutableClone=function(e){var t=r(e);return t.pos=e.pos,t.end=e.end,t.parent=e.parent,t},e.createNotEmittedStatement=function(e){var n=t(287);return n.original=e,Bt(n,e),n},e.createEndOfDeclarationMarker=function(e){var n=t(291);return n.emitNode={},n.original=e,n},e.createMergeDeclarationMarker=function(e){var n=t(290);return n.emitNode={},n.original=e,n},e.createPartiallyEmittedExpression=bt,e.updatePartiallyEmittedExpression=function(e,t){return e.expression!==t?n(bt(t,e.original),e):e},e.createCommaList=Tt,e.updateCommaList=function(e,t){return e.elements!==t?n(Tt(t),e):e},e.createBundle=Et,e.updateBundle=function(e,t){return e.sourceFiles!==t?Et(t):e},e.createImmediatelyInvokedFunctionExpression=function(e,t,n){return Y(ee(void 0,void 0,void 0,void 0,t?[t]:[],void 0,ke(e,!0)),void 0,n?[n]:[])},e.createImmediatelyInvokedArrowFunction=function(e,t,n){return Y(te(void 0,void 0,t?[t]:[],void 0,void 0,ke(e,!0)),void 0,n?[n]:[])},e.createComma=function(e,t){return le(e,26,t)},e.createLessThan=function(e,t){return le(e,27,t)},e.createAssignment=function(e,t){return le(e,58,t)},e.createStrictEquality=function(e,t){return le(e,34,t)},e.createStrictInequality=function(e,t){return le(e,35,t)},e.createAdd=function(e,t){return le(e,37,t)},e.createSubtract=function(e,t){return le(e,38,t)},e.createPostfixIncrement=function(e){return ae(e,43)},e.createLogicalAnd=function(e,t){return le(e,53,t)},e.createLogicalOr=function(e,t){return le(e,54,t)},e.createLogicalNot=function(e){return se(51,e)},e.createVoidZero=function(){return re(i(0))},e.createExportDefault=function(e){return Qe(void 0,void 0,!1,e)},e.createExternalModuleExport=function(e){return et(void 0,void 0,tt([nt(void 0,e)]))},e.disposeEmitNodes=function(t){var n=(t=e.getSourceFileOfNode(e.getParseTreeNode(t)))&&t.emitNode,o=n&&n.annotatedNodes;if(o)for(var r=0,i=o;r<i.length;r++){i[r].emitNode=void 0}},e.getOrCreateEmitNode=xt,e.setTextRange=Bt,e.setEmitFlags=At,e.addEmitFlags=function(e,t){var n=xt(e);return n.flags=n.flags|t,e},e.getSourceMapRange=function(e){var t=e.emitNode;return t&&t.sourceMapRange||e},e.setSourceMapRange=function(e,t){return xt(e).sourceMapRange=t,e},e.createSourceMapSource=function(t,n,o){return new(c||(c=e.objectAllocator.getSourceMapSourceConstructor()))(t,n,o)},e.getTokenSourceMapRange=function(e,t){var n=e.emitNode,o=n&&n.tokenSourceMapRanges;return o&&o[t]},e.setTokenSourceMapRange=function(e,t,n){var o=xt(e);return(o.tokenSourceMapRanges||(o.tokenSourceMapRanges=[]))[t]=n,e},e.getCommentRange=function(e){var t=e.emitNode;return t&&t.commentRange||e},e.setCommentRange=function(e,t){return xt(e).commentRange=t,e},e.getSyntheticLeadingComments=It,e.setSyntheticLeadingComments=Dt,e.addSyntheticLeadingComment=function(t,n,o,r){return Dt(t,e.append(It(t),{kind:n,pos:-1,end:-1,hasTrailingNewLine:r,text:o}))},e.getSyntheticTrailingComments=Nt,e.setSyntheticTrailingComments=wt,e.addSyntheticTrailingComment=function(t,n,o,r){return wt(t,e.append(Nt(t),{kind:n,pos:-1,end:-1,hasTrailingNewLine:r,text:o}))},e.getConstantValue=function(e){var t=e.emitNode;return t&&t.constantValue},e.setConstantValue=function(e,t){return xt(e).constantValue=t,e},e.addEmitHelper=function(t,n){var o=xt(t);return o.helpers=e.append(o.helpers,n),t},e.addEmitHelpers=function(t,n){if(e.some(n))for(var o=xt(t),r=0,i=n;r<i.length;r++){var s=i[r];o.helpers=e.appendIfUnique(o.helpers,s)}return t},e.removeEmitHelper=function(t,n){var o=t.emitNode;if(o){var r=o.helpers;if(r)return e.orderedRemoveItem(r,n)}return!1},e.getEmitHelpers=function(e){var t=e.emitNode;return t&&t.helpers},e.moveEmitHelpers=function(t,n,o){var r=t.emitNode,i=r&&r.helpers;if(e.some(i)){for(var s=xt(n),a=0,l=0;l<i.length;l++){var c=i[l];o(c)?(a++,s.helpers=e.appendIfUnique(s.helpers,c)):a>0&&(i[l-a]=c)}a>0&&(i.length-=a)}},e.compareEmitHelpers=function(t,n){return t===n||t.priority===n.priority?0:void 0===t.priority?1:void 0===n.priority?-1:e.compareValues(t.priority,n.priority)},e.setOriginalNode=Rt}(ts||(ts={})),function(e){function t(t,n,o){if(e.isComputedPropertyName(n))return e.setTextRange(e.createElementAccess(t,n.expression),o);var r=e.setTextRange(e.isIdentifier(n)?e.createPropertyAccess(t,n):e.createElementAccess(t,n),n);return e.getOrCreateEmitNode(r).flags|=64,r}function n(t,n){var o=e.createIdentifier(t||"React");return o.flags&=-9,o.parent=e.getParseTreeNode(n),o}function o(t,r){if(e.isQualifiedName(t)){var i=o(t.left,r),s=e.createIdentifier(e.idText(t.right));return s.escapedText=t.right.escapedText,e.createPropertyAccess(i,s)}return n(e.idText(t),r)}function r(t,r,i){return t?o(t,i):e.createPropertyAccess(n(r,i),"createElement")}function i(t){return e.setEmitFlags(e.createIdentifier(t),4098)}e.nullTransformationContext={enableEmitNotification:e.noop,enableSubstitution:e.noop,endLexicalEnvironment:function(){},getCompilerOptions:e.notImplemented,getEmitHost:e.notImplemented,getEmitResolver:e.notImplemented,hoistFunctionDeclaration:e.noop,hoistVariableDeclaration:e.noop,isEmitNotificationEnabled:e.notImplemented,isSubstitutionEnabled:e.notImplemented,onEmitNode:e.noop,onSubstituteNode:e.notImplemented,readEmitHelpers:e.notImplemented,requestEmitHelper:e.noop,resumeLexicalEnvironment:e.noop,startLexicalEnvironment:e.noop,suspendLexicalEnvironment:e.noop},e.createTypeCheck=function(t,n){return"undefined"===n?e.createStrictEquality(t,e.createVoidZero()):e.createStrictEquality(e.createTypeOf(t),e.createLiteral(n))},e.createMemberAccessForPropertyName=t,e.createFunctionCall=function(t,n,o,r){return e.setTextRange(e.createCall(e.createPropertyAccess(t,"call"),void 0,[n].concat(o)),r)},e.createFunctionApply=function(t,n,o,r){return e.setTextRange(e.createCall(e.createPropertyAccess(t,"apply"),void 0,[n,o]),r)},e.createArraySlice=function(t,n){var o=[];return void 0!==n&&o.push("number"==typeof n?e.createLiteral(n):n),e.createCall(e.createPropertyAccess(t,"slice"),void 0,o)},e.createArrayConcat=function(t,n){return e.createCall(e.createPropertyAccess(t,"concat"),void 0,n)},e.createMathPow=function(t,n,o){return e.setTextRange(e.createCall(e.createPropertyAccess(e.createIdentifier("Math"),"pow"),void 0,[t,n]),o)},e.createExpressionForJsxElement=function(t,n,o,i,s,a,l){var c=[o];if(i&&c.push(i),s&&s.length>0)if(i||c.push(e.createNull()),s.length>1)for(var u=0,p=s;u<p.length;u++){var d=p[u];d.startsOnNewLine=!0,c.push(d)}else c.push(s[0]);return e.setTextRange(e.createCall(r(t,n,a),void 0,c),l)},e.getHelperName=i;var s={name:"typescript:values",scoped:!1,text:'\n            var __values = (this && this.__values) || function (o) {\n                var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;\n                if (m) return m.call(o);\n                return {\n                    next: function () {\n                        if (o && i >= o.length) o = void 0;\n                        return { value: o && o[i++], done: !o };\n                    }\n                };\n            };\n        '};e.createValuesHelper=function(t,n,o){return t.requestEmitHelper(s),e.setTextRange(e.createCall(i("__values"),void 0,[n]),o)};var a={name:"typescript:read",scoped:!1,text:'\n            var __read = (this && this.__read) || function (o, n) {\n                var m = typeof Symbol === "function" && o[Symbol.iterator];\n                if (!m) return o;\n                var i = m.call(o), r, ar = [], e;\n                try {\n                    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n                }\n                catch (error) { e = { error: error }; }\n                finally {\n                    try {\n                        if (r && !r.done && (m = i["return"])) m.call(i);\n                    }\n                    finally { if (e) throw e.error; }\n                }\n                return ar;\n            };\n        '};e.createReadHelper=function(t,n,o,r){return t.requestEmitHelper(a),e.setTextRange(e.createCall(i("__read"),void 0,void 0!==o?[n,e.createLiteral(o)]:[n]),r)};var l={name:"typescript:spread",scoped:!1,text:"\n            var __spread = (this && this.__spread) || function () {\n                for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n                return ar;\n            };"};function c(e,t){var n=S(e);switch(n.kind){case 71:return t;case 99:case 8:case 9:return!1;case 177:return 0!==n.elements.length;case 178:return n.properties.length>0;default:return!0}}function u(t){return e.isIdentifier(t)?e.createLiteral(t):e.isComputedPropertyName(t)?e.getMutableClone(t.expression):e.getMutableClone(t)}function p(e,t,n){return d(e,t,n,8192)}function d(t,n,o,r){var i=e.getNameOfDeclaration(t);if(i&&e.isIdentifier(i)&&!e.isGeneratedIdentifier(i)){var s=e.getMutableClone(i);return r|=e.getEmitFlags(i),o||(r|=48),n||(r|=1536),r&&e.setEmitFlags(s,r),s}return e.getGeneratedNameForNode(t)}function g(t,n,o,r){var i,s=e.createPropertyAccess(t,e.nodeIsSynthesized(n)?n:e.getSynthesizedClone(n));return e.setTextRange(s,n),r||(i|=48),o||(i|=1536),i&&e.setEmitFlags(s,i),s}function h(t){return e.isStringLiteral(t.expression)&&"use strict"===t.expression.text}function f(t,n,o){e.Debug.assert(0===t.length,"Prologue directives should be at the first statement in the target statements array");for(var r=!1,i=0,s=n.length;i<s;){var a=n[i];if(!e.isPrologueDirective(a))break;h(a)&&(r=!0),t.push(a),i++}return o&&!r&&t.push(B(e.createStatement(e.createLiteral("use strict")))),i}function _(t,n,o,r){for(var i=n.length;o<i;){var s=n[o];if(!(1048576&e.getEmitFlags(s)))break;t.push(r?e.visitNode(s,r,e.isStatement):s),o++}return o}function m(t){if(t=e.skipPartiallyEmittedExpressions(t),e.isLiteralKind(t.kind))return t.kind;if(194===t.kind&&37===t.operatorToken.kind){if(void 0!==t.cachedLiteralKind)return t.cachedLiteralKind;var n=m(t.left),o=e.isLiteralKind(n)&&n===m(t.right)?n:0;return t.cachedLiteralKind=o,o}return 0}function y(t){var n=e.skipPartiallyEmittedExpressions(t);return e.isLeftHandSideExpression(n)&&(182!==n.kind||n.arguments)?t:e.setTextRange(e.createParen(t),t)}function k(t){var n=e.skipPartiallyEmittedExpressions(t);return e.getExpressionPrecedence(n)>e.getOperatorPrecedence(194,26)?t:e.setTextRange(e.createParen(t),t)}function b(t){switch(t.kind){case 166:case 167:case 160:case 161:return e.createParenthesizedType(t)}return t}function v(e,t){for(;;){switch(e.kind){case 193:e=e.operand;continue;case 194:e=e.left;continue;case 195:e=e.condition;continue;case 181:if(t)return e;case 180:case 179:case 288:e=e.expression;continue}return e}}function T(e,t){switch(void 0===t&&(t=7),e.kind){case 185:return 0!=(1&t);case 184:case 202:case 203:return 0!=(2&t);case 288:return 0!=(4&t)}return!1}function E(t,n){var o;void 0===n&&(n=7);do{o=t,1&n&&(t=S(t)),2&n&&(t=C(t)),4&n&&(t=e.skipPartiallyEmittedExpressions(t))}while(o!==t);return t}function S(e){for(;185===e.kind;)e=e.expression;return e}function C(t){for(;e.isAssertionExpression(t)||203===t.kind;)t=t.expression;return t}function x(t,n,o){return void 0===o&&(o=7),t&&T(t,o)&&(!(185===(r=t).kind&&e.nodeIsSynthesized(r)&&e.nodeIsSynthesized(e.getSourceMapRange(r))&&e.nodeIsSynthesized(e.getCommentRange(r)))||e.some(e.getSyntheticLeadingComments(r))||e.some(e.getSyntheticTrailingComments(r)))?function(t,n){switch(t.kind){case 185:return e.updateParen(t,n);case 184:return e.updateTypeAssertion(t,t.type,n);case 202:return e.updateAsExpression(t,n,t.type);case 203:return e.updateNonNullExpression(t,n);case 288:return e.updatePartiallyEmittedExpression(t,n)}}(t,x(t.expression,n)):n;var r}function B(e){return e.startsOnNewLine=!0,e}function A(t){var n=e.getOriginalNode(t,e.isSourceFile),o=n&&n.emitNode;return o&&o.externalHelpersModuleName}function I(t,n,o){if(t)return t.moduleName?e.createLiteral(t.moduleName):t.isDeclarationFile||!o.out&&!o.outFile?void 0:e.createLiteral(e.getExternalModuleNameFromPath(n,t.fileName))}function D(t){if(e.isDeclarationBindingElement(t))return t.name;if(!e.isObjectLiteralElementLike(t))return e.isAssignmentExpression(t,!0)?D(t.left):e.isSpreadElement(t)?D(t.expression):t;switch(t.kind){case 261:return D(t.initializer);case 262:return t.name;case 263:return D(t.expression)}}function N(t){if(e.isBindingElement(t)){if(t.dotDotDotToken)return e.Debug.assertNode(t.name,e.isIdentifier),e.setOriginalNode(e.setTextRange(e.createSpread(t.name),t),t);var n=L(t.name);return t.initializer?e.setOriginalNode(e.setTextRange(e.createAssignment(n,t.initializer),t),t):n}return e.Debug.assertNode(t,e.isExpression),t}function w(t){if(e.isBindingElement(t)){if(t.dotDotDotToken)return e.Debug.assertNode(t.name,e.isIdentifier),e.setOriginalNode(e.setTextRange(e.createSpreadAssignment(t.name),t),t);if(t.propertyName){var n=L(t.name);return e.setOriginalNode(e.setTextRange(e.createPropertyAssignment(t.propertyName,t.initializer?e.createAssignment(n,t.initializer):n),t),t)}return e.Debug.assertNode(t.name,e.isIdentifier),e.setOriginalNode(e.setTextRange(e.createShorthandPropertyAssignment(t.name,t.initializer),t),t)}return e.Debug.assertNode(t,e.isObjectLiteralElementLike),t}function R(e){switch(e.kind){case 175:case 177:return P(e);case 174:case 178:return O(e)}}function O(t){return e.isObjectBindingPattern(t)?e.setOriginalNode(e.setTextRange(e.createObjectLiteral(e.map(t.elements,w)),t),t):(e.Debug.assertNode(t,e.isObjectLiteralExpression),t)}function P(t){return e.isArrayBindingPattern(t)?e.setOriginalNode(e.setTextRange(e.createArrayLiteral(e.map(t.elements,N)),t),t):(e.Debug.assertNode(t,e.isArrayLiteralExpression),t)}function L(t){return e.isBindingPattern(t)?R(t):(e.Debug.assertNode(t,e.isExpression),t)}e.createSpreadHelper=function(t,n,o){return t.requestEmitHelper(a),t.requestEmitHelper(l),e.setTextRange(e.createCall(i("__spread"),void 0,n),o)},e.createForOfBindingStatement=function(t,n){if(e.isVariableDeclarationList(t)){var o=e.firstOrUndefined(t.declarations),r=e.updateVariableDeclaration(o,o.name,void 0,n);return e.setTextRange(e.createVariableStatement(void 0,e.updateVariableDeclarationList(t,[r])),t)}var i=e.setTextRange(e.createAssignment(t,n),t);return e.setTextRange(e.createStatement(i),t)},e.insertLeadingStatement=function(t,n){return e.isBlock(t)?e.updateBlock(t,e.setTextRange(e.createNodeArray([n].concat(t.statements)),t.statements)):e.createBlock(e.createNodeArray([t,n]),!0)},e.restoreEnclosingLabel=function t(n,o,r){if(!o)return n;var i=e.updateLabel(o,o.label,222===o.statement.kind?t(n,o.statement):n);return r&&r(o),i},e.createCallBinding=function(t,n,o,r){var i,s,a=E(t,7);if(e.isSuperProperty(a))i=e.createThis(),s=a;else if(97===a.kind)i=e.createThis(),s=o<2?e.setTextRange(e.createIdentifier("_super"),a):a;else if(4096&e.getEmitFlags(a))i=e.createVoidZero(),s=y(a);else switch(a.kind){case 179:c(a.expression,r)?(i=e.createTempVariable(n),s=e.createPropertyAccess(e.setTextRange(e.createAssignment(i,a.expression),a.expression),a.name),e.setTextRange(s,a)):(i=a.expression,s=a);break;case 180:c(a.expression,r)?(i=e.createTempVariable(n),s=e.createElementAccess(e.setTextRange(e.createAssignment(i,a.expression),a.expression),a.argumentExpression),e.setTextRange(s,a)):(i=a.expression,s=a);break;default:i=e.createVoidZero(),s=y(t)}return{target:s,thisArg:i}},e.inlineExpressions=function(t){return t.length>10?e.createCommaList(t):e.reduceLeft(t,e.createComma)},e.createExpressionFromEntityName=function t(n){if(e.isQualifiedName(n)){var o=t(n.left),r=e.getMutableClone(n.right);return e.setTextRange(e.createPropertyAccess(o,r),n)}return e.getMutableClone(n)},e.createExpressionForPropertyName=u,e.createExpressionForObjectLiteralElementLike=function(n,o,r){switch(o.kind){case 153:case 154:return function(t,n,o,r){var i=e.getAllAccessorDeclarations(t,n),s=i.firstAccessor,a=i.getAccessor,l=i.setAccessor;if(n===s){var c=[];if(a){var p=e.createFunctionExpression(a.modifiers,void 0,void 0,void 0,a.parameters,void 0,a.body);e.setTextRange(p,a),e.setOriginalNode(p,a);var d=e.createPropertyAssignment("get",p);c.push(d)}if(l){var g=e.createFunctionExpression(l.modifiers,void 0,void 0,void 0,l.parameters,void 0,l.body);e.setTextRange(g,l),e.setOriginalNode(g,l);var h=e.createPropertyAssignment("set",g);c.push(h)}c.push(e.createPropertyAssignment("enumerable",e.createTrue())),c.push(e.createPropertyAssignment("configurable",e.createTrue()));var f=e.setTextRange(e.createCall(e.createPropertyAccess(e.createIdentifier("Object"),"defineProperty"),void 0,[o,u(n.name),e.createObjectLiteral(c,r)]),s);return e.aggregateTransformFlags(f)}return}(n.properties,o,r,n.multiLine);case 261:return function(n,o){return e.aggregateTransformFlags(e.setOriginalNode(e.setTextRange(e.createAssignment(t(o,n.name,n.name),n.initializer),n),n))}(o,r);case 262:return function(n,o){return e.aggregateTransformFlags(e.setOriginalNode(e.setTextRange(e.createAssignment(t(o,n.name,n.name),e.getSynthesizedClone(n.name)),n),n))}(o,r);case 151:return function(n,o){return e.aggregateTransformFlags(e.setOriginalNode(e.setTextRange(e.createAssignment(t(o,n.name,n.name),e.setOriginalNode(e.setTextRange(e.createFunctionExpression(n.modifiers,n.asteriskToken,void 0,void 0,n.parameters,void 0,n.body),n),n)),n),n))}(o,r)}},e.getInternalName=function(e,t,n){return d(e,t,n,49152)},e.isInternalName=function(t){return 0!=(32768&e.getEmitFlags(t))},e.getLocalName=function(e,t,n){return d(e,t,n,16384)},e.isLocalName=function(t){return 0!=(16384&e.getEmitFlags(t))},e.getExportName=p,e.isExportName=function(t){return 0!=(8192&e.getEmitFlags(t))},e.getDeclarationName=function(e,t,n){return d(e,t,n)},e.getExternalModuleOrNamespaceExportName=function(t,n,o,r){return t&&e.hasModifier(n,1)?g(t,d(n),o,r):p(n,o,r)},e.getNamespaceMemberName=g,e.convertToFunctionBody=function(t,n){return e.isBlock(t)?t:e.setTextRange(e.createBlock([e.setTextRange(e.createReturn(t),t)],n),t)},e.convertFunctionDeclarationToExpression=function(t){e.Debug.assert(!!t.body);var n=e.createFunctionExpression(t.modifiers,t.asteriskToken,t.name,t.typeParameters,t.parameters,t.type,t.body);return e.setOriginalNode(n,t),e.setTextRange(n,t),t.startsOnNewLine&&(n.startsOnNewLine=!0),e.aggregateTransformFlags(n),n},e.addPrologue=function(e,t,n,o){return _(e,t,f(e,t,n),o)},e.addStandardPrologue=f,e.addCustomPrologue=_,e.startsWithUseStrict=function(t){var n=e.firstOrUndefined(t);return void 0!==n&&e.isPrologueDirective(n)&&h(n)},e.ensureUseStrict=function(t){for(var n=!1,o=0,r=t;o<r.length;o++){var i=r[o];if(!e.isPrologueDirective(i))break;if(h(i)){n=!0;break}}return n?t:e.setTextRange(e.createNodeArray([B(e.createStatement(e.createLiteral("use strict")))].concat(t)),t)},e.parenthesizeBinaryOperand=function(t,n,o,r){return 185===e.skipPartiallyEmittedExpressions(n).kind?n:function(t,n,o,r){var i=e.getOperatorPrecedence(194,t),s=e.getOperatorAssociativity(194,t),a=e.skipPartiallyEmittedExpressions(n),l=e.getExpressionPrecedence(a);switch(e.compareValues(l,i)){case-1:return!(!o&&1===s&&197===n.kind);case 1:return!1;case 0:if(o)return 1===s;if(e.isBinaryExpression(a)&&a.operatorToken.kind===t){if(function(e){return 39===e||49===e||48===e||50===e}(t))return!1;if(37===t){var c=r?m(r):0;if(e.isLiteralKind(c)&&c===m(a))return!1}}return 0===e.getExpressionAssociativity(a)}}(t,n,o,r)?e.createParen(n):n},e.parenthesizeForConditionalHead=function(t){var n=e.getOperatorPrecedence(195,55),o=e.skipPartiallyEmittedExpressions(t),r=e.getExpressionPrecedence(o);return-1===e.compareValues(r,n)?e.createParen(t):t},e.parenthesizeSubexpressionOfConditionalExpression=function(t){return 194===t.kind&&26===t.operatorToken.kind?e.createParen(t):t},e.parenthesizeForNew=function(t){var n=v(t,!0);switch(n.kind){case 181:return e.createParen(t);case 182:return n.arguments?t:e.createParen(t)}return y(t)},e.parenthesizeForAccess=y,e.parenthesizePostfixOperand=function(t){return e.isLeftHandSideExpression(t)?t:e.setTextRange(e.createParen(t),t)},e.parenthesizePrefixOperand=function(t){return e.isUnaryExpression(t)?t:e.setTextRange(e.createParen(t),t)},e.parenthesizeListElements=function(t){for(var n,o=0;o<t.length;o++){var r=k(t[o]);void 0===n&&r===t[o]||(void 0===n&&(n=t.slice(0,o)),n.push(r))}return void 0!==n?e.setTextRange(e.createNodeArray(n,t.hasTrailingComma),t):t},e.parenthesizeExpressionForList=k,e.parenthesizeExpressionForExpressionStatement=function(t){var n=e.skipPartiallyEmittedExpressions(t);if(e.isCallExpression(n)){var o=n.expression,r=e.skipPartiallyEmittedExpressions(o).kind;if(186===r||187===r){var i=e.getMutableClone(n);return i.expression=e.setTextRange(e.createParen(o),o),x(t,i,4)}}var s=v(n,!1).kind;return 178===s||186===s?e.setTextRange(e.createParen(t),t):t},e.parenthesizeElementTypeMember=b,e.parenthesizeArrayTypeMember=function(t){switch(t.kind){case 162:case 170:return e.createParenthesizedType(t)}return b(t)},e.parenthesizeElementTypeMembers=function(t){return e.createNodeArray(e.sameMap(t,b))},e.parenthesizeTypeParameters=function(t){if(e.some(t)){for(var n=[],o=0;o<t.length;++o){var r=t[o];n.push(0===o&&e.isFunctionOrConstructorTypeNode(r)&&r.typeParameters?e.createParenthesizedType(r):r)}return e.createNodeArray(n)}},e.parenthesizeConciseBody=function(t){return e.isBlock(t)||178!==v(t,!1).kind?t:e.setTextRange(e.createParen(t),t)},function(e){e[e.Parentheses=1]="Parentheses",e[e.Assertions=2]="Assertions",e[e.PartiallyEmittedExpressions=4]="PartiallyEmittedExpressions",e[e.All=7]="All"}(e.OuterExpressionKinds||(e.OuterExpressionKinds={})),e.isOuterExpression=T,e.skipOuterExpressions=E,e.skipParentheses=S,e.skipAssertions=C,e.recreateOuterExpressions=x,e.startOnNewLine=B,e.getExternalHelpersModuleName=A,e.getOrCreateExternalHelpersModuleNameIfNeeded=function(t,n,o){if(n.importHelpers&&e.isEffectiveExternalModule(t,n)){var r=A(t);if(r)return r;var i=e.getEmitModuleKind(n),s=o&&i!==e.ModuleKind.System&&i!==e.ModuleKind.ES2015&&i!==e.ModuleKind.ESNext;if(!s){var a=e.getEmitHelpers(t);if(a)for(var l=0,c=a;l<c.length;l++){if(!c[l].scoped){s=!0;break}}}if(s){var u=e.getOriginalNode(t,e.isSourceFile),p=e.getOrCreateEmitNode(u);return p.externalHelpersModuleName||(p.externalHelpersModuleName=e.createUniqueName(e.externalHelpersModuleNameText))}}},e.getLocalNameForExternalImport=function(t,n){var o=e.getNamespaceDeclarationNode(t);if(o&&!e.isDefaultImport(t)){var r=o.name;return e.isGeneratedIdentifier(r)?r:e.createIdentifier(e.getSourceTextOfNodeFromSourceFile(n,o.name))}return 238===t.kind&&t.importClause||244===t.kind&&t.moduleSpecifier?e.getGeneratedNameForNode(t):void 0},e.getExternalModuleNameLiteral=function(t,n,o,r,i){var s=e.getExternalModuleName(t);if(9===s.kind)return function(e,t,n,o){return I(n.getExternalModuleFileFromDeclaration(e),t,o)}(t,o,r,i)||function(t,n){var o=n.renamedDependencies&&n.renamedDependencies.get(t.text);return o&&e.createLiteral(o)}(s,n)||e.getSynthesizedClone(s)},e.tryGetModuleNameFromFile=I,e.getInitializerOfBindingOrAssignmentElement=function t(n){return e.isDeclarationBindingElement(n)?n.initializer:e.isPropertyAssignment(n)?e.isAssignmentExpression(n.initializer,!0)?n.initializer.right:void 0:e.isShorthandPropertyAssignment(n)?n.objectAssignmentInitializer:e.isAssignmentExpression(n,!0)?n.right:e.isSpreadElement(n)?t(n.expression):void 0},e.getTargetOfBindingOrAssignmentElement=D,e.getRestIndicatorOfBindingOrAssignmentElement=function(e){switch(e.kind){case 146:case 176:return e.dotDotDotToken;case 198:case 263:return e}},e.getPropertyNameOfBindingOrAssignmentElement=function(t){switch(t.kind){case 176:if(t.propertyName){var n=t.propertyName;return e.isComputedPropertyName(n)&&e.isStringOrNumericLiteral(n.expression)?n.expression:n}break;case 261:if(t.name){n=t.name;return e.isComputedPropertyName(n)&&e.isStringOrNumericLiteral(n.expression)?n.expression:n}break;case 263:return t.name}var o=D(t);if(o&&e.isPropertyName(o))return e.isComputedPropertyName(o)&&e.isStringOrNumericLiteral(o.expression)?o.expression:o;e.Debug.fail("Invalid property name for binding element.")},e.getElementsOfBindingOrAssignmentPattern=function(e){switch(e.kind){case 174:case 175:case 177:return e.elements;case 178:return e.properties}},e.convertToArrayAssignmentElement=N,e.convertToObjectAssignmentElement=w,e.convertToAssignmentPattern=R,e.convertToObjectAssignmentPattern=O,e.convertToArrayAssignmentPattern=P,e.convertToAssignmentElementTarget=L}(ts||(ts={})),function(e){function t(t,n,o,r){if(void 0===t||void 0===n)return t;e.aggregateTransformFlags(t);var i,a=n(t);return a===t?t:void 0!==a?(i=e.isArray(a)?(r||s)(a):a,e.Debug.assertNode(i,o),e.aggregateTransformFlags(i),i):void 0}function n(t,n,o,r,i){if(void 0===t||void 0===n)return t;var s,a=t.length;(void 0===r||r<0)&&(r=0),(void 0===i||i>a-r)&&(i=a-r),(r>0||i<a)&&(s=e.createNodeArray([],t.hasTrailingComma&&r+i===a));for(var l=0;l<i;l++){var c=t[l+r];e.aggregateTransformFlags(c);var u=void 0!==c?n(c):void 0;if((void 0!==s||void 0===u||u!==c)&&(void 0===s&&(s=e.createNodeArray(t.slice(0,l),t.hasTrailingComma),e.setTextRange(s,t)),u))if(e.isArray(u))for(var p=0,d=u;p<d.length;p++){var g=d[p];e.Debug.assertNode(g,o),e.aggregateTransformFlags(g),s.push(g)}else e.Debug.assertNode(u,o),e.aggregateTransformFlags(u),s.push(u)}return s||t}function o(t,o,r,i,s){r.startLexicalEnvironment(),t=n(t,o,e.isStatement,i),s&&!e.startsWithUseStrict(t)&&(t=e.setTextRange(e.createNodeArray([e.createStatement(e.createLiteral("use strict"))].concat(t)),t));var a=r.endLexicalEnvironment();return e.setTextRange(e.createNodeArray(e.concatenate(t,a)),t)}function r(t,o,r,i){void 0===i&&(i=n),r.startLexicalEnvironment();var s=i(t,o,e.isParameterDeclaration);return r.suspendLexicalEnvironment(),s}function i(n,o,r){r.resumeLexicalEnvironment();var i=t(n,o,e.isConciseBody),s=r.endLexicalEnvironment();if(e.some(s)){var a=e.convertToFunctionBody(i),l=e.mergeLexicalEnvironment(a.statements,s);return e.updateBlock(a,l)}return i}function s(t){return e.Debug.assert(t.length<=1,"Too many nodes written to output."),e.singleOrUndefined(t)}e.visitNode=t,e.visitNodes=n,e.visitLexicalEnvironment=o,e.visitParameterList=r,e.visitFunctionBody=i,e.visitEachChild=function(s,a,l,c,u){if(void 0===c&&(c=n),void 0!==s){var p=s.kind;if(p>0&&p<=142||169===p)return s;switch(p){case 71:return e.updateIdentifier(s,c(s.typeArguments,a,e.isTypeNode));case 143:return e.updateQualifiedName(s,t(s.left,a,e.isEntityName),t(s.right,a,e.isIdentifier));case 144:return e.updateComputedPropertyName(s,t(s.expression,a,e.isExpression));case 145:return e.updateTypeParameterDeclaration(s,t(s.name,a,e.isIdentifier),t(s.constraint,a,e.isTypeNode),t(s.default,a,e.isTypeNode));case 146:return e.updateParameter(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),t(s.dotDotDotToken,u,e.isToken),t(s.name,a,e.isBindingName),t(s.questionToken,u,e.isToken),t(s.type,a,e.isTypeNode),t(s.initializer,a,e.isExpression));case 147:return e.updateDecorator(s,t(s.expression,a,e.isExpression));case 148:return e.updatePropertySignature(s,c(s.modifiers,a,e.isToken),t(s.name,a,e.isPropertyName),t(s.questionToken,u,e.isToken),t(s.type,a,e.isTypeNode),t(s.initializer,a,e.isExpression));case 149:return e.updateProperty(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),t(s.name,a,e.isPropertyName),t(s.questionToken,u,e.isToken),t(s.type,a,e.isTypeNode),t(s.initializer,a,e.isExpression));case 150:return e.updateMethodSignature(s,c(s.typeParameters,a,e.isTypeParameterDeclaration),c(s.parameters,a,e.isParameterDeclaration),t(s.type,a,e.isTypeNode),t(s.name,a,e.isPropertyName),t(s.questionToken,u,e.isToken));case 151:return e.updateMethod(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),t(s.asteriskToken,u,e.isToken),t(s.name,a,e.isPropertyName),t(s.questionToken,u,e.isToken),c(s.typeParameters,a,e.isTypeParameterDeclaration),r(s.parameters,a,l,c),t(s.type,a,e.isTypeNode),i(s.body,a,l));case 152:return e.updateConstructor(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),r(s.parameters,a,l,c),i(s.body,a,l));case 153:return e.updateGetAccessor(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),t(s.name,a,e.isPropertyName),r(s.parameters,a,l,c),t(s.type,a,e.isTypeNode),i(s.body,a,l));case 154:return e.updateSetAccessor(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),t(s.name,a,e.isPropertyName),r(s.parameters,a,l,c),i(s.body,a,l));case 155:return e.updateCallSignature(s,c(s.typeParameters,a,e.isTypeParameterDeclaration),c(s.parameters,a,e.isParameterDeclaration),t(s.type,a,e.isTypeNode));case 156:return e.updateConstructSignature(s,c(s.typeParameters,a,e.isTypeParameterDeclaration),c(s.parameters,a,e.isParameterDeclaration),t(s.type,a,e.isTypeNode));case 157:return e.updateIndexSignature(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),c(s.parameters,a,e.isParameterDeclaration),t(s.type,a,e.isTypeNode));case 158:return e.updateTypePredicateNode(s,t(s.parameterName,a),t(s.type,a,e.isTypeNode));case 159:return e.updateTypeReferenceNode(s,t(s.typeName,a,e.isEntityName),c(s.typeArguments,a,e.isTypeNode));case 160:return e.updateFunctionTypeNode(s,c(s.typeParameters,a,e.isTypeParameterDeclaration),c(s.parameters,a,e.isParameterDeclaration),t(s.type,a,e.isTypeNode));case 161:return e.updateConstructorTypeNode(s,c(s.typeParameters,a,e.isTypeParameterDeclaration),c(s.parameters,a,e.isParameterDeclaration),t(s.type,a,e.isTypeNode));case 162:return e.updateTypeQueryNode(s,t(s.exprName,a,e.isEntityName));case 163:return e.updateTypeLiteralNode(s,c(s.members,a,e.isTypeElement));case 164:return e.updateArrayTypeNode(s,t(s.elementType,a,e.isTypeNode));case 165:return e.updateTypleTypeNode(s,c(s.elementTypes,a,e.isTypeNode));case 166:return e.updateUnionTypeNode(s,c(s.types,a,e.isTypeNode));case 167:return e.updateIntersectionTypeNode(s,c(s.types,a,e.isTypeNode));case 168:return e.updateParenthesizedType(s,t(s.type,a,e.isTypeNode));case 170:return e.updateTypeOperatorNode(s,t(s.type,a,e.isTypeNode));case 171:return e.updateIndexedAccessTypeNode(s,t(s.objectType,a,e.isTypeNode),t(s.indexType,a,e.isTypeNode));case 172:return e.updateMappedTypeNode(s,t(s.readonlyToken,u,e.isToken),t(s.typeParameter,a,e.isTypeParameterDeclaration),t(s.questionToken,u,e.isToken),t(s.type,a,e.isTypeNode));case 173:return e.updateLiteralTypeNode(s,t(s.literal,a,e.isExpression));case 174:return e.updateObjectBindingPattern(s,c(s.elements,a,e.isBindingElement));case 175:return e.updateArrayBindingPattern(s,c(s.elements,a,e.isArrayBindingElement));case 176:return e.updateBindingElement(s,t(s.dotDotDotToken,u,e.isToken),t(s.propertyName,a,e.isPropertyName),t(s.name,a,e.isBindingName),t(s.initializer,a,e.isExpression));case 177:return e.updateArrayLiteral(s,c(s.elements,a,e.isExpression));case 178:return e.updateObjectLiteral(s,c(s.properties,a,e.isObjectLiteralElementLike));case 179:return e.updatePropertyAccess(s,t(s.expression,a,e.isExpression),t(s.name,a,e.isIdentifier));case 180:return e.updateElementAccess(s,t(s.expression,a,e.isExpression),t(s.argumentExpression,a,e.isExpression));case 181:return e.updateCall(s,t(s.expression,a,e.isExpression),c(s.typeArguments,a,e.isTypeNode),c(s.arguments,a,e.isExpression));case 182:return e.updateNew(s,t(s.expression,a,e.isExpression),c(s.typeArguments,a,e.isTypeNode),c(s.arguments,a,e.isExpression));case 183:return e.updateTaggedTemplate(s,t(s.tag,a,e.isExpression),t(s.template,a,e.isTemplateLiteral));case 184:return e.updateTypeAssertion(s,t(s.type,a,e.isTypeNode),t(s.expression,a,e.isExpression));case 185:return e.updateParen(s,t(s.expression,a,e.isExpression));case 186:return e.updateFunctionExpression(s,c(s.modifiers,a,e.isModifier),t(s.asteriskToken,u,e.isToken),t(s.name,a,e.isIdentifier),c(s.typeParameters,a,e.isTypeParameterDeclaration),r(s.parameters,a,l,c),t(s.type,a,e.isTypeNode),i(s.body,a,l));case 187:return e.updateArrowFunction(s,c(s.modifiers,a,e.isModifier),c(s.typeParameters,a,e.isTypeParameterDeclaration),r(s.parameters,a,l,c),t(s.type,a,e.isTypeNode),t(s.equalsGreaterThanToken,a,e.isToken),i(s.body,a,l));case 188:return e.updateDelete(s,t(s.expression,a,e.isExpression));case 189:return e.updateTypeOf(s,t(s.expression,a,e.isExpression));case 190:return e.updateVoid(s,t(s.expression,a,e.isExpression));case 191:return e.updateAwait(s,t(s.expression,a,e.isExpression));case 192:return e.updatePrefix(s,t(s.operand,a,e.isExpression));case 193:return e.updatePostfix(s,t(s.operand,a,e.isExpression));case 194:return e.updateBinary(s,t(s.left,a,e.isExpression),t(s.right,a,e.isExpression),t(s.operatorToken,a,e.isToken));case 195:return e.updateConditional(s,t(s.condition,a,e.isExpression),t(s.questionToken,a,e.isToken),t(s.whenTrue,a,e.isExpression),t(s.colonToken,a,e.isToken),t(s.whenFalse,a,e.isExpression));case 196:return e.updateTemplateExpression(s,t(s.head,a,e.isTemplateHead),c(s.templateSpans,a,e.isTemplateSpan));case 197:return e.updateYield(s,t(s.asteriskToken,u,e.isToken),t(s.expression,a,e.isExpression));case 198:return e.updateSpread(s,t(s.expression,a,e.isExpression));case 199:return e.updateClassExpression(s,c(s.modifiers,a,e.isModifier),t(s.name,a,e.isIdentifier),c(s.typeParameters,a,e.isTypeParameterDeclaration),c(s.heritageClauses,a,e.isHeritageClause),c(s.members,a,e.isClassElement));case 201:return e.updateExpressionWithTypeArguments(s,c(s.typeArguments,a,e.isTypeNode),t(s.expression,a,e.isExpression));case 202:return e.updateAsExpression(s,t(s.expression,a,e.isExpression),t(s.type,a,e.isTypeNode));case 203:return e.updateNonNullExpression(s,t(s.expression,a,e.isExpression));case 204:return e.updateMetaProperty(s,t(s.name,a,e.isIdentifier));case 205:return e.updateTemplateSpan(s,t(s.expression,a,e.isExpression),t(s.literal,a,e.isTemplateMiddleOrTemplateTail));case 207:return e.updateBlock(s,c(s.statements,a,e.isStatement));case 208:return e.updateVariableStatement(s,c(s.modifiers,a,e.isModifier),t(s.declarationList,a,e.isVariableDeclarationList));case 210:return e.updateStatement(s,t(s.expression,a,e.isExpression));case 211:return e.updateIf(s,t(s.expression,a,e.isExpression),t(s.thenStatement,a,e.isStatement,e.liftToBlock),t(s.elseStatement,a,e.isStatement,e.liftToBlock));case 212:return e.updateDo(s,t(s.statement,a,e.isStatement,e.liftToBlock),t(s.expression,a,e.isExpression));case 213:return e.updateWhile(s,t(s.expression,a,e.isExpression),t(s.statement,a,e.isStatement,e.liftToBlock));case 214:return e.updateFor(s,t(s.initializer,a,e.isForInitializer),t(s.condition,a,e.isExpression),t(s.incrementor,a,e.isExpression),t(s.statement,a,e.isStatement,e.liftToBlock));case 215:return e.updateForIn(s,t(s.initializer,a,e.isForInitializer),t(s.expression,a,e.isExpression),t(s.statement,a,e.isStatement,e.liftToBlock));case 216:return e.updateForOf(s,s.awaitModifier,t(s.initializer,a,e.isForInitializer),t(s.expression,a,e.isExpression),t(s.statement,a,e.isStatement,e.liftToBlock));case 217:return e.updateContinue(s,t(s.label,a,e.isIdentifier));case 218:return e.updateBreak(s,t(s.label,a,e.isIdentifier));case 219:return e.updateReturn(s,t(s.expression,a,e.isExpression));case 220:return e.updateWith(s,t(s.expression,a,e.isExpression),t(s.statement,a,e.isStatement,e.liftToBlock));case 221:return e.updateSwitch(s,t(s.expression,a,e.isExpression),t(s.caseBlock,a,e.isCaseBlock));case 222:return e.updateLabel(s,t(s.label,a,e.isIdentifier),t(s.statement,a,e.isStatement,e.liftToBlock));case 223:return e.updateThrow(s,t(s.expression,a,e.isExpression));case 224:return e.updateTry(s,t(s.tryBlock,a,e.isBlock),t(s.catchClause,a,e.isCatchClause),t(s.finallyBlock,a,e.isBlock));case 226:return e.updateVariableDeclaration(s,t(s.name,a,e.isBindingName),t(s.type,a,e.isTypeNode),t(s.initializer,a,e.isExpression));case 227:return e.updateVariableDeclarationList(s,c(s.declarations,a,e.isVariableDeclaration));case 228:return e.updateFunctionDeclaration(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),t(s.asteriskToken,u,e.isToken),t(s.name,a,e.isIdentifier),c(s.typeParameters,a,e.isTypeParameterDeclaration),r(s.parameters,a,l,c),t(s.type,a,e.isTypeNode),i(s.body,a,l));case 229:return e.updateClassDeclaration(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),t(s.name,a,e.isIdentifier),c(s.typeParameters,a,e.isTypeParameterDeclaration),c(s.heritageClauses,a,e.isHeritageClause),c(s.members,a,e.isClassElement));case 230:return e.updateInterfaceDeclaration(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),t(s.name,a,e.isIdentifier),c(s.typeParameters,a,e.isTypeParameterDeclaration),c(s.heritageClauses,a,e.isHeritageClause),c(s.members,a,e.isTypeElement));case 231:return e.updateTypeAliasDeclaration(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),t(s.name,a,e.isIdentifier),c(s.typeParameters,a,e.isTypeParameterDeclaration),t(s.type,a,e.isTypeNode));case 232:return e.updateEnumDeclaration(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),t(s.name,a,e.isIdentifier),c(s.members,a,e.isEnumMember));case 233:return e.updateModuleDeclaration(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),t(s.name,a,e.isIdentifier),t(s.body,a,e.isModuleBody));case 234:return e.updateModuleBlock(s,c(s.statements,a,e.isStatement));case 235:return e.updateCaseBlock(s,c(s.clauses,a,e.isCaseOrDefaultClause));case 236:return e.updateNamespaceExportDeclaration(s,t(s.name,a,e.isIdentifier));case 237:return e.updateImportEqualsDeclaration(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),t(s.name,a,e.isIdentifier),t(s.moduleReference,a,e.isModuleReference));case 238:return e.updateImportDeclaration(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),t(s.importClause,a,e.isImportClause),t(s.moduleSpecifier,a,e.isExpression));case 239:return e.updateImportClause(s,t(s.name,a,e.isIdentifier),t(s.namedBindings,a,e.isNamedImportBindings));case 240:return e.updateNamespaceImport(s,t(s.name,a,e.isIdentifier));case 241:return e.updateNamedImports(s,c(s.elements,a,e.isImportSpecifier));case 242:return e.updateImportSpecifier(s,t(s.propertyName,a,e.isIdentifier),t(s.name,a,e.isIdentifier));case 243:return e.updateExportAssignment(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),t(s.expression,a,e.isExpression));case 244:return e.updateExportDeclaration(s,c(s.decorators,a,e.isDecorator),c(s.modifiers,a,e.isModifier),t(s.exportClause,a,e.isNamedExports),t(s.moduleSpecifier,a,e.isExpression));case 245:return e.updateNamedExports(s,c(s.elements,a,e.isExportSpecifier));case 246:return e.updateExportSpecifier(s,t(s.propertyName,a,e.isIdentifier),t(s.name,a,e.isIdentifier));case 248:return e.updateExternalModuleReference(s,t(s.expression,a,e.isExpression));case 249:return e.updateJsxElement(s,t(s.openingElement,a,e.isJsxOpeningElement),c(s.children,a,e.isJsxChild),t(s.closingElement,a,e.isJsxClosingElement));case 250:return e.updateJsxSelfClosingElement(s,t(s.tagName,a,e.isJsxTagNameExpression),t(s.attributes,a,e.isJsxAttributes));case 251:return e.updateJsxOpeningElement(s,t(s.tagName,a,e.isJsxTagNameExpression),t(s.attributes,a,e.isJsxAttributes));case 252:return e.updateJsxClosingElement(s,t(s.tagName,a,e.isJsxTagNameExpression));case 253:return e.updateJsxAttribute(s,t(s.name,a,e.isIdentifier),t(s.initializer,a,e.isStringLiteralOrJsxExpression));case 254:return e.updateJsxAttributes(s,c(s.properties,a,e.isJsxAttributeLike));case 255:return e.updateJsxSpreadAttribute(s,t(s.expression,a,e.isExpression));case 256:return e.updateJsxExpression(s,t(s.expression,a,e.isExpression));case 257:return e.updateCaseClause(s,t(s.expression,a,e.isExpression),c(s.statements,a,e.isStatement));case 258:return e.updateDefaultClause(s,c(s.statements,a,e.isStatement));case 259:return e.updateHeritageClause(s,c(s.types,a,e.isExpressionWithTypeArguments));case 260:return e.updateCatchClause(s,t(s.variableDeclaration,a,e.isVariableDeclaration),t(s.block,a,e.isBlock));case 261:return e.updatePropertyAssignment(s,t(s.name,a,e.isPropertyName),t(s.initializer,a,e.isExpression));case 262:return e.updateShorthandPropertyAssignment(s,t(s.name,a,e.isIdentifier),t(s.objectAssignmentInitializer,a,e.isExpression));case 263:return e.updateSpreadAssignment(s,t(s.expression,a,e.isExpression));case 264:return e.updateEnumMember(s,t(s.name,a,e.isPropertyName),t(s.initializer,a,e.isExpression));case 265:return e.updateSourceFileNode(s,o(s.statements,a,l));case 288:return e.updatePartiallyEmittedExpression(s,t(s.expression,a,e.isExpression));case 289:return e.updateCommaList(s,c(s.elements,a,e.isExpression));default:return s}}}}(ts||(ts={})),function(e){function t(e,t,n){return e?t(n,e):n}function n(e,t,n){return e?t(n,e):n}function o(o,r,i,s){if(void 0===o)return r;var a=s?n:e.reduceLeft,l=s||i,c=o.kind;if(c>0&&c<=142)return r;if(c>=158&&c<=173)return r;var u=r;switch(o.kind){case 206:case 209:case 200:case 225:case 287:break;case 143:u=t(o.left,i,u),u=t(o.right,i,u);break;case 144:u=t(o.expression,i,u);break;case 146:u=a(o.decorators,l,u),u=a(o.modifiers,l,u),u=t(o.name,i,u),u=t(o.type,i,u),u=t(o.initializer,i,u);break;case 147:u=t(o.expression,i,u);break;case 148:u=a(o.modifiers,l,u),u=t(o.name,i,u),u=t(o.questionToken,i,u),u=t(o.type,i,u),u=t(o.initializer,i,u);break;case 149:u=a(o.decorators,l,u),u=a(o.modifiers,l,u),u=t(o.name,i,u),u=t(o.type,i,u),u=t(o.initializer,i,u);break;case 151:u=a(o.decorators,l,u),u=a(o.modifiers,l,u),u=t(o.name,i,u),u=a(o.typeParameters,l,u),u=a(o.parameters,l,u),u=t(o.type,i,u),u=t(o.body,i,u);break;case 152:u=a(o.modifiers,l,u),u=a(o.parameters,l,u),u=t(o.body,i,u);break;case 153:u=a(o.decorators,l,u),u=a(o.modifiers,l,u),u=t(o.name,i,u),u=a(o.parameters,l,u),u=t(o.type,i,u),u=t(o.body,i,u);break;case 154:u=a(o.decorators,l,u),u=a(o.modifiers,l,u),u=t(o.name,i,u),u=a(o.parameters,l,u),u=t(o.body,i,u);break;case 174:case 175:u=a(o.elements,l,u);break;case 176:u=t(o.propertyName,i,u),u=t(o.name,i,u),u=t(o.initializer,i,u);break;case 177:u=a(o.elements,l,u);break;case 178:u=a(o.properties,l,u);break;case 179:u=t(o.expression,i,u),u=t(o.name,i,u);break;case 180:u=t(o.expression,i,u),u=t(o.argumentExpression,i,u);break;case 181:case 182:u=t(o.expression,i,u),u=a(o.typeArguments,l,u),u=a(o.arguments,l,u);break;case 183:u=t(o.tag,i,u),u=t(o.template,i,u);break;case 184:u=t(o.type,i,u),u=t(o.expression,i,u);break;case 186:u=a(o.modifiers,l,u),u=t(o.name,i,u),u=a(o.typeParameters,l,u),u=a(o.parameters,l,u),u=t(o.type,i,u),u=t(o.body,i,u);break;case 187:u=a(o.modifiers,l,u),u=a(o.typeParameters,l,u),u=a(o.parameters,l,u),u=t(o.type,i,u),u=t(o.body,i,u);break;case 185:case 188:case 189:case 190:case 191:case 197:case 198:case 203:u=t(o.expression,i,u);break;case 192:case 193:u=t(o.operand,i,u);break;case 194:u=t(o.left,i,u),u=t(o.right,i,u);break;case 195:u=t(o.condition,i,u),u=t(o.whenTrue,i,u),u=t(o.whenFalse,i,u);break;case 196:u=t(o.head,i,u),u=a(o.templateSpans,l,u);break;case 199:u=a(o.modifiers,l,u),u=t(o.name,i,u),u=a(o.typeParameters,l,u),u=a(o.heritageClauses,l,u),u=a(o.members,l,u);break;case 201:u=t(o.expression,i,u),u=a(o.typeArguments,l,u);break;case 202:u=t(o.expression,i,u),u=t(o.type,i,u);break;case 205:u=t(o.expression,i,u),u=t(o.literal,i,u);break;case 207:u=a(o.statements,l,u);break;case 208:u=a(o.modifiers,l,u),u=t(o.declarationList,i,u);break;case 210:u=t(o.expression,i,u);break;case 211:u=t(o.expression,i,u),u=t(o.thenStatement,i,u),u=t(o.elseStatement,i,u);break;case 212:u=t(o.statement,i,u),u=t(o.expression,i,u);break;case 213:case 220:u=t(o.expression,i,u),u=t(o.statement,i,u);break;case 214:u=t(o.initializer,i,u),u=t(o.condition,i,u),u=t(o.incrementor,i,u),u=t(o.statement,i,u);break;case 215:case 216:u=t(o.initializer,i,u),u=t(o.expression,i,u),u=t(o.statement,i,u);break;case 219:case 223:u=t(o.expression,i,u);break;case 221:u=t(o.expression,i,u),u=t(o.caseBlock,i,u);break;case 222:u=t(o.label,i,u),u=t(o.statement,i,u);break;case 224:u=t(o.tryBlock,i,u),u=t(o.catchClause,i,u),u=t(o.finallyBlock,i,u);break;case 226:u=t(o.name,i,u),u=t(o.type,i,u),u=t(o.initializer,i,u);break;case 227:u=a(o.declarations,l,u);break;case 228:u=a(o.decorators,l,u),u=a(o.modifiers,l,u),u=t(o.name,i,u),u=a(o.typeParameters,l,u),u=a(o.parameters,l,u),u=t(o.type,i,u),u=t(o.body,i,u);break;case 229:u=a(o.decorators,l,u),u=a(o.modifiers,l,u),u=t(o.name,i,u),u=a(o.typeParameters,l,u),u=a(o.heritageClauses,l,u),u=a(o.members,l,u);break;case 232:u=a(o.decorators,l,u),u=a(o.modifiers,l,u),u=t(o.name,i,u),u=a(o.members,l,u);break;case 233:u=a(o.decorators,l,u),u=a(o.modifiers,l,u),u=t(o.name,i,u),u=t(o.body,i,u);break;case 234:u=a(o.statements,l,u);break;case 235:u=a(o.clauses,l,u);break;case 237:u=a(o.decorators,l,u),u=a(o.modifiers,l,u),u=t(o.name,i,u),u=t(o.moduleReference,i,u);break;case 238:u=a(o.decorators,l,u),u=a(o.modifiers,l,u),u=t(o.importClause,i,u),u=t(o.moduleSpecifier,i,u);break;case 239:u=t(o.name,i,u),u=t(o.namedBindings,i,u);break;case 240:u=t(o.name,i,u);break;case 241:case 245:u=a(o.elements,l,u);break;case 242:case 246:u=t(o.propertyName,i,u),u=t(o.name,i,u);break;case 243:u=e.reduceLeft(o.decorators,i,u),u=e.reduceLeft(o.modifiers,i,u),u=t(o.expression,i,u);break;case 244:u=e.reduceLeft(o.decorators,i,u),u=e.reduceLeft(o.modifiers,i,u),u=t(o.exportClause,i,u),u=t(o.moduleSpecifier,i,u);break;case 248:u=t(o.expression,i,u);break;case 249:u=t(o.openingElement,i,u),u=e.reduceLeft(o.children,i,u),u=t(o.closingElement,i,u);break;case 250:case 251:u=t(o.tagName,i,u),u=t(o.attributes,i,u);break;case 254:u=a(o.properties,l,u);break;case 252:u=t(o.tagName,i,u);break;case 253:u=t(o.name,i,u),u=t(o.initializer,i,u);break;case 255:case 256:u=t(o.expression,i,u);break;case 257:u=t(o.expression,i,u);case 258:u=a(o.statements,l,u);break;case 259:u=a(o.types,l,u);break;case 260:u=t(o.variableDeclaration,i,u),u=t(o.block,i,u);break;case 261:u=t(o.name,i,u),u=t(o.initializer,i,u);break;case 262:u=t(o.name,i,u),u=t(o.objectAssignmentInitializer,i,u);break;case 263:u=t(o.expression,i,u);break;case 264:u=t(o.name,i,u),u=t(o.initializer,i,u);break;case 265:u=a(o.statements,l,u);break;case 288:u=t(o.expression,i,u);break;case 289:u=a(o.elements,l,u)}return u}function r(t){if(void 0===t)return 0;if(536870912&t.transformFlags)return t.transformFlags&~e.getTransformFlagsSubtreeExclusions(t.kind);var n=function(t){if(e.hasModifier(t,2)||e.isTypeNode(t)&&201!==t.kind)return 0;return o(t,0,i,s)}(t);return e.computeTransformFlagsForNode(t,n)}function i(e,t){return e|r(t)}function s(e,t){return e|function(e){if(void 0===e)return 0;for(var t=0,n=0,o=0,i=e;o<i.length;o++){var s=i[o];t|=r(s),n|=-536870913&s.transformFlags}return e.transformFlags=536870912|n,t}(t)}var a;e.reduceEachChild=o,e.mergeLexicalEnvironment=function(t,n){return e.some(n)?e.isNodeArray(t)?e.setTextRange(e.createNodeArray(e.concatenate(t,n)),t):e.addRange(t,n):t},e.liftToBlock=function(t){return a.assert(e.every(t,e.isStatement),"Cannot lift nodes to a Block."),e.singleOrUndefined(t)||e.createBlock(t)},e.aggregateTransformFlags=function(e){return r(e),e},function(t){var n=!1;t.failBadSyntaxKind=t.shouldAssert(1)?function(n,o){return t.fail((o||"Unexpected node.")+"\r\nNode "+e.formatSyntaxKind(n.kind)+" was unexpected.",t.failBadSyntaxKind)}:e.noop,t.assertEachNode=t.shouldAssert(1)?function(n,o,r){return t.assert(void 0===o||e.every(n,o),r||"Unexpected node.",(function(){return"Node array did not pass test '"+t.getFunctionName(o)+"'."}),t.assertEachNode)}:e.noop,t.assertNode=t.shouldAssert(1)?function(n,o,r){return t.assert(void 0===o||o(n),r||"Unexpected node.",(function(){return"Node "+e.formatSyntaxKind(n.kind)+" did not pass test '"+t.getFunctionName(o)+"'."}),t.assertNode)}:e.noop,t.assertOptionalNode=t.shouldAssert(1)?function(n,o,r){return t.assert(void 0===o||void 0===n||o(n),r||"Unexpected node.",(function(){return"Node "+e.formatSyntaxKind(n.kind)+" did not pass test '"+t.getFunctionName(o)+"'."}),t.assertOptionalNode)}:e.noop,t.assertOptionalToken=t.shouldAssert(1)?function(n,o,r){return t.assert(void 0===o||void 0===n||n.kind===o,r||"Unexpected node.",(function(){return"Node "+e.formatSyntaxKind(n.kind)+" was not a '"+e.formatSyntaxKind(o)+"' token."}),t.assertOptionalToken)}:e.noop,t.assertMissingNode=t.shouldAssert(1)?function(n,o){return t.assert(void 0===n,o||"Unexpected node.",(function(){return"Node "+e.formatSyntaxKind(n.kind)+" was unexpected'."}),t.assertMissingNode)}:e.noop,t.enableDebugInfo=function(){if(!n){Object.defineProperties(e.objectAllocator.getSymbolConstructor().prototype,{__debugFlags:{get:function(){return e.formatSymbolFlags(this.flags)}}}),Object.defineProperties(e.objectAllocator.getTypeConstructor().prototype,{__debugFlags:{get:function(){return e.formatTypeFlags(this.flags)}},__debugObjectFlags:{get:function(){return 32768&this.flags?e.formatObjectFlags(this.objectFlags):""}},__debugTypeToString:{value:function(){return this.checker.typeToString(this)}}});for(var t=0,o=[e.objectAllocator.getNodeConstructor(),e.objectAllocator.getIdentifierConstructor(),e.objectAllocator.getTokenConstructor(),e.objectAllocator.getSourceFileConstructor()];t<o.length;t++){var r=o[t];r.prototype.hasOwnProperty("__debugKind")||Object.defineProperties(r.prototype,{__debugKind:{get:function(){return e.formatSyntaxKind(this.kind)}},__debugModifierFlags:{get:function(){return e.formatModifierFlags(e.getModifierFlagsNoCache(this))}},__debugTransformFlags:{get:function(){return e.formatTransformFlags(this.transformFlags)}},__debugEmitFlags:{get:function(){return e.formatEmitFlags(e.getEmitFlags(this))}},__debugGetText:{value:function(t){if(e.nodeIsSynthesized(this))return"";var n=e.getParseTreeNode(this),o=n&&e.getSourceFileOfNode(n);return o?e.getSourceTextOfNodeFromSourceFile(o,n,t):""}}})}n=!0}}}(a=e.Debug||(e.Debug={}))}(ts||(ts={})),function(e){function t(t){return(t=e.getOriginalNode(t))?e.getNodeId(t):0}function n(t,o,r){if(e.isBindingPattern(t.name))for(var i=0,s=t.name.elements;i<s.length;i++){var a=s[i];e.isOmittedExpression(a)||(r=n(a,o,r))}else if(!e.isGeneratedIdentifier(t.name)){var l=e.idText(t.name);o.get(l)||(o.set(l,!0),r=e.append(r,t.name))}return r}function o(e,t,n){var o=e[t];return o?o.push(n):e[t]=o=[n],o}e.getOriginalNodeId=t,e.collectExternalModuleInfo=function(r,i,s){for(var a,l=[],c=e.createMultiMap(),u=[],p=e.createMap(),d=!1,g=void 0,h=!1,f=0,_=r.statements;f<_.length;f++){var m=_[f];switch(m.kind){case 238:l.push(m);break;case 237:248===m.moduleReference.kind&&l.push(m);break;case 244:if(m.moduleSpecifier)m.exportClause?l.push(m):(l.push(m),h=!0);else for(var y=0,k=m.exportClause.elements;y<k.length;y++){var b=k[y];if(!p.get(e.idText(b.name))){var v=b.propertyName||b.name;c.add(e.idText(v),b),(S=i.getReferencedImportDeclaration(v)||i.getReferencedValueDeclaration(v))&&o(u,t(S),b.name),p.set(e.idText(b.name),!0),a=e.append(a,b.name)}}break;case 243:m.isExportEquals&&!g&&(g=m);break;case 208:if(e.hasModifier(m,1))for(var T=0,E=m.declarationList.declarations;T<E.length;T++){var S;a=n(S=E[T],p,a)}break;case 228:if(e.hasModifier(m,1))if(e.hasModifier(m,512))d||(o(u,t(m),e.getDeclarationName(m)),d=!0);else{v=m.name;p.get(e.idText(v))||(o(u,t(m),v),p.set(e.idText(v),!0),a=e.append(a,v))}break;case 229:if(e.hasModifier(m,1))if(e.hasModifier(m,512))d||(o(u,t(m),e.getDeclarationName(m)),d=!0);else(v=m.name)&&!p.get(e.idText(v))&&(o(u,t(m),v),p.set(e.idText(v),!0),a=e.append(a,v))}}var C=e.getOrCreateExternalHelpersModuleNameIfNeeded(r,s,h),x=C&&e.createImportDeclaration(void 0,void 0,e.createImportClause(void 0,e.createNamespaceImport(C)),e.createLiteral(e.externalHelpersModuleNameText));return x&&l.unshift(x),{externalImports:l,exportSpecifiers:c,exportEquals:g,hasExportStarsToExportValues:h,exportedBindings:u,exportedNames:a,externalHelpersImportDeclaration:x}},e.isSimpleCopiableExpression=function(t){return 9===t.kind||8===t.kind||13===t.kind||e.isKeyword(t.kind)||e.isIdentifier(t)}}(ts||(ts={})),function(e){function t(r,i,s,a,l){if(!l){var c=e.visitNode(e.getInitializerOfBindingOrAssignmentElement(i),r.visitor,e.isExpression);c?s=s?function(t,n,r,i){return n=o(t,n,!0,i),e.createConditional(e.createTypeCheck(n,"undefined"),r,n)}(r,s,c,a):c:s||(s=e.createVoidZero())}var u=e.getTargetOfBindingOrAssignmentElement(i);e.isObjectBindingOrAssignmentPattern(u)?function(r,i,s,a,l){var c,u,d=e.getElementsOfBindingOrAssignmentPattern(s),g=d.length;if(1!==g){a=o(r,a,!e.isDeclarationBindingElement(i)||0!==g,l)}for(var h=0;h<g;h++){var f=d[h];if(e.getRestIndicatorOfBindingOrAssignmentElement(f)){if(h===g-1){c&&(r.emitBindingOrAssignment(r.createObjectBindingOrAssignmentPattern(c),a,l,s),c=void 0),t(r,f,m=p(r.context,a,d,u,s),f)}}else{var _=e.getPropertyNameOfBindingOrAssignmentElement(f);if(!(r.level>=1)||1572864&f.transformFlags||1572864&e.getTargetOfBindingOrAssignmentElement(f).transformFlags||e.isComputedPropertyName(_)){c&&(r.emitBindingOrAssignment(r.createObjectBindingOrAssignmentPattern(c),a,l,s),c=void 0);var m=n(r,a,_);e.isComputedPropertyName(_)&&(u=e.append(u,m.argumentExpression)),t(r,f,m,f)}else c=e.append(c,f)}}c&&r.emitBindingOrAssignment(r.createObjectBindingOrAssignmentPattern(c),a,l,s)}(r,i,u,s,a):e.isArrayBindingOrAssignmentPattern(u)?function(n,r,i,s,a){var l,c,u=e.getElementsOfBindingOrAssignmentPattern(i),p=u.length;if(n.level<1&&n.downlevelIteration)s=o(n,e.createReadHelper(n.context,s,p>0&&e.getRestIndicatorOfBindingOrAssignmentElement(u[p-1])?void 0:p,a),!1,a);else if(1!==p&&(n.level<1||0===p)||e.every(u,e.isOmittedExpression)){s=o(n,s,!e.isDeclarationBindingElement(r)||0!==p,a)}for(var d=0;d<p;d++){var g=u[d];if(n.level>=1)if(1048576&g.transformFlags){var h=e.createTempVariable(void 0);n.hoistTempVariables&&n.context.hoistVariableDeclaration(h),c=e.append(c,[h,g]),l=e.append(l,n.createArrayBindingOrAssignmentElement(h))}else l=e.append(l,g);else{if(e.isOmittedExpression(g))continue;if(e.getRestIndicatorOfBindingOrAssignmentElement(g)){if(d===p-1){t(n,g,e.createArraySlice(s,d),g)}}else t(n,g,e.createElementAccess(s,d),g)}}l&&n.emitBindingOrAssignment(n.createArrayBindingOrAssignmentPattern(l),s,a,i);if(c)for(var f=0,_=c;f<_.length;f++){var m=_[f],y=m[0];t(n,g=m[1],y,g)}}(r,i,u,s,a):r.emitBindingOrAssignment(u,s,a,i)}function n(t,n,r){if(e.isComputedPropertyName(r)){var i=o(t,e.visitNode(r.expression,t.visitor),!1,r);return e.createElementAccess(n,i)}if(e.isStringOrNumericLiteral(r))return(i=e.getSynthesizedClone(r)).text=i.text,e.createElementAccess(n,i);var s=e.createIdentifier(e.idText(r));return e.createPropertyAccess(n,s)}function o(t,n,o,r){if(e.isIdentifier(n)&&o)return n;var i=e.createTempVariable(void 0);return t.hoistTempVariables?(t.context.hoistVariableDeclaration(i),t.emitExpression(e.setTextRange(e.createAssignment(i,n),r))):t.emitBindingOrAssignment(i,n,r,void 0),i}function r(t){return e.Debug.assertEachNode(t,e.isArrayBindingElement),e.createArrayBindingPattern(t)}function i(t){return e.createArrayLiteral(e.map(t,e.convertToArrayAssignmentElement))}function s(t){return e.Debug.assertEachNode(t,e.isBindingElement),e.createObjectBindingPattern(t)}function a(t){return e.createObjectLiteral(e.map(t,e.convertToObjectAssignmentElement))}function l(t){return e.createBindingElement(void 0,void 0,t)}function c(e){return e}!function(e){e[e.All=0]="All",e[e.ObjectRest=1]="ObjectRest"}(e.FlattenLevel||(e.FlattenLevel={})),e.flattenDestructuringAssignment=function(n,r,s,l,u,p){var d,g,h=n;if(e.isDestructuringAssignment(n))for(d=n.right;e.isEmptyArrayLiteral(n.left)||e.isEmptyObjectLiteral(n.left);){if(!e.isDestructuringAssignment(d))return d;h=n=d,d=n.right}var f={context:s,level:l,downlevelIteration:s.getCompilerOptions().downlevelIteration,hoistTempVariables:!0,emitExpression:_,emitBindingOrAssignment:function(t,n,o,i){e.Debug.assertNode(t,p?e.isIdentifier:e.isExpression);var s=p?p(t,n,o):e.setTextRange(e.createAssignment(e.visitNode(t,r,e.isExpression),n),o);s.original=i,_(s)},createArrayBindingOrAssignmentPattern:i,createObjectBindingOrAssignmentPattern:a,createArrayBindingOrAssignmentElement:c,visitor:r};if(d&&(d=e.visitNode(d,r,e.isExpression),u?d=o(f,d,!0,h):e.nodeIsSynthesized(n)&&(h=d)),t(f,n,d,h,e.isDestructuringAssignment(n)),d&&u){if(!e.some(g))return d;g.push(d)}return e.aggregateTransformFlags(e.inlineExpressions(g))||e.createOmittedExpression();function _(t){e.setEmitFlags(t,64),e.aggregateTransformFlags(t),g=e.append(g,t)}},e.flattenDestructuringBinding=function(n,o,i,a,c,u,p){var d,g=[],h=[];if(t({context:i,level:a,downlevelIteration:i.getCompilerOptions().downlevelIteration,hoistTempVariables:u,emitExpression:function(t){d=e.append(d,t)},emitBindingOrAssignment:x,createArrayBindingOrAssignmentPattern:r,createObjectBindingOrAssignmentPattern:s,createArrayBindingOrAssignmentElement:l,visitor:o},n,c,n,p),d){var f=e.createTempVariable(void 0);if(u){var _=e.inlineExpressions(d);d=void 0,x(f,_,void 0,void 0)}else{i.hoistVariableDeclaration(f);var m=e.lastOrUndefined(g);m.pendingExpressions=e.append(m.pendingExpressions,e.createAssignment(f,m.value)),e.addRange(m.pendingExpressions,d),m.value=f}}for(var y=0,k=g;y<k.length;y++){var b=k[y],v=b.pendingExpressions,T=b.name,E=(_=b.value,b.location),S=b.original,C=e.createVariableDeclaration(T,void 0,v?e.inlineExpressions(e.append(v,_)):_);C.original=S,e.setTextRange(C,E),e.isIdentifier(T)&&e.setEmitFlags(C,64),e.aggregateTransformFlags(C),h.push(C)}return h;function x(t,n,o,r){e.Debug.assertNode(t,e.isBindingName),d&&(n=e.inlineExpressions(e.append(d,n)),d=void 0),g.push({pendingExpressions:d,name:t,value:n,location:o,original:r})}};var u={name:"typescript:rest",scoped:!1,text:'\n            var __rest = (this && this.__rest) || function (s, e) {\n                var t = {};\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n                    t[p] = s[p];\n                if (s != null && typeof Object.getOwnPropertySymbols === "function")\n                    for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n                        t[p[i]] = s[p[i]];\n                return t;\n            };'};function p(t,n,o,r,i){t.requestEmitHelper(u);for(var s=[],a=0,l=0;l<o.length-1;l++){var c=e.getPropertyNameOfBindingOrAssignmentElement(o[l]);if(c)if(e.isComputedPropertyName(c)){var p=r[a];a++,s.push(e.createConditional(e.createTypeCheck(p,"symbol"),p,e.createAdd(p,e.createLiteral(""))))}else s.push(e.createLiteral(c))}return e.createCall(e.getHelperName("__rest"),void 0,[n,e.setTextRange(e.createArrayLiteral(s),i)])}}(ts||(ts={})),function(e){var t,n;function o(t,n,o,i,s,a){var l=[];return l.push(e.createArrayLiteral(n,!0)),l.push(o),i&&(l.push(i),s&&l.push(s)),t.requestEmitHelper(r),e.setTextRange(e.createCall(e.getHelperName("__decorate"),void 0,l),a)}!function(e){e[e.ClassAliases=1]="ClassAliases",e[e.NamespaceExports=2]="NamespaceExports",e[e.NonQualifiedEnumMembers=8]="NonQualifiedEnumMembers"}(t||(t={})),function(e){e[e.None=0]="None",e[e.HasStaticInitializedProperties=1]="HasStaticInitializedProperties",e[e.HasConstructorDecorators=2]="HasConstructorDecorators",e[e.HasMemberDecorators=4]="HasMemberDecorators",e[e.IsExportOfNamespace=8]="IsExportOfNamespace",e[e.IsNamedExternalExport=16]="IsNamedExternalExport",e[e.IsDefaultExternalExport=32]="IsDefaultExternalExport",e[e.IsDerivedClass=64]="IsDerivedClass",e[e.UseImmediatelyInvokedFunctionExpression=128]="UseImmediatelyInvokedFunctionExpression",e[e.HasAnyDecorators=6]="HasAnyDecorators",e[e.NeedsName=5]="NeedsName",e[e.MayNeedImmediatelyInvokedFunctionExpression=7]="MayNeedImmediatelyInvokedFunctionExpression",e[e.IsExported=56]="IsExported"}(n||(n={})),e.transformTypeScript=function(t){var n,r,s,l,c,u,p,d,g=t.startLexicalEnvironment,h=t.resumeLexicalEnvironment,f=t.endLexicalEnvironment,_=t.hoistVariableDeclaration,m=t.getEmitResolver(),y=t.getCompilerOptions(),k=void 0===y.strictNullChecks?y.strict:y.strictNullChecks,b=e.getEmitScriptTarget(y),v=e.getEmitModuleKind(y),T=t.onEmitNode,E=t.onSubstituteNode;return t.onEmitNode=function(t,o,r){var i=d,s=n;e.isSourceFile(o)&&(n=o);2&u&&function(t){return 233===e.getOriginalNode(t).kind}(o)&&(d|=2);8&u&&function(t){return 232===e.getOriginalNode(t).kind}(o)&&(d|=8);T(t,o,r),d=i,n=s},t.onSubstituteNode=function(t,n){if(n=E(t,n),1===t)return function(t){switch(t.kind){case 71:return function(t){return function(t){if(1&u&&16777216&m.getNodeCheckFlags(t)){var n=m.getReferencedValueDeclaration(t);if(n){var o=p[n.id];if(o){var r=e.getSynthesizedClone(o);return e.setSourceMapRange(r,t),e.setCommentRange(r,t),r}}}return}(t)||Ue(t)||t}(t);case 179:case 180:return function(e){return He(e)}(t)}return t}(n);if(e.isShorthandPropertyAssignment(n))return function(t){if(2&u){var n=t.name,o=Ue(n);if(o){if(t.objectAssignmentInitializer){var r=e.createAssignment(o,t.objectAssignmentInitializer);return e.setTextRange(e.createPropertyAssignment(n,r),t)}return e.setTextRange(e.createPropertyAssignment(n,o),t)}}return t}(n);return n},t.enableSubstitution(179),t.enableSubstitution(180),function(o){if(o.isDeclarationFile)return o;n=o;var r=S(o,P);return e.addEmitHelpers(r,t.readEmitHelpers()),n=void 0,r};function S(t,n){var o=l,r=c;!function(t){switch(t.kind){case 265:case 235:case 234:case 207:l=t,c=void 0;break;case 229:case 228:if(e.hasModifier(t,2))break;t.name?ye(t):e.Debug.assert(229===t.kind||e.hasModifier(t,512))}}(t);var i=n(t);return l!==o&&(c=r),l=o,i}function C(e){return S(e,x)}function x(n){return 1&n.transformFlags?O(n):2&n.transformFlags?e.visitEachChild(n,C,t):n}function B(e){return S(e,A)}function A(n){switch(n.kind){case 238:case 237:case 243:case 244:return function(n){if(e.getParseTreeNode(n)!==n)return n;switch(n.kind){case 238:return function(t){if(!t.importClause)return t;var n=e.visitNode(t.importClause,Ee,e.isImportClause);return n?e.updateImportDeclaration(t,void 0,void 0,n,t.moduleSpecifier):void 0}(n);case 237:return Ae(n);case 243:return function(n){return m.isValueAliasDeclaration(n)?e.visitEachChild(n,C,t):void 0}(n);case 244:return function(t){if(!t.exportClause)return y.isolatedModules||m.moduleExportsSomeValue(t.moduleSpecifier)?t:void 0;if(!m.isValueAliasDeclaration(t))return;var n=e.visitNode(t.exportClause,xe,e.isNamedExports);return n?e.updateExportDeclaration(t,void 0,void 0,n,t.moduleSpecifier):void 0}(n);default:e.Debug.fail("Unhandled ellided statement")}}(n);default:return x(n)}}function I(e){return S(e,D)}function D(n){if(244!==n.kind&&238!==n.kind&&239!==n.kind&&(237!==n.kind||248!==n.moduleReference.kind))return 1&n.transformFlags||e.hasModifier(n,1)?O(n):2&n.transformFlags?e.visitEachChild(n,C,t):n}function N(e){return S(e,w)}function w(t){switch(t.kind){case 152:return;case 149:case 157:case 153:case 154:case 151:return x(t);case 206:return t;default:return void e.Debug.failBadSyntaxKind(t)}}function R(t){if(!(2270&e.modifierToFlag(t.kind)||r&&84===t.kind))return t}function O(i){if(e.hasModifier(i,2)&&e.isStatement(i))return e.createNotEmittedStatement(i);switch(i.kind){case 84:case 79:return r?void 0:i;case 114:case 112:case 113:case 117:case 76:case 124:case 131:case 164:case 165:case 163:case 158:case 145:case 119:case 122:case 136:case 133:case 130:case 105:case 137:case 161:case 160:case 162:case 159:case 166:case 167:case 168:case 169:case 170:case 171:case 172:case 173:case 157:case 147:case 231:case 149:case 236:return;case 152:return function(n){if(!ge(n))return;return e.updateConstructor(n,e.visitNodes(n.decorators,C,e.isDecorator),e.visitNodes(n.modifiers,C,e.isModifier),e.visitParameterList(n.parameters,C,t),e.visitFunctionBody(n.body,C,t))}(i);case 230:return e.createNotEmittedStatement(i);case 229:return function(r){var i=H(r,!0),s=function(t,n){var o=0;e.some(n)&&(o|=1);var r=e.getClassExtendsHeritageClauseElement(t);r&&95!==e.skipOuterExpressions(r.expression).kind&&(o|=64);(function(t){if(t.decorators&&t.decorators.length>0)return!0;var n=e.getFirstConstructorWithBody(t);if(n)return e.forEach(n.parameters,L);return!1})(t)&&(o|=2);e.childIsDecorated(t)&&(o|=4);Ie(t)?o|=8:!function(t){return De(t)&&e.hasModifier(t,512)}(t)?Ne(t)&&(o|=16):o|=32;b<=1&&7&o&&(o|=128);return o}(r,i);128&s&&t.startLexicalEnvironment();var a=r.name||(5&s?e.getGeneratedNameForNode(r):void 0),l=2&s?function(t,n,o){var r=e.moveRangePastDecorators(t),i=function(t){if(8388608&m.getNodeCheckFlags(t)){Fe();var n=e.createUniqueName(t.name&&!e.isGeneratedIdentifier(t.name)?e.idText(t.name):"default");return p[e.getOriginalNodeId(t)]=n,_(n),n}}(t),s=e.getLocalName(t,!1,!0),a=e.visitNodes(t.heritageClauses,C,e.isHeritageClause),l=M(t,0!=(64&o)),c=e.createClassExpression(void 0,n,void 0,a,l);e.setOriginalNode(c,t),e.setTextRange(c,r);var u=e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(s,void 0,i?e.createAssignment(i,c):c)],1));return e.setOriginalNode(u,t),e.setTextRange(u,r),e.setCommentRange(u,t),u}(r,a,s):function(t,n,o){var r=128&o?void 0:e.visitNodes(t.modifiers,R,e.isModifier),i=e.createClassDeclaration(void 0,r,n,void 0,e.visitNodes(t.heritageClauses,C,e.isHeritageClause),M(t,0!=(64&o))),s=e.getEmitFlags(t);1&o&&(s|=32);return e.setTextRange(i,t),e.setOriginalNode(i,t),e.setEmitFlags(i,s),i}(r,a,s),c=[l];1&s&&K(c,i,128&s?e.getInternalName(r):e.getLocalName(r));if(Z(c,r,!1),Z(c,r,!0),function(n,r){var i=function(n){var r=function(t){var n=t.decorators,o=Y(e.getFirstConstructorWithBody(t));if(!n&&!o)return;return{decorators:n,parameters:o}}(n),i=q(n,n,r);if(!i)return;var s=p&&p[e.getOriginalNodeId(n)],a=e.getLocalName(n,!1,!0),l=o(t,i,a),c=e.createAssignment(a,s?e.createAssignment(s,l):l);return e.setEmitFlags(c,1536),e.setSourceMapRange(c,e.moveRangePastDecorators(n)),c}(r);i&&n.push(e.setOriginalNode(e.createStatement(i),r))}(c,r),128&s){var u=e.createTokenRange(e.skipTrivia(n.text,r.members.end),18),d=e.getInternalName(r),g=e.createPartiallyEmittedExpression(d);g.end=u.end,e.setEmitFlags(g,1536);var h=e.createReturn(g);h.pos=u.pos,e.setEmitFlags(h,1920),c.push(h),e.addRange(c,t.endLexicalEnvironment());var f=e.createImmediatelyInvokedArrowFunction(c);e.setEmitFlags(f,33554432);var y=e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(e.getLocalName(r,!1,!1),void 0,f)]));e.setOriginalNode(y,r),e.setCommentRange(y,r),e.setSourceMapRange(y,e.moveRangePastDecorators(r)),e.startOnNewLine(y),c=[y]}8&s?Re(c,r):(128&s||2&s)&&(32&s?c.push(e.createExportDefault(e.getLocalName(r,!1,!0))):16&s&&c.push(e.createExternalModuleExport(e.getLocalName(r,!1,!0))));c.length>1&&(c.push(e.createEndOfDeclarationMarker(r)),e.setEmitFlags(l,4194304|e.getEmitFlags(l)));return e.singleOrMany(c)}(i);case 199:return function(t){var n=H(t,!0),o=e.visitNodes(t.heritageClauses,C,e.isHeritageClause),r=M(t,e.some(o,(function(e){return 85===e.token}))),i=e.createClassExpression(void 0,t.name,void 0,o,r);if(e.setOriginalNode(i,t),e.setTextRange(i,t),n.length>0){var s=[],a=e.createTempVariable(_);return 8388608&m.getNodeCheckFlags(t)&&(Fe(),p[e.getOriginalNodeId(t)]=e.getSynthesizedClone(a)),e.setEmitFlags(i,65536|e.getEmitFlags(i)),s.push(e.startOnNewLine(e.createAssignment(a,i))),e.addRange(s,function(t,n){for(var o=[],r=0,i=t;r<i.length;r++){var s=i[r],a=j(s,n);a.startsOnNewLine=!0,e.setSourceMapRange(a,e.moveRangePastModifiers(s)),e.setCommentRange(a,s),o.push(a)}return o}(n,a)),s.push(e.startOnNewLine(a)),e.inlineExpressions(s)}return i}(i);case 259:return function(t){if(85===t.token){var n=e.visitNodes(t.types,C,e.isExpressionWithTypeArguments,0,1);return e.setTextRange(e.createHeritageClause(85,n),t)}return}(i);case 201:return function(t){return e.updateExpressionWithTypeArguments(t,void 0,e.visitNode(t.expression,C,e.isLeftHandSideExpression))}(i);case 151:return function(n){if(!ge(n))return;var o=e.updateMethod(n,void 0,e.visitNodes(n.modifiers,R,e.isModifier),n.asteriskToken,de(n),void 0,void 0,e.visitParameterList(n.parameters,C,t),void 0,e.visitFunctionBody(n.body,C,t));o!==n&&(e.setCommentRange(o,n),e.setSourceMapRange(o,e.moveRangePastDecorators(n)));return o}(i);case 153:return function(n){if(!he(n))return;var o=e.updateGetAccessor(n,void 0,e.visitNodes(n.modifiers,R,e.isModifier),de(n),e.visitParameterList(n.parameters,C,t),void 0,e.visitFunctionBody(n.body,C,t)||e.createBlock([]));o!==n&&(e.setCommentRange(o,n),e.setSourceMapRange(o,e.moveRangePastDecorators(n)));return o}(i);case 154:return function(n){if(!he(n))return;var o=e.updateSetAccessor(n,void 0,e.visitNodes(n.modifiers,R,e.isModifier),de(n),e.visitParameterList(n.parameters,C,t),e.visitFunctionBody(n.body,C,t)||e.createBlock([]));o!==n&&(e.setCommentRange(o,n),e.setSourceMapRange(o,e.moveRangePastDecorators(n)));return o}(i);case 228:return function(n){if(!ge(n))return e.createNotEmittedStatement(n);var o=e.updateFunctionDeclaration(n,void 0,e.visitNodes(n.modifiers,R,e.isModifier),n.asteriskToken,n.name,void 0,e.visitParameterList(n.parameters,C,t),void 0,e.visitFunctionBody(n.body,C,t)||e.createBlock([]));if(Ie(n)){var r=[o];return Re(r,n),r}return o}(i);case 186:return function(n){if(!ge(n))return e.createOmittedExpression();return e.updateFunctionExpression(n,e.visitNodes(n.modifiers,R,e.isModifier),n.asteriskToken,n.name,void 0,e.visitParameterList(n.parameters,C,t),void 0,e.visitFunctionBody(n.body,C,t)||e.createBlock([]))}(i);case 187:return function(n){return e.updateArrowFunction(n,e.visitNodes(n.modifiers,R,e.isModifier),void 0,e.visitParameterList(n.parameters,C,t),void 0,n.equalsGreaterThanToken,e.visitFunctionBody(n.body,C,t))}(i);case 146:return function(t){if(e.parameterIsThisKeyword(t))return;var n=e.createParameter(void 0,void 0,t.dotDotDotToken,e.visitNode(t.name,C,e.isBindingName),void 0,void 0,e.visitNode(t.initializer,C,e.isExpression));return e.setOriginalNode(n,t),e.setTextRange(n,e.moveRangePastModifiers(t)),e.setCommentRange(n,t),e.setSourceMapRange(n,e.moveRangePastModifiers(t)),e.setEmitFlags(n.name,32),n}(i);case 185:return function(n){var o=e.skipOuterExpressions(n.expression,-3);if(e.isAssertionExpression(o)){var r=e.visitNode(n.expression,C,e.isExpression);return e.createPartiallyEmittedExpression(r,n)}return e.visitEachChild(n,C,t)}(i);case 184:case 202:return function(t){var n=e.visitNode(t.expression,C,e.isExpression);return e.createPartiallyEmittedExpression(n,t)}(i);case 181:return function(t){return e.updateCall(t,e.visitNode(t.expression,C,e.isExpression),void 0,e.visitNodes(t.arguments,C,e.isExpression))}(i);case 182:return function(t){return e.updateNew(t,e.visitNode(t.expression,C,e.isExpression),void 0,e.visitNodes(t.arguments,C,e.isExpression))}(i);case 203:return function(t){var n=e.visitNode(t.expression,C,e.isLeftHandSideExpression);return e.createPartiallyEmittedExpression(n,t)}(i);case 232:return function(t){if(!function(t){return!e.isConst(t)||y.preserveConstEnums||y.isolatedModules}(t))return;var o=[],r=2;be(o,t)&&(v===e.ModuleKind.System&&l===n||(r|=512));var i=Le(t),a=Me(t),c=e.hasModifier(t,1)?e.getExternalModuleOrNamespaceExportName(s,t,!1,!0):e.getLocalName(t,!1,!0),u=e.createLogicalOr(c,e.createAssignment(c,e.createObjectLiteral()));if(me(t)){var p=e.getLocalName(t,!1,!0);u=e.createAssignment(p,u)}var d=e.createStatement(e.createCall(e.createFunctionExpression(void 0,void 0,void 0,void 0,[e.createParameter(void 0,void 0,void 0,i)],void 0,function(t,n){var o=s;s=n;var r=[];return g(),e.addRange(r,e.map(t.members,_e)),e.addRange(r,f()),s=o,e.createBlock(e.setTextRange(e.createNodeArray(r),t.members),!0)}(t,a)),void 0,[u]));return e.setOriginalNode(d,t),e.setTextRange(d,t),e.setEmitFlags(d,r),o.push(d),o.push(e.createEndOfDeclarationMarker(t)),o}(i);case 208:return function(n){if(Ie(n)){var o=e.getInitializedVariables(n.declarationList);if(0===o.length)return;return e.setTextRange(e.createStatement(e.inlineExpressions(e.map(o,fe))),n)}return e.visitEachChild(n,C,t)}(i);case 226:return function(t){return e.updateVariableDeclaration(t,e.visitNode(t.name,C,e.isBindingName),void 0,e.visitNode(t.initializer,C,e.isExpression))}(i);case 233:return ve(i);case 237:return Ae(i);default:return e.Debug.failBadSyntaxKind(i),e.visitEachChild(i,C,t)}}function P(n){var o=(void 0===y.alwaysStrict?y.strict:y.alwaysStrict)&&!(e.isExternalModule(n)&&v>=e.ModuleKind.ES2015);return e.updateSourceFileNode(n,e.visitLexicalEnvironment(n.statements,B,t,0,o))}function L(e){return void 0!==e.decorators&&e.decorators.length>0}function M(n,o){var r=[],i=function(n,o){var r=e.forEach(n.members,G),i=262144&n.transformFlags,s=e.getFirstConstructorWithBody(n);if(!r&&!i)return e.visitEachChild(s,C,t);var a=function(n){return e.visitParameterList(n&&n.parameters,C,t)||[]}(s),l=function(t,n,o){var r=[],i=0;if(h(),n){i=function(t,n){if(t.body){var o=t.body.statements,r=e.addPrologue(n,o,!1,C);if(r===o.length)return r;var i=o[r];return 210===i.kind&&e.isSuperCall(i.expression)?(n.push(e.visitNode(i,C,e.isStatement)),r+1):r}return 0}(n,r);var s=function(t){return e.filter(t.parameters,F)}(n);e.addRange(r,e.map(s,U))}else o&&r.push(e.createStatement(e.createCall(e.createSuper(),void 0,[e.createSpread(e.createIdentifier("arguments"))])));var a=H(t,!1);K(r,a,e.createThis()),n&&e.addRange(r,e.visitNodes(n.body.statements,C,e.isStatement,i));return r=e.mergeLexicalEnvironment(r,f()),e.setTextRange(e.createBlock(e.setTextRange(e.createNodeArray(r),n?n.body.statements:t.members),!0),n?n.body:void 0)}(n,s,o);return e.startOnNewLine(e.setOriginalNode(e.setTextRange(e.createConstructor(void 0,void 0,a,l),s||n),s))}(n,o);return i&&r.push(i),e.addRange(r,e.visitNodes(n.members,N,e.isClassElement)),e.setTextRange(e.createNodeArray(r),n.members)}function F(t){return e.hasModifier(t,92)&&e.isIdentifier(t.name)}function U(t){e.Debug.assert(e.isIdentifier(t.name));var n=t.name,o=e.getMutableClone(n);e.setEmitFlags(o,1584);var r=e.getMutableClone(n);return e.setEmitFlags(r,1536),e.startOnNewLine(e.setTextRange(e.createStatement(e.createAssignment(e.setTextRange(e.createPropertyAccess(e.createThis(),o),t.name),r)),e.moveRangePos(t,-1)))}function H(t,n){return e.filter(t.members,n?V:G)}function V(e){return W(e,!0)}function G(e){return W(e,!1)}function W(t,n){return 149===t.kind&&n===e.hasModifier(t,32)&&void 0!==t.initializer}function K(t,n,o){for(var r=0,i=n;r<i.length;r++){var s=i[r],a=e.createStatement(j(s,o));e.setSourceMapRange(a,e.moveRangePastModifiers(s)),e.setCommentRange(a,s),t.push(a)}}function j(t,n){var o=de(t),r=e.visitNode(t.initializer,C,e.isExpression),i=e.createMemberAccessForPropertyName(n,o,o);return e.createAssignment(i,r)}function z(e){return X(e,!0)}function $(e){return X(e,!1)}function X(t,n){return e.nodeOrChildIsDecorated(t)&&n===e.hasModifier(t,32)}function Y(e){var t;if(e)for(var n=e.parameters,o=0;o<n.length;o++){var r=n[o];(t||r.decorators)&&(t||(t=new Array(n.length)),t[o]=r.decorators)}return t}function J(t,n){switch(n.kind){case 153:case 154:return function(t,n){if(!n.body)return;var o=e.getAllAccessorDeclarations(t.members,n),r=o.firstAccessor,i=o.secondAccessor,s=o.setAccessor,a=r.decorators?r:i&&i.decorators?i:void 0;if(!a||n!==a)return;var l=a.decorators,c=Y(s);if(!l&&!c)return;return{decorators:l,parameters:c}}(t,n);case 151:return function(e){if(!e.body)return;var t=e.decorators,n=Y(e);if(!t&&!n)return;return{decorators:t,parameters:n}}(n);case 149:return function(e){var t=e.decorators;if(!t)return;return{decorators:t}}(n);default:return}}function q(n,o,r){if(r){var s=[];return e.addRange(s,e.map(r.decorators,ee)),e.addRange(s,e.flatMap(r.parameters,te)),function(e,n,o){(function(e,n,o){y.emitDecoratorMetadata&&(ne(e)&&o.push(i(t,"design:type",ie(e))),re(e)&&o.push(i(t,"design:paramtypes",se(e,n))),oe(e)&&o.push(i(t,"design:returntype",ae(e))))})(e,n,o)}(n,o,s),s}}function Z(t,n,o){e.addRange(t,e.map(function(t,n){for(var o,r=function(t,n){return e.filter(t.members,n?z:$)}(t,n),i=0,s=r;i<s.length;i++){var a=Q(t,s[i]);a&&(o?o.push(a):o=[a])}return o}(n,o),we))}function Q(n,r){var i=q(r,n,J(n,r));if(i){var s=function(t,n){return e.hasModifier(n,32)?e.getDeclarationName(t):function(t){return e.createPropertyAccess(e.getDeclarationName(t),"prototype")}(t)}(n,r),a=pe(r,!0),l=b>0?149===r.kind?e.createVoidZero():e.createNull():void 0,c=o(t,i,s,a,l,e.moveRangePastDecorators(r));return e.setEmitFlags(c,1536),c}}function ee(t){return e.visitNode(t.expression,C,e.isExpression)}function te(n,o){var r;if(n){r=[];for(var i=0,s=n;i<s.length;i++){var l=s[i],c=a(t,ee(l),o,l.expression);e.setEmitFlags(c,1536),r.push(c)}}return r}function ne(e){var t=e.kind;return 151===t||153===t||154===t||149===t}function oe(e){return 151===e.kind}function re(t){switch(t.kind){case 229:case 199:return void 0!==e.getFirstConstructorWithBody(t);case 151:case 153:case 154:return!0}return!1}function ie(t){switch(t.kind){case 149:case 146:case 153:return le(t.type);case 154:return le(e.getSetAccessorTypeAnnotationNode(t));case 229:case 199:case 151:return e.createIdentifier("Function");default:return e.createVoidZero()}}function se(t,n){var o=e.isClassLike(t)?e.getFirstConstructorWithBody(t):e.isFunctionLike(t)&&e.nodeIsPresent(t.body)?t:void 0,r=[];if(o)for(var i=function(t,n){if(n&&153===t.kind){var o=e.getAllAccessorDeclarations(n.members,t).setAccessor;if(o)return o.parameters}return t.parameters}(o,n),s=i.length,a=0;a<s;a++){var l=i[a];0===a&&e.isIdentifier(l.name)&&"this"===l.name.escapedText||(l.dotDotDotToken?r.push(le(e.getRestParameterElementType(l.type))):r.push(ie(l)))}return e.createArrayLiteral(r)}function ae(t){return e.isFunctionLike(t)&&t.type?le(t.type):e.isAsyncFunction(t)?e.createIdentifier("Promise"):e.createVoidZero()}function le(t){if(void 0===t)return e.createIdentifier("Object");switch(t.kind){case 105:case 139:case 95:case 130:return e.createVoidZero();case 168:return le(t.type);case 160:case 161:return e.createIdentifier("Function");case 164:case 165:return e.createIdentifier("Array");case 158:case 122:return e.createIdentifier("Boolean");case 136:return e.createIdentifier("String");case 134:return e.createIdentifier("Object");case 173:switch(t.literal.kind){case 9:return e.createIdentifier("String");case 8:return e.createIdentifier("Number");case 101:case 86:return e.createIdentifier("Boolean");default:e.Debug.failBadSyntaxKind(t.literal)}break;case 133:return e.createIdentifier("Number");case 137:return b<2?ue():e.createIdentifier("Symbol");case 159:return function(t){switch(m.getTypeReferenceSerializationKind(t.typeName,l)){case e.TypeReferenceSerializationKind.Unknown:var n=ce(t.typeName,!0),o=e.createTempVariable(_);return e.createLogicalOr(e.createLogicalAnd(e.createTypeCheck(e.createAssignment(o,n),"function"),o),e.createIdentifier("Object"));case e.TypeReferenceSerializationKind.TypeWithConstructSignatureAndValue:return ce(t.typeName,!1);case e.TypeReferenceSerializationKind.VoidNullableOrNeverType:return e.createVoidZero();case e.TypeReferenceSerializationKind.BooleanType:return e.createIdentifier("Boolean");case e.TypeReferenceSerializationKind.NumberLikeType:return e.createIdentifier("Number");case e.TypeReferenceSerializationKind.StringLikeType:return e.createIdentifier("String");case e.TypeReferenceSerializationKind.ArrayLikeType:return e.createIdentifier("Array");case e.TypeReferenceSerializationKind.ESSymbolType:return b<2?ue():e.createIdentifier("Symbol");case e.TypeReferenceSerializationKind.TypeWithCallSignature:return e.createIdentifier("Function");case e.TypeReferenceSerializationKind.Promise:return e.createIdentifier("Promise");case e.TypeReferenceSerializationKind.ObjectType:default:return e.createIdentifier("Object")}}(t);case 167:case 166:return function(t){for(var n,o=0,r=t.types;o<r.length;o++){for(var i=r[o];168===i.kind;)i=i.type;if(130!==i.kind&&(k||95!==i.kind&&139!==i.kind)){var s=le(i);if(e.isIdentifier(s)&&"Object"===s.escapedText)return s;if(n){if(!e.isIdentifier(n)||!e.isIdentifier(s)||n.escapedText!==s.escapedText)return e.createIdentifier("Object")}else n=s}}return n||e.createVoidZero()}(t);case 162:case 170:case 171:case 172:case 163:case 119:case 169:break;default:e.Debug.failBadSyntaxKind(t)}return e.createIdentifier("Object")}function ce(t,n){switch(t.kind){case 71:var o=e.getMutableClone(t);return o.flags&=-9,o.original=void 0,o.parent=e.getParseTreeNode(l),n?e.createLogicalAnd(e.createStrictInequality(e.createTypeOf(o),e.createLiteral("undefined")),o):o;case 143:return function(t,n){var o;if(71===t.left.kind)o=ce(t.left,n);else if(n){var r=e.createTempVariable(_);o=e.createLogicalAnd(e.createAssignment(r,ce(t.left,!0)),r)}else o=ce(t.left,!1);return e.createPropertyAccess(o,t.right)}(t,n)}}function ue(){return e.createConditional(e.createTypeCheck(e.createIdentifier("Symbol"),"function"),e.createIdentifier("Symbol"),e.createIdentifier("Object"))}function pe(t,n){var o=t.name;return e.isComputedPropertyName(o)?n?e.getGeneratedNameForNode(o):o.expression:e.isIdentifier(o)?e.createLiteral(e.idText(o)):e.getSynthesizedClone(o)}function de(t){var n=t.name;if(e.isComputedPropertyName(n)){var o=e.visitNode(n.expression,C,e.isExpression);if(t.decorators){var r=e.getGeneratedNameForNode(n);_(r),o=e.createAssignment(r,o)}return e.updateComputedPropertyName(n,o)}return n}function ge(t){return!e.nodeIsMissing(t.body)}function he(t){return!(e.nodeIsMissing(t.body)&&e.hasModifier(t,128))}function fe(n){var o=n.name;return e.isBindingPattern(o)?e.flattenDestructuringAssignment(n,C,t,0,!1,Oe):e.setTextRange(e.createAssignment(Pe(o),e.visitNode(n.initializer,C,e.isExpression)),n)}function _e(n){var o=pe(n,!1),r=function(n){var o=m.getConstantValue(n);return void 0!==o?e.createLiteral(o):(0==(8&u)&&(u|=8,t.enableSubstitution(71)),n.initializer?e.visitNode(n.initializer,C,e.isExpression):e.createVoidZero())}(n),i=e.createAssignment(e.createElementAccess(s,o),r),a=9===r.kind?i:e.createAssignment(e.createElementAccess(s,i),o);return e.setTextRange(e.createStatement(e.setTextRange(a,n)),n)}function me(t){return Ie(t)||De(t)&&v!==e.ModuleKind.ES2015&&v!==e.ModuleKind.ESNext&&v!==e.ModuleKind.System}function ye(t){c||(c=e.createUnderscoreEscapedMap());var n=ke(t);c.has(n)||c.set(n,t)}function ke(t){return e.Debug.assertNode(t.name,e.isIdentifier),t.name.escapedText}function be(t,n){var o=e.createVariableStatement(e.visitNodes(n.modifiers,R,e.isModifier),e.createVariableDeclarationList([e.createVariableDeclaration(e.getLocalName(n,!1,!0))],265===l.kind?0:1));if(e.setOriginalNode(o,n),ye(n),function(e){if(c){var t=ke(e);return c.get(t)===e}return!0}(n))return 232===n.kind?e.setSourceMapRange(o.declarationList,n):e.setSourceMapRange(o,n),e.setCommentRange(o,n),e.setEmitFlags(o,4195328),t.push(o),!0;var r=e.createMergeDeclarationMarker(o);return e.setEmitFlags(r,4195840),t.push(r),!1}function ve(o){if(!function(t){return e.isInstantiatedModule(t,y.preserveConstEnums||y.isolatedModules)}(o))return e.createNotEmittedStatement(o);e.Debug.assertNode(o.name,e.isIdentifier,"A TypeScript namespace should have an Identifier name."),0==(2&u)&&(u|=2,t.enableSubstitution(71),t.enableSubstitution(262),t.enableEmitNotification(233));var i=[],a=2;be(i,o)&&(v===e.ModuleKind.System&&l===n||(a|=512));var p=Le(o),d=Me(o),h=e.hasModifier(o,1)?e.getExternalModuleOrNamespaceExportName(s,o,!1,!0):e.getLocalName(o,!1,!0),_=e.createLogicalOr(h,e.createAssignment(h,e.createObjectLiteral()));if(me(o)){var m=e.getLocalName(o,!1,!0);_=e.createAssignment(m,_)}var k=e.createStatement(e.createCall(e.createFunctionExpression(void 0,void 0,void 0,void 0,[e.createParameter(void 0,void 0,void 0,p)],void 0,function(t,n){var o=s,i=r,a=c;s=n,r=t,c=void 0;var l,u,p=[];g();var d=t.body;if(234===d.kind)S(d,(function(t){return e.addRange(p,e.visitNodes(t.statements,I,e.isStatement))})),l=d.statements,u=d;else{var h=ve(d);h&&(e.isArray(h)?e.addRange(p,h):p.push(h));var _=Te(t).body;l=e.moveRangePos(_.statements,-1)}e.addRange(p,f()),s=o,r=i,c=a;var m=e.createBlock(e.setTextRange(e.createNodeArray(p),l),!0);e.setTextRange(m,u),234!==d.kind&&e.setEmitFlags(m,1536|e.getEmitFlags(m));return m}(o,d)),void 0,[_]));return e.setOriginalNode(k,o),e.setTextRange(k,o),e.setEmitFlags(k,a),i.push(k),i.push(e.createEndOfDeclarationMarker(o)),i}function Te(e){if(233===e.body.kind)return Te(e.body)||e.body}function Ee(t){var n=m.isReferencedAliasDeclaration(t)?t.name:void 0,o=e.visitNode(t.namedBindings,Se,e.isNamedImportBindings);return n||o?e.updateImportClause(t,n,o):void 0}function Se(t){if(240===t.kind)return m.isReferencedAliasDeclaration(t)?t:void 0;var n=e.visitNodes(t.elements,Ce,e.isImportSpecifier);return e.some(n)?e.updateNamedImports(t,n):void 0}function Ce(e){return m.isReferencedAliasDeclaration(e)?e:void 0}function xe(t){var n=e.visitNodes(t.elements,Be,e.isExportSpecifier);return e.some(n)?e.updateNamedExports(t,n):void 0}function Be(e){return m.isValueAliasDeclaration(e)?e:void 0}function Ae(o){if(e.isExternalModuleImportEqualsDeclaration(o))return m.isReferencedAliasDeclaration(o)?e.visitEachChild(o,C,t):void 0;if(function(t){return m.isReferencedAliasDeclaration(t)||!e.isExternalModule(n)&&m.isTopLevelValueImportEqualsWithEntityName(t)}(o)){var r=e.createExpressionFromEntityName(o.moduleReference);return e.setEmitFlags(r,3584),Ne(o)||!Ie(o)?e.setOriginalNode(e.setTextRange(e.createVariableStatement(e.visitNodes(o.modifiers,R,e.isModifier),e.createVariableDeclarationList([e.setOriginalNode(e.createVariableDeclaration(o.name,void 0,r),o)])),o),o):e.setOriginalNode(function(t,n,o){return e.setTextRange(e.createStatement(e.createAssignment(e.getNamespaceMemberName(s,t,!1,!0),n)),o)}(o.name,r,o),o)}}function Ie(t){return void 0!==r&&e.hasModifier(t,1)}function De(t){return void 0===r&&e.hasModifier(t,1)}function Ne(t){return De(t)&&!e.hasModifier(t,512)}function we(t){return e.createStatement(t)}function Re(t,n){var o=e.createAssignment(e.getExternalModuleOrNamespaceExportName(s,n,!1,!0),e.getLocalName(n));e.setSourceMapRange(o,e.createRange(n.name?n.name.pos:n.pos,n.end));var r=e.createStatement(o);e.setSourceMapRange(r,e.createRange(-1,n.end)),t.push(r)}function Oe(t,n,o){return e.setTextRange(e.createAssignment(Pe(t),n),o)}function Pe(t){return e.getNamespaceMemberName(s,t,!1,!0)}function Le(t){var n=e.getGeneratedNameForNode(t);return e.setSourceMapRange(n,t.name),n}function Me(t){return e.getGeneratedNameForNode(t)}function Fe(){0==(1&u)&&(u|=1,t.enableSubstitution(71),p=[])}function Ue(t){if(u&d&&!e.isGeneratedIdentifier(t)&&!e.isLocalName(t)){var n=m.getReferencedExportContainer(t,!1);if(n&&265!==n.kind)if(2&d&&233===n.kind||8&d&&232===n.kind)return e.setTextRange(e.createPropertyAccess(e.getGeneratedNameForNode(n),t),t)}}function He(t){var n=function(t){if(y.isolatedModules)return;return e.isPropertyAccessExpression(t)||e.isElementAccessExpression(t)?m.getConstantValue(t):void 0}(t);if(void 0!==n){e.setConstantValue(t,n);var o=e.createLiteral(n);if(!y.removeComments){var r=e.isPropertyAccessExpression(t)?e.declarationNameToString(t.name):e.getTextOfNode(t.argumentExpression);e.addSyntheticTrailingComment(o,3," "+r+" ")}return o}return t}};var r={name:"typescript:decorate",scoped:!1,priority:2,text:'\n            var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n                var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n                if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\n                else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n                return c > 3 && r && Object.defineProperty(target, key, r), r;\n            };'};function i(t,n,o){return t.requestEmitHelper(s),e.createCall(e.getHelperName("__metadata"),void 0,[e.createLiteral(n),o])}var s={name:"typescript:metadata",scoped:!1,priority:3,text:'\n            var __metadata = (this && this.__metadata) || function (k, v) {\n                if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);\n            };'};function a(t,n,o,r){return t.requestEmitHelper(l),e.setTextRange(e.createCall(e.getHelperName("__param"),void 0,[e.createLiteral(o),n]),r)}var l={name:"typescript:param",scoped:!1,priority:4,text:"\n            var __param = (this && this.__param) || function (paramIndex, decorator) {\n                return function (target, key) { decorator(target, key, paramIndex); }\n            };"}}(ts||(ts={})),function(e){var t;!function(e){e[e.AsyncMethodsWithSuper=1]="AsyncMethodsWithSuper"}(t||(t={})),e.transformES2017=function(t){var n,r=t.startLexicalEnvironment,i=t.resumeLexicalEnvironment,s=t.endLexicalEnvironment,a=t.getEmitResolver(),l=t.getCompilerOptions(),c=e.getEmitScriptTarget(l),u=0,p=t.onEmitNode,d=t.onSubstituteNode;return t.onEmitNode=function(e,t,o){if(1&n&&function(e){var t=e.kind;return 229===t||152===t||151===t||153===t||154===t}(t)){var r=6144&a.getNodeCheckFlags(t);if(r!==u){var i=u;return u=r,p(e,t,o),void(u=i)}}p(e,t,o)},t.onSubstituteNode=function(t,n){if(n=d(t,n),1===t&&u)return function(t){switch(t.kind){case 179:return m(t);case 180:return y(t);case 181:return function(t){var n=t.expression;if(e.isSuperProperty(n)){var o=e.isPropertyAccessExpression(n)?m(n):y(n);return e.createCall(e.createPropertyAccess(o,"call"),void 0,[e.createThis()].concat(t.arguments))}return t}(t)}return t}(n);return n},function(n){if(n.isDeclarationFile)return n;var o=e.visitEachChild(n,g,t);return e.addEmitHelpers(o,t.readEmitHelpers()),o};function g(n){if(0==(16&n.transformFlags))return n;switch(n.kind){case 120:return;case 191:return function(t){return e.setOriginalNode(e.setTextRange(e.createYield(void 0,e.visitNode(t.expression,g,e.isExpression)),t),t)}(n);case 151:return function(n){return e.updateMethod(n,void 0,e.visitNodes(n.modifiers,g,e.isModifier),n.asteriskToken,n.name,void 0,void 0,e.visitParameterList(n.parameters,g,t),void 0,2&e.getFunctionFlags(n)?h(n):e.visitFunctionBody(n.body,g,t))}(n);case 228:return function(n){return e.updateFunctionDeclaration(n,void 0,e.visitNodes(n.modifiers,g,e.isModifier),n.asteriskToken,n.name,void 0,e.visitParameterList(n.parameters,g,t),void 0,2&e.getFunctionFlags(n)?h(n):e.visitFunctionBody(n.body,g,t))}(n);case 186:return function(n){return e.updateFunctionExpression(n,e.visitNodes(n.modifiers,g,e.isModifier),n.asteriskToken,n.name,void 0,e.visitParameterList(n.parameters,g,t),void 0,2&e.getFunctionFlags(n)?h(n):e.visitFunctionBody(n.body,g,t))}(n);case 187:return function(n){return e.updateArrowFunction(n,e.visitNodes(n.modifiers,g,e.isModifier),void 0,e.visitParameterList(n.parameters,g,t),void 0,n.equalsGreaterThanToken,2&e.getFunctionFlags(n)?h(n):e.visitFunctionBody(n.body,g,t))}(n);default:return e.visitEachChild(n,g,t)}}function h(n){i();var r=e.getOriginalNode(n,e.isFunctionLike).type,l=c<2?function(t){var n=t&&e.getEntityNameFromTypeNode(t);if(n&&e.isEntityName(n)){var o=a.getTypeReferenceSerializationKind(n);if(o===e.TypeReferenceSerializationKind.TypeWithConstructSignatureAndValue||o===e.TypeReferenceSerializationKind.Unknown)return n}return}(r):void 0,u=187===n.kind,p=0!=(8192&a.getNodeCheckFlags(n));if(u){var d=o(t,p,l,f(n.body)),h=s();if(e.some(h)){k=e.convertToFunctionBody(d);return e.updateBlock(k,e.setTextRange(e.createNodeArray(e.concatenate(k.statements,h)),k.statements))}return d}var m=[],y=e.addPrologue(m,n.body.statements,!1,g);m.push(e.createReturn(o(t,p,l,f(n.body,y)))),e.addRange(m,s());var k=e.createBlock(m,!0);return e.setTextRange(k,n.body),c>=2&&(4096&a.getNodeCheckFlags(n)?(_(),e.addEmitHelper(k,e.advancedAsyncSuperHelper)):2048&a.getNodeCheckFlags(n)&&(_(),e.addEmitHelper(k,e.asyncSuperHelper))),k}function f(n,o){if(e.isBlock(n))return e.updateBlock(n,e.visitLexicalEnvironment(n.statements,g,t,o));r();var i=e.convertToFunctionBody(e.visitNode(n,g,e.isConciseBody)),a=s();return e.updateBlock(i,e.setTextRange(e.createNodeArray(e.concatenate(i.statements,a)),i.statements))}function _(){0==(1&n)&&(n|=1,t.enableSubstitution(181),t.enableSubstitution(179),t.enableSubstitution(180),t.enableEmitNotification(229),t.enableEmitNotification(151),t.enableEmitNotification(153),t.enableEmitNotification(154),t.enableEmitNotification(152))}function m(t){return 97===t.expression.kind?k(e.createLiteral(e.idText(t.name)),t):t}function y(e){return 97===e.expression.kind?k(e.argumentExpression,e):e}function k(t,n){return 4096&u?e.setTextRange(e.createPropertyAccess(e.createCall(e.createIdentifier("_super"),void 0,[t]),"value"),n):e.setTextRange(e.createCall(e.createIdentifier("_super"),void 0,[t]),n)}};var n={name:"typescript:awaiter",scoped:!1,priority:5,text:'\n            var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n                return new (P || (P = Promise))(function (resolve, reject) {\n                    function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n                    function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n                    function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n                    step((generator = generator.apply(thisArg, _arguments || [])).next());\n                });\n            };'};function o(t,o,r,i){t.requestEmitHelper(n);var s=e.createFunctionExpression(void 0,e.createToken(39),void 0,void 0,[],void 0,i);return(s.emitNode||(s.emitNode={})).flags|=786432,e.createCall(e.getHelperName("__awaiter"),void 0,[e.createThis(),o?e.createIdentifier("arguments"):e.createVoidZero(),r?e.createExpressionFromEntityName(r):e.createVoidZero(),s])}e.asyncSuperHelper={name:"typescript:async-super",scoped:!0,text:"\n            const _super = name => super[name];\n        "},e.advancedAsyncSuperHelper={name:"typescript:advanced-async-super",scoped:!0,text:"\n            const _super = (function (geti, seti) {\n                const cache = Object.create(null);\n                return name => cache[name] || (cache[name] = { get value() { return geti(name); }, set value(v) { seti(name, v); } });\n            })(name => super[name], (name, value) => super[name] = value);\n        "}}(ts||(ts={})),function(e){var t;!function(e){e[e.AsyncMethodsWithSuper=1]="AsyncMethodsWithSuper"}(t||(t={})),e.transformESNext=function(t){var n=t.resumeLexicalEnvironment,l=t.endLexicalEnvironment,u=t.hoistVariableDeclaration,p=t.getEmitResolver(),d=t.getCompilerOptions(),g=e.getEmitScriptTarget(d),h=t.onEmitNode;t.onEmitNode=function(e,t,n){if(1&f&&function(e){var t=e.kind;return 229===t||152===t||151===t||153===t||154===t}(t)){var o=6144&p.getNodeCheckFlags(t);if(o!==y){var r=y;return y=o,h(e,t,n),void(y=r)}}h(e,t,n)};var f,_,m=t.onSubstituteNode;t.onSubstituteNode=function(t,n){if(n=m(t,n),1===t&&y)return function(t){switch(t.kind){case 179:return I(t);case 180:return D(t);case 181:return function(t){var n=t.expression;if(e.isSuperProperty(n)){var o=e.isPropertyAccessExpression(n)?I(n):D(n);return e.createCall(e.createPropertyAccess(o,"call"),void 0,[e.createThis()].concat(t.arguments))}return t}(t)}return t}(n);return n};var y=0;return function(n){if(n.isDeclarationFile)return n;var o=e.visitEachChild(n,k,t);return e.addEmitHelpers(o,t.readEmitHelpers()),o};function k(e){return T(e,!1)}function b(e){return T(e,!0)}function v(e){if(120!==e.kind)return e}function T(n,s){if(0==(8&n.transformFlags))return n;switch(n.kind){case 191:return function(n){if(2&_&&1&_)return e.setOriginalNode(e.setTextRange(e.createYield(i(t,e.visitNode(n.expression,k,e.isExpression))),n),n);return e.visitEachChild(n,k,t)}(n);case 197:return function(n){if(2&_&&1&_&&n.asteriskToken){var o=e.visitNode(n.expression,k,e.isExpression);return e.setOriginalNode(e.setTextRange(e.createYield(i(t,e.updateYield(n,n.asteriskToken,function(t,n,o){return t.requestEmitHelper(r),t.requestEmitHelper(a),e.setTextRange(e.createCall(e.getHelperName("__asyncDelegator"),void 0,[n]),o)}(t,c(t,o,o),o)))),n),n)}return e.visitEachChild(n,k,t)}(n);case 222:return function(n){if(2&_&&1&_){var o=e.unwrapInnermostStatementOfLabel(n);return 216===o.kind&&o.awaitModifier?E(o,n):e.restoreEnclosingLabel(e.visitEachChild(n,k,t),n)}return e.visitEachChild(n,k,t)}(n);case 178:return function(n){if(1048576&n.transformFlags){var r=function(t){for(var n,o=[],r=0,i=t;r<i.length;r++){var s=i[r];if(263===s.kind){n&&(o.push(e.createObjectLiteral(n)),n=void 0);var a=s.expression;o.push(e.visitNode(a,k,e.isExpression))}else if(n||(n=[]),261===s.kind){var l=s;n.push(e.createPropertyAssignment(l.name,e.visitNode(l.initializer,k,e.isExpression)))}else n.push(e.visitNode(s,k,e.isObjectLiteralElementLike))}n&&o.push(e.createObjectLiteral(n));return o}(n.properties);return r.length&&178!==r[0].kind&&r.unshift(e.createObjectLiteral()),o(t,r)}return e.visitEachChild(n,k,t)}(n);case 194:return function(n,o){if(e.isDestructuringAssignment(n)&&1048576&n.left.transformFlags)return e.flattenDestructuringAssignment(n,k,t,1,!o);if(26===n.operatorToken.kind)return e.updateBinary(n,e.visitNode(n.left,b,e.isExpression),e.visitNode(n.right,o?b:k,e.isExpression));return e.visitEachChild(n,k,t)}(n,s);case 226:return function(n){if(e.isBindingPattern(n.name)&&1048576&n.name.transformFlags)return e.flattenDestructuringBinding(n,k,t,1);return e.visitEachChild(n,k,t)}(n);case 216:return E(n,void 0);case 214:return function(t){return e.updateFor(t,e.visitNode(t.initializer,b,e.isForInitializer),e.visitNode(t.condition,k,e.isExpression),e.visitNode(t.incrementor,k,e.isExpression),e.visitNode(t.statement,k,e.isStatement))}(n);case 190:return function(n){return e.visitEachChild(n,b,t)}(n);case 152:return function(n){var o=_;_=0;var r=e.updateConstructor(n,void 0,n.modifiers,e.visitParameterList(n.parameters,k,t),x(n));return _=o,r}(n);case 151:return function(n){var o=_;_=e.getFunctionFlags(n);var r=e.updateMethod(n,void 0,1&_?e.visitNodes(n.modifiers,v,e.isModifier):n.modifiers,2&_?void 0:n.asteriskToken,e.visitNode(n.name,k,e.isPropertyName),e.visitNode(void 0,k,e.isToken),void 0,e.visitParameterList(n.parameters,k,t),void 0,2&_&&1&_?C(n):x(n));return _=o,r}(n);case 153:return function(n){var o=_;_=0;var r=e.updateGetAccessor(n,void 0,n.modifiers,e.visitNode(n.name,k,e.isPropertyName),e.visitParameterList(n.parameters,k,t),void 0,x(n));return _=o,r}(n);case 154:return function(n){var o=_;_=0;var r=e.updateSetAccessor(n,void 0,n.modifiers,e.visitNode(n.name,k,e.isPropertyName),e.visitParameterList(n.parameters,k,t),x(n));return _=o,r}(n);case 228:return function(n){var o=_;_=e.getFunctionFlags(n);var r=e.updateFunctionDeclaration(n,void 0,1&_?e.visitNodes(n.modifiers,v,e.isModifier):n.modifiers,2&_?void 0:n.asteriskToken,n.name,void 0,e.visitParameterList(n.parameters,k,t),void 0,2&_&&1&_?C(n):x(n));return _=o,r}(n);case 186:return function(n){var o=_;_=e.getFunctionFlags(n);var r=e.updateFunctionExpression(n,1&_?e.visitNodes(n.modifiers,v,e.isModifier):n.modifiers,2&_?void 0:n.asteriskToken,n.name,void 0,e.visitParameterList(n.parameters,k,t),void 0,2&_&&1&_?C(n):x(n));return _=o,r}(n);case 187:return function(n){var o=_;_=e.getFunctionFlags(n);var r=e.updateArrowFunction(n,n.modifiers,void 0,e.visitParameterList(n.parameters,k,t),void 0,n.equalsGreaterThanToken,x(n));return _=o,r}(n);case 146:return function(n){if(1048576&n.transformFlags)return e.updateParameter(n,void 0,void 0,n.dotDotDotToken,e.getGeneratedNameForNode(n),void 0,void 0,e.visitNode(n.initializer,k,e.isExpression));return e.visitEachChild(n,k,t)}(n);case 210:return function(n){return e.visitEachChild(n,b,t)}(n);case 185:return function(n,o){return e.visitEachChild(n,o?b:k,t)}(n,s);case 260:return function(n){if(!n.variableDeclaration)return e.updateCatchClause(n,e.createVariableDeclaration(e.createTempVariable(void 0)),e.visitNode(n.block,k,e.isBlock));return e.visitEachChild(n,k,t)}(n);default:return e.visitEachChild(n,k,t)}}function E(n,o){return 1048576&n.initializer.transformFlags&&(n=function(t){var n=e.skipParentheses(t.initializer);if(e.isVariableDeclarationList(n)||e.isAssignmentPattern(n)){var o=void 0,r=void 0,i=e.createTempVariable(void 0),s=[e.createForOfBindingStatement(n,i)];return e.isBlock(t.statement)&&(e.addRange(s,t.statement.statements),o=t.statement,r=t.statement.statements),e.updateForOf(t,t.awaitModifier,e.setTextRange(e.createVariableDeclarationList([e.setTextRange(e.createVariableDeclaration(i),t.initializer)],1),t.initializer),t.expression,e.setTextRange(e.createBlock(e.setTextRange(e.createNodeArray(s),r),!0),o))}return t}(n)),n.awaitModifier?function(n,o){var r=e.visitNode(n.expression,k,e.isExpression),i=e.isIdentifier(r)?e.getGeneratedNameForNode(r):e.createTempVariable(void 0),s=e.isIdentifier(r)?e.getGeneratedNameForNode(i):e.createTempVariable(void 0),a=e.createUniqueName("e"),l=e.getGeneratedNameForNode(a),p=e.createTempVariable(void 0),d=c(t,r,n.expression),g=e.createCall(e.createPropertyAccess(i,"next"),void 0,[]),h=e.createPropertyAccess(s,"done"),f=e.createPropertyAccess(s,"value"),_=e.createFunctionCall(p,i,[]);u(a),u(p);var m=e.setEmitFlags(e.setTextRange(e.createFor(e.setEmitFlags(e.setTextRange(e.createVariableDeclarationList([e.setTextRange(e.createVariableDeclaration(i,void 0,d),n.expression),e.createVariableDeclaration(s)]),n.expression),2097152),e.createComma(e.createAssignment(s,S(g)),e.createLogicalNot(h)),void 0,function(t,n){var o,r,i=e.createForOfBindingStatement(t.initializer,n),s=[e.visitNode(i,k,e.isStatement)],a=e.visitNode(t.statement,k,e.isStatement);e.isBlock(a)?(e.addRange(s,a.statements),o=a,r=a.statements):s.push(a);return e.setEmitFlags(e.setTextRange(e.createBlock(e.setTextRange(e.createNodeArray(s),r),!0),o),432)}(n,S(f))),n),256);return e.createTry(e.createBlock([e.restoreEnclosingLabel(m,o)]),e.createCatchClause(e.createVariableDeclaration(l),e.setEmitFlags(e.createBlock([e.createStatement(e.createAssignment(a,e.createObjectLiteral([e.createPropertyAssignment("error",l)])))]),1)),e.createBlock([e.createTry(e.createBlock([e.setEmitFlags(e.createIf(e.createLogicalAnd(e.createLogicalAnd(s,e.createLogicalNot(h)),e.createAssignment(p,e.createPropertyAccess(i,"return"))),e.createStatement(S(_))),1)]),void 0,e.setEmitFlags(e.createBlock([e.setEmitFlags(e.createIf(a,e.createThrow(e.createPropertyAccess(a,"error"))),1)]),1))]))}(n,o):e.restoreEnclosingLabel(e.visitEachChild(n,k,t),o)}function S(n){return 1&_?e.createYield(void 0,i(t,n)):e.createAwait(n)}function C(o){n();var i=[],a=e.addPrologue(i,o.body.statements,!1,k);B(i,o),i.push(e.createReturn(function(t,n){return t.requestEmitHelper(r),t.requestEmitHelper(s),(n.emitNode||(n.emitNode={})).flags|=262144,e.createCall(e.getHelperName("__asyncGenerator"),void 0,[e.createThis(),e.createIdentifier("arguments"),n])}(t,e.createFunctionExpression(void 0,e.createToken(39),o.name&&e.getGeneratedNameForNode(o.name),void 0,[],void 0,e.updateBlock(o.body,e.visitLexicalEnvironment(o.body.statements,k,t,a)))))),e.addRange(i,l());var c=e.updateBlock(o.body,i);return g>=2&&(4096&p.getNodeCheckFlags(o)?(A(),e.addEmitHelper(c,e.advancedAsyncSuperHelper)):2048&p.getNodeCheckFlags(o)&&(A(),e.addEmitHelper(c,e.asyncSuperHelper))),c}function x(t){n();var o=0,r=[],i=e.visitNode(t.body,k,e.isConciseBody);e.isBlock(i)&&(o=e.addPrologue(r,i.statements,!1,k)),e.addRange(r,B(void 0,t));var s=l();if(o>0||e.some(r)||e.some(s)){var a=e.convertToFunctionBody(i,!0);return e.addRange(r,a.statements.slice(o)),e.addRange(r,s),e.updateBlock(a,e.setTextRange(e.createNodeArray(r),a.statements))}return i}function B(n,o){for(var r=0,i=o.parameters;r<i.length;r++){var s=i[r];if(1048576&s.transformFlags){var a=e.getGeneratedNameForNode(s),l=e.flattenDestructuringBinding(s,k,t,1,a,!1,!0);if(e.some(l)){var c=e.createVariableStatement(void 0,e.createVariableDeclarationList(l));e.setEmitFlags(c,1048576),n=e.append(n,c)}}}return n}function A(){0==(1&f)&&(f|=1,t.enableSubstitution(181),t.enableSubstitution(179),t.enableSubstitution(180),t.enableEmitNotification(229),t.enableEmitNotification(151),t.enableEmitNotification(153),t.enableEmitNotification(154),t.enableEmitNotification(152))}function I(t){return 97===t.expression.kind?N(e.createLiteral(e.idText(t.name)),t):t}function D(e){return 97===e.expression.kind?N(e.argumentExpression,e):e}function N(t,n){return 4096&y?e.setTextRange(e.createPropertyAccess(e.createCall(e.createIdentifier("_super"),void 0,[t]),"value"),n):e.setTextRange(e.createCall(e.createIdentifier("_super"),void 0,[t]),n)}};var n={name:"typescript:assign",scoped:!1,priority:1,text:"\n            var __assign = (this && this.__assign) || Object.assign || function(t) {\n                for (var s, i = 1, n = arguments.length; i < n; i++) {\n                    s = arguments[i];\n                    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                        t[p] = s[p];\n                }\n                return t;\n            };"};function o(t,o){return t.getCompilerOptions().target>=2?e.createCall(e.createPropertyAccess(e.createIdentifier("Object"),"assign"),void 0,o):(t.requestEmitHelper(n),e.createCall(e.getHelperName("__assign"),void 0,o))}e.createAssignHelper=o;var r={name:"typescript:await",scoped:!1,text:"\n            var __await = (this && this.__await) || function (v) { return this instanceof __await ? (this.v = v, this) : new __await(v); }\n        "};function i(t,n){return t.requestEmitHelper(r),e.createCall(e.getHelperName("__await"),void 0,[n])}var s={name:"typescript:asyncGenerator",scoped:!1,text:'\n            var __asyncGenerator = (this && this.__asyncGenerator) || function (thisArg, _arguments, generator) {\n                if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");\n                var g = generator.apply(thisArg, _arguments || []), i, q = [];\n                return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;\n                function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n                function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n                function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\n                function fulfill(value) { resume("next", value); }\n                function reject(value) { resume("throw", value); }\n                function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n            };\n        '};var a={name:"typescript:asyncDelegator",scoped:!1,text:'\n            var __asyncDelegator = (this && this.__asyncDelegator) || function (o) {\n                var i, p;\n                return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;\n                function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === "return" } : f ? f(v) : v; }; }\n            };\n        '};var l={name:"typescript:asyncValues",scoped:!1,text:'\n            var __asyncValues = (this && this.__asyncIterator) || function (o) {\n                if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");\n                var m = o[Symbol.asyncIterator];\n                return m ? m.call(o) : typeof __values === "function" ? __values(o) : o[Symbol.iterator]();\n            };\n        '};function c(t,n,o){return t.requestEmitHelper(l),e.setTextRange(e.createCall(e.getHelperName("__asyncValues"),void 0,[n]),o)}}(ts||(ts={})),function(e){e.transformJsx=function(n){var o=n.getCompilerOptions();return function(t){if(t.isDeclarationFile)return t;var o=e.visitEachChild(t,r,n);return e.addEmitHelpers(o,n.readEmitHelpers()),o};function r(t){return 4&t.transformFlags?function(t){switch(t.kind){case 249:return s(t,!1);case 250:return a(t,!1);case 256:return h(t);default:return e.visitEachChild(t,r,n)}}(t):t}function i(t){switch(t.kind){case 10:return function(t){var n=function(t){for(var n,o=0,r=-1,i=0;i<t.length;i++){var s=t.charCodeAt(i);e.isLineBreak(s)?(-1!==o&&-1!==r&&(n=p(n,t.substr(o,r-o+1))),o=-1):e.isWhiteSpaceSingleLine(s)||(r=i,-1===o&&(o=i))}return-1!==o?p(n,t.substr(o)):n}(e.getTextOfNode(t,!0));return void 0===n?void 0:e.createLiteral(n)}(t);case 256:return h(t);case 249:return s(t,!0);case 250:return a(t,!0);default:return void e.Debug.failBadSyntaxKind(t)}}function s(e,t){return l(e.openingElement,e.children,t,e)}function a(e,t){return l(e,void 0,t,e)}function l(t,r,s,a){var l,p=g(t),d=t.attributes.properties;if(0===d.length)l=e.createNull();else{var h=e.flatten(e.spanMap(d,e.isJsxSpreadAttribute,(function(t,n){return n?e.map(t,c):e.createObjectLiteral(e.map(t,u))})));e.isJsxSpreadAttribute(d[0])&&h.unshift(e.createObjectLiteral()),(l=e.singleOrUndefined(h))||(l=e.createAssignHelper(n,h))}var f=e.createExpressionForJsxElement(n.getEmitResolver().getJsxFactoryEntity(),o.reactNamespace,p,l,e.mapDefined(r,i),t,a);return s&&e.startOnNewLine(f),f}function c(t){return e.visitNode(t.expression,r,e.isExpression)}function u(t){var n=function(t){var n=t.name,o=e.idText(n);return/^[A-Za-z_]\w*$/.test(o)?n:e.createLiteral(o)}(t),o=function(t){if(void 0===t)return e.createTrue();if(9===t.kind){var n=function(e){var t=d(e);return t===e?void 0:t}(t.text);return n?e.setTextRange(e.createLiteral(n),t):t}if(256===t.kind)return void 0===t.expression?e.createTrue():h(t);e.Debug.failBadSyntaxKind(t)}(t.initializer);return e.createPropertyAssignment(n,o)}function p(e,t){var n=d(t);return void 0===e?n:e+" "+n}function d(e){return e.replace(/&((#((\d+)|x([\da-fA-F]+)))|(\w+));/g,(function(e,n,o,r,i,s,a){if(i)return String.fromCharCode(parseInt(i,10));if(s)return String.fromCharCode(parseInt(s,16));var l=t.get(a);return l?String.fromCharCode(l):e}))}function g(t){if(249===t.kind)return g(t.openingElement);var n=t.tagName;return e.isIdentifier(n)&&e.isIntrinsicJsxName(n.escapedText)?e.createLiteral(e.idText(n)):e.createExpressionFromEntityName(n)}function h(t){return e.visitNode(t.expression,r,e.isExpression)}};var t=e.createMapFromTemplate({quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830})}(ts||(ts={})),function(e){e.transformES2016=function(t){var n=t.hoistVariableDeclaration;return function(n){if(n.isDeclarationFile)return n;return e.visitEachChild(n,o,t)};function o(r){if(0==(32&r.transformFlags))return r;switch(r.kind){case 194:return function(r){switch(r.operatorToken.kind){case 62:return function(t){var r,i,s=e.visitNode(t.left,o,e.isExpression),a=e.visitNode(t.right,o,e.isExpression);if(e.isElementAccessExpression(s)){var l=e.createTempVariable(n),c=e.createTempVariable(n);r=e.setTextRange(e.createElementAccess(e.setTextRange(e.createAssignment(l,s.expression),s.expression),e.setTextRange(e.createAssignment(c,s.argumentExpression),s.argumentExpression)),s),i=e.setTextRange(e.createElementAccess(l,c),s)}else if(e.isPropertyAccessExpression(s)){l=e.createTempVariable(n);r=e.setTextRange(e.createPropertyAccess(e.setTextRange(e.createAssignment(l,s.expression),s.expression),s.name),s),i=e.setTextRange(e.createPropertyAccess(l,s.name),s)}else r=s,i=s;return e.setTextRange(e.createAssignment(r,e.createMathPow(i,a,t)),t)}(r);case 40:return function(t){var n=e.visitNode(t.left,o,e.isExpression),r=e.visitNode(t.right,o,e.isExpression);return e.createMathPow(n,r,t)}(r);default:return e.visitEachChild(r,o,t)}}(r);default:return e.visitEachChild(r,o,t)}}}}(ts||(ts={})),function(e){var t,n,o,r,i;!function(e){e[e.CapturedThis=1]="CapturedThis",e[e.BlockScopedBindings=2]="BlockScopedBindings"}(t||(t={})),function(e){e[e.ToOriginal=0]="ToOriginal",e[e.ToOutParameter=1]="ToOutParameter"}(n||(n={})),function(e){e[e.Break=2]="Break",e[e.Continue=4]="Continue",e[e.Return=8]="Return"}(o||(o={})),function(e){e[e.NoReplacement=0]="NoReplacement",e[e.ReplaceSuperCapture=1]="ReplaceSuperCapture",e[e.ReplaceWithReturn=2]="ReplaceWithReturn"}(r||(r={})),function(e){e[e.None=0]="None",e[e.Function=1]="Function",e[e.ArrowFunction=2]="ArrowFunction",e[e.AsyncFunctionBody=4]="AsyncFunctionBody",e[e.NonStaticClassElement=8]="NonStaticClassElement",e[e.CapturesThis=16]="CapturesThis",e[e.ExportedVariableStatement=32]="ExportedVariableStatement",e[e.TopLevel=64]="TopLevel",e[e.Block=128]="Block",e[e.IterationStatement=256]="IterationStatement",e[e.IterationStatementBlock=512]="IterationStatementBlock",e[e.ForStatement=1024]="ForStatement",e[e.ForInOrForOfStatement=2048]="ForInOrForOfStatement",e[e.ConstructorWithCapturedSuper=4096]="ConstructorWithCapturedSuper",e[e.ComputedPropertyName=8192]="ComputedPropertyName",e[e.AncestorFactsMask=16383]="AncestorFactsMask",e[e.BlockScopeIncludes=0]="BlockScopeIncludes",e[e.BlockScopeExcludes=4032]="BlockScopeExcludes",e[e.SourceFileIncludes=64]="SourceFileIncludes",e[e.SourceFileExcludes=3968]="SourceFileExcludes",e[e.FunctionIncludes=65]="FunctionIncludes",e[e.FunctionExcludes=16286]="FunctionExcludes",e[e.AsyncFunctionBodyIncludes=69]="AsyncFunctionBodyIncludes",e[e.AsyncFunctionBodyExcludes=16278]="AsyncFunctionBodyExcludes",e[e.ArrowFunctionIncludes=66]="ArrowFunctionIncludes",e[e.ArrowFunctionExcludes=16256]="ArrowFunctionExcludes",e[e.ConstructorIncludes=73]="ConstructorIncludes",e[e.ConstructorExcludes=16278]="ConstructorExcludes",e[e.DoOrWhileStatementIncludes=256]="DoOrWhileStatementIncludes",e[e.DoOrWhileStatementExcludes=0]="DoOrWhileStatementExcludes",e[e.ForStatementIncludes=1280]="ForStatementIncludes",e[e.ForStatementExcludes=3008]="ForStatementExcludes",e[e.ForInOrForOfStatementIncludes=2304]="ForInOrForOfStatementIncludes",e[e.ForInOrForOfStatementExcludes=1984]="ForInOrForOfStatementExcludes",e[e.BlockIncludes=128]="BlockIncludes",e[e.BlockExcludes=3904]="BlockExcludes",e[e.IterationStatementBlockIncludes=512]="IterationStatementBlockIncludes",e[e.IterationStatementBlockExcludes=4032]="IterationStatementBlockExcludes",e[e.ComputedPropertyNameIncludes=8192]="ComputedPropertyNameIncludes",e[e.ComputedPropertyNameExcludes=0]="ComputedPropertyNameExcludes",e[e.NewTarget=16384]="NewTarget",e[e.NewTargetInComputedPropertyName=32768]="NewTargetInComputedPropertyName",e[e.SubtreeFactsMask=-16384]="SubtreeFactsMask",e[e.PropagateNewTargetMask=49152]="PropagateNewTargetMask"}(i||(i={})),e.transformES2015=function(t){var n,o,r,i,l,c,u=t.startLexicalEnvironment,p=t.resumeLexicalEnvironment,d=t.endLexicalEnvironment,g=t.hoistVariableDeclaration,h=t.getCompilerOptions(),f=t.getEmitResolver(),_=t.onSubstituteNode,m=t.onEmitNode;return t.onEmitNode=function(t,n,o){if(1&c&&e.isFunctionLike(n)){var r=y(16286,8&e.getEmitFlags(n)?81:65);return m(t,n,o),void k(r,0,0)}m(t,n,o)},t.onSubstituteNode=function(t,n){if(n=_(t,n),1===t)return function(t){switch(t.kind){case 71:return function(t){if(2&c&&!e.isInternalName(t)){var n=f.getReferencedDeclarationWithCollidingName(t);if(n&&(!e.isClassLike(n)||!function(t,n){var o=e.getParseTreeNode(n);if(!o||o===t||o.end<=t.pos||o.pos>=t.end)return!1;var r=e.getEnclosingBlockScopeContainer(t);for(;o;){if(o===r||o===t)return!1;if(e.isClassElement(o)&&o.parent===t)return!0;o=o.parent}return!1}(n,t)))return e.setTextRange(e.getGeneratedNameForNode(e.getNameOfDeclaration(n)),t)}return t}(t);case 99:return function(t){if(1&c&&16&r)return e.setTextRange(e.createIdentifier("_this"),t);return t}(t)}return t}(n);if(e.isIdentifier(n))return function(t){if(2&c&&!e.isInternalName(t)){var n=e.getParseTreeNode(t,e.isIdentifier);if(n&&function(e){var t=e.parent;switch(t.kind){case 176:case 229:case 232:case 226:return t.name===e&&f.isDeclarationWithCollidingName(t)}return!1}(n))return e.setTextRange(e.getGeneratedNameForNode(n),t)}return t}(n);return n},function(s){if(s.isDeclarationFile)return s;n=s,o=s.text;var a=function(t){var n=y(3968,64),o=[];u();var r=e.addStandardPrologue(o,t.statements,!1);O(o,t),r=e.addCustomPrologue(o,t.statements,r,T),e.addRange(o,e.visitNodes(t.statements,T,e.isStatement,r)),i&&o.push(e.createVariableStatement(void 0,e.createVariableDeclarationList(i)));return e.addRange(o,d()),k(n,0,0),e.updateSourceFileNode(t,e.setTextRange(e.createNodeArray(o),t.statements))}(s);return e.addEmitHelpers(a,t.readEmitHelpers()),n=void 0,o=void 0,i=void 0,r=0,a};function y(e,t){var n=r;return r=16383&(r&~e|t),n}function k(e,t,n){r=-16384&(r&~t|n)|e}function b(e){return 4096&r&&219===e.kind&&!e.expression}function v(t){return 0!=(128&t.transformFlags)||void 0!==l||4096&r&&(e.isStatement(t)||207===t.kind)||e.isIterationStatement(t,!1)&&ie(t)||0!=(33554432&e.getEmitFlags(t))}function T(o){return v(o)?function(o){switch(o.kind){case 115:return;case 229:return function(t){var n=e.createVariableDeclaration(e.getLocalName(t,!0),void 0,x(t));e.setOriginalNode(n,t);var o=[],r=e.createVariableStatement(void 0,e.createVariableDeclarationList([n]));if(e.setOriginalNode(r,t),e.setTextRange(r,t),e.startOnNewLine(r),o.push(r),e.hasModifier(t,1)){var i=e.hasModifier(t,512)?e.createExportDefault(e.getLocalName(t)):e.createExternalModuleExport(e.getLocalName(t));e.setOriginalNode(i,r),o.push(i)}var s=e.getEmitFlags(t);0==(4194304&s)&&(o.push(e.createEndOfDeclarationMarker(t)),e.setEmitFlags(r,4194304|s));return e.singleOrMany(o)}(o);case 199:return function(e){return x(e)}(o);case 146:return function(t){return t.dotDotDotToken?void 0:e.isBindingPattern(t.name)?e.setOriginalNode(e.setTextRange(e.createParameter(void 0,void 0,void 0,e.getGeneratedNameForNode(t),void 0,void 0,void 0),t),t):t.initializer?e.setOriginalNode(e.setTextRange(e.createParameter(void 0,void 0,void 0,t.name,void 0,void 0,void 0),t),t):t}(o);case 228:return function(n){var o=l;l=void 0;var i=y(16286,65),s=e.visitParameterList(n.parameters,T,t),a=64&n.transformFlags?G(n):W(n),c=16384&r?e.getLocalName(n):n.name;return k(i,49152,0),l=o,e.updateFunctionDeclaration(n,void 0,e.visitNodes(n.modifiers,T,e.isModifier),n.asteriskToken,c,void 0,s,void 0,a)}(o);case 187:return function(n){16384&n.transformFlags&&Se();var o=l;l=void 0;var r=y(16256,66),i=e.createFunctionExpression(void 0,void 0,void 0,void 0,e.visitParameterList(n.parameters,T,t),void 0,G(n));return e.setTextRange(i,n),e.setOriginalNode(i,n),e.setEmitFlags(i,8),k(r,0,0),l=o,i}(o);case 186:return function(n){var o=262144&e.getEmitFlags(n)?y(16278,69):y(16286,65),i=l;l=void 0;var s=e.visitParameterList(n.parameters,T,t),a=64&n.transformFlags?G(n):W(n),c=16384&r?e.getLocalName(n):n.name;return k(o,49152,0),l=i,e.updateFunctionExpression(n,void 0,n.asteriskToken,c,void 0,s,void 0,a)}(o);case 226:return X(o);case 71:return function(t){if(!l)return t;if(e.isGeneratedIdentifier(t))return t;if("arguments"!==t.escapedText||!f.isArgumentsLocalBinding(t))return t;return l.argumentsName||(l.argumentsName=e.createUniqueName("arguments"))}(o);case 227:return function(n){if(64&n.transformFlags){3&n.flags&&Ee();var o=e.flatMap(n.declarations,1&n.flags?$:X),r=e.createVariableDeclarationList(o);if(e.setOriginalNode(r,n),e.setTextRange(r,n),e.setCommentRange(r,n),8388608&n.transformFlags&&(e.isBindingPattern(n.declarations[0].name)||e.isBindingPattern(e.lastOrUndefined(n.declarations).name))){var i=e.firstOrUndefined(o);if(i){var s=e.lastOrUndefined(o);e.setSourceMapRange(r,e.createRange(i.pos,s.end))}}return r}return e.visitEachChild(n,T,t)}(o);case 221:return function(n){if(void 0!==l){var o=l.allowedNonLabeledJumps;l.allowedNonLabeledJumps|=2;var r=e.visitEachChild(n,T,t);return l.allowedNonLabeledJumps=o,r}return e.visitEachChild(n,T,t)}(o);case 235:return function(n){var o=y(4032,0),r=e.visitEachChild(n,T,t);return k(o,0,0),r}(o);case 207:return K(o,!1);case 218:case 217:return function(n){if(l){var o=218===n.kind?2:4;if(!(n.label&&l.labels&&l.labels.get(e.idText(n.label))||!n.label&&l.allowedNonLabeledJumps&o)){var r=void 0;n.label?218===n.kind?(r="break-"+n.label.escapedText,ce(l,!0,e.idText(n.label),r)):(r="continue-"+n.label.escapedText,ce(l,!1,e.idText(n.label),r)):218===n.kind?(l.nonLocalJumps|=2,r="break"):(l.nonLocalJumps|=4,r="continue");var i=e.createLiteral(r);if(l.loopOutParameters.length){for(var s=l.loopOutParameters,a=void 0,c=0;c<s.length;c++){var u=ae(s[c],1);a=0===c?u:e.createBinary(a,26,u)}i=e.createBinary(a,26,i)}return e.createReturn(i)}}return e.visitEachChild(n,T,t)}(o);case 222:return function(t){l&&!l.labels&&(l.labels=e.createMap());var n=e.unwrapInnermostStatementOfLabel(t,l&&Y);return e.isIterationStatement(n,!1)?function(e,t){switch(e.kind){case 212:case 213:return Z(e,t);case 214:return Q(e,t);case 215:return ee(e,t);case 216:return te(e,t)}}(n,t):e.restoreEnclosingLabel(e.visitNode(n,T,e.isStatement),t,l&&J)}(o);case 212:case 213:return Z(o,void 0);case 214:return Q(o,void 0);case 215:return ee(o,void 0);case 216:return te(o,void 0);case 210:return function(n){switch(n.expression.kind){case 185:return e.updateStatement(n,j(n.expression,!1));case 194:return e.updateStatement(n,z(n.expression,!1))}return e.visitEachChild(n,T,t)}(o);case 178:return function(n){for(var o=n.properties,i=o.length,s=i,a=i,l=0;l<i;l++){var c=o[l];if(16777216&c.transformFlags&&4&r&&l<a&&(a=l),144===c.name.kind){s=l;break}}if(s!==i){a<s&&(s=a);var u=e.createTempVariable(g),p=[],d=e.createAssignment(u,e.setEmitFlags(e.createObjectLiteral(e.visitNodes(o,T,e.isObjectLiteralElementLike,0,s),n.multiLine),65536));return n.multiLine&&(d.startsOnNewLine=!0),p.push(d),function(t,n,o,r){for(var i=n.properties,s=i.length,a=r;a<s;a++){var l=i[a];switch(l.kind){case 153:case 154:var c=e.getAllAccessorDeclarations(n.properties,l);l===c.firstAccessor&&t.push(H(o,c,n,n.multiLine));break;case 151:t.push(he(l,o,n,n.multiLine));break;case 261:t.push(de(l,o,n.multiLine));break;case 262:t.push(ge(l,o,n.multiLine));break;default:e.Debug.failBadSyntaxKind(n)}}}(p,n,u,s),p.push(n.multiLine?e.startOnNewLine(e.getMutableClone(u)):u),e.inlineExpressions(p)}return e.visitEachChild(n,T,t)}(o);case 260:return function(n){var o,r=y(4032,0);if(e.Debug.assert(!!n.variableDeclaration,"Catch clause variable should always be present when downleveling ES2015."),e.isBindingPattern(n.variableDeclaration.name)){var i=e.createTempVariable(void 0),s=e.createVariableDeclaration(i);e.setTextRange(s,n.variableDeclaration);var a=e.flattenDestructuringBinding(n.variableDeclaration,T,t,0,i),l=e.createVariableDeclarationList(a);e.setTextRange(l,n.variableDeclaration);var c=e.createVariableStatement(void 0,l);o=e.updateCatchClause(n,s,(u=n.block,p=c,d=e.visitNodes(u.statements,T,e.isStatement),e.updateBlock(u,[p].concat(d))))}else o=e.visitEachChild(n,T,t);var u,p,d;return k(r,0,0),o}(o);case 262:return function(t){return e.setTextRange(e.createPropertyAssignment(t.name,e.getSynthesizedClone(t.name)),t)}(o);case 144:return function(n){var o=y(0,8192),i=e.visitEachChild(n,T,t);return k(o,49152,49152&r?32768:0),i}(o);case 177:return function(n){if(64&n.transformFlags)return _e(n.elements,!0,n.multiLine,n.elements.hasTrailingComma);return e.visitEachChild(n,T,t)}(o);case 181:return function(t){if(33554432&e.getEmitFlags(t))return function(t){var n=e.cast(e.cast(e.skipOuterExpressions(t.expression),e.isArrowFunction).body,e.isBlock),o=e.visitNodes(n.statements,T,e.isStatement,0,1),r=e.visitNodes(n.statements,T,e.isStatement,1,n.statements.length-1),i=e.cast(e.firstOrUndefined(o),e.isVariableStatement).declarationList.declarations[0],s=e.skipOuterExpressions(i.initializer),a=e.tryCast(s,e.isAssignmentExpression),l=e.cast(a?e.skipOuterExpressions(a.right):s,e.isCallExpression),c=e.cast(e.skipOuterExpressions(l.expression),e.isFunctionExpression),u=c.body.statements,p=0,d=-1,g=[];if(a){var h=e.tryCast(u[p],e.isExpressionStatement);h&&(g.push(h),p++),g.push(u[p]),p++,g.push(e.createStatement(e.createAssignment(a.left,e.cast(i.name,e.isIdentifier))))}for(;!e.isReturnStatement(e.elementAt(u,d));)d--;e.addRange(g,u,p,d),d<-1&&e.addRange(g,u,d+1);return e.addRange(g,r),e.addRange(g,o,1),e.recreateOuterExpressions(t.expression,e.recreateOuterExpressions(i.initializer,e.recreateOuterExpressions(a&&a.right,e.updateCall(l,e.recreateOuterExpressions(l.expression,e.updateFunctionExpression(c,void 0,void 0,void 0,void 0,c.parameters,void 0,e.updateBlock(c.body,g))),void 0,l.arguments))))}(t);if(64&t.transformFlags)return fe(t,!0);return e.updateCall(t,e.visitNode(t.expression,S,e.isExpression),void 0,e.visitNodes(t.arguments,T,e.isExpression))}(o);case 182:return function(n){if(524288&n.transformFlags){var o=e.createCallBinding(e.createPropertyAccess(n.expression,"bind"),g),r=o.target,i=o.thisArg;return e.createNew(e.createFunctionApply(e.visitNode(r,T,e.isExpression),i,_e(e.createNodeArray([e.createVoidZero()].concat(n.arguments)),!1,!1,!1)),void 0,[])}return e.visitEachChild(n,T,t)}(o);case 185:return j(o,!0);case 194:return z(o,!0);case 13:case 14:case 15:case 16:return function(t){return e.setTextRange(e.createLiteral(t.text),t)}(o);case 9:return function(t){if(t.hasExtendedUnicodeEscape)return e.setTextRange(e.createLiteral(t.text),t);return t}(o);case 8:return function(t){if(48&t.numericLiteralFlags)return e.setTextRange(e.createNumericLiteral(t.text),t);return t}(o);case 183:return function(o){var r=e.visitNode(o.tag,T,e.isExpression),s=[void 0],l=[],c=[],u=o.template;if(e.isNoSubstitutionTemplateLiteral(u))l.push(e.createLiteral(u.text)),c.push(ve(u));else{l.push(e.createLiteral(u.head.text)),c.push(ve(u.head));for(var p=0,d=u.templateSpans;p<d.length;p++){var g=d[p];l.push(e.createLiteral(g.literal.text)),c.push(ve(g.literal)),s.push(e.visitNode(g.expression,T,e.isExpression))}}var h=function(t,n,o){return t.requestEmitHelper(a),e.createCall(e.getHelperName("__makeTemplateObject"),void 0,[n,o])}(t,e.createArrayLiteral(l),e.createArrayLiteral(c));if(e.isExternalModule(n)){var f=e.createUniqueName("templateObject");_=f,i=e.append(i,e.createVariableDeclaration(_)),s[0]=e.createLogicalOr(f,e.createAssignment(f,h))}else s[0]=h;var _;return e.createCall(r,void 0,s)}(o);case 196:return function(t){var n=[];(function(t,n){if(!function(t){return e.Debug.assert(0!==t.templateSpans.length),0!==t.head.text.length||0===t.templateSpans[0].literal.text.length}(n))return;t.push(e.createLiteral(n.head.text))})(n,t),function(t,n){for(var o=0,r=n.templateSpans;o<r.length;o++){var i=r[o];t.push(e.visitNode(i.expression,T,e.isExpression)),0!==i.literal.text.length&&t.push(e.createLiteral(i.literal.text))}}(n,t);var o=e.reduceLeft(n,e.createAdd);e.nodeIsSynthesized(o)&&(o.pos=t.pos,o.end=t.end);return o}(o);case 197:return function(n){return e.visitEachChild(n,T,t)}(o);case 198:return function(t){return e.visitNode(t.expression,T,e.isExpression)}(o);case 97:return Te(!1);case 99:return function(t){if(l)return 2&r?(l.containsLexicalThis=!0,t):l.thisName||(l.thisName=e.createUniqueName("this"));return t}(o);case 204:return function(t){if(94===t.keywordToken&&"target"===t.name.escapedText)return r|=8192&r?32768:16384,e.createIdentifier("_newTarget");return t}(o);case 151:return function(t){e.Debug.assert(!e.isComputedPropertyName(t.name));var n=V(t,e.moveRangePos(t,-1),void 0,void 0);return e.setEmitFlags(n,512|e.getEmitFlags(n)),e.setTextRange(e.createPropertyAssignment(t.name,n),t)}(o);case 153:case 154:return function(n){e.Debug.assert(!e.isComputedPropertyName(n.name));var o=l;l=void 0;var r,i=y(16286,65);if(32768&n.transformFlags){var s=e.visitParameterList(n.parameters,T,t),a=G(n);r=153===n.kind?e.updateGetAccessor(n,n.decorators,n.modifiers,n.name,s,n.type,a):e.updateSetAccessor(n,n.decorators,n.modifiers,n.name,s,a)}else r=e.visitEachChild(n,T,t);return k(i,49152,0),l=o,r}(o);case 208:return function(n){var o,r=y(0,e.hasModifier(n,1)?32:0);if(l&&0==(3&n.declarationList.flags)){for(var i=void 0,s=0,a=n.declarationList.declarations;s<a.length;s++){var c=a[s];if(se(l,c),c.initializer){var u=void 0;e.isBindingPattern(c.name)?u=e.flattenDestructuringAssignment(c,T,t,0):(u=e.createBinary(c.name,58,e.visitNode(c.initializer,T,e.isExpression)),e.setTextRange(u,c)),i=e.append(i,u)}}o=i?e.setTextRange(e.createStatement(e.inlineExpressions(i)),n):void 0}else o=e.visitEachChild(n,T,t);return k(r,0,0),o}(o);case 219:return function(n){if(l)return l.nonLocalJumps|=8,b(n)&&(n=C(n)),e.createReturn(e.createObjectLiteral([e.createPropertyAssignment(e.createIdentifier("value"),n.expression?e.visitNode(n.expression,T,e.isExpression):e.createVoidZero())]));if(b(n))return C(n);return e.visitEachChild(n,T,t)}(o);default:return e.visitEachChild(o,T,t)}}(o):o}function E(e){return v(e)?K(e,!0):e}function S(e){return 97===e.kind?Te(!0):T(e)}function C(t){return e.setOriginalNode(e.createReturn(e.createIdentifier("_this")),t)}function x(n){n.name&&Ee();var i=e.getClassExtendsHeritageClauseElement(n),a=e.createFunctionExpression(void 0,void 0,void 0,void 0,i?[e.createParameter(void 0,void 0,void 0,"_super")]:[],void 0,function(n,i){var a=[];u(),function(n,o,r){r&&n.push(e.setTextRange(e.createStatement(function(t,n){return t.requestEmitHelper(s),e.createCall(e.getHelperName("__extends"),void 0,[n,e.createIdentifier("_super")])}(t,e.getLocalName(o))),r))}(a,n,i),function(n,o,i){var s=l;l=void 0;var a=y(16278,73),c=e.getFirstConstructorWithBody(o),u=function(t,n){if(!t||!n)return!1;if(e.some(t.parameters))return!1;var o=e.firstOrUndefined(t.body.statements);if(!o||!e.nodeIsSynthesized(o)||210!==o.kind)return!1;var r=o.expression;if(!e.nodeIsSynthesized(r)||181!==r.kind)return!1;var i=r.expression;if(!e.nodeIsSynthesized(i)||97!==i.kind)return!1;var s=e.singleOrUndefined(r.arguments);if(!s||!e.nodeIsSynthesized(s)||198!==s.kind)return!1;var a=s.expression;return e.isIdentifier(a)&&"arguments"===a.escapedText}(c,void 0!==i),g=e.createFunctionDeclaration(void 0,void 0,void 0,e.getInternalName(o),void 0,function(n,o){return e.visitParameterList(n&&!o&&n.parameters,T,t)||[]}(c,u),void 0,function(t,n,o,i){var s=[];p();var a=-1;i?a=0:t&&(a=e.addStandardPrologue(s,t.body.statements,!1));t&&(D(s,t),R(s,t,i),i||(a=e.addCustomPrologue(s,t.body.statements,a,T)),e.Debug.assert(a>=0,"statementOffset not initialized correctly!"));var l=o&&95!==e.skipOuterExpressions(o.expression).kind,c=function(t,n,o,r,i){if(!o)return n&&O(t,n),0;if(!n)return t.push(e.createReturn(I())),2;if(r)return P(t,n,I()),Se(),1;var s,a,l=n.body.statements;i<l.length&&210===(s=l[i]).kind&&e.isSuperCall(s.expression)&&(a=function(e){return fe(e,!1)}(s.expression));if(a&&i===l.length-1&&!(49152&n.transformFlags)){var c=e.createReturn(a);return 194===a.kind&&181===a.left.kind||e.Debug.fail("Assumed generated super call would have form 'super.call(...) || this'."),e.setCommentRange(c,e.getCommentRange(e.setEmitFlags(a.left,1536))),t.push(c),2}if(P(t,n,a||A(),s),a)return 1;return 0}(s,t,l,i,a);1!==c&&2!==c||a++;t&&(1===c&&(r|=4096),e.addRange(s,e.visitNodes(t.body.statements,T,e.isStatement,a)));!l||2===c||t&&B(t.body)||s.push(e.createReturn(e.createIdentifier("_this")));e.addRange(s,d()),t&&L(s,t,!1);var u=e.createBlock(e.setTextRange(e.createNodeArray(s),t?t.body.statements:n.members),!0);e.setTextRange(u,t?t.body:n),t||e.setEmitFlags(u,1536);return u}(c,o,i,u));e.setTextRange(g,c||o),i&&e.setEmitFlags(g,8);n.push(g),k(a,49152,0),l=s}(a,n,i),function(t,n){for(var o=0,r=n.members;o<r.length;o++){var i=r[o];switch(i.kind){case 206:t.push(M(i));break;case 151:t.push(F(Ce(n,i),i,n));break;case 153:case 154:var s=e.getAllAccessorDeclarations(n.members,i);i===s.firstAccessor&&t.push(U(Ce(n,i),s,n));break;case 152:break;default:e.Debug.failBadSyntaxKind(n)}}}(a,n);var c=e.createTokenRange(e.skipTrivia(o,n.members.end),18),g=e.getInternalName(n),h=e.createPartiallyEmittedExpression(g);h.end=c.end,e.setEmitFlags(h,1536);var f=e.createReturn(h);f.pos=c.pos,e.setEmitFlags(f,1920),a.push(f),e.addRange(a,d());var _=e.createBlock(e.setTextRange(e.createNodeArray(a),n.members),!0);return e.setEmitFlags(_,1536),_}(n,i));65536&e.getEmitFlags(n)&&e.setEmitFlags(a,65536);var c=e.createPartiallyEmittedExpression(a);c.end=n.end,e.setEmitFlags(c,1536);var g=e.createPartiallyEmittedExpression(c);g.end=e.skipTrivia(o,n.pos),e.setEmitFlags(g,1536);var h=e.createParen(e.createCall(g,void 0,i?[e.visitNode(i.expression,T,e.isExpression)]:[]));return e.addSyntheticLeadingComment(h,3,"* @class "),h}function B(t){if(219===t.kind)return!0;if(211===t.kind){var n=t;if(n.elseStatement)return B(n.thenStatement)&&B(n.elseStatement)}else if(207===t.kind){var o=e.lastOrUndefined(t.statements);if(o&&B(o))return!0}return!1}function A(){return e.setEmitFlags(e.createThis(),4)}function I(){return e.createLogicalOr(e.createLogicalAnd(e.createStrictInequality(e.createIdentifier("_super"),e.createNull()),e.createFunctionApply(e.createIdentifier("_super"),A(),e.createIdentifier("arguments"))),A())}function D(t,n){if(function(e){return 0!=(131072&e.transformFlags)}(n))for(var o=0,r=n.parameters;o<r.length;o++){var i=r[o],s=i.name,a=i.initializer;i.dotDotDotToken||(e.isBindingPattern(s)?N(t,i,s,a):a&&w(t,i,s,a))}}function N(n,o,r,i){var s=e.getGeneratedNameForNode(o);r.elements.length>0?n.push(e.setEmitFlags(e.createVariableStatement(void 0,e.createVariableDeclarationList(e.flattenDestructuringBinding(o,T,t,0,s))),1048576)):i&&n.push(e.setEmitFlags(e.createStatement(e.createAssignment(s,e.visitNode(i,T,e.isExpression))),1048576))}function w(t,n,o,r){r=e.visitNode(r,T,e.isExpression);var i=e.createIf(e.createTypeCheck(e.getSynthesizedClone(o),"undefined"),e.setEmitFlags(e.setTextRange(e.createBlock([e.createStatement(e.setTextRange(e.createAssignment(e.setEmitFlags(e.getMutableClone(o),48),e.setEmitFlags(r,48|e.getEmitFlags(r))),n))]),n),417));i.startsOnNewLine=!0,e.setTextRange(i,n),e.setEmitFlags(i,1048992),t.push(i)}function R(t,n,o){var r=e.lastOrUndefined(n.parameters);if(function(e,t){return e&&e.dotDotDotToken&&71===e.name.kind&&!t}(r,o)){var i=e.getMutableClone(r.name);e.setEmitFlags(i,48);var s=e.getSynthesizedClone(r.name),a=n.parameters.length-1,l=e.createLoopVariable();t.push(e.setEmitFlags(e.setTextRange(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(i,void 0,e.createArrayLiteral([]))])),r),1048576));var c=e.createFor(e.setTextRange(e.createVariableDeclarationList([e.createVariableDeclaration(l,void 0,e.createLiteral(a))]),r),e.setTextRange(e.createLessThan(l,e.createPropertyAccess(e.createIdentifier("arguments"),"length")),r),e.setTextRange(e.createPostfixIncrement(l),r),e.createBlock([e.startOnNewLine(e.setTextRange(e.createStatement(e.createAssignment(e.createElementAccess(s,0===a?l:e.createSubtract(l,e.createLiteral(a))),e.createElementAccess(e.createIdentifier("arguments"),l))),r))]));e.setEmitFlags(c,1048576),e.startOnNewLine(c),t.push(c)}}function O(t,n){32768&n.transformFlags&&187!==n.kind&&P(t,n,e.createThis())}function P(t,n,o,r){Se();var i=e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration("_this",void 0,o)]));e.setEmitFlags(i,1050112),e.setTextRange(i,r),e.setSourceMapRange(i,n),t.push(i)}function L(t,n,o){if(16384&r){var i=void 0;switch(n.kind){case 187:return t;case 151:case 153:case 154:i=e.createVoidZero();break;case 152:i=e.createPropertyAccess(e.setEmitFlags(e.createThis(),4),"constructor");break;case 228:case 186:i=e.createConditional(e.createLogicalAnd(e.setEmitFlags(e.createThis(),4),e.createBinary(e.setEmitFlags(e.createThis(),4),93,e.getLocalName(n))),e.createPropertyAccess(e.setEmitFlags(e.createThis(),4),"constructor"),e.createVoidZero());break;default:e.Debug.failBadSyntaxKind(n)}var s=e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration("_newTarget",void 0,i)]));if(o)return[s].concat(t);t.unshift(s)}return t}function M(t){return e.setTextRange(e.createEmptyStatement(),t)}function F(t,n,o){var i=y(0,0),s=e.getCommentRange(n),a=e.getSourceMapRange(n),l=e.createMemberAccessForPropertyName(t,e.visitNode(n.name,T,e.isPropertyName),n.name),c=V(n,n,void 0,o);e.setEmitFlags(c,1536),e.setSourceMapRange(c,a);var u=e.setTextRange(e.createStatement(e.createAssignment(l,c)),n);return e.setOriginalNode(u,n),e.setCommentRange(u,s),e.setEmitFlags(u,48),k(i,49152,49152&r?16384:0),u}function U(t,n,o){var r=e.createStatement(H(t,n,o,!1));return e.setEmitFlags(r,1536),e.setSourceMapRange(r,e.getSourceMapRange(n.firstAccessor)),r}function H(t,n,o,i){var s=n.firstAccessor,a=n.getAccessor,l=n.setAccessor,c=y(0,0),u=e.getMutableClone(t);e.setEmitFlags(u,1568),e.setSourceMapRange(u,s.name);var p=e.createExpressionForPropertyName(e.visitNode(s.name,T,e.isPropertyName));e.setEmitFlags(p,1552),e.setSourceMapRange(p,s.name);var d=[];if(a){var g=V(a,void 0,void 0,o);e.setSourceMapRange(g,e.getSourceMapRange(a)),e.setEmitFlags(g,512);var h=e.createPropertyAssignment("get",g);e.setCommentRange(h,e.getCommentRange(a)),d.push(h)}if(l){var f=V(l,void 0,void 0,o);e.setSourceMapRange(f,e.getSourceMapRange(l)),e.setEmitFlags(f,512);var _=e.createPropertyAssignment("set",f);e.setCommentRange(_,e.getCommentRange(l)),d.push(_)}d.push(e.createPropertyAssignment("enumerable",e.createTrue()),e.createPropertyAssignment("configurable",e.createTrue()));var m=e.createCall(e.createPropertyAccess(e.createIdentifier("Object"),"defineProperty"),void 0,[u,p,e.createObjectLiteral(d,!0)]);return i&&(m.startsOnNewLine=!0),k(c,49152,49152&r?16384:0),m}function V(n,o,i,s){var a=l;l=void 0;var c=s&&e.isClassLike(s)&&!e.hasModifier(n,32)?y(16286,73):y(16286,65),u=e.visitParameterList(n.parameters,T,t),p=G(n);return 16384&r&&!i&&(228===n.kind||186===n.kind)&&(i=e.getGeneratedNameForNode(n)),k(c,49152,0),l=a,e.setOriginalNode(e.setTextRange(e.createFunctionExpression(void 0,n.asteriskToken,i,void 0,u,void 0,p),o),n)}function G(o){var r,i,s,a=!1,l=!1,c=[],u=o.body;if(p(),e.isBlock(u)&&(s=e.addStandardPrologue(c,u.statements,!1)),O(c,o),D(c,o),R(c,o,!1),!a&&c.length>0&&(a=!0),e.isBlock(u))s=e.addCustomPrologue(c,u.statements,s,T),r=u.statements,e.addRange(c,e.visitNodes(u.statements,T,e.isStatement,s)),!a&&u.multiLine&&(a=!0);else{e.Debug.assert(187===o.kind),r=e.moveRangeEnd(u,-1);var d=o.equalsGreaterThanToken;e.nodeIsSynthesized(d)||e.nodeIsSynthesized(u)||(e.rangeEndIsOnSameLineAsRangeStart(d,u,n)?l=!0:a=!0);var g=e.visitNode(u,T,e.isExpression),h=e.createReturn(g);e.setTextRange(h,u),e.setEmitFlags(h,1440),c.push(h),i=u}var f=t.endLexicalEnvironment();e.addRange(c,f),L(c,o,!1),!a&&f&&f.length&&(a=!0);var _=e.createBlock(e.setTextRange(e.createNodeArray(c),r),a);return e.setTextRange(_,o.body),!a&&l&&e.setEmitFlags(_,1),i&&e.setTokenSourceMapRange(_,18,i),e.setOriginalNode(_,o.body),_}function W(n){var o=e.visitFunctionBody(n.body,E,t);return e.updateBlock(o,e.setTextRange(e.createNodeArray(L(o.statements,n,!0)),o.statements))}function K(n,o){if(o)return e.visitEachChild(n,T,t);var i=256&r?y(4032,512):y(3904,128),s=e.visitEachChild(n,T,t);return k(i,0,0),s}function j(n,o){if(!o)switch(n.expression.kind){case 185:return e.updateParen(n,j(n.expression,!1));case 194:return e.updateParen(n,z(n.expression,!1))}return e.visitEachChild(n,T,t)}function z(n,o){return e.isDestructuringAssignment(n)?e.flattenDestructuringAssignment(n,T,t,0,o):e.visitEachChild(n,T,t)}function $(n){var o=n.name;if(e.isBindingPattern(o))return X(n);if(!n.initializer&&function(e){var t=f.getNodeCheckFlags(e),n=131072&t,o=262144&t;return!(0!=(64&r)||n&&o&&0!=(512&r))&&0==(2048&r)&&(!f.isDeclarationWithCollidingName(e)||o&&!n&&0==(3072&r))}(n)){var i=e.getMutableClone(n);return i.initializer=e.createVoidZero(),i}return e.visitEachChild(n,T,t)}function X(n){var o,r=y(32,0);return o=e.isBindingPattern(n.name)?e.flattenDestructuringBinding(n,T,t,0,void 0,0!=(32&r)):e.visitEachChild(n,T,t),k(r,0,0),o}function Y(t){l.labels.set(e.idText(t.label),!0)}function J(t){l.labels.set(e.idText(t.label),!1)}function q(n,o,i,s,a){var c=y(n,o),p=function(n,o,i){if(!ie(n)){var s=void 0;l&&(s=l.allowedNonLabeledJumps,l.allowedNonLabeledJumps=6);var a=i?i(n,o,void 0):e.restoreEnclosingLabel(e.visitEachChild(n,T,t),o,l&&J);return l&&(l.allowedNonLabeledJumps=s),a}var c,p=e.createUniqueName("_loop");switch(n.kind){case 214:case 215:case 216:var g=n.initializer;g&&227===g.kind&&(c=g)}var h=[],f=[];if(c&&3&e.getCombinedNodeFlags(c))for(var _=0,m=c.declarations;_<m.length;_++){pe(m[_],h,f)}var y=l;l={loopOutParameters:f},y&&(y.argumentsName&&(l.argumentsName=y.argumentsName),y.thisName&&(l.thisName=y.thisName),y.hoistedLocalVariables&&(l.hoistedLocalVariables=y.hoistedLocalVariables));u();var k=e.visitNode(n.statement,T,e.isStatement,e.liftToBlock),b=d(),v=l;if(l=y,f.length||b){var E=e.isBlock(k)?k.statements.slice():[k];f.length&&le(f,1,E),e.addRange(E,b),k=e.createBlock(E,!0)}e.isBlock(k)?k.multiLine=!0:k=e.createBlock([k],!0);var S=0!=(16777216&n.statement.transformFlags),C=S&&0!=(4&r),x=0;v.containsLexicalThis&&(x|=8);C&&(x|=262144);var B,A=[e.createVariableStatement(void 0,e.setEmitFlags(e.createVariableDeclarationList([e.createVariableDeclaration(p,void 0,e.setEmitFlags(e.createFunctionExpression(void 0,S?e.createToken(39):void 0,void 0,void 0,h,void 0,k),x))]),2097152))];v.argumentsName&&(y?y.argumentsName=v.argumentsName:(B||(B=[])).push(e.createVariableDeclaration(v.argumentsName,void 0,e.createIdentifier("arguments"))));v.thisName&&(y?y.thisName=v.thisName:(B||(B=[])).push(e.createVariableDeclaration(v.thisName,void 0,e.createIdentifier("this"))));if(v.hoistedLocalVariables)if(y)y.hoistedLocalVariables=v.hoistedLocalVariables;else{B||(B=[]);for(var I=0,D=v.hoistedLocalVariables;I<D.length;I++){var N=D[I];B.push(e.createVariableDeclaration(N))}}if(f.length){B||(B=[]);for(var w=0,R=f;w<R.length;w++){var O=R[w];B.push(e.createVariableDeclaration(O.outParamName))}}B&&A.push(e.createVariableStatement(void 0,e.createVariableDeclarationList(B)));var P,L=function(t,n,o,r){var i=l,s=[],a=!(-5&o.nonLocalJumps||o.labeledNonLocalBreaks||o.labeledNonLocalContinues),c=e.createCall(t,void 0,e.map(n,(function(e){return e.name}))),u=r?e.createYield(e.createToken(39),e.setEmitFlags(c,8388608)):c;if(a)s.push(e.createStatement(u)),le(o.loopOutParameters,0,s);else{var p=e.createUniqueName("state"),d=e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(p,void 0,u)]));if(s.push(d),le(o.loopOutParameters,0,s),8&o.nonLocalJumps){var g=void 0;i?(i.nonLocalJumps|=8,g=e.createReturn(p)):g=e.createReturn(e.createPropertyAccess(p,"value")),s.push(e.createIf(e.createBinary(e.createTypeOf(p),34,e.createLiteral("object")),g))}if(2&o.nonLocalJumps&&s.push(e.createIf(e.createBinary(p,34,e.createLiteral("break")),e.createBreak())),o.labeledNonLocalBreaks||o.labeledNonLocalContinues){var h=[];ue(o.labeledNonLocalBreaks,!0,p,i,h),ue(o.labeledNonLocalContinues,!1,p,i,h),s.push(e.createSwitch(p,e.createCaseBlock(h)))}}return s}(p,h,v,S);if(i)P=i(n,o,L);else{var M=e.getMutableClone(n);M.statement=void 0,(M=e.visitEachChild(M,T,t)).statement=e.createBlock(L,!0),M.transformFlags=0,e.aggregateTransformFlags(M),P=e.restoreEnclosingLabel(M,o,l&&J)}return A.push(P),A}(i,s,a);return k(c,0,0),p}function Z(e,t){return q(0,256,e,t)}function Q(e,t){return q(3008,1280,e,t)}function ee(e,t){return q(1984,2304,e,t)}function te(e,t){return q(1984,2304,e,t,h.downlevelIteration?re:oe)}function ne(n,o,r){var i,s,a=[];if(e.isVariableDeclarationList(n.initializer)){3&n.initializer.flags&&Ee();var l=e.firstOrUndefined(n.initializer.declarations);if(l&&e.isBindingPattern(l.name)){var c=e.flattenDestructuringBinding(l,T,t,0,o),u=e.setTextRange(e.createVariableDeclarationList(c),n.initializer);e.setOriginalNode(u,n.initializer);var p=c[0],d=e.lastOrUndefined(c);e.setSourceMapRange(u,e.createRange(p.pos,d.end)),a.push(e.createVariableStatement(void 0,u))}else a.push(e.setTextRange(e.createVariableStatement(void 0,e.setOriginalNode(e.setTextRange(e.createVariableDeclarationList([e.createVariableDeclaration(l?l.name:e.createTempVariable(void 0),void 0,o)]),e.moveRangePos(n.initializer,-1)),n.initializer)),e.moveRangeEnd(n.initializer,-1)))}else{var g=e.createAssignment(n.initializer,o);e.isDestructuringAssignment(g)?(e.aggregateTransformFlags(g),a.push(e.createStatement(z(g,!1)))):(g.end=n.initializer.end,a.push(e.setTextRange(e.createStatement(e.visitNode(g,T,e.isExpression)),e.moveRangeEnd(n.initializer,-1))))}if(r)e.addRange(a,r);else{var h=e.visitNode(n.statement,T,e.isStatement,e.liftToBlock);e.isBlock(h)?(e.addRange(a,h.statements),i=h,s=h.statements):a.push(h)}return e.setEmitFlags(e.setTextRange(e.createBlock(e.setTextRange(e.createNodeArray(a),s),!0),i),432)}function oe(t,n,o){var r=e.visitNode(t.expression,T,e.isExpression),i=e.createLoopVariable(),s=e.isIdentifier(r)?e.getGeneratedNameForNode(r):e.createTempVariable(void 0);e.setEmitFlags(r,48|e.getEmitFlags(r));var a=e.setTextRange(e.createFor(e.setEmitFlags(e.setTextRange(e.createVariableDeclarationList([e.setTextRange(e.createVariableDeclaration(i,void 0,e.createLiteral(0)),e.moveRangePos(t.expression,-1)),e.setTextRange(e.createVariableDeclaration(s,void 0,r),t.expression)]),t.expression),2097152),e.setTextRange(e.createLessThan(i,e.createPropertyAccess(s,"length")),t.expression),e.setTextRange(e.createPostfixIncrement(i),t.expression),ne(t,e.createElementAccess(s,i),o)),t);return e.setEmitFlags(a,256),e.setTextRange(a,t),e.restoreEnclosingLabel(a,n,l&&J)}function re(n,o,r){var i=e.visitNode(n.expression,T,e.isExpression),s=e.isIdentifier(i)?e.getGeneratedNameForNode(i):e.createTempVariable(void 0),a=e.isIdentifier(i)?e.getGeneratedNameForNode(s):e.createTempVariable(void 0),c=e.createUniqueName("e"),u=e.getGeneratedNameForNode(c),p=e.createTempVariable(void 0),d=e.createValuesHelper(t,i,n.expression),h=e.createCall(e.createPropertyAccess(s,"next"),void 0,[]);g(c),g(p);var f=e.setEmitFlags(e.setTextRange(e.createFor(e.setEmitFlags(e.setTextRange(e.createVariableDeclarationList([e.setTextRange(e.createVariableDeclaration(s,void 0,d),n.expression),e.createVariableDeclaration(a,void 0,h)]),n.expression),2097152),e.createLogicalNot(e.createPropertyAccess(a,"done")),e.createAssignment(a,h),ne(n,e.createPropertyAccess(a,"value"),r)),n),256);return e.createTry(e.createBlock([e.restoreEnclosingLabel(f,o,l&&J)]),e.createCatchClause(e.createVariableDeclaration(u),e.setEmitFlags(e.createBlock([e.createStatement(e.createAssignment(c,e.createObjectLiteral([e.createPropertyAssignment("error",u)])))]),1)),e.createBlock([e.createTry(e.createBlock([e.setEmitFlags(e.createIf(e.createLogicalAnd(e.createLogicalAnd(a,e.createLogicalNot(e.createPropertyAccess(a,"done"))),e.createAssignment(p,e.createPropertyAccess(s,"return"))),e.createStatement(e.createFunctionCall(p,s,[]))),1)]),void 0,e.setEmitFlags(e.createBlock([e.setEmitFlags(e.createIf(c,e.createThrow(e.createPropertyAccess(c,"error"))),1)]),1))]))}function ie(e){return 0!=(65536&f.getNodeCheckFlags(e))}function se(t,n){t.hoistedLocalVariables||(t.hoistedLocalVariables=[]),function n(o){if(71===o.kind)t.hoistedLocalVariables.push(o);else for(var r=0,i=o.elements;r<i.length;r++){var s=i[r];e.isOmittedExpression(s)||n(s.name)}}(n.name)}function ae(t,n){var o=0===n?t.outParamName:t.originalName,r=0===n?t.originalName:t.outParamName;return e.createBinary(r,58,o)}function le(t,n,o){for(var r=0,i=t;r<i.length;r++){var s=i[r];o.push(e.createStatement(ae(s,n)))}}function ce(t,n,o,r){n?(t.labeledNonLocalBreaks||(t.labeledNonLocalBreaks=e.createMap()),t.labeledNonLocalBreaks.set(o,r)):(t.labeledNonLocalContinues||(t.labeledNonLocalContinues=e.createMap()),t.labeledNonLocalContinues.set(o,r))}function ue(t,n,o,r,i){t&&t.forEach((function(t,s){var a=[];if(!r||r.labels&&r.labels.get(s)){var l=e.createIdentifier(s);a.push(n?e.createBreak(l):e.createContinue(l))}else ce(r,n,s,t),a.push(e.createReturn(o));i.push(e.createCaseClause(e.createLiteral(t),a))}))}function pe(t,n,o){var r=t.name;if(e.isBindingPattern(r))for(var i=0,s=r.elements;i<s.length;i++){var a=s[i];e.isOmittedExpression(a)||pe(a,n,o)}else if(n.push(e.createParameter(void 0,void 0,void 0,r)),2097152&f.getNodeCheckFlags(t)){var l=e.createUniqueName("out_"+e.idText(r));o.push({originalName:r,outParamName:l})}}function de(t,n,o){var r=e.createAssignment(e.createMemberAccessForPropertyName(n,e.visitNode(t.name,T,e.isPropertyName)),e.visitNode(t.initializer,T,e.isExpression));return e.setTextRange(r,t),o&&(r.startsOnNewLine=!0),r}function ge(t,n,o){var r=e.createAssignment(e.createMemberAccessForPropertyName(n,e.visitNode(t.name,T,e.isPropertyName)),e.getSynthesizedClone(t.name));return e.setTextRange(r,t),o&&(r.startsOnNewLine=!0),r}function he(t,n,o,i){var s=y(0,0),a=e.createAssignment(e.createMemberAccessForPropertyName(n,e.visitNode(t.name,T,e.isPropertyName)),V(t,t,void 0,o));return e.setTextRange(a,t),i&&(a.startsOnNewLine=!0),k(s,49152,49152&r?16384:0),a}function fe(t,n){var o,r=e.createCallBinding(t.expression,g),i=r.target,s=r.thisArg;if(97===t.expression.kind&&e.setEmitFlags(s,4),o=524288&t.transformFlags?e.createFunctionApply(e.visitNode(i,S,e.isExpression),e.visitNode(s,T,e.isExpression),_e(t.arguments,!1,!1,!1)):e.createFunctionCall(e.visitNode(i,S,e.isExpression),e.visitNode(s,T,e.isExpression),e.visitNodes(t.arguments,T,e.isExpression),t),97===t.expression.kind){var a=e.createThis();e.setEmitFlags(a,4);var l=e.createLogicalOr(o,a);o=n?e.createAssignment(e.createIdentifier("_this"),l):l}return e.setOriginalNode(o,t)}function _e(n,o,r,i){var s=n.length,a=e.flatten(e.spanMap(n,me,(function(e,t,n,o){return t(e,r,i&&o===s)})));if(h.downlevelIteration){if(1===a.length){var l=a[0];if(e.isCallExpression(l)&&e.isIdentifier(l.expression)&&4096&e.getEmitFlags(l.expression)&&"___spread"===l.expression.escapedText)return a[0]}return e.createSpreadHelper(t,a)}if(1===a.length){var c=n[0];return o&&e.isSpreadElement(c)&&177!==c.expression.kind?e.createArraySlice(a[0]):a[0]}return e.createArrayConcat(a.shift(),a)}function me(t){return e.isSpreadElement(t)?ye:ke}function ye(t){return e.map(t,be)}function ke(t,n,o){return e.createArrayLiteral(e.visitNodes(e.createNodeArray(t,o),T,e.isExpression),n)}function be(t){return e.visitNode(t.expression,T,e.isExpression)}function ve(t){var o=e.getSourceTextOfNodeFromSourceFile(n,t),r=13===t.kind||16===t.kind;return o=(o=o.substring(1,o.length-(r?1:2))).replace(/\r\n?/g,"\n"),e.setTextRange(e.createLiteral(o),t)}function Te(t){return 8&r&&!t?e.createPropertyAccess(e.createIdentifier("_super"),"prototype"):e.createIdentifier("_super")}function Ee(){0==(2&c)&&(c|=2,t.enableSubstitution(71))}function Se(){0==(1&c)&&(c|=1,t.enableSubstitution(99),t.enableEmitNotification(152),t.enableEmitNotification(151),t.enableEmitNotification(153),t.enableEmitNotification(154),t.enableEmitNotification(187),t.enableEmitNotification(186),t.enableEmitNotification(228))}function Ce(t,n){return e.hasModifier(n,32)?e.getInternalName(t):e.createPropertyAccess(e.getInternalName(t),"prototype")}};var s={name:"typescript:extends",scoped:!1,priority:0,text:"\n            var __extends = (this && this.__extends) || (function () {\n                var extendStatics = Object.setPrototypeOf ||\n                    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n                    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n                return function (d, b) {\n                    extendStatics(d, b);\n                    function __() { this.constructor = d; }\n                    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n                };\n            })();"},a={name:"typescript:makeTemplateObject",scoped:!1,priority:0,text:'\n            var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n                if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }\n                return cooked;\n            };'}}(ts||(ts={})),function(e){e.transformES5=function(t){var n,o,r=t.getCompilerOptions();1!==r.jsx&&3!==r.jsx||(n=t.onEmitNode,t.onEmitNode=function(t,r,i){switch(r.kind){case 251:case 252:case 250:var s=r.tagName;o[e.getOriginalNodeId(s)]=!0}n(t,r,i)},t.enableEmitNotification(251),t.enableEmitNotification(252),t.enableEmitNotification(250),o=[]);var i=t.onSubstituteNode;return t.onSubstituteNode=function(t,n){if(n.id&&o&&o[n.id])return i(t,n);if(n=i(t,n),e.isPropertyAccessExpression(n))return function(t){var n=s(t.name);if(n)return e.setTextRange(e.createElementAccess(t.expression,n),t);return t}(n);if(e.isPropertyAssignment(n))return function(t){var n=e.isIdentifier(t.name)&&s(t.name);if(n)return e.updatePropertyAssignment(t,n,t.initializer);return t}(n);return n},t.enableSubstitution(179),t.enableSubstitution(261),function(e){return e};function s(t){var n=t.originalKeywordKind||(e.nodeIsSynthesized(t)?e.stringToToken(e.idText(t)):void 0);if(n>=72&&n<=107)return e.setTextRange(e.createLiteral(t),t)}}}(ts||(ts={})),function(e){var t,n,o,r,i;!function(e){e[e.Nop=0]="Nop",e[e.Statement=1]="Statement",e[e.Assign=2]="Assign",e[e.Break=3]="Break",e[e.BreakWhenTrue=4]="BreakWhenTrue",e[e.BreakWhenFalse=5]="BreakWhenFalse",e[e.Yield=6]="Yield",e[e.YieldStar=7]="YieldStar",e[e.Return=8]="Return",e[e.Throw=9]="Throw",e[e.Endfinally=10]="Endfinally"}(t||(t={})),function(e){e[e.Open=0]="Open",e[e.Close=1]="Close"}(n||(n={})),function(e){e[e.Exception=0]="Exception",e[e.With=1]="With",e[e.Switch=2]="Switch",e[e.Loop=3]="Loop",e[e.Labeled=4]="Labeled"}(o||(o={})),function(e){e[e.Try=0]="Try",e[e.Catch=1]="Catch",e[e.Finally=2]="Finally",e[e.Done=3]="Done"}(r||(r={})),function(e){e[e.Next=0]="Next",e[e.Throw=1]="Throw",e[e.Return=2]="Return",e[e.Break=3]="Break",e[e.Yield=4]="Yield",e[e.YieldStar=5]="YieldStar",e[e.Catch=6]="Catch",e[e.Endfinally=7]="Endfinally"}(i||(i={})),e.transformGenerators=function(t){var n,o,r,i,a,l,c,u,p,d,g=t.resumeLexicalEnvironment,h=t.endLexicalEnvironment,f=t.hoistFunctionDeclaration,_=t.hoistVariableDeclaration,m=t.getCompilerOptions(),y=e.getEmitScriptTarget(m),k=t.getEmitResolver(),b=t.onSubstituteNode;t.onSubstituteNode=function(t,r){if(r=b(t,r),1===t)return function(t){if(e.isIdentifier(t))return function(t){if(!e.isGeneratedIdentifier(t)&&n&&n.has(e.idText(t))){var r=e.getOriginalNode(t);if(e.isIdentifier(r)&&r.parent){var i=k.getReferencedValueDeclaration(r);if(i){var s=o[e.getOriginalNodeId(i)];if(s){var a=e.getMutableClone(s);return e.setSourceMapRange(a,t),e.setCommentRange(a,t),a}}}}return t}(t);return t}(r);return r};var v,T,E,S,C,x,B,A,I,D,N,w,R=1,O=0,P=0;return function(n){if(n.isDeclarationFile||0==(512&n.transformFlags))return n;var o=e.visitEachChild(n,L,t);return e.addEmitHelpers(o,t.readEmitHelpers()),o};function L(n){var o=n.transformFlags;return i?function(n){switch(n.kind){case 212:case 213:return function(n){return i?(oe(),n=e.visitEachChild(n,L,t),ie(),n):e.visitEachChild(n,L,t)}(n);case 221:return function(n){i&&Q({kind:2,isScript:!0,breakLabel:-1});n=e.visitEachChild(n,L,t),i&&se();return n}(n);case 222:return function(n){i&&Q({kind:4,isScript:!0,labelText:e.idText(n.label),breakLabel:-1});n=e.visitEachChild(n,L,t),i&&ae();return n}(n);default:return M(n)}}(n):r?M(n):256&o?function(n){switch(n.kind){case 228:return F(n);case 186:return U(n);default:return e.Debug.failBadSyntaxKind(n),e.visitEachChild(n,L,t)}}(n):512&o?e.visitEachChild(n,L,t):n}function M(n){switch(n.kind){case 228:return F(n);case 186:return U(n);case 153:case 154:return function(n){var o=r,s=i;return r=!1,i=!1,n=e.visitEachChild(n,L,t),r=o,i=s,n}(n);case 208:return function(t){if(16777216&t.transformFlags)return void j(t.declarationList);if(1048576&e.getEmitFlags(t))return t;for(var n=0,o=t.declarationList.declarations;n<o.length;n++){var r=o[n];_(r.name)}var i=e.getInitializedVariables(t.declarationList);if(0===i.length)return;return e.setSourceMapRange(e.createStatement(e.inlineExpressions(e.map(i,z))),t)}(n);case 214:return function(n){i&&oe();var o=n.initializer;if(o&&e.isVariableDeclarationList(o)){for(var r=0,s=o.declarations;r<s.length;r++){var a=s[r];_(a.name)}var l=e.getInitializedVariables(o);n=e.updateFor(n,l.length>0?e.inlineExpressions(e.map(l,z)):void 0,e.visitNode(n.condition,L,e.isExpression),e.visitNode(n.incrementor,L,e.isExpression),e.visitNode(n.statement,L,e.isStatement,e.liftToBlock))}else n=e.visitEachChild(n,L,t);i&&ie();return n}(n);case 215:return function(n){i&&oe();var o=n.initializer;if(e.isVariableDeclarationList(o)){for(var r=0,s=o.declarations;r<s.length;r++){var a=s[r];_(a.name)}n=e.updateForIn(n,o.declarations[0].name,e.visitNode(n.expression,L,e.isExpression),e.visitNode(n.statement,L,e.isStatement,e.liftToBlock))}else n=e.visitEachChild(n,L,t);i&&ie();return n}(n);case 218:return function(n){if(i){var o=de(n.label&&e.idText(n.label));if(o>0)return _e(o,n)}return e.visitEachChild(n,L,t)}(n);case 217:return function(n){if(i){var o=ge(n.label&&e.idText(n.label));if(o>0)return _e(o,n)}return e.visitEachChild(n,L,t)}(n);case 219:return function(t){return function(t,n){return e.setTextRange(e.createReturn(e.createArrayLiteral(t?[fe(2),t]:[fe(2)])),n)}(e.visitNode(t.expression,L,e.isExpression),t)}(n);default:return 16777216&n.transformFlags?function(n){switch(n.kind){case 194:return function(n){switch(e.getExpressionAssociativity(n)){case 0:return function(n){if($(n.right)){if(e.isLogicalOperator(n.operatorToken.kind))return function(t){var n=q(),o=J();ke(o,e.visitNode(t.left,L,e.isExpression),t.left),53===t.operatorToken.kind?Te(n,o,t.left):ve(n,o,t.left);return ke(o,e.visitNode(t.right,L,e.isExpression),t.right),Z(n),o}(n);if(26===n.operatorToken.kind)return function(t){var n=[];return o(t.left),o(t.right),e.inlineExpressions(n);function o(t){e.isBinaryExpression(t)&&26===t.operatorToken.kind?(o(t.left),o(t.right)):($(t)&&n.length>0&&(Ee(1,[e.createStatement(e.inlineExpressions(n))]),n=[]),n.push(e.visitNode(t,L,e.isExpression)))}}(n);var o=e.getMutableClone(n);return o.left=Y(e.visitNode(n.left,L,e.isExpression)),o.right=e.visitNode(n.right,L,e.isExpression),o}return e.visitEachChild(n,L,t)}(n);case 1:return function(n){var o=n.left,r=n.right;if($(r)){var i=void 0;switch(o.kind){case 179:i=e.updatePropertyAccess(o,Y(e.visitNode(o.expression,L,e.isLeftHandSideExpression)),o.name);break;case 180:i=e.updateElementAccess(o,Y(e.visitNode(o.expression,L,e.isLeftHandSideExpression)),Y(e.visitNode(o.argumentExpression,L,e.isExpression)));break;default:i=e.visitNode(o,L,e.isExpression)}var s=n.operatorToken.kind;return(a=s)>=59&&a<=70?e.setTextRange(e.createAssignment(i,e.setTextRange(e.createBinary(Y(i),function(e){switch(e){case 59:return 37;case 60:return 38;case 61:return 39;case 62:return 40;case 63:return 41;case 64:return 42;case 65:return 45;case 66:return 46;case 67:return 47;case 68:return 48;case 69:return 49;case 70:return 50}}(s),e.visitNode(r,L,e.isExpression)),n)),n):e.updateBinary(n,i,e.visitNode(r,L,e.isExpression))}var a;return e.visitEachChild(n,L,t)}(n);default:e.Debug.fail("Unknown associativity.")}}(n);case 195:return function(n){if($(n.whenTrue)||$(n.whenFalse)){var o=q(),r=q(),i=J();return Te(o,e.visitNode(n.condition,L,e.isExpression),n.condition),ke(i,e.visitNode(n.whenTrue,L,e.isExpression),n.whenTrue),be(r),Z(o),ke(i,e.visitNode(n.whenFalse,L,e.isExpression),n.whenFalse),Z(r),i}return e.visitEachChild(n,L,t)}(n);case 197:return function(n){var o=q(),r=e.visitNode(n.expression,L,e.isExpression);if(n.asteriskToken){!function(e,t){Ee(7,[e],t)}(0==(8388608&e.getEmitFlags(n.expression))?e.createValuesHelper(t,r,n):r,n)}else!function(e,t){Ee(6,[e],t)}(r,n);return Z(o),function(t){return e.setTextRange(e.createCall(e.createPropertyAccess(S,"sent"),void 0,[]),t)}(n)}(n);case 177:return function(e){return V(e.elements,void 0,void 0,e.multiLine)}(n);case 178:return function(t){var n=t.properties,o=t.multiLine,r=X(n),i=J();ke(i,e.createObjectLiteral(e.visitNodes(n,L,e.isObjectLiteralElementLike,0,r),o));var s=e.reduceLeft(n,a,[],r);return s.push(o?e.startOnNewLine(e.getMutableClone(i)):i),e.inlineExpressions(s);function a(n,r){$(r)&&n.length>0&&(ye(e.createStatement(e.inlineExpressions(n))),n=[]);var s=e.createExpressionForObjectLiteralElementLike(t,r,i),a=e.visitNode(s,L,e.isExpression);return a&&(o&&(a.startsOnNewLine=!0),n.push(a)),n}}(n);case 180:return function(n){if($(n.argumentExpression)){var o=e.getMutableClone(n);return o.expression=Y(e.visitNode(n.expression,L,e.isLeftHandSideExpression)),o.argumentExpression=e.visitNode(n.argumentExpression,L,e.isExpression),o}return e.visitEachChild(n,L,t)}(n);case 181:return function(n){if(!e.isImportCall(n)&&e.forEach(n.arguments,$)){var o=e.createCallBinding(n.expression,_,y,!0),r=o.target,i=o.thisArg;return e.setOriginalNode(e.createFunctionApply(Y(e.visitNode(r,L,e.isLeftHandSideExpression)),i,V(n.arguments),n),n)}return e.visitEachChild(n,L,t)}(n);case 182:return function(n){if(e.forEach(n.arguments,$)){var o=e.createCallBinding(e.createPropertyAccess(n.expression,"bind"),_),r=o.target,i=o.thisArg;return e.setOriginalNode(e.setTextRange(e.createNew(e.createFunctionApply(Y(e.visitNode(r,L,e.isExpression)),i,V(n.arguments,e.createVoidZero())),void 0,[]),n),n)}return e.visitEachChild(n,L,t)}(n);default:return e.visitEachChild(n,L,t)}}(n):33554944&n.transformFlags?e.visitEachChild(n,L,t):n}}function F(n){if(n.asteriskToken)n=e.setOriginalNode(e.setTextRange(e.createFunctionDeclaration(void 0,n.modifiers,void 0,n.name,void 0,e.visitParameterList(n.parameters,L,t),void 0,H(n.body)),n),n);else{var o=r,s=i;r=!1,i=!1,n=e.visitEachChild(n,L,t),r=o,i=s}return r?void f(n):n}function U(n){if(n.asteriskToken)n=e.setOriginalNode(e.setTextRange(e.createFunctionExpression(void 0,void 0,n.name,void 0,e.visitParameterList(n.parameters,L,t),void 0,H(n.body)),n),n);else{var o=r,s=i;r=!1,i=!1,n=e.visitEachChild(n,L,t),r=o,i=s}return n}function H(t){var n=[],o=r,s=i,f=a,_=l,m=c,y=u,k=p,b=d,C=R,x=v,B=T,A=E,I=S;r=!0,i=!1,a=void 0,l=void 0,c=void 0,u=void 0,p=void 0,d=void 0,R=1,v=void 0,T=void 0,E=void 0,S=e.createTempVariable(void 0),g();var D=e.addPrologue(n,t.statements,!1,L);G(t.statements,D);var N=Se();return e.addRange(n,h()),n.push(e.createReturn(N)),r=o,i=s,a=f,l=_,c=m,u=y,p=k,d=b,R=C,v=x,T=B,E=A,S=I,e.setTextRange(e.createBlock(n,t.multiLine),t)}function V(t,n,o,r){var i,s=X(t);if(s>0){i=J();var a=e.visitNodes(t,L,e.isExpression,0,s);ke(i,e.createArrayLiteral(n?[n].concat(a):a)),n=void 0}var l=e.reduceLeft(t,(function(t,o){if($(o)&&t.length>0){var s=void 0!==i;i||(i=J()),ke(i,s?e.createArrayConcat(i,[e.createArrayLiteral(t,r)]):e.createArrayLiteral(n?[n].concat(t):t,r)),n=void 0,t=[]}return t.push(e.visitNode(o,L,e.isExpression)),t}),[],s);return i?e.createArrayConcat(i,[e.createArrayLiteral(l,r)]):e.setTextRange(e.createArrayLiteral(n?[n].concat(l):l,r),o)}function G(e,t){void 0===t&&(t=0);for(var n=e.length,o=t;o<n;o++)K(e[o])}function W(t){e.isBlock(t)?G(t.statements):K(t)}function K(r){var s=i;i||(i=$(r)),function(r){switch(r.kind){case 207:return function(t){$(t)?G(t.statements):ye(e.visitNode(t,L,e.isStatement))}(r);case 210:return function(t){ye(e.visitNode(t,L,e.isStatement))}(r);case 211:return function(t){if($(t))if($(t.thenStatement)||$(t.elseStatement)){var n=q(),o=t.elseStatement?q():void 0;Te(t.elseStatement?o:n,e.visitNode(t.expression,L,e.isExpression),t.expression),W(t.thenStatement),t.elseStatement&&(be(n),Z(o),W(t.elseStatement)),Z(n)}else ye(e.visitNode(t,L,e.isStatement));else ye(e.visitNode(t,L,e.isStatement))}(r);case 212:return function(t){if($(t)){var n=q(),o=q();re(n),Z(o),W(t.statement),Z(n),ve(o,e.visitNode(t.expression,L,e.isExpression)),ie()}else ye(e.visitNode(t,L,e.isStatement))}(r);case 213:return function(t){if($(t)){var n=q(),o=re(n);Z(n),Te(o,e.visitNode(t.expression,L,e.isExpression)),W(t.statement),be(n),ie()}else ye(e.visitNode(t,L,e.isStatement))}(r);case 214:return function(t){if($(t)){var n=q(),o=q(),r=re(o);if(t.initializer){var i=t.initializer;e.isVariableDeclarationList(i)?j(i):ye(e.setTextRange(e.createStatement(e.visitNode(i,L,e.isExpression)),i))}Z(n),t.condition&&Te(r,e.visitNode(t.condition,L,e.isExpression)),W(t.statement),Z(o),t.incrementor&&ye(e.setTextRange(e.createStatement(e.visitNode(t.incrementor,L,e.isExpression)),t.incrementor)),be(n),ie()}else ye(e.visitNode(t,L,e.isStatement))}(r);case 215:return function(t){if($(t)){var n=J(),o=J(),r=e.createLoopVariable(),i=t.initializer;_(r),ke(n,e.createArrayLiteral()),ye(e.createForIn(o,e.visitNode(t.expression,L,e.isExpression),e.createStatement(e.createCall(e.createPropertyAccess(n,"push"),void 0,[o])))),ke(r,e.createLiteral(0));var s=q(),a=q(),l=re(a);Z(s),Te(l,e.createLessThan(r,e.createPropertyAccess(n,"length")));var c=void 0;if(e.isVariableDeclarationList(i)){for(var u=0,p=i.declarations;u<p.length;u++){var d=p[u];_(d.name)}c=e.getSynthesizedClone(i.declarations[0].name)}else c=e.visitNode(i,L,e.isExpression),e.Debug.assert(e.isLeftHandSideExpression(c));ke(c,e.createElementAccess(n,r)),W(t.statement),Z(a),ye(e.createStatement(e.createPostfixIncrement(r))),be(s),ie()}else ye(e.visitNode(t,L,e.isStatement))}(r);case 217:return function(t){var n=ge(t.label?e.idText(t.label):void 0);n>0?be(n,t):ye(t)}(r);case 218:return function(t){var n=de(t.label?e.idText(t.label):void 0);n>0?be(n,t):ye(t)}(r);case 219:return function(t){!function(e,t){Ee(8,[e],t)}(e.visitNode(t.expression,L,e.isExpression),t)}(r);case 220:return function(t){$(t)?(n=Y(e.visitNode(t.expression,L,e.isExpression)),o=q(),r=q(),Z(o),Q({kind:1,expression:n,startLabel:o,endLabel:r}),W(t.statement),e.Debug.assert(1===ne()),Z(ee().endLabel)):ye(e.visitNode(t,L,e.isStatement));var n,o,r}(r);case 221:return function(t){if($(t.caseBlock)){for(var n=t.caseBlock,o=n.clauses.length,r=(Q({kind:2,isScript:!1,breakLabel:h=q()}),h),i=Y(e.visitNode(t.expression,L,e.isExpression)),s=[],a=-1,l=0;l<o;l++){var c=n.clauses[l];s.push(q()),258===c.kind&&-1===a&&(a=l)}for(var u=0,p=[];u<o;){var d=0;for(l=u;l<o;l++){if(257===(c=n.clauses[l]).kind){var g=c;if($(g.expression)&&p.length>0)break;p.push(e.createCaseClause(e.visitNode(g.expression,L,e.isExpression),[_e(s[l],g.expression)]))}else d++}p.length&&(ye(e.createSwitch(i,e.createCaseBlock(p))),u+=p.length,p=[]),d>0&&(u+=d,d=0)}be(a>=0?s[a]:r);for(l=0;l<o;l++)Z(s[l]),G(n.clauses[l].statements);se()}else ye(e.visitNode(t,L,e.isStatement));var h}(r);case 222:return function(t){$(t)?(n=e.idText(t.label),o=q(),Q({kind:4,isScript:!1,labelText:n,breakLabel:o}),W(t.statement),ae()):ye(e.visitNode(t,L,e.isStatement));var n,o}(r);case 223:return function(t){!function(e,t){Ee(9,[e],t)}(e.visitNode(t.expression,L,e.isExpression),t)}(r);case 224:return function(r){$(r)?(i=q(),s=q(),Z(i),Q({kind:0,state:0,startLabel:i,endLabel:s}),me(),W(r.tryBlock),r.catchClause&&(!function(r){var i;if(e.Debug.assert(0===ne()),e.isGeneratedIdentifier(r.name))i=r.name,_(r.name);else{var s=e.idText(r.name);i=J(s),n||(n=e.createMap(),o=[],t.enableSubstitution(71)),n.set(s,!0),o[e.getOriginalNodeId(r)]=i}var a=te();e.Debug.assert(a.state<1),be(a.endLabel);var l=q();Z(l),a.state=1,a.catchVariable=i,a.catchLabel=l,ke(i,e.createCall(e.createPropertyAccess(S,"sent"),void 0,[])),me()}(r.catchClause.variableDeclaration),W(r.catchClause.block)),r.finallyBlock&&(!function(){e.Debug.assert(0===ne());var t=te();e.Debug.assert(t.state<2),be(t.endLabel);var n=q();Z(n),t.state=2,t.finallyLabel=n}(),W(r.finallyBlock)),function(){e.Debug.assert(0===ne());var t=ee();t.state<2?be(t.endLabel):Ee(10);Z(t.endLabel),me(),t.state=3}()):ye(e.visitEachChild(r,L,t));var i,s}(r);default:ye(e.visitNode(r,L,e.isStatement))}}(r),i=s}function j(t){for(var n=0,o=t.declarations;n<o.length;n++){var r=o[n],i=e.getSynthesizedClone(r.name);e.setCommentRange(i,r.name),_(i)}for(var s=e.getInitializedVariables(t),a=s.length,l=0,c=[];l<a;){for(var u=l;u<a;u++){if($((r=s[u]).initializer)&&c.length>0)break;c.push(z(r))}c.length&&(ye(e.createStatement(e.inlineExpressions(c))),l+=c.length,c=[])}}function z(t){return e.setSourceMapRange(e.createAssignment(e.setSourceMapRange(e.getSynthesizedClone(t.name),t.name),e.visitNode(t.initializer,L,e.isExpression)),t)}function $(e){return e&&0!=(16777216&e.transformFlags)}function X(e){for(var t=e.length,n=0;n<t;n++)if($(e[n]))return n;return-1}function Y(t){var n;return e.isGeneratedIdentifier(t)||4096&e.getEmitFlags(t)?t:(ke(n=e.createTempVariable(_),t,t),n)}function J(t){var n=t?e.createUniqueName(t):e.createTempVariable(void 0);return _(n),n}function q(){p||(p=[]);var e=R;return R++,p[e]=-1,e}function Z(t){e.Debug.assert(void 0!==p,"No labels were defined."),p[t]=v?v.length:0}function Q(e){a||(a=[],c=[],l=[],u=[]);var t=c.length;return c[t]=0,l[t]=v?v.length:0,a[t]=e,u.push(e),t}function ee(){var t=te();e.Debug.assert(void 0!==t,"beginBlock was never called.");var n=c.length;return c[n]=1,l[n]=v?v.length:0,a[n]=t,u.pop(),t}function te(){return e.lastOrUndefined(u)}function ne(){var e=te();return e&&e.kind}function oe(){Q({kind:3,isScript:!0,breakLabel:-1,continueLabel:-1})}function re(e){var t=q();return Q({kind:3,isScript:!1,breakLabel:t,continueLabel:e}),t}function ie(){e.Debug.assert(3===ne());var t=ee(),n=t.breakLabel;t.isScript||Z(n)}function se(){e.Debug.assert(2===ne());var t=ee(),n=t.breakLabel;t.isScript||Z(n)}function ae(){e.Debug.assert(4===ne());var t=ee();t.isScript||Z(t.breakLabel)}function le(e){return 2===e.kind||3===e.kind}function ce(e){return 4===e.kind}function ue(e){return 3===e.kind}function pe(e,t){for(var n=t;n>=0;n--){var o=u[n];if(!ce(o))break;if(o.labelText===e)return!0}return!1}function de(e){if(u)if(e)for(var t=u.length-1;t>=0;t--){if(ce(n=u[t])&&n.labelText===e)return n.breakLabel;if(le(n)&&pe(e,t-1))return n.breakLabel}else for(t=u.length-1;t>=0;t--){var n;if(le(n=u[t]))return n.breakLabel}return 0}function ge(e){if(u)if(e)for(var t=u.length-1;t>=0;t--){if(ue(n=u[t])&&pe(e,t-1))return n.continueLabel}else for(t=u.length-1;t>=0;t--){var n;if(ue(n=u[t]))return n.continueLabel}return 0}function he(t){if(t>0){void 0===d&&(d=[]);var n=e.createLiteral(-1);return void 0===d[t]?d[t]=[n]:d[t].push(n),n}return e.createOmittedExpression()}function fe(t){var n=e.createLiteral(t);return e.addSyntheticTrailingComment(n,3,function(e){switch(e){case 2:return"return";case 3:return"break";case 4:return"yield";case 5:return"yield*";case 7:return"endfinally"}}(t)),n}function _e(t,n){return e.Debug.assertLessThan(0,t,"Invalid label"),e.setTextRange(e.createReturn(e.createArrayLiteral([fe(3),he(t)])),n)}function me(){Ee(0)}function ye(e){e?Ee(1,[e]):me()}function ke(e,t,n){Ee(2,[e,t],n)}function be(e,t){Ee(3,[e],t)}function ve(e,t,n){Ee(4,[e,t],n)}function Te(e,t,n){Ee(5,[e,t],n)}function Ee(e,t,n){void 0===v&&(v=[],T=[],E=[]),void 0===p&&Z(q());var o=v.length;v[o]=e,T[o]=t,E[o]=n}function Se(){O=0,P=0,C=void 0,x=!1,B=!1,A=void 0,I=void 0,D=void 0,N=void 0,w=void 0;var n=function(){if(v){for(var t=0;t<v.length;t++)Ae(t);Ce(v.length)}else Ce(0);if(A){var n=e.createPropertyAccess(S,"label"),o=e.createSwitch(n,e.createCaseBlock(A));return o.startsOnNewLine=!0,[o]}if(I)return I;return[]}();return function(t,n){return t.requestEmitHelper(s),e.createCall(e.getHelperName("__generator"),void 0,[e.createThis(),n])}(t,e.setEmitFlags(e.createFunctionExpression(void 0,void 0,void 0,void 0,[e.createParameter(void 0,void 0,void 0,S)],void 0,e.createBlock(n,n.length>0)),524288))}function Ce(e){(function(e){if(!B)return!0;if(!p||!d)return!1;for(var t=0;t<p.length;t++)if(p[t]===e&&d[t])return!0;return!1})(e)&&(Be(e),w=void 0,De(void 0,void 0)),I&&A&&xe(!1),function(){if(void 0!==d&&void 0!==C)for(var e=0;e<C.length;e++){var t=C[e];if(void 0!==t)for(var n=0,o=t;n<o.length;n++){var r=o[n],i=d[r];if(void 0!==i)for(var s=0,a=i;s<a.length;s++){a[s].text=String(e)}}}}()}function xe(t){if(A||(A=[]),I){if(w)for(var n=w.length-1;n>=0;n--){var o=w[n];I=[e.createWith(o.expression,e.createBlock(I))]}if(N){var r=N.startLabel,i=N.catchLabel,s=N.finallyLabel,a=N.endLabel;I.unshift(e.createStatement(e.createCall(e.createPropertyAccess(e.createPropertyAccess(S,"trys"),"push"),void 0,[e.createArrayLiteral([he(r),he(i),he(s),he(a)])]))),N=void 0}t&&I.push(e.createStatement(e.createAssignment(e.createPropertyAccess(S,"label"),e.createLiteral(P+1))))}A.push(e.createCaseClause(e.createLiteral(P),I||[])),I=void 0}function Be(e){if(p)for(var t=0;t<p.length;t++)p[t]===e&&(I&&(xe(!x),x=!1,B=!1,P++),void 0===C&&(C=[]),void 0===C[P]?C[P]=[t]:C[P].push(t))}function Ae(t){if(Be(t),function(e){if(a)for(;O<c.length&&l[O]<=e;O++){var t=a[O],n=c[O];switch(t.kind){case 0:0===n?(D||(D=[]),I||(I=[]),D.push(N),N=t):1===n&&(N=D.pop());break;case 1:0===n?(w||(w=[]),w.push(t)):1===n&&w.pop()}}}(t),!x){x=!1,B=!1;var n=v[t];if(0!==n){if(10===n)return x=!0,void Ie(e.createReturn(e.createArrayLiteral([fe(7)])));var o=T[t];if(1===n)return Ie(o[0]);var r,i,s,u=E[t];switch(n){case 2:return r=o[0],i=o[1],s=u,void Ie(e.setTextRange(e.createStatement(e.createAssignment(r,i)),s));case 3:return function(t,n){x=!0,Ie(e.setEmitFlags(e.setTextRange(e.createReturn(e.createArrayLiteral([fe(3),he(t)])),n),384))}(o[0],u);case 4:return function(t,n,o){Ie(e.setEmitFlags(e.createIf(n,e.setEmitFlags(e.setTextRange(e.createReturn(e.createArrayLiteral([fe(3),he(t)])),o),384)),1))}(o[0],o[1],u);case 5:return function(t,n,o){Ie(e.setEmitFlags(e.createIf(e.createLogicalNot(n),e.setEmitFlags(e.setTextRange(e.createReturn(e.createArrayLiteral([fe(3),he(t)])),o),384)),1))}(o[0],o[1],u);case 6:return function(t,n){x=!0,Ie(e.setEmitFlags(e.setTextRange(e.createReturn(e.createArrayLiteral(t?[fe(4),t]:[fe(4)])),n),384))}(o[0],u);case 7:return function(t,n){x=!0,Ie(e.setEmitFlags(e.setTextRange(e.createReturn(e.createArrayLiteral([fe(5),t])),n),384))}(o[0],u);case 8:return De(o[0],u);case 9:return function(t,n){x=!0,B=!0,Ie(e.setTextRange(e.createThrow(t),n))}(o[0],u)}}}}function Ie(e){e&&(I?I.push(e):I=[e])}function De(t,n){x=!0,B=!0,Ie(e.setEmitFlags(e.setTextRange(e.createReturn(e.createArrayLiteral(t?[fe(2),t]:[fe(2)])),n),384))}};var s={name:"typescript:generator",scoped:!1,priority:6,text:'\n            var __generator = (this && this.__generator) || function (thisArg, body) {\n                var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n                return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n                function verb(n) { return function (v) { return step([n, v]); }; }\n                function step(op) {\n                    if (f) throw new TypeError("Generator is already executing.");\n                    while (_) try {\n                        if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;\n                        if (y = 0, t) op = [0, t.value];\n                        switch (op[0]) {\n                            case 0: case 1: t = op; break;\n                            case 4: _.label++; return { value: op[1], done: false };\n                            case 5: _.label++; y = op[1]; op = [0]; continue;\n                            case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                            default:\n                                if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                                if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                                if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                                if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                                if (t[2]) _.ops.pop();\n                                _.trys.pop(); continue;\n                        }\n                        op = body.call(thisArg, _);\n                    } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n                    if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n                }\n            };'}}(ts||(ts={})),function(e){e.transformModule=function(o){var r=o.startLexicalEnvironment,i=o.endLexicalEnvironment,s=o.hoistVariableDeclaration,a=o.getCompilerOptions(),l=o.getEmitResolver(),c=o.getEmitHost(),u=e.getEmitScriptTarget(a),p=e.getEmitModuleKind(a),d=o.onSubstituteNode,g=o.onEmitNode;o.onSubstituteNode=function(t,n){if((n=d(t,n)).id&&_[n.id])return n;if(1===t)return function(t){switch(t.kind){case 71:return K(t);case 194:return function(t){if(e.isAssignmentOperator(t.operatorToken.kind)&&e.isIdentifier(t.left)&&!e.isGeneratedIdentifier(t.left)&&!e.isLocalName(t.left)&&!e.isDeclarationNameOfEnumOrNamespace(t.left)){var n=j(t.left);if(n){for(var o=t,r=0,i=n;r<i.length;r++){var s=i[r];_[e.getNodeId(o)]=!0,o=G(s,o,t)}return o}}return t}(t);case 193:case 192:return function(t){if((43===t.operator||44===t.operator)&&e.isIdentifier(t.operand)&&!e.isGeneratedIdentifier(t.operand)&&!e.isLocalName(t.operand)&&!e.isDeclarationNameOfEnumOrNamespace(t.operand)){var n=j(t.operand);if(n){for(var o=193===t.kind?e.setTextRange(e.createBinary(t.operand,e.createToken(43===t.operator?59:60),e.createLiteral(1)),t):t,r=0,i=n;r<i.length;r++){var s=i[r];_[e.getNodeId(o)]=!0,o=G(s,o)}return o}}return t}(t)}return t}(n);if(e.isShorthandPropertyAssignment(n))return function(t){var n=t.name,o=K(n);if(o!==n){if(t.objectAssignmentInitializer){var r=e.createAssignment(o,t.objectAssignmentInitializer);return e.setTextRange(e.createPropertyAssignment(n,r),t)}return e.setTextRange(e.createPropertyAssignment(n,o),t)}return t}(n);return n},o.onEmitNode=function(t,n,o){265===n.kind?(h=n,f=y[e.getOriginalNodeId(h)],_=[],g(t,n,o),h=void 0,f=void 0,_=void 0):g(t,n,o)},o.enableSubstitution(71),o.enableSubstitution(194),o.enableSubstitution(192),o.enableSubstitution(193),o.enableSubstitution(262),o.enableEmitNotification(265);var h,f,_,m,y=[],k=[];return function(t){if(t.isDeclarationFile||!(e.isExternalModule(t)||a.isolatedModules||67108864&t.transformFlags))return t;h=t,f=e.collectExternalModuleInfo(t,l,a),y[e.getOriginalNodeId(t)]=f;var n=function(t){switch(t){case e.ModuleKind.AMD:return T;case e.ModuleKind.UMD:return E;default:return v}}(p)(t);return h=void 0,f=void 0,m=!1,e.aggregateTransformFlags(n)};function b(){return!(f.exportEquals||!e.isExternalModule(h))}function v(n){r();var s=[],l=a.alwaysStrict||!a.noImplicitUseStrict&&e.isExternalModule(h),c=e.addPrologue(s,n.statements,l,B);b()&&e.append(s,V()),e.append(s,e.visitNode(f.externalHelpersImportDeclaration,B,e.isStatement)),e.addRange(s,e.visitNodes(n.statements,B,e.isStatement,c)),x(s,!1),e.addRange(s,i());var u=e.updateSourceFileNode(n,e.setTextRange(e.createNodeArray(s),n.statements));return f.hasExportStarsToExportValues&&!a.importHelpers&&e.addEmitHelper(u,t),e.addEmitHelpers(u,o.readEmitHelpers()),u}function T(t){var n=e.createIdentifier("define"),o=e.tryGetModuleNameFromFile(t,c,a),r=S(t,!0),i=r.aliasedModuleNames,s=r.unaliasedModuleNames,l=r.importAliasNames;return e.updateSourceFileNode(t,e.setTextRange(e.createNodeArray([e.createStatement(e.createCall(n,void 0,(o?[o]:[]).concat([e.createArrayLiteral([e.createLiteral("require"),e.createLiteral("exports")].concat(i,s)),e.createFunctionExpression(void 0,void 0,void 0,void 0,[e.createParameter(void 0,void 0,void 0,"require"),e.createParameter(void 0,void 0,void 0,"exports")].concat(l),void 0,C(t))])))]),t.statements))}function E(t){var n=S(t,!1),o=n.aliasedModuleNames,r=n.unaliasedModuleNames,i=n.importAliasNames,s=e.tryGetModuleNameFromFile(t,c,a),l=e.createFunctionExpression(void 0,void 0,void 0,void 0,[e.createParameter(void 0,void 0,void 0,"factory")],void 0,e.setTextRange(e.createBlock([e.createIf(e.createLogicalAnd(e.createTypeCheck(e.createIdentifier("module"),"object"),e.createTypeCheck(e.createPropertyAccess(e.createIdentifier("module"),"exports"),"object")),e.createBlock([e.createVariableStatement(void 0,[e.createVariableDeclaration("v",void 0,e.createCall(e.createIdentifier("factory"),void 0,[e.createIdentifier("require"),e.createIdentifier("exports")]))]),e.setEmitFlags(e.createIf(e.createStrictInequality(e.createIdentifier("v"),e.createIdentifier("undefined")),e.createStatement(e.createAssignment(e.createPropertyAccess(e.createIdentifier("module"),"exports"),e.createIdentifier("v")))),1)]),e.createIf(e.createLogicalAnd(e.createTypeCheck(e.createIdentifier("define"),"function"),e.createPropertyAccess(e.createIdentifier("define"),"amd")),e.createBlock([e.createStatement(e.createCall(e.createIdentifier("define"),void 0,(s?[s]:[]).concat([e.createArrayLiteral([e.createLiteral("require"),e.createLiteral("exports")].concat(o,r)),e.createIdentifier("factory")])))])))],!0),void 0));return e.updateSourceFileNode(t,e.setTextRange(e.createNodeArray([e.createStatement(e.createCall(l,void 0,[e.createFunctionExpression(void 0,void 0,void 0,void 0,[e.createParameter(void 0,void 0,void 0,"require"),e.createParameter(void 0,void 0,void 0,"exports")].concat(i),void 0,C(t))]))]),t.statements))}function S(t,n){for(var o=[],r=[],i=[],s=0,u=t.amdDependencies;s<u.length;s++){var p=u[s];p.name?(o.push(e.createLiteral(p.path)),i.push(e.createParameter(void 0,void 0,void 0,p.name))):r.push(e.createLiteral(p.path))}for(var d=0,g=f.externalImports;d<g.length;d++){var _=g[d],m=e.getExternalModuleNameLiteral(_,h,c,l,a),y=e.getLocalNameForExternalImport(_,h);m&&(n&&y?(e.setEmitFlags(y,4),o.push(m),i.push(e.createParameter(void 0,void 0,void 0,y))):r.push(m))}return{aliasedModuleNames:o,unaliasedModuleNames:r,importAliasNames:i}}function C(o){r();var s=[],l=e.addPrologue(s,o.statements,!a.noImplicitUseStrict,B);b()&&e.append(s,V()),e.append(s,e.visitNode(f.externalHelpersImportDeclaration,B,e.isStatement)),e.addRange(s,e.visitNodes(o.statements,B,e.isStatement,l)),x(s,!0),e.addRange(s,i());var c=e.createBlock(s,!0);return f.hasExportStarsToExportValues&&!a.importHelpers&&e.addEmitHelper(c,t),m&&e.addEmitHelper(c,n),c}function x(t,n){if(f.exportEquals){var o=e.visitNode(f.exportEquals.expression,A);if(o)if(n){var r=e.createReturn(o);e.setTextRange(r,f.exportEquals),e.setEmitFlags(r,1920),t.push(r)}else{r=e.createStatement(e.createAssignment(e.createPropertyAccess(e.createIdentifier("module"),"exports"),o));e.setTextRange(r,f.exportEquals),e.setEmitFlags(r,1536),t.push(r)}}}function B(t){switch(t.kind){case 238:return function(t){var n,o=e.getNamespaceDeclarationNode(t);if(p!==e.ModuleKind.AMD){if(!t.importClause)return e.setTextRange(e.createStatement(N(t)),t);var r=[];o&&!e.isDefaultImport(t)?r.push(e.createVariableDeclaration(e.getSynthesizedClone(o.name),void 0,N(t))):(r.push(e.createVariableDeclaration(e.getGeneratedNameForNode(t),void 0,N(t))),o&&e.isDefaultImport(t)&&r.push(e.createVariableDeclaration(e.getSynthesizedClone(o.name),void 0,e.getGeneratedNameForNode(t)))),n=e.append(n,e.setTextRange(e.createVariableStatement(void 0,e.createVariableDeclarationList(r,u>=2?2:0)),t))}else o&&e.isDefaultImport(t)&&(n=e.append(n,e.createVariableStatement(void 0,e.createVariableDeclarationList([e.setTextRange(e.createVariableDeclaration(e.getSynthesizedClone(o.name),void 0,e.getGeneratedNameForNode(t)),t)],u>=2?2:0))));if(R(t)){var i=e.getOriginalNodeId(t);k[i]=O(k[i],t)}else n=O(n,t);return e.singleOrMany(n)}(t);case 237:return function(t){var n;e.Debug.assert(e.isExternalModuleImportEqualsDeclaration(t),"import= for internal module references should be handled in an earlier transformer."),p!==e.ModuleKind.AMD?n=e.hasModifier(t,1)?e.append(n,e.setTextRange(e.createStatement(G(t.name,N(t))),t)):e.append(n,e.setTextRange(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(e.getSynthesizedClone(t.name),void 0,N(t))],u>=2?2:0)),t)):e.hasModifier(t,1)&&(n=e.append(n,e.setTextRange(e.createStatement(G(e.getExportName(t),e.getLocalName(t))),t)));if(R(t)){var o=e.getOriginalNodeId(t);k[o]=P(k[o],t)}else n=P(n,t);return e.singleOrMany(n)}(t);case 244:return function(t){if(!t.moduleSpecifier)return;var n=e.getGeneratedNameForNode(t);if(t.exportClause){var r=[];p!==e.ModuleKind.AMD&&r.push(e.setTextRange(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(n,void 0,N(t))])),t));for(var i=0,s=t.exportClause.elements;i<s.length;i++){var a=s[i],l=e.createPropertyAccess(n,a.propertyName||a.name);r.push(e.setTextRange(e.createStatement(G(e.getExportName(a),l)),a))}return e.singleOrMany(r)}return e.setTextRange(e.createStatement(function(t,n){return t.getCompilerOptions().importHelpers?e.createCall(e.getHelperName("__exportStar"),void 0,[n,e.createIdentifier("exports")]):e.createCall(e.createIdentifier("__export"),void 0,[n])}(o,p!==e.ModuleKind.AMD?N(t):n)),t)}(t);case 243:return function(t){if(t.isExportEquals)return;var n,o=t.original;if(o&&R(o)){var r=e.getOriginalNodeId(t);k[r]=H(k[r],e.createIdentifier("default"),e.visitNode(t.expression,A),t,!0)}else n=H(n,e.createIdentifier("default"),e.visitNode(t.expression,A),t,!0);return e.singleOrMany(n)}(t);case 208:return function(t){var n,r,i;if(e.hasModifier(t,1)){for(var s=void 0,a=0,l=t.declarationList.declarations;a<l.length;a++){var c=l[a];e.isIdentifier(c.name)&&e.isLocalName(c.name)?(s||(s=e.visitNodes(t.modifiers,W,e.isModifier)),r=e.append(r,c)):c.initializer&&(i=e.append(i,w(c)))}r&&(n=e.append(n,e.updateVariableStatement(t,s,e.updateVariableDeclarationList(t.declarationList,r)))),i&&(n=e.append(n,e.setTextRange(e.createStatement(e.inlineExpressions(i)),t)))}else n=e.append(n,e.visitEachChild(t,A,o));if(R(t)){var u=e.getOriginalNodeId(t);k[u]=L(k[u],t)}else n=L(n,t);return e.singleOrMany(n)}(t);case 228:return function(t){var n;n=e.hasModifier(t,1)?e.append(n,e.setOriginalNode(e.setTextRange(e.createFunctionDeclaration(void 0,e.visitNodes(t.modifiers,W,e.isModifier),t.asteriskToken,e.getDeclarationName(t,!0,!0),void 0,e.visitNodes(t.parameters,A),void 0,e.visitEachChild(t.body,A,o)),t),t)):e.append(n,e.visitEachChild(t,A,o));if(R(t)){var r=e.getOriginalNodeId(t);k[r]=F(k[r],t)}else n=F(n,t);return e.singleOrMany(n)}(t);case 229:return function(t){var n;n=e.hasModifier(t,1)?e.append(n,e.setOriginalNode(e.setTextRange(e.createClassDeclaration(void 0,e.visitNodes(t.modifiers,W,e.isModifier),e.getDeclarationName(t,!0,!0),void 0,e.visitNodes(t.heritageClauses,A),e.visitNodes(t.members,A)),t),t)):e.append(n,e.visitEachChild(t,A,o));if(R(t)){var r=e.getOriginalNodeId(t);k[r]=F(k[r],t)}else n=F(n,t);return e.singleOrMany(n)}(t);case 290:return function(t){if(R(t)&&208===t.original.kind){var n=e.getOriginalNodeId(t);k[n]=L(k[n],t.original)}return t}(t);case 291:return function(t){var n=e.getOriginalNodeId(t),o=k[n];if(o)return delete k[n],e.append(o,t);return t}(t);default:return e.visitEachChild(t,A,o)}}function A(t){return 67108864&t.transformFlags?e.isImportCall(t)?function(t){var n=e.visitNode(e.firstOrUndefined(t.arguments),A),o=!!(16384&t.transformFlags);switch(a.module){case e.ModuleKind.AMD:return I(n,o);case e.ModuleKind.UMD:return function(t,n){if(m=!0,e.isSimpleCopiableExpression(t)){var o=e.isGeneratedIdentifier(t)?t:e.isStringLiteral(t)?e.createLiteral(t):e.setEmitFlags(e.setTextRange(e.getSynthesizedClone(t),t),1536);return e.createConditional(e.createIdentifier("__syncRequire"),D(t,n),I(o,n))}var r=e.createTempVariable(s);return e.createComma(e.createAssignment(r,t),e.createConditional(e.createIdentifier("__syncRequire"),D(r,n),I(r,n)))}(n,o);case e.ModuleKind.CommonJS:default:return D(n,o)}}(t):e.visitEachChild(t,A,o):t}function I(t,n){var o,r=e.createUniqueName("resolve"),i=e.createUniqueName("reject"),s=[e.createParameter(void 0,void 0,void 0,r),e.createParameter(void 0,void 0,void 0,i)],a=e.createBlock([e.createStatement(e.createCall(e.createIdentifier("require"),void 0,[e.createArrayLiteral([t||e.createOmittedExpression()]),r,i]))]);return u>=2?o=e.createArrowFunction(void 0,void 0,s,void 0,void 0,a):(o=e.createFunctionExpression(void 0,void 0,void 0,void 0,s,void 0,a),n&&e.setEmitFlags(o,8)),e.createNew(e.createIdentifier("Promise"),void 0,[o])}function D(t,n){var o,r=e.createCall(e.createPropertyAccess(e.createIdentifier("Promise"),"resolve"),void 0,[]),i=e.createCall(e.createIdentifier("require"),void 0,t?[t]:[]);return u>=2?o=e.createArrowFunction(void 0,void 0,[],void 0,void 0,i):(o=e.createFunctionExpression(void 0,void 0,void 0,void 0,[],void 0,e.createBlock([e.createReturn(i)])),n&&e.setEmitFlags(o,8)),e.createCall(e.createPropertyAccess(r,"then"),void 0,[o])}function N(t){var n=e.getExternalModuleNameLiteral(t,h,c,l,a),o=[];return n&&o.push(n),e.createCall(e.createIdentifier("require"),void 0,o)}function w(t){return e.isBindingPattern(t.name)?e.flattenDestructuringAssignment(e.visitNode(t,A),void 0,o,0,!1,G):e.createAssignment(e.setTextRange(e.createPropertyAccess(e.createIdentifier("exports"),t.name),t.name),e.visitNode(t.initializer,A))}function R(t){return 0!=(4194304&e.getEmitFlags(t))}function O(e,t){if(f.exportEquals)return e;var n=t.importClause;if(!n)return e;n.name&&(e=U(e,n));var o=n.namedBindings;if(o)switch(o.kind){case 240:e=U(e,o);break;case 241:for(var r=0,i=o.elements;r<i.length;r++){e=U(e,i[r])}}return e}function P(e,t){return f.exportEquals?e:U(e,t)}function L(e,t){if(f.exportEquals)return e;for(var n=0,o=t.declarationList.declarations;n<o.length;n++){e=M(e,o[n])}return e}function M(t,n){if(f.exportEquals)return t;if(e.isBindingPattern(n.name))for(var o=0,r=n.name.elements;o<r.length;o++){var i=r[o];e.isOmittedExpression(i)||(t=M(t,i))}else e.isGeneratedIdentifier(n.name)||(t=U(t,n));return t}function F(t,n){if(f.exportEquals)return t;e.hasModifier(n,1)&&(t=H(t,e.hasModifier(n,512)?e.createIdentifier("default"):e.getDeclarationName(n),e.getLocalName(n),n));return n.name&&(t=U(t,n)),t}function U(t,n){var o=e.getDeclarationName(n),r=f.exportSpecifiers.get(e.idText(o));if(r)for(var i=0,s=r;i<s.length;i++){var a=s[i];t=H(t,a.name,o,a.name)}return t}function H(t,n,o,r,i){return t=e.append(t,function(t,n,o,r){var i=e.setTextRange(e.createStatement(G(t,n)),o);e.startOnNewLine(i),r||e.setEmitFlags(i,1536);return i}(n,o,r,i))}function V(){var t;return t=0===u?e.createStatement(G(e.createIdentifier("__esModule"),e.createLiteral(!0))):e.createStatement(e.createCall(e.createPropertyAccess(e.createIdentifier("Object"),"defineProperty"),void 0,[e.createIdentifier("exports"),e.createLiteral("__esModule"),e.createObjectLiteral([e.createPropertyAssignment("value",e.createLiteral(!0))])])),e.setEmitFlags(t,1048576),t}function G(t,n,o){return e.setTextRange(e.createAssignment(e.createPropertyAccess(e.createIdentifier("exports"),e.getSynthesizedClone(t)),n),o)}function W(e){switch(e.kind){case 84:case 79:return}return e}function K(t){if(4096&e.getEmitFlags(t)){var n=e.getExternalHelpersModuleName(h);return n?e.createPropertyAccess(n,t):t}if(!e.isGeneratedIdentifier(t)&&!e.isLocalName(t)){var o=l.getReferencedExportContainer(t,e.isExportName(t));if(o&&265===o.kind)return e.setTextRange(e.createPropertyAccess(e.createIdentifier("exports"),e.getSynthesizedClone(t)),t);var r=l.getReferencedImportDeclaration(t);if(r){if(e.isImportClause(r))return e.setTextRange(e.createPropertyAccess(e.getGeneratedNameForNode(r.parent),e.createIdentifier("default")),t);if(e.isImportSpecifier(r)){var i=r.propertyName||r.name;return e.setTextRange(e.createPropertyAccess(e.getGeneratedNameForNode(r.parent.parent.parent),e.getSynthesizedClone(i)),t)}}}return t}function j(t){if(!e.isGeneratedIdentifier(t)){var n=l.getReferencedImportDeclaration(t)||l.getReferencedValueDeclaration(t);if(n)return f&&f.exportedBindings[e.getOriginalNodeId(n)]}}};var t={name:"typescript:export-star",scoped:!0,text:"\n            function __export(m) {\n                for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n            }\n        "};var n={name:"typescript:dynamicimport-sync-require",scoped:!0,text:'\n            var __syncRequire = typeof module === "object" && typeof module.exports === "object";'}}(ts||(ts={})),function(e){e.transformSystemModule=function(t){var n=t.startLexicalEnvironment,o=t.endLexicalEnvironment,r=t.hoistVariableDeclaration,i=t.getCompilerOptions(),s=t.getEmitResolver(),a=t.getEmitHost(),l=t.onSubstituteNode,c=t.onEmitNode;t.onSubstituteNode=function(t,n){if(function(e){return _&&e.id&&_[e.id]}(n=l(t,n)))return n;if(1===t)return function(t){switch(t.kind){case 71:return function(t){if(4096&e.getEmitFlags(t)){var n=e.getExternalHelpersModuleName(u);return n?e.createPropertyAccess(n,t):t}if(!e.isGeneratedIdentifier(t)&&!e.isLocalName(t)){var o=s.getReferencedImportDeclaration(t);if(o){if(e.isImportClause(o))return e.setTextRange(e.createPropertyAccess(e.getGeneratedNameForNode(o.parent),e.createIdentifier("default")),t);if(e.isImportSpecifier(o))return e.setTextRange(e.createPropertyAccess(e.getGeneratedNameForNode(o.parent.parent.parent),e.getSynthesizedClone(o.propertyName||o.name)),t)}}return t}(t);case 194:return function(t){if(e.isAssignmentOperator(t.operatorToken.kind)&&e.isIdentifier(t.left)&&!e.isGeneratedIdentifier(t.left)&&!e.isLocalName(t.left)&&!e.isDeclarationNameOfEnumOrNamespace(t.left)){var n=j(t.left);if(n){for(var o=t,r=0,i=n;r<i.length;r++){o=U(i[r],z(o))}return o}}return t}(t);case 192:case 193:return function(t){if((43===t.operator||44===t.operator)&&e.isIdentifier(t.operand)&&!e.isGeneratedIdentifier(t.operand)&&!e.isLocalName(t.operand)&&!e.isDeclarationNameOfEnumOrNamespace(t.operand)){var n=j(t.operand);if(n){for(var o=193===t.kind?e.setTextRange(e.createPrefix(t.operator,t.operand),t):t,r=0,i=n;r<i.length;r++){o=U(i[r],z(o))}return 193===t.kind&&(o=43===t.operator?e.createSubtract(z(o),e.createLiteral(1)):e.createAdd(z(o),e.createLiteral(1))),o}}return t}(t)}return t}(n);return n},t.onEmitNode=function(t,n,o){if(265===n.kind){var r=e.getOriginalNodeId(n);u=n,p=m[r],d=k[r],(_=b[r])&&delete b[r],c(t,n,o),u=void 0,p=void 0,d=void 0,_=void 0}else c(t,n,o)},t.enableSubstitution(71),t.enableSubstitution(194),t.enableSubstitution(192),t.enableSubstitution(193),t.enableEmitNotification(265);var u,p,d,g,h,f,_,m=[],y=[],k=[],b=[];return function(t){if(t.isDeclarationFile||!(e.isEffectiveExternalModule(t,i)||67108864&t.transformFlags))return t;var r=e.getOriginalNodeId(t);u=t,f=t,p=m[r]=e.collectExternalModuleInfo(t,s,i),d=e.createUniqueName("exports"),k[r]=d,g=e.createUniqueName("context");var l=function(t){for(var n=e.createMap(),o=[],r=0;r<t.length;r++){var l=t[r],c=e.getExternalModuleNameLiteral(l,u,a,s,i);if(c){var p=c.text,d=n.get(p);void 0!==d?o[d].externalImports.push(l):(n.set(p,o.length),o.push({name:c,externalImports:[l]}))}}return o}(p.externalImports),c=function(t,r){var s=[];n();var a=i.alwaysStrict||!i.noImplicitUseStrict&&e.isExternalModule(u),l=e.addPrologue(s,t.statements,a,E);s.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration("__moduleName",void 0,e.createLogicalAnd(g,e.createPropertyAccess(g,"id")))]))),e.visitNode(p.externalHelpersImportDeclaration,E,e.isStatement);var c=e.visitNodes(t.statements,E,e.isStatement,l);e.addRange(s,h),e.addRange(s,o());var d=function(t){if(!p.hasExportStarsToExportValues)return;if(!p.exportedNames&&0===p.exportSpecifiers.size){for(var n=!1,o=0,r=p.externalImports;o<r.length;o++){if(244===(g=r[o]).kind&&g.exportClause){n=!0;break}}if(!n){var i=v(void 0);return t.push(i),i.name}}var s=[];if(p.exportedNames)for(var a=0,l=p.exportedNames;a<l.length;a++){var c=l[a];"default"!==c.escapedText&&s.push(e.createPropertyAssignment(e.createLiteral(c),e.createTrue()))}for(var u=0,d=p.externalImports;u<d.length;u++){var g;if(244===(g=d[u]).kind){var h=g;if(h.exportClause)for(var f=0,_=h.exportClause.elements;f<_.length;f++){var m=_[f];s.push(e.createPropertyAssignment(e.createLiteral(e.idText(m.name||m.propertyName)),e.createTrue()))}}}var y=e.createUniqueName("exportedNames");t.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(y,void 0,e.createObjectLiteral(s,!0))])));var k=v(y);return t.push(k),k.name}(s),f=e.createObjectLiteral([e.createPropertyAssignment("setters",T(d,r)),e.createPropertyAssignment("execute",e.createFunctionExpression(void 0,void 0,void 0,void 0,[],void 0,e.createBlock(c,!0)))]);return f.multiLine=!0,s.push(e.createReturn(f)),e.createBlock(s,!0)}(t,l),y=e.createFunctionExpression(void 0,void 0,void 0,void 0,[e.createParameter(void 0,void 0,void 0,d),e.createParameter(void 0,void 0,void 0,g)],void 0,c),S=e.tryGetModuleNameFromFile(t,a,i),C=e.createArrayLiteral(e.map(l,(function(e){return e.name}))),x=e.setEmitFlags(e.updateSourceFileNode(t,e.setTextRange(e.createNodeArray([e.createStatement(e.createCall(e.createPropertyAccess(e.createIdentifier("System"),"register"),void 0,S?[S,C,y]:[C,y]))]),t.statements)),1024);i.outFile||i.out||e.moveEmitHelpers(x,c,(function(e){return!e.scoped}));_&&(b[r]=_,_=void 0);return u=void 0,p=void 0,d=void 0,g=void 0,h=void 0,f=void 0,e.aggregateTransformFlags(x)};function v(t){var n=e.createUniqueName("exportStar"),o=e.createIdentifier("m"),r=e.createIdentifier("n"),i=e.createIdentifier("exports"),s=e.createStrictInequality(r,e.createLiteral("default"));return t&&(s=e.createLogicalAnd(s,e.createLogicalNot(e.createCall(e.createPropertyAccess(t,"hasOwnProperty"),void 0,[r])))),e.createFunctionDeclaration(void 0,void 0,void 0,n,void 0,[e.createParameter(void 0,void 0,void 0,o)],void 0,e.createBlock([e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(i,void 0,e.createObjectLiteral([]))])),e.createForIn(e.createVariableDeclarationList([e.createVariableDeclaration(r,void 0)]),o,e.createBlock([e.setEmitFlags(e.createIf(s,e.createStatement(e.createAssignment(e.createElementAccess(i,r),e.createElementAccess(o,r)))),1)])),e.createStatement(e.createCall(d,void 0,[i]))],!0))}function T(t,n){for(var o=[],r=0,i=n;r<i.length;r++){for(var s=i[r],a=e.forEach(s.externalImports,(function(t){return e.getLocalNameForExternalImport(t,u)})),l=a?e.getGeneratedNameForNode(a):e.createUniqueName(""),c=[],p=0,g=s.externalImports;p<g.length;p++){var h=g[p],f=e.getLocalNameForExternalImport(h,u);switch(h.kind){case 238:if(!h.importClause)break;case 237:e.Debug.assert(void 0!==f),c.push(e.createStatement(e.createAssignment(f,l)));break;case 244:if(e.Debug.assert(void 0!==f),h.exportClause){for(var _=[],m=0,y=h.exportClause.elements;m<y.length;m++){var k=y[m];_.push(e.createPropertyAssignment(e.createLiteral(e.idText(k.name)),e.createElementAccess(l,e.createLiteral(e.idText(k.propertyName||k.name)))))}c.push(e.createStatement(e.createCall(d,void 0,[e.createObjectLiteral(_,!0)])))}else c.push(e.createStatement(e.createCall(t,void 0,[l])))}}o.push(e.createFunctionExpression(void 0,void 0,void 0,void 0,[e.createParameter(void 0,void 0,void 0,l)],void 0,e.createBlock(c,!0)))}return e.createArrayLiteral(o,!0)}function E(t){switch(t.kind){case 238:return function(t){var n;t.importClause&&r(e.getLocalNameForExternalImport(t,u));if(D(t)){var o=e.getOriginalNodeId(t);y[o]=N(y[o],t)}else n=N(n,t);return e.singleOrMany(n)}(t);case 237:return function(t){var n;if(e.Debug.assert(e.isExternalModuleImportEqualsDeclaration(t),"import= for internal module references should be handled in an earlier transformer."),r(e.getLocalNameForExternalImport(t,u)),D(t)){var o=e.getOriginalNodeId(t);y[o]=w(y[o],t)}else n=w(n,t);return e.singleOrMany(n)}(t);case 244:return;case 243:return function(t){if(t.isExportEquals)return;var n=e.visitNode(t.expression,G,e.isExpression),o=t.original;if(!o||!D(o))return F(e.createIdentifier("default"),n,!0);var r=e.getOriginalNodeId(t);y[r]=M(y[r],e.createIdentifier("default"),n,!0)}(t);default:return H(t)}}function S(t){if(e.isBindingPattern(t.name))for(var n=0,o=t.name.elements;n<o.length;n++){var i=o[n];e.isOmittedExpression(i)||S(i)}else r(e.getSynthesizedClone(t.name))}function C(t){return 0==(2097152&e.getEmitFlags(t))&&(265===f.kind||0==(3&e.getOriginalNode(t).flags))}function x(n,o){var r=o?B:A;return e.isBindingPattern(n.name)?e.flattenDestructuringAssignment(n,G,t,0,!1,r):n.initializer?r(n.name,e.visitNode(n.initializer,G,e.isExpression)):n.name}function B(e,t,n){return I(e,t,n,!0)}function A(e,t,n){return I(e,t,n,!1)}function I(t,n,o,i){return r(e.getSynthesizedClone(t)),i?U(t,z(e.setTextRange(e.createAssignment(t,n),o))):z(e.setTextRange(e.createAssignment(t,n),o))}function D(t){return 0!=(4194304&e.getEmitFlags(t))}function N(e,t){if(p.exportEquals)return e;var n=t.importClause;if(!n)return e;n.name&&(e=L(e,n));var o=n.namedBindings;if(o)switch(o.kind){case 240:e=L(e,o);break;case 241:for(var r=0,i=o.elements;r<i.length;r++){e=L(e,i[r])}}return e}function w(e,t){return p.exportEquals?e:L(e,t)}function R(e,t,n){if(p.exportEquals)return e;for(var o=0,r=t.declarationList.declarations;o<r.length;o++){var i=r[o];(i.initializer||n)&&(e=O(e,i,n))}return e}function O(t,n,o){if(p.exportEquals)return t;if(e.isBindingPattern(n.name))for(var r=0,i=n.name.elements;r<i.length;r++){var s=i[r];e.isOmittedExpression(s)||(t=O(t,s,o))}else if(!e.isGeneratedIdentifier(n.name)){var a=void 0;o&&(t=M(t,n.name,e.getLocalName(n)),a=e.idText(n.name)),t=L(t,n,a)}return t}function P(t,n){if(p.exportEquals)return t;var o;if(e.hasModifier(n,1)){var r=e.hasModifier(n,512)?e.createLiteral("default"):n.name;t=M(t,r,e.getLocalName(n)),o=e.getTextOfIdentifierOrLiteral(r)}return n.name&&(t=L(t,n,o)),t}function L(t,n,o){if(p.exportEquals)return t;var r=e.getDeclarationName(n),i=p.exportSpecifiers.get(e.idText(r));if(i)for(var s=0,a=i;s<a.length;s++){var l=a[s];l.name.escapedText!==o&&(t=M(t,l.name,r))}return t}function M(t,n,o,r){return t=e.append(t,F(n,o,r))}function F(t,n,o){var r=e.createStatement(U(t,n));return e.startOnNewLine(r),o||e.setEmitFlags(r,1536),r}function U(t,n){var o=e.isIdentifier(t)?e.createLiteral(t):t;return e.setEmitFlags(n,1536|e.getEmitFlags(n)),e.setCommentRange(e.createCall(d,void 0,[o,n]),n)}function H(n){switch(n.kind){case 208:return function(t){if(!C(t.declarationList))return e.visitNode(t,G,e.isStatement);for(var n,o,r=e.hasModifier(t,1),i=D(t),s=0,a=t.declarationList.declarations;s<a.length;s++){var l=a[s];l.initializer?n=e.append(n,x(l,r&&!i)):S(l)}if(n&&(o=e.append(o,e.setTextRange(e.createStatement(e.inlineExpressions(n)),t))),i){var c=e.getOriginalNodeId(t);y[c]=R(y[c],t,r)}else o=R(o,t,!1);return e.singleOrMany(o)}(n);case 228:return function(n){if(h=e.hasModifier(n,1)?e.append(h,e.updateFunctionDeclaration(n,n.decorators,e.visitNodes(n.modifiers,K,e.isModifier),n.asteriskToken,e.getDeclarationName(n,!0,!0),void 0,e.visitNodes(n.parameters,G,e.isParameterDeclaration),void 0,e.visitNode(n.body,G,e.isBlock))):e.append(h,e.visitEachChild(n,G,t)),D(n)){var o=e.getOriginalNodeId(n);y[o]=P(y[o],n)}else h=P(h,n)}(n);case 229:return function(t){var n,o=e.getLocalName(t);if(r(o),n=e.append(n,e.setTextRange(e.createStatement(e.createAssignment(o,e.setTextRange(e.createClassExpression(void 0,t.name,void 0,e.visitNodes(t.heritageClauses,G,e.isHeritageClause),e.visitNodes(t.members,G,e.isClassElement)),t))),t)),D(t)){var i=e.getOriginalNodeId(t);y[i]=P(y[i],t)}else n=P(n,t);return e.singleOrMany(n)}(n);case 214:return function(t){var n=f;return f=t,t=e.updateFor(t,V(t.initializer),e.visitNode(t.condition,G,e.isExpression),e.visitNode(t.incrementor,G,e.isExpression),e.visitNode(t.statement,H,e.isStatement)),f=n,t}(n);case 215:return function(t){var n=f;return f=t,t=e.updateForIn(t,V(t.initializer),e.visitNode(t.expression,G,e.isExpression),e.visitNode(t.statement,H,e.isStatement,e.liftToBlock)),f=n,t}(n);case 216:return function(t){var n=f;return f=t,t=e.updateForOf(t,t.awaitModifier,V(t.initializer),e.visitNode(t.expression,G,e.isExpression),e.visitNode(t.statement,H,e.isStatement,e.liftToBlock)),f=n,t}(n);case 212:return function(t){return e.updateDo(t,e.visitNode(t.statement,H,e.isStatement,e.liftToBlock),e.visitNode(t.expression,G,e.isExpression))}(n);case 213:return function(t){return e.updateWhile(t,e.visitNode(t.expression,G,e.isExpression),e.visitNode(t.statement,H,e.isStatement,e.liftToBlock))}(n);case 222:return function(t){return e.updateLabel(t,t.label,e.visitNode(t.statement,H,e.isStatement,e.liftToBlock))}(n);case 220:return function(t){return e.updateWith(t,e.visitNode(t.expression,G,e.isExpression),e.visitNode(t.statement,H,e.isStatement,e.liftToBlock))}(n);case 221:return function(t){return e.updateSwitch(t,e.visitNode(t.expression,G,e.isExpression),e.visitNode(t.caseBlock,H,e.isCaseBlock))}(n);case 235:return function(t){var n=f;return f=t,t=e.updateCaseBlock(t,e.visitNodes(t.clauses,H,e.isCaseOrDefaultClause)),f=n,t}(n);case 257:return function(t){return e.updateCaseClause(t,e.visitNode(t.expression,G,e.isExpression),e.visitNodes(t.statements,H,e.isStatement))}(n);case 258:case 224:return function(n){return e.visitEachChild(n,H,t)}(n);case 260:return function(t){var n=f;return f=t,t=e.updateCatchClause(t,t.variableDeclaration,e.visitNode(t.block,H,e.isBlock)),f=n,t}(n);case 207:return function(n){var o=f;return f=n,n=e.visitEachChild(n,H,t),f=o,n}(n);case 290:return function(t){if(D(t)&&208===t.original.kind){var n=e.getOriginalNodeId(t),o=e.hasModifier(t.original,1);y[n]=R(y[n],t.original,o)}return t}(n);case 291:return function(t){var n=e.getOriginalNodeId(t),o=y[n];return o?(delete y[n],e.append(o,t)):t}(n);default:return G(n)}}function V(n){if(!n)return n;if(function(t){return e.isVariableDeclarationList(t)&&C(t)}(n)){for(var o=void 0,r=0,i=n.declarations;r<i.length;r++){var s=i[r];o=e.append(o,x(s,!1)),s.initializer||S(s)}return o?e.inlineExpressions(o):e.createOmittedExpression()}return e.visitEachChild(n,H,t)}function G(n){return 1024&n.transformFlags&&194===n.kind?function(n){if(W(n.left))return e.flattenDestructuringAssignment(n,G,t,0,!0);return e.visitEachChild(n,G,t)}(n):e.isImportCall(n)?function(t){return e.createCall(e.createPropertyAccess(g,e.createIdentifier("import")),void 0,e.some(t.arguments)?[e.visitNode(t.arguments[0],G)]:[])}(n):2048&n.transformFlags||67108864&n.transformFlags?e.visitEachChild(n,G,t):n}function W(t){if(e.isAssignmentExpression(t,!0))return W(t.left);if(e.isSpreadElement(t))return W(t.expression);if(e.isObjectLiteralExpression(t))return e.some(t.properties,W);if(e.isArrayLiteralExpression(t))return e.some(t.elements,W);if(e.isShorthandPropertyAssignment(t))return W(t.name);if(e.isPropertyAssignment(t))return W(t.initializer);if(e.isIdentifier(t)){var n=s.getReferencedExportContainer(t);return void 0!==n&&265===n.kind}return!1}function K(e){switch(e.kind){case 84:case 79:return}return e}function j(t){var n;if(!e.isGeneratedIdentifier(t)){var o=s.getReferencedImportDeclaration(t)||s.getReferencedValueDeclaration(t);if(o){var r=s.getReferencedExportContainer(t,!1);r&&265===r.kind&&(n=e.append(n,e.getDeclarationName(o))),n=e.addRange(n,p&&p.exportedBindings[e.getOriginalNodeId(o)])}}return n}function z(t){return void 0===_&&(_=[]),_[e.getNodeId(t)]=!0,t}}}(ts||(ts={})),function(e){e.transformES2015Module=function(t){var n,o=t.getCompilerOptions(),r=t.onEmitNode,i=t.onSubstituteNode;return t.onEmitNode=function(t,o,i){e.isSourceFile(o)?(n=o,r(t,o,i),n=void 0):r(t,o,i)},t.onSubstituteNode=function(t,o){if(o=i(t,o),e.isIdentifier(o)&&1===t)return function(t){if(4096&e.getEmitFlags(t)){var o=e.getExternalHelpersModuleName(n);if(o)return e.createPropertyAccess(o,t)}return t}(o);return o},t.enableEmitNotification(265),t.enableSubstitution(71),function(n){if(n.isDeclarationFile)return n;if(e.isExternalModule(n)||o.isolatedModules){var r=e.getOrCreateExternalHelpersModuleNameIfNeeded(n,o);if(r){var i=[],a=e.addPrologue(i,n.statements);return e.append(i,e.createImportDeclaration(void 0,void 0,e.createImportClause(void 0,e.createNamespaceImport(r)),e.createLiteral(e.externalHelpersModuleNameText))),e.addRange(i,e.visitNodes(n.statements,s,e.isStatement,a)),e.updateSourceFileNode(n,e.setTextRange(e.createNodeArray(i),n.statements))}return e.visitEachChild(n,s,t)}return n};function s(e){switch(e.kind){case 237:return;case 243:return function(e){return e.isExportEquals?void 0:e}(e)}return e}}}(ts||(ts={})),function(e){var t,n;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initialized=1]="Initialized",e[e.Completed=2]="Completed",e[e.Disposed=3]="Disposed"}(t||(t={})),function(e){e[e.Substitution=1]="Substitution",e[e.EmitNotifications=2]="EmitNotifications"}(n||(n={})),e.getTransformers=function(t,n){var o=t.jsx,r=e.getEmitScriptTarget(t),i=e.getEmitModuleKind(t),s=[];return e.addRange(s,n&&n.before),s.push(e.transformTypeScript),2===o&&s.push(e.transformJsx),r<5&&s.push(e.transformESNext),r<4&&s.push(e.transformES2017),r<3&&s.push(e.transformES2016),r<2&&(s.push(e.transformES2015),s.push(e.transformGenerators)),s.push(function(t){switch(t){case e.ModuleKind.ESNext:case e.ModuleKind.ES2015:return e.transformES2015Module;case e.ModuleKind.System:return e.transformSystemModule;default:return e.transformModule}}(i)),r<1&&s.push(e.transformES5),e.addRange(s,n&&n.after),s},e.transformNodes=function(t,n,o,r,i,s){for(var a,l,c,u=new Array(292),p=[],d=[],g=0,h=!1,f=function(e,t){return t},_=function(e,t,n){return n(e,t)},m=0,y={getCompilerOptions:function(){return o},getEmitResolver:function(){return t},getEmitHost:function(){return n},startLexicalEnvironment:function(){e.Debug.assert(m>0,"Cannot modify the lexical environment during initialization."),e.Debug.assert(m<2,"Cannot modify the lexical environment after transformation has completed."),e.Debug.assert(!h,"Lexical environment is suspended."),p[g]=a,d[g]=l,g++,a=void 0,l=void 0},suspendLexicalEnvironment:function(){e.Debug.assert(m>0,"Cannot modify the lexical environment during initialization."),e.Debug.assert(m<2,"Cannot modify the lexical environment after transformation has completed."),e.Debug.assert(!h,"Lexical environment is already suspended."),h=!0},resumeLexicalEnvironment:function(){e.Debug.assert(m>0,"Cannot modify the lexical environment during initialization."),e.Debug.assert(m<2,"Cannot modify the lexical environment after transformation has completed."),e.Debug.assert(h,"Lexical environment is not suspended."),h=!1},endLexicalEnvironment:function(){var t;if(e.Debug.assert(m>0,"Cannot modify the lexical environment during initialization."),e.Debug.assert(m<2,"Cannot modify the lexical environment after transformation has completed."),e.Debug.assert(!h,"Lexical environment is suspended."),(a||l)&&(l&&(t=l.slice()),a)){var n=e.createVariableStatement(void 0,e.createVariableDeclarationList(a));t?t.push(n):t=[n]}g--,a=p[g],l=d[g],0===g&&(p=[],d=[]);return t},hoistVariableDeclaration:function(t){e.Debug.assert(m>0,"Cannot modify the lexical environment during initialization."),e.Debug.assert(m<2,"Cannot modify the lexical environment after transformation has completed.");var n=e.setEmitFlags(e.createVariableDeclaration(t),64);a?a.push(n):a=[n]},hoistFunctionDeclaration:function(t){e.Debug.assert(m>0,"Cannot modify the lexical environment during initialization."),e.Debug.assert(m<2,"Cannot modify the lexical environment after transformation has completed."),l?l.push(t):l=[t]},requestEmitHelper:function(t){e.Debug.assert(m>0,"Cannot modify the transformation context during initialization."),e.Debug.assert(m<2,"Cannot modify the transformation context after transformation has completed."),e.Debug.assert(!t.scoped,"Cannot request a scoped emit helper."),c=e.append(c,t)},readEmitHelpers:function(){e.Debug.assert(m>0,"Cannot modify the transformation context during initialization."),e.Debug.assert(m<2,"Cannot modify the transformation context after transformation has completed.");var t=c;return c=void 0,t},enableSubstitution:function(t){e.Debug.assert(m<2,"Cannot modify the transformation context after transformation has completed."),u[t]|=1},enableEmitNotification:function(t){e.Debug.assert(m<2,"Cannot modify the transformation context after transformation has completed."),u[t]|=2},isSubstitutionEnabled:S,isEmitNotificationEnabled:C,get onSubstituteNode(){return f},set onSubstituteNode(t){e.Debug.assert(m<1,"Cannot modify transformation hooks after initialization has completed."),e.Debug.assert(void 0!==t,"Value must not be 'undefined'"),f=t},get onEmitNode(){return _},set onEmitNode(t){e.Debug.assert(m<1,"Cannot modify transformation hooks after initialization has completed."),e.Debug.assert(void 0!==t,"Value must not be 'undefined'"),_=t}},k=0,b=r;k<b.length;k++){var v=b[k];e.disposeEmitNodes(e.getSourceFileOfNode(e.getParseTreeNode(v)))}e.performance.mark("beforeTransform");var T=e.chain.apply(void 0,i)(y);m=1;var E=e.map(r,s?T:function(t){return!t||e.isSourceFile(t)&&t.isDeclarationFile?t:T(t)});return m=2,e.performance.mark("afterTransform"),e.performance.measure("transformTime","beforeTransform","afterTransform"),{transformed:E,substituteNode:function(t,n){return e.Debug.assert(m<3,"Cannot substitute a node after the result is disposed."),n&&S(n)&&f(t,n)||n},emitNodeWithNotification:function(t,n,o){e.Debug.assert(m<3,"Cannot invoke TransformationResult callbacks after the result is disposed."),n&&(C(n)?_(t,n,o):o(t,n))},dispose:function(){if(m<3){for(var t=0,n=r;t<n.length;t++){var o=n[t];e.disposeEmitNodes(e.getSourceFileOfNode(e.getParseTreeNode(o)))}a=void 0,p=void 0,l=void 0,d=void 0,f=void 0,_=void 0,c=void 0,m=3}}};function S(t){return 0!=(1&u[t.kind])&&0==(4&e.getEmitFlags(t))}function C(t){return 0!=(2&u[t.kind])||0!=(2&e.getEmitFlags(t))}}}(ts||(ts={})),function(e){var t={emittedLine:1,emittedColumn:1,sourceLine:1,sourceColumn:1,sourceIndex:0};e.createSourceMapWriter=function(n,r){var i,s,a,l,c,u,p,d,g=n.getCompilerOptions(),h=g.extendedDiagnostics,f=!(g.sourceMap||g.inlineSourceMap);return{initialize:function(o,r,h){if(f)return;d&&m();i=void 0,s=void 0,l=-1,c=void 0,u=t,p=0,(d={sourceMapFilePath:r,jsSourceMappingURL:g.inlineSourceMap?void 0:e.getBaseFileName(e.normalizeSlashes(r)),sourceMapFile:e.getBaseFileName(e.normalizeSlashes(o)),sourceMapSourceRoot:g.sourceRoot||"",sourceMapSources:[],inputSourceFileNames:[],sourceMapNames:[],sourceMapMappings:"",sourceMapSourcesContent:g.inlineSources?[]:void 0,sourceMapDecodedMappings:[]}).sourceMapSourceRoot=e.normalizeSlashes(d.sourceMapSourceRoot),d.sourceMapSourceRoot.length&&47!==d.sourceMapSourceRoot.charCodeAt(d.sourceMapSourceRoot.length-1)&&(d.sourceMapSourceRoot+=e.directorySeparator);g.mapRoot?(a=e.normalizeSlashes(g.mapRoot),265===h.kind&&(a=e.getDirectoryPath(e.getSourceFilePathInNewDir(h,n,a))),e.isRootedDiskPath(a)||e.isUrl(a)?d.jsSourceMappingURL=e.combinePaths(a,d.jsSourceMappingURL):(a=e.combinePaths(n.getCommonSourceDirectory(),a),d.jsSourceMappingURL=e.getRelativePathToDirectoryOrUrl(e.getDirectoryPath(e.normalizePath(o)),e.combinePaths(a,d.jsSourceMappingURL),n.getCurrentDirectory(),n.getCanonicalFileName,!0))):a=e.getDirectoryPath(e.normalizePath(o))},reset:m,getSourceMapData:function(){return d},setSourceFile:b,emitPos:k,emitNodeWithSourceMap:function(e,t,n){if(f)return n(e,t);if(t){var o=t.emitNode,r=o&&o.flags,s=o&&o.sourceMapRange,a=s||t,l=a.pos,c=a.end,u=s&&s.source,p=i;u===p&&(u=void 0),u&&b(u),287!==t.kind&&0==(16&r)&&l>=0&&k(_(l)),u&&b(p),64&r?(f=!0,n(e,t),f=!1):n(e,t),u&&b(u),287!==t.kind&&0==(32&r)&&c>=0&&k(c),u&&b(p)}},emitTokenWithSourceMap:function(e,t,n,o){if(f)return o(t,n);var r=e&&e.emitNode,i=r&&r.flags,s=r&&r.tokenSourceMapRanges&&r.tokenSourceMapRanges[t];n=_(s?s.pos:n),0==(128&i)&&n>=0&&k(n);n=o(t,n),s&&(n=s.end);0==(256&i)&&n>=0&&k(n);return n},getText:v,getSourceMappingURL:function(){if(f)return;if(g.inlineSourceMap){var t=e.convertToBase64(v());return d.jsSourceMappingURL="data:application/json;base64,"+t}return d.jsSourceMappingURL}};function _(t){return i.skipTrivia?i.skipTrivia(t):e.skipTrivia(s,t)}function m(){f||(i=void 0,a=void 0,l=void 0,c=void 0,u=void 0,p=void 0,d=void 0)}function y(){if(c&&c!==u){var t=u.emittedColumn;if(u.emittedLine===c.emittedLine)d.sourceMapMappings&&(d.sourceMapMappings+=",");else{for(var n=u.emittedLine;n<c.emittedLine;n++)d.sourceMapMappings+=";";t=1}d.sourceMapMappings+=o(c.emittedColumn-t),d.sourceMapMappings+=o(c.sourceIndex-u.sourceIndex),d.sourceMapMappings+=o(c.sourceLine-u.sourceLine),d.sourceMapMappings+=o(c.sourceColumn-u.sourceColumn),c.nameIndex>=0&&(e.Debug.assert(!1,"We do not support name index right now, Make sure to update updateLastEncodedAndRecordedSpans when we start using this"),d.sourceMapMappings+=o(c.nameIndex-p),p=c.nameIndex),u=c,d.sourceMapDecodedMappings.push(u)}}function k(t){if(!f&&!e.positionIsSynthesized(t)){h&&e.performance.mark("beforeSourcemap");var n=e.getLineAndCharacterOfPosition(i,t);n.line++,n.character++;var o=r.getLine(),s=r.getColumn();!c||c.emittedLine!==o||c.emittedColumn!==s||c.sourceIndex===l&&(c.sourceLine>n.line||c.sourceLine===n.line&&c.sourceColumn>n.character)?(y(),c={emittedLine:o,emittedColumn:s,sourceLine:n.line,sourceColumn:n.character,sourceIndex:l}):(c.sourceLine=n.line,c.sourceColumn=n.character,c.sourceIndex=l),h&&(e.performance.mark("afterSourcemap"),e.performance.measure("Source Map","beforeSourcemap","afterSourcemap"))}}function b(t){if(!f){s=(i=t).text;var o=g.sourceRoot?n.getCommonSourceDirectory():a,r=e.getRelativePathToDirectoryOrUrl(o,i.fileName,n.getCurrentDirectory(),n.getCanonicalFileName,!0);-1===(l=e.indexOf(d.sourceMapSources,r))&&(l=d.sourceMapSources.length,d.sourceMapSources.push(r),d.inputSourceFileNames.push(i.fileName),g.inlineSources&&d.sourceMapSourcesContent.push(i.text))}}function v(){if(!f)return y(),JSON.stringify({version:3,file:d.sourceMapFile,sourceRoot:d.sourceMapSourceRoot,sources:d.sourceMapSources,names:d.sourceMapNames,mappings:d.sourceMapMappings,sourcesContent:d.sourceMapSourcesContent})}};function n(e){if(e<64)return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e);throw TypeError(e+": not a 64 based value")}function o(e){e<0?e=1+(-e<<1):e<<=1;var t="";do{var o=31&e;(e>>=5)>0&&(o|=32),t+=n(o)}while(e>0);return t}}(ts||(ts={})),function(e){e.createCommentWriter=function(t,n){var o,r,i,s,a,l=t.extendedDiagnostics,c=e.getNewLineCharacter(t),u=-1,p=-1,d=-1,g=!1,h=t.removeComments;return{reset:function(){r=void 0,i=void 0,s=void 0,a=void 0},setWriter:function(e){o=e},setSourceFile:function(t){i=(r=t).text,s=e.getLineStarts(r),a=void 0},emitNodeWithComments:function(t,n,o){if(h)return void o(t,n);if(n){g=!1;var r=n.emitNode,i=r&&r.flags,s=r&&r.commentRange||n,a=s.pos,c=s.end;if(a<0&&c<0||a===c)f(t,n,r,i,o);else{l&&e.performance.mark("preEmitNodeWithComment");var _=287!==n.kind,m=a<0||0!=(512&i)||10===n.kind,y=c<0||0!=(1024&i)||10===n.kind;m||k(a,_);var b=u,v=p,E=d;m||(u=a),y||(p=c,227===n.kind&&(d=c)),l&&e.performance.measure("commentTime","preEmitNodeWithComment"),f(t,n,r,i,o),l&&e.performance.mark("postEmitNodeWithComment"),u=b,p=v,d=E,!y&&_&&function(e){C(e,T)}(c),l&&e.performance.measure("commentTime","postEmitNodeWithComment")}}},emitBodyWithDetachedComments:function(t,n,r){l&&e.performance.mark("preEmitBodyWithDetachedComments");var u=n.pos,p=n.end,d=e.getEmitFlags(t),f=h||p<0||0!=(1024&d);u<0||0!=(512&d)||(_=n,(m=e.emitDetachedComments(i,s,o,x,_,c,h))&&(a?a.push(m):a=[m]));var _,m;l&&e.performance.measure("commentTime","preEmitBodyWithDetachedComments");2048&d&&!h?(h=!0,r(t),h=!1):r(t);l&&e.performance.mark("beginEmitBodyWithDetachedCommetns");f||(k(n.end,!0),g&&!o.isAtStartOfLine()&&o.writeLine());l&&e.performance.measure("commentTime","beginEmitBodyWithDetachedCommetns")},emitTrailingCommentsOfPosition:function(t,n){if(h)return;l&&e.performance.mark("beforeEmitTrailingCommentsOfPosition");C(t,n?T:E),l&&e.performance.measure("commentTime","beforeEmitTrailingCommentsOfPosition")},emitLeadingCommentsOfPosition:function(e){if(h||-1===e)return;k(e,!0)}};function f(t,n,o,r,i){var s=o&&o.leadingComments;e.some(s)&&(l&&e.performance.mark("preEmitNodeWithSynthesizedComments"),e.forEach(s,_),l&&e.performance.measure("commentTime","preEmitNodeWithSynthesizedComments")),function(e,t,n,o){2048&n?(h=!0,o(e,t),h=!1):o(e,t)}(t,n,r,i);var a=o&&o.trailingComments;e.some(a)&&(l&&e.performance.mark("postEmitNodeWithSynthesizedComments"),e.forEach(a,m),l&&e.performance.measure("commentTime","postEmitNodeWithSynthesizedComments"))}function _(e){2===e.kind&&o.writeLine(),y(e),e.hasTrailingNewLine||2===e.kind?o.writeLine():o.write(" ")}function m(e){o.isAtStartOfLine()||o.write(" "),y(e),e.hasTrailingNewLine&&o.writeLine()}function y(t){var n=function(e){return 3===e.kind?"/*"+e.text+"*/":"//"+e.text}(t),r=3===t.kind?e.computeLineStarts(n):void 0;e.writeCommentRange(n,r,o,0,n.length,c)}function k(e,t){g=!1,t?S(e,v):0===e&&S(e,b)}function b(t,n,o,r,s){(function(t,n){return e.isRecognizedTripleSlashComment(i,t,n)})(t,n)&&v(t,n,o,r,s)}function v(t,r,a,l,u){g||(e.emitNewLineBeforeLeadingCommentOfPosition(s,o,u,t),g=!0),n&&n(t),e.writeCommentRange(i,s,o,t,r,c),n&&n(r),l?o.writeLine():o.write(" ")}function T(t,r,a,l){o.isAtStartOfLine()||o.write(" "),n&&n(t),e.writeCommentRange(i,s,o,t,r,c),n&&n(r),l&&o.writeLine()}function E(t,r,a,l){n&&n(t),e.writeCommentRange(i,s,o,t,r,c),n&&n(r),l?o.writeLine():o.write(" ")}function S(t,n){-1!==u&&t===u||(function(t){return void 0!==a&&e.lastOrUndefined(a).nodePos===t}(t)?function(t){var n=e.lastOrUndefined(a).detachedCommentEndPos;a.length-1?a.pop():a=void 0;e.forEachLeadingCommentRange(i,n,t,n)}(n):e.forEachLeadingCommentRange(i,t,n,t))}function C(t,n){(-1===p||t!==p&&t!==d)&&e.forEachTrailingCommentRange(i,t,n)}function x(t,o,r,i,s,a){n&&n(i),e.writeCommentRange(t,o,r,i,s,a),n&&n(s)}}}(ts||(ts={})),function(e){function t(t,n,o,r,i,s){var a,l,c,u,p,d,g,h,f,_,m,y,k=266===i.kind?i.sourceFiles:[i],b=266===i.kind,v=t.getNewLine(),T=t.getCompilerOptions();L();var E,S,C,x=!1,B=T.removeComments?e.noop:function(t){if(t){var n=e.getJSDocCommentRanges(t,f);e.emitNewLineBeforeLeadingComments(_,d,t,n),e.emitComments(f,_,d,n,!1,!0,v,e.writeCommentRange)}},A=T.stripInternal?function(t){if(t){var n=e.getLeadingCommentRanges(f,t.pos);if(e.forEach(n,P))return;me(t)}}:me,I=!0,D=[],N="",w=[],R=!1,O=[];return e.forEach(k,(function(n){if(!e.isSourceFileJavaScript(n)){if(T.noResolve||e.forEach(n.referencedFiles,(function(o){var i=e.tryResolveScriptReference(t,n,o);i&&!e.contains(w,i)&&(function(n,o,i){var s,a=!1;n.isDeclarationFile?s=n.fileName:e.forEachEmittedFile(t,l,n,i);s&&(s=e.getRelativePathToDirectoryOrUrl(e.getDirectoryPath(e.normalizeSlashes(r)),s,t.getCurrentDirectory(),t.getCanonicalFileName,!1),N+='/// <reference path="'+s+'" />'+v);return a;function l(t,r){var i=266===r.kind;i&&!o||(e.Debug.assert(!!t.declarationFilePath||e.isSourceFileJavaScript(n),"Declaration file is not present only for javascript files"),s=t.declarationFilePath||t.jsFilePath,a=i)}}(i,!b&&!R,s)&&(R=!0),w.push(i))})),h=!1,b&&e.isExternalModule(n)?e.isExternalModule(n)&&(I=!1,a('declare module "'+e.getResolvedExternalModuleName(t,n)+'" {'),l(),c(),J(n),u(),a("}"),l()):(I=!0,J(n)),D.length){var o=d;e.forEach(D,(function(t){if(t.isVisible&&!t.asynchronousOutput){e.Debug.assert(238===t.node.kind),L(),e.Debug.assert(0===t.indent||1===t.indent&&b);for(var n=0;n<t.indent;n++)c();oe(t.node),t.asynchronousOutput=d.getText();for(n=0;n<t.indent;n++)u()}})),M(o),O=O.concat(D),D=[]}!b&&e.isExternalModule(n)&&n.moduleAugmentations.length&&!h&&(a("export {};"),l())}})),C&&e.forEachKey(C,(function(e){N+='/// <reference types="'+e+'" />'+v})),{reportedDeclarationError:x,moduleElementDeclarationEmitInfo:O,synchronousDeclarationOutput:d.getText(),referencesOutput:N};function P(t){var n=f.substring(t.pos,t.end);return e.stringContains(n,"@internal")}function L(){var t=e.createTextWriter(v);t.trackSymbol=V,t.reportInaccessibleThisError=W,t.reportPrivateInBaseOfClassExpression=G,t.writeKeyword=t.write,t.writeOperator=t.write,t.writePunctuation=t.write,t.writeSpace=t.write,t.writeStringLiteral=t.writeLiteral,t.writeParameter=t.write,t.writeProperty=t.write,t.writeSymbol=t.write,M(t)}function M(e){d=e,a=e.write,p=e.writeTextOfNode,l=e.writeLine,c=e.increaseIndent,u=e.decreaseIndent}function F(t){var n=d;e.forEach(t,(function(t){var n;226===t.kind?n=t.parent.parent:241===t.kind||242===t.kind||239===t.kind?e.Debug.fail("We should be getting ImportDeclaration instead to write"):n=t;var o=e.forEach(D,(function(e){return e.node===n?e:void 0}));if(!o&&S&&(o=e.forEach(S,(function(e){return e.node===n?e:void 0}))),o)if(238===o.node.kind)o.isVisible=!0;else{L();for(var r=o.indent;r;r--)c();233===n.kind&&(e.Debug.assert(void 0===S),S=[]),Q(n),233===n.kind&&(o.subModuleElementDeclarationEmitInfo=S,S=void 0),o.asynchronousOutput=d.getText()}})),M(n)}function U(t){if(t){C||(C=e.createMap());for(var n=0,o=t;n<o.length;n++){var r=o[n];C.has(r)||C.set(r,r)}}}function H(t){if(0===t.accessibility)t&&t.aliasesToMakeVisible&&F(t.aliasesToMakeVisible);else{x=!0;var n=d.getSymbolAccessibilityDiagnostic(t);n&&(n.typeName?o.add(e.createDiagnosticForNode(t.errorNode||n.errorNode,n.diagnosticMessage,e.getTextOfNodeFromSourceText(f,n.typeName),t.errorSymbolName,t.errorModuleName)):o.add(e.createDiagnosticForNode(t.errorNode||n.errorNode,n.diagnosticMessage,t.errorSymbolName,t.errorModuleName)))}}function V(e,t,o){H(n.isSymbolAccessible(e,t,o,!0)),U(n.getTypeReferenceDirectivesForSymbol(e,o))}function G(t){E&&(x=!0,o.add(e.createDiagnosticForNode(E,e.Diagnostics.Property_0_of_exported_class_expression_may_not_be_private_or_protected,t)))}function W(){E&&(x=!0,o.add(e.createDiagnosticForNode(E,e.Diagnostics.The_inferred_type_of_0_references_an_inaccessible_this_type_A_type_annotation_is_necessary,e.declarationNameToString(E))))}function K(e,t,o){d.getSymbolAccessibilityDiagnostic=o,a(": ");var r=146===e.kind&&(n.isRequiredInitializedParameter(e)||n.isOptionalUninitializedParameterProperty(e));if(t&&!r)Y(t);else{E=e.name;var i=16388|(r?8192:0);n.writeTypeOfDeclaration(e,g,i,d),E=void 0}}function j(e){for(var t=0,n=e;t<n.length;t++){var o=n[t];A(o)}}function z(e,t,n,o){for(var r=d.getTextPos(),i=0,s=e;i<s.length;i++){var l=s[i];o&&!o(l)||(r!==d.getTextPos()&&a(t),r=d.getTextPos(),n(l))}}function $(e,t,n){z(e,", ",t,n)}function X(e,t){d.getSymbolAccessibilityDiagnostic=t,Y(e)}function Y(t){switch(t.kind){case 119:case 136:case 133:case 122:case 134:case 137:case 105:case 139:case 95:case 130:case 169:case 173:return p(f,t);case 201:return o=t,void(e.isEntityNameExpression(o.expression)&&(e.Debug.assert(71===o.expression.kind||179===o.expression.kind),i(o.expression),o.typeArguments&&(a("<"),$(o.typeArguments,Y),a(">"))));case 159:return function(e){i(e.typeName),e.typeArguments&&(a("<"),$(e.typeArguments,Y),a(">"))}(t);case 162:return function(e){a("typeof "),i(e.exprName)}(t);case 164:return function(e){Y(e.elementType),a("[]")}(t);case 165:return function(e){a("["),$(e.elementTypes,Y),a("]")}(t);case 166:return function(e){z(e.types," | ",Y)}(t);case 167:return function(e){z(e.types," & ",Y)}(t);case 168:return function(e){a("("),Y(e.type),a(")")}(t);case 170:return function(t){a(e.tokenToString(t.operator)),a(" "),Y(t.type)}(t);case 171:return function(e){Y(e.objectType),a("["),Y(e.indexType),a("]")}(t);case 172:return function(e){var t=g;g=e,a("{"),l(),c(),e.readonlyToken&&a("readonly ");a("["),r(e.typeParameter.name),a(" in "),Y(e.typeParameter.constraint),a("]"),e.questionToken&&a("?");a(": "),Y(e.type),a(";"),l(),u(),a("}"),g=t}(t);case 160:case 161:return he(t);case 163:return function(e){a("{"),e.members.length&&(l(),c(),j(e.members),u());a("}")}(t);case 71:case 143:return i(t);case 158:return function(e){p(f,e.parameterName),a(" is "),Y(e.type)}(t)}var o;function r(e){if(71===e.kind)p(f,e);else{var t=143===e.kind?e.left:e.expression,n=143===e.kind?e.right:e.name;r(t),a("."),p(f,n)}}function i(e){H(n.isEntityNameVisible(e,237===e.parent.kind?e.parent:g)),U(n.getTypeReferenceDirectivesForEntityName(e)),r(e)}}function J(t){f=t.text,_=e.getLineStarts(t),m=t.identifiers,y=e.isExternalModule(t),g=t,e.emitDetachedComments(f,_,d,e.writeCommentRange,t,v,!0),j(t.statements)}function q(e,t,o,r){var i=function(e){if(!m.has(e))return e;for(var t=0;;){var n=e+"_"+ ++t;if(!m.has(n))return n}}(t);return r&&a("declare "),a("const "),a(i),a(": "),d.getSymbolAccessibilityDiagnostic=function(){return o},n.writeTypeOfExpression(e,g,16388,d),a(";"),l(),i}function Z(e,t){if(t)Q(e);else if(237===e.kind||265===e.parent.kind&&y){var o=void 0;if(S&&265!==e.parent.kind)S.push({node:e,outputPos:d.getTextPos(),indent:d.getIndent(),isVisible:o});else{if(238===e.kind){var r=e;r.importClause&&(o=r.importClause.name&&n.isDeclarationVisible(r.importClause)||ne(r.importClause.namedBindings))}D.push({node:e,outputPos:d.getTextPos(),indent:d.getIndent(),isVisible:o})}}}function Q(t){switch(t.kind){case 228:return ge(t);case 208:return function(t){if(e.every(t.declarationList&&t.declarationList.declarations,(function(t){return t.name&&e.isEmptyBindingPattern(t.name)})))return;B(t),ee(t),e.isLet(t.declarationList)?a("let "):e.isConst(t.declarationList)?a("const "):a("var ");$(t.declarationList.declarations,pe,n.isDeclarationVisible),a(";"),l()}(t);case 230:return function(t){B(t),ee(t),a("interface "),p(f,t.name);var n=g;g=t,le(t.typeParameters);var o=e.filter(e.getInterfaceBaseTypeNodes(t),(function(t){return e.isEntityNameExpression(t.expression)}));o&&o.length&&ce(o,!1);a(" {"),l(),c(),j(t.members),u(),a("}"),l(),g=n}(t);case 229:return function(t){function n(t){t&&e.forEach(t.parameters,(function(t){e.hasModifier(t,92)&&ue(t)}))}var o=g;g=t;var r,i=e.getClassExtendsHeritageClauseElement(t);i&&!e.isEntityNameExpression(i.expression)&&(r=95===i.expression.kind?"null":q(i.expression,t.name.escapedText+"_base",{diagnosticMessage:e.Diagnostics.extends_clause_of_exported_class_0_has_or_is_using_private_name_1,errorNode:i,typeName:t.name},!e.findAncestor(t,(function(e){return 233===e.kind}))));B(t),ee(t),e.hasModifier(t,128)&&a("abstract ");a("class "),p(f,t.name),le(t.typeParameters),i&&(e.isEntityNameExpression(i.expression)?ce([i],!1):(a(" extends "),a(r),i.typeArguments&&(a("<"),$(i.typeArguments,Y),a(">"))));ce(e.getClassImplementsHeritageClauseElements(t),!0),a(" {"),l(),c(),n(e.getFirstConstructorWithBody(t)),j(t.members),u(),a("}"),l(),g=o}(t);case 231:return function(t){var n=g;function o(){return{diagnosticMessage:e.Diagnostics.Exported_type_alias_0_has_or_is_using_private_name_1,errorNode:t.type,typeName:t.name}}g=t,B(t),ee(t),a("type "),p(f,t.name),le(t.typeParameters),a(" = "),X(t.type,o),a(";"),l(),g=n}(t);case 232:return function(t){B(t),ee(t),e.isConst(t)&&a("const ");a("enum "),p(f,t.name),a(" {"),l(),c(),j(t.members),u(),a("}"),l()}(t);case 233:return function(t){B(t),ee(t),e.isGlobalScopeAugmentation(t)?a("global "):(16&t.flags?a("namespace "):a("module "),e.isExternalModuleAugmentation(t)?re(t):p(f,t.name));for(;t.body&&234!==t.body.kind;)t=t.body,a("."),p(f,t.name);var n=g;t.body?(g=t,a(" {"),l(),c(),j(t.body.statements),u(),a("}"),l(),g=n):a(";")}(t);case 237:return function(t){B(t),e.hasModifier(t,1)&&a("export ");a("import "),p(f,t.name),a(" = "),e.isInternalModuleImportEqualsDeclaration(t)?(X(t.moduleReference,n),a(";")):(a("require("),re(t),a(");"));function n(){return{diagnosticMessage:e.Diagnostics.Import_declaration_0_is_using_private_name_1,errorNode:t,typeName:t.name}}d.writeLine()}(t);case 238:return oe(t);default:e.Debug.fail("Unknown symbol kind")}}function ee(t){if(265===t.parent.kind){var n=e.getModifierFlags(t);1&n&&a("export "),512&n?a("default "):230!==t.kind&&I&&a("declare ")}}function te(e){8&e?a("private "):16&e&&a("protected "),32&e&&a("static "),64&e&&a("readonly "),128&e&&a("abstract ")}function ne(t){if(t)return 240===t.kind?n.isDeclarationVisible(t):e.forEach(t.elements,(function(e){return n.isDeclarationVisible(e)}))}function oe(t){if(B(t),e.hasModifier(t,1)&&a("export "),a("import "),t.importClause){var o=d.getTextPos();t.importClause.name&&n.isDeclarationVisible(t.importClause)&&p(f,t.importClause.name),t.importClause.namedBindings&&ne(t.importClause.namedBindings)&&(o!==d.getTextPos()&&a(", "),240===t.importClause.namedBindings.kind?(a("* as "),p(f,t.importClause.namedBindings.name)):(a("{ "),$(t.importClause.namedBindings.elements,ie,n.isDeclarationVisible),a(" }"))),a(" from ")}re(t),a(";"),d.writeLine()}function re(o){var r;if(h=h||233!==o.kind,237===o.kind){var i=o;r=e.getExternalModuleImportEqualsDeclarationExpression(i)}else if(233===o.kind)r=o.name;else{r=(i=o).moduleSpecifier}if(9===r.kind&&b&&(T.out||T.outFile)){var s=e.getExternalModuleNameFromDeclaration(t,n,o);if(s)return a('"'),a(s),void a('"')}p(f,r)}function ie(e){e.propertyName&&(p(f,e.propertyName),a(" as ")),p(f,e.name)}function se(e){ie(e),F(n.collectLinkedAliases(e.propertyName||e.name))}function ae(t){return 151===t.parent.kind&&e.hasModifier(t.parent,8)}function le(t){t&&(a("<"),$(t,(function(t){function n(){var n;switch(t.parent.kind){case 229:n=e.Diagnostics.Type_parameter_0_of_exported_class_has_or_is_using_private_name_1;break;case 230:n=e.Diagnostics.Type_parameter_0_of_exported_interface_has_or_is_using_private_name_1;break;case 156:n=e.Diagnostics.Type_parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1;break;case 155:n=e.Diagnostics.Type_parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1;break;case 151:case 150:n=e.hasModifier(t.parent,32)?e.Diagnostics.Type_parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1:229===t.parent.parent.kind?e.Diagnostics.Type_parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1:e.Diagnostics.Type_parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1;break;case 228:n=e.Diagnostics.Type_parameter_0_of_exported_function_has_or_is_using_private_name_1;break;case 231:n=e.Diagnostics.Type_parameter_0_of_exported_type_alias_has_or_is_using_private_name_1;break;default:e.Debug.fail("This is unknown parent for type parameter: "+t.parent.kind)}return{diagnosticMessage:n,errorNode:t,typeName:t.name}}c(),B(t),u(),p(f,t.name),t.constraint&&!ae(t)&&(a(" extends "),160===t.parent.kind||161===t.parent.kind||t.parent.parent&&163===t.parent.parent.kind?(e.Debug.assert(151===t.parent.kind||150===t.parent.kind||160===t.parent.kind||161===t.parent.kind||155===t.parent.kind||156===t.parent.kind),Y(t.constraint)):X(t.constraint,n)),t.default&&!ae(t)&&(a(" = "),160===t.parent.kind||161===t.parent.kind||t.parent.parent&&163===t.parent.parent.kind?(e.Debug.assert(151===t.parent.kind||150===t.parent.kind||160===t.parent.kind||161===t.parent.kind||155===t.parent.kind||156===t.parent.kind),Y(t.default)):X(t.default,n))})),a(">"))}function ce(t,n){t&&(a(n?" implements ":" extends "),$(t,(function(t){e.isEntityNameExpression(t.expression)?X(t,o):n||95!==t.expression.kind||a("null");function o(){return{diagnosticMessage:229===t.parent.parent.kind?n?e.Diagnostics.Implements_clause_of_exported_class_0_has_or_is_using_private_name_1:e.Diagnostics.extends_clause_of_exported_class_0_has_or_is_using_private_name_1:e.Diagnostics.extends_clause_of_exported_interface_0_has_or_is_using_private_name_1,errorNode:t,typeName:e.getNameOfDeclaration(t.parent.parent)}}})))}function ue(t){e.hasDynamicName(t)||(B(t),te(e.getModifierFlags(t)),pe(t),a(";"),l())}function pe(t){function o(n){return 226===t.kind?n.errorModuleName?2===n.accessibility?e.Diagnostics.Exported_variable_0_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:e.Diagnostics.Exported_variable_0_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Exported_variable_0_has_or_is_using_private_name_1:149===t.kind||148===t.kind||146===t.kind&&e.hasModifier(t.parent,8)?e.hasModifier(t,32)?n.errorModuleName?2===n.accessibility?e.Diagnostics.Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:e.Diagnostics.Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Public_static_property_0_of_exported_class_has_or_is_using_private_name_1:229===t.parent.kind||146===t.kind?n.errorModuleName?2===n.accessibility?e.Diagnostics.Public_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:e.Diagnostics.Public_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Public_property_0_of_exported_class_has_or_is_using_private_name_1:n.errorModuleName?e.Diagnostics.Property_0_of_exported_interface_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Property_0_of_exported_interface_has_or_is_using_private_name_1:void 0}function r(e){for(var t=[],n=0,o=e.elements;n<o.length;n++){var r=o[n];200!==r.kind&&t.push(r)}$(t,i)}function i(t){t.name&&(e.isBindingPattern(t.name)?r(t.name):(p(f,t.name),K(t,void 0,(function(e){var n=o(e);return void 0!==n?{diagnosticMessage:n,errorNode:t,typeName:t.name}:void 0}))))}(226!==t.kind||n.isDeclarationVisible(t))&&(e.isBindingPattern(t.name)?r(t.name):(p(f,t.name),(149===t.kind||148===t.kind||146===t.kind&&!e.isParameterPropertyDeclaration(t))&&e.hasQuestionToken(t)&&a("?"),149!==t.kind&&148!==t.kind||163!==t.parent.kind?n.isLiteralConstDeclaration(t)?(a(" = "),n.writeLiteralConstValue(t,d)):e.hasModifier(t,8)||K(t,t.type,(function(e){var n=o(e);return void 0!==n?{diagnosticMessage:n,errorNode:t,typeName:t.name}:void 0})):de(t)))}function de(e){e.type&&(a(": "),Y(e.type))}function ge(t){e.hasDynamicName(t)||n.isImplementationOfOverload(t)||(B(t),228===t.kind?ee(t):151!==t.kind&&152!==t.kind||te(e.getModifierFlags(t)),228===t.kind?(a("function "),p(f,t.name)):152===t.kind?a("constructor"):(p(f,t.name),e.hasQuestionToken(t)&&a("?")),fe(t))}function he(e){B(e),fe(e)}function fe(t){var o=g;g=t;var r=!1;if(157===t.kind)te(e.getModifierFlags(t)),a("[");else{if(152===t.kind&&e.hasModifier(t,8))return a("();"),void l();if(156===t.kind||161===t.kind)a("new ");else if(160===t.kind){var i=d.getText();t.typeParameters&&"<"===i.charAt(i.length-1)&&(r=!0,a("("))}le(t.typeParameters),a("(")}$(t.parameters,_e),157===t.kind?a("]"):a(")");var s,c,u=160===t.kind||161===t.kind;u||163===t.parent.kind?t.type&&(a(u?" => ":": "),Y(t.type)):152===t.kind||e.hasModifier(t,8)||(s=t,c=function(n){var o;switch(t.kind){case 156:o=n.errorModuleName?e.Diagnostics.Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_0;break;case 155:o=n.errorModuleName?e.Diagnostics.Return_type_of_call_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_call_signature_from_exported_interface_has_or_is_using_private_name_0;break;case 157:o=n.errorModuleName?e.Diagnostics.Return_type_of_index_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_index_signature_from_exported_interface_has_or_is_using_private_name_0;break;case 151:case 150:o=e.hasModifier(t,32)?n.errorModuleName?2===n.accessibility?e.Diagnostics.Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:e.Diagnostics.Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_public_static_method_from_exported_class_has_or_is_using_private_name_0:229===t.parent.kind?n.errorModuleName?2===n.accessibility?e.Diagnostics.Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:e.Diagnostics.Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_public_method_from_exported_class_has_or_is_using_private_name_0:n.errorModuleName?e.Diagnostics.Return_type_of_method_from_exported_interface_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_method_from_exported_interface_has_or_is_using_private_name_0;break;case 228:o=n.errorModuleName?2===n.accessibility?e.Diagnostics.Return_type_of_exported_function_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:e.Diagnostics.Return_type_of_exported_function_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_exported_function_has_or_is_using_private_name_0;break;default:e.Debug.fail("This is unknown kind for signature: "+t.kind)}return{diagnosticMessage:o,errorNode:t.name||t}},d.getSymbolAccessibilityDiagnostic=c,a(": "),s.type?Y(s.type):(E=s.name,n.writeReturnTypeOfSignatureDeclaration(s,g,16388,d),E=void 0)),g=o,u?r&&a(")"):(a(";"),l())}function _e(t){function o(e){if(174===e.kind)a("{"),$(e.elements,r),a("}");else if(175===e.kind){a("[");var t=e.elements;$(t,r),t&&t.hasTrailingComma&&a(", "),a("]")}}function r(t){200===t.kind?a(" "):176===t.kind&&(t.propertyName&&(p(f,t.propertyName),a(": ")),t.name&&(e.isBindingPattern(t.name)?o(t.name):(e.Debug.assert(71===t.name.kind),t.dotDotDotToken&&a("..."),p(f,t.name))))}c(),B(t),t.dotDotDotToken&&a("..."),e.isBindingPattern(t.name)?o(t.name):p(f,t.name),n.isOptionalParameter(t)&&a("?"),u(),160===t.parent.kind||161===t.parent.kind||163===t.parent.parent.kind?de(t):e.hasModifier(t.parent,8)||K(t,t.type,(function(n){var o=function(n){switch(t.parent.kind){case 152:return n.errorModuleName?2===n.accessibility?e.Diagnostics.Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:e.Diagnostics.Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_constructor_from_exported_class_has_or_is_using_private_name_1;case 156:return n.errorModuleName?e.Diagnostics.Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1;case 155:return n.errorModuleName?e.Diagnostics.Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1;case 157:return n.errorModuleName?e.Diagnostics.Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_private_name_1;case 151:case 150:return e.hasModifier(t.parent,32)?n.errorModuleName?2===n.accessibility?e.Diagnostics.Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:e.Diagnostics.Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1:229===t.parent.parent.kind?n.errorModuleName?2===n.accessibility?e.Diagnostics.Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:e.Diagnostics.Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1:n.errorModuleName?e.Diagnostics.Parameter_0_of_method_from_exported_interface_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1;case 228:return n.errorModuleName?2===n.accessibility?e.Diagnostics.Parameter_0_of_exported_function_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:e.Diagnostics.Parameter_0_of_exported_function_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_exported_function_has_or_is_using_private_name_1;default:e.Debug.fail("This is unknown parent for parameter: "+t.parent.kind)}}(n);return void 0!==o?{diagnosticMessage:o,errorNode:t,typeName:t.name}:void 0}))}function me(t){switch(t.kind){case 228:case 233:case 237:case 230:case 229:case 231:case 232:return Z(t,function(e){return n.isDeclarationVisible(e)}(t));case 208:return Z(t,function(t){return e.forEach(t.declarationList.declarations,(function(e){return n.isDeclarationVisible(e)}))}(t));case 238:return Z(t,!t.importClause);case 244:return function(e){B(e),a("export "),e.exportClause?(a("{ "),$(e.exportClause.elements,se),a(" }")):a("*"),e.moduleSpecifier&&(a(" from "),re(e)),a(";"),d.writeLine()}(t);case 152:case 151:case 150:return ge(t);case 156:case 155:case 157:return he(t);case 153:case 154:return function(t){if(!e.hasDynamicName(t)){var n,o=e.getAllAccessorDeclarations(t.parent.members,t);if(t===o.firstAccessor){if(B(o.getAccessor),B(o.setAccessor),te(e.getModifierFlags(t)|(o.setAccessor?0:64)),p(f,t.name),!e.hasModifier(t,8)){n=t;var r=s(t);if(!r){var i=153===t.kind?o.setAccessor:o.getAccessor;(r=s(i))&&(n=i)}K(t,r,(function(t){return 154===n.kind?{diagnosticMessage:e.hasModifier(n.parent,32)?t.errorModuleName?e.Diagnostics.Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_private_name_1:t.errorModuleName?e.Diagnostics.Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_2:e.Diagnostics.Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_private_name_1,errorNode:n.parameters[0],typeName:n.name}:{diagnosticMessage:e.hasModifier(n,32)?t.errorModuleName?2===t.accessibility?e.Diagnostics.Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:e.Diagnostics.Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_private_name_0:t.errorModuleName?2===t.accessibility?e.Diagnostics.Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:e.Diagnostics.Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_1:e.Diagnostics.Return_type_of_public_property_getter_from_exported_class_has_or_is_using_private_name_0,errorNode:n.name,typeName:void 0}}))}a(";"),l()}}function s(e){if(e)return 153===e.kind?e.type:e.parameters.length>0?e.parameters[0].type:void 0}}(t);case 149:case 148:return ue(t);case 264:return function(t){B(t),p(f,t.name);var o=n.getConstantValue(t);void 0!==o&&(a(" = "),a(e.getTextOfConstantValue(o))),a(","),l()}(t);case 243:return function(t){if(71===t.expression.kind)a(t.isExportEquals?"export = ":"export default "),p(f,t.expression);else{var o=q(t.expression,"_default",{diagnosticMessage:e.Diagnostics.Default_export_of_the_module_has_or_is_using_private_name_0,errorNode:t},I);a(t.isExportEquals?"export = ":"export default "),a(o)}a(";"),l(),71===t.expression.kind&&F(n.collectLinkedAliases(t.expression))}(t);case 265:return J(t)}}}e.getDeclarationDiagnostics=function(n,o,r){var i=e.createDiagnosticCollection();return e.forEachEmittedFile(n,(function(e,r){var s=e.declarationFilePath;t(n,o,i,s,r,!1)}),r),i.getDiagnostics(r?r.fileName:void 0)},e.writeDeclarationFile=function(n,o,r,i,s,a){var l=t(r,i,s,n,o,a),c=l.reportedDeclarationError||r.isEmitBlocked(n)||r.getCompilerOptions().noEmit;if(!c){var u=266===o.kind?o.sourceFiles:[o],p=l.referencesOutput+function t(n,o){var r=0,i="";return e.forEach(o,(function(e){e.asynchronousOutput&&(i+=n.substring(r,e.outputPos),i+=t(e.asynchronousOutput,e.subModuleElementDeclarationEmitInfo),r=e.outputPos)})),i+=n.substring(r)}(l.synchronousDeclarationOutput,l.moduleElementDeclarationEmitInfo);e.writeFile(r,s,n,p,r.getCompilerOptions().emitBOM,u)}return c}}(ts||(ts={})),function(e){var t,n,o=function(){var e=[];return e[0]="",e[16]=",",e[4]=" |",e[8]=" &",e}(),r=function(){var e=[];return e[512]=["{","}"],e[1024]=["(",")"],e[2048]=["<",">"],e[4096]=["[","]"],e}();function i(t,n,o,r){var i=e.isArray(o)?o:e.getSourceFilesToEmit(t,o),l=t.getCompilerOptions();if(l.outFile||l.out)i.length&&n({jsFilePath:p=l.outFile||l.out,sourceMapFilePath:s(p,l),declarationFilePath:l.declaration?e.removeFileExtension(p)+".d.ts":""},e.createBundle(i),r);else for(var c=0,u=i;c<u.length;c++){var p,d=u[c];n({jsFilePath:p=e.getOwnEmitOutputFilePath(d,t,a(d,l)),sourceMapFilePath:s(p,l),declarationFilePath:e.isSourceFileJavaScript(d)||!r&&!l.declaration?void 0:e.getDeclarationEmitOutputFilePath(d,t)},d,r)}}function s(e,t){return t.sourceMap?e+".map":void 0}function a(t,n){if(1===n.jsx)if(e.isSourceFileJavaScript(t)){if(e.fileExtensionIs(t.fileName,".jsx"))return".jsx"}else if(1===t.languageVariant)return".jsx";return".js"}function l(t,n){void 0===t&&(t={}),void 0===n&&(n={});var i,s,a,l,c,u,p,d,g=n.hasGlobalName,h=n.onEmitSourceMapOfNode,f=n.onEmitSourceMapOfToken,_=n.onEmitSourceMapOfPosition,m=n.onEmitNode,y=n.onEmitHelpers,k=n.onSetSourceFile,b=n.substituteNode,v=n.onBeforeEmitNodeArray,T=n.onAfterEmitNodeArray,E=n.onBeforeEmitToken,S=n.onAfterEmitToken,C=e.getNewLineCharacter(t),x=e.createCommentWriter(t,_),B=x.emitNodeWithComments,A=x.emitBodyWithDetachedComments,I=x.emitTrailingCommentsOfPosition,D=x.emitLeadingCommentsOfPosition;return V(),{printNode:function(t,n,o){switch(t){case 0:e.Debug.assert(e.isSourceFile(n),"Expected a SourceFile node.");break;case 2:e.Debug.assert(e.isIdentifier(n),"Expected an Identifier node.");break;case 1:e.Debug.assert(e.isExpression(n),"Expected an Expression node.")}switch(n.kind){case 265:return w(n);case 266:return N(n)}return R(t,n,o,L()),M()},printFile:w,printBundle:N,writeNode:R,writeFile:P,writeBundle:O};function N(e){return O(e,L()),M()}function w(e){return P(e,L()),M()}function R(e,t,n,o){var r=p;H(o),F(e,t,n),V(),p=r}function O(e,t){var n=p;H(t),ke(e),ye(e),Z(e);for(var o=0,r=e.sourceFiles;o<r.length;o++){var i=r[o];F(0,i,i)}V(),p=n}function P(e,t){var n=p;H(t),ke(e),ye(e),F(0,e,e),V(),p=n}function L(){return d||(d=e.createTextWriter(C))}function M(){var e=d.getText();return d.reset(),e}function F(e,t,n){n&&U(n),z(e,t)}function U(e){i=e,x.setSourceFile(e),k&&k(e)}function H(e){p=e,x.setWriter(e)}function V(){s=[],a=[],l=e.createMap(),c=[],u=0,x.reset(),H(void 0)}function G(e){e&&W(e)}function W(e){z(4,e)}function K(e){z(2,e)}function j(e){z(1,e)}function z(e,t){m?m(e,t,$):$(e,t)}function $(e,t){t=q(e,t),B&&0!==e?B(e,t,X):X(e,t)}function X(e,t){h&&0!==e&&2!==e?h(e,t,Y):Y(e,t)}function Y(t,n){switch(t){case 0:return function(t){e.Debug.assertNode(t,e.isSourceFile),function(t){Pe();var n=t.statements;if(A){if(0===n.length||!e.isPrologueDirective(n[0])||e.nodeIsSynthesized(n[0]))return void A(t,n,_e)}_e(t)}(t)}(n);case 2:return function(t){e.Debug.assertNode(t,e.isIdentifier),ee(t)}(n);case 1:return J(n);case 3:return function(e){W(e.name),Oe(" in "),W(e.constraint)}(e.cast(n,e.isTypeParameterDeclaration));case 4:return function(t){var n=t.kind;if(e.isKeyword(n))return void Ue(t);switch(n){case 14:case 15:case 16:return Q(t);case 71:return ee(t);case 143:return function(e){(function(e){71===e.kind?j(e):W(e)})(e.left),Oe("."),W(e.right)}(t);case 144:return function(e){Oe("["),j(e.expression),Oe("]")}(t);case 145:return function(e){W(e.name),ve(" extends ",e.constraint),ve(" = ",e.default)}(t);case 146:return function(e){xe(e,e.decorators),be(e,e.modifiers),G(e.dotDotDotToken),e.name&&W(e.name);G(e.questionToken),e.parent&&273===e.parent.kind&&!e.name?W(e.type):ve(": ",e.type);Te(" = ",e.initializer)}(t);case 147:return o=t,Oe("@"),void j(o.expression);case 148:return function(e){xe(e,e.decorators),be(e,e.modifiers),W(e.name),G(e.questionToken),ve(": ",e.type),Oe(";")}(t);case 149:return function(e){xe(e,e.decorators),be(e,e.modifiers),W(e.name),G(e.questionToken),ve(": ",e.type),Te(" = ",e.initializer),Oe(";")}(t);case 150:return function(e){xe(e,e.decorators),be(e,e.modifiers),W(e.name),G(e.questionToken),Ae(e,e.typeParameters),Ie(e,e.parameters),ve(": ",e.type),Oe(";")}(t);case 151:return function(e){xe(e,e.decorators),be(e,e.modifiers),G(e.asteriskToken),W(e.name),G(e.questionToken),se(e,ae)}(t);case 152:return function(e){be(e,e.modifiers),Oe("constructor"),se(e,ae)}(t);case 153:case 154:return function(e){xe(e,e.decorators),be(e,e.modifiers),Oe(153===e.kind?"get ":"set "),W(e.name),se(e,ae)}(t);case 155:return function(e){xe(e,e.decorators),be(e,e.modifiers),Ae(e,e.typeParameters),Ie(e,e.parameters),ve(": ",e.type),Oe(";")}(t);case 156:return function(e){xe(e,e.decorators),be(e,e.modifiers),Oe("new "),Ae(e,e.typeParameters),Ie(e,e.parameters),ve(": ",e.type),Oe(";")}(t);case 157:return function(e){xe(e,e.decorators),be(e,e.modifiers),t=e,n=e.parameters,Ne(t,n,4432),ve(": ",e.type),Oe(";");var t,n}(t);case 158:return function(e){W(e.parameterName),Oe(" is "),W(e.type)}(t);case 159:return function(e){W(e.typeName),Be(e,e.typeArguments)}(t);case 160:return function(e){Ae(e,e.typeParameters),De(e,e.parameters),Oe(" => "),W(e.type)}(t);case 273:return function(e){Oe("function"),Ie(e,e.parameters),Oe(":"),W(e.type)}(t);case 161:return function(e){Oe("new "),Ae(e,e.typeParameters),Ie(e,e.parameters),Oe(" => "),W(e.type)}(t);case 162:return function(e){Oe("typeof "),W(e.exprName)}(t);case 163:return function(t){Oe("{");var n=1&e.getEmitFlags(t)?448:65;Ne(t,t.members,262144|n),Oe("}")}(t);case 164:return function(e){W(e.elementType),Oe("[]")}(t);case 165:return function(e){Oe("["),Ne(e,e.elementTypes,336),Oe("]")}(t);case 166:return function(e){Ne(e,e.types,260)}(t);case 167:return function(e){Ne(e,e.types,264)}(t);case 168:return function(e){Oe("("),W(e.type),Oe(")")}(t);case 201:return function(e){j(e.expression),Be(e,e.typeArguments)}(t);case 169:return void Oe("this");case 170:return function(e){He(e.operator),Oe(" "),W(e.type)}(t);case 171:return function(e){W(e.objectType),Oe("["),W(e.indexType),Oe("]")}(t);case 172:return function(t){var n=e.getEmitFlags(t);Oe("{"),1&n?Oe(" "):(Pe(),Le());t.readonlyToken&&(W(t.readonlyToken),Oe(" "));Oe("["),z(3,t.typeParameter),Oe("]"),G(t.questionToken),Oe(": "),W(t.type),Oe(";"),1&n?Oe(" "):(Pe(),Me());Oe("}")}(t);case 173:return function(e){j(e.literal)}(t);case 268:return void Oe("*");case 269:return void Oe("?");case 270:return function(e){Oe("?"),W(e.type)}(t);case 271:return function(e){Oe("!"),W(e.type)}(t);case 272:return function(e){W(e.type),Oe("=")}(t);case 274:return function(e){Oe("..."),W(e.type)}(t);case 174:return function(e){var t=e.elements;0===t.length?Oe("{}"):(Oe("{"),Ne(e,t,432),Oe("}"))}(t);case 175:return function(e){0===e.elements.length?Oe("[]"):(Oe("["),Ne(e,e.elements,304),Oe("]"))}(t);case 176:return function(e){Se(e.propertyName,": "),G(e.dotDotDotToken),W(e.name),Te(" = ",e.initializer)}(t);case 205:return function(e){j(e.expression),W(e.literal)}(t);case 206:return void Oe(";");case 207:return function(e){Fe(17,e.pos,e),ne(e,!e.multiLine&&Je(e)),Le(),D(e.statements.end),Me(),Fe(18,e.statements.end,e)}(t);case 208:return function(e){be(e,e.modifiers),W(e.declarationList),Oe(";")}(t);case 209:return void Oe(";");case 210:return function(e){j(e.expression),Oe(";")}(t);case 211:return function(e){var t=Fe(90,e.pos,e);Oe(" "),Fe(19,t,e),j(e.expression),Fe(20,e.expression.end,e),Ce(e,e.thenStatement),e.elseStatement&&(Ve(e),Fe(82,e.thenStatement.end,e),211===e.elseStatement.kind?(Oe(" "),W(e.elseStatement)):Ce(e,e.elseStatement))}(t);case 212:return function(t){Oe("do"),Ce(t,t.statement),e.isBlock(t.statement)?Oe(" "):Ve(t);Oe("while ("),j(t.expression),Oe(");")}(t);case 213:return function(e){Oe("while ("),j(e.expression),Oe(")"),Ce(e,e.statement)}(t);case 214:return function(e){var t=Fe(88,e.pos);Oe(" "),Fe(19,t,e),oe(e.initializer),Oe(";"),Te(" ",e.condition),Oe(";"),Te(" ",e.incrementor),Oe(")"),Ce(e,e.statement)}(t);case 215:return function(e){var t=Fe(88,e.pos);Oe(" "),Fe(19,t),oe(e.initializer),Oe(" in "),j(e.expression),Fe(20,e.expression.end),Ce(e,e.statement)}(t);case 216:return function(e){var t=Fe(88,e.pos);Oe(" "),Se(e.awaitModifier," "),Fe(19,t),oe(e.initializer),Oe(" of "),j(e.expression),Fe(20,e.expression.end),Ce(e,e.statement)}(t);case 217:return function(e){Fe(77,e.pos),ve(" ",e.label),Oe(";")}(t);case 218:return function(e){Fe(72,e.pos),ve(" ",e.label),Oe(";")}(t);case 219:return function(t){(function(t,n,o){var r=o&&e.getParseTreeNode(o);r&&r.kind===o.kind&&(n=e.skipTrivia(i.text,n));n=Fe(t,n,o),r&&r.kind===o.kind&&I(n,!0)})(96,t.pos,t),Te(" ",t.expression),Oe(";")}(t);case 220:return function(e){Oe("with ("),j(e.expression),Oe(")"),Ce(e,e.statement)}(t);case 221:return function(e){var t=Fe(98,e.pos);Oe(" "),Fe(19,t),j(e.expression),Fe(20,e.expression.end),Oe(" "),W(e.caseBlock)}(t);case 222:return function(e){W(e.label),Oe(": "),W(e.statement)}(t);case 223:return function(e){Oe("throw"),Te(" ",e.expression),Oe(";")}(t);case 224:return function(e){Oe("try "),W(e.tryBlock),e.catchClause&&(Ve(e),W(e.catchClause));e.finallyBlock&&(Ve(e),Oe("finally "),W(e.finallyBlock))}(t);case 225:return function(e){Fe(78,e.pos),Oe(";")}(t);case 226:return function(e){W(e.name),ve(": ",e.type),Te(" = ",e.initializer)}(t);case 227:return function(t){Oe(e.isLet(t)?"let ":e.isConst(t)?"const ":"var "),Ne(t,t.declarations,272)}(t);case 228:return function(e){re(e)}(t);case 229:return function(e){pe(e)}(t);case 230:return function(e){xe(e,e.decorators),be(e,e.modifiers),Oe("interface "),W(e.name),Ae(e,e.typeParameters),Ne(e,e.heritageClauses,256),Oe(" {"),Ne(e,e.members,65),Oe("}")}(t);case 231:return function(e){xe(e,e.decorators),be(e,e.modifiers),Oe("type "),W(e.name),Ae(e,e.typeParameters),Oe(" = "),W(e.type),Oe(";")}(t);case 232:return function(e){be(e,e.modifiers),Oe("enum "),W(e.name),et(),Oe(" {"),Ne(e,e.members,81),Oe("}"),tt()}(t);case 233:return function(e){be(e,e.modifiers),512&~e.flags&&Oe(16&e.flags?"namespace ":"module ");W(e.name);var t=e.body;for(;233===t.kind;)Oe("."),W(t.name),t=t.body;Oe(" "),W(t)}(t);case 234:return function(e){et(),Oe("{"),ne(e,Je(e)),Oe("}"),tt()}(t);case 235:return function(e){Fe(17,e.pos),Ne(e,e.clauses,65),Fe(18,e.clauses.end)}(t);case 236:return function(e){Oe("export as namespace "),W(e.name),Oe(";")}(t);case 237:return function(e){be(e,e.modifiers),Oe("import "),W(e.name),Oe(" = "),function(e){71===e.kind?j(e):W(e)}(e.moduleReference),Oe(";")}(t);case 238:return function(e){be(e,e.modifiers),Oe("import "),e.importClause&&(W(e.importClause),Oe(" from "));j(e.moduleSpecifier),Oe(";")}(t);case 239:return function(e){W(e.name),e.name&&e.namedBindings&&Oe(", ");W(e.namedBindings)}(t);case 240:return function(e){Oe("* as "),W(e.name)}(t);case 241:return function(e){de(e)}(t);case 242:return function(e){ge(e)}(t);case 243:return function(e){Oe(e.isExportEquals?"export = ":"export default "),j(e.expression),Oe(";")}(t);case 244:return function(e){Oe("export "),e.exportClause?W(e.exportClause):Oe("*");e.moduleSpecifier&&(Oe(" from "),j(e.moduleSpecifier));Oe(";")}(t);case 245:return function(e){de(e)}(t);case 246:return function(e){ge(e)}(t);case 247:return;case 248:return function(e){Oe("require("),j(e.expression),Oe(")")}(t);case 10:return function(e){p.writeLiteral(Ze(e,!0))}(t);case 251:return function(t){Oe("<"),he(t.tagName),n=t.attributes.properties,o=" ",void(e.some(n)&&Oe(o)),t.attributes.properties&&t.attributes.properties.length>0&&W(t.attributes);var n,o;Oe(">")}(t);case 252:return function(e){Oe("</"),he(e.tagName),Oe(">")}(t);case 253:return function(e){W(e.name),ve("=",e.initializer)}(t);case 254:return function(e){Ne(e,e.properties,131328)}(t);case 255:return function(e){Oe("{..."),j(e.expression),Oe("}")}(t);case 256:return function(e){e.expression&&(Oe("{"),G(e.dotDotDotToken),j(e.expression),Oe("}"))}(t);case 257:return function(e){Oe("case "),j(e.expression),Oe(":"),fe(e,e.statements)}(t);case 258:return function(e){Oe("default:"),fe(e,e.statements)}(t);case 259:return function(e){Oe(" "),He(e.token),Oe(" "),Ne(e,e.types,272)}(t);case 260:return function(e){var t=Fe(74,e.pos);Oe(" "),e.variableDeclaration&&(Fe(19,t),W(e.variableDeclaration),Fe(20,e.variableDeclaration.end),Oe(" "));W(e.block)}(t);case 261:return function(t){W(t.name),Oe(": ");var n=t.initializer;if(I&&0==(512&e.getEmitFlags(n))){var o=e.getCommentRange(n);I(o.pos)}j(n)}(t);case 262:return function(e){W(e.name),e.objectAssignmentInitializer&&(Oe(" = "),j(e.objectAssignmentInitializer))}(t);case 263:return function(e){e.expression&&(Oe("..."),j(e.expression))}(t);case 264:return function(e){W(e.name),Te(" = ",e.initializer)}(t)}var o;if(e.isExpression(t))return J(q(1,t));if(e.isToken(t))return void Ue(t)}(n)}}function J(n){switch(n.kind){case 8:return function(e){Q(e)}(n);case 9:case 12:case 13:return Q(n);case 71:return ee(n);case 86:case 95:case 97:case 101:case 99:case 91:return void Ue(n);case 177:return function(e){var t=e.elements,n=e.multiLine?32768:0;we(e,t,4466|n)}(n);case 178:return function(t){var n=65536&e.getEmitFlags(t);n&&Le();var o=t.multiLine?32768:0,r=i.languageVersion>=1?32:0;Ne(t,t.properties,263122|r|o),n&&Me()}(n);case 179:return function(n){var o=!1,r=!1;if(!(131072&e.getEmitFlags(n))){var s=n.expression.end,a=e.skipTrivia(i.text,n.expression.end)+1,l=e.createToken(23);l.pos=s,l.end=a,o=Ye(n,n.expression,l),r=Ye(n,l,n.name)}j(n.expression),We(o),Oe(!o&&function(n){if(n=e.skipPartiallyEmittedExpressions(n),e.isNumericLiteral(n)){var o=Qe(n);return!n.numericLiteralFlags&&!e.stringContains(o,e.tokenToString(23))}if(e.isPropertyAccessExpression(n)||e.isElementAccessExpression(n)){var r=e.getConstantValue(n);return"number"==typeof r&&isFinite(r)&&Math.floor(r)===r&&t.removeComments}}(n.expression)?"..":"."),We(r),W(n.name),Ke(o,r)}(n);case 180:return function(e){j(e.expression),Oe("["),j(e.argumentExpression),Oe("]")}(n);case 181:return function(e){j(e.expression),Be(e,e.typeArguments),we(e,e.arguments,1296)}(n);case 182:return function(e){Oe("new "),j(e.expression),Be(e,e.typeArguments),we(e,e.arguments,9488)}(n);case 183:return function(e){j(e.tag),Oe(" "),j(e.template)}(n);case 184:return function(e){Oe("<"),W(e.type),Oe(">"),j(e.expression)}(n);case 185:return function(e){Oe("("),j(e.expression),Oe(")")}(n);case 186:return function(e){re(e)}(n);case 187:return function(e){xe(e,e.decorators),be(e,e.modifiers),se(e,te)}(n);case 188:return function(e){Oe("delete "),j(e.expression)}(n);case 189:return function(e){Oe("typeof "),j(e.expression)}(n);case 190:return function(e){Oe("void "),j(e.expression)}(n);case 191:return function(e){Oe("await "),j(e.expression)}(n);case 192:return function(e){He(e.operator),function(e){var t=e.operand;return 192===t.kind&&(37===e.operator&&(37===t.operator||43===t.operator)||38===e.operator&&(38===t.operator||44===t.operator))}(e)&&Oe(" ");j(e.operand)}(n);case 193:return function(e){j(e.operand),He(e.operator)}(n);case 194:return function(e){var t=26!==e.operatorToken.kind,n=Ye(e,e.left,e.operatorToken),o=Ye(e,e.operatorToken,e.right);j(e.left),We(n,t?" ":void 0),D(e.operatorToken.pos),Ue(e.operatorToken),I(e.operatorToken.end,!0),We(o," "),j(e.right),Ke(n,o)}(n);case 195:return function(e){var t=Ye(e,e.condition,e.questionToken),n=Ye(e,e.questionToken,e.whenTrue),o=Ye(e,e.whenTrue,e.colonToken),r=Ye(e,e.colonToken,e.whenFalse);j(e.condition),We(t," "),W(e.questionToken),We(n," "),j(e.whenTrue),Ke(t,n),We(o," "),W(e.colonToken),We(r," "),j(e.whenFalse),Ke(o,r)}(n);case 196:return function(e){W(e.head),Ne(e,e.templateSpans,131072)}(n);case 197:return function(e){Oe("yield"),W(e.asteriskToken),Te(" ",e.expression)}(n);case 198:return function(e){Oe("..."),j(e.expression)}(n);case 199:return function(e){pe(e)}(n);case 200:return;case 202:return function(e){j(e.expression),e.type&&(Oe(" as "),W(e.type))}(n);case 203:return function(e){j(e.expression),Oe("!")}(n);case 204:return function(e){Fe(e.keywordToken,e.pos),Oe("."),W(e.name)}(n);case 249:return function(e){W(e.openingElement),Ne(e,e.children,131072),W(e.closingElement)}(n);case 250:return function(e){Oe("<"),he(e.tagName),Oe(" "),e.attributes.properties&&e.attributes.properties.length>0&&W(e.attributes);Oe("/>")}(n);case 288:return function(e){j(e.expression)}(n);case 289:return function(e){we(e,e.elements,272)}(n)}}function q(e,t){return t&&b&&b(e,t)||t}function Z(e){y&&y(e,Ge)}function Q(n){var o=Qe(n);!t.sourceMap&&!t.inlineSourceMap||9!==n.kind&&!e.isTemplateLiteralKind(n.kind)?Oe(o):p.writeLiteral(o)}function ee(e){Oe(Ze(e,!1)),Be(e,e.typeArguments)}function te(e){Ae(e,e.typeParameters),De(e,e.parameters),ve(": ",e.type),Oe(" "),W(e.equalsGreaterThanToken)}function ne(t,n){var o=n||1&e.getEmitFlags(t)?384:65;Ne(t,t.statements,o)}function oe(e){void 0!==e&&(227===e.kind?W(e):j(e))}function re(e){xe(e,e.decorators),be(e,e.modifiers),Oe("function"),G(e.asteriskToken),Oe(" "),K(e.name),se(e,ae)}function ie(e,t){le(t)}function se(t,n){var o=t.body;if(o)if(e.isBlock(o)){var r=65536&e.getEmitFlags(t);r&&Le(),524288&e.getEmitFlags(t)?(n(t),m?m(4,o,ie):le(o)):(et(),n(t),m?m(4,o,ie):le(o),tt()),r&&Me()}else n(t),Oe(" "),j(o);else n(t),Oe(";")}function ae(e){Ae(e,e.typeParameters),Ie(e,e.parameters),ve(": ",e.type)}function le(t){Oe(" {"),Le();var n=function(t){if(1&e.getEmitFlags(t))return!0;if(t.multiLine)return!1;if(!e.nodeIsSynthesized(t)&&!e.rangeIsOnSingleLine(t,i))return!1;if(je(t,t.statements,2)||$e(t,t.statements,2))return!1;for(var n,o=0,r=t.statements;o<r.length;o++){var s=r[o];if(ze(n,s,2))return!1;n=s}return!0}(t)?ce:ue;A?A(t,t.statements,n):n(t),Me(),Fe(18,t.statements.end,t)}function ce(e){ue(e,!0)}function ue(e,t){var n=me(e.statements,!0),o=p.getTextPos();Z(e),0===n&&o===p.getTextPos()&&t?(Me(),Ne(e,e.statements,384),Le()):Ne(e,e.statements,1,n)}function pe(t){xe(t,t.decorators),be(t,t.modifiers),Oe("class"),Ee(" ",t.name,K);var n=65536&e.getEmitFlags(t);n&&Le(),Ae(t,t.typeParameters),Ne(t,t.heritageClauses,256),et(),Oe(" {"),Ne(t,t.members,65),Oe("}"),tt(),n&&Me()}function de(e){Oe("{"),Ne(e,e.elements,432),Oe("}")}function ge(e){e.propertyName&&(W(e.propertyName),Oe(" as ")),W(e.name)}function he(e){71===e.kind?j(e):W(e)}function fe(t,n){var o=1===n.length&&(e.nodeIsSynthesized(t)||e.nodeIsSynthesized(n[0])||e.rangeStartPositionsAreOnSameLine(t,n[0],i));n.length>0&&I(n.pos);var r=81985;o&&(Oe(" "),r&=-66),Ne(t,n,r)}function _e(t){var n=t.statements;et(),Z(t);var o=e.findIndex(n,(function(t){return!e.isPrologueDirective(t)}));Ne(t,n,1,-1===o?n.length:o),tt()}function me(t,n,o){for(var r=0;r<t.length;r++){var i=t[r];if(!e.isPrologueDirective(i))return r;(!o||!o.has(i.expression.text))&&((n||r>0)&&Pe(),W(i),o&&o.set(i.expression.text,!0))}return t.length}function ye(t){if(e.isSourceFile(t))U(t),me(t.statements);else for(var n=e.createMap(),o=0,r=t.sourceFiles;o<r.length;o++){var i=r[o];U(i),me(i.statements,!0,n)}}function ke(t){if(e.isSourceFile(t)){var n=e.getShebang(t.text);if(n)return Oe(n),Pe(),!0}else for(var o=0,r=t.sourceFiles;o<r.length;o++){if(ke(r[o]))break}}function be(e,t){t&&t.length&&(Ne(e,t,131328),Oe(" "))}function ve(e,t){Ee(e,t,W)}function Te(e,t){Ee(e,t,j)}function Ee(e,t,n){t&&(Oe(e),n(t))}function Se(e,t){e&&(W(e),Oe(t))}function Ce(t,n){e.isBlock(n)||1&e.getEmitFlags(t)?(Oe(" "),W(n)):(Pe(),Le(),W(n),Me())}function xe(e,t){Ne(e,t,24577)}function Be(e,t){Ne(e,t,26960)}function Ae(e,t){Ne(e,t,26960)}function Ie(e,t){Ne(e,t,1360)}function De(t,n){!function(t,n){var o=e.singleOrUndefined(n);return o&&o.pos===t.pos&&!(e.isArrowFunction(t)&&t.type)&&!e.some(t.decorators)&&!e.some(t.modifiers)&&!e.some(t.typeParameters)&&!e.some(o.decorators)&&!e.some(o.modifiers)&&!o.dotDotDotToken&&!o.questionToken&&!o.type&&!o.initializer&&e.isIdentifier(o.name)}(t,n)?Ie(t,n):Ne(t,n,336)}function Ne(e,t,n,o,r){Re(W,e,t,n,o,r)}function we(e,t,n,o,r){Re(j,e,t,n,o,r)}function Re(t,n,i,s,a,l){void 0===a&&(a=0),void 0===l&&(l=i?i.length-a:0);var c=void 0===i;if(!(c&&8192&s)){var u=c||a>=i.length||0===l;if(u&&16384&s)return v&&v(i),void(T&&T(i));if(7680&s&&Oe(function(e){return r[7680&e][0]}(s)),v&&v(i),u)1&s?Pe():128&s&&!(262144&s)&&Oe(" ");else{var p=0==(131072&s),d=p;je(n,i,s)?(Pe(),d=!1):128&s&&Oe(" "),64&s&&Le();for(var g=void 0,h=void 0,f=function(e){return o[28&e]}(s),_=0;_<l;_++){var m=i[a+_];if(g&&(f&&g.end!==n.end&&D(g.end),Oe(f),ze(g,m,s)?(0==(67&s)&&(Le(),h=!0),Pe(),d=!1):g&&256&s&&Oe(" ")),d){if(I){var y=e.getCommentRange(m);I(y.pos)}}else d=p;t(m),h&&(Me(),h=!1),g=m}var k=32&s&&i.hasTrailingComma;16&s&&k&&Oe(","),!g||!f||g.end===n.end||1024&e.getEmitFlags(g)||D(g.end),64&s&&Me(),$e(n,i,s)?Pe():128&s&&Oe(" ")}T&&T(i),7680&s&&Oe(function(e){return r[7680&e][1]}(s))}}function Oe(e){p.write(e)}function Pe(){p.writeLine()}function Le(){p.increaseIndent()}function Me(){p.decreaseIndent()}function Fe(e,t,n){return f?f(n,e,t,He):He(e,t)}function Ue(t){E&&E(t),Oe(e.tokenToString(t.kind)),S&&S(t)}function He(t,n){var o=e.tokenToString(t);return Oe(o),n<0?n:n+o.length}function Ve(t){1&e.getEmitFlags(t)?Oe(" "):Pe()}function Ge(t){for(var n=t.split(/\r\n?|\n/g),o=function(t){for(var n,o=0,r=t;o<r.length;o++)for(var i=r[o],s=0;s<i.length&&(void 0===n||s<n);s++)if(!e.isWhiteSpaceLike(i.charCodeAt(s))&&(void 0===n||s<n)){n=s;break}return n}(n),r=0;r<n.length;r++){var i=o?n[r].slice(o):n[r];i.length&&(Pe(),Oe(i),Pe())}}function We(e,t){e?(Le(),Pe()):t&&Oe(t)}function Ke(e,t){e&&Me(),t&&Me()}function je(t,n,o){if(1&o)return!0;if(2&o){if(32768&o)return!0;var r=n[0];return void 0===r?!e.rangeIsOnSingleLine(t,i):e.positionIsSynthesized(t.pos)||e.nodeIsSynthesized(r)?Xe(r,o):!e.rangeStartPositionsAreOnSameLine(t,r,i)}return!1}function ze(t,n,o){return!!(1&o)||(2&o?void 0!==t&&void 0!==n&&(e.nodeIsSynthesized(t)||e.nodeIsSynthesized(n)?Xe(t,o)||Xe(n,o):!e.rangeEndIsOnSameLineAsRangeStart(t,n,i)):n.startsOnNewLine)}function $e(t,n,o){if(1&o)return 0==(65536&o);if(2&o){if(32768&o)return!0;var r=e.lastOrUndefined(n);return void 0===r?!e.rangeIsOnSingleLine(t,i):e.positionIsSynthesized(t.pos)||e.nodeIsSynthesized(r)?Xe(r,o):!e.rangeEndPositionsAreOnSameLine(t,r,i)}return!1}function Xe(t,n){if(e.nodeIsSynthesized(t)){var o=t.startsOnNewLine;return void 0===o?0!=(32768&n):o}return 0!=(32768&n)}function Ye(t,n,o){return t=qe(t),n=qe(n),!!(o=qe(o)).startsOnNewLine||!(e.nodeIsSynthesized(t)||e.nodeIsSynthesized(n)||e.nodeIsSynthesized(o)||e.rangeEndIsOnSameLineAsRangeStart(n,o,i))}function Je(t){return 0===t.statements.length&&e.rangeEndIsOnSameLineAsRangeStart(t,t,i)}function qe(t){for(;185===t.kind&&e.nodeIsSynthesized(t);)t=t.expression;return t}function Ze(t,n){return e.isGeneratedIdentifier(t)?function(t){if(4===t.autoGenerateKind)return nt(function(t){var n=t.autoGenerateId,o=t,r=o.original;for(;r&&(o=r,!e.isIdentifier(o)||4!==o.autoGenerateKind||o.autoGenerateId===n);)r=o.original;return o}(t));var n=t.autoGenerateId;return a[n]||(a[n]=function(t){switch(t.autoGenerateKind){case 1:return rt(0);case 2:return rt(268435456);case 3:return it(e.idText(t))}e.Debug.fail("Unsupported GeneratedIdentifierKind.")}(t))}(t):!e.isIdentifier(t)||!e.nodeIsSynthesized(t)&&t.parent?9===t.kind&&t.textSourceNode?Ze(t.textSourceNode,n):!e.isLiteralExpression(t)||!e.nodeIsSynthesized(t)&&t.parent?e.getSourceTextOfNodeFromSourceFile(i,t,n):t.text:e.idText(t)}function Qe(t){if(9===t.kind&&t.textSourceNode){var n=t.textSourceNode;return e.isIdentifier(n)?16777216&e.getEmitFlags(t)?'"'+e.escapeString(Ze(n))+'"':'"'+e.escapeNonAsciiString(Ze(n))+'"':Qe(n)}return e.getLiteralText(t,i)}function et(){c.push(u),u=0}function tt(){u=c.pop()}function nt(t){var n=e.getNodeId(t);return s[n]||(s[n]=function(t){switch(t.kind){case 71:return it(Ze(t));case 233:case 232:return function(t){var n=Ze(t.name);return function(t,n){for(var o=n;e.isNodeDescendantOf(o,n);o=o.nextContainer)if(o.locals){var r=o.locals.get(e.escapeLeadingUnderscores(t));if(r&&3253183&r.flags)return!1}return!0}(n,t)?n:it(n)}(t);case 238:case 244:return function(t){var n=e.getExternalModuleName(t);return it(e.isStringLiteral(n)?e.makeIdentifierFromModuleName(n.text):"module")}(t);case 228:case 229:case 243:return it("default");case 199:return it("class");case 151:case 153:case 154:return function(t){if(e.isIdentifier(t.name))return nt(t.name);return rt(0)}(t);default:return rt(0)}}(t))}function ot(e){return!(g&&g(e)||i.identifiers.has(e)||l.has(e))}function rt(e){if(e&&!(u&e)&&ot(t=268435456===e?"_i":"_n"))return u|=e,t;for(;;){var t,n=268435455&u;if(u++,8!==n&&13!==n)if(ot(t=n<26?"_"+String.fromCharCode(97+n):"_"+(n-26)))return t}}function it(e){95!==e.charCodeAt(e.length-1)&&(e+="_");for(var t=1;;){var n=e+t;if(ot(n))return l.set(n,!0),n;t++}}}e.forEachEmittedFile=i,e.emitFiles=function(t,n,o,r,s){var a,c,u,p=n.getCompilerOptions(),d=e.getEmitModuleKind(p),g=p.sourceMap||p.inlineSourceMap?[]:void 0,h=p.listEmittedFiles?[]:void 0,f=e.createDiagnosticCollection(),_=n.getNewLine(),m=e.createTextWriter(_),y=e.createSourceMapWriter(n,m),k=!1,b=e.getSourceFilesToEmit(n,o),v=e.transformNodes(t,n,p,b,s,!1),T=l(p,{hasGlobalName:t.hasGlobalName,onEmitNode:v.emitNodeWithNotification,substituteNode:v.substituteNode,onEmitSourceMapOfNode:y.emitNodeWithSourceMap,onEmitSourceMapOfToken:y.emitTokenWithSourceMap,onEmitSourceMapOfPosition:y.emitPos,onEmitHelpers:function(t,n){var o=!1,r=266===t.kind?t:void 0;if(r&&d===e.ModuleKind.None)return;for(var i=r?r.sourceFiles.length:1,s=0;s<i;s++){var l=r?r.sourceFiles[s]:t,g=e.isSourceFile(l)?l:a,h=p.noEmitHelpers||void 0!==e.getExternalHelpersModuleName(g),f=e.isSourceFile(l)&&!u,_=e.getEmitHelpers(l);if(_)for(var m=0,y=e.stableSort(_,e.compareEmitHelpers);m<y.length;m++){var k=y[m];if(k.scoped){if(r)continue}else{if(h)continue;if(f){if(c.get(k.name))continue;c.set(k.name,!0)}}n(k.text),o=!0}}return o},onSetSourceFile:function(e){a=e,y.setSourceFile(e)}});return e.performance.mark("beforePrint"),i(n,(function(o,i){var s=o.jsFilePath,l=o.sourceMapFilePath,d=o.declarationFilePath;n.isEmitBlocked(s)||p.noEmit?k=!0:r||function(t,o,r){var i=266===r.kind?r:void 0,s=265===r.kind?r:void 0,l=i?i.sourceFiles:[s];y.initialize(t,o,r),i?(c=e.createMap(),u=!1,T.writeBundle(i,m)):(u=!0,T.writeFile(s,m));m.writeLine();var d=y.getSourceMappingURL();d&&m.write("//# sourceMappingURL="+d);p.sourceMap&&!p.inlineSourceMap&&e.writeFile(n,f,o,y.getText(),!1,l);g&&g.push(y.getSourceMapData());e.writeFile(n,f,t,m.getText(),p.emitBOM,l),y.reset(),m.reset(),a=void 0,c=void 0,u=!1}(s,l,i);d&&(k=e.writeDeclarationFile(d,function(t){return 266===t.kind?e.updateBundle(t,e.sameMap(t.sourceFiles,e.getOriginalSourceFile)):e.getOriginalSourceFile(t)}(i),n,t,f,r)||k);!k&&h&&(r||h.push(s),l&&h.push(l),d&&h.push(d))}),v.transformed,r),e.performance.measure("printTime","beforePrint"),v.dispose(),{emitSkipped:k,diagnostics:f.getDiagnostics(),emittedFiles:h,sourceMaps:g}},e.createPrinter=l,function(e){e[e.Auto=0]="Auto",e[e.CountMask=268435455]="CountMask",e[e._i=268435456]="_i"}(t||(t={})),function(e){e[e.None=0]="None",e[e.SingleLine=0]="SingleLine",e[e.MultiLine=1]="MultiLine",e[e.PreserveLines=2]="PreserveLines",e[e.LinesMask=3]="LinesMask",e[e.NotDelimited=0]="NotDelimited",e[e.BarDelimited=4]="BarDelimited",e[e.AmpersandDelimited=8]="AmpersandDelimited",e[e.CommaDelimited=16]="CommaDelimited",e[e.DelimitersMask=28]="DelimitersMask",e[e.AllowTrailingComma=32]="AllowTrailingComma",e[e.Indented=64]="Indented",e[e.SpaceBetweenBraces=128]="SpaceBetweenBraces",e[e.SpaceBetweenSiblings=256]="SpaceBetweenSiblings",e[e.Braces=512]="Braces",e[e.Parenthesis=1024]="Parenthesis",e[e.AngleBrackets=2048]="AngleBrackets",e[e.SquareBrackets=4096]="SquareBrackets",e[e.BracketsMask=7680]="BracketsMask",e[e.OptionalIfUndefined=8192]="OptionalIfUndefined",e[e.OptionalIfEmpty=16384]="OptionalIfEmpty",e[e.Optional=24576]="Optional",e[e.PreferNewLine=32768]="PreferNewLine",e[e.NoTrailingNewLine=65536]="NoTrailingNewLine",e[e.NoInterveningComments=131072]="NoInterveningComments",e[e.NoSpaceIfEmpty=262144]="NoSpaceIfEmpty",e[e.SingleElement=524288]="SingleElement",e[e.Modifiers=131328]="Modifiers",e[e.HeritageClauses=256]="HeritageClauses",e[e.SingleLineTypeLiteralMembers=448]="SingleLineTypeLiteralMembers",e[e.MultiLineTypeLiteralMembers=65]="MultiLineTypeLiteralMembers",e[e.TupleTypeElements=336]="TupleTypeElements",e[e.UnionTypeConstituents=260]="UnionTypeConstituents",e[e.IntersectionTypeConstituents=264]="IntersectionTypeConstituents",e[e.ObjectBindingPatternElements=432]="ObjectBindingPatternElements",e[e.ArrayBindingPatternElements=304]="ArrayBindingPatternElements",e[e.ObjectLiteralExpressionProperties=263122]="ObjectLiteralExpressionProperties",e[e.ArrayLiteralExpressionElements=4466]="ArrayLiteralExpressionElements",e[e.CommaListElements=272]="CommaListElements",e[e.CallExpressionArguments=1296]="CallExpressionArguments",e[e.NewExpressionArguments=9488]="NewExpressionArguments",e[e.TemplateExpressionSpans=131072]="TemplateExpressionSpans",e[e.SingleLineBlockStatements=384]="SingleLineBlockStatements",e[e.MultiLineBlockStatements=65]="MultiLineBlockStatements",e[e.VariableDeclarationList=272]="VariableDeclarationList",e[e.SingleLineFunctionBodyStatements=384]="SingleLineFunctionBodyStatements",e[e.MultiLineFunctionBodyStatements=1]="MultiLineFunctionBodyStatements",e[e.ClassHeritageClauses=256]="ClassHeritageClauses",e[e.ClassMembers=65]="ClassMembers",e[e.InterfaceMembers=65]="InterfaceMembers",e[e.EnumMembers=81]="EnumMembers",e[e.CaseBlockClauses=65]="CaseBlockClauses",e[e.NamedImportsOrExportsElements=432]="NamedImportsOrExportsElements",e[e.JsxElementChildren=131072]="JsxElementChildren",e[e.JsxElementAttributes=131328]="JsxElementAttributes",e[e.CaseOrDefaultClauseStatements=81985]="CaseOrDefaultClauseStatements",e[e.HeritageClauseTypes=272]="HeritageClauseTypes",e[e.SourceFileStatements=65537]="SourceFileStatements",e[e.Decorators=24577]="Decorators",e[e.TypeArguments=26960]="TypeArguments",e[e.TypeParameters=26960]="TypeParameters",e[e.Parameters=1360]="Parameters",e[e.IndexSignatureParameters=4432]="IndexSignatureParameters"}(n||(n={}))}(ts||(ts={})),function(e){function t(e,t,n,o,r){var i=[],s=e.emit(t,(function(e,t,n){i.push({name:e,writeByteOrderMark:n,text:t})}),o,n,r);return{outputFiles:i,emitSkipped:s.emitSkipped}}e.getFileEmitOutput=t,e.createBuilder=function(n){var o,r,i,s=e.createMap(),a=e.createMap(),l=e.createMap(),c=e.createMap();return{updateProgram:function(e){i&&u(e)},getFilesAffectedBy:h,emitChangedFiles:function(t,n){g(t);var o=t.getCompilerOptions();if(!l.size)return e.emptyArray;if(o.outFile||o.out)return e.Debug.assert(0===a.size),l.clear(),[t.emit(void 0,n)];var r,i=e.createMap();return l.forEach((function(e,o){h(t,o).forEach((function(e){a.delete(e.path),i.has(e.path)||(i.set(e.path,!0),(r||(r=[])).push(t.emit(e,n)))}))})),l.clear(),r||e.emptyArray},getSemanticDiagnostics:function(t,n){g(t),e.Debug.assert(0===l.size);var o,r=t.getCompilerOptions();if(r.outFile||r.out)return e.Debug.assert(0===a.size),t.getSemanticDiagnostics(void 0,n);for(var i=0,s=t.getSourceFiles();i<s.length;i++){var c=s[i];o=e.addRange(o,f(t,c,n))}return o||e.emptyArray},clear:function(){o=void 0,i=void 0,s.clear(),a.clear(),l.clear(),c.clear()}};function u(t){var n=t.getCompilerOptions().module!==e.ModuleKind.None;o!==n&&(i=(o=n)?function(){var t=e.createMap();return{onAddSourceFile:n,onRemoveSourceFile:i,onUpdateSourceFile:o,onUpdateSourceFileWithSameVersion:r,getFilesAffectedByUpdatedShape:l};function n(e,n){var o=m(e,n);o&&t.set(n.path,o)}function o(e,n){var o=m(e,n);o?t.set(n.path,o):t.delete(n.path)}function r(n,o){var r=m(n,o);if(!r)return t.delete(o.path);var i=t.get(o.path);return t.set(o.path,r),!i||i.size!==r.size||(e.forEachEntry(r,(function(e,t){return!i.delete(t)}))||!!i.size)}function i(e){t.forEach((function(t,n){t.has(e)&&(s.get(n)&&p(n))})),t.delete(e)}function a(n){return e.mapDefinedIter(t.entries(),(function(e){var t=e[0];return e[1].has(n)?t:void 0}))}function l(t,n){if(!e.isExternalModule(n)&&!function(t){for(var n=0,o=t.statements;n<o.length;n++){var r=o[n];if(!e.isModuleWithStringLiteralName(r))return!1}return!0}(n))return y(t,n);var o=t.getCompilerOptions();if(o&&(o.isolatedModules||o.out||o.outFile))return[n];var r=e.createMap(),i=n.path;r.set(i,n);for(var s=a(i);s.length>0;){var l=s.pop();if(!r.has(l)){var c=t.getSourceFileByPath(l);r.set(l,c),c&&_(t,c)&&s.push.apply(s,a(l))}}return e.flatMapIter(r.values(),(function(e){return e}))}}():function(){return{onAddSourceFile:e.noop,onRemoveSourceFile:e.noop,onUpdateSourceFile:e.noop,onUpdateSourceFileWithSameVersion:e.returnFalse,getFilesAffectedByUpdatedShape:t};function t(e,t){var n=e.getCompilerOptions();return n&&(n.out||n.outFile)?[t]:y(e,t)}}(),s.clear(),a.clear()),c.clear(),r=void 0,e.mutateMap(s,e.arrayToMap(t.getSourceFiles(),(function(e){return e.path})),{createNewValue:function(e,n){return function(e,t){return p(t.path),i.onAddSourceFile(e,t),{version:t.version,signature:void 0}}(t,n)},onDeleteValue:d,onExistingValue:function(e,n){return function(e,t,n){t.version!==n.version?(p(n.path),t.version=n.version,i.onUpdateSourceFile(e,n)):i.onUpdateSourceFileWithSameVersion(e,n)&&p(n.path)}(t,e,n)}})}function p(e){l.set(e,!0),a.delete(e)}function d(e,t){l.delete(t),a.delete(t),i.onRemoveSourceFile(t)}function g(e){i||u(e)}function h(t,n){g(t);var o=t.getSourceFileByPath(n);return o?_(t,o)?i.getFilesAffectedByUpdatedShape(t,o):[o]:e.emptyArray}function f(e,t,n){var o=t.path,r=a.get(o);if(r)return r;var i=e.getSemanticDiagnostics(t,n);return a.set(o,i),i}function _(o,r){if(e.Debug.assert(!!r),c.has(r.path))return!1;c.set(r.path,!0);var i=s.get(r.path);e.Debug.assert(!!i);var a,l=i.signature;if(r.isDeclarationFile)a=r.version,i.signature=a;else{var u=t(o,r,!0);u.outputFiles&&u.outputFiles.length>0?(a=n.computeHash(u.outputFiles[0].text),i.signature=a):a=l}return!l||a!==l}function m(t,o){var r;if(o.imports&&o.imports.length>0)for(var i=t.getTypeChecker(),s=0,a=o.imports;s<a.length;s++){var l=a[s],c=i.getSymbolAtLocation(l);if(c&&c.declarations&&c.declarations[0]){var u=e.getSourceFileOfNode(c.declarations[0]);u&&f(u.path)}}var p=e.getDirectoryPath(o.path);if(o.referencedFiles&&o.referencedFiles.length>0)for(var d=0,g=o.referencedFiles;d<g.length;d++){var h=g[d];f(e.toPath(h.fileName,p,n.getCanonicalFileName))}return o.resolvedTypeReferenceDirectiveNames&&o.resolvedTypeReferenceDirectiveNames.forEach((function(t){if(t){var o=t.resolvedFileName;f(e.toPath(o,p,n.getCanonicalFileName))}})),r;function f(t){r||(r=e.createMap()),r.set(t,!0)}}function y(t,n){if(r)return r;var o;l(n);for(var i=0,s=t.getSourceFiles();i<s.length;i++){var a=s[i];a!==n&&l(a)}return r=o||e.emptyArray;function l(e){t.isSourceFileDefaultLibrary(e)||(o||(o=[])).push(e)}}}}(ts||(ts={})),function(e){var t=/(^\s*$)|(^\s*\/\/\/?\s*(@ts-ignore)?)/;function n(t,n){var o=e.getDirectoryPath(n),r=e.isRootedDiskPath(t)?t:e.combinePaths(o,t);return e.normalizePath(r)}function o(t,n,o){var r;return e.forEach(t,(function(t){var i=e.getNormalizedPathComponents(t,n);if(i.pop(),r){for(var s=Math.min(r.length,i.length),a=0;a<s;a++)if(o(r[a])!==o(i[a])){if(0===a)return!0;r.length=a;break}i.length<r.length&&(r.length=i.length)}else r=i}))?"":r?e.getNormalizedPathFromPathComponents(r):n}function r(t,n){var o,r=e.createMap();function i(t){t.length>e.getRootLength(t)&&!function(t){return!!r.has(t)||!!e.sys.directoryExists(t)&&(r.set(t,!0),!0)}(t)&&(i(e.getDirectoryPath(t)),e.sys.createDirectory(t))}function s(){return e.getDirectoryPath(e.normalizePath(e.sys.getExecutingFilePath()))}var a=e.getNewLineCharacter(t),l=e.sys.realpath&&function(t){return e.sys.realpath(t)};return{getSourceFile:function(o,r,i){var s;try{e.performance.mark("beforeIORead"),s=e.sys.readFile(o,t.charset),e.performance.mark("afterIORead"),e.performance.measure("I/O Read","beforeIORead","afterIORead")}catch(e){i&&i(e.message),s=""}return void 0!==s?e.createSourceFile(o,s,r,n):void 0},getDefaultLibLocation:s,getDefaultLibFileName:function(t){return e.combinePaths(s(),e.getDefaultLibFileName(t))},writeFile:function(n,r,s,a){try{e.performance.mark("beforeIOWrite"),i(e.getDirectoryPath(e.normalizePath(n))),e.isWatchSet(t)&&e.sys.createHash&&e.sys.getModifiedTime?function(t,n,r){o||(o=e.createMap());var i=e.sys.createHash(n),s=e.sys.getModifiedTime(t);if(s){var a=o.get(t);if(a&&a.byteOrderMark===r&&a.hash===i&&a.mtime.getTime()===s.getTime())return}e.sys.writeFile(t,n,r);var l=e.sys.getModifiedTime(t);o.set(t,{hash:i,byteOrderMark:r,mtime:l})}(n,r,s):e.sys.writeFile(n,r,s),e.performance.mark("afterIOWrite"),e.performance.measure("I/O Write","beforeIOWrite","afterIOWrite")}catch(e){a&&a(e.message)}},getCurrentDirectory:e.memoize((function(){return e.sys.getCurrentDirectory()})),useCaseSensitiveFileNames:function(){return e.sys.useCaseSensitiveFileNames},getCanonicalFileName:function(t){return e.sys.useCaseSensitiveFileNames?t:t.toLowerCase()},getNewLine:function(){return a},fileExists:function(t){return e.sys.fileExists(t)},readFile:function(t){return e.sys.readFile(t)},trace:function(t){return e.sys.write(t+a)},directoryExists:function(t){return e.sys.directoryExists(t)},getEnvironmentVariable:function(t){return e.sys.getEnvironmentVariable?e.sys.getEnvironmentVariable(t):""},getDirectories:function(t){return e.sys.getDirectories(t)},realpath:l}}function i(t,n){var o=e.DiagnosticCategory[t.category].toLowerCase()+" TS"+t.code+": "+d(t.messageText,n.getNewLine())+n.getNewLine();if(t.file){var r=e.getLineAndCharacterOfPosition(t.file,t.start),i=r.line,s=r.character,a=t.file.fileName;return e.convertToRelativePath(a,n.getCurrentDirectory(),(function(e){return n.getCanonicalFileName(e)}))+"("+(i+1)+","+(s+1)+"): "+o}return o}e.findConfigFile=function(t,n,o){for(void 0===o&&(o="tsconfig.json");;){var r=e.combinePaths(t,o);if(n(r))return r;var i=e.getDirectoryPath(t);if(i===t)break;t=i}},e.resolveTripleslashReference=n,e.computeCommonSourceDirectoryOfFilenames=o,e.createCompilerHost=r,e.getPreEmitDiagnostics=function(t,n,o){var r=t.getOptionsDiagnostics(o).concat(t.getSyntacticDiagnostics(n,o),t.getGlobalDiagnostics(o),t.getSemanticDiagnostics(n,o));return t.getCompilerOptions().declaration&&e.addRange(r,t.getDeclarationDiagnostics(n,o)),e.sortAndDeduplicateDiagnostics(r)},e.formatDiagnostics=function(e,t){for(var n="",o=0,r=e;o<r.length;o++){n+=i(r[o],t)}return n},e.formatDiagnostic=i;var s="[91m",a="[30;47m",l="[0m";function c(t){switch(t){case e.DiagnosticCategory.Warning:return"[93m";case e.DiagnosticCategory.Error:return s;case e.DiagnosticCategory.Message:return"[93m"}}function u(e,t){return t+e+l}function p(e,t){for(;e.length<t;)e=" "+e;return e}function d(t,n){if(e.isString(t))return t;for(var o=t,r="",i=0;o;){if(i){r+=n;for(var s=0;s<i;s++)r+="  "}r+=o.messageText,i++,o=o.next}return r}function g(t,n,o){if(0===t.length)return[];for(var r=[],i=e.createMap(),s=0,a=t;s<a.length;s++){var l=a[s],c=void 0;i.has(l)?c=i.get(l):i.set(l,c=o(l,n)),r.push(c)}return r}function h(t,n){switch(n.extension){case".ts":case".d.ts":return;case".tsx":return o();case".jsx":return o()||r();case".js":return r()}function o(){return t.jsx?void 0:e.Diagnostics.Module_0_was_resolved_to_1_but_jsx_is_not_set}function r(){return t.allowJs||!t.noImplicitAny?void 0:e.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type}}function f(t){return e.Debug.assert(t.every((function(e){return void 0!==e})),"A name is undefined.",(function(){return JSON.stringify(t)})),t}function _(e){for(var t=e.imports,n=e.moduleAugmentations,o=t.map((function(e){return e.text})),r=0,i=n;r<i.length;r++){var s=i[r];9===s.kind&&o.push(s.text)}return o}e.formatDiagnosticsWithColorAndContext=function(t,n){for(var o="",r=0,i=t;r<i.length;r++){var g=i[r],h="";if(g.file){var f=g.start,_=g.length,m=g.file,y=e.getLineAndCharacterOfPosition(m,f),k=y.line,b=y.character,v=e.getLineAndCharacterOfPosition(m,f+_),T=v.line,E=v.character,S=e.getLineAndCharacterOfPosition(m,m.text.length).line,C=n?e.convertToRelativePath(m.fileName,n.getCurrentDirectory(),(function(e){return n.getCanonicalFileName(e)})):m.fileName,x=T-k>=4,B=(T+1+"").length;x&&(B=Math.max("...".length,B)),h+=n.getNewLine();for(var A=k;A<=T;A++){x&&k+1<A&&A<T-1&&(h+=u(p("...",B),a)+" "+n.getNewLine(),A=T-1);var I=e.getPositionOfLineAndCharacter(m,A,0),D=A<S?e.getPositionOfLineAndCharacter(m,A+1,0):m.text.length,N=m.text.slice(I,D);if(N=(N=N.replace(/\s+$/g,"")).replace("\t"," "),h+=u(p(A+1+"",B),a)+" ",h+=N+n.getNewLine(),h+=u(p("",B),a)+" ",h+=s,A===k){var w=A===T?E:void 0;h+=N.slice(0,b).replace(/\S/g," "),h+=N.slice(b,w).replace(/./g,"~")}else h+=A===T?N.slice(0,E).replace(/./g,"~"):N.replace(/./g,"~");h+=l}o+=n.getNewLine(),o+=C+"("+(k+1)+","+(b+1)+"): "}var R=c(g.category);o+=u(e.DiagnosticCategory[g.category].toLowerCase(),R)+" TS"+g.code+": "+d(g.messageText,n.getNewLine()),g.file&&(o+=n.getNewLine(),o+=h),o+=n.getNewLine()}return o},e.flattenDiagnosticMessageText=d,e.isProgramUptoDate=function(t,n,o,r,i,s,a){if(!t||a)return!1;if(t.getRootFileNames().length!==n.length)return!1;if(t.getSourceFiles().some((function(e){return e.version!==r(e.path)||s(e.path)})))return!1;if(t.getMissingFilePaths().some(i))return!1;var l=t.getCompilerOptions();return!!e.compareDataObjects(l,o)&&(!l.configFile||!o.configFile||l.configFile.text===o.configFile.text)},e.createProgram=function(i,s,a,l){var c,u,p,d,m,y,k=[],b={},v={},T=e.createMap(),E=e.createDiagnosticCollection(),S="number"==typeof s.maxNodeModuleJsDepth?s.maxNodeModuleJsDepth:0,C=0,x=e.createMap(),B=e.createMap();e.performance.mark("beforeProgram"),a=a||r(s);var A,I,D,N,w=s.noLib,R=e.memoize((function(){return a.getDefaultLibFileName(s)})),O=a.getDefaultLibLocation?a.getDefaultLibLocation():e.getDirectoryPath(R()),P=e.createDiagnosticCollection(),L=a.getCurrentDirectory(),M=e.getSupportedExtensions(s),F=e.createMap(),U=a.hasInvalidatedResolution||e.returnFalse;if(a.resolveModuleNames)D=function(t,n,o){return a.resolveModuleNames(f(t),n,o).map((function(t){if(!t||void 0!==t.extension)return t;var n=e.clone(t);return n.extension=e.extensionFromPath(t.resolvedFileName),n}))};else{I=e.createModuleResolutionCache(L,(function(e){return a.getCanonicalFileName(e)}));var H=function(t,n){return e.resolveModuleName(t,n,s,a,I).resolvedModule};D=function(e,t){return g(f(e),t,H)}}if(a.resolveTypeReferenceDirectives)N=function(e,t){return a.resolveTypeReferenceDirectives(f(e),t)};else{var V=function(t,n){return e.resolveTypeReferenceDirective(t,n,s,a).resolvedTypeReferenceDirective};N=function(e,t){return g(f(e),t,V)}}var G,W=e.createMap(),K=e.createMap(),j=e.createMap(),z=e.createMap(),$=a.useCaseSensitiveFileNames()?e.createMap():void 0,X=function(t,n){var o=t&&t.getCompilerOptions();return o&&(o.target!==n.target||o.module!==n.module||o.moduleResolution!==n.moduleResolution||o.noResolve!==n.noResolve||o.jsx!==n.jsx||o.allowJs!==n.allowJs||o.disableSizeLimit!==n.disableSizeLimit||o.baseUrl!==n.baseUrl||!e.equalOwnProperties(o.paths,n.paths))}(l,s),Y=function(){if(!l)return 0;var t=l.getCompilerOptions();if(e.changesAffectModuleResolution(t,s))return l.structureIsReused=0;e.Debug.assert(!(3&l.structureIsReused));var n=l.getRootFileNames();if(!e.arrayIsEqualTo(n,i))return l.structureIsReused=0;if(!e.arrayIsEqualTo(s.types,t.types))return l.structureIsReused=0;var o=[],r=[],c=[];if(l.structureIsReused=2,l.getMissingFilePaths().some((function(e){return a.fileExists(e)})))return l.structureIsReused=0;var u,p=l.getSourceFiles();!function(e){e[e.Exists=0]="Exists",e[e.Modified=1]="Modified"}(u||(u={}));for(var d=e.createMap(),g=0,h=p;g<h.length;g++){var f=h[g];if(!(I=a.getSourceFileByPath?a.getSourceFileByPath(f.fileName,f.path,s.target,void 0,X):a.getSourceFile(f.fileName,s.target,void 0,X)))return l.structureIsReused=0;e.Debug.assert(!I.redirectInfo,"Host should not return a redirect source file from `getSourceFile`");var m=void 0;if(f.redirectInfo){if(I!==f.redirectInfo.unredirected)return l.structureIsReused=0;m=!1,I=f}else if(l.redirectTargetsSet.has(f.path)){if(I!==f)return l.structureIsReused=0;m=!1}else m=I!==f;I.path=f.path,r.push(I.path);var b=l.sourceFileToPackageName.get(f.path);if(void 0!==b){var v=d.get(b),S=m?1:0;if(void 0!==v&&1===S||1===v)return l.structureIsReused=0;d.set(b,S)}m?(f.hasNoDefaultLib!==I.hasNoDefaultLib&&(l.structureIsReused=1),e.arrayIsEqualTo(f.referencedFiles,I.referencedFiles,Ce)||(l.structureIsReused=1),Be(I),e.arrayIsEqualTo(f.imports,I.imports,xe)||(l.structureIsReused=1),e.arrayIsEqualTo(f.moduleAugmentations,I.moduleAugmentations,xe)||(l.structureIsReused=1),(524288&f.flags)!=(524288&I.flags)&&(l.structureIsReused=1),e.arrayIsEqualTo(f.typeReferenceDirectives,I.typeReferenceDirectives,Ce)||(l.structureIsReused=1),c.push({oldFile:f,newFile:I})):U(f.path)&&(l.structureIsReused=1,c.push({oldFile:f,newFile:I})),o.push(I)}if(2!==l.structureIsReused)return l.structureIsReused;y=c.map((function(e){return e.newFile.path}));for(var C=0,x=c;C<x.length;C++){var A=x[C],I=(f=A.oldFile,A.newFile),w=e.getNormalizedAbsolutePath(I.fileName,L);if(D){var R=_(I),O=se(R,w,I,{program:l,file:f,modifiedFilePaths:y});e.hasChangesInResolutions(R,O,f.resolvedModules,e.moduleResolutionIsEqualTo)?(l.structureIsReused=1,I.resolvedModules=e.zipToMap(R,O)):I.resolvedModules=f.resolvedModules}if(N){var P=e.map(I.typeReferenceDirectives,(function(e){return e.fileName}));O=N(P,w);e.hasChangesInResolutions(P,O,f.resolvedTypeReferenceDirectiveNames,e.typeDirectiveIsEqualTo)?(l.structureIsReused=1,I.resolvedTypeReferenceDirectiveNames=e.zipToMap(P,O)):I.resolvedTypeReferenceDirectiveNames=f.resolvedTypeReferenceDirectiveNames}}if(2!==l.structureIsReused)return l.structureIsReused;if(a.hasChangedAutomaticTypeDirectiveNames)return l.structureIsReused=1;G=l.getMissingFilePaths();for(var M=0;M<o.length;M++)z.set(r[M],o[M]),l.isSourceFileFromExternalLibrary(l.getSourceFileByPath(r[M]))&&B.set(r[M],!0);k=o,E=l.getFileProcessingDiagnostics();for(var F=0,H=c;F<H.length;F++){var V=H[F];E.reattachFileDiagnostics(V.newFile)}return T=l.getResolvedTypeReferenceDirectives(),K=l.sourceFileToPackageName,j=l.redirectTargetsSet,l.structureIsReused=2}();if(2!==Y){e.forEach(i,(function(e){return Se(e,!1)}));var J=e.getAutomaticTypeDirectiveNames(s,a);if(J.length)for(var q=s.configFilePath?e.getDirectoryPath(s.configFilePath):a.getCurrentDirectory(),Z=e.combinePaths(q,"__inferred type names__.ts"),Q=N(J,Z),ee=0;ee<J.length;ee++)Oe(J[ee],Q[ee]);w||(s.lib?e.forEach(s.lib,(function(t){Se(e.combinePaths(O,t),!0)})):Se(R(),!0)),G=e.arrayFrom(z.keys(),(function(e){return e})).filter((function(e){return!z.get(e)}))}if(e.Debug.assert(!!G),I=void 0,l&&a.onReleaseOldSourceFile)for(var te=0,ne=l.getSourceFiles();te<ne.length;te++){var oe=ne[te];de(oe.path)&&!X||a.onReleaseOldSourceFile(oe,l.getCompilerOptions())}return l=void 0,c={getRootFileNames:function(){return i},getSourceFile:de,getSourceFileByPath:ge,getSourceFiles:function(){return k},getMissingFilePaths:function(){return G},getCompilerOptions:function(){return s},getSyntacticDiagnostics:function(e,t){return he(e,fe,t)},getOptionsDiagnostics:function(){return e.sortAndDeduplicateDiagnostics(e.concatenate(E.getGlobalDiagnostics(),e.concatenate(P.getGlobalDiagnostics(),s.configFile?P.getDiagnostics(s.configFile.fileName):[])))},getGlobalDiagnostics:function(){return e.sortAndDeduplicateDiagnostics(ce().getGlobalDiagnostics().slice())},getSemanticDiagnostics:function(e,t){return he(e,me,t)},getDeclarationDiagnostics:function(e,t){var n=c.getCompilerOptions();return!e||n.out||n.outFile?be(e,t):he(e,Ee,t)},getTypeChecker:ue,getClassifiableNames:function(){if(!m){ue(),m=e.createUnderscoreEscapedMap();for(var t=0,n=k;t<n.length;t++){var o=n[t];e.copyEntries(o.classifiableNames,m)}}return m},getDiagnosticsProducingTypeChecker:ce,getCommonSourceDirectory:ie,emit:function(t,n,o,r,i){return _e((function(){return function(t,n,o,r,i,a){var l=[];if(s.noEmit)return{diagnostics:l,sourceMaps:void 0,emittedFiles:void 0,emitSkipped:!0};if(s.noEmitOnError){var c=t.getOptionsDiagnostics(r).concat(t.getSyntacticDiagnostics(n,r),t.getGlobalDiagnostics(r),t.getSemanticDiagnostics(n,r));if(0===c.length&&t.getCompilerOptions().declaration&&(l=t.getDeclarationDiagnostics(void 0,r)),c.length>0||l.length>0)return{diagnostics:e.concatenate(c,l),sourceMaps:void 0,emittedFiles:void 0,emitSkipped:!0}}var u=ce().getEmitResolver(s.outFile||s.out?void 0:n);e.performance.mark("beforeEmit");var p=i?[]:e.getTransformers(s,a),d=e.emitFiles(u,ae(o),n,i,p);return e.performance.mark("afterEmit"),e.performance.measure("Emit","beforeEmit","afterEmit"),d}(c,t,n,o,r,i)}))},getCurrentDirectory:function(){return L},getNodeCount:function(){return ce().getNodeCount()},getIdentifierCount:function(){return ce().getIdentifierCount()},getSymbolCount:function(){return ce().getSymbolCount()},getTypeCount:function(){return ce().getTypeCount()},getFileProcessingDiagnostics:function(){return E},getResolvedTypeReferenceDirectives:function(){return T},isSourceFileFromExternalLibrary:le,isSourceFileDefaultLibrary:function(t){if(t.hasNoDefaultLib)return!0;if(!s.noLib)return!1;return s.lib?e.forEach(s.lib,(function(n){return 0===e.compareStrings(t.fileName,e.combinePaths(O,n),!a.useCaseSensitiveFileNames())})):0===e.compareStrings(t.fileName,R(),!a.useCaseSensitiveFileNames())},dropDiagnosticsProducingTypeChecker:function(){p=void 0},getSourceFileFromReference:function(e,t){return Ae(n(t.fileName,e.fileName),(function(e){return z.get(re(e))}))},sourceFileToPackageName:K,redirectTargetsSet:j},function(){s.isolatedModules&&(s.declaration&&Ve(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"declaration","isolatedModules"),s.noEmitOnError&&Ve(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"noEmitOnError","isolatedModules"),s.out&&Ve(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"out","isolatedModules"),s.outFile&&Ve(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"outFile","isolatedModules"));s.inlineSourceMap&&(s.sourceMap&&Ve(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"sourceMap","inlineSourceMap"),s.mapRoot&&Ve(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"mapRoot","inlineSourceMap"));s.paths&&void 0===s.baseUrl&&Ve(e.Diagnostics.Option_paths_cannot_be_used_without_specifying_baseUrl_option,"paths");if(s.paths)for(var t in s.paths)if(e.hasProperty(s.paths,t))if(e.hasZeroOrOneAsteriskCharacter(t)||Ue(!0,t,e.Diagnostics.Pattern_0_can_have_at_most_one_Asterisk_character,t),e.isArray(s.paths[t])){var n=s.paths[t].length;0===n&&Ue(!1,t,e.Diagnostics.Substitutions_for_pattern_0_shouldn_t_be_an_empty_array,t);for(var o=0;o<n;o++){var r=s.paths[t][o],i=typeof r;"string"===i?e.hasZeroOrOneAsteriskCharacter(r)||Fe(t,o,e.Diagnostics.Substitution_0_in_pattern_1_in_can_have_at_most_one_Asterisk_character,r,t):Fe(t,o,e.Diagnostics.Substitution_0_for_pattern_1_has_incorrect_type_expected_string_got_2,r,t,i)}}else Ue(!1,t,e.Diagnostics.Substitutions_for_pattern_0_should_be_an_array,t);s.sourceMap||s.inlineSourceMap||(s.inlineSources&&Ve(e.Diagnostics.Option_0_can_only_be_used_when_either_option_inlineSourceMap_or_option_sourceMap_is_provided,"inlineSources"),s.sourceRoot&&Ve(e.Diagnostics.Option_0_can_only_be_used_when_either_option_inlineSourceMap_or_option_sourceMap_is_provided,"sourceRoot"));s.out&&s.outFile&&Ve(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"out","outFile");s.mapRoot&&!s.sourceMap&&Ve(e.Diagnostics.Option_0_cannot_be_specified_without_specifying_option_1,"mapRoot","sourceMap");s.declarationDir&&(s.declaration||Ve(e.Diagnostics.Option_0_cannot_be_specified_without_specifying_option_1,"declarationDir","declaration"),(s.out||s.outFile)&&Ve(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"declarationDir",s.out?"out":"outFile"));s.lib&&s.noLib&&Ve(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"lib","noLib");s.noImplicitUseStrict&&(void 0===s.alwaysStrict?s.strict:s.alwaysStrict)&&Ve(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"noImplicitUseStrict","alwaysStrict");var l=s.target||0,c=s.outFile||s.out,u=e.forEach(k,(function(t){return e.isExternalModule(t)&&!t.isDeclarationFile?t:void 0}));if(s.isolatedModules){s.module===e.ModuleKind.None&&l<2&&Ve(e.Diagnostics.Option_isolatedModules_can_only_be_used_when_either_option_module_is_provided_or_option_target_is_ES2015_or_higher,"isolatedModules","target");var p=e.forEach(k,(function(t){return e.isExternalModule(t)||t.isDeclarationFile?void 0:t}));if(p){var d=e.getErrorSpanForNode(p,p);P.add(e.createFileDiagnostic(p,d.start,d.length,e.Diagnostics.Cannot_compile_namespaces_when_the_isolatedModules_flag_is_provided))}}else if(u&&l<2&&s.module===e.ModuleKind.None){var g=e.getErrorSpanForNode(u,u.externalModuleIndicator);P.add(e.createFileDiagnostic(u,g.start,g.length,e.Diagnostics.Cannot_use_imports_exports_or_module_augmentations_when_module_is_none))}if(c)if(s.module&&s.module!==e.ModuleKind.AMD&&s.module!==e.ModuleKind.System)Ve(e.Diagnostics.Only_amd_and_system_modules_are_supported_alongside_0,s.out?"out":"outFile","module");else if(void 0===s.module&&u){var h=e.getErrorSpanForNode(u,u.externalModuleIndicator);P.add(e.createFileDiagnostic(u,h.start,h.length,e.Diagnostics.Cannot_compile_modules_using_option_0_unless_the_module_flag_is_amd_or_system,s.out?"out":"outFile"))}if(s.outDir||s.sourceRoot||s.mapRoot){var f=ie();s.outDir&&""===f&&e.forEach(k,(function(t){return e.getRootLength(t.fileName)>1}))&&Ve(e.Diagnostics.Cannot_find_the_common_subdirectory_path_for_the_input_files,"outDir")}!s.noEmit&&s.allowJs&&s.declaration&&Ve(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"allowJs","declaration");s.checkJs&&!s.allowJs&&P.add(e.createCompilerDiagnostic(e.Diagnostics.Option_0_cannot_be_specified_without_specifying_option_1,"checkJs","allowJs"));s.emitDecoratorMetadata&&!s.experimentalDecorators&&Ve(e.Diagnostics.Option_0_cannot_be_specified_without_specifying_option_1,"emitDecoratorMetadata","experimentalDecorators");s.jsxFactory?(s.reactNamespace&&Ve(e.Diagnostics.Option_0_cannot_be_specified_with_option_1,"reactNamespace","jsxFactory"),e.parseIsolatedEntityName(s.jsxFactory,l)||Ge("jsxFactory",e.Diagnostics.Invalid_value_for_jsxFactory_0_is_not_a_valid_identifier_or_qualified_name,s.jsxFactory)):s.reactNamespace&&!e.isIdentifierText(s.reactNamespace,l)&&Ge("reactNamespace",e.Diagnostics.Invalid_value_for_reactNamespace_0_is_not_a_valid_identifier,s.reactNamespace);if(!s.noEmit&&!s.suppressOutputPathCheck){var _=ae(),m=e.createMap();e.forEachEmittedFile(_,(function(e){y(e.jsFilePath,m),y(e.declarationFilePath,m)}))}function y(t,n){if(t){var o,r=re(t);if(z.has(r))s.configFilePath||(o=e.chainDiagnosticMessages(void 0,e.Diagnostics.Adding_a_tsconfig_json_file_will_help_organize_projects_that_contain_both_TypeScript_and_JavaScript_files_Learn_more_at_https_Colon_Slash_Slashaka_ms_Slashtsconfig)),o=e.chainDiagnosticMessages(o,e.Diagnostics.Cannot_write_file_0_because_it_would_overwrite_input_file,t),ze(t,e.createCompilerDiagnosticFromMessageChain(o));var i=a.useCaseSensitiveFileNames()?r:r.toLocaleLowerCase();n.has(i)?ze(t,e.createCompilerDiagnostic(e.Diagnostics.Cannot_write_file_0_because_it_would_be_overwritten_by_multiple_input_files,t)):n.set(i,!0)}}}(),e.performance.mark("afterProgram"),e.performance.measure("Program","beforeProgram","afterProgram"),c;function re(t){return e.toPath(t,L,Le)}function ie(){if(void 0===u){var t=e.filter(k,(function(t){return e.sourceFileMayBeEmitted(t,s,le)}));(u=s.rootDir&&function(t,n){var o=!0;if(t)for(var r=a.getCanonicalFileName(e.getNormalizedAbsolutePath(n,L)),i=0,l=t;i<l.length;i++){var c=l[i];if(!c.isDeclarationFile)0!==a.getCanonicalFileName(e.getNormalizedAbsolutePath(c.fileName,L)).indexOf(r)&&(P.add(e.createCompilerDiagnostic(e.Diagnostics.File_0_is_not_under_rootDir_1_rootDir_is_expected_to_contain_all_source_files,c.fileName,s.rootDir)),o=!1)}return o}(t,s.rootDir)?e.getNormalizedAbsolutePath(s.rootDir,L):function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];i.isDeclarationFile||t.push(i.fileName)}return o(t,L,Le)}(t))&&u[u.length-1]!==e.directorySeparator&&(u+=e.directorySeparator)}return u}function se(t,n,o,r){if(0===Y&&!o.ambientModuleNames.length)return D(t,n);var i,l,c,u=r.program&&r.program.getSourceFile(n);if(u!==o&&o.resolvedModules){for(var p=[],d=0,g=t;d<g.length;d++){var h=g[d],f=o.resolvedModules.get(h);p.push(f)}return p}for(var _={},m=0;m<t.length;m++){h=t[m];if(o===u&&!U(u.path)){var y=u&&u.resolvedModules.get(h);if(y){e.isTraceEnabled(s,a)&&e.trace(a,e.Diagnostics.Reusing_resolution_of_module_0_to_file_1_from_old_program,h,n),(l||(l=new Array(t.length)))[m]=y,(c||(c=[])).push(h);continue}}var k=!1;e.contains(o.ambientModuleNames,h)?(k=!0,e.isTraceEnabled(s,a)&&e.trace(a,e.Diagnostics.Module_0_was_resolved_as_locally_declared_ambient_module_in_file_1,h,n)):k=T(h,r),k?(l||(l=new Array(t.length)))[m]=_:(i||(i=[])).push(h)}var b=i&&i.length?D(i,n,c):e.emptyArray;if(!l)return e.Debug.assert(b.length===t.length),b;var v=0;for(m=0;m<l.length;m++)l[m]?l[m]===_&&(l[m]=void 0):(l[m]=b[v],v++);return e.Debug.assert(v===b.length),l;function T(t,n){if(e.getResolvedModule(n.file,t))return!1;var o=n.program&&n.program.getTypeChecker().tryFindAmbientModuleWithoutAugmentations(t);if(!o||!o.declarations)return!1;var r=e.forEach(o.declarations,(function(t){var o=e.getSourceFileOfNode(t);return!e.contains(n.modifiedFilePaths,o.path)&&o}));return!!r&&(e.isTraceEnabled(s,a)&&e.trace(a,e.Diagnostics.Module_0_was_resolved_as_ambient_module_declared_in_1_since_this_file_was_not_modified,t,r.fileName),!0)}}function ae(e){return{getCanonicalFileName:Le,getCommonSourceDirectory:c.getCommonSourceDirectory,getCompilerOptions:c.getCompilerOptions,getCurrentDirectory:function(){return L},getNewLine:function(){return a.getNewLine()},getSourceFile:c.getSourceFile,getSourceFileByPath:c.getSourceFileByPath,getSourceFiles:c.getSourceFiles,isSourceFileFromExternalLibrary:le,writeFile:e||function(e,t,n,o,r){return a.writeFile(e,t,n,o,r)},isEmitBlocked:pe}}function le(e){return B.get(e.path)}function ce(){return p||(p=e.createTypeChecker(c,!0))}function ue(){return d||(d=e.createTypeChecker(c,!1))}function pe(e){return F.has(re(e))}function de(e){return ge(re(e))}function ge(e){return z.get(e)}function he(t,n,o){return t?n(t,o):e.sortAndDeduplicateDiagnostics(e.flatMap(c.getSourceFiles(),(function(e){return o&&o.throwIfCancellationRequested(),n(e,o)})))}function fe(t){return e.isSourceFileJavaScript(t)?(t.additionalSyntacticDiagnostics||(t.additionalSyntacticDiagnostics=function(t){return _e((function(){var n=[],o=t;return r(t),n;function r(t){switch(o.kind){case 146:case 149:if(o.questionToken===t)return void n.push(c(t,e.Diagnostics._0_can_only_be_used_in_a_ts_file,"?"));case 151:case 150:case 152:case 153:case 154:case 186:case 228:case 187:case 226:if(o.type===t)return void n.push(c(t,e.Diagnostics.types_can_only_be_used_in_a_ts_file))}switch(t.kind){case 237:return void n.push(c(t,e.Diagnostics.import_can_only_be_used_in_a_ts_file));case 243:if(t.isExportEquals)return void n.push(c(t,e.Diagnostics.export_can_only_be_used_in_a_ts_file));break;case 259:if(108===t.token)return void n.push(c(t,e.Diagnostics.implements_clauses_can_only_be_used_in_a_ts_file));break;case 230:return void n.push(c(t,e.Diagnostics.interface_declarations_can_only_be_used_in_a_ts_file));case 233:return void n.push(c(t,e.Diagnostics.module_declarations_can_only_be_used_in_a_ts_file));case 231:return void n.push(c(t,e.Diagnostics.type_aliases_can_only_be_used_in_a_ts_file));case 232:return void n.push(c(t,e.Diagnostics.enum_declarations_can_only_be_used_in_a_ts_file));case 203:return void n.push(c(t,e.Diagnostics.non_null_assertions_can_only_be_used_in_a_ts_file));case 202:return void n.push(c(t.type,e.Diagnostics.type_assertion_expressions_can_only_be_used_in_a_ts_file));case 184:e.Debug.fail()}var s=o;o=t,e.forEachChild(t,r,i),o=s}function i(t){switch(o.decorators!==t||s.experimentalDecorators||n.push(c(o,e.Diagnostics.Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_the_experimentalDecorators_option_to_remove_this_warning)),o.kind){case 229:case 151:case 150:case 152:case 153:case 154:case 186:case 228:case 187:if(t===o.typeParameters)return void n.push(l(t,e.Diagnostics.type_parameter_declarations_can_only_be_used_in_a_ts_file));case 208:if(t===o.modifiers)return a(t,208===o.kind);break;case 149:if(t===o.modifiers){for(var i=0,u=t;i<u.length;i++){var p=u[i];115!==p.kind&&n.push(c(p,e.Diagnostics._0_can_only_be_used_in_a_ts_file,e.tokenToString(p.kind)))}return}break;case 146:if(t===o.modifiers)return void n.push(l(t,e.Diagnostics.parameter_modifiers_can_only_be_used_in_a_ts_file));break;case 181:case 182:case 201:if(t===o.typeArguments)return void n.push(l(t,e.Diagnostics.type_arguments_can_only_be_used_in_a_ts_file))}for(var d=0,g=t;d<g.length;d++){r(g[d])}}function a(t,o){for(var r=0,i=t;r<i.length;r++){var s=i[r];switch(s.kind){case 76:if(o)continue;case 114:case 112:case 113:case 131:case 124:case 117:n.push(c(s,e.Diagnostics._0_can_only_be_used_in_a_ts_file,e.tokenToString(s.kind)))}}}function l(n,o,r,i,s){var a=n.pos;return e.createFileDiagnostic(t,a,n.end-a,o,r,i,s)}function c(n,o,r,i,s){return e.createDiagnosticForNodeInSourceFile(t,n,o,r,i,s)}}))}(t),e.isCheckJsEnabledForFile(t,s)&&(t.additionalSyntacticDiagnostics=e.concatenate(t.additionalSyntacticDiagnostics,t.jsDocDiagnostics))),e.concatenate(t.additionalSyntacticDiagnostics,t.parseDiagnostics)):t.parseDiagnostics}function _e(t){try{return t()}catch(t){throw t instanceof e.OperationCanceledException&&(d=void 0,p=void 0),t}}function me(e,t){return Te(e,t,b,ye)}function ye(t,n){return _e((function(){if(s.skipLibCheck&&t.isDeclarationFile||s.skipDefaultLibCheck&&t.hasNoDefaultLib)return e.emptyArray;var o=ce();e.Debug.assert(!!t.bindDiagnostics);var r=3===t.scriptKind||4===t.scriptKind||5===t.scriptKind||e.isCheckJsEnabledForFile(t,s),i=r?t.bindDiagnostics:e.emptyArray,a=r?o.getDiagnostics(t,n):e.emptyArray,l=E.getDiagnostics(t.fileName),c=P.getDiagnostics(t.fileName),u=i.concat(a,l,c);return e.filter(u,ke)}))}function ke(n){var o=n.file,r=n.start;if(o)for(var i=e.getLineStarts(o),s=e.computeLineAndCharacterOfPosition(i,r).line;s>0;){var a=o.text.slice(i[s-1],i[s]),l=t.exec(a);if(!l)return!0;if(l[3])return!1;s--}return!0}function be(e,t){return Te(e,t,v,ve)}function ve(t,n){return _e((function(){var o=ce().getEmitResolver(t,n);return e.getDeclarationDiagnostics(ae(e.noop),o,t)}))}function Te(t,n,o,r){var i=t?o.perFile&&o.perFile.get(t.path):o.allDiagnostics;if(i)return i;var s=r(t,n)||e.emptyArray;return t?(o.perFile||(o.perFile=e.createMap()),o.perFile.set(t.path,s)):o.allDiagnostics=s,s}function Ee(e,t){return e.isDeclarationFile?[]:be(e,t)}function Se(t,n){Ie(e.normalizePath(t),n,void 0)}function Ce(e,t){return e.fileName===t.fileName}function xe(e,t){return 9===e.kind?9===t.kind&&e.text===t.text:71===t.kind&&e.escapedText===t.escapedText}function Be(t){if(!t.imports){var n,o,r,i=e.isSourceFileJavaScript(t),a=e.isExternalModule(t);if(s.importHelpers&&(s.isolatedModules||a)&&!t.isDeclarationFile){var l=e.createLiteral(e.externalHelpersModuleNameText),c=e.createImportDeclaration(void 0,void 0,void 0);l.parent=c,c.parent=t,n=[l]}for(var u=0,p=t.statements;u<p.length;u++){var d=p[u];g(d,!1),(524288&t.flags||i)&&h(d)}return t.imports=n||e.emptyArray,t.moduleAugmentations=o||e.emptyArray,void(t.ambientModuleNames=r||e.emptyArray)}function g(i,s){switch(i.kind){case 238:case 237:case 244:var l=e.getExternalModuleName(i);if(!l||!e.isStringLiteral(l))break;if(!l.text)break;s&&e.isExternalModuleNameRelative(l.text)||(n||(n=[])).push(l);break;case 233:if(e.isAmbientModule(i)&&(s||e.hasModifier(i,2)||t.isDeclarationFile)){var c=i.name,u=e.getTextOfIdentifierOrLiteral(c);if(a||s&&!e.isExternalModuleNameRelative(u))(o||(o=[])).push(c);else if(!s){t.isDeclarationFile&&(r||(r=[])).push(u);var p=i.body;if(p)for(var d=0,h=p.statements;d<h.length;d++){g(h[d],!0)}}}}}function h(t){e.isRequireCall(t,!0)||e.isImportCall(t)&&1===t.arguments.length&&9===t.arguments[0].kind?(n||(n=[])).push(t.arguments[0]):e.forEachChild(t,h)}}function Ae(t,n,o,r){if(e.hasExtension(t)){if(!s.allowNonTsExtensions&&!e.forEach(M,(function(n){return e.fileExtensionIs(a.getCanonicalFileName(t),n)})))return void(o&&o(e.Diagnostics.File_0_has_unsupported_extension_The_only_supported_extensions_are_1,t,"'"+M.join("', '")+"'"));var i=n(t);return o&&(i?r&&a.getCanonicalFileName(t)===a.getCanonicalFileName(r.fileName)&&o(e.Diagnostics.A_file_cannot_have_a_reference_to_itself):o(e.Diagnostics.File_0_not_found,t)),i}var l=s.allowNonTsExtensions&&n(t);if(l)return l;if(!o||!s.allowNonTsExtensions){var c=e.forEach(M,(function(e){return n(t+e)}));return o&&!c&&o(e.Diagnostics.File_0_not_found,t+".ts"),c}o(e.Diagnostics.File_0_not_found,t)}function Ie(t,n,o,r,i,s){Ae(t,(function(e){return Ne(e,re(e),n,r,i,s,o)}),(function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];E.add(void 0!==r&&void 0!==s&&void 0!==i?e.createFileDiagnostic.apply(void 0,[r,i,s-i,t].concat(n)):e.createCompilerDiagnostic.apply(void 0,[t].concat(n)))}),r)}function De(t,n,o,r,i){void 0!==o&&void 0!==r&&void 0!==i?E.add(e.createFileDiagnostic(o,r,i-r,e.Diagnostics.File_name_0_differs_from_already_included_file_name_1_only_in_casing,t,n)):E.add(e.createCompilerDiagnostic(e.Diagnostics.File_name_0_differs_from_already_included_file_name_1_only_in_casing,t,n))}function Ne(t,n,o,r,i,l,c){if(z.has(n)){var u=z.get(n);return u&&s.forceConsistentCasingInFileNames&&e.getNormalizedAbsolutePath(u.fileName,L)!==e.getNormalizedAbsolutePath(t,L)&&De(t,u.fileName,r,i,l),u&&B.get(u.path)&&0===C?(B.set(u.path,!1),s.noResolve||(we(u,o),Re(u)),x.set(u.path,!1),Me(u)):u&&x.get(u.path)&&C<S&&(x.set(u.path,!1),Me(u)),u}var p=a.getSourceFile(t,s.target,(function(n){void 0!==r&&void 0!==i&&void 0!==l?E.add(e.createFileDiagnostic(r,i,l-i,e.Diagnostics.Cannot_read_file_0_Colon_1,t,n)):E.add(e.createCompilerDiagnostic(e.Diagnostics.Cannot_read_file_0_Colon_1,t,n))}),X);if(c){var d=c.name+"/"+c.subModuleName+"@"+c.version,g=W.get(d);if(g){var h=function(e,t,n,o){var r=Object.create(e);return r.fileName=n,r.path=o,r.redirectInfo={redirectTarget:e,unredirected:t},Object.defineProperties(r,{id:{get:function(){return this.redirectInfo.redirectTarget.id},set:function(e){this.redirectInfo.redirectTarget.id=e}},symbol:{get:function(){return this.redirectInfo.redirectTarget.symbol},set:function(e){this.redirectInfo.redirectTarget.symbol=e}}}),r}(g,p,t,n);return j.set(g.path,!0),z.set(n,h),K.set(n,c.name),k.push(h),h}p&&(W.set(d,p),K.set(n,c.name))}if(z.set(n,p),p){if(B.set(n,C>0),p.path=n,a.useCaseSensitiveFileNames()){var f=n.toLowerCase(),_=$.get(f);_?De(t,_.fileName,r,i,l):$.set(f,p)}w=w||p.hasNoDefaultLib,s.noResolve||(we(p,o),Re(p)),Me(p),o?k.unshift(p):k.push(p)}return p}function we(t,o){e.forEach(t.referencedFiles,(function(e){Ie(n(e.fileName,t.fileName),o,void 0,t,e.pos,e.end)}))}function Re(t){for(var n=e.map(t.typeReferenceDirectives,(function(e){return e.fileName.toLocaleLowerCase()})),o=N(n,t.fileName),r=0;r<n.length;r++){var i=t.typeReferenceDirectives[r],s=o[r],a=i.fileName.toLocaleLowerCase();e.setResolvedTypeReferenceDirective(t,a,s),Oe(a,s,t,i.pos,i.end)}}function Oe(t,n,o,r,i){var s=T.get(t);if(!s||!s.primary){var l=!0;if(n)if(n.primary)Ie(n.resolvedFileName,!1,n.packageId,o,r,i);else if(s){if(n.resolvedFileName!==s.resolvedFileName)a.readFile(n.resolvedFileName)!==de(s.resolvedFileName).text&&E.add(Pe(o,r,i,e.Diagnostics.Conflicting_definitions_for_0_found_at_1_and_2_Consider_installing_a_specific_version_of_this_library_to_resolve_the_conflict,t,n.resolvedFileName,s.resolvedFileName));l=!1}else Ie(n.resolvedFileName,!1,n.packageId,o,r,i);else E.add(Pe(o,r,i,e.Diagnostics.Cannot_find_type_definition_file_for_0,t));l&&T.set(t,n)}}function Pe(t,n,o,r){for(var i=[],s=4;s<arguments.length;s++)i[s-4]=arguments[s];return void 0===t||void 0===n||void 0===o?e.createCompilerDiagnostic.apply(void 0,[r].concat(i)):e.createFileDiagnostic.apply(void 0,[t,n,o-n,r].concat(i))}function Le(e){return a.getCanonicalFileName(e)}function Me(t){if(Be(t),t.imports.length||t.moduleAugmentations.length){var n=_(t),o={program:l,file:t,modifiedFilePaths:y},r=se(n,e.getNormalizedAbsolutePath(t.fileName,L),t,o);e.Debug.assert(r.length===n.length);for(var i=0;i<n.length;i++){var a=r[i];if(e.setResolvedModule(t,n[i],a),a){var c=a.isExternalLibraryImport,u=!e.extensionIsTypeScript(a.extension),p=c&&u,d=a.resolvedFileName;c&&C++;var g=p&&C>S,f=d&&!h(s,a)&&!s.noResolve&&i<t.imports.length&&!g&&!(u&&!s.allowJs);if(g)x.set(t.path,!0);else if(f){Ne(d,re(d),!1,t,e.skipTrivia(t.text,t.imports[i].pos),t.imports[i].end,a.packageId)}c&&C--}}}else t.resolvedModules=void 0}function Fe(t,n,o,r,i,a){for(var l=!0,c=0,u=He();c<u.length;c++){var p=u[c];if(e.isObjectLiteralExpression(p.initializer))for(var d=0,g=e.getPropertyAssignment(p.initializer,t);d<g.length;d++){var h=g[d];e.isArrayLiteralExpression(h.initializer)&&h.initializer.elements.length>n&&(P.add(e.createDiagnosticForNodeInSourceFile(s.configFile,h.initializer.elements[n],o,r,i,a)),l=!1)}}l&&P.add(e.createCompilerDiagnostic(o,r,i,a))}function Ue(t,n,o,r){for(var i=!0,s=0,a=He();s<a.length;s++){var l=a[s];e.isObjectLiteralExpression(l.initializer)&&je(l.initializer,t,n,void 0,o,r)&&(i=!1)}i&&P.add(e.createCompilerDiagnostic(o,r))}function He(){var t=Ke();return t?e.getPropertyAssignment(t,"paths"):e.emptyArray}function Ve(e,t,n){We(!0,t,n,e,t,n)}function Ge(e,t,n){We(!1,e,void 0,t,n)}function We(t,n,o,r,i,s){var a=Ke();(!a||!je(a,t,n,o,r,i,s))&&P.add(e.createCompilerDiagnostic(r,i,s))}function Ke(){if(void 0===A&&(A=null,s.configFile&&s.configFile.jsonObject))for(var t=0,n=e.getPropertyAssignment(s.configFile.jsonObject,"compilerOptions");t<n.length;t++){var o=n[t];if(e.isObjectLiteralExpression(o.initializer)){A=o.initializer;break}}return A}function je(t,n,o,r,i,a,l){for(var c=e.getPropertyAssignment(t,o,r),u=0,p=c;u<p.length;u++){var d=p[u];P.add(e.createDiagnosticForNodeInSourceFile(s.configFile,n?d.name:d.initializer,i,a,l))}return!!c.length}function ze(e,t){F.set(re(e),!0),P.add(t)}},e.getResolutionDiagnostic=h}(ts||(ts={})),function(e){var t,n;function o(e){return e&&void 0!==e.enableAutoDiscovery&&void 0===e.enable?{enable:e.enableAutoDiscovery,include:e.include||[],exclude:e.exclude||[]}:e}function r(){if(t)return t;var n=e.createMap(),o=e.createMap();return e.forEach(e.optionDeclarations,(function(e){n.set(e.name.toLowerCase(),e),e.shortName&&o.set(e.shortName,e.name)})),t={optionNameMap:n,shortOptionNames:o}}function i(t){return s(t,e.createCompilerDiagnostic)}function s(t,n){var o=e.arrayFrom(t.type.keys()).map((function(e){return"'"+e+"'"})).join(", ");return n(e.Diagnostics.Argument_for_0_option_must_be_Colon_1,"--"+t.name,o)}function a(e,t,n){return O(e,P(t||""),n)}function l(t,n,o){if(void 0===n&&(n=""),n=P(n),!e.startsWith(n,"-")){if(""===n)return[];var r=n.split(",");switch(t.element.type){case"number":return e.map(r,parseInt);case"string":return e.map(r,(function(e){return e||""}));default:return e.filter(e.map(r,(function(e){return a(t.element,e,o)})),(function(e){return!!e}))}}}function c(e,t){void 0===t&&(t=!1),e=e.toLowerCase();var n=r(),o=n.optionNameMap,i=n.shortOptionNames;if(t){var s=i.get(e);void 0!==s&&(e=s)}return o.get(e)}function u(t,n){var o=e.parseJsonText(t,n);return{config:h(o,o.parseDiagnostics),error:o.parseDiagnostics.length?o.parseDiagnostics[0]:void 0}}function p(t,n){var o=d(t,n);return e.isString(o)?e.parseJsonText(t,o):{parseDiagnostics:[o]}}function d(t,n){var o;try{o=n(t)}catch(n){return e.createCompilerDiagnostic(e.Diagnostics.Cannot_read_file_0_Colon_1,t,n.message)}return void 0===o?e.createCompilerDiagnostic(e.Diagnostics.The_specified_path_does_not_exist_Colon_0,t):o}function g(t){return e.arrayToMap(t,(function(e){return e.name}))}function h(e,t){return f(e,t,void 0,void 0)}function f(t,n,o,r){return t.jsonObject?i(t.jsonObject,o,void 0,void 0):{};function i(i,s,c,u){for(var p={},d=0,g=i.properties;d<g.length;d++){var h=g[d];if(261===h.kind){h.questionToken&&n.push(e.createDiagnosticForNodeInSourceFile(t,h.questionToken,e.Diagnostics._0_can_only_be_used_in_a_ts_file,"?")),l(h.name)||n.push(e.createDiagnosticForNodeInSourceFile(t,h.name,e.Diagnostics.String_literal_with_double_quotes_expected));var f=e.unescapeLeadingUnderscores(e.getTextOfPropertyName(h.name)),_=s?s.get(f):void 0;c&&!_&&n.push(e.createDiagnosticForNodeInSourceFile(t,h.name,c,f));var y=a(h.initializer,_);if(void 0!==f&&(p[f]=y,r&&(u||s===o))){var k=m(_,y);u?k&&r.onSetValidOptionKeyValueInParent(u,_,y):s===o&&(k?r.onSetValidOptionKeyValueInRoot(f,h.name,y,h.initializer):_||r.onSetUnknownOptionKeyValueInRoot(f,h.name,y,h.initializer))}}else n.push(e.createDiagnosticForNodeInSourceFile(t,h,e.Diagnostics.Property_assignment_expected))}return p}function a(o,r){switch(o.kind){case 101:return f(r&&"boolean"!==r.type),!0;case 86:return f(r&&"boolean"!==r.type),!1;case 95:return f(r&&"extends"===r.name),null;case 9:l(o)||n.push(e.createDiagnosticForNodeInSourceFile(t,o,e.Diagnostics.String_literal_with_double_quotes_expected)),f(r&&e.isString(r.type)&&"string"!==r.type);var c=o.text;if(r&&!e.isString(r.type)){var u=r;u.type.has(c.toLowerCase())||n.push(s(u,(function(n,r,i){return e.createDiagnosticForNodeInSourceFile(t,o,n,r,i)})))}return c;case 8:return f(r&&"number"!==r.type),Number(o.text);case 178:f(r&&"object"!==r.type);var p=o;if(r){var d=r;return i(p,d.elementOptions,d.extraKeyDiagnosticMessage,d.name)}return i(p,void 0,void 0,void 0);case 177:return f(r&&"list"!==r.type),g=o.elements,h=r&&r.element,g.map((function(e){return a(e,h)}))}var g,h;return void(r?f(!0):n.push(e.createDiagnosticForNodeInSourceFile(t,o,e.Diagnostics.Property_value_can_only_be_string_literal_numeric_literal_true_false_null_object_literal_or_array_literal)));function f(i){i&&n.push(e.createDiagnosticForNodeInSourceFile(t,o,e.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,r.name,_(r)))}}function l(n){return e.isStringLiteral(n)&&e.isStringDoubleQuoted(n,t)}}function _(t){return"list"===t.type?"Array":e.isString(t.type)?t.type:"string"}function m(t,n){if(t)return!!k(n)||("list"===t.type?e.isArray(n):typeof n===(e.isString(t.type)?t.type:"string"))}function y(e,t){t&&Object.defineProperty(e,"configFile",{enumerable:!1,writable:!1,value:t})}function k(e){return null==e}function b(t,n){return e.getDirectoryPath(e.toPath(t,n,e.identity))}function v(t,n,o,r,i,s,a,l){void 0===i&&(i={}),void 0===a&&(a=[]),void 0===l&&(l=[]),e.Debug.assert(void 0===t&&void 0!==n||void 0!==t&&void 0===n);var c=[],u=e.createGetCanonicalFileName(o.useCaseSensitiveFileNames),p=S(t,n,o,r,s,u,a,c),d=p.raw,g=e.extend(i,p.options||{});g.configFilePath=s,y(g,n);var h=function(){var t,i,u;e.hasProperty(d,"files")&&!k(d.files)&&(e.isArray(d.files)?0===(t=d.files).length&&v(e.Diagnostics.The_files_list_in_config_file_0_is_empty,s||"tsconfig.json"):v(e.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,"files","Array"));e.hasProperty(d,"include")&&!k(d.include)&&(e.isArray(d.include)?i=d.include:v(e.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,"include","Array"));if(e.hasProperty(d,"exclude")&&!k(d.exclude))e.isArray(d.exclude)?u=d.exclude:v(e.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,"exclude","Array");else{var p=d.compilerOptions&&d.compilerOptions.outDir;p&&(u=[p])}void 0===t&&void 0===i&&(i=["**/*"]);var h=function(t,n,o,r,i,s,a,l,c){var u,p;r=e.normalizePath(r),n&&(u=G(n,a,!1,c,"include"));o&&(p=G(o,a,!0,c,"exclude"));var d=function(t,n,o,r){var i=e.getRegularExpressionForWildcard(n,o,"exclude"),s=i&&new RegExp(i,r?"":"i"),a={};if(void 0!==t){for(var l=[],c=0,u=t;c<u.length;c++){var p=u[c],d=e.normalizePath(e.combinePaths(o,p));if(!s||!s.test(d)){var g=W(d,r);if(g){var h=g.key,f=g.flags,_=a[h];(void 0===_||_<f)&&(a[h]=f,1===f&&l.push(h))}}}for(var h in a)if(e.hasProperty(a,h))for(var m=0,y=l;m<y.length;m++){var k=y[m];h!==k&&e.containsPath(k,h,o,!r)&&delete a[h]}}return a}(u,p,r,s.useCaseSensitiveFileNames);return V({filesSpecs:t,includeSpecs:n,excludeSpecs:o,validatedIncludeSpecs:u,validatedExcludeSpecs:p,wildcardDirectories:d},r,i,s,l)}(t,i,u,s?b(s,r):r,g,o,c,l,n);0!==h.fileNames.length||e.hasProperty(d,"files")||0!==a.length||c.push(T(h.spec,s));return h}(),f=h.fileNames,_=h.wildcardDirectories,m=h.spec;return{options:g,fileNames:f,typeAcquisition:p.typeAcquisition||A(),raw:d,errors:c,wildcardDirectories:_,compileOnSave:!!d.compileOnSave,configFileSpecs:m};function v(t,o,r){n||c.push(e.createCompilerDiagnostic(t,o,r))}}function T(t,n){var o=t.includeSpecs,r=t.excludeSpecs;return e.createCompilerDiagnostic(e.Diagnostics.No_inputs_were_found_in_config_file_0_Specified_include_paths_were_1_and_exclude_paths_were_2,n||"tsconfig.json",JSON.stringify(o||[]),JSON.stringify(r||[]))}function E(e){return!!e.options}function S(t,o,r,i,s,a,l,c){i=e.normalizeSlashes(i);var u=e.toPath(s||"",i,a);if(l.indexOf(u)>=0)return c.push(e.createCompilerDiagnostic(e.Diagnostics.Circularity_detected_while_resolving_configuration_Colon_0,l.concat([u]).join(" -> "))),{raw:t||h(o,c)};var d=t?function(t,n,o,r,i,s){e.hasProperty(t,"excludes")&&s.push(e.createCompilerDiagnostic(e.Diagnostics.Unknown_option_excludes_Did_you_mean_exclude));var a,l=B(t.compilerOptions,o,s,i),c=I(t.typeAcquisition||t.typingOptions,o,s,i);if(t.compileOnSave=function(t,n,o){if(!e.hasProperty(t,e.compileOnSaveCommandLineOption.name))return;var r=N(e.compileOnSaveCommandLineOption,t.compileOnSave,n,o);if("boolean"==typeof r&&r)return r;return!1}(t,o,s),t.extends)if(e.isString(t.extends)){var u=i?b(i,o):o;a=C(t.extends,n,u,r,s,e.createCompilerDiagnostic)}else s.push(e.createCompilerDiagnostic(e.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,"extends","string"));return{raw:t,options:l,typeAcquisition:c,extendedConfigPath:a}}(t,r,i,a,s,c):function(t,o,r,i,s,a){var l,c,u,p=x(s),d={onSetValidOptionKeyValueInParent:function(t,n,o){e.Debug.assert("compilerOptions"===t||"typeAcquisition"===t||"typingOptions"===t),("compilerOptions"===t?p:"typeAcquisition"===t?l||(l=A(s)):c||(c=A(s)))[n.name]=w(n,r,o)},onSetValidOptionKeyValueInRoot:function(n,l,c,p){switch(n){case"extends":var d=s?b(s,r):r;return void(u=C(c,o,d,i,a,(function(n,o){return e.createDiagnosticForNodeInSourceFile(t,p,n,o)})));case"files":return void(0===c.length&&a.push(e.createDiagnosticForNodeInSourceFile(t,p,e.Diagnostics.The_files_list_in_config_file_0_is_empty,s||"tsconfig.json")))}},onSetUnknownOptionKeyValueInRoot:function(n,o,r,i){"excludes"===n&&a.push(e.createDiagnosticForNodeInSourceFile(t,o,e.Diagnostics.Unknown_option_excludes_Did_you_mean_exclude))}},h=f(t,a,(void 0===n&&(n=g([{name:"compilerOptions",type:"object",elementOptions:g(e.optionDeclarations),extraKeyDiagnosticMessage:e.Diagnostics.Unknown_compiler_option_0},{name:"typingOptions",type:"object",elementOptions:g(e.typeAcquisitionDeclarations),extraKeyDiagnosticMessage:e.Diagnostics.Unknown_type_acquisition_option_0},{name:"typeAcquisition",type:"object",elementOptions:g(e.typeAcquisitionDeclarations),extraKeyDiagnosticMessage:e.Diagnostics.Unknown_type_acquisition_option_0},{name:"extends",type:"string"},{name:"files",type:"list",element:{name:"files",type:"string"}},{name:"include",type:"list",element:{name:"include",type:"string"}},{name:"exclude",type:"list",element:{name:"exclude",type:"string"}},e.compileOnSaveCommandLineOption])),n),d);l||(l=c?void 0!==c.enableAutoDiscovery?{enable:c.enableAutoDiscovery,include:c.include,exclude:c.exclude}:c:A(s));return{raw:h,options:p,typeAcquisition:l,extendedConfigPath:u}}(o,r,i,a,s,c);if(d.extendedConfigPath){l=l.concat([u]);var _=function(t,n,o,r,i,s,a){var l=p(n,(function(e){return o.readFile(e)}));t&&(t.extendedSourceFiles||(t.extendedSourceFiles=[])).push(l.fileName);if(l.parseDiagnostics.length)return void a.push.apply(a,l.parseDiagnostics);var c,u=e.getDirectoryPath(n),d=S(void 0,l,o,u,e.getBaseFileName(n),i,s,a);t&&(c=t.extendedSourceFiles).push.apply(c,l.extendedSourceFiles);if(E(d)){var g=e.convertToRelativePath(u,r,i),h=function(t){return e.isRootedDiskPath(t)?t:e.combinePaths(g,t)},f=function(t){_[t]&&(_[t]=e.map(_[t],h))},_=d.raw;f("include"),f("exclude"),f("files")}return d}(o,d.extendedConfigPath,r,i,a,l,c);if(_&&E(_)){var m=_.raw,y=d.raw,k=function(e){var t=y[e]||m[e];t&&(y[e]=t)};k("include"),k("exclude"),k("files"),void 0===y.compileOnSave&&(y.compileOnSave=m.compileOnSave),d.options=e.assign({},_.options,d.options)}}return d}function C(t,n,o,r,i,s){if(t=e.normalizeSlashes(t),e.isRootedDiskPath(t)||e.startsWith(t,"./")||e.startsWith(t,"../")){var a=e.toPath(t,o,r);if(n.fileExists(a)||e.endsWith(a,".json")||(a+=".json",n.fileExists(a)))return a;i.push(s(e.Diagnostics.File_0_does_not_exist,t))}else i.push(s(e.Diagnostics.A_path_in_an_extends_option_must_be_relative_or_rooted_but_0_is_not,t))}function x(t){return"jsconfig.json"===e.getBaseFileName(t)?{allowJs:!0,maxNodeModuleJsDepth:2,allowSyntheticDefaultImports:!0,skipLibCheck:!0}:{}}function B(t,n,o,r){var i=x(r);return D(e.optionDeclarations,t,n,i,e.Diagnostics.Unknown_compiler_option_0,o),i}function A(t){return{enable:"jsconfig.json"===e.getBaseFileName(t),include:[],exclude:[]}}function I(t,n,r,i){var s=A(i),a=o(t);return D(e.typeAcquisitionDeclarations,a,n,s,e.Diagnostics.Unknown_type_acquisition_option_0,r),s}function D(t,n,o,r,i,s){if(n){var a=g(t);for(var l in n){var c=a.get(l);c?r[c.name]=N(c,n[l],o,s):s.push(e.createCompilerDiagnostic(i,l))}}}function N(t,n,o,r){if(m(t,n)){var i=t.type;return"list"===i&&e.isArray(n)?function(t,n,o,r){return e.filter(e.map(n,(function(e){return N(t.element,e,o,r)})),(function(e){return!!e}))}(t,n,o,r):e.isString(i)?R(t,o,n):O(t,n,r)}r.push(e.createCompilerDiagnostic(e.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,t.name,_(t)))}function w(t,n,o){if(!k(o)){if("list"===t.type){var r=t;return r.element.isFilePath||!e.isString(r.element.type)?e.filter(e.map(o,(function(e){return w(r.element,n,e)})),(function(e){return!!e})):o}return e.isString(t.type)?R(t,n,o):t.type.get(e.isString(o)?o.toLowerCase():o)}}function R(t,n,o){return t.isFilePath&&""===(o=e.normalizePath(e.combinePaths(n,o)))&&(o="."),o}function O(e,t,n){if(!k(t)){var o=t.toLowerCase(),r=e.type.get(o);if(void 0!==r)return r;n.push(i(e))}}function P(e){return"function"==typeof e.trim?e.trim():e.replace(/^[\s]+|[\s]+$/g,"")}e.compileOnSaveCommandLineOption={name:"compileOnSave",type:"boolean"},e.optionDeclarations=[{name:"help",shortName:"h",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Command_line_Options,description:e.Diagnostics.Print_this_message},{name:"help",shortName:"?",type:"boolean"},{name:"all",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Command_line_Options,description:e.Diagnostics.Show_all_compiler_options},{name:"version",shortName:"v",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Command_line_Options,description:e.Diagnostics.Print_the_compiler_s_version},{name:"init",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Command_line_Options,description:e.Diagnostics.Initializes_a_TypeScript_project_and_creates_a_tsconfig_json_file},{name:"project",shortName:"p",type:"string",isFilePath:!0,showInSimplifiedHelpView:!0,category:e.Diagnostics.Command_line_Options,paramType:e.Diagnostics.FILE_OR_DIRECTORY,description:e.Diagnostics.Compile_the_project_given_the_path_to_its_configuration_file_or_to_a_folder_with_a_tsconfig_json},{name:"pretty",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Command_line_Options,description:e.Diagnostics.Stylize_errors_and_messages_using_color_and_context_experimental},{name:"watch",shortName:"w",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Command_line_Options,description:e.Diagnostics.Watch_input_files},{name:"target",shortName:"t",type:e.createMapFromTemplate({es3:0,es5:1,es6:2,es2015:2,es2016:3,es2017:4,esnext:5}),paramType:e.Diagnostics.VERSION,showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Specify_ECMAScript_target_version_Colon_ES3_default_ES5_ES2015_ES2016_ES2017_or_ESNEXT},{name:"module",shortName:"m",type:e.createMapFromTemplate({none:e.ModuleKind.None,commonjs:e.ModuleKind.CommonJS,amd:e.ModuleKind.AMD,system:e.ModuleKind.System,umd:e.ModuleKind.UMD,es6:e.ModuleKind.ES2015,es2015:e.ModuleKind.ES2015,esnext:e.ModuleKind.ESNext}),paramType:e.Diagnostics.KIND,showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Specify_module_code_generation_Colon_none_commonjs_amd_system_umd_es2015_or_ESNext},{name:"lib",type:"list",element:{name:"lib",type:e.createMapFromTemplate({es5:"lib.es5.d.ts",es6:"lib.es2015.d.ts",es2015:"lib.es2015.d.ts",es7:"lib.es2016.d.ts",es2016:"lib.es2016.d.ts",es2017:"lib.es2017.d.ts",esnext:"lib.esnext.d.ts",dom:"lib.dom.d.ts","dom.iterable":"lib.dom.iterable.d.ts",webworker:"lib.webworker.d.ts",scripthost:"lib.scripthost.d.ts","es2015.core":"lib.es2015.core.d.ts","es2015.collection":"lib.es2015.collection.d.ts","es2015.generator":"lib.es2015.generator.d.ts","es2015.iterable":"lib.es2015.iterable.d.ts","es2015.promise":"lib.es2015.promise.d.ts","es2015.proxy":"lib.es2015.proxy.d.ts","es2015.reflect":"lib.es2015.reflect.d.ts","es2015.symbol":"lib.es2015.symbol.d.ts","es2015.symbol.wellknown":"lib.es2015.symbol.wellknown.d.ts","es2016.array.include":"lib.es2016.array.include.d.ts","es2017.object":"lib.es2017.object.d.ts","es2017.sharedmemory":"lib.es2017.sharedmemory.d.ts","es2017.string":"lib.es2017.string.d.ts","es2017.intl":"lib.es2017.intl.d.ts","esnext.asynciterable":"lib.esnext.asynciterable.d.ts"})},showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Specify_library_files_to_be_included_in_the_compilation_Colon},{name:"allowJs",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Allow_javascript_files_to_be_compiled},{name:"checkJs",type:"boolean",category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Report_errors_in_js_files},{name:"jsx",type:e.createMapFromTemplate({preserve:1,"react-native":3,react:2}),paramType:e.Diagnostics.KIND,showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Specify_JSX_code_generation_Colon_preserve_react_native_or_react},{name:"declaration",shortName:"d",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Generates_corresponding_d_ts_file},{name:"sourceMap",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Generates_corresponding_map_file},{name:"outFile",type:"string",isFilePath:!0,paramType:e.Diagnostics.FILE,showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Concatenate_and_emit_output_to_single_file},{name:"outDir",type:"string",isFilePath:!0,paramType:e.Diagnostics.DIRECTORY,showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Redirect_output_structure_to_the_directory},{name:"rootDir",type:"string",isFilePath:!0,paramType:e.Diagnostics.LOCATION,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Specify_the_root_directory_of_input_files_Use_to_control_the_output_directory_structure_with_outDir},{name:"removeComments",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Do_not_emit_comments_to_output},{name:"noEmit",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Do_not_emit_outputs},{name:"importHelpers",type:"boolean",category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Import_emit_helpers_from_tslib},{name:"downlevelIteration",type:"boolean",category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Provide_full_support_for_iterables_in_for_of_spread_and_destructuring_when_targeting_ES5_or_ES3},{name:"isolatedModules",type:"boolean",category:e.Diagnostics.Basic_Options,description:e.Diagnostics.Transpile_each_file_as_a_separate_module_similar_to_ts_transpileModule},{name:"strict",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Strict_Type_Checking_Options,description:e.Diagnostics.Enable_all_strict_type_checking_options},{name:"noImplicitAny",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Strict_Type_Checking_Options,description:e.Diagnostics.Raise_error_on_expressions_and_declarations_with_an_implied_any_type},{name:"strictNullChecks",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Strict_Type_Checking_Options,description:e.Diagnostics.Enable_strict_null_checks},{name:"strictFunctionTypes",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Strict_Type_Checking_Options,description:e.Diagnostics.Enable_strict_checking_of_function_types},{name:"noImplicitThis",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Strict_Type_Checking_Options,description:e.Diagnostics.Raise_error_on_this_expressions_with_an_implied_any_type},{name:"alwaysStrict",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Strict_Type_Checking_Options,description:e.Diagnostics.Parse_in_strict_mode_and_emit_use_strict_for_each_source_file},{name:"noUnusedLocals",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Additional_Checks,description:e.Diagnostics.Report_errors_on_unused_locals},{name:"noUnusedParameters",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Additional_Checks,description:e.Diagnostics.Report_errors_on_unused_parameters},{name:"noImplicitReturns",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Additional_Checks,description:e.Diagnostics.Report_error_when_not_all_code_paths_in_function_return_a_value},{name:"noFallthroughCasesInSwitch",type:"boolean",showInSimplifiedHelpView:!0,category:e.Diagnostics.Additional_Checks,description:e.Diagnostics.Report_errors_for_fallthrough_cases_in_switch_statement},{name:"moduleResolution",type:e.createMapFromTemplate({node:e.ModuleResolutionKind.NodeJs,classic:e.ModuleResolutionKind.Classic}),paramType:e.Diagnostics.STRATEGY,category:e.Diagnostics.Module_Resolution_Options,description:e.Diagnostics.Specify_module_resolution_strategy_Colon_node_Node_js_or_classic_TypeScript_pre_1_6},{name:"baseUrl",type:"string",isFilePath:!0,category:e.Diagnostics.Module_Resolution_Options,description:e.Diagnostics.Base_directory_to_resolve_non_absolute_module_names},{name:"paths",type:"object",isTSConfigOnly:!0,category:e.Diagnostics.Module_Resolution_Options,description:e.Diagnostics.A_series_of_entries_which_re_map_imports_to_lookup_locations_relative_to_the_baseUrl},{name:"rootDirs",type:"list",isTSConfigOnly:!0,element:{name:"rootDirs",type:"string",isFilePath:!0},category:e.Diagnostics.Module_Resolution_Options,description:e.Diagnostics.List_of_root_folders_whose_combined_content_represents_the_structure_of_the_project_at_runtime},{name:"typeRoots",type:"list",element:{name:"typeRoots",type:"string",isFilePath:!0},category:e.Diagnostics.Module_Resolution_Options,description:e.Diagnostics.List_of_folders_to_include_type_definitions_from},{name:"types",type:"list",element:{name:"types",type:"string"},showInSimplifiedHelpView:!0,category:e.Diagnostics.Module_Resolution_Options,description:e.Diagnostics.Type_declaration_files_to_be_included_in_compilation},{name:"allowSyntheticDefaultImports",type:"boolean",category:e.Diagnostics.Module_Resolution_Options,description:e.Diagnostics.Allow_default_imports_from_modules_with_no_default_export_This_does_not_affect_code_emit_just_typechecking},{name:"preserveSymlinks",type:"boolean",category:e.Diagnostics.Module_Resolution_Options,description:e.Diagnostics.Do_not_resolve_the_real_path_of_symlinks},{name:"sourceRoot",type:"string",isFilePath:!0,paramType:e.Diagnostics.LOCATION,category:e.Diagnostics.Source_Map_Options,description:e.Diagnostics.Specify_the_location_where_debugger_should_locate_TypeScript_files_instead_of_source_locations},{name:"mapRoot",type:"string",isFilePath:!0,paramType:e.Diagnostics.LOCATION,category:e.Diagnostics.Source_Map_Options,description:e.Diagnostics.Specify_the_location_where_debugger_should_locate_map_files_instead_of_generated_locations},{name:"inlineSourceMap",type:"boolean",category:e.Diagnostics.Source_Map_Options,description:e.Diagnostics.Emit_a_single_file_with_source_maps_instead_of_having_a_separate_file},{name:"inlineSources",type:"boolean",category:e.Diagnostics.Source_Map_Options,description:e.Diagnostics.Emit_the_source_alongside_the_sourcemaps_within_a_single_file_requires_inlineSourceMap_or_sourceMap_to_be_set},{name:"experimentalDecorators",type:"boolean",category:e.Diagnostics.Experimental_Options,description:e.Diagnostics.Enables_experimental_support_for_ES7_decorators},{name:"emitDecoratorMetadata",type:"boolean",category:e.Diagnostics.Experimental_Options,description:e.Diagnostics.Enables_experimental_support_for_emitting_type_metadata_for_decorators},{name:"jsxFactory",type:"string",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Specify_the_JSX_factory_function_to_use_when_targeting_react_JSX_emit_e_g_React_createElement_or_h},{name:"diagnostics",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Show_diagnostic_information},{name:"extendedDiagnostics",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Show_verbose_diagnostic_information},{name:"traceResolution",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Enable_tracing_of_the_name_resolution_process},{name:"listFiles",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Print_names_of_files_part_of_the_compilation},{name:"listEmittedFiles",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Print_names_of_generated_files_part_of_the_compilation},{name:"out",type:"string",isFilePath:!1,category:e.Diagnostics.Advanced_Options,paramType:e.Diagnostics.FILE,description:e.Diagnostics.Deprecated_Use_outFile_instead_Concatenate_and_emit_output_to_single_file},{name:"reactNamespace",type:"string",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Deprecated_Use_jsxFactory_instead_Specify_the_object_invoked_for_createElement_when_targeting_react_JSX_emit},{name:"skipDefaultLibCheck",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Deprecated_Use_skipLibCheck_instead_Skip_type_checking_of_default_library_declaration_files},{name:"charset",type:"string",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.The_character_set_of_the_input_files},{name:"emitBOM",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Emit_a_UTF_8_Byte_Order_Mark_BOM_in_the_beginning_of_output_files},{name:"locale",type:"string",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.The_locale_used_when_displaying_messages_to_the_user_e_g_en_us},{name:"newLine",type:e.createMapFromTemplate({crlf:0,lf:1}),paramType:e.Diagnostics.NEWLINE,category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Specify_the_end_of_line_sequence_to_be_used_when_emitting_files_Colon_CRLF_dos_or_LF_unix},{name:"noErrorTruncation",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_truncate_error_messages},{name:"noLib",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_include_the_default_library_file_lib_d_ts},{name:"noResolve",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_add_triple_slash_references_or_imported_modules_to_the_list_of_compiled_files},{name:"stripInternal",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_emit_declarations_for_code_that_has_an_internal_annotation},{name:"disableSizeLimit",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Disable_size_limitations_on_JavaScript_projects},{name:"noImplicitUseStrict",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_emit_use_strict_directives_in_module_output},{name:"noEmitHelpers",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_generate_custom_helper_functions_like_extends_in_compiled_output},{name:"noEmitOnError",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_emit_outputs_if_any_errors_were_reported},{name:"preserveConstEnums",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_erase_const_enum_declarations_in_generated_code},{name:"declarationDir",type:"string",isFilePath:!0,paramType:e.Diagnostics.DIRECTORY,category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Output_directory_for_generated_declaration_files},{name:"skipLibCheck",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Skip_type_checking_of_declaration_files},{name:"allowUnusedLabels",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_report_errors_on_unused_labels},{name:"allowUnreachableCode",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Do_not_report_errors_on_unreachable_code},{name:"suppressExcessPropertyErrors",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Suppress_excess_property_checks_for_object_literals},{name:"suppressImplicitAnyIndexErrors",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Suppress_noImplicitAny_errors_for_indexing_objects_lacking_index_signatures},{name:"forceConsistentCasingInFileNames",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Disallow_inconsistently_cased_references_to_the_same_file},{name:"maxNodeModuleJsDepth",type:"number",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.The_maximum_dependency_depth_to_search_under_node_modules_and_load_JavaScript_files},{name:"noStrictGenericChecks",type:"boolean",category:e.Diagnostics.Advanced_Options,description:e.Diagnostics.Disable_strict_checking_of_generic_signatures_in_function_types},{name:"plugins",type:"list",isTSConfigOnly:!0,element:{name:"plugin",type:"object"},description:e.Diagnostics.List_of_language_service_plugins}],e.typeAcquisitionDeclarations=[{name:"enableAutoDiscovery",type:"boolean"},{name:"enable",type:"boolean"},{name:"include",type:"list",element:{name:"include",type:"string"}},{name:"exclude",type:"list",element:{name:"exclude",type:"string"}}],e.defaultInitCompilerOptions={module:e.ModuleKind.CommonJS,target:1,strict:!0},e.convertEnableAutoDiscoveryToEnable=o,e.createCompilerDiagnosticForInvalidCustomType=i,e.parseCustomTypeOption=a,e.parseListTypeOption=l,e.parseCommandLine=function(t,n){var o={},r=[],i=[];return s(t),{options:o,fileNames:r,errors:i};function s(t){for(var n=0;n<t.length;){var s=t[n];if(n++,64===s.charCodeAt(0))u(s.slice(1));else if(45===s.charCodeAt(0)){var p=c(s.slice(45===s.charCodeAt(1)?2:1),!0);if(p)if(p.isTSConfigOnly)i.push(e.createCompilerDiagnostic(e.Diagnostics.Option_0_can_only_be_specified_in_tsconfig_json_file,p.name));else switch(t[n]||"boolean"===p.type||i.push(e.createCompilerDiagnostic(e.Diagnostics.Compiler_option_0_expects_an_argument,p.name)),p.type){case"number":o[p.name]=parseInt(t[n]),n++;break;case"boolean":var d=t[n];o[p.name]="false"!==d,"false"!==d&&"true"!==d||n++;break;case"string":o[p.name]=t[n]||"",n++;break;case"list":var g=l(p,t[n],i);o[p.name]=g||[],g&&n++;break;default:o[p.name]=a(p,t[n],i),n++}else i.push(e.createCompilerDiagnostic(e.Diagnostics.Unknown_compiler_option_0,s))}else r.push(s)}}function u(t){var o=n?n(t):e.sys.readFile(t);if(o){for(var r=[],a=0;;){for(;a<o.length&&o.charCodeAt(a)<=32;)a++;if(a>=o.length)break;var l=a;if(34===o.charCodeAt(l)){for(a++;a<o.length&&34!==o.charCodeAt(a);)a++;a<o.length?(r.push(o.substring(l+1,a)),a++):i.push(e.createCompilerDiagnostic(e.Diagnostics.Unterminated_quoted_string_in_response_file_0,t))}else{for(;o.charCodeAt(a)>32;)a++;r.push(o.substring(l,a))}}s(r)}else i.push(e.createCompilerDiagnostic(e.Diagnostics.File_0_not_found,t))}},e.readConfigFile=function(t,n){var o=d(t,n);return e.isString(o)?u(t,o):{config:{},error:o}},e.parseConfigFileTextToJson=u,e.readJsonConfigFile=p,e.convertToObject=h,e.generateTSConfig=function(t,n,o){var i=function(t){var n=e.createMap(),o=r().optionNameMap,i=function(r){if(e.hasProperty(t,r)){if(o.has(r)&&o.get(r).category===e.Diagnostics.Command_line_Options)return"continue";var i=t[r],l=o.get(r.toLowerCase());if(l){var c=s(l);c?"list"===l.type?n.set(r,i.map((function(e){return a(e,c)}))):n.set(r,a(i,c)):n.set(r,i)}}};for(var l in t)i(l);return n}(e.extend(t,e.defaultInitCompilerOptions));return function(){for(var t=e.createMultiMap(),r=0,s=e.optionDeclarations;r<s.length;r++){var a=s[r],u=a.category;void 0!==u&&u!==e.Diagnostics.Command_line_Options&&u!==e.Diagnostics.Advanced_Options&&t.add(e.getLocaleSpecificMessage(u),a)}var p=0,d=0,g=[],h=[];t.forEach((function(t,n){0!==g.length&&(g.push(""),h.push("")),g.push("/* "+n+" */"),h.push("");for(var o=0,r=t;o<r.length;o++){var s=r[o],a=void 0;a=i.has(s.name)?'"'+s.name+'": '+JSON.stringify(i.get(s.name))+((d+=1)===i.size?"":","):'// "'+s.name+'": '+JSON.stringify(l(s))+",",g.push(a),h.push("/* "+(s.description&&e.getLocaleSpecificMessage(s.description)||s.name)+" */"),p=Math.max(a.length,p)}}));var f=c(2),_=[];_.push("{"),_.push(f+'"compilerOptions": {');for(var m=0;m<g.length;m++){var y=g[m],k=h[m];_.push(y&&""+f+f+y+(k&&c(p-y.length+2)+k))}if(n.length){_.push(f+"},"),_.push(f+'"files": [');for(m=0;m<n.length;m++)_.push(""+f+f+JSON.stringify(n[m])+(m===n.length-1?"":","));_.push(f+"]")}else _.push(f+"}");return _.push("}"),_.join(o)}();function s(e){return"string"===e.type||"number"===e.type||"boolean"===e.type?void 0:"list"===e.type?s(e.element):e.type}function a(t,n){return e.forEachEntry(n,(function(e,n){if(e===t)return n}))}function l(e){switch(e.type){case"number":return 1;case"boolean":return!0;case"string":return e.isFilePath?"./":"";case"list":return[];case"object":return{};default:return e.type.keys().next().value}}function c(e){return Array(e+1).join(" ")}},e.parseJsonConfigFileContent=function(e,t,n,o,r,i,s){return v(e,void 0,t,n,o,r,i,s)},e.parseJsonSourceFileConfigFileContent=function(e,t,n,o,r,i,s){return v(void 0,e,t,n,o,r,i,s)},e.setConfigFileInOptions=y,e.isErrorNoInputFiles=function(t){return t.code===e.Diagnostics.No_inputs_were_found_in_config_file_0_Specified_include_paths_were_1_and_exclude_paths_were_2.code},e.getErrorForNoInputFiles=T,e.convertCompilerOptionsFromJson=function(e,t,n){var o=[];return{options:B(e,t,o,n),errors:o}},e.convertTypeAcquisitionFromJson=function(e,t,n){var o=[];return{options:I(e,t,o,n),errors:o}};var L=/(^|\/)\*\*\/?$/,M=/(^|\/)\*\*\/(.*\/)?\*\*($|\/)/,F=/(^|\/)\*\*\/(.*\/)?\.\.($|\/)/,U=/\/[^/]*?[*?][^/]*\//,H=/^[^*?]*(?=\/[^/]*[*?])/;function V(t,n,o,r,i){void 0===i&&(i=[]),n=e.normalizePath(n);var s=r.useCaseSensitiveFileNames?z:$,a=e.createMap(),l=e.createMap(),c=t.filesSpecs,u=t.validatedIncludeSpecs,p=t.validatedExcludeSpecs,d=t.wildcardDirectories,g=e.getSupportedExtensions(o,i);if(c)for(var h=0,f=c;h<f.length;h++){var _=f[h],m=e.getNormalizedAbsolutePath(_,n);a.set(s(m),m)}if(u&&u.length>0)for(var y=0,k=r.readDirectory(n,g,p,u,void 0);y<k.length;y++){if(!K(m=k[y],a,l,g,s)){j(m,l,g,s);var b=s(m);a.has(b)||l.has(b)||l.set(b,m)}}var v=e.arrayFrom(a.values()),T=e.arrayFrom(l.values());return{fileNames:v.concat(T),wildcardDirectories:d,spec:t}}function G(t,n,o,r,i){return t.filter((function(t){var s=function(t,n){if(!n&&L.test(t))return e.Diagnostics.File_specification_cannot_end_in_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0;if(M.test(t))return e.Diagnostics.File_specification_cannot_contain_multiple_recursive_directory_wildcards_Asterisk_Asterisk_Colon_0;if(F.test(t))return e.Diagnostics.File_specification_cannot_contain_a_parent_directory_that_appears_after_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0}(t,o);return void 0!==s&&n.push(function(t,n){if(r&&r.jsonObject)for(var o=0,s=e.getPropertyAssignment(r.jsonObject,i);o<s.length;o++){var a=s[o];if(e.isArrayLiteralExpression(a.initializer))for(var l=0,c=a.initializer.elements;l<c.length;l++){var u=c[l];if(e.isStringLiteral(u)&&u.text===n)return e.createDiagnosticForNodeInSourceFile(r,u,t,n)}}return e.createCompilerDiagnostic(t,n)}(s,t)),void 0===s}))}function W(t,n){var o=H.exec(t);return o?{key:n?o[0]:o[0].toLowerCase(),flags:U.test(t)?1:0}:e.isImplicitGlob(t)?{key:t,flags:1}:void 0}function K(t,n,o,r,i){for(var s=e.getExtensionPriority(t,r),a=e.adjustExtensionPriority(s,r),l=0;l<a;l++){var c=r[l],u=i(e.changeExtension(t,c));if(n.has(u)||o.has(u))return!0}return!1}function j(t,n,o,r){for(var i=e.getExtensionPriority(t,o),s=e.getNextLowestExtensionPriority(i,o);s<o.length;s++){var a=o[s],l=r(e.changeExtension(t,a));n.delete(l)}}function z(e){return e}function $(e){return e.toLowerCase()}function X(t,n){switch(n.type){case"object":case"string":return"";case"number":return"number"==typeof t?t:"";case"boolean":return"boolean"==typeof t?t:"";case"list":var o=n.element;return e.isArray(t)?t.map((function(e){return X(e,o)})):"";default:return e.forEachEntry(n.type,(function(e,n){if(e===t)return n}))}}e.getFileNamesFromConfigSpecs=V,e.convertCompilerOptionsForTelemetry=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var o=c(n);void 0!==o&&(t[n]=X(e[n],o))}return t}}(ts||(ts={})),function(e){!function(e){var t=function(){function e(e){this.text=e}return e.prototype.getText=function(e,t){return 0===e&&t===this.text.length?this.text:this.text.substring(e,t)},e.prototype.getLength=function(){return this.text.length},e.prototype.getChangeRange=function(){},e}();e.fromString=function(e){return new t(e)}}(e.ScriptSnapshot||(e.ScriptSnapshot={}));var t=function(){};e.TextChange=t,function(e){e.none="none",e.definition="definition",e.reference="reference",e.writtenReference="writtenReference"}(e.HighlightSpanKind||(e.HighlightSpanKind={})),function(e){e[e.None=0]="None",e[e.Block=1]="Block",e[e.Smart=2]="Smart"}(e.IndentStyle||(e.IndentStyle={})),function(e){e[e.aliasName=0]="aliasName",e[e.className=1]="className",e[e.enumName=2]="enumName",e[e.fieldName=3]="fieldName",e[e.interfaceName=4]="interfaceName",e[e.keyword=5]="keyword",e[e.lineBreak=6]="lineBreak",e[e.numericLiteral=7]="numericLiteral",e[e.stringLiteral=8]="stringLiteral",e[e.localName=9]="localName",e[e.methodName=10]="methodName",e[e.moduleName=11]="moduleName",e[e.operator=12]="operator",e[e.parameterName=13]="parameterName",e[e.propertyName=14]="propertyName",e[e.punctuation=15]="punctuation",e[e.space=16]="space",e[e.text=17]="text",e[e.typeParameterName=18]="typeParameterName",e[e.enumMemberName=19]="enumMemberName",e[e.functionName=20]="functionName",e[e.regularExpressionLiteral=21]="regularExpressionLiteral"}(e.SymbolDisplayPartKind||(e.SymbolDisplayPartKind={})),function(e){e[e.JavaScript=0]="JavaScript",e[e.SourceMap=1]="SourceMap",e[e.Declaration=2]="Declaration"}(e.OutputFileType||(e.OutputFileType={})),function(e){e[e.None=0]="None",e[e.InMultiLineCommentTrivia=1]="InMultiLineCommentTrivia",e[e.InSingleQuoteStringLiteral=2]="InSingleQuoteStringLiteral",e[e.InDoubleQuoteStringLiteral=3]="InDoubleQuoteStringLiteral",e[e.InTemplateHeadOrNoSubstitutionTemplate=4]="InTemplateHeadOrNoSubstitutionTemplate",e[e.InTemplateMiddleOrTail=5]="InTemplateMiddleOrTail",e[e.InTemplateSubstitutionPosition=6]="InTemplateSubstitutionPosition"}(e.EndOfLineState||(e.EndOfLineState={})),function(e){e[e.Punctuation=0]="Punctuation",e[e.Keyword=1]="Keyword",e[e.Operator=2]="Operator",e[e.Comment=3]="Comment",e[e.Whitespace=4]="Whitespace",e[e.Identifier=5]="Identifier",e[e.NumberLiteral=6]="NumberLiteral",e[e.StringLiteral=7]="StringLiteral",e[e.RegExpLiteral=8]="RegExpLiteral"}(e.TokenClass||(e.TokenClass={})),function(e){e.unknown="",e.warning="warning",e.keyword="keyword",e.scriptElement="script",e.moduleElement="module",e.classElement="class",e.localClassElement="local class",e.interfaceElement="interface",e.typeElement="type",e.enumElement="enum",e.enumMemberElement="enum member",e.variableElement="var",e.localVariableElement="local var",e.functionElement="function",e.localFunctionElement="local function",e.memberFunctionElement="method",e.memberGetAccessorElement="getter",e.memberSetAccessorElement="setter",e.memberVariableElement="property",e.constructorImplementationElement="constructor",e.callSignatureElement="call",e.indexSignatureElement="index",e.constructSignatureElement="construct",e.parameterElement="parameter",e.typeParameterElement="type parameter",e.primitiveType="primitive type",e.label="label",e.alias="alias",e.constElement="const",e.letElement="let",e.directory="directory",e.externalModuleName="external module name",e.jsxAttribute="JSX attribute"}(e.ScriptElementKind||(e.ScriptElementKind={})),function(e){e.none="",e.publicMemberModifier="public",e.privateMemberModifier="private",e.protectedMemberModifier="protected",e.exportedModifier="export",e.ambientModifier="declare",e.staticModifier="static",e.abstractModifier="abstract"}(e.ScriptElementKindModifier||(e.ScriptElementKindModifier={})),function(e){e.comment="comment",e.identifier="identifier",e.keyword="keyword",e.numericLiteral="number",e.operator="operator",e.stringLiteral="string",e.whiteSpace="whitespace",e.text="text",e.punctuation="punctuation",e.className="class name",e.enumName="enum name",e.interfaceName="interface name",e.moduleName="module name",e.typeParameterName="type parameter name",e.typeAliasName="type alias name",e.parameterName="parameter name",e.docCommentTagName="doc comment tag name",e.jsxOpenTagName="jsx open tag name",e.jsxCloseTagName="jsx close tag name",e.jsxSelfClosingTagName="jsx self closing tag name",e.jsxAttribute="jsx attribute",e.jsxText="jsx text",e.jsxAttributeStringLiteralValue="jsx attribute string literal value"}(e.ClassificationTypeNames||(e.ClassificationTypeNames={})),function(e){e[e.comment=1]="comment",e[e.identifier=2]="identifier",e[e.keyword=3]="keyword",e[e.numericLiteral=4]="numericLiteral",e[e.operator=5]="operator",e[e.stringLiteral=6]="stringLiteral",e[e.regularExpressionLiteral=7]="regularExpressionLiteral",e[e.whiteSpace=8]="whiteSpace",e[e.text=9]="text",e[e.punctuation=10]="punctuation",e[e.className=11]="className",e[e.enumName=12]="enumName",e[e.interfaceName=13]="interfaceName",e[e.moduleName=14]="moduleName",e[e.typeParameterName=15]="typeParameterName",e[e.typeAliasName=16]="typeAliasName",e[e.parameterName=17]="parameterName",e[e.docCommentTagName=18]="docCommentTagName",e[e.jsxOpenTagName=19]="jsxOpenTagName",e[e.jsxCloseTagName=20]="jsxCloseTagName",e[e.jsxSelfClosingTagName=21]="jsxSelfClosingTagName",e[e.jsxAttribute=22]="jsxAttribute",e[e.jsxText=23]="jsxText",e[e.jsxAttributeStringLiteralValue=24]="jsxAttributeStringLiteralValue"}(e.ClassificationType||(e.ClassificationType={}))}(ts||(ts={})),function(e){function t(t){switch(t.kind){case 146:case 226:case 176:case 149:case 148:case 261:case 262:case 151:case 150:case 152:case 153:case 154:case 228:case 186:case 187:case 260:case 253:return 1;case 145:case 230:case 231:case 163:return 2;case 283:return void 0===t.name?3:2;case 264:case 229:return 3;case 233:return e.isAmbientModule(t)||1===e.getModuleInstanceState(t)?5:4;case 232:case 241:case 242:case 237:case 238:case 243:case 244:return 7;case 265:return 5}return 7}function n(t){for(;143===t.parent.kind;)t=t.parent;return e.isInternalModuleImportEqualsDeclaration(t.parent)&&t.parent.moduleReference===t}function o(e,t){var n=r(e);return n&&n.parent&&n.parent.kind===t&&n.parent.expression===n}function r(e){return s(e)?e.parent:e}function i(e){return 71===e.kind&&(218===e.parent.kind||217===e.parent.kind)&&e.parent.label===e}function s(e){return e&&e.parent&&179===e.parent.kind&&e.parent.name===e}e.scanner=e.createScanner(5,!0),function(e){e[e.None=0]="None",e[e.Value=1]="Value",e[e.Type=2]="Type",e[e.Namespace=4]="Namespace",e[e.All=7]="All"}(e.SemanticMeaning||(e.SemanticMeaning={})),e.getMeaningFromDeclaration=t,e.getMeaningFromLocation=function(o){return 265===o.kind?1:243===o.parent.kind?7:n(o)?function(t){if(e.Debug.assert(71===t.kind),143===t.parent.kind&&t.parent.right===t&&237===t.parent.parent.kind)return 7;return 4}(o):e.isDeclarationName(o)?t(o.parent):function(t){e.isRightSideOfQualifiedNameOrPropertyAccess(t)&&(t=t.parent);switch(t.kind){case 99:return!e.isPartOfExpression(t);case 169:return!0}switch(t.parent.kind){case 159:return!0;case 201:return!e.isExpressionWithTypeArgumentsInClassExtendsClause(t.parent)}return!1}(o)?2:function(e){return function(e){var t=e,n=!0;if(143===t.parent.kind){for(;t.parent&&143===t.parent.kind;)t=t.parent;n=t.right===e}return 159===t.parent.kind&&!n}(e)||function(e){var t=e,n=!0;if(179===t.parent.kind){for(;t.parent&&179===t.parent.kind;)t=t.parent;n=t.name===e}if(!n&&201===t.parent.kind&&259===t.parent.parent.kind){var o=t.parent.parent.parent;return 229===o.kind&&108===t.parent.parent.token||230===o.kind&&85===t.parent.parent.token}return!1}(e)}(o)?4:e.isTypeParameterDeclaration(o.parent)?(e.Debug.assert(e.isJSDocTemplateTag(o.parent.parent)),2):1},e.isInRightSideOfInternalImportEqualsDeclaration=n,e.isCallExpressionTarget=function(e){return o(e,181)},e.isNewExpressionTarget=function(e){return o(e,182)},e.climbPastPropertyAccess=r,e.getTargetLabel=function(e,t){for(;e;){if(222===e.kind&&e.label.escapedText===t)return e.label;e=e.parent}},e.isJumpStatementTarget=i,e.isLabelName=function(e){return function(e){return 71===e.kind&&222===e.parent.kind&&e.parent.label===e}(e)||i(e)},e.isRightSideOfQualifiedName=function(e){return 143===e.parent.kind&&e.parent.right===e},e.isRightSideOfPropertyAccess=s,e.isNameOfModuleDeclaration=function(e){return 233===e.parent.kind&&e.parent.name===e},e.isNameOfFunctionDeclaration=function(t){return 71===t.kind&&e.isFunctionLike(t.parent)&&t.parent.name===t},e.isLiteralNameOfPropertyDeclarationOrIndexAccess=function(t){switch(t.parent.kind){case 149:case 148:case 261:case 264:case 151:case 150:case 153:case 154:case 233:return e.getNameOfDeclaration(t.parent)===t;case 180:return t.parent.argumentExpression===t;case 144:return!0;case 173:return 171===t.parent.parent.kind}},e.isExpressionOfExternalModuleImportEqualsDeclaration=function(t){return e.isExternalModuleImportEqualsDeclaration(t.parent.parent)&&e.getExternalModuleImportEqualsDeclarationExpression(t.parent.parent)===t},e.getContainerNode=function(e){for(283===e.kind&&(e=e.parent.parent);;){if(!(e=e.parent))return;switch(e.kind){case 265:case 151:case 150:case 228:case 186:case 153:case 154:case 229:case 230:case 232:case 233:return e}}},e.getNodeKind=function t(n){switch(n.kind){case 265:return e.isExternalModule(n)?"module":"script";case 233:return"module";case 229:case 199:return"class";case 230:return"interface";case 231:return"type";case 232:return"enum";case 226:return s(n);case 176:return s(e.getRootDeclaration(n));case 187:case 228:case 186:return"function";case 153:return"getter";case 154:return"setter";case 151:case 150:return"method";case 149:case 148:return"property";case 157:return"index";case 156:return"construct";case 155:return"call";case 152:return"constructor";case 145:return"type parameter";case 264:return"enum member";case 146:return e.hasModifier(n,92)?"property":"parameter";case 237:case 242:case 239:case 246:case 240:return"alias";case 283:return"type";case 194:var o=e.getSpecialPropertyAssignmentKind(n),r=n.right;switch(o){case 0:return"";case 1:case 2:var i=t(r);return""===i?"const":i;case 3:return"method";case 4:return"property";case 5:return e.isFunctionExpression(r)?"method":"property";default:return e.assertTypeIsNever(o),""}default:return""}function s(t){return e.isConst(t)?"const":e.isLet(t)?"let":"var"}},e.isThis=function(t){switch(t.kind){case 99:return!0;case 71:return e.identifierIsThisKeyword(t)&&146===t.parent.kind;default:return!1}};var a=/^\/\/\/\s*</;function l(e,t,n){return e<=n.pos&&t>=n.end}function c(e,t,n,o){return Math.max(e,n)<Math.min(t,o)}function u(t,n){if(e.nodeIsMissing(t))return!1;switch(t.kind){case 229:case 230:case 232:case 178:case 174:case 163:case 207:case 234:case 235:case 241:case 245:return p(t,18,n);case 260:return u(t.block,n);case 182:if(!t.arguments)return!0;case 181:case 185:case 168:return p(t,20,n);case 160:case 161:return u(t.type,n);case 152:case 153:case 154:case 228:case 186:case 151:case 150:case 156:case 155:case 187:return t.body?u(t.body,n):t.type?u(t.type,n):d(t,20,n);case 233:return t.body&&u(t.body,n);case 211:return t.elseStatement?u(t.elseStatement,n):u(t.thenStatement,n);case 210:return u(t.expression,n)||d(t,25);case 177:case 175:case 180:case 144:case 165:return p(t,22,n);case 157:return t.type?u(t.type,n):d(t,22,n);case 257:case 258:return!1;case 214:case 215:case 216:case 213:return u(t.statement,n);case 212:return g(t,106,n)?p(t,20,n):u(t.statement,n);case 162:return u(t.exprName,n);case 189:case 188:case 190:case 197:case 198:return u(t.expression,n);case 183:return u(t.template,n);case 196:return u(e.lastOrUndefined(t.templateSpans),n);case 205:return e.nodeIsPresent(t.literal);case 244:case 238:return e.nodeIsPresent(t.moduleSpecifier);case 192:return u(t.operand,n);case 194:return u(t.right,n);case 195:return u(t.whenFalse,n);default:return!0}}function p(t,n,o){var r=t.getChildren(o);if(r.length){var i=e.lastOrUndefined(r);if(i.kind===n)return!0;if(25===i.kind&&1!==r.length)return r[r.length-2].kind===n}return!1}function d(e,t,n){return!!g(e,t,n)}function g(t,n,o){return e.forEach(t.getChildren(o),(function(e){return e.kind===n&&e}))}function h(t){var n=e.forEach(t.parent.getChildren(),(function(n){if(e.isSyntaxList(n)&&n.pos<=t.pos&&n.end>=t.end)return n}));return e.Debug.assert(!n||e.contains(n.getChildren(),t)),n}function f(e,t,n,o){return m(e,t,!1,o,!1,n)}function _(e,t,n,o){return m(e,t,!0,void 0,o,n)}function m(t,n,o,r,i,s){var a=t;e:for(;;){if(e.isToken(a))return a;for(var l=0,c=a.getChildren();l<c.length;l++){var u=c[l];if(s||!e.isJSDocNode(u)){if((o?u.getFullStart():u.getStart(t,s))>n)break;var p=u.getEnd();if(n<p||n===p&&(1===u.kind||i)){a=u;continue e}if(r&&p===n){var d=y(n,t,u);if(d&&r(d))return d}}}return a}}function y(t,n,o,r){var i=function i(l){if(e.isToken(l))return l;for(var c=l.getChildren(),u=0;u<c.length;u++){var p=c[u];if(t<p.end)return p.getStart(n,r)>=t||!v(p)||k(p)?(d=a(c,u))&&s(d):i(p)}if(e.Debug.assert(void 0!==o||265===l.kind||e.isJSDocCommentContainingNode(l)),c.length){var d;return(d=a(c,c.length))&&s(d)}}(o||n);return e.Debug.assert(!(i&&k(i))),i;function s(t){if(e.isToken(t))return t;var n=t.getChildren(),o=a(n,n.length);return o&&s(o)}function a(t,n){for(var o=n-1;o>=0;o--){if(k(t[o]))e.Debug.assert(o>0,"`JsxText` tokens should not be the first child of `JsxElement | JsxSelfClosingElement`");else if(v(t[o]))return t[o]}}}function k(t){return e.isJsxText(t)&&t.containsOnlyWhiteSpaces}function b(t,n,o,r){return!!e.formatting.getRangeOfEnclosingComment(t,n,!1,void 0,o,r)}function v(e){return 0!==e.getWidth()}function T(t){return 71===t||e.isKeyword(t)}e.getLineStartPositionForPosition=function(t,n){return e.getLineStarts(n)[n.getLineAndCharacterOfPosition(t).line]},e.rangeContainsRange=function(e,t){return l(e.pos,e.end,t)},e.startEndContainsRange=l,e.rangeContainsStartEnd=function(e,t,n){return e.pos<=t&&e.end>=n},e.rangeOverlapsWithStartEnd=function(e,t,n){return c(e.pos,e.end,t,n)},e.startEndOverlapsWithStartEnd=c,e.positionBelongsToNode=function(e,t,n){return t<e.end||!u(e,n)},e.isCompletedNode=u,e.findListItemInfo=function(t){var n=h(t);if(n){var o=n.getChildren();return{listItemIndex:e.indexOfNode(o,t),list:n}}},e.hasChildOfKind=d,e.findChildOfKind=g,e.findContainingList=h,e.getTouchingWord=function(e,t,n){return f(e,t,n,(function(e){return T(e.kind)}))},e.getTouchingPropertyName=function(e,t,n){return f(e,t,n,(function(e){return 9===(t=e.kind)||8===t||T(t);var t}))},e.getTouchingToken=f,e.getTokenAtPosition=_,e.findTokenOnLeftOfPosition=function(t,n){var o=_(t,n,!1);return e.isToken(o)&&n>o.getStart(t)&&n<o.getEnd()?o:y(n,t)},e.findNextToken=function(t,n){return function n(o){if(e.isToken(o)&&o.pos===t.end)return o;for(var r=o.getChildren(),i=0,s=r;i<s.length;i++){var a=s[i];if((a.pos<=t.pos&&a.end>t.end||a.pos===t.end)&&v(a))return n(a)}return}(n)},e.findPrecedingToken=y,e.isInString=function(t,n){var o=y(n,t);if(o&&e.isStringTextContainingNode(o)){var r=o.getStart(),i=o.getEnd();if(r<n&&n<i)return!0;if(n===i)return!!o.isUnterminated}return!1},e.isInsideJsxElementOrAttribute=function(e,t){var n=_(e,t,!1);return!!n&&(10===n.kind||(27===n.kind&&10===n.parent.kind||(27===n.kind&&256===n.parent.kind||(!(!n||18!==n.kind||256!==n.parent.kind)||27===n.kind&&252===n.parent.kind))))},e.isWhiteSpaceOnlyJsxText=k,e.isInTemplateString=function(t,n){var o=_(t,n,!1);return e.isTemplateLiteralKind(o.kind)&&n>o.getStart(t)},e.isInComment=b,e.hasDocComment=function(t,n){var o=_(t,n,!1),r=e.getLeadingCommentRanges(t.text,o.pos);return e.forEach(r,(function(e){var n=t.text;return n.length>=e.pos+3&&"/"===n[e.pos]&&"*"===n[e.pos+1]&&"*"===n[e.pos+2]}))},e.getNodeModifiers=function(t){var n=e.getCombinedModifierFlags(t),o=[];return 8&n&&o.push("private"),16&n&&o.push("protected"),4&n&&o.push("public"),32&n&&o.push("static"),128&n&&o.push("abstract"),1&n&&o.push("export"),e.isInAmbientContext(t)&&o.push("declare"),o.length>0?o.join(","):""},e.getTypeArgumentOrTypeParameterList=function(t){return 159===t.kind||181===t.kind?t.typeArguments:e.isFunctionLike(t)||229===t.kind||230===t.kind?t.typeParameters:void 0},e.isWord=T,e.isComment=function(e){return 2===e||3===e},e.isStringOrRegularExpressionOrTemplateLiteral=function(t){return!(9!==t&&12!==t&&!e.isTemplateLiteralKind(t))},e.isPunctuation=function(e){return 17<=e&&e<=70},e.isInsideTemplateLiteral=function(t,n){return e.isTemplateLiteralKind(t.kind)&&t.getStart()<n&&n<t.getEnd()||!!t.isUnterminated&&n===t.getEnd()},e.isAccessibilityModifier=function(e){switch(e){case 114:case 112:case 113:return!0}return!1},e.cloneCompilerOptions=function(t){var n=e.clone(t);return e.setConfigFileInOptions(n,t&&t.configFile),n},e.isArrayLiteralOrObjectLiteralDestructuringPattern=function e(t){if(177===t.kind||178===t.kind){if(194===t.parent.kind&&t.parent.left===t&&58===t.parent.operatorToken.kind)return!0;if(216===t.parent.kind&&t.parent.initializer===t)return!0;if(e(261===t.parent.kind?t.parent.parent:t.parent))return!0}return!1},e.hasTrailingDirectorySeparator=function(e){var t=e.charAt(e.length-1);return"/"===t||"\\"===t},e.isInReferenceComment=function(e,t){return b(e,t,void 0,(function(t){var n=e.text.substring(t.pos,t.end);return a.test(n)}))},e.isInNonReferenceComment=function(e,t){return b(e,t,void 0,(function(t){var n=e.text.substring(t.pos,t.end);return!a.test(n)}))},e.createTextSpanFromNode=function(t,n){return e.createTextSpanFromBounds(t.getStart(n),t.getEnd())},e.createTextSpanFromRange=function(t){return e.createTextSpanFromBounds(t.pos,t.end)},e.isTypeKeyword=function(e){switch(e){case 119:case 122:case 130:case 133:case 134:case 136:case 137:case 105:return!0;default:return!1}},e.isExternalModuleSymbol=function(t){return e.Debug.assert(!!(1536&t.flags)),34===t.name.charCodeAt(0)},e.nodeSeenTracker=function(){var t=[];return function(n){var o=e.getNodeId(n);return!t[o]&&(t[o]=!0)}}}(ts||(ts={})),function(e){function t(e){return e.declarations&&e.declarations.length>0&&146===e.declarations[0].kind}e.isFirstDeclarationOfSymbolParameter=t;var n=function(){var t,n,i;return c(),{displayParts:function(){return t},writeKeyword:function(t){return l(t,e.SymbolDisplayPartKind.keyword)},writeOperator:function(t){return l(t,e.SymbolDisplayPartKind.operator)},writePunctuation:function(t){return l(t,e.SymbolDisplayPartKind.punctuation)},writeSpace:function(t){return l(t,e.SymbolDisplayPartKind.space)},writeStringLiteral:function(t){return l(t,e.SymbolDisplayPartKind.stringLiteral)},writeParameter:function(t){return l(t,e.SymbolDisplayPartKind.parameterName)},writeProperty:function(t){return l(t,e.SymbolDisplayPartKind.propertyName)},writeSymbol:function(e,n){s(),t.push(o(e,n))},writeLine:function(){t.push(a()),n=!0},increaseIndent:function(){i++},decreaseIndent:function(){i--},clear:c,trackSymbol:e.noop,reportInaccessibleThisError:e.noop,reportPrivateInBaseOfClassExpression:e.noop};function s(){if(n){var o=e.getIndentString(i);o&&t.push(r(o,e.SymbolDisplayPartKind.space)),n=!1}}function l(e,n){s(),t.push(r(e,n))}function c(){t=[],n=!0,i=0}}();function o(n,o){return r(n,function(n){var o=n.flags;if(3&o)return t(n)?e.SymbolDisplayPartKind.parameterName:e.SymbolDisplayPartKind.localName;if(4&o)return e.SymbolDisplayPartKind.propertyName;if(32768&o)return e.SymbolDisplayPartKind.propertyName;if(65536&o)return e.SymbolDisplayPartKind.propertyName;if(8&o)return e.SymbolDisplayPartKind.enumMemberName;if(16&o)return e.SymbolDisplayPartKind.functionName;if(32&o)return e.SymbolDisplayPartKind.className;if(64&o)return e.SymbolDisplayPartKind.interfaceName;if(384&o)return e.SymbolDisplayPartKind.enumName;if(1536&o)return e.SymbolDisplayPartKind.moduleName;if(8192&o)return e.SymbolDisplayPartKind.methodName;if(262144&o)return e.SymbolDisplayPartKind.typeParameterName;if(524288&o)return e.SymbolDisplayPartKind.aliasName;if(2097152&o)return e.SymbolDisplayPartKind.aliasName;return e.SymbolDisplayPartKind.text}(o))}function r(t,n){return{text:t,kind:e.SymbolDisplayPartKind[n]}}function i(t){return r(e.tokenToString(t),e.SymbolDisplayPartKind.keyword)}function s(t){return r(t,e.SymbolDisplayPartKind.text)}e.symbolPart=o,e.displayPart=r,e.spacePart=function(){return r(" ",e.SymbolDisplayPartKind.space)},e.keywordPart=i,e.punctuationPart=function(t){return r(e.tokenToString(t),e.SymbolDisplayPartKind.punctuation)},e.operatorPart=function(t){return r(e.tokenToString(t),e.SymbolDisplayPartKind.operator)},e.textOrKeywordPart=function(t){var n=e.stringToToken(t);return void 0===n?s(t):i(n)},e.textPart=s;function a(){return r("\n",e.SymbolDisplayPartKind.lineBreak)}function l(e){try{return e(n),n.displayParts()}finally{n.clear()}}function c(e){return e.parent&&(242===e.parent.kind||246===e.parent.kind)&&e.parent.propertyName===e}function u(t,n){return e.ensureScriptKind(t,n&&n.getScriptKind&&n.getScriptKind(t))}e.getNewLineOrDefaultFromHost=function(e){return e.getNewLine?e.getNewLine():"\r\n"},e.lineBreakPart=a,e.mapToDisplayParts=l,e.typeToDisplayParts=function(e,t,n,o){return l((function(r){e.getSymbolDisplayBuilder().buildTypeDisplay(t,r,n,o)}))},e.symbolToDisplayParts=function(e,t,n,o,r){return l((function(i){e.getSymbolDisplayBuilder().buildSymbolDisplay(t,i,n,o,r)}))},e.signatureToDisplayParts=function(e,t,n,o){return o|=65536,l((function(r){e.getSymbolDisplayBuilder().buildSignatureDisplay(t,r,n,o)}))},e.getDeclaredName=function(t,n,o){if(c(o)||e.isStringOrNumericLiteral(o)&&144===o.parent.kind)return e.getTextOfIdentifierOrLiteral(o);var r=e.getLocalSymbolForExportDefault(n);return t.symbolToString(r||n)},e.isImportOrExportSpecifierName=c,e.stripQuotes=function(t){var n=t.length;return n>=2&&t.charCodeAt(0)===t.charCodeAt(n-1)&&e.isSingleOrDoubleQuote(t.charCodeAt(0))?t.substring(1,n-1):t},e.scriptKindIs=function(t,n){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];var i=u(t,n);return e.forEach(o,(function(e){return e===i}))},e.getScriptKind=u,e.getUniqueSymbolId=function(t,n){return e.getSymbolId(e.skipAlias(t,n))},e.getFirstNonSpaceCharacterPosition=function(t,n){for(;e.isWhiteSpaceLike(t.charCodeAt(n));)n+=1;return n},e.getOpenBrace=function(e,t){return e.body.getFirstToken(t)},e.getOpenBraceOfClassLike=function(t,n){return e.getTokenAtPosition(n,t.members.pos-1,!1)},e.getSourceFileImportLocation=function(t){var n=t.text,o=e.getLeadingCommentRanges(n,0);if(!o)return 0;var r=0;o.length&&3===o[0].kind&&e.isPinnedComment(n,o[0])&&(r=o[0].end+1,o=o.slice(1));for(var i=0,s=o;i<s.length;i++){var a=s[i];if(2!==a.kind||!e.isRecognizedTripleSlashComment(t.text,a.pos,a.end))break;r=a.end+1}return r},e.getSynthesizedDeepClone=function t(n){if(void 0!==n){var o=e.visitEachChild(n,t,e.nullTransformationContext);if(o===n){var r=e.getSynthesizedClone(n);return e.isStringLiteral(r)?r.textSourceNode=n:e.isNumericLiteral(r)&&(r.numericLiteralFlags=n.numericLiteralFlags),r.pos=n.pos,r.end=n.end,r}return o.parent=void 0,o}},e.suppressLeadingAndTrailingTrivia=function(t){e.Debug.assert(void 0!==t),function t(n){e.addEmitFlags(n,512);var o=e.forEachChild(n,(function(e){return e}));o&&t(o)}(t),function t(n){e.addEmitFlags(n,1024);var o=void 0;e.forEachChild(n,(function(e){o=e}),(function(t){t.length&&(o=e.last(t))})),o&&t(o)}(t)}}(ts||(ts={})),function(e){function t(e,t){switch(t){case 233:case 229:case 230:case 228:e.throwIfCancellationRequested()}}function n(n,o,r,i,s){var a=[];return function r(l){if(l&&e.textSpanIntersectsWith(s,l.getFullStart(),l.getFullWidth())){var c=l.kind;if(t(o,c),71===c&&!e.nodeIsMissing(l)){var u=l;if(i.has(u.escapedText)){var p=n.getSymbolAtLocation(l);if(p){var d=function(t,n){var o=t.getFlags();if(0==(788448&o))return;if(32&o)return 11;if(384&o)return 12;if(524288&o)return 16;if(2&n){if(64&o)return 13;if(262144&o)return 15}else if(1536&o&&(4&n||1&n&&r(t)))return 14;return;function r(t){return e.forEach(t.declarations,(function(t){return 233===t.kind&&1===e.getModuleInstanceState(t)}))}}(p,e.getMeaningFromLocation(l));d&&function(e,t,n){a.push(e),a.push(t),a.push(n)}(l.getStart(),l.getWidth(),d)}}}e.forEachChild(l,r)}}(r),{spans:a,endOfLineState:0}}function o(e){switch(e){case 1:return"comment";case 2:return"identifier";case 3:return"keyword";case 4:return"number";case 5:return"operator";case 6:return"string";case 8:return"whitespace";case 9:return"text";case 10:return"punctuation";case 11:return"class name";case 12:return"enum name";case 13:return"interface name";case 14:return"module name";case 15:return"type parameter name";case 16:return"type alias name";case 17:return"parameter name";case 18:return"doc comment tag name";case 19:return"jsx open tag name";case 20:return"jsx close tag name";case 21:return"jsx self closing tag name";case 22:return"jsx attribute";case 23:return"jsx text";case 24:return"jsx attribute string literal value"}}function r(t){e.Debug.assert(t.spans.length%3==0);for(var n=t.spans,r=[],i=0;i<n.length;i+=3)r.push({textSpan:e.createTextSpan(n[i],n[i+1]),classificationType:o(n[i+2])});return r}function i(n,o,r){var i=r.start,s=r.length,a=e.createScanner(5,!1,o.languageVariant,o.text),l=e.createScanner(5,!1,o.languageVariant,o.text),c=[];return y(o),{spans:c,endOfLineState:0};function u(e,t,n){c.push(e),c.push(t),c.push(n)}function p(t,n,r,i){if(3===n){var s=e.parseIsolatedJSDocComment(o.text,r,i);if(s&&s.jsDoc)return s.jsDoc.parent=t,void function(e){var t=e.pos;if(e.tags)for(var n=0,o=e.tags;n<o.length;n++){var r=o[n];switch(r.pos!==t&&d(t,r.pos-t),u(r.atToken.pos,r.atToken.end-r.atToken.pos,10),u(r.tagName.pos,r.tagName.end-r.tagName.pos,18),t=r.tagName.end,r.kind){case 279:i(r);break;case 282:g(r);break;case 281:case 280:y(r.typeExpression)}t=r.end}t!==e.end&&d(t,e.end-t);return;function i(e){e.isNameFirst&&(d(t,e.name.pos-t),u(e.name.pos,e.name.end-e.name.pos,17),t=e.name.end),e.typeExpression&&(d(t,e.typeExpression.pos-t),y(e.typeExpression),t=e.typeExpression.end),e.isNameFirst||(d(t,e.name.pos-t),u(e.name.pos,e.name.end-e.name.pos,17),t=e.name.end)}}(s.jsDoc)}d(r,i)}function d(e,t){u(e,t,1)}function g(e){for(var t=0,n=e.getChildren();t<n.length;t++){y(n[t])}}function h(t,n,o){var r;for(r=n;r<o&&!e.isLineBreak(t.charCodeAt(r));r++);for(u(n,r-n,1),l.setTextPos(r);l.getTextPos()<o;)f()}function f(){var e=l.getTextPos(),t=l.scan(),n=l.getTextPos(),o=m(t);o&&u(e,n-e,o)}function _(t){if(e.isJSDoc(t))return!0;if(e.nodeIsMissing(t))return!0;var n=function(e){switch(e.parent&&e.parent.kind){case 251:if(e.parent.tagName===e)return 19;break;case 252:if(e.parent.tagName===e)return 20;break;case 250:if(e.parent.tagName===e)return 21;break;case 253:if(e.parent.name===e)return 22}return}(t);if(!e.isToken(t)&&10!==t.kind&&void 0===n)return!1;var r=10===t.kind?t.pos:function(t){for(a.setTextPos(t.pos);;){var n=a.getTextPos();if(!e.couldStartTrivia(o.text,n))return n;var r=a.scan(),i=a.getTextPos(),s=i-n;if(!e.isTrivia(r))return n;if(4!==r&&5!==r)if(e.isComment(r))p(t,r,n,s),a.setTextPos(i);else if(7===r){var l=o.text,c=l.charCodeAt(n);if(60===c||62===c){u(n,s,1);continue}e.Debug.assert(124===c||61===c),h(l,n,i)}}}(t),i=t.end-r;if(e.Debug.assert(i>=0),i>0){var s=n||m(t.kind,t);s&&u(r,i,s)}return!0}function m(t,n){if(e.isKeyword(t))return 3;if((27===t||29===t)&&n&&e.getTypeArgumentOrTypeParameterList(n.parent))return 10;if(e.isPunctuation(t)){if(n){if(58===t&&(226===n.parent.kind||149===n.parent.kind||146===n.parent.kind||253===n.parent.kind))return 5;if(194===n.parent.kind||192===n.parent.kind||193===n.parent.kind||195===n.parent.kind)return 5}return 10}if(8===t)return 4;if(9===t)return 253===n.parent.kind?24:6;if(12===t)return 6;if(e.isTemplateLiteralKind(t))return 6;if(10===t)return 23;if(71===t){if(n)switch(n.parent.kind){case 229:return n.parent.name===n?11:void 0;case 145:return n.parent.name===n?15:void 0;case 230:return n.parent.name===n?13:void 0;case 232:return n.parent.name===n?12:void 0;case 233:return n.parent.name===n?14:void 0;case 146:return n.parent.name===n?e.isThisIdentifier(n)?3:17:void 0}return 2}}function y(r){if(r&&e.decodedTextSpanIntersectsWith(i,s,r.pos,r.getFullWidth())){t(n,r.kind);for(var a=0,l=r.getChildren(o);a<l.length;a++){var c=l[a];_(c)||y(c)}}}}e.createClassifier=function(){var t=e.createScanner(5,!1),n=[];n[71]=!0,n[9]=!0,n[8]=!0,n[12]=!0,n[99]=!0,n[43]=!0,n[44]=!0,n[20]=!0,n[22]=!0,n[18]=!0,n[101]=!0,n[86]=!0;var o=[];function r(t){switch(t){case 1:return e.TokenClass.Comment;case 3:return e.TokenClass.Keyword;case 4:return e.TokenClass.NumberLiteral;case 5:return e.TokenClass.Operator;case 6:return e.TokenClass.StringLiteral;case 8:return e.TokenClass.Whitespace;case 10:return e.TokenClass.Punctuation;case 2:case 11:case 12:case 13:case 14:case 15:case 16:case 9:case 17:default:return e.TokenClass.Identifier}}function i(r,i,a){for(var l=0,c=0,u=0;o.length>0;)o.pop();switch(i){case 3:r='"\\\n'+r,l=3;break;case 2:r="'\\\n"+r,l=3;break;case 1:r="/*\n"+r,l=3;break;case 4:r="`\n"+r,l=2;break;case 5:r="}\n"+r,l=2;case 6:o.push(14)}t.setText(r);var p,d,g={endOfLineState:0,spans:[]},h=0;do{if(c=t.scan(),!e.isTrivia(c)){if(41!==c&&63!==c||n[u]){if(23===u&&s(c))c=71;else if(s(u)&&s(c)&&(p=u,d=c,e.isAccessibilityModifier(p)&&125!==d&&135!==d&&123!==d&&115!==d))c=71;else if(71===u&&27===c)h++;else if(29===c&&h>0)h--;else if(119===c||136===c||133===c||122===c||137===c)h>0&&!a&&(c=71);else if(14===c)o.push(c);else if(17===c)o.length>0&&o.push(c);else if(18===c&&o.length>0){var f=e.lastOrUndefined(o);14===f?16===(c=t.reScanTemplateToken())?o.pop():e.Debug.assertEqual(c,15,"Should have been a template middle."):(e.Debug.assertEqual(f,17,"Should have been an open brace"),o.pop())}}else 12===t.reScanSlashToken()&&(c=12);u=c}_()}while(1!==c);return g;function _(){var n=t.getTokenPos(),i=t.getTextPos();if(function(e,t,n){if(8===n)return;0===e&&l>0&&(e+=l);var o=(t-=l)-(e-=l);o>0&&(g.spans.push(e),g.spans.push(o),g.spans.push(n))}(n,i,function(t){if(s(t))return 3;if(function(e){switch(e){case 39:case 41:case 42:case 37:case 38:case 45:case 46:case 47:case 27:case 29:case 30:case 31:case 93:case 92:case 118:case 32:case 33:case 34:case 35:case 48:case 50:case 49:case 53:case 54:case 69:case 68:case 70:case 65:case 66:case 67:case 59:case 60:case 61:case 63:case 64:case 58:case 26:return!0;default:return!1}}(t)||function(e){switch(e){case 37:case 38:case 52:case 51:case 43:case 44:return!0;default:return!1}}(t))return 5;if(t>=17&&t<=70)return 10;switch(t){case 8:return 4;case 9:return 6;case 12:return 7;case 7:case 3:case 2:return 1;case 5:case 4:return 8;case 71:default:return e.isTemplateLiteralKind(t)?6:2}}(c)),i>=r.length)if(9===c){var a=t.getTokenText();if(t.isUnterminated()){for(var u=a.length-1,p=0;92===a.charCodeAt(u-p);)p++;if(1&p){var d=a.charCodeAt(0);g.endOfLineState=34===d?3:2}}}else 3===c?t.isUnterminated()&&(g.endOfLineState=1):e.isTemplateLiteralKind(c)?t.isUnterminated()&&(16===c?g.endOfLineState=5:13===c?g.endOfLineState=4:e.Debug.fail("Only 'NoSubstitutionTemplateLiteral's and 'TemplateTail's can be unterminated; got SyntaxKind #"+c)):o.length>0&&14===e.lastOrUndefined(o)&&(g.endOfLineState=6)}}function s(e){return e>=72&&e<=142}return{getClassificationsForLine:function(t,n,o){return function(t,n){for(var o=[],i=t.spans,s=0,a=0;a<i.length;a+=3){var l=i[a],c=i[a+1],u=i[a+2];if(s>=0){var p=l-s;p>0&&o.push({length:p,classification:e.TokenClass.Whitespace})}o.push({length:c,classification:r(u)}),s=l+c}var d=n.length-s;return d>0&&o.push({length:d,classification:e.TokenClass.Whitespace}),{entries:o,finalLexState:t.endOfLineState}}(i(t,n,o),t)},getEncodedLexicalClassifications:i}},e.getSemanticClassifications=function(e,t,o,i,s){return r(n(e,t,o,i,s))},e.getEncodedSemanticClassifications=n,e.getSyntacticClassifications=function(e,t,n){return r(i(e,t,n))},e.getEncodedSyntacticClassifications=i}(ts||(ts={})),function(e){!function(t){!function(t){function n(t,n,o,r,i,s,l,u){void 0===u&&(u=[]),void 0===t&&(t=""),t=e.normalizeSlashes(t),""===(t=e.getDirectoryPath(t))&&(t="."+e.directorySeparator),t=e.ensureTrailingDirectorySeparator(t);var p=c(e.isRootedDiskPath(t)?t:e.combinePaths(n,t)),h=e.getDirectoryPath(p),_=!(s.useCaseSensitiveFileNames&&s.useCaseSensitiveFileNames());if(f(s,h)){var m=g(s,h,o,void 0,["./*"]);if(m){for(var y=e.createMap(),k=0,b=m;k<b.length;k++){var v=b[k];if(v=e.normalizePath(v),!l||0!==e.comparePaths(v,l,n,_)){var T=r?e.getBaseFileName(v):e.removeFileExtension(e.getBaseFileName(v));y.get(T)||y.set(T,!0)}}e.forEachKey(y,(function(e){u.push(a(e,"script",i))}))}var E=d(s,h);if(E)for(var S=0,C=E;S<C.length;S++){var x=C[S],B=e.getBaseFileName(e.normalizePath(x));u.push(a(B,"directory",i))}}return u}function o(t,n,o,r,i){if(i.readDirectory){var s=e.hasZeroOrOneAsteriskCharacter(o)?e.tryParsePattern(o):void 0;if(s){var a=c(s.prefix),l=e.getDirectoryPath(a),u=e.getBaseFileName(a),p=e.stringContains(t,e.directorySeparator),d=p?e.combinePaths(l,u+e.getDirectoryPath(t)):l,h=e.normalizePath(s.suffix),f=e.combinePaths(n,d),_=p?f:e.ensureTrailingDirectorySeparator(f)+u,m=g(i,f,r,void 0,[h?"**/*":"./*"]);if(m){for(var y=[],k=0,b=m;k<b.length;k++){var v=b[k],T=e.normalizePath(v);if(e.endsWith(T,h)&&e.startsWith(T,_)){var E=_.length,S=T.length-E-h.length;y.push(e.removeFileExtension(T.substr(E,S)))}}return y}}}}function r(t,n,o,r,l){if(void 0===l&&(l=[]),n.types)for(var c=0,u=n.types;c<u.length;c++){var p=u[c];l.push(a(p,"external module name",r))}else if(t.getDirectories){var d=void 0;try{d=e.getEffectiveTypeRoots(n,t)}catch(e){}if(d)for(var g=0,h=d;g<h.length;g++){i(t,h[g],r,l)}}if(t.getDirectories)for(var f=0,_=s(o,t);f<_.length;f++){var m=_[f];i(t,e.combinePaths(e.getDirectoryPath(m),"node_modules/@types"),r,l)}return l}function i(t,n,o,r){if(t.getDirectories&&f(t,n)){var i=d(t,n);if(i)for(var s=0,l=i;s<l.length;s++){var c=l[s];c=e.normalizePath(c),r.push(a(e.getBaseFileName(c),"external module name",o))}}}function s(t,n){for(var o,r=[];o=e.findConfigFile(t,(function(e){return h(n,e)}),"package.json");){r.push(o),t=e.getDirectoryPath(o);var i=e.getDirectoryPath(t);if(t===i)break;t=i}return r}function a(e,t,n){return{name:e,kind:t,kindModifiers:"",sortText:e,replacementSpan:n}}function l(t,n){var o=t.lastIndexOf(e.directorySeparator),r=-1!==o?o+1:0;return{start:n+r,length:t.length-r}}function c(t){return e.hasTrailingDirectorySeparator(t)?e.ensureTrailingDirectorySeparator(e.normalizePath(t)):e.normalizePath(t)}t.getStringLiteralCompletionEntriesFromModuleNames=function(t,i,c,u){var d,h=e.normalizeSlashes(t.text),f=t.getSourceFile().path,m=e.getDirectoryPath(f),y=l(t.text,t.getStart()+1);if(function(e){if(e&&e.length>=2&&46===e.charCodeAt(0)){var t=e.length>=3&&46===e.charCodeAt(1)?2:1,n=e.charCodeAt(t);return 47===n||92===n}return!1}(h)||e.isRootedDiskPath(h)){var k=e.getSupportedExtensions(i);d=i.rootDirs?function(t,o,r,i,s,a,l,c,u){for(var p=l.project||c.getCurrentDirectory(),d=!(c.useCaseSensitiveFileNames&&c.useCaseSensitiveFileNames()),g=function(t,n,o,r){t=e.map(t,(function(t){return e.normalizePath(e.isRootedDiskPath(t)?t:e.combinePaths(n,t))}));var i=e.forEach(t,(function(t){return e.containsPath(t,o,n,r)?o.substr(t.length):void 0}));return e.deduplicate(e.map(t,(function(t){return e.combinePaths(t,i)})))}(t,p,r,d),h=[],f=0,_=g;f<_.length;f++){n(o,_[f],i,s,a,c,u,h)}return h}(i.rootDirs,h,m,k,!1,y,i,c,f):n(h,m,k,!1,y,c,f)}else d=function(t,i,l,c,u,d){var h,f=c.baseUrl,m=c.paths;if(f){var y=e.getSupportedExtensions(c),k=c.project||u.getCurrentDirectory(),b=e.isRootedDiskPath(f)?f:e.combinePaths(k,f);if(h=n(t,e.normalizePath(b),y,!1,l,u),m)for(var v in m)if(m.hasOwnProperty(v))if("*"===v){if(m[v])for(var T=0,E=m[v];T<E.length;T++)for(var S=0,C=o(t,f,E[T],y,u);S<C.length;S++){var x=C[S];h.push(a(x,"external module name",l))}}else if(e.startsWith(v,t)){m[v]&&1===m[v].length&&m[v][0]&&h.push(a(v,"external module name",l))}}else h=[];r(u,c,i,l,h);for(var B=0,A=function(t,n,o,r,i){var a=e.stringContains(t,e.directorySeparator),l=a?t.substr(0,t.lastIndexOf(e.directorySeparator)):void 0,c=e.map(r.getAmbientModules(),(function(t){return e.stripQuotes(t.name)})),u=e.filter(c,(function(n){return e.startsWith(n,t)}));if(a){var d=e.ensureTrailingDirectorySeparator(l);u=e.map(u,(function(t){return e.removePrefix(t,d)}))}if(!o.moduleResolution||o.moduleResolution===e.ModuleResolutionKind.NodeJs)for(var h=0,f=function(t,n){var o=[];if(t.readFile&&t.fileExists)for(var r=0,i=s(n,t);r<i.length;r++){var a=i[r],l=k(a);if(!l)return;for(var c=e.combinePaths(e.getDirectoryPath(a),"node_modules"),u=[],d=0,g=p;d<g.length;d++){b(l[g[d]],u)}for(var h=0,f=u;h<f.length;h++){var m=f[h],y=e.combinePaths(c,m);o.push({moduleName:m,moduleDir:y})}}return o;function k(e){try{var n=function(e,t){return _(e,e.readFile,t)}(t,e);return n?JSON.parse(n):void 0}catch(e){return}}function b(t,n){if(t)for(var o in t)t.hasOwnProperty(o)&&!e.startsWith(o,"@types/")&&n.push(o)}}(i,n);h<f.length;h++){var m=f[h];if(a){if(e.startsWith(m.moduleName,l)){var y=g(i,m.moduleDir,e.supportedTypeScriptExtensions,void 0,["./*"]);if(y)for(var k=0,b=y;k<b.length;k++){var v=b[k];v=e.normalizePath(v);var T=e.removeFileExtension(e.getBaseFileName(v));u.push(T)}}}else u.push(m.moduleName)}return e.deduplicate(u)}(t,i,c,d,u);B<A.length;B++){var I=A[B];h.push(a(I,"external module name",l))}return h}(h,m,y,i,c,u);return{isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!0,entries:d}},t.getTripleSlashReferenceCompletion=function(t,o,i,s){var a=e.getTokenAtPosition(t,o,!1);if(a){var c=e.getLeadingCommentRanges(t.text,a.pos);if(c&&c.length){var p=e.forEach(c,(function(e){return o>=e.pos&&o<=e.end&&e}));if(p){var d={isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!0,entries:[]},g=t.text.substr(p.pos,o-p.pos),h=u.exec(g);if(h){var f=h[1],_=h[2],m=h[3],y=e.getDirectoryPath(t.path);if("path"===_){var k=l(m,p.pos+f.length);d.entries=n(m,y,e.getSupportedExtensions(i),!0,k,s,t.path)}else{var b={start:p.pos+f.length,length:h[0].length-f.length};d.entries=r(s,i,y,b)}}return d}}}};var u=/^(\/\/\/\s*<reference\s+(path|types)\s*=\s*(?:'|"))([^\3"]*)$/,p=["dependencies","devDependencies","peerDependencies","optionalDependencies"];function d(e,t){return _(e,e.getDirectories,t)}function g(e,t,n,o,r){return _(e,e.readDirectory,t,n,o,r)}function h(e,t){return _(e,e.fileExists,t)}function f(t,n){try{return e.directoryProbablyExists(n,t)}catch(e){}}function _(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];try{return t&&t.apply(e,n)}catch(e){}}}(t.PathCompletions||(t.PathCompletions={}))}(e.Completions||(e.Completions={}))}(ts||(ts={})),function(e){!function(t){var n;function o(t,n,o,i,s,a,l){var c=u(t,s,o,a);if(c)return{name:c,kind:e.SymbolDisplay.getSymbolKind(i,t,n),kindModifiers:e.SymbolDisplay.getSymbolModifiers(t),sortText:"0",source:r(l),hasAction:void 0!==l||void 0}}function r(t){return t&&e.stripQuotes(t.moduleSymbol.name)}function i(t,n,r,i,s,a,l,c,u){var p=e.timestamp(),d=e.createMap();if(t)for(var g=0,h=t;g<h.length;g++){var f=h[g],_=u?u[e.getSymbolId(f)]:void 0,m=o(f,r,i,s,a,c,_);if(m){var y=m.name;d.has(y)||(_||void 0===f.parent&&!e.some(f.declarations,(function(e){return e.getSourceFile()===r.getSourceFile()}))||d.set(y,!0),n.push(m))}}return l("getCompletionsAtPosition: getCompletionEntriesFromSymbols: "+(e.timestamp()-p)),d}function s(e,t){if(e){var n=[];if(a(e,n,t),n.length)return{isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!1,entries:n}}}function a(t,n,o,r){if(void 0===r&&(r=e.createMap()),t&&16384&t.flags&&(t=o.getBaseConstraintOfType(t)),t)if(65536&t.flags)for(var i=0,s=t.types;i<s.length;i++){a(s[i],n,o,r)}else if(32&t.flags&&!(256&t.flags)){var l=t.value;r.has(l)||(r.set(l,!0),n.push({name:l,kindModifiers:"",kind:"var",sortText:"0"}))}}function l(t,n,o,i,s,a,l){var p=a.name,d=a.source,g=c(t,n,i,s,l);if(g){var h=g.symbols,f=g.location,_=g.allowStringLiteral,m=g.symbolToOriginInfoMap,y=e.find(h,(function(t){return u(t,o.target,!1,_)===p&&r(m[e.getSymbolId(t)])===d}));return y&&{symbol:y,location:f,symbolToOriginInfoMap:m}}}function c(t,n,o,r,i){var s,a=e.isSourceFileJavaScript(o),l=e.timestamp(),c=e.getTokenAtPosition(o,r,!1);n("getCompletionData: Get current token: "+(e.timestamp()-l)),l=e.timestamp();var u=e.isInComment(o,r,c);n("getCompletionData: Is inside comment: "+(e.timestamp()-l));var p=!1;if(u){if(e.hasDocComment(o,r))if(64===o.text.charCodeAt(r-1))s={kind:"JsDocTagName"};else{var d=e.getLineStartPositionForPosition(r,o);o.text.substring(d,r).match(/[^\*|\s|(/\*\*)]/)||(s={kind:"JsDocTag"})}var g=function(t,n){var o=function(t){if(!e.isToken(t))return t;switch(t.kind){case 104:case 110:case 76:return t.parent.parent;default:return t.parent}}(t).jsDoc;if(!o)return;for(var r=0,i=o;r<i.length;r++){var s=i[r],a=s.pos,l=s.end,c=s.tags;if(!(!c||n<a||n>l))for(var u=c.length-1;u>=0;u--){var p=c[u];if(n>=p.pos)return p}}}(c,r);if(g&&(g.tagName.pos<=r&&r<=g.tagName.end&&(s={kind:"JsDocTagName"}),function(e){switch(e.kind){case 279:case 284:case 280:case 281:case 283:return!0}}(g)&&g.typeExpression&&267===g.typeExpression.kind&&((c=e.getTokenAtPosition(o,r,!0))&&(e.isDeclarationName(c)||284===c.parent.kind&&c.parent.name===c)||(p=j(g.typeExpression))),e.isJSDocParameterTag(g)&&(e.nodeIsMissing(g.name)||g.name.pos<=r&&r<=g.name.end)&&(s={kind:"JsDocParameterName",tag:g})),s)return{symbols:void 0,isGlobalCompletion:!1,isMemberCompletion:!1,allowStringLiteral:!1,isNewIdentifierLocation:!1,location:void 0,isRightOfDot:!1,request:s,keywordFilters:0,symbolToOriginInfoMap:void 0};if(!p)return void n("Returning an empty list because completion was inside a regular comment or plain text part of a JsDoc comment.")}l=e.timestamp();var y=e.findPrecedingToken(r,o,void 0,p);n("getCompletionData: Get previous token 1: "+(e.timestamp()-l));var k=y;if(k&&r<=k.end&&e.isWord(k.kind)){var b=e.timestamp();k=e.findPrecedingToken(k.getFullStart(),o,void 0,p),n("getCompletionData: Get previous token 2: "+(e.timestamp()-b))}var v=c,T=!1,E=!1,S=!1,C=e.getTouchingPropertyName(o,r,p);if(k){if(function(t){var o=e.timestamp(),i=function(t){if(9===t.kind||12===t.kind||e.isTemplateLiteralKind(t.kind)){var n=t.getStart(),o=t.getEnd();if(n<r&&r<o)return!0;if(r===o)return!!t.isUnterminated||12===t.kind}return!1}(t)||function(t){var n=t.parent.kind;switch(t.kind){case 26:return 226===n||227===n||208===n||232===n||K(n)||230===n||175===n||231===n||e.isClassLike(t.parent)&&t.parent.typeParameters&&t.parent.typeParameters.end>=t.pos;case 23:return 175===n;case 56:return 176===n;case 21:return 175===n;case 19:return 260===n||K(n);case 17:return 232===n||230===n||163===n;case 25:return 148===n&&t.parent&&t.parent.parent&&(230===t.parent.parent.kind||163===t.parent.parent.kind);case 27:return 229===n||199===n||230===n||231===n||e.isFunctionLikeKind(n);case 115:return 149===n&&!e.isClassLike(t.parent.parent);case 24:return 146===n||t.parent&&t.parent.parent&&175===t.parent.parent.kind;case 114:case 112:case 113:return 146===n&&!e.isConstructorDeclaration(t.parent.parent);case 118:return 242===n||246===n||240===n;case 125:case 135:if(G(t))return!1;case 75:case 83:case 109:case 89:case 104:case 91:case 110:case 76:case 116:case 138:return!0}if(f(t.getText())&&G(t))return!1;if(W(t)&&(!e.isIdentifier(t)||m(t.getText())||j(t)))return!1;switch(t.getText()){case"abstract":case"async":case"class":case"const":case"declare":case"enum":case"function":case"interface":case"let":case"private":case"protected":case"public":case"static":case"var":case"yield":return!0}return e.isDeclarationName(t)&&!e.isJsxAttribute(t.parent)}(t)||function(e){if(8===e.kind){var t=e.getFullText();return"."===t.charAt(t.length-1)}return!1}(t)||function(e){if(10===e.kind)return!0;if(29===e.kind&&e.parent){if(251===e.parent.kind)return!0;if(252===e.parent.kind||250===e.parent.kind)return e.parent.parent&&249===e.parent.parent.kind}return!1}(t);return n("getCompletionsAtPosition: isCompletionListBlocker: "+(e.timestamp()-o)),i}(k))return void n("Returning an empty list because completion was requested in an invalid position.");var x=k.parent;if(23===k.kind)if(179===x.kind)v=k.parent.expression,T=!0;else{if(143!==x.kind)return;v=k.parent.left,T=!0}else if(1===o.languageVariant)switch(x&&179===x.kind&&(k=x,x=x.parent),x.kind){case 252:41===k.kind&&(S=!0,C=k);break;case 194:if(!(32768&x.left.flags))break;case 250:case 249:case 251:27===k.kind&&(E=!0,C=k)}}var B,A,I=e.timestamp(),D=!1,N=!1,w=0,R=[],O=[];if(T)!function(){D=!1,B=!0,A=!1;var n=p||e.isPartOfTypeNode(v.parent),o=e.isInRightSideOfInternalImportEqualsDeclaration(v);if(e.isEntityName(v)){var r=t.getSymbolAtLocation(v);if(r&&1920&(r=e.skipAlias(r,t)).flags){for(var i=t.getExportsOfModule(r),s=function(e){return t.isValidPropertyAccess(v.parent,e.name)},a=function(e){return H(e)},l=o?function(e){return a(e)||s(e)}:n?a:s,c=0,u=i;c<u.length;c++){var d=u[c];l(d)&&R.push(d)}return void(!n&&r.declarations.some((function(e){return 265!==e.kind&&233!==e.kind&&232!==e.kind}))&&F(t.getTypeOfSymbolAtLocation(r,v)))}}n||F(t.getTypeAtLocation(v))}();else if(E){var P=t.getJsxIntrinsicTagNames();R=U()?P.concat(R.filter((function(e){return!!(2204607&e.flags)}))):P,B=!0,A=!1}else if(S){var L=k.parent.parent.openingElement.tagName,M=t.getSymbolAtLocation(L);t.isUnknownSymbol(M)||(R=[M]),B=!0,A=!1}else if(!U())return;return n("getCompletionData: Semantic work: "+(e.timestamp()-I)),{symbols:R,isGlobalCompletion:D,isMemberCompletion:B,allowStringLiteral:N,isNewIdentifierLocation:A,location:C,isRightOfDot:T||E,request:s,keywordFilters:w,symbolToOriginInfoMap:O};function F(e){for(var n=0,o=e.getApparentProperties();n<o.length;n++){var r=o[n];t.isValidPropertyAccess(v.parent,r.name)&&R.push(r)}if(a&&65536&e.flags)for(var i=0,s=e.types;i<s.length;i++){F(s[i])}}function U(){var n,s,a,l;if(n=function(t){if(t)switch(t.kind){case 17:case 26:var n=t.parent;if(e.isObjectLiteralExpression(n)||e.isObjectBindingPattern(n))return n}return}(k))return function(n){var o,r;if(B=!0,N=!0,178===n.kind){if(A=!0,!(a=t.getContextualType(n)))return!1;o=function(e,t){if(!(65536&e.flags))return t.getPropertiesOfType(e);var n=e.types.filter((function(e){return!(8190&e.flags||t.isArrayLikeType(e))}));return t.getAllPossiblePropertiesOfTypes(n)}(a,t),r=n.properties}else{e.Debug.assert(174===n.kind),A=!1;var i=e.getRootDeclaration(n.parent);if(!e.isVariableLike(i))throw e.Debug.fail("Root declaration is not variable-like.");var s=i.initializer||i.type||216===i.parent.parent.kind;if(s||146!==i.kind||(e.isExpression(i.parent)?s=!!t.getContextualType(i.parent):151!==i.parent.kind&&154!==i.parent.kind||(s=e.isExpression(i.parent.parent)&&!!t.getContextualType(i.parent.parent))),s){var a;if(!(a=t.getTypeAtLocation(n)))return!1;o=t.getPropertiesOfType(a).filter((function(t){return!(24&e.getDeclarationModifierFlagsFromSymbol(t))})),r=n.elements}}o&&o.length>0&&(R=function(t,n){if(!n||0===n.length)return t;for(var o=e.createUnderscoreEscapedMap(),r=0,i=n;r<i.length;r++){var s=i[r];if((261===s.kind||262===s.kind||176===s.kind||151===s.kind||153===s.kind||154===s.kind)&&!j(s)){var a=void 0;if(176===s.kind&&s.propertyName)71===s.propertyName.kind&&(a=s.propertyName.escapedText);else{var l=e.getNameOfDeclaration(s);a=e.getEscapedTextOfIdentifierOrLiteral(l)}o.set(a,!0)}}return e.filter(t,(function(e){return!o.get(e.escapedName)}))}(o,r));return!0}(n);if(s=function(e){if(e)switch(e.kind){case 17:case 26:switch(e.parent.kind){case 241:case 245:return e.parent}}return}(k))return function(n){var o=241===n.kind?238:244,r=e.getAncestor(n,o).moduleSpecifier;if(!r)return!1;B=!0,A=!1;var i=t.getSymbolAtLocation(r);if(!i)return R=e.emptyArray,!0;var s=t.getExportsAndPropertiesOfModule(i);return R=function(t,n){for(var o=e.createUnderscoreEscapedMap(),r=0,i=n;r<i.length;r++){var s=i[r];if(!j(s)){var a=s.propertyName||s.name;o.set(a.escapedText,!0)}}if(0===o.size)return e.filter(t,(function(e){return"default"!==e.escapedName}));return e.filter(t,(function(e){return"default"!==e.escapedName&&!o.get(e.escapedName)}))}(s,n.elements),!0}(s);if(function(t){if(t)switch(t.kind){case 19:case 26:return e.isConstructorDeclaration(t.parent)&&t.parent;default:if(W(t))return t.parent.parent}return}(k))return B=!1,A=!0,w=2,!0;if(a=function(t){if(t)switch(t.kind){case 17:case 26:if(e.isClassLike(t.parent))return t.parent;break;case 25:case 18:if(e.isClassLike(C))return C;if(G(C)&&C.parent.name===C)return C.parent.parent;break;default:if(G(t)&&(h(t.kind)||f(t.getText())))return t.parent.parent}if(C&&286===C.kind&&e.isClassLike(C.parent))return C.parent;return}(k))return function(n){B=!0,A=!0,w=1;var o=e.getClassExtendsHeritageClauseElement(n),r=e.getClassImplementsHeritageClauseElements(n);if(o||r){var i=k.parent,s=e.isClassElement(i)&&e.getModifierFlags(i);if(71===k.kind&&!j(k))switch(k.getText()){case"private":s|=8;break;case"static":s|=32}if(!(8&s)){var a=void 0;o&&(a=t.getTypeAtLocation(o),32&s&&(a=t.getTypeOfSymbolAtLocation(a.symbol,n)));var l=32&s?e.emptyArray:e.flatMap(r||e.emptyArray,(function(e){return t.getPropertiesOfType(t.getTypeAtLocation(e))}));R=function(t,n,o,r){for(var i=e.createUnderscoreEscapedMap(),s=0,a=o;s<a.length;s++){var l=a[s];if((149===l.kind||151===l.kind||153===l.kind||154===l.kind)&&(!j(l)&&!e.hasModifier(l,8))){var c=e.hasModifier(l,32),u=!!(32&r);if(!(c&&!u||!c&&u)){var p=e.getPropertyNameForPropertyNameNode(l.name);p&&i.set(p,!0)}}}var d=[];return g(t,8),g(n,24),d;function g(e,t){for(var n=0,o=e;n<o.length;n++){var r=o[n];h(r,t)&&d.push(r)}}function h(t,n){return!i.get(t.escapedName)&&t.getDeclarations()&&!(e.getDeclarationModifierFlagsFromSymbol(t)&n)}}(a?t.getPropertiesOfType(a):e.emptyArray,l,n.members,s)}}}(a),!0;if(l=function(e){if(e){var t=e.parent;switch(e.kind){case 28:case 41:case 71:case 179:case 254:case 253:case 255:if(t&&(250===t.kind||251===t.kind))return t;if(253===t.kind)return t.parent.parent;break;case 9:if(t&&(253===t.kind||255===t.kind))return t.parent.parent;break;case 18:if(t&&256===t.kind&&t.parent&&253===t.parent.kind)return t.parent.parent.parent;if(t&&255===t.kind)return t.parent.parent}}return}(k)){var c=void 0;if((250===l.kind||251===l.kind)&&(c=t.getAllAttributesTypeFromJsxOpeningLikeElement(l)))return R=function(t,n){for(var o=e.createUnderscoreEscapedMap(),r=0,i=n;r<i.length;r++){var s=i[r];j(s)||253===s.kind&&o.set(s.name.escapedText,!0)}return e.filter(t,(function(e){return!o.get(e.escapedName)}))}(t.getPropertiesOfType(c),l.attributes.properties),B=!0,A=!1,!0}B=!1,A=function(e){if(e){var t=e.parent.kind;switch(e.kind){case 26:return 181===t||152===t||182===t||177===t||194===t||160===t;case 19:return 181===t||152===t||182===t||185===t||168===t;case 21:return 177===t||157===t||144===t;case 128:case 129:return!0;case 23:return 233===t;case 17:return 229===t;case 58:return 226===t||194===t;case 14:return 196===t;case 15:return 205===t;case 114:case 112:case 113:return 149===t}switch(e.getText()){case"public":case"protected":case"private":return!0}}return!1}(k),y!==k&&e.Debug.assert(!!y,"Expected 'contextToken' to be defined when different from 'previousToken'.");var u=y!==k?y.getStart():r,d=function(t,n,o){var r=t;for(;r&&!e.positionBelongsToNode(r,n,o);)r=r.parent;return r}(k,u,o)||o;d&&(D=265===d.kind||196===d.kind||256===d.kind||e.isStatement(d));return function(n,r){var s=r.toLowerCase();e.codefix.forEachExternalModule(t,i,(function(r){if(r!==o.symbol)for(var i=0,a=t.getExportsOfModule(r);i<a.length;i++){var l=a[i],c=l.name,u="default"===c;if(u){var p=e.getLocalSymbolForExportDefault(l);p&&(l=p,c=p.name)}l.declarations&&l.declarations.some((function(t){return e.isExportSpecifier(t)&&!!t.parent.parent.moduleSpecifier}))||V(c.toLowerCase(),s)&&(n.push(l),O[e.getSymbolId(l)]={moduleSymbol:r,isDefaultExport:u})}}))}(R=t.getSymbolsInScope(d,2998271),y&&e.isIdentifier(y)?y.text:""),function(n){e.filterMutate(n,(function(n){if(!e.isSourceFile(C)){if(e.isExportAssignment(C.parent))return!0;if(n&&2097152&n.flags&&(n=t.getAliasedSymbol(n)),e.isInRightSideOfInternalImportEqualsDeclaration(C))return!!(1920&n.flags);if(p||!function(e){return e&&103===e.kind&&162===e.parent.kind}(k)&&(e.isPartOfTypeNode(C)||function(t){if(t){var n=t.parent.kind;switch(t.kind){case 56:return 149===n||148===n||146===n||226===n||e.isFunctionLikeKind(n);case 58:return 231===n;case 118:return 202===n}}}(k)))return H(n)}return!!(107455&e.getCombinedLocalAndExportSymbolFlags(n))}))}(R),!0}function H(n){if(n=n.exportSymbol||n,793064&(n=e.skipAlias(n,t)).flags)return!0;if(1536&n.flags){var o=t.getExportsOfModule(n);return e.forEach(o,H)}}function V(e,t){if(0===t.length)return!0;for(var n=0,o=0;o<e.length;o++)if(e.charCodeAt(o)===t.charCodeAt(n)&&++n===t.length)return!0;return!1}function G(t){return e.isClassElement(t.parent)&&e.isClassLike(t.parent.parent)}function W(t){return t.parent&&function(t){return e.isParameter(t)&&e.isConstructorDeclaration(t.parent)}(t.parent)&&(_(t.kind)||e.isDeclarationName(t))}function K(t){return e.isFunctionLikeKind(t)&&152!==t}function j(e){return e.getStart()<=r&&r<=e.getEnd()}}function u(t,n,o,r){var i=t.name;if(i){if(1920&t.flags){var s=i.charCodeAt(0);if(e.isSingleOrDoubleQuote(s))return}return p(i,n,o,r)}}function p(t,n,o,r){return o&&!e.isIdentifierText(t,n)?r?JSON.stringify(t):void 0:t}!function(e){e[e.None=0]="None",e[e.ClassElementKeywords=1]="ClassElementKeywords",e[e.ConstructorParameterKeywords=2]="ConstructorParameterKeywords"}(n||(n={})),t.getCompletionsAtPosition=function(n,o,r,l,u,d,h){if(e.isInReferenceComment(u,d))return t.PathCompletions.getTripleSlashReferenceCompletion(u,d,l,n);if(e.isInString(u,d))return function(n,o,r,l,c,u){var p=e.findPrecedingToken(o,n);if(!p||9!==p.kind)return;if(261===p.parent.kind&&178===p.parent.parent.kind&&p.parent.name===p)return function(e,t,n,o){var r=t.getContextualType(e.parent),s=[];if(r&&(i(r.getApparentProperties(),s,e,!1,t,n,o,!0),s.length))return{isGlobalCompletion:!1,isMemberCompletion:!0,isNewIdentifierLocation:!0,entries:s}}(p.parent,r,l.target,u);if(e.isElementAccessExpression(p.parent)&&p.parent.argumentExpression===p)return function(e,t,n,o){var r=t.getTypeAtLocation(e.expression),s=[];if(r&&(i(r.getApparentProperties(),s,e,!1,t,n,o,!0),s.length))return{isGlobalCompletion:!1,isMemberCompletion:!0,isNewIdentifierLocation:!0,entries:s};return}(p.parent,r,l.target,u);if(238===p.parent.kind||e.isExpressionOfExternalModuleImportEqualsDeclaration(p)||e.isRequireCall(p.parent,!1))return t.PathCompletions.getStringLiteralCompletionEntriesFromModuleNames(p,l,c,r);if(function(t){return e.isBinaryExpression(t)&&(n=t.operatorToken.kind,32===n||33===n||34===n||35===n);var n}(p.parent))return s(r.getTypeAtLocation(p.parent.left===p?p.parent.right:p.parent.left),r);if(e.isCaseOrDefaultClause(p.parent))return s(r.getTypeAtLocation(p.parent.parent.parent.expression),r);var d=e.SignatureHelp.getImmediatelyContainingArgumentInfo(p,o,n);return d?function(t,n){var o=[],r=[],i=e.createMap();n.getResolvedSignature(t.invocation,o,t.argumentCount);for(var s=0,l=o;s<l.length;s++){var c=l[s];a(n.getParameterType(c,t.argumentIndex),r,n,i)}if(r.length)return{isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!0,entries:r};return}(d,r):s(r.getContextualType(p),r)}(u,d,o,l,n,r);var f=c(o,r,u,d,h);if(f){var _=f.symbols,m=f.isGlobalCompletion,y=f.isMemberCompletion,k=f.allowStringLiteral,b=f.isNewIdentifierLocation,v=f.location,T=f.request,E=f.keywordFilters,S=f.symbolToOriginInfoMap;if(1===u.languageVariant&&v&&v.parent&&252===v.parent.kind)return{isGlobalCompletion:!1,isMemberCompletion:!0,isNewIdentifierLocation:!1,entries:[{name:v.parent.parent.openingElement.tagName.getFullText(),kind:"class",kindModifiers:void 0,sortText:"0"}]};if(T)return{isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!1,entries:"JsDocTagName"===T.kind?e.JsDoc.getJSDocTagNameCompletions():"JsDocTag"===T.kind?e.JsDoc.getJSDocTagCompletions():e.JsDoc.getJSDocParameterNameCompletions(T.tag)};var C=[];if(e.isSourceFileJavaScript(u)){var x=i(_,C,v,!0,o,l.target,r,k,S);!function(t,n,o,r,i){e.getNameTable(t).forEach((function(t,s){if(t!==n){var a=e.unescapeLeadingUnderscores(s);if(!o.has(a)){o.set(a,!0);var l=p(a,r,!0,!1);l&&i.push({name:l,kind:"warning",kindModifiers:"",sortText:"1"})}}}))}(u,v.pos,x,l.target,C)}else{if((!_||0===_.length)&&0===E)return;i(_,C,v,!0,o,l.target,r,k,S)}return 0===E&&y||e.addRange(C,g(E)),{isGlobalCompletion:m,isMemberCompletion:y,isNewIdentifierLocation:b,entries:C}}},t.getCompletionEntryDetails=function(t,n,o,r,i,s,a,c,u){var p=s.name,d=s.source,h=l(t,n,o,r,i,s,a);if(h){var f=h.symbol,_=h.location,m=function(t,n,o,r,i,s,a){var l=t[e.getSymbolId(n)];if(!l)return;var c=l.moduleSymbol,u=l.isDefaultExport;return e.codefix.getCodeActionForImport(c,{host:r,checker:o,newLineCharacter:r.getNewLine(),compilerOptions:i,sourceFile:s,rulesProvider:a,symbolName:n.name,getCanonicalFileName:e.createGetCanonicalFileName(!!r.useCaseSensitiveFileNames&&r.useCaseSensitiveFileNames()),symbolToken:void 0,kind:u?1:0})}(h.symbolToOriginInfoMap,f,t,c,o,r,u),y=e.SymbolDisplay.getSymbolModifiers(f),k=e.SymbolDisplay.getSymbolDisplayPartsDocumentationAndSymbolKind(t,f,r,_,_,7),b=k.displayParts,v=k.documentation,T=k.symbolKind,E=k.tags;return{name:p,kindModifiers:y,kind:T,displayParts:b,documentation:v,tags:E,codeActions:m,source:void 0===d?void 0:[e.textPart(d)]}}if(void 0===d&&e.some(g(0),(function(e){return e.name===p})))return{name:p,kind:"keyword",kindModifiers:"",displayParts:[e.displayPart(p,e.SymbolDisplayPartKind.keyword)],documentation:void 0,tags:void 0,codeActions:void 0,source:void 0}},t.getCompletionEntrySymbol=function(e,t,n,o,r,i,s){var a=l(e,t,n,o,r,i,s);return a&&a.symbol};var d=[];function g(t){var n=d[t];return n||(d[t]=function(t){switch(t){case 0:return function(){for(var t=[],n=72;n<=142;n++)t.push({name:e.tokenToString(n),kind:"keyword",kindModifiers:"",sortText:"0"});return t}();case 1:return o(f);case 2:return o(m)}}(t));function o(t){return e.filter(g(0),(function(e){return t(e.name)}))}}function h(e){switch(e){case 114:case 113:case 112:case 117:case 115:case 123:case 131:case 125:case 135:case 120:return!0}}function f(t){return h(e.stringToToken(t))}function _(e){switch(e){case 114:case 112:case 113:case 131:return!0}}function m(t){return _(e.stringToToken(t))}}(e.Completions||(e.Completions={}))}(ts||(ts={})),function(e){!function(t){function n(t,n){return{fileName:n.fileName,textSpan:e.createTextSpanFromNode(t,n),kind:"none"}}function o(e,t){return void 0!==e&&e.kind===t}function r(e){return e&&e.parent}function i(t){var n=[];return function t(o){if(223===o.kind)n.push(o);else if(224===o.kind){var r=o;r.catchClause?t(r.catchClause):t(r.tryBlock),r.finallyBlock&&t(r.finallyBlock)}else e.isFunctionLike(o)||e.forEachChild(o,t)}(t),n}function s(t){var n=[];return function t(o){218===o.kind||217===o.kind?n.push(o):e.isFunctionLike(o)||e.forEachChild(o,t)}(t),n}function a(e,t){var n=l(t);return n&&n===e}function l(t){for(var n=t.parent;n;n=n.parent)switch(n.kind){case 221:if(217===t.kind)continue;case 214:case 215:case 216:case 213:case 212:if(!t.label||d(n,t.label.text))return n;break;default:if(e.isFunctionLike(n))return}}function c(t,n){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];return!(!n||!e.contains(o,n.kind))&&(t.push(n),!0)}function u(t){var n=[];if(c(n,t.getFirstToken(),88,106,81)&&212===t.kind)for(var o=t.getChildren(),r=o.length-1;r>=0&&!c(n,o[r],106);r--);var i=s(t.statement);return e.forEach(i,(function(e){a(t,e)&&c(n,e.getFirstToken(),72,77)})),n}function p(t){var n=[];return c(n,t.getFirstToken(),98),e.forEach(t.caseBlock.clauses,(function(o){c(n,o.getFirstToken(),73,79);var r=s(o);e.forEach(r,(function(e){a(t,e)&&c(n,e.getFirstToken(),72)}))})),n}function d(e,t){for(var n=e.parent;222===n.kind;n=n.parent)if(n.label.escapedText===t)return!0;return!1}t.getDocumentHighlights=function(t,s,a,d,g){var h=e.getTouchingWord(a,d,!0);if(h!==a){if(e.Debug.assert(void 0!==h.parent),e.isJsxOpeningElement(h.parent)&&h.parent.tagName===h||e.isJsxClosingElement(h.parent)){var f=h.parent.parent,_=[f.openingElement,f.closingElement].map((function(e){return n(e.tagName,a)}));return[{fileName:a.fileName,highlightSpans:_}]}return function(t,n,o,r){var i=e.FindAllReferences.getReferenceEntriesForNode(t,n,r,o);return i&&function(t){for(var n=e.createMap(),o=0,r=t;o<r.length;o++){var i=r[o],s=e.FindAllReferences.toHighlightSpan(i),a=s.fileName,l=s.span,c=n.get(a);c||n.set(a,c=[]),c.push(l)}return e.arrayFrom(n.entries(),(function(e){return{fileName:e[0],highlightSpans:e[1]}}))}(i)}(h,t,s,g)||function(t,s){var a=function(t,s){if(!t)return;switch(t.kind){case 90:case 82:if(o(t.parent,211))return function(t,r){var i=[];for(;o(t.parent,211)&&t.parent.elseStatement===t;)t=t.parent;for(;t;){var s=t.getChildren();c(i,s[0],90);for(var a=s.length-1;a>=0&&!c(i,s[a],82);a--);if(!o(t.elseStatement,211))break;t=t.elseStatement}var l=[];for(a=0;a<i.length;a++){if(82===i[a].kind&&a<i.length-1){for(var u=i[a],p=i[a+1],d=!0,g=p.getStart()-1;g>=u.end;g--)if(!e.isWhiteSpaceSingleLine(r.text.charCodeAt(g))){d=!1;break}if(d){l.push({fileName:r.fileName,textSpan:e.createTextSpanFromBounds(u.getStart(),p.end),kind:"reference"}),a++;continue}}l.push(n(i[a],r))}return l}(t.parent,s);break;case 96:if(o(t.parent,219))return f(function(t){var n=e.getContainingFunction(t);if(!n||!o(n.body,207))return;var r=[];return e.forEachReturnStatement(n.body,(function(e){c(r,e.getFirstToken(),96)})),e.forEach(i(n.body),(function(e){c(r,e.getFirstToken(),100)})),r}(t.parent));break;case 100:if(o(t.parent,223))return f(function(t){var n=function(t){var n=t;for(;n.parent;){var o=n.parent;if(e.isFunctionBlock(o)||265===o.kind)return o;if(224===o.kind){var r=o;if(r.tryBlock===n&&r.catchClause)return n}n=o}return}(t);if(!n)return;var o=[];e.forEach(i(n),(function(e){c(o,e.getFirstToken(),100)})),e.isFunctionBlock(n)&&e.forEachReturnStatement(n,(function(e){c(o,e.getFirstToken(),96)}));return o}(t.parent));break;case 102:case 74:case 87:var a=74===t.kind?r(r(t)):r(t);if(o(a,224))return f(function(t,n){var o=[];c(o,t.getFirstToken(),102),t.catchClause&&c(o,t.catchClause.getFirstToken(),74);if(t.finallyBlock){c(o,e.findChildOfKind(t,87,n),87)}return o}(a,s));break;case 98:if(o(t.parent,221))return f(p(t.parent));break;case 73:case 79:if(o(r(r(r(t))),221))return f(p(t.parent.parent.parent));break;case 72:case 77:if(o(t.parent,218)||o(t.parent,217))return f(function(e){var t=l(e);if(t)switch(t.kind){case 214:case 215:case 216:case 212:case 213:return u(t);case 221:return p(t)}return}(t.parent));break;case 88:if(o(t.parent,214)||o(t.parent,215)||o(t.parent,216))return f(u(t.parent));break;case 106:case 81:if(o(t.parent,213)||o(t.parent,212))return f(u(t.parent));break;case 123:if(o(t.parent,152))return f((d=t.parent,g=d.symbol.getDeclarations(),h=[],e.forEach(g,(function(t){e.forEach(t.getChildren(),(function(e){return c(h,e,123)}))})),h));break;case 125:case 135:if(o(t.parent,153)||o(t.parent,154))return f(function(t){var n=[];return o(t.symbol,153),o(t.symbol,154),n;function o(t,o){var r=e.getDeclarationOfKind(t,o);r&&e.forEach(r.getChildren(),(function(e){return c(n,e,125,135)}))}}(t.parent));break;default:if(e.isModifierKind(t.kind)&&t.parent&&(e.isDeclaration(t.parent)||208===t.parent.kind))return f(function(t,n){if(!function(e,t){var n=t.parent;switch(e){case 112:case 113:case 114:switch(n.kind){case 229:case 199:return!0;case 152:return 146===t.kind;default:return!1}case 115:return 229===n.kind||199===n.kind;case 84:case 124:return 234===n.kind||265===n.kind;case 117:return 229===n.kind||229===t.kind;default:return!1}}(t,n))return;var o=e.modifierToFlag(t);return e.mapDefined(function(t,n){var o=t.parent;switch(o.kind){case 234:case 265:case 207:case 257:case 258:return 128&n?t.members.concat([t]):o.statements;case 152:return o.parameters.concat(o.parent.members);case 229:case 199:var r=o.members;if(28&n){var i=e.find(o.members,e.isConstructorDeclaration);if(i)return r.concat(i.parameters)}else if(128&n)return r.concat([o]);return r;default:e.Debug.fail("Invalid container kind.")}}(n,o),(function(n){if(e.getModifierFlags(n)&o){var r=e.find(n.modifiers,(function(e){return e.kind===t}));return e.Debug.assert(!!r),r}}))}(t.kind,t.parent))}var d,g,h;function f(e){return e&&e.map((function(e){return n(e,s)}))}}(t,s);if(!a||0===a.length)return;return[{fileName:s.fileName,highlightSpans:a}]}(h,a)}}}(e.DocumentHighlights||(e.DocumentHighlights={}))}(ts||(ts={})),function(e){e.createDocumentRegistry=function(t,n){void 0===n&&(n="");var o=e.createMap(),r=e.createGetCanonicalFileName(!!t);function i(e){return"_"+e.target+"|"+e.module+"|"+e.noResolve+"|"+e.jsx+"|"+e.allowJs+"|"+e.baseUrl+"|"+JSON.stringify(e.typeRoots)+"|"+JSON.stringify(e.rootDirs)+"|"+JSON.stringify(e.paths)}function s(t,n){var r=o.get(t);return!r&&n&&o.set(t,r=e.createMap()),r}function a(e,t,n,o,r,i,s){return c(e,t,n,o,r,i,!0,s)}function l(e,t,n,o,r,i,s){return c(e,t,n,o,r,i,!1,s)}function c(t,n,o,r,i,a,l,c){var u=s(r,!0),p=u.get(n);p?(p.sourceFile.version!==a&&(p.sourceFile=e.updateLanguageServiceSourceFile(p.sourceFile,i,a,i.getChangeRange(p.sourceFile.scriptSnapshot))),l&&p.languageServiceRefCount++):(p={sourceFile:e.createLanguageServiceSourceFile(t,i,o.target,a,!1,c),languageServiceRefCount:1,owners:[]},u.set(n,p));return p.sourceFile}function u(t,n){var o=s(n,!1);e.Debug.assert(void 0!==o);var r=o.get(t);r.languageServiceRefCount--,e.Debug.assert(r.languageServiceRefCount>=0),0===r.languageServiceRefCount&&o.delete(t)}return{acquireDocument:function(t,o,s,l,c){return a(t,e.toPath(t,n,r),o,i(o),s,l,c)},acquireDocumentWithKey:a,updateDocument:function(t,o,s,a,c){return l(t,e.toPath(t,n,r),o,i(o),s,a,c)},updateDocumentWithKey:l,releaseDocument:function(t,o){return u(e.toPath(t,n,r),i(o))},releaseDocumentWithKey:u,reportStats:function(){var t=e.arrayFrom(o.keys()).filter((function(e){return e&&"_"===e.charAt(0)})).map((function(e){var t=o.get(e),n=[];return t.forEach((function(e,t){n.push({name:t,refCount:e.languageServiceRefCount,references:e.owners.slice(0)})})),n.sort((function(e,t){return t.refCount-e.refCount})),{bucket:e,sourceFiles:n}}));return JSON.stringify(t,void 0,2)},getKeyForCompilationSettings:i}}}(ts||(ts={})),function(e){!function(t){function n(t,n){return e.forEach(265===t.kind?t.statements:t.body.statements,(function(t){return n(t)||c(t)&&e.forEach(t.body&&t.body.statements,n)}))}function o(e,t){if(e.externalModuleIndicator||void 0!==e.imports)for(var o=0,i=e.imports;o<i.length;o++){var s=i[o];t(r(s),s)}else n(e,(function(e){switch(e.kind){case 244:case 238:(n=e).moduleSpecifier&&9===n.moduleSpecifier.kind&&t(n,n.moduleSpecifier);break;case 237:var n,o=(n=e).moduleReference;248===o.kind&&9===o.expression.kind&&t(n,o.expression)}}))}function r(t){var n=t.parent;switch(n.kind){case 181:case 238:case 244:return n;case 248:return n.parent;default:e.Debug.fail("Unexpected module specifier parent: "+n.kind)}}function i(t,n,o){var r=o.getMergedSymbol(t.parent);return e.isExternalModuleSymbol(r)?{exportingModuleSymbol:r,exportKind:n}:void 0}function s(t){return"default"!==t.escapedName?t.escapedName:e.forEach(t.declarations,(function(t){var n=e.getNameOfDeclaration(t);return n&&71===n.kind&&n.escapedText}))}function a(e,t){return t.getMergedSymbol(l(e).symbol)}function l(t){if(181===t.kind)return t.getSourceFile();var n=t.parent;return 265===n.kind?n:(e.Debug.assert(234===n.kind&&c(n.parent)),n.parent)}function c(e){return 233===e.kind&&9===e.name.kind}function u(e){var t=e.moduleReference;return 248===t.kind&&9===t.expression.kind}t.createImportTracker=function(t,r,i){var c=function(t,n,r){for(var i=e.createMap(),s=0,a=t;s<a.length;s++){var l=a[s];r.throwIfCancellationRequested(),o(l,(function(t,o){var r=n.getSymbolAtLocation(o);if(r){var s=e.getSymbolId(r).toString(),a=i.get(s);a||i.set(s,a=[]),a.push(t)}}))}return i}(t,r,i);return function(o,p,d){var g=function(t,o,r,i,s){var c=r.exportingModuleSymbol,u=r.exportKind,p=e.nodeSeenTracker(),d=e.nodeSeenTracker(),g=[],h=!!c.globalExports,f=h?void 0:[];return m(c),{directImports:g,indirectUsers:_()};function _(){if(h)return t;for(var n=0,o=c.declarations;n<o.length;n++){var r=o[n];e.isExternalModuleAugmentation(r)&&k(r)}return f.map(e.getSourceFileOfNode)}function m(t){var n=v(t);if(n)for(var o=0,r=n;o<r.length;o++){var l=r[o];if(p(l))switch(s.throwIfCancellationRequested(),l.kind){case 181:if(!h){var c=l.parent;if(2===u&&226===c.kind){var d=c.name;if(71===d.kind){g.push(d);break}}k(l.getSourceFile())}break;case 237:y(l,l.name,e.hasModifier(l,1));break;case 238:var f=l.importClause&&l.importClause.namedBindings;f&&240===f.kind?y(l,f.name):g.push(l);break;case 244:l.exportClause?g.push(l):m(a(l,i))}}}function y(t,o,r){if(2===u)g.push(t);else if(!h){var s=l(t);e.Debug.assert(265===s.kind||233===s.kind),r||function(e,t,o){var r=o.getSymbolAtLocation(t);return n(e,(function(e){if(244===e.kind){var t=e,n=t.exportClause;if(!t.moduleSpecifier&&n)for(var i=0,s=n.elements;i<s.length;i++){var a=s[i];if(o.getExportSpecifierLocalTargetSymbol(a)===r)return!0}}}))}(s,o,i)?b(s):k(s)}}function k(t){e.Debug.assert(!h);var n=d(t);return n&&f.push(t),n}function b(t){if(k(t)){var n=i.getMergedSymbol(t.symbol);e.Debug.assert(!!(1536&n.flags));var o=v(n);if(o)for(var r=0,s=o;r<s.length;r++){b(l(s[r]))}}}function v(t){return o.get(e.getSymbolId(t).toString())}}(t,c,p,r,i),h=g.directImports,f=g.indirectUsers;return __assign({indirectUsers:f},function(e,t,n,o,r){var i=[],a=[];function l(e,t){i.push([e,t])}if(e)for(var c=0,p=e;c<p.length;c++){d(p[c])}return{importSearches:i,singleReferences:a};function d(e){if(237!==e.kind)if(71!==e.kind){if(9===e.moduleSpecifier.kind)if(244!==e.kind){var i=e.importClause;if(i){var a=i.namedBindings;if(a&&240===a.kind)g(a.name);else if(0===n)h(a);else{var c=i.name;if(c&&(!r||c.escapedText===s(t)))l(c,o.getSymbolAtLocation(c));r||1!==n||h(a)}}}else h(e.exportClause)}else g(e);else u(e)&&g(e.name)}function g(e){2!==n||r&&!f(e.escapedText)||l(e,o.getSymbolAtLocation(e))}function h(e){if(e)for(var t=0,n=e.elements;t<n.length;t++){var i=n[t],s=i.name,c=i.propertyName;if(f((c||s).escapedText))if(c)a.push(c),r||l(s,o.getSymbolAtLocation(s));else l(s,246===i.kind&&i.propertyName?o.getExportSpecifierLocalTargetSymbol(i):o.getSymbolAtLocation(s))}}function f(e){return e===t.escapedName||0!==n&&"default"===e}}(h,o,p.exportKind,r,d))}},function(e){e[e.Named=0]="Named",e[e.Default=1]="Default",e[e.ExportEquals=2]="ExportEquals"}(t.ExportKind||(t.ExportKind={})),function(e){e[e.Import=0]="Import",e[e.Export=1]="Export"}(t.ImportExport||(t.ImportExport={})),t.findModuleReferences=function(e,t,n){for(var r=[],i=e.getTypeChecker(),s=0,a=t;s<a.length;s++){var l=a[s],c=n.valueDeclaration;if(265===c.kind){for(var u=0,p=l.referencedFiles;u<p.length;u++){var d=p[u];e.getSourceFileFromReference(l,d)===c&&r.push({kind:"reference",referencingFile:l,ref:d})}for(var g=0,h=l.typeReferenceDirectives;g<h.length;g++){d=h[g];var f=e.getResolvedTypeReferenceDirectives().get(d.fileName);void 0!==f&&f.resolvedFileName===c.fileName&&r.push({kind:"reference",referencingFile:l,ref:d})}}o(l,(function(e,t){i.getSymbolAtLocation(t)===n&&r.push({kind:"import",literal:t})}))}return r},t.getImportOrExportSymbol=function(t,n,o,r){return r?a():a()||function(){var r=function(t){var n=t.parent;switch(n.kind){case 237:return n.name===t&&u(n)?{isNamedImport:!1}:void 0;case 242:return n.propertyName?void 0:{isNamedImport:!0};case 239:case 240:return e.Debug.assert(n.name===t),{isNamedImport:!1};default:return}}(t);if(!r)return;var i=o.getImmediateAliasedSymbol(n);if(!i)return;"export="===(i=function(t,n){if(t.declarations)for(var o=0,r=t.declarations;o<r.length;o++){var i=r[o];if(e.isExportSpecifier(i)&&!i.propertyName&&!i.parent.parent.moduleSpecifier)return n.getExportSpecifierLocalTargetSymbol(i)}return t}(i,o)).escapedName&&(i=function(t,n){if(2097152&t.flags)return n.getImmediateAliasedSymbol(t);var o=t.valueDeclaration;if(e.isExportAssignment(o))return o.expression.symbol;if(e.isBinaryExpression(o))return o.right.symbol;e.Debug.fail()}(i,o));var a=s(i);if(void 0===a||"default"===a||a===n.escapedName)return __assign({kind:0,symbol:i},r)}();function a(){var i=t.parent;if(n.exportSymbol)return 179===i.kind?n.declarations.some((function(e){return e===i}))&&e.isBinaryExpression(i.parent)?u(i.parent,!1):void 0:l(n.exportSymbol,c(i));var s=function(e,t){if(226===e.kind){var n=e;return n.name!==t||260===n.parent.kind?void 0:208===n.parent.parent.kind?n.parent.parent:void 0}return e}(i,t);if(s&&e.hasModifier(s,1)){if(e.isImportEqualsDeclaration(s)&&s.moduleReference===t){if(r)return;return{kind:0,symbol:o.getSymbolAtLocation(s.name),isNamedImport:!1}}return l(n,c(s))}if(e.isExportAssignment(i))return a(i);if(e.isExportAssignment(i.parent))return a(i.parent);if(e.isBinaryExpression(i))return u(i,!0);if(e.isBinaryExpression(i.parent))return u(i.parent,!0);function a(t){var o=t.symbol.parent;e.Debug.assert(!!o);var r=t.isExportEquals?2:1;return{kind:1,symbol:n,exportInfo:{exportingModuleSymbol:o,exportKind:r}}}function u(t,r){var i;switch(e.getSpecialPropertyAssignmentKind(t)){case 1:i=0;break;case 2:i=2;break;default:return}var s=r?o.getSymbolAtLocation(t.left.name):n;return s&&l(s,i)}}function l(e,t){var n=i(e,t,o);return n&&{kind:1,symbol:e,exportInfo:n}}function c(t){return e.hasModifier(t,512)?1:0}},t.getExportInfo=i}(e.FindAllReferences||(e.FindAllReferences={}))}(ts||(ts={})),function(e){!function(t){function n(e,t){return{type:"node",node:e,isInString:t}}function o(e,n,o,r,s){return void 0===s&&(s={}),i(t.Core.getReferencedSymbolsForNode(e,n,o,r,s))}function r(n,o,r,i,s,a){var l=e.getTouchingPropertyName(i,s,!0);return t.Core.getReferencedSymbolsForNode(l,n,r,o,a)}function i(t){return t&&e.flatMap(t,(function(e){return e.references}))}function s(t,n){var o=function(){switch(t.type){case"symbol":var o=t.symbol,r=t.node,i=a(o,r,n),s=i.displayParts,l=i.kind;return{node:r,name:s.map((function(e){return e.text})).join(""),kind:l,displayParts:s};case"label":var c=t.node;return{node:c,name:c.text,kind:"label",displayParts:[e.displayPart(c.text,e.SymbolDisplayPartKind.text)]};case"keyword":var u=t.node,p=e.tokenToString(u.kind);return{node:u,name:p,kind:"keyword",displayParts:[{text:p,kind:"keyword"}]};case"this":var d=t.node,g=(o=n.getSymbolAtLocation(d))&&e.SymbolDisplay.getSymbolDisplayPartsDocumentationAndSymbolKind(n,o,d.getSourceFile(),e.getContainerNode(d),d).displayParts;return{node:d,name:"this",kind:"var",displayParts:g};case"string":var h=t.node;return{node:h,name:h.text,kind:"var",displayParts:[e.displayPart(e.getTextOfNode(h),e.SymbolDisplayPartKind.stringLiteral)]}}}();if(o){var r=o.node,i=o.name,s=o.kind,l=o.displayParts,c=r.getSourceFile();return{containerKind:"",containerName:"",fileName:c.fileName,kind:s,name:i,textSpan:e.createTextSpanFromNode(r,c),displayParts:l}}}function a(t,n,o){var r=e.SymbolDisplay.getSymbolDisplayPartsDocumentationAndSymbolKind(o,t,n.getSourceFile(),e.getContainerNode(n),n);return{displayParts:r.displayParts,kind:r.symbolKind}}function l(t){if("span"===t.type)return{textSpan:t.textSpan,fileName:t.fileName,isWriteAccess:!1,isDefinition:!1};var n=t.node,o=t.isInString;return{fileName:n.getSourceFile().fileName,textSpan:c(n),isWriteAccess:u(n),isDefinition:79===n.kind||e.isAnyDeclarationName(n)||e.isLiteralComputedPropertyDeclarationName(n),isInString:o}}function c(t){var n=t.getStart(),o=t.getEnd();return 9===t.kind&&(n+=1,o-=1),e.createTextSpanFromBounds(n,o)}function u(t){return 79===t.kind||e.isAnyDeclarationName(t)||e.isWriteAccess(t)}t.nodeEntry=n,t.findReferencedSymbols=function(e,t,n,o,i){var a=r(e,t,n,o,i);if(a&&a.length){for(var c=[],u=e.getTypeChecker(),p=0,d=a;p<d.length;p++){var g=d[p],h=g.definition,f=g.references;h&&c.push({definition:s(h,u),references:f.map(l)})}return c}},t.getImplementationsAtPosition=function(r,i,s,l,u){var p=function(r,i,s,a){if(265===a.kind)return;var l=r.getTypeChecker();if(262===a.parent.kind){var c=[];return t.Core.getReferenceEntriesForShorthandPropertyAssignment(a,l,(function(e){return c.push(n(e))})),c}if(97===a.kind||e.isSuperProperty(a.parent)){var u=l.getSymbolAtLocation(a);return u.valueDeclaration&&[n(u.valueDeclaration)]}return o(a,r,s,i,{implementations:!0})}(r,i,s,e.getTouchingPropertyName(l,u,!1)),d=r.getTypeChecker();return e.map(p,(function(t){return function(t,n){if("node"===t.type){var o=t.node;return __assign({textSpan:c(o),fileName:o.getSourceFile().fileName},function(t,n){var o=n.getSymbolAtLocation(e.isDeclaration(t)&&t.name?t.name:t);return o?a(o,t,n):178===t.kind?{kind:"interface",displayParts:[e.punctuationPart(19),e.textPart("object literal"),e.punctuationPart(20)]}:199===t.kind?{kind:"local class",displayParts:[e.punctuationPart(19),e.textPart("anonymous local class"),e.punctuationPart(20)]}:{kind:e.getNodeKind(t),displayParts:[]}}(o,n))}return{textSpan:t.textSpan,fileName:t.fileName,kind:"",displayParts:[]}}(t,d)}))},t.findReferencedEntries=function(t,n,o,s,a,c){var u=i(r(t,n,o,s,a,c));return e.map(u,l)},t.getReferenceEntriesForNode=o,t.toHighlightSpan=function(e){if("span"===e.type)return{fileName:e.fileName,span:{textSpan:e.textSpan,kind:"reference"}};var t=e.node,n=e.isInString,o=e.node.getSourceFile().fileName,r=u(t);return{fileName:o,span:{textSpan:c(t),kind:r?"writtenReference":"reference",isInString:n}}}}(e.FindAllReferences||(e.FindAllReferences={}))}(ts||(ts={})),function(e){!function(t){!function(n){n.getReferencedSymbolsForNode=function(n,i,a,c,d){if(void 0===d&&(d={}),265!==n.kind){if(!d.implementations){var h=function(n,o,r){if(e.isTypeKeyword(n.kind))return function(t,n,o){for(var r=[],i=0,s=t;i<s.length;i++){var a=s[i];o.throwIfCancellationRequested(),g(a,n,e.tokenToString(n),r)}return r.length?[{definition:{type:"keyword",node:r[0].node},references:r}]:void 0}(o,n.kind,r);if(e.isLabelName(n)){if(e.isJumpStatementTarget(n)){var i=e.getTargetLabel(n.parent,n.text);return i&&p(i.parent,i)}return p(n.parent,n)}if(e.isThis(n))return function(n,o,r){var i=e.getThisContainer(n,!1),s=32;switch(i.kind){case 151:case 150:if(e.isObjectLiteralMethod(i))break;case 149:case 148:case 152:case 153:case 154:s&=e.getModifierFlags(i),i=i.parent;break;case 265:if(e.isExternalModule(i))return;case 228:case 186:break;default:return}var a=[];if(265===i.kind)e.forEach(o,(function(e){r.throwIfCancellationRequested(),c(e,e,u(e,"this"),a)}));else{var l=i.getSourceFile();c(l,i,u(l,"this",i),a)}return[{definition:{type:"this",node:n},references:a}];function c(n,o,r,i){e.forEach(r,(function(r){var a=e.getTouchingWord(n,r,!1);if(a&&e.isThis(a)){var l=e.getThisContainer(a,!1);switch(o.kind){case 186:case 228:o.symbol===l.symbol&&i.push(t.nodeEntry(a));break;case 151:case 150:e.isObjectLiteralMethod(o)&&o.symbol===l.symbol&&i.push(t.nodeEntry(a));break;case 199:case 229:l.parent&&o.symbol===l.parent.symbol&&(32&e.getModifierFlags(l))===s&&i.push(t.nodeEntry(a));break;case 265:265!==l.kind||e.isExternalModule(l)||i.push(t.nodeEntry(a))}}}))}}(n,o,r);if(97===n.kind)return function(n){var o=e.getSuperContainer(n,!1);if(!o)return;var r=32;switch(o.kind){case 149:case 148:case 151:case 150:case 152:case 153:case 154:r&=e.getModifierFlags(o),o=o.parent;break;default:return}for(var i=[],s=o.getSourceFile(),a=u(s,"super",o),l=0,c=a;l<c.length;l++){var p=c[l],d=e.getTouchingWord(s,p,!1);if(d&&97===d.kind){var g=e.getSuperContainer(d,!1);g&&(32&e.getModifierFlags(g))===r&&g.parent.symbol===o.symbol&&i.push(t.nodeEntry(d))}}return[{definition:{type:"symbol",symbol:o.symbol,node:n},references:i}]}(n);return}(n,a,c);if(h)return h}var _=i.getTypeChecker(),k=_.getSymbolAtLocation(n);return k?1536&k.flags&&function(t){if(9!==t.kind)return!1;switch(t.parent.kind){case 233:case 248:case 238:case 244:return!0;case 181:return e.isRequireCall(t.parent,!1)||e.isImportCall(t.parent);default:return!1}}(n)?function(n,o,r){e.Debug.assert(!!o.valueDeclaration);for(var i=t.findModuleReferences(n,r,o).map((function(t){return"import"===t.kind?{type:"node",node:t.literal}:{type:"span",fileName:t.referencingFile.fileName,textSpan:e.createTextSpanFromRange(t.ref)}})),s=0,a=o.declarations;s<a.length;s++){var l=a[s];switch(l.kind){case 265:break;case 233:i.push({type:"node",node:l.name});break;default:e.Debug.fail("Expected a module symbol to be declared by a SourceFile or ModuleDeclaration.")}}return[{definition:{type:"symbol",symbol:o,node:o.valueDeclaration},references:i}]}(i,k,a):function(t,n,i,a,c,u){t=function(t,n,o){var r=n.parent;if(e.isExportSpecifier(r))return m(n,t,r,o);if(e.isImportSpecifier(r)&&r.propertyName===n)return o.getImmediateAliasedSymbol(t);return t}(t,n,a);var p=function(t,n){if(n){var o=void 0;do{o=t;for(var r=0,i=n;r<i.length;r++){var s=i[r],a=e.getMeaningFromDeclaration(s);a&t&&(t|=a)}}while(t!==o)}return t}(e.getMeaningFromLocation(n),t.declarations),d=[],g=new o(i,123===n.kind,a,c,p,u,d);if(79===n.kind)y(n,t,n,g),r(n,t,{exportingModuleSymbol:t.parent,exportKind:1},g);else{var h=g.createSearch(n,t,void 0,{allSearchSymbols:T(t,n,a,u.implementations)}),_=function(t){var n=t.declarations,o=t.flags,r=t.parent,i=t.valueDeclaration;if(i&&(186===i.kind||199===i.kind))return i;if(!n)return;if(8196&o){var s=e.find(n,(function(t){return e.hasModifier(t,8)}));return s?e.getAncestor(s,229):void 0}if(l(t))return;var a,c=r&&!(262144&t.flags);if(c&&(!(1536&r.flags&&e.isExternalModuleSymbol(r))||r.globalExports))return;for(var u=0,p=n;u<p.length;u++){var d=p[u],g=e.getContainerNode(d);if(a&&a!==g)return;if(!g||265===g.kind&&!e.isExternalOrCommonJsModule(g))return;a=g}return c?a.getSourceFile():a}(t);if(_)f(_,_.getSourceFile(),h,g);else for(var k=0,b=g.sourceFiles;k<b.length;k++){var v=b[k];g.cancellationToken.throwIfCancellationRequested(),s(v,h,g)}}return d}(k,n,a,_,c,d):d.implementations||9!==n.kind?void 0:function(n,o,r){for(var i=[],s=0,a=o;s<a.length;s++){var l=a[s];r.throwIfCancellationRequested();var c=u(l,n.text);p(l,n.text,c,i)}return[{definition:{type:"string",node:n},references:i}];function p(n,o,r,i){for(var s=0,a=r;s<a.length;s++){var l=a[s],c=e.getTouchingWord(n,l,!1);c&&9===c.kind&&c.text===o&&i.push(t.nodeEntry(c,!0))}}}(n,a,c)}};var o=function(){function n(t,n,o,r,i,s,a){this.sourceFiles=t,this.isForConstructor=n,this.checker=o,this.cancellationToken=r,this.searchMeaning=i,this.options=s,this.result=a,this.inheritsFromCache=e.createMap(),this.markSeenContainingTypeReference=e.nodeSeenTracker(),this.markSeenReExportRHS=e.nodeSeenTracker(),this.symbolIdToReferences=[],this.sourceFileToSeenSymbols=[]}return n.prototype.getImportSearches=function(e,n){return this.importTracker||(this.importTracker=t.createImportTracker(this.sourceFiles,this.checker,this.cancellationToken)),this.importTracker(e,n,this.options.isForRename)},n.prototype.createSearch=function(t,n,o,r){void 0===r&&(r={});var i=r.text,s=void 0===i?e.stripQuotes(e.unescapeLeadingUnderscores((e.getLocalSymbolForExportDefault(n)||n).escapedName)):i,a=r.allSearchSymbols,l=void 0===a?void 0:a,c=e.escapeLeadingUnderscores(s),u=this.options.implementations&&function(t,n,o){var r=(i=t,e.isRightSideOfPropertyAccess(i)&&i.parent);var i;if(!r)return;var s=o.getTypeAtLocation(r.expression);if(!s)return;if(s.symbol&&96&s.symbol.flags&&s.symbol!==n.parent)return[s.symbol];if(196608&s.flags)return k(s)}(t,n,this.checker);return{location:t,symbol:n,comingFrom:o,text:s,escapedText:c,parents:u,includes:function(t){return l?e.contains(l,t):t===n}}},n.prototype.referenceAdder=function(n,o){var r=e.getSymbolId(n),i=this.symbolIdToReferences[r];return i||(i=this.symbolIdToReferences[r]=[],this.result.push({definition:{type:"symbol",symbol:n,node:o},references:i})),function(e){return i.push(t.nodeEntry(e))}},n.prototype.addStringOrCommentReference=function(e,t){this.result.push({definition:void 0,references:[{type:"span",fileName:e,textSpan:t}]})},n.prototype.markSearchedSymbol=function(t,n){var o=e.getNodeId(t),r=e.getSymbolId(n),i=this.sourceFileToSeenSymbols[o]||(this.sourceFileToSeenSymbols[o]=[]);return!i[r]&&(i[r]=!0)},n}();function r(e,t,n,o){var r=o.getImportSearches(t,n),i=r.importSearches,a=r.singleReferences,l=r.indirectUsers;if(a.length)for(var c=o.referenceAdder(t,e),u=0,p=a;u<p.length;u++){c(p[u])}for(var d=0,g=i;d<g.length;d++){var f=g[d],_=f[0],m=f[1];h(_.getSourceFile(),o.createSearch(_,m,1),o)}if(l.length){var y=void 0;switch(n.exportKind){case 0:y=o.createSearch(e,t,1);break;case 1:y=o.options.isForRename?void 0:o.createSearch(e,t,1,{text:"default"})}if(y)for(var k=0,b=l;k<b.length;k++){s(b[k],y,o)}}}function i(e,t){for(var n=0,o=e.declarations;n<o.length;n++){var r=o[n];h(r.getSourceFile(),t.createSearch(r,e,0),t)}}function s(t,n,o){void 0!==e.getNameTable(t).get(n.escapedText)&&h(t,n,o)}function a(t,n){return e.isArrayLiteralOrObjectLiteralDestructuringPattern(t.parent.parent)&&n.getPropertySymbolOfDestructuringAssignment(t)}function l(t){var n=e.getDeclarationOfKind(t,176);if(n&&174===n.parent.kind&&!n.propertyName)return n}function c(t,n){var o=l(t);if(o){var r=n.getTypeAtLocation(o.parent),i=r&&n.getPropertyOfType(r,o.name.text);return i&&98304&i.flags?(e.Debug.assert(!!(33554432&i.flags)),i.target):i}}function u(t,n,o){void 0===o&&(o=t);var r=[];if(!n||!n.length)return r;for(var i=t.text,s=i.length,a=n.length,l=i.indexOf(n,o.pos);l>=0&&!(l>o.end);){var c=l+a;0!==l&&e.isIdentifierPart(i.charCodeAt(l-1),5)||c!==s&&e.isIdentifierPart(i.charCodeAt(c),5)||r.push(l),l=i.indexOf(n,l+a+1)}return r}function p(n,o){for(var r=[],i=n.getSourceFile(),s=o.text,a=0,l=u(i,s,n);a<l.length;a++){var c=l[a],p=e.getTouchingWord(i,c,!1);p&&(p===o||e.isJumpStatementTarget(p)&&e.getTargetLabel(p,s)===o)&&r.push(t.nodeEntry(p))}return[{definition:{type:"label",node:o},references:r}]}function d(t,n){switch(t.kind){case 71:return t.text.length===n.length;case 9:return(e.isLiteralNameOfPropertyDeclarationOrIndexAccess(t)||function(t){if(9===t.kind)return e.isNameOfModuleDeclaration(t)||e.isExpressionOfExternalModuleImportEqualsDeclaration(t);return!1}(t))&&t.text.length===n.length;case 8:return e.isLiteralNameOfPropertyDeclarationOrIndexAccess(t)&&t.text.length===n.length;case 79:return"default".length===n.length;default:return!1}}function g(n,o,r,i){for(var s=0,a=u(n,r,n);s<a.length;s++){var l=a[s],c=e.getTouchingPropertyName(n,l,!0);c.kind===o&&i.push(t.nodeEntry(c))}}function h(e,t,n){return n.cancellationToken.throwIfCancellationRequested(),f(e,e,t,n)}function f(e,t,n,o){if(o.markSearchedSymbol(t,n.symbol))for(var r=0,i=u(t,n.text,e);r<i.length;r++){_(t,i[r],n,o)}}function _(n,o,s,l){var u=e.getTouchingPropertyName(n,o,!0);if(d(u,s.text)){if(e.getMeaningFromLocation(u)&l.searchMeaning){var p=l.checker.getSymbolAtLocation(u);if(p){var g=u.parent;if(!e.isImportSpecifier(g)||g.propertyName!==u){if(e.isExportSpecifier(g))return e.Debug.assert(71===u.kind),void function(n,o,s,a,l){var c=s.parent,u=s.propertyName,p=s.name,d=c.parent,g=m(n,o,s,l.checker);if(!a.includes(g))return;u?n===u?(d.moduleSpecifier||_(),!l.options.isForRename&&l.markSeenReExportRHS(p)&&y(p,o,p,l)):l.markSeenReExportRHS(n)&&_():_();if(n!==u||!l.options.isForRename){var h=79===n.originalKeywordKind?1:0,f=t.getExportInfo(o,h,l.checker);e.Debug.assert(!!f),r(n,o,f,l)}1!==a.comingFrom&&d.moduleSpecifier&&!u&&i(l.checker.getExportSpecifierLocalTargetSymbol(s),l);function _(){y(n,g,a.location,l)}}(u,p,g,s,l);var h=function(t,n,o,r){if(t.includes(n))return n;var i=e.getContainingObjectLiteralElement(o);if(i){var s=e.forEach(S(i,r.checker),(function(n){return e.find(r.checker.getRootSymbols(n),t.includes)}));if(s)return s;var l=a(o,r.checker);if(l&&t.includes(l))return l}var u=c(n,r.checker);if(u){var p=d(u);if(p)return p}return d(n);function d(n){return e.forEach(r.checker.getRootSymbols(n),(function(n){if(t.includes(n))return n;if(n.parent&&96&n.parent.flags){if(t.parents&&!e.some(t.parents,(function(t){return function(t,n,o,r){var i=64&n.getFlags();return s(t);function s(t){if(t===n)return!0;var r=e.getSymbolId(t)+","+e.getSymbolId(n),s=o.get(r);if(void 0!==s)return s;o.set(r,!1);var l=e.forEach(t.getDeclarations(),(function(t){if(e.isClassLike(t)){if(i){var n=e.getClassImplementsHeritageClauseElements(t);if(n)for(var o=0,r=n;o<r.length;o++){if(a(r[o]))return!0}}return a(e.getClassExtendsHeritageClauseElement(t))}return!(230!==t.kind||!i)&&e.forEach(e.getInterfaceBaseTypeNodes(t),a)}));return o.set(r,l),l}function a(e){if(e){var t=r.getTypeAtLocation(e);if(t&&t.symbol)return s(t.symbol)}return!1}}(n.parent,t,r.inheritsFromCache,r.checker)})))return;var o=[];return E(n.parent,n.name,o,e.createSymbolTable(),r.checker),e.find(o,t.includes)}}))}}(s,p,u,l);h?(l.isForConstructor?function(t,n,o,r){e.isNewExpressionTarget(t)&&y(t,o.symbol,o.location,r);var i=r.referenceAdder(o.symbol,o.location);if(e.isClassLike(t.parent))e.Debug.assert(t.parent.name===t),function(t,n,o){for(var r=0,i=t.members.get("__constructor").declarations;r<i.length;r++){var s=i[r],a=e.findChildOfKind(s,123,n);e.Debug.assert(152===s.kind&&!!a),o(a)}t.exports.forEach((function(t){var n=t.valueDeclaration;if(n&&151===n.kind){var r=n.body;r&&x(r,99,(function(t){e.isNewExpressionTarget(t)&&o(t)}))}}))}(o.symbol,n,i);else{var s=(a=t,e.tryGetClassExtendingExpressionWithTypeArguments(e.climbPastPropertyAccess(a).parent));s&&e.isClassLike(s)&&function(t,n){var o=t.symbol.members.get("__constructor");if(!o)return;for(var r=0,i=o.declarations;r<i.length;r++){var s=i[r];e.Debug.assert(152===s.kind);var a=s.body;a&&x(a,97,(function(t){e.isCallExpressionTarget(t)&&n(t)}))}}(s,i)}var a}(u,n,s,l):y(u,h,s.location,l),function(e,n,o,s){var a=t.getImportOrExportSymbol(e,n,s.checker,1===o.comingFrom);if(!a)return;var l=a.symbol;0===a.kind?s.options.isForRename&&!a.isNamedImport||i(l,s):r(e,l,a.exportInfo,s)}(u,p,s,l)):function(t,n,o){var r=t.flags,i=t.valueDeclaration,s=o.checker.getShorthandAssignmentValueSymbol(i);33554432&r||!n.includes(s)||y(e.getNameOfDeclaration(i),s,n.location,o)}(p,s,l)}}}}else!l.options.implementations&&(l.options.findInStrings&&e.isInString(n,o)||l.options.findInComments&&e.isInNonReferenceComment(n,o))&&l.addStringOrCommentReference(n.fileName,e.createTextSpan(o,s.text.length))}function m(t,n,o,r){return function(t,n){var o=n.parent,r=n.propertyName,i=n.name;return e.Debug.assert(r===t||i===t),r?r===t:!o.parent.moduleSpecifier}(t,o)?r.getExportSpecifierLocalTargetSymbol(o):n}function y(t,n,o,r){var i=r.referenceAdder(n,o);r.options.implementations?function(t,n,o){if(e.isDeclarationName(t)&&function(t){if(!t)return!1;if(e.isVariableLike(t)){if(t.initializer)return!0;if(226===t.kind){var n=function(t){if(t.parent&&t.parent.parent&&208===t.parent.parent.kind)return e.Debug.assert(227===t.parent.kind),t.parent.parent}(t);return n&&e.hasModifier(n,2)}}else{if(e.isFunctionLike(t))return!!t.body||e.hasModifier(t,2);switch(t.kind){case 229:case 199:case 232:case 233:return!0}}return!1}(t.parent))return void n(t.parent);if(71!==t.kind)return;262===t.parent.kind&&C(t,o.checker,n);var r=b(t);if(r)return void n(r);var i=function(t){var n=void 0;for(;t;)e.isTypeNode(t)&&(n=t),t=t.parent;return n}(t);if(i&&o.markSeenContainingTypeReference(i)){var s=i.parent;if(e.isVariableLike(s)&&s.type===i&&s.initializer&&v(s.initializer))n(s.initializer);else if(e.isFunctionLike(s)&&s.type===i&&s.body){var a=s.body;207===a.kind?e.forEachReturnStatement(a,(function(e){e.expression&&v(e.expression)&&n(e.expression)})):v(a)&&n(a)}else e.isAssertionExpression(s)&&v(s.expression)&&n(s.expression)}}(t,i,r):i(t)}function k(e,t){void 0===t&&(t=[]);for(var n=0,o=e.types;n<o.length;n++){var r=o[n];r.symbol&&96&r.symbol.getFlags()&&t.push(r.symbol),196608&r.getFlags()&&k(r,t)}return t}function b(t){if(t&&t.parent){if(201===t.kind&&259===t.parent.kind&&e.isClassLike(t.parent.parent))return t.parent.parent;if(71===t.kind||179===t.kind)return b(t.parent)}}function v(e){switch(e.kind){case 185:return v(e.expression);case 187:case 186:case 178:case 199:case 177:return!0;default:return!1}}function T(t,n,o,r){var i=[t],s=e.getContainingObjectLiteralElement(n);if(s){if(262!==s.kind){var l=a(n,o);l&&i.push(l)}e.forEach(S(s,o),(function(t){e.addRange(i,o.getRootSymbols(t))}));var u=o.getShorthandAssignmentValueSymbol(n.parent);u&&i.push(u)}t.valueDeclaration&&146===t.valueDeclaration.kind&&e.isParameterPropertyDeclaration(t.valueDeclaration)&&e.addRange(i,o.getSymbolsOfParameterPropertyDeclaration(t.valueDeclaration,t.name));var p=c(t,o);return p&&(i.push(p),d(p)),d(t),i;function d(t){for(var n=0,s=o.getRootSymbols(t);n<s.length;n++){var a=s[n];a!==t&&i.push(a),!r&&a.parent&&96&a.parent.flags&&E(a.parent,a.name,i,e.createSymbolTable(),o)}}}function E(t,n,o,r,i){function s(e){if(e){var s=i.getTypeAtLocation(e);if(s){var a=i.getPropertyOfType(s,n);a&&o.push.apply(o,i.getRootSymbols(a)),r.set(t.escapedName,t),E(s.symbol,n,o,r,i)}}}!t||r.has(t.escapedName)||96&t.flags&&e.forEach(t.getDeclarations(),(function(t){e.isClassLike(t)?(s(e.getClassExtendsHeritageClauseElement(t)),e.forEach(e.getClassImplementsHeritageClauseElements(t),s)):230===t.kind&&e.forEach(e.getInterfaceBaseTypeNodes(t),s)}))}function S(t,n){var o=t.parent,r=n.getContextualType(o),i=function(t){if(144===t.name.kind){var n=t.name.expression;return e.isStringOrNumericLiteral(n)?n.text:void 0}return e.getTextOfIdentifierOrLiteral(t.name)}(t);if(i&&r){var s=[],a=r.getProperty(i);return a&&s.push(a),65536&r.flags&&e.forEach(r.types,(function(e){var t=e.getProperty(i);t&&s.push(t)})),s}}function C(t,n,o){var r=n.getSymbolAtLocation(t),i=n.getShorthandAssignmentValueSymbol(r.valueDeclaration);if(i)for(var s=0,a=i.getDeclarations();s<a.length;s++){var l=a[s];1&e.getMeaningFromDeclaration(l)&&o(l)}}function x(t,n,o){e.forEachChild(t,(function(e){e.kind===n&&o(e),x(e,n,o)}))}n.getReferenceEntriesForShorthandPropertyAssignment=C}(t.Core||(t.Core={}))}(e.FindAllReferences||(e.FindAllReferences={}))}(ts||(ts={})),function(e){!function(t){function n(t,n,i){var a=[],l=n.getDeclarations(),c=s(t,n,i),u=c.symbolName,p=c.symbolKind,d=c.containerName;return function(t,n,o,r,i,s){if((e.isNewExpressionTarget(n)||123===n.kind)&&32&t.flags){for(var a=0,l=t.getDeclarations();a<l.length;a++){var c=l[a];if(e.isClassLike(c))return g(c.members,!0,o,r,i,s)}e.Debug.fail("Expected declaration to have at least one class-like declaration")}return!1}(n,i,p,u,d,a)||function(t,n,o,r,i,s){if(e.isCallExpressionTarget(n)||e.isNewExpressionTarget(n)||e.isNameOfFunctionDeclaration(n))return g(t.declarations,!1,o,r,i,s);return!1}(n,i,p,u,d,a)||e.forEach(l,(function(e){a.push(r(e,p,u,d))})),a;function g(t,n,i,s,a,l){if(!t)return!1;for(var c,u=[],p=0,d=t;p<d.length;p++){var g=d[p];(n?152===g.kind:o(g))&&(u.push(g),g.body&&(c=g))}return!!u.length&&(l.push(r(c||e.lastOrUndefined(u),i,s,a)),!0)}}function o(e){switch(e.kind){case 152:case 228:case 151:case 150:return!0;default:return!1}}function r(t,n,o,r){return i(e.getNameOfDeclaration(t)||t,n,o,r)}function i(t,n,o,r){var i=t.getSourceFile();return{fileName:i.fileName,textSpan:e.createTextSpanFromNode(t,i),kind:n,name:o,containerKind:void 0,containerName:r}}function s(t,n,o){return{symbolName:t.symbolToString(n),symbolKind:e.SymbolDisplay.getSymbolKind(t,n,o),containerName:n.parent?t.symbolToString(n.parent,o):""}}function a(e,t){var n=s(e,t.symbol,t),o=n.symbolName;return r(t,n.symbolKind,o,n.containerName)}function l(e,t){for(var n=0,o=e;n<o.length;n++){var r=o[n];if(r.pos<=t&&t<=r.end)return r}}function c(t,n){return{fileName:n,textSpan:e.createTextSpanFromBounds(0,0),kind:"script",name:t,containerName:void 0,containerKind:void 0}}function u(t){return e.isRightSideOfPropertyAccess(t)?u(t.parent):t}t.getDefinitionAtPosition=function(t,s,p){var d=l(s.referencedFiles,p);if(d&&(g=e.tryResolveScriptReference(t,s,d)))return[c(d.fileName,g.fileName)];var g,h=l(s.typeReferenceDirectives,p);if(h)return(g=t.getResolvedTypeReferenceDirectives().get(h.fileName))&&g.resolvedFileName&&[c(h.fileName,g.resolvedFileName)];var f=e.getTouchingPropertyName(s,p,!0);if(f!==s){if(e.isJumpStatementTarget(f)){var _=f.text,m=e.getTargetLabel(f.parent,_);return m?[i(m,"label",_,void 0)]:void 0}var y=t.getTypeChecker(),k=function(t,n){var r=function(t){var n=u(t),o=n.parent;return o&&e.isCallLikeExpression(o)&&e.getInvokedExpression(o)===n&&o}(n),i=r&&t.getResolvedSignature(r);if(i){var s=i.declaration;if(s&&o(s))return s}return}(y,f);if(k)return[a(y,k)];var b=y.getSymbolAtLocation(f);if(b){if(2097152&b.flags&&function(e,t){if(71!==e.kind)return!1;if(e.parent===t)return!0;switch(t.kind){case 239:case 237:return!0;case 242:return 241===t.parent.kind;default:return!1}}(f,b.declarations[0])){var v=y.getAliasedSymbol(b);v.declarations&&(b=v)}if(262===f.parent.kind){var T=y.getShorthandAssignmentValueSymbol(b.valueDeclaration);if(!T)return[];var E=T.getDeclarations(),S=e.SymbolDisplay.getSymbolKind(y,T,f),C=y.symbolToString(T),x=y.symbolToString(b.parent,f);return e.map(E,(function(e){return r(e,S,C,x)}))}if(e.isPropertyName(f)&&e.isBindingElement(f.parent)&&e.isObjectBindingPattern(f.parent.parent)&&f===(f.parent.propertyName||f.parent.name)){var B=y.getTypeAtLocation(f.parent.parent);if(B){var A=e.getPropertySymbolsFromType(B,f);if(A)return e.flatMap(A,(function(e){return n(y,e,f)}))}}var I=e.getContainingObjectLiteralElement(f);return I&&y.getContextualType(I.parent)?e.flatMap(e.getPropertySymbolsFromContextualType(y,I),(function(e){return n(y,e,f)})):n(y,b,f)}}},t.getTypeDefinitionAtPosition=function(t,o,r){var i=e.getTouchingPropertyName(o,r,!0);if(i!==o){var s=t.getSymbolAtLocation(i);if(s){var a=t.getTypeOfSymbolAtLocation(s,i);if(a){if(65536&a.flags&&!(16&a.flags)){var l=[];return e.forEach(a.types,(function(o){o.symbol&&e.addRange(l,n(t,o.symbol,i))})),l}if(a.symbol)return n(t,a.symbol,i)}}}}}(e.GoToDefinition||(e.GoToDefinition={}))}(ts||(ts={})),function(e){!function(t){var n,o,r=["augments","author","argument","borrows","class","constant","constructor","constructs","default","deprecated","description","event","example","extends","field","fileOverview","function","ignore","inner","lends","link","memberOf","method","name","namespace","param","private","prop","property","public","requires","returns","see","since","static","throws","type","typedef","version"];function i(t,n){if(t)for(var o=0;o<t.length;o++)if(e.indexOf(t,t[o])===o){var r=n(t[o],o);if(r)return r}}function s(t){for(;185===t.kind;)t=t.expression;switch(t.kind){case 186:case 187:return t.parameters;case 199:for(var n=0,o=t.members;n<o.length;n++){var r=o[n];if(152===r.kind)return r.parameters}}return e.emptyArray}t.getJsDocCommentsFromDeclarations=function(t){var n=[];return i(t,(function(t){e.forEach(e.getAllJSDocs(t),(function(t){t.comment&&(n.length&&n.push(e.lineBreakPart()),n.push(e.textPart(t.comment)))}))})),n},t.getJsDocTagsFromDeclarations=function(t){var n=[];return i(t,(function(t){for(var o=0,r=e.getJSDocTags(t);o<r.length;o++){var i=r[o];276===i.kind&&n.push({name:i.tagName.text,text:i.comment})}})),n},t.getJSDocTagNameCompletions=function(){return n||(n=e.map(r,(function(e){return{name:e,kind:"keyword",kindModifiers:"",sortText:"0"}})))},t.getJSDocTagCompletions=function(){return o||(o=e.map(r,(function(e){return{name:"@"+e,kind:"keyword",kindModifiers:"",sortText:"0"}})))},t.getJSDocParameterNameCompletions=function(t){if(!e.isIdentifier(t.name))return e.emptyArray;var n=t.name.text,o=t.parent,r=o.parent;return e.isFunctionLike(r)?e.mapDefined(r.parameters,(function(r){if(e.isIdentifier(r.name)){var i=r.name.text;if(!o.tags.some((function(n){return n!==t&&e.isJSDocParameterTag(n)&&e.isIdentifier(n.name)&&n.name.escapedText===i}))&&(void 0===n||e.startsWith(i,n)))return{name:i,kind:"parameter",kindModifiers:"",sortText:"0"}}})):[]},t.getDocCommentTemplateAtPosition=function(t,n,o){if(!(e.isInString(n,o)||e.isInComment(n,o)||e.hasDocComment(n,o))){var r=e.getTokenAtPosition(n,o,!1),i=r.getStart();if(r&&!(i<o)){var a=function(t){for(var n=t;n;n=n.parent)switch(n.kind){case 228:case 151:case 152:return{commentOwner:n,parameters:n.parameters};case 229:return{commentOwner:n};case 208:var o=n.declarationList.declarations;return{commentOwner:n,parameters:1===o.length&&o[0].initializer?s(o[0].initializer):void 0};case 265:return;case 233:return 233===n.parent.kind?void 0:{commentOwner:n};case 194:var r=n;if(0===e.getSpecialPropertyAssignmentKind(r))return;return{commentOwner:n,parameters:e.isFunctionLike(r.right)?r.right.parameters:e.emptyArray}}}(r);if(a){var l=a.commentOwner,c=a.parameters;if(!(l.getStart()<o)){var u=n.getLineAndCharacterOfPosition(o),p=n.getLineStarts()[u.line],d=n.text.substr(p,u.character).replace(/\S/i,(function(){return" "})),g=e.hasJavaScriptFileExtension(n.fileName),h="";if(c)for(var f=0;f<c.length;f++){var _=c[f].name,m=71===_.kind?_.escapedText:"param"+f;h+=g?d+" * @param {any} "+m+t:d+" * @param "+m+t}var y="/**"+t+d+" * ";return{newText:y+t+h+d+" */"+(i===o?t+d:""),caretOffset:y.length}}}}}}}(e.JsDoc||(e.JsDoc={}))}(ts||(ts={})),function(e){!function(t){t.nodeCoreModuleList=["buffer","querystring","events","http","cluster","zlib","os","https","punycode","repl","readline","vm","child_process","url","dns","net","dgram","fs","path","string_decoder","tls","crypto","stream","util","assert","tty","domain","constants","process","v8","timers","console"];var n=e.arrayToSet(t.nodeCoreModuleList);t.loadSafeList=function(t,n){var o=e.readConfigFile(n,(function(e){return t.readFile(e)}));return e.createMapFromTemplate(o.config)},t.loadTypesMap=function(t,n){var o=e.readConfigFile(n,(function(e){return t.readFile(e)}));if(o.config)return e.createMapFromTemplate(o.config.simpleMap)},t.discoverTypings=function(t,o,r,i,s,a,l,c){if(!l||!l.enable)return{cachedTypingPaths:[],newTypingNames:[],filesToWatch:[]};var u=e.createMap();r=e.mapDefined(r,(function(t){var n=e.normalizePath(t);if(e.hasJavaScriptFileExtension(n))return n}));var p=[];l.include&&v(l.include,"Explicitly included types");var d=l.exclude||[],g=e.arrayToSet(r,e.getDirectoryPath);g.set(i,!0),g.forEach((function(t,n){T(e.combinePaths(n,"package.json"),p),T(e.combinePaths(n,"bower.json"),p),E(e.combinePaths(n,"bower_components"),p),E(e.combinePaths(n,"node_modules"),p)})),function(t){var n=e.mapDefined(t,(function(t){if(e.hasJavaScriptFileExtension(t)){var n=e.removeFileExtension(e.getBaseFileName(t.toLowerCase())).replace(/((?:\.|-)min(?=\.|$))|((?:-|\.)\d+)/g,"");return s.get(n)}}));n.length&&v(n,"Inferred typings from file names");e.some(t,(function(t){return e.fileExtensionIs(t,".jsx")}))&&(o&&o("Inferred 'react' typings due to presence of '.jsx' extension"),b("react"))}(r),c&&v(e.deduplicate(c.map((function(e){return n.has(e)?"node":e}))),"Inferred typings from unresolved imports"),a.forEach((function(e,t){u.has(t)&&void 0===u.get(t)&&u.set(t,e)}));for(var h=0,f=d;h<f.length;h++){var _=f[h];u.delete(_)&&o&&o("Typing for "+_+" is in exclude list, will be ignored.")}var m=[],y=[];u.forEach((function(e,t){void 0!==e?y.push(e):m.push(t)}));var k={cachedTypingPaths:y,newTypingNames:m,filesToWatch:p};return o&&o("Result: "+JSON.stringify(k)),k;function b(e){u.has(e)||u.set(e,void 0)}function v(t,n){o&&o(n+": "+JSON.stringify(t)),e.forEach(t,b)}function T(n,o){if(t.fileExists(n)){o.push(n);var r=e.readConfigFile(n,(function(e){return t.readFile(e)})).config;v(e.flatMap([r.dependencies,r.devDependencies,r.optionalDependencies,r.peerDependencies],e.getOwnKeys),"Typing names in '"+n+"' dependencies")}}function E(n,r){if(r.push(n),t.directoryExists(n)){var i=t.readDirectory(n,[".json"],void 0,void 0,2);o&&o("Searching for typing names in "+n+"; all files: "+JSON.stringify(i));for(var s=[],a=0,l=i;a<l.length;a++){var c=l[a],p=e.normalizePath(c),d=e.getBaseFileName(p);if("package.json"===d||"bower.json"===d){var g=e.readConfigFile(p,(function(e){return t.readFile(e)})).config;if(("package.json"!==d||!g._requiredBy||0!==e.filter(g._requiredBy,(function(e){return"#"===e[0]||"/"===e})).length)&&g.name){var h=g.types||g.typings;if(h){var f=e.getNormalizedAbsolutePath(h,e.getDirectoryPath(p));o&&o("    Package '"+g.name+"' provides its own types."),u.set(g.name,f)}else s.push(g.name)}}}v(s,"    Found package names")}}},function(e){e[e.Ok=0]="Ok",e[e.ScopedPackagesNotSupported=1]="ScopedPackagesNotSupported",e[e.EmptyName=2]="EmptyName",e[e.NameTooLong=3]="NameTooLong",e[e.NameStartsWithDot=4]="NameStartsWithDot",e[e.NameStartsWithUnderscore=5]="NameStartsWithUnderscore",e[e.NameContainsNonURISafeCharacters=6]="NameContainsNonURISafeCharacters"}(t.PackageNameValidationResult||(t.PackageNameValidationResult={}));t.validatePackageName=function(e){return e?e.length>214?3:46===e.charCodeAt(0)?4:95===e.charCodeAt(0)?5:/^@[^/]+\/[^/]+$/.test(e)?1:encodeURIComponent(e)!==e?6:0:2},t.renderPackageNameValidationFailure=function(t,n){switch(t){case 2:return"Package name '"+n+"' cannot be empty";case 3:return"Package name '"+n+"' should be less than 214 characters";case 4:return"Package name '"+n+"' cannot start with '.'";case 5:return"Package name '"+n+"' cannot start with '_'";case 1:return"Package '"+n+"' is scoped and currently is not supported";case 6:return"Package name '"+n+"' contains non URI safe characters";case 0:throw e.Debug.fail();default:e.Debug.assertNever(t)}}}(e.JsTyping||(e.JsTyping={}))}(ts||(ts={})),function(e){!function(t){function n(e,t){switch(e.kind){case 239:case 242:case 237:var n=t.getSymbolAtLocation(e.name),o=t.getAliasedSymbol(n);return n.escapedName!==o.escapedName;default:return!0}}function o(t){e.Debug.assert(t.length>0);for(var n=0,o=t;n<o.length;n++){if(!o[n].isCaseSensitive)return!1}return!0}function r(t,n){if(t){var o=e.getNameOfDeclaration(t);if(o){var r=e.getTextOfIdentifierOrLiteral(o);if(void 0===r)return 144===o.kind&&i(o.expression,n,!0);n.unshift(r)}}return!0}function i(t,n,o){var r=e.getTextOfIdentifierOrLiteral(t);if(void 0!==r)return o&&n.unshift(r),!0;if(179===t.kind){var s=t;return o&&n.unshift(s.name.text),i(s.expression,n,!0)}return!1}function s(t){var n=[],o=e.getNameOfDeclaration(t);if(144!==o.kind||i(o.expression,n,!1)){for(t=e.getContainerNode(t);t;){if(!r(t,n))return;t=e.getContainerNode(t)}return n}}function a(t){e.Debug.assert(t.length>0);for(var n=e.PatternMatchKind.camelCase,o=0,r=t;o<r.length;o++){var i=r[o].kind;i<n&&(n=i)}return n}function l(t,n){return t.matchKind-n.matchKind||e.compareStringsCaseInsensitive(t.name,n.name)||e.compareStrings(t.name,n.name)}function c(t){var n=t.declaration,o=e.getContainerNode(n),r=o&&e.getNameOfDeclaration(o);return{name:t.name,kind:e.getNodeKind(n),kindModifiers:e.getNodeModifiers(n),matchKind:e.PatternMatchKind[t.matchKind],isCaseSensitive:t.isCaseSensitive,fileName:t.fileName,textSpan:e.createTextSpanFromNode(n),containerName:r?r.text:"",containerKind:r?e.getNodeKind(o):""}}t.getNavigateToItems=function(t,r,i,u,p,d){for(var g=e.createPatternMatcher(u),h=[],f=function(t){if(i.throwIfCancellationRequested(),d&&e.fileExtensionIs(t.fileName,".d.ts"))return"continue";e.forEachEntry(t.getNamedDeclarations(),(function(e,i){!function(e,t,r,i,l,c){var u=e.getMatchesForLastSegmentOfPattern(t);if(!u)return;for(var p=0,d=r;p<d.length;p++){var g=d[p];if(n(g,i)){var h=u;if(!e.patternContainsDots||(h=e.getMatches(s(g),t))){var f=a(h),_=o(h);c.push({name:t,fileName:l,matchKind:f,isCaseSensitive:_,declaration:g})}}}}(g,i,e,r,t.fileName,h)}))},_=0,m=t;_<m.length;_++){f(m[_])}return h.sort(l),void 0!==p&&(h=h.slice(0,p)),h.map(c)}}(e.NavigateTo||(e.NavigateTo={}))}(ts||(ts={})),function(e){!function(t){var n,o,r,i=/\s+/g,s=[],a=[];function l(){o=void 0,n=void 0,s=[],r=void 0,a=[]}function c(e){return e.getText(o)}function u(e){return e.node.kind}function p(e,t){e.children?e.children.push(t):e.children=[t]}function d(t){e.Debug.assert(!s.length);var n={node:t,additionalNodes:void 0,parent:void 0,children:void 0,indent:0};r=n;for(var o=0,i=t.statements;o<i.length;o++){y(i[o])}return _(),e.Debug.assert(!r&&!s.length),n}function g(e){p(r,h(e))}function h(e){return{node:e,additionalNodes:void 0,parent:r,children:void 0,indent:r.indent+1}}function f(e){var t=h(e);p(r,t),s.push(r),r=t}function _(){r.children&&(k(r.children),b(r.children)),r=s.pop()}function m(e,t){f(e),y(t),_()}function y(t){if(n.throwIfCancellationRequested(),t&&!e.isToken(t))switch(t.kind){case 152:var o=t;m(o,o.body);for(var r=0,i=o.parameters;r<i.length;r++){var s=i[r];e.isParameterPropertyDeclaration(s)&&g(s)}break;case 151:case 153:case 154:case 150:e.hasDynamicName(t)||m(t,t.body);break;case 149:case 148:e.hasDynamicName(t)||g(t);break;case 239:var a=t;a.name&&g(a);var l=a.namedBindings;if(l)if(240===l.kind)g(l);else for(var c=0,u=l.elements;c<u.length;c++){g(u[c])}break;case 176:case 226:var p=t,d=p.name,h=p.initializer;e.isBindingPattern(d)?y(d):h&&function(e){switch(e.kind){case 187:case 186:case 199:return!0;default:return!1}}(h)?h.name?y(h):(f(t),e.forEachChild(h,y),_()):m(t,h);break;case 187:case 228:case 186:m(t,t.body);break;case 232:f(t);for(var k=0,b=t.members;k<b.length;k++){D(E=b[k])||g(E)}_();break;case 229:case 199:case 230:f(t);for(var v=0,T=t.members;v<T.length;v++){var E;y(E=T[v])}_();break;case 233:m(t,I(t).body);break;case 246:case 237:case 157:case 155:case 156:case 231:g(t);break;default:e.hasJSDocNodes(t)&&e.forEach(t.jsDoc,(function(t){e.forEach(t.tags,(function(e){283===e.kind&&g(e)}))})),e.forEachChild(t,y)}}function k(t){var n=e.createMap();e.filterMutate(t,(function(t){var o=e.getNameOfDeclaration(t.node),r=o&&c(o);if(!r)return!0;var i=n.get(r);if(!i)return n.set(r,t),!0;if(i instanceof Array){for(var s=0,a=i;s<a.length;s++){var l;if(u(l=a[s],t))return!1}return i.push(t),!0}return!u(l=i,t)&&(n.set(r,[l,t]),!0);function u(t,n){return!!function(e,t){return e.kind===t.kind&&(233!==e.kind||n(e,t));function n(e,t){return e.body.kind===t.body.kind&&(233!==e.body.kind||n(e.body,t.body))}}(t.node,n.node)&&(function(t,n){t.additionalNodes=t.additionalNodes||[],t.additionalNodes.push(n.node),n.additionalNodes&&(o=t.additionalNodes).push.apply(o,n.additionalNodes);t.children=e.concatenate(t.children,n.children),t.children&&(k(t.children),b(t.children));var o}(t,n),!0)}}))}function b(e){e.sort(v)}function v(t,n){var o=T(t.node),r=T(n.node);if(o&&r){var i=e.compareStringsCaseInsensitive(o,r);return 0!==i?i:u(t)-u(n)}return o?1:r?-1:u(t)-u(n)}function T(t){if(233===t.kind)return A(t);var n=e.getNameOfDeclaration(t);if(n)return e.unescapeLeadingUnderscores(e.getPropertyNameForPropertyNameNode(n));switch(t.kind){case 186:case 187:case 199:return R(t);case 283:return S(t);default:return}}function E(t){if(233===t.kind)return A(t);var n=e.getNameOfDeclaration(t);if(n){var o=c(n);if(o.length>0)return o}switch(t.kind){case 265:var r=t;return e.isExternalModule(r)?'"'+e.escapeString(e.getBaseFileName(e.removeFileExtension(e.normalizePath(r.fileName))))+'"':"<global>";case 187:case 228:case 186:case 229:case 199:return 512&e.getModifierFlags(t)?"default":R(t);case 152:return"constructor";case 156:return"new()";case 155:return"()";case 157:return"[]";case 283:return S(t);default:return"<unknown>"}}function S(e){if(e.name)return e.name.text;var t=e.parent&&e.parent.parent;if(t&&208===t.kind&&t.declarationList.declarations.length>0){var n=t.declarationList.declarations[0].name;if(71===n.kind)return n.text}return"<typedef>"}function C(t){return{text:E(t.node),kind:e.getNodeKind(t.node),kindModifiers:w(t.node),spans:B(t),childItems:e.map(t.children,C)}}function x(t){return{text:E(t.node),kind:e.getNodeKind(t.node),kindModifiers:w(t.node),spans:B(t),childItems:e.map(t.children,(function(t){return{text:E(t.node),kind:e.getNodeKind(t.node),kindModifiers:e.getNodeModifiers(t.node),spans:B(t),childItems:a,indent:0,bolded:!1,grayed:!1}}))||a,indent:t.indent,bolded:!1,grayed:!1}}function B(e){var t=[N(e.node)];if(e.additionalNodes)for(var n=0,o=e.additionalNodes;n<o.length;n++){var r=o[n];t.push(N(r))}return t}function A(t){if(e.isAmbientModule(t))return e.getTextOfNode(t.name);var n=[];for(n.push(e.getTextOfIdentifierOrLiteral(t.name));t.body&&233===t.body.kind;)t=t.body,n.push(e.getTextOfIdentifierOrLiteral(t.name));return n.join(".")}function I(e){return 233===e.body.kind?I(e.body):e}function D(e){return!e.name||144===e.name.kind}function N(t){return 265===t.kind?e.createTextSpanFromBounds(t.getFullStart(),t.getEnd()):e.createTextSpanFromNode(t,o)}function w(t){return t.parent&&226===t.parent.kind&&(t=t.parent),e.getNodeModifiers(t)}function R(t){return t.name&&e.getFullWidth(t.name)>0?e.declarationNameToString(t.name):226===t.parent.kind?e.declarationNameToString(t.parent.name):194===t.parent.kind&&58===t.parent.operatorToken.kind?c(t.parent.left).replace(i,""):261===t.parent.kind&&t.parent.name?c(t.parent.name):512&e.getModifierFlags(t)?"default":e.isClassLike(t)?"<class>":"<function>"}t.getNavigationBarItems=function(t,r){n=r,o=t;try{return e.map(function(t){var n=[];function o(e){if(r(e)&&(n.push(e),e.children))for(var t=0,i=e.children;t<i.length;t++){o(i[t])}}return o(t),n;function r(t){switch(u(t)){case 229:case 199:case 232:case 230:case 233:case 265:case 231:case 283:return!0;case 152:case 151:case 153:case 154:case 226:return o(t);case 187:case 228:case 186:return n(t);default:return!1}function n(e){if(!e.node.body)return!1;switch(u(e.parent)){case 234:case 265:case 151:case 152:return!0;default:return o(e)}}function o(t){return e.forEach(t.children,(function(e){var t=u(e);return 226!==t&&176!==t}))}}}(d(t)),x)}finally{l()}},t.getNavigationTree=function(e,t){n=t,o=e;try{return C(d(e))}finally{l()}}}(e.NavigationBar||(e.NavigationBar={}))}(ts||(ts={})),function(e){!function(t){var n="...",o=new RegExp("^\\s*//\\s*#(end)?region(?:\\s+(.*))?$");t.collectElements=function(t,r){var i=[],s=0,a=[];return function o(a){if(r.throwIfCancellationRequested(),s>40)return;e.isDeclaration(a)&&function(n){var o=e.getLeadingCommentRangesOfNode(n,t);if(o){for(var i=-1,s=-1,a=!0,l=0,p=0,d=o;p<d.length;p++){var g=d[p];r.throwIfCancellationRequested(),2===g.kind?(a&&(i=g.pos),a=!1,s=g.end,l++):3===g.kind&&(u(l,i,s),c(g,!1),l=0,s=-1,a=!0)}u(l,i,s)}}(a);switch(a.kind){case 207:if(!e.isFunctionBlock(a)){var d=a.parent,g=e.findChildOfKind(a,17,t),h=e.findChildOfKind(a,18,t);if(212===d.kind||215===d.kind||216===d.kind||214===d.kind||211===d.kind||213===d.kind||220===d.kind||260===d.kind){l(d,g,h,p(a),!0);break}if(224===d.kind){var f=d;if(f.tryBlock===a){l(d,g,h,p(a),!0);break}if(f.finallyBlock===a){var _=e.findChildOfKind(f,87,t);if(_){l(_,g,h,p(a),!0);break}}}var m=e.createTextSpanFromNode(a);i.push({textSpan:m,hintSpan:m,bannerText:n,autoCollapse:p(a)});break}case 234:var y=e.findChildOfKind(a,17,t),k=e.findChildOfKind(a,18,t);l(a.parent,y,k,p(a),!0);break;case 229:case 230:case 232:case 235:var b=e.findChildOfKind(a,17,t),v=e.findChildOfKind(a,18,t);l(a,b,v,p(a),!0);break;case 178:var T=e.findChildOfKind(a,17,t),E=e.findChildOfKind(a,18,t);l(a,T,E,p(a),!e.isArrayLiteralExpression(a.parent));break;case 177:var S=e.findChildOfKind(a,21,t),C=e.findChildOfKind(a,22,t);l(a,S,C,p(a),!e.isArrayLiteralExpression(a.parent))}s++,e.forEachChild(a,o),s--}(t),function(){for(var n=t.getLineStarts(),r=0;r<n.length;r++){var s=n[r],l=n[r+1]-1||t.getEnd(),c=t.text.substring(s,l).match(o);if(c&&!e.isInComment(t,s))if(c[1]){(d=a.pop())&&(d.textSpan.length=l-d.textSpan.start,d.hintSpan.length=l-d.textSpan.start,i.push(d))}else{var u=t.getFullText().indexOf("//",s),p=e.createTextSpanFromBounds(u,l),d={textSpan:p,hintSpan:p,bannerText:c[2]||"#region",autoCollapse:!1};a.push(d)}}}(),i.sort((function(e,t){return e.textSpan.start-t.textSpan.start}));function l(o,r,s,a,l){if(o&&r&&s){var c={textSpan:e.createTextSpanFromBounds(l?r.getFullStart():r.getStart(),s.getEnd()),hintSpan:e.createTextSpanFromNode(o,t),bannerText:n,autoCollapse:a};i.push(c)}}function c(t,o){if(t){var r={textSpan:e.createTextSpanFromBounds(t.pos,t.end),hintSpan:e.createTextSpanFromBounds(t.pos,t.end),bannerText:n,autoCollapse:o};i.push(r)}}function u(e,t,n){e>1&&c({kind:2,pos:t,end:n},!1)}function p(t){return e.isFunctionBlock(t)&&187!==t.parent.kind}}}(e.OutliningElementsCollector||(e.OutliningElementsCollector={}))}(ts||(ts={})),function(e){var t;function n(e,t,n,o){return{kind:e,punctuationStripped:t,isCaseSensitive:n,camelCaseWeight:o}}function o(e){return 0===e.subWordTextChunks.length}function r(t){if(t>=65&&t<=90)return!0;if(t<127||!e.isUnicodeIdentifierStart(t,5))return!1;var n=String.fromCharCode(t);return n===n.toUpperCase()}function i(t){if(t>=97&&t<=122)return!0;if(t<127||!e.isUnicodeIdentifierStart(t,5))return!1;var n=String.fromCharCode(t);return n===n.toLowerCase()}function s(e,t,n){for(var o=0;o<t.length;o++){if(a(e.charCodeAt(o+n))!==t.charCodeAt(o))return!1}return!0}function a(e){return e>=65&&e<=90?e-65+97:e<127?e:String.fromCharCode(e).toLowerCase().charCodeAt(0)}function l(e){return e>=48&&e<=57}function c(e){return r(e)||i(e)||l(e)||95===e||36===e}function u(e){for(var t=[],n=0,o=0,r=0;r<e.length;r++){c(e.charCodeAt(r))?(0===o&&(n=r),o++):o>0&&(t.push(p(e.substr(n,o))),o=0)}return o>0&&t.push(p(e.substr(n,o))),t}function p(e){var t=e.toLowerCase();return{text:e,textLowerCase:t,isLowerCase:e===t,characterSpans:d(e)}}function d(e){return h(e,!1)}function g(e){return h(e,!0)}function h(t,n){for(var o=[],r=0,i=1;i<t.length;i++){var s=l(t.charCodeAt(i-1)),a=l(t.charCodeAt(i)),c=y(t,n,i),u=m(t,n,i,r);(f(t.charCodeAt(i-1))||f(t.charCodeAt(i))||s!==a||c||u)&&(_(t,r,i)||o.push(e.createTextSpan(r,i-r)),r=i)}return _(t,r,t.length)||o.push(e.createTextSpan(r,t.length-r)),o}function f(e){switch(e){case 33:case 34:case 35:case 37:case 38:case 39:case 40:case 41:case 42:case 44:case 45:case 46:case 47:case 58:case 59:case 63:case 64:case 91:case 92:case 93:case 95:case 123:case 125:return!0}return!1}function _(e,t,n){for(var o=t;o<n;o++){var r=e.charCodeAt(o);if(!f(r)||95===r||36===r)return!1}return!0}function m(e,t,n,o){if(t&&n!==o&&n+1<e.length){var s=r(e.charCodeAt(n)),a=i(e.charCodeAt(n+1));if(s&&a){for(var l=o;l<n;l++)if(!r(e.charCodeAt(l)))return!1;return!0}}return!1}function y(e,t,n){var o=r(e.charCodeAt(n-1)),i=r(e.charCodeAt(n));return t?i&&!o:i}!function(e){e[e.exact=0]="exact",e[e.prefix=1]="prefix",e[e.substring=2]="substring",e[e.camelCase=3]="camelCase"}(t=e.PatternMatchKind||(e.PatternMatchKind={})),e.createPatternMatcher=function(i){var l=e.createMap(),c=(i=i.trim()).split(".").map((function(e){return{totalTextChunk:p(t=e.trim()),subWordTextChunks:u(t)};var t})),d=0===c.length||e.forEach(c,o);return{getMatches:function(t,n){if(h(n))return;var o=m(n,e.lastOrUndefined(c));if(!o)return;if(t=t||[],c.length-1>t.length)return;for(var r=o,i=c.length-2,s=t.length-1;i>=0;i-=1,s-=1){var a=c[i],l=m(t[s],a);if(!l)return;e.addRange(r,l)}return r},getMatchesForLastSegmentOfPattern:function(t){if(h(t))return;return m(t,e.lastOrUndefined(c))},patternContainsDots:c.length>1};function h(e){return d||!e}function f(e){var t=l.get(e);return t||l.set(e,t=g(e)),t}function _(o,i,a){var l=function(e,t){for(var n=e.length-t.length,o=0;o<=n;o++)if(s(e,t,o))return o;return-1}(o,i.textLowerCase);if(0===l)return i.text.length===o.length?n(t.exact,a,o===i.text):n(t.prefix,a,e.startsWith(o,i.text));var c=i.isLowerCase;if(c){if(l>0)for(var u=0,p=f(o);u<p.length;u++){var d=p[u];if(y(o,d,i.text,!0))return n(t.substring,a,y(o,d,i.text,!1))}}else if(o.indexOf(i.text)>0)return n(t.substring,a,!0);if(!c&&i.characterSpans.length>0){var g=f(o),h=k(o,g,i,!1);if(void 0!==h)return n(t.camelCase,a,!0,h);if(void 0!==(h=k(o,g,i,!0)))return n(t.camelCase,a,!1,h)}return c&&i.text.length<o.length&&l>0&&r(o.charCodeAt(l))?n(t.substring,a,!1):void 0}function m(e,t){if(!function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(32===n||42===n)return!0}return!1}(t.totalTextChunk.text)){var n=_(e,t.totalTextChunk,!1);if(n)return[n]}for(var o=void 0,r=0,i=t.subWordTextChunks;r<i.length;r++){var s=_(e,i[r],!0);if(!s)return;(o=o||[]).push(s)}return o}function y(e,t,n,o,r){var i=r?r.start:0,s=r?r.length:n.length;if(s>t.length)return!1;if(o)for(var l=0;l<s;l++){var c=n.charCodeAt(i+l),u=e.charCodeAt(t.start+l);if(a(c)!==a(u))return!1}else for(l=0;l<s;l++){if((c=n.charCodeAt(i+l))!==(u=e.charCodeAt(t.start+l)))return!1}return!0}function k(t,n,o,i){for(var s=o.characterSpans,a=0,l=0,c=void 0,u=void 0;;){if(l===s.length){var p=0;return u&&(p+=1),0===c&&(p+=2),p}if(a===n.length)return;for(var d=n[a],g=!1;l<s.length;l++){var h=s[l];if(g&&(!r(o.text.charCodeAt(s[l-1].start))||!r(o.text.charCodeAt(s[l].start))))break;if(!y(t,d,o.text,i,h))break;g=!0,c=void 0===c?a:c,u=void 0===u||u,d=e.createTextSpan(d.start+h.length,d.length-h.length)}g||void 0===u||(u=!1),a++}}},e.breakIntoCharacterSpans=d,e.breakIntoWordSpans=g}(ts||(ts={})),function(e){e.preProcessFile=function(t,n,o){void 0===n&&(n=!0),void 0===o&&(o=!1);var r,i,s=[],a=[],l=[],c=!1,u=0,p=!1;function d(){var t=e.scanner.scan();return 17===t?u++:18===t&&u--,t}function g(){var t=e.scanner.getTokenValue(),n=e.scanner.getTokenPos();return{fileName:t,pos:n,end:n+t.length}}function h(){l.push(g()),f()}function f(){0===u&&(p=!0)}function _(){var t=e.scanner.getToken();return 124===t&&(128===(t=d())&&9===(t=d())&&(r||(r=[]),r.push({ref:g(),depth:u})),!0)}function m(){var t=e.scanner.getToken();if(91===t){if(19===(t=d())){if(9===(t=d()))return h(),!0}else{if(9===t)return h(),!0;if(71===t||e.isKeyword(t))if(140===(t=d())){if(9===(t=d()))return h(),!0}else if(58===t){if(k(!0))return!0}else{if(26!==t)return!0;t=d()}if(17===t){for(t=d();18!==t&&1!==t;)t=d();18===t&&140===(t=d())&&9===(t=d())&&h()}else 39===t&&118===(t=d())&&(71===(t=d())||e.isKeyword(t))&&140===(t=d())&&9===(t=d())&&h()}return!0}return!1}function y(){var t=e.scanner.getToken();if(84===t){if(f(),17===(t=d())){for(t=d();18!==t&&1!==t;)t=d();18===t&&140===(t=d())&&9===(t=d())&&h()}else if(39===t)140===(t=d())&&9===(t=d())&&h();else if(91===t&&(71===(t=d())||e.isKeyword(t))&&58===(t=d())&&k(!0))return!0;return!0}return!1}function k(t){var n=t?d():e.scanner.getToken();return 132===n&&(19===(n=d())&&9===(n=d())&&h(),!0)}function b(){var t=e.scanner.getToken();if(71===t&&"define"===e.scanner.getTokenValue()){if(19!==(t=d()))return!0;if(9===(t=d())){if(26!==(t=d()))return!0;t=d()}if(21!==t)return!0;for(t=d();22!==t&&1!==t;)9===t&&h(),t=d();return!0}return!1}if(n&&function(){for(e.scanner.setText(t),d();1!==e.scanner.getToken();)_()||m()||y()||o&&(k(!1)||b())||d();e.scanner.setText(void 0)}(),i=e.getLeadingCommentRanges(t,0),e.forEach(i,(function(n){var o=t.substring(n.pos,n.end),r=e.getFileReferenceFromReferencePath(o,n);if(r){c=r.isNoDefaultLib;var i=r.fileReference;i&&(r.isTypeReferenceDirective?a:s).push(i)}})),p){if(r)for(var v=0,T=r;v<T.length;v++){var E=T[v];l.push(E.ref)}return{referencedFiles:s,typeReferenceDirectives:a,importedFiles:l,isLibFile:c,ambientExternalModules:void 0}}var S=void 0;if(r)for(var C=0,x=r;C<x.length;C++){0===(E=x[C]).depth?(S||(S=[]),S.push(E.ref.fileName)):l.push(E.ref)}return{referencedFiles:s,typeReferenceDirectives:a,importedFiles:l,isLibFile:c,ambientExternalModules:S}}}(ts||(ts={})),function(e){!function(t){function n(e,t,n,o,i,s){return{canRename:!0,kind:n,displayName:e,localizedErrorMessage:void 0,fullDisplayName:t,kindModifiers:o,triggerSpan:r(i,s)}}function o(t){return{canRename:!1,localizedErrorMessage:e.getLocaleSpecificMessage(t),displayName:void 0,fullDisplayName:void 0,kind:void 0,kindModifiers:void 0,triggerSpan:void 0}}function r(t,n){var o=t.getStart(n),r=t.getWidth(n);return 9===t.kind&&(o+=1,r-=2),e.createTextSpan(o,r)}t.getRenameInfo=function(t,r,i,s,a){var l=e.memoize((function(){return i(e.normalizePath(r))})),c=e.getTouchingWord(s,a,!0);return(c&&function(t){switch(t.kind){case 71:case 9:case 99:return!0;case 8:return e.isLiteralNameOfPropertyDeclarationOrIndexAccess(t);default:return!1}}(c)?function(t,r,i,s){var a=r.getSymbolAtLocation(t);if(a){var l=a.getDeclarations();if(l&&l.length>0){if(e.some(l,s))return o(e.Diagnostics.You_cannot_rename_elements_that_are_defined_in_the_standard_TypeScript_library);if(71===t.kind&&79===t.originalKeywordKind&&1536&a.parent.flags)return;var c=e.stripQuotes(e.getDeclaredName(r,a,t)),u=e.SymbolDisplay.getSymbolKind(r,a,t);return u?n(c,r.getFullyQualifiedName(a),u,e.SymbolDisplay.getSymbolModifiers(a),t,i):void 0}}else if(9===t.kind){return s(t)?o(e.Diagnostics.You_cannot_rename_elements_that_are_defined_in_the_standard_TypeScript_library):n(c=e.stripQuotes(t.text),c,"var","",t,i)}}(c,t,s,(function(t){if(!r)return!1;var n=t.getSourceFile();return i(e.normalizePath(n.fileName))===l()})):void 0)||o(e.Diagnostics.You_cannot_rename_this_element)}}(e.Rename||(e.Rename={}))}(ts||(ts={})),function(e){!function(t){function n(t,n,r){if(e.isCallOrNewExpression(t.parent)){var i=t.parent,s=void 0,a=void 0;if(27===t.kind||19===t.kind)s=function(t,n,o){var r=t.getChildren(o),i=r.indexOf(n);return e.Debug.assert(i>=0&&r.length>i+1),r[i+1]}(i,t,r),e.Debug.assert(void 0!==s),a=0;else{if(!(s=e.findContainingList(t)))return;a=function(e,t){for(var n=0,o=e.getChildren(),r=0,i=o;r<i.length;r++){var s=i[r];if(s===t)break;26!==s.kind&&n++}return n}(s,t)}var l=i.typeArguments&&i.typeArguments.pos===s.pos?0:1,c=function(t){var n=t.getChildren(),o=e.countWhere(n,(function(e){return 26!==e.kind}));n.length>0&&26===e.lastOrUndefined(n).kind&&o++;return o}(s);return 0!==a&&e.Debug.assertLessThan(a,c),{kind:l,invocation:i,argumentsSpan:function(t,n){var o=t.getFullStart(),r=e.skipTrivia(n.text,t.getEnd(),!1);return e.createTextSpan(o,r-o)}(s,r),argumentIndex:a,argumentCount:c}}if(13===t.kind&&183===t.parent.kind){if(e.isInsideTemplateLiteral(t,n))return o(t.parent,0,r)}else{if(14===t.kind&&183===t.parent.parent.kind){var u=(p=t.parent).parent;return e.Debug.assert(196===p.kind),o(u,a=e.isInsideTemplateLiteral(t,n)?0:1,r)}if(205===t.parent.kind&&183===t.parent.parent.parent.kind){var p,d=t.parent;u=(p=d.parent).parent;if(e.Debug.assert(196===p.kind),16===t.kind&&!e.isInsideTemplateLiteral(t,n))return;return o(u,a=function(t,n,o){if(e.Debug.assert(o>=n.getStart(),"Assumed 'position' could not occur before node."),e.isTemplateLiteralKind(n.kind))return e.isInsideTemplateLiteral(n,o)?0:t+2;return t+1}(p.templateSpans.indexOf(d),t,n),r)}if(t.parent&&e.isJsxOpeningLikeElement(t.parent)){var g=t.parent.attributes.getFullStart(),h=e.skipTrivia(r.text,t.parent.attributes.getEnd(),!1);return{kind:3,invocation:t.parent,argumentsSpan:e.createTextSpan(g,h-g),argumentIndex:0,argumentCount:1}}}}function o(t,n,o){var i=13===t.template.kind?1:t.template.templateSpans.length+1;return 0!==n&&e.Debug.assertLessThan(n,i),{kind:2,invocation:t,argumentsSpan:r(t,o),argumentIndex:n,argumentCount:i}}function r(t,n){var o=t.template,r=o.getStart(),i=o.getEnd();196===o.kind&&(0===e.lastOrUndefined(o.templateSpans).literal.getFullWidth()&&(i=e.skipTrivia(n.text,i,!1)));return e.createTextSpan(r,i-r)}function i(t,o,r){for(var i=t;265!==i.kind;i=i.parent){if(e.isFunctionBlock(i))return;(i.pos<i.parent.pos||i.end>i.parent.end)&&e.Debug.fail("Node of kind "+i.kind+" is not a subspan of its parent of kind "+i.parent.kind);var s=n(i,o,r);if(s)return s}}function s(t,n,o,r){var i=o.argumentCount,s=o.argumentsSpan,a=o.invocation,l=o.argumentIndex,c=0===o.kind,u=e.getInvokedExpression(a),p=r.getSymbolAtLocation(u),d=p&&e.symbolToDisplayParts(r,p,void 0,void 0),g=e.map(t,(function(t){var n,o,i=[],s=[];if(d&&e.addRange(i,d),c){o=!1,i.push(e.punctuationPart(27));var l=(t.target||t).typeParameters;n=l&&l.length>0?e.map(l,_):e.emptyArray,s.push(e.punctuationPart(29));var u=e.mapToDisplayParts((function(e){return r.getSymbolDisplayBuilder().buildDisplayForParametersAndDelimiters(t.thisParameter,t.parameters,e,a)}));e.addRange(s,u)}else{o=t.hasRestParameter;var p=e.mapToDisplayParts((function(e){return r.getSymbolDisplayBuilder().buildDisplayForTypeParametersAndDelimiters(t.typeParameters,e,a)}));e.addRange(i,p),i.push(e.punctuationPart(19)),n=e.map(t.parameters,f),s.push(e.punctuationPart(20))}var g=e.mapToDisplayParts((function(e){return r.getSymbolDisplayBuilder().buildReturnTypeDisplay(t,e,a)}));return e.addRange(s,g),{isVariadic:o,prefixDisplayParts:i,suffixDisplayParts:s,separatorDisplayParts:[e.punctuationPart(26),e.spacePart()],parameters:n,documentation:t.getDocumentationComment(),tags:t.getJsDocTags()}}));0!==l&&e.Debug.assertLessThan(l,i);var h=t.indexOf(n);return e.Debug.assert(-1!==h),{items:g,applicableSpan:s,selectedItemIndex:h,argumentIndex:l,argumentCount:i};function f(t){var n=e.mapToDisplayParts((function(e){return r.getSymbolDisplayBuilder().buildParameterDisplay(t,e,a)}));return{name:t.name,documentation:t.getDocumentationComment(),displayParts:n,isOptional:r.isOptionalParameter(t.valueDeclaration)}}function _(t){var n=e.mapToDisplayParts((function(e){return r.getSymbolDisplayBuilder().buildTypeParameterDisplay(t,e,a)}));return{name:t.symbol.name,documentation:e.emptyArray,displayParts:n,isOptional:!1}}}!function(e){e[e.TypeArguments=0]="TypeArguments",e[e.CallArguments=1]="CallArguments",e[e.TaggedTemplateArguments=2]="TaggedTemplateArguments",e[e.JSXAttributesArguments=3]="JSXAttributesArguments"}(t.ArgumentListKind||(t.ArgumentListKind={})),t.getSignatureHelpItems=function(t,n,o,r){var a=t.getTypeChecker(),l=e.findTokenOnLeftOfPosition(n,o);if(l){var c=i(l,o,n);if(c){r.throwIfCancellationRequested();var u=c.invocation,p=[],d=a.getResolvedSignature(u,p,c.argumentCount);return r.throwIfCancellationRequested(),p.length?s(p,d,c,a):e.isSourceFileJavaScript(n)?function(e,t){if(181!==e.invocation.kind)return;var n=e.invocation.expression,o=71===n.kind?n:179===n.kind?n.name:void 0;if(!o||!o.escapedText)return;for(var r=t.getTypeChecker(),i=0,a=t.getSourceFiles();i<a.length;i++){var l=a[i].getNamedDeclarations().get(o.text);if(l)for(var c=0,u=l;c<u.length;c++){var p=u[c],d=p.symbol;if(d){var g=r.getTypeOfSymbolAtLocation(d,p);if(g){var h=g.getCallSignatures();if(h&&h.length)return s(h,h[0],e,r)}}}}}(c,t):void 0}}},t.getImmediatelyContainingArgumentInfo=n,t.getContainingArgumentInfo=i}(e.SignatureHelp||(e.SignatureHelp={}))}(ts||(ts={})),function(e){!function(t){function n(t,n,r){var i=e.getCombinedLocalAndExportSymbolFlags(n);if(32&i)return e.getDeclarationOfKind(n,199)?"local class":"class";if(384&i)return"enum";if(524288&i)return"type";if(64&i)return"interface";if(262144&i)return"type parameter";var s=o(t,n,r);if(""===s){if(262144&i)return"type parameter";if(8&i)return"enum member";if(2097152&i)return"alias";if(1536&i)return"module"}return s}function o(t,n,o){if(t.isUndefinedSymbol(n))return"var";if(t.isArgumentsSymbol(n))return"local var";if(99===o.kind&&e.isExpression(o))return"parameter";var i=e.getCombinedLocalAndExportSymbolFlags(n);if(3&i)return e.isFirstDeclarationOfSymbolParameter(n)?"parameter":n.valueDeclaration&&e.isConst(n.valueDeclaration)?"const":e.forEach(n.declarations,e.isLet)?"let":r(n)?"local var":"var";if(16&i)return r(n)?"local function":"function";if(32768&i)return"getter";if(65536&i)return"setter";if(8192&i)return"method";if(16384&i)return"constructor";if(4&i){if(33554432&i&&6&n.checkFlags){var s=e.forEach(t.getRootSymbols(n),(function(t){var n=t.getFlags();if(98311&n)return"property";e.Debug.assert(!!(8208&n))}));return s||(t.getTypeOfSymbolAtLocation(n,o).getCallSignatures().length?"method":"property")}return o.parent&&e.isJsxAttribute(o.parent)?"JSX attribute":"property"}return""}function r(t){return!t.parent&&e.forEach(t.declarations,(function(t){if(186===t.kind)return!0;if(226!==t.kind&&228!==t.kind)return!1;for(var n=t.parent;!e.isFunctionBlock(n);n=n.parent)if(265===n.kind||234===n.kind)return!1;return!0}))}t.getSymbolKind=n,t.getSymbolModifiers=function(t){return t&&t.declarations&&t.declarations.length>0?e.getNodeModifiers(t.declarations[0]):""},t.getSymbolDisplayPartsDocumentationAndSymbolKind=function(t,r,i,s,a,l){void 0===l&&(l=e.getMeaningFromLocation(a));var c,u,p,d,g=[],h=e.getCombinedLocalAndExportSymbolFlags(r),f=o(t,r,a),_=99===a.kind&&e.isExpression(a);if(""!==f||32&h||2097152&h){"getter"!==f&&"setter"!==f||(f="property");var m=void 0;if(d=_?t.getTypeAtLocation(a):t.getTypeOfSymbolAtLocation(r.exportSymbol||r,a),a.parent&&179===a.parent.kind){var y=a.parent.name;(y===a||y&&0===y.getFullWidth())&&(a=a.parent)}var k=void 0;if(e.isCallOrNewExpression(a)?k=a:(e.isCallExpressionTarget(a)||e.isNewExpressionTarget(a)||a.parent&&e.isJsxOpeningLikeElement(a.parent)&&e.isFunctionLike(r.valueDeclaration))&&(k=a.parent),k){m=t.getResolvedSignature(k,[]);var b=182===k.kind||e.isCallExpression(k)&&97===k.expression.kind,v=b?d.getConstructSignatures():d.getCallSignatures();if(e.contains(v,m.target)||e.contains(v,m)||(m=v.length?v[0]:void 0),m){switch(b&&32&h?(f="constructor",O(d.symbol,f)):2097152&h?(P(f="alias"),g.push(e.spacePart()),b&&(g.push(e.keywordPart(94)),g.push(e.spacePart())),R(r)):O(r,f),f){case"JSX attribute":case"property":case"var":case"const":case"let":case"parameter":case"local var":g.push(e.punctuationPart(56)),g.push(e.spacePart()),b&&(g.push(e.keywordPart(94)),g.push(e.spacePart())),32768&d.flags&&16&d.objectFlags||!d.symbol||e.addRange(g,e.symbolToDisplayParts(t,d.symbol,s,void 0,1)),L(m,v,16);break;default:L(m,v)}p=!0}}else if(e.isNameOfFunctionDeclaration(a)&&!(98304&h)||123===a.kind&&152===a.parent.kind){var T=a.parent;if(e.find(r.declarations,(function(e){return e===(123===a.kind?T.parent:T)}))){v=152===T.kind?d.getNonNullableType().getConstructSignatures():d.getNonNullableType().getCallSignatures();m=t.isImplementationOfOverload(T)?v[0]:t.getSignatureFromDeclaration(T),152===T.kind?(f="constructor",O(d.symbol,f)):O(155!==T.kind||2048&d.symbol.flags||4096&d.symbol.flags?r:d.symbol,f),L(m,v),p=!0}}}if(32&h&&!p&&!_&&(e.getDeclarationOfKind(r,199)?P("local class"):g.push(e.keywordPart(75)),g.push(e.spacePart()),R(r),M(r,i)),64&h&&2&l&&(N(),g.push(e.keywordPart(109)),g.push(e.spacePart()),R(r),M(r,i)),524288&h&&(N(),g.push(e.keywordPart(138)),g.push(e.spacePart()),R(r),M(r,i),g.push(e.spacePart()),g.push(e.operatorPart(58)),g.push(e.spacePart()),e.addRange(g,e.typeToDisplayParts(t,t.getDeclaredTypeOfSymbol(r),s,1024))),384&h&&(N(),e.forEach(r.declarations,e.isConstEnumDeclaration)&&(g.push(e.keywordPart(76)),g.push(e.spacePart())),g.push(e.keywordPart(83)),g.push(e.spacePart()),R(r)),1536&h){N();var E=(I=e.getDeclarationOfKind(r,233))&&I.name&&71===I.name.kind;g.push(e.keywordPart(E?129:128)),g.push(e.spacePart()),R(r)}if(262144&h&&2&l)if(N(),g.push(e.punctuationPart(19)),g.push(e.textPart("type parameter")),g.push(e.punctuationPart(20)),g.push(e.spacePart()),R(r),r.parent)w(),R(r.parent,s),M(r.parent,s);else{var S=e.getDeclarationOfKind(r,145);if(e.Debug.assert(void 0!==S),I=S.parent)if(e.isFunctionLikeKind(I.kind)){w();m=t.getSignatureFromDeclaration(I);156===I.kind?(g.push(e.keywordPart(94)),g.push(e.spacePart())):155!==I.kind&&I.name&&R(I.symbol),e.addRange(g,e.signatureToDisplayParts(t,m,i,64))}else 231===I.kind&&(w(),g.push(e.keywordPart(138)),g.push(e.spacePart()),R(I.symbol),M(I.symbol,i))}if(8&h&&(f="enum member",O(r,"enum member"),264===(I=r.declarations[0]).kind)){var C=t.getConstantValue(I);void 0!==C&&(g.push(e.spacePart()),g.push(e.operatorPart(58)),g.push(e.spacePart()),g.push(e.displayPart(e.getTextOfConstantValue(C),"number"==typeof C?e.SymbolDisplayPartKind.numericLiteral:e.SymbolDisplayPartKind.stringLiteral)))}if(2097152&h){switch(N(),r.declarations[0].kind){case 236:g.push(e.keywordPart(84)),g.push(e.spacePart()),g.push(e.keywordPart(129));break;case 243:g.push(e.keywordPart(84)),g.push(e.spacePart()),g.push(e.keywordPart(r.declarations[0].isExportEquals?58:79));break;default:g.push(e.keywordPart(91))}g.push(e.spacePart()),R(r),e.forEach(r.declarations,(function(n){if(237===n.kind){var o=n;if(e.isExternalModuleImportEqualsDeclaration(o))g.push(e.spacePart()),g.push(e.operatorPart(58)),g.push(e.spacePart()),g.push(e.keywordPart(132)),g.push(e.punctuationPart(19)),g.push(e.displayPart(e.getTextOfNode(e.getExternalModuleImportEqualsDeclarationExpression(o)),e.SymbolDisplayPartKind.stringLiteral)),g.push(e.punctuationPart(20));else{var r=t.getSymbolAtLocation(o.moduleReference);r&&(g.push(e.spacePart()),g.push(e.operatorPart(58)),g.push(e.spacePart()),R(r,s))}return!0}}))}if(!p)if(""!==f){if(d)if(_?(N(),g.push(e.keywordPart(99))):O(r,f),"property"===f||"JSX attribute"===f||3&h||"local var"===f||_)if(g.push(e.punctuationPart(56)),g.push(e.spacePart()),d.symbol&&262144&d.symbol.flags){var x=e.mapToDisplayParts((function(e){t.getSymbolDisplayBuilder().buildTypeParameterDisplay(d,e,s)}));e.addRange(g,x)}else e.addRange(g,e.typeToDisplayParts(t,d,s));else if(16&h||8192&h||16384&h||131072&h||98304&h||"method"===f){(v=d.getNonNullableType().getCallSignatures()).length&&L(v[0],v)}}else f=n(t,r,a);if(!c&&(c=r.getDocumentationComment(),u=r.getJsDocTags(),0===c.length&&4&h&&r.parent&&e.forEach(r.parent.declarations,(function(e){return 265===e.kind}))))for(var B=0,A=r.declarations;B<A.length;B++){var I;if((I=A[B]).parent&&194===I.parent.kind){var D=t.getSymbolAtLocation(I.parent.right);if(D&&(c=D.getDocumentationComment(),u=D.getJsDocTags(),c.length>0))break}}return{displayParts:g,documentation:c,symbolKind:f,tags:u};function N(){g.length&&g.push(e.lineBreakPart())}function w(){g.push(e.spacePart()),g.push(e.keywordPart(92)),g.push(e.spacePart())}function R(n,o){var r=e.symbolToDisplayParts(t,n,o||i,void 0,3);e.addRange(g,r)}function O(t,n){N(),n&&(P(n),g.push(e.spacePart()),R(t))}function P(t){switch(t){case"var":case"function":case"let":case"const":case"constructor":return void g.push(e.textOrKeywordPart(t));default:return g.push(e.punctuationPart(19)),g.push(e.textOrKeywordPart(t)),void g.push(e.punctuationPart(20))}}function L(n,o,r){e.addRange(g,e.signatureToDisplayParts(t,n,s,64|r)),o.length>1&&(g.push(e.spacePart()),g.push(e.punctuationPart(19)),g.push(e.operatorPart(37)),g.push(e.displayPart((o.length-1).toString(),e.SymbolDisplayPartKind.numericLiteral)),g.push(e.spacePart()),g.push(e.textPart(2===o.length?"overload":"overloads")),g.push(e.punctuationPart(20))),c=n.getDocumentationComment(),u=n.getJsDocTags()}function M(n,o){var r=e.mapToDisplayParts((function(e){t.getSymbolDisplayBuilder().buildTypeParameterDisplayFromSymbol(n,e,o)}));e.addRange(g,r)}}}(e.SymbolDisplay||(e.SymbolDisplay={}))}(ts||(ts={})),function(e){function t(t,n){var r=[],i=n.compilerOptions?o(n.compilerOptions,r):e.getDefaultCompilerOptions();i.isolatedModules=!0,i.suppressOutputPathCheck=!0,i.allowNonTsExtensions=!0,i.noLib=!0,i.lib=void 0,i.types=void 0,i.noEmit=void 0,i.noEmitOnError=void 0,i.paths=void 0,i.rootDirs=void 0,i.declaration=void 0,i.declarationDir=void 0,i.out=void 0,i.outFile=void 0,i.noResolve=!0;var s=n.fileName||(i.jsx?"module.tsx":"module.ts"),a=e.createSourceFile(s,t,i.target);n.moduleName&&(a.moduleName=n.moduleName),n.renamedDependencies&&(a.renamedDependencies=e.createMapFromTemplate(n.renamedDependencies));var l,c,u=e.getNewLineCharacter(i),p={getSourceFile:function(t){return t===e.normalizePath(s)?a:void 0},writeFile:function(t,n){e.fileExtensionIs(t,".map")?(e.Debug.assertEqual(c,void 0,"Unexpected multiple source map outputs, file:",t),c=n):(e.Debug.assertEqual(l,void 0,"Unexpected multiple outputs, file:",t),l=n)},getDefaultLibFileName:function(){return"lib.d.ts"},useCaseSensitiveFileNames:function(){return!1},getCanonicalFileName:function(e){return e},getCurrentDirectory:function(){return""},getNewLine:function(){return u},fileExists:function(e){return e===s},readFile:function(){return""},directoryExists:function(){return!0},getDirectories:function(){return[]}},d=e.createProgram([s],i,p);return n.reportDiagnostics&&(e.addRange(r,d.getSyntacticDiagnostics(a)),e.addRange(r,d.getOptionsDiagnostics())),d.emit(void 0,void 0,void 0,void 0,n.transformers),e.Debug.assert(void 0!==l,"Output generation failed"),{outputText:l,diagnostics:r,sourceMapText:c}}var n;function o(t,o){n=n||e.filter(e.optionDeclarations,(function(t){return"object"==typeof t.type&&!e.forEachEntry(t.type,(function(e){return"number"!=typeof e}))})),t=e.cloneCompilerOptions(t);for(var r=function(n){if(!e.hasProperty(t,n.name))return"continue";var r=t[n.name];e.isString(r)?t[n.name]=e.parseCustomTypeOption(n,r,o):e.forEachEntry(n.type,(function(e){return e===r}))||o.push(e.createCompilerDiagnosticForInvalidCustomType(n))},i=0,s=n;i<s.length;i++){r(s[i])}return t}e.transpileModule=t,e.transpile=function(n,o,r,i,s){var a=t(n,{compilerOptions:o,fileName:r,reportDiagnostics:!!i,moduleName:s});return e.addRange(i,a.diagnostics),a.outputText},e.fixupCompilerOptions=o}(ts||(ts={})),function(e){!function(t){var n,o=e.createScanner(5,!1,0),r=e.createScanner(5,!1,1);!function(e){e[e.Scan=0]="Scan",e[e.RescanGreaterThanToken=1]="RescanGreaterThanToken",e[e.RescanSlashToken=2]="RescanSlashToken",e[e.RescanTemplateToken=3]="RescanTemplateToken",e[e.RescanJsxIdentifier=4]="RescanJsxIdentifier",e[e.RescanJsxText=5]="RescanJsxText"}(n||(n={})),t.getFormattingScanner=function(t,n,i,s,a){var l=1===n?r:o;l.setText(t),l.setTextPos(i);var c,u,p,d,g,h=!0,f=a({advance:function(){g=void 0,l.getStartPos()!==i?h=u&&4===e.lastOrUndefined(u).kind:l.scan();c=void 0,u=void 0;var t=l.getStartPos();for(;t<s;){var n=l.getToken();if(!e.isTrivia(n))break;l.scan();var o={pos:t,end:l.getStartPos(),kind:n};t=l.getStartPos(),c=e.append(c,o)}p=l.getStartPos()},readTokenInfo:function(t){e.Debug.assert(_());var n=function(e){switch(e.kind){case 31:case 66:case 67:case 47:case 46:return!0}return!1}(t)?1:(r=t,12===r.kind?2:function(e){return 15===e.kind||16===e.kind}(t)?3:function(t){if(t.parent)switch(t.parent.kind){case 253:case 251:case 252:case 250:return e.isKeyword(t.kind)||71===t.kind}return!1}(t)?4:(o=t,10===o.kind?5:0));var o;var r;if(g&&n===d)return m(g,t);l.getStartPos()!==p&&(e.Debug.assert(void 0!==g),l.setTextPos(p),l.scan());var i=function(t,n){var o=l.getToken();switch(d=0,n){case 1:if(29===o){d=1;var r=l.reScanGreaterToken();return e.Debug.assert(t.kind===r),r}break;case 2:if(41===(i=o)||63===i){d=2;r=l.reScanSlashToken();return e.Debug.assert(t.kind===r),r}break;case 3:if(18===o)return d=3,l.reScanTemplateToken();break;case 4:return d=4,l.scanJsxIdentifier();case 5:return d=5,l.reScanJsxToken();case 0:break;default:e.Debug.assertNever(n)}var i;return o}(t,n),a={pos:l.getStartPos(),end:l.getTextPos(),kind:i};u&&(u=void 0);for(;l.getStartPos()<s&&(i=l.scan(),e.isTrivia(i));){var h={pos:l.getStartPos(),end:l.getTextPos(),kind:i};if(u||(u=[]),u.push(h),4===i){l.scan();break}}return m(g={leadingTrivia:c,trailingTrivia:u,token:a},t)},isOnToken:_,getCurrentLeadingTrivia:function(){return c},lastTrailingTriviaWasNewLine:function(){return h},skipToEndOf:function(e){l.setTextPos(e.end),p=l.getStartPos(),d=void 0,g=void 0,h=!1,c=void 0,u=void 0}});return g=void 0,l.setText(void 0),f;function _(){var t=g?g.token.kind:l.getToken();return(g?g.token.pos:l.getStartPos())<s&&1!==t&&!e.isTrivia(t)}function m(t,n){return e.isToken(n)&&t.token.kind!==n.kind&&(t.token.kind=n.kind),t}}}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(t){var n=function(){function t(e,t,n){this.sourceFile=e,this.formattingRequestKind=t,this.options=n}return t.prototype.updateContext=function(t,n,o,r,i){e.Debug.assert(void 0!==t,"currentTokenSpan is null"),e.Debug.assert(void 0!==n,"currentTokenParent is null"),e.Debug.assert(void 0!==o,"nextTokenSpan is null"),e.Debug.assert(void 0!==r,"nextTokenParent is null"),e.Debug.assert(void 0!==i,"commonParent is null"),this.currentTokenSpan=t,this.currentTokenParent=n,this.nextTokenSpan=o,this.nextTokenParent=r,this.contextNode=i,this.contextNodeAllOnSameLine=void 0,this.nextNodeAllOnSameLine=void 0,this.tokensAreOnSameLine=void 0,this.contextNodeBlockIsOnOneLine=void 0,this.nextNodeBlockIsOnOneLine=void 0},t.prototype.ContextNodeAllOnSameLine=function(){return void 0===this.contextNodeAllOnSameLine&&(this.contextNodeAllOnSameLine=this.NodeIsOnOneLine(this.contextNode)),this.contextNodeAllOnSameLine},t.prototype.NextNodeAllOnSameLine=function(){return void 0===this.nextNodeAllOnSameLine&&(this.nextNodeAllOnSameLine=this.NodeIsOnOneLine(this.nextTokenParent)),this.nextNodeAllOnSameLine},t.prototype.TokensAreOnSameLine=function(){if(void 0===this.tokensAreOnSameLine){var e=this.sourceFile.getLineAndCharacterOfPosition(this.currentTokenSpan.pos).line,t=this.sourceFile.getLineAndCharacterOfPosition(this.nextTokenSpan.pos).line;this.tokensAreOnSameLine=e===t}return this.tokensAreOnSameLine},t.prototype.ContextNodeBlockIsOnOneLine=function(){return void 0===this.contextNodeBlockIsOnOneLine&&(this.contextNodeBlockIsOnOneLine=this.BlockIsOnOneLine(this.contextNode)),this.contextNodeBlockIsOnOneLine},t.prototype.NextNodeBlockIsOnOneLine=function(){return void 0===this.nextNodeBlockIsOnOneLine&&(this.nextNodeBlockIsOnOneLine=this.BlockIsOnOneLine(this.nextTokenParent)),this.nextNodeBlockIsOnOneLine},t.prototype.NodeIsOnOneLine=function(e){return this.sourceFile.getLineAndCharacterOfPosition(e.getStart(this.sourceFile)).line===this.sourceFile.getLineAndCharacterOfPosition(e.getEnd()).line},t.prototype.BlockIsOnOneLine=function(t){var n=e.findChildOfKind(t,17,this.sourceFile),o=e.findChildOfKind(t,18,this.sourceFile);return!(!n||!o)&&this.sourceFile.getLineAndCharacterOfPosition(n.getEnd()).line===this.sourceFile.getLineAndCharacterOfPosition(o.getStart(this.sourceFile)).line},t}();t.FormattingContext=n}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(e){!function(e){e[e.FormatDocument=0]="FormatDocument",e[e.FormatSelection=1]="FormatSelection",e[e.FormatOnEnter=2]="FormatOnEnter",e[e.FormatOnSemicolon=3]="FormatOnSemicolon",e[e.FormatOnOpeningCurlyBrace=4]="FormatOnOpeningCurlyBrace",e[e.FormatOnClosingCurlyBrace=5]="FormatOnClosingCurlyBrace"}(e.FormattingRequestKind||(e.FormattingRequestKind={}))}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(e){var t=function(e,t,n){void 0===n&&(n=0),this.Descriptor=e,this.Operation=t,this.Flag=n};e.Rule=t}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(e){!function(e){e[e.Ignore=1]="Ignore",e[e.Space=2]="Space",e[e.NewLine=4]="NewLine",e[e.Delete=8]="Delete"}(e.RuleAction||(e.RuleAction={}))}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(e){var t=function(){function t(e,t){this.LeftTokenRange=e,this.RightTokenRange=t}return t.prototype.toString=function(){return"[leftRange="+this.LeftTokenRange+",rightRange="+this.RightTokenRange+"]"},t.create1=function(n,o){return t.create4(e.Shared.TokenRange.FromToken(n),e.Shared.TokenRange.FromToken(o))},t.create2=function(n,o){return t.create4(n,e.Shared.TokenRange.FromToken(o))},t.create3=function(n,o){return t.create4(e.Shared.TokenRange.FromToken(n),o)},t.create4=function(e,n){return new t(e,n)},t}();e.RuleDescriptor=t}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(e){!function(e){e[e.None=0]="None",e[e.CanDeleteNewLines=1]="CanDeleteNewLines"}(e.RuleFlags||(e.RuleFlags={}))}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(e){var t=function(){function t(e,t){this.Context=e,this.Action=t}return t.prototype.toString=function(){return"[context="+this.Context+",action="+this.Action+"]"},t.create1=function(n){return t.create2(e.RuleOperationContext.Any,n)},t.create2=function(e,n){return new t(e,n)},t}();e.RuleOperation=t}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(e){var t=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.customContextChecks=e}return e.prototype.IsAny=function(){return this===e.Any},e.prototype.InContext=function(e){if(this.IsAny())return!0;for(var t=0,n=this.customContextChecks;t<n.length;t++){if(!(0,n[t])(e))return!1}return!0},e.Any=new e,e}();e.RuleOperationContext=t}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(t){var n=function(){function n(){if(this.IgnoreBeforeComment=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.Comments),t.RuleOperation.create1(1)),this.IgnoreAfterLineComment=new t.Rule(t.RuleDescriptor.create3(2,t.Shared.TokenRange.Any),t.RuleOperation.create1(1)),this.NoSpaceBeforeSemicolon=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,25),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeColon=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,56),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBinaryOpContext),8)),this.NoSpaceBeforeQuestionMark=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,55),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBinaryOpContext),8)),this.SpaceAfterColon=new t.Rule(t.RuleDescriptor.create3(56,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBinaryOpContext),2)),this.SpaceAfterQuestionMarkInConditionalOperator=new t.Rule(t.RuleDescriptor.create3(55,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsConditionalOperatorContext),2)),this.NoSpaceAfterQuestionMark=new t.Rule(t.RuleDescriptor.create3(55,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterSemicolon=new t.Rule(t.RuleDescriptor.create3(25,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceAfterCloseBrace=new t.Rule(t.RuleDescriptor.create3(18,t.Shared.TokenRange.FromRange(0,142,[20])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsAfterCodeBlockContext),2)),this.SpaceBetweenCloseBraceAndElse=new t.Rule(t.RuleDescriptor.create1(18,82),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceBetweenCloseBraceAndWhile=new t.Rule(t.RuleDescriptor.create1(18,106),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterCloseBrace=new t.Rule(t.RuleDescriptor.create3(18,t.Shared.TokenRange.FromTokens([22,26,25])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeDot=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,23),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterDot=new t.Rule(t.RuleDescriptor.create3(23,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeOpenBracket=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.AnyExcept(120),21),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterCloseBracket=new t.Rule(t.RuleDescriptor.create3(22,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBeforeBlockInFunctionDeclarationContext),8)),this.FunctionOpenBraceLeftTokenRange=t.Shared.TokenRange.AnyIncludingMultilineComments,this.SpaceBeforeOpenBraceInFunction=new t.Rule(t.RuleDescriptor.create2(this.FunctionOpenBraceLeftTokenRange,17),t.RuleOperation.create2(new t.RuleOperationContext(n.isOptionDisabledOrUndefinedOrTokensOnSameLine("placeOpenBraceOnNewLineForFunctions"),n.IsFunctionDeclContext,n.IsBeforeBlockContext,n.IsNotFormatOnEnter,n.IsSameLineTokenOrBeforeBlockContext),2),1),this.TypeScriptOpenBraceLeftTokenRange=t.Shared.TokenRange.FromTokens([71,3,75,84,91]),this.SpaceBeforeOpenBraceInTypeScriptDeclWithBlock=new t.Rule(t.RuleDescriptor.create2(this.TypeScriptOpenBraceLeftTokenRange,17),t.RuleOperation.create2(new t.RuleOperationContext(n.isOptionDisabledOrUndefinedOrTokensOnSameLine("placeOpenBraceOnNewLineForFunctions"),n.IsTypeScriptDeclWithBlockContext,n.IsNotFormatOnEnter,n.IsSameLineTokenOrBeforeBlockContext),2),1),this.ControlOpenBraceLeftTokenRange=t.Shared.TokenRange.FromTokens([20,3,81,102,87,82]),this.SpaceBeforeOpenBraceInControl=new t.Rule(t.RuleDescriptor.create2(this.ControlOpenBraceLeftTokenRange,17),t.RuleOperation.create2(new t.RuleOperationContext(n.isOptionDisabledOrUndefinedOrTokensOnSameLine("placeOpenBraceOnNewLineForControlBlocks"),n.IsControlDeclContext,n.IsNotFormatOnEnter,n.IsSameLineTokenOrBeforeBlockContext),2),1),this.SpaceAfterOpenBrace=new t.Rule(t.RuleDescriptor.create3(17,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),n.IsBraceWrappedContext),2)),this.SpaceBeforeCloseBrace=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,18),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),n.IsBraceWrappedContext),2)),this.NoSpaceAfterOpenBrace=new t.Rule(t.RuleDescriptor.create3(17,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeCloseBrace=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,18),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBetweenEmptyBraceBrackets=new t.Rule(t.RuleDescriptor.create1(17,18),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsObjectContext),8)),this.NewLineAfterOpenBraceInBlockContext=new t.Rule(t.RuleDescriptor.create3(17,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsMultilineBlockContext),4)),this.NewLineBeforeCloseBraceInBlockContext=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.AnyIncludingMultilineComments,18),t.RuleOperation.create2(new t.RuleOperationContext(n.IsMultilineBlockContext),4)),this.NoSpaceAfterUnaryPrefixOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.UnaryPrefixOperators,t.Shared.TokenRange.UnaryPrefixExpressions),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBinaryOpContext),8)),this.NoSpaceAfterUnaryPreincrementOperator=new t.Rule(t.RuleDescriptor.create3(43,t.Shared.TokenRange.UnaryPreincrementExpressions),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterUnaryPredecrementOperator=new t.Rule(t.RuleDescriptor.create3(44,t.Shared.TokenRange.UnaryPredecrementExpressions),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeUnaryPostincrementOperator=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.UnaryPostincrementExpressions,43),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeUnaryPostdecrementOperator=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.UnaryPostdecrementExpressions,44),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterPostincrementWhenFollowedByAdd=new t.Rule(t.RuleDescriptor.create1(43,37),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterAddWhenFollowedByUnaryPlus=new t.Rule(t.RuleDescriptor.create1(37,37),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterAddWhenFollowedByPreincrement=new t.Rule(t.RuleDescriptor.create1(37,43),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterPostdecrementWhenFollowedBySubtract=new t.Rule(t.RuleDescriptor.create1(44,38),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterSubtractWhenFollowedByUnaryMinus=new t.Rule(t.RuleDescriptor.create1(38,38),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterSubtractWhenFollowedByPredecrement=new t.Rule(t.RuleDescriptor.create1(38,44),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.NoSpaceBeforeComma=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,26),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterCertainKeywords=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([104,100,94,80,96,103,121]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterNewKeywordOnConstructorSignature=new t.Rule(t.RuleDescriptor.create1(94,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsConstructorSignatureContext),8)),this.SpaceAfterLetConstInVariableDeclaration=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([110,76]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsStartOfVariableDeclarationList),2)),this.NoSpaceBeforeOpenParenInFuncCall=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsFunctionCallOrNewContext,n.IsPreviousTokenNotComma),8)),this.SpaceAfterFunctionInFuncDecl=new t.Rule(t.RuleDescriptor.create3(89,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsFunctionDeclContext),2)),this.SpaceBeforeOpenParenInFuncDecl=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceBeforeFunctionParenthesis"),n.IsNonJsxSameLineTokenContext,n.IsFunctionDeclContext),2)),this.NoSpaceBeforeOpenParenInFuncDecl=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceBeforeFunctionParenthesis"),n.IsNonJsxSameLineTokenContext,n.IsFunctionDeclContext),8)),this.SpaceAfterVoidOperator=new t.Rule(t.RuleDescriptor.create3(105,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsVoidOpContext),2)),this.NoSpaceBetweenReturnAndSemicolon=new t.Rule(t.RuleDescriptor.create1(96,25),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceBetweenStatements=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([20,81,82,73]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNonJsxElementContext,n.IsNotForContext),2)),this.SpaceAfterTryFinally=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.FromTokens([102,87]),17),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceAfterGetSetInMember=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.FromTokens([125,135]),71),t.RuleOperation.create2(new t.RuleOperationContext(n.IsFunctionDeclContext),2)),this.SpaceBeforeBinaryKeywordOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.BinaryKeywordOperators),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterBinaryKeywordOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.BinaryKeywordOperators,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterConstructor=new t.Rule(t.RuleDescriptor.create1(123,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterConstructor"),n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterConstructor=new t.Rule(t.RuleDescriptor.create1(123,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterConstructor"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterModuleImport=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.FromTokens([128,132]),19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterCertainTypeScriptKeywords=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([117,75,124,79,83,84,85,125,108,91,109,128,129,112,114,113,131,135,115,138,140,127]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceBeforeCertainTypeScriptKeywords=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.FromTokens([85,108,140])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceAfterModuleName=new t.Rule(t.RuleDescriptor.create1(9,17),t.RuleOperation.create2(new t.RuleOperationContext(n.IsModuleDeclContext),2)),this.SpaceBeforeArrow=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,36),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceAfterArrow=new t.Rule(t.RuleDescriptor.create3(36,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterEllipsis=new t.Rule(t.RuleDescriptor.create1(24,71),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterOptionalParameters=new t.Rule(t.RuleDescriptor.create3(55,t.Shared.TokenRange.FromTokens([20,26])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBinaryOpContext),8)),this.NoSpaceBeforeOpenAngularBracket=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.TypeNames,27),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceBetweenCloseParenAndAngularBracket=new t.Rule(t.RuleDescriptor.create1(20,27),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceAfterOpenAngularBracket=new t.Rule(t.RuleDescriptor.create3(27,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceBeforeCloseAngularBracket=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,29),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceAfterCloseAngularBracket=new t.Rule(t.RuleDescriptor.create3(29,t.Shared.TokenRange.FromTokens([19,21,29,26])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceBetweenEmptyInterfaceBraceBrackets=new t.Rule(t.RuleDescriptor.create1(17,18),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsObjectTypeContext),8)),this.SpaceBeforeAt=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,57),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterAt=new t.Rule(t.RuleDescriptor.create3(57,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterDecorator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.FromTokens([117,71,84,79,75,115,114,112,113,125,135,21,39])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsEndOfDecoratorContextOnSameLine),2)),this.NoSpaceBetweenFunctionKeywordAndStar=new t.Rule(t.RuleDescriptor.create1(89,39),t.RuleOperation.create2(new t.RuleOperationContext(n.IsFunctionDeclarationOrFunctionExpressionContext),8)),this.SpaceAfterStarInGeneratorDeclaration=new t.Rule(t.RuleDescriptor.create3(39,t.Shared.TokenRange.FromTokens([71,19])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsFunctionDeclarationOrFunctionExpressionContext),2)),this.NoSpaceBetweenYieldKeywordAndStar=new t.Rule(t.RuleDescriptor.create1(116,39),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsYieldOrYieldStarWithOperand),8)),this.SpaceBetweenYieldOrYieldStarAndOperand=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([116,39]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsYieldOrYieldStarWithOperand),2)),this.SpaceBetweenAsyncAndOpenParen=new t.Rule(t.RuleDescriptor.create1(120,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsArrowFunctionContext,n.IsNonJsxSameLineTokenContext),2)),this.SpaceBetweenAsyncAndFunctionKeyword=new t.Rule(t.RuleDescriptor.create1(120,89),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBetweenTagAndTemplateString=new t.Rule(t.RuleDescriptor.create3(71,t.Shared.TokenRange.FromTokens([13,14])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceBeforeJsxAttribute=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,71),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNextTokenParentJsxAttribute,n.IsNonJsxSameLineTokenContext),2)),this.SpaceBeforeSlashInJsxOpeningElement=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,41),t.RuleOperation.create2(new t.RuleOperationContext(n.IsJsxSelfClosingElementContext,n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBeforeGreaterThanTokenInJsxOpeningElement=new t.Rule(t.RuleDescriptor.create1(41,29),t.RuleOperation.create2(new t.RuleOperationContext(n.IsJsxSelfClosingElementContext,n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeEqualInJsxAttribute=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,58),t.RuleOperation.create2(new t.RuleOperationContext(n.IsJsxAttributeContext,n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterEqualInJsxAttribute=new t.Rule(t.RuleDescriptor.create3(58,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsJsxAttributeContext,n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeNonNullAssertionOperator=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,51),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNonNullAssertionContext),8)),this.SpaceAfterComma=new t.Rule(t.RuleDescriptor.create3(26,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterCommaDelimiter"),n.IsNonJsxSameLineTokenContext,n.IsNonJsxElementContext,n.IsNextTokenNotCloseBracket),2)),this.NoSpaceAfterComma=new t.Rule(t.RuleDescriptor.create3(26,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterCommaDelimiter"),n.IsNonJsxSameLineTokenContext,n.IsNonJsxElementContext),8)),this.SpaceBeforeBinaryOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.BinaryOperators),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceBeforeAndAfterBinaryOperators"),n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterBinaryOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.BinaryOperators,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceBeforeAndAfterBinaryOperators"),n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.NoSpaceBeforeBinaryOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.BinaryOperators),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceBeforeAndAfterBinaryOperators"),n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),8)),this.NoSpaceAfterBinaryOperator=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.BinaryOperators,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceBeforeAndAfterBinaryOperators"),n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),8)),this.SpaceAfterKeywordInControl=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Keywords,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterKeywordsInControlFlowStatements"),n.IsControlDeclContext),2)),this.NoSpaceAfterKeywordInControl=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Keywords,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterKeywordsInControlFlowStatements"),n.IsControlDeclContext),8)),this.NewLineBeforeOpenBraceInFunction=new t.Rule(t.RuleDescriptor.create2(this.FunctionOpenBraceLeftTokenRange,17),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("placeOpenBraceOnNewLineForFunctions"),n.IsFunctionDeclContext,n.IsBeforeMultilineBlockContext),4),1),this.NewLineBeforeOpenBraceInTypeScriptDeclWithBlock=new t.Rule(t.RuleDescriptor.create2(this.TypeScriptOpenBraceLeftTokenRange,17),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("placeOpenBraceOnNewLineForFunctions"),n.IsTypeScriptDeclWithBlockContext,n.IsBeforeMultilineBlockContext),4),1),this.NewLineBeforeOpenBraceInControl=new t.Rule(t.RuleDescriptor.create2(this.ControlOpenBraceLeftTokenRange,17),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("placeOpenBraceOnNewLineForControlBlocks"),n.IsControlDeclContext,n.IsBeforeMultilineBlockContext),4),1),this.SpaceAfterSemicolonInFor=new t.Rule(t.RuleDescriptor.create3(25,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterSemicolonInForStatements"),n.IsNonJsxSameLineTokenContext,n.IsForContext),2)),this.NoSpaceAfterSemicolonInFor=new t.Rule(t.RuleDescriptor.create3(25,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterSemicolonInForStatements"),n.IsNonJsxSameLineTokenContext,n.IsForContext),8)),this.SpaceAfterOpenParen=new t.Rule(t.RuleDescriptor.create3(19,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),n.IsNonJsxSameLineTokenContext),2)),this.SpaceBeforeCloseParen=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,20),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),n.IsNonJsxSameLineTokenContext),2)),this.SpaceBetweenOpenParens=new t.Rule(t.RuleDescriptor.create1(19,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBetweenParens=new t.Rule(t.RuleDescriptor.create1(19,20),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterOpenParen=new t.Rule(t.RuleDescriptor.create3(19,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeCloseParen=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,20),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterOpenBracket=new t.Rule(t.RuleDescriptor.create3(21,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),n.IsNonJsxSameLineTokenContext),2)),this.SpaceBeforeCloseBracket=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,22),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBetweenBrackets=new t.Rule(t.RuleDescriptor.create1(21,22),t.RuleOperation.create2(new t.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterOpenBracket=new t.Rule(t.RuleDescriptor.create3(21,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeCloseBracket=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,22),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterTemplateHeadAndMiddle=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([14,15]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterTemplateHeadAndMiddle=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.FromTokens([14,15]),t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBeforeTemplateMiddleAndTail=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.FromTokens([15,16])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),n.IsNonJsxSameLineTokenContext),8)),this.SpaceBeforeTemplateMiddleAndTail=new t.Rule(t.RuleDescriptor.create4(t.Shared.TokenRange.Any,t.Shared.TokenRange.FromTokens([15,16])),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterOpenBraceInJsxExpression=new t.Rule(t.RuleDescriptor.create3(17,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),n.IsNonJsxSameLineTokenContext,n.IsJsxExpressionContext),8)),this.SpaceAfterOpenBraceInJsxExpression=new t.Rule(t.RuleDescriptor.create3(17,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),n.IsNonJsxSameLineTokenContext,n.IsJsxExpressionContext),2)),this.NoSpaceBeforeCloseBraceInJsxExpression=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,18),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),n.IsNonJsxSameLineTokenContext,n.IsJsxExpressionContext),8)),this.SpaceBeforeCloseBraceInJsxExpression=new t.Rule(t.RuleDescriptor.create2(t.Shared.TokenRange.Any,18),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),n.IsNonJsxSameLineTokenContext,n.IsJsxExpressionContext),2)),this.SpaceAfterAnonymousFunctionKeyword=new t.Rule(t.RuleDescriptor.create1(89,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterFunctionKeywordForAnonymousFunctions"),n.IsFunctionDeclContext),2)),this.NoSpaceAfterAnonymousFunctionKeyword=new t.Rule(t.RuleDescriptor.create1(89,19),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterFunctionKeywordForAnonymousFunctions"),n.IsFunctionDeclContext),8)),this.NoSpaceAfterTypeAssertion=new t.Rule(t.RuleDescriptor.create3(29,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterTypeAssertion"),n.IsNonJsxSameLineTokenContext,n.IsTypeAssertionContext),8)),this.SpaceAfterTypeAssertion=new t.Rule(t.RuleDescriptor.create3(29,t.Shared.TokenRange.Any),t.RuleOperation.create2(new t.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterTypeAssertion"),n.IsNonJsxSameLineTokenContext,n.IsTypeAssertionContext),2)),this.HighPriorityCommonRules=[this.IgnoreBeforeComment,this.IgnoreAfterLineComment,this.NoSpaceBeforeColon,this.SpaceAfterColon,this.NoSpaceBeforeQuestionMark,this.SpaceAfterQuestionMarkInConditionalOperator,this.NoSpaceAfterQuestionMark,this.NoSpaceBeforeDot,this.NoSpaceAfterDot,this.NoSpaceAfterUnaryPrefixOperator,this.NoSpaceAfterUnaryPreincrementOperator,this.NoSpaceAfterUnaryPredecrementOperator,this.NoSpaceBeforeUnaryPostincrementOperator,this.NoSpaceBeforeUnaryPostdecrementOperator,this.SpaceAfterPostincrementWhenFollowedByAdd,this.SpaceAfterAddWhenFollowedByUnaryPlus,this.SpaceAfterAddWhenFollowedByPreincrement,this.SpaceAfterPostdecrementWhenFollowedBySubtract,this.SpaceAfterSubtractWhenFollowedByUnaryMinus,this.SpaceAfterSubtractWhenFollowedByPredecrement,this.NoSpaceAfterCloseBrace,this.NewLineBeforeCloseBraceInBlockContext,this.SpaceAfterCloseBrace,this.SpaceBetweenCloseBraceAndElse,this.SpaceBetweenCloseBraceAndWhile,this.NoSpaceBetweenEmptyBraceBrackets,this.NoSpaceBetweenFunctionKeywordAndStar,this.SpaceAfterStarInGeneratorDeclaration,this.SpaceAfterFunctionInFuncDecl,this.NewLineAfterOpenBraceInBlockContext,this.SpaceAfterGetSetInMember,this.NoSpaceBetweenYieldKeywordAndStar,this.SpaceBetweenYieldOrYieldStarAndOperand,this.NoSpaceBetweenReturnAndSemicolon,this.SpaceAfterCertainKeywords,this.SpaceAfterLetConstInVariableDeclaration,this.NoSpaceBeforeOpenParenInFuncCall,this.SpaceBeforeBinaryKeywordOperator,this.SpaceAfterBinaryKeywordOperator,this.SpaceAfterVoidOperator,this.SpaceBetweenAsyncAndOpenParen,this.SpaceBetweenAsyncAndFunctionKeyword,this.NoSpaceBetweenTagAndTemplateString,this.SpaceBeforeJsxAttribute,this.SpaceBeforeSlashInJsxOpeningElement,this.NoSpaceBeforeGreaterThanTokenInJsxOpeningElement,this.NoSpaceBeforeEqualInJsxAttribute,this.NoSpaceAfterEqualInJsxAttribute,this.NoSpaceAfterModuleImport,this.SpaceAfterCertainTypeScriptKeywords,this.SpaceBeforeCertainTypeScriptKeywords,this.SpaceAfterModuleName,this.SpaceBeforeArrow,this.SpaceAfterArrow,this.NoSpaceAfterEllipsis,this.NoSpaceAfterOptionalParameters,this.NoSpaceBetweenEmptyInterfaceBraceBrackets,this.NoSpaceBeforeOpenAngularBracket,this.NoSpaceBetweenCloseParenAndAngularBracket,this.NoSpaceAfterOpenAngularBracket,this.NoSpaceBeforeCloseAngularBracket,this.NoSpaceAfterCloseAngularBracket,this.SpaceBeforeAt,this.NoSpaceAfterAt,this.SpaceAfterDecorator,this.NoSpaceBeforeNonNullAssertionOperator,this.NoSpaceAfterNewKeywordOnConstructorSignature],this.UserConfigurableRules=[this.SpaceAfterConstructor,this.NoSpaceAfterConstructor,this.SpaceAfterComma,this.NoSpaceAfterComma,this.SpaceAfterAnonymousFunctionKeyword,this.NoSpaceAfterAnonymousFunctionKeyword,this.SpaceAfterKeywordInControl,this.NoSpaceAfterKeywordInControl,this.SpaceAfterOpenParen,this.SpaceBeforeCloseParen,this.SpaceBetweenOpenParens,this.NoSpaceBetweenParens,this.NoSpaceAfterOpenParen,this.NoSpaceBeforeCloseParen,this.SpaceAfterOpenBracket,this.SpaceBeforeCloseBracket,this.NoSpaceBetweenBrackets,this.NoSpaceAfterOpenBracket,this.NoSpaceBeforeCloseBracket,this.SpaceAfterOpenBrace,this.SpaceBeforeCloseBrace,this.NoSpaceBetweenEmptyBraceBrackets,this.NoSpaceAfterOpenBrace,this.NoSpaceBeforeCloseBrace,this.SpaceAfterTemplateHeadAndMiddle,this.SpaceBeforeTemplateMiddleAndTail,this.NoSpaceAfterTemplateHeadAndMiddle,this.NoSpaceBeforeTemplateMiddleAndTail,this.SpaceAfterOpenBraceInJsxExpression,this.SpaceBeforeCloseBraceInJsxExpression,this.NoSpaceAfterOpenBraceInJsxExpression,this.NoSpaceBeforeCloseBraceInJsxExpression,this.SpaceAfterSemicolonInFor,this.NoSpaceAfterSemicolonInFor,this.SpaceBeforeBinaryOperator,this.SpaceAfterBinaryOperator,this.NoSpaceBeforeBinaryOperator,this.NoSpaceAfterBinaryOperator,this.SpaceBeforeOpenParenInFuncDecl,this.NoSpaceBeforeOpenParenInFuncDecl,this.NewLineBeforeOpenBraceInControl,this.NewLineBeforeOpenBraceInFunction,this.NewLineBeforeOpenBraceInTypeScriptDeclWithBlock,this.SpaceAfterTypeAssertion,this.NoSpaceAfterTypeAssertion],this.LowPriorityCommonRules=[this.NoSpaceBeforeSemicolon,this.SpaceBeforeOpenBraceInControl,this.SpaceBeforeOpenBraceInFunction,this.SpaceBeforeOpenBraceInTypeScriptDeclWithBlock,this.NoSpaceBeforeComma,this.NoSpaceBeforeOpenBracket,this.NoSpaceAfterCloseBracket,this.SpaceAfterSemicolon,this.SpaceBetweenStatements,this.SpaceAfterTryFinally],e.Debug.isDebugging){for(var o in this){var r=this[o];r instanceof t.Rule&&(r.debugName=o)}}}return n.IsOptionEnabled=function(e){return function(t){return t.options&&t.options.hasOwnProperty(e)&&!!t.options[e]}},n.IsOptionDisabled=function(e){return function(t){return t.options&&t.options.hasOwnProperty(e)&&!t.options[e]}},n.IsOptionDisabledOrUndefined=function(e){return function(t){return!t.options||!t.options.hasOwnProperty(e)||!t.options[e]}},n.isOptionDisabledOrUndefinedOrTokensOnSameLine=function(e){return function(t){return!t.options||!t.options.hasOwnProperty(e)||!t.options[e]||t.TokensAreOnSameLine()}},n.IsOptionEnabledOrUndefined=function(e){return function(t){return!t.options||!t.options.hasOwnProperty(e)||!!t.options[e]}},n.IsForContext=function(e){return 214===e.contextNode.kind},n.IsNotForContext=function(e){return!n.IsForContext(e)},n.IsBinaryOpContext=function(e){switch(e.contextNode.kind){case 194:case 195:case 202:case 246:case 242:case 158:case 166:case 167:return!0;case 176:case 231:case 237:case 226:case 146:case 264:case 149:case 148:return 58===e.currentTokenSpan.kind||58===e.nextTokenSpan.kind;case 215:case 145:return 92===e.currentTokenSpan.kind||92===e.nextTokenSpan.kind;case 216:return 142===e.currentTokenSpan.kind||142===e.nextTokenSpan.kind}return!1},n.IsNotBinaryOpContext=function(e){return!n.IsBinaryOpContext(e)},n.IsConditionalOperatorContext=function(e){return 195===e.contextNode.kind},n.IsSameLineTokenOrBeforeBlockContext=function(e){return e.TokensAreOnSameLine()||n.IsBeforeBlockContext(e)},n.IsBraceWrappedContext=function(e){return 174===e.contextNode.kind||n.IsSingleLineBlockContext(e)},n.IsBeforeMultilineBlockContext=function(e){return n.IsBeforeBlockContext(e)&&!(e.NextNodeAllOnSameLine()||e.NextNodeBlockIsOnOneLine())},n.IsMultilineBlockContext=function(e){return n.IsBlockContext(e)&&!(e.ContextNodeAllOnSameLine()||e.ContextNodeBlockIsOnOneLine())},n.IsSingleLineBlockContext=function(e){return n.IsBlockContext(e)&&(e.ContextNodeAllOnSameLine()||e.ContextNodeBlockIsOnOneLine())},n.IsBlockContext=function(e){return n.NodeIsBlockContext(e.contextNode)},n.IsBeforeBlockContext=function(e){return n.NodeIsBlockContext(e.nextTokenParent)},n.NodeIsBlockContext=function(e){if(n.NodeIsTypeScriptDeclWithBlockContext(e))return!0;switch(e.kind){case 207:case 235:case 178:case 234:return!0}return!1},n.IsFunctionDeclContext=function(e){switch(e.contextNode.kind){case 228:case 151:case 150:case 153:case 154:case 155:case 186:case 152:case 187:case 230:return!0}return!1},n.IsFunctionDeclarationOrFunctionExpressionContext=function(e){return 228===e.contextNode.kind||186===e.contextNode.kind},n.IsTypeScriptDeclWithBlockContext=function(e){return n.NodeIsTypeScriptDeclWithBlockContext(e.contextNode)},n.NodeIsTypeScriptDeclWithBlockContext=function(e){switch(e.kind){case 229:case 199:case 230:case 232:case 163:case 233:case 244:case 245:case 238:case 241:return!0}return!1},n.IsAfterCodeBlockContext=function(e){switch(e.currentTokenParent.kind){case 229:case 233:case 232:case 260:case 234:case 221:return!0;case 207:var t=e.currentTokenParent.parent;if(!t||187!==t.kind&&186!==t.kind)return!0}return!1},n.IsControlDeclContext=function(e){switch(e.contextNode.kind){case 211:case 221:case 214:case 215:case 216:case 213:case 224:case 212:case 220:case 260:return!0;default:return!1}},n.IsObjectContext=function(e){return 178===e.contextNode.kind},n.IsFunctionCallContext=function(e){return 181===e.contextNode.kind},n.IsNewContext=function(e){return 182===e.contextNode.kind},n.IsFunctionCallOrNewContext=function(e){return n.IsFunctionCallContext(e)||n.IsNewContext(e)},n.IsPreviousTokenNotComma=function(e){return 26!==e.currentTokenSpan.kind},n.IsNextTokenNotCloseBracket=function(e){return 22!==e.nextTokenSpan.kind},n.IsArrowFunctionContext=function(e){return 187===e.contextNode.kind},n.IsNonJsxSameLineTokenContext=function(e){return e.TokensAreOnSameLine()&&10!==e.contextNode.kind},n.IsNonJsxElementContext=function(e){return 249!==e.contextNode.kind},n.IsJsxExpressionContext=function(e){return 256===e.contextNode.kind},n.IsNextTokenParentJsxAttribute=function(e){return 253===e.nextTokenParent.kind},n.IsJsxAttributeContext=function(e){return 253===e.contextNode.kind},n.IsJsxSelfClosingElementContext=function(e){return 250===e.contextNode.kind},n.IsNotBeforeBlockInFunctionDeclarationContext=function(e){return!n.IsFunctionDeclContext(e)&&!n.IsBeforeBlockContext(e)},n.IsEndOfDecoratorContextOnSameLine=function(e){return e.TokensAreOnSameLine()&&e.contextNode.decorators&&n.NodeIsInDecoratorContext(e.currentTokenParent)&&!n.NodeIsInDecoratorContext(e.nextTokenParent)},n.NodeIsInDecoratorContext=function(t){for(;e.isPartOfExpression(t);)t=t.parent;return 147===t.kind},n.IsStartOfVariableDeclarationList=function(e){return 227===e.currentTokenParent.kind&&e.currentTokenParent.getStart(e.sourceFile)===e.currentTokenSpan.pos},n.IsNotFormatOnEnter=function(e){return 2!==e.formattingRequestKind},n.IsModuleDeclContext=function(e){return 233===e.contextNode.kind},n.IsObjectTypeContext=function(e){return 163===e.contextNode.kind},n.IsConstructorSignatureContext=function(e){return 156===e.contextNode.kind},n.IsTypeArgumentOrParameterOrAssertion=function(e,t){if(27!==e.kind&&29!==e.kind)return!1;switch(t.kind){case 159:case 184:case 231:case 229:case 199:case 230:case 228:case 186:case 187:case 151:case 150:case 155:case 156:case 181:case 182:case 201:return!0;default:return!1}},n.IsTypeArgumentOrParameterOrAssertionContext=function(e){return n.IsTypeArgumentOrParameterOrAssertion(e.currentTokenSpan,e.currentTokenParent)||n.IsTypeArgumentOrParameterOrAssertion(e.nextTokenSpan,e.nextTokenParent)},n.IsTypeAssertionContext=function(e){return 184===e.contextNode.kind},n.IsVoidOpContext=function(e){return 105===e.currentTokenSpan.kind&&190===e.currentTokenParent.kind},n.IsYieldOrYieldStarWithOperand=function(e){return 197===e.contextNode.kind&&void 0!==e.contextNode.expression},n.IsNonNullAssertionContext=function(e){return 203===e.contextNode.kind},n}();t.Rules=n}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(t){var n=function(){function t(e){this.mapRowLength=143,this.map=new Array(this.mapRowLength*this.mapRowLength);for(var t=new Array(this.map.length),n=0,o=e;n<o.length;n++){var r=o[n];this.FillRule(r,t)}}return t.prototype.GetRuleBucketIndex=function(t,n){return e.Debug.assert(t<=142&&n<=142,"Must compute formatting context from tokens"),t*this.mapRowLength+n},t.prototype.FillRule=function(e,t){var n=this,o=e.Descriptor.LeftTokenRange.isSpecific()&&e.Descriptor.RightTokenRange.isSpecific();e.Descriptor.LeftTokenRange.GetTokens().forEach((function(r){e.Descriptor.RightTokenRange.GetTokens().forEach((function(s){var a=n.GetRuleBucketIndex(r,s),l=n.map[a];void 0===l&&(l=n.map[a]=new i),l.AddRule(e,o,t,a)}))}))},t.prototype.GetRule=function(e){var t=this.GetRuleBucketIndex(e.currentTokenSpan.kind,e.nextTokenSpan.kind),n=this.map[t];if(n)for(var o=0,r=n.Rules();o<r.length;o++){var i=r[o];if(i.Operation.Context.InContext(e))return i}},t}();t.RulesMap=n;var o;!function(e){e[e.IgnoreRulesSpecific=0]="IgnoreRulesSpecific",e[e.IgnoreRulesAny=5]="IgnoreRulesAny",e[e.ContextRulesSpecific=10]="ContextRulesSpecific",e[e.ContextRulesAny=15]="ContextRulesAny",e[e.NoContextRulesSpecific=20]="NoContextRulesSpecific",e[e.NoContextRulesAny=25]="NoContextRulesAny"}(o||(o={}));var r=function(){function t(){this.rulesInsertionIndexBitmap=0}return t.prototype.GetInsertionIndex=function(e){for(var t=0,n=0,o=this.rulesInsertionIndexBitmap;n<=e;)t+=31&o,o>>=5,n+=5;return t},t.prototype.IncreaseInsertionIndex=function(t){var n=this.rulesInsertionIndexBitmap>>t&31;n++,e.Debug.assert((31&n)===n,"Adding more rules into the sub-bucket than allowed. Maximum allowed is 32 rules.");var o=this.rulesInsertionIndexBitmap&~(31<<t);o|=n<<t,this.rulesInsertionIndexBitmap=o},t}();t.RulesBucketConstructionState=r;var i=function(){function e(){this.rules=[]}return e.prototype.Rules=function(){return this.rules},e.prototype.AddRule=function(e,t,n,i){var s;s=1===e.Operation.Action?t?o.IgnoreRulesSpecific:o.IgnoreRulesAny:e.Operation.Context.IsAny()?t?o.NoContextRulesSpecific:o.NoContextRulesAny:t?o.ContextRulesSpecific:o.ContextRulesAny;var a=n[i];void 0===a&&(a=n[i]=new r);var l=a.GetInsertionIndex(s);this.rules.splice(l,0,e),a.IncreaseInsertionIndex(s)},e}();t.RulesBucket=i}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(t){!function(t){for(var n=[],o=0;o<=142;o++)n.push(o);var r=function(){function e(e){void 0===e&&(e=[]),this.tokens=e}return e.prototype.GetTokens=function(){return this.tokens},e.prototype.Contains=function(e){return this.tokens.indexOf(e)>=0},e.prototype.isSpecific=function(){return!0},e}(),i=function(){function e(e){this.token=e}return e.prototype.GetTokens=function(){return[this.token]},e.prototype.Contains=function(e){return e===this.token},e.prototype.isSpecific=function(){return!0},e}(),s=function(){function e(){}return e.prototype.GetTokens=function(){return n},e.prototype.Contains=function(){return!0},e.prototype.toString=function(){return"[allTokens]"},e.prototype.isSpecific=function(){return!1},e}(),a=function(){function e(e){this.except=e}return e.prototype.GetTokens=function(){var e=this;return n.filter((function(t){return t!==e.except}))},e.prototype.Contains=function(e){return e!==this.except},e.prototype.isSpecific=function(){return!1},e}();!function(t){t.FromToken=function(e){return new i(e)},t.FromTokens=function(e){return new r(e)},t.FromRange=function(t,n,o){void 0===o&&(o=[]);for(var i=[],s=t;s<=n;s++)e.indexOf(o,s)<0&&i.push(s);return new r(i)},t.AnyExcept=function(e){return new a(e)},t.Any=new s,t.AnyIncludingMultilineComments=t.FromTokens(n.concat([3])),t.Keywords=t.FromRange(72,142),t.BinaryOperators=t.FromRange(27,70),t.BinaryKeywordOperators=t.FromTokens([92,93,142,118,126]),t.UnaryPrefixOperators=t.FromTokens([43,44,52,51]),t.UnaryPrefixExpressions=t.FromTokens([8,71,19,21,17,99,94]),t.UnaryPreincrementExpressions=t.FromTokens([71,19,99,94]),t.UnaryPostincrementExpressions=t.FromTokens([71,20,22,94]),t.UnaryPredecrementExpressions=t.FromTokens([71,19,99,94]),t.UnaryPostdecrementExpressions=t.FromTokens([71,20,22,94]),t.Comments=t.FromTokens([2,3]),t.TypeNames=t.FromTokens([71,133,136,122,137,105,119])}(t.TokenRange||(t.TokenRange={}))}(t.Shared||(t.Shared={}))}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(t){var n=function(){function n(){this.globalRules=new t.Rules;var e=this.globalRules.HighPriorityCommonRules.concat(this.globalRules.UserConfigurableRules).concat(this.globalRules.LowPriorityCommonRules);this.rulesMap=new t.RulesMap(e)}return n.prototype.getRulesMap=function(){return this.rulesMap},n.prototype.getFormatOptions=function(){return this.options},n.prototype.ensureUpToDate=function(t){this.options&&e.compareDataObjects(this.options,t)||(this.options=e.clone(t))},n}();t.RulesProvider=n}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(t){var n,o,r,i;function s(t,n,o){var r=e.findPrecedingToken(t,o);return r&&r.kind===n&&t===r.getEnd()?r:void 0}function a(e){for(var t=e;t&&t.parent&&t.parent.end===e.end&&!l(t.parent,t);)t=t.parent;return t}function l(t,n){switch(t.kind){case 229:case 230:return e.rangeContainsRange(t.members,n);case 233:var o=t.body;return o&&234===o.kind&&e.rangeContainsRange(o.statements,n);case 265:case 207:case 234:return e.rangeContainsRange(t.statements,n);case 260:return e.rangeContainsRange(t.block.statements,n)}return!1}function c(t,n,o,r,i){return t?u({pos:e.getLineStartPositionForPosition(t.getStart(n),n),end:t.end},n,o,r,i):[]}function u(n,o,r,i,s){var a=function(t,n){return function o(r){var i=e.forEachChild(r,(function(o){return e.startEndContainsRange(o.getStart(n),o.end,t)&&o}));if(i){var s=o(i);if(s)return s}return r}(n)}(n,o);return t.getFormattingScanner(o.text,o.languageVariant,function(t,n,o){var r=t.getStart(o);if(r===n.pos&&t.end===n.end)return r;var i=e.findPrecedingToken(n.pos,o);return i?i.end>=n.pos?t.pos:i.end:t.pos}(a,n,o),n.end,(function(l){return p(n,a,t.SmartIndenter.getIndentationForNode(a,n,o,r),function(e,n,o){for(var r,i=-1;e;){var s=o.getLineAndCharacterOfPosition(e.getStart(o)).line;if(-1!==i&&s!==i)break;if(t.SmartIndenter.shouldIndentChildNode(e,r))return n.indentSize;i=s,r=e,e=e.parent}return 0}(a,r,o),l,r,i,s,function(t,n){if(!t.length)return i;var o=t.filter((function(t){return e.rangeOverlapsWithStartEnd(n,t.start,t.start+t.length)})).sort((function(e,t){return e.start-t.start}));if(!o.length)return i;var r=0;return function(t){for(;;){if(r>=o.length)return!1;var n=o[r];if(t.end<=n.start)return!1;if(e.startEndOverlapsWithStartEnd(t.pos,t.end,n.start,n.start+n.length))return!0;r++}};function i(){return!1}}(o.parseDiagnostics,n),o)}))}function p(n,o,r,i,s,a,l,c,u,p){var g,h,f,_,m,y=new t.FormattingContext(p,c,a),k=[];if(s.advance(),s.isOnToken()){var b=p.getLineAndCharacterOfPosition(o.getStart(p)).line,v=b;o.decorators&&(v=p.getLineAndCharacterOfPosition(e.getNonDecoratorTokenPosOfNode(o,p)).line),function o(r,i,l,c,d,h){if(!e.rangeOverlapsWithStartEnd(n,r.getStart(p),r.getEnd()))return;var f=S(r,l,d,h),y=i;e.forEachChild(r,(function(e){b(e,-1,r,f,l,c,!1)}),(function(e){v(e,r,l,f)}));for(;s.isOnToken();){var k=s.readTokenInfo(r);if(k.token.end>r.end)break;T(k,r,f,r)}function b(i,l,c,u,d,g,h,f){var _=i.getStart(p),m=p.getLineAndCharacterOfPosition(_).line,k=m;i.decorators&&(k=p.getLineAndCharacterOfPosition(e.getNonDecoratorTokenPosOfNode(i,p)).line);var b=-1;if(h&&e.rangeContainsRange(n,c)&&-1!==(b=function(n,o,r,i,s){if(e.rangeOverlapsWithStartEnd(i,n,o)||e.rangeContainsStartEnd(i,n,o)){if(-1!==s)return s}else{var l=p.getLineAndCharacterOfPosition(n).line,c=e.getLineStartPositionForPosition(n,p),u=t.SmartIndenter.findFirstNonWhitespaceColumn(c,n,p,a);if(l!==r||n===u){var d=t.SmartIndenter.getBaseIndentation(a);return d>u?d:u}}return-1}(_,i.end,d,n,l))&&(l=b),!e.rangeOverlapsWithStartEnd(n,i.pos,i.end))return i.end<n.pos&&s.skipToEndOf(i),l;if(0===i.getFullWidth())return l;for(;s.isOnToken();){if((v=s.readTokenInfo(r)).token.end>_)break;T(v,r,u,r)}if(!s.isOnToken())return l;if(e.isToken(i)&&10!==i.kind){var v=s.readTokenInfo(i);return e.Debug.assert(v.token.end===i.end,"Token end is child end"),T(v,r,u,i),l}var S=147===i.kind?m:g,C=E(i,m,b,r,u,S);return o(i,y,m,k,C.indentation,C.delta),y=r,f&&177===c.kind&&-1===l&&(l=C.indentation),l}function v(t,n,o,i){e.Debug.assert(e.isNodeArray(t));var a=function(e,t){switch(e.kind){case 152:case 228:case 186:case 151:case 150:case 187:if(e.typeParameters===t)return 27;if(e.parameters===t)return 19;break;case 181:case 182:if(e.typeArguments===t)return 27;if(e.arguments===t)return 19;break;case 159:if(e.typeArguments===t)return 27}return 0}(n,t),l=function(e){switch(e){case 19:return 20;case 27:return 29}return 0}(a),c=i,u=o;if(0!==a)for(;s.isOnToken();){if((g=s.readTokenInfo(n)).token.end>t.pos)break;if(g.token.kind===a){u=p.getLineAndCharacterOfPosition(g.token.pos).line;var d=E(g.token,u,-1,n,i,o);T(g,n,c=S(n,o,d.indentation,d.delta),n)}else T(g,n,i,n)}for(var g,h=-1,f=0;f<t.length;f++){h=b(t[f],h,r,c,u,u,!0,0===f)}0!==l&&(s.isOnToken()&&(g=s.readTokenInfo(n)).token.kind===l&&e.rangeContainsRange(n,g.token)&&T(g,n,c,n))}function T(t,o,r,i){e.Debug.assert(e.rangeContainsRange(o,t.token));var a,l=s.lastTrailingTriviaWasNewLine(),c=!1;t.leadingTrivia&&C(t.leadingTrivia,o,y,r);var d=e.rangeContainsRange(n,t.token),h=p.getLineAndCharacterOfPosition(t.token.pos);if(d){var f=u(t.token),k=g;if(a=x(t.token,h,o,y,r),f)c=!1;else if(void 0!==a)c=a;else{var b=k&&p.getLineAndCharacterOfPosition(k.end).line;c=l&&h.line!==b}}if(t.trailingTrivia&&C(t.trailingTrivia,o,y,r),c){var v=d&&!u(t.token)?r.getIndentationForToken(h.line,t.token.kind,i):-1,T=!0;if(t.leadingTrivia)for(var E=r.getIndentationForComment(t.token.kind,v,i),S=0,I=t.leadingTrivia;S<I.length;S++){var D=I[S],N=e.rangeContainsRange(n,D);switch(D.kind){case 3:N&&A(D,E,!T),T=!1;break;case 2:T&&N&&B(D.pos,E,!1),T=!1;break;case 4:T=!0}}-1!==v&&T&&(B(t.token.pos,v,a),_=h.line,m=v)}s.advance(),y=o}}(o,o,b,v,r,i)}if(!s.isOnToken()){var T=s.getCurrentLeadingTrivia();T&&(C(T,o,o,void 0),function(){var e=g?g.end:n.pos,t=p.getLineAndCharacterOfPosition(e).line,o=p.getLineAndCharacterOfPosition(n.end).line;I(t,o+1,g)}())}return k;function E(e,n,o,r,i,s){var l=o,c=t.SmartIndenter.shouldIndentChildNode(e)?a.indentSize:0;return s===n?(l=n===_?m:i.getIndentation(),c=Math.min(a.indentSize,i.getDelta(e)+c)):-1===l&&(l=t.SmartIndenter.childStartsOnTheSameLineWithElseInIfStatement(r,e,n,p)?i.getIndentation():i.getIndentation()+i.getDelta(e)),{indentation:l,delta:c}}function S(n,o,r,i){return{getIndentationForComment:function(e,t,n){switch(e){case 18:case 22:case 20:return r+s(i,n)}return-1!==t?t:r},getIndentationForToken:function(t,a,l){if(o!==t&&n.decorators&&a===function(t){if(t.modifiers&&t.modifiers.length)return t.modifiers[0].kind;switch(t.kind){case 229:return 75;case 230:return 109;case 228:return 89;case 232:return 232;case 153:return 125;case 154:return 135;case 151:if(t.asteriskToken)return 39;case 149:case 146:return e.getNameOfDeclaration(t).kind}}(n))return r;switch(a){case 17:case 18:case 19:case 20:case 82:case 106:case 57:return r;case 41:case 29:if(251===l.kind||252===l.kind||250===l.kind)return r;break;case 21:case 22:if(172!==l.kind)return r}return o!==t?r+s(i,l):r},getIndentation:function(){return r},getDelta:function(e){return s(i,e)},recomputeIndentation:function(e){n.parent&&t.SmartIndenter.shouldIndentChildNode(n.parent,n)&&(e?r+=a.indentSize:r-=a.indentSize,i=t.SmartIndenter.shouldIndentChildNode(n)?a.indentSize:0)}};function s(e,o){return t.SmartIndenter.nodeWillIndentChild(n,o,!0)?e:0}}function C(t,o,r,i){for(var s=0,a=t;s<a.length;s++){var l=a[s];if(e.isComment(l.kind)&&e.rangeContainsRange(n,l))x(l,p.getLineAndCharacterOfPosition(l.pos),o,r,i)}}function x(e,t,o,r,i){var s;u(e)||(g?s=function(e,t,n,o,r,i,s,c){y.updateContext(o,i,e,n,s);var u,d,g=l.getRulesMap().GetRule(y);g?(!function(e,t,n,o,r){switch(e.Operation.Action){case 1:return;case 8:t.end!==o.pos&&w(t.end,o.pos-t.end);break;case 4:if(1!==e.Flag&&n!==r)return;1!==r-n&&R(t.end,o.pos-t.end,a.newLineCharacter);break;case 2:if(1!==e.Flag&&n!==r)return;1===o.pos-t.end&&32===p.text.charCodeAt(t.end)||R(t.end,o.pos-t.end," ")}}(g,o,r,e,t),10&g.Operation.Action&&t!==r?(d=!1,n.getStart(p)===e.pos&&c.recomputeIndentation(!1)):4&g.Operation.Action&&t===r&&(d=!0,n.getStart(p)===e.pos&&c.recomputeIndentation(!0)),u=!(8&g.Operation.Action)&&1!==g.Flag):u=!0;t!==r&&u&&I(r,t,o);return d}(e,t.line,o,g,f,h,r,i):I(p.getLineAndCharacterOfPosition(n.pos).line,t.line));return g=e,h=o,f=t.line,s}function B(t,n,o){var r=d(n,a);if(o)R(t,0,r);else{var i=p.getLineAndCharacterOfPosition(t),s=e.getStartPositionOfLine(i.line,p);(n!==function(e,t){for(var n=0,o=0;o<t;o++)9===p.text.charCodeAt(e+o)?n+=a.tabSize-n%a.tabSize:n++;return n}(s,i.character)||function(e,t){return e!==p.text.substr(t,e.length)}(r,s))&&R(s,i.character,r)}}function A(n,o,r){var i,s=p.getLineAndCharacterOfPosition(n.pos).line,l=p.getLineAndCharacterOfPosition(n.end).line;if(s!==l){i=[];for(var c=n.pos,u=s;u<l;u++){var g=e.getEndLinePosition(u,p);i.push({pos:c,end:g}),c=e.getStartPositionOfLine(u+1,p)}i.push({pos:c,end:n.end});var h=e.getStartPositionOfLine(s,p),f=t.SmartIndenter.findFirstNonWhitespaceCharacterAndColumn(h,i[0].pos,p,a);if(o!==f.column){var _=0;r&&(_=1,s++);for(var m=o-f.column,y=_;y<i.length;y++,s++){var k=e.getStartPositionOfLine(s,p),b=0===y?f:t.SmartIndenter.findFirstNonWhitespaceCharacterAndColumn(i[y].pos,i[y].end,p,a),v=b.column+m;if(v>0){var T=d(v,a);R(k,b.character,T)}else w(k,b.character)}}}else r||B(n.pos,o,!1)}function I(t,n,o){for(var r=t;r<n;r++){var i=e.getStartPositionOfLine(r,p),s=e.getEndLinePosition(r,p);if(!(o&&(e.isComment(o.kind)||e.isStringOrRegularExpressionOrTemplateLiteral(o.kind))&&o.pos<=s&&o.end>s)){var a=D(i,s);-1!==a&&(e.Debug.assert(a===i||!e.isWhiteSpaceSingleLine(p.text.charCodeAt(a-1))),w(a,s+1-a))}}}function D(t,n){for(var o=n;o>=t&&e.isWhiteSpaceSingleLine(p.text.charCodeAt(o));)o--;return o!==n?o+1:-1}function N(t,n,o){return{span:e.createTextSpan(t,n),newText:o}}function w(e,t){t&&k.push(N(e,t,""))}function R(e,t,n){(t||n)&&k.push(N(e,t,n))}}function d(e,t){if((!o||o.tabSize!==t.tabSize||o.indentSize!==t.indentSize)&&(o={tabSize:t.tabSize,indentSize:t.indentSize},r=i=void 0),t.convertTabsToSpaces){var n=void 0,s=Math.floor(e/t.indentSize),a=e%t.indentSize;return i||(i=[]),void 0===i[s]?(n=p(" ",t.indentSize*s),i[s]=n):n=i[s],a?n+p(" ",a):n}var l=Math.floor(e/t.tabSize),c=e-l*t.tabSize,u=void 0;return r||(r=[]),void 0===r[l]?r[l]=u=p("\t",l):u=r[l],c?u+p(" ",c):u;function p(e,t){for(var n="",o=0;o<t;o++)n+=e;return n}}!function(e){e[e.Unknown=-1]="Unknown"}(n||(n={})),t.formatOnEnter=function(t,n,o,r){var i=n.getLineAndCharacterOfPosition(t).line;if(0===i)return[];for(var s=e.getEndLinePosition(i,n);e.isWhiteSpaceSingleLine(n.text.charCodeAt(s));)s--;return e.isLineBreak(n.text.charCodeAt(s))&&s--,u({pos:e.getStartPositionOfLine(i-1,n),end:s+1},n,r,o,2)},t.formatOnSemicolon=function(e,t,n,o){return c(a(s(e,25,t)),t,o,n,3)},t.formatOnOpeningCurly=function(t,n,o,r){var i=s(t,17,n);if(!i)return[];var l=a(i.parent);return u({pos:e.getLineStartPositionForPosition(l.getStart(n),n),end:t},n,r,o,4)},t.formatOnClosingCurly=function(e,t,n,o){return c(a(s(e,18,t)),t,o,n,5)},t.formatDocument=function(e,t,n){return u({pos:0,end:e.text.length},e,n,t,0)},t.formatSelection=function(t,n,o,r,i){return u({pos:e.getLineStartPositionForPosition(t,o),end:n},o,i,r,1)},t.formatNodeGivenIndentation=function(e,n,o,r,i,s){var a={pos:0,end:n.text.length};return t.getFormattingScanner(n.text,o,a.pos,a.end,(function(t){return p(a,e,r,i,t,s.getFormatOptions(),s,1,(function(e){return!1}),n)}))},t.getRangeOfEnclosingComment=function(t,n,o,r,i,s){if(void 0===i&&(i=e.getTokenAtPosition(t,n,!1)),!(i.getStart(t)<=n&&n<i.getEnd())){void 0===r&&(r=e.findPrecedingToken(n,t));var a=r&&e.getTrailingCommentRanges(t.text,r.end),l=e.getLeadingCommentRangesOfNode(i,t),c=a&&l?a.concat(l):a||l;if(c)for(var u=0,p=c;u<p.length;u++){var d=p[u];if(d.pos<n&&n<d.end||n===d.end&&(2===d.kind||n===t.getFullWidth()))return 3!==d.kind&&o||s&&!s(d)?void 0:d}}},t.getIndentationString=d}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(t){!function(n){var o,r;function i(e){return e.baseIndentSize||0}function s(e,t,n,o,r,s){for(var c,u=e.parent;u;){var g=!0;if(n){var h=e.getStart(r);g=h<n.pos||h>n.end}if(g)if(-1!==(y=f(e,r,s)))return y+o;var m=(c=a(u,e,r)).line===t.line||d(u,e,t.line,r);if(g){var y;if(-1!==(y=l(e,u,t,m,r,s)))return y+o;if(-1!==(y=_(e,r,s)))return y+o}T(u,e)&&!m&&(o+=s.indentSize);var k=p(u,e,t.line,r);u=(e=u).parent,t=k?r.getLineAndCharacterOfPosition(e.getStart()):c}return o+i(s)}function a(e,t,n){var o=h(t,n),r=o?o.pos:e.getStart(n);return n.getLineAndCharacterOfPosition(r)}function l(t,n,o,r,i,s){return(e.isDeclaration(t)||e.isStatementButNotDeclaration(t))&&(265===n.kind||!r)?y(o,i,s):-1}function c(t,n,o,r){var i=e.findNextToken(t,n);return i?17===i.kind?1:18===i.kind&&o===u(i,r).line?2:0:0}function u(e,t){return t.getLineAndCharacterOfPosition(e.getStart(t))}function p(t,n,o,r){if(!e.isCallExpression(t)||!e.contains(t.arguments,n))return!1;var i=t.expression.getEnd();return e.getLineAndCharacterOfPosition(r,i).line===o}function d(t,n,o,r){if(211===t.kind&&t.elseStatement===n){var i=e.findChildOfKind(t,82,r);return e.Debug.assert(void 0!==i),u(i,r).line===o}return!1}function g(t,n,o){return t&&e.rangeContainsStartEnd(t,n,o)?t:void 0}function h(e,t){if(e.parent)switch(e.parent.kind){case 159:return g(e.parent.typeArguments,e.getStart(t),e.getEnd());case 178:return e.parent.properties;case 177:return e.parent.elements;case 228:case 186:case 187:case 151:case 150:case 155:case 152:case 161:case 156:var n=e.getStart(t);return g(e.parent.typeParameters,n,e.getEnd())||g(e.parent.parameters,n,e.getEnd());case 229:return g(e.parent.typeParameters,e.getStart(t),e.getEnd());case 182:case 181:n=e.getStart(t);return g(e.parent.typeArguments,n,e.getEnd())||g(e.parent.arguments,n,e.getEnd());case 227:return g(e.parent.declarations,e.getStart(t),e.getEnd());case 241:case 245:return g(e.parent.elements,e.getStart(t),e.getEnd())}}function f(t,n,o){var r,i,s=h(t,n);return s?(r=s,-1!==(i=e.indexOf(r,t))?m(r,i,n,o):-1):-1}function _(t,n,o){if(20===t.kind)return-1;if(t.parent&&e.isCallOrNewExpression(t.parent)&&t.parent.expression!==t){var r=t.parent.expression,i=function(e){for(;;)switch(e.kind){case 181:case 182:case 179:case 180:e=e.expression;break;default:return e}}(r);if(r===i)return-1;var s=n.getLineAndCharacterOfPosition(r.end),a=n.getLineAndCharacterOfPosition(i.end);return s.line===a.line?-1:y(s,n,o)}return-1}function m(t,n,o,r){e.Debug.assert(n>=0&&n<t.length);for(var i=u(t[n],o),s=n-1;s>=0;s--)if(26!==t[s].kind){if(o.getLineAndCharacterOfPosition(t[s].end).line!==i.line)return y(i,o,r);i=u(t[s],o)}return-1}function y(e,t,n){var o=t.getPositionOfLineAndCharacter(e.line,0);return b(o,o+e.character,t,n)}function k(t,n,o,r){for(var i=0,s=0,a=t;a<n;a++){var l=o.text.charCodeAt(a);if(!e.isWhiteSpaceSingleLine(l))break;9===l?s+=r.tabSize+s%r.tabSize:s++,i++}return{column:s,character:i}}function b(e,t,n,o){return k(e,t,n,o).column}function v(e,t,n){var o=t?t.kind:0;switch(e.kind){case 212:case 213:case 215:case 216:case 214:case 211:case 228:case 186:case 151:case 187:case 152:case 153:case 154:return 207!==o;case 244:return 245!==o;case 238:return 239!==o||t.namedBindings&&241!==t.namedBindings.kind;case 249:return 252!==o}return n}function T(e,t){return function(e){switch(e){case 210:case 229:case 199:case 230:case 232:case 231:case 177:case 207:case 234:case 178:case 163:case 172:case 165:case 235:case 258:case 257:case 185:case 179:case 181:case 182:case 208:case 226:case 243:case 219:case 195:case 175:case 174:case 251:case 250:case 256:case 150:case 155:case 156:case 146:case 160:case 161:case 168:case 183:case 191:case 245:case 241:case 246:case 242:case 261:case 149:return!0}return!1}(e.kind)||v(e,t,!1)}!function(e){e[e.Unknown=-1]="Unknown"}(o||(o={})),n.getIndentation=function(o,r,a,l){if(void 0===l&&(l=!1),o>r.text.length)return i(a);if(a.indentStyle===e.IndentStyle.None)return 0;var p=e.findPrecedingToken(o,r),d=t.getRangeOfEnclosingComment(r,o,!0,p||null);if(d){var g=e.getLineAndCharacterOfPosition(r,o).line-1,h=e.getLineAndCharacterOfPosition(r,d.pos).line;if(e.Debug.assert(h>=0),g<=h)return b(e.getStartPositionOfLine(h,r),o,r,a);var y=e.getStartPositionOfLine(g,r),v=k(y,o,r,a),E=v.column,S=v.character;return 0===E?E:42===r.text.charCodeAt(y+S)?E-1:E}if(!p)return i(a);if(e.isStringOrRegularExpressionOrTemplateLiteral(p.kind)&&p.getStart(r)<=o&&o<p.end)return 0;var C,x=r.getLineAndCharacterOfPosition(o).line;if(a.indentStyle===e.IndentStyle.Block){for(var B=o;B>0;){var A=r.text.charCodeAt(B);if(!e.isWhiteSpaceLike(A))break;B--}var I=e.getLineStartPositionForPosition(B,r);return n.findFirstNonWhitespaceColumn(I,B,r,a)}if(26===p.kind&&194!==p.parent.kind&&-1!==(O=function(t,n,o){var r=e.findListItemInfo(t);return r&&r.listItemIndex>0?m(r.list.getChildren(),r.listItemIndex-1,n,o):-1}(p,r,a)))return O;for(var D,N,w=p;w;){if(e.positionBelongsToNode(w,o,r)&&T(w,C)){D=u(w,r);var R=c(p,w,x,r);N=0!==R?l&&2===R?a.indentSize:0:x!==D.line?a.indentSize:0;break}var O;if(-1!==(O=f(w,r,a)))return O;if(-1!==(O=_(w,r,a)))return O+a.indentSize;C=w,w=w.parent}return w?s(w,D,void 0,N,r,a):i(a)},n.getIndentationForNode=function(e,t,n,o){var r=n.getLineAndCharacterOfPosition(e.getStart(n));return s(e,r,t,0,n,o)},n.getBaseIndentation=i,function(e){e[e.Unknown=0]="Unknown",e[e.OpenBrace=1]="OpenBrace",e[e.CloseBrace=2]="CloseBrace"}(r||(r={})),n.isArgumentAndStartLineOverlapsExpressionBeingCalled=p,n.childStartsOnTheSameLineWithElseInIfStatement=d,n.getContainingList=h,n.findFirstNonWhitespaceCharacterAndColumn=k,n.findFirstNonWhitespaceColumn=b,n.nodeWillIndentChild=v,n.shouldIndentChildNode=T}(t.SmartIndenter||(t.SmartIndenter={}))}(e.formatting||(e.formatting={}))}(ts||(ts={})),function(e){!function(t){function n(t){var n=t.__pos;return e.Debug.assert("number"==typeof n),n}function o(t,n){e.Debug.assert("number"==typeof n),t.__pos=n}function r(t){var n=t.__end;return e.Debug.assert("number"==typeof n),n}function i(t,n){e.Debug.assert("number"==typeof n),t.__end=n}var s,a;function l(t,n){return e.skipTrivia(t,n,!1,!0)}function c(t,n,o,r){if(o.useNonAdjustedStartPosition)return n.getFullStart();var i=n.getFullStart(),a=n.getStart(t);if(i===a)return a;var c=e.getLineStartPositionForPosition(i,t);if(e.getLineStartPositionForPosition(a,t)===c)return r===s.Start?a:i;var u=i>0?1:0,p=e.getStartPositionOfLine(e.getLineOfLocalPosition(t,c)+u,t);return p=l(t.text,p),e.getStartPositionOfLine(e.getLineOfLocalPosition(t,p),t)}function u(t,n,o){if(o.useNonAdjustedEndPosition||e.isExpression(n))return n.getEnd();var r=n.getEnd(),i=e.skipTrivia(t.text,r,!0);return i!==r&&e.isLineBreak(t.text.charCodeAt(i-1))?i:r}function p(e,t){return t&&e.parent&&(26===t.kind||25===t.kind&&178===e.parent.kind)}!function(e){e[e.FullStart=0]="FullStart",e[e.Start=1]="Start"}(s=t.Position||(t.Position={})),function(e){e[e.Remove=0]="Remove",e[e.ReplaceWithSingleNode=1]="ReplaceWithSingleNode",e[e.ReplaceWithMultipleNodes=2]="ReplaceWithMultipleNodes"}(a||(a={})),t.getSeparatorCharacter=function(t){return e.tokenToString(t.kind)},t.getAdjustedStartPosition=c,t.getAdjustedEndPosition=u;var d=function(){function t(t,n,o){this.newLine=t,this.rulesProvider=n,this.validator=o,this.changes=[],this.newLineCharacter=e.getNewLineCharacter({newLine:t})}return t.fromContext=function(e){return new t("\n"===e.newLineCharacter?1:0,e.rulesProvider)},t.with=function(e,n){var o=t.fromContext(e);return n(o),o.getChanges()},t.prototype.deleteRange=function(e,t){return this.changes.push({kind:a.Remove,sourceFile:e,range:t}),this},t.prototype.deleteNode=function(e,t,n){void 0===n&&(n={});var o=c(e,t,n,s.FullStart),r=u(e,t,n);return this.changes.push({kind:a.Remove,sourceFile:e,range:{pos:o,end:r}}),this},t.prototype.deleteNodeRange=function(e,t,n,o){void 0===o&&(o={});var r=c(e,t,o,s.FullStart),i=u(e,n,o);return this.changes.push({kind:a.Remove,sourceFile:e,range:{pos:r,end:i}}),this},t.prototype.deleteNodeInList=function(t,n){var o=e.formatting.SmartIndenter.getContainingList(n,t);if(!o)return e.Debug.fail("node is not a list element"),this;var r=e.indexOfNode(o,n);if(r<0)return this;if(1===o.length)return this.deleteNode(t,n),this;if(r!==o.length-1){var i=e.getTokenAtPosition(t,n.end,!1);if(i&&p(n,i)){var a=e.skipTrivia(t.text,c(t,n,{},s.FullStart),!1,!0),l=o[r+1],u=e.skipTrivia(t.text,c(t,l,{},s.FullStart),!1,!0);this.deleteRange(t,{pos:a,end:u})}}else{var d=e.getTokenAtPosition(t,o[r-1].end,!1);d&&p(n,d)&&this.deleteNodeRange(t,d,n)}return this},t.prototype.replaceRange=function(e,t,n,o){return void 0===o&&(o={}),this.changes.push({kind:a.ReplaceWithSingleNode,sourceFile:e,range:t,options:o,node:n}),this},t.prototype.replaceNode=function(e,t,n,o){void 0===o&&(o={});var r=c(e,t,o,s.Start),i=u(e,t,o);return this.replaceWithSingle(e,r,i,n,o)},t.prototype.replaceNodeRange=function(e,t,n,o,r){void 0===r&&(r={});var i=c(e,t,r,s.Start),a=u(e,n,r);return this.replaceWithSingle(e,i,a,o,r)},t.prototype.replaceWithSingle=function(e,t,n,o,r){return this.changes.push({kind:a.ReplaceWithSingleNode,sourceFile:e,options:r,node:o,range:{pos:t,end:n}}),this},t.prototype.replaceWithMultiple=function(e,t,n,o,r){return this.changes.push({kind:a.ReplaceWithMultipleNodes,sourceFile:e,options:r,nodes:o,range:{pos:t,end:n}}),this},t.prototype.replaceNodeWithNodes=function(e,t,n,o){var r=c(e,t,o,s.Start),i=u(e,t,o);return this.replaceWithMultiple(e,r,i,n,o)},t.prototype.replaceNodesWithNodes=function(t,n,o,r){var i=c(t,n[0],r,s.Start),a=u(t,e.lastOrUndefined(n),r);return this.replaceWithMultiple(t,i,a,o,r)},t.prototype.replaceRangeWithNodes=function(e,t,n,o){return this.replaceWithMultiple(e,t.pos,t.end,n,o)},t.prototype.replaceNodeRangeWithNodes=function(e,t,n,o,r){var i=c(e,t,r,s.Start),a=u(e,n,r);return this.replaceWithMultiple(e,i,a,o,r)},t.prototype.insertNodeAt=function(e,t,n,o){return void 0===o&&(o={}),this.changes.push({kind:a.ReplaceWithSingleNode,sourceFile:e,options:o,node:n,range:{pos:t,end:t}}),this},t.prototype.insertNodeBefore=function(e,t,n,o){void 0===o&&(o={});var r=c(e,t,o,s.Start);return this.replaceWithSingle(e,r,r,n,o)},t.prototype.insertNodeAfter=function(t,n,o,r){void 0===r&&(r={}),(e.isStatementButNotDeclaration(n)||149===n.kind||148===n.kind||150===n.kind)&&59!==t.text.charCodeAt(n.end-1)&&this.changes.push({kind:a.ReplaceWithSingleNode,sourceFile:t,options:{},range:{pos:n.end,end:n.end},node:e.createToken(25)});var i=u(t,n,r);return this.replaceWithSingle(t,i,i,o,r)},t.prototype.insertNodeInListAfter=function(t,n,o){var r=e.formatting.SmartIndenter.getContainingList(n,t);if(!r)return e.Debug.fail("node is not a list element"),this;var i=e.indexOfNode(r,n);if(i<0)return this;var s=n.getEnd();if(i!==r.length-1){var c=e.getTokenAtPosition(t,n.end,!1);if(c&&p(n,c)){var u=e.getLineAndCharacterOfPosition(t,l(t.text,r[i+1].getFullStart())),d=e.getLineAndCharacterOfPosition(t,c.end),g=void 0,h=void 0;d.line===u.line?(h=c.end,g=function(e){for(var t="",n=0;n<e;n++)t+=" ";return t}(u.character-d.character)):h=e.getStartPositionOfLine(u.line,t),this.changes.push({kind:a.ReplaceWithSingleNode,sourceFile:t,range:{pos:h,end:r[i+1].getStart(t)},node:o,options:{prefix:g,suffix:""+e.tokenToString(c.kind)+t.text.substring(c.end,r[i+1].getStart(t))}})}}else{var f=n.getStart(t),_=e.getLineStartPositionForPosition(f,t),m=void 0,y=!1;if(1===r.length)m=26;else{var k=e.findPrecedingToken(n.pos,t);m=p(n,k)?k.kind:26,y=e.getLineStartPositionForPosition(r[i-1].getStart(t),t)!==_}if(function(t,n){for(var o=n;o<t.length;){var r=t.charCodeAt(o);if(!e.isWhiteSpaceSingleLine(r))return 47===r;o++}return!1}(t.text,n.end)&&(y=!0),y){this.changes.push({kind:a.ReplaceWithSingleNode,sourceFile:t,range:{pos:s,end:s},node:e.createToken(m),options:{}});var b=e.formatting.SmartIndenter.findFirstNonWhitespaceColumn(_,f,t,this.rulesProvider.getFormatOptions()),v=e.skipTrivia(t.text,s,!0,!1);v!==s&&e.isLineBreak(t.text.charCodeAt(v-1))&&v--,this.changes.push({kind:a.ReplaceWithSingleNode,sourceFile:t,range:{pos:v,end:v},node:o,options:{indentation:b,prefix:this.newLineCharacter}})}else this.changes.push({kind:a.ReplaceWithSingleNode,sourceFile:t,range:{pos:s,end:s},node:o,options:{prefix:e.tokenToString(m)+" "}})}return this},t.prototype.getChanges=function(){for(var n=this,o=e.createMap(),r=0,i=this.changes;r<i.length;r++){var s=i[r],a=o.get(s.sourceFile.path);a||o.set(s.sourceFile.path,a=[]),a.push(s)}var l=[];return o.forEach((function(e){for(var o=e[0].sourceFile,r={fileName:o.fileName,textChanges:[]},i=0,s=t.normalize(e);i<s.length;i++){var a=s[i];r.textChanges.push({span:n.computeSpan(a,o),newText:n.computeNewText(a,o)})}l.push(r)})),l},t.prototype.computeSpan=function(t,n){return e.createTextSpanFromBounds(t.range.pos,t.range.end)},t.prototype.computeNewText=function(t,n){var o=this;if(t.kind===a.Remove)return"";var r,i=t.options||{},s=t.range.pos,l=e.getLineStartPositionForPosition(s,n)===s;t.kind===a.ReplaceWithMultipleNodes?r=t.nodes.map((function(e){return o.getFormattedTextOfNode(e,n,s,i)})).join(t.options.nodeSeparator):(e.Debug.assert(t.kind===a.ReplaceWithSingleNode,"change.kind === ReplaceWithSingleNode"),r=this.getFormattedTextOfNode(t.node,n,s,i));return r=l||void 0!==i.indentation?r:r.replace(/^\s+/,""),(i.prefix||"")+r+(i.suffix||"")},t.prototype.getFormattedTextOfNode=function(t,n,o,r){var i=function(t,n,o){var r={newLine:o,target:n&&n.languageVersion},i=new _(e.getNewLineCharacter(r));return e.createPrinter(r,i).writeNode(4,t,n,i),{text:i.getText(),node:h(t)}}(t,n,this.newLine);this.validator&&this.validator(i);var s=this.rulesProvider.getFormatOptions(),a=e.getLineStartPositionForPosition(o,n)===o;return function(t,n,o,r,i){var s=e.computeLineStarts(t.text),a={text:t.text,lineMap:s,getLineAndCharacterOfPosition:function(t){return e.computeLineAndCharacterOfPosition(s,t)}},l=e.formatting.formatNodeGivenIndentation(t.node,a,n.languageVariant,o,r,i);return g(t.text,l)}(i,n,void 0!==r.indentation?r.indentation:!1!==r.useIndentationFromFile?e.formatting.SmartIndenter.getIndentation(o,n,s,a||r.prefix===this.newLineCharacter):0,void 0!==r.delta?r.delta:e.formatting.SmartIndenter.shouldIndentChildNode(t)&&s.indentSize||0,this.rulesProvider)},t.normalize=function(t){for(var n=e.stableSort(t,(function(e,t){return e.range.pos-t.range.pos})),o=0;o<n.length-2;o++)e.Debug.assert(n[o].range.end<=n[o+1].range.pos);return n},t}();function g(t,n){for(var o=n.length-1;o>=0;o--){var r=n[o];t=""+t.substring(0,r.span.start)+r.newText+t.substring(e.textSpanEnd(r.span))}return t}function h(t){var o=e.visitEachChild(t,h,e.nullTransformationContext,f,h),i=e.nodeIsSynthesized(o)?o:Object.create(o);return i.pos=n(t),i.end=r(t),i}function f(t,o,i,s,a){var l=e.visitNodes(t,o,i,s,a);if(!l)return l;var c=l===t?e.createNodeArray(l.slice(0)):l;return c.pos=n(t),c.end=r(t),c}t.ChangeTracker=d,t.applyChanges=g;var _=function(){function t(t){var n=this;this.lastNonTriviaPosition=0,this.writer=e.createTextWriter(t),this.onEmitNode=function(e,t,r){t&&o(t,n.lastNonTriviaPosition),r(e,t),t&&i(t,n.lastNonTriviaPosition)},this.onBeforeEmitNodeArray=function(e){e&&o(e,n.lastNonTriviaPosition)},this.onAfterEmitNodeArray=function(e){e&&i(e,n.lastNonTriviaPosition)},this.onBeforeEmitToken=function(e){e&&o(e,n.lastNonTriviaPosition)},this.onAfterEmitToken=function(e){e&&i(e,n.lastNonTriviaPosition)}}return t.prototype.setLastNonTriviaPosition=function(t,n){if(n||!function(t){return e.skipTrivia(t,0)===t.length}(t)){this.lastNonTriviaPosition=this.writer.getTextPos();for(var o=0;e.isWhiteSpaceLike(t.charCodeAt(t.length-o-1));)o++;this.lastNonTriviaPosition-=o}},t.prototype.write=function(e){this.writer.write(e),this.setLastNonTriviaPosition(e,!1)},t.prototype.writeTextOfNode=function(e,t){this.writer.writeTextOfNode(e,t)},t.prototype.writeLine=function(){this.writer.writeLine()},t.prototype.increaseIndent=function(){this.writer.increaseIndent()},t.prototype.decreaseIndent=function(){this.writer.decreaseIndent()},t.prototype.getText=function(){return this.writer.getText()},t.prototype.rawWrite=function(e){this.writer.rawWrite(e),this.setLastNonTriviaPosition(e,!1)},t.prototype.writeLiteral=function(e){this.writer.writeLiteral(e),this.setLastNonTriviaPosition(e,!0)},t.prototype.getTextPos=function(){return this.writer.getTextPos()},t.prototype.getLine=function(){return this.writer.getLine()},t.prototype.getColumn=function(){return this.writer.getColumn()},t.prototype.getIndent=function(){return this.writer.getIndent()},t.prototype.isAtStartOfLine=function(){return this.writer.isAtStartOfLine()},t.prototype.reset=function(){this.writer.reset(),this.lastNonTriviaPosition=0},t}()}(e.textChanges||(e.textChanges={}))}(ts||(ts={})),function(e){!function(t){var n=[];t.registerCodeFix=function(t){e.forEach(t.errorCodes,(function(e){var o=n[e];o||(o=[],n[e]=o),o.push(t)}))},t.getSupportedErrorCodes=function(){return Object.keys(n)},t.getFixes=function(t){var o=n[t.errorCode],r=[];return e.forEach(o,(function(e){var n=e.getCodeActions(t);if(n&&n.length>0)for(var o=0,i=n;o<i.length;o++){var s=i[o];void 0===s?t.host.log("Action for error code "+t.errorCode+" added an invalid action entry; please log a bug"):r.push(s)}})),r}}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){var t,n;t=e.refactor||(e.refactor={}),n=e.createMap(),t.registerRefactor=function(e){n.set(e.name,e)},t.getApplicableRefactors=function(t){return e.flatMapIter(n.values(),(function(e){return t.cancellationToken&&t.cancellationToken.isCancellationRequested()?void 0:e.getAvailableActions(t)}))},t.getEditsForRefactor=function(e,t,o){var r=n.get(t);return r&&r.getEditsForAction(e,o)},e.getRefactorContextLength=function(e){return void 0===e.endPosition?0:e.endPosition-e.startPosition}}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics._0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write_0.code],getCodeActions:function(t){var n=t.sourceFile,o=e.getTokenAtPosition(n,t.span.start,!1),r=e.getAncestor(o,147);e.Debug.assert(!!r,"Expected position to be owned by a decorator.");var i=e.createCall(r.expression,void 0,void 0),s=e.textChanges.ChangeTracker.fromContext(t);return s.replaceNode(n,r.expression,i),[{description:e.getLocaleSpecificMessage(e.Diagnostics.Call_decorator_expression),changes:s.getChanges()}]}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics.Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_property_1_in_0_with_0_1.code],getCodeActions:function(t){var n=t.sourceFile,o=e.getTokenAtPosition(n,t.span.start,!1),r=e.getAncestor(o,143);if(e.Debug.assert(!!r,"Expected position to be owned by a qualified name."),e.isIdentifier(r.left)){var i=r.left.getText(n),s=r.right.getText(n),a=e.createIndexedAccessTypeNode(e.createTypeReferenceNode(r.left,void 0),e.createLiteralTypeNode(e.createLiteral(s))),l=e.textChanges.ChangeTracker.fromContext(t);return l.replaceNode(n,r,a),[{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Rewrite_as_the_indexed_access_type_0),[i+'["'+s+'"]']),changes:l.getChanges()}]}}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics.Class_0_incorrectly_implements_interface_1.code],getCodeActions:function(n){var o=n.sourceFile,r=n.span.start,i=e.getTokenAtPosition(o,r,!1),s=n.program.getTypeChecker(),a=e.getContainingClass(i);if(!a)return;for(var l=e.getOpenBraceOfClassLike(a,o),c=s.getTypeAtLocation(a),u=e.getClassImplementsHeritageClauseElements(a),p=!!s.getIndexTypeOfType(c,1),d=!!s.getIndexTypeOfType(c,0),g=[],h=0,f=u;h<f.length;h++){var _=f[h],m=s.getTypeAtLocation(_),y=s.getPropertiesOfType(m).filter((function(t){return!(8&e.getModifierFlags(t.valueDeclaration))})),k=[];v(m,1,p,k),v(m,0,d,k),k=k.concat(t.createMissingMemberNodes(a,y,s));var b=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Implement_interface_0),[_.getText()]);k.length>0&&T(g,k,b)}return g;function v(e,t,n,o){if(!n){var r=s.getIndexInfoOfType(e,t);if(r){var i=s.indexInfoToIndexSignatureDeclaration(r,t,a);o.push(i)}}}function T(e,o,r){e.push({description:r,changes:t.newNodesToChanges(o,l,n)})}}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics.Property_0_does_not_exist_on_type_1.code,e.Diagnostics.Property_0_does_not_exist_on_type_1_Did_you_mean_2.code],getCodeActions:function(n){var o=n.sourceFile,r=n.span.start,i=e.getTokenAtPosition(o,r,!1);if(71!==i.kind)return;if(!e.isPropertyAccessExpression(i.parent))return;var s,a=i.getText(o),l=!1;if(99===i.parent.expression.kind){var c=e.getThisContainer(i,!1);if(!e.isClassElement(c))return;s=c.parent,l=s&&e.hasModifier(c,32)}else{var u=n.program.getTypeChecker(),p=i.parent.expression,d=u.getTypeAtLocation(p);if(32768&d.flags){var g=d.symbol;32&g.flags&&(s=g.declarations&&g.declarations[0],d!==u.getDeclaredTypeOfSymbol(g)&&(l=!0))}}if(!s||!e.isClassLike(s))return;var h=e.getSourceFileOfNode(s),f=e.getOpenBraceOfClassLike(s,h);return e.isInJavaScriptFile(h)?function(t,o){var r,i=_(!1);i&&(r=[i]);if(o){if(199===t.kind)return r;var s=t.name.getText(),l=e.createStatement(e.createAssignment(e.createPropertyAccess(e.createIdentifier(s),a),e.createIdentifier("undefined"))),c=e.textChanges.ChangeTracker.fromContext(n);c.insertNodeAfter(h,t,l,{prefix:n.newLineCharacter,suffix:n.newLineCharacter});var u={description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Initialize_static_property_0),[a]),changes:c.getChanges()};return(r||(r=[])).push(u),r}var p=e.getFirstConstructorWithBody(t);if(!p)return r;var d=e.createStatement(e.createAssignment(e.createPropertyAccess(e.createThis(),a),e.createIdentifier("undefined"))),g=e.textChanges.ChangeTracker.fromContext(n);g.insertNodeBefore(h,p.body.getLastToken(),d,{suffix:n.newLineCharacter});var f={description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Initialize_property_0_in_the_constructor),[a]),changes:g.getChanges()};return(r||(r=[])).push(f),r}(s,l):function(t,o){var r,s,l=_(!0);l&&(r=[l]);if(194===i.parent.parent.kind){var c=i.parent.parent,u=i.parent===c.left?c.right:c.left,p=n.program.getTypeChecker(),d=p.getWidenedType(p.getBaseTypeOfLiteralType(p.getTypeAtLocation(u)));s=p.typeToTypeNode(d,t)}s=s||e.createKeywordTypeNode(119);var g=e.createProperty(void 0,o?[e.createToken(115)]:void 0,a,void 0,s,void 0),m=e.textChanges.ChangeTracker.fromContext(n);m.insertNodeAfter(h,f,g,{suffix:n.newLineCharacter});var y=o?e.Diagnostics.Declare_static_property_0:e.Diagnostics.Declare_property_0;if(r=e.append(r,{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(y),[a]),changes:m.getChanges()}),!o){var k=e.createKeywordTypeNode(136),b=e.createParameter(void 0,void 0,void 0,"x",void 0,k,void 0),v=e.createIndexSignature(void 0,void 0,[b],s),T=e.textChanges.ChangeTracker.fromContext(n);T.insertNodeAfter(h,f,v,{suffix:n.newLineCharacter}),r.push({description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Add_index_signature_for_property_0),[a]),changes:T.getChanges()})}return r}(s,l);function _(o){if(181===i.parent.parent.kind){var r=i.parent.parent,s=t.createMethodFromCallExpression(r,a,o,l),c=e.textChanges.ChangeTracker.fromContext(n);c.insertNodeAfter(h,f,s,{suffix:n.newLineCharacter});var u=l?e.Diagnostics.Declare_static_method_0:e.Diagnostics.Declare_method_0;return{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(u),[a]),changes:c.getChanges()}}}}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics.Property_0_does_not_exist_on_type_1_Did_you_mean_2.code,e.Diagnostics.Cannot_find_name_0_Did_you_mean_1.code],getCodeActions:function(t){var n,o=t.sourceFile,r=e.getTokenAtPosition(o,t.span.start,!1),i=t.program.getTypeChecker();if(e.isPropertyAccessExpression(r.parent)&&r.parent.name===r){e.Debug.assert(71===r.kind);var s=i.getTypeAtLocation(r.parent.expression);n=i.getSuggestionForNonexistentProperty(r,s)}else{var a=e.getMeaningFromLocation(r);n=i.getSuggestionForNonexistentSymbol(r,e.getTextOfNode(r),function(e){var t=0;4&e&&(t|=1920);2&e&&(t|=793064);1&e&&(t|=107455);return t}(a))}if(n)return[{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Change_spelling_to_0),[n]),changes:[{fileName:o.fileName,textChanges:[{span:{start:r.getStart(),length:r.getWidth()},newText:n}]}]}]}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){function n(t,n){var o=e.getPackageName(n).packageName;if(t.isKnownTypesPackageName(o)){var r=e.getTypesPackageName(o);return{description:"Install '"+r+"'",changes:[],commands:[{type:"install package",packageName:r}]}}}t.registerCodeFix({errorCodes:[e.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type.code],getCodeActions:function(t){var o=t.sourceFile,r=t.span.start,i=e.getTokenAtPosition(o,r,!1);if(!e.isStringLiteral(i))throw e.Debug.fail();var s=n(t.host,i.text);return s&&[s]}}),t.tryGetCodeActionForInstallPackageTypes=n}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){function n(n){var r=n.sourceFile,i=n.span.start,s=e.getTokenAtPosition(r,i,!1),a=n.program.getTypeChecker();if(e.isClassLike(s.parent)){var l=s.parent,c=e.getClassExtendsHeritageClauseElement(l),u=a.getTypeAtLocation(c),p=a.getPropertiesOfType(u).filter(o),d=t.createMissingMemberNodes(l,p,a),g=t.newNodesToChanges(d,e.getOpenBraceOfClassLike(l,r),n);if(g&&g.length>0)return[{description:e.getLocaleSpecificMessage(e.Diagnostics.Implement_inherited_abstract_class),changes:g}]}}function o(t){var n=t.getDeclarations();e.Debug.assert(!!(n&&n.length>0));var o=e.getModifierFlags(n[0]);return!(8&o||!(128&o))}t.registerCodeFix({errorCodes:[e.Diagnostics.Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2.code],getCodeActions:n}),t.registerCodeFix({errorCodes:[e.Diagnostics.Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1.code],getCodeActions:n})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics.super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class.code],getCodeActions:function(t){var n=t.sourceFile,o=e.getTokenAtPosition(n,t.span.start,!1);if(99===o.kind){var r=e.getContainingFunction(o),i=function t(n){if(210===n.kind&&e.isSuperCall(n.expression))return n;if(e.isFunctionLike(n))return;return e.forEachChild(n,t)}(r.body);if(i){if(i.expression&&181===i.expression.kind)for(var s=i.expression.arguments,a=0;a<s.length;a++)if(s[a].expression===o)return;var l=e.textChanges.ChangeTracker.fromContext(t);return l.insertNodeAfter(n,e.getOpenBrace(r,n),i,{suffix:t.newLineCharacter}),l.deleteNode(n,i),[{description:e.getLocaleSpecificMessage(e.Diagnostics.Make_super_call_the_first_statement_in_the_constructor),changes:l.getChanges()}]}}}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics.Constructors_for_derived_classes_must_contain_a_super_call.code],getCodeActions:function(t){var n=t.sourceFile,o=e.getTokenAtPosition(n,t.span.start,!1);if(123===o.kind){var r=e.textChanges.ChangeTracker.fromContext(t),i=e.createStatement(e.createCall(e.createSuper(),void 0,e.emptyArray));return r.insertNodeAfter(n,e.getOpenBrace(o.parent,n),i,{suffix:t.newLineCharacter}),[{description:e.getLocaleSpecificMessage(e.Diagnostics.Add_missing_super_call),changes:r.getChanges()}]}}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics.Cannot_extend_an_interface_0_Did_you_mean_implements.code],getCodeActions:function(t){var n=t.sourceFile,o=t.span.start,r=e.getTokenAtPosition(n,o,!1),i=e.getContainingClass(r);if(71===r.kind&&e.isClassLike(i)){var s=i.heritageClauses;if(s&&s.length>0){var a=s[0].getFirstToken();if(a&&85===a.kind){var l=e.textChanges.ChangeTracker.fromContext(t);l.replaceNode(n,a,e.createToken(108));for(var c=1;c<s.length;c++){var u=s[c].getFirstToken();u&&l.replaceNode(n,u,e.createToken(26))}return[{description:e.getLocaleSpecificMessage(e.Diagnostics.Change_extends_to_implements),changes:l.getChanges()}]}}}}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics.Cannot_find_name_0_Did_you_mean_the_instance_member_this_0.code],getCodeActions:function(t){var n=t.sourceFile,o=e.getTokenAtPosition(n,t.span.start,!1);if(71===o.kind){var r=e.textChanges.ChangeTracker.fromContext(t);return r.replaceNode(n,o,e.createPropertyAccess(e.createThis(),o)),[{description:e.getLocaleSpecificMessage(e.Diagnostics.Add_this_to_unresolved_variable),changes:r.getChanges()}]}}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){t.registerCodeFix({errorCodes:[e.Diagnostics._0_is_declared_but_its_value_is_never_read.code,e.Diagnostics.Property_0_is_declared_but_its_value_is_never_read.code],getCodeActions:function(t){var n=t.sourceFile,o=t.span.start,r=e.getTokenAtPosition(n,o,!1);switch(21===r.kind&&(r=e.getTokenAtPosition(n,o+1,!1)),r.kind){case 71:return function(t){var o=t.parent;switch(o.kind){case 226:return function(t,n){switch(n.parent.parent.kind){case 214:var o=n.parent.parent.initializer;return[1===o.declarations.length?l(o):u(n)];case 216:var r=n.parent.parent;return e.Debug.assert(227===r.initializer.kind),[d(r.initializer.declarations[0],e.createObjectLiteral()),s(t)];case 215:return[s(t)];default:var i=n.parent.parent;return 1===i.declarationList.declarations.length?[l(i)]:[u(n)]}}(t,o);case 145:var r=o.parent.typeParameters;if(1===r.length){var g=e.getTokenAtPosition(n,r.pos-1,!1),h=e.getTokenAtPosition(n,r.end,!1);return e.Debug.assert(27===g.kind),e.Debug.assert(29===h.kind),[p(g,h)]}return[u(o)];case 146:return[1===o.parent.parameters.length?l(o):u(o),s(t)];case 237:return[l(e.getAncestor(t,237))];case 242:var f=o.parent;return 1===f.elements.length?a(f):[u(o)];case 239:var _=o;if(_.namedBindings){var m=_.name.getStart(n);return(h=e.getTokenAtPosition(n,_.name.end,!1))&&26===h.kind?[c({pos:m,end:e.skipTrivia(n.text,h.end,!1,!0)})]:[l(_.name)]}return[l(e.getAncestor(_,238))];case 240:return a(o);default:return i()}}(r);case 149:case 240:return[l(r.parent)];default:return i()}function i(){return e.isDeclarationName(r)?[l(r.parent)]:e.isLiteralComputedPropertyDeclarationName(r)?[l(r.parent.parent)]:void 0}function s(t){var o=t.getStart(n,!1);return{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Prefix_0_with_an_underscore),{0:r.getText()}),changes:[{fileName:n.path,textChanges:[{span:{start:o,length:0},newText:"_"}]}]}}function a(t){if(t.parent.name){var o=e.getTokenAtPosition(n,t.pos-1,!1);return o&&26===o.kind?[c({pos:o.getStart(),end:t.end})]:void 0}return[l(e.getAncestor(t,238))]}function l(o){return g(e.textChanges.ChangeTracker.fromContext(t).deleteNode(n,o))}function c(o){return g(e.textChanges.ChangeTracker.fromContext(t).deleteRange(n,o))}function u(o){return g(e.textChanges.ChangeTracker.fromContext(t).deleteNodeInList(n,o))}function p(o,r){return g(e.textChanges.ChangeTracker.fromContext(t).deleteNodeRange(n,o,r))}function d(o,r){return g(e.textChanges.ChangeTracker.fromContext(t).replaceNode(n,o,r))}function g(t){return{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Remove_declaration_for_Colon_0),{0:r.getText()}),changes:t.getChanges()}}}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){function n(t,n,o,r){return{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Change_0_to_1),[o,r]),changes:[{fileName:n,textChanges:[{span:{start:t.getStart(),length:t.getWidth()},newText:r}]}]}}t.registerCodeFix({errorCodes:[e.Diagnostics.JSDoc_types_can_only_be_used_inside_documentation_comments.code],getCodeActions:function(t){var o=t.sourceFile,r=e.getTokenAtPosition(o,t.span.start,!1),i=e.findAncestor(r,(function(e){return 202===e.kind||155===e.kind||156===e.kind||228===e.kind||153===e.kind||157===e.kind||172===e.kind||151===e.kind||150===e.kind||146===e.kind||149===e.kind||148===e.kind||154===e.kind||231===e.kind||184===e.kind||226===e.kind}));if(!i)return;var s=t.program.getTypeChecker(),a=i.type;if(!a)return;var l=e.getTextOfNode(a),c=s.getTypeFromTypeNode(a),u=[n(a,o.fileName,l,s.typeToString(c,void 0,8))];if(270===a.kind){var p=s.typeToString(s.getNullableType(c,2048),void 0,8);u.push(n(a,o.fileName,l,p))}return u}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){var n,o=e.textChanges.ChangeTracker;t.registerCodeFix({errorCodes:[e.Diagnostics.Cannot_find_name_0.code,e.Diagnostics.Cannot_find_name_0_Did_you_mean_1.code,e.Diagnostics.Cannot_find_namespace_0.code,e.Diagnostics._0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead.code],getCodeActions:function(t){var n=function(t){var n=!!t.host.useCaseSensitiveFileNames&&t.host.useCaseSensitiveFileNames(),o=t.program.getTypeChecker(),r=e.getTokenAtPosition(t.sourceFile,t.span.start,!1);return{host:t.host,newLineCharacter:t.newLineCharacter,rulesProvider:t.rulesProvider,sourceFile:t.sourceFile,checker:o,compilerOptions:t.program.getCompilerOptions(),cachedImportDeclarations:[],getCanonicalFileName:e.createGetCanonicalFileName(n),symbolName:r.getText(),symbolToken:r}}(t);return t.errorCode===e.Diagnostics._0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead.code?function(t){var n,o,r=t.checker,i=t.symbolToken,a=r.getSymbolAtLocation(i);2097152&a.flags?(n=r.getAliasedSymbol(a),o=t.symbolName):e.isJsxOpeningLikeElement(i.parent)&&i.parent.tagName===i?o=(n=r.getAliasedSymbol(r.resolveName(r.getJsxNamespace(),i.parent.tagName,107455))).name:e.Debug.fail("Either the symbol or the JSX namespace should be a UMD global if we got here");return s(n,__assign({},t,{symbolName:o,kind:2}))}(n):function(t,n,o){var i=t.sourceFile,a=t.checker,l=t.symbolName,c=t.symbolToken;e.Debug.assert("default"!==l);var u=new r,p=e.getMeaningFromLocation(c);return f(a,n,(function(n){if(n!==i.symbol){o.throwIfCancellationRequested();var r=a.tryGetMemberInModuleExports("default",n);if(r){var c=e.getLocalSymbolForExportDefault(r);if(c&&c.escapedName===l&&h(c,p)){var d=e.getUniqueSymbolId(c,a);u.addActions(d,s(n,__assign({},t,{kind:1})))}}var g=a.tryGetMemberInModuleExportsAndProperties(l,n);if(g&&h(g,p)){d=e.getUniqueSymbolId(g,a);u.addActions(d,s(n,__assign({},t,{kind:0})))}}})),u.getAllActions()}(n,t.program.getSourceFiles(),t.cancellationToken)}}),function(e){e[e.Better=0]="Better",e[e.Equal=1]="Equal",e[e.Worse=2]="Worse"}(n||(n={}));var r=function(){function t(){this.symbolIdToActionMap=[]}return t.prototype.addAction=function(e,t){var n=this.symbolIdToActionMap[e];if(n)if("CodeChange"!==t.kind){for(var o=[],r=0,i=this.symbolIdToActionMap[e];r<i.length;r++){var s=i[r];if("CodeChange"!==s.kind)switch(this.compareModuleSpecifiers(s.moduleSpecifier,t.moduleSpecifier)){case 0:if("NewImport"===t.kind)return;case 1:o.push(s);break;case 2:continue}else o.push(s)}o.push(t),this.symbolIdToActionMap[e]=o}else n.push(t);else this.symbolIdToActionMap[e]=[t]},t.prototype.addActions=function(e,t){for(var n=0,o=t;n<o.length;n++){var r=o[n];this.addAction(e,r)}},t.prototype.getAllActions=function(){var t=[];for(var n in this.symbolIdToActionMap)t=e.concatenate(t,this.symbolIdToActionMap[n]);return t},t.prototype.compareModuleSpecifiers=function(t,n){if(t===n)return 1;if(0===n.indexOf(t))return 0;if(0===t.indexOf(n))return 2;if(e.isExternalModuleNameRelative(t)&&e.isExternalModuleNameRelative(n)){var o=new RegExp(e.directorySeparator,"g"),r=(t.match(o)||[]).length,i=(n.match(o)||[]).length;return r<i?0:r===i?1:2}return 1},t}();function i(t,n,o,r,i){return{description:e.formatMessage.apply(void 0,[void 0,t].concat(n)),changes:o,kind:r,moduleSpecifier:i}}function s(t,n){var r=function(t,n,o,r){var i=o.imports;void 0===r&&(r=[]);var s=e.getUniqueSymbolId(t,n),a=r[s];a||(a=r[s]=e.mapDefined(i,(function(o){return n.getSymbolAtLocation(o)===t?function(t){var n=t.parent;switch(n.kind){case 238:return n;case 248:return n.parent;default:return void e.Debug.assert(244===n.kind)}}(o):void 0})));return a}(t,n.checker,n.sourceFile,n.cachedImportDeclarations),s=[];if(n.symbolToken)for(var h=0,f=r;h<f.length;h++){var _=a(f[h]);_&&s.push(g(_.text,n,n.symbolToken))}return s.push(function(t,n,r){var s=e.firstDefined(r,(function(t){if(238===t.kind&&t.importClause){var r=function(t,n){var r=t.symbolName,i=t.sourceFile,s=t.kind,a=n.name,l=n.namedBindings;switch(s){case 1:return a?void 0:o.with(t,(function(t){return t.replaceNode(i,n,e.createImportClause(e.createIdentifier(r),l))}));case 0:var c=e.createImportSpecifier(void 0,e.createIdentifier(r));return l&&241===l.kind&&0!==l.elements.length?o.with(t,(function(e){return e.insertNodeInListAfter(i,l.elements[l.elements.length-1],c)})):!l||241===l.kind&&0===l.elements.length?o.with(t,(function(t){return t.replaceNode(i,n,e.createImportClause(a,e.createNamedImports([c])))})):void 0;case 2:return l?void 0:o.with(t,(function(t){return t.replaceNode(i,n,e.createImportClause(a,e.createNamespaceImport(e.createIdentifier(r))))}));default:e.Debug.assertNever(s)}}(n,t.importClause);if(r){var s=e.stripQuotes(t.moduleSpecifier.getText());return i(e.Diagnostics.Add_0_to_existing_import_declaration_from_1,[n.symbolName,s],r,"InsertingIntoExistingImport",s)}}}));if(s)return s;var a=e.firstDefined(r,d)||function(t,n,o,r,i){var s=n.valueDeclaration.getSourceFile().fileName,a=e.getDirectoryPath(t.fileName);return function(t){var n=t.valueDeclaration;if(e.isModuleDeclaration(n)&&e.isStringLiteral(n.name))return n.name.text}(n)||function(t,n,o,r){var i=e.getEffectiveTypeRoots(t,n);return i&&e.firstDefined(i,(function(t){var n=e.toPath(t,void 0,o);if(e.startsWith(r,n))return c(r.substring(n.length+1))}))}(o,i,r,s)||function(t,n,o,r,i){if(e.getEmitModuleResolutionKind(t)!==e.ModuleResolutionKind.NodeJs)return;var s=function(e){var t,n=0,o=0,r=0,i=0;!function(e){e[e.BeforeNodeModules=0]="BeforeNodeModules",e[e.NodeModules=1]="NodeModules",e[e.Scope=2]="Scope",e[e.PackageContent=3]="PackageContent"}(t||(t={}));var s=0,a=0,l=0;for(;a>=0;)switch(s=a,a=e.indexOf("/",s+1),l){case 0:e.indexOf("/node_modules/",s)===s&&(n=s,o=a,l=1);break;case 1:case 2:1===l&&"@"===e.charAt(s+1)?l=2:(r=a,l=3);break;case 3:l=e.indexOf("/node_modules/",s)===s?1:3}return i=s,l>1?{topLevelNodeModulesIndex:n,topLevelPackageNameIndex:o,packageRootIndex:r,fileNameIndex:i}:void 0}(n);if(!s)return;var a=l(n);return a=c(a),e.getPackageNameFromAtTypesDirectory(a);function l(t){var n=t.substring(0,s.packageRootIndex),i=e.combinePaths(n,"package.json");if(o.fileExists(i)){var a=JSON.parse(o.readFile(i));if(a){var l=a.typings||a.types||a.main;if(l)if(e.toPath(l,n,r)===r(t))return n}}var c=e.removeFileExtension(t);return"/index"===r(c.substring(s.fileNameIndex))?c.substring(0,s.fileNameIndex):c}function c(e){var t=e.substring(0,s.topLevelNodeModulesIndex);return 0===i.indexOf(t)?e.substring(s.topLevelPackageNameIndex+1):p(e,i,r)}}(o,s,i,r,a)||function(t,n,o){if(!t.baseUrl)return;var r=u(n,t.baseUrl,o);if(!r)return;var i=e.removeFileExtension(r);if(r=c(r),t.paths)for(var s in t.paths)for(var a=0,l=t.paths[s];a<l.length;a++){var p=l[a],d=p.indexOf("*");if(0!==d||1!==p.length)if(-1!==d){var g=p.substr(0,d),h=p.substr(d+1);if(r.length>=g.length+h.length&&e.startsWith(r,g)&&e.endsWith(r,h)){var f=r.substr(g.length,r.length-h.length);return s.replace("*",f)}}else if(p===r||p===i)return s}return r}(o,s,r)||o.rootDirs&&function(t,n,o,r){var i=l(n,t,r);if(void 0===i)return;var s=l(o,t,r),a=void 0!==s?p(i,s,r):i;return e.removeFileExtension(a)}(o.rootDirs,s,a,r)||e.removeFileExtension(p(s,a,r))}(n.sourceFile,t,n.compilerOptions,n.getCanonicalFileName,n.host);return function(t,n){var r=t.kind,s=t.sourceFile,a=t.newLineCharacter,l=t.symbolName,c=e.findLast(s.statements,e.isAnyImportSyntax),u=e.stripQuotes(n),p=e.createImportDeclaration(void 0,void 0,function(t,n){var o=e.createIdentifier(n);switch(t){case 1:return e.createImportClause(o,void 0);case 2:return e.createImportClause(void 0,e.createNamespaceImport(o));case 0:return e.createImportClause(void 0,e.createNamedImports([e.createImportSpecifier(void 0,o)]));default:e.Debug.assertNever(t)}}(r,l),function(t,n){var o=e.createLiteral(n),r=e.firstOrUndefined(t.imports);return o.singleQuote=!!r&&!e.isStringDoubleQuoted(r,t),o}(s,u)),d=o.with(t,(function(t){c?t.insertNodeAfter(s,c,p,{suffix:a}):t.insertNodeAt(s,e.getSourceFileImportLocation(s),p,{suffix:""+a+a})}));return i(e.Diagnostics.Import_0_from_1,[l,u],d,"NewImport",u)}(n,a)}(t,n,r)),s}function a(e){if(238===e.kind){var t=e.importClause&&e.importClause.namedBindings;return t&&240===t.kind?t.name:void 0}return e.name}function l(t,n,o){return e.firstDefined(n,(function(e){return u(t,e,o)}))}function c(t){return t=e.removeFileExtension(t),e.endsWith(t,"/index")&&(t=t.substr(0,t.length-6)),t}function u(t,n,o){var r=e.getRelativePathToDirectoryOrUrl(n,t,n,o,!1);return e.isRootedDiskPath(r)||e.startsWith(r,"..")?void 0:r}function p(t,n,o){var r=e.getRelativePathToDirectoryOrUrl(n,t,n,o,!1);return e.pathIsRelative(r)?r:"./"+r}function d(t){var n=238===t.kind?t.moduleSpecifier:248===t.moduleReference.kind?t.moduleReference.expression:void 0;return n&&e.isStringLiteral(n)?n.text:void 0}function g(t,n,r){var s=n.symbolName,a=n.sourceFile;return i(e.Diagnostics.Change_0_to_1,[s,t+"."+s],o.with(n,(function(n){return n.replaceNode(a,r,e.createPropertyAccess(e.createIdentifier(t),s))})),"CodeChange",void 0)}function h(t,n){var o=t.declarations;return e.some(o,(function(t){return!!(e.getMeaningFromDeclaration(t)&n)}))}function f(t,n,o){for(var r=0,i=t.getAmbientModules();r<i.length;r++){o(i[r])}for(var s=0,a=n;s<a.length;s++){var l=a[s];e.isExternalOrCommonJsModule(l)&&o(l.symbol)}}!function(e){e[e.Named=0]="Named",e[e.Default=1]="Default",e[e.Namespace=2]="Namespace"}(t.ImportKind||(t.ImportKind={})),t.getCodeActionForImport=s,t.forEachExternalModule=f}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){var n;function o(t,n,o){var r=e.getLineAndCharacterOfPosition(t,n).line,i=e.getStartPositionOfLine(r,t),s=e.getFirstNonSpaceCharacterPosition(t.text,i);if(!e.isInComment(t,s)&&!e.isInString(t,s)&&!e.isInTemplateString(t,s)){var a=e.getTouchingToken(t,s,!1),l=e.getLeadingCommentRangesOfNode(a,t);if(!l||!l.length||l[0].pos>=s)return{span:{start:s,length:0},newText:"// @ts-ignore"+o}}return{span:{start:n,length:0},newText:(n===s?"":o)+"// @ts-ignore"+o}}t.registerCodeFix({errorCodes:(n=e.Diagnostics,Object.keys(n).filter((function(t){return n[t]&&n[t].category===e.DiagnosticCategory.Error})).map((function(e){return n[e].code}))),getCodeActions:function(t){var n=t.sourceFile,r=t.program,i=t.newLineCharacter,s=t.span;if(!e.isInJavaScriptFile(n)||!e.isCheckJsEnabledForFile(n,r.getCompilerOptions()))return;return[{description:e.getLocaleSpecificMessage(e.Diagnostics.Ignore_this_error_message),changes:[{fileName:n.fileName,textChanges:[o(n,s.start,i)]}]},{description:e.getLocaleSpecificMessage(e.Diagnostics.Disable_checking_for_this_file),changes:[{fileName:n.fileName,textChanges:[{span:{start:n.checkJsDirective?n.checkJsDirective.pos:0,length:n.checkJsDirective?n.checkJsDirective.end-n.checkJsDirective.pos:0},newText:"// @ts-nocheck"+i}]}]}]}})}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){function n(t,n,s){var a=t.getDeclarations();if(a&&a.length){var l=a[0],c=e.getSynthesizedClone(e.getNameOfDeclaration(l)),u=function(t){if(4&t)return e.createToken(114);if(16&t)return e.createToken(113);return}(e.getModifierFlags(l)),p=u?e.createNodeArray([u]):void 0,d=s.getWidenedType(s.getTypeOfSymbolAtLocation(t,n)),g=!!(16777216&t.flags);switch(l.kind){case 153:case 154:case 148:case 149:var h=s.typeToTypeNode(d,n);return e.createProperty(void 0,p,c,g?e.createToken(55):void 0,h,void 0);case 150:case 151:var f=s.getSignaturesOfType(d,0);if(!e.some(f))return;if(1===a.length)return e.Debug.assert(1===f.length),b(f[0],n,i());for(var _=[],m=0;m<f.length;m++){(y=b(f[m],n))&&_.push(y)}if(a.length>f.length){var y;(y=b(s.getSignatureFromDeclaration(a[a.length-1]),n,i()))&&_.push(y)}else{e.Debug.assert(a.length===f.length);var k=function(t,n,i,s){for(var a=t[0],l=t[0].minArgumentCount,c=!1,u=0;u<t.length;u++){var p=t[u];l=Math.min(p.minArgumentCount,l),p.hasRestParameter&&(c=!0),p.parameters.length>=a.parameters.length&&(!p.hasRestParameter||a.hasRestParameter)&&(a=p)}var d=a.parameters.length-(a.hasRestParameter?1:0),g=a.parameters.map((function(e){return e.name})),h=o(d,g,l,!0);if(c){var f=e.createArrayTypeNode(e.createKeywordTypeNode(119)),_=e.createParameter(void 0,void 0,e.createToken(24),g[d]||"rest",d>=l?e.createToken(55):void 0,f,void 0);h.push(_)}return r(s,n,i,void 0,h,void 0)}(f,c,g,p);_.push(k)}return _;default:return}}function b(t,n,o){var r=s.signatureToSignatureDeclaration(t,151,n,e.NodeBuilderFlags.SuppressAnyReturnType);return r&&(r.decorators=void 0,r.modifiers=p,r.name=c,r.questionToken=g?e.createToken(55):void 0,r.body=o),r}}function o(t,n,o,r){for(var i=[],s=0;s<t;s++){var a=e.createParameter(void 0,void 0,void 0,n&&n[s]||"arg"+s,void 0!==o&&s>=o?e.createToken(55):void 0,r?e.createKeywordTypeNode(119):void 0,void 0);i.push(a)}return i}function r(t,n,o,r,s,a){return e.createMethod(void 0,t,void 0,n,o?e.createToken(55):void 0,r,s,a,i())}function i(){return e.createBlock([e.createThrow(e.createNew(e.createIdentifier("Error"),void 0,[e.createLiteral("Method not implemented.")]))],!0)}t.newNodesToChanges=function(t,n,o){for(var r=o.sourceFile,i=e.textChanges.ChangeTracker.fromContext(o),s=0,a=t;s<a.length;s++){var l=a[s];i.insertNodeAfter(r,n,l,{suffix:o.newLineCharacter})}var c=i.getChanges();return e.some(c)?(e.Debug.assert(1===c.length),[{fileName:c[0].fileName,textChanges:[{span:c[0].textChanges[0].span,newText:c[0].textChanges.reduce((function(e,t){return e+t.newText}),"")}]}]):c},t.createMissingMemberNodes=function(e,t,o){for(var r=e.symbol.members,i=[],s=0,a=t.filter((function(e){return!r.has(e.escapedName)}));s<a.length;s++){var l=n(a[s],e,o);l&&(Array.isArray(l)?i=i.concat(l):i.push(l))}return i},t.createMethodFromCallExpression=function(t,n,r,s){var a,l=o(t.arguments.length,void 0,void 0,r);if(r)for(var c=e.length(t.typeArguments),u=0;u<c;u++){var p=c<8?String.fromCharCode(84+u):"T"+u,d=e.createTypeParameterDeclaration(p,void 0,void 0);(a||(a=[])).push(d)}return e.createMethod(void 0,s?[e.createToken(115)]:void 0,void 0,n,void 0,a,l,r?e.createKeywordTypeNode(119):void 0,i())},t.createStubbedMethod=r}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){var n;t.registerCodeFix({errorCodes:[e.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined.code,e.Diagnostics.Variable_0_implicitly_has_an_1_type.code,e.Diagnostics.Parameter_0_implicitly_has_an_1_type.code,e.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type.code,e.Diagnostics.Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation.code,e.Diagnostics._0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type.code,e.Diagnostics.Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation.code,e.Diagnostics.Member_0_implicitly_has_an_1_type.code],getCodeActions:function(t){var o,r=t.sourceFile,i=t.program,s=t.span.start,a=t.errorCode,l=t.cancellationToken,c=e.getTokenAtPosition(r,s,!1);if(e.isInJavaScriptFile(c))return;switch(c.kind){case 71:case 24:case 114:case 112:case 113:case 131:break;default:return}var u=e.getContainingFunction(c),p=i.getTypeChecker();switch(a){case e.Diagnostics.Member_0_implicitly_has_an_1_type.code:case e.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined.code:return d(c.parent);case e.Diagnostics.Variable_0_implicitly_has_an_1_type.code:return function(e){var t=p.getSymbolAtLocation(e);return t&&t.valueDeclaration&&d(t.valueDeclaration)}(c);case e.Diagnostics.Parameter_0_implicitly_has_an_1_type.code:if(e.isSetAccessor(u))return g(u);case e.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type.code:return function(t){if(!e.isIdentifier(t.name)||!function(e){switch(e.kind){case 228:case 151:case 152:return!0;case 186:return!!e.name}return!1}(u))return;var o=function(e){switch(e.kind){case 152:case 186:case 228:case 151:var t=152===e.kind?k(e,r,123):e.name;if(t)return n.inferTypeForParametersFromReferences(f(t),e,p,l)}}(u)||e.map(u.parameters,(function(t){return e.isIdentifier(t.name)&&_(t.name)}));if(!o)return;var i=e.zipWith(u.parameters,o,(function(e,t){if(t&&!e.type&&!e.initializer){var n=y(t,u);return n?{span:{start:e.end,length:0},newText:": "+n}:void 0}})).filter((function(e){return!!e}));return i.length?[{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Infer_parameter_types_from_usage),[t.name.getText()]),changes:[{fileName:r.fileName,textChanges:i}]}]:void 0}(c.parent);case e.Diagnostics.Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation.code:case e.Diagnostics._0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type.code:return e.isGetAccessor(u)?function(t){if(!e.isIdentifier(t.name))return;var n=_(t.name),o=n&&y(n,u);if(!o)return;var i=k(t,r,20);return h(t.name.getText(),i.getEnd(),": "+o)}(u):void 0;case e.Diagnostics.Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation.code:return e.isSetAccessor(u)?g(u):void 0}return;function d(t){if(e.isIdentifier(t.name)){var n=_(t.name),o=n&&y(n,t);if(o)return h(t.name.getText(),t.name.getEnd(),": "+o)}}function g(t){var n=t.parameters[0];if(n&&e.isIdentifier(t.name)&&e.isIdentifier(n.name)){var o=_(t.name)||_(n.name),r=o&&y(o,u);if(r)return h(t.name.getText(),n.name.getEnd(),": "+r)}}function h(t,n,o){return[{description:e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Infer_type_of_0_from_usage),[t]),changes:[{fileName:r.fileName,textChanges:[{span:{start:n,length:0},newText:o}]}]}]}function f(t){var n=e.FindAllReferences.findReferencedSymbols(i,l,i.getSourceFiles(),t.getSourceFile(),t.getStart());return e.Debug.assert(!!n,"Found no references!"),e.Debug.assert(1===n.length,"Found more references than expected"),e.map(n[0].references,(function(t){return e.getTokenAtPosition(i.getSourceFile(t.fileName),t.textSpan.start,!1)}))}function _(e){return n.inferTypeFromReferences(f(e),p,l)}function m(){if(!o){var t="",n=!0,r=function(e){return t+=e};o={string:function(){return n?t:void 0},writeKeyword:r,writeOperator:r,writePunctuation:r,writeSpace:r,writeStringLiteral:r,writeParameter:r,writeProperty:r,writeSymbol:r,writeLine:function(){return t+=" "},increaseIndent:e.noop,decreaseIndent:e.noop,clear:function(){t="",n=!0},trackSymbol:function(e,t,o){0!==p.isSymbolAccessible(e,t,o,!1).accessibility&&(n=!1)},reportInaccessibleThisError:function(){n=!1},reportPrivateInBaseOfClassExpression:function(){n=!1}}}return o.clear(),o}function y(e,t){var n=m();return p.getSymbolDisplayBuilder().buildTypeDisplay(e,n,t),n.string()}function k(e,t,n){for(var o=0,r=e.getChildren(t);o<r.length;o++){var i=r[o];if(i.kind===n)return i}}}}),function(t){function n(t,r,i){for(;e.isRightSideOfQualifiedNameOrPropertyAccess(t);)t=t.parent;switch(t.parent.kind){case 193:i.isNumber=!0;break;case 192:!function(e,t){switch(e.operator){case 43:case 44:case 38:case 52:t.isNumber=!0;break;case 37:t.isNumberOrString=!0}}(t.parent,i);break;case 194:!function(t,n,o,r){switch(n.operatorToken.kind){case 40:case 39:case 41:case 42:case 45:case 46:case 47:case 48:case 49:case 50:case 60:case 62:case 61:case 63:case 64:case 68:case 69:case 70:case 65:case 67:case 66:case 38:case 27:case 30:case 29:case 31:var i=o.getTypeAtLocation(n.left===t?n.right:n.left);272&i.flags?a(r,i):r.isNumber=!0;break;case 59:case 37:var s=o.getTypeAtLocation(n.left===t?n.right:n.left);272&s.flags?a(r,s):84&s.flags?r.isNumber=!0:262178&s.flags?r.isString=!0:r.isNumberOrString=!0;break;case 58:case 32:case 34:case 35:case 33:a(r,o.getTypeAtLocation(n.left===t?n.right:n.left));break;case 92:t===n.left&&(r.isString=!0);break;case 54:t!==n.left||226!==t.parent.parent.kind&&!e.isAssignmentExpression(t.parent.parent,!0)||a(r,o.getTypeAtLocation(n.right))}}(t,t.parent,r,i);break;case 257:case 258:!function(e,t,n){a(n,t.getTypeAtLocation(e.parent.parent.expression))}(t.parent,r,i);break;case 181:case 182:t.parent.expression===t?function(e,t,o){var r={argumentTypes:[],returnType:{}};if(e.arguments)for(var i=0,s=e.arguments;i<s.length;i++){var a=s[i];r.argumentTypes.push(t.getTypeAtLocation(a))}n(e,t,r.returnType),181===e.kind?(o.callContexts||(o.callContexts=[])).push(r):(o.constructContexts||(o.constructContexts=[])).push(r)}(t.parent,r,i):o(t,r,i);break;case 179:!function(t,o,r){var i=e.escapeLeadingUnderscores(t.name.text);r.properties||(r.properties=e.createUnderscoreEscapedMap());var s=r.properties.get(i)||{};n(t,o,s),r.properties.set(i,s)}(t.parent,r,i);break;case 180:!function(e,t,o,r){if(t===e.argumentExpression)return void(r.isNumberOrString=!0);var i=o.getTypeAtLocation(e),s={};n(e,o,s),84&i.flags?r.numberIndexContext=s:r.stringIndexContext=s}(t.parent,t,r,i);break;default:return o(t,r,i)}}function o(t,n,o){e.isPartOfExpression(t)&&a(o,n.getContextualType(t))}function r(t,n){if(t.isNumberOrString&&!t.isNumber&&!t.isString)return n.getUnionType([n.getNumberType(),n.getStringType()]);if(t.isNumber)return n.getNumberType();if(t.isString)return n.getStringType();if(t.candidateTypes)return n.getWidenedType(n.getUnionType(e.map(t.candidateTypes,(function(e){return n.getBaseTypeOfLiteralType(e)})),!0));if(t.properties&&l(t.properties.get("then"))){var o=i(0,t.properties.get("then").callContexts,!1,n).getCallSignatures().map((function(e){return e.getReturnType()}));return n.createPromiseType(o.length?n.getUnionType(o,!0):n.getAnyType())}if(t.properties&&l(t.properties.get("push")))return n.createArrayType(i(0,t.properties.get("push").callContexts,!1,n));if(t.properties||t.callContexts||t.constructContexts||t.numberIndexContext||t.stringIndexContext){var a=e.createUnderscoreEscapedMap(),c=[],u=[],p=void 0,d=void 0;if(t.properties&&t.properties.forEach((function(e,t){var o=n.createSymbol(4,t);o.type=r(e,n)||n.getAnyType(),a.set(t,o)})),t.callContexts)for(var g=0,h=t.callContexts;g<h.length;g++){var f=h[g];c.push(s(f,n))}if(t.constructContexts)for(var _=0,m=t.constructContexts;_<m.length;_++){var y=m[_];u.push(s(y,n))}return t.numberIndexContext&&(d=n.createIndexInfo(r(t.numberIndexContext,n),!1)),t.stringIndexContext&&(p=n.createIndexInfo(r(t.stringIndexContext,n),!1)),n.createAnonymousType(void 0,a,c,u,p,d)}}function i(t,n,o,r){var i=[];if(n)for(var s=0,a=n;s<a.length;s++){var l=a[s];l.argumentTypes.length>t&&(o?i=e.concatenate(i,e.map(l.argumentTypes.slice(t),(function(e){return r.getBaseTypeOfLiteralType(e)}))):i.push(r.getBaseTypeOfLiteralType(l.argumentTypes[t])))}if(i.length){var c=r.getWidenedType(r.getUnionType(i,!0));return o?r.createArrayType(c):c}}function s(t,n){for(var o=[],i=0;i<t.argumentTypes.length;i++){var s=n.createSymbol(1,e.escapeLeadingUnderscores("arg"+i));s.type=n.getWidenedType(n.getBaseTypeOfLiteralType(t.argumentTypes[i])),o.push(s)}var a=r(t.returnType,n)||n.getVoidType();return n.createSignature(void 0,void 0,void 0,o,a,void 0,t.argumentTypes.length,!1,!1)}function a(e,t){!t||1&t.flags||8192&t.flags||(e.candidateTypes||(e.candidateTypes=[])).push(t)}function l(e){return e&&e.callContexts}t.inferTypeFromReferences=function(e,t,o){for(var i={},s=0,a=e;s<a.length;s++){var l=a[s];o.throwIfCancellationRequested(),n(l,t,i)}return r(i,t)},t.inferTypeForParametersFromReferences=function(t,o,r,i){if(o.parameters){for(var s={},a=0,l=t;a<l.length;a++){var c=l[a];i.throwIfCancellationRequested(),n(c,r,s)}var u=152===o.kind?s.constructContexts:s.callContexts;if(u){for(var p=[],d=0;d<o.parameters.length;d++){for(var g=[],h=e.isRestParameter(o.parameters[d]),f=0,_=u;f<_.length;f++){var m=_[f];m.argumentTypes.length>d&&(h?g=e.concatenate(g,e.map(m.argumentTypes.slice(d),(function(e){return r.getBaseTypeOfLiteralType(e)}))):g.push(r.getBaseTypeOfLiteralType(m.argumentTypes[d])))}if(g.length){var y=r.getWidenedType(r.getUnionType(g,!0));p[d]=h?r.createArrayType(y):y}}return p}}}}(n||(n={}))}(e.codefix||(e.codefix={}))}(ts||(ts={})),function(e){!function(t){!function(n){var o="annotate",r={name:"Annotate with type from JSDoc",description:e.Diagnostics.Annotate_with_type_from_JSDoc.message,getEditsForAction:function(n,r){if(o!==r)return e.Debug.fail("actionName !== action: annotate !== "+r);var i=e.getTokenAtPosition(n.file,n.startPosition,!1),l=e.findAncestor(i,s);if(!l||l.type)return;var c=e.getJSDocType(l);if(e.isFunctionLikeDeclaration(l)&&(e.getJSDocReturnType(l)||l.parameters.some((function(t){return!!e.getJSDocType(t)})))||c&&146===l.kind)return function(t){var n=t.file,o=e.getTokenAtPosition(n,t.startPosition,!1),r=e.findAncestor(o,e.isFunctionLikeDeclaration),i=e.textChanges.ChangeTracker.fromContext(t),s=function(t){var n=e.getEffectiveTypeParameterDeclarations(t,!0),o=t.parameters.map((function(t){return e.createParameter(t.decorators,t.modifiers,t.dotDotDotToken,t.name,t.questionToken,a(e.getEffectiveTypeAnnotationNode(t,!0)),t.initializer)})),r=a(e.getEffectiveReturnTypeNode(t,!0));switch(t.kind){case 228:return e.createFunctionDeclaration(t.decorators,t.modifiers,t.asteriskToken,t.name,n,o,r,t.body);case 152:return e.createConstructor(t.decorators,t.modifiers,o,t.body);case 186:return e.createFunctionExpression(t.modifiers,t.asteriskToken,t.name,n,o,r,t.body);case 187:return e.createArrowFunction(t.modifiers,n,o,r,t.equalsGreaterThanToken,t.body);case 151:return e.createMethod(t.decorators,t.modifiers,t.asteriskToken,t.name,t.questionToken,n,o,r,t.body);case 153:return e.createGetAccessor(t.decorators,t.modifiers,t.name,t.parameters,r,t.body);case 154:return e.createSetAccessor(t.decorators,t.modifiers,t.name,o,t.body);default:return e.Debug.assertNever(t,"Unexpected SyntaxKind: "+t.kind)}}(r);return e.suppressLeadingAndTrailingTrivia(s),i.replaceRange(n,{pos:r.getStart(),end:r.end},s),{edits:i.getChanges(),renameFilename:void 0,renameLocation:void 0}}(n);if(c)return function(t){var n=t.file,o=e.getTokenAtPosition(n,t.startPosition,!1),r=e.findAncestor(o,s),i=e.getJSDocType(r);if(!r||!i||r.type)return e.Debug.fail("!decl || !jsdocType || decl.type: !"+r+" || !"+i+" || "+r.type);var l=e.textChanges.ChangeTracker.fromContext(t),c=function(t,n){switch(t.kind){case 226:return e.createVariableDeclaration(t.name,n,t.initializer);case 148:return e.createPropertySignature(t.modifiers,t.name,t.questionToken,n,t.initializer);case 149:return e.createProperty(t.decorators,t.modifiers,t.name,t.questionToken,n,t.initializer);default:return e.Debug.fail("Unexpected SyntaxKind: "+t.kind)}}(r,a(i));return e.suppressLeadingAndTrailingTrivia(c),l.replaceRange(n,{pos:r.getStart(),end:r.end},c),{edits:l.getChanges(),renameFilename:void 0,renameLocation:void 0}}(n);e.Debug.assert(!!t,"No applicable refactor found.")},getAvailableActions:function(t){if(e.isInJavaScriptFile(t.file))return;var n=e.getTokenAtPosition(t.file,t.startPosition,!1);if(i(e.findAncestor(n,s)))return[{name:r.name,description:r.description,actions:[{description:r.description,name:o}]}]}};function i(t){return!!t&&(e.isFunctionLikeDeclaration(t)?t.parameters.some(i)||!t.type&&!!e.getJSDocReturnType(t):!t.type&&!!e.getJSDocType(t))}function s(t){return e.isFunctionLikeDeclaration(t)||226===t.kind||146===t.kind||148===t.kind||149===t.kind}function a(t){if(void 0!==t)switch(t.kind){case 268:case 269:return e.createTypeReferenceNode("any",e.emptyArray);case 272:return function(t){return e.createUnionTypeNode([e.visitNode(t.type,a),e.createTypeReferenceNode("undefined",e.emptyArray)])}(t);case 271:return a(t.type);case 270:return function(t){return e.createUnionTypeNode([e.visitNode(t.type,a),e.createTypeReferenceNode("null",e.emptyArray)])}(t);case 274:return function(t){return e.createArrayTypeNode(e.visitNode(t.type,a))}(t);case 273:return function(t){var n=t.parameters&&t.parameters.map(a);return e.createFunctionTypeNode(e.emptyArray,n,t.type)}(t);case 146:return function(t){var n=t.parent.parameters.indexOf(t),o=274===t.type.kind&&n===t.parent.parameters.length-1,r=t.name||(o?"rest":"arg"+n),i=o?e.createToken(24):t.dotDotDotToken;return e.createParameter(t.decorators,t.modifiers,i,r,t.questionToken,e.visitNode(t.type,a),t.initializer)}(t);case 159:return function(t){var n=t.typeName,o=t.typeArguments;if(e.isIdentifier(t.typeName)){if(e.isJSDocIndexSignature(t))return function(t){var n=e.createParameter(void 0,void 0,void 0,133===t.typeArguments[0].kind?"n":"s",void 0,e.createTypeReferenceNode(133===t.typeArguments[0].kind?"number":"string",[]),void 0),o=e.createTypeLiteralNode([e.createIndexSignature(void 0,void 0,[n],t.typeArguments[1])]);return e.setEmitFlags(o,1),o}(t);var r=t.typeName.text;switch(t.typeName.text){case"String":case"Boolean":case"Object":case"Number":r=r.toLowerCase();break;case"array":case"date":case"promise":r=r[0].toUpperCase()+r.slice(1)}n=e.createIdentifier(r),o="Array"!==r&&"Promise"!==r||t.typeArguments?e.visitNodes(t.typeArguments,a):e.createNodeArray([e.createTypeReferenceNode("any",e.emptyArray)])}return e.createTypeReferenceNode(n,o)}(t);default:var n=e.visitEachChild(t,a,void 0);return e.setEmitFlags(n,1),n}}t.registerRefactor(r)}(t.annotateWithTypeFromJSDoc||(t.annotateWithTypeFromJSDoc={}))}(e.refactor||(e.refactor={}))}(ts||(ts={})),function(e){!function(t){!function(n){var o="convert",r={name:"Convert to ES2015 class",description:e.Diagnostics.Convert_function_to_an_ES2015_class.message,getEditsForAction:function(t,n){if(o!==n)return;var r=t.file,s=i(t),a=t.rulesProvider.getFormatOptions().newLineCharacter,l=[],c=[];if(!(19&s.flags))return;var u,p,d=s.valueDeclaration,g=e.textChanges.ChangeTracker.fromContext(t);switch(d.kind){case 228:u=d,_(d),p=function(t){var n=m(s);t.body&&n.unshift(e.createConstructor(void 0,void 0,t.parameters,t.body));var o=k(t,84);return e.createClassDeclaration(void 0,o,t.name,void 0,void 0,n)}(d);break;case 226:u=d.parent.parent,1===d.parent.declarations.length?_(u):_(d,!0),p=function(t){var n=t.initializer;if(!n||186!==n.kind)return;if(71!==t.name.kind)return;var o=m(n.symbol);n.body&&o.unshift(e.createConstructor(void 0,void 0,n.parameters,n.body));var r=k(u,84);return e.createClassDeclaration(void 0,r,t.name,void 0,void 0,o)}(d)}if(!p)return;g.insertNodeAfter(r,u,p,{suffix:a});for(var h=0,f=c;h<f.length;h++){(0,f[h])()}return{edits:g.getChanges(),renameFilename:void 0,renameLocation:void 0};function _(t,n){void 0===n&&(n=!1),l.some((function(n){return e.isNodeDescendantOf(t,n)}))||(l.push(t),n?c.push((function(){return g.deleteNodeInList(r,t)})):c.push((function(){return g.deleteNode(r,t)})))}function m(t){var n=[];return t.members&&t.members.forEach((function(e){var t=o(e,void 0);t&&n.push(t)})),t.exports&&t.exports.forEach((function(t){var r=o(t,[e.createToken(115)]);r&&n.push(r)})),n;function o(t,n){if(4&t.flags){var o=t.valueDeclaration,i=o.parent;if(s=i.right,e.isFunctionLike(s)){var s;if(_(i.parent&&210===i.parent.kind?i.parent:i),!i.right)return e.createProperty([],n,t.name,void 0,void 0,void 0);switch(i.right.kind){case 186:var a=i.right,l=e.concatenate(n,k(a,120));return y(i,g=e.createMethod(void 0,l,void 0,o.name,void 0,void 0,a.parameters,void 0,a.body)),g;case 187:var c=i.right,u=c.body,p=void 0;if(207===u.kind)p=u;else{var d=u;p=e.createBlock([e.createReturn(d)])}var g;l=e.concatenate(n,k(c,120));return y(i,g=e.createMethod(void 0,l,void 0,o.name,void 0,void 0,c.parameters,void 0,p)),g;default:if(e.isSourceFileJavaScript(r))return;var h=e.createProperty(void 0,n,o.name,void 0,void 0,i.right);return y(i.parent,h),h}}}}}function y(t,n){e.forEachLeadingCommentRange(r.text,t.pos,(function(t,o,i,s){3===i?(t+=2,o-=2):t+=2,e.addSyntheticLeadingComment(n,i,r.text.slice(t,o),s)}))}function k(t,n){return e.filter(t.modifiers,(function(e){return e.kind===n}))}},getAvailableActions:function(t){if(!e.isInJavaScriptFile(t.file))return;var n=i(t);if(!n)return;e.isDeclarationOfFunctionOrClassExpression(n)&&(n=n.valueDeclaration.initializer.symbol);if(16&n.flags&&n.members&&n.members.size>0)return[{name:r.name,description:r.description,actions:[{description:r.description,name:o}]}]}};function i(t){var n=t.startPosition,o=t.file,r=t.program.getTypeChecker(),i=e.getTokenAtPosition(o,n,!1);return r.getSymbolAtLocation(i)}t.registerRefactor(r)}(t.convertFunctionToES6Class||(t.convertFunctionToES6Class={}))}(e.refactor||(e.refactor={}))}(ts||(ts={})),function(e){!function(t){!function(n){var o,r,i,s,a={name:"Extract Symbol",description:e.getLocaleSpecificMessage(e.Diagnostics.Extract_symbol),getAvailableActions:l,getEditsForAction:c};function l(t){var n=u(t.file,{start:t.startPosition,length:e.getRefactorContextLength(t)}).targetRange;if(void 0!==n){var o=function(t,n){var o=g(t,n),r=o.scopes,i=o.readsAndWrites,s=i.functionErrorsPerScope,a=i.constantErrorsPerScope;return r.map((function(t,n){var o,r,i=function(t){return e.isFunctionLikeDeclaration(t)?"inner function":e.isClassLike(t)?"method":"function"}(t),l=function(t){return e.isClassLike(t)?"readonly field":"constant"}(t),c=e.isFunctionLikeDeclaration(t)?function(t){switch(t.kind){case 152:return"constructor";case 186:return t.name?"function expression '"+t.name.text+"'":"anonymous function expression";case 228:return"function '"+t.name.text+"'";case 187:return"arrow function";case 151:return"method '"+t.name.getText();case 153:return"'get "+t.name.getText()+"'";case 154:return"'set "+t.name.getText()+"'";default:e.Debug.assertNever(t)}}(t):e.isClassLike(t)?function(e){return 229===e.kind?"class '"+e.name.text+"'":e.name?"class expression '"+e.name.text+"'":"anonymous class expression"}(t):function(e){return 234===e.kind?"namespace '"+e.parent.name.getText()+"'":e.externalModuleIndicator?0:1}(t);return 1===c?(o=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1_scope),[i,"global"]),r=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1_scope),[l,"global"])):0===c?(o=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1_scope),[i,"module"]),r=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1_scope),[l,"module"])):(o=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1),[i,c]),r=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_1),[l,c])),0!==n||e.isClassLike(t)||(r=e.formatStringFromArgs(e.getLocaleSpecificMessage(e.Diagnostics.Extract_to_0_in_enclosing_scope),[l])),{functionExtraction:{description:o,errors:s[n]},constantExtraction:{description:r,errors:a[n]}}}))}(n,t);if(void 0!==o){for(var r=[],i=e.createMap(),s=[],l=e.createMap(),c=0,p=0,d=o;p<d.length;p++){var h=d[p],f=h.functionExtraction,_=h.constantExtraction;if(0===f.errors.length){var m=f.description;i.has(m)||(i.set(m,!0),r.push({description:m,name:"function_scope_"+c}))}if(0===_.errors.length){m=_.description;l.has(m)||(l.set(m,!0),s.push({description:m,name:"constant_scope_"+c}))}c++}var y=[];return r.length&&y.push({name:a.name,description:e.getLocaleSpecificMessage(e.Diagnostics.Extract_function),actions:r}),s.length&&y.push({name:a.name,description:e.getLocaleSpecificMessage(e.Diagnostics.Extract_constant),actions:s}),y.length?y:void 0}}}function c(t,n){var o=u(t.file,{start:t.startPosition,length:e.getRefactorContextLength(t)}).targetRange,i=/^function_scope_(\d+)$/.exec(n);if(i){var s=+i[1];return e.Debug.assert(isFinite(s),"Expected to parse a finite number from the function scope index"),function(t,n,o){var i=g(t,n),s=i.scopes,a=i.readsAndWrites,l=a.target,c=a.usagesPerScope,u=a.functionErrorsPerScope,p=a.exposedVariableDeclarations;return e.Debug.assert(!u[o].length,"The extraction went missing? How?"),n.cancellationToken.throwIfCancellationRequested(),function(t,n,o,i,s,a){var l,c=o.usages,u=o.typeParameterUsages,p=o.substitutions,d=a.program.getTypeChecker(),g=n.getSourceFile(),b=h(e.isClassLike(n)?"newMethod":"newFunction",g.text),v=e.isInJavaScriptFile(n),T=e.createIdentifier(b),E=void 0,S=[],C=[];c.forEach((function(n,o){var r=void 0;if(!v){var i=d.getTypeOfSymbolAtLocation(n.symbol,n.node);i=d.getBaseTypeOfLiteralType(i),r=d.typeToTypeNode(i,t,e.NodeBuilderFlags.NoTruncation)}var s=e.createParameter(void 0,void 0,void 0,o,void 0,r);S.push(s),2===n.usage&&(l||(l=[])).push(n),C.push(e.createIdentifier(o))}));var x=e.arrayFrom(u.values()).map((function(e){return{type:e,declaration:_(e)}})).sort(m),B=0===x.length?void 0:x.map((function(e){return e.declaration})),A=void 0!==B?B.map((function(t){return e.createTypeReferenceNode(t.name,void 0)})):void 0;if(e.isExpression(t)&&!v){var I=d.getContextualType(t);E=d.typeToTypeNode(I,n,e.NodeBuilderFlags.NoTruncation)}var D,N=function(t,n,o,r,i){var s,a=void 0!==o||n.length>0;if(e.isBlock(t)&&!a&&0===r.size)return{body:e.createBlock(t.statements,!0),returnValueProperty:void 0};var l=!1,c=e.createNodeArray(e.isBlock(t)?t.statements.slice(0):[e.isStatement(t)?t:e.createReturn(t)]);if(a||r.size){var u=e.visitNodes(c,d).slice();if(a&&!i&&e.isStatement(t)){var p=y(n,o);1===p.length?u.push(e.createReturn(p[0].name)):u.push(e.createReturn(e.createObjectLiteral(p)))}return{body:e.createBlock(u,!0),returnValueProperty:s}}return{body:e.createBlock(c,!0),returnValueProperty:void 0};function d(t){if(!l&&219===t.kind&&a){var i=y(n,o);return t.expression&&(s||(s="__return"),i.unshift(e.createPropertyAssignment(s,e.visitNode(t.expression,d)))),1===i.length?e.createReturn(i[0].name):e.createReturn(e.createObjectLiteral(i))}var c=l;l=l||e.isFunctionLikeDeclaration(t)||e.isClassLike(t);var u=r.get(e.getNodeId(t).toString()),p=u?e.getSynthesizedDeepClone(u):e.visitEachChild(t,d,e.nullTransformationContext);return l=c,p}}(t,i,l,p,!!(s.facts&r.HasReturn)),w=N.body,R=N.returnValueProperty;if(e.suppressLeadingAndTrailingTrivia(w),e.isClassLike(n)){var O=v?[]:[e.createToken(112)];s.facts&r.InStaticRegion&&O.push(e.createToken(115)),s.facts&r.IsAsyncFunction&&O.push(e.createToken(120)),D=e.createMethod(void 0,O.length?O:void 0,s.facts&r.IsGenerator?e.createToken(39):void 0,T,void 0,B,S,E,w)}else D=e.createFunctionDeclaration(void 0,s.facts&r.IsAsyncFunction?[e.createToken(120)]:void 0,s.facts&r.IsGenerator?e.createToken(39):void 0,T,B,S,E,w);var P=e.textChanges.ChangeTracker.fromContext(a),L=function(t,n){return e.find(function(t){if(e.isFunctionLikeDeclaration(t)){var n=t.body;if(e.isBlock(n))return n.statements}else{if(e.isModuleBlock(t)||e.isSourceFile(t))return t.statements;if(e.isClassLike(t))return t.members;e.assertTypeIsNever(t)}return e.emptyArray}(n),(function(n){return n.pos>=t&&e.isFunctionLikeDeclaration(n)&&!e.isConstructorDeclaration(n)}))}((k(s.range)?e.last(s.range):s.range).end,n);L?P.insertNodeBefore(a.file,L,D,{suffix:a.newLineCharacter+a.newLineCharacter}):P.insertNodeBefore(a.file,n.getLastToken(),D,{prefix:e.isLineBreak(g.text.charCodeAt(n.getLastToken().pos))?a.newLineCharacter:a.newLineCharacter+a.newLineCharacter,suffix:a.newLineCharacter});var M=[],F=function(t,n,o){var i=e.createIdentifier(o);if(e.isClassLike(t)){var s=n.facts&r.InStaticRegion?e.createIdentifier(t.name.text):e.createThis();return e.createPropertyAccess(s,i)}return i}(n,s,b),U=e.createCall(F,A,C);s.facts&r.IsGenerator&&(U=e.createYield(e.createToken(39),U));s.facts&r.IsAsyncFunction&&(U=e.createAwait(U));if(i.length&&!l)if(e.Debug.assert(!R),e.Debug.assert(!(s.facts&r.HasReturn)),1===i.length){var H=i[0];M.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(e.getSynthesizedDeepClone(H.name),e.getSynthesizedDeepClone(H.type),U)],H.parent.flags)))}else{for(var V=[],G=[],W=i[0].parent.flags,K=!1,j=0,z=i;j<z.length;j++){H=z[j];V.push(e.createBindingElement(void 0,void 0,e.getSynthesizedDeepClone(H.name)));var $=d.typeToTypeNode(d.getBaseTypeOfLiteralType(d.getTypeAtLocation(H)),n,e.NodeBuilderFlags.NoTruncation);G.push(e.createPropertySignature(void 0,H.symbol.name,void 0,$,void 0)),K=K||void 0!==H.type,W&=H.parent.flags}var X=K?e.createTypeLiteralNode(G):void 0;X&&e.setEmitFlags(X,1),M.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(e.createObjectBindingPattern(V),X,U)],W)))}else if(i.length||l){if(i.length)for(var Y=0,J=i;Y<J.length;Y++){var q=(H=J[Y]).parent.flags;2&q&&(q=-3&q|1),M.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(H.symbol.name,oe(H.type))],q)))}R&&M.push(e.createVariableStatement(void 0,e.createVariableDeclarationList([e.createVariableDeclaration(R,oe(E))],1)));var Z=y(i,l);R&&Z.unshift(e.createShorthandPropertyAssignment(R)),1===Z.length?(e.Debug.assert(!R),M.push(e.createStatement(e.createAssignment(Z[0].name,U))),s.facts&r.HasReturn&&M.push(e.createReturn())):(M.push(e.createStatement(e.createAssignment(e.createObjectLiteral(Z),U))),R&&M.push(e.createReturn(e.createIdentifier(R))))}else s.facts&r.HasReturn?M.push(e.createReturn(U)):k(s.range)?M.push(e.createStatement(U)):M.push(U);var Q=k(s.range)?{pos:e.first(s.range).getStart(),end:e.last(s.range).end}:{pos:s.range.getStart(),end:s.range.end};P.replaceRangeWithNodes(a.file,Q,M,{nodeSeparator:a.newLineCharacter});var ee=P.getChanges(),te=(k(s.range)?e.first(s.range):s.range).getSourceFile().fileName,ne=f(ee,te,b,!1);return{renameFilename:te,renameLocation:ne,edits:ee};function oe(t){if(void 0!==t){for(var n=e.getSynthesizedDeepClone(t),o=n;e.isParenthesizedTypeNode(o);)o=o.type;return e.isUnionTypeNode(o)&&e.find(o.types,(function(e){return 139===e.kind}))?n:e.createUnionTypeNode([n,e.createKeywordTypeNode(139)])}}}(l,s[o],c[o],p,t,n)}(o,t,s)}var a=/^constant_scope_(\d+)$/.exec(n);if(a){s=+a[1];return e.Debug.assert(isFinite(s),"Expected to parse a finite number from the constant scope index"),function(t,n,o){var i=g(t,n),s=i.scopes,a=i.readsAndWrites,l=a.target,c=a.usagesPerScope,u=a.constantErrorsPerScope,p=a.exposedVariableDeclarations;return e.Debug.assert(!u[o].length,"The extraction went missing? How?"),e.Debug.assert(0===p.length,"Extract constant accepted a range containing a variable declaration?"),n.cancellationToken.throwIfCancellationRequested(),function(t,n,o,i,s){var a=o.substitutions,l=s.program.getTypeChecker(),c=n.getSourceFile(),u=h(e.isClassLike(n)?"newProperty":"newLocal",c.text),p=e.isInJavaScriptFile(n),g=p?void 0:l.typeToTypeNode(l.getContextualType(t),n,e.NodeBuilderFlags.NoTruncation),_=function(t,n){return n.size?o(t):t;function o(t){var r=n.get(e.getNodeId(t).toString());return r?e.getSynthesizedDeepClone(r):e.visitEachChild(t,o,e.nullTransformationContext)}}(t,a);e.suppressLeadingAndTrailingTrivia(_);var m=e.textChanges.ChangeTracker.fromContext(s);if(e.isClassLike(n)){e.Debug.assert(!p);var y=[];y.push(e.createToken(112)),i&r.InStaticRegion&&y.push(e.createToken(115)),y.push(e.createToken(131));var k=e.createProperty(void 0,y,u,void 0,g,_),b=e.createPropertyAccess(i&r.InStaticRegion?e.createIdentifier(n.name.getText()):e.createThis(),e.createIdentifier(u)),v=function(t,n){var o=n.members;e.Debug.assert(o.length>0);for(var r=void 0,i=!0,s=0,a=o;s<a.length;s++){var l=a[s];if(l.pos>t)return r||o[0];if(i&&!e.isPropertyDeclaration(l)){if(void 0!==r)return l;i=!1}r=l}return e.Debug.assert(void 0!==r),r}(t.pos,n);m.insertNodeBefore(s.file,v,k,{suffix:s.newLineCharacter+s.newLineCharacter}),m.replaceRange(s.file,{pos:t.getStart(),end:t.end},b)}else{var E=e.createVariableDeclaration(u,g,_),S=function(t,n){var o=void 0;for(;void 0!==t&&t!==n;){if(e.isVariableDeclaration(t)&&t.initializer===o&&e.isVariableDeclarationList(t.parent)&&t.parent.declarations.length>1)return t;o=t,t=t.parent}}(t,n);if(S){m.insertNodeAt(s.file,S.getStart(),E,{suffix:", "});b=e.createIdentifier(u);m.replaceRange(s.file,{pos:t.getStart(),end:t.end},b)}else if(210===t.parent.kind&&n===e.findAncestor(t,d)){var C=e.createVariableStatement(void 0,e.createVariableDeclarationList([E],2));m.replaceRange(s.file,{pos:t.parent.getStart(),end:t.parent.end},C)}else{C=e.createVariableStatement(void 0,e.createVariableDeclarationList([E],2));if(0===(v=function(t,n){e.Debug.assert(!e.isClassLike(n));for(var o=void 0,r=t;r!==n;r=r.parent)d(r)&&(o=r);for(r=(o||t).parent;;r=r.parent){if(T(r)){for(var i=void 0,s=0,a=r.statements;s<a.length;s++){var l=a[s];if(l.pos>t.pos)break;i=l}return e.Debug.assert(void 0!==i),i}if(r===n){e.Debug.fail("Didn't encounter a block-like before encountering scope");break}}}(t,n)).pos){var x=e.getSourceFileImportLocation(c);m.insertNodeAt(s.file,x,C,{prefix:0===x?void 0:s.newLineCharacter,suffix:e.isLineBreak(c.text.charCodeAt(x))?s.newLineCharacter:s.newLineCharacter+s.newLineCharacter})}else m.insertNodeBefore(s.file,v,C,{suffix:s.newLineCharacter+s.newLineCharacter});if(210===t.parent.kind)m.deleteRange(s.file,{pos:t.parent.getStart(),end:t.parent.end});else{b=e.createIdentifier(u);m.replaceRange(s.file,{pos:t.getStart(),end:t.end},b)}}}var B=m.getChanges(),A=t.getSourceFile().fileName,I=f(B,A,u,!0);return{renameFilename:A,renameLocation:I,edits:B}}(e.isExpression(l)?l:l.statements[0].expression,s[o],c[o],t.facts,n)}(o,t,s)}e.Debug.fail("Unrecognized action name")}function u(t,n){var i=n.length;if(0===i)return{errors:[e.createFileDiagnostic(t,n.start,i,o.CannotExtractEmpty)]};var s=b(e.getTokenAtPosition(t,n.start,!1),t,n),a=b(e.findTokenOnLeftOfPosition(t,e.textSpanEnd(n)),t,n),l=[],c=r.None;if(!s||!a)return{errors:[e.createFileDiagnostic(t,n.start,i,o.CannotExtractRange)]};if(s.parent!==a.parent)return{errors:[e.createFileDiagnostic(t,n.start,i,o.CannotExtractRange)]};if(s!==a){if(!T(s.parent))return{errors:[e.createFileDiagnostic(t,n.start,i,o.CannotExtractRange)]};for(var u=[],d=0,g=s.parent.statements;d<g.length;d++){var h=g[d];if(h===s||u.length){var f=m(h);if(f)return{errors:f};u.push(h)}if(h===a)break}return{targetRange:{range:u,facts:c,declarations:l}}}var _=function(t){if(e.isIdentifier(e.isExpressionStatement(t)?t.expression:t))return[e.createDiagnosticForNode(t,o.CannotExtractIdentifier)];return}(s)||m(s);return _?{errors:_}:{targetRange:{range:p(s),facts:c,declarations:l}};function m(t){var i;if(function(e){e[e.None=0]="None",e[e.Break=1]="Break",e[e.Continue=2]="Continue",e[e.Return=4]="Return"}(i||(i={})),!(e.isStatement(t)||e.isPartOfExpression(t)&&function(e){switch(e.parent.kind){case 264:return!1}switch(e.kind){case 9:return 238!==e.parent.kind&&242!==e.parent.kind;case 198:case 174:case 176:return!1;case 71:return 176!==e.parent.kind&&242!==e.parent.kind&&246!==e.parent.kind}return!0}(t)))return[e.createDiagnosticForNode(t,o.StatementOrExpressionExpected)];if(e.isInAmbientContext(t))return[e.createDiagnosticForNode(t,o.CannotExtractAmbientBlock)];var s,a=e.getContainingClass(t);a&&function(t,n){for(var o=t;o!==n;){if(149===o.kind){e.hasModifier(o,32)&&(c|=r.InStaticRegion);break}if(146===o.kind){152===e.getContainingFunction(o).kind&&(c|=r.InStaticRegion);break}151===o.kind&&e.hasModifier(o,32)&&(c|=r.InStaticRegion),o=o.parent}}(t,a);var u,p=4;return function t(i){if(s)return!0;if(e.isDeclaration(i)){var a=226===i.kind?i.parent.parent:i;if(e.hasModifier(a,1))return(s||(s=[])).push(e.createDiagnosticForNode(i,o.CannotExtractExportedEntity)),!0;l.push(i.symbol)}switch(i.kind){case 238:return(s||(s=[])).push(e.createDiagnosticForNode(i,o.CannotExtractImport)),!0;case 97:if(181===i.parent.kind){var d=e.getContainingClass(i);if(d.pos<n.start||d.end>=n.start+n.length)return(s||(s=[])).push(e.createDiagnosticForNode(i,o.CannotExtractSuper)),!0}else c|=r.UsesThis}if(!i||e.isFunctionLikeDeclaration(i)||e.isClassLike(i)){switch(i.kind){case 228:case 229:265===i.parent.kind&&void 0===i.parent.externalModuleIndicator&&(s||(s=[])).push(e.createDiagnosticForNode(i,o.FunctionWillNotBeVisibleInTheNewScope))}return!1}var g=p;switch(i.kind){case 211:case 224:p=0;break;case 207:i.parent&&224===i.parent.kind&&i.parent.finallyBlock===i&&(p=4);break;case 257:p|=1;break;default:e.isIterationStatement(i,!1)&&(p|=3)}switch(i.kind){case 169:case 99:c|=r.UsesThis;break;case 222:var h=i.label;(u||(u=[])).push(h.escapedText),e.forEachChild(i,t),u.pop();break;case 218:case 217:(h=i.label)?e.contains(u,h.escapedText)||(s||(s=[])).push(e.createDiagnosticForNode(i,o.CannotExtractRangeContainingLabeledBreakOrContinueStatementWithTargetOutsideOfTheRange)):p&(218===i.kind?1:2)||(s||(s=[])).push(e.createDiagnosticForNode(i,o.CannotExtractRangeContainingConditionalBreakOrContinueStatements));break;case 191:c|=r.IsAsyncFunction;break;case 197:c|=r.IsGenerator;break;case 219:4&p?c|=r.HasReturn:(s||(s=[])).push(e.createDiagnosticForNode(i,o.CannotExtractRangeContainingConditionalReturnStatement));break;default:e.forEachChild(i,t)}p=g}(t),s}}function p(t){return e.isStatement(t)?[t]:e.isPartOfExpression(t)?e.isExpressionStatement(t.parent)?[t.parent]:t:void 0}function d(t){return e.isFunctionLikeDeclaration(t)||e.isSourceFile(t)||e.isModuleBlock(t)||e.isClassLike(t)}function g(t,n){var i=n.file,s=function(t){var n=k(t.range)?e.first(t.range):t.range;if(t.facts&r.UsesThis){var o=e.getContainingClass(n);if(o){var i=e.findAncestor(n,e.isFunctionLikeDeclaration);return i?[i,o]:[o]}}for(var s=[];;)if(146===(n=n.parent).kind&&(n=e.findAncestor(n,(function(t){return e.isFunctionLikeDeclaration(t)})).parent),d(n)&&(s.push(n),265===n.kind))return s}(t);return{scopes:s,readsAndWrites:function(t,n,i,s,a,l){var c=e.createMap(),u=[],p=[],d=[],g=[],h=[],f=e.createMap(),_=[],m=void 0,y=k(t.range)?1===t.range.length&&e.isExpressionStatement(t.range[0])?t.range[0].expression:void 0:t.range,b=void 0;if(void 0===y){var v=t.range,T=e.first(v).getStart(),E=e.last(v).end;b=e.createFileDiagnostic(s,T,E-T,o.ExpressionExpected)}else 9216&a.getTypeAtLocation(y).flags&&(b=e.createDiagnosticForNode(y,o.UselessConstantType));for(var S=0,C=n;S<C.length;S++){var x=C[S];u.push({usages:e.createMap(),typeParameterUsages:e.createMap(),substitutions:e.createMap()}),p.push(e.createMap()),d.push(e.isFunctionLikeDeclaration(x)&&228!==x.kind?[e.createDiagnosticForNode(x,o.CannotExtractToOtherFunctionLike)]:[]);var B=[];b&&B.push(b),e.isClassLike(x)&&e.isInJavaScriptFile(x)&&B.push(e.createDiagnosticForNode(x,o.CannotExtractToJSClass)),e.isArrowFunction(x)&&!e.isBlock(x.body)&&B.push(e.createDiagnosticForNode(x,o.CannotExtractToExpressionArrowFunction)),g.push(B)}var A=e.createMap(),I=k(t.range)?e.createBlock(t.range):t.range,D=k(t.range)?e.first(t.range):t.range,N=W(D);if(j(I),N&&!k(t.range)){K(a.getContextualType(t.range))}if(c.size>0){for(var w=e.createMap(),R=0,O=D;void 0!==O&&R<n.length;O=O.parent)if(O===n[R]&&(w.forEach((function(e,t){u[R].typeParameterUsages.set(t,e)})),R++),e.isDeclarationWithTypeParameters(O)&&O.typeParameters)for(var P=0,L=O.typeParameters;P<L.length;P++){var M=L[P],F=a.getTypeAtLocation(M);c.has(F.id.toString())&&w.set(F.id.toString(),F)}e.Debug.assert(R===n.length)}if(h.length){var U=e.isBlockScope(n[0],n[0].parent)?n[0]:e.getEnclosingBlockScopeContainer(n[0]);e.forEachChild(U,X)}for(var H=function(n){var r=u[n];if(n>0&&(r.usages.size>0||r.typeParameterUsages.size>0)){var i=k(t.range)?t.range[0]:t.range;g[n].push(e.createDiagnosticForNode(i,o.CannotAccessVariablesFromNestedScopes))}var s=!1,a=void 0;if(u[n].usages.forEach((function(t){2===t.usage&&(s=!0,106500&t.symbol.flags&&t.symbol.valueDeclaration&&e.hasModifier(t.symbol.valueDeclaration,64)&&(a=t.symbol.valueDeclaration))})),e.Debug.assert(k(t.range)||0===_.length),s&&!k(t.range)){var l=e.createDiagnosticForNode(t.range,o.CannotWriteInExpression);d[n].push(l),g[n].push(l)}else if(a&&n>0){l=e.createDiagnosticForNode(a,o.CannotExtractReadonlyPropertyInitializerOutsideConstructor);d[n].push(l),g[n].push(l)}else if(m){l=e.createDiagnosticForNode(m,o.CannotExtractExportedEntity);d[n].push(l),g[n].push(l)}},V=0;V<n.length;V++)H(V);return{target:I,usagesPerScope:u,functionErrorsPerScope:d,constantErrorsPerScope:g,exposedVariableDeclarations:_};function G(t){return e.isDeclarationWithTypeParameters(t)&&void 0!==t.typeParameters&&t.typeParameters.length>0}function W(e){for(;e;e=e.parent)if(G(e))return!0;return!1}function K(e){for(var t=0,n=a.getSymbolWalker((function(){return l.throwIfCancellationRequested(),!0})).walkType(e).visitedTypes;t<n.length;t++){var o=n[t];16384&o.flags&&c.set(o.id.toString(),o)}}function j(t,n){(void 0===n&&(n=1),N)&&K(a.getTypeAtLocation(t));if(e.isDeclaration(t)&&t.symbol&&h.push(t),e.isAssignmentExpression(t))j(t.left,2),j(t.right);else if(e.isUnaryExpressionWithWrite(t))j(t.operand,2);else if(e.isPropertyAccessExpression(t)||e.isElementAccessExpression(t))e.forEachChild(t,j);else if(e.isIdentifier(t)){if(!t.parent)return;if(e.isQualifiedName(t.parent)&&t!==t.parent.left)return;if(e.isPropertyAccessExpression(t.parent)&&t!==t.parent.expression)return;z(t,n,e.isPartOfTypeNode(t))}else e.forEachChild(t,j)}function z(t,o,r){var i=$(t,o,r);if(i)for(var s=0;s<n.length;s++){var a=p[s].get(i);a&&u[s].substitutions.set(e.getNodeId(t).toString(),a)}}function $(l,c,h){var f=Y(l);if(f){var _=e.getSymbolId(f).toString(),m=A.get(_);if(m&&m>=c)return _;if(A.set(_,c),m){for(var y=0,k=u;y<k.length;y++){var b=k[y];b.usages.get(l.text)&&b.usages.set(l.text,{usage:c,symbol:f,node:l})}return _}var v=e.find(f.getDeclarations(),(function(e){return e.getSourceFile()===s}));if(v&&!e.rangeContainsStartEnd(i,v.getStart(),v.end)){if(t.facts&r.IsGenerator&&2===c){for(var T=e.createDiagnosticForNode(l,o.CannotExtractRangeThatContainsWritesToReferencesLocatedOutsideOfTheTargetRangeInGenerators),E=0,S=d;E<S.length;E++){S[E].push(T)}for(var C=0,x=g;C<x.length;C++){x[C].push(T)}}for(var B=0;B<n.length;B++){var I=n[B];if(a.resolveName(f.name,I,f.flags)!==f&&!p[B].has(_)){var D=J(f.exportSymbol||f,I,h);if(D)p[B].set(_,D);else if(h){if(!(262144&f.flags)){T=e.createDiagnosticForNode(l,o.TypeWillNotBeVisibleInTheNewScope);d[B].push(T),g[B].push(T)}}else u[B].usages.set(l.text,{usage:c,symbol:f,node:l})}}return _}}}function X(n){if(!(n===t.range||k(t.range)&&t.range.indexOf(n)>=0)){var o=e.isIdentifier(n)?Y(n):a.getSymbolAtLocation(n);if(o){var r=e.find(h,(function(e){return e.symbol===o}));if(r)if(e.isVariableDeclaration(r)){var i=r.symbol.id.toString();f.has(i)||(_.push(r),f.set(i,!0))}else m=m||r}e.forEachChild(n,X)}}function Y(t){return t.parent&&e.isShorthandPropertyAssignment(t.parent)&&t.parent.name===t?a.getShorthandAssignmentValueSymbol(t.parent):a.getSymbolAtLocation(t)}function J(t,n,o){if(t){if(t.getDeclarations().some((function(e){return e.parent===n})))return e.createIdentifier(t.name);var r=J(t.parent,n,o);if(void 0!==r)return o?e.createQualifiedName(r,e.createIdentifier(t.name)):e.createPropertyAccess(r,t.name)}}}(t,s,function(t,n){return k(t.range)?{pos:e.first(t.range).getStart(n),end:e.last(t.range).getEnd()}:t.range}(t,i),i,n.program.getTypeChecker(),n.cancellationToken)}}function h(t,n){for(var o=t,r=1;e.stringContains(n,o);r++)o=t+"_"+r;return o}function f(t,n,o,r){for(var i=0,s=-1,a=0,l=t;a<l.length;a++){var c=l[a],u=c.fileName,p=c.textChanges;e.Debug.assert(u===n);for(var d=0,g=p;d<g.length;d++){var h=g[d],f=h.span,_=h.newText,m=_.indexOf(o);if(-1!==m&&(s=f.start+i+m,!r))return s;i+=_.length-f.length}}return e.Debug.assert(r),e.Debug.assert(s>=0),s}function _(e){var t=void 0,n=e.symbol;if(n&&n.declarations)for(var o=0,r=n.declarations;o<r.length;o++){var i=r[o];(void 0===t||i.pos<t.pos)&&(t=i)}return t}function m(t,n){var o=t.type,r=t.declaration,i=n.type,s=n.declaration;if(r){if(!s)return 1;var a=r.pos-s.pos;if(0!==a)return a}else if(s)return-1;var l=o.symbol?o.symbol.getName():"",c=i.symbol?i.symbol.getName():"",u=e.compareStrings(l,c);return 0!==u?u:o.id-i.id}function y(t,n){var o=e.map(t,(function(t){return e.createShorthandPropertyAssignment(t.symbol.name)})),r=e.map(n,(function(t){return e.createShorthandPropertyAssignment(t.symbol.name)}));return void 0===o?r:void 0===r?o:o.concat(r)}function k(t){return e.isArray(t)}function b(t,n,o){if(t)for(;t.parent;){if(e.isSourceFile(t.parent)||!v(o,t.parent,n))return t;t=t.parent}}function v(t,n,o){return e.textSpanContainsPosition(t,n.getStart(o))&&n.getEnd()<=e.textSpanEnd(t)}function T(e){switch(e.kind){case 207:case 265:case 234:case 257:return!0;default:return!1}}t.registerRefactor(a),n.getAvailableActions=l,n.getEditsForAction=c,function(t){function n(t){return{message:t,code:0,category:e.DiagnosticCategory.Message,key:t}}t.CannotExtractRange=n("Cannot extract range."),t.CannotExtractImport=n("Cannot extract import statement."),t.CannotExtractSuper=n("Cannot extract super call."),t.CannotExtractEmpty=n("Cannot extract empty range."),t.ExpressionExpected=n("expression expected."),t.UselessConstantType=n("No reason to extract constant of type."),t.StatementOrExpressionExpected=n("Statement or expression expected."),t.CannotExtractRangeContainingConditionalBreakOrContinueStatements=n("Cannot extract range containing conditional break or continue statements."),t.CannotExtractRangeContainingConditionalReturnStatement=n("Cannot extract range containing conditional return statement."),t.CannotExtractRangeContainingLabeledBreakOrContinueStatementWithTargetOutsideOfTheRange=n("Cannot extract range containing labeled break or continue with target outside of the range."),t.CannotExtractRangeThatContainsWritesToReferencesLocatedOutsideOfTheTargetRangeInGenerators=n("Cannot extract range containing writes to references located outside of the target range in generators."),t.TypeWillNotBeVisibleInTheNewScope=n("Type will not visible in the new scope."),t.FunctionWillNotBeVisibleInTheNewScope=n("Function will not visible in the new scope."),t.CannotExtractIdentifier=n("Select more than a single identifier."),t.CannotExtractExportedEntity=n("Cannot extract exported declaration"),t.CannotWriteInExpression=n("Cannot write back side-effects when extracting an expression"),t.CannotExtractReadonlyPropertyInitializerOutsideConstructor=n("Cannot move initialization of read-only class property outside of the constructor"),t.CannotExtractAmbientBlock=n("Cannot extract code from ambient contexts"),t.CannotAccessVariablesFromNestedScopes=n("Cannot access variables from nested scopes"),t.CannotExtractToOtherFunctionLike=n("Cannot extract method to a function-like scope that is not a function"),t.CannotExtractToJSClass=n("Cannot extract constant to a class scope in JS"),t.CannotExtractToExpressionArrowFunction=n("Cannot extract constant to an arrow function without a block")}(o=n.Messages||(n.Messages={})),function(e){e[e.None=0]="None",e[e.HasReturn=1]="HasReturn",e[e.IsGenerator=2]="IsGenerator",e[e.IsAsyncFunction=4]="IsAsyncFunction",e[e.UsesThis=8]="UsesThis",e[e.InStaticRegion=16]="InStaticRegion"}(r||(r={})),n.getRangeToExtract=u,function(e){e[e.Module=0]="Module",e[e.Global=1]="Global"}(i||(i={})),function(e){e[e.Read=1]="Read",e[e.Write=2]="Write"}(s||(s={}))}(t.extractSymbol||(t.extractSymbol={}))}(e.refactor||(e.refactor={}))}(ts||(ts={})),function(e){!function(t){!function(n){var o="install",r={name:"Install missing types package",description:"Install missing types package",getEditsForAction:function(t,n){e.Debug.assertEqual(o,n);var r=i(t);return{edits:[],renameFilename:void 0,renameLocation:void 0,commands:r.commands}},getAvailableActions:function(e){var t=e.program.getCompilerOptions();if(void 0===t.noImplicitAny?t.strict:t.noImplicitAny)return;var n=i(e);return n&&[{name:r.name,description:r.description,actions:[{description:n.description,name:o}]}]}};function i(t){var n=t.file,o=t.startPosition,r=e.getTokenAtPosition(n,o,!1);if(e.isStringLiteral(r)&&function(e){switch(e.parent.kind){case 238:case 248:return!0;default:return!1}}(r)&&void 0===e.getResolvedModule(n,r.text))return e.codefix.tryGetCodeActionForInstallPackageTypes(t.host,r.text)}t.registerRefactor(r)}(t.installTypesForPackage||(t.installTypesForPackage={}))}(e.refactor||(e.refactor={}))}(ts||(ts={})),function(e){var t;function n(t,n,r,i){var l=e.isNodeKind(t)?new o(t,n,r):71===t?new a(71,n,r):new s(t,n,r);return l.parent=i,l}e.servicesVersion="0.6";var o=function(){function t(e,t,n){this.pos=t,this.end=n,this.flags=0,this.transformFlags=void 0,this.parent=void 0,this.kind=e}return t.prototype.getSourceFile=function(){return e.getSourceFileOfNode(this)},t.prototype.getStart=function(t,n){return e.getTokenPosOfNode(this,t,n)},t.prototype.getFullStart=function(){return this.pos},t.prototype.getEnd=function(){return this.end},t.prototype.getWidth=function(e){return this.getEnd()-this.getStart(e)},t.prototype.getFullWidth=function(){return this.end-this.pos},t.prototype.getLeadingTriviaWidth=function(e){return this.getStart(e)-this.pos},t.prototype.getFullText=function(e){return(e||this.getSourceFile()).text.substring(this.pos,this.end)},t.prototype.getText=function(e){return e||(e=this.getSourceFile()),e.text.substring(this.getStart(e),this.getEnd())},t.prototype.addSyntheticNodes=function(t,o,r){for(e.scanner.setTextPos(o);o<r;){var i=e.scanner.scan(),s=e.scanner.getTextPos();if(s<=r&&t.push(n(i,o,s,this)),o=s,1===i)break}return o},t.prototype.createSyntaxList=function(e){var t=n(286,e.pos,e.end,this);t._children=[];for(var o=e.pos,r=0,i=e;r<i.length;r++){var s=i[r];o<s.pos&&(o=this.addSyntheticNodes(t._children,o,s.pos)),t._children.push(s),o=s.end}return o<e.end&&this.addSyntheticNodes(t._children,o,e.end),t},t.prototype.createChildren=function(t){var n=this;if(e.isNodeKind(this.kind)){if(e.isJSDocCommentContainingNode(this)){var o=[];return this.forEachChild((function(e){o.push(e)})),void(this._children=o)}var r=[];e.scanner.setText((t||this.getSourceFile()).text);var i=this.pos,s=function(e){i=n.addSyntheticNodes(r,i,e.pos),r.push(e),i=e.end};if(this.jsDoc)for(var a=0,l=this.jsDoc;a<l.length;a++){s(l[a])}i=this.pos,e.forEachChild(this,s,(function(e){i<e.pos&&(i=n.addSyntheticNodes(r,i,e.pos)),r.push(n.createSyntaxList(e)),i=e.end})),i<this.end&&this.addSyntheticNodes(r,i,this.end),e.scanner.setText(void 0),this._children=r}else this._children=e.emptyArray},t.prototype.getChildCount=function(e){return this._children||this.createChildren(e),this._children.length},t.prototype.getChildAt=function(e,t){return this._children||this.createChildren(t),this._children[e]},t.prototype.getChildren=function(e){return this._children||this.createChildren(e),this._children},t.prototype.getFirstToken=function(t){var n=this.getChildren(t);if(n.length){var o=e.find(n,(function(e){return e.kind<267||e.kind>285}));return o.kind<143?o:o.getFirstToken(t)}},t.prototype.getLastToken=function(t){var n=this.getChildren(t),o=e.lastOrUndefined(n);if(o)return o.kind<143?o:o.getLastToken(t)},t.prototype.forEachChild=function(t,n){return e.forEachChild(this,t,n)},t}(),r=function(){function t(e,t){this.pos=e,this.end=t,this.flags=0,this.parent=void 0}return t.prototype.getSourceFile=function(){return e.getSourceFileOfNode(this)},t.prototype.getStart=function(t,n){return e.getTokenPosOfNode(this,t,n)},t.prototype.getFullStart=function(){return this.pos},t.prototype.getEnd=function(){return this.end},t.prototype.getWidth=function(e){return this.getEnd()-this.getStart(e)},t.prototype.getFullWidth=function(){return this.end-this.pos},t.prototype.getLeadingTriviaWidth=function(e){return this.getStart(e)-this.pos},t.prototype.getFullText=function(e){return(e||this.getSourceFile()).text.substring(this.pos,this.end)},t.prototype.getText=function(e){return(e||this.getSourceFile()).text.substring(this.getStart(),this.getEnd())},t.prototype.getChildCount=function(){return 0},t.prototype.getChildAt=function(){},t.prototype.getChildren=function(){return e.emptyArray},t.prototype.getFirstToken=function(){},t.prototype.getLastToken=function(){},t.prototype.forEachChild=function(){},t}(),i=function(){function t(e,t){this.flags=e,this.escapedName=t}return t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"name",{get:function(){return e.symbolName(this)},enumerable:!0,configurable:!0}),t.prototype.getEscapedName=function(){return this.escapedName},t.prototype.getName=function(){return this.name},t.prototype.getDeclarations=function(){return this.declarations},t.prototype.getDocumentationComment=function(){return void 0===this.documentationComment&&(this.documentationComment=e.JsDoc.getJsDocCommentsFromDeclarations(this.declarations)),this.documentationComment},t.prototype.getJsDocTags=function(){return void 0===this.tags&&(this.tags=e.JsDoc.getJsDocTagsFromDeclarations(this.declarations)),this.tags},t}(),s=function(e){function t(t,n,o){var r=e.call(this,n,o)||this;return r.kind=t,r}return __extends(t,e),t}(r),a=function(t){function n(e,n,o){return t.call(this,n,o)||this}return __extends(n,t),Object.defineProperty(n.prototype,"text",{get:function(){return e.idText(this)},enumerable:!0,configurable:!0}),n}(r);a.prototype.kind=71;var l=function(){function e(e,t){this.checker=e,this.flags=t}return e.prototype.getFlags=function(){return this.flags},e.prototype.getSymbol=function(){return this.symbol},e.prototype.getProperties=function(){return this.checker.getPropertiesOfType(this)},e.prototype.getProperty=function(e){return this.checker.getPropertyOfType(this,e)},e.prototype.getApparentProperties=function(){return this.checker.getAugmentedPropertiesOfType(this)},e.prototype.getCallSignatures=function(){return this.checker.getSignaturesOfType(this,0)},e.prototype.getConstructSignatures=function(){return this.checker.getSignaturesOfType(this,1)},e.prototype.getStringIndexType=function(){return this.checker.getIndexTypeOfType(this,0)},e.prototype.getNumberIndexType=function(){return this.checker.getIndexTypeOfType(this,1)},e.prototype.getBaseTypes=function(){return 32768&this.flags&&3&this.objectFlags?this.checker.getBaseTypes(this):void 0},e.prototype.getNonNullableType=function(){return this.checker.getNonNullableType(this)},e}(),c=function(){function t(e){this.checker=e}return t.prototype.getDeclaration=function(){return this.declaration},t.prototype.getTypeParameters=function(){return this.typeParameters},t.prototype.getParameters=function(){return this.parameters},t.prototype.getReturnType=function(){return this.checker.getReturnTypeOfSignature(this)},t.prototype.getDocumentationComment=function(){return void 0===this.documentationComment&&(this.documentationComment=this.declaration?e.JsDoc.getJsDocCommentsFromDeclarations([this.declaration]):[]),this.documentationComment},t.prototype.getJsDocTags=function(){return void 0===this.jsDocTags&&(this.jsDocTags=this.declaration?e.JsDoc.getJsDocTagsFromDeclarations([this.declaration]):[]),this.jsDocTags},t}(),u=function(t){function n(e,n,o){return t.call(this,e,n,o)||this}return __extends(n,t),n.prototype.update=function(t,n){return e.updateSourceFile(this,t,n)},n.prototype.getLineAndCharacterOfPosition=function(t){return e.getLineAndCharacterOfPosition(this,t)},n.prototype.getLineStarts=function(){return e.getLineStarts(this)},n.prototype.getPositionOfLineAndCharacter=function(t,n){return e.getPositionOfLineAndCharacter(this,t,n)},n.prototype.getLineEndOfPosition=function(e){var t,n=this.getLineAndCharacterOfPosition(e).line,o=this.getLineStarts();n+1>=o.length&&(t=this.getEnd()),t||(t=o[n+1]-1);var r=this.getFullText();return"\n"===r[t]&&"\r"===r[t-1]?t-1:t},n.prototype.getNamedDeclarations=function(){return this.namedDeclarations||(this.namedDeclarations=this.computeNamedDeclarations()),this.namedDeclarations},n.prototype.computeNamedDeclarations=function(){var t=e.createMultiMap();return e.forEachChild(this,(function r(i){switch(i.kind){case 228:case 186:case 151:case 150:var s=i,a=o(s);if(a){var l=function(e){var n=t.get(e);n||t.set(e,n=[]);return n}(a),c=e.lastOrUndefined(l);c&&s.parent===c.parent&&s.symbol===c.symbol?s.body&&!c.body&&(l[l.length-1]=s):l.push(s)}e.forEachChild(i,r);break;case 229:case 199:case 230:case 231:case 232:case 233:case 237:case 246:case 242:case 239:case 240:case 153:case 154:case 163:n(i),e.forEachChild(i,r);break;case 146:if(!e.hasModifier(i,92))break;case 226:case 176:var u=i;if(e.isBindingPattern(u.name)){e.forEachChild(u.name,r);break}u.initializer&&r(u.initializer);case 264:case 149:case 148:n(i);break;case 244:i.exportClause&&e.forEach(i.exportClause.elements,r);break;case 238:var p=i.importClause;p&&(p.name&&n(p),p.namedBindings&&(240===p.namedBindings.kind?n(p.namedBindings):e.forEach(p.namedBindings.elements,r)));break;case 194:0!==e.getSpecialPropertyAssignmentKind(i)&&n(i);default:e.forEachChild(i,r)}})),t;function n(e){var n=o(e);n&&t.add(n,e)}function o(t){var n=e.getNameOfDeclaration(t);if(n){var o=e.getTextOfIdentifierOrLiteral(n);if(void 0!==o)return o;if(144===n.kind){var r=n.expression;return 179===r.kind?r.name.text:e.getTextOfIdentifierOrLiteral(r)}}}},n}(o),p=function(){function t(e,t,n){this.fileName=e,this.text=t,this.skipTrivia=n}return t.prototype.getLineAndCharacterOfPosition=function(t){return e.getLineAndCharacterOfPosition(this,t)},t}();function d(t){var n=!0;for(var o in t)if(e.hasProperty(t,o)&&!g(o)){n=!1;break}if(n)return t;var r={};for(var o in t){if(e.hasProperty(t,o))r[g(o)?o:o.charAt(0).toLowerCase()+o.substr(1)]=t[o]}return r}function g(e){return!e.length||e.charAt(0)===e.charAt(0).toLowerCase()}function h(){return{target:1,jsx:1}}e.toEditorSettings=d,e.displayPartsToString=function(t){return t?e.map(t,(function(e){return e.text})).join(""):""},e.getDefaultCompilerOptions=h,e.getSupportedCodeFixes=function(){return e.codefix.getSupportedErrorCodes()};var f=function(){function t(t,n){this.host=t,this.currentDirectory=t.getCurrentDirectory(),this.fileNameToEntry=e.createMap();for(var o=0,r=t.getScriptFileNames();o<r.length;o++){var i=r[o];this.createEntry(i,e.toPath(i,this.currentDirectory,n))}this._compilationSettings=t.getCompilationSettings()||{target:1,jsx:1}}return t.prototype.compilationSettings=function(){return this._compilationSettings},t.prototype.createEntry=function(t,n){var o,r=this.host.getScriptSnapshot(t);return o=r?{hostFileName:t,version:this.host.getScriptVersion(t),scriptSnapshot:r,scriptKind:e.getScriptKind(t,this.host)}:t,this.fileNameToEntry.set(n,o),o},t.prototype.getEntryByPath=function(e){return this.fileNameToEntry.get(e)},t.prototype.getHostFileInformation=function(t){var n=this.fileNameToEntry.get(t);return e.isString(n)?void 0:n},t.prototype.getOrCreateEntryByPath=function(t,n){var o=this.getEntryByPath(n)||this.createEntry(t,n);return e.isString(o)?void 0:o},t.prototype.getRootFileNames=function(){return e.arrayFrom(this.fileNameToEntry.values(),(function(t){return e.isString(t)?t:t.hostFileName}))},t.prototype.getVersion=function(e){var t=this.getHostFileInformation(e);return t&&t.version},t.prototype.getScriptSnapshot=function(e){var t=this.getHostFileInformation(e);return t&&t.scriptSnapshot},t}(),_=function(){function t(e){this.host=e}return t.prototype.getCurrentSourceFile=function(t){var n=this.host.getScriptSnapshot(t);if(!n)throw new Error("Could not find file: '"+t+"'.");var o,r=e.getScriptKind(t,this.host),i=this.host.getScriptVersion(t);if(this.currentFileName!==t)o=y(t,n,5,i,!0,r);else if(this.currentFileVersion!==i){var s=n.getChangeRange(this.currentFileScriptSnapshot);o=k(this.currentSourceFile,n,i,s)}return o&&(this.currentFileVersion=i,this.currentFileName=t,this.currentFileScriptSnapshot=n,this.currentSourceFile=o),this.currentSourceFile},t}();function m(e,t,n){e.version=n,e.scriptSnapshot=t}function y(t,n,o,r,i,s){var a=n.getText(0,n.getLength()),l=e.createSourceFile(t,a,o,i,s);return m(l,n,r),l}function k(t,n,o,r,i){if(r&&o!==t.version&&!e.disableIncrementalParsing){var s=void 0,a=0!==r.span.start?t.text.substr(0,r.span.start):"",l=e.textSpanEnd(r.span)!==t.text.length?t.text.substr(e.textSpanEnd(r.span)):"";if(0===r.newLength)s=a&&l?a+l:a||l;else{var c=n.getText(r.span.start,r.span.start+r.newLength);s=a&&l?a+c+l:a?a+c:c+l}var u=e.updateSourceFile(t,s,r,i);return m(u,n,o),u.nameTable=void 0,t!==u&&t.scriptSnapshot&&(t.scriptSnapshot.dispose&&t.scriptSnapshot.dispose(),t.scriptSnapshot=void 0),u}return y(t.fileName,n,t.languageVersion,o,!0,t.scriptKind)}e.createLanguageServiceSourceFile=y,e.disableIncrementalParsing=!1,e.updateLanguageServiceSourceFile=k;var b=function(){function t(e){this.cancellationToken=e}return t.prototype.isCancellationRequested=function(){return this.cancellationToken&&this.cancellationToken.isCancellationRequested()},t.prototype.throwIfCancellationRequested=function(){if(this.isCancellationRequested())throw new e.OperationCanceledException},t}(),v=function(){function t(e,t){void 0===t&&(t=20),this.hostCancellationToken=e,this.throttleWaitMilliseconds=t,this.lastCancellationCheckTime=0}return t.prototype.isCancellationRequested=function(){var t=e.timestamp();return Math.abs(t-this.lastCancellationCheckTime)>=this.throttleWaitMilliseconds&&(this.lastCancellationCheckTime=t,this.hostCancellationToken.isCancellationRequested())},t.prototype.throwIfCancellationRequested=function(){if(this.isCancellationRequested())throw new e.OperationCanceledException},t}();function T(e){switch(e.kind){case 253:case 255:case 261:case 262:case 151:case 153:case 154:return!0}return!1}function E(t,n){var o=e.unescapeLeadingUnderscores(e.getTextOfPropertyName(n));if(o&&t){var r=[],i=t.getProperty(o);if(65536&t.flags)return e.forEach(t.types,(function(e){var t=e.getProperty(o);t&&r.push(t)})),r;if(i)return r.push(i),r}}e.ThrottledCancellationToken=v,e.createLanguageService=function(n,o){void 0===o&&(o=e.createDocumentRegistry(n.useCaseSensitiveFileNames&&n.useCaseSensitiveFileNames(),n.getCurrentDirectory()));var r,i,s=new _(n);t=t||new e.formatting.RulesProvider;var a=0,l=n.useCaseSensitiveFileNames&&n.useCaseSensitiveFileNames(),c=new b(n.getCancellationToken&&n.getCancellationToken()),u=n.getCurrentDirectory();function p(e){n.log&&n.log(e)}!e.localizedDiagnosticMessages&&n.getLocalizedDiagnosticMessages&&(e.localizedDiagnosticMessages=n.getLocalizedDiagnosticMessages());var g=e.createGetCanonicalFileName(l);function h(e){var t=r.getSourceFile(e);if(!t)throw new Error("Could not find file: '"+e+"'.");return t}function m(e){return t.ensureUpToDate(e),t}function y(){if(n.getProjectVersion){var t=n.getProjectVersion();if(t){if(i===t&&!n.hasChangedAutomaticTypeDirectiveNames)return;i=t}}var s=n.getTypeRootsVersion?n.getTypeRootsVersion():0;a!==s&&(p("TypeRoots version has changed; provide new program"),r=void 0,a=s);var d=new f(n,g),h=d.getRootFileNames(),_=n.hasInvalidatedResolution||e.returnFalse;if(!e.isProgramUptoDate(r,h,d.compilationSettings(),(function(e){return d.getVersion(e)}),b,_,n.hasChangedAutomaticTypeDirectiveNames)){var m=d.compilationSettings(),y={getSourceFile:function(t,n,o,r){return v(t,e.toPath(t,u,g),n,o,r)},getSourceFileByPath:v,getCancellationToken:function(){return c},getCanonicalFileName:g,useCaseSensitiveFileNames:function(){return l},getNewLine:function(){return e.getNewLineCharacter(m,{newLine:e.getNewLineOrDefaultFromHost(n)})},getDefaultLibFileName:function(e){return n.getDefaultLibFileName(e)},writeFile:e.noop,getCurrentDirectory:function(){return u},fileExists:b,readFile:function(t){var o=e.toPath(t,u,g),r=d.getEntryByPath(o);return r?e.isString(r)?void 0:r.scriptSnapshot.getText(0,r.scriptSnapshot.getLength()):n.readFile&&n.readFile(t)},directoryExists:function(t){return e.directoryProbablyExists(t,n)},getDirectories:function(e){return n.getDirectories?n.getDirectories(e):[]},onReleaseOldSourceFile:function(e,t){var n=o.getKeyForCompilationSettings(t);o.releaseDocumentWithKey(e.path,n)},hasInvalidatedResolution:_,hasChangedAutomaticTypeDirectiveNames:n.hasChangedAutomaticTypeDirectiveNames};n.trace&&(y.trace=function(e){return n.trace(e)}),n.resolveModuleNames&&(y.resolveModuleNames=function(e,t,o){return n.resolveModuleNames(e,t,o)}),n.resolveTypeReferenceDirectives&&(y.resolveTypeReferenceDirectives=function(e,t){return n.resolveTypeReferenceDirectives(e,t)});var k=o.getKeyForCompilationSettings(m);return r=e.createProgram(h,m,y,r),d=void 0,void r.getTypeChecker()}function b(t){var o=e.toPath(t,u,g),r=d.getEntryByPath(o);return r?!e.isString(r):n.fileExists&&n.fileExists(t)}function v(t,n,i,s,a){e.Debug.assert(void 0!==d);var l=d.getOrCreateEntryByPath(t,n);if(l){if(!a){var c=r&&r.getSourceFileByPath(n);if(c)return e.Debug.assertEqual(l.scriptKind,c.scriptKind,"Registered script kind should match new script kind.",n),o.updateDocumentWithKey(t,n,m,k,l.scriptSnapshot,l.version,l.scriptKind)}return o.acquireDocumentWithKey(t,n,m,k,l.scriptSnapshot,l.version,l.scriptKind)}}}function k(){return y(),r}function v(t,n,o){y();var i=e.map(o,(function(e){return r.getSourceFile(e)})),s=h(t);return e.DocumentHighlights.getDocumentHighlights(r,c,s,n,i)}function T(t,n,o){y();var i=[];if(o&&o.isForRename)for(var s=0,a=r.getSourceFiles();s<a.length;s++){var l=a[s];r.isSourceFileDefaultLibrary(l)||i.push(l)}else i=r.getSourceFiles().slice();return e.FindAllReferences.findReferencedEntries(r,c,i,h(t),n,o)}function E(e){return s.getCurrentSourceFile(e)}function S(t){var o=e.getScriptKind(t,n);return 3===o||4===o}function C(e,t,o){var r="number"==typeof t?[t,void 0]:[t.pos,t.end];return{file:e,startPosition:r[0],endPosition:r[1],program:k(),newLineCharacter:o?o.newLineCharacter:n.getNewLine(),host:n,rulesProvider:m(o),cancellationToken:c}}return{dispose:function(){r&&(e.forEach(r.getSourceFiles(),(function(e){return o.releaseDocument(e.fileName,r.getCompilerOptions())})),r=void 0),n=void 0},cleanupSemanticCache:function(){r=void 0},getSyntacticDiagnostics:function(e){return y(),r.getSyntacticDiagnostics(h(e),c).slice()},getSemanticDiagnostics:function(e){y();var t=h(e),n=r.getSemanticDiagnostics(t,c);if(!r.getCompilerOptions().declaration)return n.slice();var o=r.getDeclarationDiagnostics(t,c);return n.concat(o)},getCompilerOptionsDiagnostics:function(){return y(),r.getOptionsDiagnostics(c).concat(r.getGlobalDiagnostics(c))},getSyntacticClassifications:function(t,n){return e.getSyntacticClassifications(c,s.getCurrentSourceFile(t),n)},getSemanticClassifications:function(t,n){return S(t)?(y(),e.getSemanticClassifications(r.getTypeChecker(),c,h(t),r.getClassifiableNames(),n)):[]},getEncodedSyntacticClassifications:function(t,n){return e.getEncodedSyntacticClassifications(c,s.getCurrentSourceFile(t),n)},getEncodedSemanticClassifications:function(t,n){return S(t)?(y(),e.getEncodedSemanticClassifications(r.getTypeChecker(),c,h(t),r.getClassifiableNames(),n)):{spans:[],endOfLineState:0}},getCompletionsAtPosition:function(t,o){return y(),e.Completions.getCompletionsAtPosition(n,r.getTypeChecker(),p,r.getCompilerOptions(),h(t),o,r.getSourceFiles())},getCompletionEntryDetails:function(t,o,i,s,a){y();var l=s?m(s):void 0;return e.Completions.getCompletionEntryDetails(r.getTypeChecker(),p,r.getCompilerOptions(),h(t),o,{name:i,source:a},r.getSourceFiles(),n,l)},getCompletionEntrySymbol:function(t,n,o,i){return y(),e.Completions.getCompletionEntrySymbol(r.getTypeChecker(),p,r.getCompilerOptions(),h(t),n,{name:o,source:i},r.getSourceFiles())},getSignatureHelpItems:function(t,n){y();var o=h(t);return e.SignatureHelp.getSignatureHelpItems(r,o,n,c)},getQuickInfoAtPosition:function(t,n){y();var o=h(t),i=e.getTouchingPropertyName(o,n,!0);if(i!==o&&!e.isLabelName(i)){var s=r.getTypeChecker(),a=function(t,n){if((e.isIdentifier(t)||e.isStringLiteral(t))&&e.isPropertyAssignment(t.parent)&&t.parent.name===t){var o=n.getContextualType(t.parent.parent);if(o){var r=n.getPropertyOfType(o,e.getTextOfIdentifierOrLiteral(t));if(r)return r}}return n.getSymbolAtLocation(t)}(i,s);if(a&&!s.isUnknownSymbol(a)){var l=e.SymbolDisplay.getSymbolDisplayPartsDocumentationAndSymbolKind(s,a,o,e.getContainerNode(i),i);return{kind:l.symbolKind,kindModifiers:e.SymbolDisplay.getSymbolModifiers(a),textSpan:e.createTextSpan(i.getStart(),i.getWidth()),displayParts:l.displayParts,documentation:l.documentation,tags:l.tags}}switch(i.kind){case 71:case 179:case 143:case 99:case 169:case 97:var c=s.getTypeAtLocation(i);if(c)return{kind:"",kindModifiers:"",textSpan:e.createTextSpan(i.getStart(),i.getWidth()),displayParts:e.typeToDisplayParts(s,c,e.getContainerNode(i)),documentation:c.symbol?c.symbol.getDocumentationComment():void 0,tags:c.symbol?c.symbol.getJsDocTags():void 0}}}},getDefinitionAtPosition:function(t,n){return y(),e.GoToDefinition.getDefinitionAtPosition(r,h(t),n)},getImplementationAtPosition:function(t,n){return y(),e.FindAllReferences.getImplementationsAtPosition(r,c,r.getSourceFiles(),h(t),n)},getTypeDefinitionAtPosition:function(t,n){return y(),e.GoToDefinition.getTypeDefinitionAtPosition(r.getTypeChecker(),h(t),n)},getReferencesAtPosition:function(e,t){return T(e,t)},findReferences:function(t,n){return y(),e.FindAllReferences.findReferencedSymbols(r,c,r.getSourceFiles(),h(t),n)},getOccurrencesAtPosition:function(t,n){var o=function(e,t){return n(v(e,t,[e]));function n(e){if(e){for(var t=[],n=0,o=e;n<o.length;n++)for(var r=o[n],i=0,s=r.highlightSpans;i<s.length;i++){var a=s[i];t.push({fileName:r.fileName,textSpan:a.textSpan,isWriteAccess:"writtenReference"===a.kind,isDefinition:!1,isInString:a.isInString})}return t}}}(t,n);if(o){var r=g(e.normalizeSlashes(t));o=e.filter(o,(function(t){return g(e.normalizeSlashes(t.fileName))===r}))}return o},getDocumentHighlights:v,getNameOrDottedNameSpan:function(t,n,o){var r=s.getCurrentSourceFile(t),i=e.getTouchingPropertyName(r,n,!1);if(i!==r){switch(i.kind){case 179:case 143:case 9:case 86:case 101:case 95:case 97:case 99:case 169:case 71:break;default:return}for(var a=i;;)if(e.isRightSideOfPropertyAccess(a)||e.isRightSideOfQualifiedName(a))a=a.parent;else{if(!e.isNameOfModuleDeclaration(a))break;if(233!==a.parent.parent.kind||a.parent.parent.body!==a.parent)break;a=a.parent.parent.name}return e.createTextSpanFromBounds(a.getStart(),i.getEnd())}},getBreakpointStatementAtPosition:function(t,n){var o=s.getCurrentSourceFile(t);return e.BreakpointResolver.spanInSourceFileAtLocation(o,n)},getNavigateToItems:function(t,n,o,i){y();var s=o?[h(o)]:r.getSourceFiles();return e.NavigateTo.getNavigateToItems(s,r.getTypeChecker(),c,t,n,i)},getRenameInfo:function(t,o){y();var i=n.getDefaultLibFileName(n.getCompilationSettings());return e.Rename.getRenameInfo(r.getTypeChecker(),i,g,h(t),o)},findRenameLocations:function(e,t,n,o){return T(e,t,{findInStrings:n,findInComments:o,isForRename:!0})},getNavigationBarItems:function(t){return e.NavigationBar.getNavigationBarItems(s.getCurrentSourceFile(t),c)},getNavigationTree:function(t){return e.NavigationBar.getNavigationTree(s.getCurrentSourceFile(t),c)},getOutliningSpans:function(t){var n=s.getCurrentSourceFile(t);return e.OutliningElementsCollector.collectElements(n,c)},getTodoComments:function(t,n){y();var o=h(t);c.throwIfCancellationRequested();var r,i,s=o.text,a=[];if(n.length>0&&(i=o.fileName,!e.stringContains(i,"/node_modules/")))for(var l=function(){var t="("+/(?:^(?:\s|\*)*)/.source+"|"+/(?:\/\/+\s*)/.source+"|"+/(?:\/\*+\s*)/.source+")",o="(?:"+e.map(n,(function(e){return"("+(e.text.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+")")})).join("|")+")";return new RegExp(t+"("+o+/(?:.*?)/.source+")"+/(?:$|\*\/)/.source,"gim")}(),u=void 0;u=l.exec(s);){c.throwIfCancellationRequested();e.Debug.assert(u.length===n.length+3);var p=u[1],d=u.index+p.length;if(e.isInComment(o,d)){for(var g=void 0,f=0;f<n.length;f++)u[f+3]&&(g=n[f]);if(e.Debug.assert(void 0!==g),!((r=s.charCodeAt(d+g.text.length))>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57)){var _=u[2];a.push({descriptor:g,message:_,position:d})}}}return a},getBraceMatchingAtPosition:function(t,n){var o=s.getCurrentSourceFile(t),r=[],i=e.getTouchingToken(o,n,!1);if(i.getStart(o)===n){var a=function(e){switch(e.kind){case 17:return 18;case 19:return 20;case 21:return 22;case 27:return 29;case 18:return 17;case 20:return 19;case 22:return 21;case 29:return 27}return}(i);if(a)for(var l=0,c=i.parent.getChildren(o);l<c.length;l++){var u=c[l];if(u.kind===a){var p=e.createTextSpan(i.getStart(o),i.getWidth(o)),d=e.createTextSpan(u.getStart(o),u.getWidth(o));p.start<d.start?r.push(p,d):r.push(d,p);break}}}return r},getIndentationAtPosition:function(t,n,o){var r=e.timestamp(),i=d(o),a=s.getCurrentSourceFile(t);p("getIndentationAtPosition: getCurrentSourceFile: "+(e.timestamp()-r)),r=e.timestamp();var l=e.formatting.SmartIndenter.getIndentation(n,a,i);return p("getIndentationAtPosition: computeIndentation  : "+(e.timestamp()-r)),l},getFormattingEditsForRange:function(t,n,o,r){var i=s.getCurrentSourceFile(t),a=d(r);return e.formatting.formatSelection(n,o,i,m(a),a)},getFormattingEditsForDocument:function(t,n){var o=s.getCurrentSourceFile(t),r=d(n);return e.formatting.formatDocument(o,m(r),r)},getFormattingEditsAfterKeystroke:function(t,n,o,r){var i=s.getCurrentSourceFile(t),a=d(r);if(!e.isInComment(i,n)){if("{"===o)return e.formatting.formatOnOpeningCurly(n,i,m(a),a);if("}"===o)return e.formatting.formatOnClosingCurly(n,i,m(a),a);if(";"===o)return e.formatting.formatOnSemicolon(n,i,m(a),a);if("\n"===o)return e.formatting.formatOnEnter(n,i,m(a),a)}return[]},getDocCommentTemplateAtPosition:function(t,o){return e.JsDoc.getDocCommentTemplateAtPosition(e.getNewLineOrDefaultFromHost(n),s.getCurrentSourceFile(t),o)},isValidBraceCompletionAtPosition:function(t,n,o){if(60===o)return!1;var r=s.getCurrentSourceFile(t);if(e.isInString(r,n))return!1;if(e.isInsideJsxElementOrAttribute(r,n))return 123===o;if(e.isInTemplateString(r,n))return!1;switch(o){case 39:case 34:case 96:return!e.isInComment(r,n)}return!0},getSpanOfEnclosingComment:function(t,n,o){var r=s.getCurrentSourceFile(t),i=e.formatting.getRangeOfEnclosingComment(r,n,o);return i&&e.createTextSpanFromRange(i)},getCodeFixesAtPosition:function(t,o,i,s,a){y();var l=h(t),u=e.createTextSpanFromBounds(o,i),p=e.getNewLineOrDefaultFromHost(n),d=m(a);return e.flatMap(e.deduplicate(s),(function(t){return c.throwIfCancellationRequested(),e.codefix.getFixes({errorCode:t,sourceFile:l,span:u,program:r,newLineCharacter:p,host:n,cancellationToken:c,rulesProvider:d})}))},applyCodeActionCommand:function(t,o){switch(t=e.toPath(t,u,g),o.type){case"install package":return n.installPackage?n.installPackage({fileName:t,packageName:o.packageName}):Promise.reject("Host does not implement `installPackage`");default:e.Debug.fail()}},getEmitOutput:function(t,o){y();var i=h(t),s=n.getCustomTransformers&&n.getCustomTransformers();return e.getFileEmitOutput(r,i,o,c,s)},getNonBoundSourceFile:E,getSourceFile:function(e){return E(e)},getProgram:k,getApplicableRefactors:function(t,n){y();var o=h(t);return e.refactor.getApplicableRefactors(C(o,n))},getEditsForRefactor:function(t,n,o,r,i){y();var s=h(t);return e.refactor.getEditsForRefactor(C(s,o,n),r,i)}}},e.getNameTable=function(t){return t.nameTable||function(t){var n=t.nameTable=e.createUnderscoreEscapedMap();t.forEachChild((function t(o){if(e.isIdentifier(o)&&o.escapedText||e.isStringOrNumericLiteral(o)&&function(t){return e.isDeclarationName(t)||248===t.parent.kind||function(e){return e&&e.parent&&180===e.parent.kind&&e.parent.argumentExpression===e}(t)||e.isLiteralComputedPropertyDeclarationName(t)}(o)){var r=e.getEscapedTextOfIdentifierOrLiteral(o);n.set(r,void 0===n.get(r)?o.pos:-1)}if(e.forEachChild(o,t),e.hasJSDocNodes(o))for(var i=0,s=o.jsDoc;i<s.length;i++){var a=s[i];e.forEachChild(a,t)}}))}(t),t.nameTable},e.getContainingObjectLiteralElement=function(e){switch(e.kind){case 9:case 8:if(144===e.parent.kind)return T(e.parent.parent)?e.parent.parent:void 0;case 71:return!T(e.parent)||178!==e.parent.parent.kind&&254!==e.parent.parent.kind||e.parent.name!==e?void 0:e.parent}},e.getPropertySymbolsFromContextualType=function(e,t){var n=t.parent;return E(e.getContextualType(n),t.name)},e.getPropertySymbolsFromType=E,e.getDefaultLibFilePath=function(t){if("undefined"!=typeof __dirname)return __dirname+e.directorySeparator+e.getDefaultLibFileName(t);throw new Error("getDefaultLibFilePath is only supported when consumed as a node module. ")},e.objectAllocator={getNodeConstructor:function(){return o},getTokenConstructor:function(){return s},getIdentifierConstructor:function(){return a},getSourceFileConstructor:function(){return u},getSymbolConstructor:function(){return i},getTypeConstructor:function(){return l},getSignatureConstructor:function(){return c},getSourceMapSourceConstructor:function(){return p}}}(ts||(ts={})),function(e){!function(t){t.spanInSourceFileAtLocation=function(t,n){if(!t.isDeclarationFile){var o=e.getTokenAtPosition(t,n,!1),r=t.getLineAndCharacterOfPosition(n).line;if((!(t.getLineAndCharacterOfPosition(o.getStart(t)).line>r)||(o=e.findPrecedingToken(o.pos,t))&&t.getLineAndCharacterOfPosition(o.getEnd()).line===r)&&!e.isInAmbientContext(o))return u(o)}function i(n,o){var r=n.decorators?e.skipTrivia(t.text,n.decorators.end):n.getStart(t);return e.createTextSpanFromBounds(r,(o||n).getEnd())}function s(t,n){return i(t,e.findNextToken(n,n.parent))}function a(e,n){return e&&r===t.getLineAndCharacterOfPosition(e.getStart(t)).line?u(e):u(n)}function l(n){return u(e.findPrecedingToken(n.pos,t))}function c(t){return u(e.findNextToken(t,t.parent))}function u(n){if(n)switch(n.kind){case 208:return g(n.declarationList.declarations[0]);case 226:case 149:case 148:return g(n);case 146:return function t(n){if(e.isBindingPattern(n.name))return m(n.name);if(function(t){return!!t.initializer||void 0!==t.dotDotDotToken||e.hasModifier(t,12)}(n))return i(n);var o=n.parent,r=e.indexOf(o.parameters,n);return r?t(o.parameters[r-1]):u(o.body)}(n);case 228:case 151:case 150:case 153:case 154:case 152:case 186:case 187:return function(e){if(!e.body)return;if(h(e))return i(e);return u(e.body)}(n);case 207:if(e.isFunctionBlock(n))return function(e){var t=e.statements.length?e.statements[0]:e.getLastToken();if(h(e.parent))return a(e.parent,t);return u(t)}(n);case 234:return f(n);case 260:return f(n.block);case 210:return i(n.expression);case 219:return i(n.getChildAt(0),n.expression);case 213:return s(n,n.expression);case 212:return u(n.statement);case 225:return i(n.getChildAt(0));case 211:return s(n,n.expression);case 222:return u(n.statement);case 218:case 217:return i(n.getChildAt(0),n.label);case 214:return function(e){if(e.initializer)return _(e);if(e.condition)return i(e.condition);if(e.incrementor)return i(e.incrementor)}(n);case 215:return s(n,n.expression);case 216:return _(n);case 221:return s(n,n.expression);case 257:case 258:return u(n.statements[0]);case 224:return f(n.tryBlock);case 223:case 243:return i(n,n.expression);case 237:return i(n,n.moduleReference);case 238:case 244:return i(n,n.moduleSpecifier);case 233:if(1!==e.getModuleInstanceState(n))return;case 229:case 232:case 264:case 176:return i(n);case 220:return u(n.statement);case 147:return p=n.parent.decorators,e.createTextSpanFromBounds(e.skipTrivia(t.text,p.pos),p.end);case 174:case 175:return m(n);case 230:case 231:return;case 25:case 1:return a(e.findPrecedingToken(n.pos,t));case 26:return l(n);case 17:return function(n){switch(n.parent.kind){case 232:var o=n.parent;return a(e.findPrecedingToken(n.pos,t,n.parent),o.members.length?o.members[0]:o.getLastToken(t));case 229:var r=n.parent;return a(e.findPrecedingToken(n.pos,t,n.parent),r.members.length?r.members[0]:r.getLastToken(t));case 235:return a(n.parent.parent,n.parent.clauses[0])}return u(n.parent)}(n);case 18:return function(t){switch(t.parent.kind){case 234:if(1!==e.getModuleInstanceState(t.parent.parent))return;case 232:case 229:return i(t);case 207:if(e.isFunctionBlock(t.parent))return i(t);case 260:return u(e.lastOrUndefined(t.parent.statements));case 235:var n=t.parent,o=e.lastOrUndefined(n.clauses);return o?u(e.lastOrUndefined(o.statements)):void 0;case 174:var r=t.parent;return u(e.lastOrUndefined(r.elements)||r);default:if(e.isArrayLiteralOrObjectLiteralDestructuringPattern(t.parent)){var s=t.parent;return i(e.lastOrUndefined(s.properties)||s)}return u(t.parent)}}(n);case 22:return function(t){switch(t.parent.kind){case 175:var n=t.parent;return i(e.lastOrUndefined(n.elements)||n);default:if(e.isArrayLiteralOrObjectLiteralDestructuringPattern(t.parent)){var o=t.parent;return i(e.lastOrUndefined(o.elements)||o)}return u(t.parent)}}(n);case 19:return function(e){if(212===e.parent.kind||181===e.parent.kind||182===e.parent.kind)return l(e);if(185===e.parent.kind)return c(e);return u(e.parent)}(n);case 20:return function(e){switch(e.parent.kind){case 186:case 228:case 187:case 151:case 150:case 153:case 154:case 152:case 213:case 212:case 214:case 216:case 181:case 182:case 185:return l(e);default:return u(e.parent)}}(n);case 56:return function(t){if(e.isFunctionLike(t.parent)||261===t.parent.kind||146===t.parent.kind)return l(t);return u(t.parent)}(n);case 29:case 27:return function(e){if(184===e.parent.kind)return c(e);return u(e.parent)}(n);case 106:return function(e){if(212===e.parent.kind)return s(e,e.parent.expression);return u(e.parent)}(n);case 82:case 74:case 87:return c(n);case 142:return function(e){if(216===e.parent.kind)return c(e);return u(e.parent)}(n);default:if(e.isArrayLiteralOrObjectLiteralDestructuringPattern(n))return y(n);if((71===n.kind||198===n.kind||261===n.kind||262===n.kind)&&e.isArrayLiteralOrObjectLiteralDestructuringPattern(n.parent))return i(n);if(194===n.kind){var o=n;if(e.isArrayLiteralOrObjectLiteralDestructuringPattern(o.left))return y(o.left);if(58===o.operatorToken.kind&&e.isArrayLiteralOrObjectLiteralDestructuringPattern(o.parent))return i(n);if(26===o.operatorToken.kind)return u(o.left)}if(e.isPartOfExpression(n))switch(n.parent.kind){case 212:return l(n);case 147:return u(n.parent);case 214:case 216:return i(n);case 194:if(26===n.parent.operatorToken.kind)return i(n);break;case 187:if(n.parent.body===n)return i(n)}if(261===n.parent.kind&&n.parent.name===n&&!e.isArrayLiteralOrObjectLiteralDestructuringPattern(n.parent.parent))return u(n.parent.initializer);if(184===n.parent.kind&&n.parent.type===n)return c(n.parent.type);if(e.isFunctionLike(n.parent)&&n.parent.type===n)return l(n);if(226===n.parent.kind||146===n.parent.kind){var r=n.parent;if(r.initializer===n||r.type===n||e.isAssignmentOperator(n.kind))return l(n)}if(194===n.parent.kind){o=n.parent;if(e.isArrayLiteralOrObjectLiteralDestructuringPattern(o.left)&&(o.right===n||o.operatorToken===n))return l(n)}return u(n.parent)}var p;function d(n){return 227===n.parent.kind&&n.parent.declarations[0]===n?i(e.findPrecedingToken(n.pos,t,n.parent),n):i(n)}function g(n){return 215===n.parent.parent.kind?u(n.parent.parent):e.isBindingPattern(n.name)?m(n.name):n.initializer||e.hasModifier(n,1)||216===n.parent.parent.kind?d(n):227===n.parent.kind&&n.parent.declarations[0]!==n?u(e.findPrecedingToken(n.pos,t,n.parent)):void 0}function h(t){return e.hasModifier(t,1)||229===t.parent.kind&&152!==t.kind}function f(n){switch(n.parent.kind){case 233:if(1!==e.getModuleInstanceState(n.parent))return;case 213:case 211:case 215:return a(n.parent,n.statements[0]);case 214:case 216:return a(e.findPrecedingToken(n.pos,t,n.parent),n.statements[0])}return u(n.statements[0])}function _(e){if(227!==e.initializer.kind)return u(e.initializer);var t=e.initializer;return t.declarations.length>0?u(t.declarations[0]):void 0}function m(t){var n=e.forEach(t.elements,(function(e){return 200!==e.kind?e:void 0}));return n?u(n):176===t.parent.kind?i(t.parent):d(t.parent)}function y(t){e.Debug.assert(175!==t.kind&&174!==t.kind);var n=177===t.kind?t.elements:t.properties,o=e.forEach(n,(function(e){return 200!==e.kind?e:void 0}));return o?u(o):i(194===t.parent.kind?t.parent:t)}}}}(e.BreakpointResolver||(e.BreakpointResolver={}))}(ts||(ts={})),function(e){e.transform=function(t,n,o){var r=[];o=e.fixupCompilerOptions(o,r);var i=e.isArray(t)?t:[t],s=e.transformNodes(void 0,void 0,o,i,n,!0);return s.diagnostics=e.concatenate(s.diagnostics,r),s}}(ts||(ts={}));var debugObjectHost=function(){return this}(),ts,TypeScript;!function(e){function t(e,t){e&&e.log("*INTERNAL ERROR* - Exception in typescript services: "+t.message)}var n=function(){function t(e){this.scriptSnapshotShim=e}return t.prototype.getText=function(e,t){return this.scriptSnapshotShim.getText(e,t)},t.prototype.getLength=function(){return this.scriptSnapshotShim.getLength()},t.prototype.getChangeRange=function(t){var n=t,o=this.scriptSnapshotShim.getChangeRange(n.scriptSnapshotShim);if(null===o)return null;var r=JSON.parse(o);return e.createTextChangeRange(e.createTextSpan(r.span.start,r.span.length),r.newLength)},t.prototype.dispose=function(){"dispose"in this.scriptSnapshotShim&&this.scriptSnapshotShim.dispose()},t}(),o=function(){function t(t){var n=this;this.shimHost=t,this.loggingEnabled=!1,this.tracingEnabled=!1,"getModuleResolutionsForFile"in this.shimHost&&(this.resolveModuleNames=function(t,o){var r=JSON.parse(n.shimHost.getModuleResolutionsForFile(o));return e.map(t,(function(t){var n=e.getProperty(r,t);return n?{resolvedFileName:n,extension:e.extensionFromPath(n),isExternalLibraryImport:!1}:void 0}))}),"directoryExists"in this.shimHost&&(this.directoryExists=function(e){return n.shimHost.directoryExists(e)}),"getTypeReferenceDirectiveResolutionsForFile"in this.shimHost&&(this.resolveTypeReferenceDirectives=function(t,o){var r=JSON.parse(n.shimHost.getTypeReferenceDirectiveResolutionsForFile(o));return e.map(t,(function(t){return e.getProperty(r,t)}))})}return t.prototype.log=function(e){this.loggingEnabled&&this.shimHost.log(e)},t.prototype.trace=function(e){this.tracingEnabled&&this.shimHost.trace(e)},t.prototype.error=function(e){this.shimHost.error(e)},t.prototype.getProjectVersion=function(){if(this.shimHost.getProjectVersion)return this.shimHost.getProjectVersion()},t.prototype.getTypeRootsVersion=function(){return this.shimHost.getTypeRootsVersion?this.shimHost.getTypeRootsVersion():0},t.prototype.useCaseSensitiveFileNames=function(){return!!this.shimHost.useCaseSensitiveFileNames&&this.shimHost.useCaseSensitiveFileNames()},t.prototype.getCompilationSettings=function(){var e=this.shimHost.getCompilationSettings();if(null===e||""===e)throw Error("LanguageServiceShimHostAdapter.getCompilationSettings: empty compilationSettings");var t=JSON.parse(e);return t.allowNonTsExtensions=!0,t},t.prototype.getScriptFileNames=function(){var e=this.shimHost.getScriptFileNames();return this.files=JSON.parse(e)},t.prototype.getScriptSnapshot=function(e){var t=this.shimHost.getScriptSnapshot(e);return t&&new n(t)},t.prototype.getScriptKind=function(e){return"getScriptKind"in this.shimHost?this.shimHost.getScriptKind(e):0},t.prototype.getScriptVersion=function(e){return this.shimHost.getScriptVersion(e)},t.prototype.getLocalizedDiagnosticMessages=function(){var e=this.shimHost.getLocalizedDiagnosticMessages();if(null===e||""===e)return null;try{return JSON.parse(e)}catch(e){return this.log(e.description||"diagnosticMessages.generated.json has invalid JSON format"),null}},t.prototype.getCancellationToken=function(){var t=this.shimHost.getCancellationToken();return new e.ThrottledCancellationToken(t)},t.prototype.getCurrentDirectory=function(){return this.shimHost.getCurrentDirectory()},t.prototype.getDirectories=function(e){return JSON.parse(this.shimHost.getDirectories(e))},t.prototype.getDefaultLibFileName=function(e){return this.shimHost.getDefaultLibFileName(JSON.stringify(e))},t.prototype.readDirectory=function(t,n,o,r,i){var s=e.getFileMatcherPatterns(t,o,r,this.shimHost.useCaseSensitiveFileNames(),this.shimHost.getCurrentDirectory());return JSON.parse(this.shimHost.readDirectory(t,JSON.stringify(n),JSON.stringify(s.basePaths),s.excludePattern,s.includeFilePattern,s.includeDirectoryPattern,i))},t.prototype.readFile=function(e,t){return this.shimHost.readFile(e,t)},t.prototype.fileExists=function(e){return this.shimHost.fileExists(e)},t}();e.LanguageServiceShimHostAdapter=o;var r=function(){function t(e){var t=this;this.shimHost=e,this.useCaseSensitiveFileNames=!!this.shimHost.useCaseSensitiveFileNames&&this.shimHost.useCaseSensitiveFileNames(),"directoryExists"in this.shimHost&&(this.directoryExists=function(e){return t.shimHost.directoryExists(e)}),"realpath"in this.shimHost&&(this.realpath=function(e){return t.shimHost.realpath(e)})}return t.prototype.readDirectory=function(t,n,o,r,i){var s=e.getFileMatcherPatterns(t,o,r,this.shimHost.useCaseSensitiveFileNames(),this.shimHost.getCurrentDirectory());return JSON.parse(this.shimHost.readDirectory(t,JSON.stringify(n),JSON.stringify(s.basePaths),s.excludePattern,s.includeFilePattern,s.includeDirectoryPattern,i))},t.prototype.fileExists=function(e){return this.shimHost.fileExists(e)},t.prototype.readFile=function(e){return this.shimHost.readFile(e)},t.prototype.getDirectories=function(e){return JSON.parse(this.shimHost.getDirectories(e))},t}();function i(e,t,n,o){return s(e,t,!0,n,o)}function s(n,o,r,i,s){try{var a=function(t,n,o,r){var i;r&&(t.log(n),i=e.timestamp());var s=o();if(r){var a=e.timestamp();if(t.log(n+" completed in "+(a-i)+" msec"),e.isString(s)){var l=s;l.length>128&&(l=l.substring(0,128)+"..."),t.log("  result.length="+l.length+", result='"+JSON.stringify(l)+"'")}}return s}(n,o,i,s);return r?JSON.stringify({result:a}):a}catch(r){return r instanceof e.OperationCanceledException?JSON.stringify({canceled:!0}):(t(n,r),r.description=o,JSON.stringify({error:r}))}}e.CoreServicesShimHostAdapter=r;var a=function(){function e(e){this.factory=e,e.registerShim(this)}return e.prototype.dispose=function(e){this.factory.unregisterShim(this)},e}();function l(t,n){return t.map((function(t){return function(t,n){return{message:e.flattenDiagnosticMessageText(t.messageText,n),start:t.start,length:t.length,category:e.DiagnosticCategory[t.category].toLowerCase(),code:t.code}}(t,n)}))}e.realizeDiagnostics=l;var c=function(t){function n(e,n,o){var r=t.call(this,e)||this;return r.host=n,r.languageService=o,r.logPerformance=!1,r.logger=r.host,r}return __extends(n,t),n.prototype.forwardJSONCall=function(e,t){return i(this.logger,e,t,this.logPerformance)},n.prototype.dispose=function(e){this.logger.log("dispose()"),this.languageService.dispose(),this.languageService=null,debugObjectHost&&debugObjectHost.CollectGarbage&&(debugObjectHost.CollectGarbage(),this.logger.log("CollectGarbage()")),this.logger=null,t.prototype.dispose.call(this,e)},n.prototype.refresh=function(e){this.forwardJSONCall("refresh("+e+")",(function(){return null}))},n.prototype.cleanupSemanticCache=function(){var e=this;this.forwardJSONCall("cleanupSemanticCache()",(function(){return e.languageService.cleanupSemanticCache(),null}))},n.prototype.realizeDiagnostics=function(t){var n=e.getNewLineOrDefaultFromHost(this.host);return e.realizeDiagnostics(t,n)},n.prototype.getSyntacticClassifications=function(t,n,o){var r=this;return this.forwardJSONCall("getSyntacticClassifications('"+t+"', "+n+", "+o+")",(function(){return r.languageService.getSyntacticClassifications(t,e.createTextSpan(n,o))}))},n.prototype.getSemanticClassifications=function(t,n,o){var r=this;return this.forwardJSONCall("getSemanticClassifications('"+t+"', "+n+", "+o+")",(function(){return r.languageService.getSemanticClassifications(t,e.createTextSpan(n,o))}))},n.prototype.getEncodedSyntacticClassifications=function(t,n,o){var r=this;return this.forwardJSONCall("getEncodedSyntacticClassifications('"+t+"', "+n+", "+o+")",(function(){return u(r.languageService.getEncodedSyntacticClassifications(t,e.createTextSpan(n,o)))}))},n.prototype.getEncodedSemanticClassifications=function(t,n,o){var r=this;return this.forwardJSONCall("getEncodedSemanticClassifications('"+t+"', "+n+", "+o+")",(function(){return u(r.languageService.getEncodedSemanticClassifications(t,e.createTextSpan(n,o)))}))},n.prototype.getSyntacticDiagnostics=function(e){var t=this;return this.forwardJSONCall("getSyntacticDiagnostics('"+e+"')",(function(){var n=t.languageService.getSyntacticDiagnostics(e);return t.realizeDiagnostics(n)}))},n.prototype.getSemanticDiagnostics=function(e){var t=this;return this.forwardJSONCall("getSemanticDiagnostics('"+e+"')",(function(){var n=t.languageService.getSemanticDiagnostics(e);return t.realizeDiagnostics(n)}))},n.prototype.getCompilerOptionsDiagnostics=function(){var e=this;return this.forwardJSONCall("getCompilerOptionsDiagnostics()",(function(){var t=e.languageService.getCompilerOptionsDiagnostics();return e.realizeDiagnostics(t)}))},n.prototype.getQuickInfoAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getQuickInfoAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getQuickInfoAtPosition(e,t)}))},n.prototype.getNameOrDottedNameSpan=function(e,t,n){var o=this;return this.forwardJSONCall("getNameOrDottedNameSpan('"+e+"', "+t+", "+n+")",(function(){return o.languageService.getNameOrDottedNameSpan(e,t,n)}))},n.prototype.getBreakpointStatementAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getBreakpointStatementAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getBreakpointStatementAtPosition(e,t)}))},n.prototype.getSignatureHelpItems=function(e,t){var n=this;return this.forwardJSONCall("getSignatureHelpItems('"+e+"', "+t+")",(function(){return n.languageService.getSignatureHelpItems(e,t)}))},n.prototype.getDefinitionAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getDefinitionAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getDefinitionAtPosition(e,t)}))},n.prototype.getTypeDefinitionAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getTypeDefinitionAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getTypeDefinitionAtPosition(e,t)}))},n.prototype.getImplementationAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getImplementationAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getImplementationAtPosition(e,t)}))},n.prototype.getRenameInfo=function(e,t){var n=this;return this.forwardJSONCall("getRenameInfo('"+e+"', "+t+")",(function(){return n.languageService.getRenameInfo(e,t)}))},n.prototype.findRenameLocations=function(e,t,n,o){var r=this;return this.forwardJSONCall("findRenameLocations('"+e+"', "+t+", "+n+", "+o+")",(function(){return r.languageService.findRenameLocations(e,t,n,o)}))},n.prototype.getBraceMatchingAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getBraceMatchingAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getBraceMatchingAtPosition(e,t)}))},n.prototype.isValidBraceCompletionAtPosition=function(e,t,n){var o=this;return this.forwardJSONCall("isValidBraceCompletionAtPosition('"+e+"', "+t+", "+n+")",(function(){return o.languageService.isValidBraceCompletionAtPosition(e,t,n)}))},n.prototype.getSpanOfEnclosingComment=function(e,t,n){var o=this;return this.forwardJSONCall("getSpanOfEnclosingComment('"+e+"', "+t+")",(function(){return o.languageService.getSpanOfEnclosingComment(e,t,n)}))},n.prototype.getIndentationAtPosition=function(e,t,n){var o=this;return this.forwardJSONCall("getIndentationAtPosition('"+e+"', "+t+")",(function(){var r=JSON.parse(n);return o.languageService.getIndentationAtPosition(e,t,r)}))},n.prototype.getReferencesAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getReferencesAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getReferencesAtPosition(e,t)}))},n.prototype.findReferences=function(e,t){var n=this;return this.forwardJSONCall("findReferences('"+e+"', "+t+")",(function(){return n.languageService.findReferences(e,t)}))},n.prototype.getOccurrencesAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getOccurrencesAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getOccurrencesAtPosition(e,t)}))},n.prototype.getDocumentHighlights=function(t,n,o){var r=this;return this.forwardJSONCall("getDocumentHighlights('"+t+"', "+n+")",(function(){var i=r.languageService.getDocumentHighlights(t,n,JSON.parse(o)),s=e.normalizeSlashes(t).toLowerCase();return e.filter(i,(function(t){return e.normalizeSlashes(t.fileName).toLowerCase()===s}))}))},n.prototype.getCompletionsAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getCompletionsAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getCompletionsAtPosition(e,t)}))},n.prototype.getCompletionEntryDetails=function(e,t,n,o,r){var i=this;return this.forwardJSONCall("getCompletionEntryDetails('"+e+"', "+t+", '"+n+"')",(function(){var s=JSON.parse(o);return i.languageService.getCompletionEntryDetails(e,t,n,s,r)}))},n.prototype.getFormattingEditsForRange=function(e,t,n,o){var r=this;return this.forwardJSONCall("getFormattingEditsForRange('"+e+"', "+t+", "+n+")",(function(){var i=JSON.parse(o);return r.languageService.getFormattingEditsForRange(e,t,n,i)}))},n.prototype.getFormattingEditsForDocument=function(e,t){var n=this;return this.forwardJSONCall("getFormattingEditsForDocument('"+e+"')",(function(){var o=JSON.parse(t);return n.languageService.getFormattingEditsForDocument(e,o)}))},n.prototype.getFormattingEditsAfterKeystroke=function(e,t,n,o){var r=this;return this.forwardJSONCall("getFormattingEditsAfterKeystroke('"+e+"', "+t+", '"+n+"')",(function(){var i=JSON.parse(o);return r.languageService.getFormattingEditsAfterKeystroke(e,t,n,i)}))},n.prototype.getDocCommentTemplateAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getDocCommentTemplateAtPosition('"+e+"', "+t+")",(function(){return n.languageService.getDocCommentTemplateAtPosition(e,t)}))},n.prototype.getNavigateToItems=function(e,t,n){var o=this;return this.forwardJSONCall("getNavigateToItems('"+e+"', "+t+", "+n+")",(function(){return o.languageService.getNavigateToItems(e,t,n)}))},n.prototype.getNavigationBarItems=function(e){var t=this;return this.forwardJSONCall("getNavigationBarItems('"+e+"')",(function(){return t.languageService.getNavigationBarItems(e)}))},n.prototype.getNavigationTree=function(e){var t=this;return this.forwardJSONCall("getNavigationTree('"+e+"')",(function(){return t.languageService.getNavigationTree(e)}))},n.prototype.getOutliningSpans=function(e){var t=this;return this.forwardJSONCall("getOutliningSpans('"+e+"')",(function(){return t.languageService.getOutliningSpans(e)}))},n.prototype.getTodoComments=function(e,t){var n=this;return this.forwardJSONCall("getTodoComments('"+e+"')",(function(){return n.languageService.getTodoComments(e,JSON.parse(t))}))},n.prototype.getEmitOutput=function(e){var t=this;return this.forwardJSONCall("getEmitOutput('"+e+"')",(function(){return t.languageService.getEmitOutput(e)}))},n.prototype.getEmitOutputObject=function(e){var t=this;return s(this.logger,"getEmitOutput('"+e+"')",!1,(function(){return t.languageService.getEmitOutput(e)}),this.logPerformance)},n}(a);function u(e){return{spans:e.spans.join(","),endOfLineState:e.endOfLineState}}var p=function(t){function n(n,o){var r=t.call(this,n)||this;return r.logger=o,r.logPerformance=!1,r.classifier=e.createClassifier(),r}return __extends(n,t),n.prototype.getEncodedLexicalClassifications=function(e,t,n){var o=this;return i(this.logger,"getEncodedLexicalClassifications",(function(){return u(o.classifier.getEncodedLexicalClassifications(e,t,n))}),this.logPerformance)},n.prototype.getClassificationsForLine=function(e,t,n){for(var o=this.classifier.getClassificationsForLine(e,t,n),r="",i=0,s=o.entries;i<s.length;i++){var a=s[i];r+=a.length+"\n",r+=a.classification+"\n"}return r+=o.finalLexState},n}(a),d=function(t){function n(e,n,o){var r=t.call(this,e)||this;return r.logger=n,r.host=o,r.logPerformance=!1,r}return __extends(n,t),n.prototype.forwardJSONCall=function(e,t){return i(this.logger,e,t,this.logPerformance)},n.prototype.resolveModuleName=function(t,n,o){var r=this;return this.forwardJSONCall("resolveModuleName('"+t+"')",(function(){var i=JSON.parse(o),s=e.resolveModuleName(n,e.normalizeSlashes(t),i,r.host),a=s.resolvedModule?s.resolvedModule.resolvedFileName:void 0;return s.resolvedModule&&".ts"!==s.resolvedModule.extension&&".tsx"!==s.resolvedModule.extension&&".d.ts"!==s.resolvedModule.extension&&(a=void 0),{resolvedFileName:a,failedLookupLocations:s.failedLookupLocations}}))},n.prototype.resolveTypeReferenceDirective=function(t,n,o){var r=this;return this.forwardJSONCall("resolveTypeReferenceDirective("+t+")",(function(){var i=JSON.parse(o),s=e.resolveTypeReferenceDirective(n,e.normalizeSlashes(t),i,r.host);return{resolvedFileName:s.resolvedTypeReferenceDirective?s.resolvedTypeReferenceDirective.resolvedFileName:void 0,primary:!s.resolvedTypeReferenceDirective||s.resolvedTypeReferenceDirective.primary,failedLookupLocations:s.failedLookupLocations}}))},n.prototype.getPreProcessedFileInfo=function(t,n){var o=this;return this.forwardJSONCall("getPreProcessedFileInfo('"+t+"')",(function(){var t=e.preProcessFile(n.getText(0,n.getLength()),!0,!0);return{referencedFiles:o.convertFileReferences(t.referencedFiles),importedFiles:o.convertFileReferences(t.importedFiles),ambientExternalModules:t.ambientExternalModules,isLibFile:t.isLibFile,typeReferenceDirectives:o.convertFileReferences(t.typeReferenceDirectives)}}))},n.prototype.getAutomaticTypeDirectiveNames=function(t){var n=this;return this.forwardJSONCall("getAutomaticTypeDirectiveNames('"+t+"')",(function(){var o=JSON.parse(t);return e.getAutomaticTypeDirectiveNames(o,n.host)}))},n.prototype.convertFileReferences=function(t){if(t){for(var n=[],o=0,r=t;o<r.length;o++){var i=r[o];n.push({path:e.normalizeSlashes(i.fileName),position:i.pos,length:i.end-i.pos})}return n}},n.prototype.getTSConfigFileInfo=function(t,n){var o=this;return this.forwardJSONCall("getTSConfigFileInfo('"+t+"')",(function(){var r=n.getText(0,n.getLength()),i=e.parseJsonText(t,r),s=e.normalizeSlashes(t),a=e.parseJsonSourceFileConfigFileContent(i,o.host,e.getDirectoryPath(s),{},s);return{options:a.options,typeAcquisition:a.typeAcquisition,files:a.fileNames,raw:a.raw,errors:l(i.parseDiagnostics.concat(a.errors),"\r\n")}}))},n.prototype.getDefaultCompilationSettings=function(){return this.forwardJSONCall("getDefaultCompilationSettings()",(function(){return e.getDefaultCompilerOptions()}))},n.prototype.discoverTypings=function(t){var n=this,o=e.createGetCanonicalFileName(!1);return this.forwardJSONCall("discoverTypings()",(function(){var r=JSON.parse(t);return void 0===n.safeList&&(n.safeList=e.JsTyping.loadSafeList(n.host,e.toPath(r.safeListPath,r.safeListPath,o))),e.JsTyping.discoverTypings(n.host,(function(e){return n.logger.log(e)}),r.fileNames,e.toPath(r.projectRootPath,r.projectRootPath,o),n.safeList,r.packageNameToTypingLocation,r.typeAcquisition,r.unresolvedImports)}))},n}(a),g=function(){function n(){this._shims=[]}return n.prototype.getServicesVersion=function(){return e.servicesVersion},n.prototype.createLanguageServiceShim=function(n){try{void 0===this.documentRegistry&&(this.documentRegistry=e.createDocumentRegistry(n.useCaseSensitiveFileNames&&n.useCaseSensitiveFileNames(),n.getCurrentDirectory()));var r=new o(n),i=e.createLanguageService(r,this.documentRegistry);return new c(this,n,i)}catch(e){throw t(n,e),e}},n.prototype.createClassifierShim=function(e){try{return new p(this,e)}catch(n){throw t(e,n),n}},n.prototype.createCoreServicesShim=function(e){try{var n=new r(e);return new d(this,e,n)}catch(n){throw t(e,n),n}},n.prototype.close=function(){e.clear(this._shims),this.documentRegistry=void 0},n.prototype.registerShim=function(e){this._shims.push(e)},n.prototype.unregisterShim=function(e){for(var t=0;t<this._shims.length;t++)if(this._shims[t]===e)return void delete this._shims[t];throw new Error("Invalid operation")},n}();e.TypeScriptServicesFactory=g,"undefined"!=typeof module&&module.exports&&(module.exports=e)}(ts||(ts={})),function(e){!function(e){e.TypeScriptServicesFactory=ts.TypeScriptServicesFactory}(e.Services||(e.Services={}))}(TypeScript||(TypeScript={}));var toolsVersion="2.6",e=function(){function t(e,t){postMessage({action:He,cbn:t,result:e})}function n(e){var t=[];return t[e-1]=void 0,t}function o(e,t){return s(e[0]+t[0],e[1]+t[1])}function r(e,t){return function(e,t){var n;return n=t,0>t&&(n+=Ge),[n,e*Ge]}(~~Math.max(Math.min(e[1]/Ge,2147483647),-2147483648)&~~Math.max(Math.min(t[1]/Ge,2147483647),-2147483648),c(e)&c(t))}function i(e,t){var n,o;return e[0]==t[0]&&e[1]==t[1]?0:(n=0>e[1],o=0>t[1],n&&!o?-1:!n&&o?1:g(e,t)[1]<0?-1:1)}function s(e,t){var n,o;for(e%=0x10000000000000000,t=(t%=0x10000000000000000)-(n=t%Ge)+(o=Math.floor(e/Ge)*Ge),e=e-o+n;0>e;)e+=Ge,t-=Ge;for(;e>4294967295;)e-=Ge,t+=Ge;for(t%=0x10000000000000000;t>0x7fffffff00000000;)t-=0x10000000000000000;for(;-0x8000000000000000>t;)t+=0x10000000000000000;return[e,t]}function a(e,t){return e[0]==t[0]&&e[1]==t[1]}function l(e){return e>=0?[e,0]:[e+Ge,-Ge]}function c(e){return e[0]>=2147483648?~~Math.max(Math.min(e[0]-Ge,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function u(e){return 30>=e?1<<e:u(30)*u(e-30)}function p(e,t){var n,o,r,i;if(t&=63,a(e,Ke))return t?je:e;if(0>e[1])throw Error("Neg");return i=u(t),o=e[1]*i%0x10000000000000000,(o+=n=(r=e[0]*i)-r%Ge)>=0x8000000000000000&&(o-=0x10000000000000000),[r-=n,o]}function d(e,t){var n;return n=u(t&=63),s(Math.floor(e[0]/n),e[1]/n)}function g(e,t){return s(e[0]-t[0],e[1]-t[1])}function h(e,t){return e.Mc=t,e.Lc=0,e.Yb=t.length,e}function f(e){return e.Lc>=e.Yb?-1:255&e.Mc[e.Lc++]}function _(e,t,n,o){return e.Lc>=e.Yb?-1:(o=Math.min(o,e.Yb-e.Lc),v(e.Mc,e.Lc,t,n,o),e.Lc+=o,o)}function m(e){return e.Mc=n(32),e.Yb=0,e}function y(e){var t=e.Mc;return t.length=e.Yb,t}function k(e,t){e.Mc[e.Yb++]=t<<24>>24}function b(e,t,n,o){v(t,n,e.Mc,e.Yb,o),e.Yb+=o}function v(e,t,n,o,r){for(var i=0;r>i;++i)n[o+i]=e[t+i]}function T(t,n,o,r,s){var a,l;if(i(r,We)<0)throw Error("invalid length "+r);for(t.Tb=r,function(e,t){(function(e,t){e.ab=t;for(var n=0;t>1<<n;++n);e.$b=2*n})(t,1<<e.s),t.n=e.f,function(e,t){var n=e.X;e.X=t,e.b&&n!=e.X&&(e.wb=-1,e.b=null)}(t,e.m),t.eb=0,t.fb=3,t.Y=2,t.y=3}(s,a=Y({})),a.Gc=void 0===e.disableEndMark,function(e,t){e.fc[0]=9*(5*e.Y+e.eb)+e.fb<<24>>24;for(var n=0;4>n;++n)e.fc[1+n]=e.ab>>8*n<<24>>24;b(t,e.fc,0,5)}(a,o),l=0;64>l;l+=8)k(o,255&c(d(r,l)));t.yb=(a.W=0,a.oc=n,a.pc=0,function(e){var t,n;e.b||(t={},n=4,e.X||(n=2),function(e,t){e.qb=t>2,e.qb?(e.w=0,e.xb=4,e.R=66560):(e.w=2,e.xb=3,e.R=0)}(t,n),e.b=t),de(e.A,e.eb,e.fb),(e.ab!=e.wb||e.Hb!=e.n)&&(N(e.b,e.ab,4096,e.n,274),e.wb=e.ab,e.Hb=e.n)}(a),a.d.Ab=o,function(e){(function(e){e.l=0,e.J=0;for(var t=0;4>t;++t)e.v[t]=0})(e),function(e){e.mc=je,e.xc=je,e.E=-1,e.Jb=1,e.Oc=0}(e.d),Ie(e.C),Ie(e._),Ie(e.bb),Ie(e.hb),Ie(e.Ub),Ie(e.vc),Ie(e.Sb),function(e){var t,n=1<<e.u+e.I;for(t=0;n>t;++t)Ie(e.V[t].tb)}(e.A);for(var t=0;4>t;++t)Ie(e.K[t].G);se(e.$,1<<e.Y),se(e.i,1<<e.Y),Ie(e.S.G),e.N=0,e.jb=0,e.q=0,e.s=0}(a),q(a),J(a),a.$.rb=a.n+1-2,pe(a.$,1<<a.Y),a.i.rb=a.n+1-2,pe(a.i,1<<a.Y),a.g=je,function(e,t){return e.cb=t,e.Z=null,e.zc=1,e}({},a))}function E(e,t,n){return e.Nb=m({}),T(e,h({},t),e.Nb,l(t.length),n),e}function S(e,t,n){var o,r,i,s,a="",c=[];for(r=0;5>r;++r){if(-1==(i=f(t)))throw Error("truncated input");c[r]=i<<24>>24}if(!function(e,t){var n,o,r,i,s,a,l;if(5>t.length)return 0;for(l=255&t[0],r=l%9,i=(a=~~(l/9))%5,s=~~(a/5),n=0,o=0;4>o;++o)n+=(255&t[1+o])<<8*o;return n>99999999||!function(e,t,n,o){if(t>8||n>4||o>4)return 0;z(e.gb,n,t);var r=1<<o;return G(e.Rb,r),G(e.sb,r),e.Dc=r-1,1}(e,r,i,s)?0:function(e,t){return 0>t?0:(e.Ob!=t&&(e.Ob=t,e.nb=Math.max(e.Ob,1),O(e.B,Math.max(e.nb,4096))),1)}(e,n)}(o=V({}),c))throw Error("corrupted input");for(r=0;64>r;r+=8){if(-1==(i=f(t)))throw Error("truncated input");1==(i=i.toString(16)).length&&(i="0"+i),a=i+""+a}/^0+$|^f+$/i.test(a)?e.Tb=We:(s=parseInt(a,16),e.Tb=s>4294967295?We:l(s)),e.yb=function(e,t,n,o){return e.e.Ab=t,M(e.B),e.B.cc=n,function(e){e.B.h=0,e.B.o=0,Ie(e.Gb),Ie(e.pb),Ie(e.Zb),Ie(e.Cb),Ie(e.Db),Ie(e.Eb),Ie(e.kc),function(e){var t,n;for(n=1<<e.u+e.I,t=0;n>t;++t)Ie(e.V[t].Ib)}(e.gb);for(var t=0;4>t;++t)Ie(e.kb[t].G);j(e.Rb),j(e.sb),Ie(e.Fb.G),function(e){e.Bb=0,e.E=-1;for(var t=0;5>t;++t)e.Bb=e.Bb<<8|f(e.Ab)}(e.e)}(e),e.U=0,e.ib=0,e.Jc=0,e.Ic=0,e.Qc=0,e.Nc=o,e.g=je,e.jc=0,function(e,t){return e.Z=t,e.cb=null,e.zc=1,e}({},e)}(o,t,n,e.Tb)}function C(e,t){return e.Nb=m({}),S(e,h({},t),e.Nb),e}function x(e,t){return e.c[e.f+e.o+t]}function B(e,t,n,o){var r,i;for(e.T&&e.o+t+o>e.h&&(o=e.h-(e.o+t)),++n,i=e.f+e.o+t,r=0;o>r&&e.c[i+r]==e.c[i+r-n];++r);return r}function A(e){return e.h-e.o}function I(e){var t,n;if(!e.T)for(;;){if(!(n=-e.f+e.Kb-e.h))return;if(-1==(t=_(e.cc,e.c,e.f+e.h,n)))return e.zb=e.h,e.f+e.zb>e.H&&(e.zb=e.H-e.f),void(e.T=1);e.h+=t,e.h>=e.o+e._b&&(e.zb=e.h-e._b)}}function D(e,t){e.f+=t,e.zb-=t,e.o-=t,e.h-=t}function N(e,t,o,r,i){var s,a;1073741567>t&&(e.Fc=16+(r>>1),function(e,t,o,r){var i;e.Bc=t,e._b=o,i=t+o+r,(null==e.c||e.Kb!=i)&&(e.c=null,e.Kb=i,e.c=n(e.Kb)),e.H=e.Kb-o}(e,t+o,r+i,256+~~((t+o+r+i)/2)),e.ob=r,s=t+1,e.p!=s&&(e.L=n(2*(e.p=s))),a=65536,e.qb&&(a=t-1,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a>>=1,(a|=65535)>16777216&&(a>>=1),e.Ec=a,++a,a+=e.R),a!=e.rc&&(e.ub=n(e.rc=a)))}function w(e){var t;++e.k>=e.p&&(e.k=0),function(e){++e.o,e.o>e.zb&&(e.f+e.o>e.H&&function(e){var t,n,o;for((o=e.f+e.o-e.Bc)>0&&--o,n=e.f+e.h-o,t=0;n>t;++t)e.c[t]=e.c[o+t];e.f-=o}(e),I(e))}(e),1073741823==e.o&&(t=e.o-e.p,R(e.L,2*e.p,t),R(e.ub,e.rc,t),D(e,t))}function R(e,t,n){var o,r;for(o=0;t>o;++o)n>=(r=e[o]||0)?r=0:r-=n,e[o]=r}function O(e,t){(null==e.Lb||e.M!=t)&&(e.Lb=n(t)),e.M=t,e.o=0,e.h=0}function P(e){var t=e.o-e.h;t&&(b(e.cc,e.Lb,e.h,t),e.o>=e.M&&(e.o=0),e.h=e.o)}function L(e,t){var n=e.o-t-1;return 0>n&&(n+=e.M),e.Lb[n]}function M(e){P(e),e.cc=null}function F(e){return 4>(e-=2)?e:3}function U(e){return 4>e?0:10>e?e-3:e-6}function H(e){if(!e.zc)throw Error("bad state");return e.cb?function(e){(function(e,t,n,r){var s,u,p,d,h,f,_,m,y,k,b,v,T,E,S;if(t[0]=je,n[0]=je,r[0]=1,e.oc&&(e.b.cc=e.oc,function(e){e.f=0,e.o=0,e.h=0,e.T=0,I(e),e.k=0,D(e,-1)}(e.b),e.W=1,e.oc=null),!e.pc){if(e.pc=1,E=e.g,a(e.g,je)){if(!A(e.b))return void Z(e,c(e.g));oe(e),T=c(e.g)&e.y,De(e.d,e.C,(e.l<<4)+T,0),e.l=U(e.l),p=x(e.b,-e.s),he(ge(e.A,c(e.g),e.J),e.d,p),e.J=p,--e.s,e.g=o(e.g,ze)}if(!A(e.b))return void Z(e,c(e.g));for(;;){if(_=Q(e,c(e.g)),k=e.mb,T=c(e.g)&e.y,u=(e.l<<4)+T,1==_&&-1==k)De(e.d,e.C,u,0),p=x(e.b,-e.s),S=ge(e.A,c(e.g),e.J),7>e.l?he(S,e.d,p):(y=x(e.b,-e.v[0]-1-e.s),fe(S,e.d,y,p)),e.J=p,e.l=U(e.l);else{if(De(e.d,e.C,u,1),4>k){if(De(e.d,e.bb,e.l,1),k?(De(e.d,e.hb,e.l,1),1==k?De(e.d,e.Ub,e.l,0):(De(e.d,e.Ub,e.l,1),De(e.d,e.vc,e.l,k-2))):(De(e.d,e.hb,e.l,0),De(e.d,e._,u,1==_?0:1)),1==_?e.l=7>e.l?9:11:(le(e.i,e.d,_-2,T),e.l=7>e.l?8:11),d=e.v[k],0!=k){for(f=k;f>=1;--f)e.v[f]=e.v[f-1];e.v[0]=d}}else{for(De(e.d,e.bb,e.l,0),e.l=7>e.l?7:10,le(e.$,e.d,_-2,T),v=ie(k-=4),m=F(_),Te(e.K[m],e.d,v),v>=4&&(b=k-(s=(2|1&v)<<(h=(v>>1)-1)),14>v?xe(e.Sb,s-v-1,e.d,h,b):(Ne(e.d,b>>4,h-4),Se(e.S,e.d,15&b),++e.Qb)),d=k,f=3;f>=1;--f)e.v[f]=e.v[f-1];e.v[0]=d,++e.Mb}e.J=x(e.b,_-1-e.s)}if(e.s-=_,e.g=o(e.g,l(_)),!e.s){if(e.Mb>=128&&q(e),e.Qb>=16&&J(e),t[0]=e.g,n[0]=we(e.d),!A(e.b))return void Z(e,c(e.g));if(i(g(e.g,E),[4096,0])>=0)return e.pc=0,void(r[0]=0)}}}})(e.cb,e.cb.Xb,e.cb.uc,e.cb.Kc),e.Pb=e.cb.Xb[0],e.cb.Kc[0]&&(function(e){re(e),e.d.Ab=null}(e.cb),e.zc=0)}(e):function(e){var t=function(e){var t,n,r,s,a,u;if(u=c(e.g)&e.Dc,Ae(e.e,e.Gb,(e.U<<4)+u)){if(Ae(e.e,e.Zb,e.U))r=0,Ae(e.e,e.Cb,e.U)?(Ae(e.e,e.Db,e.U)?(Ae(e.e,e.Eb,e.U)?(n=e.Qc,e.Qc=e.Ic):n=e.Ic,e.Ic=e.Jc):n=e.Jc,e.Jc=e.ib,e.ib=n):Ae(e.e,e.pb,(e.U<<4)+u)||(e.U=7>e.U?9:11,r=1),r||(r=W(e.sb,e.e,u)+2,e.U=7>e.U?8:11);else if(e.Qc=e.Ic,e.Ic=e.Jc,e.Jc=e.ib,r=2+W(e.Rb,e.e,u),e.U=7>e.U?7:10,(a=be(e.kb[F(r)],e.e))>=4){if(s=(a>>1)-1,e.ib=(2|1&a)<<s,14>a)e.ib+=function(e,t,n,o){var r,i,s=1,a=0;for(i=0;o>i;++i)r=Ae(n,e,t+s),s<<=1,s+=r,a|=r<<i;return a}(e.kc,e.ib-a-1,e.e,s);else if(e.ib+=function(e,t){var n,o,r=0;for(n=t;0!=n;--n)e.E>>>=1,o=e.Bb-e.E>>>31,e.Bb-=e.E&o-1,r=r<<1|1-o,-16777216&e.E||(e.Bb=e.Bb<<8|f(e.Ab),e.E<<=8);return r}(e.e,s-4)<<4,e.ib+=function(e,t){var n,o,r=1,i=0;for(o=0;e.F>o;++o)n=Ae(t,e.G,r),r<<=1,r+=n,i|=n<<o;return i}(e.Fb,e.e),0>e.ib)return-1==e.ib?1:-1}else e.ib=a;if(i(l(e.ib),e.g)>=0||e.ib>=e.nb)return-1;(function(e,t,n){var o=e.o-t-1;for(0>o&&(o+=e.M);0!=n;--n)o>=e.M&&(o=0),e.Lb[e.o++]=e.Lb[o++],e.o>=e.M&&P(e)})(e.B,e.ib,r),e.g=o(e.g,l(r)),e.jc=L(e.B,0)}else t=function(e,t,n){return e.V[((t&e.qc)<<e.u)+((255&n)>>>8-e.u)]}(e.gb,c(e.g),e.jc),e.jc=7>e.U?function(e,t){var n=1;do{n=n<<1|Ae(t,e.Ib,n)}while(256>n);return n<<24>>24}(t,e.e):function(e,t,n){var o,r,i=1;do{if(r=n>>7&1,n<<=1,o=Ae(t,e.Ib,(1+r<<8)+i),i=i<<1|o,r!=o){for(;256>i;)i=i<<1|Ae(t,e.Ib,i);break}}while(256>i);return i<<24>>24}(t,e.e,L(e.B,e.ib)),function(e,t){e.Lb[e.o++]=t,e.o>=e.M&&P(e)}(e.B,e.jc),e.U=U(e.U),e.g=o(e.g,ze);return 0}(e.Z);if(-1==t)throw Error("corrupted input");e.Pb=We,e.Pc=e.Z.g,(t||i(e.Z.Nc,je)>=0&&i(e.Z.g,e.Z.Nc)>=0)&&(P(e.Z.B),M(e.Z.B),e.Z.e.Ab=null,e.zc=0)}(e),e.zc}function V(e){e.B={},e.e={},e.Gb=n(192),e.Zb=n(12),e.Cb=n(12),e.Db=n(12),e.Eb=n(12),e.pb=n(192),e.kb=n(4),e.kc=n(114),e.Fb=ke({},4),e.Rb=K({}),e.sb=K({}),e.gb={};for(var t=0;4>t;++t)e.kb[t]=ke({},6);return e}function G(e,t){for(;t>e.O;++e.O)e.ec[e.O]=ke({},3),e.hc[e.O]=ke({},3)}function W(e,t,n){return Ae(t,e.wc,0)?8+(Ae(t,e.wc,1)?8+be(e.tc,t):be(e.hc[n],t)):be(e.ec[n],t)}function K(e){return e.wc=n(2),e.ec=n(16),e.hc=n(16),e.tc=ke({},8),e.O=0,e}function j(e){Ie(e.wc);for(var t=0;e.O>t;++t)Ie(e.ec[t].G),Ie(e.hc[t].G);Ie(e.tc.G)}function z(e,t,o){var r,i;if(null==e.V||e.u!=o||e.I!=t)for(e.I=t,e.qc=(1<<t)-1,e.u=o,i=1<<e.u+e.I,e.V=n(i),r=0;i>r;++r)e.V[r]=$({})}function $(e){return e.Ib=n(768),e}function X(e,t){var n,o,r,i;e.jb=t,r=e.a[t].r,o=e.a[t].j;do{e.a[t].t&&(ye(e.a[r]),e.a[r].r=r-1,e.a[t].Ac&&(e.a[r-1].t=0,e.a[r-1].r=e.a[t].r2,e.a[r-1].j=e.a[t].j2)),i=r,n=o,o=e.a[i].j,r=e.a[i].r,e.a[i].j=n,e.a[i].r=t,t=i}while(t>0);return e.mb=e.a[0].j,e.q=e.a[0].r}function Y(e){var t;for(e.v=n(4),e.a=[],e.d={},e.C=n(192),e.bb=n(12),e.hb=n(12),e.Ub=n(12),e.vc=n(12),e._=n(192),e.K=[],e.Sb=n(114),e.S=ve({},4),e.$=ce({}),e.i=ce({}),e.A={},e.m=[],e.P=[],e.lb=[],e.nc=n(16),e.x=n(4),e.Q=n(4),e.Xb=[je],e.uc=[je],e.Kc=[0],e.fc=n(5),e.yc=n(128),e.vb=0,e.X=1,e.D=0,e.Hb=-1,e.mb=0,t=0;4096>t;++t)e.a[t]={};for(t=0;4>t;++t)e.K[t]=ve({},6);return e}function J(e){for(var t=0;16>t;++t)e.nc[t]=Ce(e.S,t);e.Qb=0}function q(e){var t,n,o,r,i,s,a,l;for(r=4;128>r;++r)t=(2|1&(s=ie(r)))<<(o=(s>>1)-1),e.yc[r]=Be(e.Sb,t-s-1,o,r-t);for(i=0;4>i;++i){for(n=e.K[i],a=i<<6,s=0;e.$b>s;++s)e.P[a+s]=Ee(n,s);for(s=14;e.$b>s;++s)e.P[a+s]+=(s>>1)-1-4<<6;for(l=128*i,r=0;4>r;++r)e.lb[l+r]=e.P[a+r];for(;128>r;++r)e.lb[l+r]=e.P[a+ie(r)]+e.yc[r]}e.Mb=0}function Z(e,t){re(e),function(e,t){if(e.Gc){De(e.d,e.C,(e.l<<4)+t,1),De(e.d,e.bb,e.l,0),e.l=7>e.l?7:10,le(e.$,e.d,0,t);var n=F(2);Te(e.K[n],e.d,63),Ne(e.d,67108863,26),Se(e.S,e.d,15)}}(e,t&e.y);for(var n=0;5>n;++n)Re(e.d)}function Q(e,t){var n,o,r,i,s,a,l,c,u,p,d,g,h,f,_,m,y,k,b,v,T,E,S,C,I,D,N,w,R,O,P,L,M,F,H,V,G,W,K,j,z,$,Y,J;if(e.jb!=e.q)return h=e.a[e.q].r-e.q,e.mb=e.a[e.q].j,e.q=e.a[e.q].r,h;if(e.q=e.jb=0,e.N?(g=e.vb,e.N=0):g=oe(e),D=e.D,2>(C=A(e.b)+1))return e.mb=-1,1;for(C>273&&(C=273),K=0,u=0;4>u;++u)e.x[u]=e.v[u],e.Q[u]=B(e.b,-1,e.x[u],273),e.Q[u]>e.Q[K]&&(K=u);if(e.Q[K]>=e.n)return e.mb=K,ne(e,(h=e.Q[K])-1),h;if(g>=e.n)return e.mb=e.m[D-1]+4,ne(e,g-1),g;if(l=x(e.b,-1),y=x(e.b,-e.v[0]-1-1),2>g&&l!=y&&2>e.Q[K])return e.mb=-1,1;if(e.a[0].Hc=e.l,M=t&e.y,e.a[1].z=Ye[e.C[(e.l<<4)+M]>>>2]+me(ge(e.A,t,e.J),e.l>=7,y,l),ye(e.a[1]),W=(k=Ye[2048-e.C[(e.l<<4)+M]>>>2])+Ye[2048-e.bb[e.l]>>>2],y==l&&(j=W+function(e,t,n){return Ye[e.hb[t]>>>2]+Ye[e._[(t<<4)+n]>>>2]}(e,e.l,M),e.a[1].z>j&&(e.a[1].z=j,function(e){e.j=0,e.t=0}(e.a[1]))),2>(d=g>=e.Q[K]?g:e.Q[K]))return e.mb=e.a[1].j,1;e.a[1].r=0,e.a[0].bc=e.x[0],e.a[0].ac=e.x[1],e.a[0].dc=e.x[2],e.a[0].lc=e.x[3],p=d;do{e.a[p--].z=268435455}while(p>=2);for(u=0;4>u;++u)if(!(2>(G=e.Q[u]))){H=W+te(e,u,e.l,M);do{i=H+ue(e.i,G-2,M),(O=e.a[G]).z>i&&(O.z=i,O.r=0,O.j=u,O.t=0)}while(--G>=2)}if(S=k+Ye[e.bb[e.l]>>>2],g>=(p=e.Q[0]>=2?e.Q[0]+1:2)){for(N=0;p>e.m[N];)N+=2;for(;i=S+ee(e,c=e.m[N+1],p,M),(O=e.a[p]).z>i&&(O.z=i,O.r=0,O.j=c+4,O.t=0),p!=e.m[N]||(N+=2)!=D;++p);}for(n=0;;){if(++n==d)return X(e,n);if(b=oe(e),D=e.D,b>=e.n)return e.vb=b,e.N=1,X(e,n);if(++t,L=e.a[n].r,e.a[n].t?(--L,e.a[n].Ac?($=e.a[e.a[n].r2].Hc,$=4>e.a[n].j2?7>$?8:11:7>$?7:10):$=e.a[L].Hc,$=U($)):$=e.a[L].Hc,L==n-1?$=e.a[n].j?U($):7>$?9:11:(e.a[n].t&&e.a[n].Ac?(L=e.a[n].r2,P=e.a[n].j2,$=7>$?8:11):$=4>(P=e.a[n].j)?7>$?8:11:7>$?7:10,R=e.a[L],4>P?P?1==P?(e.x[0]=R.ac,e.x[1]=R.bc,e.x[2]=R.dc,e.x[3]=R.lc):2==P?(e.x[0]=R.dc,e.x[1]=R.bc,e.x[2]=R.ac,e.x[3]=R.lc):(e.x[0]=R.lc,e.x[1]=R.bc,e.x[2]=R.ac,e.x[3]=R.dc):(e.x[0]=R.bc,e.x[1]=R.ac,e.x[2]=R.dc,e.x[3]=R.lc):(e.x[0]=P-4,e.x[1]=R.bc,e.x[2]=R.ac,e.x[3]=R.dc)),e.a[n].Hc=$,e.a[n].bc=e.x[0],e.a[n].ac=e.x[1],e.a[n].dc=e.x[2],e.a[n].lc=e.x[3],a=e.a[n].z,l=x(e.b,-1),y=x(e.b,-e.x[0]-1-1),M=t&e.y,o=a+Ye[e.C[($<<4)+M]>>>2]+me(ge(e.A,t,x(e.b,-2)),$>=7,y,l),v=0,(T=e.a[n+1]).z>o&&(T.z=o,T.r=n,T.j=-1,T.t=0,v=1),W=(k=a+Ye[2048-e.C[($<<4)+M]>>>2])+Ye[2048-e.bb[$]>>>2],y!=l||n>T.r&&!T.j||(j=W+(Ye[e.hb[$]>>>2]+Ye[e._[($<<4)+M]>>>2]),T.z>=j&&(T.z=j,T.r=n,T.j=0,T.t=0,v=1)),!(2>(C=I=(I=A(e.b)+1)>4095-n?4095-n:I))){if(C>e.n&&(C=e.n),!v&&y!=l&&(J=Math.min(I-1,e.n),(_=B(e.b,0,e.x[0],J))>=2)){for(Y=U($),F=t+1&e.y,E=o+Ye[2048-e.C[(Y<<4)+F]>>>2]+Ye[2048-e.bb[Y]>>>2],w=n+1+_;w>d;)e.a[++d].z=268435455;i=E+(ue(e.i,_-2,F)+te(e,0,Y,F)),(O=e.a[w]).z>i&&(O.z=i,O.r=n+1,O.j=0,O.t=1,O.Ac=0)}for(z=2,V=0;4>V;++V)if(!(2>(f=B(e.b,-1,e.x[V],C)))){m=f;do{for(;n+f>d;)e.a[++d].z=268435455;i=W+(ue(e.i,f-2,M)+te(e,V,$,M)),(O=e.a[n+f]).z>i&&(O.z=i,O.r=n,O.j=V,O.t=0)}while(--f>=2);if(f=m,V||(z=f+1),I>f&&(J=Math.min(I-1-f,e.n),(_=B(e.b,f,e.x[V],J))>=2)){for(Y=7>$?8:11,F=t+f&e.y,r=W+(ue(e.i,f-2,M)+te(e,V,$,M))+Ye[e.C[(Y<<4)+F]>>>2]+me(ge(e.A,t+f,x(e.b,f-1-1)),1,x(e.b,f-1-(e.x[V]+1)),x(e.b,f-1)),Y=U(Y),F=t+f+1&e.y,E=r+Ye[2048-e.C[(Y<<4)+F]>>>2]+Ye[2048-e.bb[Y]>>>2],w=f+1+_;n+w>d;)e.a[++d].z=268435455;i=E+(ue(e.i,_-2,F)+te(e,0,Y,F)),(O=e.a[n+w]).z>i&&(O.z=i,O.r=n+f+1,O.j=0,O.t=1,O.Ac=1,O.r2=n,O.j2=V)}}if(b>C){for(b=C,D=0;b>e.m[D];D+=2);e.m[D]=b,D+=2}if(b>=z){for(S=k+Ye[e.bb[$]>>>2];n+b>d;)e.a[++d].z=268435455;for(N=0;z>e.m[N];)N+=2;for(f=z;;++f)if(i=S+ee(e,s=e.m[N+1],f,M),(O=e.a[n+f]).z>i&&(O.z=i,O.r=n,O.j=s+4,O.t=0),f==e.m[N]){if(I>f&&(J=Math.min(I-1-f,e.n),(_=B(e.b,f,s,J))>=2)){for(Y=7>$?7:10,F=t+f&e.y,r=i+Ye[e.C[(Y<<4)+F]>>>2]+me(ge(e.A,t+f,x(e.b,f-1-1)),1,x(e.b,f-(s+1)-1),x(e.b,f-1)),Y=U(Y),F=t+f+1&e.y,E=r+Ye[2048-e.C[(Y<<4)+F]>>>2]+Ye[2048-e.bb[Y]>>>2],w=f+1+_;n+w>d;)e.a[++d].z=268435455;i=E+(ue(e.i,_-2,F)+te(e,0,Y,F)),(O=e.a[n+w]).z>i&&(O.z=i,O.r=n+f+1,O.j=0,O.t=1,O.Ac=1,O.r2=n,O.j2=s+4)}if((N+=2)==D)break}}}}}function ee(e,t,n,o){var r=F(n);return(128>t?e.lb[128*r+t]:e.P[(r<<6)+function(e){return 131072>e?Xe[e>>6]+12:134217728>e?Xe[e>>16]+32:Xe[e>>26]+52}(t)]+e.nc[15&t])+ue(e.$,n-2,o)}function te(e,t,n,o){var r;return t?(r=Ye[2048-e.hb[n]>>>2],1==t?r+=Ye[e.Ub[n]>>>2]:(r+=Ye[2048-e.Ub[n]>>>2],r+=Oe(e.vc[n],t-2))):(r=Ye[e.hb[n]>>>2],r+=Ye[2048-e._[(n<<4)+o]>>>2]),r}function ne(e,t){t>0&&(function(e,t){var n,o,r,i,s,a,l,c,u,p,d,g,h,f,_,m,y;do{if(e.h>=e.o+e.ob)g=e.ob;else if(g=e.h-e.o,e.xb>g){w(e);continue}for(h=e.o>e.p?e.o-e.p:0,o=e.f+e.o,e.qb?(a=1023&(y=$e[255&e.c[o]]^255&e.c[o+1]),e.ub[a]=e.o,l=65535&(y^=(255&e.c[o+2])<<8),e.ub[1024+l]=e.o,c=(y^$e[255&e.c[o+3]]<<5)&e.Ec):c=255&e.c[o]^(255&e.c[o+1])<<8,r=e.ub[e.R+c],e.ub[e.R+c]=e.o,_=1+(e.k<<1),m=e.k<<1,p=d=e.w,n=e.Fc;;){if(h>=r||0==n--){e.L[_]=e.L[m]=0;break}if(s=e.o-r,i=(e.k>=s?e.k-s:e.k-s+e.p)<<1,f=e.f+r,u=d>p?p:d,e.c[f+u]==e.c[o+u]){for(;++u!=g&&e.c[f+u]==e.c[o+u];);if(u==g){e.L[m]=e.L[i],e.L[_]=e.L[i+1];break}}(255&e.c[o+u])>(255&e.c[f+u])?(e.L[m]=r,m=i+1,r=e.L[m],d=u):(e.L[_]=r,_=i,r=e.L[_],p=u)}w(e)}while(0!=--t)}(e.b,t),e.s+=t)}function oe(e){var t=0;return e.D=function(e,t){var n,o,r,i,s,a,l,c,u,p,d,g,h,f,_,m,y,k,b,v,T;if(e.h>=e.o+e.ob)f=e.ob;else if(f=e.h-e.o,e.xb>f)return w(e),0;for(y=0,_=e.o>e.p?e.o-e.p:0,o=e.f+e.o,m=1,c=0,u=0,e.qb?(c=1023&(T=$e[255&e.c[o]]^255&e.c[o+1]),u=65535&(T^=(255&e.c[o+2])<<8),p=(T^$e[255&e.c[o+3]]<<5)&e.Ec):p=255&e.c[o]^(255&e.c[o+1])<<8,r=e.ub[e.R+p]||0,e.qb&&(i=e.ub[c]||0,s=e.ub[1024+u]||0,e.ub[c]=e.o,e.ub[1024+u]=e.o,i>_&&e.c[e.f+i]==e.c[o]&&(t[y++]=m=2,t[y++]=e.o-i-1),s>_&&e.c[e.f+s]==e.c[o]&&(s==i&&(y-=2),t[y++]=m=3,t[y++]=e.o-s-1,i=s),0!=y&&i==r&&(y-=2,m=1)),e.ub[e.R+p]=e.o,b=1+(e.k<<1),v=e.k<<1,g=h=e.w,0!=e.w&&r>_&&e.c[e.f+r+e.w]!=e.c[o+e.w]&&(t[y++]=m=e.w,t[y++]=e.o-r-1),n=e.Fc;;){if(_>=r||0==n--){e.L[b]=e.L[v]=0;break}if(l=e.o-r,a=(e.k>=l?e.k-l:e.k-l+e.p)<<1,k=e.f+r,d=h>g?g:h,e.c[k+d]==e.c[o+d]){for(;++d!=f&&e.c[k+d]==e.c[o+d];);if(d>m&&(t[y++]=m=d,t[y++]=l-1,d==f)){e.L[v]=e.L[a],e.L[b]=e.L[a+1];break}}(255&e.c[o+d])>(255&e.c[k+d])?(e.L[v]=r,v=a+1,r=e.L[v],h=d):(e.L[b]=r,b=a,r=e.L[b],g=d)}return w(e),y}(e.b,e.m),e.D>0&&((t=e.m[e.D-2])==e.n&&(t+=B(e.b,t-1,e.m[e.D-1],273-t))),++e.s,t}function re(e){e.b&&e.W&&(e.b.cc=null,e.W=0)}function ie(e){return 2048>e?Xe[e]:2097152>e?Xe[e>>10]+20:Xe[e>>20]+40}function se(e,t){Ie(e.db);for(var n=0;t>n;++n)Ie(e.Vb[n].G),Ie(e.Wb[n].G);Ie(e.ic.G)}function ae(e,t,n,o,r){var i,s,a,l,c;for(i=Ye[e.db[0]>>>2],a=(s=Ye[2048-e.db[0]>>>2])+Ye[e.db[1]>>>2],l=s+Ye[2048-e.db[1]>>>2],c=0,c=0;8>c;++c){if(c>=n)return;o[r+c]=i+Ee(e.Vb[t],c)}for(;16>c;++c){if(c>=n)return;o[r+c]=a+Ee(e.Wb[t],c-8)}for(;n>c;++c)o[r+c]=l+Ee(e.ic,c-8-8)}function le(e,t,n,o){(function(e,t,n,o){8>n?(De(t,e.db,0,0),Te(e.Vb[o],t,n)):(n-=8,De(t,e.db,0,1),8>n?(De(t,e.db,1,0),Te(e.Wb[o],t,n)):(De(t,e.db,1,1),Te(e.ic,t,n-8)))})(e,t,n,o),0==--e.sc[o]&&(ae(e,o,e.rb,e.Cc,272*o),e.sc[o]=e.rb)}function ce(e){return function(e){e.db=n(2),e.Vb=n(16),e.Wb=n(16),e.ic=ve({},8);for(var t=0;16>t;++t)e.Vb[t]=ve({},3),e.Wb[t]=ve({},3)}(e),e.Cc=[],e.sc=[],e}function ue(e,t,n){return e.Cc[272*n+t]}function pe(e,t){for(var n=0;t>n;++n)ae(e,n,e.rb,e.Cc,272*n),e.sc[n]=e.rb}function de(e,t,o){var r,i;if(null==e.V||e.u!=o||e.I!=t)for(e.I=t,e.qc=(1<<t)-1,e.u=o,i=1<<e.u+e.I,e.V=n(i),r=0;i>r;++r)e.V[r]=_e({})}function ge(e,t,n){return e.V[((t&e.qc)<<e.u)+((255&n)>>>8-e.u)]}function he(e,t,n){var o,r,i=1;for(r=7;r>=0;--r)o=n>>r&1,De(t,e.tb,i,o),i=i<<1|o}function fe(e,t,n,o){var r,i,s,a,l=1,c=1;for(i=7;i>=0;--i)r=o>>i&1,a=c,l&&(a+=1+(s=n>>i&1)<<8,l=s==r),De(t,e.tb,a,r),c=c<<1|r}function _e(e){return e.tb=n(768),e}function me(e,t,n,o){var r,i,s=1,a=7,l=0;if(t)for(;a>=0;--a)if(i=n>>a&1,r=o>>a&1,l+=Oe(e.tb[(1+i<<8)+s],r),s=s<<1|r,i!=r){--a;break}for(;a>=0;--a)r=o>>a&1,l+=Oe(e.tb[s],r),s=s<<1|r;return l}function ye(e){e.j=-1,e.t=0}function ke(e,t){return e.F=t,e.G=n(1<<t),e}function be(e,t){var n,o=1;for(n=e.F;0!=n;--n)o=(o<<1)+Ae(t,e.G,o);return o-(1<<e.F)}function ve(e,t){return e.F=t,e.G=n(1<<t),e}function Te(e,t,n){var o,r,i=1;for(r=e.F;0!=r;)o=n>>>--r&1,De(t,e.G,i,o),i=i<<1|o}function Ee(e,t){var n,o,r=1,i=0;for(o=e.F;0!=o;)n=t>>>--o&1,i+=Oe(e.G[r],n),r=(r<<1)+n;return i}function Se(e,t,n){var o,r,i=1;for(r=0;e.F>r;++r)o=1&n,De(t,e.G,i,o),i=i<<1|o,n>>=1}function Ce(e,t){var n,o,r=1,i=0;for(o=e.F;0!=o;--o)n=1&t,t>>>=1,i+=Oe(e.G[r],n),r=r<<1|n;return i}function xe(e,t,n,o,r){var i,s,a=1;for(s=0;o>s;++s)De(n,e,t+a,i=1&r),a=a<<1|i,r>>=1}function Be(e,t,n,o){var r,i,s=1,a=0;for(i=n;0!=i;--i)r=1&o,o>>>=1,a+=Ye[(2047&(e[t+s]-r^-r))>>>2],s=s<<1|r;return a}function Ae(e,t,n){var o,r=t[n];return(-2147483648^(o=(e.E>>>11)*r))>(-2147483648^e.Bb)?(e.E=o,t[n]=r+(2048-r>>>5)<<16>>16,-16777216&e.E||(e.Bb=e.Bb<<8|f(e.Ab),e.E<<=8),0):(e.E-=o,e.Bb-=o,t[n]=r-(r>>>5)<<16>>16,-16777216&e.E||(e.Bb=e.Bb<<8|f(e.Ab),e.E<<=8),1)}function Ie(e){for(var t=e.length-1;t>=0;--t)e[t]=1024}function De(e,t,n,i){var s,a=t[n];s=(e.E>>>11)*a,i?(e.xc=o(e.xc,r(l(s),[4294967295,0])),e.E-=s,t[n]=a-(a>>>5)<<16>>16):(e.E=s,t[n]=a+(2048-a>>>5)<<16>>16),-16777216&e.E||(e.E<<=8,Re(e))}function Ne(e,t,n){for(var r=n-1;r>=0;--r)e.E>>>=1,1==(t>>>r&1)&&(e.xc=o(e.xc,l(e.E))),-16777216&e.E||(e.E<<=8,Re(e))}function we(e){return o(o(l(e.Jb),e.mc),[4,0])}function Re(e){var t,n=c(function(e,t){var n;return n=d(e,t&=63),0>e[1]&&(n=o(n,p([2,0],63-t))),n}(e.xc,32));if(0!=n||i(e.xc,[4278190080,0])<0){e.mc=o(e.mc,l(e.Jb)),t=e.Oc;do{k(e.Ab,t+n),t=255}while(0!=--e.Jb);e.Oc=c(e.xc)>>>24}++e.Jb,e.xc=p(r(e.xc,[16777215,0]),8)}function Oe(e,t){return Ye[(2047&(e-t^-t))>>>2]}function Pe(e){for(var t,n,o,r=0,i=0,s=e.length,a=[],l=[];s>r;++r,++i){if(128&(t=255&e[r]))if(192==(224&t)){if(r+1>=s)return e;if(128!=(192&(n=255&e[++r])))return e;l[i]=(31&t)<<6|63&n}else{if(224!=(240&t))return e;if(r+2>=s)return e;if(128!=(192&(n=255&e[++r])))return e;if(128!=(192&(o=255&e[++r])))return e;l[i]=(15&t)<<12|(63&n)<<6|63&o}else{if(!t)return e;l[i]=t}16383==i&&(a.push(String.fromCharCode.apply(String,l)),i=-1)}return i>0&&(l.length=i,a.push(String.fromCharCode.apply(String,l))),a.join("")}function Le(e){var t,n,o,r=[],i=0,s=e.length;if("object"==typeof e)return e;for(function(e,t,n,o,r){var i;for(i=t;n>i;++i)o[r++]=e.charCodeAt(i)}(e,0,s,r,0),o=0;s>o;++o)(t=r[o])>=1&&127>=t?++i:i+=!t||t>=128&&2047>=t?2:3;for(n=[],i=0,o=0;s>o;++o)(t=r[o])>=1&&127>=t?n[i++]=t<<24>>24:!t||t>=128&&2047>=t?(n[i++]=(192|t>>6&31)<<24>>24,n[i++]=(128|63&t)<<24>>24):(n[i++]=(224|t>>12&15)<<24>>24,n[i++]=(128|t>>6&63)<<24>>24,n[i++]=(128|63&t)<<24>>24);return n}function Me(e){return e[1]+e[0]}var Fe=1,Ue=2,He=3,Ve="function"==typeof setImmediate?setImmediate:setTimeout,Ge=4294967296,We=[4294967295,-Ge],Ke=[0,-0x8000000000000000],je=[0,0],ze=[1,0],$e=function(){var e,t,n,o=[];for(e=0;256>e;++e){for(n=e,t=0;8>t;++t)0!=(1&n)?n=n>>>1^-306674912:n>>>=1;o[e]=n}return o}(),Xe=function(){var e,t,n,o=2,r=[0,1];for(n=2;22>n;++n)for(t=1<<(n>>1)-1,e=0;t>e;++e,++o)r[o]=n<<24>>24;return r}(),Ye=function(){var e,t,n,o=[];for(t=8;t>=0;--t)for(e=1<<9-t,n=1<<9-t-1;e>n;++n)o[n]=(t<<6)+(e-n<<6>>>9-t-1);return o}(),Je=function(){var e=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}];return function(t){return e[t-1]||e[6]}}();return"undefined"==typeof onmessage||"undefined"!=typeof window&&void 0!==window.document||(onmessage=function(t){t&&t.gc&&(t.gc.action==Ue?e.decompress(t.gc.gc,t.gc.cbn):t.gc.action==Fe&&e.compress(t.gc.gc,t.gc.Rc,t.gc.cbn))}),{compress:function(e,n,o,r){var i,s,a={},l=void 0===o&&void 0===r;if("function"!=typeof o&&(s=o,o=r=0),r=r||function(e){return void 0!==s?t(e,s):void 0},o=o||function(e,t){return void 0!==s?postMessage({action:Fe,cbn:s,result:e,error:t}):void 0},l){for(a.c=E({},Le(e),Je(n));H(a.c.yb););return y(a.c.Nb)}try{a.c=E({},Le(e),Je(n)),r(0)}catch(e){return o(null,e)}Ve((function e(){try{for(var t,n=(new Date).getTime();H(a.c.yb);)if(i=Me(a.c.yb.Pb)/Me(a.c.Tb),(new Date).getTime()-n>200)return r(i),Ve(e,0),0;r(1),t=y(a.c.Nb),Ve(o.bind(null,t),0)}catch(e){o(null,e)}}),0)},decompress:function(e,n,o){var r,i,s,a,l={},c=void 0===n&&void 0===o;if("function"!=typeof n&&(i=n,n=o=0),o=o||function(e){return void 0!==i?t(s?e:-1,i):void 0},n=n||function(e,t){return void 0!==i?postMessage({action:Ue,cbn:i,result:e,error:t}):void 0},c){for(l.d=C({},e);H(l.d.yb););return Pe(y(l.d.Nb))}try{l.d=C({},e),a=Me(l.d.Tb),s=a>-1,o(0)}catch(e){return n(null,e)}Ve((function e(){try{for(var t,i=0,c=(new Date).getTime();H(l.d.yb);)if(++i%1e3==0&&(new Date).getTime()-c>200)return s&&(r=Me(l.d.yb.Z.g)/a,o(r)),Ve(e,0),0;o(1),t=Pe(y(l.d.Nb)),Ve(n.bind(null,t),0)}catch(e){n(null,e)}}),0)}}}(),pxt,pxt,pxt,pxt,pxt,ts;this.LZMA=this.LZMA_WORKER=e,function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.DOMPurify=t()}(this,(function(){function e(e){return function(t){for(var n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return d(e,t,o)}}function t(e){return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return g(e,n)}}function n(e,t){s&&s(e,null);for(var n=t.length;n--;){var o=t[n];if("string"==typeof o){var r=b(o);r!==o&&(a(t)||(t[n]=r),o=r)}e[o]=!0}return e}function o(e){var t={},n=void 0;for(n in e)d(i,e,[n])&&(t[n]=e[n]);return t}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=Object.hasOwnProperty,s=Object.setPrototypeOf,a=Object.isFrozen,l=Object.keys,c=Object.freeze,u=Object.seal,p="undefined"!=typeof Reflect&&Reflect,d=p.apply,g=p.construct;d||(d=function(e,t,n){return e.apply(t,n)}),c||(c=function(e){return e}),u||(u=function(e){return e}),g||(g=function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))});var h=e(Array.prototype.forEach),f=e(Array.prototype.indexOf),_=e(Array.prototype.join),m=e(Array.prototype.pop),y=e(Array.prototype.push),k=e(Array.prototype.slice),b=e(String.prototype.toLowerCase),v=e(String.prototype.match),T=e(String.prototype.replace),E=e(String.prototype.indexOf),S=e(String.prototype.trim),C=e(RegExp.prototype.test),x=t(RegExp),B=t(TypeError),A=c(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),I=c(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),D=c(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),N=c(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),w=c(["#text"]),R=c(["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","minlength","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"]),O=c(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),P=c(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),L=c(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),M=u(/\{\{[\s\S]*|[\s\S]*\}\}/gm),F=u(/<%[\s\S]*|[\s\S]*%>/gm),U=u(/^data-[\-\w.\u00B7-\uFFFF]/),H=u(/^aria-[\-\w]+$/),V=u(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G=u(/^(?:\w+script|data):/i),W=u(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g),K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j=function(){return"undefined"==typeof window?null:window},z=function(e,t){if("object"!==(void 0===e?"undefined":K(e))||"function"!=typeof e.createPolicy)return null;var n=null;t.currentScript&&t.currentScript.hasAttribute("data-tt-policy-suffix")&&(n=t.currentScript.getAttribute("data-tt-policy-suffix"));var o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+o+" could not be created."),null}};return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j(),i=function(t){return e(t)};if(i.version="2.0.8",i.removed=[],!t||!t.document||9!==t.document.nodeType)return i.isSupported=!1,i;var s=t.document,a=!1,u=!1,p=t.document,d=t.DocumentFragment,g=t.HTMLTemplateElement,$=t.Node,X=t.NodeFilter,Y=t.NamedNodeMap,J=void 0===Y?t.NamedNodeMap||t.MozNamedAttrMap:Y,q=t.Text,Z=t.Comment,Q=t.DOMParser,ee=t.trustedTypes;if("function"==typeof g){var te=p.createElement("template");te.content&&te.content.ownerDocument&&(p=te.content.ownerDocument)}var ne=z(ee,s),oe=ne?ne.createHTML(""):"",re=p,ie=re.implementation,se=re.createNodeIterator,ae=re.getElementsByTagName,le=re.createDocumentFragment,ce=s.importNode,ue={};i.isSupported=ie&&void 0!==ie.createHTMLDocument&&9!==p.documentMode;var pe=M,de=F,ge=U,he=H,fe=G,_e=W,me=V,ye=null,ke=n({},[].concat(r(A),r(I),r(D),r(N),r(w))),be=null,ve=n({},[].concat(r(R),r(O),r(P),r(L))),Te=null,Ee=null,Se=!0,Ce=!0,xe=!1,Be=!1,Ae=!1,Ie=!1,De=!1,Ne=!1,we=!1,Re=!1,Oe=!1,Pe=!1,Le=!0,Me=!0,Fe=!1,Ue={},He=n({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ve=n({},["audio","video","img","source","image"]),Ge=null,We=n({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),Ke=null,je=p.createElement("form"),ze=function(e){Ke&&Ke===e||(e&&"object"===(void 0===e?"undefined":K(e))||(e={}),ye="ALLOWED_TAGS"in e?n({},e.ALLOWED_TAGS):ke,be="ALLOWED_ATTR"in e?n({},e.ALLOWED_ATTR):ve,Ge="ADD_URI_SAFE_ATTR"in e?n(o(We),e.ADD_URI_SAFE_ATTR):We,Te="FORBID_TAGS"in e?n({},e.FORBID_TAGS):{},Ee="FORBID_ATTR"in e?n({},e.FORBID_ATTR):{},Ue="USE_PROFILES"in e&&e.USE_PROFILES,Se=!1!==e.ALLOW_ARIA_ATTR,Ce=!1!==e.ALLOW_DATA_ATTR,xe=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Be=e.SAFE_FOR_JQUERY||!1,Ae=e.SAFE_FOR_TEMPLATES||!1,Ie=e.WHOLE_DOCUMENT||!1,we=e.RETURN_DOM||!1,Re=e.RETURN_DOM_FRAGMENT||!1,Oe=e.RETURN_DOM_IMPORT||!1,Pe=e.RETURN_TRUSTED_TYPE||!1,Ne=e.FORCE_BODY||!1,Le=!1!==e.SANITIZE_DOM,Me=!1!==e.KEEP_CONTENT,Fe=e.IN_PLACE||!1,me=e.ALLOWED_URI_REGEXP||me,Ae&&(Ce=!1),Re&&(we=!0),Ue&&(ye=n({},[].concat(r(w))),be=[],!0===Ue.html&&(n(ye,A),n(be,R)),!0===Ue.svg&&(n(ye,I),n(be,O),n(be,L)),!0===Ue.svgFilters&&(n(ye,D),n(be,O),n(be,L)),!0===Ue.mathMl&&(n(ye,N),n(be,P),n(be,L))),e.ADD_TAGS&&(ye===ke&&(ye=o(ye)),n(ye,e.ADD_TAGS)),e.ADD_ATTR&&(be===ve&&(be=o(be)),n(be,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&n(Ge,e.ADD_URI_SAFE_ATTR),Me&&(ye["#text"]=!0),Ie&&n(ye,["html","head","body"]),ye.table&&(n(ye,["tbody"]),delete Te.tbody),c&&c(e),Ke=e)},$e=function(e){y(i.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=oe}},Xe=function(e,t){try{y(i.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){y(i.removed,{attribute:null,from:t})}t.removeAttribute(e)},Ye=function(e){var t=void 0,o=void 0;if(Ne)e="<remove></remove>"+e;else{var r=v(e,/^[\s]+/);o=r&&r[0]}var i=ne?ne.createHTML(e):e;if(a)try{t=(new Q).parseFromString(i,"text/html")}catch(e){}if(u&&n(Te,["title"]),!t||!t.documentElement){var s=(t=ie.createHTMLDocument("")).body;s.parentNode.removeChild(s.parentNode.firstElementChild),s.outerHTML=i}return e&&o&&t.body.insertBefore(p.createTextNode(o),t.body.childNodes[0]||null),ae.call(t,Ie?"html":"body")[0]};i.isSupported&&(function(){try{Ye('<svg><p><textarea><img src="</textarea><img src=x abc=1//">').querySelector("svg img")&&(a=!0)}catch(e){}}(),function(){try{var e=Ye("<x/><title>&lt;/title&gt;&lt;img&gt;");C(/<\/title/,e.querySelector("title").innerHTML)&&(u=!0)}catch(e){}}());var Je=function(e){return se.call(e.ownerDocument||e,e,X.SHOW_ELEMENT|X.SHOW_COMMENT|X.SHOW_TEXT,(function(){return X.FILTER_ACCEPT}),!1)},qe=function(e){return!(e instanceof q||e instanceof Z||"string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof J&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute&&"string"==typeof e.namespaceURI)},Ze=function(e){return"object"===(void 0===$?"undefined":K($))?e instanceof $:e&&"object"===(void 0===e?"undefined":K(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Qe=function(e,t,n){ue[e]&&h(ue[e],(function(e){e.call(i,t,n,Ke)}))},et=function(e){var t=void 0;if(Qe("beforeSanitizeElements",e,null),qe(e))return $e(e),!0;var n=b(e.nodeName);if(Qe("uponSanitizeElement",e,{tagName:n,allowedTags:ye}),("svg"===n||"math"===n)&&0!==e.querySelectorAll("p, br").length)return $e(e),!0;if(!ye[n]||Te[n]){if(Me&&!He[n]&&"function"==typeof e.insertAdjacentHTML)try{var o=e.innerHTML;e.insertAdjacentHTML("AfterEnd",ne?ne.createHTML(o):o)}catch(e){}return $e(e),!0}return"noscript"===n&&C(/<\/noscript/i,e.innerHTML)||"noembed"===n&&C(/<\/noembed/i,e.innerHTML)?($e(e),!0):(!Be||e.firstElementChild||e.content&&e.content.firstElementChild||!C(/</g,e.textContent)||(y(i.removed,{element:e.cloneNode()}),e.innerHTML?e.innerHTML=T(e.innerHTML,/</g,"&lt;"):e.innerHTML=T(e.textContent,/</g,"&lt;")),Ae&&3===e.nodeType&&(t=e.textContent,t=T(t,pe," "),t=T(t,de," "),e.textContent!==t&&(y(i.removed,{element:e.cloneNode()}),e.textContent=t)),Qe("afterSanitizeElements",e,null),!1)},tt=function(e,t,n){if(Le&&("id"===t||"name"===t)&&(n in p||n in je))return!1;if(Ce&&C(ge,t));else if(Se&&C(he,t));else{if(!be[t]||Ee[t])return!1;if(Ge[t]);else if(C(me,T(n,_e,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==E(n,"data:")||!Ve[e])if(xe&&!C(fe,T(n,_e,"")));else if(n)return!1}return!0},nt=function(e){var t=void 0,n=void 0,o=void 0,r=void 0,s=void 0;Qe("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){var c={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:be};for(s=a.length;s--;){var u=t=a[s],p=u.name,d=u.namespaceURI;if(n=S(t.value),o=b(p),c.attrName=o,c.attrValue=n,c.keepAttr=!0,c.forceKeepAttr=void 0,Qe("uponSanitizeAttribute",e,c),n=c.attrValue,!c.forceKeepAttr){if("name"===o&&"IMG"===e.nodeName&&a.id)r=a.id,a=k(a,[]),Xe("id",e),Xe(p,e),f(a,r)>s&&e.setAttribute("id",r.value);else{if("INPUT"===e.nodeName&&"type"===o&&"file"===n&&c.keepAttr&&(be[o]||!Ee[o]))continue;"id"===p&&e.setAttribute(p,""),Xe(p,e)}if(c.keepAttr)if(Be&&C(/\/>/i,n))Xe(p,e);else if(C(/svg|math/i,e.namespaceURI)&&C(x("</("+_(l(He),"|")+")","i"),n))Xe(p,e);else{Ae&&(n=T(n,pe," "),n=T(n,de," "));var g=e.nodeName.toLowerCase();if(tt(g,o,n))try{d?e.setAttributeNS(d,p,n):e.setAttribute(p,n),m(i.removed)}catch(e){}}}}Qe("afterSanitizeAttributes",e,null)}},ot=function e(t){var n=void 0,o=Je(t);for(Qe("beforeSanitizeShadowDOM",t,null);n=o.nextNode();)Qe("uponSanitizeShadowNode",n,null),et(n)||(n.content instanceof d&&e(n.content),nt(n));Qe("afterSanitizeShadowDOM",t,null)};return i.sanitize=function(e,n){var o=void 0,r=void 0,a=void 0,l=void 0,c=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!Ze(e)){if("function"!=typeof e.toString)throw B("toString is not a function");if("string"!=typeof(e=e.toString()))throw B("dirty is not a string, aborting")}if(!i.isSupported){if("object"===K(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(Ze(e))return t.toStaticHTML(e.outerHTML)}return e}if(De||ze(n),i.removed=[],"string"==typeof e&&(Fe=!1),Fe);else if(e instanceof $)1===(r=(o=Ye("\x3c!--\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===r.nodeName||"HTML"===r.nodeName?o=r:o.appendChild(r);else{if(!we&&!Ae&&!Ie&&Pe&&-1===e.indexOf("<"))return ne?ne.createHTML(e):e;if(!(o=Ye(e)))return we?null:oe}o&&Ne&&$e(o.firstChild);for(var u=Je(Fe?e:o);a=u.nextNode();)3===a.nodeType&&a===l||et(a)||(a.content instanceof d&&ot(a.content),nt(a),l=a);if(l=null,Fe)return e;if(we){if(Re)for(c=le.call(o.ownerDocument);o.firstChild;)c.appendChild(o.firstChild);else c=o;return Oe&&(c=ce.call(s,c,!0)),c}var p=Ie?o.outerHTML:o.innerHTML;return Ae&&(p=T(p,pe," "),p=T(p,de," ")),ne&&Pe?ne.createHTML(p):p},i.setConfig=function(e){ze(e),De=!0},i.clearConfig=function(){Ke=null,De=!1},i.isValidAttribute=function(e,t,n){Ke||ze({});var o=b(e),r=b(t);return tt(o,r,n)},i.addHook=function(e,t){"function"==typeof t&&(ue[e]=ue[e]||[],y(ue[e],t))},i.removeHook=function(e){ue[e]&&m(ue[e])},i.removeHooks=function(e){ue[e]&&(ue[e]=[])},i.removeAllHooks=function(){ue={}},i}()})),pxt||(pxt={}),function(e){!function(t){const n={},o={};let r=!1;t.addDefaultProperties=function(e){Object.keys(e).forEach((t=>{"string"==typeof e[t]?n[t]=e[t]:o[t]=e[t]}))},t.enable=function(){if(!e.aiTrackException||!e.aiTrackEvent||r)return;r=!0,e.debug("setting up app insights");const t=e.tickEvent;e.tickEvent=function(r,i,s){if(t&&t(r,i,s),(null==s?void 0:s.interactiveConsent)&&e.setInteractiveConsent(!0),i){const t=Object.assign({},n)||{},s=Object.assign({},o)||{};Object.keys(i).forEach((e=>{"string"==typeof i[e]?t[e]=i[e]:"number"==typeof i[e]?s[e]=i[e]:t[e]=JSON.stringify(i[e]||"")})),e.aiTrackEvent(r,t,s)}else e.aiTrackEvent(r)};const i=e.reportException;e.reportException=function(t,n){i&&i(t,n);const o={target:e.appTarget.id,version:e.appTarget.versions.target};n&&e.Util.jsonMergeFrom(o,n),e.aiTrackException(t,"exception",o)};const s=e.reportError;e.reportError=function(t,n,o){s&&s(t,n,o);try{throw n}catch(r){const i={target:e.appTarget.id,version:e.appTarget.versions.target,category:t,message:n};o&&e.Util.jsonMergeFrom(i,o),e.aiTrackException(r,"error",i)}}}}(e.analytics||(e.analytics={}))}(pxt||(pxt={})),pxt||(pxt={}),function(e){!function(e){let t,n,o,r=0,i=!1;function s(){return t||(t=function(){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext)try{return new window.AudioContext}catch(e){}return}()),t}function a(){t&&(o.gain.setTargetAtTime(0,t.currentTime,.015),r=0)}e.mute=function(e){t&&(i=e,a(),e&&n&&(n.disconnect(),o.disconnect(),n=void 0,o=void 0))},e.stop=a,e.frequency=function(){return r},e.tone=function(e){if(i)return;if(e<0)return;r=e;let a=s();if(a)try{n||(n=a.createOscillator(),n.type="triangle",o=a.createGain(),o.gain.value=0,o.connect(a.destination),n.connect(o),n.start(0)),n.frequency.linearRampToValueAtTime(e,t.currentTime),o.gain.setTargetAtTime(.2,t.currentTime,.015)}catch(e){return void(n=void 0)}}}(e.AudioContextManager||(e.AudioContextManager={}))}(pxt||(pxt={})),function(e){!function(t){const n="auth",o="csrf-token",r="login-state",i="user-state";let s,a=!1;t.DEFAULT_USER_PREFERENCES=()=>({highContrast:!1,language:e.appTarget.appTheme.defaultLocale,reader:"",skillmap:{mapProgress:{},completedTags:{}},email:!1}),t.client=function(){return s};let l=0,c=0;t.AuthClient=class{constructor(){this.initialUserPreferences_=void 0,this.initialAuthCheck_=void 0,this.patchQueue=[],e.Util.assert(!s),s=this}async initAsync(){try{this.state$=await e.storage.shared.getAsync(n,i)}catch(e){}this.state$||(this.state$={}),this.setUserProfileAsync(this.state$.profile),this.setUserPreferencesAsync(this.state$.preferences)}async loginAsync(t,o,i){var s;if(!d()||!function(e){return p().filter((t=>t.id===e)).length>0}(t))return;i=null!=i?i:u;const a=this.getState();a.profile||await this.authCheckAsync();if((null===(s=a.profile)||void 0===s?void 0:s.idp)===t)return void e.debug(`loginAsync: Already signed into ${t}.`);this.clearState();const l={key:(Math.PI*Math.random()).toString(36).slice(2),callbackState:i,callbackPathname:window.location.pathname,idp:t};await e.storage.shared.setAsync(n,r,l);const c=e.Util.stringifyQueryString("/api/auth/login",{response_type:"token",provider:t,persistent:o,redirect_uri:`${window.location.origin}${window.location.pathname}?authcallback=1&state=${l.key}`}),g=await this.apiAsync(c);g.success?(e.tickEvent("auth.login.start",{provider:t}),window.location.href=g.resp.loginUrl):await this.onSignInFailed()}async logoutAsync(t){if(!d())return;e.tickEvent("auth.logout"),await this.apiAsync("/api/auth/logout"),await e.storage.shared.delAsync(n,o),this.clearState();const r=t?t.startsWith("#")?t:`#${t}`:"";e.BrowserUtils.hasWindow()&&(window.location.href=`${window.location.origin}${window.location.pathname}${r}`,location.reload())}async deleteProfileAsync(){var t;if(!await this.loggedInAsync())return;const r=null===(t=this.getState().profile)||void 0===t?void 0:t.id,i=await this.apiAsync("/api/user",null,"DELETE");if(i.err)await this.onApiError(i.err);else try{await e.storage.shared.delAsync(n,o);try{await this.onProfileDeleted(r)}catch(t){e.tickEvent("auth.profile.cloudToLocalFailed")}this.clearState()}finally{e.tickEvent("auth.profile.deleted")}}async initialUserPreferencesAsync(){if(await this.loggedInAsync())return this.initialUserPreferences_||(this.initialUserPreferences_=this.fetchUserPreferencesAsync()),this.initialUserPreferences_}async userProfileAsync(){if(!await this.loggedInAsync())return;const e=this.getState();return Object.assign({},e.profile)}async userPreferencesAsync(){const e=this.getState();return Object.assign({},e.preferences)}async authCheckAsync(){var t;if(!d())return;if(!await e.storage.shared.getAsync(n,o))return;const r=this.getState();return(null===(t=r.profile)||void 0===t?void 0:t.id)?this.initialAuthCheck_||(this.initialAuthCheck_=Promise.resolve(r.profile)):this.initialAuthCheck_||(this.initialAuthCheck_=this.fetchUserAsync()),this.initialAuthCheck_}async loggedInAsync(){return await this.authCheckAsync(),this.hasUserId()}async updateUserProfileAsync(e){if(!await this.loggedInAsync())return!1;const t=this.getState(),n=await this.apiAsync("/api/user/profile",{id:t.profile.id,username:e.username,avatarUrl:e.avatarUrl});return n.success&&await this.setUserProfileAsync(n.resp),n.success}async patchUserPreferencesAsync(n,o={}){const r=async()=>({success:!0,res:await this.userPreferencesAsync()});if(!(n=(n=Array.isArray(n)?n:[n]).filter((e=>!!e))).length)return await r();const i=(t,n,o)=>{const r=e.U.deepCopy(t);ts.pxtc.jsonPatch.patchInPlace(r,n);let i=ts.pxtc.jsonPatch.diff(t,r);return i.length&&o&&(i=i.filter(o)),i},s=await this.userPreferencesAsync(),a=i(s,n,o.filter);if(!a.length)return await r();if(ts.pxtc.jsonPatch.patchInPlace(s,a),await this.setUserPreferencesAsync(s),!await this.loggedInAsync())return await r();this.patchQueue.push({ops:n,filter:o.filter}),clearTimeout(l);const u=async()=>{if(c=0,!this.patchQueue.length)return await r();const n=await this.apiAsync("/api/user/preferences");if(!n.success)return e.reportError("identity","failed to fetch preferences for patch",n),{success:!1,res:void 0};const o=e.U.deepCopy(n.resp)||t.DEFAULT_USER_PREFERENCES(),s=this.patchQueue;this.patchQueue=[],s.forEach((e=>{const t=i(o,e.ops,e.filter);ts.pxtc.jsonPatch.patchInPlace(o,t)}));const a=pxtc.jsonPatch.diff(n.resp,o),l=await this.apiAsync("/api/user/preferences",a,"PATCH");return l.success?this.setUserPreferencesAsync(l.resp):e.reportError("identity","failed to patch preferences",l),{success:l.success,res:l.resp}};return o.immediate?await u():(c||(c=e.U.now()),1e4<e.U.now()-c?await u():(l=setTimeout(u,1e3),{success:!1,res:void 0}))}hasUserId(){var e;if(!d())return!1;return!!(null===(e=this.getState().profile)||void 0===e?void 0:e.id)}async fetchUserAsync(){var e;if(!d())return;const t=this.getState();if(null===(e=t.profile)||void 0===e?void 0:e.id)return t.profile;const n=await this.apiAsync("/api/user/profile");if(n.success){const e=n.resp;return await this.setUserProfileAsync(e),e}}async setUserProfileAsync(e){const t=this.hasUserId();this.transformUserProfile(e);const n=this.hasUserId();this.onUserProfileChanged(),n&&!t?await this.onSignedIn():!n&&t&&await this.onSignedOut()}async setUserPreferencesAsync(e){var n;const o=null!==(n=this.getState().preferences)&&void 0!==n?n:t.DEFAULT_USER_PREFERENCES(),r=ts.pxtc.jsonPatch.diff(o,e);this.transformUserPreferences(Object.assign(Object.assign({},o),e)),await this.onUserPreferencesChanged(r)}async fetchUserPreferencesAsync(){if(!await this.loggedInAsync())return;const e=this.getState(),t=await this.apiAsync("/api/user/preferences");return t.success&&t.resp?(this.setUserPreferencesAsync(t.resp),e.preferences):void 0}transformUserProfile(e){this.state$=Object.assign(Object.assign({},this.state$),{profile:Object.assign({},e)}),this.saveState()}transformUserPreferences(e){this.state$=Object.assign(Object.assign({},this.state$),{preferences:Object.assign({},e)}),this.saveState()}getState(){return this.state$}saveState(){e.storage.shared.setAsync(n,i,this.state$).then((()=>{}))}clearState(){this.state$={},e.storage.shared.delAsync(n,i).then((()=>this.onStateCleared()))}async apiAsync(t,r,i){var s;const a={},l=await e.storage.shared.getAsync(n,o);return l&&(a.authorization=`mkcd ${l}`),a["x-pxt-target"]=null===(s=e.appTarget)||void 0===s?void 0:s.id,t=e.BrowserUtils.isLocalHostDev()?`https://staging.pxt.io${t}`:t,e.Util.requestAsync({url:t,headers:a,data:r,method:i||(r?"POST":"GET"),withCredentials:!0}).then((e=>({statusCode:e.statusCode,resp:e.json,success:2===Math.floor(e.statusCode/100),err:null}))).catch((async e=>(/logout/.test(t)||401!=e.statusCode||await this.logoutAsync(),{statusCode:e.statusCode,err:e,resp:null,success:!1})))}};const u={hash:"",params:{}};function p(){var t,n;return Object.keys((null===(n=null===(t=e.appTarget)||void 0===t?void 0:t.cloud)||void 0===n?void 0:n.cloudProviders)||{}).map((t=>e.appTarget.cloud.cloudProviders[t])).filter((e=>e.identity)).sort(((e,t)=>e.order-t.order))}function d(){return!a&&!e.BrowserUtils.isPxtElectron()&&p().length>0}function g(e,t){return e.id===t.id&&e.sourceURL===t.sourceURL}t.loginCallbackAsync=async function(t){let i,s=Object.assign({},u);do{if(i=await e.storage.shared.getAsync(n,r),!i)return void e.debug("Auth state not found in storge.");await e.storage.shared.delAsync(n,r);const a=t.state;if(!a||i.key!==a)return void e.debug("Failed to get auth state for key");s=Object.assign(Object.assign({},u),i.callbackState);const l=t.error;if(l){const n=t.error_description;e.tickEvent("auth.login.error",{error:l,provider:i.idp}),e.log(`Auth failed: ${l}:${n}`),s=Object.assign({},u);break}const c=t.token;if(!c){e.debug("Missing authToken in auth callback.");break}await e.storage.shared.setAsync(n,o,c),e.tickEvent("auth.login.success",{provider:i.idp})}while(0);const a=s.hash.startsWith("#")?s.hash:`#${s.hash}`,l=e.Util.stringifyQueryString("",s.params),c=`${i.callbackPathname.startsWith("/")?i.callbackPathname:`/${i.callbackPathname}`}${a}${l}`;window.location.href=c},t.identityProviders=p,t.identityProvider=function(e){return p().filter((t=>t.id===e)).shift()},t.hasIdentity=d,t.enableAuth=function(e=!0){a=!e},t.userName=function(e){var t,n,o,r;return null!==(r=null!==(n=null===(t=null==e?void 0:e.idp)||void 0===t?void 0:t.displayName)&&void 0!==n?n:null===(o=null==e?void 0:e.idp)||void 0===o?void 0:o.username)&&void 0!==r?r:"??"},t.userInitials=function(t){const n=e.auth.userName(t);return ts.pxtc.Util.initials(n)},t.generateUserProfilePicDataUrl=function(t){var n,o;if(null===(o=null===(n=null==t?void 0:t.idp)||void 0===n?void 0:n.picture)||void 0===o?void 0:o.encoded){const n=window.URL||window.webkitURL;try{const o=e.Util.stringToUint8Array(atob(t.idp.picture.encoded)),r=new Blob([o],{type:t.idp.picture.mimeType});t.idp.picture.dataUrl=n.createObjectURL(r)}catch(e){}}},t.badgeEquals=g,t.hasBadge=function(e,t){return e.badges.some((e=>g(e,t)))}}(e.auth||(e.auth={}))}(pxt||(pxt={})),function(e){e.tickEvent=function(e){}}(pxt||(pxt={})),function(e){!function(e){e.__dummy=42}(e.pxtc||(e.pxtc={}))}(ts||(ts={}));var pxtc=ts.pxtc;!function(e){!function(e){!function(e){function t(e){return e.replace(/[^\w .!?\-$]/g,(e=>{let t=e.charCodeAt(0).toString(16);return"\\u"+"0000".substr(0,4-t.length)+t}))}e.assert=function(e,t="Assertion failed"){if(!e)throw new Error(t)},e.flatClone=function(e){if(null==e)return null;let t={};return Object.keys(e).forEach((n=>{t[n]=e[n]})),t},e.clone=function(e){return null==e?null:JSON.parse(JSON.stringify(e))},e.htmlEscape=function(e){return e?e.replace(/([^\w .!?\-$])/g,(e=>"&#"+e.charCodeAt(0)+";")):e},e.htmlUnescape=function(e){return e?e.replace(/(&#\d+;)/g,(e=>String.fromCharCode(Number(e.substr(2,e.length-3))))):e},e.jsStringQuote=t,e.jsStringLiteral=function(e){return'"'+t(e)+'"'},e.initials=function(e){if(/^\w+@/.test(e)){return e.match(/^\w\w/).shift().toUpperCase()}{const t=e.match(/\b\w/g)||[];return((t.shift()||"")+(t.pop()||"")).toUpperCase()}};let n="en",o={},r={},i=!1;function s(){return n}function a(e){const t=/^(\w{2})-(\w{2}$)/i.exec(e);return t&&t[1]&&t[2]?[`${t[1].toLowerCase()}-${t[2].toUpperCase()}`,t[1].toLowerCase(),`${t[1].toLowerCase()}-${t[2].toLowerCase()}`]:[(e||"en").toLowerCase()]}function l(t,n){return 0==n.length?t:t.replace(/\{([0-9]+)(\:[^\}]+)?\}/g,(function(t,o,r){let i=n[parseInt(o)],s="",a=/^:f(\d*)\.(\d+)/.exec(r);if(a){let e=parseInt(a[2]),t=parseInt(a[1])||0,n=/^0/.test(a[1])?"0":" ",o=i.toFixed(e);if(t>0&&e>0&&(t+=e+1),t>0)for(;o.length<t;)o=n+o;s=o}else s=":x"==r?"0x"+i.toString(16):void 0===i?"(undef)":null===i?"(null)":i.toString?i.toString():i+"";return":a"==r?/^\s*[euioah]/.test(s.toLowerCase())?s="an "+s:/^\s*[bcdfgjklmnpqrstvwxz]/.test(s.toLowerCase())&&(s="a "+s):":s"==r?s=1==i?"":"s":":q"==r?s=e.htmlEscape(s):":jq"==r?s=e.jsStringQuote(s):":uri"==r?s=encodeURIComponent(s).replace(/'/g,"%27").replace(/"/g,"%22"):":url"==r?s=encodeURI(s).replace(/'/g,"%27").replace(/"/g,"%22"):":%"==r&&(s=(100*i).toFixed(1).toString()+"%"),s}))}e.enableLiveLocalizationUpdates=function(){i=!0},e.liveLocalizationEnabled=function(){return i},e.localeInfo=function(){return`${i?"live-":""}${s()}`},e.userLanguage=s,e.normalizeLanguageCode=a,e.setUserLanguage=function(e){n=a(e)[0]},e.isUserLanguageRtl=function(){return/^ar|dv|fa|ha|he|ks|ku|ps|ur|yi/i.test(n)},e.TRANSLATION_LOCALE="pxt",e.isTranslationMode=function(){return s()==e.TRANSLATION_LOCALE},e._localize=function(e){return o[e]||e},e.getLocalizedStrings=function(){return o},e.setLocalizedStrings=function(e){o=e},e.translationsCache=function(){return r},e.fmt_va=l,e.fmt=function(e,...t){return l(e,t)};const c={};e.dumpLocStats=function(){const e={};Object.keys(c).sort(((e,t)=>c[t]-c[e])).forEach((t=>e[t]=t)),console.log("prioritized list of strings:"),console.log(JSON.stringify(e,null,2))};function u(t,n){if(!t)return t;c[t]=(c[t]||0)+1;let o=e._localize(t);return o=o.replace(/^\{(id|loc):[^\}]+\}/g,""),l(o,n)}e.lf_va=u,e.lf=function(e,...t){return u(e,t)},e.rlf=function(e,...t){return u(e,t)},e.lookup=function(e,t){return e.hasOwnProperty(t)?e[t]:null},e.isoTime=function(t){let n=new Date(1e3*t);return e.fmt("{0}-{1:f02.0}-{2:f02.0} {3:f02.0}:{4:f02.0}:{5:f02.0}",n.getFullYear(),n.getMonth()+1,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds())},e.userError=function(e){let t=new Error(e);throw t.isUserError=!0,t},e.deq=function e(t,n){if(t===n)return null;if(!t||!n)return"Null value";if("object"==typeof t&&"object"==typeof n){if(Array.isArray(t)){if(!Array.isArray(n))return"Expected array";if(t.length!=n.length)return"Expected array of length "+t.length+", got "+n.length;for(let o=0;o<t.length;o++)if(null!=e(t[o],n[o]))return"Expected array value "+t[o]+" got "+n[o];return null}let o=Object.keys(t),r=Object.keys(t);if(o.length!=r.length)return"Expected "+o.length+" keys, got "+r.length;for(let r=0;r<o.length;r++){if(!Object.prototype.hasOwnProperty.call(n,o[r]))return"Missing key "+o[r];if(null!=e(t[o[r]],n[o[r]]))return"Expected value of "+o[r]+" to be "+t[o[r]]+", got "+n[o[r]]}return null}return"Unable to compare "+t+", "+n}}(e.Util||(e.Util={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={}));const lf=ts.pxtc.Util.lf;var ts,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,ts,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,ts,pxt,pxt,pxt,pxt,ts,pxt,ts,pxtmelody,pxtmelody,pxtmelody,pxt,pxt,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,pxt,pxt,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,pxt,pxt,pxt,pxt,pxt,pxt,pxt;!function(e){!function(e){e.decodeBase64=function(e){return atob(e)},e.encodeBase64=function(e){return btoa(e)}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){!function(n){function o(e,t){if(t)for(let n=0;n<t.length;++n)e.push(t[n])}function r(e){let t=[];for(let n=0;n<e.length;++n)o(t,e[n]);return t}function i(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function s(e,t,n,o,r){void 0===o&&(o=0),void 0===r&&(r=n.length-o);for(let i=0;i<r;++i)e[t+i]=n[o+i]}function a(e,t){return e==t?0:e<t?-1:1}n.CancellationToken=class{constructor(){this.pending=!1,this.cancelled=!1}startOperation(){this.pending=!0}isRunning(){return this.pending}onProgress(e){this.progressHandler=e}reportProgress(e,t){this.progressHandler&&this.progressHandler(e,t)}cancel(){this.cancelled=!0,this.pending=!1}cancelAsync(){return this.cancelled||!this.pending?(this.cancelled=!0,this.pending=!1,Promise.resolve()):(this.cancelled=!0,this.deferred=new Promise((e=>{this.resolve=e})),this.deferred)}isCancelled(){return this.cancelled}throwIfCancelled(){if(this.isCancelled())throw new Error}resolveCancel(){this.pending=!1,this.deferred&&(this.resolve(),this.deferred=void 0,this.resolve=void 0)}},n.codalHash16=function(e){const t=[251,175,119,215,81,14,79,191,103,49,181,143,186,157,0,232,31,32,55,60,152,58,17,237,174,70,160,144,220,90,57,223,59,3,18,140,111,166,203,196,134,243,124,95,222,179,197,65,180,48,36,15,107,46,233,130,165,30,123,161,209,23,97,16,40,91,219,61,100,10,210,109,250,127,22,138,29,108,244,67,207,9,178,204,74,98,126,249,167,116,34,77,193,200,121,5,20,113,71,35,128,13,182,94,25,226,227,199,75,27,41,245,230,224,43,225,177,26,155,150,212,142,218,115,241,73,88,105,39,114,62,255,192,201,145,214,168,158,221,148,154,122,12,84,82,163,44,139,228,236,205,242,217,11,187,146,159,64,86,239,195,42,106,198,118,112,184,172,87,2,173,117,176,229,247,253,137,185,99,164,102,147,45,66,231,52,141,211,194,206,246,238,56,110,78,248,63,240,189,93,92,51,53,183,19,171,72,50,33,104,101,69,8,252,83,120,76,135,85,54,202,125,188,213,96,235,136,208,162,129,190,132,156,38,47,1,7,254,24,4,216,131,89,21,28,133,37,153,149,80,170,68,6,169,234,151];function n(e){let n=0;for(let o=0;o<e.length;o++){let r=e[o];n=t[n^r]}return n}return e?function(e,t){let o;const r=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);r[t]=255&n}let i=0;for(let e=0;e<t;++e)o=n(r),i|=o<<8*e,r[0]=(r[0]+1)%255;return i}(e,2):0},n.bufferSerial=function(e,t="",n="?",o=255){for(let r=0;r<t.length;++r){const i=t[r];if(e[n]=(e[n]||"")+i,"\n"===i||e[n].length>o){let t=e[n];e[n]="",window.postMessage({type:"serial",id:n,data:t},"*")}}},n.blobReadAsDataURL=function(e){return e?new Promise(((t,n)=>{const o=new FileReader;o.onload=()=>t(o.result),o.onerror=e=>n(e),o.readAsDataURL(e)})):Promise.resolve(void 0)},n.fileReadAsBufferAsync=function(e){return e?new Promise(((t,n)=>{let o=new FileReader;o.onerror=e=>t(null),o.onload=e=>t(new Uint8Array(o.result)),o.readAsArrayBuffer(e)})):Promise.resolve(null)},n.fileReadAsTextAsync=function(e){return e?new Promise(((t,n)=>{let o=new FileReader;o.onerror=e=>t(null),o.onload=e=>t(o.result),o.readAsText(e)})):Promise.resolve(null)},n.repeatMap=function(e,t){e=e||0;let n=[];for(let o=0;o<e;++o)n.push(t(o));return n},n.listsEqual=function(e,t){if(!e||!t||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},n.oops=function(e="OOPS"){throw new Error(e)},n.reversed=function(e){return(e=e.slice(0)).reverse(),e},n.arrayEquals=function(e,t,n=((e,t)=>e===t)){if(e==t)return!0;if(!e&&t||!t&&e||e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!n(e[o],t[o]))return!1;return!0},n.iterMap=function(e,t){Object.keys(e).forEach((n=>t(n,e[n])))},n.mapMap=function(e,t){let n={};return Object.keys(e).forEach((o=>n[o]=t(o,e[o]))),n},n.values=function(e){return Object.keys(e||{}).map((t=>e[t]))},n.pushRange=o,n.concatArrayLike=function(e){return r(e)},n.concat=r,n.memcpy=s,n.uint8ArrayConcat=function(e){let t=0;for(let n of e)t+=n.length;let n=new Uint8Array(t),o=0;for(let t of e)s(n,o,t),o+=t.length;return n},n.jsonTryParse=function(e){try{return JSON.parse(e)}catch(e){return}},n.jsonMergeFrom=function e(t,o){o&&Object.keys(o).forEach((r=>{i(t[r])&&i(o[r])?e(t[r],o[r]):t[r]=n.clone(o[r])}))},n.jsonCopyFrom=function(e,t){let o=n.clone(t);for(let n of Object.keys(t))e[n]=o[n]},n.jsonFlatten=function(e){let t={},o=(e,r)=>{if(null!==r&&"object"==typeof r){n.assert(!Array.isArray(r)),e&&(e+=".");for(let t of Object.keys(r))o(e+t,r[t])}else t[e]=r};return o("",e),t},n.jsonUnFlatten=function(e){let t={};for(let n of Object.keys(e)){let o=t,r=n.split(".");for(let t=0;t<r.length;++t){let i=r[t];t==r.length-1?o[i]=e[n]:("object"!=typeof o[i]&&(o[i]={}),o=o[i])}}return t},n.strcmp=a,n.stringMapEq=function(e,t){let n=Object.keys(e),o=Object.keys(t);if(n.length!=o.length)return!1;for(let o of n){if(!t.hasOwnProperty(o))return!1;if(e[o]!==t[o])return!1}return!0},n.endsWith=function(e,t){return!(e.length<t.length)&&(0==t.length||e.slice(-t.length)==t)},n.startsWith=function(e,t){return!(e.length<t.length)&&(0==t.length||e.slice(0,t.length)==t)},n.contains=function(e,t){return!(e.length<t.length)&&(0==t.length||e.indexOf(t)>-1)},n.replaceAll=function(e,t,n){return t?e.split(t).join(n):e},n.snakify=function(e){const t=e.toUpperCase(),n=e.toLowerCase();if(e==t||e==n)return e;if(e.lastIndexOf("_")>0)return e;const o=t=>e[t]!=n[t],r=n=>e[n]!=t[n];let i="",s=0;for(;s<e.length;){let t=o(s),n=s;for(;n<e.length;){if(t&&r(n)){if(n-s>2){n--;break}t=!1}if(!t&&o(n))break;n++}i&&(i+="_"),i+=e.slice(s,n),s=n}return i.toUpperCase()===i?i:i.toLowerCase()},n.sortObjectFields=function(e){let t=Object.keys(e);t.sort(a);let n={};return t.forEach((t=>n[t]=e[t])),n},n.chopArray=function(e,t){let n=[];for(let o=0;o<e.length;o+=t)n.push(e.slice(o,o+t));return n},n.unique=function(e,t){let n=[],o={};return e.forEach((e=>{let r=t(e);o.hasOwnProperty(r)||(o[r]=null,n.push(e))})),n},n.groupBy=function(e,t){let n={};return e.forEach((e=>{let o=t(e);n.hasOwnProperty(o)||(n[o]=[]),n[o].push(e)})),n},n.toDictionary=function(e,t){let n={};return e.forEach((e=>{n[t(e)]=e})),n},n.toSet=function(e,t){let n={};return e.forEach((e=>{n[t(e)]=!0})),n},n.deepCopy=function e(t){if("object"!=typeof t||null===t)return t;const n=Array.isArray(t)?[]:{};for(const o in t){const r=t[o];n[o]=e(r)}return n},n.toArray=function(e){if(Array.isArray(e))return e;let t=[];if(!e)return t;for(let n=0;n<e.length;++n)t.push(e[n]);return t},n.indexOfMatching=function(e,t){for(let n=0;n<e.length;++n)if(t(e[n]))return n;return-1};const l=Promise.resolve();async function c(e,t,n){let o=0;const r=[],i=[];for(let s=0;s<e;s++){const e=(async()=>{for(;o<t.length;){const e=o++,r=t[e];i[e]=await n(r)}})();r.push(e)}try{await Promise.all(r)}catch(e){throw o=t.length,e}return i}function u(e,t){const n={};return o=>{const r=e(o);return n.hasOwnProperty(r)?n[r]:n[r]=t(o)}}n.nextTick=function(e){l.then(e)},n.delay=async function(e,t){const n=await t;return await new Promise((t=>setTimeout((()=>t()),e))),n},n.promiseMapAll=function(e,t){return Promise.all(e.map((e=>t(e))))},n.promiseMapAllSeries=function(e,t){return c(1,e,t)},n.promisePoolAsync=c,n.memoizeString=function(e){return u((e=>e),e)},n.promiseTimeout=async function(e,t,n){let o,r;const i=new Promise(((t,i)=>{r=t,o=setTimeout((()=>{r=void 0,clearTimeout(o),i(n||`Promise timed out after ${e}ms`)}),e)}));return Promise.race([t,i]).then((e=>(r&&(clearTimeout(o),r()),e)))},n.defer=function(){let e,t,n,o=!1;return{resolve:function(n){o?pxt.debug("Deferred promise already resolved"):(t?t(n):e=e||new Promise((function(e){e(n)})),o=!0)},reject:function(t){o?pxt.debug("Deferred promise already resolved"):(n?n(t):e=e||new Promise((function(e,n){n(t)})),o=!0)},promise:new Promise((function(o,r){e?o(e):(t=o,n=r)}))}},n.memoize=u,n.debounce=function(e,t,n){let o;return function(){let r=this,i=arguments,s=function(){o=null,n||e.apply(r,i)},a=n&&!o;return clearTimeout(o),o=setTimeout(s,t),a&&e.apply(r,i),o}};function p(e){return e&&(e=e.replace(/\\/g,"/")),e}function d(e){return n.httpRequestCoreAsync(e).then((o=>{const r=o.statusCode;if((e.successCodes||[304,200,201,202]).indexOf(r)<0&&!e.allowHttpErrors){const t=n.lf("Bad HTTP status code: {0} at {1}; message: {2}",o.statusCode,e.url,(o.text||"").slice(0,500)),r=new Error(t);return r.statusCode=o.statusCode,Promise.reject(r)}return o.text&&/application\/json/.test(o.headers["content-type"])&&(o.json=t.U.jsonTryParse(o.text)),o}))}function g(e,t){let n="";if(!e)return n;for(let o=0;o<e.length;++o){let r=e.charCodeAt(o);if(r<=127)n+=e.charAt(o);else if(r<=2047)n+=String.fromCharCode(192|r>>6,128|63&r);else{if(!t&&55296<=r&&r<=56319){let t=e.charCodeAt(++o);isNaN(t)||(r=65536+(r-55296<<10)+(t-56320))}n+=r<=65535?String.fromCharCode(224|r>>12,128|r>>6&63,128|63&r):String.fromCharCode(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}}return n}n.AdaptiveDebouncer=class{constructor(e,t=300,n=2e3,o=2){this.func=e,this.minDelay=t,this.maxDelay=n,this.slowdownFactor=o,this.lastPoke=0,this.recentGaps=[],this.wrapped=()=>{this.timeout=null,this.func()}}poke(){const e=Date.now();if(this.lastPoke){const t=e-this.lastPoke;if(t<10)return;for(t<4e3&&this.recentGaps.push(t);this.recentGaps.length>10;)this.recentGaps.shift()}this.lastPoke=e}trigger(){let e=this.maxDelay;if(this.lastPoke){const t=this.recentGaps.slice();t.sort();const n=t[t.length>>1]||1;e=Math.min(Math.max(n*this.slowdownFactor|0,this.minDelay),this.maxDelay);e-=Date.now()-this.lastPoke,e<0&&(e=0),this.lastPoke=null}clearTimeout(this.timeout),this.timeout=setTimeout(this.wrapped,e)}},n.throttle=function(e,t,n){let o;return function(){let r=this,i=arguments,s=function(){o=null,n||e.apply(r,i)},a=n&&!o;o||(o=setTimeout(s,t)),a&&e.apply(r,i)}},n.randomPermute=function(e){for(let t=0;t<e.length;++t){let n=f()%e.length,o=e[t];e[t]=e[n],e[n]=o}},n.randomPick=function(e){return 0==e.length?null:e[f()%e.length]},n.timeSince=function(e){let t=(Date.now()-(e*=1e3))/1e3;return isNaN(t)?"":t<-30?(t=-t,t<60?n.lf("in a few seconds"):t<120?n.lf("in a minute"):t<3600?n.lf("in {0} minute{0:s}",Math.floor(t/60)):t<7200?n.lf("in an hour"):t<86400?n.lf("in {0} hour{0:s}",Math.floor(t/60/60)):t<2592e3?n.lf("in {0} day{0:s}",Math.floor(t/60/60/24)):t<31536e3?n.lf("in {0} month{0:s}",Math.floor(t/60/60/24/30)):n.lf("in {0} year{0:s}",Math.floor(t/60/60/24/365))):t<0?n.lf("now"):t<10?n.lf("a few seconds ago"):t<60?n.lf("{0} second{0:s} ago",Math.floor(t)):t<120?n.lf("a minute ago"):t<3600?n.lf("{0} minute{0:s} ago",Math.floor(t/60)):t<7200?n.lf("an hour ago"):t<86400?n.lf("{0} hour{0:s} ago",Math.floor(t/60/60)):t<2592e3?n.lf("{0} day{0:s} ago",Math.floor(t/60/60/24)):t<31536e3?n.lf("{0} month{0:s} ago",Math.floor(t/60/60/24/30)):n.lf("{0} year{0:s} ago",Math.floor(t/60/60/24/365))},n.unicodeToChar=function(e){return e.replace(/\\u([\d\w]{4})/gi,(function(e,t){return String.fromCharCode(parseInt(t,16))}))},n.escapeForRegex=function(e){return null==e?void 0:e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},n.stripUrlProtocol=function(e){return null==e?void 0:e.replace(/.*?:\/\//g,"")},n.normalizePath=p,n.pathJoin=function(e,t){if(p(e),p(t),e||t)return e?t?("/"!==e.charAt(e.length-1)&&(e+="/"),"/"==t.charAt(0)&&(t=t.substring(1)),e+t):e:t},n.isNodeJS="undefined"==typeof window,n.requestAsync=d,n.httpGetTextAsync=function(e){return d({url:e}).then((e=>e.text))},n.httpGetJsonAsync=function(e){return d({url:e}).then((e=>e.json))},n.httpPostJsonAsync=function(e,t){return d({url:e,data:t||{}}).then((e=>e.json))},n.stringToUint8Array=function(e){let t=e.length,n=new Uint8Array(t);for(let o=0;o<t;++o)n[o]=255&e.charCodeAt(o);return n},n.uint8ArrayToString=function(e){let t=e.length,n="";for(let o=0;o<t;++o)n+=String.fromCharCode(e[o]);return n},n.fromUTF8=function(e){if(!e)return"";let t="";for(let n=0;n<e.length;++n){let o=255&e.charCodeAt(n);t+=37==o||o>127?"%"+o.toString(16):e.charAt(n)}return decodeURIComponent(t)},n.toUTF8=g,n.toHex=function(e){let t="";for(let n=0;n<e.length;++n)t+=("0"+e[n].toString(16)).slice(-2);return t},n.fromHex=function(e){let t=new Uint8Array(e.length>>1);for(let n=0;n<e.length;n+=2)t[n>>1]=parseInt(e.slice(n,n+2),16);return t};n.PromiseQueue=class{constructor(){this.promises={}}enqueue(e,t){return new Promise(((n,o)=>{let r=this.promises[e];r||(r=this.promises[e]=[]),r.push((()=>t().finally((()=>{r.shift(),0==r.length?delete this.promises[e]:r[0]()})).then(n,o))),1==r.length&&r[0]()}))}};function h(){return Date.now()}function f(){let e=new Uint8Array(4);return n.getRandomBuf(e),new Uint32Array(e.buffer)[0]}function _(e,t,n,o){function r(r){pxt.debug(`downloading translations for ${e} ${t} ${n||""}`);let i=pxt.BrowserUtils.isLocalHost()||pxt.webConfig.isStatic?"https://makecode.com/api/":"",s=`${i}translations?lang=${encodeURIComponent(e)}&filename=${encodeURIComponent(t)}&approved=true`;n&&(s+="&branch="+encodeURIComponent(n));const a={};return o&&!pxt.Cloud.useCdnApi()&&(a["If-None-Match"]=o),(i?d:pxt.Cloud.apiRequestWithCdnAsync)({url:s,headers:a}).then((i=>304==i.statusCode||200==i.statusCode?(o=i.headers.etag||"",pxt.BrowserUtils.translationDbAsync().then((s=>s.setAsync(e,t,n,o,i.json||r))).then((()=>i.json||r))):i.json),(e=>{console.log(`failed to load translations from ${s}`)}))}return pxt.BrowserUtils.translationDbAsync().then((o=>o.getAsync(e,t,n))).then((e=>{if(e){o=e.etag;return(Date.now()-e.time)/1e3>300&&r(e.strings),e.strings}return r()}))}function m(e){let[t,o]=n.normalizeLanguageCode(e),r=pxt.appTarget.appTheme;if(r&&r.availableLocales){if(r.availableLocales.indexOf(t)>-1)return!0;if(o&&r.availableLocales.indexOf(o)>-1)return!0}return!1}let y;function k(e,o,r,i,s,a,l){if(l=l||y.Editor,"en-US"===(r=n.normalizeLanguageCode(r)[0])||"en"===r)return Promise.resolve(void 0);let c,u,p=`${r}/${a}/${l}`;if(n.translationsCache()[p])return Promise.resolve(n.translationsCache()[p]);switch(l){case y.Editor:c=[{branch:i,staticName:"strings.json",path:"strings.json"},{branch:s,staticName:"target-strings.json",path:e+"/target-strings.json"}];break;case y.Sim:c=[{branch:s,staticName:"sim-strings.json",path:e+"/sim-strings.json"}];break;case y.Apis:c=[{branch:s,staticName:"bundled-strings.json",path:e+"/bundled-strings.json"}];break;case y.SkillMap:c=[{branch:s,staticName:"skillmap-strings.json",path:"/skillmap-strings.json"}]}function d(e){e&&(u||(u={}),Object.keys(e).filter((t=>!!e[t])).forEach((t=>u[t]=e[t])))}if(a){let a=0;return t.U.promiseMapAllSeries(c,(e=>_(r,e.path,e.branch).then(d,(e=>{console.log(e.message),++a})))).then((()=>(a&&(n.translationsCache()[p]=u),a!==c.length&&u?Promise.resolve(u):(pxt.tickEvent("translations.livetranslationsfailed"),k(e,o,r,i,s,!1,l)))))}return Promise.all(c.map((e=>n.httpGetJsonAsync(`${o}locales/${r}/${e.staticName}`).catch((e=>{}))))).then((e=>{let t={};e.forEach((e=>pxt.Util.jsonMergeFrom(t,e))),Object.keys(t).length&&(u=t,n.translationsCache()[p]=u)}),(e=>{console.error("failed to load localizations")})).then((()=>u))}function b(e){const t={};for(const n of Object.keys(e))t[n]=v(e[n]);return t}function v(e){var t;return{attributes:Object.assign({},e.attributes),parameters:null===(t=e.parameters)||void 0===t?void 0:t.map(T),extendsTypes:e.extendsTypes?[...e.extendsTypes]:void 0,pkgs:e.pkgs?[...e.pkgs]:void 0,combinedProperties:e.combinedProperties?[...e.combinedProperties]:void 0,name:e.name,namespace:e.namespace,fileName:e.fileName,kind:e.kind,retType:e.retType,isInstance:e.isInstance,isContextual:e.isContextual,qName:e.qName,pkg:e.pkg,snippet:e.snippet,snippetName:e.snippetName,snippetWithMarkers:e.snippetWithMarkers,pySnippet:e.pySnippet,pySnippetName:e.pySnippetName,pySnippetWithMarkers:e.pySnippetWithMarkers,blockFields:e.blockFields,isReadOnly:e.isReadOnly,pyName:e.pyName,pyQName:e.pyQName,snippetAddsDefinitions:e.snippetAddsDefinitions}}function T(e){var n,o;return{name:e.name,description:e.description,type:e.type,pyTypeString:e.pyTypeString,initializer:e.initializer,default:e.default,properties:null===(n=e.properties)||void 0===n?void 0:n.map(E),handlerParameters:null===(o=e.handlerParameters)||void 0===o?void 0:o.map(E),options:e.options?t.U.clone(e.options):void 0,isEnum:e.isEnum}}function E(e){return{name:e.name,type:e.type}}n.PromiseBuffer=class{constructor(){this.waiting=[],this.available=[]}drain(){for(let e of this.waiting)e(new Error("Promise Buffer Reset"));this.waiting=[],this.available=[]}pushError(e){this.push(e)}push(e){let t=this.waiting.shift();t?t(e):this.available.push(e)}shiftAsync(e=0){if(this.available.length>0){let e=this.available.shift();return e instanceof Error?Promise.reject(e):Promise.resolve(e)}return new Promise(((n,o)=>{let r=e=>{e instanceof Error?o(e):n(e)};this.waiting.push(r),e>0&&t.U.delay(e).then((()=>{let e=this.waiting.indexOf(r);e>=0&&(this.waiting.splice(e,1),o(new Error("Timeout")))}))}))}},n.now=h,n.nowSeconds=function(){return Math.round(h()/1e3)},n.timeout=function(e){return new Promise((t=>setTimeout((()=>t()),e)))},n.cpuUs=()=>{const e="undefined"!=typeof performance?performance.now.bind(performance)||performance.moznow.bind(performance)||performance.msNow.bind(performance)||performance.webkitNow.bind(performance)||performance.oNow.bind(performance):Date.now;return n.cpuUs=()=>1e3*e(),n.cpuUs()},n.getMime=function(e){let t=/\.([a-zA-Z0-9]+)$/.exec(e);if(!t)return"application/octet-stream";switch(t[1].toLowerCase()){case"txt":return"text/plain";case"html":case"htm":return"text/html";case"css":return"text/css";case"js":return"application/javascript";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"ico":return"image/x-icon";case"manifest":return"text/cache-manifest";case"webmanifest":return"application/manifest+json";case"json":return"application/json";case"svg":return"image/svg+xml";case"eot":return"application/vnd.ms-fontobject";case"ttf":return"font/ttf";case"woff":return"application/font-woff";case"woff2":return"application/font-woff2";case"md":return"text/markdown";case"xml":return"application/xml";case"m4a":return"audio/m4a";case"mp3":return"audio/mp3";default:return"application/octet-stream"}},n.randomUint32=f,n.guidGen=function(){function e(){return(65536|f()).toString(16).slice(-4)}return e()+e()+"-"+e()+"-4"+e().slice(-3)+"-"+e()+"-"+e()+e()+e()},n.downloadLiveTranslationsAsync=_,n.pxtLangCookieId="PXT_LANG",n.langCookieExpirationDays=30,n.allLanguages={af:{englishName:"Afrikaans",localizedName:"Afrikaans"},ar:{englishName:"Arabic",localizedName:""},az:{englishName:"Azerbaijani",localizedName:" "},bg:{englishName:"Bulgarian",localizedName:""},bn:{englishName:"Bengali",localizedName:""},ca:{englishName:"Catalan",localizedName:"Catal"},cs:{englishName:"Czech",localizedName:"etina"},da:{englishName:"Danish",localizedName:"Dansk"},de:{englishName:"German",localizedName:"Deutsch"},el:{englishName:"Greek",localizedName:""},en:{englishName:"English",localizedName:"English"},"es-ES":{englishName:"Spanish (Spain)",localizedName:"Espaol (Espaa)"},"es-MX":{englishName:"Spanish (Mexico)",localizedName:"Espaol (Mxico)"},et:{englishName:"Estonian",localizedName:"Eesti"},eu:{englishName:"Basque",localizedName:"Euskara"},fa:{englishName:"Persian",localizedName:""},fi:{englishName:"Finnish",localizedName:"Suomi"},fr:{englishName:"French",localizedName:"Franais"},"fr-CA":{englishName:"French (Canada)",localizedName:"Franais (Canada)"},"gu-IN":{englishName:"Gujarati",localizedName:""},he:{englishName:"Hebrew",localizedName:""},hr:{englishName:"Croatian",localizedName:"Hrvatski"},hu:{englishName:"Hungarian",localizedName:"Magyar"},"hy-AM":{englishName:"Armenian (Armenia)",localizedName:" ()"},id:{englishName:"Indonesian",localizedName:"Bahasa Indonesia"},is:{englishName:"Icelandic",localizedName:"slenska"},it:{englishName:"Italian",localizedName:"Italiano"},ja:{englishName:"Japanese",localizedName:""},kab:{englishName:"Kabyle",localizedName:""},ko:{englishName:"Korean",localizedName:""},kmr:{englishName:"Kurmanji (Kurdish)",localizedName:""},kn:{englishName:"Kannada",localizedName:""},lt:{englishName:"Lithuanian",localizedName:"Lietuvi"},lv:{englishName:"Latvian",localizedName:"Latvieu"},"ml-IN":{englishName:"Malayalam",localizedName:""},mr:{englishName:"Marathi",localizedName:""},nl:{englishName:"Dutch",localizedName:"Nederlands"},no:{englishName:"Norwegian",localizedName:"Norsk"},nb:{englishName:"Norwegian Bokmal",localizedName:"Norsk bokml"},"nn-NO":{englishName:"Norwegian Nynorsk",localizedName:"Norsk nynorsk"},"pa-IN":{englishName:"Punjabi",localizedName:""},pl:{englishName:"Polish",localizedName:"Polski"},"pt-BR":{englishName:"Portuguese (Brazil)",localizedName:"Portugus (Brasil)"},"pt-PT":{englishName:"Portuguese (Portugal)",localizedName:"Portugus (Portugal)"},ro:{englishName:"Romanian",localizedName:"Romn"},ru:{englishName:"Russian",localizedName:""},"si-LK":{englishName:"Sinhala (Sri Lanka)",localizedName:" ( )"},sk:{englishName:"Slovak",localizedName:"Slovenina"},sl:{englishName:"Slovenian",localizedName:"Slovenski"},sr:{englishName:"Serbian",localizedName:"Srpski"},su:{englishName:"Sundanese",localizedName:" "},"sv-SE":{englishName:"Swedish (Sweden)",localizedName:"Svenska (Sverige)"},ta:{englishName:"Tamil",localizedName:""},te:{englishName:"Telugu",localizedName:""},th:{englishName:"Thai",localizedName:""},tl:{englishName:"Tagalog",localizedName:" "},tr:{englishName:"Turkish",localizedName:"Trke"},uk:{englishName:"Ukrainian",localizedName:""},"ur-IN":{englishName:"Urdu (India)",localizedName:" ()"},"ur-PK":{englishName:"Urdu (Pakistan)",localizedName:" ()"},vi:{englishName:"Vietnamese",localizedName:"Ting vit"},"zh-CN":{englishName:"Chinese (Simplified)",localizedName:""},"zh-TW":{englishName:"Chinese (Traditional)",localizedName:""}},n.isLocaleEnabled=m,n.updateLocalizationAsync=function(t){const{targetId:o,baseUrl:r,pxtBranch:i,targetBranch:s,force:a}=t;let{code:l}=t;if(l=n.normalizeLanguageCode(l)[0],"en-US"===l&&(l="en"),l===n.userLanguage()||!m(l)&&!a)return pxt.debug(`loc: ${l} (using built-in)`),Promise.resolve();pxt.debug(`loc: ${l}`);const c=pxt.Util.liveLocalizationEnabled();return k(o,r,l,i,s,c,e.pxtc.Util.TranslationsKind.Editor).then((t=>(t&&(n.setUserLanguage(l),n.setLocalizedStrings(t)),e.pxtc.Util.downloadTranslationsAsync(o,r,l,i,s,c,e.pxtc.Util.TranslationsKind.Apis).then((t=>{t&&(e.pxtc.apiLocalizationStrings=t)})))))},function(e){e[e.Editor=0]="Editor",e[e.Sim=1]="Sim",e[e.Apis=2]="Apis",e[e.SkillMap=3]="SkillMap"}(y=n.TranslationsKind||(n.TranslationsKind={})),n.downloadTranslationsAsync=k,n.capitalize=function(e){return e?e[0].toLocaleUpperCase()+e.slice(1):e},n.uncapitalize=function(e){return(e||"").split(/(?=[A-Z])/g).join(" ").toLowerCase()},n.range=function(e){let t=[];for(let n=0;n<e;++n)t.push(n);return t},n.multipartPostAsync=function(e,t={},o=null,r=null){const i="--------------------------0461489f461126c5";let s="";Object.keys(t).forEach((e=>function(e,t){s+=i+"\r\n",s+='Content-Disposition: form-data; name="'+e+'"\r\n\r\n',s+=t+"\r\n"}(e,t[e]))),o&&function(e,t){const n=e.split("/").reverse()[0];s+=i+"\r\n",s+='Content-Disposition: form-data; name="files['+e+']"; filename="'+n+'"\r\n',s+="\r\n",s+=t+"\r\n"}(o,r),s+=i+"--\r\n";const a={url:e,method:"POST",headers:{"Content-Type":"multipart/form-data; boundary="+i.slice(2)},data:s};return n.httpRequestCoreAsync(a)},n.toDataUri=function(e,n){return/^https?:/i.test(e)||/^data:/i.test(e)?e:(n||/^<svg/i.test(e)&&(n="image/svg+xml"),/xml|svg/.test(n)?`data:${n},${encodeURIComponent(e)}`:`data:${n||"image/png"};base64,${t.encodeBase64(g(e))}`)},n.imageMagic=1496611453,n.imageHeaderSize=36,n.encodeBlobAsync=function(e,t){const o=n.imageHeaderSize+t.length,r=3*(e.width*e.height-1);let i=1;for(;i<4&&!(r*i>=8*o);)i++;let s=r*i>>3,a=o-s,l=0,c=e.width*e.height*4;if(a>0){const t=3*e.width;l=Math.ceil(a/t);const n=document.createElement("canvas");n.width=e.width,n.height=e.height+l;n.getContext("2d").drawImage(e,0,0),e=n}let u=pxt.HF2.encodeU32LE([n.imageMagic,t.length,l,0,0,0,0,0,0]);function p(e,t,n,o){let r=0,i=0,s=o[i++];const a=(1<<n)-1;let l=!0;for(;l;){let c=s>>r&a,u=8-r;if(u<=n){if(i>=o.length){if(0==u)break;l=!1}s=o[i++],c|=s<<u&a,r=n-u}else r+=n;e[t]=255&(e[t]&~a|c),3==(3&++t)&&(e[t++]=255)}return t}pxt.Util.assert(u.length==n.imageHeaderSize);const d=e.getContext("2d"),g=d.getImageData(0,0,e.width,e.height);p(g.data,0,1,[i]);let h=4;if(h=p(g.data,h,i,u),pxt.Util.assert(0==(3&h)),0==l)h=p(g.data,h,i,t);else{let e=s-u.length;h=p(g.data,h,i,t.slice(0,e)),h=p(g.data,c,8,t.slice(e))}for(h|=3;h<g.data.length;)g.data[h]=255,h+=4;return d.putImageData(g,0,0),e},n.decodeBlobAsync=function(e){return pxt.BrowserUtils.loadCanvasAsync(e).then((e=>{const t=e.getContext("2d").getImageData(0,0,e.width,e.height).data,o=1&t[0]|(1&t[1])<<1|(1&t[2])<<2;if(o>5||0==o)return Promise.reject(new Error(n.lf("Invalid encoded PNG format")));function r(e,n,o){let r=0,i=0,s=0;const a=(1<<n)-1;for(;i<o.length;)s|=(t[e++]&a)<<r,3==(3&e)&&e++,r+=n,r>=8&&(o[i++]=255&s,s>>=8,r-=8);return e}const i=new Uint8Array(pxt.Util.imageHeaderSize);let s=r(4,o,i);const a=pxt.HF2.decodeU32LE(i);if(a[0]!=pxt.Util.imageMagic)return Promise.reject(new Error(n.lf("Invalid magic in encoded PNG")));const l=new Uint8Array(a[1]),c=a[2];if(c>0){const t=(e.height-c)*e.width,n=new Uint8Array((3*(t-1)*o>>3)-pxt.Util.imageHeaderSize);r(s,o,n),l.set(n);const i=new Uint8Array(l.length-n.length);r(4*t,8,i),l.set(i,n.length)}else r(s,o,l);return l}))},n.parseQueryString=function(e){let t={};return e.replace(/\+/g," ").replace(/([^#?&=]+)=([^#?&=]*)/g,((e,n,o)=>(t[decodeURIComponent(n)]=decodeURIComponent(o),""))),t},n.stringifyQueryString=function(e,t){for(let n of Object.keys(t))e.indexOf("?")>=0?e+="&":e+="?",e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]);return e},n.cloneTargetBundle=function(e){const t=(e=Object.assign({},e)).apiInfo;delete e.apiInfo;const o=e.bundleddirs;delete e.bundleddirs;const r=e.bundledpkgs;delete e.bundledpkgs;const i=e.tutorialInfo;delete e.tutorialInfo;const s=n.clone(e);if(t){s.apiInfo={};for(const e of Object.keys(t)){const n=t[e].apis;s.apiInfo[e]={sha:t[e].sha,apis:{jres:Object.assign({},n.jres),byQName:b(n.byQName)}}}}if(o&&(s.bundleddirs=[...o]),r){s.bundledpkgs={};for(const e of Object.keys(r))s.bundledpkgs[e]=Object.assign({},r[e])}if(i){s.tutorialInfo={};for(const e of Object.keys(i)){const t=i[e];s.tutorialInfo[e]={hash:t.hash,usedBlocks:Object.assign({},t.usedBlocks),snippetBlocks:Object.assign({},t.snippetBlocks)}}}return s},n.cloneApis=b,n.cloneSymbolInfo=v,n.toUTF8Array=function(e){return(new TextEncoder).encode(e)},n.fromUTF8Array=function(e){return(new TextDecoder).decode(e)}}(t.Util||(t.Util={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){!function(t){e.Util.httpRequestCoreAsync=function(t){return new Promise(((n,o)=>{let r,i=!1,s=e.Util.clone(t.headers)||{};r=new XMLHttpRequest,t.responseArrayBuffer&&(r.responseType="arraybuffer"),t.withCredentials&&(r.withCredentials=!0),r.onreadystatechange=()=>{if(!i&&4==r.readyState){i=!0;let e={statusCode:r.status,headers:{},buffer:r.responseBody||r.response,text:t.responseArrayBuffer?void 0:r.responseText};r.getAllResponseHeaders().split(/\r?\n/).forEach((t=>{let n=/^\s*([^:]+): (.*)/.exec(t);n&&(e.headers[n[1].toLowerCase()]=n[2])})),n(e)}};let a,l=t.data,c=t.method||(null==l?"GET":"POST");null==l?a=null:l instanceof Uint8Array?a=l:"object"==typeof l?(a=JSON.stringify(l),s["content-type"]="application/json; charset=utf8"):"string"==typeof l?a=l:e.Util.oops("bad data"),r.open(c,t.url),Object.keys(s).forEach((e=>{r.setRequestHeader(e,s[e])})),null==a?r.send():r.send(a)}))},e.Util.sha256=s,e.Util.getRandomBuf=e=>{if(window.crypto)window.crypto.getRandomValues(e);else for(let t=0;t<e.length;++t)e[t]=Math.floor(255*Math.random())};const n=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(e,t){return e>>>t|e<<32-t}function r(t,r){e.Util.assert(8==t.length),e.Util.assert(64==r.length);for(let e=16;e<64;++e){let t=o(r[e-15],7)^o(r[e-15],18)^r[e-15]>>>3,n=o(r[e-2],17)^o(r[e-2],19)^r[e-2]>>>10;r[e]=r[e-16]+t+r[e-7]+n|0}let i=t[0],s=t[1],a=t[2],l=t[3],c=t[4],u=t[5],p=t[6],d=t[7];for(let e=0;e<64;++e){let t=d+(o(c,6)^o(c,11)^o(c,25))+(c&u^~c&p)+n[e]+r[e]|0,g=i&s^i&a^s&a;d=p,p=u,u=c,c=l+t|0,l=a,a=s,s=i,i=t+((o(i,2)^o(i,13)^o(i,22))+g|0)|0}t[0]+=i,t[1]+=s,t[2]+=a,t[3]+=l,t[4]+=c,t[5]+=u,t[6]+=p,t[7]+=d}function i(e){let t=new Uint32Array(8);t[0]=1779033703,t[1]=3144134277,t[2]=1013904242,t[3]=2773480762,t[4]=1359893119,t[5]=2600822924,t[6]=528734635,t[7]=1541459225;let n=new Uint32Array(64);function o(e){let o=e.length-63;for(let i=0;i<o;i+=64){for(let t=0;t<16;t++){let o=(t<<2)+i;n[t]=e[o]<<24|e[o+1]<<16|e[o+2]<<8|e[o+3]}r(t,n)}}o(e);let i=64-(e.length+9)%64;64==i&&(i=0);let s=e.length-e.length%64,a=new Uint8Array(e.length-s+1+i+8),l=0;for(;s<e.length;)a[l++]=e[s++];for(a[l++]=128;i-- >0;)a[l++]=0;let c=8*e.length;for(l=a.length;c>0;)a[--l]=255&c,c>>=8;o(a);let u="";for(let e=0;e<t.length;++e)u+=("000000000"+t[e].toString(16)).slice(-8);return u.toLowerCase()}function s(t){pxt.perf.measureStart("sha256buffer");const n=i(e.Util.toUTF8Array(t));return pxt.perf.measureEnd("sha256buffer"),n}t.sha256buffer=i,t.sha256string=s}(e.BrowserImpl||(e.BrowserImpl={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){!function(t){const n={add:(e,t,n)=>{if("object"!=typeof e)throw new Error("jsonPatch: expected object type");if(t in e)throw new Error(`jsonPatch: object already contains key ${t}`);e[t]=n},replace:(e,t,n)=>{if("object"!=typeof e)throw new Error("jsonPatch: expected object type");e[t]=n},remove:(e,t)=>{if("object"!=typeof e)throw new Error("jsonPatch: expected object type");delete e[t]}},o={add:(e,t,n)=>{if(!Array.isArray(e))throw new Error("jsonPatch: expected array type");if(t in e)throw new Error(`jsonPatch: key ${t} already exists in array`);"number"!=typeof t||t!==Math.floor(t)?e[t]=n:e.splice(t,0,n)},replace:(e,t,n)=>{if(!Array.isArray(e))throw new Error("jsonPatch: expected array type");"number"!=typeof t||t!==Math.floor(t)?e[t]=n:e.splice(t,1,n)},remove:(e,t)=>{if(!Array.isArray(e))throw new Error("jsonPatch: expected array type");"number"!=typeof t||t!==Math.floor(t)?delete e[t]:e.splice(t,1)}};t.diff=function(e,t){const n={add:[],remove:[],replace:[]};function o(e,t){if(!Array.isArray(e))return t;const n=Number.parseFloat(t);return Number.isNaN(n)?t:n}return function e(t,r,i){if(!Object.is(t,r)){r=r||{},t=t||{};for(let e of Object.keys(t))if(!(e in r)){const r=o(t,e);n.remove.push({op:"remove",path:i.concat(r)})}for(const s of Object.keys(r)){const a=t[s],l=r[s],c=o(r,s);c in t?"object"!=typeof a&&"object"!=typeof l&&a!==l||typeof a!=typeof l||Array.isArray(a)!==Array.isArray(l)?n.replace.push({op:"replace",path:i.concat(c),value:l}):e(a,l,i.concat(c)):void 0!==r[c]&&(i.length&&n.add.push({op:"add",path:i,value:Array.isArray(r)?[]:{}}),n.add.push({op:"add",path:i.concat(c),value:l}))}}}(e,t,[]),[...n.remove.reverse(),...n.replace,...n.add.sort(((e,t)=>e.path.length-t.path.length))]},t.patchInPlace=function(e,t){if(!e||"object"!=typeof e)throw new Error("jsonPatch: Must be an object or an array.");for(const r of t){const t=r.path.slice(),i=t.pop();if(null==i)throw new Error("jsonPatch: missing last key");let s=e,a=t.shift();for(;null!=a;){if(!(a in s))throw new Error(`jsonPatch: missing parent element ${a}`);s=s[a],a=t.shift()}if(Array.isArray(s)&&"number"!=typeof i)throw new Error("jsonPatch: expected numeric index for array object");const l=Array.isArray(s)?o:n;"remove"===r.op?l.remove(s,i):"add"!==r.op||i in s?"replace"===r.op&&l.replace(s,i,r.value):l.add(s,i,r.value)}},t.opsAreEqual=function(t,n){return t.op===n.op&&e.U.arrayEquals(t.path,n.path)}}(e.jsonPatch||(e.jsonPatch={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){!function(t){!function(t){function n(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){const o=Array.isArray(e),r=Array.isArray(t);if(o&&r){if(e.length!==t.length)return!1;for(let o=0;o<e.length;++o)if(!n(e[o],t[o]))return!1;return!0}if(o!==r)return!1;const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;for(const o of i){if(!t.hasOwnProperty(o))return!1;if(!n(e[o],t[o]))return!1}return!0}return e!=e&&t!=t}t.diffTests=function(){const t=[{comment:"test 1",obja:{a:4,b:5},objb:{a:3,b:5},expected:[{op:"replace",path:["a"],value:3}]},{comment:"test 2",obja:{a:3,b:5},objb:{a:4,c:5},expected:[{op:"remove",path:["b"]},{op:"replace",path:["a"],value:4},{op:"add",path:["c"],value:5}]},{comment:"test 3",obja:{a:4,b:[1,2,3]},objb:{a:3,b:[1,2,4]},expected:[{op:"replace",path:["a"],value:3},{op:"replace",path:["b",2],value:4}]},{comment:"test 4",obja:{a:3,b:[1,2,4]},objb:{a:3,b:[1,2,4,5]},expected:[{op:"add",path:["b"],value:[]},{op:"add",path:["b",3],value:5}]},{comment:"test 5",obja:{a:4,b:{c:3}},objb:{a:4,b:{c:4}},expected:[{op:"replace",path:["b","c"],value:4}]},{comment:"test 6",obja:{a:4,b:{c:4}},objb:{a:5,b:{d:4}},expected:[{op:"remove",path:["b","c"]},{op:"replace",path:["a"],value:5},{op:"add",path:["b"],value:{}},{op:"add",path:["b","d"],value:4}]},{comment:"test 7",obja:{a:4,b:[2,"foo"]},objb:{a:4,b:[2,"foo",["this","that"]]},expected:[{op:"add",path:["b"],value:[]},{op:"add",path:["b",2],value:["this","that"]}]}];for(const o of t){console.log(o.comment);const t=e.pxtc.jsonPatch.diff(o.obja,o.objb);n(t,o.expected)?console.log("succeeded"):(console.error("FAILED"),console.log("got",t),console.log("exp",o.expected))}},t.patchTests=function(){const t=[{comment:"test 1",obj:{a:"foo",b:[4,11]},patches:[{op:"remove",path:["b"]},{op:"replace",path:["a"],value:4},{op:"add",path:["c"],value:5}],expected:{a:4,c:5}},{comment:"test 2",obj:{a:4,b:[1,2,3]},patches:[{op:"replace",path:["a"],value:3},{op:"replace",path:["b",2],value:4},{op:"add",path:["b",3],value:9}],expected:{a:3,b:[1,2,4,9]}},{comment:"test 3",obj:{a:4,b:{c:3}},patches:[{op:"replace",path:["a"],value:5},{op:"remove",path:["b","c"]},{op:"add",path:["b","d"],value:4}],expected:{a:5,b:{d:4}}},{comment:"test 4",obj:{a:4},patches:[{op:"add",path:["b"],value:[]},{op:"add",path:["b",0],value:"foo"},{op:"add",path:["b",1],value:"bar"}],expected:{a:4,b:["foo","bar"]},validate:e=>e.b&&e.b.forEach}];for(const o of t){console.log(o.comment),e.pxtc.jsonPatch.patchInPlace(o.obj,o.patches);!n(o.obj,o.expected)||!o.validate||o.validate(o.obj)?console.log("succeeded"):o.expected&&(console.error("FAILED"),console.log("got",o.obj),console.log("exp",o.expected))}}}(t.tests||(t.tests={}))}(t.jsonPatch||(t.jsonPatch={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){e.perf||(e.perf={})}(pxt||(pxt={})),pxt.perf.report||(pxt.perf.report=()=>{}),pxt.perf.recordMilestone||(pxt.perf.recordMilestone=()=>{}),pxt.perf.measureStart||(pxt.perf.measureStart=()=>{}),pxt.perf.measureEnd||(pxt.perf.measureEnd=()=>{}),function(e){let t;e.U=pxtc.Util,e.Util=pxtc.Util;let n,o,r,i={};function s(n,o){/^csv-/.test(n)?e.setAppTargetVariant(n.replace(/^csv-*/,"")):e.appTarget&&(i[n]=o,e.U.jsonCopyFrom(e.appTarget.compile.switches,i),e.U.jsonCopyFrom(t.compile.switches,i))}function a(){let t=e.appTarget.compile;t||(t=e.appTarget.compile={isNative:!1,hasHex:!1,switches:{}}),t.hasHex&&(t.nativeType||(t.nativeType=pxtc.NATIVE_TYPE_THUMB)),t.switches||(t.switches={}),t.nativeType==pxtc.NATIVE_TYPE_VM&&(t.sourceMap=!0),e.U.jsonCopyFrom(t.switches,i),t.jsRefCounting=!1,t.useUF2||t.useELF||null!=t.noSourceInFlash||(t.noSourceInFlash=!0),void 0===t.utf8&&(t.utf8=!0),e.appTarget.appTheme||(e.appTarget.appTheme={}),e.appTarget.appTheme.embedUrl||(e.appTarget.appTheme.embedUrl=e.appTarget.appTheme.homeUrl);let n=e.appTarget.compileService;n&&n.yottaTarget&&!n.yottaBinary&&(n.yottaBinary="pxt-microbit-app-combined.hex");const o=e.appTarget.appTheme;o&&Object.keys(o).filter((e=>/(logo|hero)$/i.test(e)&&/^@cdnUrl@/.test(o[e]))).forEach((t=>o[t]=e.BrowserUtils.patchCdn(o[t])));const r=e.appTarget.simulator;if(r&&r.boardDefinition&&r.boardDefinition.visual){let t=r.boardDefinition.visual;t.image&&(t.image=e.BrowserUtils.patchCdn(t.image),t.outlineImage&&(t.outlineImage=e.BrowserUtils.patchCdn(t.outlineImage)))}if(Object.keys(e.appTarget.bundledpkgs).forEach((t=>{const n=e.appTarget.bundledpkgs[t],o=JSON.parse(n[e.CONFIG_NAME]);o.icon&&(o.icon=e.BrowserUtils.patchCdn(o.icon)),n[e.CONFIG_NAME]=e.Package.stringifyConfig(o)})),"undefined"!=typeof window){const t={"lockededitor=1":{appTheme:{lockedEditor:!0}},"hidemenu=1":{appTheme:{hideMenuBar:!0}}};e.appTarget.queryVariants&&e.Util.jsonCopyFrom(t,e.appTarget.queryVariants);const n=window.location.href;Object.keys(t).forEach((o=>{if(new RegExp(o,"i").exec(n)){let n=t[o];n&&e.U.jsonMergeFrom(e.appTarget,n)}}))}}function l(n=!1){e.perf.measureStart("reloadAppTargetVariant");const o=n?"":JSON.stringify(e.appTarget);if(e.appTarget=e.U.cloneTargetBundle(t),e.appTargetVariant){const t=e.appTarget.variants&&e.appTarget.variants[e.appTargetVariant];t?e.U.jsonMergeFrom(e.appTarget,t):e.U.userError(lf("Variant '{0}' not defined in pxtarget.json",e.appTargetVariant))}a(),!n&&e.onAppTargetChanged&&o!=JSON.stringify(e.appTarget)&&e.onAppTargetChanged(),e.perf.measureEnd("reloadAppTargetVariant")}function c(){return{relprefix:"/--",workerjs:"/worker.js",monacoworkerjs:"/monacoworker.js",gifworkerjs:"/gifjs/gif.worker.js",serviceworkerjs:"/serviceworker.js",typeScriptWorkerJs:"/tsworker.js",pxtVersion:"local",pxtRelId:"localRelId",pxtCdnUrl:"/cdn/",commitCdnUrl:"/cdn/",blobCdnUrl:"/blb/",cdnUrl:"/cdn/",targetUrl:"",targetVersion:"local",targetRelId:"",targetId:e.appTarget?e.appTarget.id:"",simUrl:"/sim/simulator.html",simserviceworkerUrl:"/simulatorserviceworker.js",simworkerconfigUrl:"/sim/workerConfig.js",partsUrl:"/sim/siminstructions.html"}}function u(){return r||(r=e.Cloud.downloadTargetConfigAsync().then((e=>e||{}),(e=>({})))),r}function p(t=null){return t||(t=e.appTarget.compile),t.nativeType==ts.pxtc.NATIVE_TYPE_VM?t.useESP?t.useUF2?ts.pxtc.BINARY_UF2:ts.pxtc.BINARY_ESP:ts.pxtc.BINARY_PXT64:t.useUF2&&!t.switches.rawELF?ts.pxtc.BINARY_UF2:t.useELF?ts.pxtc.BINARY_ELF:ts.pxtc.BINARY_HEX}e.setAppTarget=function(n){e.appTarget=n||{},a(),t=e.U.cloneTargetBundle(e.appTarget)},e.setBundledApiInfo=function(e){for(const t of Object.keys(e)){const n=e[t].apis.byQName;for(const e of Object.keys(n)){const t=n[e],o=e.lastIndexOf("."),r=t.pyQName,i=n[e]={kind:Math.abs(t.kind||7),qName:e,namespace:e.slice(0,o<0?0:o),name:e.slice(o+1),pyQName:r,pyName:r?r.slice(r.lastIndexOf(".")+1):void 0,fileName:"",attributes:t.attributes||{},retType:t.retType||"void",parameters:t.parameters?t.parameters.map((e=>({name:e.name,description:e.description||"",type:e.type||"number",initializer:e.initializer,default:e.default,options:e.options||{},isEnum:!!e.isEnum,handlerParameters:e.handlerParameters}))):null,extendsTypes:t.extendsTypes,snippet:t.kind&&t.kind<0?null:void 0,isInstance:!!t.isInstance,isReadOnly:!!t.isReadOnly},s=i.attributes;s.paramDefl||(s.paramDefl={}),s.callingConvention||(s.callingConvention=0),s.paramHelp||(s.paramHelp={}),s.jsDoc||(s.jsDoc=""),s._name=i.name.replace(/@.*/,"")}}n=e},e.getBundledApiInfo=function(){return n},e.savedAppTheme=function(){return t?t.appTheme:void 0},e.setCompileSwitch=s,e.setCompileSwitches=function(e){if(e)for(let t of e.split(/[\s,;:]+/))t&&("-"==t[0]?s(t.slice(1),!1):s(t,!0))},e.bundledSvg=function(t){if(!t)return;let n=o&&o[t];if(n)return n;if(!e.appTarget.simulator||!e.appTarget.simulator.dynamicBoardDefinition)return;o||(o={});const r=e.appTarget.bundledpkgs[t];if(!r)return;if(JSON.parse(r["pxt.json"]).core&&r["board.json"]){const n=JSON.parse(r["board.json"]);if(n&&n.visual&&n.visual.image){let i=n.visual.image;/^pkg:\/\//.test(i)&&(i=r[i.slice(6)]),o[t]=`data:image/svg+xml;base64,${ts.pxtc.encodeBase64(e.Util.toUTF8(i))}`}}return o[t]},e.reloadAppTargetVariant=l,e.setAppTargetVariant=function(t,n={}){e.debug(`app variant: ${t}`),(n.force||e.appTargetVariant!==t&&(e.appTargetVariant||t))&&(e.appTargetVariant=t,l(n.temporary))},e.setHwVariant=function(t,n){t=t.replace(/.*---/,""),/^[\w\-]+$/.test(t)?(e.hwVariant=t,e.hwName=n||t):(e.hwVariant=null,e.hwName=null),e.debug(`hwVariant: ${e.hwVariant} (${e.hwName})`)},e.hasHwVariants=function(){return!!e.appTarget.variants&&Object.keys(e.appTarget.bundledpkgs).some((e=>/^hw---/.test(e)))},e.getHwVariants=function(){return e.appTarget.variants?Object.keys(e.appTarget.bundledpkgs).filter((e=>/^hw---/.test(e))).map((t=>JSON.parse(e.appTarget.bundledpkgs[t][e.CONFIG_NAME]))).filter((t=>!!e.appTarget.appTheme.experimentalHw||!t.experimentalHw)):[]},e.options={},e.debug="undefined"!=typeof console&&console.debug?t=>{e.options.debug&&console.debug(t)}:()=>{},e.log="undefined"!=typeof console&&console.log?e=>{console.log(e)}:()=>{},e.reportException=function(e,t){if(console&&(console.error(e),t))try{console.log(t)}catch(e){}},e.reportError=function(t,n,o){if(console&&(console.error(`${t}: ${n}`),o))try{e.log(JSON.stringify(o,null,2))}catch(e){}},e.localWebConfig=c,e.getOnlineCdnUrl=function(){if(!e.webConfig)return null;let t=/^(https:\/\/[^\/]+)/.exec(e.webConfig.commitCdnUrl);return t?t[1]:null},e.setupWebConfig=function(t){t?e.webConfig=t:e.webConfig||(e.webConfig=c())},e.getEmbeddedScript=function(t){return e.U.lookup(e.appTarget.bundledpkgs||{},t)},e.targetConfigAsync=u,e.packagesConfigAsync=function(){return u().then((e=>e?e.packages:void 0))},e.CONFIG_NAME="pxt.json",e.SIMSTATE_JSON=".simstate.json",e.SERIAL_EDITOR_FILE="serial.txt",e.README_FILE="README.md",e.GITIGNORE_FILE=".gitignore",e.ASSETS_FILE="assets.json",e.CLOUD_ID="pxt/",e.BLOCKS_PROJECT_NAME="blocksprj",e.JAVASCRIPT_PROJECT_NAME="tsprj",e.PYTHON_PROJECT_NAME="pyprj",e.MAIN_BLOCKS="main.blocks",e.MAIN_TS="main.ts",e.MAIN_PY="main.py",e.DEFAULT_GROUP_NAME="other",e.TILEMAP_CODE="tilemap.g.ts",e.TILEMAP_JRES="tilemap.g.jres",e.IMAGES_CODE="images.g.ts",e.IMAGES_JRES="images.g.jres",e.TUTORIAL_CODE_START="_onCodeStart.ts",e.TUTORIAL_CODE_STOP="_onCodeStop.ts",e.TUTORIAL_INFO_FILE="tutorial-info-cache.json",e.TUTORIAL_CUSTOM_TS="tutorial.custom.ts",e.BREAKPOINT_TABLET=991,e.outputName=p,e.isOutputText=function(e=null){return p(e)==ts.pxtc.BINARY_HEX}}(pxt||(pxt={})),function(e){!function(t){const n="this";let o;function r(){if(o={device_while:{name:e.Util.lf("a loop that repeats while the condition is true"),tooltip:e.Util.lf("Run the same sequence of actions while the condition is met."),url:"/blocks/loops/while",category:"loops",block:{message0:e.Util.lf("while %1"),appendField:e.Util.lf("{id:while}do")}},pxt_controls_for:{name:e.Util.lf("a loop that repeats the number of times you say"),tooltip:e.Util.lf("Have the variable '{0}' take on the values from 0 to the end number, counting by 1, and do the specified blocks."),url:"/blocks/loops/for",category:"loops",block:{message0:e.Util.lf("for %1 from 0 to %2"),variable:e.Util.lf("{id:var}index"),appendField:e.Util.lf("{id:for}do")}},controls_simple_for:{name:e.Util.lf("a loop that repeats the number of times you say"),tooltip:e.Util.lf("Have the variable '{0}' take on the values from 0 to the end number, counting by 1, and do the specified blocks."),url:"/blocks/loops/for",category:"loops",block:{message0:e.Util.lf("for %1 from 0 to %2"),variable:e.Util.lf("{id:var}index"),appendField:e.Util.lf("{id:for}do")}},pxt_controls_for_of:{name:e.Util.lf("a loop that repeats for each value in an array"),tooltip:e.Util.lf("Have the variable '{0}' take the value of each item in the array one by one, and do the specified blocks."),url:"/blocks/loops/for-of",category:"loops",block:{message0:e.Util.lf("for element %1 of %2"),variable:e.Util.lf("{id:var}value"),appendField:e.Util.lf("{id:for_of}do")}},controls_for_of:{name:e.Util.lf("a loop that repeats for each value in an array"),tooltip:e.Util.lf("Have the variable '{0}' take the value of each item in the array one by one, and do the specified blocks."),url:"/blocks/loops/for-of",category:"loops",block:{message0:e.Util.lf("for element %1 of %2"),variable:e.Util.lf("{id:var}value"),appendField:e.Util.lf("{id:for_of}do")}},math_op2:{name:e.Util.lf("minimum or maximum of 2 numbers"),tooltip:{min:e.Util.lf("smaller value of 2 numbers"),max:e.Util.lf("larger value of 2 numbers")},url:"/blocks/math",operators:{op:["min","max"]},category:"math"},math_op3:{name:e.Util.lf("absolute number"),tooltip:e.Util.lf("absolute value of a number"),url:"/reference/math",category:"math",block:{message0:e.Util.lf("absolute of %1")}},math_number:{name:e.Util.lf("{id:block}number"),url:"/blocks/math/random",category:"math",tooltip:e.appTarget&&e.appTarget.compile?e.Util.lf("a decimal number"):e.Util.lf("an integer number")},math_integer:{name:e.Util.lf("{id:block}number"),url:"/blocks/math/random",category:"math",tooltip:e.Util.lf("an integer number")},math_whole_number:{name:e.Util.lf("{id:block}number"),url:"/blocks/math/random",category:"math",tooltip:e.Util.lf("a whole number")},math_number_minmax:{name:e.Util.lf("{id:block}number"),url:"/blocks/math/random",category:"math"},math_arithmetic:{name:e.Util.lf("arithmetic operation"),url:"/blocks/math",tooltip:{ADD:e.Util.lf("Return the sum of the two numbers."),MINUS:e.Util.lf("Return the difference of the two numbers."),MULTIPLY:e.Util.lf("Return the product of the two numbers."),DIVIDE:e.Util.lf("Return the quotient of the two numbers."),POWER:e.Util.lf("Return the first number raised to the power of the second number.")},operators:{OP:["ADD","MINUS","MULTIPLY","DIVIDE","POWER"]},category:"math",block:{MATH_ADDITION_SYMBOL:e.Util.lf("{id:op}+"),MATH_SUBTRACTION_SYMBOL:e.Util.lf("{id:op}-"),MATH_MULTIPLICATION_SYMBOL:e.Util.lf("{id:op}"),MATH_DIVISION_SYMBOL:e.Util.lf("{id:op}"),MATH_POWER_SYMBOL:e.Util.lf("{id:op}**")}},math_modulo:{name:e.Util.lf("division remainder"),tooltip:e.Util.lf("Return the remainder from dividing the two numbers."),url:"/blocks/math",category:"math",block:{MATH_MODULO_TITLE:e.Util.lf("remainder of %1  %2")}},math_js_op:{name:e.Util.lf("math function"),tooltip:{sqrt:e.Util.lf("Returns the square root of the argument"),sin:e.Util.lf("Returns the sine of the argument"),cos:e.Util.lf("Returns the cosine of the argument"),tan:e.Util.lf("Returns the tangent of the argument"),atan2:e.Util.lf("Returns the arctangent of the quotient of the two arguments"),idiv:e.Util.lf("Returns the integer portion of the division operation on the two arguments"),imul:e.Util.lf("Returns the integer portion of the multiplication operation on the two arguments")},url:"/blocks/math",operators:{OP:["sqrt","sin","cos","tan","atan2","idiv","imul"]},category:"math",block:{sqrt:e.Util.lf("{id:op}square root"),sin:e.Util.lf("{id:op}sin"),cos:e.Util.lf("{id:op}cos"),tan:e.Util.lf("{id:op}tan"),atan2:e.Util.lf("{id:op}atan2"),idiv:e.Util.lf("{id:op}integer "),imul:e.Util.lf("{id:op}integer ")}},math_js_round:{name:e.Util.lf("rounding functions"),tooltip:{round:e.Util.lf("Increases the argument to the next higher whole number if its fractional part is more than one half"),ceil:e.Util.lf("Increases the argument to the next higher whole number"),floor:e.Util.lf("Decreases the argument to the next lower whole number"),trunc:e.Util.lf("Removes the fractional part of the argument")},url:"/blocks/math",operators:{OP:["round","ceil","floor","trunc"]},category:"math",block:{round:e.Util.lf("{id:op}round"),ceil:e.Util.lf("{id:op}ceiling"),floor:e.Util.lf("{id:op}floor"),trunc:e.Util.lf("{id:op}truncate")}},variables_change:{name:e.Util.lf("update the value of a number variable"),tooltip:e.Util.lf("Changes the value of the variable by this amount"),url:"/blocks/variables/change",category:"variables",block:{message0:e.Util.lf("change %1 by %2")}},controls_repeat_ext:{name:e.Util.lf("a loop that repeats and increments an index"),tooltip:e.Util.lf("Do some statements several times."),url:"/blocks/loops/repeat",category:"loops",block:{CONTROLS_REPEAT_TITLE:e.Util.lf("repeat %1 times"),CONTROLS_REPEAT_INPUT_DO:e.Util.lf("{id:repeat}do")}},variables_get:{name:e.Util.lf("get the value of a variable"),tooltip:e.Util.lf("Returns the value of this variable."),url:"/blocks/variables",category:"variables",block:{VARIABLES_GET_CREATE_SET:e.Util.lf("Create 'set %1'")}},variables_get_reporter:{name:e.Util.lf("get the value of a variable"),tooltip:e.Util.lf("Returns the value of this variable."),url:"/blocks/variables",category:"variables",block:{VARIABLES_GET_CREATE_SET:e.Util.lf("Create 'set %1'")}},variables_set:{name:e.Util.lf("assign the value of a variable"),tooltip:e.Util.lf("Sets this variable to be equal to the input."),url:"/blocks/variables/assign",category:"variables",block:{VARIABLES_SET:e.Util.lf("set %1 to %2")}},controls_if:{name:e.Util.lf("a conditional statement"),tooltip:{CONTROLS_IF_TOOLTIP_1:e.Util.lf("If a value is true, then do some statements."),CONTROLS_IF_TOOLTIP_2:e.Util.lf("If a value is true, then do the first block of statements. Otherwise, do the second block of statements."),CONTROLS_IF_TOOLTIP_3:e.Util.lf("If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements."),CONTROLS_IF_TOOLTIP_4:e.Util.lf("If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.")},tooltipSearch:"CONTROLS_IF_TOOLTIP_2",url:"/blocks/logic/if",category:"logic",block:{CONTROLS_IF_MSG_IF:e.Util.lf("{id:logic}if"),CONTROLS_IF_MSG_THEN:e.Util.lf("{id:logic}then"),CONTROLS_IF_MSG_ELSE:e.Util.lf("{id:logic}else"),CONTROLS_IF_MSG_ELSEIF:e.Util.lf("{id:logic}else if")}},lists_create_with:{name:e.Util.lf("create an array"),tooltip:e.Util.lf("Creates a new array."),url:"/reference/arrays/create",category:"arrays",blockTextSearch:"LISTS_CREATE_WITH_INPUT_WITH",block:{LISTS_CREATE_EMPTY_TITLE:e.Util.lf("empty array"),LISTS_CREATE_WITH_INPUT_WITH:e.Util.lf("array of"),LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:e.Util.lf("array"),LISTS_CREATE_WITH_ITEM_TITLE:e.Util.lf("value")}},lists_length:{name:e.Util.lf("array length"),tooltip:e.Util.lf("Returns the number of items in an array."),url:"/reference/arrays/length",category:"arrays",block:{LISTS_LENGTH_TITLE:e.Util.lf("length of array %1")}},lists_index_get:{name:e.Util.lf("get a value in an array"),tooltip:e.Util.lf("Returns the value at the given index in an array."),url:"/reference/arrays/get",category:"arrays",block:{message0:e.Util.lf("%1 get value at %2")}},lists_index_set:{name:e.Util.lf("set a value in an array"),tooltip:e.Util.lf("Sets the value at the given index in an array"),url:"/reference/arrays/set",category:"arrays",block:{message0:e.Util.lf("%1 set value at %2 to %3")}},logic_compare:{name:e.Util.lf("comparing two numbers"),tooltip:{LOGIC_COMPARE_TOOLTIP_EQ:e.Util.lf("Return true if both inputs equal each other."),LOGIC_COMPARE_TOOLTIP_NEQ:e.Util.lf("Return true if both inputs are not equal to each other."),LOGIC_COMPARE_TOOLTIP_LT:e.Util.lf("Return true if the first input is smaller than the second input."),LOGIC_COMPARE_TOOLTIP_LTE:e.Util.lf("Return true if the first input is smaller than or equal to the second input."),LOGIC_COMPARE_TOOLTIP_GT:e.Util.lf("Return true if the first input is greater than the second input."),LOGIC_COMPARE_TOOLTIP_GTE:e.Util.lf("Return true if the first input is greater than or equal to the second input.")},url:"/blocks/logic/boolean",category:"logic",block:{search:"=  <  > "}},logic_operation:{name:e.Util.lf("boolean operation"),tooltip:{LOGIC_OPERATION_TOOLTIP_AND:e.Util.lf("Return true if both inputs are true."),LOGIC_OPERATION_TOOLTIP_OR:e.Util.lf("Return true if at least one of the inputs is true.")},url:"/blocks/logic/boolean",category:"logic",block:{LOGIC_OPERATION_AND:e.Util.lf("{id:op}and"),LOGIC_OPERATION_OR:e.Util.lf("{id:op}or")}},logic_negate:{name:e.Util.lf("logical negation"),tooltip:e.Util.lf("Returns true if the input is false. Returns false if the input is true."),url:"/blocks/logic/boolean",category:"logic",block:{LOGIC_NEGATE_TITLE:e.Util.lf("not %1")}},logic_boolean:{name:e.Util.lf("a `true` or `false` value"),tooltip:e.Util.lf("Returns either true or false."),url:"/blocks/logic/boolean",category:"logic",block:{LOGIC_BOOLEAN_TRUE:e.Util.lf("{id:boolean}true"),LOGIC_BOOLEAN_FALSE:e.Util.lf("{id:boolean}false")}},text:{name:e.Util.lf("a piece of text"),tooltip:e.Util.lf("A letter, word, or line of text."),url:"/types/string",category:"text",block:{search:e.Util.lf("a piece of text")}},text_length:{name:e.Util.lf("number of characters in the string"),tooltip:e.Util.lf("Returns the number of letters (including spaces) in the provided text."),url:"/reference/text/length",category:"text",block:{TEXT_LENGTH_TITLE:e.Util.lf("length of %1")}},text_join:{name:e.Util.lf("join items to create text"),tooltip:e.Util.lf("Create a piece of text by joining together any number of items."),url:"/reference/text/join",category:"text",block:{TEXT_JOIN_TITLE_CREATEWITH:e.Util.lf("join")}},procedures_defnoreturn:{name:e.Util.lf("define the function"),tooltip:e.Util.lf("Create a function."),url:"/types/function/define",category:"functions",block:{PROCEDURES_DEFNORETURN_TITLE:e.Util.lf("function"),PROCEDURE_ALREADY_EXISTS:e.Util.lf("A function named '%1' already exists.")}},procedures_callnoreturn:{name:e.Util.lf("call the function"),tooltip:e.Util.lf("Call the user-defined function."),url:"/types/function/call",category:"functions",block:{PROCEDURES_CALLNORETURN_TITLE:e.Util.lf("call function")}},function_return:{name:e.Util.lf("return a value from within a function"),tooltip:e.Util.lf("Return a value from within a user-defined function."),url:"/types/function/return",category:"functions",block:{message_with_value:e.Util.lf("return %1"),message_no_value:e.Util.lf("return")}},function_definition:{name:e.Util.lf("define the function"),tooltip:e.Util.lf("Create a function."),url:"/types/function/define",category:"functions",block:{FUNCTIONS_EDIT_OPTION:e.Util.lf("Edit Function")}},function_call:{name:e.Util.lf("call the function"),tooltip:e.Util.lf("Call the user-defined function."),url:"/types/function/call",category:"functions",block:{FUNCTIONS_CALL_TITLE:e.Util.lf("call"),FUNCTIONS_GO_TO_DEFINITION_OPTION:e.Util.lf("Go to Definition")}},function_call_output:{name:e.Util.lf("call the function with a return value"),tooltip:e.Util.lf("Call the user-defined function with a return value."),url:"/types/function/call",category:"functions",block:{}}},o[pxtc.ON_START_TYPE]={name:e.Util.lf("on start event"),tooltip:e.Util.lf("Run code when the program starts"),url:"/blocks/on-start",category:"loops",block:{message0:e.Util.lf("on start %1 %2")}},o[pxtc.PAUSE_UNTIL_TYPE]={name:e.Util.lf("pause until"),tooltip:e.Util.lf("Pause execution of code until the given boolean expression is true"),url:"/blocks/pause-until",category:"loops",block:{message0:e.Util.lf("pause until %1")}},o[pxtc.TS_BREAK_TYPE]={name:e.Util.lf("break"),tooltip:e.Util.lf("Break out of the current loop or switch"),url:"/blocks/loops/break",category:"loops",block:{message0:e.Util.lf("break")}},o[pxtc.TS_CONTINUE_TYPE]={name:e.Util.lf("continue"),tooltip:e.Util.lf("Skip current iteration and continues with the next iteration in the loop"),url:"/blocks/loops/continue",category:"loops",block:{message0:e.Util.lf("continue")}},e.Util.isTranslationMode()){const t=Blockly.Msg;e.Util.values(o).filter((e=>e.block)).forEach((n=>{const o=Object.keys(n.block);n.translationIds=e.Util.values(n.block),o.forEach((o=>e.crowdin.inContextLoadAsync(n.block[o]).then((e=>{n.block[o]=e,/^[A-Z_]+$/.test(o)&&(t[o]=e)}))))}))}}t.MATH_FUNCTIONS={unary:["sqrt","sin","cos","tan"],binary:["atan2"],infix:["idiv","imul"]},t.ROUNDING_FUNCTIONS=["round","ceil","floor","trunc"],t.builtinFunctionInfo={"Math.abs":{blockId:"math_op3",params:["x"]},"Math.min":{blockId:"math_op2",params:["x","y"]},"Math.max":{blockId:"math_op2",params:["x","y"]}},t.normalizeBlock=function(t,n=e.log){if(!t)return t;let o=t.replace(/(?:^|[^\\])([%$])\s+/g,"$1");return o!=t&&(n(`block has extra spaces: ${t}`),t=o),o=(t=o).replace(/([%$]\w+)\s*=\s*(\w+)/,"$1=$2"),o!=t&&(n(`block has space between %name and = : ${t}`),t=o),o=o.replace(/\s*\|\s*/g,"|"),o},t.compileInfo=function(e){const o={parameters:[],actualNameToParam:{},definitionNameToParam:{},handlerArgs:[]},r=(1==e.kind||2==e.kind)&&!e.attributes.defaultInstance,i=!!e.attributes._def,s=i?e.attributes._def.parameters.slice(0):void 0,a=i?s.length:e.parameters?e.parameters.length:0,l=t.builtinFunctionInfo[e.qName];i&&e.attributes._expandedDef&&s.push(...e.attributes._expandedDef.parameters);const c={},u=s?s.filter((e=>!e.ref||(c[e.name]=e,!1))):[];if(r&&i&&s.length){const t=c.this||s[0],r=t.name;let i;(!t.shadowBlockId||"variables_get"===t.shadowBlockId)&&(i=t.varName||e.attributes.paramDefl[r]||e.attributes.paramDefl.this),o.thisParameter={actualName:n,definitionName:r,shadowBlockId:t.shadowBlockId,type:e.namespace,defaultValue:i,fieldEditor:p(r,n),fieldOptions:d(r,n),shadowOptions:g(r,n)}}if(e.parameters){let t=r&&!c.this?1:0;e.parameters.forEach(((e,n)=>{let r;if(c[e.name]?r=c[e.name]:t<u.length&&(r=u[t],++t),r||!i){let n;e.options&&e.options.min&&e.options.max&&(n={min:e.options.min.value,max:e.options.max.value});const i=r?r.name:l?l.params[t++]:e.name,c=r&&("variables_get"===r.shadowBlockId||"lists_create_with"==r.shadowBlockId);o.parameters.push({actualName:e.name,type:e.type,defaultValue:c&&r.varName||e.default,definitionName:i,shadowBlockId:r&&r.shadowBlockId,isOptional:!!s&&s.indexOf(r)>=a,fieldEditor:p(i,e.name),fieldOptions:d(i,e.name),shadowOptions:g(i,e.name),range:n})}e.handlerParameters&&e.handlerParameters.forEach((e=>{o.handlerArgs.push({name:e.name,type:e.type,inBlockDef:!!s&&s.some((t=>t.ref&&t.name===e.name))})}))}))}return o.parameters.forEach((e=>{o.actualNameToParam[e.actualName]=e,o.definitionNameToParam[e.definitionName]=e})),o;function p(t,n){return e.attributes.paramFieldEditor&&(e.attributes.paramFieldEditor[t]||e.attributes.paramFieldEditor[n])}function d(t,n){return e.attributes.paramFieldEditorOptions&&(e.attributes.paramFieldEditorOptions[t]||e.attributes.paramFieldEditorOptions[n])}function g(t,n){return e.attributes.paramShadowOptions&&(e.attributes.paramShadowOptions[t]||e.attributes.paramShadowOptions[n])}},t.hasHandler=function(e){return e.parameters&&e.parameters.some((e=>{var t,n;return"() => void"==e.type||"Action"==e.type||!!(null===(t=e.properties)||void 0===t?void 0:t.length)||!!(null===(n=e.handlerParameters)||void 0===n?void 0:n.length)}))},t.reporterTypeForArgType=function(e){let t="argument_reporter_custom";return"boolean"!==e&&"number"!==e&&"string"!==e||(t=`argument_reporter_${e}`),t},t.defaultIconForArgType=function(e=""){switch(e){case"number":return"calculator";case"string":return"text width";case"boolean":return"random";case"Array":return"list";default:return"align justify"}},t.parseFields=function(e){return e.split("|").map(((e,t)=>{let n=/([^%]*)\s*%([a-zA-Z0-9_]+)/.exec(e);if(!n)return{n:e,ni:t};let o=n[1];return o&&(o=o.trim()),{n:e,ni:t,pre:o,p:n[2]}}))},t.blockDefinitions=function(){return o||r(),o},t.getBlockDefinition=function(e){return o||r(),o[e]}}(e.blocks||(e.blocks={}))}(pxt||(pxt={})),function(e){!function(t){function n(){return"undefined"!=typeof navigator}function o(){return n()&&/(Win32|Win64|WOW64)/i.test(navigator.platform)}function r(){return n()&&/mobi/i.test(navigator.userAgent)}function i(){return n()&&/Mac/i.test(navigator.platform)}function s(){return!!navigator&&/Linux/i.test(navigator.platform)}function a(){return n()&&/arm/i.test(navigator.platform)}function l(){return n()&&/Edge/i.test(navigator.userAgent)}function c(){return n()&&/Trident/i.test(navigator.userAgent)}function u(){return!l()&&!c()&&!!navigator&&(/Chrome/i.test(navigator.userAgent)||/Chromium/i.test(navigator.userAgent))}function p(){return!u()&&!l()&&!!navigator&&/(Macintosh|Safari|iPod|iPhone|iPad)/i.test(navigator.userAgent)}function d(){return!p()&&!!navigator&&(/Firefox/i.test(navigator.userAgent)||/Seamonkey/i.test(navigator.userAgent))}function g(){return n()&&/Opera|OPR/i.test(navigator.userAgent)}function h(){return n()&&/Midori/i.test(navigator.userAgent)}function f(){return n()&&/Epiphany/i.test(navigator.userAgent)}function _(){return"undefined"!=typeof window&&("ontouchstart"in window||navigator&&navigator.maxTouchPoints>0)}function m(){return"undefined"!=typeof window&&!!window.pxtElectron}function y(){return"undefined"!=typeof window&&!!window.ipcRenderer}function k(){return m()||y()}function b(t){var n;try{return"undefined"!=typeof window&&/^http:\/\/(localhost|127\.0\.0\.1):\d+\//.test(window.location.href)&&(t||!/nolocalhost=1/.test(window.location.href))&&!(null===(n=null==e?void 0:e.webConfig)||void 0===n?void 0:n.isStatic)}catch(e){return!1}}function v(){return"undefined"!=typeof window&&!!window.PointerEvent}function T(){return o()?"windows":i()?"mac":s()&&a()?"rpi":s()?"linux":"unknown"}function E(){return l()?"edge":f()?"epiphany":h()?"midori":g()?"opera":c()?"ie":u()?"chrome":p()?"safari":d()?"firefox":"unknown"}function S(){if(!n())return null;let e=[];return g()&&(e=/(Opera|OPR)\/([0-9\.]+)/i.exec(navigator.userAgent)),f()?e=/Epiphany\/([0-9\.]+)/i.exec(navigator.userAgent):h()?e=/Midori\/([0-9\.]+)/i.exec(navigator.userAgent):p()?(e=/Version\/([0-9\.]+)/i.exec(navigator.userAgent),e||(e=/(Macintosh|iPod( touch)?|iPhone|iPad); (CPU|Intel).*?OS (X )?(\d+)/i.exec(navigator.userAgent))):e=u()?/(Chrome|Chromium)\/([0-9\.]+)/i.exec(navigator.userAgent):l()?/Edge\/([0-9\.]+)/i.exec(navigator.userAgent):c()?/(MSIE |rv:)([0-9\.]+)/i.exec(navigator.userAgent):/(Firefox|Seamonkey)\/([0-9\.]+)/i.exec(navigator.userAgent),e&&0!=e.length?e[e.length-1]:null}t.isIFrame=function(){try{return window&&window.self!==window.top}catch(e){return!0}},t.hasNavigator=n,t.hasWindow=function(){return"undefined"!=typeof window},t.isWindows=o,t.isWindows10=function(){return n()&&/(Win32|Win64|WOW64)/i.test(navigator.platform)&&/Windows NT 10/i.test(navigator.userAgent)},t.isMobile=r,t.isIOS=function(){return n()&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)},t.isAndroid=function(){return n()&&/android/i.test(navigator.userAgent)},t.isMac=i,t.isLinux=s,t.isARM=a,t.isUwpEdge=function(){return"undefined"!=typeof window&&!!window.Windows},t.isEdge=l,t.isChromiumEdge=function(){return n()&&/Edg\//i.test(navigator.userAgent)},t.isIE=c,t.isChrome=u,t.isSafari=p,t.isFirefox=d,t.isOpera=g,t.isMidori=h,t.isEpiphany=f,t.isTouchEnabled=_,t.isPxtElectron=m,t.isIpcRenderer=y,t.isElectron=k,t.isWinRT=()=>!1,t.isLocalHost=b,t.isLocalHostDev=function(){return b()&&!k()},t.isSkillmapEditor=function(){try{return/skill(?:s?)Map=1/.test(window.location.href)}catch(e){return!1}},t.isTabletSize=function(){return(null===window||void 0===window?void 0:window.innerWidth)<e.BREAKPOINT_TABLET},t.isComputerSize=function(){return(null===window||void 0===window?void 0:window.innerWidth)>=e.BREAKPOINT_TABLET},t.noSharedLocalStorage=function(){try{return/nosharedlocalstorage/i.test(window.location.href)}catch(e){return!1}},t.useOldTutorialLayout=function(){try{return/tutorialview=old/.test(window.location.href)}catch(e){return!1}},t.hasPointerEvents=v,t.hasSaveAs=function(){return l()||c()||d()},t.os=T,t.browser=E,t.browserVersion=S;let C=!1;function x(){return r()&&p()&&!/downloadWindowOpen=0/i.test(window.location.href)}function B(t,n,o){const i=x(),s=S(),a=parseInt(s||"0");if(i)o?o.location.href=t:window.open(t,"_self");else if(e.BrowserUtils.isSafari()&&(a<10||0==s.indexOf("10.0")||r())){let n=document.getElementById("downloader");n||(e.debug("injecting downloader iframe"),n=document.createElement("iframe"),n.id="downloader",n.style.position="absolute",n.style.right="0",n.style.bottom="0",n.style.zIndex="-1",n.style.width="1px",n.style.height="1px",document.body.appendChild(n)),n.src=t}else if(/^data:/i.test(t)&&(e.BrowserUtils.isEdge()||e.BrowserUtils.isIE())){let o=atob(t.split(",")[1]),r=e.Util.stringToUint8Array(o),i=new Blob([r],{type:"img/png"});window.navigator.msSaveOrOpenBlob(i,n)}else{let e=window.document.createElement("a");"string"==typeof e.download?(e.href=t,e.download=n,document.body.appendChild(e),e.click(),document.body.removeChild(e)):document.location.href=t}}function A(t,n){let o="data";r()&&p()&&e.appTarget.appTheme.mobileSafariDownloadProtocol&&(o=e.appTarget.appTheme.mobileSafariDownloadProtocol);const i=/downloadProtocol=([a-z0-9:/?]+)/i.exec(window.location.href);i&&(o=i[1]);return o+":"+n+";base64,"+t}function I(t,n,o={}){var r;e.debug("trigger download");const{contentType:i="application/octet-stream",userContextWindow:s,onError:a,maintainObjectURL:l}=o,c=null===(r=window.URL)||void 0===r?void 0:r.createObjectURL,u=e.appTarget.appTheme.disableBlobObjectDownload;let p;try{if(c&&!u){const o=c(new Blob([e.Util.stringToUint8Array(atob(t))],{type:i}));B(o,n,s),l?p=o:window.setTimeout((()=>window.URL.revokeObjectURL(p)),0)}else p=A(t,n),B(p,n,s)}catch(t){a&&a(t),e.debug("saving failed")}return p}function D(e){const t=document.createElement("img");return new Promise(((n,o)=>{t.onload=()=>n(t),t.onerror=()=>n(void 0),t.crossOrigin="anonymous",t.src=e}))}t.isBrowserSupported=function(){var t,n;if(!navigator)return!0;if(/bot|crawler|spider|crawling/i.test(navigator.userAgent))return!0;const o=(null===(t=e.appTarget)||void 0===t?void 0:t.unsupportedBrowsers)||(null===(n=window.pxtTargetBundle)||void 0===n?void 0:n.unsupportedBrowsers);if(null==o?void 0:o.some((e=>e.id==E())))return!1;const r=S(),i=parseInt(r||"0"),c=u()&&i>=38,_=d()&&i>=31,m=l(),y=p()&&i>=9,k=g()&&u()&&i>=21;let b=c||_||m||y||k;const v=h()||s()&&a()&&f();return b=b&&!v,b=b||/anybrowser=(true|1)/.test(window.location.href),C||(e.log(`Browser: ${E()} ${r} on ${T()}`),b||e.tickEvent("browser.unsupported",{useragent:navigator.userAgent}),C=!0),b},t.devicePixelRatio=function(){if("undefined"==typeof window||!window.screen)return 1;const e=window.screen.systemXDPI,t=window.screen.logicalXDPI;return void 0!==e&&void 0!==t&&e>t?e/t:window&&void 0!==window.devicePixelRatio?window.devicePixelRatio:1},t.browserDownloadBinText=function(e,t,n){return I(ts.pxtc.encodeBase64(e),t,n)},t.browserDownloadText=function(t,n,o){return I(ts.pxtc.encodeBase64(e.Util.toUTF8(t)),n,o)},t.isBrowserDownloadInSameWindow=x,t.isBrowserDownloadWithinUserContext=function(){const e=S(),t=parseInt(e||"0");return r()&&p()&&t>=11||/downloadUserContext=1/i.test(window.location.href)},t.browserDownloadDataUri=B,t.browserDownloadUInt8Array=function(t,n,o){return I(ts.pxtc.encodeBase64(e.Util.uint8ArrayToString(t)),n,o)},t.toDownloadDataUri=A,t.browserDownloadBase64=I,t.loadImageAsync=D,t.loadCanvasAsync=function(e){return D(e).then((e=>{const t=document.createElement("canvas");t.width=e.width,t.height=e.height;return t.getContext("2d").drawImage(e,0,0),t}))},t.scaleImageData=function(e,t){const n=document.createElement("canvas");n.width=e.width*t,n.height=e.height*t;const o=n.getContext("2d");return o.putImageData(e,0,0),o.imageSmoothingEnabled=!1,o.scale(t,t),o.drawImage(n,0,0),o.getImageData(0,0,e.width*t,e.height*t)},t.imageDataToPNG=function(e,t=1){if(!e)return;const n=document.createElement("canvas");n.width=e.width*t,n.height=e.height*t;const o=n.getContext("2d");return o.putImageData(e,0,0),o.imageSmoothingEnabled=!1,o.scale(t,t),o.drawImage(n,0,0),n.toDataURL("image/png")};const N=1e6;function w(t){if(/^https?:\/\//i.test(t))return t;const n=(window.MonacoPaths||{})[t];return n||(e.U.startsWith(t,e.webConfig.commitCdnUrl)?t:e.webConfig.commitCdnUrl+t)}t.encodeToPngAsync=function(t,n){const{width:o,height:r,pixelDensity:i=4,maxSize:s=N,text:a}=n||{};return new Promise(((n,l)=>{const c=new Image;c.onload=function(){const t=document.createElement("canvas"),l=t.getContext("2d");t.width=(o||c.width)*i,t.height=(r||c.height)*i,a&&(l.fillStyle="#fff",l.fillRect(0,0,t.width,t.height)),l.drawImage(c,0,0,o,r,0,0,t.width,t.height);let u=t.toDataURL("image/png");for(;u.length>s;)t.width=t.width/2>>0,t.height=t.height/2>>0,e.debug(`screenshot size ${u.length}b, shrinking to ${t.width}x${t.height}`),l.drawImage(c,0,0,o,r,0,0,t.width,t.height),u=t.toDataURL("image/png");if(a){e.lzmaCompressAsync(a).then((o=>{const r=e.Util.encodeBlobAsync(t,o);n(r.toDataURL("image/png"))}))}else n(u)},c.onerror=t=>{e.reportError("png","png rendering failed"),n(void 0)},c.src=t}))},t.resolveCdnUrl=w,t.loadStyleAsync=function(t,n){n&&(t="rtl"+t);const o="style-"+t;if(document.getElementById(o))return Promise.resolve();const r=w(t),i=e.Util.toArray(document.head.getElementsByTagName("link")).filter((e=>e.getAttribute("href")==r))[0];return i?(i.id||(i.id=o),Promise.resolve()):new Promise(((e,t)=>{const n=document.createElement("link");n.href=r,n.rel="stylesheet",n.type="text/css",n.id=o,n.addEventListener("load",(()=>e())),n.addEventListener("error",(e=>t(e))),document.head.appendChild(n)}))};let R,O,P,L={};function M(e,t){if(!e)return t;if(!t)return e;return(e.indexOf("/")==e.length-1?e.substring(0,e.length-1):e)+"/"+(0==t.indexOf("/")?t.substring(1):t)}function F(){const e=n()&&window.navigator;return e&&e.storage&&e.storage.estimate?e.storage.estimate():Promise.resolve({})}t.loadScriptAsync=function(t){const n=w(t);let o=L[n];return o||(o=L[n]=new Promise(((t,o)=>{e.debug(`script: loading ${n}`);const r=document.createElement("script");r.type="text/javascript",r.addEventListener("load",(()=>t())),r.addEventListener("error",(e=>{delete L[n],o(e)})),r.src=n,r.async=!0,document.body.appendChild(r)}))),o},t.loadAjaxAsync=function(e){return new Promise(((t,n)=>{let o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&(200==o.status?t(o.responseText):n(o.status))},o.open("GET",e,!0),o.send()}))},t.loadBlocklyAsync=function(){if(!R){e.debug("blockly: delay load");let t=e.BrowserUtils.loadStyleAsync("blockly.css",ts.pxtc.Util.isUserLanguageRtl());void 0===Blockly&&(t=t.then((()=>e.BrowserUtils.loadScriptAsync("pxtblockly.js")))),t=t.then((()=>{e.debug("blockly: loaded")})),R=t}return R},t.patchCdn=function(t){if(!t)return t;const n=e.getOnlineCdnUrl();return n?t.replace("@cdnUrl@",n):t.replace(/@cdnUrl@\/(blob|commit)\/[a-f0-9]{40}\//,"./")},t.initTheme=function(){const t=e.appTarget.appTheme;if(t&&t.accentColor){let e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(`.ui.accent { color: ${t.accentColor}; }\n                .ui.inverted.menu .accent.active.item, .ui.inverted.accent.menu  { background-color: ${t.accentColor}; }`)),document.getElementsByTagName("head")[0].appendChild(e)}if(e.Util.isUserLanguageRtl()){e.debug("rtl layout"),e.BrowserUtils.addClass(document.body,"rtl"),document.body.style.direction="rtl";const t=e.Util.toArray(document.head.getElementsByTagName("link")),n=t.filter((t=>e.Util.endsWith(t.getAttribute("href"),"semantic.css")))[0];if(n){const t=n.getAttribute("data-rtl");t&&(e.debug(`swapping to ${t}`),n.setAttribute("href",t))}const o=t.filter((t=>e.Util.endsWith(t.getAttribute("href"),"blockly.css")))[0];if(o){const t=o.getAttribute("data-rtl");t&&(e.debug(`swapping to ${t}`),o.setAttribute("href",t),o.removeAttribute("data-rtl"))}}},t.changeHash=function(e,t){"#"!=e.charAt(0)&&(e="#"+e),t?window.location.hash=e:window.history.replaceState("","",e)},t.urlJoin=M,t.joinURLs=function(...e){let t;if(e)for(let n=0;n<e.length;n++)t=M(t,e[n]);return t},t.storageEstimateAsync=F,t.scheduleStorageCleanup=n()&&navigator.storage&&navigator.storage.estimate?ts.pxtc.Util.throttle((function(){F().then((t=>(e.debug(`storage estimate: ${t.usage/t.quota*100>>0}%, ${t.usage/1e6>>0}/${t.quota/1e6>>0}Mb`),t.quota&&t.usage&&t.quota>1e6&&t.usage/t.quota>.9?(e.log("quota usage exceeded, clearing translations"),e.tickEvent("storage.cleanup"),W()):Promise.resolve()))).catch((t=>{e.reportException(t)}))}),1e4,!1):()=>{},t.stressTranslationsAsync=function t(){let n="...";for(let e=0;e<16;++e)n+=n+Math.random();return console.log(`adding entry ${2*n.length} bytes`),e.U.delay(1).then((()=>G())).then((e=>e.setAsync("foobar",Math.random().toString(),"",null,void 0,n))).then((()=>e.BrowserUtils.storageEstimateAsync())).then((e=>!e.quota||e.usage/e.quota<.8?t():Promise.resolve()))};class U{constructor(){this.translations={}}key(e,t,n){return`${e}|${t}|${n||"master"}`}get(e,t,n){return this.translations[this.key(e,t,n)]}getAsync(e,t,n){return Promise.resolve(this.get(e,t,n))}set(e,t,n,o,r,i,s){this.translations[this.key(e,t,n)]={etag:o,time:r,strings:i,md:s}}setAsync(t,n,o,r,i,s){return this.set(t,n,o,r,e.Util.now(),i),Promise.resolve()}clearAsync(){return this.translations={},Promise.resolve()}}class H{constructor(e,t,n,o){this.name=e,this.version=t,this.upgradeHandler=n,this.quotaExceededHandler=o}throwIfNotOpened(){if(!this._db)throw new Error("Database not opened; call IDBWrapper.openAsync() first")}errorHandler(t,n,o){console.error(new Error(`${this.name} IDBWrapper error for ${n}: ${t.message}`)),o(t),"QuotaExceededError"==t.name&&(e.log("storage quota exceeded..."),e.tickEvent("storage.quotaexceedederror"),this.quotaExceededHandler&&this.quotaExceededHandler())}getObjectStore(e,t="readonly"){this.throwIfNotOpened();return this._db.transaction([e],t).objectStore(e)}static deleteDatabaseAsync(e){return new Promise(((t,n)=>{const o=(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB).deleteDatabase(e);o.onsuccess=()=>t(),o.onerror=()=>n(o.error)}))}openAsync(){return new Promise(((e,t)=>{const n=(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB).open(this.name,this.version);n.onsuccess=()=>{this._db=n.result,e()},n.onerror=()=>this.errorHandler(n.error,"open",t),n.onupgradeneeded=e=>this.upgradeHandler(e,n)}))}getAsync(e,t){return new Promise(((n,o)=>{const r=this.getObjectStore(e).get(t);r.onsuccess=()=>n(r.result),r.onerror=()=>this.errorHandler(r.error,"get",o)}))}getAllAsync(e){return new Promise(((t,n)=>{const o=this.getObjectStore(e).openCursor(),r=[];o.onsuccess=()=>{o.result?(r.push(o.result.value),o.result.continue()):t(r)},o.onerror=()=>this.errorHandler(o.error,"getAll",n)}))}setAsync(e,t){return new Promise(((n,o)=>{const r=this.getObjectStore(e,"readwrite");let i;i=void 0!==t.id&&null!==t.id?r.put(t):r.add(t),i.onsuccess=()=>n(),i.onerror=()=>this.errorHandler(i.error,"set",o)}))}deleteAsync(e,t){return new Promise(((n,o)=>{const r=this.getObjectStore(e,"readwrite").delete(t);r.onsuccess=()=>n(),r.onerror=()=>this.errorHandler(r.error,"delete",o)}))}deleteAllAsync(e){return new Promise(((t,n)=>{const o=this.getObjectStore(e,"readwrite").clear();o.onsuccess=()=>t(),o.onerror=()=>this.errorHandler(o.error,"deleteAll",n)}))}}t.IDBWrapper=H;class V{constructor(e){this.db=e,this.mem=new U}static dbName(){return`__pxt_translations_${e.appTarget.id||""}`}static createAsync(){function e(){const e=new H(V.dbName(),2,((e,t)=>{t.result.createObjectStore(V.TABLE,{keyPath:V.KEYPATH})}),(()=>{W().catch((e=>{}))}));return e.openAsync().then((()=>new V(e)))}return e().catch((t=>(console.log("db: failed to open database, try delete entire store..."),H.deleteDatabaseAsync(V.dbName()).then((()=>e())))))}getAsync(e,t,n){e=(e||"en-US").toLowerCase();const o=this.mem.key(e,t,n),r=this.mem.get(e,t,n);return r?Promise.resolve(r):this.db.getAsync(V.TABLE,o).then((o=>o?(this.mem.set(e,t,n,o.etag,o.time,o.strings),Promise.resolve(o)):Promise.resolve(void 0))).catch((e=>Promise.resolve(void 0)))}setAsync(n,o,r,i,s,a){n=(n||"en-US").toLowerCase();const l=this.mem.key(n,o,r);let c=e.Util.now();this.mem.set(n,o,r,i,c,s,a),s&&Object.keys(s).filter((e=>!s[e])).forEach((e=>delete s[e]));const u={id:l,etag:i,time:c,strings:s,md:a};return this.db.setAsync(V.TABLE,u).finally((()=>t.scheduleStorageCleanup())).catch((e=>(console.log(`db: set failed (${e.message}), recycling...`),this.clearAsync())))}clearAsync(){return this.db.deleteAllAsync(V.TABLE).then((()=>console.debug("db: all clean"))).catch((e=>{console.error("db: failed to delete all")}))}}function G(){return e.Util.isNodeJS?Promise.resolve(new U):(O||(O=V.createAsync().catch((()=>new U))),O)}function W(){function t(){const t=V.dbName();return H.deleteDatabaseAsync(t).then((()=>{O=void 0})).catch((n=>{e.log(`db: failed to delete ${t}`),O=void 0}))}return O?O.then((e=>e.clearAsync())).catch((e=>t().then())):t()}function K(t){const n=JSON.stringify(t)+e.appTarget.versions.pxt+"_"+e.appTarget.versions.target;return pxtc.U.sha256(n)}function j(e,t){return`${e}|${t||"master"}`}V.TABLE="files",V.KEYPATH="id",t.translationDbAsync=G,t.clearTranslationDbAsync=W,t.getTutorialCodeHash=K;class z{constructor(e){this.db=e}static dbName(){return`__pxt_tutorialinfo_${e.appTarget.id||""}`}static createAsync(){function t(){const t=new e.BrowserUtils.IDBWrapper(z.dbName(),2,((e,t)=>{t.result.createObjectStore(z.TABLE,{keyPath:z.KEYPATH})}),(()=>{e.BrowserUtils.IDBWrapper.deleteDatabaseAsync(z.dbName())}));return t.openAsync().then((()=>new z(t)))}return t().catch((n=>(console.log("db: failed to open tutorial info database, try delete entire store..."),e.BrowserUtils.IDBWrapper.deleteDatabaseAsync(z.dbName()).then((()=>t())))))}getAsync(t,n,o){const r=j(t,o),i=K(n);return this.db.getAsync(z.TABLE,r).then((t=>{if(t&&t.hash==i&&e.Util.now()-(t.time||0)<864e5)return t;this.db.deleteAsync(z.TABLE,r)}))}setAsync(t,n,o,r){e.perf.measureStart("tutorial info db setAsync");j(t,r);const i=K(o);return this.setWithHashAsync(t,n,i)}setWithHashAsync(t,n,o,r){e.perf.measureStart("tutorial info db setAsync");const i=j(t,r),s={};Object.keys(n).forEach((e=>{Object.keys(n[e]).forEach((t=>{s[t]=n[e][t]}))}));const a={id:i,time:e.Util.now(),hash:o,snippets:n,blocks:s};return this.db.setAsync(z.TABLE,a).then((()=>{e.perf.measureEnd("tutorial info db setAsync")}))}clearAsync(){return this.db.deleteAllAsync(z.TABLE).then((()=>console.debug("db: all clean"))).catch((e=>{console.error("db: failed to delete all")}))}}function $(e){return e.split(/\s+/).filter((e=>!!e))}function X(){const t=new RegExp(`${e.Util.escapeForRegex(e.Util.pxtLangCookieId)}=(.*?)(?:;|$)`).exec(document.cookie);return t&&t[1]||null}z.TABLE="info",z.KEYPATH="id",t.tutorialInfoDbAsync=function(){return P||(P=z.createAsync()),P},t.clearTutorialInfoDbAsync=function(){function t(){const t=z.dbName();return H.deleteDatabaseAsync(t).then((()=>{P=void 0})).catch((n=>{e.log(`db: failed to delete ${t}`),P=void 0}))}return P?P.then((e=>e.clearAsync())).catch((e=>t().then())):t()},t.pointerEvents=v()?{up:"pointerup",down:["pointerdown"],move:"pointermove",enter:"pointerenter",leave:"pointerleave"}:_()?{up:"mouseup",down:["mousedown","touchstart"],move:"touchmove",enter:"touchenter",leave:"touchend"}:{up:"mouseup",down:["mousedown"],move:"mousemove",enter:"mouseenter",leave:"mouseleave"},t.getPageX=function(e){return"pageX"in e?e.pageX:e.changedTouches[0].pageX},t.getPageY=function(e){return"pageY"in e?e.pageY:e.changedTouches[0].pageY},t.getClientX=function(e){return"clientX"in e?e.clientX:e.changedTouches[0].clientX},t.getClientY=function(e){return"clientY"in e?e.clientY:e.changedTouches[0].clientY},t.popupWindow=function(t,n,o,r){try{const e=window.screenLeft?window.screenLeft:window.screenX,i=window.screenTop?window.screenTop:window.screenY,s=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=s/2-o/2+e,c=a/2-r/2+i,u=window.open(t,n,"width="+o+", height="+r+", top="+c+", left="+l);return u.focus&&u.focus(),u}catch(n){return e.tickEvent("pxt.popupError",{url:t,msg:n.message}),null}},t.containsClass=function(e,t){return $(t).every((t=>function(e,t){if(e.classList)return e.classList.contains(t);return!((e.className+"").split(/\s+/).indexOf(t)<0)}(e,t)))},t.addClass=function(e,t){$(t).forEach((t=>function(e,t){if(e.classList)e.classList.add(t);else{(e.className+"").split(/\s+/).indexOf(t)<0&&(e.className.baseVal+=" "+t)}}(e,t)))},t.removeClass=function(e,t){$(t).forEach((t=>function(e,t){e.classList?e.classList.remove(t):e.className.baseVal=(e.className+"").split(/\s+/).filter((e=>e!=t)).join(" ")}(e,t)))},t.getCookieLang=X,t.setCookieLang=function(t,n=!1){if(e.Util.allLanguages[t]&&t!==X()){e.tickEvent("menu.lang.setcookielang",{lang:t,docs:`${n}`});const o=new Date;o.setTime(o.getTime()+24*e.Util.langCookieExpirationDays*60*60*1e3),document.cookie=`${e.Util.pxtLangCookieId}=${t}; expires=${o.toUTCString()}; path=/`}},t.cacheBustingUrl=function(e){return e?/[?&]rnd=/.test(e)?e:`${e}${e.indexOf("?")>0?"&":"?"}rnd=${Math.random()}`:e}}(e.BrowserUtils||(e.BrowserUtils={}))}(pxt||(pxt={})),function(e){!function(e){e.cloudStatus={none:{value:"none"},synced:{value:"synced",icon:"cloud-saved-b",tooltip:lf("Project saved to cloud"),shortStatus:lf("saved"),longStatus:lf("Saved to cloud"),indicator:""},justSynced:{value:"justSynced",icon:"cloud-saved-b",tooltip:lf("Project saved to cloud"),shortStatus:lf("saved!"),longStatus:lf("Saved to cloud!"),indicator:""},offline:{value:"offline",icon:"cloud-error-b",tooltip:lf("Unable to connect to cloud"),shortStatus:lf("offline"),longStatus:lf("Offline"),indicator:lf("offline")},syncing:{value:"syncing",icon:"cloud-saving-b",tooltip:lf("Saving project to cloud..."),shortStatus:lf("saving..."),longStatus:lf("Saving to cloud..."),indicator:lf("syncing...")},conflict:{value:"conflict",icon:"cloud-error-b",tooltip:lf("Project was edited in two places and the changes conflict"),shortStatus:lf("conflict!"),longStatus:lf("Project has a conflict!"),indicator:"!"},localEdits:{value:"localEdits",icon:"cloud-saving-b",tooltip:lf("Saving project to the cloud..."),shortStatus:lf("saving..."),longStatus:lf("Saving to cloud..."),indicator:"*"}}}(e.cloud||(e.cloud={}))}(pxt||(pxt={})),function(e){!function(e){e.deployCoreAsync=void 0,e.deployFallbackAsync=void 0,e.hasDeployFn=()=>e.deployCoreAsync||e.deployFallbackAsync,e.deployAsync=(t,n)=>(e.deployCoreAsync||e.deployFallbackAsync)(t,n),e.patchCompileResultAsync=void 0,e.browserDownloadAsync=void 0,e.saveOnlyAsync=void 0,e.renderBrowserDownloadInstructions=void 0,e.renderUsbPairDialog=void 0,e.renderIncompatibleHardwareDialog=void 0,e.showUploadInstructionsAsync=void 0,e.saveProjectAsync=void 0,e.electronDeployAsync=void 0,e.webUsbPairDialogAsync=void 0,e.onTutorialCompleted=void 0,e.workspaceLoadedAsync=void 0}(e.commands||(e.commands={}))}(pxt||(pxt={})),function(e){function t(){let t;return t||(t=e.U.isNodeJS?Promise.resolve(require("lzma")):Promise.resolve(window.LZMA),t.then((t=>(t||e.reportError("lzma","failed to load"),t)))),t}e.lzmaDecompressAsync=function(n){return t().then((t=>new Promise(((o,r)=>{try{t.decompress(n,((t,n)=>{n&&e.debug("lzma decompression failed"),o(n?void 0:t)}))}catch(t){t&&e.debug("lzma decompression failed"),o(void 0)}}))))},e.lzmaCompressAsync=function(n){return t().then((t=>new Promise(((o,r)=>{try{t.compress(n,7,((t,n)=>{n&&e.reportException(n),o(n?void 0:new Uint8Array(t))}))}catch(t){e.reportException(t),o(void 0)}}))))}}(pxt||(pxt={})),function(e){!function(t){var n=pxtc.Util;let o=n.lf;const r={"pxt::mkAction":1,"pxt::dumpPerfCounters":1,"pxt::deepSleep":1,"pxt::getConfig":1,"pxtrt::mkMap":1,"pxtrt::mapSet":1,"pxtrt::stclo":1,"pxtrt::mklocRef":1,"pxtrt::stlocRef":1,"pxtrt::ldlocRef":1,"pxtrt::panic":1};function i(e="namespace"){let t="",n="",o=(o,r="")=>{n!=o&&(n&&(t+="}\n"),o&&(t+=r||e+" "+o+" {\n"),n=o)},r="    ";return{setNs:o,clear:()=>{t="",n=""},write:e=>{e.trim()?(e=e.trim().replace(/^\s*/gm,r).replace(/^(\s*)\*/gm,((e,t)=>t+" *")),t+=e+"\n"):t+="\n"},incrIndent:()=>{r+="    "},decrIndent:()=>{r=r.slice(4)},finish:()=>(o(""),t)}}function s(e){if(!e)return null;e=e.trim();let t=/^\((.*)\)/.exec(e);return t&&(e=t[1]),/^-?(\d+|0[xX][0-9a-fA-F]+)$/.test(e)?parseInt(e):null}t.nsWriter=i,t.parseCppInt=s;let a={};class l extends Error{constructor(e){super(e),this.isUserError=!0,this.message=e}}function c(e){if(!e)return"";let t="";for(let n=0;n<e.length;++n){let o=255&e[n];t+=37==o||o>127?"%"+o.toString(16):String.fromCharCode(o)}return decodeURIComponent(t)}function u(t){let n="",o=0;for(;o<t.length;o+=2)n=t[o]+t[o+1]+n;return e.Util.assert(o==t.length),n}function p(e){let t=[65,20,14,47,184,47,162,187];e:for(let n=0;n<e.length;n+=16){if(e[n]!=t[0])continue;for(let o=0;o<t.length;++o)if(e[n+o]!=t[o])continue e;let o=e[n+8]|e[n+9]<<8,r=e[n+10]|e[n+11]<<8|e[n+12]<<16|e[n+13]<<24;n+=16;let i=n+o+r;if(i>e.length)continue;let s=e.slice(n,n+o),a=e.slice(n+o,i);return{meta:c(s),text:a}}return null}function d(t){function n(t){return e.debug(t),Promise.reject(new Error(t))}let o;if(e.HF2.read32(t,0)==ts.pxtc.UF2.UF2_MAGIC_START0){let e=ts.pxtc.UF2.toBin(t);e&&(o=p(e.buf))}if(1179403647==e.HF2.read32(t,0)&&(o=p(t)),58==t[0]){o=function(e){if(!e)return;let t,n=0,o=0,r=0,i=0;if(e.split(/\r?\n/).forEach((e=>{let s=/^:10....0[0E]41140E2FB82FA2BB(....)(....)(....)(....)(..)/.exec(e);if(s)n=parseInt(u(s[1]),16),o=parseInt(u(s[2]),16),r=n+o,t=new Uint8Array(r);else if(r>0){if(s=/^:10....0[0E](.*)(..)$/.exec(e),!s)return;let n=s[1];for(;r>0&&n.length>0;)t[i++]=parseInt(n[0]+n[1],16),n=n.slice(2),r--}})),!t||0!=r||i!=t.length)return;let s=new Uint8Array(n),a=new Uint8Array(o);for(let e=0;e<n;++e)s[e]=t[e];for(let e=0;e<o;++e)a[e]=t[n+e];return{meta:c(s),text:a}}(c(t)||"")}if(!o||!o.meta||!o.text)return n("This .hex file doesn't contain source.");let r=JSON.parse(o.meta);return r?"LZMA"==r.compression?e.lzmaDecompressAsync(o.text).then((t=>{if(!t)return null;let n=t.slice(0,r.headerSize||r.metaSize||0),o=t.slice(n.length);return n&&e.Util.jsonCopyFrom(r,JSON.parse(n)),{meta:r,source:o}})):r.compression?n(`Compression type ${r.compression} not supported.`):Promise.resolve({source:c(o.text)}):n("This .hex file is not valid.")}t.PkgConflictError=l,t.getExtensionInfo=function(t){const c={__appVariant:e.appTargetVariant||""},u="dal.d.ts";let p="/source/",d="",g=[];const h=t.sortedDeps(!0).sort(((e,t)=>"this"==e.id?1:"this"==t.id?-1:n.strcmp(e.id,t.id)));for(let t of h)t.disablesVariant(e.appTargetVariant)||t.resolvedDependencies().some((t=>t.disablesVariant(e.appTargetVariant)))?(d&&(d+=", "),d+=t.id,e.debug(`disable variant ${e.appTargetVariant} due to ${t.id}`)):(g.push(t),t.addSnapshot(c,[u,".h",".cpp"]));const f=JSON.stringify(c),_=a[f];if(_){e.debug("Using cached extinfo");const t=n.flatClone(_);return t.disabledDeps=d,t}e.debug("Generating new extinfo");const m=pxtc.emptyExtInfo();m.disabledDeps=d;let y=e.appTarget.compileService;y||(y={gittag:"none",serviceId:"nocompile"}),y=n.clone(y);let k=t.getTargetOptions();k||(k={isNative:!1,hasHex:!1,switches:{}});const b=!!y.platformioIni,v="codal"==y.buildEngine||"dockercodal"==y.buildEngine,T="dockermake"==y.buildEngine||"dockercross"==y.buildEngine,E="dockerespidf"==y.buildEngine,S=!(b||v||T||E),C=k.nativeType==pxtc.NATIVE_TYPE_VM;b?p="/src/":v||T?p="/pxtapp/":E&&(p="/main/");let x="// Configuration defines\n",B="\nPXT_SHIMS_BEGIN\n",A="",I="",D='#include "pxt.h"\n',N="",w=e=>N+=`   ${O}(${R}): ${e}\n`,R=0,O="",P=i("namespace"),L=i("declare namespace"),M=i("declare namespace"),F="",U={},H={};const V={true:"1",false:"0",null:"0",NULL:"0"};function G(e){return e.trim().replace(/[\_\*]$/,"")}for(const t of g){if(t.getFiles().indexOf(u)>=0){const n=t.host().readFile(t,u);e.Util.assert(!!n,`dal.d.ts not found in ${t.id}`),n.split(/\r?\n/).forEach((e=>{let t=/^\s*(\w+) = (.*),/.exec(e);t&&(V[t[1]]=t[2])}))}for(const e of t.getFiles())(["Makefile","sdkconfig.defaults","CMakeLists.txt"].indexOf(e)>=0||n.endsWith(e,".mk"))&&(m.generatedFiles["/"+e]=t.host().readFile(t,e))}let W=["0","false","PXT_UTF8"],K={};function j(e){return e.replace(/\/\/.*/,"").replace(/\/\*/,"")}k.switches.boxDebug&&(K.PXT_BOX_DEBUG=1),k.utf8&&(K.PXT_UTF8=1),k.switches.profile&&(K.PXT_PROFILE=1),k.switches.gcDebug&&(K.PXT_GC_DEBUG=1),k.switches.numFloat&&(K.PXT_USE_FLOAT=1),k.nativeType==pxtc.NATIVE_TYPE_VM&&(K.PXT_VM=1);let z=0,$=!1,X="",Y="",J="",q=!1;function Z(){L.setNs(""),L.write(""),L.write(""),(J||Y)&&(L.write(Y),L.write(J),J="",Y="")}function Q(e,t){let i;X="",Y="",J="",q=!1;let a=-1;function l(){let e=X.replace(/Methods$/,"");return e==X?null:e}function c(e){switch(e.replace(/\s+/g,"")){case"void":return"void";case"int32_t":case"int":return"int32";case"uint32_t":case"unsigned":return"uint32";case"TNumber":case"float":case"double":return"number";case"uint16_t":return"uint16";case"int16_t":case"short":return"int16";case"uint8_t":case"byte":return"uint8";case"int8_t":case"sbyte":return"int8";case"bool":return k.shortPointers&&w("use 'boolean' not 'bool' on 8 bit targets"),"boolean";case"StringData*":case"String":case"ImageLiteral_":case"ImageLiteral":return"string";case"Action":return"() => void";case"TValue":return"any";default:return G(e)}}function u(e){switch(e=e.replace(/\s+/g,"")){case"int32_t":case"uint32_t":case"unsigned":case"uint16_t":case"int16_t":case"short":case"uint8_t":case"byte":case"int8_t":case"sbyte":case"int":case"ramint_t":return"I";case"void":return"V";case"float":return"F";case"TNumber":return"N";case"TValue":return"T";case"bool":return"B";case"double":return"D";case"ImageLiteral_":return"T";case"String":return"S";default:return n.lookup(U,e)?"I":"_"+e.replace(/[\*_]+$/,"")}}e=e.replace(/^(\s*#\s*if\s+(\w+)\s*$)([^]*?)(^\s*#\s*(elif|else|endif)\s*$)/gm,((e,t,n,o,r)=>W.indexOf(n)>=0&&!K[n]?t+o.replace(/[^\n]/g,"")+r:e)),R=0,$=!1,z=0,M.setNs(""),L.setNs(""),e.split(/\r?\n/).forEach((e=>{++R;let p=j(e);!function(e){let t=j(e);if($&&t.indexOf("}")>=0&&($=!1,M.write("}")),!$)return;let o=/^\s*(\w+)\s*(=\s*(.*?))?,?\s*$/.exec(t);if(o){let e=o[1],r=o[3],i="";if(r){r=r.trim();let e=n.lookup(V,r);null!=e&&(i="  // "+r,r=e),z=s(r),null==z&&w("cannot determine value of "+t)}else z++,r=z+"";M.write(`    ${G(e)} = ${r},${i}`)}else M.write(e)}(e);let d=/^\s*enum\s+(|class\s+|struct\s+)(\w+)\s*({|$)/.exec(p);var g,h;if(d&&(g=d[2],h=d[3],$=!0,z=-1,M.write(""),M.write(""),(J||Y)&&(M.write(Y),M.write(J),J="",Y=""),M.write(`declare const enum ${G(g)} ${h}`),U[g]=!0,t||(P.setNs(X),P.write(`enum ${d[2]} : int;`))),function(e){return!(!$&&(/^\s*\/\*\*/.test(e)?(q=!0,Y=e+"\n",/\*\//.test(e)&&(q=!1),0):q?(Y+=e+"\n",/\*\//.test(e)&&(q=!1),0):!/^\s*\/\/%/.test(e)||(J+=e+"\n",0)))}(e))return;/^typedef.*;\s*$/.test(e)&&(P.setNs(X),P.write(e));let f=/^\s*namespace\s+(\w+)/.exec(e);if(f)if(X=f[1],l()){Z();let e=l();L.setNs(X,`declare interface ${e} {`)}else(J||Y)&&(Z(),L.setNs(G(X)),M.setNs(G(X)));else{if(f=/^PXT_ABI\((\w+)\)/.exec(e),f&&!C&&(B+=`PXT_FNPTR(::${f[1]}),\n`,I+=`extern "C" void ${f[1]}();\n`,m.functions.push({name:f[1],argsFmt:[],value:0})),f=/^\s*PXT_EXPORT\(([:\&\w]+)\)/.exec(e),f&&(m.vmPointers||(m.vmPointers=[]),m.vmPointers.push(f[1])),f=/^#define\s+PXT_COMM_BASE\s+([0-9a-fx]+)/.exec(e),f&&(m.commBase=parseInt(f[1])),f=/^\s*(\w+)([\*\&]*\s+[\*\&]*)(\w+)\s*\(([^\(\)]*)\)\s*(;\s*$|\{|$)/.exec(e),!J||!f){if(f=/^\s*extern const (\w+) (\w+);/.exec(e),J&&f){let e={name:X+"::"+f[2],argsFmt:[],value:null};return m.functions.push(e),C||(B+="PXT_FNPTR(&::"+e.name+"),\n"),void(J="")}if(f=/^\s*(\w+)\s+(\w+)\s*;/.exec(e),J&&f){let e=pxtc.parseCommentString(J);e.indexedInstanceNS&&(i=e,L.setNs(e.indexedInstanceNS),a=0);let t=f[1],n=f[2];if(i)return J=J.trim(),J+=` fixedInstance shim=${i.indexedInstanceShim}(${a++})`,L.write(""),L.write(Y),L.write(J),L.write(`const ${n}: ${c(t)};`),Y="",void(J="")}return J&&e.trim()?(w("declaration not understood: "+e),J="",void(Y="")):void 0}{i=null;let e=pxtc.parseCommentString(J);X||w("missing namespace declaration");let a=(f[1]+f[2]).replace(/\s+/g,""),p=f[3],d=f[4];J=J.trim().replace(/ \w+\.defl=\w+/g,"");let g=[u(a)],h=[],_=d.split(/,/).filter((e=>!!e)).map((t=>{let o=function(e,t){t=t.trim();let o=/(.*)=\s*(-?\w+)$/.exec(t),r="",i="";if(o&&(r=o[2],i="?",t=o[1].trim()),o=/^(.*?)(\w+)$/.exec(t),!o)return w("invalid argument: "+t),{name:"???",type:"int"};let a=o[2];e.paramDefl[a]&&(r=e.paramDefl[a],i="?");let l=r?n.lookup(V,r):null;return null!=l&&(r=l),r&&(null==s(r)&&w("Invalid default value (non-integer): "+r),J+=` ${a}.defl=${r}`),{name:a+i,type:o[1]}}(e,t);return g.push(u(o.type)),h.push(o.type.replace(/ /g,"")),`${o.name}: ${c(o.type)}`})),y={name:X+"::"+p,argsFmt:g,value:null};if(Y)if(L.setNs(G(X)),L.write(""),L.write(Y),/ImageLiteral/.test(f[4])&&!/imageLiteral=/.test(J)&&(J+=" imageLiteral=1"),J+=` shim=${y.name}`,L.write(J),p=G(p),l()){let e=(_[0]||"").replace(/^.*:\s*/,"").trim();e.toLowerCase()!=l().toLowerCase()&&w(o("Invalid first argument; should be of type '{0}', but is '{1}'",l(),e)),_.shift(),0==_.length&&/\bproperty\b/.test(J)?L.write(`${p}: ${c(a)};`):L.write(`${p}(${_.join(", ")}): ${c(a)};`)}else L.write(`function ${p}(${_.join(", ")}): ${c(a)};`);if(Y="",J="",t||(P.setNs(X),P.write(`${a} ${p}(${d});`)),m.functions.push(y),S)B+="(uint32_t)(void*)::"+y.name+",\n";else if(C){if(n.startsWith(y.name,"pxt::op_")||r[y.name]||e.expose||!n.startsWith(y.name,"pxt::")&&!n.startsWith(y.name,"pxtrt::")){const e=function(e,t){if("FiberContext*"==t[0])return"::"+e.name;let n="_wrp_"+e.name.replace(/:/g,"_");if(H[e.name])return n;H[e.name]=!0,A+=`\nvoid ${n}(FiberContext *ctx) {\n`;const o=t.length;let r=[],i=!1,s="";for(let n=0;n<o;++n){const a=e.argsFmt[n+1],l=t[n];let c="I"==a?"toInt":"B"==a?"numops::toBool":"";const u=n==o-1?"ctx->r0":`ctx->sp[${o-n-2}]`;let p="";switch(l){case"TValue":case"TNumber":break;case"Action":c="asRefAction";break;case"String":c="convertToString",p="ctx, ",i=!0;break;default:c||(c="as"+l.replace(/\*/g,""))}s+=`  ${l} a${n} = (${l}) ${c}(${p}${u});\n`,r.push("a"+n)}i&&(A+="  auto prevSP = ctx->sp;\n"),A+=s,i&&(A+="  if (panicCode) { ctx->sp = prevSP; return; }\n");const a=`::${e.name}(${r.join(", ")})`;return"V"==e.argsFmt[0]?(A+=`  ${a};\n`,A+="  ctx->r0 = NULL;\n"):"I"==e.argsFmt[0]?A+=`  ctx->r0 = fromInt(${a});\n`:"B"==e.argsFmt[0]?A+=`  ctx->r0 = fromBool(${a});\n`:A+=`  ctx->r0 = (TValue)${a};\n`,i&&(A+="  ctx->sp = prevSP;\n"),o>1&&(A+=`  ctx->sp += ${o-1};\n`),A+="}\n",n}(y,h),t=y.argsFmt.length-1;B+=`{ "${y.name}", (OpFun)(void*)${e}, ${t} },\n`}}else B+="PXT_FNPTR(::"+y.name+"),\n"}}}))}const ee=n.clone(y.yottaConfig||{}),te={},ne={},oe={};function re(t){const r=t.config.platformio;r&&r.dependencies&&n.jsonCopyFrom(m.platformio.dependencies,r.dependencies),m.npmDependencies&&t.config.npmDependencies&&n.jsonCopyFrom(m.npmDependencies,t.config.npmDependencies);const i=t.config.codal;if(v&&i)for(const t of i.libraries||[]){const r=e.github.parseRepoId(t);r||n.userError(o("codal library {0} doesn't look like github repo",t));const i=e.github.stringifyRepo(r),s=n.lookup(oe,r.project);s?e.github.stringifyRepo(s)!=i&&n.userError(o("conflict between codal libraries: {0} and {1}",e.github.stringifyRepo(s),i)):oe[r.project]=r}const s=t.config.yotta;if(s){if(s.dependencies&&n.jsonCopyFrom(m.yotta.dependencies,s.dependencies),s.config){const e=n.jsonFlatten(s.config);for(const r of Object.keys(e)){const i=n.lookup(ne,r),s=e[r];if(!i||i.config.yotta.configIsJustDefaults)ne[r]=t,ee[r]=s;else if(ee[r]===s);else if(!t.parent.config.yotta||!t.parent.config.yotta.ignoreConflicts){let e=new l(o("conflict on yotta setting {0} between extensions {1} and {2}",r,t.id,i.id));throw e.pkg0=i,e.pkg1=t,e.settingName=r,e}}}if(s.optionalConfig){const e=n.jsonFlatten(s.optionalConfig);for(const t of Object.keys(e)){const n=e[t];te[t]=n}}}}if(S&&k.hasHex){let e=y;n.assert(!!e.yottaCorePackage),n.assert(!!e.githubCorePackage),n.assert(!!e.gittag);let t=e.githubCorePackage+"#"+y.gittag;m.yotta.dependencies[e.yottaCorePackage]=t}if(t){let e=!1;for(let r of g){N="",re(r),r==t?(e=!0,L.clear(),M.clear()):n.assert(!e);const i=e=>n.endsWith(e,".h"),s=".cpp",a=r.getFiles().filter(i).concat(r.getFiles().filter((e=>!i(e))));for(let e of a){const t=i(e);if(t||n.endsWith(e,s)){let i=r.config.name+"/"+e;("base"==r.config.name||/^core($|---)/.test(r.config.name))&&t&&(i=e),t&&(D+=`#include "${S?p.slice(1):""}${i}"\n`);let s=r.readFile(e);null==s&&n.userError(o("C++ file {0} is missing in extension {1}.",e,r.config.name)),O=i,Q(s,t),m.extensionFiles[p+i]=s,0==r.level&&(m.onlyPublic=!1),r.verProtocol()&&"pub"!=r.verProtocol()&&"embed"!=r.verProtocol()&&(m.onlyPublic=!1)}if(n.endsWith(e,".c")||n.endsWith(e,".S")||n.endsWith(e,".s")){let t=r.readFile(e);m.extensionFiles[p+r.config.name+"/"+e.replace(/\.S$/,".s")]=t}}N&&(F+=o("Extension {0}:\n",r.id)+N)}e||(L.clear(),M.clear())}function ie(e){return Object.keys(m.extensionFiles).concat(Object.keys(m.generatedFiles)).filter((t=>n.endsWith(t,e))).map((e=>e.slice(1)))}F&&n.userError(F),n.jsonCopyFrom(te,ee),n.iterMap(te,((e,t)=>{null===t&&delete te[e]})),Object.keys(te).filter((e=>/-/.test(e))).forEach((e=>{const t=te[e];delete te[e],te[e.replace(/-/g,"_")]=t})),!S&&y.yottaConfigCompatibility&&Object.keys(te).forEach((e=>te["YOTTA_CFG_"+e]=te[e])),te.PXT_TARGET=JSON.stringify(e.appTarget.id);const se=n.jsonUnFlatten(te);if(T){let e={name:"pxt-app",private:!0,dependencies:m.npmDependencies};m.generatedFiles["/package.json"]=JSON.stringify(e,null,4)+"\n"}else if(E){const e=n.concatArrayLike([ie(".c"),ie(".cpp"),ie(".s")]).map((e=>e.slice(p.length-1))).concat(["main.cpp"]);e.push("pointers.cpp"),m.generatedFiles[p+"CMakeLists.txt"]="idf_component_register(\n  SRCS\n"+e.map((e=>`    "${e}"\n`)).join("")+'  INCLUDE_DIRS\n    "."\n)\n'}else if(v){let t=y,o=n.clone(t.codalDefinitions)||{},r=t.codalTarget;"string"==typeof r&&(r+=".json");let i={target:r,definitions:o,config:o,application:"pxtapp",output_folder:"build",pxt_gitrepo:t.githubCorePackage,pxt_gittag:t.gittag,libraries:n.values(oe).map((e=>({name:e.project,url:"https://github.com/"+e.fullName,branch:e.tag||"master",type:"git"})))};0==i.libraries.length&&delete i.libraries,n.iterMap(n.jsonFlatten(se),((e,t)=>{e=e.replace(/^codal\./,"device.").toUpperCase().replace(/\./g,"_"),o[e]=t})),m.generatedFiles["/codal.json"]=JSON.stringify(i,null,4)+"\n",e.debug(`codal.json: ${m.generatedFiles["/codal.json"]}`)}else if(b){const e=y.platformioIni.slice();e.push("lib_deps ="),n.iterMap(m.platformio.dependencies,((t,n)=>{let o=/[@#\/]/.test(n)?n:t+"@"+n;e.push("  "+o)})),m.generatedFiles["/platformio.ini"]=e.join("\n")+"\n"}else{m.yotta.config=se;let t="pxt-app";y.yottaBinary&&(t=y.yottaBinary.replace(/-combined/,"").replace(/\.hex$/,""));let n={name:t,version:"0.0.0",description:"Auto-generated. Do not edit.",license:"n/a",dependencies:m.yotta.dependencies,targetDependencies:{},bin:"./source"};m.generatedFiles["/module.json"]=JSON.stringify(n,null,4)+"\n",e.debug(`module.json: ${m.generatedFiles["/module.json"]}`)}for(let e of Object.keys(K))x+=`#define ${e} ${K[e]}\n`;if(k.uf2Family&&(x+=`#define PXT_UF2_FAMILY ${k.uf2Family}\n`),m.generatedFiles[p+"pointers.cpp"]=D+P.finish()+I+A+B+"\nPXT_SHIMS_END\n",m.generatedFiles[p+"pxtconfig.h"]=x,e.debug(`pxtconfig.h: ${m.generatedFiles[p+"pxtconfig.h"]}`),S&&(m.generatedFiles["/config.json"]=JSON.stringify(se,null,4)+"\n",e.debug(`yotta config.json: ${m.generatedFiles["/config.json"]}`)),m.generatedFiles[p+"main.cpp"]='\n#include "pxt.h"\n#ifdef PXT_MAIN\nPXT_MAIN\n#else\nint main() {\n    uBit.init();\n    pxt::start();\n    release_fiber();\n    return 0;   // your program will never reach this line.\n}\n#endif\n',m.generatedFiles["/Makefile"]){let e="",t=(t,n)=>{e+=`${t} = ${ie(n).join(" ")}\n`};t("PXT_C",".c"),t("PXT_CPP",".cpp"),t("PXT_S",".s"),t("PXT_HEADERS",".h"),e+="PXT_SOURCES := $(PXT_C) $(PXT_S) $(PXT_CPP)\n",e+="PXT_OBJS := $(addprefix bld/, $(PXT_C:.c=.o) $(PXT_S:.s=.o) $(PXT_CPP:.cpp=.o))\n",m.generatedFiles["/Makefile.inc"]=e}m.generatedFiles["/functions.json"]=JSON.stringify(m.functions,null,1);let ae=m.extensionFiles;n.jsonCopyFrom(ae,m.generatedFiles);let le={config:y.serviceId,tag:y.gittag,replaceFiles:ae,dependencies:S?m.yotta.dependencies:null},ce=JSON.stringify(le);return m.sha=n.sha256(ce),m.skipCloudBuild=!!y.skipCloudBuild,m.compileData=ts.pxtc.encodeBase64(n.toUTF8(ce)),m.shimsDTS=L.finish(),m.enumsDTS=M.finish(),Object.keys(a).length>10&&(a={}),a[f]=m,m},t.unpackSourceFromHexFileAsync=function(t){if(t)return e.Util.fileReadAsBufferAsync(t).then((e=>d(new Uint8Array(e))))},t.unpackSourceFromHexAsync=d}(e.cpp||(e.cpp={}))}(pxt||(pxt={})),function(e){!function(t){const n={};let o,r={};function i(r){return n.hasOwnProperty(r.sha)||(n[r.sha]=function(n){let r="";return t.showLoading(e.U.lf("Compiling (this may take a minute)...")),e.tickEvent("cppcompile.start"),function(t){if(t.skipCloudBuild)return Promise.resolve({hex:["SKIP"]});if(e.webConfig&&e.webConfig.isStatic)return e.Util.requestAsync({url:`${e.webConfig.cdnUrl}hexcache/${t.sha}.hex`}).then((t=>{if(t.text){const e={enums:[],functions:[],hex:t.text.split(/\r?\n/)};return Promise.resolve(e)}return e.log("Hex info not found in bundled hex cache"),Promise.resolve()})).catch((t=>(e.log("Error fetching hex info from bundled hex cache"),Promise.resolve())));if(!e.Cloud.localToken||!window||!e.BrowserUtils.isLocalHost())return Promise.resolve(void 0);return(n="compile/"+t.sha,e.Cloud.localRequestAsync(n,o).then((e=>e.json))).then((e=>e&&!e.notInOfflineCache&&e.hex?(e.hex=e.hex.split(/\r?\n/),e):Promise.resolve(void 0))).catch((e=>Promise.resolve(void 0)));var n,o}(n).then((i=>i?(e.tickEvent("cppcompile.cachehit"),i):function(){if(o)return o;{let t=e.getOnlineCdnUrl();if(t)return o=Promise.resolve(t);const n=e.webConfig&&e.webConfig.isStatic;return o=e.Cloud.privateGetAsync("clientconfig",n).then((e=>e.primaryCdnUrl))}}().then((t=>(r=t+"/compile/"+n.sha,e.U.httpGetTextAsync(r+".hex")))).then((e=>e),(t=>e.Cloud.privatePostAsync("compile/extension",{data:n.compileData},!0).then((t=>new Promise(((n,o)=>{let i=0;const s=8e3,a=3e5,l=e.U.now(),c=()=>{if(i++,e.U.now()-l>a)return e.log("abandoning C++ build"),e.tickEvent("cppcompile.cancel",{retry:i}),n(null),null;let o=t.hex.replace(/\.hex/,".json");return e.log(`polling C++ build ${o} (attempt #${i})`),e.tickEvent("cppcompile.poll",{retry:i}),e.Util.httpGetJsonAsync(o).then((t=>{e.log(`build log ${o.replace(/\.json$/,".log")}`),e.tickEvent("cppcompile.done",{success:(null==t?void 0:t.success)?1:0,retry:i,duration:e.U.now()-l}),t.success?(e.log("fetching "+r+".hex"),n(e.U.httpGetTextAsync(r+".hex"))):(e.log("build failed"),t.mbedresponse&&t.mbedresponse.result&&t.mbedresponse.result.exception&&e.log(t.mbedresponse.result.exception),n(null))}),(t=>(e.log(`waiting ${s/1e3|0}s for C++ build...`),setTimeout(c,s),null)))};c()})))))).then((e=>(t.hideLoading(),{hex:e&&e.split(/\r?\n/)}))))).finally((()=>{t.hideLoading()}))}(r)),n[r.sha]}function s(t,n,o,r,i=10){return t.cacheStoreAsync(o,r).then((()=>t.cacheGetAsync(n))).then((r=>{let s;try{s=JSON.parse(r||"[]")}catch(e){console.error("invalid cache entry, clearing entry"),s=[]}s=s.filter((e=>e!=o)),s.unshift(o);let a=s.slice(i);return s=s.slice(0,i),e.U.promiseMapAll(a,(e=>t.cacheStoreAsync(e,"[]"))).then((()=>t.cacheStoreAsync(n,JSON.stringify(s))))}))}function a(e,t,n){return e.cacheGetAsync(t).then((o=>{let r;try{r=JSON.parse(o||"[]")}catch(n){return console.error("invalid cache entry, clearing entry"),e.cacheStoreAsync(t,"[]")}return r[0]!=n?(r=r.filter((e=>e!=n)),r.unshift(n),e.cacheStoreAsync(t,JSON.stringify(r))):null}))}t.showLoading=e=>{},t.hideLoading=()=>{},t.storeWithLimitAsync=s,t.recordGetAsync=a,t.getHexInfoAsync=function(t,n,o){if(!n.sha)return Promise.resolve(null);const l=r[n.sha];if(l)return Promise.resolve(l);e.debug("get hex info: "+n.sha);let c="hex-"+n.sha;return t.cacheGetAsync(c).then((o=>{let r;try{r=o?JSON.parse(o):null}catch(e){console.log("invalid cache entry, clearing entry"),r=null}return r&&r.hex?(e.debug("cache hit, size="+o.length),r.hex=function(t){let n=[];for(let o=0;o<t.length;o++){let r=/^([@!])(....)$/.exec(t[o]);if(!r){n.push(t[o]);continue}let i=parseInt(r[2],16),s=t[++o],a="";if("@"==r[1]){a="";let e=parseInt(s,16);for(;e-- >0;)a+="\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"}else a=ts.pxtc.decodeBase64(s);e.Util.assert(a.length>0),e.Util.assert(a.length%16==0);for(let e=0;e<a.length;){let t=[16,i>>8&255,255&i,0];i+=16;for(let n=0;n<16;++n)t.push(a.charCodeAt(e++));let o=0;for(let e=0;e<t.length;++e)o+=t[e];t.push(255&-o);let r=":";for(let e=0;e<t.length;++e){let n=255&t[e];n<=15&&(r+="0"),r+=n.toString(16)}n.push(r.toUpperCase())}}return n}(r.hex),a(t,"hex-keys",c).then((()=>r))):i(n).then((e=>{let n=e.hex;e.hex=function(e){let t=[],n=0;for(let o=0;o<e.length;o+=n){let r=-1,i="";n=0;let s=!1;for(;n<500;){let a=/^:10(....)00(.{32})(..)$/.exec(e[o+n]);if(!a)break;let l=a[2],c=/^0+$/.test(l),u=parseInt(a[1],16);if(-1==r)s=c,t.push((s?"@":"!")+a[1]),r=u-16;else{if(c!=s)break;if(r+16!=u)break}s||(i+=l),r=u,n++}if(0==n)t.push(e[o]),n=1;else if(s)t.push(n.toString(16));else{let e="";for(let t=0;t<i.length;t+=2)e+=String.fromCharCode(parseInt(i.slice(t,t+2),16));t.push(ts.pxtc.encodeBase64(e))}}return t}(e.hex);let o=JSON.stringify(e);return e.hex=n,s(t,"hex-keys",c,o).then((()=>e))})).catch((t=>(e.reportException(t,{sha:n.sha}),Promise.resolve(null))))})).then((e=>(e&&(Object.keys(r).length>20&&(r={}),r[n.sha]=e),e)))}}(e.hexloader||(e.hexloader={}))}(pxt||(pxt={})),function(e){!function(t){function n(n,o,r={},i=null,s=null){if(t.testMode||n==t.TEST_KEY){const e={success:!0};return Promise.resolve({statusCode:200,headers:{},text:JSON.stringify(e),json:e})}return e.Util.multipartPostAsync(o,r,i,s)}function o(n,o,r,i,s){e.Util.assert(!!o&&!!r&&!!i);const a="https://api.crowdin.com/api/project/"+o+"/";return s=s||{},t.testMode?delete s.key:s.key=r,n&&(s.branch=n),a+i+"?"+Object.keys(s).map((e=>`${e}=${encodeURIComponent(s[e])}`)).join("&")}function r(e){let t=0;return function(){if(t++>10)throw new Error("Too many API calls for "+e)}}function i(t,a,l,c,u){return c=s(c),e.debug(`create directory ${t||""}/${c}`),u||(u=r(c)),n(l,o(t,a,l,"add-directory"),{json:"true",name:c}).then((n=>{if(e.debug(`crowdin resp: ${n.statusCode}`),200==n.statusCode||400==n.statusCode)return Promise.resolve();if(500==n.statusCode&&n.text){if(50===JSON.parse(n.text).error.code)return e.log("directory already exists"),Promise.resolve()}const o=n.json||JSON.parse(n.text)||{error:{}};if(404==n.statusCode&&17==o.error.code){e.log(`parent directory missing for ${c}`);const n=c.replace(/\/[^\/]+$/,"");if(n!=c)return i(t,a,l,n,u).then((()=>i(t,a,l,c,u)))}throw new Error(`cannot create directory ${t||""}/${c}: ${n.statusCode} ${JSON.stringify(o)}`)}))}function s(e){return e.replace(/\\/g,"/")}function a(e,t,n,o){const r=t.name,i=n?n+"/"+r:r;switch(t.fullName=i,t.branch=o||"",t.node_type){case"file":e.push(t);break;case"directory":(t.files||[]).forEach((t=>a(e,t,i,o)));break;case"branch":(t.files||[]).forEach((o=>a(e,o,n,t.name)))}}function l(t,n){const o=e.appTarget.versions.pxtCrowdinBranch||"",r=e.appTarget.versions.targetCrowdinBranch||"";let i=[];if(t.forEach((e=>a(i,e,""))),i=i.filter((e=>e.fullName.indexOf("/")<0?e.branch==o:e.branch==r)),n&&(i=i.filter((e=>0==e.fullName.indexOf(n)))),"core"!=e.appTarget.id){const t=e.appTarget.id+"/";i=i.filter((e=>e.fullName.indexOf("/")<0||e.fullName.substr(0,t.length)==t||e.fullName.indexOf("common-docs")>=0))}return i}function c(t,n){const r=o("",t,n,"info",{json:"true"});return e.Util.httpGetTextAsync(r).then((e=>JSON.parse(e)))}t.KEY_VARIABLE="CROWDIN_KEY",t.testMode=!1,t.TEST_KEY="!!!testmode!!!",t.setTestMode=function(){e.crowdin.testMode=!0,e.log("CROWDIN TEST MODE - files will NOT be uploaded")},t.downloadTranslationsAsync=function(t,n,r,i,a={}){const l=o(t,n,r,"info",{json:"true"}),c={};return i=s(i),e.Util.httpGetTextAsync(l).then((s=>{const l=JSON.parse(s);if(!l)throw new Error("info failed");let u=l.languages.filter((e=>"en"!=e.code));e.appTarget&&e.appTarget.appTheme&&e.appTarget.appTheme.availableLocales&&(u=u.filter((t=>e.appTarget.appTheme.availableLocales.indexOf(t.code)>-1))),e.log("languages: "+u.map((e=>e.code)).join(", "));const p=()=>{const s=u.pop();if(!s)return Promise.resolve();const l=o(t,n,r,"export-file",{file:i,language:s.code,export_translated_only:a.translatedOnly?"1":"0",export_approved_only:a.validatedOnly?"1":"0"});return e.log(`downloading ${s.name} - ${s.code} (${u.length} more)`),e.Util.httpGetTextAsync(l).then((t=>{try{const e=JSON.parse(t);e&&(c[s.code]=e)}catch(t){e.log(l+" "+t)}return p()})).then((()=>e.Util.delay(1e3)))};return p()})).then((()=>c))},t.createDirectoryAsync=i,t.uploadTranslationAsync=function t(a,l,c,u,p){e.Util.assert(!!l),e.Util.assert(!!c);const d=r(u=s(u));function g(){return h("update-file",{update_option:"update_as_unapproved"})}function h(r,s){return s.type="auto",s.json="",s.escape_quotes="0",d(),n(c,o(a,l,c,r),s,u,p).then((n=>function(n){const o=n.statusCode,r=e.Util.jsonTryParse(n.text)||{};if(e.debug(`upload result: ${o}`),404==o&&r.error&&8==r.error.code)return e.log(`create new translation file: ${u}`),h("add-file",{});if(404==o&&r.error&&17==r.error.code)return i(a,l,c,u.replace(/\/[^\/]+$/,""),d).then((()=>g()));if(!r.success&&r.error&&53==r.error.code)return e.log(`${u} being updated, waiting 5s and retry...`),e.U.delay(5e3).then((()=>t(a,l,c,u,p)));if(200==o||r.success)return Promise.resolve();throw new Error(`Error, upload translation: ${u}, ${o}, ${n.text}`)}(n)))}return g()},t.projectInfoAsync=c,t.listFilesAsync=function(t,n,o){return e.log(`crowdin: listing files under ${o}`),c(t,n).then((t=>{if(!t)throw new Error("info failed");let n=l(t.files,o);return e.debug(`crowdin: found ${n.length} under ${o}`),n.map((e=>({fullName:e.fullName,branch:e.branch||""})))}))},t.languageStatsAsync=function(t,n,r){const i=o("",t,n,"language-status",{language:r,json:"true"});return e.Util.httpGetJsonAsync(i).then((e=>l(e.files)))},t.inContextLoadAsync=function(t){const n=document.createElement("input");n.type="text",n.setAttribute("class","hidden"),n.value=t;let o=new Promise(((o,r)=>{const i=new MutationObserver((()=>{if(t==n.value)return;const r=e.Util.rlf(n.value);n.remove(),i.disconnect(),o(r)}));i.observe(n,{attributes:!0})}));return document.body.appendChild(n),o}}(e.crowdin||(e.crowdin={}))}(pxt||(pxt={})),function(e){!function(t){function n(e){return e?e.split(/\r?\n/):[]}function o(e,t,o={}){o.ignoreWhitespace&&(e=e.replace(/[\r\n]+$/,""),t=t.replace(/[\r\n]+$/,""));const r=n(e),i=n(t),s=Math.min(o.maxDiffSize||1024,r.length+i.length);if(0==s)return[];const a=r.length>65520?Uint32Array:Uint16Array,l={};let c=0;const u=d(r),p=d(i);function d(e){const t=new a(e.length);let n=0;for(let r of e)o.ignoreWhitespace&&(r=r.replace(/\s+$/g,"").replace(/^\s+/g,"")),l.hasOwnProperty(r)?t[n]=l[r]:(++c,t[n]=c,l[r]=c),n++;return t}const g=new a(2*s+1);let h=-1;for(let e=0;e<=s;e++)null!=S(e,g)&&(h=e);if(-1==h)return null;const f=[];let _=null;for(let e=0;e<=h;e++){const t=f.length?f[f.length-1].slice(0):new a(2*h+1);if(f.push(t),_=S(e,t),null!=_)break}const m=[];let y=_;for(let e=f.length-1;e>=0;e--){const t=f[e];let n=0,o=0;y==-e||y!=e&&t[s+y-1]<t[s+y+1]?(o=y+1,n=t[s+o]):(o=y-1,n=t[s+o]+1);let a=n-y;for(let e=t[s+y]-n-1;e>=0;--e)m.push("  "+i[a+e]);o==y-1?m.push("- "+r[n-1]):a>0&&m.push("+ "+i[a-1]),y=o}if(m.reverse(),o.context==1/0||o.full)return m;let k=1,b=1,v=0;const T=[],E=o.context||3;for(;v<m.length;){let e=v;for(;e<m.length&&" "==m[e][0];)e++;if(e==m.length)break;const t=e-E,n=t-v;n>0&&(k+=n,b+=n,v=t);const o=T.length,r=k,i=b;T.push("@@");let s=v,a=0;for(;s<m.length;){if(" "==m[s][0]){if(a++,a>2*E+2){s-=E+2;break}}else a=0;s++}for(;v<s;){T.push(m[v]);switch(m[v][0]){case"-":k++;break;case"+":b++;break;case" ":k++,b++}v++}T[o]=`@@ -${r},${k-r} +${i},${b-i} @@`}return T;function S(e,t){for(let n=-e;n<=e;n+=2){let o=0;o=n==-e||n!=e&&t[s+n-1]<t[s+n+1]?t[s+n+1]:t[s+n-1]+1;let r=o-n;for(;o<u.length&&r<p.length&&u[o]==p[r];)o++,r++;if(t[s+n]=o,o>=u.length&&r>=p.length)return n}return null}}function r(e){return n(e).map((e=>e.replace(/;\s*$/,""))).join("\n")}function i(e){const t=/^@@ -(\d+),(\d+) \+(\d+),(\d+)/.exec(e);return t&&{oldStart:parseInt(t[1])-1,oldLength:parseInt(t[2]),newStart:parseInt(t[3])-1,newLength:parseInt(t[4])}}t.toLines=n,t.compute=o,t.diff3=function(t,r,i,s,a){const l=_(t),c=_(i);if(!l||!c)return;const u=n(t),p=n(i);let d=0,g=[],h=0,f=0;for(let t=0;t<l.length-1;)if(l[t]==h&&c[t]==f)g.push(u[h]),h++,f++,t++;else{let n=!0,o=!0,r=t;for(;r<l.length&&(l[r]!=h+r-t&&(n=!1),c[r]!=f+r-t&&(o=!1),null==l[r]||null==c[r]);)r++;if(e.U.assert(r<l.length),n)for(;f<c[r];)g.push(p[f++]);else if(o)for(;h<l[r];)g.push(u[h++]);else if(u.slice(h,l[r]).join("\n")==p.slice(f,c[r]).join("\n"))for(;h<l[r];)g.push(u[h++]);else{for(d++,g.push("<<<<<<< "+s);h<l[r];)g.push(u[h++]);for(g.push("=======");f<c[r];)g.push(p[f++]);g.push(">>>>>>> "+a)}t=r,h=l[r],f=c[r]}return{merged:g.join("\n"),numConflicts:d};function _(t){const n=o(r,t,{context:1/0});if(!n)return;const i=[];let s=0,a=0;for(let t of n)"+"==t[0]?s++:"-"==t[0]?(i[a]=null,a++):" "==t[0]?(i[a]=s,s++,a++):e.U.oops();return i.push(s+1),i}},t.removeTrailingSemiColumns=r,t.split=function(e,t){const n=e.split(/-{10,}/,2);if(n.length<2)return{fileA:e,fileB:void 0};let o=n[0].replace(/\n$/,""),i=n[1].replace(/^\n/,"");return t&&t.removeTrailingSemiColumns&&(o=r(o),i=r(i)),{fileA:o,fileB:i}},t.parseDiffMarker=i,t.render=function(t,n,r={}){const s=o(t,n,r);if(!s)return e.dom.el("div",null,pxtc.Util.lf("Too many differences to render diff."));const a={"@":"diff-marker"," ":"diff-unchanged","+":"diff-added","-":"diff-removed"};let l=0,c=0,u="";const p=e.dom.el("tbody"),d=e.dom.el("table",{class:"diffview "+(r.update?"update":"")},p);let g=null;return s.forEach(((t,n)=>{const d=i(t);d?(l=d.oldStart,c=d.newStart):("+"!=t[0]&&l++,"-"!=t[0]&&c++);const h=s[n+1]?s[n+1][0]:"",f=s[n+2]?s[n+2][0]:"",_=t.slice(2);let m=e.dom.el("code",null,_);if(g)m=g,g=null;else if(!("-"!=t[0]||" "!=u&&"@"!=u||"+"!=h||" "!=f&&"@"!=f&&""!=f)){const r=function(t,n){const r=o(t.split("").join("\n"),n.split("").join("\n"),{context:1/0});if(!r)return{a:e.dom.el("div",{class:"inline-diff"},e.dom.el("code",null,t)),b:e.dom.el("div",{class:"inline-diff"},e.dom.el("code",null,n))};const i=[],s=[];for(let t=0;t<r.length;){let n=t;const o=r[t][0];for(;r[n]&&r[n][0]==o;)n++;const a=r.slice(t,n).map((e=>e.slice(2))).join("");" "==o?(i.push(e.dom.el("code",{class:"ch-common"},a)),s.push(e.dom.el("code",{class:"ch-common"},a))):"-"==o?i.push(e.dom.el("code",{class:"ch-removed"},a)):"+"==o?s.push(e.dom.el("code",{class:"ch-added"},a)):e.Util.oops(),t=n}return{a:e.dom.el("div",{class:"inline-diff"},i),b:e.dom.el("div",{class:"inline-diff"},s)}}(t.slice(2),s[n+1].slice(2));m=r.a,g=r.b}if(u=t[0],r.hideMarkerLine&&"@"==u||r.hideRemoved&&"-"==u)return;const y="@"==u,k=`${a[u]}`;p.appendChild(e.dom.el("tr",{class:k},[!r.hideLineNumbers&&e.dom.el("td",{class:"line-a","data-content":l}),!r.hideLineNumbers&&e.dom.el("td",{class:"line-b","data-content":c}),y&&e.dom.el("td",{colspan:2,class:"change"},e.dom.el("code",null,t)),!r.hideMarker&&!y&&e.dom.el("td",{class:"marker","data-content":u}),!y&&e.dom.el("td",{class:"change"},m)]))})),d},t.resolveMergeConflictMarker=function(t,n,o,r){let i=e.diff.toLines(t),s=n;for(;s<i.length&&!/^<<<<<<<[^<]/.test(i[s]);)s++;let a=s+1;for(;a<i.length&&!/^=======$/.test(i[a]);)a++;let l=a+1;for(;l<i.length&&!/^>>>>>>>[^>]/.test(i[l]);)l++;if(l>=i.length)return e.debug(`diff marker mistmatch: ${i.length} -> ${s} ${a} ${l}`),t;if(i[s]=void 0,i[a]=void 0,i[l]=void 0,!o)for(let e=s;e<=a;++e)i[e]=void 0;if(!r)for(let e=a;e<=l;++e)i[e]=void 0;return i.filter((e=>void 0!==e)).join("\n")},t.mergeDiff3Config=function(t,n,o){let r=e.Util.jsonTryParse(t),i=e.Util.jsonTryParse(n),s=e.Util.jsonTryParse(o);if(r&&!s)return t;if(!r)return o||n;if(!i&&s&&(i=s),!r||!i||!s)return;delete r.installedVersion,delete i.installedVersion,delete s.installedVersion;const a={},l=e.U.unique(Object.keys(i).concat(Object.keys(r)).concat(Object.keys(s)),(e=>e));for(const t of l){const n=r[t],o=i[t],l=s[t];if(JSON.stringify(n)==JSON.stringify(l))void 0!==n&&(a[t]=n);else switch(t){case"name":a[t]=c(n,o,l);break;case"version":a[t]=e.semver.strcmp(n,l)>0?n:l;break;case"languageRestriction":case"preferredEditor":case"targetVersion":a[t]=n;break;case"public":a[t]=n&&l;break;case"files":case"testFiles":{const e=u(n||[],o||[],l||[]);if(!e)return;a[t]=e.length?e:void 0;break}case"dependencies":case"testDependencies":{const e=p(n||{},o||{},l||{});if(Object.keys(e).length)return;a[t]=e;break}case"description":if(n&&!l)a[t]=n;else{if(n||!l)return;a[t]=l}break;default:return}}return e.Package.stringifyConfig(a);function c(e,t,n){return e==t?n:n==t?e:e==lf("Untitled")?n:e}function u(t,n,o){const r=[],i=e.U.unique(n.concat(t).concat(o),(e=>e));for(const e of i){const i=t.indexOf(e)>-1,s=o.indexOf(e)>-1,a=n.indexOf(e)>-1;i==s||s==a?i&&r.push(e):s&&r.push(e)}return r}function p(t,n,o){const r={},i=e.U.unique(Object.keys(n).concat(Object.keys(t)).concat(Object.keys(o)),(e=>e));for(const s of i){const i=t[s],a=o[s],l=n[s];if(i==a)i&&(r[s]=i);else{const t=e.github.parseRepoId(i),n=e.github.parseRepoId(a);if(t&&n&&e.semver.tryParse(t.tag)&&e.semver.tryParse(n.tag)&&t.owner&&t.project&&t.owner==n.owner&&t.project==n.project){const o=e.semver.strcmp(t.tag,n.tag)>0?t.tag:n.tag;r[s]=`github:${t.owner}/${t.project}#${o}`}else a==l?i&&(r[s]=i):a&&(r[s]=a)}}return r}},t.hasMergeConflictMarker=function(e){return e&&/^(<<<<<<<[^<]|>>>>>>>[^>])/m.test(e)},t.reconstructConfig=function(t,n,o,r){let i={},s=o.tree.tree.map((e=>e.path)).filter((e=>/\.(ts|blocks|md|jres|asm|json)$/.test(e))).filter((t=>t!=e.CONFIG_NAME));return t.fileName&&(s=s.filter((e=>0===e.indexOf(t.fileName))).map((e=>e.slice(t.fileName.length+1)))),s.find((e=>/\.ts$/.test(e)))||(r.config.files.filter((e=>s.indexOf(e)<0)).forEach((e=>{s.push(e),n[e]=r.files[e]})),e.Util.jsonCopyFrom(i,r.config.dependencies)),Object.keys(i).length||(i[e.appTarget.corepkg]="*"),{name:"",files:s,dependencies:i,preferredEditor:s.find((e=>/.blocks$/.test(e)))?e.BLOCKS_PROJECT_NAME:e.JAVASCRIPT_PROJECT_NAME}}}(e.diff||(e.diff={}))}(pxt||(pxt={})),function(e){!function(t){t.extractSharedIdFromPostUrl=function(t){return e.Util.httpGetJsonAsync(t+".json").then((t=>t.post_stream&&t.post_stream.posts&&t.post_stream.posts[0]&&t.post_stream.posts[0].link_counts.map((t=>e.Cloud.parseScriptId(t.url))).filter((e=>!!e))[0]))},t.topicsByTag=function(t,n){const o=`${t=t.replace(/\/$/,"")}/tag/${n}.json`;return e.Util.httpGetJsonAsync(o).then((n=>{const o=e.Util.toDictionary(n.users,(e=>e.id.toString()));return n.topic_list.topics.map((e=>({id:e.id,title:e.title,url:`${t}/t/${e.slug}/${e.id}`,imageUrl:e.image_url,author:o[e.posters[0].user_id].username,cardType:"forumUrl"})))}))}}(e.discourse||(e.discourse={}))}(pxt||(pxt={})),function(e){!function(t){var n=pxtc.Util;let o,r={},i={};const s="\x3c!-- @CMD@ @ARGS@ --\x3e";let a={parent:s,short:s,description:"\x3c!-- desc --\x3e",activities:"\x3c!-- activities --\x3e",explicitHints:"\x3c!-- hints --\x3e",flyoutOnly:"\x3c!-- flyout --\x3e",hideIteration:"\x3c!-- iter --\x3e",codeStart:"\x3c!-- start --\x3e",codeStop:"\x3c!-- stop --\x3e",autoOpen:"\x3c!-- autoOpen --\x3e",autoexpandOff:"\x3c!-- autoexpandOff --\x3e",preferredEditor:"\x3c!-- preferredEditor --\x3e",tutorialCodeValidation:"\x3c!-- tutorialCodeValidation --\x3e"};function l(e,t,n){return e.split(t).join(n)}function c(e){return e=l(e,"&","&amp;"),e=l(e,"<","&lt;"),e=l(e,">","&gt;"),e=l(e,'"',"&quot;"),e=l(e,"'","&#39;")}function u(e){return e?c(e.replace(/\&([#a-z0-9A-Z]+);/g,((e,t)=>{switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"==t[0]?String.fromCharCode(parseInt(t.slice(1))):e}}))):e}t.htmlQuote=c,t.html2Quote=u;const p=[{rx:/^vimeo\.com\/(\d+)/i,cmd:"### @vimeo $1"},{rx:/^(www\.youtube\.com\/watch\?v=|youtu\.be\/)([\w\-]+(\#t=([0-9]+m[0-9]+s|[0-9]+m|[0-9]+s))?)/i,cmd:"### @youtube $2"}];t.requireMarked=()=>"undefined"!=typeof marked?marked:"undefined"!=typeof require?require("marked"):void 0,t.requireDOMSanitizer=()=>"undefined"!=typeof DOMPurify?DOMPurify.sanitize:"undefined"!=typeof require?require("DOMPurify").sanitize:void 0;const d=e=>`<div class='ui negative message'>${c(e)}</div>`;function g(e){let t=n.clone(r),o=n.clone(i),s=n.clone(a),l={},c={},p=e.params,g=e.theme;e.boxes=t,e.macros=o,e.settings=s,e.html=e.html.replace(/<aside\s+([^<>]+)>([^]*?)<\/aside>/g,((e,n,r)=>{let i=function(e){let t={};for(;e.trim();){let n=/\s*([^=\s]+)=("([^"]*)"|'([^']*)'|(\S*))/.exec(e);if(n){let e=n[3]||n[4]||n[5]||"";t[n[1].toLowerCase()]=e}else n=/^\s*(\S+)/.exec(e),t[n[1]]="true";e=e.slice(n[0].length)}return t}(n),a=i["data-name"]||i.id;return a?(/box/.test(i.class)?t[a]=r:/aside/.test(i.class)?t[a]=`\x3c!-- BEGIN-ASIDE ${a} --\x3e${r}\x3c!-- END-ASIDE --\x3e`:/setting/.test(i.class)?s[a]=r:/menu/.test(i.class)?l[a]=r:/toc/.test(i.class)?c[a]=r:o[a]=r,`\x3c!-- macro ${a} --\x3e`):d("id or data-name missing on macro")}));let h=(e,t)=>{let n=l.item,o={NAME:e.name};if(e.subitems)n=l["toc-dropdown"]?l["toc-dropdown"]:0==t?l["top-dropdown"]:l["inner-dropdown"],o.ITEMS=e.subitems.map((e=>h(e,t+1))).join("\n");else{if(/^-+$/.test(e.name)&&(n=l.divider),e.path&&!/^(https?:|\/)/.test(e.path))return d("Invalid link: "+e.path);o.LINK=e.path}return _(n,o,["ITEMS"])},f=[{name:lf("Docs"),href:"/docs"}];const m=e.TOC||g.TOC||[];let y=[],k=t=>{for(let e of t.subitems||[])if(k(e))return y.push(t),!0;return!(!e.filepath||!t.path||0!=e.filepath.indexOf(t.path))&&(y.push(t),!0)};m.forEach(k);let b=(t,n)=>{let o=c.item,r={NAME:t.name};return t.path&&!/^(https?:|\/)/.test(t.path)?d("Invalid link: "+t.path):(/^\//.test(t.path)&&e.versionPath&&(t.path=`/${e.versionPath}${t.path}`),r.LINK=t.path,y.indexOf(t)>=0?(r.ACTIVE="active",r.EXPANDED="true",f.push({name:t.name,href:t.path})):r.EXPANDED="false",t.subitems&&t.subitems.length>0?(o=c["toc-dropdown"]?""!==t.name?c["toc-dropdown"]:c["toc-dropdown-noLink"]:0==n?""!==t.name?c["top-dropdown"]:c["top-dropdown-noHeading"]:1==n?c["inner-dropdown"]:c["nested-dropdown"],r.ITEMS=t.subitems.map((e=>b(e,n+1))).join("\n")):/^-+$/.test(t.name)&&(o=c.divider),_(o,r,["ITEMS"]))};p.menu=(g.docMenu||[]).map((e=>h(e,0))).join("\n"),p.TOC=m.map((e=>b(e,0))).join("\n"),g.appStoreID&&(p.appstoremeta=`<meta name="apple-itunes-app" content="app-id=${n.htmlEscape(g.appStoreID)}"/>`);let v="";f.length>1&&(v=`\n            <nav class="ui breadcrumb" aria-label="${lf("Breadcrumb")}">\n                ${f.map(((e,t)=>`<a class="${t==f.length-1?"active":""} section"\n                        href="${u(e.href)}" aria-current="${t==f.length-1?"page":""}">${u(e.name)}</a>`)).join('<i class="right chevron icon divider"></i>')}\n            </nav>`),p.breadcrumb=v,g.boardName&&(p.boardname=u(g.boardName)),g.boardNickname&&(p.boardnickname=u(g.boardNickname)),g.driveDisplayName&&(p.drivename=u(g.driveDisplayName)),g.homeUrl&&(p.homeurl=u(g.homeUrl)),p.targetid=g.id||"???",p.targetname=g.name||"Microsoft MakeCode",p.docsheader=g.docsHeader||"Documentation",p.orgtitle="MakeCode";const T=g.docsLogo&&n.htmlEscape(g.docsLogo),E=(g.organizationWideLogo||g.organizationLogo)&&n.htmlEscape(g.organizationWideLogo||g.organizationLogo),S=g.organizationLogo&&n.htmlEscape(g.organizationLogo);p.targetlogo=T?`<img aria-hidden="true" role="presentation" class="ui ${g.logoWide?"small":"mini"} image" src="${T}" />`:"",p.orglogo=E?`<img aria-hidden="true" role="presentation" class="ui image" src="${E}" />`:"",p.orglogomobile=S?`<img aria-hidden="true" role="presentation" class="ui image" src="${S}" />`:"";let C=e.ghEditURLs||[];if(C.length){let e='<p style="margin-top:1em">\n',t=lf("Edit this page on GitHub");for(let n of C)e+=`<a href="${n}"><i class="write icon"></i>${t}</a><br>\n`,t=lf("Edit template of this page on GitHub");e+="</p>\n",p.github=e}else p.github="";const x=`\n            <a href="#maincontent" class="ui item link" tabindex="0" role="menuitem">${lf("Skip to main content")}</a>\n        `;p.accMenu=x;const B=lf("Print this page"),A=`\n            <button id="printbtn" class="circular ui icon right floated button hideprint" title="${B}" aria-label="${B}">\n                <i class="icon print"></i>\n            </button>\n        `;p.printBtn=A;const I=`\n            <a id="togglesidebar" class="launch icon item" tabindex="0" title="Side menu" aria-label="${lf("Side menu")}" role="menuitem" aria-expanded="false">\n                <i class="content icon"></i>\n            </a>\n        `;p.sidebarToggle=I;const D=["tocsearch1","tocsearch2"].map((e=>`\n                <input type="search" name="q" placeholder="${lf("Search...")}" aria-label="${lf("Search Documentation")}">\n                <i onclick="document.getElementById('${e}').submit();" tabindex="0" class="search link icon" aria-label="${lf("Search")}" role="button"></i>\n            `));p.searchBar1=D[0],p.searchBar2=D[1];let N="";g.accentColor&&(N+=`\n.ui.accent { color: ${g.accentColor}; }\n.ui.inverted.accent { background: ${g.accentColor}; }\n`),p.targetstyle=N,p.tocclass=g.lightToc?"lighttoc":"inverted";for(let e of Object.keys(g)){let t=g[e];void 0===p[e]&&"string"==typeof t&&(p[e]=t)}e.finish=()=>_(e.html,p,["body","menu","accMenu","TOC","prev","next","printBtn","breadcrumb","targetlogo","orglogo","orglogomobile","github","JSON","appstoremeta","sidebarToggle","searchBar1","searchBar2"])}function h(e){e.image=function(e,t,n){let o='<img class="ui image" src="'+e+'" alt="'+n+'"';return t&&(o+=' title="'+t+'"'),o+=' loading="lazy"',o+=this.options.xhtml?"/>":">",o},e.listitem=function(e){const t=/^\s*\[( |x)\]/i.exec(e);return t?`<li class="${" "==t[1]?"unchecked":"checked"}">`+e.slice(t[0].length)+"</li>\n":"<li>"+e+"</li>\n"},e.heading=function(e,t,n){let o=/(.*)#([\w\-]+)\s*$/.exec(e),r="";return o?(e=o[1],r=o[2]):r=n.toLowerCase().replace(/[^\w]+/g,"-"),e&&(e=e.replace(/@(fullscreen|unplugged|showdialog|showhint)/gi,"")),(e=e.trim()).match(/^\{([\s\S]+)\}$/)&&(e=e.substr(1,e.length-2)),`<h${t} id="${this.options.headerPrefix}${r}">${e}</h${t}>`}}function f(e,t){return e.replace(/<!--\s*@(ifn?def)\s+(\w+)\s*-->([^]*?)<!--\s*@endif\s*-->/g,((e,n,o,r)=>"ifdef"==n&&t[o]||"ifndef"==n&&!t[o]?`\x3c!-- ${n} ${o} --\x3e${r}\x3c!-- endif --\x3e`:`\x3c!-- ${n} ${o} endif --\x3e`))}function _(e,t,o=[]){return e?e.replace(/@(\w+)@/g,((e,r)=>{let i=n.lookup(t,r)||"";return i+="",o.indexOf(r)<0&&(i=u(i)),i})):""}t.prepTemplate=g,t.setupRenderer=h,t.renderConditionalMacros=f,t.renderMarkdown=function(e){let r=!0;e.pubinfo||(r=!1,e.pubinfo={});let i=e.pubinfo;if(e.theme||(e.theme={}),delete e.pubinfo.private,i.time){let e=parseInt(i.time);i.timems||(i.timems=1e3*e+""),i.humantime||(i.humantime=n.isoTime(e))}i.name&&(i.dirname=i.name.replace(/[^A-Za-z0-9_]/g,"-"),i.title=i.name),r&&(i.JSON=JSON.stringify(i,null,4).replace(/</g,"\\u003c"));let s=e.template;s=s.replace(/<!--\s*@include\s+(\S+)\s*-->/g,((t,n)=>"\x3c!-- include "+n+" --\x3e\n"+((e.theme.htmlDocIncludes||{})[n]||"")+"\n\x3c!-- end include --\x3e\n")),s=f(s,i),e.locale&&(s=y(s,e.locale).text);let a={html:s,theme:e.theme,filepath:e.filepath,versionPath:e.versionPath,ghEditURLs:e.ghEditURLs,params:i,TOC:e.TOC};g(a),o||(o=t.requireMarked());let l=new o.Renderer;h(l);const c=l.link;l.link=function(e,t,n){const o=new RegExp("^[/#]").test(e),r=o?"":"_blank";o&&a.versionPath&&(e=`/${a.versionPath}${e}`);return c.call(l,e,t,n).replace(/^<a /,`<a ${r?`target="${r}"`:""} rel="nofollow noopener" `)};let m=t.requireDOMSanitizer();o.setOptions({renderer:l,gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!0,sanitizer:m,smartLists:!0,smartypants:!0});let k=e.markdown;e.repo&&(k+=`\n\`\`\`package\n${e.repo.name.replace(/^pxt-/,"")}=github:${e.repo.fullName}#${e.repo.tag||"master"}\n\`\`\`\n`),k=k.replace(/^\s*https?:\/\/(\S+)\s*$/gm,((e,t)=>{for(let e of p){let n=e.rx.exec(t);if(n)return e.cmd.replace(/\$(\d+)/g,((e,t)=>n[parseInt(t)]||""))+"\n"}return e})),k=k.replace(/@([a-z]+)@/gi,((t,o)=>{let r=i[o];return!r&&e.throwOnError&&n.userError(`unknown macro ${o}`),r||"unknown macro"}));let b=o(k);b=b.replace(/&lt;br\s*\/&gt;/gi,"<br/>"),b=b.replace(/(<img [^>]* src=")\/docs\/static\/([^">]+)"/g,((e,t,n)=>t+"/static/"+n+'"'));let v="",T=0;function E(e,t,n){let o=n;return e<=T&&(o=v+o,v="",T=0),o}if(b=b.replace(/<h(\d)[^>]+>\s*([~@])?\s*(.*?)<\/h\d>/g,((t,o,r,s)=>{let l=/^(\w+)\s+(.*)/.exec(s),c=l?l[1]:s,p=l?l[2]:"";if(p=u(p),c=u(c),o=parseInt(o),r){if("@"==r){let t=n.lookup(a.settings,c);if(null!=t)i[c]=p;else if(t=n.lookup(a.macros,c),null==t)return e.throwOnError&&n.userError(`Unknown command: @${c}`),d(`Unknown command: @${c}`);return E(o,0,_(t,{ARGS:p,CMD:c},["ARGS","CMD"]))}{if(!c){let e=v;return v="",e}let t=n.lookup(a.boxes,c);if(t){let e=t.split("@BODY@"),n=E(o,0,e[0].replace("@ARGS@",p));v=e[1];let r=t.match(/data-[^>\s]+/gi);return r&&r.indexOf("data-inferred")>=0&&(T=o),n}return e.throwOnError&&n.userError(`Unknown box: ~ ${c}`),d(`Unknown box: ~ ${c}`)}}return E(o,0,t)})),v&&(b+=v),!i.title){let e=/<h1[^<>]*>([^<>]+)<\/h1>/.exec(b);e&&(i.title=u(e[1]))}if(!i.description){let e=/<p>([^]+?)<\/p>/.exec(b);e&&(i.description=u(e[1]))}const S=/<div class="ui embed mdvid"[^<>]+?data-placeholder="([^"]+)"[^>]*\/?>/i.exec(b)||/<img class="ui [^"]*image" src="([^"]+)"[^>]*\/?>/i.exec(b);S&&(i.cardLogo=u(S[1])),i.twitter=u(e.theme.twitter||"@msmakecode");let C={main:""};b=b.replace(/<!-- BEGIN-ASIDE (\S+) -->([^]*?)<!-- END-ASIDE -->/g,((e,t,o)=>{let r=n.lookup(C,t);return C[t]=(r||"")+o,"\x3c!-- aside --\x3e"})),b=b.replace(/\n<\/code>/g,"</code>"),C.main=b,b="";for(let e of Object.keys(C))b+=(x=e+"-container",B=C[e],_(a.boxes[x]||"@BODY@",{BODY:B},["BODY"]));var x,B;i.body=b,i.name=i.title||"";for(let t of Object.keys(e.theme)){let n=e.theme[t];"string"==typeof n&&(i["theme_"+t]=n)}return a.finish()},t.embedUrl=function(e,t,n,o){return`<div style="position:relative;height:0;padding-bottom:70%;overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="${`${e}#${t}:${n}`}" frameborder="0" sandbox="allow-popups allow-forms allow-scripts allow-same-origin"></iframe></div>`},t.runUrl=function(e,t,n){return`<div style="position:relative;height:0;padding-bottom:${t};overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="${e}?id=${encodeURIComponent(n)}" allowfullscreen="allowfullscreen" sandbox="allow-popups allow-forms allow-scripts allow-same-origin" frameborder="0"></iframe></div>`},t.codeEmbedUrl=function(e,t,n){const o=`${e}---codeembed#pub:${t}`;return`<div style="position:relative;height:calc(${n=Math.ceil(n||300)}px + 5em);width:100%;overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="${o}" allowfullscreen="allowfullscreen" frameborder="0" sandbox="allow-scripts allow-same-origin"></iframe></div>`};const m={b:1,strong:1,em:1};function y(e,t){const o={};function r(e){let r=/^(\s*)([^]*?)(\s*)$/.exec(e),i=r[2].replace(/\s+/g," ");if(""==i||/^((IE=edge,.*|width=device-width.*|(https?:\/\/|\/)[\w@\/\.]+|@[\-\w]+@|\{[^\{\}]+\}|[^a-zA-Z]*|(&nbsp;)+)\s*)+$/.test(i))return null;let s=n.lookup(t,i);return s?i=s:o[i]="",r[1]+i+r[3]}function i(e){return e.replace(/&llt;/g,"<").replace(/&ggt;/g,">")}return{text:e=(e=(e=(e="<start>"+(e=e.replace(/<([\/\w]+)([^<>]*)>/g,((e,t,n)=>{let o=t.replace(/^\//,"").toLowerCase();return 1===m[o]?"&llt;"+t+n+"&ggt;":e})))).replace(/(<([\/\w]+)([^<>]*)>)([^<>]+)/g,((e,t,n,o,s)=>{if("script"==n||"style"==n)return i(e);let a=r(i(s));return null==a?i(e):t+a}))).replace(/(<[^<>]*)(content|placeholder|alt|title)="([^"]+)"/g,((e,t,n,o)=>null==r(o)?e:t+n+'="'+o.replace(/"/g,"''")+'"'))).replace(/^<start>/g,""),missing:o}}function k(e,t){if(e.id==t)return e;for(let n of e.children){let e=k(n,t);if(e)return e}return null}function b(e,t){let n=0,o=[{level:0,id:"",title:"",start:n,text:"",children:[]}],r=(e=e.replace(/\r/g,"")).split(/\n/),i={};for(let e of r){let r=/^\s*(#+)\s*(.*?)(#(\S+)\s*)?$/.exec(e),s=null;if(t&&r)if(r[4])if(i[r[4]])r=null;else{s=k(t,r[4]);let e=t=>{t.id&&(i[t.id]=!0),t.children.forEach(e)};s&&e(s)}else r=null;if(r){let i={level:t?1:r[1].length,title:r[2].trim(),id:r[4]||"",start:n,text:"",children:[]};if(s){e="";for(let t=0;t<s.level;++t)e+="#";e+=" ",e+=i.title||s.title,e+=" #"+i.id}for(;o[o.length-1].level>=i.level;)o.pop();o[o.length-1].children.push(i),o.push(i)}o[o.length-1].text+=e+"\n",n++}return o[0]}t.translate=y,t.buildTOC=function(n){if(!n)return null;const o=e.docs.requireMarked(),r=t.requireDOMSanitizer(),i={renderer:new o.Renderer,gfm:!0,tables:!1,breaks:!1,pedantic:!1,sanitize:!0,sanitizer:r,smartLists:!1,smartypants:!1};let s={name:"dummy",subitems:[]},a=[];a.push(s);let l=o.lexer(n,i),c=!1;l.forEach((e=>{switch(e.type){case"heading":e.depth;break;case"list_start":break;case"list_item_start":case"loose_item_start":c=!0;let t={name:"",path:"",subitems:[]};return void a.push(t);case"text":let n=a[a.length-1];e.text.indexOf("[")>=0?e.text.replace(/\[(.*?)\]\((.*?)\)/i,(function(e,t,o){n.name=t,n.path=o.replace(".md","")})):c&&(n.name=e.text);break;case"list_item_end":case"loose_item_end":let o=a.pop();a[a.length-1].subitems.push(o)}c=!1}));let u=s.subitems;return u&&0!=u.length?u:null},t.visitTOC=function(e,t){e.forEach((function(e){t(e),e.subitems&&e.subitems.forEach(t)}))};let v=!1;function T(e,t){if(v||function(){function e(e,t,n){let o=T(e,t).trim();if(o!=(n=n.trim()))throw console.log(`*** Template:\n${e}\n*** Input:\n${t}\n*** Expected:\n${n}\n*** Output:\n${o}`),new Error("augment docs test fail")}v=!0;let t="\n# T0\n## Examples #ex\n### Example 1\nTEx1\n### Example 2 #ex2\nTEx2\n### Example 3\nTEx3\n\n## See also #also\nTAlso\n",n="\n# @extends\n# #ex2\nMy example\n## See Also These! #also\nMy links\n",o="\n# T0\n## Examples #ex\n### Example 1\nTEx1\n### Example 2 #ex2\nMy example\n### Example 3\nTEx3\n\n## See Also These! #also\nMy links\n",r="\n# @extends\n### #ex\nFoo\n#### Example 1\nEx1\n#### Example 2x #ex2\nEx2\n## See Also These! #also\nMy links\n",i="\n# T0\n## Examples #ex\nFoo\n#### Example 1\nEx1\n#### Example 2x #ex2\nEx2\n## See Also These! #also\nMy links\n";e(t,"",t),e(t," ",t),e(t,n,o),e(t,r,i)}(),!t)return e;let o=b(e,null),r=b(t,o),i={},s={};for(let e of r.children)n.assert(0==e.children.length),n.assert(!!e.id),i[e.id]=e.text;let a=e=>{e.id&&void 0!==i[e.id]&&(s[e.id]=!0,e.text=i[e.id],e.children=[]),e.children.forEach(a)};a(o);let l="",c=e=>{l+=e.text,e.children.forEach(c)};c(o);let u="",p=r.text.replace(/^\s*#+\s*@extends.*/gm,"").replace(/^\s*\n/gm,"");p.trim()&&(u+=p.trim()+"\n");for(let e of r.children)s[e.id]||(u+=e.text);return u&&(l+="## Couldn't apply replacement logic to:\n"+u),l}t.augmentDocs=T}(e.docs||(e.docs={}))}(pxt||(pxt={})),function(e){!function(e){e.el=function(e,t,n){const o=document.createElement(e);return t&&Object.keys(t).forEach((e=>o.setAttribute(e,t[e]+""))),function e(t){Array.isArray(t)?t.forEach((t=>e(t))):"string"==typeof t?o.appendChild(document.createTextNode(t)):t instanceof HTMLElement&&o.appendChild(t)}(n),o}}(e.dom||(e.dom={}))}(pxt||(pxt={})),function(e){!function(t){function n(e){const t=/```package\s+((.|\s)+?)\s*```/i.exec(e);let n;return t&&(n={},t[1].split("\n").map((e=>e.replace(/\s*/g,""))).filter((e=>!!e)).map((e=>e.split("="))).forEach((e=>n[e[0]]=e[1]||"*"))),n}function o(e){const t=/```config\s+((.|\s)+?)\s*```/i.exec(e);let n=[];return t&&t[1].split("\n").map((e=>e.replace(/\s*/g,""))).filter((e=>!!e)).map((e=>e.split("="))).filter((e=>"feature"==e[0]&&!!e[1])).forEach((e=>n.push(e[1]))),n.length?n:void 0}function r(t){const n=/```jres\s+((.|\s)+?)\s*```/i.exec(t);if(n){const t=n[1],o=JSON.parse(t);return{jres:t,ts:e.emitTilemapsFromJRes(o)}}}function i(t){const n=/```assetjson\s+((.|\s)+?)\s*```/i.exec(t);return n?e.tutorial.parseAssetJson(n[1]):{}}function s(t){let n=e.Util.jsonTryParse(t);return n&&!Array.isArray(n)&&(n=[n]),(null==n?void 0:n.length)?n:(n=t.split(/^---$/gm).filter((e=>!!e)).map((e=>{let t={};return e.replace(/^\s*(?:-|\*)\s+(\w+)\s*:\s*(.*)$/gm,((e,n,o)=>{if("flags"==n)t[n]=o.split(",");else if("otherAction"===n){const e=o.split(",").map((e=>null==e?void 0:e.trim()));(t.otherActions||(t.otherActions=[])).push({url:e[0],editor:e[1],cardType:e[2]})}else t[n]=o;return""})),!!Object.keys(t).length&&t})).filter((e=>!!e)),(null==n?void 0:n.length)?n:void 0)}function a(t){if(!t)return[];const n=[];let o,r=!1,i="";return t.split(/\r?\n/).forEach((t=>{if(/^## /.test(t))o=t.substr(2).trim();else if(/^(### ~ |```)codecard$/.test(t))r=!0;else if(/^(### ~|```)$/.test(t)){if(r=!1,o&&i){const t=s(i);(null==t?void 0:t.length)?n.push({name:o,cards:t}):e.log("invalid gallery format")}i="",o=void 0}else r&&(i+=t+"\n")})),n.forEach((t=>t.cards.forEach((t=>{if(t.otherActions&&!t.otherActions.length&&("tutorial"==t.cardType||"example"==t.cardType)){const n=["js"];e.appTarget.appTheme.python&&n.unshift("py"),t.otherActions=n.map((e=>({url:t.url,cardType:t.cardType,editor:e})))}})))),n}t.parsePackagesFromMarkdown=n,t.parseFeaturesFromMarkdown=o,t.parseJResFromMarkdown=r,t.parseTemplateProjectJSON=i,t.parseExampleMarkdown=function(t,s){if(!s)return;const a=/```(blocks?|typescript|python|spy|sim)\s+((.|\s)+?)\s*```/i.exec(s);if(!a)return;const l=n(s),c=a[1],u=a[2],p=o(s),d=r(s),g={name:t,filesOverride:{[e.MAIN_BLOCKS]:'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',["python"===a[1]?e.MAIN_PY:e.MAIN_TS]:u},dependencies:l,features:p,snippetType:c,source:u};return g.filesOverride=Object.assign(Object.assign({},g.filesOverride),i(s)),d&&(g.filesOverride[e.TILEMAP_JRES]=d.jres,g.filesOverride[e.TILEMAP_CODE]=d.ts),g},t.parseCodeCards=s,t.parseCodeCardsHtml=function(t){let n,o=[];return Array.from(t.children).forEach((e=>{"UL"===e.tagName||"OL"===e.tagName?(n||(n={}),Array.from(e.querySelectorAll("li")).forEach((e=>{const t=e.innerText,o=/^\s*(\w+)\s*:\s*(.*)$/.exec(t);if(o){const e=o[1];n[e]=o[2].trim(),"flags"===e&&(n[e]=n[e].split(/,\s*/))}}))):"HR"==e.tagName&&(n&&o.push(n),n=void 0)})),n&&o.push(n),0===o.length&&"CODE"===t.tagName&&(o=e.Util.jsonTryParse(t.textContent)),!!(null==o?void 0:o.length)&&o},t.parseGalleryMardown=a,t.loadGalleryAsync=function(t){return e.Cloud.markdownAsync(t).then((e=>a(e)))},t.codeCardsToMarkdown=function(e){return`### ~ codecard\n\n${(e||[]).map((e=>Object.keys(e).filter((t=>!!e[t])).map((t=>"otherActions"===t?e[t].map((e=>`* otherAction: ${e.url}, ${e.editor||""}, ${e.cardType||""}`)).join("\n"):`* ${t}: ${e[t]}`)).join("\n"))).join("\n\n---\n\n")}\n\n### ~\n`}}(e.gallery||(e.gallery={}))}(pxt||(pxt={})),function(e){e.GDBServer=class{constructor(t){this.io=t,this.q=new e.U.PromiseQueue,this.dataBuf="",this.numSent=0,this.pktSize=400,this.trace=!1,this.bmpMode=!0,this.targetInfo="",this.onEvent=e=>{},this.io.onData=e=>this.onData(e)}onData(t){for(this.dataBuf+=e.U.uint8ArrayToString(t);this.dataBuf.length>0;){let e=this.dataBuf[0];if("+"==e)this.dataBuf=this.dataBuf.slice(1);else if("$"==e||"%"==e){let t=this.decodeResp(this.dataBuf.slice(1));if(null==t)break;"$"==e?(this.io.sendPacketAsync(this.buildCmd("+")),this.onResponse?this.onResponse(t):this.numSent>0&&this.io.error("unexpected response: "+t)):this.onEvent(t)}else this.io.error("invalid character: "+e)}}buildCmd(t){if("+"==t)return e.U.stringToUint8Array(t);let n="";for(let e=0;e<t.length;++e){let o=t.charAt(e);"}"==o||"#"==o||"$"==o?(n+="}",n+=String.fromCharCode(32^o.charCodeAt(0))):n+=o}let o=0;t=n;for(let e=0;e<t.length;++e)o=o+t.charCodeAt(e)&255;return n="$"+t+"#"+("0"+o.toString(16)).slice(-2),e.U.stringToUint8Array(n)}decodeResp(e){let t="";for(let n=0;n<e.length;++n){let o=e[n];if("}"==o)++n,t+=String.fromCharCode(32^e.charCodeAt(n));else if("*"==o){++n;let o=e.charCodeAt(n)-29,r=t.charAt(t.length-1);for(;o-- >0;)t+=r}else{if("#"==o){return 2==e.slice(n+1,n+3).length?(this.dataBuf=e.slice(n+3),t):null}t+=o}}return null}sendCmdOKAsync(e){return this.sendCmdAsync(e,(e=>"OK"==e))}error(e){this.io.error(e),this.io.disconnectAsync()}sendCmdAsync(t,n){this.numSent++;const o=this.buildCmd(t);return this.q.enqueue("one",(()=>null===n?this.io.sendPacketAsync(o).then((()=>null)):new Promise((r=>{this.onResponse=o=>{this.onResponse=null,this.trace&&e.log(`GDB: '${t}' -> '${o}'`),void 0===n||n(o)||this.error(`Invalid GDB command response: '${t}' -> '${o}'`),r(o)},this.io.sendPacketAsync(o)}))))}sendRCmdAsync(t){return this.sendMCmdAsync("qRcmd,"+(n=t,e.U.toHex(e.U.stringToUint8Array(n))));var n}sendMCmdAsync(t){this.numSent++;const n=this.buildCmd(t);let o="";return this.q.enqueue("one",(()=>new Promise((r=>{this.onResponse=n=>{var i;"OK"!=n&&"O"==n[0]?o+=(i=n.slice(1),e.U.uint8ArrayToString(e.U.fromHex(i))):("OK"!=n&&(o+=" - "+n),this.onResponse=null,this.trace&&e.log(`Final GDB: '${t}' -> '${o}'`),r(o))},this.io.sendPacketAsync(n)}))))}write32Async(t,n){let o=new Uint8Array(4);return e.HF2.write32(o,0,n),this.writeMemAsync(t,o)}writeMemAsync(t,n){const o=this.pktSize/2-10;return e.U.assert(n.length<o),this.sendCmdOKAsync("M"+t.toString(16)+","+n.length.toString(16)+":"+e.U.toHex(n)).then((e=>{console.log(e)}))}readMemAsync(t,n){const o=this.pktSize/2-6;if(n>o){const r=new Uint8Array(n),i=s=>{const a=Math.min(n-s,o);return 0==a?Promise.resolve(r):this.readMemAsync(t+s,a).then((t=>(e.U.memcpy(r,s,t),i(s+a))))};return i(0)}return this.sendCmdAsync("m"+t.toString(16)+","+n.toString(16)).then((t=>e.U.fromHex(t)))}initBMPAsync(){return Promise.resolve().then((()=>this.sendRCmdAsync("swdp_scan"))).then((e=>(this.targetInfo=e,this.sendCmdAsync("vAttach;1",(e=>"T"==e[0]))))).then((()=>{}))}initAsync(){return e.U.delay(1e3).then((()=>this.sendCmdAsync("!"))).then((()=>this.sendCmdAsync("qSupported"))).then((t=>{let n={};return t=(t=";"+t+";").replace(/;([^;]+)[=:]([^:;]+)/g,((e,t,o)=>(n[t]=o,";"))),this.pktSize=parseInt(n.PacketSize)||1024,e.log("GDB-server caps: "+JSON.stringify(n)+" "+t.replace(/;+/g,";")),this.bmpMode?this.initBMPAsync():this.sendCmdAsync("c").then((()=>{}))}))}}}(pxt||(pxt={})),function(e){!function(t){function n(){var n,o;return!!t.forceProxy||!e.U.isNodeJS&&!(null===(o=null===(n=null==e?void 0:e.appTarget)||void 0===n?void 0:n.cloud)||void 0===o?void 0:o.noGithubProxy)}t.token=null,t.forceProxy=!1;const o={};function r(n){var o;return n.method=null!==(o=n.method)&&void 0!==o?o:"GET",function o(r){var i;const s=e.U.clone(n);t.token&&(s.headers||(s.headers={}),s.url==N?s.headers.Authorization=`bearer ${t.token}`:(s.url=e.BrowserUtils.cacheBustingUrl(s.url),s.headers.Authorization=`token ${t.token}`));return s.allowHttpErrors=null!==(i=s.allowHttpErrors)&&void 0!==i&&i,e.U.requestAsync(s).catch((n=>{if(e.tickEvent("github.error",{statusCode:n.statusCode}),t.handleGithubNetworkError){if(t.handleGithubNetworkError(s,n))return o(!1)}throw n}))}(t.token)}function i(e){return r({url:e,method:"GET"}).then((e=>e.json))}function s(t){return e.Cloud.apiRequestWithCdnAsync({url:"gh/"+t,forceLiveEndpoint:!0}).then((e=>e.json))}function a(t){e.log(`github proxy error: ${t.message}`),e.debug(t)}t.isOrgAsync=function(e){return r({url:`https://api.github.com/orgs/${e}`,method:"GET",allowHttpErrors:!0}).then((e=>200==e.statusCode))};class l{constructor(){this.configs={},this.packages={}}proxyWithCdnLoadPackageAsync(t,n){const o=`${t}/${n}`;let r=this.packages[o];if(r)return e.debug(`github cache ${t}/${n}/text`),Promise.resolve(r);const i=C(t);return s(A(i.slug,n,i.fileName,"text")).then((e=>this.packages[o]={files:e}))}cacheConfig(t,n){const o=e.Package.parseAndValidConfig(n);return this.configs[t]=o,e.U.clone(o)}async loadConfigAsync(t,o){o||(o="master");const r=`${t}/${o}`;let i=this.configs[r];if(i)return e.debug(`github cache ${t}/${o}/config`),e.U.clone(i);if(n())try{const n=await this.proxyWithCdnLoadPackageAsync(t,o);return this.cacheConfig(r,n.files[e.CONFIG_NAME])}catch(e){a(e)}const s=await u(t,o,e.CONFIG_NAME);return this.cacheConfig(r,s)}async loadPackageAsync(t,o){if(o||(o="master"),n())try{return await this.proxyWithCdnLoadPackageAsync(t,o).then((t=>e.U.clone(t)))}catch(e){a(e)}return await this.githubLoadPackageAsync(t,o)}githubLoadPackageAsync(t,n){return _(t,n).then((o=>{const r=`${t}/${o}`;let i=this.packages[r];return i?(e.debug(`github cache ${t}/${n}/text`),Promise.resolve(e.U.clone(i))):(e.log(`Downloading ${t}/${n} -> ${o}`),u(t,o,e.CONFIG_NAME).then((n=>{const i={files:{}};i.files[e.CONFIG_NAME]=n;const s=JSON.parse(n);return e.U.promiseMapAll(e.allPkgFiles(s).slice(1),(e=>u(t,o,e).then((t=>{i.files[e]=t})))).then((()=>(this.packages[r]=i,e.U.clone(i))))})))}))}}function c(t,n,i){return r({url:"https://api.github.com/repos/"+A(t.slug,"contents",t.fileName,i+"?ref="+n),method:"GET"}).then((n=>{const r=n.json;return o[t.slug]=!0,r&&"base64"==r.encoding&&null!=r.content?atob(r.content):e.U.httpGetTextAsync(r.download_url)}))}function u(t,n,r){const i=C(t);return o[i.slug]?c(i,n,r):e.U.requestAsync({url:"https://raw.githubusercontent.com/"+A(i.slug,n,i.fileName,r),allowHttpErrors:!0}).then((e=>200==e.statusCode?e.text:c(i,n,r)))}function p(e,t,n,o){return r({url:/^https:/.test(e)?e:"https://api.github.com/repos/"+e,headers:n,method:o||"POST",data:t,successCodes:[200,201,202,204]}).then((e=>e.json))}function d(e,t){let n=1;for(;e.refs[t+n];)n++;return t+n}async function g(e,t,n){return await p(e+"/git/refs",{ref:"refs/heads/"+t,sha:n}),t}function h(o,r="tags",s,a){const l=C(o),c=(u=s,!!t.forceProxy||!(t.token&&!u)&&n());var u;let p=null;const d=c?e.U.httpGetJsonAsync(e.BrowserUtils.cacheBustingUrl(`${e.Cloud.apiRoot}gh/${l.slug}/refs${a?"?nocache=1":""}`)).then((t=>{let n=Object.keys(t.refs).filter((t=>e.U.startsWith(t,"refs/"+r+"/"))).map((e=>({ref:e,object:{sha:t.refs[e]}})));return p=t.refs.HEAD,n})):i(`https://api.github.com/repos/${l.slug}/git/refs/${r}/?per_page=100`);let g=e=>e.replace(/^refs\/[^\/]+\//,"");return d.then((t=>{t.sort(((t,n)=>e.semver.strcmp(g(t.ref),g(n.ref))));let n={};for(let e of t)n[g(e.ref)]=e.object.sha;return{refs:n,head:p}}),(e=>404==e.statusCode?{refs:{}}:Promise.reject(e)))}function f(e){return"commit"==e.object.type?Promise.resolve(e.object.sha):"tag"==e.object.type?i(e.object.url).then((e=>"commit"==e.object.type?e.object.sha:Promise.reject(new Error("Bad type (2nd order) "+e.object.type)))):Promise.reject(new Error("Bad type "+e.object.type))}function _(e,t){if(/^[a-f0-9]{40}$/.test(t))return Promise.resolve(t);const n=C(e);return i(`https://api.github.com/repos/${n.slug}/git/refs/tags/${t}`).then(f,(e=>i(`https://api.github.com/repos/${n.slug}/git/refs/heads/${t}`).then(f)))}function m(e,n="master"){return t.db.loadConfigAsync(e,n)}function y(n,o){const r=C(n);return r?E(r,o)?(e.tickEvent("github.download.banned"),e.log("Github repo is banned"),Promise.resolve(void 0)):t.db.loadPackageAsync(r.fullName,r.tag).then((t=>{const r=D(o,n);if(r){const o=e.Package.parseAndValidConfig(t.files[e.CONFIG_NAME]);o&&(e.log(`auto-disable ${r.join(",")} due to targetconfig entry for ${n}`),o.disablesVariants=r,t.files[e.CONFIG_NAME]=e.Package.stringifyConfig(o))}return t})):(e.log("Unknown GitHub syntax"),Promise.resolve(void 0))}let k;function b(t){return e.Cloud.cdnApiUrl(`gh/${t.fullName}/icon`)}function v(e,t){var n;if(!e)return;const o={owner:e.owner.login.toLowerCase(),slug:e.full_name.toLowerCase(),fullName:((null==t?void 0:t.fullName)||e.full_name).toLowerCase(),fileName:null===(n=null==t?void 0:t.fileName)||void 0===n?void 0:n.toLocaleLowerCase(),name:e.name,description:e.description,defaultBranch:e.default_branch,tag:null==t?void 0:t.tag,updatedAt:Math.round(new Date(e.updated_at).getTime()/1e3),fork:e.fork,private:e.private};return o.status=T(o,null==t?void 0:t.config),o}function T(e,t){return e?E(e,t)?k.Banned:function(e,t){return!!function(e,t){return!(!e||!t)&&!!(e.owner&&t.approvedOrgs&&t.approvedOrgs.some((t=>t.toLowerCase()==e.owner.toLowerCase())))}(e,t)||!(!e||!t)&&!!(e.fullName&&t.approvedRepos&&t.approvedRepos.some((t=>t.toLowerCase()==e.fullName.toLowerCase())))}(e,t)?k.Approved:k.Unknown:k.Unknown}function E(e,t){return!!function(e,t){return!(!t||e&&e.owner&&(!t.bannedOrgs||!t.bannedOrgs.some((t=>t.toLowerCase()==e.owner.toLowerCase()))))}(e,t)||!!t&&(!e||!e.fullName||!(!t.bannedRepos||!t.bannedRepos.some((t=>t.toLowerCase()==e.fullName.toLowerCase()))))}async function S(t,o){const r=C(t);if(!r)return;const l=T(r,o);if(l==k.Banned)return;if(n())try{return await function(t,n){return s(t.slug).then((e=>{if(e)return{github:!0,owner:t.owner,fullName:t.fullName,fileName:t.fileName,slug:t.slug,name:t.fileName?`${e.name}-${t.fileName}`:e.name,description:e.description,defaultBranch:e.defaultBranch||"master",tag:t.tag,status:n}})).catch((t=>{e.reportException(t)}))}(r,l)}catch(e){a(e)}return v(await i("https://api.github.com/repos/"+r.slug),{config:o,fullName:r.fullName,fileName:r.fileName,tag:r.tag})}function C(e){if(!e)return;e=(e=e.trim()).replace(/\/$/,"");const t=/^https:\/\/([^./#]+)\.github\.io\/([^/#]+)\/?$/i.exec(e);t&&(e=`github:${t[1]}/${t[2]}`),e=(e=(e=e.replace(/^github:/i,"")).replace(/^https:\/\/github\.com\//i,"")).replace(/\.git\b/i,"");const n=/^([^#\/:]+)\/([^#\/:]+)(\/([^#]+))?(#([^\/:]*))?$/.exec(e);if(!n)return;const o=n[1],r=n[2];let i=n[4];const s=n[6],a=i&&/^tree\/([^\/]+\/)/.exec(i);return a&&(i=i.slice(a[0].length)),{owner:o,project:r,slug:A(o,r),fullName:A(o,r,i),tag:s,fileName:i}}function x(e){return!!e&&"github:"==e.slice(0,7)}function B(e){return e?"github:"+e.fullName.toLowerCase()+"#"+(e.tag||"master"):void 0}function A(...e){return e.filter((e=>!!e)).join("/")}function I(t,n){if(!t||!t.upgrades)return null;const o=C(n);return o?e.U.lookup(t.upgrades,o.fullName.toLowerCase()):null}function D(e,t){const n=I(e,t),o=/^dv:(.*)/.exec(n);if(o){const e=o[1].split(/,/);return e.some((e=>!/^\w+$/.test(e)))?null:e}return null}t.MemoryGithubDb=l,t.downloadTextAsync=u,t.db=new l,t.authenticatedUserAsync=function(){return t.token?i("https://api.github.com/user"):Promise.resolve(void 0)},t.getCommitsAsync=function(e,t){return i("https://api.github.com/repos/"+C(e).slug+"/commits?sha="+t).then((e=>e.map((e=>{const t=e.commit;return t.url=e.url,t.sha=e.sha,t}))))},t.getCommitAsync=function(e,t){return i("https://api.github.com/repos/"+C(e).slug+"/git/commits/"+t).then((e=>i(e.tree.url+"?recursive=1").then((t=>(e.tree=t,e)))))},t.createObjectAsync=function(e,t,n){return p(C(e).slug+"/git/"+t+"s",n).then((e=>e.sha))},t.postCommitComment=function(e,t,n,o,r){return p(`${C(e).slug}/commits/${t}/comments`,{body:n,path:o,position:r}).then((e=>e.id))},t.fastForwardAsync=async function(e,t,n){const o=C(e);return 200==(await r({url:`https://api.github.com/repos/${o.slug}/git/refs/heads/${t}`,method:"PATCH",allowHttpErrors:!0,data:{sha:n,force:!1}})).statusCode},t.putFileAsync=async function(t,n,o){const i=C(t);await r({url:`https://api.github.com/repos/${e.github.join(i.slug,"contents",i.fileName,n)}`,method:"PUT",allowHttpErrors:!0,data:{message:lf("Initialize empty repo"),content:btoa(e.U.toUTF8(o)),branch:"master"},successCodes:[201]})},t.createTagAsync=async function(e,t,n){await p(e+"/git/refs",{ref:"refs/tags/"+t,sha:n})},t.createReleaseAsync=async function(e,t,n){await p(e+"/releases",{tag_name:t,target_commitish:n,name:t,draft:!1,prerelease:!1})},t.createPRFromBranchAsync=async function(e,t,n,o,r){const i=await p(e+"/pulls",{title:o,body:r||lf("Automatically created from MakeCode."),head:n,base:t,maintainer_can_modify:!0});return null==i?void 0:i.html_url},t.mergeAsync=function(t,n,o,i){return r({url:`https://api.github.com/repos/${C(t).slug}/merges`,method:"POST",successCodes:[201,204,409],data:{base:n,head:o,commit_message:i}}).then((n=>{if(201==n.statusCode||204==n.statusCode)return n.json.sha;if(409==n.statusCode)return null;throw e.U.userError(lf("Cannot merge in github.com/{1}; code: {2}",t,n.statusCode))}))},t.getRefAsync=function(e,t){return i("https://api.github.com/repos/"+e+"/git/refs/heads/"+(t=t||"master")).then(f).catch((e=>{404!=e.statusCode&&Promise.reject(e)}))},t.getNewBranchNameAsync=async function(e,t="patch-"){return d(await h(e,"heads"),t)},t.createNewBranchAsync=g,t.forkRepoAsync=async function(t,n,o="pr-"){const r=C(t),i=v(await p(`${r.slug}/forks`,{}),{fullName:r.fullName,fileName:r.fileName}),s=Date.now()+3e5;let a=null;for(;!a&&Date.now()<s;){await e.U.delay(1e3);try{a=await h(i.slug,"heads")}catch(e){}}if(!a)throw new Error(lf("Timeout waiting for fork"));const l=d(a,o);return await g(i.slug,l,n),i.fullName+"#"+l},t.listRefsAsync=function(e,t="tags",n,o){return h(e,t,n,o).then((e=>Object.keys(e.refs)))},t.listRefsExtAsync=h,t.pkgConfigAsync=m,t.downloadPackageAsync=y,t.downloadLatestPackageAsync=async function(t){const n=await e.packagesConfigAsync(),o=await e.github.latestVersionAsync(t.slug,n),r=`${t.fullName}#${o}`;return await e.github.downloadPackageAsync(r,n),{version:`github:${r}`,config:await m(t.fullName,o)}},t.cacheProjectDependenciesAsync=async function(t){var n;const o=null===(n=Object.keys(t.dependencies))||void 0===n?void 0:n.filter((e=>x(t.dependencies[e])));if(o.length){const n=await e.packagesConfigAsync();await Promise.all(o.map((async e=>{const o=t.dependencies[e];if(!await y(o,n))throw new Error(lf("Cannot load extension {0} from {1}",e,o))})))}},function(e){e[e.Unknown=0]="Unknown",e[e.Approved=1]="Approved",e[e.Banned=2]="Banned"}(k=t.GitRepoStatus||(t.GitRepoStatus={})),t.listUserReposAsync=function(){return w('{\n  viewer {\n    repositories(first: 100, affiliations: [OWNER, COLLABORATOR], orderBy: {field: PUSHED_AT, direction: DESC}) {\n      nodes {\n        name\n        description\n        full_name: nameWithOwner\n        private: isPrivate\n        fork: isFork\n        updated_at: updatedAt\n        owner {\n          login\n        }\n        defaultBranchRef {\n          name\n        }\n        pxtjson: object(expression: "master:pxt.json") {\n          ... on Blob {\n            text\n          }\n        }\n        readme: object(expression: "master:README.md") {\n          ... on Blob {\n            text\n          }\n        }\n      }\n    }\n  }\n}').then((t=>t.data.viewer.repositories.nodes.filter((e=>e.pxtjson)).filter((t=>{t.default_branch=t.defaultBranchRef.name;const n=e.Package.parseAndValidConfig(t.pxtjson&&t.pxtjson.text),o=t.readme&&t.readme.text;return!!n&&(n.supportedTargets?n.supportedTargets.indexOf(e.appTarget.id)>-1:o&&o.indexOf("PXT/"+e.appTarget.id)>-1)})).map((e=>v(e,{fullName:e.full_name})))))},t.createRepoAsync=function(e,t,n){return p("https://api.github.com/user/repos",{name:e,description:t,private:!!n,has_issues:!0,has_projects:!1,has_wiki:!1,allow_rebase_merge:!1,allow_merge_commit:!0,delete_branch_on_merge:!1}).then((e=>v(e)))},t.enablePagesAsync=async function(t){const n=C(t);let o;try{const e=await i(`https://api.github.com/repos/${n.slug}/pages`);e&&(o=e.html_url)}catch(e){}if(!o)try{o=(await p(`https://api.github.com/repos/${n.slug}/pages`,{source:{branch:"master",path:"/"}},{Accept:"application/vnd.github.switcheroo-preview+json"})).html_url}catch(t){e.tickEvent("github.pages.error"),e.reportException(t)}if(o){const n=await i(`https://api.github.com/repos/${t}`);if(n&&!n.homepage)try{await p(`https://api.github.com/repos/${t}`,{homepage:o},void 0,"PATCH")}catch(t){e.tickEvent("github.homepage.error")}}},t.repoIconUrl=function(e){if(e.status==k.Approved)return b(e)},t.mkRepoIconUrl=b,t.repoStatus=T,t.repoAsync=S,t.searchAsync=function(t,n){if(!n)return Promise.resolve([]);let o=t.split("|").map(C).filter((e=>!!e));return o.length>0?Promise.all(o.map((e=>S(e.fullName,n)))).then((e=>e.filter((e=>e&&e.status!=k.Banned)))):e.U.httpGetJsonAsync(`${e.Cloud.apiRoot}ghsearch/${e.appTarget.id}/${e.appTarget.platformid||e.appTarget.id}?q=${encodeURIComponent(t)}`).then((t=>t.items.map((e=>v(e,{config:n,fullName:e.full_name}))).filter((e=>e.status==k.Approved||n.allowUnapproved&&e.status==k.Unknown)).filter((t=>!e.appTarget.appTheme.githubUrl||`https://github.com/${t.fullName}`!=e.appTarget.appTheme.githubUrl.toLowerCase())))).catch((e=>[]))},t.parseRepoId=C,t.toGithubDependencyPath=function(e,t){let n="github:"+e;return t&&(n+="#"+t),n},t.isGithubId=x,t.stringifyRepo=B,t.normalizeRepoId=function(e){const t=C(e);if(t)return t.tag=t.tag||"master",B(t)},t.join=A,t.upgradedPackageReference=function(t,n){const o=I(t,n);if(!o)return null;const r=/^min:(.*)/.exec(o),i=r&&e.semver.tryParse(r[1]);if(i){const t=C(n),o=e.semver.tryParse(t.tag);return o&&e.semver.cmp(o,i)<0?(t.tag=r[1],e.debug(`upgrading ${n} to ${r[1]}`),B(t)):(o||e.log(`not upgrading ${n} - cannot parse version`),null)}return D(t,n)||e.log(`invalid upgrade rule: ${n} -> ${o}`),n},t.upgradedPackageId=function(e,t){const n=D(e,t);return n?t+"?dv="+n.join(","):t},t.latestVersionAsync=function(t,n,o,r){const i=C(t);return i?S(i.slug,n).then((t=>{if(t)return h(t.slug,"tags",o,r).then((o=>{let r=Object.keys(o.refs);r=e.semver.sortLatestTags(r);const s=e.appTarget.versions&&e.semver.tryParse(e.appTarget.versions.target);if(s&&n.releases&&n.releases["v"+s.major]){const o=n.releases["v"+s.major].map((t=>e.github.parseRepoId(t))).filter((e=>e&&e.fullName.toLowerCase()==i.fullName.toLowerCase()))[0];if(o){if(r.some((e=>e==o.tag)))return e.debug(`approved release ${o.fullName}#${o.tag} for v${s.major}`),Promise.resolve(o.tag);e.reportError("packages",`approved release ${o.fullName}#${o.tag} for v${s.major} not found anymore`,{repo:t.fullName})}}return r[0]?Promise.resolve(r[0]):o.head||_(t.slug,t.defaultBranch)}))})):Promise.resolve(null)},t.resolveMonoRepoVersions=function(n){n=e.Util.clone(n);const o={};return Object.keys(n).map((e=>({id:e,ghid:t.parseRepoId(n[e])}))).filter((e=>{var t;return null===(t=e.ghid)||void 0===t?void 0:t.tag})).forEach((t=>{const{id:n,ghid:r}=t;let i=o[r.slug];i||(i=o[r.slug]={tag:r.tag,deps:[]}),i.deps.push(t),e.semver.strcmp(i.tag,r.tag)<0&&(e.debug(`dep: resolve later monorepo tag to ${e.github.stringifyRepo(r)}`),i.tag=r.tag)})),e.U.values(o).forEach((t=>t.deps.forEach((o=>{o.ghid.tag!==t.tag&&(e.debug(`dep: ${e.github.stringifyRepo(o.ghid)} -> ${t.tag}`),o.ghid.tag=t.tag,n[o.id]=e.github.stringifyRepo(o.ghid))})))),n},t.GIT_JSON=".git.json";const N="https://api.github.com/graphql";function w(e){const t=JSON.stringify({query:e});return p(N,t)}t.lookupFile=function(e,t,n){if(!t)return null;const o=A(e.fileName,n);return t.tree.tree.find((e=>e.path==o))},t.ghGraphQLQueryAsync=w,t.findPRNumberforBranchAsync=function(e,t){const n=C(e);return w(`\n{\n    repository(owner: ${JSON.stringify(n.owner)}, name: ${JSON.stringify(n.project)}) {\n        pullRequests(last: 1, states: [OPEN, MERGED], headRefName: ${JSON.stringify(t)}) {\n            edges {\n                node {\n                    number\n                    state\n                    mergeable\n                    baseRefName\n                    url\n                    isDraft\n                }\n            }\n        }\n    }\n}\n`).then((e=>{const t=e.data.repository.pullRequests.edges[0];if(t&&t.node){const e=t.node;return{number:e.number,mergeable:e.mergeable,state:e.state,title:e.title,url:e.url,base:e.baseRefName}}return{number:-1}}))},t.getPagesStatusAsync=function(e){return i(`https://api.github.com/repos/${e}/pages`).catch((e=>({status:null})))}}(e.github||(e.github={}))}(pxt||(pxt={})),function(e){let t;e.REFCNT_FLASH="0xfffe",e.VTABLE_MAGIC=249,e.ValTypeObject=4,function(e){e[e.BoxedString=1]="BoxedString",e[e.BoxedNumber=2]="BoxedNumber",e[e.BoxedBuffer=3]="BoxedBuffer",e[e.RefAction=4]="RefAction",e[e.RefImage=5]="RefImage",e[e.RefCollection=6]="RefCollection",e[e.RefRefLocal=7]="RefRefLocal",e[e.RefMap=8]="RefMap",e[e.RefMImage=9]="RefMImage",e[e.MMap=10]="MMap",e[e.BoxedString_SkipList=11]="BoxedString_SkipList",e[e.BoxedString_ASCII=12]="BoxedString_ASCII",e[e.ZPin=13]="ZPin",e[e.User0=16]="User0"}(t=e.BuiltInType||(e.BuiltInType={}))}(pxt||(pxt={})),function(e){!function(t){function n(e,t,n){e[t+0]=n>>0&255,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255}function o(e,t,n){e[t+0]=n>>0&255,e[t+1]=n>>8&255}function r(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return e[t]|e[t+1]<<8}function s(e){let t=new Uint8Array(4*e.length);for(let o=0;o<e.length;++o)n(t,4*o,e[o]);return t}t.HF2_CMD_BININFO=1,t.HF2_MODE_BOOTLOADER=1,t.HF2_MODE_USERSPACE=2,t.HF2_CMD_INFO=2,t.HF2_CMD_RESET_INTO_APP=3,t.HF2_CMD_RESET_INTO_BOOTLOADER=4,t.HF2_CMD_START_FLASH=5,t.HF2_CMD_WRITE_FLASH_PAGE=6,t.HF2_CMD_CHKSUM_PAGES=7,t.HF2_CMD_READ_WORDS=8,t.HF2_CMD_WRITE_WORDS=9,t.HF2_CMD_DMESG=16,t.HF2_FLAG_SERIAL_OUT=128,t.HF2_FLAG_SERIAL_ERR=192,t.HF2_FLAG_CMDPKT_LAST=64,t.HF2_FLAG_CMDPKT_BODY=0,t.HF2_FLAG_MASK=192,t.HF2_SIZE_MASK=63,t.HF2_STATUS_OK=0,t.HF2_STATUS_INVALID_CMD=1,t.HF2_STATUS_EXEC_ERR=2,t.HF2_STATUS_EVENT=128,t.HF2_CMD_JDS_CONFIG=32,t.HF2_CMD_JDS_SEND=33,t.HF2_EV_JDS_PACKET=8388640,t.CUSTOM_EV_JACDAC="jacdac",t.HF2_EV_MASK=8388608,t.write32=n,t.write16=o,t.read32=r,t.read16=i,t.encodeU32LE=s,t.decodeU32LE=function(e){let t=[];for(let n=0;n<e.length;n+=4)t.push(r(e,n));return t};let a=!1;function l(t){a?e.log("HF2: "+t):e.debug("HF2: "+t)}t.enableLog=function(){a=!0};class c{constructor(n){var o;this.io=n,this.cmdSeq=e.U.randomUint32(),this.lock=new e.U.PromiseQueue,this.flashing=!1,this.rawMode=!1,this.maxMsgSize=63,this.bootloaderMode=!1,this.reconnectTries=0,this.autoReconnect=!1,this.icon=(null===(o=e.appTarget.appTheme.downloadDialogTheme)||void 0===o?void 0:o.deviceIcon)||"usb",this.msgs=new e.U.PromiseBuffer,this.eventHandlers={},this.jacdacAvailable=!1,this.onSerial=(e,t)=>{},this.onCustomEvent=(e,t)=>{};let i=[];n.onDeviceConnectionChanged=e=>this.disconnectAsync().then((()=>e&&this.reconnectAsync())),n.onSerial=(e,t)=>this.onSerial(e,t),n.onData=o=>{let r=o[0]&t.HF2_FLAG_MASK,s=63&o[0],a=new Uint8Array(s);if(e.U.memcpy(a,0,o,1,s),r&t.HF2_FLAG_SERIAL_OUT)this.onSerial(a,r==t.HF2_FLAG_SERIAL_ERR);else if(i.push(a),r!=t.HF2_FLAG_CMDPKT_BODY){e.U.assert(r==t.HF2_FLAG_CMDPKT_LAST);let o=0;for(let e of i)o+=e.length;let s=new Uint8Array(o),a=0;for(let t of i)e.U.memcpy(s,a,t),a+=t.length;i=[],s[2]&t.HF2_STATUS_EVENT?n.onEvent(s):this.msgs.push(s)}},n.onEvent=t=>{let n=r(t,0),o=e.U.lookup(this.eventHandlers,n+"");o?o(t.slice(4)):l("unhandled event: "+n.toString(16))},n.onError=e=>{l("recv error: "+e.message),this.autoReconnect&&(this.autoReconnect=!1,this.reconnectAsync().then((()=>{this.autoReconnect=!0}),(e=>{l("reconnect error: "+e.message)})))},this.onEvent(t.HF2_EV_JDS_PACKET,(e=>{this.onCustomEvent(t.CUSTOM_EV_JACDAC,e)}))}resetState(){this.lock=new e.U.PromiseQueue,this.info=null,this.infoRaw=null,this.pageSize=null,this.flashSize=null,this.maxMsgSize=63,this.bootloaderMode=!1,this.msgs.drain()}onEvent(n,o){e.U.assert(!!(n&t.HF2_EV_MASK)),this.eventHandlers[n+""]=o}sendCustomEventAsync(e,n){return e==t.CUSTOM_EV_JACDAC?this.jacdacAvailable?this.talkAsync(t.HF2_CMD_JDS_SEND,n).then((()=>{})):Promise.resolve():Promise.reject(new Error("invalid custom event type"))}reconnectAsync(){return this.resetState(),l(`reconnect raw=${this.rawMode}`),this.io.reconnectAsync().then((()=>this.initAsync())).catch((t=>{if(this.reconnectTries<5)return this.reconnectTries++,l(`error ${t.message}; reconnecting attempt #${this.reconnectTries}`),e.U.delay(500).then((()=>this.reconnectAsync()));throw t}))}disconnectAsync(){return l("disconnect"),this.io.disconnectAsync()}error(e){return this.io.error(e)}talkAsync(r,s){if(this.io.talksAsync)return this.io.talksAsync([{cmd:r,data:s}]).then((e=>e[0]));let a=8;s&&(a+=s.length);let c=new Uint8Array(a),u=65535&++this.cmdSeq;n(c,0,r),o(c,4,u),o(c,6,0),s&&e.U.memcpy(c,8,s,0,s.length);let p=0,d=()=>this.msgs.shiftAsync(1e3).then((e=>{if(i(e,0)!=u){if(p<3)return p++,l(`message out of sync, (${u} vs ${i(e,0)}); will re-try`),d();this.error("out of sync")}let n="";switch(e[3]&&(n="; info="+e[3]),e[2]){case t.HF2_STATUS_OK:return e.slice(4);case t.HF2_STATUS_INVALID_CMD:this.error("invalid command"+n);break;case t.HF2_STATUS_EXEC_ERR:this.error("execution error"+n);break;default:this.error("error "+e[2]+n)}return null}));return this.sendMsgAsync(c).then(d)}sendMsgAsync(e){return this.sendMsgCoreAsync(e)}sendSerialAsync(e,t=!1){return this.io.sendSerialAsync?this.io.sendSerialAsync(e,t):this.sendMsgCoreAsync(e,t?2:1)}sendMsgCoreAsync(e,n=0){let o=new Uint8Array(64),r=i=>{let s=e.length-i;if(s<=0)return Promise.resolve();s>63?(s=63,o[0]=t.HF2_FLAG_CMDPKT_BODY):o[0]=t.HF2_FLAG_CMDPKT_LAST,n&&(o[0]=1==n?t.HF2_FLAG_SERIAL_OUT:t.HF2_FLAG_SERIAL_ERR),o[0]|=s;for(let t=0;t<s;++t)o[t+1]=e[i+t];return this.io.sendPacketAsync(o).then((()=>r(i+s)))};return this.lock.enqueue("out",(()=>r(0)))}switchToBootloaderAsync(){return this.bootloaderMode?Promise.resolve():(l("Switching into bootloader mode"),this.io.isSwitchingToBootloader&&this.io.isSwitchingToBootloader(),this.maybeReconnectAsync().then((()=>this.talkAsync(t.HF2_CMD_START_FLASH).then((()=>{}),(e=>this.talkAsync(t.HF2_CMD_RESET_INTO_BOOTLOADER).then((()=>{}),(e=>{})).then((()=>this.reconnectAsync().catch((e=>{throw"devicenotfound"===e.type&&(e.type="repairbootloader"),e})))))))).then((()=>this.initAsync())).then((()=>{this.bootloaderMode||this.error("cannot switch into bootloader mode")})))}isFlashing(){return!!this.flashing}reflashAsync(t){l("reflash"),e.U.assert(e.appTarget.compile.useUF2);const n=t.outfiles[pxtc.BINARY_UF2],o=pxtc.UF2.parseFile(e.Util.stringToUint8Array(atob(n)));return this.flashing=!0,this.io.reconnectAsync().then((()=>this.flashAsync(o))).then((()=>e.U.delay(100))).finally((()=>this.flashing=!1)).then((()=>this.reconnectAsync()))}writeWordsAsync(n,o){return e.U.assert(o.length<=64),this.talkAsync(t.HF2_CMD_WRITE_WORDS,s([n,o.length].concat(o))).then((()=>{}))}readWordsAsync(o,r){let i=new Uint8Array(8);return n(i,0,o),n(i,4,r),e.U.assert(r<=64),this.talkAsync(t.HF2_CMD_READ_WORDS,i)}pingAsync(){return this.rawMode?Promise.resolve():this.talkAsync(t.HF2_CMD_BININFO).then((e=>{}))}maybeReconnectAsync(){return this.pingAsync().catch((e=>this.reconnectAsync().then((()=>this.pingAsync()))))}flashAsync(o){let r=Date.now(),i=0,s=r=>{if(r>=o.length)return Promise.resolve();let i=o[r],a=new Uint8Array(4+i.payloadSize);return n(a,0,i.targetAddr),e.U.memcpy(a,4,i.data,0,i.payloadSize),this.talkAsync(t.HF2_CMD_WRITE_FLASH_PAGE,a).then((()=>s(r+1)))};return this.switchToBootloaderAsync().then((()=>{let e=256*o.length;return l(`Starting flash (${Math.round(e/1024)}kB).`),i=Date.now(),this.pageSize>16384?o:u(o,((e,t)=>this.readWordsAsync(e,t)))})).then((e=>{if(e.length!=o.length){let t=256*(o=e).length;l(`Performing partial flash (${Math.round(t/1024)}kB).`)}})).then((()=>s(0))).then((()=>{let e=Date.now(),t=e-r,n=e-i;l(`Flashing done at ${Math.round(256*o.length/n*1e3/1024)} kB/s in ${t}ms (reset ${t-n}ms). Resetting.`)})).then((()=>this.talkAsync(t.HF2_CMD_RESET_INTO_APP).catch((e=>{})))).then((()=>{}))}initAsync(){return this.rawMode?Promise.resolve():Promise.resolve().then((()=>this.talkAsync(t.HF2_CMD_BININFO))).then((e=>(this.bootloaderMode=e[0]==t.HF2_MODE_BOOTLOADER,this.pageSize=r(e,4),this.flashSize=r(e,8)*this.pageSize,this.maxMsgSize=r(e,12),this.familyID=r(e,16),l(`Connected; msgSize ${this.maxMsgSize}B; flash ${this.flashSize/1024}kB; ${this.bootloaderMode?"bootloader":"application"} mode; family=0x${this.familyID.toString(16)}`),this.talkAsync(t.HF2_CMD_INFO)))).then((t=>{this.infoRaw=e.Util.fromUTF8Array(t),e.debug("Info: "+this.infoRaw);let n={};("Header: "+this.infoRaw).replace(/^([\w\-]+):\s*([^\n\r]*)/gm,((e,t,o)=>(n[t.replace(/-/g,"")]=o,""))),this.info=n;let o=/v(\d\S+)(\s+(\S+))?/.exec(this.info.Header);this.info.Parsed=o?{Version:o[1],Features:o[3]||""}:{Version:"?",Features:""},l(`Board-ID: ${this.info.BoardID} v${this.info.Parsed.Version} f${this.info.Parsed.Features}`)})).then((()=>this.talkAsync(t.HF2_CMD_JDS_CONFIG,new Uint8Array([1])).then((()=>{this.jacdacAvailable=!0}),(e=>{this.jacdacAvailable=!1})))).then((()=>{this.reconnectTries=0}))}}function u(t,n){if(!e.appTarget.compile.flashChecksumAddr)return Promise.resolve(t);let o=pxtc.UF2.readBytes(t,e.appTarget.compile.flashChecksumAddr,48),i=pxtc.parseChecksumBlock(o);return i?function(t){return e.appTarget.compile.flashChecksumAddr?t(e.appTarget.compile.flashChecksumAddr,12).then((n=>{let o=pxtc.parseChecksumBlock(n);return o?t(o.endMarkerPos,1).then((t=>r(t,0)!=o.endMarker?(e.log("end-marker mismatch"),null):o)):null})):Promise.resolve(null)}(n).then((e=>{if(!e)return t;let n=e.regions.filter((e=>i.regions.some((t=>e.checksum==t.checksum&&e.length==t.length&&e.start==t.start))));if(0==n.length)return t;l("skipping flash at: "+n.map((e=>`${pxtc.assembler.tohex(e.start)} (${e.length/1024}kB)`)).join(", "));let o=e=>n.some((t=>t.start<=e&&e<t.start+t.length));return t.filter((e=>!(o(e.targetAddr)&&o(e.targetAddr+e.payloadSize-1))))})):Promise.resolve(t)}t.Wrapper=c,t.mkHF2PacketIOWrapper=function(t){return e.debug("packetio: wrapper hf2"),new c(t)},t.onlyChangedBlocksAsync=u}(e.HF2||(e.HF2={}))}(pxt||(pxt={})),function(e){!function(t){var n=e.Util,o=e.HF2;const r=o.read32;let i,s,a,l,c,u,p,d,g=!1;function h(e){return e<<2|2}function f(e){return 1&e?e>>1:0!=e?2&e?e==t.taggedNull?null:e!=t.taggedFalse&&(e==t.taggedTrue||{tagged:e>>2}):{ptr:e}:void 0}function _(e,t){if(n.assert(!(3&e)),n.assert(e>=0),e<2097152){let o=new Uint8Array(t);return e-=p.start,n.memcpy(o,0,p.buf,e,t),Promise.resolve(o)}let o=d.maxMsgSize-32;if(t>o){let r=[];for(;t>0;){let n=Math.min(o,t);r.push(_(e,n)),t-=n,e+=n}return Promise.all(r).then(n.uint8ArrayConcat)}return d.readWordsAsync(e,Math.ceil(t/4)).then((e=>e.length>t?e.slice(0,t):e))}function m(t){if("object"!=typeof t||!t)return Promise.resolve(t);if("number"==typeof t.ptr){if(3&t.ptr)return Promise.resolve({unalignedPtr:t.ptr});let r=0;return _(t.ptr,56).then((i=>{r=o.read16(i,2);let s=i.length;return r==e.BuiltInType.BoxedString||r==e.BuiltInType.BoxedBuffer?s=o.read16(i,4)+6:r==e.BuiltInType.BoxedNumber&&(s=12),s>i.length?_(t.ptr+i.length,s-i.length).then((e=>n.uint8ArrayConcat([i,e]))):s<i.length?i.slice(0,s):i})).then((t=>r==e.BuiltInType.BoxedString?n.uint8ArrayToString(t.slice(6)):r==e.BuiltInType.BoxedBuffer?{type:"buffer",data:t.slice(6)}:r==e.BuiltInType.BoxedNumber?new Float64Array(t.buffer.slice(4))[0]:{type:"unknown",tag:r,refcnt:o.read16(t,0),data:t.slice(4)}))}return Promise.resolve(t)}function y(e){let t=[];for(let n of Object.keys(e))t.push(m(e[n]).then((t=>{e[n]=t})));return Promise.all(t).then((()=>{}))}function k(e){let t=i.breakpoints,n=t[0],o=1/0;for(let r of t){let t=e-r.binAddr;t>=0&&t<o&&(o=t,n=r)}return n}function b(e){if(g)return Promise.resolve();let r;return g=!0,S().then((t=>{let s=o.decodeU32LE(e)[0],l={};for(let e of i.procDebugInfo[0].locals){let r=t.globals,i=(()=>{switch(e.type){case"uint32":return o.read32(r,e.index);case"int32":return 0|o.read32(r,e.index);case"uint16":return o.read16(r,e.index);case"int16":return o.read16(r,e.index)<<16>>16;case"uint8":return r[e.index];case"int8":return r[e.index]<<24>>24;default:return null}})();null===i&&(n.assert(0==(3&e.index)),i=f(o.read32(r,e.index))),l[e.name]=i}return c=k(s),r={type:"debugger",subtype:"breakpoint",breakpointId:c.id,globals:l,stackframes:[]},a(),d.talkAsync(1888490768)})).then((e=>{!function(e,t){let o=c.binAddr,r=0,s=i.procDebugInfo.filter((e=>e.codeStartLoc<=o&&o<=e.codeEndLoc))[0];for(;s&&s!=i.procDebugInfo[0];){let i=k(o),a=n.clone(i);a.functionName=s.name,a.argumentNames=s.args&&s.args.map((e=>e.name)),t.stackframes.push({locals:{},funcInfo:a,breakpointId:i.id});let l=t.stackframes[t.stackframes.length-1],c=0;for(let t of s.locals)n.assert(t.index==c++),l.locals[t.name]=f(e[r++]);o=2147483646&e[r++];let p=u[o+""];for(let t of s.args)l.locals[t.name]=f(e[r+(s.args.length-1-t.index)]);if(!p)break;s=p.from,r+=p.stack-s.localsMark}}(o.decodeU32LE(e),r);let t=[r.globals].concat(r.stackframes.map((e=>e.locals)));return n.promiseMapAll(t,y)})).then((()=>t.postMessage(r)))}function v(){g=!1,s=new Promise(((e,t)=>{a=e}))}function T(e=!1){return Promise.resolve().then((()=>d.talkAsync(665147697,o.encodeU32LE([e?1:3])))).then(v)}function E(){return s||(s=Promise.resolve()),s}function S(){return(l?Promise.resolve(l):d.talkAsync(1409050336).then((e=>l={numGlobals:r(e,0),globalsPtr:r(e,4)}))).then((e=>d.readWordsAsync(e.globalsPtr,e.numGlobals))).then((e=>({staticState:l,globals:e})))}t.taggedUndefined=0,t.taggedNull=h(1),t.taggedFalse=h(2),t.taggedTrue=h(16),t.postMessage=e=>console.log(e),t.decodeValue=f,t.heapExpandAsync=m,t.heapExpandMapAsync=y,t.startDebugAsync=function(e,t){return d=t,d.onEvent(915601917,b),(g=!1,i=null,l=null,Promise.resolve()).then((()=>{i=e,u={};let t=[];for(let n of e.procDebugInfo)t[n.idx]=n;for(let n of e.procDebugInfo)for(let e of n.calls)u[e.addr+""]={from:n,to:t[e.procIndex],stack:e.stack}})).then((()=>{let e=i.outfiles[pxtc.BINARY_UF2],t=n.stringToUint8Array(atob(e));return p=pxtc.UF2.toBin(t),d.reflashAsync(i).then((()=>d.reconnectAsync()))})).then((()=>d.talkAsync(287358355).catch((e=>{})))).then((()=>n.delay(200))).then((()=>d.reconnectAsync())).then(v).then(E)},t.handleMessage=function(e){if(console.log("HWDBGMSG",e),"debugger"!=e.type)return;let t=!1;switch(e.subtype){case"stepinto":t=!0;case"stepover":T(t)}},t.resumeAsync=T,t.waitForHaltAsync=E,t.getHwStateAsync=S}(e.HWDBG||(e.HWDBG={}))}(pxt||(pxt={})),function(e){e.ImageConverter=class{logTime(){if(this.start){let t=Date.now()-this.start;e.debug("Icon creation: "+t+"ms")}}convert(t){this.start||(this.start=Date.now());let n=atob(t.slice(t.indexOf(",")+1)),o=n.charCodeAt(0),r=n.charCodeAt(1),i=n.charCodeAt(2);if(135===o&&(o=224|n.charCodeAt(1),r=n.charCodeAt(2)|n.charCodeAt(3)<<8,i=n.charCodeAt(4)|n.charCodeAt(5)<<8,n=n.slice(4)),225!=o&&228!=o)return null;if(!this.palette){let t=e.appTarget.runtime.palette.map((function(e){const t=parseInt(e.replace(/#/,""),16);return[t>>0&255,t>>8&255,t>>16&255,255]}));t[0][3]=0,this.palette=new Uint8Array(4*t.length);for(let e=0;e<t.length;++e)this.palette[4*e+0]=t[e][0],this.palette[4*e+1]=t[e][1],this.palette[4*e+2]=t[e][2],this.palette[4*e+3]=t[e][3]}if(225==o)return this.genMonochrome(n,r,i);const s=(e.BrowserUtils.isEdge()||e.BrowserUtils.isIE())&&r<100&&i<100?3:1;return this.genColor(n,r,i,s)}genMonochrome(t,n,o){let r=n+3&-4,i=54+this.palette.length,s=i+r*o,a=new Uint8Array(s);a[0]=66,a[1]=77,e.HF2.write32(a,2,s),e.HF2.write32(a,10,i),e.HF2.write32(a,14,40),e.HF2.write32(a,18,n),e.HF2.write32(a,22,-o),e.HF2.write16(a,26,1),e.HF2.write16(a,28,8),e.HF2.write32(a,38,2835),e.HF2.write32(a,42,2835),e.HF2.write32(a,46,this.palette.length>>2),a.set(this.palette,54);let l=4,c=i,u=1,p=t.charCodeAt(l++);for(let e=0;e<n;++e){c=i+e;for(let e=0;e<o;++e)a[c]=p&u?1:0,c+=r,u<<=1,256==u&&(u=1,p=t.charCodeAt(l++))}return"data:image/bmp;base64,"+btoa(e.U.uint8ArrayToString(a))}genColor(t,n,o,r){const i=n*(r=Math.max(1,0|r)),s=o*r;let a=i<<2,l=138,c=l+a*s,u=new Uint8Array(c);u[0]=66,u[1]=77,e.HF2.write32(u,2,c),e.HF2.write32(u,10,l),e.HF2.write32(u,14,124),e.HF2.write32(u,18,i),e.HF2.write32(u,22,-s),e.HF2.write16(u,26,1),e.HF2.write16(u,28,32),e.HF2.write16(u,30,3),e.HF2.write32(u,38,2835),e.HF2.write32(u,42,2835),e.HF2.write32(u,54,16711680),e.HF2.write32(u,58,65280),e.HF2.write32(u,62,255),e.HF2.write32(u,66,4278190080),u[70]=66,u[71]=71,u[72]=82,u[73]=115;let p=4,d=l,g=!0;for(let e=0;e<i;e++){let n=!1;d=l+(e<<2);let i=p,c=t.charCodeAt(p++),h=n?(c>>4&15)<<2:(15&c)<<2;for(let e=0;e<s;e++)c&&(g=!1),u[d]=this.palette[h],u[d+1]=this.palette[h+1],u[d+2]=this.palette[h+2],u[d+3]=this.palette[h+3],d+=a,e%r==r-1&&(n&&(c=t.charCodeAt(p++)),n=!n,h=n?(c>>4&15)<<2:(15&c)<<2);if(g&&(u[141]=1),e%r==r-1)for(o%2||--p;3&p;)p++;else p=i}return"data:image/bmp;base64,"+btoa(e.U.uint8ArrayToString(u))}}}(pxt||(pxt={})),function(e){!function(t){function n(){const e={"tsconfig.json":t.TS_CONFIG,"test.ts":`// ${lf("tests go here; this will not be compiled when this package is used as an extension.")}\n`,"_config.yml":"makecode:\n  target: @TARGET@\n  platform: @PLATFORM@\n  home_url: @HOMEURL@\ntheme: jekyll-theme-slate\ninclude:\n  - assets\n  - README.md\n",Makefile:"all: deploy\n\nbuild:\n\tpxt build\n\ndeploy:\n\tpxt deploy\n\ntest:\n\tpxt test\n",Gemfile:"source 'https://rubygems.org'\ngem 'github-pages', group: :jekyll_plugins","README.md":`\n> ${lf("Open this page at {0}","[https://@REPOOWNER@.github.io/@REPONAME@/](https://@REPOOWNER@.github.io/@REPONAME@/)")}\n\n## ${lf("Use as Extension")}\n\n${lf("This repository can be added as an **extension** in MakeCode.")}\n\n* ${lf("open [@HOMEURL@](@HOMEURL@)")}\n* ${lf("click on **New Project**")}\n* ${lf("click on **Extensions** under the gearwheel menu")}\n* ${lf("search for **https://github.com/@REPO@** and import")}\n\n## ${lf("Edit this project")} ![${lf("Build status badge")}](https://github.com/@REPO@/workflows/MakeCode/badge.svg)\n\n${lf("To edit this repository in MakeCode.")}\n\n* ${lf("open [@HOMEURL@](@HOMEURL@)")}\n* ${lf("click on **Import** then click on **Import URL**")}\n* ${lf("paste **https://github.com/@REPO@** and click import")}\n\n## ${lf("Blocks preview")}\n\n${lf("This image shows the blocks code from the last commit in master.")}\n${lf("This image may take a few minutes to refresh.")}\n\n![${lf("A rendered view of the blocks")}](https://github.com/@REPO@/raw/master/.github/makecode/blocks.png)\n\n#### ${lf("Metadata (used for search, rendering)")}\n\n* for PXT/@TARGET@\n<script src="https://makecode.com/gh-pages-embed.js"><\/script><script>makeCodeRender("{{ site.makecode.home_url }}", "{{ site.github.owner_name }}/{{ site.github.repository_name }}");<\/script>\n`,".gitignore":"# MakeCode\nbuilt\nnode_modules\nyotta_modules\nyotta_targets\npxt_modules\n_site\n*.db\n*.tgz\n.header.json\n.simstate.json\n",".vscode/settings.json":'{\n    "editor.formatOnType": true,\n    "files.autoSave": "afterDelay",\n    "files.watcherExclude": {\n        "**/.git/objects/**": true,\n        "**/built/**": true,\n        "**/node_modules/**": true,\n        "**/yotta_modules/**": true,\n        "**/yotta_targets": true,\n        "**/pxt_modules/**": true\n    },\n    "files.associations": {\n        "*.blocks": "html",\n        "*.jres": "json"\n    },\n    "search.exclude": {\n        "**/built": true,\n        "**/node_modules": true,\n        "**/yotta_modules": true,\n        "**/yotta_targets": true,\n        "**/pxt_modules": true\n    }\n}',".github/workflows/makecode.yml":"name: MakeCode\n\non: [push]\n\njobs:\n  build:\n\n    runs-on: ubuntu-latest\n\n    strategy:\n      matrix:\n        node-version: [14.x]\n\n    steps:\n      - uses: actions/checkout@v1\n      - name: Use Node.js ${{ matrix.node-version }}\n        uses: actions/setup-node@v1\n        with:\n          node-version: ${{ matrix.node-version }}\n      - name: npm install\n        run: |\n          npm install -g pxt\n          pxt target @TARGET@\n      - name: build\n        run: |\n          pxt install\n          pxt build --cloud\n        env:\n          CI: true\n",".github/workflows/cfg-check.yml":"name: Check pxt.json\n\non:\n  push:\n    branches:\n      - 'master'\n      - 'main'\n\njobs:\n  check-cfg:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        node-version: [14.x]\n    steps:\n      - uses: actions/checkout@v2\n      - name: Use Node.js ${{ matrix.node-version }}\n        uses: actions/setup-node@v1\n        with:\n          node-version: ${{ matrix.node-version }}\n      - name: npm install\n        run: |\n          npm install -g pxt\n          pxt target @TARGET@\n      - name: Checkout current state\n        run: |\n          git checkout -- .\n          git clean -fd\n      - name: Fix files listed in config if necessary\n        run: pxt checkpkgcfg\n      - name: Create Pull Request\n        uses: peter-evans/create-pull-request@v3\n        continue-on-error: true\n        with:\n          title: 'Removing missing files from pxt.json'\n          commit-message: 'Removing missing files from pxt.json'\n          delete-branch: true\n",".vscode/tasks.json":'\n// A task runner that calls the MakeCode (PXT) compiler\n{\n    "version": "2.0.0",\n    "tasks": [{\n        "label": "pxt deploy",\n        "type": "shell",\n        "command": "pxt deploy --local",\n        "group": "build",\n        "problemMatcher": [ "$tsc" ]\n    }, {\n        "label": "pxt build",\n        "type": "shell",\n        "command": "pxt build --local",\n        "group": "build",\n        "problemMatcher": [ "$tsc" ]\n    }, {\n        "label": "pxt install",\n        "type": "shell",\n        "command": "pxt install",\n        "group": "build",\n        "problemMatcher": [ "$tsc" ]\n    }, {\n        "label": "pxt clean",\n        "type": "shell",\n        "command": "pxt clean",\n        "group": "test",\n        "problemMatcher": [ "$tsc" ]\n    }]\n}\n'},n=o();return n&&Object.keys(n).forEach((t=>e[t]=n[t])),e}function o(){const t=e.appTarget.bundledpkgs[e.template.TEMPLATE_PRJ];if(t){const n=e.Util.clone(t);return delete n[e.CONFIG_NAME],n}}t.TS_CONFIG='{\n    "compilerOptions": {\n        "target": "ES5",\n        "noImplicitAny": true,\n        "outDir": "built",\n        "rootDir": "."\n    },\n    "exclude": ["pxt_modules/**/*test.ts"]\n}\n',t.defaultFiles=n,t.targetTemplateFiles=o,t.TEMPLATE_PRJ="template",t.packageFiles=function(t){const o=e.appTarget.blocksprj||e.appTarget.tsprj,r=e.U.clone(o.config);delete r.installedVersion,delete r.additionalFilePath,delete r.additionalFilePaths,r.preferredEditor=r.files.find((e=>/\.blocks$/.test(e)))?e.BLOCKS_PROJECT_NAME:e.JAVASCRIPT_PROJECT_NAME,r.name=t,r.public=!0,r.version||(r.version="0.0.0");const i={},s=n();for(const e in s)i[e]=s[e];for(const e in o.files)"README.md"!=e&&(i[e]=o.files[e]);const a=Object.keys(i).filter((e=>/\.(blocks|md|ts|asm|cpp|h|py)$/.test(e)));return r.files=a.filter((e=>!/test/.test(e))),r.testFiles=a.filter((e=>/test/.test(e))),r.supportedTargets=[e.appTarget.id],i[e.CONFIG_NAME]=e.Package.stringifyConfig(r),i},t.packageFilesFixup=function(t,n){const o=JSON.parse(t[e.CONFIG_NAME]);n&&e.Util.jsonMergeFrom(o,n),e.webConfig&&(Object.keys(e.webConfig).forEach((t=>o[t.toLowerCase()]=e.webConfig[t])),o.platform=e.appTarget.platformid||e.appTarget.id,o.target=e.appTarget.id,o.docs=e.appTarget.appTheme.homeUrl||"./",o.homeurl=e.appTarget.appTheme.homeUrl||"???"),e.U.iterMap(t,((e,n)=>{n=n.replace(/@([A-Z]+)@/g,((e,t)=>o[t.toLowerCase()]||"")),t[e]=n}))}}(e.template||(e.template={}))}(pxt||(pxt={})),function(e){!function(t){let n,o;!function(e){e[e.Prefix=0]="Prefix",e[e.Postfix=1]="Postfix",e[e.Infix=2]="Infix",e[e.Block=3]="Block",e[e.NewLine=4]="NewLine"}(n=t.NT||(t.NT={})),function(e){e[e.None=0]="None",e[e.WithSpace=1]="WithSpace",e[e.NoSpace=2]="NoSpace"}(o=t.GlueMode||(t.GlueMode={}));const r=["break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with"];function i(e){return"`"+e.replace(/[\\`${}]/g,(e=>"\\"+e))+"`"}function s(e){return e.length>20&&/\n/.test(e)?i(e):JSON.stringify(e)}function a(e,t,n){return{type:e,op:t,children:n}}function l(){return a(n.NewLine,"",[])}function c(e,t){return a(n.Prefix,e,t)}function u(e,t,o){return a(n.Infix,t,null==e?[o]:[e,o])}function p(e){return c(e,[])}function d(e){return a(n.Block,"",e)}function g(e){return c("",e)}function h(e,t=!1){const n=[];for(const o of e)t?(n.length>0&&n.push(p(",")),n.push(l())):n.length>0&&n.push(p(", ")),n.push(o);return t&&n.push(l()),g(n)}let f;t.backtickLit=i,t.stringLit=s,t.mkNode=a,t.mkNewLine=l,t.mkPrefix=c,t.mkPostfix=function(e,t){return a(n.Postfix,t,e)},t.mkInfix=u,t.mkText=p,t.mkBlock=d,t.mkGroup=g,t.mkStmt=function(...e){let t=e[e.length-1];return t&&t.type==n.Block||e.push(l()),g(e)},t.mkCommaSep=h,function(t){function n(e,t,n=!1,o=!1){return g(o?[u(t[0],".",p(e)),p("("),h(t.slice(1),n),p(")")]:[p(e),p("("),h(t,n),p(")")])}function o(e,t,o,r){return n(e+"."+t,o,r)}function r(t,n){return e.U.assert(2==n.length),u(n[0],t,n[1])}t.mkArrayLiteral=function(e,t){return g([p("["),h(e,t),p("]")])},t.mkNumberLiteral=function(e){return p(e.toString())},t.mkBooleanLiteral=function(e){return p(e?"true":"false")},t.mkStringLiteral=function(e){return p(s(e))},t.mkPropertyAccess=function(e,t){return g([u(t,".",p(e))])},t.mkCall=n,t.stdCall=function(e,t,o){return n(e,t,o)},t.extensionCall=function(e,t,o){return n(e,t,o,!0)},t.namespaceCall=o,t.mathCall=function(e,t){return o("Math",e,t,!1)},t.mkGlobalRef=function(e){return p(e)},t.mkSimpleCall=r,t.mkWhile=function(e,t){return g([p("while ("),e,p(")"),d(t)])},t.mkComment=function(e){return p("// "+e)},t.mkMultiComment=function(e){let t=[p("/**"),l()];return e.split("\n").forEach(((e,n,o)=>{e&&(t.push(p(" * "+e)),t.push(l()),n<o.length-1&&(t.push(p(" * ")),t.push(l())))})),g(t.concat([p(" */"),l()]))},t.mkAssign=function(e,t){return r("=",[e,t])},t.mkParenthesizedExpression=function(e){return y(m([e]).output)?e:g([p("("),e,p(")")])}}(f=t.Helpers||(t.Helpers={})),t.H=f;const _={"=":3,"+=":3,"-=":3,"?":4,":":4,"||":5,"&&":6,"|":7,"^":8,"&":9,"==":10,"!=":10,"===":10,"!==":10,"<":11,">":11,"<=":11,">=":11,">>":12,">>>":12,"<<":12,"+":13,"-":13,"*":14,"/":14,"%":14,"**":15,"!":16,"~":16,"P-":16,"P+":16,"++":16,"--":16,".":18};function m(t){let r=[],i={},s="",a="",l=[{}],c=0;function u(e){"string"==typeof e&&(c+=(e.match(/\n/g)||[]).length),s+=e}let d=g(t);return function t(o,r){if(o.type!=n.Infix){for(let e of o.children)t(e,-1);return}let i=[];function s(e){"P"==e[0]&&(e=e.slice(1)),i.push(p(e))}let a=e.U.lookup(_,o.op);if(null==a&&e.U.oops("bad infix op: "+o.op),a<r&&s("("),1==o.children.length)s(o.op),t(o.children[0],a),i.push(o.children[0]);else{let e,n=3!=a&&"**"!=o.op;t(o.children[0],n?a:a+.1),i.push(o.children[0]),e&&"number"!=e&&(s(": "),s(e)),"."==o.op?s("."):s(" "+o.op+" "),t(o.children[1],n?a+.1:a),i.push(o.children[1])}a<r&&s(")"),o.type=n.Prefix,o.op="",o.children=i}(d,-1),h(d),s||u("\n"),{output:s,sourceMap:r};function h(t){t.glueToBlock&&(m(),t.glueToBlock==o.WithSpace&&u(" "));let p=c,d=s.length;switch(t.type){case n.Infix:e.U.oops("no infix should be left");break;case n.NewLine:u("\n"+a);break;case n.Block:!function(t){let n=t.noFinalNewline?"":"\n";if(0==t.children.length)return void f(" {\n\t\n}"+n);let o=e.U.clone(l[l.length-1]||{});l.push(o),a+="    "," "!=s[s.length-1]&&f(" ");f("{\n");for(let e of t.children)h(e);a=a.slice(4),m(),f("\n}"+n),l.pop()}(t);break;case n.Prefix:t.canIndentInside?u(t.op.replace(/\n/g,"\n"+a+"    ")):u(t.op),t.children.forEach(h);break;case n.Postfix:t.children.forEach(h),t.canIndentInside?u(t.op.replace(/\n/g,"\n"+a+"    ")):u(t.op)}let g=c,_=Math.max(s.length,1);if(t.id)if(i[t.id]){const e=i[t.id];e.startLine=Math.min(e.startLine,p),e.endLine=Math.max(e.endLine,g),e.startPos=Math.min(e.startPos,d),e.endPos=Math.max(e.endPos,_)}else{const e={id:t.id,startLine:p,startPos:d,endLine:g,endPos:_};i[t.id]=e,r.push(e)}}function f(e){u(e.replace(/\n/g,"\n"+a))}function m(){s=s.replace(/\n *$/,(function(){return c--,""}))}}function y(e){if("("!==e[0]||")"!==e[e.length-1])return!1;let t=1;for(let n=1;n<e.length;n++){const o=e[n];if("("===o)t++;else if(")"===o&&(t--,0===t))return n===e.length-1}return!1}t.flattenNode=m,t.isReservedWord=function(e){return-1!==r.indexOf(e)},t.isParenthesized=y}(e.blocks||(e.blocks={}))}(pxt||(pxt={})),function(e){!function(t){const n=[".","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];t.BLOCKLY_TILESET_TYPE="BLOCKLY_TILESET_TYPE",t.TILE_PREFIX="tile",t.TILE_NAMESPACE="myTiles",t.IMAGES_NAMESPACE="myImages",t.IMAGE_PREFIX="image",t.ANIMATION_NAMESPACE="myAnimations",t.ANIMATION_PREFIX="anim";class o{constructor(e,t,n=0,o=0,r){this.width=e,this.height=t,this.x0=n,this.y0=o,this.width||(this.width=16),this.height||(this.height=16),this.buf=r||new Uint8ClampedArray(this.dataLength())}static fromData(e){return new o(e.width,e.height,e.x0,e.y0,e.data)}set(e,t,n){if(e<this.width&&t<this.height&&e>=0&&t>=0){const o=this.coordToIndex(e,t);this.setCore(o,n)}}get(e,t){if(e<this.width&&t<this.height&&e>=0&&t>=0){const n=this.coordToIndex(e,t);return this.getCore(n)}return 0}copy(e=0,t=0,n=this.width,r=this.height){const i=new o(n,r);i.x0=e,i.y0=t;for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,this.get(e+o,t+n));return i}apply(e,t=!1){let n;for(let o=0;o<e.width;o++)for(let r=0;r<e.height;r++)n=e.get(o,r),!n&&t||this.set(e.x0+o,e.y0+r,n)}equals(e){if(this.width===e.width&&this.height===e.height&&this.x0===e.x0&&this.y0===e.y0&&this.buf.length===e.buf.length){for(let t=0;t<this.buf.length;t++)if(this.buf[t]!==e.buf[t])return!1;return!0}return!1}data(){return{width:this.width,height:this.height,x0:this.x0,y0:this.y0,data:this.buf}}resize(e,t){return d(this,e,t)}coordToIndex(e,t){return e+t*this.width}getCore(e){const t=Math.floor(e/2);return e%2==0?15&this.buf[t]:(240&this.buf[t])>>4}setCore(e,t){const n=Math.floor(e/2);this.buf[n]=e%2==0?240&this.buf[n]|15&t:15&this.buf[n]|(15&t)<<4}dataLength(){return Math.ceil(this.width*this.height/2)}}t.Bitmap=o;class r extends o{static fromData(e){return new r(e.width,e.height,e.x0,e.y0,e.data)}copy(e=0,t=0,n=this.width,o=this.height){const i=new r(n,o);i.x0=e,i.y0=t;for(let r=0;r<n;r++)for(let n=0;n<o;n++)i.set(r,n,this.get(e+r,t+n));return i}resize(e,t){return g(this,e,t)}getCore(e){return this.buf[e]}setCore(e,t){this.buf[e]=t}dataLength(){return this.width*this.height}}t.Tilemap=r;class i{constructor(e,t,n){this.tilemap=e,this.tileset=t,this.layers=n,this.nextId=0}cloneData(){const e=this.tilemap.copy(),t={tileWidth:this.tileset.tileWidth,tiles:this.tileset.tiles.map((e=>Object.assign(Object.assign({},e),{bitmap:o.fromData(e.bitmap).copy().data()})))},n=o.fromData(this.layers).copy().data();return new i(e,t,n)}equals(t){if(!this.tilemap.equals(t.tilemap)||this.tileset.tileWidth!=t.tileset.tileWidth||this.tileset.tiles.length!=t.tileset.tiles.length||!y(this.layers,t.layers))return!1;for(let n=0;n<this.tileset.tiles.length;n++)if(!e.assetEquals(this.tileset.tiles[n],t.tileset.tiles[n]))return!1;return!0}}t.TilemapData=i;function s(e){return a(atob(e.slice(e.indexOf(",")+1)))}function a(t){let n=t.charCodeAt(0),o=t.charCodeAt(1),r=t.charCodeAt(2);135===n&&(n=224|t.charCodeAt(1),o=t.charCodeAt(2)|t.charCodeAt(3)<<8,r=t.charCodeAt(4)|t.charCodeAt(5)<<8,t=t.slice(4));const i=new e.sprite.Bitmap(o,r);let s=4;if(225===n){let e=1,n=t.charCodeAt(s++);for(let a=0;a<o;++a)for(let o=0;o<r;++o)i.set(a,o,n&e?1:0),e<<=1,256==e&&(e=1,n=t.charCodeAt(s++))}else for(let e=0;e<o;e++){for(let n=0;n<r;n+=2){let o=t.charCodeAt(s++);i.set(e,n,15&o),n!=r-1&&i.set(e,n+1,o>>4&15)}for(;3&s;)s++}return i}function l(e,t){!(e=(e=(e=e.replace(/[ `]|(?:&#96;)|(?:&#9;)|(?:hex)/g,"").trim()).replace(/^["`\(\)]*/,"").replace(/["`\(\)]*$/,"")).replace(/&#10;/g,"\n"))&&t&&(e=t);const n=parseInt(e.substr(0,2),16)|parseInt(e.substr(2,2),16)<<8,o=parseInt(e.substr(4,2),16)|parseInt(e.substr(6,2),16)<<8,i=v(e.substring(8));return r.fromData({width:n,height:o,x0:0,y0:0,data:i})}function c(e){return`${p(e.width,2)}${p(e.height,2)}${T(e.data().data)}`}function u(e,t){return(e=e.replace(/[\[\]]/g,""))?e.split(",").filter((e=>!!e.trim())).map((e=>function(e,t){if(0===(e=e.trim()).indexOf("img")){const n=h(e);return t.createNewTile(n.data())}switch(e){case"myTiles.tile0":case"myTiles.transparency16":return t.getTransparency(16);case"myTiles.transparency8":return t.getTransparency(8);case"myTiles.transparency32":return t.getTransparency(32);default:return t.resolveTile(e)}}(e,t))):[]}function p(e,t){let n=e.toString(16);const o=t<<1;for(1&n.length&&(n="0"+n);n.length<o;)n+="0";return n}function d(e,t,n){const r=new o(t,n);return r.apply(e),r}function g(e,t,n){const o=new r(t,n);return o.apply(e),o}function h(e){const t=(e=(e=(e=e.replace(/[ `]|(?:&#96;)|(?:&#9;)|(?:img)/g,"").trim()).replace(/^["`\(\)]*/,"").replace(/["`\(\)]*$/,"")).replace(/&#10;/g,"\n")).split("\n"),n=[];let r=0;for(let e=0;e<t.length;e++){const o=t[e],i=[];for(let e=0;e<o.length;e++)switch(o[e]){case"0":case".":i.push(0);break;case"1":case"#":i.push(1);break;case"2":case"T":i.push(2);break;case"3":case"t":i.push(3);break;case"4":case"N":i.push(4);break;case"5":case"n":i.push(5);break;case"6":case"G":i.push(6);break;case"7":case"g":i.push(7);break;case"8":i.push(8);break;case"9":i.push(9);break;case"a":case"A":case"R":i.push(10);break;case"b":case"B":case"P":i.push(11);break;case"c":case"C":case"p":i.push(12);break;case"d":case"D":case"O":i.push(13);break;case"e":case"E":case"Y":i.push(14);break;case"f":case"F":case"W":i.push(15);break;default:if(!/\s/.test(o[e]))return}i.length&&(n.push(i),r=Math.max(r,i.length))}const i=n.length,s=new o(r,i);for(let e=0;e<i;e++){const t=n[e];for(let n=0;n<r;n++)n<t.length?s.set(n,e,t[n]):s.set(n,e,0)}return s}function f(e){let t="";switch(e){case"python":t='img("""';break;default:t="img`"}return t}function _(e){let t="";switch(e){case"python":t+='""")';break;default:t+="`"}return t}function m(e,t){if(!e||0===e.height||0===e.width)return"";let o=f(t);if(e){const t=e.width*e.height>300?"":" ";for(let r=0;r<e.height;r++){o+="\n";for(let i=0;i<e.width;i++)o+=n[e.get(i,r)]+t}}return o+="\n",o+=_(t),o}function y(t,n){return e.sprite.Bitmap.fromData(t).equals(e.sprite.Bitmap.fromData(n))}function k(e){switch(e){case 8:return"TileScale.Eight";case 16:return"TileScale.Sixteen";case 32:return"TileScale.ThirtyTwo";default:return Math.floor(Math.log2(e)).toString()}}function b(e){switch(e=e.replace(/\s/g,"")){case"TileScale.Eight":return 8;case"TileScale.Sixteen":return 16;case"TileScale.ThirtyTwo":return 32;default:return Math.pow(2,parseInt(e))}}function v(e){let t=new Uint8ClampedArray(e.length>>1);for(let n=0;n<e.length;n+=2)t[n>>1]=parseInt(e.slice(n,n+2),16);return t}function T(e){const t="0123456789abcdef";let n="";for(let o=0;o<e.length;++o)n+=t[e[o]>>4],n+=t[15&e[o]];return n}function E(e,t,n){e[t]=255&n,e[t+1]=n>>8&255}function S(e){const t=function(e){if(e){if(6===e.length)return parseInt("0x"+e);if(7===e.length)return parseInt("0x"+e.substr(1))}return 0}(e);return[C(t),x(t),B(t)]}function C(e){return e>>16&255}function x(e){return e>>8&255}function B(e){return 255&e}t.Bitmask=class{constructor(e,t){this.width=e,this.height=t,this.mask=new Uint8Array(Math.ceil(e*t/8))}set(e,t){const n=e+this.width*t,o=n>>3,r=7&n;this.mask[o]|=1<<r}get(e,t){const n=e+this.width*t,o=n>>3,r=7&n;return this.mask[o]>>r&1}},t.encodeTilemap=function(e,t){return e?`tiles.createTilemap(${function(e){return e?`hex\`${c(e)}\``:"hex``"}(e.tilemap)}, ${m(o.fromData(e.layers),t)}, [${e.tileset.tiles.map((e=>function(e,t){return e.id}(e)))}], ${k(e.tileset.tileWidth)})`:"null"},t.decodeTilemap=function(t,n,o){if(!(t=e.Util.htmlUnescape(t).trim()).trim())return null;const r=(t=(t=t.substr(t.indexOf("(")+1)).substr(0,t.lastIndexOf(")"))).substr(0,t.indexOf(",")),s=(t=t.substr(r.length+1)).substr(0,t.indexOf(",")),a=(t=t.substr(s.length+1)).substr(0,t.lastIndexOf("]")+1),c=t=t.substr(a.length+1);return new i(l(r),{tiles:u(a,o),tileWidth:b(c)},h(s).data())},t.trimTilemapTileset=function(e){const t=e.tileset.tiles.slice(),n=e.tilemap,o={};o[t[0].id]=!0;for(let e=0;e<n.width;e++)for(let r=0;r<n.height;r++)o[t[n.get(e,r)].id]=!0;const r=e.editedTiles||[],i=t.filter((e=>o[e.id]||"*"===e.id.charAt(0)||-1!==r.indexOf(e.id)));if(i.length===t.length)return;const s=[];for(let e=0;e<t.length;e++)s.push(i.indexOf(t[e]));for(let e=0;e<n.width;e++)for(let t=0;t<n.height;t++)n.set(e,t,s[n.get(e,t)]);e.tileset.tiles=i},t.isEmptyTilemap=function(e){const t=e.tileset.tiles,n=e.tilemap,o=t[0].id;for(let e=0;e<n.width;e++)for(let r=0;r<n.height;r++)if(t[n.get(e,r)].id!==o)return!1;return!0},t.computeAverageColor=function(e,t){const n=t.map(S),o=[0,0,0];let r=0;for(let t=0;t<e.width;t++)for(let i=0;i<e.height;i++){const s=e.get(t,i);if(s){++r;const e=n[s];o[0]+=e[0],o[1]+=e[1],o[2]+=e[2]}}return r?"#"+function(e){let t="";for(let n=0;n<e.length;++n)t+=("0"+e[n].toString(16)).slice(-2);return t}(o.map((e=>Math.floor(e/r)))):"#00000000"},t.getBitmap=function(e,t){const n=e.apis.byQName[t];return n?s(n.attributes.jresURL):null},t.getBitmapFromJResURL=s,t.hexToBitmap=a,t.filterItems=function(e,t){const n=(t=t.filter((e=>!!e)).map((e=>e.toLowerCase()))).filter((e=>0!==e.indexOf("!"))),o=t.filter((e=>0===e.indexOf("!")&&e.length>1)).map((e=>e.substring(1)));return e.filter((e=>{return t=e,n.every((e=>{const n=`?${e}`;return t.tags.some((t=>t===e||t===n))}))&&function(e){return o.every((t=>!e.tags.some((e=>e===t))))}(e);var t}))},t.getGalleryItems=function(n,o){let r=function(t,n){return e.Util.values(t.byQName).filter((e=>4===e.kind&&e.attributes.fixedInstance&&function(e,t,n){if(t==n)return!0;let o=e.byQName[t];return!(!o||!o.extendsTypes)&&o.extendsTypes.indexOf(n)>=0}(t,e.retType,n)))}(n.apis,o);return r=r.filter((e=>e.namespace!=t.TILE_NAMESPACE)),function(t){const n=new e.ImageConverter;t.forEach((e=>{e.attributes.jresURL&&!e.attributes.iconURL&&0==e.attributes.jresURL.indexOf("data:image/x-mkcd-f")&&(e.attributes.iconURL=n.convert(e.attributes.jresURL))}))}(r),r.map((t=>{const n=(t.attributes.tags||"").split(" ").filter((e=>!!e)).map((t=>e.Util.startsWith(t,"category-")?t:t.toLowerCase()));return{qName:t.qName,src:t.attributes.iconURL,alt:t.qName,tags:n}}))},t.base64EncodeBitmap=function(t){const n=o.fromData(t),r=pxtc.f4EncodeImg(t.width,t.height,4,((e,t)=>n.get(e,t)));return btoa(e.U.uint8ArrayToString(v(r)))},t.tilemapLiteralToTilemap=l,t.hexEncodeTilemap=c,t.formatByte=p,t.resizeBitmap=d,t.resizeTilemap=g,t.imageLiteralToBitmap=h,t.encodeAnimationString=function(t,n){const o=t.map((e=>e.data)),r=new Uint8ClampedArray(8+o[0].length*o.length);E(r,0,n),E(r,2,t[0].width),E(r,4,t[0].height),E(r,6,t.length);let i=8;return o.forEach((e=>{r.set(e,i),i+=e.length})),btoa(e.sprite.uint8ArrayToHex(r))},t.addMissingTilemapTilesAndReferences=function(e,t){const n=e.getProjectTiles(t.data.tileset.tileWidth,!0);t.data.projectReferences=[];for(const o of n.tiles)t.data.tileset.tiles.some((e=>e.id===o.id))||t.data.tileset.tiles.push(o),e.isAssetUsed(o,null,[t.id])&&t.data.projectReferences.push(o.id)},t.updateTilemapReferencesFromResult=function(t,n){const o=n.data;if(o.deletedTiles)for(const e of o.deletedTiles)t.deleteTile(e);if(o.editedTiles)for(const e of o.editedTiles){const n=o.tileset.tiles.findIndex((t=>t.id===e)),r=o.tileset.tiles[n];r&&(o.tileset.tiles[n]=t.updateTile(r))}for(let e=0;e<o.tileset.tiles.length;e++){const n=o.tileset.tiles[e];n.jresData||(o.tileset.tiles[e]=t.resolveTile(n.id))}e.sprite.trimTilemapTileset(o)},t.imageLiteralFromDimensions=function(e,t,o,r){let i=f(r);const s=e*t>300?"":" ";for(let r=0;r<t;r++){i+="\n";for(let t=0;t<e;t++)i+=n[o]+s}return i+="\n",i+=_(r),i},t.bitmapToImageLiteral=m,t.bitmapEquals=y,t.tileWidthToTileScale=k,t.tileScaleToTileWidth=b,t.hexToUint8Array=v,t.uint8ArrayToHex=T,t.colorStringToRGB=S}(e.sprite||(e.sprite={}))}(pxt||(pxt={})),function(e){!function(t){!function(n){const o=new RegExp(`^\\s*${t.TILE_NAMESPACE}\\s*\\.\\s*${t.TILE_PREFIX}(\\d+)\\s*$`);class r{constructor(e,t,n){this.tilemap=e,this.tileset=t,this.layers=n,this.nextId=0}}function i(e){return(e=e.replace(/[\[\]]/g,""))?e.split(",").filter((e=>!!e.trim())).map((e=>function(e){if(0===(e=e.trim()).indexOf("img")){return{data:t.imageLiteralToBitmap(e).data()}}const n=o.exec(e);if(n)return{data:null,projectId:Number(n[1])};return{data:null,qualifiedName:e}}(e))):[]}n.LegacyTilemapData=r,n.decodeTilemap=function(n,o){var s;if(!(null==(n=null===(s=e.Util.htmlUnescape(n))||void 0===s?void 0:s.trim())?void 0:n.trim()))return new r(new t.Tilemap(16,16),{tileWidth:16,tiles:[]},new t.Bitmap(16,16).data());const a=(n=(n=n.substr(n.indexOf("(")+1)).substr(0,n.lastIndexOf(")"))).substr(0,n.indexOf(",")),l=(n=n.substr(a.length+1)).substr(0,n.indexOf(",")),c=(n=n.substr(l.length+1)).substr(0,n.lastIndexOf("]")+1),u=n=n.substr(c.length+1);return new r(t.tilemapLiteralToTilemap(a),{tiles:i(c),tileWidth:t.tileScaleToTileWidth(u)},t.imageLiteralToBitmap(l).data())},n.tileToBlocklyVariable=function(e){return`${e.projectId};${e.data.width};${e.data.height};${pxtc.Util.toHex(e.data.data)}`},n.blocklyVariableToTile=function(e){const t=e.split(";");return 4!==t.length?null:{projectId:parseInt(t[0]),data:{width:parseInt(t[1]),height:parseInt(t[2]),data:new Uint8ClampedArray(pxtc.Util.fromHex(t[3])),x0:0,y0:0}}}}(t.legacy||(t.legacy={}))}(e.sprite||(e.sprite={}))}(pxt||(pxt={})),function(e){!function(t){class n{constructor(){this.items={}}removeItem(e){delete this.items[e]}getItem(e){return this.items[e]}setItem(e,t){this.items[e]=t}clear(){this.items={}}}class o{constructor(e){this.storageId=e}targetKey(e){return this.storageId+"/"+e}removeItem(e){window.localStorage.removeItem(this.targetKey(e))}getItem(e){return window.localStorage[this.targetKey(e)]}setItem(e,t){window.localStorage[this.targetKey(e)]=t}clear(){let e=this.targetKey(""),t=[];for(let n=0;n<window.localStorage.length;++n){let o=window.localStorage.key(n);0==o.indexOf(e)&&t.push(o)}t.forEach((e=>window.localStorage.removeItem(e)))}}function r(){if(e.appTarget)return e.appTarget.id;const t=window.pxtConfig;if(t)return t.targetId;const n=window.pxtTargetBundle;return n?n.id:""}let i;function s(){if(i)return;const t=r();let s=!1;if(!e.shell.isSandboxMode())try{window.localStorage[t]="1";window.localStorage[t];s=!0}catch(e){}s?(i=new o(t),e.debug(`storage: local under ${t}`)):(i=new n,e.debug("storage: in memory"))}t.storageId=r,t.setLocal=function(e,t){s(),i.setItem(e,t)},t.getLocal=function(e){return s(),i.getItem(e)},t.removeLocal=function(e){s(),i.removeItem(e)},t.clearLocal=function(){s(),i.clear()}}(e.storage||(e.storage={}))}(pxt||(pxt={})),function(e){!function(t){!function(t){const n="http://localhost:3232/api/store/";function o(){return e.BrowserUtils.isLocalHostDev()&&!e.BrowserUtils.noSharedLocalStorage()}function r(){return e.BrowserUtils.isChromiumEdge()?"chromium-edge":e.BrowserUtils.browser()}t.getAsync=async function(t,i){if(o()){t+="-"+r();const o=await e.Util.requestAsync({url:`${n}${encodeURIComponent(t)}/${encodeURIComponent(i)}`,method:"GET",allowHttpErrors:!0});return o.json?o.json:o.text?o.text:void 0}{const n=e.storage.getLocal(`${t}:${i}`),o=e.Util.jsonTryParse(n);return o||n}},t.setAsync=async function(t,i,s){if(void 0===s)return void await e.storage.shared.delAsync(t,i);let a="";if(a="object"==typeof s?JSON.stringify(s):s.toString(),o()){t+="-"+r();const o={type:"object"==typeof s?"json":"text",val:a},l=JSON.stringify(o);await e.Util.requestAsync({url:`${n}${encodeURIComponent(t)}/${encodeURIComponent(i)}`,method:"POST",data:l})}else e.storage.setLocal(`${t}:${i}`,a)},t.delAsync=async function(t,i){o()?(t+="-"+r(),await e.Util.requestAsync({url:`${n}${encodeURIComponent(t)}/${encodeURIComponent(i)}`,method:"DELETE",allowHttpErrors:!0})):e.storage.removeLocal(`${t}:${i}`)}}(t.shared||(t.shared={}))}(e.storage||(e.storage={}))}(pxt||(pxt={})),function(e){const t=["name","version","description","license","dependencies","files","testFiles","testDependencies","fileDependencies","public","targetVersions","supportedTargets","preferredEditor","languageRestriction","additionalFilePath","additionalFilePaths"];class n{constructor(e,t,n,o){this.id=e,this._verspec=t,this.parent=n,this.level=-1,this.isLoaded=!1,this.ignoreTests=!1,this.cppOnly=!1,o&&(this.level=o.level+1),this.addedBy=[o]}static stringifyConfig(e){const n=e,o={};for(const e of t)n.hasOwnProperty(e)&&(o[e]=n[e]);for(const e of Object.keys(n))o.hasOwnProperty(e)||(o[e]=n[e]);return JSON.stringify(o,null,4)+"\n"}static parseAndValidConfig(t){const n=e.Util.jsonTryParse(t);return n&&void 0!==n.name&&"string"==typeof n.name&&n.files&&Array.isArray(n.files)&&n.files.every((e=>"string"==typeof e))&&n.dependencies&&Object.keys(n.dependencies).every((e=>"string"==typeof n.dependencies[e]))&&n}static getConfigAsync(t,n,o){return Promise.resolve().then((()=>{if(e.github.isGithubId(o)){const t=e.github.parseRepoId(o);return e.packagesConfigAsync().then((n=>e.github.repoAsync(t.fullName,n))).then((n=>n?e.github.pkgConfigAsync(t.fullName,t.tag):null))}{const r=e.patching.upgradePackageReference(t,n,o),i=e.appTarget.bundledpkgs[r];return JSON.parse(i[e.CONFIG_NAME])}}))}static corePackages(){const t=e.appTarget.bundledpkgs;return Object.keys(t).map((n=>JSON.parse(t[n][e.CONFIG_NAME]))).filter((e=>!!e))}disablesVariant(e){return this.config&&this.config.disablesVariants&&this.config.disablesVariants.indexOf(e)>=0}invalid(){return/^invalid:/.test(this.version())}version(){return this.resolvedVersion||this._verspec}verProtocol(){let e=this.version().split(":");return e.length>1?e[0]:""}verArgument(){let e=this.verProtocol();return e?this.version().slice(e.length+1):this.version()}targetVersion(){return this.parent&&this.parent!=this?this.parent.targetVersion():this.config.targetVersions?this.config.targetVersions.target:void 0}commonDownloadAsync(){const t=this.verProtocol();if("pub"==t)return e.Cloud.downloadScriptFilesAsync(this.verArgument());if("github"==t)return e.packagesConfigAsync().then((t=>e.github.downloadPackageAsync(this.verArgument(),t))).then((e=>e.files));if("embed"==t){const t=e.getEmbeddedScript(this.verArgument());return Promise.resolve(t)}if("pkg"==t){const t=(this.parent||this).readFile(this.verArgument()),n=ts.pxtc.Util.jsonTryParse(t);return n||e.log(`unable to find ${this.verArgument()}`),Promise.resolve(n)}return Promise.resolve(null)}host(){return this.parent._host}readFile(e){return this.host().readFile(this,e)}readGitJson(){const t=this.readFile(e.github.GIT_JSON);return e.Util.jsonTryParse(t)}resolveDep(e){return this.parent.deps.hasOwnProperty(e)?this.parent.deps[e]:null}saveConfig(){const t=e.U.clone(this.config);delete t.additionalFilePaths;const n=e.Package.stringifyConfig(t);this.host().writeFile(this,e.CONFIG_NAME,n)}setPreferredEditor(e){this.config.preferredEditor!=e&&(this.config.preferredEditor=e,this.saveConfig())}getPreferredEditor(){let t=this.config.preferredEditor;if(!t){if(!(this.getFiles().indexOf(e.MAIN_BLOCKS)>=0))return e.JAVASCRIPT_PROJECT_NAME;const t=this.readFile(e.MAIN_BLOCKS),n=this.readFile(e.MAIN_TS);return!t&&n?e.JAVASCRIPT_PROJECT_NAME:e.BLOCKS_PROJECT_NAME}return t}parseJRes(t={}){for(const n of this.getFiles())e.U.endsWith(n,".jres")&&o(JSON.parse(this.readFile(n)),t);return t}resolveVersionAsync(){var t;let n=this._verspec;if(e.getEmbeddedScript(this.id))this.resolvedVersion=n="embed:"+this.id;else if(n&&"*"!=n){if("github"==this.verProtocol()){const o=e.github.parseRepoId(this._verspec);if(o&&!o.tag&&this.parent){e.debug("dep: unbound github extensions, trying to resolve tag");const r=e.semver.sortLatestTags(e.Util.values((null===(t=this.parent)||void 0===t?void 0:t.deps)||{}).map((t=>e.github.parseRepoId(t.version()))).filter((e=>(null==e?void 0:e.slug)===o.slug)).map((e=>e.tag)))[0];r&&(o.tag=r,this.resolvedVersion=n=e.github.stringifyRepo(o),e.debug(`dep: github patched ${this._verspec} to ${n}`))}}}else this.configureAsInvalidPackage(lf("version not specified for {0}",this.id)),n=this._verspec;return Promise.resolve(n)}downloadAsync(){return this.resolveVersionAsync().then((t=>{if(this.invalid())e.debug(`skip download of invalid package ${this.id}`);else if(/^embed:/.test(t)||this.installedVersion!=t)return e.debug("downloading "+t),this.host().downloadPackageAsync(this).then((()=>{this.loadConfig(),e.debug(`installed ${this.id} /${t}`)}))}))}loadConfig(){if(0!=this.level&&this.invalid())return;const t=this.readFile(e.CONFIG_NAME);t||e.U.userError(`extension ${this.id} is missing ${e.CONFIG_NAME}`),this.parseConfig(t),0!=this.level&&(this.installedVersion=this.version()),this.saveConfig()}validateConfig(){this.config.dependencies||e.U.userError("Missing dependencies in config of: "+this.id),Array.isArray(this.config.files)||e.U.userError("Missing files in config of: "+this.id),"string"==typeof this.config.name&&this.config.name||(this.config.name=lf("Untitled")),this.config.targetVersions&&this.config.targetVersions.target&&this.config.targetVersions.targetId===e.appTarget.id&&e.appTarget.versions&&e.semver.majorCmp(this.config.targetVersions.target,e.appTarget.versions.target)>0&&e.U.userError(lf("{0} requires target version {1} (you are running {2})",this.config.name,this.config.targetVersions.target,e.appTarget.versions.target))}isPackageInUse(t,n=this.readFile(e.MAIN_TS)){let o=null;const r=e.patching.computePatches(this.targetVersion(),"missingPackage");return r&&r.forEach((e=>{Object.keys(e.map).forEach((n=>{e.map[n]===t&&(o=new RegExp(n,"g"))}))})),o||(o=new RegExp(t+"\\.","g")),o.test(n)}upgradePackagesAsync(){return this.config||this.loadConfig(),e.packagesConfigAsync().then((t=>{let n=0,o={};return e.U.iterMap(this.config.dependencies,((r,i)=>{if(e.github.isGithubId(i)){const s=e.github.upgradedPackageReference(t,i);s&&s!=i&&(e.log(`upgrading dep ${r}: ${i} -> ${s}`),o[i]=s,this.config.dependencies[r]=s,n++)}})),n&&this.saveConfig(),n&&o}))}getMissingPackages(t,n){const o=e.patching.computePatches(this.targetVersion(),"missingPackage"),r={};return n&&o&&o.forEach((e=>{Object.keys(e.map).forEach((o=>{const i=new RegExp(o,"g"),s=e.map[o];n.replace(i,(e=>(t.dependencies[s]||(r[s]="*"),"")))}))})),r}findConflictsAsync(t,o){let r,i=[];return Promise.resolve().then((()=>"string"==typeof t?n.getConfigAsync(this.targetVersion(),t,o):Promise.resolve(t))).then((t=>{if(r=t,r){const t=r.yotta?e.U.jsonFlatten(r.yotta.config):null;this.parent.sortedDeps().forEach((n=>{if(r.core&&n.config.core&&r.name!=n.config.name){const t=new e.cpp.PkgConflictError(lf("conflict between core extensions {0} and {1}",r.name,n.id));return t.pkg0=n,void i.push(t)}let s=!1;if(t){const o=n.config||JSON.parse(n.readFile(e.CONFIG_NAME));if(!!o&&!!o.yotta&&!!n.config.yotta.config){const a=e.U.jsonFlatten(o.yotta.config);for(const l of Object.keys(t)){const c=a[l],u=r.yotta.configIsJustDefaults||o.yotta.configIsJustDefaults;if(a.hasOwnProperty(l)&&c!==t[l]&&!u&&(!n.parent.config.yotta||!n.parent.config.yotta.ignoreConflicts)){const t=new e.cpp.PkgConflictError(lf("conflict on yotta setting {0} between extensions {1} and {2}",l,r.name,n.id));t.pkg0=n,t.settingName=l,i.push(t),s=!0}}}}if(!s&&r.name===n.id&&n._verspec!==o&&!/^file:/.test(n._verspec)&&!/^file:/.test(o)){const t=/^github:/.test(n._verspec)&&e.github.parseRepoId(n._verspec),r=/^github:/.test(o)&&e.github.parseRepoId(o);if(!t||!r||t.fullName!==r.fullName||r.tag&&e.semver.strcmp(t.tag,r.tag)<0){const t=new e.cpp.PkgConflictError(lf("version mismatch for extension {0} (installed: {1}, installing: {2})",n.id,n._verspec,o));t.pkg0=n,t.isVersionConflict=!0,i.push(t)}}}))}return Object.keys(r.dependencies).reduce(((e,t)=>e.then((()=>this.findConflictsAsync(t,r.dependencies[t]))).then((e=>i.push.apply(i,e)))),Promise.resolve())})).then((()=>{const t=e=>{const n=[];return e.addedBy.forEach((e=>{e.id!==this.id&&(n.push.apply(t(e)),n.push(e))})),n},n=[];return i.forEach((i=>{n.push.apply(n,t(i.pkg0).map((t=>{const n=new e.cpp.PkgConflictError(i.isVersionConflict?lf("a dependency of {0} has a version mismatch with extension {1} (installed: {1}, installing: {2})",t.id,r.name,i.pkg0._verspec,o):lf("conflict on yotta setting {0} between extensions {1} and {2}",i.settingName,r.name,i.pkg0.id));return n.pkg0=t,n})))})),i.push.apply(i,n),i=i.filter(((e,t)=>{for(let n=0;n<t;++n)if(e.pkg0.id===i[n].pkg0.id)return!1;return!0})),i}))}configureAsInvalidPackage(t){e.log(`invalid package ${this.id}: ${t}`),this._verspec="invalid:"+this.id,this.config={name:this.id,description:t,dependencies:{},files:[]}}parseConfig(t,n){try{const e=JSON.parse(t);this.config=e}catch(t){this.configureAsInvalidPackage(lf("Syntax error in pxt.json")),e.tickEvent("package.invalidConfigEncountered")}const o=JSON.stringify(this.config);for(const t in this.config.dependencies){const n=e.patching.upgradePackageReference(this.targetVersion(),t,this.config.dependencies[t]);n!=t&&(delete this.config.dependencies[t],n&&(this.config.dependencies[n]="*"))}n&&(this.config.targetVersions={target:n}),JSON.stringify(this.config)!=o&&this.saveConfig(),this.validateConfig()}patchCorePackage(){e.Util.assert(e.appTarget.simulator&&e.appTarget.simulator.dynamicBoardDefinition),e.Util.assert(0==this.level);const t=Object.keys(this.config.dependencies).filter((t=>!!t&&(t==e.BLOCKS_PROJECT_NAME||t==e.JAVASCRIPT_PROJECT_NAME||JSON.parse((e.appTarget.bundledpkgs[t]||{})[e.CONFIG_NAME]||"{}").core)));if(0==t.length){const t=e.Package.corePackages();t.length&&this.config.dependencies[t[0].name]}else t.length>1&&(t.pop(),t.forEach((t=>{e.log(`removing core package ${t}`),delete this.config.dependencies[t]})))}resolvedDependencies(){return Object.keys(this.dependencies()).map((e=>this.resolveDep(e)))}dependencies(t=!1){if(!this.config)return{};const n=e.Util.clone(this.config.dependencies||{});return 0==this.level&&this.config.testDependencies&&e.Util.iterMap(this.config.testDependencies,((t,o)=>{("*"!=o||e.appTarget.bundledpkgs[t])&&(n[t]=o)})),t&&this.config.cppDependencies&&e.Util.jsonMergeFrom(n,this.config.cppDependencies),n}loadAsync(t=!1,o){if(this.isLoaded)return Promise.resolve();let r=Promise.resolve();0!=this.level||e.appTarget.multiVariants||e.setAppTargetVariant(null),this.isLoaded=!0;const i=this.readFile(e.CONFIG_NAME);null==i?t||e.U.userError("Package not installed: "+this.id+", did you forget to run `pxt install`?"):r=r.then((()=>this.parseConfig(i))),0!=this.level||t||(r=r.then((()=>this.upgradePackagesAsync().then((()=>{}))))),t&&(r=r.then((()=>this.downloadAsync()))),0==this.level&&t&&(r=r.then((()=>this.upgradePackagesAsync())).then((t=>t?(Object.keys(t).forEach((t=>e.tickEvent("package.doubleload",{extension:t}))),e.log("upgraded, downloading again"),e.debug(t),this.downloadAsync()):Promise.resolve()))),e.appTarget.simulator&&e.appTarget.simulator.dynamicBoardDefinition&&(0==this.level&&(r=r.then((()=>this.patchCorePackage()))),r=r.then((()=>{if(this.config.compileServiceVariant&&e.setAppTargetVariant(this.config.compileServiceVariant),this.config.files.indexOf("board.json")<0)return;const t=e.appTarget.simulator.boardDefinition=JSON.parse(this.readFile("board.json"));t.id=this.config.name,e.appTarget.appTheme.boardName=t.boardName||lf("board"),e.appTarget.appTheme.driveDisplayName=t.driveDisplayName||lf("DRIVE");let n=t=>{let n=/^pkg:\/\/(.*)/.exec(t);if(n){let t=n[1],o=this.readFile(t);return e.U.toDataUri(o,e.U.getMime(t))}return t},o=e.appTarget.simulator.boardDefinition;if("object"==typeof o.visual){let e=o.visual;e.image=n(e.image),e.outlineImage=n(e.outlineImage)}})));const s=(t,n)=>{var o;if(e.debug(`version spec mismatch: ${t._verspec} != ${n}`),/^github:/.test(t._verspec)&&/^github:/.test(n)){const r=e.github.parseRepoId(t._verspec),i=e.github.parseRepoId(n);if((null==r?void 0:r.slug)&&(null==r?void 0:r.slug)===(null==i?void 0:i.slug)){const s=(null==r?void 0:r.tag)||(null===(o=t.config)||void 0===o?void 0:o.version),a=e.semver.strcmp(s,i.tag);if(0==a)return void e.debug(`resolved version are ${s}`);if(a<0)return void e.debug(`auto-upgraded ${n} to ${s}`)}}/^file:/.test(t._verspec)||/^file:/.test(n)?e.debug("ignore file: mismatch issues"):t.configureAsInvalidPackage(lf("version mismatch"))},a=async(o,r,i=!1)=>{o||(o=r.dependencies(i)),e.debug(`deps: ${r.id}->${Object.keys(o).join(", ")}`),o=e.github.resolveMonoRepoVersions(o),e.debug(`deps: resolved ${r.id}->${Object.keys(o).join(", ")}`);for(let a of Object.keys(o)){let l=o[a]||"*";e.debug(`dep: load ${r.id}.${a}${i?"++":""}: ${l}`),"hw"==a&&e.hwVariant&&(a="hw---"+e.hwVariant);let c=r.resolveDep(a);if(c){if(c.invalid()||c._verspec===l||s(c,l),c.invalid()){c.level=Math.min(c.level,r.level+1),c.addedBy.push(r);continue}i||(c.level=Math.min(c.level,r.level+1),c.addedBy.push(r))}else{let e=new n(a,l,r.parent,r);i&&(e.cppOnly=!0),r.parent.deps[a]=e,r.parent.deps[a.replace(/---.*/,"")]=e,await e.loadAsync(t)}}};return r.then((()=>a(null,this))).then((()=>{if(this.config.palette&&e.appTarget.runtime&&(e.appTarget.runtime.palette=e.U.clone(this.config.palette),this.config.paletteNames&&(e.appTarget.runtime.paletteNames=this.config.paletteNames)),this.config.screenSize&&e.appTarget.runtime&&(e.appTarget.runtime.screenSize=e.U.clone(this.config.screenSize)),0===this.level){const t=this.readFile(e.MAIN_TS);if(!t)return Promise.resolve(null);const n=this.getMissingPackages(this.config,t);let o=!1;return Object.keys(n).reduce(((t,r)=>t.then((()=>this.findConflictsAsync(r,n[r]))).then((t=>{if(t.length){const n=t.map((e=>e.pkg0.id)).join(", "),o=t.map((e=>e.settingName)).filter((e=>!!e)).join(", ");return e.log(`skipping missing package ${r} because it conflicts with the following packages: ${n} (conflicting settings: ${o})`),Promise.resolve(null)}{e.log(`adding missing package ${r}`),o=!0,this.config.dependencies[r]="*";const t={};return t[r]=n[r],a(t,this)}}))),Promise.resolve(null)).then((()=>(o&&(this.saveConfig(),this.validateConfig()),Promise.resolve(null))))}return Promise.resolve(null)})).then((()=>0!=this.level?Promise.resolve():Promise.all(e.U.values(this.parent.deps).map((e=>a(null,e,!0)))))).then((()=>{e.debug(`  installed ${this.id}`)}))}getFiles(){let t;t=0!=this.level||this.ignoreTests?this.config.files.slice(0):this.config.files.concat(this.config.testFiles||[]);const o=this.config.fileDependencies;return this.config.fileDependencies&&(t=t.filter((t=>{const r=o=>{if("!"==(o=o.trim())[0])return!r(o.slice(1));if(/^[\w-]+$/.test(o)){const e=this.parent.resolveDep(o);return!(!e||e.cppOnly)}const i=/^target:(\w+)$/.exec(o);return i?i[1]==e.appTarget.id||i[1]==e.appTarget.platformid:(n.depWarnings[o]||(n.depWarnings[o]=!0,e.log(`invalid dependency expression: ${o} in ${this.id}/${t}`)),!1)},i=e.U.lookup(o,t);return!i||!i.trim()||i.split("||").some((e=>e.split("&&").every(r)))}))),t}addSnapshot(t,n=[""]){for(let o of this.getFiles())n.some((t=>e.U.endsWith(o,t)))&&(t[this.id+"/"+o]=this.readFile(o));t[this.id+"/"+e.CONFIG_NAME]=this.readFile(e.CONFIG_NAME)}packageLocalizationStringsAsync(t){const n=e.appTarget.id,o=[this.config.name+"-jsdoc",this.config.name],r={},i=e.appTarget.appTheme||{};return this.config.skipLocalization?Promise.resolve(r):e.Util.liveLocalizationEnabled()&&"this"!=this.id&&e.appTarget.bundledpkgs[this.id]?(e.debug(`loading live translations for ${this.id}`),Promise.all(o.map((o=>e.Util.downloadLiveTranslationsAsync(t,`${n}/${o}-strings.json`,i.crowdinBranch).then((n=>{n&&Object.keys(n).length?e.Util.jsonMergeFrom(r,n):(e.tickEvent("translations.livetranslationsfailed",{filename:o}),e.Util.jsonMergeFrom(r,this.bundledStringsForFile(t,o)))})).catch((i=>{e.tickEvent("translations.livetranslationsfailed",{filename:o}),e.log(`error while downloading ${n}/${o}-strings.json`),e.Util.jsonMergeFrom(r,this.bundledStringsForFile(t,o))}))))).then((()=>r))):(o.map((e=>this.bundledStringsForFile(t,e))).filter((e=>!!e)).forEach((t=>e.Util.jsonMergeFrom(r,t))),Promise.resolve(r))}bundledStringsForFile(t,n){let o={},[r,i,s]=e.Util.normalizeLanguageCode(t);const a=this.config.files;let l=`_locales/${r}/${n}-strings.json`;return a.indexOf(l)>-1?o=JSON.parse(this.readFile(l)):s&&(l=`_locales/${s}/${n}-strings.json`,a.indexOf(l)>-1?o=JSON.parse(this.readFile(l)):i&&(l=`_locales/${i}/${n}-strings.json`,a.indexOf(l)>-1&&(o=JSON.parse(this.readFile(l))))),o}}n.depWarnings={},e.Package=n;function o(e,t={}){let n=e["*"]||{};for(let o of Object.keys(e)){if("*"==o)continue;let r=e[o];"string"==typeof r&&(r={data:r});let i=r.namespace||n.namespace||"";i&&(i+=".");let s=r.id||i+o,a=r.icon,l=r.mimeType||n.mimeType,c=r.dataEncoding||n.dataEncoding||"base64";a||"base64"!=c||"image/png"!=l&&"image/jpeg"!=l||(a="data:"+l+";base64,"+r.data),t[s]={id:s,data:r.data,dataEncoding:c,icon:a,namespace:i,mimeType:l,tilemapTile:r.tilemapTile,displayName:r.displayName,tileset:r.tileset}}return t}e.MainPackage=class extends n{constructor(e){super("this","file:.",null,null),this._host=e,this.deps={},this.parent=this,this.addedBy=[this],this.level=0,this.deps[this.id]=this}installAllAsync(e){return this.loadAsync(!0,e)}sortedDeps(t=!1){let n={},o=[];const r=e=>e.config?Object.keys(e.config.cppDependencies||{}).length:0,i=s=>{if(!s||e.U.lookup(n,s.id))return;n[s.id]=!0;const a=Object.keys(s.dependencies(t)).map((e=>this.resolveDep(e)));a.sort(((t,n)=>r(n)-r(t)||e.U.strcmp(t.id,n.id))),a.forEach(i),o.push(s.id)};return i(this),o.map((e=>this.resolveDep(e)))}localizationStringsAsync(t){const n={};return Promise.all(e.Util.values(this.deps).map((e=>e.packageLocalizationStringsAsync(t).then((e=>{e&&Object.keys(e).forEach((t=>{n[t]||(n[t]=e[t])}))}))))).then((()=>{const t=e.U.getLocalizedStrings();return Object.keys(n).forEach((o=>{(e.U.startsWith(o,"{id:subcategory}")||e.U.startsWith(o,"{id:group}"))&&(t[o]||(t[o]=n[o]))})),e.U.setLocalizedStrings(t),Promise.resolve(n)}))}getTargetOptions(){let t=e.U.clone(e.appTarget.compile);return e.U.assert(!!t),t.utf8||this.sortedDeps(!0).forEach((n=>{n.config&&n.config.utf8&&(e.debug("forcing utf8 mode: pkg="+n.id),t.utf8=!0)})),t}getJRes(){if(!this._jres){this._jres={};for(const e of this.sortedDeps())e.parseJRes(this._jres);const t=(e.appTarget.runtime&&e.appTarget.runtime.palette?e.appTarget.runtime.palette:["#000000","#ffffff"]).map((e=>("000000"+parseInt(e.replace(/#/,""),16).toString(16)).slice(-6))).join("");this._jres.__palette={id:"__palette",data:t,dataEncoding:"hex",mimeType:"application/x-palette"}}return this._jres}updateJRes(){this._jres&&this.parseJRes(this._jres)}resolveBannedCategories(){if(void 0!==this._resolvedBannedCategories)return this._resolvedBannedCategories;let t=[];return e.appTarget&&e.appTarget.runtime&&e.appTarget.runtime.bannedCategories&&e.appTarget.runtime.bannedCategories.length&&(t=e.appTarget.runtime.bannedCategories.slice(),Object.keys(this.deps).map((e=>this.deps[e])).filter((e=>!!e)).map((t=>e.Util.jsonTryParse(t.readFile(e.CONFIG_NAME)))).filter((e=>e&&e.requiredCategories)).forEach((e=>e.requiredCategories.forEach((e=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)})))),this._resolvedBannedCategories=t),this._resolvedBannedCategories=t,this._resolvedBannedCategories.length||(this._resolvedBannedCategories=null),this._resolvedBannedCategories}async getCompileOptionsAsync(t=this.getTargetOptions()){let n={sourceFiles:[],fileSystem:{},target:t,name:this.config?this.config.name:""};const o=(t,n)=>{this.config.files.indexOf(t)<0&&e.U.userError(lf("please add '{0}' to \"files\" in {1}",t,e.CONFIG_NAME)),n="// Auto-generated. Do not edit.\n"+n+"\n// Auto-generated. Do not edit. Really.\n",this.host().readFile(this,t,!0)!==n&&(e.debug(`updating ${t} (size=${n.length})...`),this.host().writeFile(this,t,n,!0))};let r=!1;const i=async n=>{const i={extinfo:null,target:null},s=e.appTargetVariant;n&&e.setAppTargetVariant(n,{temporary:!0});try{let a=e.cpp.getExtensionInfo(this);r||!a.shimsDTS&&!a.enumsDTS||(r=!0,a.shimsDTS&&o("shims.d.ts",a.shimsDTS),a.enumsDTS&&o("enums.d.ts",a.enumsDTS));const l=t.isNative?await this.host().getHexInfoAsync(a):null;a=e.U.flatClone(a),t.keepCppFiles||(delete a.compileData,delete a.generatedFiles,delete a.extensionFiles),a.hexinfo=l,i.extinfo=a,i.target=e.appTarget.compile}finally{n&&e.setAppTargetVariant(s,{temporary:!0})}return i};let s;await this.loadAsync(),n.bannedCategories=this.resolveBannedCategories(),n.target.preferredEditor=this.getPreferredEditor(),e.debug(`building: ${this.sortedDeps().map((e=>e.config.name)).join(", ")}`),s=e.appTarget.multiVariants?e.appTargetVariant?[e.appTargetVariant]:e.appTarget.alwaysMultiVariant||e.appTarget.compile.switches.multiVariant?e.appTarget.multiVariants:[e.appTarget.multiVariants[0]]:[null];let a=null;for(let t of s){a&&e.debug(`building for ${t}`);const o=await i(t),r=o.extinfo;r.appVariant=t,r.outputPrefix=1!=s.length&&t?t+"-":"",a?n.otherMultiVariants.push(o):(a=r,n.otherMultiVariants=[])}n.extinfo=a;if(!(e.appTarget.compile.shortPointers||"vm"==e.appTarget.compile.nativeType||this.config.binaryonly||!n.target.isNative)){const t=await this.filesToBePublishedAsync(!0),o=JSON.stringify({name:this.config.name,comment:this.config.description,status:"unpublished",scriptId:this.installedVersion,cloudId:e.CLOUD_ID+e.appTarget.id,editor:this.getPreferredEditor(),targetVersions:e.appTarget.versions}),r=JSON.stringify(t),i=await e.lzmaCompressAsync(o+r);i&&(n.embedMeta=JSON.stringify({compression:"LZMA",headerSize:o.length,textSize:r.length,name:this.config.name,eURL:e.appTarget.appTheme.embedUrl,eVER:e.appTarget.versions?e.appTarget.versions.target:"",pxtTarget:e.appTarget.id}),n.embedBlob=ts.pxtc.encodeBase64(e.U.uint8ArrayToString(i)))}for(const e of this.sortedDeps())for(const t of e.getFiles())if(/\.(ts|asm|py)$/.test(t)){let o=t;e.level>0&&(o="pxt_modules/"+e.id+"/"+t),n.sourceFiles.push(o),n.fileSystem[o]=e.readFile(t)}n.jres=this.getJRes();const l=e.appTarget.runtime&&e.appTarget.runtime.functionsOptions;return n.allowedArgumentTypes=l&&l.extraFunctionEditorTypes&&l.extraFunctionEditorTypes.map((e=>e.typeName)).concat("number","boolean","string"),n}prepareConfigToBePublished(){const t=e.U.clone(this.config);return delete t.installedVersion,delete t.additionalFilePath,delete t.additionalFilePaths,t.targetVersions||(t.targetVersions=e.Util.clone(e.appTarget.versions)),e.U.iterMap(t.dependencies,((n,o)=>{if(!o||/^(file|workspace):/.test(o)){o="*";try{const t=this.resolveDep(n).readGitJson();if(t&&t.repo){let n=e.github.parseRepoId(t.repo);n.tag=t.commit.tag||t.commit.sha,o=e.github.stringifyRepo(n)}}catch(e){}t.dependencies[n]=o}})),t}filesToBePublishedAsync(t=!1){const n={};return this.loadAsync().then((()=>{t||this.config.public||e.U.userError('Only packages with "public":true can be published');const o=this.prepareConfigToBePublished();n[e.CONFIG_NAME]=e.Package.stringifyConfig(o);for(let t of this.getFiles()){if(t==e.CONFIG_NAME)continue;let o=this.readFile(t);null==o&&e.U.userError("referenced file missing: "+t),n[t]=o}return e.U.sortObjectFields(n)}))}saveToJsonAsync(){return this.filesToBePublishedAsync(!0).then((t=>({meta:{cloudId:e.CLOUD_ID+e.appTarget.id,targetVersions:e.appTarget.versions,editor:this.getPreferredEditor(),name:this.config.name},source:JSON.stringify(t,null,2)})))}compressToFileAsync(){return this.saveToJsonAsync().then((t=>e.lzmaCompressAsync(JSON.stringify(t,null,2))))}computePartDefinitions(t){if(!t||!t.length)return{};let n={};return this.sortedDeps().forEach((o=>{let r=o.readFile("pxtparts.json");if(r)try{let i=JSON.parse(r);Object.keys(i).forEach((r=>{if(t.indexOf(r)>=0){let t=n[r]=i[r];if("string"==typeof t.visual.image&&/\.svg$/i.test(t.visual.image)){let n=o.readFile(t.visual.image);n||e.reportError("parts","invalid part definition",{error:`missing visual ${t.visual.image}`}),/^data:image\/svg\+xml/.test(n)||(n="data:image/svg+xml,"+encodeURIComponent(n)),t.visual.image=n}}}))}catch(t){e.reportError("parts","invalid pxtparts.json file")}})),n}},e.inflateJRes=o,e.allPkgFiles=function(t){return[e.CONFIG_NAME].concat(t.files||[]).concat(t.testFiles||[])},e.isPkgBeta=function(e){return e&&/\bbeta\b/.test(e.description)}}(pxt||(pxt={})),function(e){!function(t){let n,o,r,i,s,a=()=>{};function l(){if(s)return s;let t=Promise.resolve();if(n){e.debug("packetio: disconnect");const r=n;t=t.then((()=>r.disconnectAsync())).then((()=>r.io.disposeAsync())).catch((t=>{e.reportException(t)})).finally((()=>{o=void 0,n=void 0,s=void 0})),a&&(t=t.then((()=>a()))),s=t}return t}t.isActive=function(){return!!n},t.isConnected=function(){return!!n&&n.io.isConnected()},t.isConnecting=function(){return!!n&&n.io.isConnecting()},t.icon=function(){var t;return!!n&&(n.icon||(null===(t=e.appTarget.appTheme.downloadDialogTheme)||void 0===t?void 0:t.deviceIcon)||"usb")},t.unsupportedParts=function(){return(null==n?void 0:n.unsupportedParts)?n.unsupportedParts():[]},t.disconnectAsync=l,t.configureEvents=function(e,t,o){a=e,r=t,i=o,n&&(n.io.onConnectionChanged=a,n.onSerial=r,n.onCustomEvent=o)},t.sendCustomEventAsync=function(e,t){return n?n.sendCustomEventAsync(e,t):Promise.resolve()},t.initAsync=function(s=!1){if(e.debug("packetio: init "+(s?"(force)":"")),!o){let c=Promise.resolve();s&&(c=c.then((()=>l()))),o=c.then((()=>n?Promise.resolve(n):t.mkPacketIOAsync?(e.debug("packetio: new wrapper"),t.mkPacketIOAsync().then((e=>(e.onConnectionChanged=a,n=t.mkPacketIOWrapper(e),r&&(n.onSerial=r),i&&(n.onCustomEvent=i),a&&a(),n)))):(e.debug("packetio: not defined, skipping"),Promise.resolve(void 0)))).finally((()=>{o=void 0}))}return o}}(e.packetio||(e.packetio={}))}(pxt||(pxt={})),function(e){!function(t){t.computePatches=function(t,n){const o=e.appTarget.compile?e.appTarget.compile.patches:void 0;if(!o)return;const r=e.semver.tryParse(t||"0.0.0")||e.semver.tryParse("0.0.0");let i=[];return Object.keys(o).filter((t=>e.semver.inRange(t,r))).forEach((e=>i=i.concat(o[e]))),n&&(i=i.filter((e=>e.type==n))),i.length?i:void 0},t.upgradePackageReference=function(t,n,o){if("*"!=o)return n;const r=e.patching.computePatches(t,"package");let i=n;return r&&r.forEach((e=>{Object.keys(e.map).forEach((t=>{i==t&&(i=e.map[t])}))})),i},t.patchJavaScript=function(t,n){const o=e.patching.computePatches(t);let r=n;return o&&(o.filter((e=>"api"===e.type)).forEach((e=>{Object.keys(e.map).forEach((t=>{const n=new RegExp(t,"g");r=r.replace(n,e.map[t])}))})),o.filter((e=>"userenum"===e.type)).forEach((e=>{Object.keys(e.map).forEach((t=>{const n=new RegExp("enum\\s+"+t+"\\s*{","gm");r=r.replace(n,`enum ${e.map[t]} {`);const o=new RegExp(`(^|[^_a-zA-Z0-9])${t}(\\s*\\.)`,"g");r=r.replace(o,`$1${e.map[t]}$2`)}))}))),r}}(e.patching||(e.patching={}))}(pxt||(pxt={})),function(e){e.react||(e.react={})}(pxt||(pxt={})),function(e){!function(t){function n(t,n){if(t){if(n){let o=t.major-n.major||t.minor-n.minor||t.patch-n.patch;if(o)return o;if(0==t.pre.length&&n.pre.length>0)return 1;if(t.pre.length>0&&0==n.pre.length)return-1;for(let r=0;r<t.pre.length+1;++r){let i=t.pre[r],s=n.pre[r];if(!i)return s?-1:0;if(!s)return 1;if(/^\d+$/.test(i)){if(!/^\d+$/.test(s))return-1;if(o=parseInt(i)-parseInt(s),o)return o}else{if(/^\d+$/.test(s))return 1;if(o=e.U.strcmp(i,s),o)return o}}return 0}return-1}return n?1:0}function o(t,n){let o=r(t)||r(n);return o||e.U.userError(e.U.lf("'{0}' doesn't look like a semantic version number",t)),o}function r(e){if(!e)return null;if("*"===e)return{major:Number.MAX_SAFE_INTEGER,minor:Number.MAX_SAFE_INTEGER,patch:Number.MAX_SAFE_INTEGER,pre:[],build:[]};/^v\d/i.test(e)&&(e=e.slice(1));let t=/^(\d+)\.(\d+)\.(\d+)(-([0-9a-zA-Z\-\.]+))?(\+([0-9a-zA-Z\-\.]+))?$/.exec(e);return t?{major:parseInt(t[1]),minor:parseInt(t[2]),patch:parseInt(t[3]),pre:t[5]?t[5].split("."):[],build:t[7]?t[7].split("."):[]}:null}function i(e){let t=e.major+"."+e.minor+"."+e.patch;return e.pre.length&&(t+="-"+e.pre.join(".")),e.build.length&&(t+="+"+e.build.join(".")),t}function s(t,o){let i=r(t),s=r(o);return i||s?n(i,s):e.U.strcmp(t,o)}function a(e,t){let o=e.split(" - ");if(2!=o.length)return!1;let i=r(o[0]),s=r(o[1]);if(!i||!s)return!1;if(!t)return!0;const a=n(i,t),l=n(t,s);return a<=0&&l<0}t.cmp=n,t.parse=o,t.tryParse=r,t.normalize=function(e){return i(o(e))},t.stringify=i,t.majorCmp=function(e,t){let n=r(e),o=r(t);return n.major-o.major},t.strcmp=s,t.inRange=a,t.sortLatestTags=function(e){const n=e.filter((e=>!!t.tryParse(e)));return n.sort(s),n.reverse(),n},t.test=function(){console.log("Test semver");let t=["0.9.0","1.0.0-0.3.7","1.0.0-alpha","1.0.0-alpha.1","1.0.0-alpha.beta","1.0.0-beta","1.0.0-beta.2","1.0.0-beta.11","1.0.0-rc.1","1.0.0-x.7.z.92","1.0.0","1.0.1","1.9.0","1.10.0","1.11.0"];for(let r=0;r<t.length;++r){let s=o(t[r]);console.log(t[r],s),e.U.assert(i(s)==t[r]);for(let i=0;i<t.length;++i){let a=n(s,o(t[i]));console.log(t[r],t[i],a),r<i?e.U.assert(a<0):r>i?e.U.assert(a>0):e.U.assert(0==a)}}const s=r("1.2.3");e.U.assert(a("0.1.2 - 2.2.3",s)),e.U.assert(a("1.2.3 - 2.2.3",s)),e.U.assert(!a("0.0.0 - 1.2.3",s)),e.U.assert(!a("1.2.4 - 4.2.3",s)),e.U.assert(!a("0.0.0 - 0.0.1",s))}}(e.semver||(e.semver={}))}(pxt||(pxt={})),function(e){!function(e){function t(t){return e.Util.values(t.byQName).filter((e=>e.attributes.block&&/^{[^:]+:[^}]+}/.test(e.attributes.block))).forEach((e=>{e.attributes.block=e.attributes.block.replace(/^{[^:]+:[^}]+}/,"")})),t}e.assert=e.Util.assert,e.oops=e.Util.oops,e.U=e.Util,e.ON_START_TYPE="pxt-on-start",e.ON_START_COMMENT="on start",e.HANDLER_COMMENT="code goes here",e.TS_STATEMENT_TYPE="typescript_statement",e.TS_DEBUGGER_TYPE="debugger_keyword",e.TS_BREAK_TYPE="break_keyword",e.TS_CONTINUE_TYPE="continue_keyword",e.TS_OUTPUT_TYPE="typescript_expression",e.TS_RETURN_STATEMENT_TYPE="function_return",e.PAUSE_UNTIL_TYPE="pxt_pause_until",e.COLLAPSED_BLOCK="pxt_collapsed_block",e.FUNCTION_DEFINITION_TYPE="function_definition",e.BINARY_JS="binary.js",e.BINARY_ASM="binary.asm",e.BINARY_HEX="binary.hex",e.BINARY_UF2="binary.uf2",e.BINARY_ELF="binary.elf",e.BINARY_PXT64="binary.pxt64",e.BINARY_ESP="binary.bin",e.BINARY_SRCMAP="binary.srcmap",e.NATIVE_TYPE_THUMB="thumb",e.NATIVE_TYPE_VM="vm",e.BuildSourceMapHelpers=function(e,t,n){const o=e=>{const t=e.split("\n").map((e=>e.length)),n=t.reduce((({lens:e,sum:t},n)=>({lens:[...e,t+n+1],sum:t+n+1})),{lens:[],sum:0}).lens;return{posToLineCol:e=>{const o=n.reduce(((t,n,o)=>e<n?t:o+1),0);return[o,t[o]-(n[o]-e)+1]},lineColToPos:(e,t)=>(n[e-1]||0)+t}},r={ts:o(t),py:o(n)},i=e=>e.endPos-e.startPos,s=(t,n)=>{const{startPos:o,endPos:r}=t;return e.filter((e=>e[n].startPos<=o&&r<=e[n].endPos))},a=(e,t)=>{const n=s(e,t);return n.reduce(((e,n)=>i(n[t])<i(e[t])?n:e),n[0])},l={ts:{allOverlaps:e=>s(e,"ts"),smallestOverlap:e=>a(e,"ts")},py:{allOverlaps:e=>s(e,"py"),smallestOverlap:e=>a(e,"py")}},c=(e,t)=>n=>{const[o,s]=(t=>[r[e].lineColToPos(t.line,t.column),t.length])(n),l=a({startPos:o,endPos:o+s},e);if(!l)return;const[c,u]=r[t].posToLineCol(l[t].startPos);return{fileName:`main.${t}`,start:l[t].startPos,length:i(l[t]),line:c,column:u}},u=c("ts","py"),p=c("py","ts");return{ts:Object.assign(Object.assign(Object.assign({},r.ts),l.ts),{locToLoc:u,getText:e=>t.substring(e.startPos,e.endPos)}),py:Object.assign(Object.assign(Object.assign({},r.py),l.py),{locToLoc:p,getText:e=>n.substring(e.startPos,e.endPos)})}},e.computeUsedParts=function(e,t){if(!e.usedSymbols||!pxt.appTarget.simulator||!pxt.appTarget.simulator.parts)return[];let n=[];if(Object.keys(e.usedSymbols).forEach((t=>{let o=e.usedSymbols[t];if(o&&o.attributes.parts){let e=o.attributes.parts;if(e){e.split(/[ ,]+/).forEach((e=>{0<e.length&&n.indexOf(e)<0&&n.push(e)}))}}})),t){const e=pxt.appTarget.simulator.boardDefinition.onboardComponents;e&&("ignorebuiltin"===t?n=n.filter((t=>-1===e.indexOf(t))):"onlybuiltin"===t&&(n=n.filter((t=>e.indexOf(t)>=0))))}return n.sort(),n=n.reverse(),n},e.buildSimJsInfo=function(t){return{js:t.outfiles[e.BINARY_JS],targetVersion:pxt.appTarget.versions.target,fnArgs:t.usedArguments,parts:e.computeUsedParts(t,"ignorebuiltin"),usedBuiltinParts:e.computeUsedParts(t,"onlybuiltin")}},e.blocksCategory=function(t){const n=t?t.attributes.blockNamespace||t.namespace:void 0;return n?e.Util.capitalize(n.split(".")[0]):void 0},e.getBlocksInfo=function(t,n){var o,s;let a=[];const l={},c={},u={},p={},d={};function g(t,n){const o="get"==t,r="set"==t,s="number"==n.retType,p=o?c:r?l:u,d=`${n.namespace}.${n.retType}`;let g=e.U.lookup(p,d);if(!g){const l=`@${t}@`;let c,u;if(n.attributes.blockCombineShadow){const t=n.attributes.blockCombineShadow,o=t.match(/^([^,.]*),?([^,.]*)$/);o&&3==o.length&&(c=o[1].trim(),u=o[2].trim(),0!=u.length||e.Util.endsWith(t,",")||(u=c,c=""))}const h=`${n.attributes.blockSetVariable||n.namespace.toLocaleLowerCase()}=${c||""}`,f=`value=${u||""}`;g=p[d]={attributes:{blockId:`${s?n.namespace:d}_blockCombine_${t}`,callingConvention:0,group:n.attributes.group,paramDefl:{},jsDoc:o?e.U.lf("Read value of a property on an object"):e.U.lf("Update value of property on an object")},name:l,namespace:n.namespace,fileName:n.fileName,qName:`${d}.${l}`,pkg:n.pkg,kind:2,parameters:[{name:"property",description:o?e.U.lf("the name of the property to read"):e.U.lf("the name of the property to change"),isEnum:!0,type:"@combined@"},{name:"value",description:r?e.U.lf("the new value of the property"):e.U.lf("the amount by which to change the property"),type:n.retType}].slice(0,o?1:2),retType:o?n.retType:"void",combinedProperties:[]},g.attributes.block=o?e.U.lf("%{0} %property",h):r?e.U.lf("set %{0} %property to %{1}",h,f):e.U.lf("change %{0} %property by %{1}",h,f),i(g.attributes),pxt.Util.isTranslationMode()&&(g.attributes.translationId=g.attributes.block,g.attributes.block=o?`%${h} %property`:r?`set %${h} %property to %${f}`:`change %${h} %property by %${f}`,i(g.attributes),pxt.crowdin.inContextLoadAsync(g.attributes.translationId).then((e=>{g.attributes.block=e,i(g.attributes)}))),a.push(g)}g.combinedProperties.push(n.qName)}for(let n of e.Util.values(t.byQName)){if("ENUM_GET"===n.attributes.shim&&n.attributes.enumName&&n.attributes.blockId){let e=!1;if(p[n.attributes.enumName]&&(console.warn(`Enum block ${n.attributes.blockId} trying to overwrite enum ${n.attributes.enumName}`),e=!0),n.attributes.enumMemberName||(console.warn(`Enum block ${n.attributes.blockId} should specify enumMemberName`),e=!0),n.attributes.enumPromptHint||(console.warn(`Enum block ${n.attributes.blockId} should specify enumPromptHint`),e=!0),n.attributes.enumInitialMembers&&n.attributes.enumInitialMembers.length||(console.warn(`Enum block ${n.attributes.blockId} should specify enumInitialMembers`),e=!0),e)continue;const t=parseInt(n.attributes.enumStartValue);p[n.attributes.enumName]={blockId:n.attributes.blockId,name:n.attributes.enumName,memberName:n.attributes.enumMemberName,firstValue:isNaN(t)?void 0:t,isBitMask:n.attributes.enumIsBitMask,isHash:n.attributes.enumIsHash,initialMembers:n.attributes.enumInitialMembers,promptHint:n.attributes.enumPromptHint}}if("KIND_GET"===n.attributes.shim&&n.attributes.blockId){const o=n.attributes.kindNamespace||n.attributes.blockNamespace||n.namespace;if(d[o]){console.warn(`More than one block defined for kind ${o}`);continue}const r=[];if(t.byQName[o])for(const n of e.Util.values(t.byQName))n.namespace===o&&n.attributes.isKind&&r.push(n.name);d[o]={blockId:n.attributes.blockId,name:o,memberName:n.attributes.kindMemberName||o,initialMembers:r,promptHint:n.attributes.enumPromptHint||e.Util.lf("Create a new kind..."),createFunctionName:n.attributes.kindCreateFunction||"create"}}if(n.attributes.blockCombine)/@set/.test(n.name)||g("get",n),n.isReadOnly||("number"==n.retType&&g("change",n),g("set",n));else if(n.attributes.block&&!n.attributes.fixedInstance&&7!=n.kind&&5!=n.kind&&9!=n.kind&&8!=n.kind){if(n.attributes.blockId||(n.attributes.blockId=n.qName.replace(/\./g,"_")),"true"==n.attributes.block){let t=e.U.uncapitalize(n.name);1!=n.kind&&2!=n.kind||(t+=" %"+n.namespace.toLowerCase());const a=null!==(s=null===(o=n.parameters)||void 0===o?void 0:o.filter((e=>!r(e))))&&void 0!==s?s:[];for(let e of a)t+=" %"+e.name;n.attributes.block=t,i(n.attributes)}a.push(n)}}for(let n of a){let o=e.U.lookup(t.byQName,n.namespace);if(!o)continue;let r=o.attributes,i=n.attributes;for(let e of["blockNamespace","color","blockGap"])void 0===i[e]&&r[e]&&(i[e]=r[e])}var h;return n&&((h=n).length&&(a=a.filter((e=>{let t=(e.attributes.blockNamespace||e.namespace).split(".")[0];return-1===h.indexOf(t)})))),{apis:t,blocks:a,blocksById:pxt.Util.toDictionary(a,(e=>e.attributes.blockId)),enumsByName:p,kindsByName:d}},e.tsSnippetToPySnippet=function(t,n){const o={true:"True",false:"False",null:"None"}[t];if(o)return o;if(n&&6==n.kind||!n&&t.includes(".")){const n=t.lastIndexOf("."),o=t.substr(0,n);let r=t.substr(n+1);return r=e.U.snakify(r).toUpperCase(),`${o}.${r}`}return t},e.apiLocalizationStrings={},e.localizeApisAsync=async function(n,o){const r=e.Util.userLanguage();if("en"==r)return Promise.resolve(t(n));const s=r.toLowerCase(),a=s+"|jsdoc",l=s+"|block",c=await o.localizationStringsAsync(r);e.apiLocalizationStrings&&e.Util.jsonMergeFrom(c,e.apiLocalizationStrings);const u=e.Util.values(n.byQName).filter((e=>e.attributes._translatedLanguageCode!==r));return await e.Util.promiseMapAll(u,(async t=>{var o,u,p;const d=t.attributes.useLoc||t.attributes.blockAliasFor,g=d&&n.byQName[d];t.attributes._untranslatedJsDoc&&(t.attributes.jsDoc=t.attributes._untranslatedJsDoc),t.attributes._untranslatedBlock&&(t.attributes.jsDoc=t.attributes._untranslatedBlock);const h=(e,n)=>{var o,r;return c[t.qName+e]||(null===(o=t.attributes.locs)||void 0===o?void 0:o[n])||g&&(c[g.qName+e]||(null===(r=g.attributes.locs)||void 0===r?void 0:r[n]))},f=h("",a);f&&(t.attributes._untranslatedJsDoc||(t.attributes._untranslatedJsDoc=t.attributes.jsDoc),t.attributes.jsDoc=f),null===(o=t.parameters)||void 0===o||o.forEach((e=>{const t=`|param|${e.name}`,n=h(t,s+t);n&&(e.description=n)}));const _=c["{id:category}"+e.Util.capitalize(t.qName)];let m=c[`${t.qName}|block`]||(null===(u=t.attributes.locs)||void 0===u?void 0:u[l]);if(!m&&g){const e=c[`${g.qName}|block`]||(null===(p=g.attributes.locs)||void 0===p?void 0:p[l]);t.attributes.block===(g.attributes._untranslatedBlock||g.attributes.block)&&e&&(m=e)}if(m&&pxt.Util.isTranslationMode()&&(t.attributes.translationId=m,m=await pxt.crowdin.inContextLoadAsync(m)),_)t.attributes.block?t.attributes.block=m||t.attributes.block:t.attributes.block=_,i(t.attributes);else if(t.attributes.block&&m){const e=pxt.blocks.compileInfo(t),n=t.attributes.block;if(t.attributes.block=pxt.blocks.normalizeBlock(m,(e=>{pxt.tickEvent("loc.normalized",{block:t.attributes.block,lang:r,error:e})})),t.attributes._untranslatedBlock||(t.attributes._untranslatedBlock=n),n!=t.attributes.block){i(t.attributes);(function(e,t){if(e.parameters.length!=t.parameters.length)return pxt.debug("Localized block has extra or missing parameters"),!1;for(const n of e.parameters){const e=t.actualNameToParam[n.actualName];if(!e||n.type!=e.type||n.shadowBlockId!=e.shadowBlockId)return pxt.debug(`Parameter ${n.actualName} type or shadow block does not match after localization`),!1}return!0})(e,pxt.blocks.compileInfo(t))||(pxt.log(`block has non matching arguments: ${n} vs ${t.attributes.block}`),pxt.reportError("loc.errors","invalid translations",{block:t.attributes.blockId,lang:r}),t.attributes.block=n,i(t.attributes))}}else i(t.attributes);t.attributes._translatedLanguageCode=r})),t(n)},e.emptyExtInfo=function(){let e=pxt.appTarget.compileService;e||(e={});const t=!!e.platformioIni,n="dockermake"==e.buildEngine||"dockercross"==e.buildEngine||"dockerespidf"==e.buildEngine,o={functions:[],generatedFiles:{},extensionFiles:{},sha:"",compileData:"",shimsDTS:"",enumsDTS:"",onlyPublic:!0};return t?o.platformio={dependencies:{}}:n?o.npmDependencies={}:o.yotta={config:{},dependencies:{}},o};const n=["weight","imageLiteral","topblockWeight"],o=["advanced","handlerStatement","afterOnStart","optionalVariableArgs","blockHidden","constantShim","blockCombine","enumIsBitMask","enumIsHash","decompileIndirectFixedInstances","topblock","callInDebugger","duplicateShadowOnDrag","argsNullable"];function r(e){return"Action"===e.type||/^\([^\)]*\)\s*=>/.test(e.type)}function i(e){if(e.block){const n=e.block.split("||");e._def=t(s(n[0])),e._def||pxt.debug("Unable to parse block def for id: "+e.blockId),n[1]&&(e._expandedDef=t(s(n[1]))),n[1]&&!e._expandedDef&&pxt.debug("Unable to parse expanded block def for id: "+e.blockId)}function t(t){return e._shadowOverrides&&t.parameters.forEach((t=>{const n=e._shadowOverrides[t.name];"unset"===n?delete t.shadowBlockId:null!=n&&(t.shadowBlockId=n)})),t}}function s(e){const t=[];let n,o=0;for(;o<e.length;o++){const r=e[o],i=o;let s;switch(r){case"*":case"_":const t=p((e=>e==r)),n="_"===r?2:0;1===t.length?s={kind:1<<n,content:t}:2===t.length?s={kind:2<<n,content:t}:3===t.length?s={kind:3<<n,content:t}:o=i;break;case"`":const a=d("`");if(void 0===a){o=i;break}s={kind:256,content:a};break;case"|":s={kind:32};break;case"\\":o<e.length-1&&(s={kind:16,content:e[1+o++]});break;case"[":const l=d("]");if(void 0!==l&&"("===e[1+o++]){const e=d(")");if(void 0!==e){s={kind:512,content:l,type:e};break}}o=i;break;case"$":case"%":const c=p((e=>/[a-zA-Z0-9_=]/.test(e)),!0).split("=");if(c.length>2){o=i;break}let u;if("("===e[o+1]){const e=o;++o,u=d(")"),u||(o=e)}s={kind:"$"===r?1024:64,content:c[0],type:c[1],name:u}}s?(n&&t.push({kind:128,content:n}),n=void 0,t.push(s)):n?n+=r:n=r}n&&t.push({kind:128,content:n});const r=[],i=[];let s=[],l=0,c="",u=[];for(let e=0;e<t.length;e++){const n=t[e].kind,o=s[s.length-1];if(15&n)if(f(t[e].content),n&l)if(o&n){s.pop(),l^=n;const e=o&l|n&l;e&&s.push(e)}else g();else l|=n,s.push(n);else 144&n?c+=t[e].content:1120&n&&h();if(64==n){const n={kind:"param",name:t[e].content,shadowBlockId:t[e].type,ref:!1};t[e].name&&(n.varName=t[e].name),r.push(n),i.push(n)}else if(1024==n){const n={kind:"param",name:t[e].content,shadowBlockId:t[e].type,ref:!0};t[e].name&&(n.varName=t[e].name),r.push(n),i.push(n)}else 256==n?(f(),u.push({kind:"image",uri:t[e].content})):512==n?(f(),u.push({kind:"label",text:t[e].content,cssClass:t[e].type})):32==n&&r.push({kind:"break"})}return h(),{parts:r,parameters:i};function p(t,n=!1){let r="";for(n&&o++;o<e.length&&t(e[o]);)r+=e[o],++o;return r&&o--,r}function d(t){const n=p((e=>e!==t),!0);if(e[o+1]===t)return++o,n}function g(){let e="",t=[];for(const n of u)a(n)?(t.push({content:e,styles:0}),t.push(n),e=""):(e+=n.content,n.endingToken&&(e+=n.endingToken));u=t,e&&u.push({content:e,styles:0}),s=[],l=0}function h(){for(f(),l&&g();u.length;){const e=u.shift();if(a(e))r.push(e);else{if(!e.content)continue;const t=[];10&e.styles&&t.push("bold"),5&e.styles&&t.push("italics"),r.push({kind:"label",text:e.content,style:t})}}}function f(e){u.push({content:c,styles:l,endingToken:e}),c=""}}function a(e){return!!e.kind}let l;e.parseCommentString=function(t){let r={paramDefl:{},callingConvention:0,_source:t},s=!0;for(;s;)s=!1,t=t.replace(/\/\/%[ \t]*([\w\.-]+)(=(("[^"\n]*")|'([^'\n]*)'|([^\s]*)))?/,((t,n,o,i,a,l,c)=>{let u=a?JSON.parse(a):o?a||l||c:"true";if(u||(u=""),e.U.startsWith(n,"block.loc."))r.locs||(r.locs={}),r.locs[n.slice("block.loc.".length).toLowerCase()+"|block"]=u;else if(e.U.startsWith(n,"jsdoc.loc."))r.locs||(r.locs={}),r.locs[n.slice("jsdoc.loc.".length).toLowerCase()+"|jsdoc"]=u;else if(e.U.contains(n,".loc.")){r.locs||(r.locs={});const e=n.slice(0,n.indexOf(".loc.")),t=n.slice(n.indexOf(".loc.")+".loc.".length);r.locs[t+"|param|"+e]=u}else if(e.U.endsWith(n,".defl"))u.indexOf(" ")>-1?r.paramDefl[n.slice(0,n.length-5)]=`"${u}"`:r.paramDefl[n.slice(0,n.length-5)]=u,r.explicitDefaults||(r.explicitDefaults=[]),r.explicitDefaults.push(n.slice(0,n.length-5));else if(e.U.endsWith(n,".shadow"))r._shadowOverrides||(r._shadowOverrides={}),r._shadowOverrides[n.slice(0,n.length-7)]=u;else if(e.U.endsWith(n,".fieldEditor"))r.paramFieldEditor||(r.paramFieldEditor={}),r.paramFieldEditor[n.slice(0,n.length-12)]=u;else if(e.U.contains(n,".fieldOptions.")){r.paramFieldEditorOptions||(r.paramFieldEditorOptions={});const e=n.slice(0,n.indexOf(".fieldOptions.")),t=n.slice(n.indexOf(".fieldOptions.")+14,n.length);r.paramFieldEditorOptions[e]||(r.paramFieldEditorOptions[e]={}),r.paramFieldEditorOptions[e][t]=u}else if(e.U.contains(n,".shadowOptions.")){r.paramShadowOptions||(r.paramShadowOptions={});const e=n.slice(0,n.indexOf(".shadowOptions.")),t=n.slice(n.indexOf(".shadowOptions.")+15,n.length);r.paramShadowOptions[e]||(r.paramShadowOptions[e]={}),r.paramShadowOptions[e][t]=u}else e.U.endsWith(n,".min")?(r.paramMin||(r.paramMin={}),r.paramMin[n.slice(0,n.length-4)]=u):e.U.endsWith(n,".max")?(r.paramMax||(r.paramMax={}),r.paramMax[n.slice(0,n.length-4)]=u):r[n]=u;return s=!0,"//% "}));for(let e of n)"string"==typeof r[e]&&(r[e]=parseInt(r[e]));for(let e of o)"string"==typeof r[e]&&(r[e]="true"==r[e]||"1"==r[e]);if(r.trackArgs&&(r.trackArgs=r.trackArgs.split(/[ ,]+/).map((e=>parseInt(e)||0))),r.enumInitialMembers&&(r.enumInitialMembers=r.enumInitialMembers.split(/[ ,]+/)),r.blockExternalInputs&&!r.inlineInputMode&&(r.inlineInputMode="external"),r.paramHelp={},r.jsDoc="",t=t.replace(/\/\*\*([^]*?)\*\//g,((e,t)=>(t=(t=t.replace(/\n\s*(\*\s*)?/g,"\n")).replace(/^\s*@param\s+(\w+)\s+(.*)$/gm,((e,t,n)=>{if(r.paramHelp[t]=n,!r.paramDefl[t]){let e=/\beg\.?:\s*(.+)/.exec(n);if(e&&e[1]){let n=/(?:"([^"]*)")|(?:'([^']*)')|(?:([^\s,]+))/g.exec(e[1]);if(n){let e=n[1]||n[2]||n[3];e||(e=""),e.indexOf(" ")>-1?r.paramDefl[t]=`"${e}"`:r.paramDefl[t]=e}}}return""})),r.jsDoc+=t,""))),r.jsDoc=r.jsDoc.trim(),r.async&&(r.callingConvention=1),r.promise&&(r.callingConvention=2),r.jres&&(r.whenUsed=!0),r.subcategories)try{r.subcategories=JSON.parse(r.subcategories)}catch(e){r.subcategories=void 0}if(r.groups)try{r.groups=JSON.parse(r.groups)}catch(e){r.groups=void 0}if(r.groupIcons)try{r.groupIcons=JSON.parse(r.groupIcons)}catch(e){r.groupIcons=void 0}if(r.groupHelp)try{r.groupHelp=JSON.parse(r.groupHelp)}catch(e){r.groupHelp=void 0}return i(r),r},e.parameterTypeIsArrowFunction=r,e.updateBlockDef=i,e.parseBlockDefinition=s,e.parseChecksumBlock=function(e,t=0){let n=pxt.HF2.read32(e,t);if(133083260!=(2147483647&n))return pxt.log("no checksum block magic"),null;let o=pxt.HF2.read32(e,t+4),r=pxt.HF2.read32(e,t+8);if(3&o)return pxt.log("invalid end marker position"),null;let i=1<<(255&r);if(i!=pxt.appTarget.compile.flashCodeAlign)return pxt.log("invalid page size: "+i),null;let s={magic:n,endMarkerPos:o,endMarker:r,regions:[]};for(let n=t+12;n<e.length-7;n+=8){let t={start:i*pxt.HF2.read16(e,n),length:i*pxt.HF2.read16(e,n+2),checksum:pxt.HF2.read32(e,n+4)};if(!t.length||!t.checksum)break;s.regions.push(t)}return s},function(t){function n(n){let o=e=>n[e]+(n[e+1]<<8)+(n[e+2]<<16)+(n[e+3]<<24)>>>0;if(!n||512!=n.length||o(0)!=t.UF2_MAGIC_START0||o(4)!=t.UF2_MAGIC_START1||o(n.length-4)!=t.UF2_MAGIC_END)return null;let r=o(8),i=o(16);i>476&&(i=256);let s=null,a=0,l=0;if(r&t.UF2_FLAG_FILE){let t=n.slice(32+i),r=t.indexOf(0);r>=0&&(t=t.slice(0,r)),s=e.U.fromUTF8Array(t),l=o(28)}return r&t.UF2_FLAG_FAMILY_ID_PRESENT&&(a=o(28)),{flags:r,targetAddr:o(12),payloadSize:i,blockNo:o(20),numBlocks:o(24),fileSize:l,familyId:a,data:n.slice(32,32+i),filename:s}}function o(e,t){return!!e&&(e.targetAddr<=t&&t<e.targetAddr+e.payloadSize)}function r(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255}function i(e){return"string"==typeof e&&(e=parseInt(e)),{currBlock:null,currPtr:-1,blocks:[],ptrs:[],filesize:0,familyId:e||0}}function s(e){for(let t=0;t<e.blocks.length;++t)r(e.blocks[t],20,t),r(e.blocks[t],24,e.blocks.length),e.filename&&r(e.blocks[t],28,e.filesize)}function a(n,o,i,s=0){let l=n.currBlock,c=o>>8,u=256-(255&o);if(i.length>u){let e=new Uint8Array(i);for(a(n,o,e.slice(0,u));u<i.length;){let t=Math.min(u+256,i.length);a(n,o+u,e.slice(u,t)),u=t}return}if(c!=n.currPtr){l=null;for(let e=0;e<n.ptrs.length;++e)if(n.ptrs[e]==c){l=n.blocks[e];break}if(!l){l=new Uint8Array(512),n.filename?s|=t.UF2_FLAG_FILE:n.familyId&&(s|=t.UF2_FLAG_FAMILY_ID_PRESENT),r(l,0,t.UF2_MAGIC_START0),r(l,4,t.UF2_MAGIC_START1),r(l,8,s),r(l,12,c<<8),r(l,16,256),r(l,20,n.blocks.length),r(l,28,n.familyId),r(l,508,t.UF2_MAGIC_END);for(let e=32;e<288;++e)l[e]=255;n.filename&&e.U.memcpy(l,288,e.U.toUTF8Array(n.filename)),n.blocks.push(l),n.ptrs.push(c)}n.currPtr=c,n.currBlock=l}let p=32+(255&o);for(let e=0;e<i.length;++e)l[p+e]=i[e];n.filesize=Math.max(n.filesize,i.length+o)}t.UF2_MAGIC_START0=171066965,t.UF2_MAGIC_START1=2656915799,t.UF2_MAGIC_END=179400496,t.UF2_FLAG_NONE=0,t.UF2_FLAG_NOFLASH=1,t.UF2_FLAG_FILE=4096,t.UF2_FLAG_FAMILY_ID_PRESENT=8192,t.parseBlock=n,t.parseFile=function(e){let t=[];for(let o=0;o<e.length;o+=512){let r=n(e.slice(o,o+512));r&&t.push(r)}return t},t.toBin=function(e,t){if(e.length<512)return null;let o=-1,r=-1,i=[];for(let s=0;s<e.length;++s){let a=512*s,l=n(e.slice(a,a+512));if(!l)continue;if(t&&l.targetAddr+256>t)break;-1==o&&(o=l.targetAddr,r=o);let c=l.targetAddr-o;c<0||c%4||c>1048576||(c>0&&i.push(new Uint8Array(c)),i.push(e.slice(a+32,a+32+l.payloadSize)),o=l.targetAddr+l.payloadSize)}let s=0;for(let e of i)s+=e.length;if(0==s)return null;let a=new Uint8Array(s),l=0;for(let e of i)for(let t=0;t<e.length;++t)a[l++]=e[t];return{buf:a,start:r}},t.readBytes=function(e,t,n){let r,i=new Uint8Array(n);for(let s=0;s<n;++s,++t)o(r,t)||(r=e.filter((e=>o(e,t)))[0]),r&&(i[s]=r.data[t-r.targetAddr]);return i},t.newBlockFile=i,t.finalizeFile=s,t.concatFiles=function(t){for(let e of t)s(e),e.filename=null;let n=i();n.blocks=e.U.concat(t.map((e=>e.blocks)));for(let e of t)e.blocks=[];return n},t.serializeFile=function(t){s(t);let n="";for(let o of t.blocks)n+=e.Util.uint8ArrayToString(o);return n},t.readBytesFromFile=function t(n,o,r){let i,s=o>>8;if(s==n.currPtr)i=n.currBlock;else{for(let e=0;e<n.ptrs.length;++e)if(n.ptrs[e]==s){i=n.blocks[e];break}i&&(n.currPtr=s,n.currBlock=i)}if(!i)return null;let a=new Uint8Array(r),l=Math.min(r,256-(255&o));e.U.memcpy(a,0,i,32+(255&o),l);let c=r-l;if(c>0){let r=t(n,o+l,c);e.U.memcpy(a,l,r)}return a},t.writeBytes=a,t.writeHex=function(e,t){let n="0000";for(let o=0;o<t.length;++o){let r=/:02000004(....)/.exec(t[o]);if(r&&(n=r[1]),r=/^:..(....)00(.*)[0-9A-F][0-9A-F]$/.exec(t[o]),r){let t=parseInt(n+r[1],16),o=r[2],i=[];for(let e=0;e<o.length;e+=2)i.push(parseInt(o[e]+o[e+1],16));a(e,t,i)}}}}(l=e.UF2||(e.UF2={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){let n,o;!function(e){e[e.IDE=0]="IDE",e[e.Sandbox=1]="Sandbox",e[e.Widget=2]="Widget",e[e.Controller=3]="Controller"}(n=t.EditorLayoutType||(t.EditorLayoutType={}));let r=!1,i=!1;function s(){if(void 0===o){if(e.BrowserUtils.hasWindow()){const t=/sandbox=1|#sandbox|#sandboxproject/i.test(window.location.href)||e.BrowserUtils.isIFrame(),s=/nosandbox=1/i.test(window.location.href),a=/controller=1/i.test(window.location.href)&&e.BrowserUtils.isIFrame(),l=/readonly=1/i.test(window.location.href),c=/editorlayout=(widget|sandbox|ide)/i.exec(window.location.href),u=/noproject=1/i.test(window.location.href);if(o=n.IDE,s?o=n.Widget:a?o=n.Controller:t&&(o=n.Sandbox),a&&l&&(r=!0),a&&u&&(i=!0),c)switch(c[1].toLowerCase()){case"widget":o=n.Widget;break;case"sandbox":o=n.Sandbox;break;case"ide":o=n.IDE}}else o=n.Sandbox;e.debug(`shell: layout type ${n[o]}, readonly ${l()}`)}}function a(){return s(),o==n.Sandbox}function l(){return!e.BrowserUtils.hasWindow()||a()&&!/[?&]edit=1/i.test(window.location.href)||c()&&r}function c(){return s(),o==n.Controller}t.layoutTypeClass=function(){return s(),e.shell.EditorLayoutType[o].toLowerCase()},t.isSandboxMode=a,t.isReadOnly=l,t.isNoProject=function(){return i},t.isControllerMode=c,t.isPyLangPref=function(){return"py"==e.storage.getLocal("editorlangpref")},t.getEditorLanguagePref=function(){return e.storage.getLocal("editorlangpref")},t.setEditorLanguagePref=function(t){t.match(/prj$/)&&(t=t.replace(/prj$/,"")),e.storage.setLocal("editorlangpref",t)},t.getToolboxAnimation=function(){return e.storage.getLocal("toolboxanimation")},t.setToolboxAnimation=function(){e.storage.setLocal("toolboxanimation","1")}}(e.shell||(e.shell={}))}(pxt||(pxt={})),function(e){!function(t){t.USER_VERSION="0.0.1";class n{constructor(){this.db=new e.BrowserUtils.IDBWrapper(n.databaseName,n.version,((e,t)=>{const o=t.result;e.oldVersion<1&&(o.createObjectStore(n.projectTable,{keyPath:n.projectKey}),o.createObjectStore(n.userTable,{keyPath:n.userKey}))}))}initAsync(){return this.db.openAsync()}getAllProjectsAsync(){return this.db.getAllAsync(n.projectTable).then((e=>e.map((e=>e.project)).filter((e=>!e.deleted))))}deleteProjectAsync(e){return this.getProjectAsync(e).then((e=>{e.deleted=!0,this.saveProjectAsync(e)}))}getProjectAsync(e){return this.db.getAsync(n.projectTable,e).then((e=>{var t;return null===(t=e)||void 0===t?void 0:t.project}))}saveProjectAsync(e){return this.db.setAsync(n.projectTable,{id:e.header.id,project:e})}getUserStateAsync(){return this.db.getAsync(n.userTable,"local-user").then((e=>{var t;return null===(t=e)||void 0===t?void 0:t.user}))}saveUserStateAsync(e){return this.db.setAsync(n.userTable,{id:"local-user",user:e})}}n.version=6,n.databaseName="local-skill-map",n.projectTable="projects",n.projectKey="id",n.userTable="users",n.userKey="id",t.IndexedDBWorkspace=n}(e.skillmap||(e.skillmap={}))}(pxt||(pxt={})),function(e){!function(t){t.createStreamAsync=function(t,n){return e.Cloud.privatePostAsync("streams",{target:t,name:n||"data"}).then((e=>e))},t.postPayloadAsync=function(t,n){return e.Util.assert(!!t.privatekey),e.Cloud.privatePostAsync(`${t.id}/data?privatekey=${t.privatekey}`,n)}}(e.streams||(e.streams={}))}(pxt||(pxt={})),function(e){!function(t){let n,o;!function(e){e[e.userSpaceOnUse=0]="userSpaceOnUse",e[e.objectBoundingBox=1]="objectBoundingBox"}(n=t.PatternUnits||(t.PatternUnits={})),function(e){e[e.em=0]="em",e[e.ex=1]="ex",e[e.px=2]="px",e[e.in=3]="in",e[e.cm=4]="cm",e[e.mm=5]="mm",e[e.pt=6]="pt",e[e.pc=7]="pc",e[e.percent=8]="percent"}(o=t.LengthUnit||(t.LengthUnit={}));class r{constructor(e){this.el=E(e)}attr(e){return Object.keys(e).forEach((t=>{this.setAttribute(t,e[t])})),this}setAttribute(e,t){return this.el.setAttribute(e,t.toString()),this}setAttributeNS(e,t,n){return this.el.setAttributeNS(e,t,n.toString()),this}id(e){return this.setAttribute("id",e)}setClass(...e){return this.setAttribute("class",e.join(" "))}appendClass(t){return e.BrowserUtils.addClass(this.el,t),this}removeClass(t){e.BrowserUtils.removeClass(this.el,t)}title(e){this.titleElement||(this.titleElement=E("title"),this.el.firstChild?this.el.insertBefore(this.titleElement,this.el.firstChild):this.el.appendChild(this.titleElement)),this.titleElement.textContent=e}setVisible(e){return this.setAttribute("visibility",e?"visible":"hidden")}}t.BaseElement=r;class i extends r{draw(e){const t=function(e){switch(e){case"text":return new p;case"circle":return new g;case"rect":return new d;case"line":return new h;case"polygon":return new m;case"polyline":return new _;case"path":return new y;default:return new u(e)}}(e);return this.el.appendChild(t.el),t}element(e,t){return t(this.draw(e)),this}group(){const e=new s;return this.el.appendChild(e.el),e}appendChild(e){this.el.appendChild(e.el)}onDown(e){return t.events.down(this.el,e),this}onUp(e){return t.events.up(this.el,e),this}onMove(e){return t.events.move(this.el,e),this}onEnter(e){return t.events.enter(this.el,e),this}onLeave(e){return t.events.leave(this.el,e),this}onClick(e){return t.events.click(this.el,e),this}}t.DrawContext=i;t.SVG=class extends i{constructor(e){super("svg"),e&&e.appendChild(this.el)}define(e){return this.defs||(this.defs=new l(this.el)),e(this.defs),this}};class s extends i{constructor(e){super("g"),e&&e.appendChild(this.el)}translate(e,t){return this.left=e,this.top=t,this.updateTransform()}scale(e){return this.scaleFactor=e,this.updateTransform()}def(){return new l(this.el)}style(){return new c(this.el)}updateTransform(){let e="";return null!=this.left&&(e+=`translate(${this.left} ${this.top})`),null!=this.scaleFactor&&(e+=` scale(${this.scaleFactor})`),this.setAttribute("transform",e),this}}t.Group=s;class a extends i{constructor(){super("pattern")}units(e){return this.setAttribute("patternUnits",e===n.objectBoundingBox?"objectBoundingBox":"userSpaceOnUse")}contentUnits(e){return this.setAttribute("patternContentUnits",e===n.objectBoundingBox?"objectBoundingBox":"userSpaceOnUse")}size(e,t){return this.setAttribute("width",e),this.setAttribute("height",t),this}}t.Pattern=a;class l extends r{constructor(e){super("defs"),e.appendChild(this.el)}create(e,t){let n;switch(e){case"path":n=new y;break;case"pattern":n=new a;break;case"radialGradient":n=new v;break;case"linearGradient":n=new b;break;case"clipPath":n=new T;break;default:n=new r(e)}return n.id(t),this.el.appendChild(n.el),n}}t.DefsElement=l;class c extends r{constructor(e){super("style"),e.appendChild(this.el)}content(e){this.el.textContent=e}}t.StyleElement=c;class u extends i{at(e,t){return this.setAttribute("x",e),this.setAttribute("y",t),this}moveTo(e,t){return this.at(e,t)}fill(e,t){return this.setAttribute("fill",e),null!=t&&this.opacity(t),this}opacity(e){return this.setAttribute("fill-opacity",e)}stroke(e,t){return this.setAttribute("stroke",e),null!=t&&this.strokeWidth(t),this}strokeWidth(e){return this.setAttribute("stroke-width",e)}strokeOpacity(e){return this.setAttribute("stroke-opacity",e)}clipPath(e){return this.setAttribute("clip-path",e)}}t.Drawable=u;class p extends u{constructor(e){super("text"),null!=e&&this.text(e)}text(e){return this.el.textContent=e,this}fontFamily(e){return this.setAttribute("font-family",e)}fontSize(e,t){return this.setAttribute("font-size",C(e,t))}offset(e,t,n){return 0!==e&&this.setAttribute("dx",C(e,n)),0!==t&&this.setAttribute("dy",C(t,n)),this}anchor(e){return this.setAttribute("text-anchor",e)}}t.Text=p;class d extends u{constructor(){super("rect")}width(e,t=o.px){return this.setAttribute("width",C(e,t))}height(e,t=o.px){return this.setAttribute("height",C(e,t))}corner(e){return this.corners(e,e)}corners(e,t){return this.setAttribute("rx",e),this.setAttribute("ry",t),this}size(e,t,n=o.px){return this.width(e,n),this.height(t,n),this}}t.Rect=d;class g extends u{constructor(){super("circle")}at(e,t){return this.setAttribute("cx",e),this.setAttribute("cy",t),this}radius(e){return this.setAttribute("r",e)}}t.Circle=g;class h extends u{constructor(){super("line")}at(e,t,n,o){return this.from(e,t),null!=n&&null!=o&&this.to(n,o),this}from(e,t){return this.setAttribute("x1",e),this.setAttribute("y1",t),this}to(e,t){return this.setAttribute("x2",e),this.setAttribute("y2",t),this}}t.Line=h;class f extends u{points(e){return this.setAttribute("points",e)}with(e){return this.points(e.map((({x:e,y:t})=>e+" "+t)).join(","))}}t.PolyElement=f;class _ extends f{constructor(){super("polyline")}}t.Polyline=_;class m extends f{constructor(){super("polygon")}}t.Polygon=m;class y extends u{constructor(){super("path"),this.d=new S}update(){return this.setAttribute("d",this.d.toAttribute())}path(e){return e(this.d),this.update()}}t.Path=y;t.Image=class extends u{constructor(){super("image")}src(e){return this.setAttributeNS("http://www.w3.org/1999/xlink","href",e)}width(e,t=o.px){return this.setAttribute("width",C(e,t))}height(e,t=o.px){return this.setAttribute("height",C(e,t))}size(e,t,n=o.px){return this.width(e,n),this.height(t,n),this}};class k extends r{units(e){return this.setAttribute("gradientUnits",e===n.objectBoundingBox?"objectBoundingBox":"userSpaceOnUse")}stop(e,t,n){const o=E("stop");return o.setAttribute("offset",e+"%"),null!=t&&o.setAttribute("stop-color",t),null!=n&&o.setAttribute("stop-opacity",n),this.el.appendChild(o),this}}t.Gradient=k;class b extends k{constructor(){super("linearGradient")}start(e,t){return this.setAttribute("x1",e),this.setAttribute("y1",t),this}end(e,t){return this.setAttribute("x2",e),this.setAttribute("y2",t),this}}t.LinearGradient=b;class v extends k{constructor(){super("radialGradient")}center(e,t){return this.setAttribute("cx",e),this.setAttribute("cy",t),this}focus(e,t,n){return this.setAttribute("fx",e),this.setAttribute("fy",t),this.setAttribute("fr",n),this}radius(e){return this.setAttribute("r",e)}}t.RadialGradient=v;class T extends i{constructor(){super("clipPath")}clipPathUnits(e){return e?this.setAttribute("clipPathUnits","objectBoundingBox"):this.setAttribute("clipPathUnits","userSpaceOnUse")}}function E(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}t.ClipPath=T;class S{constructor(){this.ops=[]}clear(){this.ops=[]}moveTo(e,t){return this.op("M",e,t)}moveBy(e,t){return this.op("m",e,t)}lineTo(e,t){return this.op("L",e,t)}lineBy(e,t){return this.op("l",e,t)}cCurveTo(e,t,n,o,r,i){return this.op("C",e,t,n,o,r,i)}cCurveBy(e,t,n,o,r,i){return this.op("c",e,t,n,o,r,i)}qCurveTo(e,t,n,o){return this.op("Q",e,t,n,o)}qCurveBy(e,t,n,o){return this.op("q",e,t,n,o)}sCurveTo(e,t,n,o){return this.op("S",e,t,n,o)}sCurveBy(e,t,n,o){return this.op("s",e,t,n,o)}tCurveTo(e,t){return this.op("T",e,t)}tCurveBy(e,t){return this.op("t",e,t)}arcTo(e,t,n,o,r,i,s){return this.op("A",e,t,n,o?1:0,r?1:0,i,s)}arcBy(e,t,n,o,r,i,s){return this.op("a",e,t,n,o?1:0,r?1:0,i,s)}close(){return this.op("z")}toAttribute(){return this.ops.map((e=>e.op+" "+e.args.join(" "))).join(" ")}op(e,...t){return this.ops.push({op:e,args:t}),this}}function C(e,t){switch(t){case o.em:return e+"em";case o.ex:return e+"ex";case o.px:return e+"px";case o.in:return e+"in";case o.cm:return e+"cm";case o.mm:return e+"mm";case o.pt:return e+"pt";case o.pc:return e+"pc";case o.percent:return e+"%";default:return e.toString()}}t.PathContext=S}(e.svgUtil||(e.svgUtil={}))}(pxt||(pxt={})),function(e){!function(e){!function(e){function t(){return"undefined"!=typeof window&&("ontouchstart"in window||navigator&&navigator.maxTouchPoints>0)}function n(){return"undefined"!=typeof window&&!!window.PointerEvent}e.isTouchEnabled=t,e.hasPointerEvents=n,e.down=function(e,o){n()?e.addEventListener("pointerdown",o):t()?(e.addEventListener("mousedown",o),e.addEventListener("touchstart",o)):e.addEventListener("mousedown",o)},e.up=function(e,o){n()?e.addEventListener("pointerup",o):(t(),e.addEventListener("mouseup",o))},e.enter=function(e,o){n()?e.addEventListener("pointerover",(e=>{o(!!(1&e.buttons))})):t()?e.addEventListener("touchstart",(e=>{o(!0)})):e.addEventListener("mouseover",(e=>{o(!!(1&e.buttons))}))},e.leave=function(e,o){n()?e.addEventListener("pointerleave",o):t()?e.addEventListener("touchend",o):e.addEventListener("mouseleave",o)},e.move=function(e,o){n()?e.addEventListener("pointermove",o):t()?e.addEventListener("touchmove",o):e.addEventListener("mousemove",o)},e.click=function(e,t){e.addEventListener("click",t)}}(e.events||(e.events={}))}(e.svgUtil||(e.svgUtil={}))}(pxt||(pxt={})),function(e){!function(e){!function(t){class n extends e.Text{at(e,t){return this.cx=e,this.cy=t,this.rePosition(),this}text(e,t=12){return super.text(e),this.fontSizePixels=t,this.setAttribute("font-size",t+"px"),this.rePosition(),this}rePosition(){null!=this.cx&&null!=this.cy&&null!=this.fontSizePixels&&(this.setAttribute("x",this.cx),this.setAttribute("y",this.cy),this.setAttribute("text-anchor","middle"),this.setAttribute("alignment-baseline","middle"))}}t.CenteredText=n}(e.helpers||(e.helpers={}))}(e.svgUtil||(e.svgUtil={}))}(pxt||(pxt={})),function(e){e.IMAGE_MIME_TYPE="image/x-mkcd-f4",e.TILEMAP_MIME_TYPE="application/mkcd-tilemap",e.ANIMATION_MIME_TYPE="application/mkcd-animation";class t{constructor(){this.assets=[],this.takenNames={},this.listeners=[]}add(e){if(this.takenNames[e.id])return this.update(e.id,e);{const t=s(e);return this.takenNames[t.id]=!0,this.takenNames[u(t)]=!0,t.meta.displayName&&t.meta.displayName!==t.id&&(this.takenNames[t.meta.displayName]&&(t.meta.displayName=this.generateNewDisplayName(t.meta.displayName)),this.takenNames[t.meta.displayName]=!0),this.assets.push(t),s(t)}}getSnapshot(e){return e?this.assets.filter((t=>e(t))).map(s):this.assets.map(s)}update(e,t){let n;if(this.takenNames[e]){l(this.lookupByID(e),t)?n=t:(this.removeByID(e),n=this.add(t),this.notifyListener(t.internalID))}else n=this.add(t);return n}removeByID(e){const t=this.lookupByID(e);this.assets=this.assets.filter((t=>t.id!==e)),delete this.takenNames[e],t&&delete this.takenNames[u(t)],(null==t?void 0:t.meta.displayName)&&delete this.takenNames[null==t?void 0:t.meta.displayName]}getByID(e){const t=this.lookupByID(e);return t&&s(t)}getByDisplayName(e){if(this.takenNames[e])for(const t of this.assets)if(t.meta.displayName===e||u(t)===e)return s(t)}isIDTaken(e){return!!this.takenNames[e]}clone(){const e=new t;return e.assets=this.getSnapshot(),e.takenNames=Object.assign({},this.takenNames),e}serializeToJRes(e={}){for(const t of this.assets)a(t,e);return e}addListener(e,t){this.listeners.push({internalID:e,callback:t})}removeListener(e){this.listeners=this.listeners.filter((t=>t.callback!==e))}diff(e){let t={before:[],after:[]},n={};for(const o of e.assets){n[o.internalID]=!0;const e=this.lookupByInternalID(o.internalID);e&&l(o,e)||(t.before.push(o),t.after.push(e))}for(const e of this.assets.filter((e=>!n[e.internalID])))t.before.push(null),t.after.push(e);return t}applyDiff(t,n=!1){const o=n?t.after:t.before,r=n?t.before:t.after;e.Util.assert(o.length===r.length);for(let e=0;e<o.length;e++)o[e]?(this.removeByInternalID(o[e].internalID),r[e]&&this.assets.push(r[e]),this.notifyListener(o[e].internalID)):(this.assets.push(r[e]),this.notifyListener(r[e].internalID));this.takenNames={};for(const t of this.assets)e.Util.assert(!this.takenNames[t.id]),this.takenNames[t.id]=!0,this.takenNames[u(t)]=!0,t.meta.displayName&&(t.meta.displayName!==t.id&&e.Util.assert(!this.takenNames[t.meta.displayName]),this.takenNames[t.meta.displayName]=!0)}lookupByID(e){for(const t of this.assets)if(t.id===e)return t;return null}lookupByInternalID(e){for(const t of this.assets)if(t.internalID===e)return t;return null}removeByInternalID(e){this.assets=this.assets.filter((t=>t.internalID!==e))}notifyListener(e){for(const t of this.listeners)t.internalID===e&&t.callback()}generateNewDisplayName(e){e=e.replace(/\d+$/,"");let t=0;for(;this.takenNames[e+t];)++t;return e+t}}function n(t){const n=[];for(const o of Object.keys(t)){const r=t[o];r.mimeType===e.TILEMAP_MIME_TYPE&&n.push(r)}return n}function o(e,t){return`\n    helpers._registerFactory("${e}", function(name: string) {\n        switch(helpers.stringTrim(name)) {\n`+t.map((e=>e.keys.filter((e=>!!e)).map((e=>`            case "${e}":`)).join("\n")+`return ${e.expression};`)).join("\n")+"\n        }\n        return null;\n    })\n"}function r(t){return e.sprite.Bitmap.fromData(t).copy().data()}function i(t,n){const o=atob(t.data),r=e.U.fromHex(o),i=r[1]|r[2]<<8,s=r[3]|r[4]<<8,a={tileWidth:r[0],tiles:t.tileset.map((e=>n&&n(e)||{id:e}))},l=r.slice(5,5+i*s),c=new e.sprite.Tilemap(i,s,0,0,new Uint8ClampedArray(l)),u=r.slice(5+l.length),p=new e.sprite.Bitmap(i,s,0,0,new Uint8ClampedArray(u)).data();return new e.sprite.TilemapData(c,a,p)}function s(e){switch(e.meta=Object.assign({},e.meta),e.type){case"tile":case"image":return Object.assign(Object.assign({},e),{bitmap:r(e.bitmap)});case"animation":return Object.assign(Object.assign({},e),{frames:e.frames.map((e=>r(e)))});case"tilemap":return Object.assign(Object.assign({},e),{data:e.data.cloneData()})}}function a(t,n){const o=t.id.substr(t.id.lastIndexOf(".")+1);switch(t.type){case"image":n[o]=t.jresData,t.meta.displayName&&(n[o]={data:t.jresData,mimeType:e.IMAGE_MIME_TYPE,displayName:t.meta.displayName});break;case"tile":n[o]={data:t.jresData,mimeType:e.IMAGE_MIME_TYPE,tilemapTile:!0,displayName:t.meta.displayName};break;case"tilemap":const r=function(t,n,o){const r=t.tilemap.data(),i=new Uint8ClampedArray(5+r.data.length+t.layers.data.length);return i[0]=t.tileset.tileWidth,i[1]=255&r.width,i[2]=r.width>>8&255,i[3]=255&r.height,i[4]=r.height>>8&255,i.set(r.data,5),i.set(t.layers.data,5+r.data.length),{id:n,mimeType:e.TILEMAP_MIME_TYPE,data:btoa(e.sprite.uint8ArrayToHex(i)),tileset:t.tileset.tiles.map((e=>e.id)),displayName:o}}(t.data,t.id,t.meta.displayName);n[r.id]=r;break;case"animation":n[o]=function(t){return{namespace:t.id.substr(0,t.id.lastIndexOf(".")),id:t.id.substr(t.id.lastIndexOf(".")+1),mimeType:e.ANIMATION_MIME_TYPE,data:e.sprite.encodeAnimationString(t.frames,t.interval),displayName:t.meta.displayName}}(t)}}function l(t,n){if(t==n)return!0;if(t.id!==n.id||t.type!==n.type||!e.U.arrayEquals(t.meta.tags,n.meta.tags)||!e.U.arrayEquals(t.meta.blockIDs,n.meta.blockIDs)||t.meta.displayName!==n.meta.displayName)return!1;switch(t.type){case"image":case"tile":return e.sprite.bitmapEquals(t.bitmap,n.bitmap);case"animation":const o=n;return t.interval===o.interval&&e.U.arrayEquals(t.frames,o.frames,e.sprite.bitmapEquals);case"tilemap":return t.data.equals(n.data)}}function c(e){const t=/^\s*(?:(?:assets\s*\.\s*(image|tile|animation|tilemap))|(tilemap))\s*(?:`|\(""")([^`"]+)(?:`|"""\))\s*$/m.exec(e);if(t){return{type:t[1]||t[2],name:t[3].trim()}}}function u(e){return p(e.type,e.id)}function p(t,n,o=!1){let r;switch(t){case"image":r=e.sprite.IMAGES_NAMESPACE+".";break;case"tile":r=e.sprite.TILE_NAMESPACE+".";break;case"tilemap":r="";break;case"animation":r=e.sprite.ANIMATION_NAMESPACE+"."}if(r)if(n.startsWith(r)){const e=n.substr(r.length);if(-1===e.indexOf("."))return e}else if(!o)return null;return n}function d(t){const n=atob(t.data),o=new Uint8ClampedArray(e.U.fromHex(n)),r=g(o,0),i=g(o,2),s=g(o,4),a=g(o,6),l=Math.ceil(i*s/2);let c=8;const u=[];for(let e=0;e<a;e++){const e=o.slice(c,c+l);u.push({x0:0,y0:0,width:i,height:s,data:e}),c+=l}let p=t.id;return p.startsWith(t.namespace)||(p=t.namespace+"."+p,p=p.replace(/\.\./g,".")),{type:"animation",internalID:0,id:p,interval:r,frames:u,meta:{displayName:t.displayName}}}function g(e,t){return e[t]|e[t+1]<<8}e.TilemapProject=class{constructor(){this.needsRebuild=!0,this.nextID=0,this.nextInternalID=0,this.committedState={revision:0,tilemaps:new t,tiles:new t,animations:new t,images:new t},this.state={revision:this.nextID++,tilemaps:new t,tiles:new t,animations:new t,images:new t},this.gallery={revision:0,tilemaps:new t,tiles:new t,animations:new t,images:new t},this.undoStack=[],this.redoStack=[]}getNewInternalId(){return this.nextInternalID++}createNewImage(t=16,n=16){const o=this.generateNewID("image"),r=new e.sprite.Bitmap(t,n).data(),i={internalID:this.getNewInternalId(),id:o,type:"image",bitmap:r,meta:{},jresData:e.sprite.base64EncodeBitmap(r)};return this.state.images.add(i)}createNewAnimation(t=16,n=16){const o=this.generateNewID("animation"),r=new e.sprite.Bitmap(t,n).data(),i={internalID:this.getNewInternalId(),id:o,type:"animation",frames:[r],interval:500,meta:{}};return this.state.animations.add(i)}createNewAnimationFromData(e,t=500,n){const o=this.generateNewID("animation"),r={internalID:this.getNewInternalId(),id:o,type:"animation",frames:e,interval:t,meta:{displayName:n}};return this.state.animations.add(r)}getGalleryTiles(e){return this.extensionTileSets?this.extensionTileSets.map((t=>t.tileSets.find((t=>t.tileWidth===e)))).filter((e=>null==e?void 0:e.tiles.length)):null}getProjectImages(){return this.state.images.getSnapshot()}getProjectTiles(t,n){const o=this.state.tiles.getSnapshot((e=>e.bitmap.width===t));return 0===o.length?n?(this.createNewTile(new e.sprite.Bitmap(t,t).data()),this.getProjectTiles(t,!1)):null:{tileWidth:t,tiles:o}}createNewTile(t,n,o){this.onChange(),n&&!this.isNameTaken("tile",n)||(n=this.generateNewID("tile"));const r={internalID:this.getNewInternalId(),id:n,type:"tile",jresData:e.sprite.base64EncodeBitmap(t),bitmap:t,meta:{displayName:o},isProjectTile:!0};return this.state.tiles.add(r)}createNewProjectImage(t,n){this.onChange();const o={internalID:this.getNewInternalId(),id:this.generateNewID("image"),type:"image",jresData:e.sprite.base64EncodeBitmap(t),meta:{displayName:n},bitmap:t};return this.state.images.add(o)}updateTile(t){this.onChange();const n=this.resolveProjectTileByInternalID(t.internalID);if(n){if(this.state.tiles.update(n.id,t),n.id!==t.id||!e.sprite.bitmapEquals(n.bitmap,t.bitmap))for(const e of this.getAssets("tilemap"))e.data.tileset.tiles.some((e=>e.internalID===t.internalID))&&(e.data.tileset.tiles=e.data.tileset.tiles.map((e=>e.internalID===t.internalID?t:e)),this.updateTilemap(e.id,e.data));return t}return null}deleteTile(e){this.onChange(),this.state.tiles.removeByID(e)}getProjectTilesetJRes(){const t={};return this.state.tiles.serializeToJRes(t),this.state.tilemaps.serializeToJRes(t),t["*"]={mimeType:"image/x-mkcd-f4",dataEncoding:"base64",namespace:e.sprite.TILE_NAMESPACE},t}getProjectAssetsJRes(){const t={};return this.state.images.serializeToJRes(t),this.state.animations.serializeToJRes(t),t["*"]={mimeType:"image/x-mkcd-f4",dataEncoding:"base64",namespace:e.sprite.IMAGES_NAMESPACE},t}getTilemap(e){return this.state.tilemaps.getByID(e)}updateTilemap(e,t){const n=this.state.tilemaps.getByID(e);if(n){this.onChange();const o=Object.assign(Object.assign({},n),{data:t});return this.state.tilemaps.update(e,o),o}return null}createNewTilemap(e,t,n=16,o=16){return this.createNewTilemapFromData(this.blankTilemap(t,n,o),e)}blankTilemap(t,n=16,o=16){const r=new e.sprite.Tilemap(n,o),i=new e.sprite.Bitmap(n,o),s={tileWidth:t,tiles:[this.getTransparency(t)]};return new e.sprite.TilemapData(r,s,i.data())}resolveTile(e){return this.lookupAsset("tile",e)}resolveProjectTileByInternalID(e){return this.state.tiles.getSnapshot((t=>t.internalID===e))[0]}resolveTileByBitmap(t){const n=e.sprite.base64EncodeBitmap(t);return this.state.tiles.getSnapshot((e=>e.jresData===n))[0]}getTransparency(t){const n=e.sprite.TILE_NAMESPACE+".transparency"+t;let o=this.state.tiles.getByID(n);if(!o){const r=new e.sprite.Bitmap(t,t).data();return o={internalID:this.getNewInternalId(),id:n,type:"tile",bitmap:r,jresData:e.sprite.base64EncodeBitmap(r),meta:{},isProjectTile:!0},this.state.tiles.add(o)}return o}createNewTilemapFromData(e,t){this.onChange();const n=this.generateNewIDInternal("tilemap",t||lf("level"));return this.state.tilemaps.add({internalID:this.getNewInternalId(),id:n,type:"tilemap",meta:{displayName:n},data:e}),[n,e]}cloneState(){return{revision:this.state.revision,images:this.state.images.clone(),tilemaps:this.state.tilemaps.clone(),animations:this.state.animations.clone(),tiles:this.state.tiles.clone()}}undo(){if(this.state.revision!==this.committedState.revision&&this.pushUndo(),this.undoStack.length){const e=this.undoStack.pop();this.state.tiles.applyDiff(e.tiles,!0),this.state.images.applyDiff(e.images,!0),this.state.tilemaps.applyDiff(e.tilemaps,!0),this.state.animations.applyDiff(e.animations,!0),this.state.revision=e.beforeRevision,this.redoStack.push(e),this.committedState=this.cloneState(),this.needsRebuild=!0}}redo(){if(this.redoStack.length){const e=this.redoStack.pop();this.state.tiles.applyDiff(e.tiles),this.state.images.applyDiff(e.images),this.state.tilemaps.applyDiff(e.tilemaps),this.state.animations.applyDiff(e.animations),this.state.revision=e.afterRevision,this.undoStack.push(e),this.committedState=this.cloneState(),this.needsRebuild=!0}}pushUndo(){this.undoStack.length&&this.committedState.revision===this.state.revision||(this.redoStack=[],this.undoStack.push({beforeRevision:this.committedState.revision,afterRevision:this.state.revision,tiles:this.state.tiles.diff(this.committedState.tiles),images:this.state.images.diff(this.committedState.images),tilemaps:this.state.tilemaps.diff(this.committedState.tilemaps),animations:this.state.animations.diff(this.committedState.animations)}),this.committedState=this.cloneState(),this.cleanupTemporaryAssets())}revision(){return this.state.revision}encodeTilemap(t,n){const o=t.tilemap.data(),r=new Uint8ClampedArray(5+o.data.length+t.layers.data.length);return r[0]=t.tileset.tileWidth,r[1]=255&o.width,r[2]=o.width>>8&255,r[3]=255&o.height,r[4]=o.height>>8&255,r.set(o.data,5),r.set(t.layers.data,5+o.data.length),{id:n,mimeType:e.TILEMAP_MIME_TYPE,data:btoa(e.sprite.uint8ArrayToHex(r)),tileset:t.tileset.tiles.map((e=>e.id))}}forceUpdate(){this.onChange()}isNameTaken(e,t){const n=t=>{switch(e){case"image":return this.state.images.isIDTaken(t)||this.gallery.images.isIDTaken(t);case"tile":return this.state.tiles.isIDTaken(t)||this.gallery.tiles.isIDTaken(t);case"tilemap":return this.state.tilemaps.isIDTaken(t)||this.gallery.tilemaps.isIDTaken(t);case"animation":return this.state.animations.isIDTaken(t)||this.gallery.animations.isIDTaken(t)}},o=p(e,t),r=o&&o!==t;return n(t)||r&&n(o)}isAssetUsed(t,n,o){var r,i,s;if(((null===(i=null===(r=t.meta)||void 0===r?void 0:r.blockIDs)||void 0===i?void 0:i.filter((e=>!o||(null==o?void 0:o.indexOf(e))<0)))||[]).length>0)return!0;if("tile"==t.type)for(const e of this.getAssets("tilemap"))if(!((null==o?void 0:o.indexOf(e.id))>=0)&&e.data.tileset.tiles.some((e=>e.id===t.id)))return!0;if(n){const r=e.Util.escapeForRegex(u(t)),i=e.Util.escapeForRegex(null===(s=t.meta)||void 0===s?void 0:s.displayName)||"";let a;switch(t.type){case"tile":a=`myTiles.${r}|assets.tile\`${r}\``,i&&(a+=`|assets.tile\`${i}\``);break;case"tilemap":a=`tilemap\`${r}\``;break;case"animation":a=`assets.animation\`${r}\``,i&&(a+=`|assets.animation\`${i}\``);break;default:a=`assets.image\`${r}\``,i&&(a+=`|assets.image\`${i}\``)}const l=new RegExp(a,"gm");let c;switch(t.type){case"tile":c=`myTiles.${r}|assets.tile("""${r}""")`,i&&(c+=`|assets.tile("""${i}""")`);break;case"tilemap":c=`assets.tilemap("""${r}""")`;break;case"animation":c=`assets.animation("""${r}""")`,i&&(c+=`|assets.animation("""${i}""")`);break;default:c=`assets.image("""${r}""")`,i&&(c+=`|assets.image("""${i}""")`)}const p=new RegExp(c,"gm");for(let e of Object.keys(n)){if((null==o?void 0:o.indexOf(e))>=0)continue;const t=n[e];if(e.match(/((?!\.g).{2}|^.{0,1})\.ts$/i)){if(t.content.match(l))return!0}else if(e.endsWith(".py")&&t.content.match(p))return!0}}return!1}lookupAsset(e,t){switch(e){case"image":return this.state.images.getByID(t)||this.gallery.images.getByID(t);case"tile":return this.state.tiles.getByID(t)||this.gallery.tiles.getByID(t);case"tilemap":return this.state.tilemaps.getByID(t)||this.gallery.tilemaps.getByID(t);case"animation":return this.state.animations.getByID(t)||this.gallery.animations.getByID(t)}}lookupAssetByName(e,t){switch(e){case"image":return this.state.images.getByDisplayName(t);case"tile":return this.state.tiles.getByDisplayName(t);case"tilemap":return this.state.tilemaps.getByDisplayName(t);case"animation":return this.state.animations.getByDisplayName(t)}}getAssets(e){switch(e){case"image":return this.state.images.getSnapshot();case"tile":return this.state.tiles.getSnapshot();case"tilemap":return this.state.tilemaps.getSnapshot();case"animation":return this.state.animations.getSnapshot()}}getGalleryAssets(e){switch(e){case"image":return this.gallery.images.getSnapshot();case"tile":return this.gallery.tiles.getSnapshot();case"tilemap":return this.gallery.tilemaps.getSnapshot();case"animation":return this.gallery.animations.getSnapshot()}}lookupBlockAsset(e,t){let n=e=>{var n,o;return-1!==(null===(o=null===(n=e.meta)||void 0===n?void 0:n.blockIDs)||void 0===o?void 0:o.indexOf(t))};switch(e){case"image":return this.state.images.getSnapshot(n)[0];case"tile":return this.state.tiles.getSnapshot(n)[0];case"tilemap":return this.state.tilemaps.getSnapshot(n)[0];case"animation":return this.state.animations.getSnapshot(n)[0]}}updateAsset(e){switch(this.onChange(),e.type){case"image":return this.state.images.update(e.id,e);case"tile":return this.updateTile(e);case"tilemap":return this.state.tilemaps.update(e.id,e);case"animation":return this.state.animations.update(e.id,e)}}duplicateAsset(e,t){var n;this.onChange();const o=s(e),r=t||(null===(n=o.meta)||void 0===n?void 0:n.displayName);let i;switch(e.type){case"image":i=this.createNewProjectImage(o.bitmap,r);break;case"tile":i=this.createNewTile(o.bitmap,null,r);break;case"tilemap":const[e,t]=this.createNewTilemapFromData(o.data,r);i=this.getTilemap(e);break;case"animation":i=this.createNewAnimationFromData(o.frames,o.interval,r)}return i}removeAsset(e){switch(this.onChange(),e.type){case"image":return this.state.images.removeByID(e.id);case"tile":return this.state.tiles.removeByID(e.id);case"tilemap":return this.state.tilemaps.removeByID(e.id);case"animation":return this.state.animations.removeByID(e.id)}}addChangeListener(e,t){switch(e.type){case"image":this.state.images.addListener(e.internalID,t);break;case"tile":this.state.tiles.addListener(e.internalID,t);break;case"tilemap":this.state.tilemaps.addListener(e.internalID,t);break;case"animation":this.state.animations.addListener(e.internalID,t)}}removeChangeListener(e,t){switch(e){case"image":this.state.images.removeListener(t);break;case"tile":this.state.tiles.removeListener(t);break;case"tilemap":this.state.tilemaps.removeListener(t);break;case"animation":this.state.animations.removeListener(t)}}loadPackage(e){const t=e.sortedDeps();this.extensionTileSets=[];for(const e of t){const t="this"===e.id,n=this.readImages(e.parseJRes(),t);for(const e of n)"tile"===e.type?t?this.state.tiles.add(e):this.gallery.tiles.add(e):"image"===e.type?t?this.state.images.add(e):this.gallery.images.add(e):t?this.state.animations.add(e):this.gallery.animations.add(e)}for(const t of n(e.parseJRes()))this.state.tilemaps.add({internalID:this.getNewInternalId(),type:"tilemap",id:t.id,meta:{displayName:t.displayName||t.id},data:i(t,(e=>this.resolveTile(e)))});this.committedState=this.cloneState(),this.undoStack=[],this.redoStack=[]}loadTilemapJRes(t,o=!1){t=e.inflateJRes(t);const r=this.readImages(t,!0).filter((e=>"tile"===e.type));let s={};for(const e of r){if(o){const t=this.resolveTileByBitmap(e.bitmap);if(t){s[e.id]=t.id;continue}}const t=this.createNewTile(e.bitmap,e.id,e.meta.displayName);t.id!==e.id&&(s[e.id]=t.id)}for(const e of n(t))this.state.tilemaps.add({internalID:this.getNewInternalId(),type:"tilemap",id:e.id,meta:{displayName:e.displayName||e.id},data:i(e,(e=>(s[e]&&(e=s[e]),this.resolveTile(e))))})}loadAssetsJRes(t){t=e.inflateJRes(t);const n=[];for(const o of Object.keys(t)){const r=t[o];if(r.tilemapTile)this.state.tiles.add(this.generateImage(r,"tile"));else if(r.mimeType===e.IMAGE_MIME_TYPE)this.state.images.add(this.generateImage(r,"image"));else if(r.mimeType===e.ANIMATION_MIME_TYPE){const[e,t]=this.generateAnimation(r);t?n.push(e):this.state.animations.add(e)}}for(const e of n)this.state.animations.add(this.inflateAnimation(e,this.state.images.getSnapshot()))}removeInactiveBlockAssets(e){function t(t){const n=t.getSnapshot((t=>{var n;return!t.meta.displayName&&(null===(n=t.meta.blockIDs)||void 0===n?void 0:n.some((t=>-1===e.indexOf(t))))})),o=[];for(const t of n)1===t.meta.blockIDs.length?o.push(t):(t.meta.blockIDs=t.meta.blockIDs.filter((t=>-1!==e.indexOf(t))),0===t.meta.blockIDs.length&&o.push(t));for(const e of o)t.removeByID(e.id)}t(this.state.images),t(this.state.tiles),t(this.state.tilemaps),t(this.state.animations)}generateImage(t,n){return{internalID:this.getNewInternalId(),type:n,id:t.id,meta:{displayName:t.displayName},jresData:t.data,bitmap:e.sprite.getBitmapFromJResURL(`data:${e.IMAGE_MIME_TYPE};base64,${t.data}`).data()}}generateAnimation(e){if("json"===e.dataEncoding){let t;try{t=JSON.parse(e.data)}catch(t){console.warn("could not parse json data of '"+e.id+"'")}return[{internalID:this.getNewInternalId(),type:"animation",meta:{displayName:e.displayName},id:e.id,frames:[],frameIds:t.frames,interval:100,flippedHorizontal:t.flippedHorizontal},!0]}return[Object.assign(Object.assign({},d(e)),{internalID:this.getNewInternalId()}),!1]}inflateAnimation(t,n){return t.frames=t.frameIds.map((e=>n.find((t=>t.id===e)).bitmap)),t.flippedHorizontal&&(t.frames=t.frames.map((t=>{const n=e.sprite.Bitmap.fromData(t),o=new e.sprite.Bitmap(t.width,t.height);for(let e=0;e<o.width;e++)for(let t=0;t<o.height;t++)o.set(e,t,n.get(n.width-e-1,t));return o.data()}))),t}generateNewID(t){switch(t){case"animation":return this.generateNewIDInternal("animation",e.sprite.ANIMATION_PREFIX,e.sprite.ANIMATION_NAMESPACE);case"image":return this.generateNewIDInternal("image",e.sprite.IMAGE_PREFIX,e.sprite.IMAGES_NAMESPACE);case"tile":return this.generateNewIDInternal("tile",e.sprite.TILE_PREFIX,e.sprite.TILE_NAMESPACE);case"tilemap":return this.generateNewIDInternal("tilemap",lf("level"))}}generateNewIDInternal(e,t,n){t=t.replace(/\d+$/,"");const o=n?n+"."+t:t;let r=1;for(;this.isNameTaken(e,o+r);)++r;return o+r}onChange(){this.needsRebuild=!0,this.state.revision=this.nextID++}readImages(t,n=!1){const o=[],r=[];for(const i of Object.keys(t)){const s=t[i];if(s.tilemapTile){const e=this.generateImage(s,"tile");e.isProjectTile=n,o.push(e)}else if(s.mimeType===e.IMAGE_MIME_TYPE)o.push(this.generateImage(s,"image"));else if(s.mimeType===e.ANIMATION_MIME_TYPE){const[e,t]=this.generateAnimation(s);t?r.push(e):o.push(e)}}for(const e of r)o.push(this.inflateAnimation(e,o));return o}cleanupTemporaryAssets(){const e=this.state.images.getSnapshot((e=>{var t;return!e.meta.displayName&&!(null===(t=e.meta.blockIDs)||void 0===t?void 0:t.length)}));for(const t of e)this.state.images.removeByID(t.id)}},e.emitTilemapsFromJRes=function(t){const n=Object.keys(t);let r="";const s=[],a=[];for(const o of n){if("*"===o)continue;const n=t[o];if(n.tilemapTile&&(r+="    //% fixedInstance jres blockIdentity=images._tile\n",r+=`    export const ${o} = image.ofBuffer(hex\`\`);\n`,a.push({keys:[n.displayName,p("tile",o,!0)],expression:o})),n.mimeType===e.TILEMAP_MIME_TYPE){const t=i(n);s.push({keys:[n.displayName,p("tilemap",n.id)],expression:e.sprite.encodeTilemap(t,"typescript")})}}s.length&&(r+=o("tilemap",s)),a.length&&(r+=o("tile",a));const l=lf("Auto-generated code. Do not edit.");return`// ${l}\nnamespace ${e.sprite.TILE_NAMESPACE} {\n${r}\n}\n// ${l}\n`},e.emitProjectImages=function(t){const n=Object.keys(t);let r="";const i=[],s=[];for(const o of n){if("*"===o)continue;const n=t[o];if("string"==typeof n||n.mimeType===e.IMAGE_MIME_TYPE){let t,r=[p("image",o,!0)];"string"==typeof n?t=e.sprite.bitmapToImageLiteral(e.sprite.getBitmapFromJResURL(n),"typescript"):(t=e.sprite.bitmapToImageLiteral(e.sprite.getBitmapFromJResURL(n.data),"typescript"),r.push(n.displayName)),i.push({keys:r,expression:t})}else if(n.mimeType===e.ANIMATION_MIME_TYPE){const t=d(n);s.push({keys:[n.displayName,p("animation",o,!0)],expression:`[${t.frames.map((t=>e.sprite.bitmapToImageLiteral(e.sprite.Bitmap.fromData(t),"typescript"))).join(", ")}]`})}}const a=lf("Auto-generated code. Do not edit.");return r+=o("image",i),r+=o("animation",s),`// ${a}\nnamespace ${e.sprite.IMAGES_NAMESPACE} {\n${r}\n}\n// ${a}\n`},e.cloneAsset=s,e.assetEquals=l,e.validateAssetName=function(e){return!!e&&!/[\u0000-\u001f\u0021-\u002c\u002e\u002f\u003a-\u0040\u005b-\u005e\u0060\u007b-\u007f]/.test(e)},e.getTSReferenceForAsset=function(e,t=!1){var n;let o;if(o=(null===(n=e.meta)||void 0===n?void 0:n.displayName)?e.meta.displayName:u(e),!o)return"image"===e.type||"tile"===e.type?e.id:void 0;const r=t?'("""':"`",i=t?'""")':"`";switch(e.type){case"tile":return`assets.tile${r}${o}${i}`;case"image":return`assets.image${r}${o}${i}`;case"animation":return`assets.animation${r}${o}${i}`;case"tilemap":return`tilemap${r}${o}${i}`}},e.parseAssetTSReference=c,e.lookupProjectAssetByTSReference=function(e,t){const n=c(e);if(n){const{type:e,name:o}=n;switch(e){case"tile":return t.lookupAssetByName("tile",o);case"image":return t.lookupAssetByName("image",o);case"tilemap":return t.lookupAssetByName("tilemap",o)||t.lookupAsset("tilemap",o);case"animation":return t.lookupAssetByName("animation",o)}}},e.getDefaultAssetDisplayName=function(e){switch(e){case"image":return lf("myImage");case"tile":return lf("myTile");case"tilemap":return lf("level");case"animation":return lf("myAnim");default:return lf("asset")}},e.getShortIDForAsset=u}(pxt||(pxt={})),function(e){!function(t){t.blockColors={loops:"#107c10",logic:"#006970",math:"#712672",variables:"#A80000",functions:"#005a9e",text:"#996600",arrays:"#A94400",advanced:"#3c3c3c",addpackage:"#717171",search:"#000",debug:"#e03030",default:"#dddddd",topblocks:"#aa8f00",recipes:"#717171"},t.blockIcons={loops:"",logic:"",math:"",variables:"",functions:"",text:"",arrays:"",advancedcollapsed:"",advancedexpanded:"",more:"",addpackage:"",search:"",debug:"",default:"",topblocks:"",recipes:""};let n="";function o(e){const t=function(e,t,n){let o=0,r=0,i=0;if(0==t)o=n,r=n,i=n;else{let s=Math.floor(e/60),a=e/60-s,l=n*(1-t),c=n*(1-t*a),u=n*(1-t*(1-a));switch(s){case 1:o=c,r=n,i=l;break;case 2:o=l,r=n,i=u;break;case 3:o=l,r=c,i=n;break;case 4:o=u,r=l,i=n;break;case 5:o=n,r=l,i=c;break;case 6:case 0:o=n,r=u,i=l}}return[Math.floor(o),Math.floor(r),Math.floor(i)]}(e,.45,165.75);return`#${r(t[0])}${r(t[1])}${r(t[2])}`}function r(e){const t=e.toString(16);return 1==t.length?"0"+t:t}t.appendToolboxIconCss=function(t,o){if(!(n.indexOf(t)>-1))if(1===o.length){const r=e.Util.unicodeToChar(o);n+=`\n                .blocklyTreeIcon.${t}::before {\n                    content: "${r}";\n                }\n            `}else n+=`\n                .blocklyTreeIcon.${t} {\n                    background-image: url("${e.Util.pathJoin(e.webConfig.commitCdnUrl,encodeURI(o))}")!important;\n                    width: 30px;\n                    height: 100%;\n                    background-size: 20px !important;\n                    background-repeat: no-repeat !important;\n                    background-position: 50% 50% !important;\n                }\n            `},t.getNamespaceColor=function(t){return t=t.toLowerCase(),e.appTarget.appTheme.blockColors&&e.appTarget.appTheme.blockColors[t]?e.appTarget.appTheme.blockColors[t]:e.toolbox.blockColors[t]?e.toolbox.blockColors[t]:""},t.getNamespaceIcon=function(t){return t=t.toLowerCase(),e.appTarget.appTheme.blockIcons&&e.appTarget.appTheme.blockIcons[t]?e.appTarget.appTheme.blockIcons[t]:e.toolbox.blockIcons[t]?e.toolbox.blockIcons[t]:""},t.advancedTitle=function(){return e.Util.lf("{id:category}Advanced")},t.addPackageTitle=function(){return e.Util.lf("{id:category}Extensions")},t.recipesTitle=function(){return e.Util.lf("{id:category}Tutorials")},t.convertColor=function(e){var t;e=(t=e)?"0x"==t.substring(0,2)?"#"+t.substring(2):t:"#000000";const n=parseInt(e);return isNaN(n)?e:o(n)},t.hueToRgb=o,t.fadeColor=function(e,t,n){(e=e.replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);let o="#";for(let r=0;r<3;r++){let i=parseInt(e.substr(2*r,2),16);i=Math.round(Math.min(Math.max(0,n?i+i*t:i-i*t),255));let s=i.toString(16);o+=("00"+s).substr(s.length)}return o}}(e.toolbox||(e.toolbox={}))}(pxt||(pxt={})),function(e){!function(t){const n=/^##[^#](.*)$([\s\S]*?)(?=^##[^#]|$(?![\r\n]))/gim,o=/^###[^#](.*)$([\s\S]*?)(?=^###[^#]|$(?![\r\n]))/gim;function r(){return/``` *(sim|block|blocks|filterblocks|spy|ghost|typescript|ts|js|javascript|template|python|jres|assetjson|customts|tutorialValidationRules|requiredTutorialBlock)\s*\n([\s\S]*?)\n```/gim}function i(t,o,r){let i=o||n,a=[];if(t.replace(i,(function(e,t,n){n=n.trim();let{header:o,hint:i,requiredBlocks:l}=function(e,t,n){let o,r,i=e=s(e);if(t){const t=/#+ ~ tutorialhint([\s\S]*)/i;i=e.replace(t,(function(e,t){return o=t,""}))}else{const t=/(^[\s\S]*?\S)\s*((```|\[?\!\[[\s\S]+?\]\(\S+?\)\]?)[\s\S]*)/im;let s=e.match(t);if(s&&s.length>2&&(i=s[1].trim(),o=s[2].trim(),n)){let e=s[2].trim();e=e.replace(/``` *(requiredTutorialBlock)\s*\n([\s\S]*?)\n```/gim,(function(e,t,n){return r=`{\n${n}\n}`,""})),o=e}}return{header:i,hint:o,requiredBlocks:r}}(n,r&&r.explicitHints,r.tutorialCodeValidation);let c={title:t.match(/^\{.*\}$/)?void 0:t.replace(/@(fullscreen|unplugged|showdialog|showhint|tutorialCompleted|resetDiff)/gi,"").trim(),contentMd:n,headerContentMd:o};return/@(fullscreen|unplugged|showdialog|showhint)/i.test(t)&&(c.showHint=!0),/@(unplugged|showdialog)/i.test(t)&&(c.showDialog=!0),/@tutorialCompleted/.test(t)&&(c.tutorialCompleted=!0),/@resetDiff/.test(t)&&(c.resetDiff=!0),i&&(c.hintContentMd=i),r.tutorialCodeValidation&&l&&(c.requiredBlockMd=l),a.push(c),""})),0!=t.indexOf("# Not found"))return a;e.debug("tutorial not found")}function s(e){if(!e)return e;return e.replace(/```(filterblocks|package|ghost|config|template|jres|assetjson|customts)\s*\n([\s\S]*?)\n```/gim,"").trim()}function a(t){if(!t)return;const n=JSON.parse(t);return{[e.TILEMAP_JRES]:n[e.TILEMAP_JRES],[e.TILEMAP_CODE]:n[e.TILEMAP_CODE],[e.IMAGES_JRES]:n[e.IMAGES_JRES],[e.IMAGES_CODE]:n[e.IMAGES_CODE]}}t.parseTutorial=function(t){const{metadata:r,body:l}=function(t){const n=/### @(\S+) ([ \S]+)/gi,o={},r=t.replace(n,(function(e,t,n){try{o[t]=JSON.parse(n)}catch(e){o[t]=n}return""})),i=o;void 0!==i.explicitHints&&e.appTarget.appTheme&&e.appTarget.appTheme.tutorialExplicitHints&&(i.explicitHints=!0);return{metadata:i,body:r}}(t),{steps:c,activities:u}=function(e,t){if(t&&t.activities)return function(e,t){let r=[],s=[];return e.replace(n,(function(e,n,a){let l=s.length;s.push({name:n||lf("Activity {0}",l),step:r.length});let c=i(a,o,t);return c=c.map((e=>(e.activity=l,e))),r=r.concat(c),""})),{steps:r,activities:s}}(e,t);{let n=i(e,null,t);return(!n||n.length<1)&&(n=i(e,o,t)),{steps:n,activities:null}}}(l,r),p=function(e){let t=e.match(/^#[^#](.*)$/im);return t&&t.length>1?t[1].trim():null}(l);if(!c)return;const{code:d,templateCode:g,editor:h,language:f,jres:_,assetJson:m,customTs:y,tutorialValidationRulesStr:k}=function(t){let n;const o=/``` *(sim|block|blocks|filterblocks|spy|ghost|typescript|ts|js|javascript|template|python|jres|assetjson|customts|tutorialValidationRules|requiredTutorialBlock)\s*\n([\s\S]*?)\n```/gim;let r,i,s,a,l,c,u=[];return t.replace(/((?!.)\s)+/g,"\n").replace(o,(function(t,n,o){switch(n){case"block":case"blocks":case"requiredTutorialBlock":case"filterblocks":if(!p(e.BLOCKS_PROJECT_NAME))return;break;case"spy":case"python":if(!p(e.PYTHON_PROJECT_NAME))return;"python"==n&&(s=n);break;case"typescript":case"ts":case"javascript":case"js":if(!p(e.JAVASCRIPT_PROJECT_NAME))return;break;case"template":i=o;break;case"jres":r=o;break;case"assetjson":a=o;break;case"customts":l=o,o="";break;case"tutorialValidationRules":c=o}return u.push("python"==n?`\n${o}\n`:`{\n${o}\n}`),""})),n=n||e.BLOCKS_PROJECT_NAME,{code:u,templateCode:i,editor:n,language:s,jres:r,assetJson:a,customTs:l,tutorialValidationRulesStr:c};function p(t){return n&&n!=t?(e.debug("tutorial ambiguous: contains snippets of different types"),!1):(n=t,!0)}}(l);let b;r.tutorialCodeValidation&&(b=e.Util.jsonTryParse(k),function(t,n){const o=Object.keys(t);for(let r=0;r<o.length;r++){const i={ruleName:o[r],enabled:t[o[r]]?"true":"false",tutorial:n};e.tickEvent("tutorial.validation.setValidationRules",i)}}(b,p)),(!0===r.diffs||!1!==r.diffs&&!0!==r.noDiffs&&(h==e.BLOCKS_PROJECT_NAME&&e.appTarget.appTheme.tutorialBlocksDiff||h!=e.BLOCKS_PROJECT_NAME&&e.appTarget.appTheme.tutorialTextDiff))&&function(e,t){let n;function o(e){const t={typescript:"diff",spy:"diffspy",blocks:"diffblocks",python:"diff"},o=/\s*(\/\/|#)\s*@highlight/gm;return e?e.replace(/```(typescript|spy|python|blocks|ghost|template)((?:.|[\r\n])+)```/,(function(e,r,i){const s=n,a=/^(template|ghost)$/.test(r),l=o.test(i);return i=i.replace(/^\n+/,"").replace(/\n+$/,""),l&&(i=i.replace(o,"")),n=i,!s||l||a?e:`\`\`\`${t[r]}\n${s}\n----------\n${i}\n\`\`\``})):e}e.forEach(((e,r)=>{if((e.resetDiff||t&&t.find((e=>e.step==r)))&&(n=void 0),e.hintContentMd){const t=o(e.hintContentMd);if(t&&t!=e.hintContentMd)return void(e.hintContentMd=t)}if(e.headerContentMd){const t=o(e.headerContentMd);if(t&&t!=e.headerContentMd)return void(e.headerContentMd=t)}}))}(c,u);const v=a(m);return c.forEach((e=>{e.contentMd=s(e.contentMd),e.headerContentMd=s(e.headerContentMd),e.hintContentMd=s(e.hintContentMd),e.requiredBlockMd=s(e.requiredBlockMd)})),{editor:h,title:p,steps:c,activities:u,code:d,templateCode:g,metadata:r,language:f,jres:_,assetFiles:v,customTs:y,tutorialValidationRules:b}},t.getMetadataRegex=r,t.highlight=function(e){let t=e.textContent;if(t=t.replace(/img\s*\(\s*"{3}[\s\da-f.#tngrpoyw]*"{3}\s*\)/g,'img(""" """)'),t=t.replace(/img\s*`[\s\da-f.#tngrpoyw]*`\s*/g,"img` `"),!/@highlight/.test(t))return void(e.textContent=t);e.textContent="";const n=t.split("\n");for(let t=0;t<n.length;++t){t>0&&t<n.length&&e.appendChild(document.createTextNode("\n"));let o=n[t];if(/@highlight/.test(o)){if(o=n[++t],void 0!==o){const t=document.createElement("span");t.className="highlight-line",t.textContent=o,e.appendChild(t)}}else e.appendChild(document.createTextNode(o))}},t.getTutorialOptions=function(t,n,o,r,i){var s;const a=e.tutorial.parseTutorial(t);if(!a)throw new Error(lf("Invalid tutorial format"));return{options:{tutorial:n,tutorialName:a.title||o,tutorialReportId:r,tutorialStep:0,tutorialReady:!0,tutorialHintCounter:0,tutorialStepInfo:a.steps,tutorialActivityInfo:a.activities,tutorialMd:t,tutorialCode:a.code,tutorialRecipe:!!i,templateCode:a.templateCode,autoexpandStep:!(null===(s=a.metadata)||void 0===s?void 0:s.autoexpandOff),metadata:a.metadata,language:a.language,jres:a.jres,assetFiles:a.assetFiles,customTs:a.customTs,tutorialValidationRules:a.tutorialValidationRules},editor:a.editor}},t.parseCachedTutorialInfo=function(t,n){let o=e.Util.jsonTryParse(t);return o?e.BrowserUtils.tutorialInfoDbAsync().then((e=>{if(n&&o[n]){const t=o[n];t.usedBlocks&&t.hash&&e.setWithHashAsync(n,t.snippetBlocks,t.hash)}else for(let t of Object.keys(o)){const n=o[t];n.usedBlocks&&n.hash&&e.setWithHashAsync(t,n.snippetBlocks,n.hash)}})).catch((e=>{})):Promise.resolve()},t.resolveLocalizedMarkdown=function(t,n,o){const r=(o||t.fileName||"README")+".md";let i;const[s,a,l]=e.Util.normalizeLanguageCode(e.Util.userLanguage());return i=s&&a&&l?n[`_locales/${s}/${r}`]||n[`_locales/${l}/${r}`]||n[`_locales/${a}/${r}`]:n[`_locales/${s}/${r}`],i=i||n[r],i},t.parseAssetJson=a}(e.tutorial||(e.tutorial={}))}(pxt||(pxt={})),function(e){!function(t){function n(t,n){const{tutorialStep:o}=t,r=t.tutorialStepInfo[o].requiredBlockMd,i=e.BrowserUtils.getTutorialCodeHash([r]);let s={};return null!=n&&(s=n[i]),s}function o(e,t,n){n.isStrict=!0;const o=Object.keys(e);let r=[],i=[];null!=t&&(r=Object.keys(t));let s=o.length>=r.length;const a=lf("These are the blocks you seem to be missing:");for(let n=0;n<r.length;n++){let o=r[n];(!e[o]||e[o]<t[o])&&(i.push(o),s=!1)}return n.ruleMessage=a,n.ruleStatus=s,n.blockIds=i,n}function r(e,t,n){const o=Object.keys(e),r=Object.keys(null!=t?t:{});let i=o.length>=r.length;for(let t=0;t<r.length;t++){if(!e[r[t]]){i=!1;break}}return n.ruleStatus=i,n}function i(e,t,n){n.isStrict=!0;Object.keys(e);let o=[],r=[];null!=t&&(o=Object.keys(t));let i=!0;const s=lf("You are required to have the following block:");for(let t=0;t<o.length;t++){let n=o[t];e[n]||(r.push(n),i=!1)}return n.ruleMessage=s,n.ruleStatus=i,n.blockIds=r,n}t.validate=async function(t,s,a){let l=function(e){let t=[];if(null!=e){const n=Object.keys(e);for(let o=0;o<n.length;o++){const r=n[o],i={ruleName:r,ruleTurnOn:e[r]};t.push(i)}}return t}(t.tutorialValidationRules);if(l.length>0&&s.length>0){const a=function(e){let t={};for(let n=0;n<e.length;n++)t[e[n]]||(t[e[n]]=0),t[e[n]]=t[e[n]]+1;return t}(s.map((e=>e.type))),{tutorialStepInfo:c,tutorialStep:u}=t,p=(c[u],await function(t,n){return e.BrowserUtils.tutorialInfoDbAsync().then((e=>e.getAsync(t.tutorial,t.tutorialCode).then((e=>(null==e?void 0:e.snippets)?Promise.resolve(e.snippets):Promise.resolve(void 0)))))}(t)),d=function(t,n){const{tutorialStepInfo:o,tutorialStep:r}=t,i=t.tutorialStepInfo[r].hintContentMd;let s="";null!=i&&i.replace(/((?!.)\s)+/g,"\n").replace(/``` *(block|blocks)\s*\n([\s\S]*?)\n```/gim,(function(e,t,n){return s=`{\n${n}\n}`,""}));const a=e.BrowserUtils.getTutorialCodeHash([s]);let l={};null!=n&&(l=n[a]);return l}(t,p);for(let e=0;e<l.length;e++){let s=l[e];const c=l[e].ruleName;if(l[e].ruleTurnOn)switch(c){case"exact":s=o(a,d,s);break;case"atleast":s=r(a,d,s);break;case"required":s=i(a,n(t,p),s)}}}return l}}(e.tutorial||(e.tutorial={}))}(pxt||(pxt={})),function(e){!function(t){let n;t.flattenDiagnosticMessageText=function(e,t){if("string"==typeof e)return e;{let n=e,o="",r=0;for(;n;){if(r){o+=t;for(let e=0;e<r;e++)o+="  "}o+=n.messageText,r++,n=n.next}return o}},function(e){e[e.ES3=0]="ES3",e[e.ES5=1]="ES5",e[e.ES6=2]="ES6",e[e.ES2015=2]="ES2015",e[e.Latest=2]="Latest"}(n=t.ScriptTarget||(t.ScriptTarget={})),t.isIdentifierStart=function(e,t){return e>=65&&e<=90||e>=97&&e<=122||36===e||95===e||e>127&&a(e,t)},t.isIdentifierPart=function(e,t){return e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||36===e||95===e||e>127&&function(e,t){return t>=n.ES5?l(e,r):l(e,s)}(e,t)},t.reservedWords=["abstract","any","as","break","case","catch","class","continue","const","constructor","debugger","declare","default","delete","do","else","enum","export","extends","false","finally","for","from","function","get","if","implements","import","in","instanceof","interface","is","let","module","namespace","new","null","package","private","protected","public","require","global","return","set","static","super","switch","symbol","this","throw","true","try","type","typeof","var","void","while","with","yield","async","await","of","Math"],t.keywordTypes=["boolean","number","string"],t.escapeIdentifier=function(n){if(!n)return"_";let o=n.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_$]/g,(t=>e.pxtc.isIdentifierPart(t.charCodeAt(0),e.pxtc.ScriptTarget.ES5)?t:""));return o&&e.pxtc.isIdentifierStart(o.charCodeAt(0),e.pxtc.ScriptTarget.ES5)&&-1===t.reservedWords.indexOf(o)||(o="_"+o),o};const o=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,880,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1162,1319,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1568,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1957,1969,1969,1994,2026,2036,2037,2042,2042,2048,2069,2074,2074,2084,2084,2088,2088,2112,2136,2208,2208,2210,2220,2308,2361,2365,2365,2384,2384,2392,2401,2417,2423,2425,2431,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3024,3024,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3133,3160,3161,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3294,3294,3296,3297,3313,3314,3333,3340,3342,3344,3346,3386,3389,3389,3406,3406,3424,3425,3450,3455,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3807,3840,3840,3904,3911,3913,3948,3976,3980,4096,4138,4159,4159,4176,4181,4186,4189,4193,4193,4197,4198,4206,4208,4213,4225,4238,4238,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5905,5920,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6263,6272,6312,6314,6314,6320,6389,6400,6428,6480,6509,6512,6516,6528,6571,6593,6599,6656,6678,6688,6740,6823,6823,6917,6963,6981,6987,7043,7072,7086,7087,7098,7141,7168,7203,7245,7247,7258,7293,7401,7404,7406,7409,7413,7414,7424,7615,7680,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8348,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11502,11506,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11823,11823,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42527,42538,42539,42560,42606,42623,42647,42656,42735,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43009,43011,43013,43015,43018,43020,43042,43072,43123,43138,43187,43250,43255,43259,43259,43274,43301,43312,43334,43360,43388,43396,43442,43471,43471,43520,43560,43584,43586,43588,43595,43616,43638,43642,43642,43648,43695,43697,43697,43701,43702,43705,43709,43712,43712,43714,43714,43739,43741,43744,43754,43762,43764,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44002,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],r=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,768,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1155,1159,1162,1319,1329,1366,1369,1369,1377,1415,1425,1469,1471,1471,1473,1474,1476,1477,1479,1479,1488,1514,1520,1522,1552,1562,1568,1641,1646,1747,1749,1756,1759,1768,1770,1788,1791,1791,1808,1866,1869,1969,1984,2037,2042,2042,2048,2093,2112,2139,2208,2208,2210,2220,2276,2302,2304,2403,2406,2415,2417,2423,2425,2431,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2500,2503,2504,2507,2510,2519,2519,2524,2525,2527,2531,2534,2545,2561,2563,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2641,2641,2649,2652,2654,2654,2662,2677,2689,2691,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2787,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2876,2884,2887,2888,2891,2893,2902,2903,2908,2909,2911,2915,2918,2927,2929,2929,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3006,3010,3014,3016,3018,3021,3024,3024,3031,3031,3046,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3140,3142,3144,3146,3149,3157,3158,3160,3161,3168,3171,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3260,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3299,3302,3311,3313,3314,3330,3331,3333,3340,3342,3344,3346,3386,3389,3396,3398,3400,3402,3406,3415,3415,3424,3427,3430,3439,3450,3455,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3807,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3948,3953,3972,3974,3991,3993,4028,4038,4038,4096,4169,4176,4253,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4957,4959,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5908,5920,5940,5952,5971,5984,5996,5998,6e3,6002,6003,6016,6099,6103,6103,6108,6109,6112,6121,6155,6157,6160,6169,6176,6263,6272,6314,6320,6389,6400,6428,6432,6443,6448,6459,6470,6509,6512,6516,6528,6571,6576,6601,6608,6617,6656,6683,6688,6750,6752,6780,6783,6793,6800,6809,6823,6823,6912,6987,6992,7001,7019,7027,7040,7155,7168,7223,7232,7241,7245,7293,7376,7378,7380,7414,7424,7654,7676,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8204,8205,8255,8256,8276,8276,8305,8305,8319,8319,8336,8348,8400,8412,8417,8417,8421,8432,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11647,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11744,11775,11823,11823,12293,12295,12321,12335,12337,12341,12344,12348,12353,12438,12441,12442,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42539,42560,42607,42612,42621,42623,42647,42655,42737,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43047,43072,43123,43136,43204,43216,43225,43232,43255,43259,43259,43264,43309,43312,43347,43360,43388,43392,43456,43471,43481,43520,43574,43584,43597,43600,43609,43616,43638,43642,43643,43648,43714,43739,43741,43744,43759,43762,43766,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44010,44012,44013,44016,44025,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65024,65039,65056,65062,65075,65076,65101,65103,65136,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],i=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1569,1594,1600,1610,1649,1747,1749,1749,1765,1766,1786,1788,1808,1808,1810,1836,1920,1957,2309,2361,2365,2365,2384,2384,2392,2401,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2784,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2877,2877,2908,2909,2911,2913,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3294,3294,3296,3297,3333,3340,3342,3344,3346,3368,3370,3385,3424,3425,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3805,3840,3840,3904,3911,3913,3946,3976,3979,4096,4129,4131,4135,4137,4138,4176,4181,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6067,6176,6263,6272,6312,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8319,8319,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12329,12337,12341,12344,12346,12353,12436,12445,12446,12449,12538,12540,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65138,65140,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],s=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,768,846,864,866,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1155,1158,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1425,1441,1443,1465,1467,1469,1471,1471,1473,1474,1476,1476,1488,1514,1520,1522,1569,1594,1600,1621,1632,1641,1648,1747,1749,1756,1759,1768,1770,1773,1776,1788,1808,1836,1840,1866,1920,1968,2305,2307,2309,2361,2364,2381,2384,2388,2392,2403,2406,2415,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2492,2494,2500,2503,2504,2507,2509,2519,2519,2524,2525,2527,2531,2534,2545,2562,2562,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2649,2652,2654,2654,2662,2676,2689,2691,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2784,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2876,2883,2887,2888,2891,2893,2902,2903,2908,2909,2911,2913,2918,2927,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3006,3010,3014,3016,3018,3021,3031,3031,3047,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3134,3140,3142,3144,3146,3149,3157,3158,3168,3169,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3262,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3297,3302,3311,3330,3331,3333,3340,3342,3344,3346,3368,3370,3385,3390,3395,3398,3400,3402,3405,3415,3415,3424,3425,3430,3439,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3805,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3946,3953,3972,3974,3979,3984,3991,3993,4028,4038,4038,4096,4129,4131,4135,4137,4138,4140,4146,4150,4153,4160,4169,4176,4185,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,4969,4977,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6099,6112,6121,6160,6169,6176,6263,6272,6313,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8255,8256,8319,8319,8400,8412,8417,8417,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12335,12337,12341,12344,12346,12353,12436,12441,12442,12445,12446,12449,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65056,65059,65075,65076,65101,65103,65136,65138,65140,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65381,65470,65474,65479,65482,65487,65490,65495,65498,65500];function a(e,t){return t>=n.ES5?l(e,o):l(e,i)}function l(e,t){if(e<t[0])return!1;let n,o=0,r=t.length;for(;o+1<r;){if(n=o+(r-o)/2,n-=n%2,t[n]<=e&&e<=t[n+1])return!0;e<t[n]?r=n:o=n+2}return!1}let c;t.isUnicodeIdentifierStart=a,function(e){e[e.Warning=0]="Warning",e[e.Error=1]="Error",e[e.Message=2]="Message"}(c=t.DiagnosticCategory||(t.DiagnosticCategory={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){function n(){return!!navigator&&!!navigator.bluetooth&&"TextDecoder"in window&&e.appTarget.appTheme.bluetoothUartConsole&&e.appTarget.appTheme.bluetoothUartFilters&&e.appTarget.appTheme.bluetoothUartFilters.length>0}function o(){return!!navigator&&!!navigator.bluetooth&&!!e.appTarget.appTheme.bluetoothPartialFlashing}t.isAvailable=function(){return n()||o()},t.hasConsole=n,t.hasPartialFlash=o,t.isValidUUID=function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(e)};class r{constructor(e,t){this.connectionTimeout=2e4,this.connectPromise=void 0,this.id=e,this.aliveToken=t}debug(t){e.debug(`${this.id}: ${t}`)}alivePromise(e){return new Promise(((t,n)=>{this.aliveToken.isCancelled()&&n(new Error),e.then((e=>t(e)),(e=>n(e)))}))}cancelConnect(){this.connectPromise=void 0}createConnectPromise(){return Promise.resolve()}connectAsync(){return this.connectPromise||(this.connectPromise=this.alivePromise(this.createConnectPromise())),e.Util.promiseTimeout(this.connectionTimeout,this.connectPromise,"connection timeout").then((()=>this.aliveToken.throwIfCancelled())).catch((e=>{throw this.connectPromise=void 0,e}))}disconnect(){this.cancelConnect()}kill(){this.disconnect(),this.aliveToken.cancel()}}t.BLERemote=r;class i extends r{constructor(e,t,n){super(e,t.aliveToken),this.device=t,this.autoReconnect=n,this.autoReconnectDelay=1e3,this.disconnectOnAutoReconnect=!1,this.reconnectPromise=void 0,this.failedConnectionServicesVersion=-1,this.handleDisconnected=this.handleDisconnected.bind(this),this.device.device.addEventListener("gattserverdisconnected",this.handleDisconnected)}handleDisconnected(t){this.aliveToken.isCancelled()||(this.disconnect(),this.autoReconnect&&!this.reconnectPromise&&(this.reconnectPromise=e.U.delay(this.autoReconnectDelay).then((()=>this.exponentialBackoffConnectAsync(8,500))).finally((()=>this.reconnectPromise=void 0))))}exponentialBackoffConnectAsync(t,n){return this.debug("retry connect"),this.aliveToken.throwIfCancelled(),this.connectAsync().then((()=>{this.aliveToken.throwIfCancelled(),this.debug("reconnect success"),this.reconnectPromise=void 0})).catch((o=>(this.debug(`reconnect error ${o.message}`),this.aliveToken.throwIfCancelled(),this.device.isPaired?this.autoReconnect?0==t?(this.debug("give up, max tries"),void(this.reconnectPromise=void 0)):this.failedConnectionServicesVersion==this.device.servicesVersion?(this.debug("services haven't changed, giving up"),void(this.reconnectPromise=void 0)):(this.debug(`retry connect ${n}ms... (${t} tries left)`),this.device.connected&&(this.failedConnectionServicesVersion=this.device.servicesVersion),this.disconnectOnAutoReconnect&&this.device.disconnect(),e.U.delay(n).then((()=>this.exponentialBackoffConnectAsync(--t,1.8*n)))):(this.debug("autoreconnect disabled"),void(this.reconnectPromise=void 0)):(this.debug("give up, device unpaired"),void(this.reconnectPromise=void 0)))))}}t.BLEService=i;class s extends i{constructor(e,t,n,o){super(e,t,!0),this.device=t,this.serviceUUID=n,this.txCharacteristicUUID=o,this.handleValueChanged=this.handleValueChanged.bind(this)}createConnectPromise(){return this.debug("connecting"),this.device.connectAsync().then((()=>this.alivePromise(this.device.gatt.getPrimaryService(this.serviceUUID)))).then((e=>(this.debug("service connected"),this.service=e,this.alivePromise(this.service.getCharacteristic(this.txCharacteristicUUID))))).then((e=>(this.debug("tx characteristic connected"),this.txCharacteristic=e,this.txCharacteristic.addEventListener("characteristicvaluechanged",this.handleValueChanged),this.txCharacteristic.startNotifications()))).then((()=>{e.tickEvent("webble.connected",{id:this.id})}))}handlePacket(e){}handleValueChanged(e){const t=e.target.value;this.handlePacket(t)}disconnect(){if(super.disconnect(),this.txCharacteristic&&this.device&&this.device.connected)try{this.txCharacteristic.stopNotifications(),this.txCharacteristic.removeEventListener("characteristicvaluechanged",this.handleValueChanged)}catch(t){e.log(`${this.id}: error ${t.message}`)}this.service=void 0,this.txCharacteristic=void 0}}t.BLETXService=s;class a extends s{constructor(e){super("hf2",e,a.SERVICE_UUID,a.CHARACTERISTIC_TX_UUID),this.device=e}handlePacket(e){const t=e.getUint8(0);switch(192&t){case a.BLEHF2_FLAG_SERIAL_OUT:case a.BLEHF2_FLAG_SERIAL_ERR:const n=Math.min(e.byteLength-1,-193&t);let o="";for(let t=0;t<n;++t)o+=String.fromCharCode(e.getUint8(t+1));o&&window.postMessage({type:"serial",id:this.device.name||"hf2",data:o},"*")}}}a.SERVICE_UUID="b112f5e6-2679-30da-a26e-0273b6043849",a.CHARACTERISTIC_TX_UUID="b112f5e6-2679-30da-a26e-0273b604384a",a.BLEHF2_FLAG_SERIAL_OUT=128,a.BLEHF2_FLAG_SERIAL_ERR=192,t.HF2Service=a;class l extends s{constructor(e){super("uart",e,l.SERVICE_UUID,l.CHARACTERISTIC_TX_UUID),this.device=e}handlePacket(e){const t=(new window.TextDecoder).decode(e);t&&window.postMessage({type:"serial",id:this.device.name||"uart",data:t},"*")}}let c;l.SERVICE_UUID="6e400001-b5a3-f393-e0a9-e50e24dcca9e",l.CHARACTERISTIC_TX_UUID="6e400002-b5a3-f393-e0a9-e50e24dcca9e",t.UARTService=l,function(e){e[e.Idle=1]="Idle",e[e.StatusRequested=2]="StatusRequested",e[e.PairingModeRequested=4]="PairingModeRequested",e[e.RegionDALRequested=8]="RegionDALRequested",e[e.RegionMakeCodeRequested=16]="RegionMakeCodeRequested",e[e.Flash=32]="Flash",e[e.EndOfTransmision=64]="EndOfTransmision",e[e.USBFlashRequired=128]="USBFlashRequired"}(c||(c={}));class u extends i{constructor(e){super("partial flashing",e,!1),this.device=e,this.state=c.Idle,this.disconnectOnAutoReconnect=!0,this.handleCharacteristic=this.handleCharacteristic.bind(this)}clearFlashData(){this.version=0,this.mode=0,this.regions=[],this.chunkDelay=u.CHUNK_MIN_DELAY,this.hex=void 0,this.bin=void 0,this.magicOffset=void 0,this.dalHash=void 0,this.makeCodeHash=void 0,this.flashReject=void 0,this.flashResolve=void 0,this.flashOffset=void 0}createConnectPromise(){return this.debug("connecting to partial flash service"),this.device.connectAsync().then((()=>this.alivePromise(this.device.gatt.getPrimaryService(u.SERVICE_UUID)))).then((e=>(this.debug("connecting to characteristic"),this.alivePromise(e.getCharacteristic(u.CHARACTERISTIC_UUID))))).then((e=>(this.debug("starting notifications"),this.pfCharacteristic=e,this.pfCharacteristic.startNotifications(),this.pfCharacteristic.addEventListener("characteristicvaluechanged",this.handleCharacteristic),this.state==c.PairingModeRequested?(this.debug("checking pairing mode"),this.autoReconnect=!1,this.pfCharacteristic.writeValue(new Uint8Array([u.STATUS]))):Promise.resolve())))}disconnect(){if(super.disconnect(),this.flashPacketToken&&this.flashPacketToken.cancel(),this.pfCharacteristic&&this.device.connected)try{this.pfCharacteristic.stopNotifications(),this.pfCharacteristic.removeEventListener("characteristicvaluechanged",this.handleCharacteristic)}catch(t){e.log(`ble: partial flash disconnect error ${t.message}`)}this.pfCharacteristic=void 0}findMarker(e,t){if(!this.bin)return-1;for(;e+t.length<this.bin.length;e+=16){let n=!0;for(let o=0;o<t.length;++o)if(t[o]!=this.bin[e+o]){n=!1;break}if(n)return e}return-1}flashAsync(e){return this.hex?(this.debug("flashing already in progress"),Promise.resolve()):(this.device.pauseLog(),this.createFlashPromise(e).finally((()=>this.device.resumeLogOnDisconnection())))}createFlashPromise(t){if(this.hex)return this.debug("flashing already in progress"),Promise.resolve();this.clearFlashData(),this.hex=t;const n=ts.pxtc.UF2.newBlockFile();ts.pxtc.UF2.writeHex(n,this.hex.split(/\r?\n/));const o=e.appTarget.compile.flashUsableEnd;this.bin=ts.pxtc.UF2.toBin(e.U.stringToUint8Array(ts.pxtc.UF2.serializeFile(n)),o).buf,this.debug(`bin bytes ${this.bin.length}`),this.magicOffset=this.findMarker(0,u.MAGIC_MARKER),this.debug(`magic block ${this.magicOffset.toString(16)}`),this.magicOffset<0&&(this.debug("magic block not found, not a valid HEX file"),e.U.userError(lf("Invalid file"))),this.debug("bytes to flash "+(this.bin.length-this.magicOffset));const r=this.magicOffset+u.MAGIC_MARKER.length;return this.dalHash=e.Util.toHex(this.bin.slice(r,r+8)),this.makeCodeHash=e.Util.toHex(this.bin.slice(r+8,r+16)),this.debug(`DAL hash ${this.dalHash}`),this.debug(`MakeCode hash ${this.makeCodeHash}`),this.connectAsync().then((()=>new Promise(((e,t)=>(this.flashResolve=e,this.flashReject=t,this.debug("check service version"),this.state=c.StatusRequested,this.pfCharacteristic.writeValue(new Uint8Array([u.STATUS]))))))).then((()=>{}),(t=>{e.log(`pf: error ${t.message}`),this.clearFlashData()}))}checkStateTransition(e,t){return!!(this.state&t)||(this.debug(`flash cmd ${e} in state ${this.state.toString(16)} `),this.flashReject(new Error),this.clearFlashData(),!1)}handleCharacteristic(t){this.aliveToken.isCancelled()&&(this.flashReject(new Error),this.clearFlashData());const n=event.target.value,o=new Uint8Array(n.buffer),r=o[0];if(this.state!=c.Idle)switch(r){case u.STATUS:if(!this.checkStateTransition(r,c.StatusRequested|c.PairingModeRequested))return;this.version=o[1],this.mode=o[2],this.debug(`flash service version ${this.version} mode ${this.mode}`),this.debug("reading DAL region"),this.state=c.RegionDALRequested,this.pfCharacteristic.writeValue(new Uint8Array([u.REGION_INFO,u.REGION_DAL])).then((()=>{}));break;case u.REGION_INFO:if(!this.checkStateTransition(r,c.RegionDALRequested|c.RegionMakeCodeRequested))return;const t=this.regions[o[1]]={start:o[2]<<24|o[3]<<16|o[4]<<8|o[5],end:o[6]<<24|o[7]<<16|o[8]<<8|o[9],hash:e.Util.toHex(o.slice(10))};if(this.debug(`read region ${o[1]} start ${t.start.toString(16)} end ${t.end.toString(16)} hash ${t.hash}`),o[1]==u.REGION_DAL){if(t.hash!=this.dalHash)return e.tickEvent("webble.flash.DALrequired"),this.debug("DAL hash does not match, partial flashing not possible"),this.state=c.USBFlashRequired,this.flashReject(new Error("USB flashing required")),void this.clearFlashData();this.debug("DAL hash match, reading makecode region"),this.state=c.RegionMakeCodeRequested,this.pfCharacteristic.writeValue(new Uint8Array([u.REGION_INFO,u.REGION_MAKECODE])).then((()=>{}))}else if(o[1]==u.REGION_MAKECODE)if(t.start!=this.magicOffset&&(this.debug("magic offset and MakeCode region.start not matching"),e.U.userError(lf("Invalid file"))),t.hash==this.makeCodeHash)e.tickEvent("webble.flash.noop"),this.debug("MakeCode hash matches, same code!"),this.debug("restart application mode"),this.pfCharacteristic.writeValue(new Uint8Array([u.RESET,u.MODE_APPLICATION])).then((()=>{this.state=c.Idle,this.flashResolve(),this.clearFlashData()}));else{if(this.mode!=u.MODE_PAIRING)return this.debug("application mode, reset into pairing mode"),this.state=c.PairingModeRequested,this.autoReconnect=!0,void this.pfCharacteristic.writeValue(new Uint8Array([u.RESET,u.MODE_PAIRING])).then((()=>{}));this.flashOffset=t.start,this.flashPacketNumber=0,this.debug(`starting to flash from address ${this.flashOffset.toString(16)}`),this.flashNextPacket()}break;case u.FLASH_DATA:if(!this.checkStateTransition(r,c.Flash))return;switch(o[1]){case u.PACKET_OUT_OF_ORDER:this.debug("packet out of order"),this.flashPacketToken.cancel(),this.flashPacketNumber+=4,this.chunkDelay=Math.min(this.chunkDelay+10,u.CHUNK_MAX_DELAY),this.flashNextPacket();break;case u.PACKET_WRITTEN:this.chunkDelay=Math.max(this.chunkDelay-1,u.CHUNK_MIN_DELAY),this.flashOffset+=64,this.flashPacketNumber+=4,this.flashOffset>=this.bin.length?(this.debug("end transmission"),this.state=c.EndOfTransmision,this.pfCharacteristic.writeValue(new Uint8Array([u.END_OF_TRANSMISSION])).finally((()=>{this.flashResolve&&this.flashResolve(),this.clearFlashData()}))):this.flashNextPacket()}break;default:this.debug(`unknown message ${e.Util.toHex(o)}`),this.disconnect()}}flashNextPacket(){this.state=c.Flash,this.flashPacketToken=new e.Util.CancellationToken,this.flashPacketToken.startOperation();const t=this.bin.slice(this.flashOffset,this.flashOffset+64);this.debug(`flashing ${this.flashOffset.toString(16)} / ${this.bin.length.toString(16)} ${(this.flashOffset-this.magicOffset)/(this.bin.length-this.magicOffset)*100>>0}%`);let n=new Uint8Array(20);e.U.delay(this.chunkDelay).then((()=>{this.flashPacketToken.throwIfCancelled(),n[0]=u.FLASH_DATA,n[1]=this.flashOffset>>8&255,n[2]=this.flashOffset>>0&255,n[3]=this.flashPacketNumber;for(let e=0;e<16;e++)n[4+e]=t[e];return this.pfCharacteristic.writeValue(n)})).then((()=>e.U.delay(this.chunkDelay))).then((()=>{this.flashPacketToken.throwIfCancelled(),n[0]=u.FLASH_DATA,n[1]=this.flashOffset>>24&255,n[2]=this.flashOffset>>16&255,n[3]=this.flashPacketNumber+1;for(let e=0;e<16;e++)n[4+e]=t[16+e]||0;return this.pfCharacteristic.writeValue(n)})).then((()=>e.U.delay(this.chunkDelay))).then((()=>{this.flashPacketToken.throwIfCancelled(),n[0]=u.FLASH_DATA,n[1]=0,n[2]=0,n[3]=this.flashPacketNumber+2;for(let e=0;e<16;e++)n[4+e]=t[32+e]||0;return this.pfCharacteristic.writeValue(n)})).then((()=>e.U.delay(this.chunkDelay))).then((()=>{this.flashPacketToken.throwIfCancelled(),n[0]=u.FLASH_DATA,n[1]=0,n[2]=0,n[3]=this.flashPacketNumber+3;for(let e=0;e<16;e++)n[4+e]=t[48+e]||0;return this.pfCharacteristic.writeValue(n)})).then((()=>{const t=this.flashOffset,o=()=>e.U.delay(500).then((()=>{if(t!=this.flashOffset||this.flashPacketToken.isCancelled()||this.aliveToken.isCancelled()||this.state!=c.Flash)return Promise.resolve();this.debug("packet transfer deadlock, force restart"),n[0]=u.FLASH_DATA,n[1]=0,n[2]=0,n[3]=-1;for(let e=0;e<16;e++)n[4+e]=0;return this.pfCharacteristic.writeValue(n).then((()=>o()))}));o().catch((e=>{this.flashReject&&(this.flashReject(new Error("failed packet transfer")),this.clearFlashData())}))})).catch((()=>{this.flashPacketToken.resolveCancel()}))}}u.SERVICE_UUID="e97dd91d-251d-470a-a062-fa1922dfa9a8",u.CHARACTERISTIC_UUID="e97d3b10-251d-470a-a062-fa1922dfa9a8",u.REGION_INFO=0,u.FLASH_DATA=1,u.PACKET_OUT_OF_ORDER=170,u.PACKET_WRITTEN=255,u.END_OF_TRANSMISSION=2,u.STATUS=238,u.RESET=255,u.MODE_PAIRING=0,u.MODE_APPLICATION=1,u.REGION_SOFTDEVICE=0,u.REGION_DAL=1,u.REGION_MAKECODE=2,u.MAGIC_MARKER=e.Util.fromHex("708E3B92C615A841C49866C975EE5197"),u.CHUNK_MIN_DELAY=0,u.CHUNK_MAX_DELAY=75,t.PartialFlashingService=u;class p extends r{constructor(t){super("ble",new e.Util.CancellationToken),this.device=void 0,this.services=[],this.pendingResumeLogOnDisconnection=!1,this.servicesVersion=0,this.device=t,this.handleDisconnected=this.handleDisconnected.bind(this),this.handleServiceAdded=this.handleServiceAdded.bind(this),this.handleServiceChanged=this.handleServiceChanged.bind(this),this.handleServiceRemoved=this.handleServiceRemoved.bind(this),this.device.addEventListener("gattserverdisconnected",this.handleDisconnected),this.device.addEventListener("serviceadded",this.handleServiceAdded),this.device.addEventListener("servicechanged",this.handleServiceChanged),this.device.addEventListener("serviceremoved",this.handleServiceRemoved),n()&&(this.services.push(this.uartService=new l(this)),this.services.push(this.hf2Service=new a(this))),o()&&this.services.push(this.partialFlashingService=new u(this)),this.aliveToken.startOperation()}startServices(){this.services.filter((e=>e.autoReconnect)).forEach((e=>e.connectAsync().catch((()=>{}))))}pauseLog(){this.uartService&&(this.uartService.autoReconnect=!1,this.uartService.disconnect()),this.hf2Service&&(this.hf2Service.autoReconnect=!1,this.hf2Service.disconnect())}resumeLogOnDisconnection(){this.pendingResumeLogOnDisconnection=!0}resumeLog(){this.uartService&&(this.uartService.autoReconnect=!0,this.uartService.connectAsync().catch((()=>{}))),this.hf2Service&&(this.hf2Service.autoReconnect=!0,this.hf2Service.connectAsync().catch((()=>{})))}get isPaired(){return this===t.bleDevice}get name(){return this.device.name||"?"}get connected(){return this.device&&this.device.gatt&&this.device.gatt.connected}get gatt(){return this.device.gatt}createConnectPromise(){return this.debug("connecting gatt server"),this.alivePromise(this.device.gatt.connect().then((()=>this.debug("gatt server connected"))))}handleServiceAdded(e){this.debug("service added"),this.servicesVersion++}handleServiceRemoved(e){this.debug("service removed"),this.servicesVersion++}handleServiceChanged(e){this.debug("service changed"),this.servicesVersion++}handleDisconnected(t){this.debug("disconnected"),this.disconnect(),this.pendingResumeLogOnDisconnection&&(this.pendingResumeLogOnDisconnection=!1,e.U.delay(500).then((()=>this.resumeLog())))}disconnect(){if(super.disconnect(),this.services.forEach((e=>e.disconnect())),this.connected){this.debug("disconnect");try{this.device.gatt&&this.device.gatt.connected&&this.device.gatt.disconnect()}catch(e){this.debug(`gatt disconnect error ${e.message}`)}}}}function d(){if(t.bleDevice)return Promise.resolve();e.log("ble: requesting device");const r=[];return n()&&(r.push(l.SERVICE_UUID),r.push(a.SERVICE_UUID)),o()&&r.push(u.SERVICE_UUID),navigator.bluetooth.requestDevice({filters:e.appTarget.appTheme.bluetoothUartFilters,optionalServices:r}).then((n=>(e.log(`ble: received device ${n.name}`),t.bleDevice=new p(n),t.bleDevice.startServices(),t.bleDevice.connectAsync())))}t.BLEDevice=p,t.bleDevice=void 0,t.isPaired=function(){return!!t.bleDevice},t.pairAsync=function(){return t.bleDevice&&(t.bleDevice.kill(),t.bleDevice=void 0),d().catch((n=>{t.bleDevice&&t.bleDevice.aliveToken&&t.bleDevice.aliveToken.resolveCancel(),e.log(`ble: error ${n.message}`)}))},t.flashAsync=function(n,o){e.tickEvent("webble.flash");const r=n.outfiles[ts.pxtc.BINARY_HEX];return d().then((()=>t.bleDevice.partialFlashingService.flashAsync(r))).then((()=>e.tickEvent("webble.flash.success"))).catch((t=>{throw e.tickEvent("webble.fail.fail",{message:t.message}),t}))}}(e.webBluetooth||(e.webBluetooth={}))}(pxt||(pxt={})),function(e){!function(t){class n extends Error{constructor(e){super(e),this.message=e}}t.USBError=n;t.filters=[{classCode:255,subclassCode:42}];let o,r,i=!0;t.setFilters=function(e){i=!1,t.filters=e};class s{constructor(){this.ready=!1,this.connecting=!1,this.readLoopStarted=!1,this.onDeviceConnectionChanged=e=>{},this.onConnectionChanged=()=>{},this.onData=e=>{},this.onError=e=>{},this.onEvent=e=>{},this.enabled=!1,this.handleUSBConnected=this.handleUSBConnected.bind(this),this.handleUSBDisconnected=this.handleUSBDisconnected.bind(this)}enable(){this.enabled||(this.enabled=!0,this.log("registering webusb events"),navigator.usb.addEventListener("disconnect",this.handleUSBDisconnected,!1),navigator.usb.addEventListener("connect",this.handleUSBConnected,!1))}disable(){this.enabled&&(this.enabled=!1,this.log("unregistering webusb events"),navigator.usb.removeEventListener("disconnect",this.handleUSBDisconnected),navigator.usb.removeEventListener("connect",this.handleUSBConnected))}disposeAsync(){return this.disable(),Promise.resolve()}handleUSBDisconnected(e){this.log("device disconnected"),e.device==this.dev&&(this.log("clear device"),this.clearDev(),this.onDeviceConnectionChanged&&this.onDeviceConnectionChanged(!1))}handleUSBConnected(e){const t=e.device;this.log(`device connected ${t.serialNumber}`),this.dev||this.connecting||(this.log("attach device"),this.onDeviceConnectionChanged&&this.onDeviceConnectionChanged(!0))}clearDev(){this.dev&&(this.dev=null,this.epIn=null,this.epOut=null,this.onConnectionChanged&&this.onConnectionChanged())}error(t){throw new n(e.U.lf("USB error on device {0} ({1})",this.dev.productName,t))}log(t){e.debug("webusb: "+t)}disconnectAsync(){return this.ready=!1,this.dev?(this.log("close device"),this.dev.close().catch((e=>{})).then((()=>(this.clearDev(),e.U.delay(500))))):Promise.resolve()}reconnectAsync(){return this.log("reconnect"),this.setConnecting(!0),this.disconnectAsync().then(a).then((e=>this.connectAsync(e))).finally((()=>this.setConnecting(!1)))}setConnecting(e){e!=this.connecting&&(this.connecting=e,this.onConnectionChanged&&this.onConnectionChanged())}isConnecting(){return this.connecting}isConnected(){return!!this.dev&&this.ready}async connectAsync(t){if(this.log(`trying to connect (${t.length} devices)`),0==t.length){const e=new Error("Device not found.");throw e.type="devicenotfound",e}this.setConnecting(!0);try{if(this.lastKnownDeviceSerialNumber){const n=t.find((e=>e.serialNumber===this.lastKnownDeviceSerialNumber));n?(this.log("last known device spotted"),t.splice(t.indexOf(n),1),t.unshift(n)):(this.log("delay for last known device"),await e.U.delay(2e3))}for(let e=0;e<t.length;++e){const n=t[e];this.dev=n,this.log(`connect device: ${n.manufacturerName} ${n.productName}`),this.log(`serial number: ${n.serialNumber} ${this.lastKnownDeviceSerialNumber===n.serialNumber?"(last known device)":""} `);try{return void await this.initAsync()}catch(e){this.dev=void 0,this.log(`connection failed, ${e.message}`)}}const n=new Error(e.U.lf("Device in use or not found."));throw n.type="devicelocked",n}finally{this.setConnecting(!1)}}sendPacketAsync(t){return this.dev?(e.Util.assert(t.length<=64),this.epOut?this.dev.transferOut(this.epOut.endpointNumber,t).then((e=>{"ok"!=e.status&&this.error("USB OUT transfer failed")})):this.dev.controlTransferOut({requestType:"class",recipient:"interface",request:9,value:512,index:this.iface.interfaceNumber},t).then((e=>{"ok"!=e.status&&this.error("USB CTRL OUT transfer failed")}))):Promise.reject(new Error("Disconnected"))}readLoop(){if(this.readLoopStarted)return;this.readLoopStarted=!0,this.log("start read loop");let t=()=>{this.ready?this.recvPacketAsync().then((n=>{n[0]?(this.onData(n),t()):e.U.delay(500).then(t)}),(n=>{this.dev&&this.onError(n),e.U.delay(300).then(t)})):e.U.delay(300).then(t)};t()}recvPacketAsync(){let e=e=>{"ok"!=e.status&&this.error("USB IN transfer failed");let t=new Uint8Array(e.data.buffer);return 0==t.length?this.recvPacketAsync():t};return this.dev?this.epIn?this.dev.transferIn(this.epIn.endpointNumber,64).then(e):this.dev.controlTransferIn({requestType:"class",recipient:"interface",request:1,value:256,index:this.iface.interfaceNumber},64).then(e):Promise.reject(new Error("Disconnected"))}initAsync(){if(!this.dev)return Promise.reject(new Error("Disconnected"));let n=this.dev;return this.log("open device"),n.open().then((()=>(this.log("select configuration"),n.selectConfiguration(1)))).then((()=>{this.log("got "+n.configurations[0].interfaces.length+" interfaces");const o=n.configurations[0].interfaces.filter((e=>{let n=e.alternates[0];for(let e of t.filters)if((null==e.classCode||n.interfaceClass===e.classCode)&&!(null!=e.subclassCode&&n.interfaceSubclass!==e.subclassCode||null!=e.protocolCode&&n.interfaceProtocol!==e.protocolCode)){if(0==n.endpoints.length)return!0;if(2==n.endpoints.length&&n.endpoints.every((e=>64==e.packetSize)))return!0}return!1}));let r=o[o.length-1];return this.log(`${o.length} matching interfaces; picking ${r?"#"+r.interfaceNumber:"n/a"}`),r||this.error("cannot find supported USB interface"),this.altIface=r.alternates[0],this.iface=r,this.altIface.endpoints.length?(this.log("using dedicated endpoints"),this.epIn=this.altIface.endpoints.filter((e=>"in"==e.direction))[0],this.epOut=this.altIface.endpoints.filter((e=>"out"==e.direction))[0],e.Util.assert(64==this.epIn.packetSize),e.Util.assert(64==this.epOut.packetSize)):this.log("using ctrl pipe"),this.log("claim interface"),n.claimInterface(r.interfaceNumber)})).then((()=>{this.log("device ready"),this.lastKnownDeviceSerialNumber=this.dev.serialNumber,this.ready=!0,i&&this.readLoop(),this.onConnectionChanged&&this.onConnectionChanged()}))}}async function a(){e.log("webusb: get devices");try{return await navigator.usb.getDevices()||[]}catch(t){return e.reportException(t),[]}}async function l(){var t,n;if(void 0!==r)return;if(e.debug("webusb: checking availability"),!(null===(n=null===(t=e.appTarget)||void 0===t?void 0:t.compile)||void 0===n?void 0:n.webUSB))return void(r=!1);if(e.BrowserUtils.isElectron()||e.BrowserUtils.isWinRT())return e.debug("webusb: off, electron or winrt"),e.tickEvent("webusb.off",{reason:"electronwinrt"}),void(r=!1);const o=navigator.usb;if(!o)return e.debug("webusb: off, not impl"),e.tickEvent("webusb.off",{reason:"notimpl"}),void(r=!1);let i=/Windows NT (\d+\.\d+)/.exec(navigator.userAgent);if(i&&parseFloat(i[1])<6.3)return e.debug("webusb: off, older windows version"),e.tickEvent("webusb.off",{reason:"oldwindows"}),void(r=!1);try{await o.getDevices()}catch(t){return e.debug("webusb: off, security exception"),e.tickEvent("webusb.off",{reason:"security"}),void(r=!1)}r=!0}function c(){return void 0===r&&(console.error("checkAvailableAsync not called"),l()),!!r}t.pairAsync=function(){return navigator.usb.requestDevice({filters:t.filters}).then((e=>!!e)).catch((e=>{if("NotFoundError"!=e.name)throw e}))},t.mkWebUSBHIDPacketIOAsync=function(){return e.debug("packetio: mk webusb io"),o||(o=new s),o.enable(),Promise.resolve(o)},t.isEnabled=!1,t.setEnabled=function(e){c()||(e=!1),t.isEnabled=e},t.checkAvailableAsync=l,t.isAvailable=c}(e.usb||(e.usb={}))}(pxt||(pxt={})),function(e){!function(t){var n=e.Util;let o={};function r(e){let t={},o=0,r=new n.PromiseQueue,i=new Promise(((e,n)=>{t.ready=e}));r.enqueue("main",(()=>i));return{opAsync:function(n,i){return r.enqueue("main",(()=>new Promise(((r,s)=>{let a=""+o++;t[a]=e=>{e?e.errorMessage?s(new Error(e.errorMessage)):r(e):s(new Error("no response"))},e({id:a,op:n,arg:i})}))))},recvHandler:e=>{if(t.hasOwnProperty(e.id)){let n=t[e.id];delete t[e.id],n(e.result)}}}}function i(t){let n=new Worker(t),o=r((e=>n.postMessage(e)));return n.onmessage=t=>{e.perf.measureStart("webworker recvHandler"),o.recvHandler(t.data),e.perf.measureEnd("webworker recvHandler")},o}t.getWorker=function(e){let t=o[e];return t||(t=o[e]=i(e)),t},t.wrap=r,t.makeWebWorker=i,t.makeWebSocket=function(t,n=null){let o=new WebSocket(t),i=[],s=r((e=>{let t=JSON.stringify(e);i?i.push(t):o.send(t)}));return o.onmessage=e=>{let t=JSON.parse(e.data);n&&null==t.id?n(t):s.recvHandler(t)},o.onopen=t=>{e.debug("socket opened");for(let e of i)o.send(e);i=null},o.onclose=t=>{e.debug("socket closed")},o.onerror=t=>{e.debug("socket errored")},s}}(e.worker||(e.worker={}))}(pxt||(pxt={})),function(e){!function(t){function n(){t.apiKey||e.U.userError("YouTube API key missing")}function o(e){if(!e)return"";const t=e.medium||e.high||e.standard||e.default;return(null==t?void 0:t.url)||""}t.apiKey=void 0,t.playlistItemToCodeCard=function(e){return{name:e.snippet.title.replace(/[^-]*-/,"").trim(),description:(t=e.snippet.description,t.split(/\n\s+/,1)[0].trim()),youTubeId:e.snippet.resourceId.videoId,youTubePlaylistId:e.snippet.playlistId,imageUrl:o(e.snippet.thumbnails)};var t},t.playlistInfoAsync=function(o){n();const r=`https://www.googleapis.com/youtube/v3/playlists?part=snippet&id=${o}&key=${t.apiKey}`;return e.Util.httpGetJsonAsync(r).then((e=>e.items[0]))},t.listPlaylistVideosAsync=async function(o){n();let r,i=[];do{let n=`https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&maxResults=50&playlistId=${o}&key=${t.apiKey}`;r&&(n+=`&pageToken=${r}`);const s=await e.Util.httpGetJsonAsync(n);i=i.concat(s.items),r=s.nextPageToken}while(r);return e.options.debug&&e.debug(JSON.stringify(i,null,2)),i},t.watchUrl=function(e,t){let n;return e?(n=`https://www.youtube.com/watch?v=${e}`,t&&(n+=`&list=${t}`)):t&&(n=`https://www.youtube.com/playlist?list=${t}`),n}}(e.youtube||(e.youtube={}))}(pxt||(pxt={})),function(e){!function(e){!function(t){function n(e,...t){return e.replace(/{(\d+)}/g,((e,n)=>t[+n]))}t.debug=!1,t.lf=n;let o=l("opcode name doesn't match","<name>");class r{constructor(t,n,o,r,i){this.opcode=o,this.mask=r,this.is32bit=i,this.canBeShared=!1,e.assert((o&r)==o),this.ei=t,this.code=n.replace(/\s+/g," "),this.friendlyFmt=n.replace(/\$\w+/g,(e=>this.ei.encoders[e]?this.ei.encoders[e].pretty:e));let s=a(n);this.name=s[0],this.args=s.slice(1)}emit(t){let n=t.words;if(n[0]!=this.name)return o;let r=this.opcode,i=1,s=0,a=[],c=null,u=null,p=null;for(let o=0;o<this.args.length;++o){let d=this.args[o],g=n[i++];if("$"==d[0]){let o=this.ei.encoders[d],h=null;if(o.isRegister){if(h=this.ei.registerNo(g),null==h)return l("expecting register name",g);this.ei.isPush(this.opcode)?s++:this.ei.isPop(this.opcode)&&s--}else if(o.isImmediate){if(g=g.replace(/^#/,""),h=t.bin.parseOneInt(g),null==h)return l("expecting number",g);this.ei.isAddSP(this.opcode)?s=-h/this.ei.wordSize():this.ei.isSubSP(this.opcode)&&(s=h/this.ei.wordSize())}else if(o.isRegList){if("{"!=g)return l("expecting {",g);for(h=0;"}"!=n[i];){if(g=n[i++],!g)return l("expecting }",n[i-2]);let e=this.ei.registerNo(g);if(null==e)return l("expecting register name",g);if(h&1<<e)return l("duplicate register name",g);h|=1<<e,this.ei.isPush(this.opcode)?s++:this.ei.isPop(this.opcode)&&s--,","==n[i]&&i++}g=n[i++]}else if(o.isLabel){if(g=g.replace(/^#/,""),/^[+-]?\d+$/.test(g))h=parseInt(g,10),c="rel"+h;else if(/^0x[0-9a-fA-F]+$/.test(g))h=parseInt(g,16),c="abs"+h;else if(c=g,h=this.ei.getAddressFromLabel(t.bin,this,g,o.isWordAligned),null==h){if(t.bin.finalEmit)return l("unknown label",g);h=8}if(this.ei.is32bit(this)){u=h,p=g;continue}}else e.oops();if(null==h)return l("didn't understand it",g);if(a.push(h),h=o.encode(h),null==h)return l("argument out of range or mis-aligned",g);e.assert(0==(r&h)),r|=h}else if(d!=g)return l("expecting "+d,g)}return n[i]?l("trailing tokens",n[i]):this.ei.is32bit(this)?this.ei.emit32(r,u,t.bin.normalizeExternalLabel(p)):{stack:s,opcode:r,numArgs:a,labelName:t.bin.normalizeExternalLabel(c)}}toString(){return this.friendlyFmt}}t.Instruction=r;class i{constructor(e,t){this.bin=e,this.text=t}getOpExt(){return this.instruction?this.instruction.code:""}getOp(){return this.instruction?this.instruction.name:""}update(e){this.bin.peepOps++,(e=e.replace(/^\s*/,""))||this.bin.peepDel++,e&&(e+="      "),e="    "+e,this.text=e+"; WAS: "+this.text.trim(),this.instruction=null,this.numArgs=null,this.words=a(e)||[],0==this.words.length?this.type="empty":"@"==this.words[0][0]&&(this.type="directive")}}t.Line=i;class s{constructor(e){this.baseOffset=0,this.checkStack=!0,this.inlineMode=!1,this.normalizeExternalLabel=e=>e,this.currLineNo=0,this.scope="",this.scopeId=0,this.errors=[],this.labels={},this.equs={},this.stackpointers={},this.stack=0,this.commPtr=0,this.peepOps=0,this.peepDel=0,this.peepCounts={},this.stats="",this.throwOnError=!1,this.disablePeepHole=!1,this.stackAtLabel={},this.currLine=new i(this,"<start>"),this.currLine.lineNo=0,this.ei=e,this.ei.file=this}emitShort(t){e.assert(0<=t&&t<=65535),this.buf.push(t)}emitOpCode(e){this.emitShort(e)}location(){return 2*this.buf.length}pc(){return this.location()+this.baseOffset}parseOneInt(t){if(!t)return null;if(/^\d+$/.test(t))return parseInt(t,10);const o=t.indexOf("-");if(o>0)return this.parseOneInt(t.slice(0,o))-this.parseOneInt(t.slice(o+1));let r=1;if(t.indexOf("*")>=0){let e=null;for(;null!=(e=/^([^\*]*)\*(.*)$/.exec(t));){let n=this.parseOneInt(e[1]);if(null==n)return null;r*=n,t=e[2]}}if("-"==t[0]?(r*=-1,t=t.slice(1)):"+"==t[0]&&(t=t.slice(1)),/^\d+$/.test(t))return r*parseInt(t,10);if(e.U.endsWith(t,"|1"))return 1|this.parseOneInt(t.slice(0,t.length-2));if(e.U.endsWith(t,"-1"))return this.parseOneInt(t.slice(0,t.length-2))-1;if(e.U.endsWith(t,"+1"))return this.parseOneInt(t.slice(0,t.length-2))+1;let i=/(.*)>>(\d+)$/.exec(t);if(i){let e=this.parseOneInt(i[1]);return e&=~(-16777216&this.baseOffset),e>>parseInt(i[2])}let s=null;if("0"==t[0])if("x"==t[1]||"X"==t[1]){let e=/^0x([a-f0-9]+)$/i.exec(t);e&&(s=parseInt(e[1],16))}else if("b"==t[1]||"B"==t[1]){let e=/^0b([01]+)$/i.exec(t);e&&(s=parseInt(e[1],2))}if(t.indexOf("@")>=0){let o=/^(\w+)@(-?\d+)$/.exec(t);o&&(1!=r&&this.directiveError(n("multiplication not supported with saved stacks")),this.stackpointers.hasOwnProperty(o[1])?s=this.ei.wordSize()*this.ei.computeStackOffset(o[1],this.stack-this.stackpointers[o[1]]+parseInt(o[2])):this.directiveError(n("saved stack not found"))),o=/^(.*)@(hi|lo|fn)$/.exec(t),o&&this.looksLikeLabel(o[1])&&(s=this.lookupLabel(o[1],!0),null!=s&&("fn"==o[2]?s=this.ei.toFnPtr(s,this.baseOffset,o[1]):(s>>=1,0<=s&&s<=65535?"hi"==o[2]?s=s>>8&255:"lo"==o[2]?s&=255:e.oops():(this.directiveError(n("@hi/lo out of range")),s=null))))}return null==s&&this.looksLikeLabel(t)&&(s=this.lookupLabel(t,!0),null!=s&&1==this.ei.postProcessRelAddress(this,1)&&(s+=this.baseOffset)),null==s||isNaN(s)?null:s*r}looksLikeLabel(e){return!/^(r\d|pc|sp|lr)$/i.test(e)&&/^[\.a-zA-Z_][\.:\w+]*$/.test(e)}scopedName(e){return"."==e[0]&&this.scope?this.scope+"$"+e:e}lookupLabel(e,t=!1){let o=null,r=this.scopedName(e);return this.labels.hasOwnProperty(r)?(o=this.labels[r],o=this.ei.postProcessRelAddress(this,o)):this.lookupExternalLabel&&(o=this.lookupExternalLabel(e),null!=o&&(o=this.ei.postProcessAbsAddress(this,o))),null==o&&this.equs.hasOwnProperty(r)&&(o=this.equs[r]),null==o&&t&&(this.finalEmit?this.directiveError(n("unknown label: {0}",e)):o=11111),o}align(t){for(e.assert(2==t||4==t||8==t||16==t);this.location()%t!=0;)this.emitOpCode(0)}pushError(e,t=""){let o={scope:this.scope,message:n("  -> Line {2} ('{1}'), error: {0}\n{3}",e,this.currLine.text,this.currLine.lineNo,t),lineNo:this.currLine.lineNo,line:this.currLine.text,coremsg:e,hints:t};if(this.errors.push(o),this.throwOnError)throw new Error(o.message)}directiveError(e){this.pushError(e)}emitString(e,t=!1){function o(e,t){return 255&(e.charCodeAt(t)||0)}let r,i=/^\s*([\w\.]+\s*:\s*)?.\w+\s+(".*")\s*$/.exec(e);if(i&&null!=(r=function(e){e=e.replace(/\\\\/g,"\\B").replace(/\\(['\?])/g,((e,t)=>t)).replace(/\\[z0]/g,"\0").replace(/\\x([0-9a-f][0-9a-f])/gi,((e,t)=>"\\u00"+t)).replace(/\\B/g,"\\\\");try{return JSON.parse(e)}catch(e){return null}}(i[2])))if(this.align(2),t)for(let e=0;e<r.length;e++)this.emitShort(r.charCodeAt(e));else for(let e=0;e<r.length+1;e+=2)this.emitShort(o(r,e+1)<<8|o(r,e));else this.directiveError(n("expecting string"))}parseNumber(e){let t=this.parseOneInt(e.shift());return null==t?null:t}parseNumbers(e){e=e.slice(1);let t=[];for(;;){let o=this.parseNumber(e);if(null==o){this.directiveError(n("cannot parse number at '{0}'",e[0]));break}if(t.push(o),","!=e[0]){if(null==e[0])break;this.directiveError(n("expecting number, got '{0}'",e[0]));break}if(e.shift(),null==e[0])break}return t}emitSpace(e){let t=this.parseNumbers(e);if(1==t.length&&t.push(0),2!=t.length)this.directiveError(n("expecting one or two numbers"));else if(t[0]%2!=0)this.directiveError(n("only even space supported"));else{let e=255&t[1];e|=e<<8;for(let n=0;n<t[0];n+=2)this.emitShort(e)}}emitBytes(e){let t=this.parseNumbers(e);t.length%2!=0&&(this.directiveError(".bytes needs an even number of arguments"),t.push(0));for(let e=0;e<t.length;e+=2){let o=t[e],r=t[e+1];0<=o&&r<=255&&0<=r&&o<=255?this.emitShort(255&o|(255&r)<<8):this.directiveError(n("expecting uint8"))}}emitHex(e){e.slice(1).forEach((e=>{if(","!=e)if(e.length%4!=0)this.directiveError(".hex needs an even number of bytes");else if(/^[a-f0-9]+$/i.test(e))for(let t=0;t<e.length;t+=4){let n=parseInt(e.slice(t,t+4),16);n=(255&n)<<8|n>>8&255,this.emitShort(n)}else this.directiveError(".hex needs a hex number")}))}handleDirective(e){let t,o=e.words,r=()=>{2!=o.length&&this.directiveError(n("expecting one argument"))};switch(o[0]){case".ascii":case".asciz":case".string":this.emitString(e.text);break;case".utf16":this.emitString(e.text,!0);break;case".align":if(r(),t=this.parseOneInt(o[1]),null!=t){if(0==t)return;t<=4?this.align(1<<t):this.directiveError(n("expecting 1, 2, 3 or 4 (for 2, 4, 8, or 16 byte alignment)"))}else this.directiveError(n("expecting number"));break;case".balign":if(r(),t=this.parseOneInt(o[1]),null!=t){if(1==t)return;2==t||4==t||8==t||16==t?this.align(t):this.directiveError(n("expecting 2, 4, 8, or 16"))}else this.directiveError(n("expecting number"));break;case".p2align":r(),t=this.parseOneInt(o[1]),null!=t?this.align(1<<t):this.directiveError(n("expecting number"));break;case".byte":this.emitBytes(o);break;case".hex":this.emitHex(o);break;case".hword":case".short":case".2bytes":this.parseNumbers(o).forEach((e=>{-32768<=e&&e<=65535?this.emitShort(65535&e):this.directiveError(n("expecting int16"))}));break;case".word":case".4bytes":case".long":this.parseNumbers(o).forEach((e=>{-2147483648<=e&&e<=4294967295?(this.emitShort(65535&e),this.emitShort(e>>16&65535)):this.directiveError(n("expecting int32"))}));break;case".skip":case".space":this.emitSpace(o);break;case".set":case".equ":/^\w+$/.test(o[1])||this.directiveError(n("expecting name"));const i=this.parseNumbers(o.slice(","==o[2]||"="==o[2]?2:1));1!=i.length&&this.directiveError(n("expecting one value")),void 0!==this.equs[o[1]]&&this.equs[o[1]]!=i[0]&&this.directiveError(n("redefinition of {0}",o[1])),this.equs[o[1]]=i[0];break;case".startaddr":this.location()&&this.directiveError(n(".startaddr can be only be specified at the beginning of the file")),r(),this.baseOffset=this.parseOneInt(o[1]);break;case"@stackmark":r(),this.stackpointers[o[1]]=this.stack;break;case"@stackempty":this.checkStack&&(null==this.stackpointers[o[1]]?this.directiveError(n("no such saved stack")):this.stackpointers[o[1]]!=this.stack&&this.directiveError(n("stack mismatch")));break;case"@scope":this.scope=o[1]||"",this.currLineNo=this.scope?0:this.realCurrLineNo;break;case".syntax":case"@nostackcheck":this.checkStack=!1;break;case"@dummystack":r(),this.stack+=this.parseOneInt(o[1]);break;case".section":case".global":this.stackpointers={},this.stack=0,this.scope="$S"+this.scopeId++;break;case".comm":{o=o.filter((e=>","!=e)),o.shift();let e=this.parseOneInt(o[1]),t=0;if(t=o[2]?this.parseOneInt(o[2]):4,null==this.lookupLabel(o[0])){for(this.commPtr||(this.commPtr=this.lookupExternalLabel("_pxt_comm_base")||0,this.commPtr||this.directiveError(n("PXT_COMM_BASE not defined")));this.commPtr&t-1;)this.commPtr++;this.labels[this.scopedName(o[0])]=this.commPtr-this.baseOffset,this.commPtr+=e}break}case".file":case".text":case".cpu":case".fpu":case".eabi_attribute":case".code":case".thumb_func":case".type":case".fnstart":case".save":case".size":case".fnend":case".pad":case".globl":case".local":case"@":break;default:/^\.cfi_/.test(o[0])||this.directiveError(n("unknown directive"))}}handleOneInstruction(e,t){let o=t.emit(e);return!o.error&&(this.stack+=o.stack,this.checkStack&&this.stack<0&&this.pushError(n("stack underflow")),e.location=this.location(),e.opcode=o.opcode,e.stack=o.stack,this.emitOpCode(o.opcode),null!=o.opcode2&&this.emitOpCode(o.opcode2),null!=o.opcode3&&this.emitOpCode(o.opcode3),e.instruction=t,e.numArgs=o.numArgs,!0)}handleInstruction(e){if(e.instruction&&this.handleOneInstruction(e,e.instruction))return;let t=e=>this.ei.instructions.hasOwnProperty(e)?this.ei.instructions[e]:[];if(!e.instruction){let n=t(e.words[0]);for(let t=0;t<n.length;++t)if(this.handleOneInstruction(e,n[t]))return}let o=e.words[0].toLowerCase().replace(/s$/,"").replace(/[^a-z]/g,""),r="",i=t(o).concat(t(o+"s"));i.length>0&&i.forEach((t=>{let o=t.emit(e);r+=n("   Maybe: {0} ({1} at '{2}')\n",t.toString(),o.error,o.errorAt)})),this.pushError(n("assembly error"),r)}buildLine(e,t){let n=e=>{let n=new i(this,e);return n.scope=this.scope,n.lineNo=this.currLineNo,t.push(n),n},o=n(e),r=a(o.text)||[];o.words=r;let s=r[0]||"";if(":"==s.charAt(s.length-1)){let t=/^([\.\w]+):$/.exec(r[0]);if(t){if(o.type="label",o.text=t[1]+":",o.words=[t[1]],!(r.length>1))return;r.shift(),o=n(e.replace(/^[^:]*:/,"")),o.words=r,s=r[0]||""}}let l=s.charAt(0);"."==l||"@"==l?(o.type="directive","@scope"==o.words[0]&&this.handleDirective(o)):0==o.words.length?o.type="empty":o.type="instruction"}prepLines(e){this.currLineNo=0,this.realCurrLineNo=0,this.lines=[],e.split(/\r?\n/).forEach((e=>{this.errors.length>10||(this.currLineNo++,this.realCurrLineNo++,this.buildLine(e,this.lines))}))}iterLines(){this.stack=0,this.buf=[],this.scopeId=0,this.lines.forEach((t=>{if(!(this.errors.length>10)&&(this.currLine=t,0!=t.words.length))if("label"==t.type){let o=this.scopedName(t.words[0]);if(this.prevLabel=o,this.finalEmit){null!=this.equs[o]&&this.directiveError(n(".equ redefined as label"));let t=this.labels[o];null==t&&e.oops(),0==this.errors.length&&t!=this.location()&&e.oops(`invalid location: ${this.location()} != ${t} at ${o}`),e.assert(this.errors.length>0||t==this.location()),this.reallyFinalEmit&&(this.stackAtLabel[o]=this.stack)}else this.labels.hasOwnProperty(o)?this.directiveError(n("label redefinition")):this.inlineMode&&/^_/.test(o)?this.directiveError(n("labels starting with '_' are reserved for the compiler")):this.labels[o]=this.location();t.location=this.location()}else"directive"==t.type?this.handleDirective(t):"instruction"==t.type?this.handleInstruction(t):"empty"==t.type||e.oops()}))}getSourceMap(){const e={};let t="",n=0,o=0,r=0;function i(){t&&o&&(e[t]||(e[t]=[]),e[t].push(n,o,r-o)),o=0,r=0}return this.lines.forEach(((e,s)=>{const a=/^; ([\w\/\.-]+)\(([\d]+),\d+\):/.exec(e.text);a&&(i(),t=a[1],n=parseInt(a[2])),"instruction"==e.type&&(o||(o=e.location),r=e.location)})),i(),e}getSource(o,r=1,i=0){let s=0,a=e=>{let t=this.labels[e]||s,n=t-s;return s=t,n},l=this.buf?this.location():0,c=a("_code_end"),u=a("_helpers_end"),p=a("_vtables_end"),d=a("_literals_end"),g=s,h=l+this.baseOffset&16777215;i&&h>i&&e.U.userError(n("program too big by {0} bytes!",h-i));let f=n("; total bytes: {0} ({1}% of {2}k flash with {3} free)",h,(100*h/(i=i||131072)).toFixed(1),(i/1024).toFixed(1),i-h),_=n("; generated code sizes (bytes): {0} (incl. {1} user, {2} helpers, {3} vtables, {4} lits); src size {5}\n",g,c,u,p,d,l-g)+n("; assembly: {0} lines; density: {1} bytes/stmt; ({2} stmts)\n",this.lines.length,Math.round(100*c/r)/100,r)+f+"\n"+this.stats+"\n\n",m=!1;return this.lines.forEach(((e,n)=>{if("_stored_program"==e.words[0])return _+='_stored_program: .string "..."\n',void(m=!0);if(m)return void(m=!1);let r=e.text;if(o){if("@stackempty"==e.words[0]&&this.lines[n-1].text==e.text)return;if(r=r.replace(/; WAS: .*/,""),!r.trim())return}t.debug&&("label"!=e.type&&"instruction"!=e.type||(r+=` \t; 0x${(e.location+this.baseOffset).toString(16)}`)),_+=r+"\n"})),_}peepHole(){let e=this.lines.filter((e=>"empty"!=e.type));for(let t=0;t<e.length;++t){let n=e[t];if(/^user/.test(n.scope))continue;let o=e[t+1];if(!o)continue;let r=e[t+2];"instruction"==n.type&&this.ei.peephole(n,o,r)}}clearLabels(){this.labels={},this.commPtr=0}peepPass(t){this.disablePeepHole||(this.peepOps=0,this.peepDel=0,this.peepCounts={},this.peepHole(),this.throwOnError=!0,this.finalEmit=!1,this.clearLabels(),this.iterLines(),e.assert(!this.checkStack||0==this.stack),this.finalEmit=!0,this.reallyFinalEmit=t||0==this.peepOps,this.iterLines(),this.stats+=n("; peep hole pass: {0} instructions removed and {1} updated\n",this.peepDel,this.peepOps-this.peepDel))}getLabels(){return this.userLabelsCache||(this.userLabelsCache=e.U.mapMap(this.labels,((e,t)=>t+this.baseOffset))),this.userLabelsCache}emit(t){if(e.assert(null==this.buf),this.prepLines(t),this.errors.length>0)return;if(this.clearLabels(),this.iterLines(),this.checkStack&&0!=this.stack&&this.directiveError(n("stack misaligned at the end of the file")),this.errors.length>0)return;if(this.ei.expandLdlit(this),this.clearLabels(),this.iterLines(),this.finalEmit=!0,this.reallyFinalEmit=this.disablePeepHole,this.iterLines(),this.errors.length>0)return;for(let e=0;e<5&&(pxt.debug(`Peephole OPT, pass ${e}`),this.peepPass(5==e),0!=this.peepOps);++e);pxt.debug("emit done")}}t.File=s;t.VMFile=class extends s{constructor(e){super(e)}};function a(e){let t=[],n="";e:for(let o=0;o<e.length;++o)switch(e[o]){case"[":case"]":case"!":case"{":case"}":case",":n&&(t.push(n),n=""),t.push(e[o]);break;case" ":case"\t":case"\r":case"\n":n&&(t.push(n),n="");break;case";":break e;default:n+=e[o]}return n&&(t.push(n),n=""),t[0]?t:null}function l(e,t){return{stack:null,opcode:null,error:e,errorAt:t}}function c(e){return e<0||e>65535?("0x"+e.toString(16)).toLowerCase():("0x"+("000"+e.toString(16)).slice(-4)).toLowerCase()}t.AbstractProcessor=class{constructor(){this.file=null,this.addEnc=(e,t,n)=>{let o={name:e,pretty:t,encode:n,isRegister:/^\$r\d/.test(e),isImmediate:/^\$i\d/.test(e),isRegList:/^\$rl\d/.test(e),isLabel:/^\$l[a-z]/.test(e)};return this.encoders[e]=o,o},this.inrange=(e,t,n)=>Math.floor(t)!=t||t<0||t>e?null:n,this.inminmax=(e,t,n,o)=>Math.floor(n)!=n||n<e||n>t?null:o,this.inseq=(e,t)=>{let n=e.indexOf(t);return n<0?null:n},this.inrangeSigned=(e,t,n)=>{if(Math.floor(t)!=t)return null;if(t<-(e+1))return null;if(t>e)return null;return n&(e<<1|1)},this.addInst=(e,t,n,o)=>{let i=new r(this,e,t,n,o);return this.instructions.hasOwnProperty(i.name)||(this.instructions[i.name]=[]),this.instructions[i.name].push(i),i},this.encoders={},this.instructions={}}toFnPtr(e,t,n){return e}wordSize(){return-1}computeStackOffset(e,t){return t}is32bit(e){return!1}emit32(e,t,n){return null}postProcessRelAddress(e,t){return t}postProcessAbsAddress(e,t){return t}peephole(e,t,n){}registerNo(e){return null}getAddressFromLabel(e,t,n,o=!1){return null}isPop(e){return!1}isPush(e){return!1}isAddSP(e){return!1}isSubSP(e){return!1}testAssembler(){e.assert(!1)}expandLdlit(e){}},t.emitErr=l,t.expectError=function(t,n){let o=new s(t);o.emit(n),0==o.errors.length&&e.oops("ASMTEST: expecting error for: "+n)},t.tohex=c,t.expect=function(t,n){let o=[],r=n.replace(/^([0-9a-fA-F]{4,8})\s/gm,((e,t)=>(o.push(parseInt(t.slice(0,4),16)),8==t.length&&o.push(parseInt(t.slice(4,8),16)),""))),i=new s(t);i.throwOnError=!0,i.disablePeepHole=!0,i.emit(r),i.errors.length>0&&(console.debug(i.errors[0].message),e.oops("ASMTEST: not expecting errors")),i.buf.length!=o.length&&e.oops("ASMTEST: wrong buf len");for(let t=0;t<o.length;++t)i.buf[t]!=o[t]&&e.oops("ASMTEST: wrong buf content at "+t+" , exp:"+c(o[t])+", got: "+c(i.buf[t]))}}(e.assembler||(e.assembler={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){var n=pxtc.Util;t.apiRoot=e.BrowserUtils.isLocalHost()||n.isNodeJS?"https://www.makecode.com/api/":"/api/",t.accessToken="",t.localToken="";let o=!0;function r(t){let o=new Error(n.lf("Cannot access {0} while offline",t));return o.isOffline=!0,e.U.delay(1e3).then((()=>Promise.reject(o)))}function i(n,o){return e.U.requestAsync({url:"/api/"+n,headers:{Authorization:t.localToken},method:o?"POST":"GET",data:o||void 0,allowHttpErrors:!0})}function s(){return e.webConfig&&!e.webConfig.isStatic&&!e.BrowserUtils.isLocalHost()&&!!e.webConfig.cdnUrl}function a(n){if(n=n.replace(/^\//,""),!s())return t.apiRoot+n;const o=new Date,r=o.getUTCFullYear()+("0"+(o.getUTCMonth()+1)).slice(-2)+("0"+o.getUTCDate()).slice(-2);return n.indexOf("?")<0?n+="?":n+="&",n+="cdn="+r,e.webConfig.cdnUrl+"/api/"+n}function l(e){return s()?(e.url=a(e.url),n.requestAsync(e).catch((t=>c(e,t)))):u(e)}function c(e,n){return 0==n.statusCode?(o&&(o=!1,t.onOffline()),r(e.url)):Promise.reject(n)}function u(o){var i;return o.url=(null===(i=e.webConfig)||void 0===i?void 0:i.isStatic)&&!o.forceLiveEndpoint?e.webConfig.relprefix+o.url:t.apiRoot+o.url,o.allowGzipPost=!0,t.isOnline()||e.BrowserUtils.isPxtElectron()?(o.headers||(o.headers={}),e.BrowserUtils.isLocalHost()?t.localToken&&(o.headers.Authorization=t.localToken):t.accessToken&&(o.headers["x-td-access-token"]=t.accessToken),n.requestAsync(o).catch((e=>c(o,e)))):r(o.url)}function p(){return navigator&&navigator.onLine}t.onOffline=()=>{},t.hasAccessToken=function(){return!!t.accessToken},t.localRequestAsync=i,t.useCdnApi=s,t.cdnApiUrl=a,t.apiRequestWithCdnAsync=l,t.privateRequestAsync=u,t.privateGetTextAsync=function(e,t){return u({url:e,headers:t}).then((e=>e.text))},t.privateGetAsync=function(e,t=!1){return u({url:e,forceLiveEndpoint:t}).then((e=>e.json))},t.downloadTargetConfigAsync=function(){if(!t.isOnline())return Promise.resolve(void 0);const n=e.appTarget.versions&&e.appTarget.versions.target,o=e.webConfig&&e.webConfig.isStatic?"targetconfig.json":`config/${e.appTarget.id}/targetconfig${n?`/v${n}`:""}`;return e.BrowserUtils.isLocalHost()?i(o).then((e=>e?e.json:void 0)):l({url:o}).then((e=>e.json))},t.downloadScriptFilesAsync=function(e){return u({url:e+"/text",forceLiveEndpoint:!0}).then((e=>JSON.parse(e.text)))},t.markdownAsync=async function(t,n){const o=e.BrowserUtils.isLocalHostDev()?0:36e5,r=24*o*7;n=n||e.Util.userLanguage();const a=await e.BrowserUtils.translationDbAsync(),c=await a.getAsync(n,t,""),p=async()=>{try{const o=await function(t,n,o){var r;const a=null===(r=e.webConfig)||void 0===r?void 0:r.isStatic,c=e.appTarget.versions&&e.appTarget.versions.target||"?";let p;if(a){p=t;const e=/\/?docs\//.test(p),n=/\.\w+$/.test(p);if(!e){const e="/"===p[0];p=`docs${e?"":"/"}${p}`}n||(p=`${p}.md`)}else p=`md/${e.appTarget.id}/${t.replace(/^\//,"")}?targetVersion=${encodeURIComponent(c)}`;"en"!=n&&(p+=`${a?"?":"&"}lang=${encodeURIComponent(n)}`);if(e.BrowserUtils.isLocalHost()&&!e.Util.liveLocalizationEnabled())return i(p).then((e=>404==e.statusCode?u({url:p,method:"GET"}).then((e=>({md:e.text,etag:e.headers.etag}))):{md:e.text,etag:void 0}));{const e=o&&!s()?{"If-None-Match":o}:void 0;return l({url:p,method:"GET",headers:e}).then((e=>({md:e.text,etag:e.headers.etag})))}}(t,n,null==c?void 0:c.etag);return!c||o.md&&c.md!==o.md?(await a.setAsync(n,t,"",o.etag,void 0,o.md),o.md):c.md}catch(e){return""}};if(c){const t=Date.now()-c.time,n=t>o;if(t>r)e.tickEvent("markdown.update.wait");else if(n&&(e.tickEvent("markdown.update.background"),p()),c.md)return c.md}return p()},t.privateDeleteAsync=function(e){return u({url:e,method:"DELETE"}).then((e=>e.json))},t.privatePostAsync=function(e,t,n=!1){return u({url:e,data:t||{},forceLiveEndpoint:n}).then((e=>e.json))},t.isLoggedIn=function(){return!!t.accessToken},t.isNavigatorOnline=p,t.isOnline=function(){return"undefined"!=typeof navigator&&p()&&(o=!0),o},t.getServiceUrl=function(){return t.apiRoot.replace(/\/api\/$/,"")},t.getUserId=function(){let e=/^0(\w+)\./.exec(t.accessToken);return e?e[1]:null},t.parseScriptId=function(t){const o=e.appTarget;if(!(t&&o.appTheme&&o.cloud&&o.cloud.sharing))return;let r=["makecode.com"];o.appTheme.embedUrl&&r.push(o.appTheme.embedUrl),o.appTheme.shareUrl&&r.push(o.appTheme.shareUrl),r=n.unique(r,(e=>e)).map((e=>n.escapeForRegex(n.stripUrlProtocol(e).replace(/\/$/,"")).toLowerCase()));const i=`^((https://)?(?:${r.join("|")})/)?(?:v[0-9]+/)?(api/oembed?url=.*%2F([^&]*)&.*?|([a-z0-9-_]+))$`,s=new RegExp(i,"i").exec(t.trim()),a=s&&(!s[1]||r.indexOf(n.escapeForRegex(s[1].replace(/https:\/\//,"").replace(/\/$/,"")).toLowerCase())>=0)&&(s[3]||s[4])?s[3]?s[3]:s[4]:null;return a&&("_"==a[0]&&13==a.length||23==a.length&&/^[0-9\-]+$/.test(a))?a:void 0}}(e.Cloud||(e.Cloud={}))}(pxt||(pxt={})),function(e){!function(e){e.f4EncodeImg=function(e,t,n,o){let r=[135,n,255&e,e>>8,255&t,t>>8,0,0].map(c).join(""),i=4,s=0,a=0,l=e=>{s|=e<<a,a==8-n?(r+=c(s),i++,s=0,a=0):a+=n};for(let r=0;r<e;++r){for(let e=0;e<t;++e)l(o(r,e));for(;0!=a;)l(0);if(n>1)for(;3&i;)l(0)}return r;function c(e){return("0"+e.toString(16)).slice(-2)}}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){function t(e){let t="";switch(e){case 0:t="C5";break;case 1:t="B";break;case 2:t="A";break;case 3:t="G";break;case 4:t="F";break;case 5:t="E";break;case 6:t="D";break;case 7:t="C"}return t}function n(e){let t=-1;switch(e){case"C5":t=0;break;case"B":t=1;break;case"A":t=2;break;case"G":t=3;break;case"F":t=4;break;case"E":t=5;break;case"D":t=6;break;case"C":t=7}return t}e.MelodyArray=class{constructor(e){this.numCols=8,this.numRows=8,this.polyphonic=!1,e&&(this.tempo=e),this.resetMelody()}setTempo(e){this.tempo=e}getArray(){return this.melody}setArray(e){this.melody=e}getColor(e){return 0}getValue(e,t){return this.melody[e][t]}getWidth(){return this.numCols}getHeight(){return this.numRows}updateMelody(e,t){const n=!this.melody[e][t];if(n&&!this.polyphonic)for(let e=0;e<this.numRows;e++)this.melody[e][t]=!1;this.melody[e][t]=n}getStringRepresentation(){let e="",n=new Array(this.numCols),o=0;for(let e=0;e<this.numRows;e++){let r=0;n[e]=[];for(let o=0;o<this.numCols;o++)this.melody[o][e]&&(n[e].push(t(o)),r++);r>o&&(o=r)}if(0==o)return"- - - - - - - - ";for(let t=0;t<o;t++)for(let t=0;t<this.numCols;t++)n[t]&&n[t].length>0?e+=n[t].shift()+" ":e+="- ";return e}parseNotes(e){let t=(e=e.trim()).split(" ");for(let e=0;e<t.length;e++){for(let t=0;t<this.numRows;t++)this.melody[t][e]=!1;"-"!=t[e]&&(this.melody[n(t[e])][e]=!0)}}setPolyphonic(e){this.polyphonic=e}isPolyphonic(){return this.polyphonic}resetMelody(){this.melody=new Array(this.numCols);for(let e=0;e<this.numCols;e++)this.melody[e]=new Array(this.numRows).fill(!1)}},e.rowToNote=t,e.noteToRow=n,e.getColorClass=function(e){let t="melody-default";switch(e){case 0:t="melody-red";break;case 1:t="melody-orange";break;case 2:t="melody-yellow";break;case 3:t="melody-green";break;case 4:t="melody-teal";break;case 5:t="melody-blue";break;case 6:t="melody-purple";break;case 7:t="melody-violet"}return t}}(pxtmelody||(pxtmelody={})),function(e){function t(e,t,n){return function(e,t,n){if(t)for(const n of Object.keys(t))"className"===n?e.setAttribute("class",t[n]+""):e.setAttribute(n,t[n]+"");n&&e.addEventListener("click",n);return e}(document.createElement(e),t,n)}e.MelodyGallery=class{constructor(){this.value=null,this.visible=!1,this.timeouts=[],this.numSamples=e.SampleMelodies.length,this.containerDiv=document.createElement("div"),this.containerDiv.setAttribute("id","melody-editor-gallery-outer"),this.contentDiv=document.createElement("div"),this.contentDiv.setAttribute("id","melody-editor-gallery"),this.itemBackgroundColor="#DCDCDC",this.itemBorderColor="white",this.initStyles(),this.containerDiv.appendChild(this.contentDiv),this.containerDiv.style.display="none",this.contentDiv.addEventListener("animationend",(()=>{this.visible||(this.containerDiv.style.display="none")})),this.contentDiv.addEventListener("wheel",(e=>{e.stopPropagation()}),!0)}getElement(){return this.containerDiv}getValue(){return this.value}show(e){this.pending=e,this.containerDiv.style.display="block",this.buildDom(),this.visible=!0,pxt.BrowserUtils.removeClass(this.contentDiv,"hidden-above"),pxt.BrowserUtils.addClass(this.contentDiv,"shown")}hide(){this.visible=!1,pxt.BrowserUtils.removeClass(this.contentDiv,"shown"),pxt.BrowserUtils.addClass(this.contentDiv,"hidden-above"),this.value=null,this.stopMelody()}clearDomReferences(){this.contentDiv=null,this.containerDiv=null}layout(e,t,n){this.containerDiv.style.left=e+"px",this.containerDiv.style.top=t+"px",this.containerDiv.style.height=n+"px"}buildDom(){for(;this.contentDiv.firstChild;)this.contentDiv.removeChild(this.contentDiv.firstChild);const t=e.SampleMelodies;this.buttons=[];for(let e=0;e<t.length;e++)this.mkButton(t[e],e,"255px","45px")}initStyles(){const e=document.createElement("style");e.textContent="\n            #melody-editor-gallery {\n                margin-top: -100%;\n            }\n\n            #melody-editor-gallery.hidden-above {\n                margin-top: -100%;\n                animation: slide-up 0.2s 0s ease;\n            }\n\n            #melody-editor-gallery.shown {\n                margin-top: 0px;\n                animation: slide-down 0.2s 0s ease;\n            }\n\n            @keyframes slide-down {\n                0% {\n                    margin-top: -100%;\n                }\n                100% {\n                    margin-top: 0px;\n                }\n            }\n\n            @keyframes slide-up {\n                0% {\n                    margin-top: 0px;\n                }\n                100% {\n                    margin-top: -100%;\n                }\n            }\n            ",this.containerDiv.appendChild(e)}mkButton(e,n,o,r){const i=t("div",{className:"melody-gallery-button melody-editor-card",role:"menuitem",id:`:${n}`}),s=t("i",{className:"music icon melody-icon"}),a=t("div",{className:"melody-editor-text"});a.innerText=e.name;const l=this.createColorBlock(e),c=t("div",{className:"melody-editor-button left-button",role:"button",title:e.name},(()=>this.handleSelection(e)));c.appendChild(s),c.appendChild(a),c.appendChild(l),i.appendChild(c);const u=t("div",{className:"melody-editor-button right-button",role:"button",title:lf("Preview {0}",e.name)},(()=>this.togglePlay(e,n))),p=t("i",{className:"play icon"});this.buttons[n]=p,u.appendChild(p),i.appendChild(u),this.contentDiv.appendChild(i)}handleSelection(e){if(this.pending){const t=this.pending;this.pending=void 0,t(e.notes)}}playNote(e,t,n){let o=0;switch(e){case"C5":o=523;break;case"B":o=494;break;case"A":o=440;break;case"G":o=392;break;case"F":o=349;break;case"E":o=330;break;case"D":o=294;break;case"C":o=262}this.timeouts.push(setTimeout((()=>{pxt.AudioContextManager.tone(o)}),t*this.getDuration(n))),this.timeouts.push(setTimeout((()=>{pxt.AudioContextManager.stop()}),(t+1)*this.getDuration(n)))}getDuration(e){return 6e4/e}previewMelody(e){this.stopMelody();let t=e.notes.split(" ");for(let n=0;n<t.length;n++)this.playNote(t[n],n,e.tempo)}togglePlay(e,t){let n=this.buttons[t];pxt.BrowserUtils.containsClass(n,"play icon")?(this.resetPlayIcons(),pxt.BrowserUtils.removeClass(n,"play icon"),pxt.BrowserUtils.addClass(n,"stop icon"),this.previewMelody(e),this.timeouts.push(setTimeout((()=>{pxt.BrowserUtils.removeClass(n,"stop icon"),pxt.BrowserUtils.addClass(n,"play icon")}),e.notes.split(" ").length*this.getDuration(e.tempo)))):(pxt.BrowserUtils.removeClass(n,"stop icon"),pxt.BrowserUtils.addClass(n,"play icon"),this.stopMelody())}stopMelody(){for(;this.timeouts.length;)clearTimeout(this.timeouts.shift());pxt.AudioContextManager.stop()}resetPlayIcons(){for(let e=0;e<this.numSamples;e++){let t=this.buttons[e];if(pxt.BrowserUtils.containsClass(t,"stop icon")){pxt.BrowserUtils.removeClass(t,"stop icon"),pxt.BrowserUtils.addClass(t,"play icon");break}}}createColorBlock(t){let n=document.createElement("div");pxt.BrowserUtils.addClass(n,"melody-color-block");let o=t.notes.split(" ");for(let t=0;t<o.length;t++){let r=e.getColorClass(e.noteToRow(o[t])),i=document.createElement("div");0==t?pxt.BrowserUtils.addClass(i,"left-edge sliver "+r):t==o.length-1?pxt.BrowserUtils.addClass(i,"right-edge sliver "+r):pxt.BrowserUtils.addClass(i,"sliver "+r),n.appendChild(i)}return n}}}(pxtmelody||(pxtmelody={})),function(e){class t{constructor(e,t,n){this.name=e,this.notes=t,this.tempo=n}}e.MelodyInfo=t,e.SampleMelodies=[new t(lf("Scale"),"C5 B A G F E D C",120),new t(lf("Reverse"),"C D E F G A B C5",120),new t(lf("Mystery"),"E B C5 A B G A F",120),new t(lf("Gilroy"),"A F E F D G E F",120),new t(lf("Falling"),"C5 A B G A F G E",120),new t(lf("Hopeful"),"G B A G C5 B A B",120),new t(lf("Tokyo"),"B A G A G F A C5",120),new t(lf("Paris"),"G F G A - F E D",120),new t(lf("Rising"),"E D G F B A C5 B",120),new t(lf("Sitka"),"C5 G B A F A C5 B",120)]}(pxtmelody||(pxtmelody={})),function(e){let t,n=!1;class o{constructor(e){this.db=e}loadAsync(n,o,r,i){if(!/^v\d+\.\d+\.\d+$/.test(o))return i(n,o);const s=`gh-${r}-${n}#${o}`;return t.cacheGet(s).then((r=>{if(r){const t=e.Util.jsonTryParse(r);if(t)return e.debug(`cache hit ${s}`),Promise.resolve(t)}return i(n,o).then((n=>n?(e.debug(`cached ${s}`),t.cacheSet(s,JSON.stringify(n)).then((()=>n))):n))}))}loadConfigAsync(e,t){return this.loadAsync(e,t,"pxt",((e,t)=>this.db.loadConfigAsync(e,t)))}loadPackageAsync(e,t){return this.loadAsync(e,t,"pkg",((e,t)=>this.db.loadPackageAsync(e,t)))}}class r{constructor(e){this.packageFiles=e}resolve(e,t){return""}readFile(t,n){const o="this"==t.id?n:"pxt_modules/"+t.id+"/"+n;return void 0!==this.packageFiles[o]?this.packageFiles[o]:e.appTarget.bundledpkgs[t.id]?e.appTarget.bundledpkgs[t.id][n]:null}writeFile(t,n,o){const r="this"==t.id?"":"pxt_modules/"+t.id+"/";e.debug(`write file ${r+n}`),this.packageFiles[r+n]=o}getHexInfoAsync(e){return Promise.resolve({hex:["SKIP"]})}cacheStoreAsync(e,n){return(null==t?void 0:t.cacheSet)?t.cacheSet(e,n):Promise.resolve()}cacheGetAsync(e){return(null==t?void 0:t.cacheGet)?t.cacheGet(e):Promise.resolve("")}downloadPackageAsync(o){return n?function(e){const n=null==t?void 0:t.pkgOverrideAsync;return(n?n(e.id):Promise.resolve(void 0)).then((t=>t||e.commonDownloadAsync()))}(o).then((t=>{t&&e.U.iterMap(t,((e,t)=>{this.writeFile(o,e,t)}))})):Promise.resolve()}resolveVersionAsync(e){return Promise.resolve("*")}}function i(t){if(t.target.preferredEditor==e.PYTHON_PROJECT_NAME){const n=e.U.clone(t);n.ast=!0,n.target.preferredEditor=e.JAVASCRIPT_PROJECT_NAME;for(let t of n.sourceFiles)e.U.endsWith(t,".py")&&(n.fileSystem[t.slice(0,-3)+".ts"]=" ");const o=pxtc.compile(n);t.apisInfo=pxtc.getApiInfo(o.ast,n.jres)}}function s(t,n){const o=new r(t),s=new e.MainPackage(o);return s.loadAsync().then((()=>{let e=s.getTargetOptions();return e.hasHex&&(e.isNative=n.native),s.getCompileOptionsAsync(e)})).then((e=>(a(s.targetVersion(),e),i(e),e)))}function a(t,n){if(t){e.debug(`applying TS patches relative to ${t}`);for(let o of Object.keys(n.fileSystem))if(-1==o.indexOf("/")&&e.U.endsWith(o,".ts")){const r=n.fileSystem[o],i=e.patching.patchJavaScript(t,r);r!=i&&(e.debug(`applying TS patch to ${o}`),n.fileSystem[o]=i)}}}e.SimpleHost=r,e.prepPythonOptions=i,e.simpleInstallPackagesAsync=function(t){const n=new r(t);return new e.MainPackage(n).loadAsync(!0)},e.simpleGetCompileOptionsAsync=s,e.simpleCompileAsync=function(e,t){return s(e,"boolean"==typeof t?{native:t}:t||{}).then((e=>pxtc.compile(e))).then((e=>(e.success||(e.errors=e.diagnostics.map(ts.pxtc.getDiagnosticString).join("")||"Unknown error."),e)))},e.patchTS=a,e.setupSimpleCompile=function(r){"undefined"==typeof global||global.btoa||(global.btoa=function(e){return Buffer.from(e,"binary").toString("base64")},global.atob=function(e){return Buffer.from(e,"base64").toString("binary")}),"undefined"!=typeof pxtTargetBundle&&(e.debug("setup app bundle"),e.setAppTarget(pxtTargetBundle)),r&&(t=r,n=!0,r.httpRequestAsync&&(e.Util.httpRequestCoreAsync=r.httpRequestAsync),e.github.forceProxy=!0,e.github.db=new o(new e.github.MemoryGithubDb)),e.debug("simple setup done")}}(pxt||(pxt={})),function(e){e.simshim=function(t,n){let o,r=ts.SyntaxKind,i=t.getTypeChecker(),s=e.cpp.nsWriter("declare namespace"),a="";for(let i of t.getSourceFiles()){if(n){let t=n(i.fileName);if(e.debug("SimShim[1]: "+t.dir),!e.U.endsWith(t.dir,"/sim")&&!e.U.startsWith(i.fileName,"sim/"))continue}else if(!e.U.startsWith(i.fileName,"sim/"))continue;e.debug("SimShim[2]: "+i.fileName);for(let e of i.statements){let t=e;e.kind==r.ModuleDeclaration&&"pxsim"==t.name.text&&(o=t,f(t.body))}}let l={};return l[e.appTarget.corepkg]=s.finish(),l;function c(e){let t;return ts.isExpression(e)&&(t=i.getContextualType(e)),t||(t=i.getTypeAtLocation(e)),t}function u(e){let t=i.typeToString(e,o,ts.TypeFormatFlags.UseFullyQualifiedType);switch(t=t.replace(/^pxsim\./,""),t){case"RefAction":return"() => void";case"RefBuffer":return"Buffer";default:return t}}function p(e){let t=pxtc.getComments(e);return/^\s*\/\/%/m.test(t)?t:null}function d(e){let t=p(e);if(!t)return;let n=e.name.getText(),o="//% shim=."+n,r=i.getTypeAtLocation(e);s.write(t),s.write(o),s.write(`public ${n}: ${u(r)};`),s.write("")}function g(e){let t=p(e);if(!t)return;i.getTypeAtLocation(e);let n=e.parameters.map((e=>e.name.getText()+": "+u(c(e))));s.write(t),s.write(`//% shim="new ${a}"`),s.write(`constructor(${n.join(", ")});`),s.write("")}function h(t,n=!1){let o=p(t);if(!o)return;let l=t.name.getText(),d=t.kind==r.MethodDeclaration||t.kind==r.GetAccessor||t.kind==r.SetAccessor,g="//% shim="+(d?"."+l:a+"::"+l),h=i.getSignatureFromDeclaration(t),f=i.getReturnTypeOfSignature(h),_=/Async$/.test(l),m=(y=f,pxtc.isObjectType(y)&&y.objectFlags&ts.ObjectFlags.Reference&&"Promise"==y.symbol.name?y.typeArguments[0]:null);var y;m?(g+=" promise",f=m,_||e.U.userError(`${a}::${l} should be called ${l}Async`)):_&&e.U.userError(`${a}::${l} doesn't return a promise`),e.debug("emitFun: "+l);let k=t.parameters.map((e=>`${e.name.getText()}${e.questionToken?"?":""}: ${u(c(e))}`)),b=l.replace(/Async$/,""),v=d?"public":"function",T=`(${k.join(", ")})`;t.kind==r.GetAccessor&&(v=n?"public":"readonly",T="",g+=" property"),d||s.setNs(a),s.write(o),s.write(g),s.write(`${v} ${b}${T}: ${u(f)};`),s.write("")}function f(e){switch(e.kind){case r.ModuleDeclaration:return function(e){let t=a;a&&(a+="."),a+=e.name.text,f(e.body),a=t}(e);case r.ModuleBlock:return e.statements.forEach(f);case r.FunctionDeclaration:return h(e);case r.ClassDeclaration:return function(e){let t=p(e);if(!t)return;s.setNs(a),s.write(t);let n=a;a&&(a+="."),a+=e.name.text;let o=n?"":"declare",i="";if(e.heritageClauses)for(let t of e.heritageClauses)t.token==r.ExtendsKeyword&&(i=" extends "+u(c(t.types[0])));s.write(`${o} class ${e.name.text}${i} {`),s.incrIndent();for(let t of e.members)switch(t.kind){case r.MethodDeclaration:h(t);break;case r.PropertyDeclaration:d(t);break;case r.Constructor:g(t);break;case r.GetAccessor:let n=e.members.some((e=>e.kind==r.SetAccessor&&e.name.getText()==t.name.getText()));h(t,n)}a=n,s.decrIndent(),s.write("}")}(e)}}}}(pxt||(pxt={})),function(e){!function(t){t.annotate=function(n,o,r){const i=t.target;t.target=r;let s=n.getSourceFiles().filter((e=>e.fileName===o))[0],a=n.getTypeChecker();function l(n,o,r=!1,i=null){let s=r||!(u(n).flags&e.TypeFlags.Void),l=i||c(n);if(n.expression&&l){let e=!1;switch(l.kind){case t.SK.PropertySignature:case t.SK.PropertyAssignment:case t.SK.PropertyDeclaration:t.isStatic(l)||(e=!0);break;case t.SK.Parameter:t.isCtorField(l)&&(e=!0);break;case t.SK.GetAccessor:case t.SK.SetAccessor:case t.SK.MethodDeclaration:case t.SK.MethodSignature:e=!0}if(e){const e=n.expression;e.kind===t.SK.PropertyAccessExpression?o.unshift(e.expression):o.unshift(n.expression)}}let p={decl:l,qName:l?t.getNodeFullName(a,l):"?",args:o,isExpression:s};t.pxtInfo(n).callInfo=p}function c(n){if(!n)return null;let o,r=a.getSymbolAtLocation(n);if(r&&(o=r.valueDeclaration,!o&&r.declarations)){let t=r.declarations[0];t&&t.kind==e.SyntaxKind.ImportEqualsDeclaration&&(r=a.getSymbolAtLocation(t.moduleReference),r&&(o=r.valueDeclaration))}if(!o&&n.kind==t.SK.PropertyAccessExpression){const e=n;o={kind:t.SK.PropertySignature,symbol:{isBogusSymbol:!0,name:e.name.getText()},name:e.name},t.pxtInfo(o).flags|=2}return o}function u(n){let o;const r=t.pxtInfo(n);return r.typeCache?r.typeCache:(e.isExpression(n)&&(o=a.getContextualType(n)),o||(o=a.getTypeAtLocation(n)),o?e.isStringLiteral(n)?o:t.checkType(o):o)}!function n(o){e.forEachChild(o,(o=>{switch(o.kind){case e.SyntaxKind.CallExpression:l(o,o.arguments.slice(0),null,c(o.expression));break;case e.SyntaxKind.PropertyAccessExpression:l(o,[]);break;case e.SyntaxKind.TaggedTemplateExpression:l(o,[o.template],!0,c(o.tag));break;case e.SyntaxKind.BinaryExpression:!function(n){const o=n.left,r=n.right;let i=u(n.left),s=u(n.right);n.operatorToken.kind!=t.SK.PlusToken&&n.operatorToken.kind!=t.SK.PlusEqualsToken||(t.isStringType(i)||t.isStringType(s)&&n.operatorToken.kind==t.SK.PlusToken)&&(t.pxtInfo(n).exprInfo={leftType:a.typeToString(i),rightType:a.typeToString(s)});switch(n.operatorToken.kind){case e.SyntaxKind.EqualsToken:case e.SyntaxKind.PlusEqualsToken:case e.SyntaxKind.MinusEqualsToken:if(o.kind==t.SK.PropertyAccessExpression){let n=c(o);n&&n.kind==t.SK.GetAccessor?(n=e.getDeclarationOfKind(n.symbol,t.SK.SetAccessor),l(o,[r],!1,n)):n&&(n.kind==t.SK.PropertySignature||n.kind==t.SK.PropertyAssignment||t.target&&t.target.switches.slowFields)&&l(o,[r])}}}(o);break;case e.SyntaxKind.Identifier:const n=c(o);if(n&&n.getSourceFile().fileName!==pxt.MAIN_TS&&n.kind==e.SyntaxKind.VariableDeclaration){const e=t.pxtInfo(o);e.flags|=4,e.commentAttrs||(e.commentAttrs=t.parseComments(n))}}n(o)}))}(s),t.target=i}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){function t(e){let t='"';for(let n=0;n<e.length;++n){let o=255&e.charCodeAt(n),r=String.fromCharCode(o);t+="\\"==r||'"'==r?"\\"+r:"\n"==r?"\\n":o<=15?"\\x0"+o.toString(16):o<32||o>127?"\\x"+o.toString(16):r}return t+'"'}e.asmStringLiteral=t;function n(n){let o="pxt::string_inline_ascii_vt",r=e.target.utf8?e.U.toUTF8(n,!0):n,i="";if(r!==n)if(n.length>16){o="pxt::string_skiplist16_packed_vt";let s=[],a=0;for(let t=0;t+16<=n.length;t+=16)a+=e.U.toUTF8(n.slice(t,t+16),!0).length,s.push(a);i=`\n    .short ${r.length}, ${n.length}\n    .short ${s.map((e=>e.toString())).join(", ")}\n    .string ${t(r)}\n`}else o="pxt::string_inline_utf8_vt";return i||(i=`\n    .short ${r.length}\n    .string ${t(r)}\n`),{vt:o,asm:i}}function o(e,t=""){return`\n                .word ${e.length>>1}${t}\n                .hex ${e}${e.length%4==0?"":"00"}\n        `}e.AssemblerSnippets=class{nop(){return"TBD(nop)"}reg_gets_imm(e,t){return"TBD(reg_gets_imm)"}proc_setup(e,t){return"TBD(proc_setup)"}push_fixed(e){return"TBD(push_fixed)"}push_local(e){return"TBD(push_local)"}push_locals(e){return"TBD(push_locals)"}pop_fixed(e){return"TBD(pop_fixed)"}pop_locals(e){return"TBD(pop_locals)"}proc_return(){return"TBD(proc_return)"}debugger_stmt(e){return""}debugger_bkpt(e){return""}debugger_proc(e){return""}unconditional_branch(e){return"TBD(unconditional_branch)"}beq(e){return"TBD(beq)"}bne(e){return"TBD(bne)"}cmp(e,t){return"TBD(cmp)"}cmp_zero(e){return"TBD(cmp_zero)"}arithmetic(){return""}load_reg_src_off(e,t,n,o,r,i){return"TBD(load_reg_src_off)"}rt_call(e,t,n){return"TBD(rt_call)"}call_lbl(e,t){return"TBD(call_lbl)"}call_reg(e){return"TBD(call_reg)"}helper_prologue(){return"TBD(lambda_prologue)"}helper_epilogue(){return"TBD(lambda_epilogue)"}pop_clean(e){return"TBD"}load_ptr_full(e,t){return"TBD(load_ptr_full)"}emit_int(e,t){return"TBD(emit_int)"}obj_header(e){return`.word ${e}`}string_literal(e,t){const o=n(t);return`\n            .balign 4\n            ${e}: ${this.obj_header(o.vt)}\n            ${o.asm}\n`}hex_literal(e,t){return`\n.balign ${/f{16}/i.test(t)?8:4}\n${e}: ${this.obj_header("pxt::buffer_vt")}\n${o(t)}\n`}},e.utf8AsmStringLiteral=n,e.hexLiteralAsm=o,e.numBytes=function(e){let t=0;for(let n=e;n>0;n>>>=8)t++;return t||1};e.ProctoAssembler=class{constructor(t,n,o){this.resText="",this.exprStack=[],this.calls=[],this.proc=null,this.baseStackSize=0,this.labelledHelpers={},this.write=t=>{this.resText+=e.asmline(t)},this.t=t,this.bin=n,this.proc=o,this.proc&&this.work()}emitHelpers(){this.emitLambdaTrampoline(),this.emitArrayMethods(),this.emitFieldMethods(),this.emitBindHelper()}redirectOutput(t){let n=this.write,o="";this.write=t=>o+=e.asmline(t);try{t()}finally{this.write=n}return o}stackSize(){return this.baseStackSize+this.exprStack.length}stackAlignmentNeeded(t=0){if(!e.target.stackAlign)return 0;let n=e.target.stackAlign-(this.stackSize()+t&e.target.stackAlign-1);return n==e.target.stackAlign?0:n}getAssembly(){return this.resText}work(){this.write(`\n;\n; Function ${this.proc.getFullName()}\n;\n`);let t=this.proc.label(),n=t+"_pre",o=t+"_bkpt",r=t+"_locals",i=t+"_end";this.write(`${n}:`),this.emitLambdaWrapper(this.proc.isRoot),this.write(".section code"),this.write(`${t}:`),this.proc.classInfo&&this.proc.info.thisParameter&&!e.target.switches.skipClassCheck&&!e.target.switches.noThisCheckOpt&&(this.write("mov r7, lr"),this.write("ldr r0, [sp, #0]"),this.emitInstanceOf(this.proc.classInfo,"validate"),this.write("mov lr, r7")),this.write(`\n${t}_nochk:\n    @stackmark func\n    @stackmark args\n`),this.proc.fillDebugInfo=t=>{let s=t.getLabels();this.proc.debugInfo={locals:(1==this.proc.seqNo?this.bin.globals:this.proc.locals).map((e=>e.getDebugInfo())),args:this.proc.args.map((e=>e.getDebugInfo())),name:this.proc.getName(),codeStartLoc:e.U.lookup(s,r),codeEndLoc:e.U.lookup(s,i),bkptLoc:e.U.lookup(s,o),localsMark:e.U.lookup(t.stackAtLabel,r),idx:this.proc.seqNo,calls:this.calls,size:e.U.lookup(s,i)+2-e.U.lookup(s,n)};for(let n of this.calls)n.addr=e.U.lookup(s,n.callLabel),n.stack=e.U.lookup(t.stackAtLabel,n.callLabel),n.callLabel=void 0;for(let n=0;n<this.proc.body.length;++n){let o=this.proc.body[n].breakpointInfo;if(o){let n=e.U.lookup(t.stackAtLabel,`__brkp_${o.id}`);n!==this.proc.debugInfo.localsMark&&(console.log(o),console.log(t.stackAtLabel),e.U.oops(`offset doesn't match: ${n} != ${this.proc.debugInfo.localsMark}`))}}},this.bin.options.breakpoints&&this.write(this.t.debugger_proc(o)),this.baseStackSize=1;let s=this.proc.locals.length;this.write("push {lr}"),this.write(".locals:\n"),this.proc.perfCounterNo&&(this.write(this.t.emit_int(this.proc.perfCounterNo,"r0")),this.write("bl pxt::startPerfCounter")),this.write(this.t.proc_setup(s)),this.baseStackSize+=s,this.write("@stackmark locals"),this.write(`${r}:`);for(let t=0;t<this.proc.body.length;++t){let n=this.proc.body[t];switch(n.stmtKind){case e.ir.SK.Expr:this.emitExpr(n.expr);break;case e.ir.SK.StackEmpty:if(this.exprStack.length>0){for(let e of this.proc.body.slice(t-4,t+1))console.log(`PREVSTMT ${e.toString().trim()}`);for(let e of this.exprStack)console.log(`EXPRSTACK ${e.currUses}/${e.totalUses} E: ${e.toString()}`);e.oops("stack should be empty")}this.write("@stackempty locals");break;case e.ir.SK.Jmp:this.emitJmp(n);break;case e.ir.SK.Label:this.write(n.lblName+":"),this.validateJmpStack(n);break;case e.ir.SK.Comment:this.write(`; ${n.expr.data}`);break;case e.ir.SK.Breakpoint:if(this.bin.options.breakpoints){let e=`__brkp_${n.breakpointInfo.id}`;n.breakpointInfo.isDebuggerStmt?this.write(this.t.debugger_stmt(e)):this.write(this.t.debugger_bkpt(e))}break;default:e.oops()}}e.assert(0<=s&&s<127),s>0&&this.write(this.t.pop_locals(s)),this.proc.perfCounterNo&&(this.write("mov r4, r0"),this.write(this.t.emit_int(this.proc.perfCounterNo,"r0")),this.write("bl pxt::stopPerfCounter"),this.write("mov r0, r4")),this.write(`${i}:`),this.write(this.t.proc_return()),this.write("@stackempty func"),this.write("@stackempty args"),this.write("; endfun")}mkLbl(e){let t=e+this.bin.lblNo++;return"_"!=t[0]&&(t="."+t),t}dumpStack(){let e="[";for(let t of this.exprStack)e+=t.sharingInfo()+": "+t.toString()+"; ";return e+="]",e}terminate(t){e.assert(t.exprKind==e.ir.EK.SharedRef);let n=t.args[0];e.U.assert(n.currUses!=n.totalUses),e.U.assert(this.exprStack[0]===n,"term at top");let o=1;for(;o<this.exprStack.length;){let e=this.exprStack[o];if(e.currUses!=e.totalUses)break;o++}return this.write(`@dummystack ${o}`),this.write(this.t.pop_locals(o)),o}validateJmpStack(t,n=0){let o=this.exprStack.length-n;null==t.lblStackSize?t.lblStackSize=o:t.lblStackSize!=o&&(console.log(t.lblStackSize,o),console.log(this.dumpStack()),e.U.oops("stack misaligned at: "+t.lblName))}emitJmp(t){let n=0;if(t.jmpMode==e.ir.JmpMode.Always)t.expr&&this.emitExpr(t.expr),t.terminateExpr&&(n=this.terminate(t.terminateExpr)),this.write(this.t.unconditional_branch(t.lblName)+" ; with expression");else{let o=this.mkLbl("jmpz");this.emitExpr(t.expr),(t.expr.exprKind!=e.ir.EK.RuntimeCall||"thumb::subs"!==t.expr.data&&!e.U.startsWith(t.expr.data,"_cmp_"))&&this.write(this.t.cmp_zero("r0")),t.jmpMode==e.ir.JmpMode.IfNotZero?this.write(this.t.beq(o)):this.write(this.t.bne(o)),t.terminateExpr&&(n=this.terminate(t.terminateExpr)),this.write(this.t.unconditional_branch(t.lblName)),this.write(o+":")}this.validateJmpStack(t.lbl,n)}clearStack(e=!1){let t=0;for(;this.exprStack.length>0&&this.exprStack[0].currUses==this.exprStack[0].totalUses;)t++,this.exprStack.shift();if(t&&this.write(this.t.pop_locals(t)),!e){let e=this.exprStack.filter((e=>e.currUses==e.totalUses&&-1!=e.irCurrUses));if(e.length>0){this.write(this.t.reg_gets_imm("r7",0));for(let t of e)t.irCurrUses=-1,this.write(this.loadFromExprStack("r7",t,0,!0))}}}emitExprInto(t,n){switch(t.exprKind){case e.ir.EK.NumberLiteral:"number"==typeof t.data?this.write(this.t.emit_int(t.data,n)):e.oops();break;case e.ir.EK.PointerLiteral:this.write(this.t.load_ptr_full(t.data,n));break;case e.ir.EK.SharedRef:let o=t.args[0];e.U.assert(!!o.currUses),e.U.assert(o.currUses<o.totalUses),o.currUses++;let r=this.exprStack.indexOf(o);if(e.U.assert(r>=0),0==r&&o.totalUses==o.currUses)this.write(this.t.pop_fixed([n])+` ; tmpref @${this.exprStack.length}`),this.exprStack.shift(),this.clearStack();else{let e=r.toString()+":"+this.exprStack.length;this.write(this.t.load_reg_src_off(n,"sp",e,!0)+" ; tmpref @"+(this.exprStack.length-r))}break;case e.ir.EK.CellRef:let i=t.data;if(i.isGlobal()){let e=this.bitSizeInfo(i.bitSize),t="#"+i.index;(e.needsSignExt||i.index>=e.immLimit)&&(this.write(this.t.emit_int(i.index,n)),t=n),this.write(this.t.load_reg_src_off("r7","r6","#0")),this.write(this.t.load_reg_src_off(n,"r7",t,!1,!1,e))}else{let[e,t,o]=this.cellref(i);this.write(this.t.load_reg_src_off(n,e,t,o))}break;default:e.oops()}}bitSizeInfo(t){let n={size:e.sizeOfBitSize(t),immLimit:128};return 1==n.size?n.immLimit=32:2==n.size&&(n.immLimit=64),1!=t&&3!=t||(n.needsSignExt=!0),n}emitExpr(t){switch(t.exprKind){case e.ir.EK.JmpValue:this.write("; jmp value (already in r0)");break;case e.ir.EK.Nop:this.write(this.t.nop());break;case e.ir.EK.FieldAccess:return this.emitExpr(t.args[0]),this.emitFieldAccess(t);case e.ir.EK.Store:return this.emitStore(t.args[0],t.args[1]);case e.ir.EK.RuntimeCall:return this.emitRtCall(t);case e.ir.EK.ProcCall:return this.emitProcCall(t);case e.ir.EK.SharedDef:return this.emitSharedDef(t);case e.ir.EK.Sequence:return t.args.forEach((e=>this.emitExpr(e))),this.clearStack();case e.ir.EK.InstanceOf:return this.emitExpr(t.args[0]),this.emitInstanceOf(t.data,t.jsInfo);default:return this.emitExprInto(t,"r0")}}emitFieldAccess(t,n=!1){let o=t.data,r=(n?"st":"ld")+"fld_"+o.classInfo.id+"_"+o.name;o.needsCheck&&!e.target.switches.skipClassCheck&&(this.emitInstanceOf(o.classInfo,"validate"),r+="_chk");let i=4*o.idx+4,s="#"+i;i>124&&(this.write(this.t.emit_int(i,"r3")),s="r3"),n?this.write(`str r1, [r0, ${s}]`):this.write(`ldr r0, [r0, ${s}]`)}writeFailBranch(){this.write(".fail:"),this.write("mov r1, lr"),this.write(this.t.callCPP("pxt::failedCast"))}emitClassCall(t){let n=t.virtualIndex+e.firstMethodOffset();this.write(this.t.emit_int(4*n,"r1"));let o=t.classInfo,r="";t.isThis&&(r+="_this"),this.emitLabelledHelper("classCall_"+o.id+r,(()=>{this.write("ldr r0, [sp, #0] ; ld-this"),this.loadVTable(),e.target.switches.skipClassCheck||t.isThis||this.checkSubtype(o),this.write("ldr r1, [r3, r1] ; ld-method"),this.write("bx r1 ; keep lr from caller"),this.writeFailBranch()}))}emitBindHelper(){this.write(`\n                .section code\n                _pxt_bind_helper:\n                    push {r0, r2}\n                    movs r0, #2\n                    ldlit r1, _pxt_bind_lit\n                    ${this.t.callCPP("pxt::mkAction")}\n                    pop {r1, r2}\n                    str r1, [r0, #12]\n                    str r2, [r0, #16]\n                    bx r4 ; return\n\n                _pxt_bind_lit:\n                    ${this.t.obj_header("pxt::RefAction_vtable")}\n                    .short 0, 0 ; no captured vars\n                    .word .bindCode@fn\n                .bindCode:\n                    ; r0-bind object, r4-#args\n                    cmp r4, #12\n                    bge .fail\n                    lsls r3, r4, #2\n                    ldlit r2, _pxt_copy_list\n                    ldr r1, [r2, r3]\n\n                    ldr r3, [r0, #12]\n                    ldr r2, [r0, #16]\n                    adds r4, r4, #1\n                    bx r1\n            `),this.writeFailBranch(),this.write("_pxt_copy_list:"),this.write(e.U.range(12).map((e=>`.word _pxt_bind_${e}@fn`)).join("\n"));for(let e=0;e<12;e++){this.write(`\n                _pxt_bind_${e}:\n                    sub sp, #4\n                `);for(let t=0;t<e;++t)this.write(`ldr r1, [sp, #4*${t+1}]`),this.write(`str r1, [sp, #4*${t}]`);this.write(`\n                    push {r3} ; this-ptr\n                    mov r1, lr\n                    str r1, [sp, #4*${e+1}] ; store LR\n                    blx r2\n                    ldr r1, [sp, #4*${e+1}]\n                    add sp, #8\n                    bx r1\n                `)}}ifaceCallCore(t,n,o=!1){this.write("\n                ldr r2, [r3, #12] ; load mult\n                movs r7, r2\n                beq .objlit ; built-in types have mult=0\n                muls r7, r1\n                lsrs r7, r2\n                lsls r7, r7, #1 ; r7 - hash offset\n                ldr r3, [r3, #4] ; iface table\n                adds r3, r3, r7\n                ; r0-this, r1-method idx, r2-free, r3-hash entry, r4-num args, r7-free\n                ");for(let t=0;t<e.vtLookups;++t)t>0&&this.write("    adds r3, #2"),this.write("\n                ldrh r2, [r3, #0] ; r2-offset of descriptor\n                ldrh r7, [r2, r3] ; r7-method idx\n                cmp r7, r1\n                beq .hit\n                ");"get"==n?(this.write("movs r0, #0 ; undefined"),this.write("bx lr")):this.write("b .fail2"),this.write("\n            .hit:\n                adds r3, r3, r2 ; r3-descriptor\n                ldr r2, [r3, #4]\n                lsls r7, r2, #31\n                beq .field\n            ");const r=this.t.emit_int(t,"r4")+"\n     bx r2";if("set"==n?this.write(`\n                    ; check for next descriptor\n                    ldrh r7, [r3, #8]\n                    cmp r7, r1\n                    bne .fail2 ; no setter!\n                    ldr r2, [r3, #12]\n                    ${r}\n                `):(this.write("\n                    ; check if it's getter\n                    ldrh r7, [r3, #2]\n                    cmp r7, #1\n                "),"get"==n?this.write(`\n                        bne .bind\n                        ${r}\n                    .bind:\n                        mov r4, lr\n                        bl _pxt_bind_helper\n                    `):this.write(`\n                        beq .doublecall\n                        ${r}\n                    .doublecall:\n                        ; call getter\n                        movs r4, #1\n                        push {r0, lr}\n                        blx r2\n                        pop {r1, r2}\n                        mov lr, r2\n                        b .moveArgs\n                    `)),o||(this.write(`\n                .objlit:\n                    ldrh r2, [r3, #8]\n                    cmp r2, #${pxt.BuiltInType.RefMap}\n                    bne .fail\n                    mov r4, lr\n                `),"set"==n&&this.write("ldr r2, [sp, #4] ; ld-val"),this.write(this.t.callCPP("set"==n?"pxtrt::mapSet":"pxtrt::mapGet")),n?this.write("bx r4"):(this.write("mov lr, r4"),this.write("b .moveArgs"))),this.write(".field:"),"set"==n?this.write("\n                        ldr r3, [sp, #4] ; ld-val\n                        str r3, [r0, r2] ; store field\n                        bx lr\n                    "):"get"==n?this.write("\n                        ldr r0, [r0, r2] ; load field\n                        bx lr\n                    "):this.write("\n                        ldr r0, [r0, r2] ; load field\n                    "),!n){this.write(".moveArgs:");for(let e=0;e<t;++e)e==t-1?this.write("movs r1, r0"):this.write(`ldr r1, [sp, #4*${e+1}]`),this.write(`str r1, [sp, #4*${e}]`);this.lambdaCall(t-1)}o&&this.write(".objlit:"),this.writeFailBranch(),this.write(`\n            .fail2:\n                ${this.t.callCPP("pxt::missingProperty")}\n            `)}emitIfaceCall(t,n,o=""){e.U.assert(t.ifaceIndex>0),this.write(this.t.emit_int(t.ifaceIndex,"r1")),this.emitLabelledHelper("ifacecall"+n+"_"+o,(()=>{this.write("ldr r0, [sp, #0] ; ld-this"),this.loadVTable(),this.ifaceCallCore(n,o)}))}checkSubtype(e,t=".fail",n="r2"){e.classNo?(this.write(`ldrh ${n}, [r3, #8]`),this.write(`cmp ${n}, #${e.classNo}`),e.classNo==e.lastSubtypeNo?this.write(`bne ${t}`):(this.write(`blt ${t}`),this.write(`cmp ${n}, #${e.lastSubtypeNo}`),this.write(`bgt ${t}`))):this.write(`b ${t} ; always fails; class never instantiated`)}loadVTable(e="r2",t=".fail",n=".fail"){this.write(`lsls ${e}, r0, #30`),this.write(`bne ${t}`),this.write("cmp r0, #0"),this.write(`beq ${n}`),this.write("ldr r3, [r0, #0]"),this.write("; vtable in R3")}emitInstanceOf(t,n){let o="inst_"+t.id+"_"+n;this.emitLabelledHelper(o,(()=>{"validateNullable"==n?this.loadVTable("r2",".tagged",".undefined"):this.loadVTable("r2",".fail",".fail"),this.checkSubtype(t),"bool"==n?(this.write(`movs r0, #${e.taggedTrue}`),this.write("bx lr"),this.write(".fail:"),this.write(`movs r0, #${e.taggedFalse}`),this.write("bx lr")):"validate"==n?(this.write("bx lr"),this.writeFailBranch()):"validateNullable"==n?(this.write(".undefined:"),this.write("bx lr"),this.write(".tagged:"),this.write(`cmp r0, #${e.taggedNull} ; check for null`),this.write("bne .fail"),this.write("movs r0, #0"),this.write("bx lr"),this.writeFailBranch()):e.U.oops()}))}emitSharedDef(t){let n=t.args[0];if(e.U.assert(n.totalUses>=1),e.U.assert(0===n.currUses),n.currUses=1,1==n.totalUses)return this.emitExpr(n);this.emitExpr(n),this.exprStack.unshift(n),this.write(this.t.push_local("r0")+"; tmpstore @"+this.exprStack.length)}clearArgs(t,n){t.length,n.length;let o=t.concat(n);for(let t of o)0==t.currUses&&1==t.totalUses||(console.log(t.toString()),console.log(o.map((e=>e.toString()))),e.U.oops(`wrong uses: ${t.currUses} ${t.totalUses}`)),t.currUses=1;this.clearStack()}builtInClassNo(e){return{id:"builtin"+e,classNo:e,lastSubtypeNo:e}}emitBeginTry(e){this.emitExprInto(e.args[0],"r0"),this.write("bl _pxt_save_exception_state")}emitRtCall(t,n=null){let o=t.data;if("pxt::beginTry"==o)return this.emitBeginTry(t);let r=t.mask||{refMask:0},i=r.conversions||[],s=t.args.map(((e,t)=>({idx:t,expr:e,isSimple:e.isLiteral(),isRef:0!=(r.refMask&1<<t),conv:i.find((e=>e.argIdx==t))})));e.U.assert(s.length<=4);let a=!1;for(let t of e.U.reversed(s))t.expr.isPure()?t.isSimple||t.isRef||a&&!t.expr.isStateless()||(t.isSimple=!0):a=!0;for(let e of s)e.conv&&(e.isSimple=!1);let l=s.filter((e=>!e.isSimple));if(l.every((e=>e.expr.isPure()&&!e.isRef&&!e.conv))){for(let e of l)e.isSimple=!0;l=[]}let c=l[0],u=!0;if(1!=l.length||c.conv||c.isRef){for(let e of l)this.pushArg(e.expr);this.alignExprStack(0);let t=l.filter((e=>!!e.conv));if(t.length){const n=this.redirectOutput((()=>{let n=0;e.target.switches.inlineConversions||(this.t.stackAligned()?n+=2:n+=1);for(let o of t){if(e.isThumb()&&"pxt::toInt"==o.conv.method){this.write(this.loadFromExprStack("r0",o.expr,n)),this.write("asrs r0, r0, #1");let t=e.target.switches.inlineConversions?o.expr.getId():n;this.write("bcs .isint"+t),this.write("lsls r0, r0, #1"),this.alignedCall(o.conv.method,"",n),this.write(".isint"+t+":"),this.write(this.t.push_fixed(["r0"]))}else this.write(this.loadFromExprStack("r0",o.expr,n)),o.conv.refTag?e.target.switches.skipClassCheck||this.emitInstanceOf(this.builtInClassNo(o.conv.refTag),o.conv.refTagNullable?"validateNullable":"validate"):(this.alignedCall(o.conv.method,"",n),o.conv.returnsRef&&this.write(this.loadFromExprStack("r0",o.expr,n,!0))),this.write(this.t.push_fixed(["r0"]));n++}for(let o of e.U.reversed(t))n--,this.write(this.t.pop_fixed(["r"+o.idx]));for(let e of l)e.conv||this.write(this.loadFromExprStack("r"+e.idx,e.expr,n))}));e.target.switches.inlineConversions?this.write(n):this.emitHelper(this.t.helper_prologue()+n+this.t.helper_epilogue(),"conv")}else for(let e of l)this.write(this.loadFromExprStack("r"+e.idx,e.expr))}else this.emitExpr(c.expr),0!=c.idx&&this.write(this.t.mov("r"+c.idx,"r0")),u=!1;for(let e of s)e.isSimple&&this.emitExprInto(e.expr,"r"+e.idx);n?n():"langsupp::ignore"!=o&&this.alignedCall(o,"",0,!0),u&&this.clearArgs(l.filter((e=>!e.isRef)).map((e=>e.expr)),l.filter((e=>e.isRef)).map((e=>e.expr)))}alignedCall(t,n="",o=0,r=!1){(e.U.startsWith(t,"_cmp_")||e.U.startsWith(t,"_pxt_"))&&(r=!1),this.write(this.t.call_lbl(t,r,this.stackAlignmentNeeded(o))+n)}emitLabelledHelper(e,t){if(this.labelledHelpers[e])this.write(this.t.call_lbl(this.labelledHelpers[e]));else{let n=this.redirectOutput(t);this.emitHelper(n,e),this.labelledHelpers[e]=this.bin.codeHelpers[n]}}emitHelper(e,t="hlp"){if(!this.bin.codeHelpers[e]){let n=Object.keys(this.bin.codeHelpers).length;this.bin.codeHelpers[e]=`_${t}_${n}`}this.write(this.t.call_lbl(this.bin.codeHelpers[e]))}pushToExprStack(e){e.totalUses=1,e.currUses=0,this.exprStack.unshift(e)}pushArg(e){this.clearStack(!0);this.exprStack.length;this.emitExpr(e),this.clearStack(!0),this.write(this.t.push_local("r0")+" ; proc-arg"),this.pushToExprStack(e)}loadFromExprStack(t,n,o=0,r=!1){let i=this.exprStack.indexOf(n);return e.assert(i>=0),this.t.load_reg_src_off(t,"sp",(i+o).toString(),!0,r)+" ; estack\n"}pushDummy(){let t=e.ir.numlit(0);t.totalUses=1,t.currUses=1,this.exprStack.unshift(t)}alignExprStack(e){let t=this.stackAlignmentNeeded(e);if(t)for(let e=0;e<t;++e)this.write("push {r5} ; align"),this.pushDummy()}emitFieldMethods(){for(let t of["get","set"]){this.write(`\n                .section code\n                _pxt_map_${t}:\n                `),this.loadVTable("r4"),this.checkSubtype(this.builtInClassNo(pxt.BuiltInType.RefMap),".notmap","r4"),this.write(this.t.callCPPPush("set"==t?"pxtrt::mapSetByString":"pxtrt::mapGetByString")),this.write(".notmap:");let n="set"==t?2:1,o=!1;this.write("mov r4, r3 ; save VT"),"set"==t?(e.target.stackAlign&&(o=!0,this.write("push {lr} ; align")),this.write("\n                            push {r0, r2, lr}\n                            mov r0, r1\n                        ")):this.write("\n                            push {r0, lr}\n                            mov r0, r1\n                        "),this.write("\n                    bl pxtrt::lookupMapKey\n                    mov r1, r0 ; put key index in r1\n                    ldr r0, [sp, #0] ; restore obj pointer\n                    mov r3, r4 ; restore vt\n                    bl .dowork\n                "),this.write(this.t.pop_locals(n+(o?1:0))),this.write("pop {pc}"),this.write(".dowork:"),this.ifaceCallCore(n,t,!0)}}emitArrayMethod(t,n){this.write(`\n            .section code\n            _pxt_${n?"buffer":"array"}_${t}:\n            `),this.loadVTable("r4");let o=this.builtInClassNo(n?pxt.BuiltInType.BoxedBuffer:pxt.BuiltInType.RefCollection);e.target.switches.skipClassCheck||this.checkSubtype(o,".fail","r4");const r=e.isStackMachine()||e.target.runtimeIsARM||n?"ldr":"ldrh";this.write(`\n                asrs r1, r1, #1\n                bcc .notint\n                ${r} r4, [r0, #${n?4:8}]\n                cmp r1, r4\n                bhs .oob\n            `);let i="r1";n?(i="#8",this.write("\n                    adds r4, r0, r1\n                ")):this.write("\n                    lsls r1, r1, #2\n                    ldr r4, [r0, #4]\n                ");let s=n?"b":"",a=n&&"get"==t?"lsls r0, r0, #1\nadds r0, #1":"";"set"==t?this.write(`\n                        str${s} r2, [r4, ${i}]\n                        bx lr\n                    `):this.write(`\n                        ldr${s} r0, [r4, ${i}]\n                        ${a}\n                        bx lr\n                    `),this.write(`\n            .notint:\n                lsls r1, r1, #1\n                ${this.t.pushLR()}\n                push {r0, r2}\n                mov r0, r1\n                ${this.t.callCPP("pxt::toInt")}\n                mov r1, r0\n                pop {r0, r2}\n            .doop:\n                ${this.t.callCPP(`Array_::${t}At`)}\n                ${a}\n                ${this.t.popPC()}\n            `),this.writeFailBranch(),"get"==t?this.write(`\n                    .oob:\n                        movs r0, #${n?1:0} ; 0 or undefined\n                        bx lr\n                `):this.write(`\n                    .oob:\n                        ${this.t.pushLR()}\n                        b .doop\n                `)}emitArrayMethods(){for(let e of["get","set"])this.emitArrayMethod(e,!0),this.emitArrayMethod(e,!1)}emitLambdaTrampoline(){let t=e.target.stackAlign?"r3,":"";this.write(`\n            .section code\n            _pxt_lambda_trampoline:\n                push {${t} r4, r5, r6, r7, lr}\n                mov r4, r8\n                mov r5, r9\n                mov r6, r10\n                mov r7, r11\n                push {r4, r5, r6, r7} ; save high registers\n                mov r4, r1\n                mov r5, r2\n                mov r6, r3\n                mov r7, r0\n                `),this.emitInstanceOf(this.builtInClassNo(pxt.BuiltInType.RefAction),"validate"),this.write(`\n                mov r0, sp\n                push {r4, r5, r6, r7} ; push args and the lambda\n                mov r1, sp\n                bl pxt::pushThreadContext\n                mov r6, r0          ; save ctx or globals\n                mov r5, r7          ; save lambda for closure\n                mov r0, r5          ; also save lambda pointer in r0 - needed by pxt::bindMethod\n                ldr r1, [r5, #8]    ; ld fnptr\n                movs r4, #3         ; 3 args\n                blx r1              ; execute the actual lambda\n                mov r7, r0          ; save result\n                @dummystack 4\n                add sp, #4*4        ; remove arguments and lambda\n                mov r0, r6   ; or pop the thread context\n                bl pxt::popThreadContext\n                mov r0, r7 ; restore result\n                pop {r4, r5, r6, r7} ; restore high registers\n                mov r8, r4\n                mov r9, r5\n                mov r10, r6\n                mov r11, r7\n                pop {${t} r4, r5, r6, r7, pc}`),this.write(`\n            .section code\n            ; r0 - try frame\n            ; r1 - handler PC\n            _pxt_save_exception_state:\n                push {r0, lr}\n                ${this.t.callCPP("pxt::beginTry")}\n                pop {r1, r4}\n                str r1, [r0, #1*4] ; PC\n                mov r1, sp\n                str r1, [r0, #2*4] ; SP\n                str r5, [r0, #3*4] ; lambda ptr\n                bx r4\n                `),this.write("\n            .section code\n            ; r0 - try frame\n            ; r1 - thread context\n            _pxt_restore_exception_state:\n                mov r6, r1\n                ldr r1, [r0, #2*4] ; SP\n                mov sp, r1\n                ldr r5, [r0, #3*4] ; lambda ptr\n                ldr r1, [r0, #1*4] ; PC\n                movs r0, #1\n                orrs r1, r0\n                bx r1\n                "),this.write("\n            .section code\n            _pxt_stringConv:\n            "),this.loadVTable(),this.checkSubtype(this.builtInClassNo(pxt.BuiltInType.BoxedString),".notstring"),this.write(`\n                bx lr\n\n            .notstring: ; no string, but vtable in r3\n                ldr r7, [r3, #4*${e.firstMethodOffset()-1}]\n                cmp r7, #0\n                beq .fail\n                push {r0, lr}\n                movs r4, #1\n                blx r7\n                str r0, [sp, #0]\n                b .numops\n\n            .fail: ; not an object or no toString\n                push {r0, lr}\n            .numops:\n                ${this.t.callCPP("numops::toString")}\n                pop {r1}\n                pop {pc}\n            `)}emitProcCall(t){let n=[],o=null,r="",i=t.data;if(i.proc&&i.proc.inlineBody)return this.emitExpr(i.proc.inlineSelf(t.args));let s=-1==i.virtualIndex,a=!1;for(let o of e.U.reversed(t.args)){if(o.isPure()){if(!a||o.isStateless())continue}else a=!0;n.push(o)}if(n.reverse(),n.length<=1){let e=n[0];e&&(o=e,this.clearStack(!0),this.emitExpr(e),e==t.args[t.args.length-1]?r="r0":(r="r3",this.write(this.t.mov("r3","r0")))),n=[]}else for(let e of n)this.pushArg(e);this.alignExprStack(t.args.length);let l=["r1","r2","r3","r4"],c=[];if(n.length){let e=-1;for(let t of n)e=Math.max(this.exprStack.indexOf(t),e);if(e++,e<=l.length){l=l.slice(0,e),this.write(this.t.pop_fixed(l)),c=this.exprStack.splice(0,e);let t=[];for(let o=e-1;o>=0;--o)n.indexOf(c[o])<0&&(t.push(l[o]),this.exprStack.unshift(c[o]));t.length&&this.write(this.t.push_fixed(t))}else l=null,this.write(this.t.reg_gets_imm("r7",0))}let u=e.U.reversed(t.args);s&&u.unshift(u.pop());for(let t of u)if(n.indexOf(t)>=0){if(l)this.write(this.t.push_fixed([l[c.indexOf(t)]]));else{this.write(this.loadFromExprStack("r0",t)),this.write(this.t.push_local("r0")+" ; re-push"),this.write(this.loadFromExprStack("r7",t,1,!0));let n=this.exprStack.indexOf(t),o=e.ir.numlit(0);o.currUses=1,o.totalUses=1,this.exprStack[n]=o}this.exprStack.unshift(t)}else t===o?(this.write(this.t.push_local(r)+" ; the one arg"),this.pushToExprStack(t)):this.pushArg(t);let p=this.mkLbl("_proccall"),d=-1;if(s){let e=t.args.length-1;this.write(this.loadFromExprStack("r0",t.args[0])),this.emitLabelledHelper("lambda_call"+e,(()=>{this.lambdaCall(e),this.writeFailBranch()}))}else if(null!=i.virtualIndex||null!=i.ifaceIndex)null!=i.ifaceIndex?i.isSet?(e.assert(2==t.args.length),this.emitIfaceCall(i,t.args.length,"set")):this.emitIfaceCall(i,t.args.length,i.noArgs?"get":""):this.emitClassCall(i),this.write(p+":");else{let e=i.proc;d=e.seqNo,this.write(this.t.call_lbl(e.label()+(i.isThis?"_nochk":""))),this.write(p+":")}this.calls.push({procIndex:d,stack:0,addr:0,callLabel:p}),s&&t.args[0].isStateless()?this.clearArgs([t.args[0]],t.args.slice(1)):this.clearArgs([],t.args)}lambdaCall(t){this.write("; lambda call"),this.loadVTable(),e.target.switches.skipClassCheck||this.checkSubtype(this.builtInClassNo(pxt.BuiltInType.RefAction)),this.write(`\n                movs r4, #${t}\n                ldrh r1, [r0, #4]\n                cmp r1, #0\n                bne .pushR5\n                ldr r1, [r0, #8]\n                bx r1 ; keep lr from the caller\n            .pushR5:\n                sub sp, #8\n            `);for(let e=0;e<t;++e)this.write(`ldr r1, [sp, #4*${e+2}]`),this.write(`str r1, [sp, #4*${e}]`);this.write(`\n                str r5, [sp, #4*${t}]\n                mov r1, lr\n                str r1, [sp, #4*${t+1}]\n                mov r5, r0\n                ldr r7, [r5, #8]\n                blx r7 ; exec actual lambda\n                ldr r4, [sp, #4*${t+1}] ; restore what was in LR\n                ldr r5, [sp, #4*${t}] ; restore lambda ctx\n            `);for(let e=0;e<t;++e)this.write(`ldr r1, [sp, #4*${e}]`),this.write(`str r1, [sp, #4*${e+2}]`);this.write("\n                add sp, #8\n                bx r4\n            "),this.write("; end lambda call")}emitStore(t,n){switch(t.exprKind){case e.ir.EK.CellRef:let o=t.data;if(this.emitExpr(n),o.isGlobal()){let e=this.bitSizeInfo(o.bitSize),t="#"+o.index;o.index>=e.immLimit&&(this.write(this.t.emit_int(o.index,"r1")),t="r1"),this.write(this.t.load_reg_src_off("r7","r6","#0")),this.write(this.t.load_reg_src_off("r0","r7",t,!1,!0,e))}else{let[e,t,n]=this.cellref(o);this.write(this.t.load_reg_src_off("r0",e,t,n,!0))}break;case e.ir.EK.FieldAccess:this.emitRtCall(e.ir.rtcall("dummy",[t.args[0],n]),(()=>this.emitFieldAccess(t,!0)));break;default:e.oops()}}cellref(t){if(t.isGlobal())throw e.oops();if(t.iscap){let n=t.index+3;return e.assert(0<=n&&n<32),["r5",n.toString(),!0]}if(t.isarg){return["sp","args@"+t.index.toString()+":"+this.baseStackSize,!1]}return["sp","locals@"+t.index,!1]}emitLambdaWrapper(e){if(this.write(""),this.write(".section code"),this.write(".balign 4"),e&&(this.proc.info.usedAsValue=!0),!this.proc.info.usedAsValue&&!this.proc.info.usedAsIface)return;this.proc.info.usedAsValue&&(this.write(this.proc.label()+"_Lit:"),this.write(this.t.obj_header("pxt::RefAction_vtable")),this.write(".short 0, 0 ; no captured vars"),this.write(`.word ${this.proc.label()}_args@fn`)),this.write(`${this.proc.label()}_args:`);let t=this.proc.args.length;if(0==t)return;this.write(`cmp r4, #${t}`),this.write(`bge ${this.proc.label()}_nochk`);let n=this.stackAlignmentNeeded(t+1),o=n?t+2:t+1;this.write("push {lr}"),this.emitLabelledHelper(`expand_args_${t}`,(()=>{this.write("movs r0, #0"),this.write("movs r1, #0"),n&&this.write("push {r0}");for(let e=t;e>0;e--)e!=t&&(this.write(`cmp r4, #${e}`),this.write(`blt .zero${e}`),this.write(`ldr r0, [sp, #${o-1}*4]`),this.write(`str r1, [sp, #${o-1}*4] ; clear existing`),this.write(`.zero${e}:`)),this.write("push {r0}");this.write("bx lr")})),this.write(`bl ${this.proc.label()}_nochk`);let r=t+(n?1:0);this.write(`@dummystack ${r}`),this.write(`add sp, #4*${r}`),this.write("pop {pc}")}emitCallRaw(t){let n=e.hexfile.lookupFunc(t);e.assert(!!n,"unimplemented raw function: "+t),this.alignedCall(t)}}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){const t={"numops::adds":"+","numops::subs":"-","numops::div":"/","numops::mod":"%","numops::muls":"*","numops::ands":"&","numops::orrs":"|","numops::eors":"^","numops::bnot":"~","numops::lsls":"<<","numops::asrs":">>","numops::lsrs":">>>","numops::le":"<=","numops::lt":"<","numops::lt_bool":"<","numops::ge":">=","numops::gt":">","numops::eq":"==","pxt::eq_bool":"==","pxt::eqq_bool":"===","numops::eqq":"===","numops::neqq":"!==","numops::neq":"!="},n={"pxsim.Boolean_":"","pxsim.pxtcore":"","pxsim.String_":"","pxsim.ImageMethods":"","pxsim.Array_":"","pxsim.pxtrt":"","pxsim.numops":""},o={"pxsim.Array_.getAt":"","pxsim.Array_.length":"","pxsim.Array_.mk":"","pxsim.Array_.push":"","pxsim.Boolean_.bang":"","pxsim.String_.concat":"","pxsim.String_.stringConv":"","pxsim.numops.toBool":"","pxsim.numops.toBoolDecr":"","pxsim.pxtcore.mkAction":"","pxsim.pxtcore.mkClassInstance":"","pxsim.pxtrt.ldlocRef":"","pxsim.pxtrt.mapGetByString":"","pxsim.pxtrt.stclo":"","pxsim.pxtrt.stlocRef":""};function r(e){let t="";for(let n of Object.keys(e)){const o=n.replace(/\./g,"_");e[n]=o,t+=`const ${o} = ${n};\n`}return t}function i(e){"pxt."==(e=e.replace(/::/g,".")).slice(0,4)&&(e="pxtcore."+e.slice(4));const t="pxsim."+e;if(o.hasOwnProperty(t))return o[t];const r=t.lastIndexOf(".");if(r>0){const e=t.slice(0,r);if(n.hasOwnProperty(e))return n[e]+t.slice(r)}return t}e.isBuiltinSimOp=function(n){return!!e.U.lookup(t,n.replace(/\./g,"::"))},e.shimToJs=i;const s=["runtime","oops","doNothing","pxsim","globals","maybeYield","setupDebugger","isBreakFrame","breakpoint","trace","checkStack","leave","checkResumeConsumed","setupResume","setupLambda","checkSubtype","failedCast","buildResume","mkVTable","bind","leaveAccessor"];e.jsEmit=function(a){let l="(function (ectx) {\n'use strict';\n";for(let e of s)l+=`const ${e} = ectx.${e};\n`;l+="const __this = runtime;\n",l+="const pxtrt = pxsim.pxtrt;\n",l+="let yieldSteps = 1;\n",l+="ectx.setupYield(function() { yieldSteps = 100; })\n",l+="pxsim.setTitle("+JSON.stringify(a.getTitle())+");\n";let c={},u={};for(let e of a.res.configData||[])c[e.key+""]=e.value,u[e.name]=e.key;l+="pxsim.setConfigData("+JSON.stringify(c,null,1)+", "+JSON.stringify(u,null,1)+");\n",l+="pxtrt.mapKeyNames = "+JSON.stringify(a.ifaceMembers,null,1)+";\n";const p=a.setPerfCounters(["SysScreen"]);l+="__this.setupPerfCounters("+JSON.stringify(p,null,1)+");\n",l+=r(o),l+=r(n);let d=0,g=0;a.procs.forEach((n=>{let o;n.cachedJS?(o=n.cachedJS,d+=o.length):(o=function(n,o){if(o.cachedJS)return o.cachedJS;let r="",s=e=>{r+=e+"\n"},a=e=>{r+="    "+e+"\n"},l=e.ir.EK,c=[],u=0,p={},d="";s(`\nfunction ${o.label()}(s) {\nlet r0 = s.r0, step = s.pc;\ns.pc = -1;\n`),o.perfCounterNo&&s(`if (step == 0) __this.startPerfCounter(${o.perfCounterNo});\n`);s("\nwhile (true) {\nif (yieldSteps-- < 0 && maybeYield(s, step, r0) || runtime !== pxsim.runtime) return null;\nswitch (step) {\n  case 0:\n"),o.locals.forEach((e=>{a(`${k(e)} = undefined;`)})),o.args.length&&(a("if (s.lambdaArgs) {"),o.args.forEach(((e,t)=>{a(`  ${k(e)} = (s.lambdaArgs[${t}]);`)})),a("  s.lambdaArgs = null;"),a("}"));o.classInfo&&o.info.thisParameter&&(a("r0 = s.arg0;"),x(o.classInfo,"validate"));let g=0,h=[];for(let t of o.body)t.stmtKind==e.ir.SK.Label&&t.lblNumUses>0&&(t.lblId=++g);let f=0;for(let t of o.body){switch(t.stmtKind){case e.ir.SK.Expr:S(t.expr);break;case e.ir.SK.StackEmpty:w();break;case e.ir.SK.Jmp:let n=!1;for(let r=f+1;r<o.body.length&&o.body[r].stmtKind==e.ir.SK.Label;++r)if(t.lbl==o.body[r]){n=!0;break}b(t,n);break;case e.ir.SK.Label:t.lblNumUses>0&&s(`  case ${t.lblId}:`);break;case e.ir.SK.Comment:s(`// ${t.expr.data}`);break;case e.ir.SK.Breakpoint:y(t);break;default:e.oops()}f++}w(),o.perfCounterNo&&s(`__this.stopPerfCounter(${o.perfCounterNo});\n`);o.isGetter()?a("return leaveAccessor(s, r0)"):a("return leave(s, r0)");s("  default: oops()"),s("} } }");let _=e.nodeLocationInfo(o.action);_.functionName=o.getName(),_.argumentNames=o.args&&o.args.map((e=>e.getName())),s(`${o.label()}.info = ${JSON.stringify(_)}`),o.isGetter()&&s(`${o.label()}.isGetter = true;`);o.isRoot&&s(`${o.label()}.continuations = [ ${h.join(",")} ]`);return s(m(o.label()+"_mk",o.label(),u,Object.keys(p))),s(d),o.cachedJS=r,r;function m(e,t,n,o){let r="";r+=`\nfunction ${e}(s) {\n    checkStack(s.depth);\n    return {\n        parent: s, fn: ${t}, depth: s.depth + 1,\n        pc: 0, retval: undefined, r0: undefined, overwrittenPC: false, lambdaArgs: null,\n`;for(let e=0;e<n;++e)r+=`  tmp_${e}: undefined,\n`;for(let e of o)r+=`  ${e}: undefined,\n`;return r+="} }\n",r}function y(e){let t,r=e.breakpointInfo.id;if(a(`s.lastBrkId = ${r};`),n.options.breakpoints){t=++g;let i=`return breakpoint(s, ${t}, ${r}, r0);`;e.breakpointInfo.isDebuggerStmt?a(i):(a(`if ((breakpoints[0] && isBreakFrame(s)) || breakpoints[${r}]) ${i}`),n.options.trace&&a(`else return trace(${r}, s, ${t}, ${o.label()}.info);`))}else{if(!n.options.trace)return;t=++g,a(`return trace(${r}, s, ${t}, ${o.label()}.info);`)}s(`  case ${t}:`)}function k(e){if(e.isGlobal())return"globals."+e.uniqueName();if(e.iscap)return`s.caps[${e.index}]`;const t=e.uniqueName();return p[t]=!0,"s."+t}function b(t,n){if(t.lbl.lblNumUses==e.ir.lblNumUsesJmpNext||n)return e.assert(t.jmpMode==e.ir.JmpMode.Always),void(t.expr&&S(t.expr));e.assert(t.lbl.lblNumUses>0);let o=`{ step = ${t.lbl.lblId}; continue; }`;t.jmpMode==e.ir.JmpMode.Always?(t.expr&&S(t.expr),a(o)):(S(t.expr),t.jmpMode==e.ir.JmpMode.IfNotZero?a(`if (r0) ${o}`):a(`if (!r0) ${o}`))}function v(e){switch(e.exprKind){case l.NumberLiteral:case l.PointerLiteral:case l.SharedRef:case l.CellRef:return!0;default:return!1}}function T(e){return v(e)?E(e):(S(e),"r0")}function E(t){switch(t.exprKind){case l.NumberLiteral:if(!0===t.data)return"true";if(!1===t.data)return"false";if(null===t.data)return"null";if(void 0===t.data)return"undefined";if("number"==typeof t.data)return t.data+"";throw e.oops("invalid data: "+typeof t.data);case l.PointerLiteral:if(t.ptrlabel())return t.ptrlabel().lblId+"";if(null!=t.hexlit())return d+=`const ${t.data} = pxsim.BufferMethods.createBufferFromHex("${t.hexlit()}")\n`,t.data;if("string"==typeof t.jsInfo)return t.jsInfo;e.U.oops();case l.SharedRef:let n=t.args[0];e.U.assert(!!n.currUses),e.U.assert(n.currUses<n.totalUses),n.currUses++;let o=c.indexOf(n);return e.U.assert(o>=0),"s.tmp_"+o;case l.CellRef:return k(t.data);default:throw e.oops()}}function S(e){switch(e.exprKind){case l.JmpValue:a("// jmp value (already in r0)");break;case l.Nop:a("// nop");break;case l.FieldAccess:let t=e.data,n=t.shimName,o=T(e.args[0]);return n?void a(`r0 = ${o}${n};`):void a(`r0 = ${o}.fields["${t.name}"];`);case l.Store:return N(e.args[0],e.args[1]);case l.RuntimeCall:return A(e);case l.ProcCall:return I(e);case l.SharedDef:return B(e);case l.Sequence:return e.args.forEach(S);case l.InstanceOf:return S(e.args[0]),void x(e.data,e.jsInfo);default:a(`r0 = ${E(e)};`)}}function C(e,t="r0"){return`checkSubtype(${t}, ${`${e.id}_VT`})`}function x(t,n,o="r0"){"bool"==n?a(`r0 = ${C(t)};`):"validate"==n?a(`if (!${C(t,o)}) failedCast(${o});`):e.U.oops()}function B(t){let n=t.args[0];if(e.U.assert(n.totalUses>=1),e.U.assert(0===n.currUses),n.currUses=1,1==n.totalUses)return S(n);{const e=c.length;c.push(n);let t=T(n);"r0"!=t&&(t="r0 = "+t),a(`s.tmp_${e} = ${t};`)}}function A(n){let o=e.ir.flattenArgs(n.args);o.precomp.forEach(S);let r=n.data,l=o.flattened.map(E);if("langsupp::ignore"==r)return;let c="";if(c="."==r[0]?`${l[0]}${r}(${l.slice(1).join(", ")})`:"="==r[0]?`(${l[0]})${r.slice(1)} = (${l[1]})`:e.U.startsWith(r,"new ")?`new ${i(r.slice(4))}(${l.join(", ")})`:e.U.lookup(t,r)?2==l.length?`(${l[0]} ${e.U.lookup(t,r)} ${l[1]})`:`(${e.U.lookup(t,r)} ${l[0]})`:`${i(r)}(${l.join(", ")})`,0==n.callingConvention)a(`r0 = ${c};`);else{let e=++g;h.push(e),"String_::stringConv"==r&&a(`if ((${l[0]}) && (${l[0]}).vtable) {`),2==n.callingConvention?a(`(function(cb) { ${c}.then(cb) })(buildResume(s, ${e}));`):(a(`setupResume(s, ${e});`),a(`${c};`)),a("checkResumeConsumed();"),a("return;"),"String_::stringConv"==r&&a(`} else { s.retval = (${l[0]}) + ""; }`),s(`  case ${e}:`),a("r0 = s.retval;")}}function I(t){const r=t.data,i=r.proc;if(i&&i.inlineBody)return S(i.inlineSelf(t.args));const l=e.ir.rtcall("<frame>",[]);l.totalUses=1,l.currUses=0;const u=c.length;c.push(l);const p=`s.tmp_${u}`,d=++g,h=-1==r.virtualIndex;if(i)a(`${p} = ${i.label()}_mk(s);`);else{let i="generic";null!=r.ifaceIndex?i="if_"+n.ifaceMembers[r.ifaceIndex]:h?i="lambda":null!=r.virtualIndex?i=r.classInfo.id+"_v"+r.virtualIndex:e.U.oops();const s=t.args.length;i+="_"+s+"_mk",n.recordHelper(o.usingCtx,i,(()=>{const t=e.U.range(s).map((e=>"arg"+e));return m(i,"null",5,t)})),a(`${p} = ${i}(s);`)}t.args.forEach(((e,t)=>{let n=`arg${t}`;h&&(n=0==t?"argL":"arg"+(t-1)),a(`${p}.${n} = ${T(e)};`)}));let f=`s.pc = ${d}; return ${p};`;if(null!=r.callLocationIndex&&(f=`s.callLocIdx = ${r.callLocationIndex}; ${f}`),null!=r.ifaceIndex){e.U.assert(null==i);const o=n.ifaceMembers[r.ifaceIndex];e.U.assert(!!o,`no name for ${r.ifaceIndex}`),a(`if (!${p}.arg0.vtable.iface) {`);let s=t.args.map(((e,t)=>`${p}.arg${t}`));s.splice(1,0,JSON.stringify(o));const l=`pxsim_pxtrt.map${r.isSet?"Set":"Get"}ByString`;r.noArgs?a(`  s.retval = ${l}(${s.join(", ")});`):(e.U.assert(!r.isSet),a(`  setupLambda(${p}, ${l}(${s.slice(0,2).join(", ")}), ${t.args.length});`),a(`  ${f}`)),a("} else {"),a(`  ${p}.fn = ${p}.arg0.vtable.iface["${r.isSet?"set/":""}${o}"];`);let c=`${p}.arg0.fields["${o}"]`;r.isSet?(a(`  if (${p}.fn === null) { ${c} = ${p}.arg1; }`),a(`  else if (${p}.fn === undefined) { failedCast(${p}.arg0) } `)):r.noArgs?(a(`  if (${p}.fn == null) { s.retval = ${c}; }`),a(`  else if (!${p}.fn.isGetter) { s.retval = bind(${p}); }`)):(a(`  if (${p}.fn == null) { setupLambda(${p}, ${c}, ${t.args.length}); ${f} }`),a(`  else if (${p}.fn.isGetter) { ${p}.stage2Call = true; ${f}; }`)),a(` else { ${f} }`),a("}"),f=""}else if(-1==r.virtualIndex)e.U.assert(null==i),a(`setupLambda(${p}, ${p}.argL);`);else if(null!=r.virtualIndex){e.U.assert(null==i),e.assert(r.virtualIndex>=0),x(r.classInfo,"validate",p+".arg0");const t=r.classInfo.vtable[r.virtualIndex];a(`${p}.fn = ${p}.arg0.vtable.methods.${t.getName()};`)}else e.U.assert(null!=i);f&&a(f),s(`  case ${d}:`),a("r0 = s.retval;"),l.currUses=1}function D(t){switch(t){case 0:return"";case 1:return"pxtrt.toInt8";case 3:return"pxtrt.toInt16";case 5:return"pxtrt.toInt32";case 2:return"pxtrt.toUInt8";case 4:return"pxtrt.toUInt16";case 6:return"pxtrt.toUInt32";default:throw e.oops()}}function N(t,n){switch(t.exprKind){case l.CellRef:let o=t.data,r=T(n);a(`${k(o)} = ${D(o.bitSize)}(${r});`);break;case l.FieldAccess:let i=t.data,s=i.shimName;s||(s=`.fields["${i.name}"]`),S(e.ir.rtcall("="+s,[t.args[0],n]));break;default:e.oops()}}function w(){for(let t of c)t.totalUses!==t.currUses&&e.oops();u=Math.max(c.length,u),c=[]}}(a,n),g+=o.length),l+="\n"+o+"\n"})),l+=e.U.values(a.codeHelpers).join("\n")+"\n",a.usedClassInfos.forEach((t=>{l+=function(t){e.U.assert(void 0!==t.classNo),e.U.assert(void 0!==t.lastSubtypeNo);let n=parseInt(t.attrs.maxBgInstances);n||(n=null);let o=`const ${t.id}_VT = mkVTable({\n  name: ${JSON.stringify(e.getName(t.decl))},\n  numFields: ${t.allfields.length},\n  classNo: ${t.classNo},\n  lastSubtypeNo: ${t.lastSubtypeNo},\n  maxBgInstances: ${n},\n  methods: {\n`;for(let e of t.vtable)o+=`    "${e.getName()}": ${e.label()},\n`;o+="  },\n",o+="  iface: {\n";for(let e of t.itable)o+=`    "${e.name}": ${e.proc?e.proc.label():"null"},\n`,e.setProc?o+=`    "set/${e.name}": ${e.setProc.label()},\n`:e.proc||(o+=`    "set/${e.name}": null,\n`);return o+="  },\n",t.toStringMethod&&(o+="  toStringMethod: "+t.toStringMethod.label()+",\n"),o+="});\n",o}(t)})),a.res.breakpoints&&(l+=`\nconst breakpoints = setupDebugger(${a.res.breakpoints.length}, [${a.globals.filter((e=>e.isUserVariable)).map((e=>`"${e.uniqueName()}"`)).join(",")}])\n`),l+=`\nreturn ${a.procs[0]?a.procs[0].label():"null"}\n})\n`;const h=l.length,f=e=>(100*e/h).toFixed(2)+"%",_=`// total=${l.length} new=${f(g)} cached=${f(d)} other=${f(h-g-d)}\n`;a.writeFile(e.BINARY_JS,_+l)}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){e.thumbCmpMap={"numops::lt":"_cmp_lt","numops::gt":"_cmp_gt","numops::le":"_cmp_le","numops::ge":"_cmp_ge","numops::eq":"_cmp_eq","numops::eqq":"_cmp_eqq","numops::neq":"_cmp_neq","numops::neqq":"_cmp_neqq"};const t={"numops::adds":"_numops_adds","numops::subs":"_numops_subs","numops::orrs":"_numops_orrs","numops::eors":"_numops_eors","numops::ands":"_numops_ands","numops::lsls":"_numops_lsls","numops::asrs":"_numops_asrs","numops::lsrs":"_numops_lsrs","pxt::toInt":"_numops_toInt","pxt::fromInt":"_numops_fromInt"};class n extends e.AssemblerSnippets{stackAligned(){return e.target.stackAlign&&e.target.stackAlign>1}pushLR(){return this.stackAligned()?"push {lr, r5}  ; r5 for align":"push {lr}"}popPC(){return this.stackAligned()?"pop {pc, r5}  ; r5 for align":"pop {pc}"}nop(){return"nop"}mov(e,t){return`mov ${e}, ${t}`}helper_ret(){return"bx r4"}reg_gets_imm(e,t){return`movs ${e}, #${t}`}push_fixed(e){return"push {"+e.join(", ")+"}"}pop_fixed(e){return"pop {"+e.join(", ")+"}"}proc_setup(e,t){let n="";if(e>0){n+="    movs r0, #0\n";for(let t=0;t<e;++t)n+="    push {r0} ;loc\n"}return n}proc_return(){return"pop {pc}"}debugger_stmt(t){return e.oops(),`\n    @stackempty locals\n    ldr r0, [r6, #0] ; debugger\n    subs r0, r0, #4  ; debugger\n${t}:\n    ldr r0, [r0, #0] ; debugger\n`}debugger_bkpt(t){return e.oops(),`\n    @stackempty locals\n    ldr r0, [r6, #0] ; brk\n${t}:\n    ldr r0, [r0, #0] ; brk\n`}debugger_proc(t){return e.oops(),`\n    ldr r0, [r6, #0]  ; brk-entry\n    ldr r0, [r0, #4]  ; brk-entry\n${t}:`}push_local(e){return`push {${e}}`}push_locals(e){return`sub sp, #4*${e} ; push locals ${e} (align)`}pop_locals(e){return`add sp, #4*${e} ; pop locals ${e}`}unconditional_branch(e){return"bb "+e}beq(e){return"beq "+e}bne(e){return"bne "+e}cmp(e,t){return"cmp "+e+", "+t}cmp_zero(e){return"cmp "+e+", #0"}load_reg_src_off(e,t,n,o,r,i){n=n.replace(/:\d+$/,""),o&&(n=`#4*${n}`);let s="str",a="ldr";return i&&(32==i.immLimit?s="strb":64==i.immLimit&&(s="strh"),a=i.needsSignExt?s.replace("str","ldrs"):s.replace("str","ldr")),r?`${s} ${e}, [${t}, ${n}]`:`${a} ${e}, [${t}, ${n}]`}rt_call(e,t,n){return e+" "+t+", "+n}alignedCall(e,t){return t?`${this.push_locals(t)}\nbl ${e}\n${this.pop_locals(t)}`:"bl "+e}call_lbl(n,o,r){let i=e.U.lookup(t,n);return i&&(n=i,o=!1),!o&&n.indexOf("::")>0&&(o=!0),o?this.callCPP(n,r):this.alignedCall(n,r)}call_reg(e){return"blx "+e}helper_prologue(){return`\n    @stackmark args\n    ${this.pushLR()}\n`}helper_epilogue(){return`\n    ${this.popPC()}\n    @stackempty args\n`}load_ptr_full(t,n){return e.assert(!!t),`\n    ldlit ${n}, ${t}\n`}load_vtable(e,t){return`ldr ${e}, [${t}, #0]`}lambda_init(){return"\n    mov r5, r0\n    mov r4, lr\n    bl pxtrt::getGlobalsPtr\n    mov r6, r0\n    bx r4\n"}saveThreadStack(){return"mov r7, sp\n    str r7, [r6, #4]\n"}restoreThreadStack(){return e.target.switches.gcDebug?"movs r7, #0\n    str r7, [r6, #4]\n":""}callCPPPush(e){return this.pushLR()+"\n"+this.callCPP(e)+"\n"+this.popPC()+"\n"}callCPP(e,t){return this.saveThreadStack()+this.alignedCall(e,t)+"\n"+this.restoreThreadStack()}inline_decr(e){return`\n    lsls r1, r0, #30\n    bne .tag${e}\n    bl _pxt_decr\n.tag${e}:\n`}arithmetic(){let t="";const n=e=>{let t=".boxed:\n";return t+=`\n                    ${this.pushLR()}\n                    push {r0, r1}\n                    ${this.saveThreadStack()}\n                    ${e}\n                    ${this.restoreThreadStack()}\n                    add sp, #8\n                    ${this.popPC()}\n                `,t},o=e=>{t+=`\n_numops_${e}:\n    @scope _numops_${e}\n    lsls r2, r0, #31\n    beq .boxed\n    lsls r2, r1, #31\n    beq .boxed\n`},r=e=>{t+="    blx lr\n",t+=n(`bl numops::${e}`)};for(let e of["adds","subs"])o(e),t+=`\n    subs r2, r1, #1\n    ${e} r2, r0, r2\n    bvs .boxed\n    movs r0, r2\n`,r(e);for(let e of["ands","orrs","eors"])o(e),t+=`    ${e} r0, r1\n`,"eors"==e&&(t+="    adds r0, r0, #1\n"),r(e);for(let e of["lsls","lsrs","asrs"])o(e),t+="\n    ; r3 := (r1 >> 1) & 0x1f\n    lsls r3, r1, #26\n    lsrs r3, r3, #27\n","asrs"==e?t+="\n    asrs r0, r3\n    movs r2, #1\n    orrs r0, r2\n":(t+="lsrs"==e?"\n    asrs r2, r0, #1\n    lsrs r2, r3\n    lsrs r3, r2, #30\n    bne .boxed\n":"\n    asrs r2, r0, #1\n    lsls r2, r3\n    lsrs r3, r2, #30\n    beq .ok\n    cmp r3, #3\n    bne .boxed\n.ok:\n",t+="\n    lsls r0, r2, #1\n    adds r0, r0, #1\n"),r(e);t+=`\n@scope _numops_toInt\n_numops_toInt:\n    asrs r0, r0, #1\n    bcc .over\n    blx lr\n.over:\n    lsls r0, r0, #1\n    ${this.callCPPPush("pxt::toInt")}\n\n_numops_fromInt:\n    lsls r2, r0, #1\n    asrs r1, r2, #1\n    cmp r0, r1\n    bne .over2\n    adds r0, r2, #1\n    blx lr\n.over2:\n    ${this.callCPPPush("pxt::fromInt")}\n`;for(let o of Object.keys(e.thumbCmpMap))o=o.replace(/.*::/,""),t+=`\n.section code\n_cmp_${o}:\n    lsls r2, r0, #31\n    beq .boxed\n    lsls r2, r1, #31\n    beq .boxed\n    subs r0, r1\n    b${o.replace("qq","q").replace("neq","ne")} .true\n.false:\n    movs r0, #0\n    bx lr\n.true:\n    movs r0, #1\n    bx lr\n`,t+=n(`\n                        bl numops::${o}\n                        bl numops::toBoolDecr\n                        cmp r0, #0`);return t}emit_int(t,n){let o=!1;function r(t){e.assert(0<=t&&t<=255);let r="";return o?t&&(r=`adds ${n}, #${t}\n`):r=`movs ${n}, #${t}\n`,o=!0,r}function i(e=8){return`lsls ${n}, ${n}, #${e}\n`}e.assert(null!=t);let s=Math.floor(t),a=!1;s<0&&(a=!0,s=-s);let l=0;if(s>255){let t=s;for(;0==(1&t);)t>>>=1,l++;e.numBytes(t)<e.numBytes(s)?s=t:l=0}let c="";switch(e.numBytes(s)){case 4:c+=r(s>>>24&255),c+=i();case 3:c+=r(s>>>16&255),c+=i();case 2:c+=r(s>>>8&255),c+=i();case 1:c+=r(255&s);break;default:e.oops()}return l&&(c+=i(l)),a&&(c+=`negs ${n}, ${n}\n`),c.split("\n").length>4?`ldlit ${n}, ${Math.floor(t)}\n`:c}}e.ThumbSnippets=n}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){const n={"pxtrt::mapSetGeneric":"mapset","pxtrt::mapGetGeneric":"mapget"},o={};function r(e,n,o){const r=t.computeHashMultiplier(e.itable.map((e=>e.idx))),i=t.U.toArray(r.mapping);for(;3&i.length;)i.push(0);let s=`\n${l(e)}_start:\n        .short ${8*e.allfields.length+8}  ; size in bytes\n        .byte ${pxt.ValTypeObject}, ${pxt.VTABLE_MAGIC} ; magic\n        .short ${i.length} ; entries in iface hashmap\n        .short ${e.lastSubtypeNo||e.classNo} ; last sub class-id\n        .short ${e.classNo} ; class-id\n        .short 0 ; reserved\n        .word ${r.mult} ; hash-mult\n`;c()?s+="\n            .word pxt::RefRecord_destroy\n            .word pxt::RefRecord_print\n            .word pxt::RefRecord_scan\n            .word pxt::RefRecord_gcsize\n            .word 0,0,0,0 ; keep in sync with VM_NUM_CPP_METHODS\n":s+="\n            .word 0,0, 0,0, 0,0, 0,0 ; space for 4 (VM_NUM_CPP_METHODS) native methods\n",s+=`\n        .balign 4\n${e.id}_IfaceVT:\n`;const a=i.length>>2;let u="",p=a,d={};for(let t of e.itable){d[t.idx+""]=p;const e=t.proc?t.proc.isGetter()?1:2:0;u+=`  .short ${t.idx}, ${e} ; ${t.name}\n`,u+=`  .word ${t.proc?t.proc.vtLabel()+"@fn":t.info}\n`,p+=1,t.setProc&&(u+=`  .short ${t.idx}, 2 ; set ${t.name}\n`,u+=`  .word ${t.setProc.vtLabel()}@fn\n`,p+=1)}u+="  .word 0, 0, 0, 0 ; the end\n",p+=1;for(let e=0;e<i.length;++e)o.itEntries++,i[e]&&o.itFullEntries++;return s+="  .short "+t.U.toArray(i).map(((e,t)=>d[e+""]||a)).join(", ")+"\n",s+=u,s+="\n",s}let i;function s(e){const t=e.getTime()/1e3;return`${t>>>0}, ${t/4294967296|0}`}!function(e){e[e.Invalid=0]="Invalid",e[e.InfoHeader=1]="InfoHeader",e[e.OpCodeMap=2]="OpCodeMap",e[e.NumberLiterals=3]="NumberLiterals",e[e.ConfigData=4]="ConfigData",e[e.IfaceMemberNames=5]="IfaceMemberNames",e[e.NumberBoxes=6]="NumberBoxes",e[e.Function=32]="Function",e[e.Literal=33]="Literal",e[e.VTable=34]="VTable"}(i||(i={}));let a={};function l(e){return e.classNo||(a[e.id]=e),e.id+"_VT"}function c(){return t.target.useESP}function u(e){return c()?`0xffffffff, ${e}`:`0xffffffff, 0xffffffff ; -> ${e}`}t.vmEmit=function(p,d){let g=`; VM start\n_img_start:\n${t.hexfile.hexPrelude()}\n`;a={};const h={dblText:[],dblBoxText:[],dbls:{},opcodeMap:{},opcodes:t.vm.opcodes.map((e=>"pxt::op_"+e.replace(/ .*/,"")))};for(h.opcodes.unshift(null);h.opcodes.length<128;)h.opcodes.push(null);let f=0;function _(e,t,n,o,r=0){if(g+=`\n; --- ${e}\n.section code\n    .set ${e} = ${f}\n`,o)for(let e of o)g+=`    .set ${e} = ${f}\n`;g+=`\n_start_${e}:\n    .byte ${t}, 0x00\n    .short ${r}\n    .word _end_${e}-_start_${e}\n`,g+=n(),g+=`\n.balign 8\n_end_${e}:\n`,f++}const m=new Date(0);let y=t.U.toUTF8(d.name,!0);y.length>100&&(y=y.slice(0,100));let k=y.length+1;1&k&&k++;const b=128-k;_("_info",i.InfoHeader,(()=>`\n                ; magic - \\0 added by assembler\n                .string "\\nPXT64\\n"\n                .hex 5471fe2b5e213768 ; magic\n                .hex ${t.hexfile.hexTemplateHash()} ; hex template hash\n                .hex 0000000000000000 ; @SRCHASH@\n                .word ${p.globalsWords}   ; num. globals\n                .word ${p.nonPtrGlobals} ; non-ptr globals\n                .word 0, 0 ; last usage time\n                .word ${s(m)} ; installation time\n                .word ${s(m)} ; publication time - TODO\n                .word _img_end-_img_start ; total image size\n                .space 60 ; reserved\n                .string ${JSON.stringify(y)}\n                .space ${b} ; pad to 128 bytes\n`)),p.procs.forEach((e=>{_(e.label(),i.Function,(()=>function(e,r,i){let s="";const a=e=>{s+=e+"\n"},p=e=>{s+="    "+e+"\n"},d=t.ir.EK;let g=[],h=[],f=!1,_=0,m=0;const y=8388607;pxt.options.debug&&console.log("EMIT",i.toString());k(),s="";for(let e of g)e.reset();return f=!0,t.U.assert(0==m),k(),s;function k(){a(`;\n; ${i.getFullName()}\n;`),p(".section code"),r.procs[0]==i&&a("; main"),p(`.word ${u("pxt::RefAction_vtable")}`),p(`.short 0, ${i.args.length} ; #args`),p(`.short ${i.captured.length}, 0 ; #cap`),p(".word .fnstart-_img_start, 0  ; func+possible padding"),_=i.locals.length+h.length,p(".fnstart:"),p(`pushmany ${_} ; incl. ${h.length} tmps`);for(let e of i.body)switch(e.stmtKind){case t.ir.SK.Expr:C(e.expr);break;case t.ir.SK.StackEmpty:I();for(let e of h)e&&t.oops(`uses: ${e.currUses}/${e.totalUses} ${e.toString()}`);break;case t.ir.SK.Jmp:b(e);break;case t.ir.SK.Label:a(`${e.lblName}:`);break;case t.ir.SK.Comment:a(`; ${e.expr.data}`);break;case t.ir.SK.Breakpoint:break;default:t.oops()}p(`ret ${i.args.length}, ${_}`)}function b(e){let n=e.lbl.lblName;e.jmpMode==t.ir.JmpMode.Always?(e.expr&&C(e.expr),p(`jmp ${n}`)):(C(e.expr),e.jmpMode==t.ir.JmpMode.IfNotZero?p(`jmpnz ${n}`):e.jmpMode==t.ir.JmpMode.IfZero?p(`jmpz ${n}`):t.oops())}function v(e){if(e.isGlobal())return t.U.assert(0==(3&e.index)),"glb "+(e.index>>2)+` ; ${e.getName()}`;if(e.iscap)return"cap "+e.index+` ; ${e.getName()}`;if(e.isarg){let n=i.args.length-e.index-1;return t.assert(n>=0,"arg#"+n),`loc ${m+_+2+n} ; ${e.getName()}`}{let n=e.index+h.length;return t.assert(!f||n<_,"cell#"+n),t.assert(n>=0,"cell#"+n),`loc ${m+n}`}}function T(n){const o=t.hexfile.lookupFunc(n);o||t.U.oops("missing function: "+n);let r=e.opcodeMap[o.name];null==r&&(r=e.opcodes.length,e.opcodes.push(o.name),e.opcodeMap[o.name]=r,o.value=r),p(`callrt ${n}`)}function E(e,n){"bool"==n?p(`checkinst ${l(e)}`):t.U.oops()}function S(n){switch(n.exprKind){case d.NumberLiteral:const o=t.taggedSpecial(n.data);if(null!=o)p(`ldspecial ${o} ; ${n.data}`);else{let o=n.data,r=0,i=0;const s=o<<1>>1!=o;if((0|o)==o){if(Math.abs(o)<=y)return void p(o<0?"ldintneg "+-o:`ldint ${o}`);r=(o<<1|1)>>>0,i=o<0?1:0}else{let e=new Float64Array(1);e[0]=o;let t=new Uint32Array(e.buffer);t[1]+=65536,r=t[0],i=t[1]}let a=r+","+i,l=t.U.lookup(e.dbls,a);if(null==l){if(l=e.dblText.length,e.dblText.push(`.word ${r}, ${i}  ; ${l}: ${n.data}`),s){const t="pxt::number_vt";e.dblBoxText.push(`.word ${c()?t:`0xffffffff ; ${t}`}\n`);let n=new Float64Array(1);n[0]=o;let r=new Uint32Array(n.buffer);e.dblBoxText.push(`.word ${r[0]}, ${r[1]} ; ${o}\n`)}e.dbls[a]=l}p(`ldnumber ${l} ; ${n.data}`)}return;case d.PointerLiteral:return void p(`ldlit ${n.data}`);case d.SharedRef:let r=n.args[0];(!r.currUses||r.currUses>=r.totalUses)&&(console.log(r.sharingInfo()),t.U.assert(!1)),r.currUses++;let i=h.indexOf(r);return i<0&&(console.log(h,r),t.assert(!1)),p(`ldloc ${i+m}`+(r.currUses==r.totalUses?" ; LAST":"")),void I();case d.CellRef:return void p("ld"+v(n.data));case d.InstanceOf:C(n.args[0]),E(n.data,n.jsInfo);break;default:throw t.oops("kind: "+n.exprKind)}}function C(e){switch(e.exprKind){case d.JmpValue:p("; jmp value (already in r0)");break;case d.Nop:p("; nop");break;case d.FieldAccess:let t=e.data;C(e.args[0]),p(`ldfld ${t.idx}, ${l(t.classInfo)}`);break;case d.Store:return N(e.args[0],e.args[1]);case d.RuntimeCall:return A(e);case d.ProcCall:return D(e);case d.SharedDef:return x(e);case d.Sequence:return e.args.forEach(C);default:return S(e)}}function x(e){let n=e.args[0];if(t.U.assert(n.totalUses>=1),t.U.assert(0===n.currUses),n.currUses=1,g.push(n),1==n.totalUses)return C(n);{C(n);let e=-1;for(let t=0;t<h.length;++t)if(null==h[t]){e=t;break}e<0?(f&&(console.log(n,h),t.assert(!1,"missed tmp")),e=h.length,h.push(n)):h[e]=n,p(`stloc ${e+m}`)}}function B(){p("push"),m++}function A(e){let r=e.data;if("pxt::beginTry"==r)return void p(`try ${e.args[0].data}`);r=t.U.lookup(o,r)||r,I();let i=t.U.lookup(n,r),s=e.args,a=0;if("pxt::mkClassInstance"!=r){for(let e=0;e<s.length;++e)C(s[e]),e<s.length-1&&(B(),a++);"langsupp::ignore"==r?a&&p(`popmany ${a} ; ignore`):i?p(i):T(r),m-=a}else p(`newobj ${s[0].data}`)}function I(){for(let e=0;e<h.length;++e){let t=h[e];t&&t.currUses==t.totalUses&&(f||g.push(t),h[e]=null)}}function D(e){let n=e.data,o=n.proc;if(o&&o.inlineBody){const t=o.inlineSelf(e.args);return pxt.options.debug&&console.log("INLINE",e.toString(),"->",t.toString()),C(t)}let i=0;const s=e.args.slice(),a=-1==n.virtualIndex?s.shift():null;for(let e of s)C(e),B(),i++;let l=s.length;if(a)C(a),p(`callind ${l}`);else if(null!=n.ifaceIndex){let e=n.ifaceIndex+" ; ."+r.ifaceMembers[n.ifaceIndex];n.isSet?(p(`callset ${e}`),t.U.assert(2==l)):n.noArgs?(p(`callget ${e}`),t.U.assert(1==l)):p(`calliface ${l}, ${e}`)}else null!=n.virtualIndex?t.U.oops():p(`callproc ${o.label()}`);m-=i}function N(e,n){switch(e.exprKind){case d.CellRef:C(n);let o=e.data,r="st"+v(o);if(o.isGlobal()&&0!=o.bitSize){const e=t.sizeOfBitSize(o.bitSize)|(t.isBitSizeSigned(o.bitSize)?16:0);p("bitconv "+e)}p(r);break;case d.FieldAccess:let i=e.data;C(e.args[0]),B(),C(n),p(`stfld ${i.idx}, ${l(i.classInfo)}`),m--;break;default:t.oops()}}}(h,p,e)),[e.label()+"_Lit"])})),g+="_code_end:\n\n",g+="_helpers_end:\n\n",p.usedClassInfos.forEach((e=>{_(l(e),i.VTable,(()=>r(e,0,p)))})),t.U.values(a).forEach((e=>{e.itable=[],e.classNo=65520,_(l(e),i.VTable,(()=>r(e,0,p)))})),a={};let v=0;_("ifaceMemberNames",i.IfaceMemberNames,(()=>`    .word ${p.ifaceMembers.length} ; num. entries\n`+p.ifaceMembers.map((e=>`    .word ${p.emitString(e)}  ; ${v++} .${e}`)).join("\n"))),g+="_vtables_end:\n\n",t.U.iterMap(p.hexlits,((e,n)=>{_(n,i.Literal,(()=>`.word ${u("pxt::buffer_vt")}\n`+t.hexLiteralAsm(e)),[],pxt.BuiltInType.BoxedBuffer)})),t.U.unique(p.ifaceMembers.concat(Object.keys(p.strings)),(e=>e)).forEach((e=>{const n=t.utf8AsmStringLiteral(e);let o=pxt.BuiltInType.BoxedString;"pxt::string_inline_ascii_vt"==n.vt?o=pxt.BuiltInType.BoxedString_ASCII:"pxt::string_skiplist16_packed_vt"==n.vt?o=pxt.BuiltInType.BoxedString_SkipList:"pxt::string_inline_utf8_vt"==n.vt?o=pxt.BuiltInType.BoxedString:t.oops("invalid vt");const r=`.word ${u(n.vt)}\n`+n.asm;_(p.strings[e],i.Literal,(()=>r),[],o)})),_("numberBoxes",i.NumberBoxes,(()=>h.dblBoxText.join("\n")+"\n.word 0, 0, 0 ; dummy entry to make sure not empty")),_("numberLiterals",i.NumberLiterals,(()=>h.dblText.join("\n")+"\n.word 0, 0 ; dummy entry to make sure not empty"));const T=p.res.configData||[];_("configData",i.ConfigData,(()=>T.map((e=>`    .word ${e.key}, ${e.value}  ; ${e.name}=${e.value}`)).join("\n")+"\n    .word 0, 0"));let E=h.opcodes.map((e=>null==e?"":e)).join("\0")+"\0",S="";for(;E;){let e=E.slice(0,64);E=E.slice(64),1&e.length&&(e+="\0"),S+=".hex "+t.U.toHex(t.U.stringToUint8Array(e))+"\n"}_("opcodeMap",i.OpCodeMap,(()=>S)),g+="_literals_end:\n",g+="_img_end:\n",g+="\n; The end.\n",p.writeFile(t.BINARY_ASM,g);let C=t.assemble(d.target,p,g);const x=C.thumbFile.getSourceMap(),B=function(e){const n=[83,82,67,77,136,21,78,45,170,134,153,113,0,0,0,0];for(const o of Object.keys(e)){for(const e of t.U.stringToUint8Array(o))n.push(e);n.push(0);const i=e[o];let s=0,a=0;for(let e=0;e<i.length;e+=3)r(i[e]-s),r(i[e+1]-a>>1),r(i[e+2]>>1),s=i[e],a=i[e+1];n.push(255)}n.push(0),1&n.length&&n.push(0);const o=[];for(let e=0;e<n.length;e+=2)o.push(n[e]|n[e+1]<<8);return o;function r(e){if(0<=e&&e<240)n.push(e);else{let t=240;e<0&&(e=-e,t|=8);const o=n.length;n.push(null);let r=0;for(;0!=e;)n.push(255&e),e>>>=8,r++;n[o]=t|r}}}(x);C.src&&p.writeFile(t.BINARY_ASM,`; srcmap size: ${B.length<<1} bytes\n`+C.src);{let e="";for(let t of C.buf)e+=String.fromCharCode(255&t,t>>8);const n=t.U.sha256(e);for(let e=0;e<4;++e)C.buf[16+e]=parseInt(n.slice(4*e,4*e+4),16);x.__meta={name:d.name,programHash:C.buf[16]|C.buf[17]<<16}}if(p.writeFile(t.BINARY_SRCMAP,JSON.stringify(x)),pxt.options.debug){let e=C.thumbFile.peepCounts,t=Object.keys(e);t.sort(((t,n)=>e[n]-e[t]));for(let n of t.slice(0,50))console.log(`${n}  ${e[n]}`)}if(C.buf){let n="";const o=C.buf;for(;15&o.length;)o.push(0);t.U.pushRange(o,B);for(let e of o)n+=String.fromCharCode(255&e,e>>8);if(n=e.pxtc.encodeBase64(n),c()){p.writeFile(t.BINARY_PXT64,n);const r=t.hexfile.patchHex(p,o,!1,!!t.target.useUF2)[0];p.writeFile(pxt.outputName(t.target),e.pxtc.encodeBase64(r))}else p.writeFile(pxt.outputName(t.target),n)}}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){!function(n){let o,r;!function(e){e.DecompileLiterals="decompileLiterals",e.TaggedTemplate="taggedTemplate",e.DecompileIndirectFixedInstances="decompileIndirectFixedInstances",e.DecompileArgumentAsString="decompileArgumentAsString"}(o=n.DecompileParamKeys||(n.DecompileParamKeys={})),function(e){e[e.SingleLine=0]="SingleLine",e[e.MultiLine=1]="MultiLine"}(r=n.CommentKind||(n.CommentKind={})),n.FILE_TOO_LARGE_CODE=9266,n.DECOMPILER_ERROR=9267;const i=e.SyntaxKind,s=/^[^\f\n\r\t\v\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]*$/,a=/^(?:Array<(.+)>)|(?:(.+)\[\])$/,l="math_number",c="math_number_minmax",u="math_integer",p="math_whole_number",d="text",g="logic_boolean",h={"+":{type:"math_arithmetic",op:"ADD"},"-":{type:"math_arithmetic",op:"MINUS"},"/":{type:"math_arithmetic",op:"DIVIDE"},"*":{type:"math_arithmetic",op:"MULTIPLY"},"**":{type:"math_arithmetic",op:"POWER"},"%":{type:"math_modulo",leftName:"DIVIDEND",rightName:"DIVISOR"},"<":{type:"logic_compare",op:"LT"},"<=":{type:"logic_compare",op:"LTE"},">":{type:"logic_compare",op:"GT"},">=":{type:"logic_compare",op:"GTE"},"==":{type:"logic_compare",op:"EQ"},"===":{type:"logic_compare",op:"EQ"},"!=":{type:"logic_compare",op:"NEQ"},"!==":{type:"logic_compare",op:"NEQ"},"&&":{type:"logic_operation",op:"AND"},"||":{type:"logic_operation",op:"OR"}},f=/^\s*\/\/\s*(.*)$/,_=/^\s*(?:(?:(?:\/\*\*?)|(?:\*))(?!\/))?\s*(.*?)(?:\*?\*\/)?$/;class m{constructor(e){this.renames=e,this.renames.sort(((e,t)=>e.span.start-t.span.start))}getRenamesInSpan(e,t){const n=[];for(const o of this.renames){if(o.span.start>t)break;o.span.start>=e&&n.push(o)}return n}getRenameForPosition(e){for(const t of this.renames){if(t.span.start>e)return;if(t.span.start===e)return t}}}function y(e,t,n=!0){if(1===e.length&&"x"!==e&&"y"!==e&&"z"!==e){const o=e.charCodeAt(0);if(o>=97&&o<=122){const e=o-97;for(let o=1;o<26;o++){const r=String.fromCharCode(97+(e+o)%26);if("x"!==r&&"y"!==r&&"z"!==r&&!t[r])return n&&(t[r]=!0),r}}}for(let o=2;;o++){const r=e+o;if(!t[r])return n&&(t[r]=!0),r}}let k;function b(n,r,s=!1,a=!1){switch(n.kind){case i.WhileStatement:case i.IfStatement:case i.Block:return;case i.ExpressionStatement:return b(n.expression,r,s,a);case i.VariableStatement:return function(e,t){for(const n of e.declarationList.declarations){const e=l(n,t);if(e)return e}return}(n,r);case i.CallExpression:return function(n,r,s=!1,a=!1){const l=t.pxtInfo(n).callInfo;if(!l)return t.Util.lf("Function call not supported in the blocks");const c=r.attrs(l);let u;e.isIdentifier(n.expression)&&(u=r.declaredFunctions[n.expression.text]);if(!s&&l.isExpression&&!u){if(!r.aliasBlocks[l.qName])return t.Util.lf("No output expressions as statements");l.decompilerBlockAlias=r.aliasBlocks[l.qName]}if("Math.pow"==l.qName)return;if(pxt.Util.startsWith(l.qName,"Math.")){if(L(l.qName.substring(5)))return}if(c.blockId===t.PAUSE_UNTIL_TYPE){const e=n.arguments[0];if(1===n.arguments.length&&y(e))return;return t.Util.lf("Predicates must be inline expressions that return a value")}const p=D(l,c);if(p&&!c.handlerStatement&&!a)return t.Util.lf("Events must be top level");if(!c.blockId||!c.block){const e=pxt.blocks.builtinFunctionInfo[l.qName];if(!e)return u?u.parameters.length!==l.args.length?t.Util.lf("Function calls in blocks must have the same number of arguments as the function definition"):void 0:t.Util.lf("Call statements must have a valid declared function");c.blockId=e.blockId}const d=R(l,r.blocks),g=r.blocks.apis.byQName[l.qName],h=pxt.blocks.compileInfo(g),f=h.parameters.length+(h.thisParameter?1:0);if(c.imageLiteral){if(l.args.length-f>1)return t.Util.lf("Function call has more arguments than are supported by its block");let e=n.arguments[0];if(e.kind!=i.StringLiteral&&e.kind!=i.NoSubstitutionTemplateLiteral)return t.Util.lf("Only string literals supported for image literals");const o=(e.text||"").replace(/\s+/g,""),r=c.imageLiteralRows||5,s=(c.imageLiteralColumns||5)*c.imageLiteral,a=s*r;return s*r!=o.length?t.Util.lf("Invalid image pattern ({0} expected vs {1} actual)",a,o.length):void 0}const _=l.args.length-f;if(_>0&&!m()){let e=_;if(p&&e--,c.defaultInstance&&e--,e>0)return t.Util.lf("Function call has more arguments than are supported by its block")}if(h.parameters.length||p){let e;const t=c.defaultInstance||!!h.thisParameter;if(d.forEach(((n,o)=>{e||t&&0===o||(t&&o--,e=k(n))})),e)return e}if(g){const e=r.blocks.apis.byQName[g.namespace];if(e&&e.attributes.fixedInstances&&!e.attributes.decompileIndirectFixedInstances&&l.args.length){const e=t.pxtInfo(l.args[0]).callInfo;if(!e||!r.attrs(e).fixedInstance)return t.Util.lf("Fixed instance APIs can only be called directly from the fixed instance")}}return;function m(){if(c.mutatePropertyEnum&&2===_&&l.args.length>=2){const e=l.args[l.args.length-2],t=l.args[l.args.length-1];if(e.kind===i.ArrayLiteralExpression&&w(t)){const n=[];if(!e.elements.some((e=>e.kind!==i.PropertyAccessExpression||e.expression.kind!==i.Identifier||(n.push(e.name.text),e.expression.text!==c.mutatePropertyEnum)))){const e=S(t);if(e){const t=e[0];return t.length===n.length&&!n.some((e=>-1===t.indexOf(e)))}}}}return!1}function y(e){if(e.kind!==i.FunctionExpression&&e.kind!==i.ArrowFunction)return!1;const n=e;if(function(e){switch(e.kind){case i.BinaryExpression:const n=e.operatorToken.kind;return n!=i.PlusEqualsToken&&n!=i.MinusEqualsToken&&n!=i.EqualsToken;case i.PrefixUnaryExpression:{let t=e.operator;return t!=i.PlusPlusToken&&t!=i.MinusMinusToken}case i.PostfixUnaryExpression:{let t=e.operator;return t!=i.PlusPlusToken&&t!=i.MinusMinusToken}case i.CallExpression:const o=t.pxtInfo(e).callInfo;return t.assert(!!o),o.isExpression;case i.ParenthesizedExpression:case i.NumericLiteral:case i.StringLiteral:case i.NoSubstitutionTemplateLiteral:case i.TrueKeyword:case i.FalseKeyword:case i.NullKeyword:case i.TaggedTemplateExpression:return!0;default:return!1}}(n.body))return!0;const o=n.body;if(1===o.statements.length){if(B(o.statements[0]).kind===i.ReturnStatement)return!0}return!1}function k(e){const n=B(e.value),s=e.info,a=e.param;if(s.isEnum){if(l(n))return;if(n.kind===i.CallExpression){const e=t.pxtInfo(n).callInfo,o=r.attrs(e);if(e&&"TD_ID"===o.shim&&e.args&&1===e.args.length){if(l(B(e.args[0])))return}}else if(n.kind===i.Identifier){const e=t.pxtInfo(n).commentAttrs;if(e&&e.enumIdentity)return}return t.Util.lf("Enum arguments may only be literal property access expressions")}if(N(n)&&(a.fieldEditor||a.shadowBlockId)){let e=!(!a.fieldOptions||!a.fieldOptions[o.DecompileLiterals]);if(!e&&a.shadowBlockId){const t=r.blocks.blocksById[a.shadowBlockId];if(t&&t.parameters&&t.parameters.length){const n=t.parameters[0].name;e=!t.attributes.paramFieldEditorOptions||!t.attributes.paramFieldEditorOptions[n]||!!t.attributes.paramFieldEditorOptions[n][o.DecompileLiterals]}else e=!0}if(!e)return t.Util.lf("Field editor does not support literal arguments")}else if(n.kind===i.TaggedTemplateExpression&&a.fieldEditor){let e=a.fieldOptions&&a.fieldOptions[o.TaggedTemplate];if(!e)return t.Util.lf("Tagged templates only supported in custom fields with param.fieldOptions.taggedTemplate set");const r=B(n.tag);if(r.kind!==i.Identifier)return t.Util.lf("Tagged template literals must use an identifier as the tag");if(r.getText().trim()!=e.trim())return t.Util.lf("Function only supports template literals with tag '{0}'",e);if(n.template.kind!==i.NoSubstitutionTemplateLiteral)return t.Util.lf("Tagged template literals cannot have substitutions")}else if(n.kind===i.ArrowFunction){const e=n;if(e.parameters.length)if("objectdestructuring"===c.mutate){const n=B(e.parameters[0]);if(n.kind===i.Parameter&&n.name.kind!==i.ObjectBindingPattern)return t.Util.lf("Object destructuring mutation callbacks can only have destructuring patters as arguments")}else for(const n of e.parameters)if(n.name.kind!==i.Identifier)return t.Util.lf("Only identifiers allowed as function arguments")}else if(r.blocks.apis.byQName[s.type]){if(r.blocks.apis.byQName[s.type].attributes.fixedInstances){if(P(a))return;if(a.shadowBlockId){const e=r.blocks.blocksById[a.shadowBlockId];if(e){const t=pxt.blocks.compileInfo(e);if(t.parameters&&P(t.parameters[0]))return}}const e=t.pxtInfo(n).callInfo;if(e&&r.attrs(e).fixedInstance)return;return t.Util.lf("Arguments of a fixed instance type must be a reference to a fixed instance declaration")}}return;function l(e){const t=s.type.split("."),n=[];for(;e.kind===i.PropertyAccessExpression;)n.unshift(e.name.text),e=e.expression;if(e.kind!==i.Identifier)return!1;n.unshift(e.text);for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}}}(n,r,s,a);case i.VariableDeclaration:return l(n,r);case i.PostfixUnaryExpression:case i.PrefixUnaryExpression:return function(e){if(e.operand.kind!=i.Identifier)return t.Util.lf("-- and ++ may only be used on an identifier");if(e.operator!==i.PlusPlusToken&&e.operator!==i.MinusMinusToken)return t.Util.lf("Only ++ and -- supported as prefix or postfix unary operators in a statement");return}(n);case i.FunctionExpression:case i.ArrowFunction:return function(e,n){let o=!1;if(e.parameters.length){let r=x(e)[0];if(r&&t.pxtInfo(r).callInfo){let s=t.pxtInfo(r).callInfo;o="objectdestructuring"===n.attrs(s).mutate?e.parameters[0].name.kind!==i.ObjectBindingPattern:e.parameters.some((e=>e.name.kind!==i.Identifier))}}if(o)return t.Util.lf("Unsupported parameters in error function");return}(n,r);case i.BinaryExpression:return function(e,n){if(e.left.kind===i.ElementAccessExpression){if(e.operatorToken.kind!==i.EqualsToken)return t.Util.lf("Element access expressions may only be assigned to using the equals operator")}else{if(e.left.kind===i.PropertyAccessExpression)return e.operatorToken.kind!==i.EqualsToken&&e.operatorToken.kind!==i.PlusEqualsToken?t.Util.lf("Property access expressions may only be assigned to using the = and += operators"):C(e.left,n);if(e.left.kind!==i.Identifier)return t.Util.lf("This expression cannot be assigned to");switch(e.operatorToken.kind){case i.EqualsToken:return C(e.right,n);case i.PlusEqualsToken:case i.MinusEqualsToken:return;default:return t.Util.lf("Unsupported operator token in statement {0}",i[e.operatorToken.kind])}}return}(n,r);case i.ForStatement:return function(e){if(!e.initializer||!e.incrementor||!e.condition)return t.Util.lf("for loops must have an initializer, incrementor, and condition");if(e.initializer.kind!==i.VariableDeclarationList)return t.Util.lf("only variable declarations are permitted in for loop initializers");const n=e.initializer;if(!n.declarations)return t.Util.lf("for loop with out-of-scope variables not supported");if(1!=n.declarations.length)return t.Util.lf("for loop with multiple variables not supported");const o=n.declarations[0];if(o.initializer.kind!==i.NumericLiteral||"0"!==o.initializer.text)return t.Util.lf("for loop initializers must be initialized to 0");const r=o.name.text;if(!a(r))return t.Util.lf("for loop incrementors may only increment the variable declared in the initializer");if(e.condition.kind!==i.BinaryExpression)return t.Util.lf("for loop conditionals must be binary comparison operations");const s=e.condition;if(s.left.kind!==i.Identifier||s.left.text!==r)return t.Util.lf("left side of for loop conditional must be the variable declared in the initializer");if(s.operatorToken.kind!==i.LessThanToken&&s.operatorToken.kind!==i.LessThanEqualsToken)return t.Util.lf("for loop conditional operator must be either < or <=");return;function a(t){if(e.incrementor.kind===i.PostfixUnaryExpression||e.incrementor.kind===i.PrefixUnaryExpression){const n=e.incrementor;if(n.operator===i.PlusPlusToken&&n.operand.kind===i.Identifier)return n.operand.text===t}return!1}}(n);case i.ForOfStatement:return function(e){if(e.initializer.kind!==i.VariableDeclarationList)return t.Util.lf("only variable declarations are permitted in for of loop initializers");return}(n);case i.FunctionDeclaration:return function(e,n){if(!n)return t.Util.lf("Function declarations must be top level");if(e.parameters.length>0&&r.opts.allowedArgumentTypes)for(const n of e.parameters){if(n.initializer||n.questionToken)return t.Util.lf("Function parameters cannot be optional");const e=n.type?n.type.getText():void 0;if(!e)return t.Util.lf("Function parameters must declare a type");if(-1===r.opts.allowedArgumentTypes.indexOf(H(e)))return t.Util.lf("Only types that can be added in blocks can be used for function arguments")}return}(n,a);case i.EnumDeclaration:return function(e,n){if(!n)return t.Util.lf("Enum declarations must be top level");const o=e.name.text;if(!r.blocks.enumsByName[o])return t.Util.lf("Enum declarations in user code must have a block");let s=!1;if(e.members.forEach((e=>{if(e.name.kind!==i.Identifier&&(s=!0),!s&&e.initializer){if(e.initializer.kind===i.NumericLiteral)return;if(e.initializer.kind===i.BinaryExpression){const t=e.initializer;if(t.operatorToken.kind===i.LessThanLessThanToken&&t.left.kind===i.NumericLiteral&&t.right.kind===i.NumericLiteral&&"1"==t.left.text)return}s=!0}})),s)return t.Util.lf("Invalid initializer for enum member");return}(n,a);case i.ModuleDeclaration:return function(e){const t=v(e,r);if(!t)return;return T(e)?t:void 0}(n);case i.ReturnStatement:return function(n){if(o(n))return;return t.Util.lf("Return statements can only be used within top-level function declarations");function o(t){const n=e.getEnclosingBlockScopeContainer(t);if(n)switch(n.kind){case i.SourceFile:case i.ArrowFunction:case i.FunctionExpression:return!1;case i.FunctionDeclaration:return n.parent&&n.parent.kind===i.SourceFile&&!b(n,r,!1,!0);default:return o(n)}return!1}}(n);case i.BreakStatement:case i.ContinueStatement:case i.DebuggerStatement:case i.EmptyStatement:return}return t.Util.lf("Unsupported statement in block: {0}",i[n.kind]);function l(e,n){let o;return e.name.kind!==i.Identifier?o=t.Util.lf("Variable declarations may not use binding patterns"):e.initializer?E(e)||(o=C(e.initializer,n)):o=t.Util.lf("Variable declarations must have an initializer"),o}}function v(n,o){if(!e.isModuleBlock(n.body))return t.Util.lf("Namespaces cannot be nested.");const r=o.blocks.kindsByName[n.name.text];if(!r)return t.Util.lf("Only namespaces with 'kind' blocks can be decompiled");const s=t.Util.lf("Namespaces may only contain valid 'kind' exports");for(const t of n.body.statements){if(V(t))return s;if(!e.isVariableStatement(t)||!t.declarationList.declarations)return s;{const n=1===t.declarationList.declarations.length,o=t.modifiers&&1===t.modifiers.length&&t.modifiers[0].kind===i.ExportKeyword,a=t.declarationList.flags&e.NodeFlags.Const;if(!(n&&o&&a))return s;{const n=t.declarationList.declarations[0];if(!n.initializer||!e.isCallExpression(n.initializer)||!e.isIdentifier(n.name))return s;const o=n.initializer;if(o.arguments.length)return s;if(e.isPropertyAccessExpression(o.expression)&&e.isIdentifier(o.expression.expression)){if(o.expression.expression.text!==r.name||o.expression.name.text!==r.createFunctionName)return s}else{if(!e.isIdentifier(o.expression))return s;if(o.expression.text!==r.createFunctionName)return s}}}}}function T(n){if(!e.isModuleBlock(n.body))return t.Util.lf("Namespaces cannot be nested.");if(n.name.text!==pxt.sprite.TILE_NAMESPACE)return t.Util.lf("Tileset namespace must be named myTiles");const o=t.Util.lf("The myTiles namespace can only export tile variables with image literal initializers and no duplicate ids"),r=t.Util.lf("Tileset members must have a blockIdentity comment and no other annotations"),s=new RegExp(`${pxt.sprite.TILE_PREFIX}(\\d+)`),a=[],l=/^\s*\/\/%\s*blockIdentity=[^\s]+\s*$/;for(const t of n.body.statements){const n=e.getLeadingCommentRangesOfNode(t,t.getSourceFile());if(!n||!n.length)return r;{const e=n.map((e=>t.getSourceFile().text.substr(e.pos,e.end-e.pos))).filter((e=>!!e));if(1!==e.length||!l.test(e[0]))return r}if(!e.isVariableStatement(t)||!t.declarationList.declarations)return o;{const n=1===t.declarationList.declarations.length,r=t.modifiers&&1===t.modifiers.length&&t.modifiers[0].kind===i.ExportKeyword,l=t.declarationList.flags&e.NodeFlags.Const;if(!(n&&r&&l))return o;{const n=t.declarationList.declarations[0];if(!n.initializer||!e.isTaggedTemplateExpression(n.initializer)||!e.isIdentifier(n.name))return o;const r=n.initializer;if(!e.isIdentifier(r.tag)||"img"!==r.tag.text)return o;const i=s.exec(n.name.text);if(!i||-1!==a.indexOf(i[1]))return o;a.push(i[1])}}}}function E(n){if(n.initializer){if(n.initializer.kind===e.SyntaxKind.NullKeyword||n.initializer.kind===e.SyntaxKind.FalseKeyword||function(e){return e.kind===i.ArrayLiteralExpression&&0===e.elements.length}(n.initializer))return!0;if(e.isStringOrNumericLiteral(n.initializer)){const e=n.initializer.getText();return"0"===e||A(e)}{const e=t.pxtInfo(n.initializer).callInfo;if(e&&e.isAutoCreate)return!0}}return!1}function S(e){if(1===e.parameters.length&&e.parameters[0].name.kind===i.ObjectBindingPattern){const n=e.parameters[0].name.elements,o={};return[n.map((e=>{if(t(e.propertyName)&&t(e.name)){const t=e.name.text;if(e.propertyName){const n=e.propertyName.text;return o[n]=t,n}return t}return""})),o]}return;function t(e){return!e||e.kind===i.Identifier}}function C(n,o){switch(n.kind){case i.NumericLiteral:case i.TrueKeyword:case i.FalseKeyword:case i.ExpressionStatement:case i.ArrayLiteralExpression:case i.ElementAccessExpression:return;case i.ParenthesizedExpression:return C(n.expression,o);case i.StringLiteral:case i.FirstTemplateToken:case i.NoSubstitutionTemplateLiteral:return function(e){const n=e.text;return s.test(n)?void 0:t.Util.lf("Only whitespace character allowed in string literals is space")}(n);case i.Identifier:const a=t.pxtInfo(n);return(r=n)&&r.kind===i.Identifier&&"undefined"===r.text?t.Util.lf("Undefined is not supported in blocks"):!I(n)||a.commentAttrs&&a.commentAttrs.blockIdentity&&a.commentAttrs.enumIdentity?void 0:t.Util.lf("Variable is declared in another file");case i.BinaryExpression:const l=n.operatorToken.getText();return h[l]?void 0:t.Util.lf("Could not find operator {0}",l);case i.PrefixUnaryExpression:const c=n.operator;return c===i.MinusToken||c===i.PlusToken||c===i.ExclamationToken?void 0:t.Util.lf("Unsupported prefix unary operator{0}",c);case i.PropertyAccessExpression:return function(n,o){const r=t.pxtInfo(n).callInfo;if(r){const s=o.attrs(r),a=o.compInfo(r);if(s.blockIdentity||"lists_length"===s.blockId||"text_length"===s.blockId)return;if(r.decl.kind===i.EnumMember){if(n.expression.kind===i.Identifier){const e=n.expression.text;if(o.declaredEnums[e])return}const[e,r]=x(n);let s=!0;if(e){const n=t.pxtInfo(e).callInfo;if(n&&n.args){const e=o.blocks.apis.byQName[n.qName],t=1==e.kind||2==e.kind;e&&n.args.forEach(((n,o)=>{if(n===r){e.parameters[t?o-1:o].isEnum&&(s=!1)}}))}}return s?t.Util.lf("Enum value without a corresponding block"):void 0}if(s.fixedInstance&&n.parent){if(n.parent.parent&&n.parent.kind===i.PropertyAccessExpression&&n.parent.parent.kind===i.CallExpression){if(n.parent.parent.expression===n.parent)return}else if(n.parent.kind===i.CallExpression&&n.parent.expression!==n)return}else{if(s.blockCombine||s.blockId&&a&&a.thisParameter)return C(n.expression,o);if(e.isIdentifier(n.expression)&&o.declaredKinds[n.expression.text]){const e=n.name.text,t=o.declaredKinds[n.expression.text];if(t&&(-1!==t.kindInfo.initialMembers.indexOf(e)||-1!==t.declaredNames.indexOf(e)))return}}}return t.Util.lf("No call info found")}(n,o);case i.CallExpression:return b(n,o,!0,void 0);case i.TaggedTemplateExpression:return function(e,n){const o=t.pxtInfo(e).callInfo;if(!o)return t.Util.lf("Invalid tagged template");const r=n.attrs(o);if(!r.blockIdentity)return t.Util.lf("Tagged template does not have blockIdentity set");const i=n.blocks.apis.byQName[r.blockIdentity];if(!i)return t.Util.lf("Could not find blockIdentity for tagged template");if(1!==pxt.blocks.compileInfo(i).parameters.length)return t.Util.lf("Tagged template functions must have 1 argument");return}(n,o)}var r;return t.Util.lf("Unsupported syntax kind for output expression block: {0}",i[n.kind])}function x(e){return e.parent?e.parent.kind===i.ParenthesizedExpression?x(e.parent):[e.parent,e]:[void 0,e]}function B(e){for(;e.kind===i.ParenthesizedExpression;)e=e.expression;return e}function A(e){return'""'===e||"''"===e||"``"===e}function I(e){return!!(4&t.pxtInfo(e).flags)}function D(e,n){if(n.blockId===t.PAUSE_UNTIL_TYPE)return!1;e.decl.parameters;return e.args.some(((e,t)=>e&&w(e)))}function N(e){if(!e)return!1;switch(e.kind){case i.ParenthesizedExpression:return N(e.expression);case i.ArrayLiteralExpression:const t=e;for(const e of t.elements)if(!N(e)&&e.kind!==i.TaggedTemplateExpression)return!1;return!0;case i.NumericLiteral:case i.StringLiteral:case i.NoSubstitutionTemplateLiteral:case i.TrueKeyword:case i.FalseKeyword:return!0;case i.PrefixUnaryExpression:const n=e;return(n.operator===i.PlusToken||n.operator===i.MinusToken)&&N(n.operand);default:return!1}}function w(e){return e.kind===i.ArrowFunction||e.kind===i.FunctionExpression}function R(e,t){const n=[],o=t.apis.byQName[e.qName];if(o){const r=t.apis.byQName[e.qName].attributes,i=pxt.blocks.compileInfo(o);pxt.blocks.builtinFunctionInfo[e.qName];let s=r.imageLiteral?1:0;i.thisParameter?n.push({value:B(e.args[0]),info:null,param:i.thisParameter}):r.defaultInstance&&n.push({value:B(e.args[0]),info:o.parameters[0],param:{definitionName:"__instance__",actualName:"this"}});const a=!(!i.thisParameter&&!r.defaultInstance);a&&s++;for(let t=s;t<e.args.length;t++)n.push({value:B(e.args[t]),info:o.parameters[a?t-1:t],param:i.parameters[t-s]})}return n}function O(e){return e.body.statements.map((e=>{const t=e.declarationList.declarations[0];return{name:t.name.text,initializer:t.initializer.getText()}}))}function P(e){return e&&e.fieldOptions&&e.fieldOptions[o.DecompileIndirectFixedInstances]}function L(e){return M(e)||F(e)||U(e)||-1!==pxt.blocks.MATH_FUNCTIONS.binary.indexOf(e)}function M(e){return-1!==pxt.blocks.MATH_FUNCTIONS.unary.indexOf(e)}function F(e){return-1!==pxt.blocks.MATH_FUNCTIONS.infix.indexOf(e)}function U(e){return-1!==pxt.blocks.ROUNDING_FUNCTIONS.indexOf(e)}function H(e){const t=a.exec(e);return t?`${t[1]||t[2]}[]`:e}function V(t){const n=e.getLeadingCommentRangesOfNode(t,t.getSourceFile());return!(!n||!n.length)}function G(t,n,o=!1){const i=[],s=t.getFullText();if(n&&n.length)for(const a of n){const n=e.getLineOfLocalPosition(t,a.end),l=e.getStartPositionOfLine(n+1,t)||s.length,c=e.getStartPositionOfLine(n+2,t)||s.length,u=!o&&!s.substr(l,c-l).trim();let p=s.substr(a.pos,a.end-a.pos);if(p&&(p=p.replace(/\r\n/g,"\n")),a.kind===e.SyntaxKind.SingleLineCommentTrivia){const e=f.exec(p);e?i.push({kind:r.SingleLine,text:e[1],start:a.pos,end:a.end,hasTrailingNewline:!!a.hasTrailingNewLine,followedByEmptyLine:u,isTrailingComment:o}):i.push({kind:r.SingleLine,text:"",start:a.pos,end:a.end,hasTrailingNewline:!!a.hasTrailingNewLine,followedByEmptyLine:u,isTrailingComment:o})}else{const e=p.split("\n").map((e=>{const t=_.exec(e);return t?t[1]:""}));i.push({kind:r.MultiLine,lines:e,start:a.pos,end:a.end,hasTrailingNewline:!!a.hasTrailingNewLine,followedByEmptyLine:u,isTrailingComment:o})}}return i}function W(e){let n="";for(const o of e)if(o.kind===r.SingleLine){if(o.text===t.ON_START_COMMENT||o.text===t.HANDLER_COMMENT)continue;n+=o.text.trim()+"\n"}else for(const e of o.lines)n+=e.trim()+"\n";return n.trim()}function K(e){const[t]=x(e);return!t||t.kind==i.SourceFile||(t.kind==i.ExpressionStatement?K(t):t.kind==i.VariableDeclarationList&&K(t.parent))}function j(t){const n=t.getFullText(),o=e.createScanner(t.languageVersion,!1,t.languageVariant,n,void 0,t.getFullStart());let r,s,a=[];for(;o.getTextPos()<t.end;){const l=o.scan();if(l===i.SingleLineCommentTrivia||l===i.MultiLineCommentTrivia){r=e.getLeadingCommentRanges(n,o.getTokenPos())||[],s=e.getTrailingCommentRanges(n,o.getTokenPos())||[],s=s.filter((e=>!r.some((t=>t.pos===e.pos)))),a.push(...G(t,r,!1)),a.push(...G(t,s,!0));for(const e of a)e.end>o.getTextPos()&&o.setTextPos(e.end)}}return a.sort(((e,t)=>e.start-t.start)),a}function z(e,t){let n;for(let o=0;o<t.length;o++)n=t[o],!n.owner&&n.start>=e.pos&&n.end<=e.end&&(n.owner=e)}n.RenameMap=m,n.buildRenameMap=function(n,o,{declarations:r,takenNames:i}={declarations:"variables",takenNames:{}}){let s=e.createLanguageService(new t.LSHost(n));const a=[];let l=(function t(n){e.forEachChild(n,(n=>{if(e.isDeclarationName(n)&&("all"===r||e.isVariableDeclaration(n.parent))){const e=n.getText();if(i[e]){const t=y(e,i),r=s.findRenameLocations(o.fileName,n.pos+1,!1,!1);r&&r.forEach((n=>{a.push({name:t,diff:t.length-e.length,span:n.textSpan})}))}else i[e]=!0}t(n)}))}(o),i);return[new m(a),l]},n.getNewName=y,function(e){e[e.None=0]="None",e[e.InBlocksOnly=1]="InBlocksOnly",e[e.InTextBlocks=2]="InTextBlocks"}(k||(k={})),n.decompileToBlocks=function(s,a,f,_){let m=0,y=a.statements;const w={blocksInfo:s,outfiles:{},diagnostics:[],success:!0,times:{}};f.generateSourceMap&&(w.blockSourceMap=[]);const P={blocks:s,declaredFunctions:{},declaredEnums:{},declaredKinds:{},functionParamIds:{},attrs:oe,compInfo:function(e){const t=s.apis.byQName[e.qName];if(t)return pxt.blocks.compileInfo(t);return},localReporters:[],tileset:[],opts:f||{},aliasBlocks:{}};a.getFullText();let H="";const V=[],G={},$=[],X=[],Y=(()=>{let e=0;return()=>""+e++})(),J=s.apis.byQName;Object.keys(J).forEach((e=>{const t=J[e];t.attributes.blockAliasFor&&J[t.attributes.blockAliasFor]&&(P.aliasBlocks[t.attributes.blockAliasFor]=t.qName)}));const q=j(a),Z=n=>{if(n.kind!==i.FunctionDeclaration||b(n,P,!1,!0))if(n.kind!==i.EnumDeclaration||b(n,P,!1,!0))if(e.isModuleDeclaration(n))if(v(n,P))T(n)||(P.tileset=O(n).map((({name:e,initializer:t})=>({projectId:parseInt(e.substr(pxt.sprite.TILE_PREFIX.length)),data:pxt.sprite.imageLiteralToBitmap(t).data()}))));else{const e=n.name.text,t=O(n);P.declaredKinds[e]&&P.declaredKinds[e].declaredNames.push(...t.map((({name:e})=>e)))}else n.kind===i.Block&&e.forEachChild(n,Z);else{const e=n.name.text;P.declaredEnums[e]=!0,function(e){const n=[];return e.members.forEach((e=>{t.U.assert(e.name.kind===i.Identifier);const o=e.name.text;let r;if(e.initializer)if(e.initializer.kind===i.NumericLiteral)r=parseInt(e.initializer.text);else{const n=e.initializer;t.U.assert(n.left.kind===i.NumericLiteral),t.U.assert("1"===n.left.text),t.U.assert(n.operatorToken.kind===i.LessThanLessThanToken),t.U.assert(n.right.kind===i.NumericLiteral);r=1<<parseInt(n.right.text)}else r=0===n.length?0:n[n.length-1][1]+1;n.push([o,r])})),n}(n).forEach((([t,n])=>{V.push({name:n+t,type:e})}))}else P.declaredFunctions[Xe(n.name)]=n};Object.keys(s.kindsByName).forEach((e=>{const t=s.kindsByName[e];P.declaredKinds[e]={kindInfo:t,declaredNames:[]}})),e.forEachChild(a,Z);const Q=()=>(Math.PI*Math.random()).toString(36).slice(2);let ee;Object.keys(P.declaredFunctions).forEach((e=>{P.functionParamIds[e]={},P.declaredFunctions[e].parameters.forEach((t=>{P.functionParamIds[e][t.name.getText()]=Q()+Q()}))})),Object.keys(P.declaredKinds).forEach((e=>{const t="KIND_"+e;P.declaredKinds[e].declaredNames.forEach((e=>V.push({name:e,type:t})))})),(V.length||P.tileset.length)&&(te("<variables>"),V.forEach((e=>{te(`<variable type="${t.U.htmlEscape(e.type)}">${t.U.htmlEscape(e.name)}</variable>`)})),P.tileset.forEach((e=>{te(`<variable type="${pxt.sprite.BLOCKLY_TILESET_TYPE}">${pxt.sprite.legacy.tileToBlocklyVariable(e)}</variable>`)})),te("</variables>"));try{ee=Ke(y,void 0,!0,void 0,!f.snippetMode);for(const e of q)e.owner||$.push({refId:Y(),comment:[e]})}catch(o){if(!o.programTooLarge)return pxt.reportException(o),w.success=!1,w.diagnostics=t.patchUpDiagnostics([{file:a,start:a.getFullStart(),length:a.getFullWidth(),messageText:o.message,category:e.DiagnosticCategory.Error,code:n.DECOMPILER_ERROR}]),w;w.success=!1,w.diagnostics=t.patchUpDiagnostics([{file:a,start:a.getFullStart(),length:a.getFullWidth(),messageText:o.message,category:e.DiagnosticCategory.Error,code:n.FILE_TOO_LARGE_CODE}])}return ee?ue(ee):f.snippetMode||y.length||(me(e.pxtc.ON_START_TYPE,se(e.pxtc.ON_START_TYPE,y[0])),ye()),$.forEach((e=>{!function(e){let n=0;const o=W(e.comment);if(o.trim()){const r=o.split("\n");r.forEach((e=>n=Math.max(n,e.length)));const i=Math.max(Math.min(10*n,480),160);te(`<comment h="${Math.max(Math.min(40*r.length,360),120)}" w="${i}" data="${t.U.htmlEscape(e.refId)}">`),te(t.U.htmlEscape(o)),te("</comment>")}}(e)})),w.outfiles[a.fileName.replace(/(\.blocks)?\.\w*$/i,"")+".blocks"]=`<xml xmlns="http://www.w3.org/1999/xhtml">\n${H}</xml>`,w;function te(e,t="\n"){H+=e+t}function ne(n,o){const r=o||`Language feature "${n.getFullText().trim()}"" not supported in blocks`,i=t.patchUpDiagnostics([{file:a,start:n.getFullStart(),length:n.getFullWidth(),messageText:r,category:e.DiagnosticCategory.Error,code:1001}]);pxt.debug(`decompilation error: ${r}`),t.U.pushRange(w.diagnostics,i),w.success=!1}function oe(e){const n=s.apis.byQName[e.decompilerBlockAlias||e.qName];if(n){const e=n.attributes;if(!e.blockId||s.blocksById[e.blockId]||e.blockId===t.PAUSE_UNTIL_TYPE)return n.attributes}else if(e.decl){const n=t.parseComments(e.decl);if(n)return n}return{paramDefl:{},callingConvention:0}}function re(){if(m++,m>1500){let e=new Error(t.Util.lf("Could not decompile because the script is too large"));throw e.programTooLarge=!0,e}}function ie(t,n){if(t==e.pxtc.ON_START_TYPE)return"xRRgvHNlG#rZ^u`HECiY";const o=function(){const e="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length,n=[];for(let o=0;o<20;o++)n[o]=e.charAt(Math.random()*t);return n.join("")}();if(n){const e=n.getFullStart();w.blockSourceMap.push({id:o,startPos:e,endPos:e+n.getFullWidth()})}return o}function se(e,t){const n={kind:"statement",type:e};return w.blockSourceMap&&(n.id=ie(e,t)),n}function ae(e,t){return{kind:"expr",type:e}}function le(e,t,n,o){return(!n||n===l)&&o&&o.min&&o.max&&(n=c),{kind:"value",name:e,value:t,shadowType:n,shadowMutation:o}}function ce(e){if(e.expression.kind==i.CallExpression){const n=e.expression,o=t.pxtInfo(n).callInfo;if(!o)return ne(e),!1;const r=oe(o);return r.blockId&&!r.handlerStatement&&!o.isExpression&&D(o,r)}return!1}function ue(e){e&&(me(e.type,e),de(e),void 0!==e.data&&te(`<data>${t.U.htmlEscape(e.data)}</data>`),e.handlers&&e.handlers.forEach(fe),e.next&&(te("<next>"),ue(e.next),te("</next>")),void 0!==e.comment&&te(`<comment pinned="false">${t.U.htmlEscape(W(e.comment))}</comment>`),ye())}function pe(e,t){te("<mutation ",""),Object.keys(e).forEach((t=>{void 0!==e[t]&&te(`${t}="${e[t]}" `,"")})),t?(te(">"),t.forEach((e=>{te(`<${e.nodeName} `,""),Object.keys(e.attributes).forEach((t=>{te(`${t}="${e.attributes[t]}" `,"")})),te("/>")})),te("</mutation>")):te("/>")}function de(e){e.mutation&&pe(e.mutation,e.mutationChildren),e.fields&&e.fields.forEach(he),e.inputs&&e.inputs.forEach(ge)}function ge(e){te(`<value name="${e.name}">`);let t=!1;if("expr"===e.value.kind){const n=e.value;if(n.type===l&&e.shadowType===c&&(n.type=c,n.fields[0].name="SLIDER",n.mutation=e.shadowMutation),t=n.type===e.shadowType,!t)switch(n.type){case"math_number":case"math_number_minmax":case"math_integer":case"math_whole_number":case"logic_boolean":case"text":t=!e.shadowType}}if(t)_e(e.value,!0);else{if(void 0!==e.shadowType)switch(e.shadowType){case l:case u:case p:te(`<shadow type="${e.shadowType}"><field name="NUM">0</field></shadow>`);break;case c:te('<shadow type="math_number_minmax">'),e.shadowMutation&&pe(e.shadowMutation),te('<field name="SLIDER">0</field></shadow>');break;case g:te('<shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow>');break;case d:te('<shadow type="text"><field name="TEXT"></field></shadow>');break;default:te(`<shadow type="${e.shadowType}"/>`)}_e(e.value)}te("</value>")}function he(e){te(`<field name="${t.U.htmlEscape(e.name)}">${t.U.htmlEscape(e.value.toString())}</field>`)}function fe(e){te(`<statement name="${t.U.htmlEscape(e.name)}">`),ue(e.statement),te("</statement>")}function _e(e,n=!1){if("text"===e.kind){te(e.value)}else{const o=e,r=n||o.isShadow,i=r?"shadow":"block";r||re(),te(`<${i} ${o.id?`id="${o.id}" `:""}type="${t.U.htmlEscape(o.type)}">`),de(o),te(`</${i}>`)}}function me(e,n){re();te(`<block ${n&&n.id?`id="${n.id}" `:""}type="${t.U.htmlEscape(e)}">`)}function ye(){te("</block>")}function ke(e){if(C(e,P))return ve(e);switch(e.kind){case i.ExpressionStatement:case i.ParenthesizedExpression:return ke(e.expression);case i.Identifier:return function(e){if(I(e)){const n=t.pxtInfo(e);return Pe(s.apis.byQName[n.commentAttrs.blockIdentity],n.commentAttrs.enumIdentity)}const n=Xe(e),o=e.text;let r=null;return P.localReporters.some((e=>{for(let t=0;t<e.length;++t)if(e[t].name===o)return r=e[t],!0;return!1})),r?Ne(n,r.type,!1):(ze(n,k.InBlocksOnly),Ie("variables_get","VAR",n))}(e);case i.StringLiteral:case i.FirstTemplateToken:case i.NoSubstitutionTemplateLiteral:return Be(e.text);case i.NumericLiteral:return xe(e.text);case i.TrueKeyword:return Ae(!0);case i.FalseKeyword:return Ae(!1);case i.BinaryExpression:return function(e){const t=e.operatorToken.getText(),n=h[t];if(Te(e))return Se(e);const o=n.leftName||"A",r=n.rightName||"B";let i,s;"&&"===t||"||"===t?(i=Fe(o,e.left),s=Fe(r,e.right)):(i=Ce(o,e.left,l),s=Ce(r,e.right,l));const a=ae(n.type);a.fields=[],n.op&&a.fields.push(we("OP",n.op));return a.inputs=[i,s],a}(e);case i.PrefixUnaryExpression:return function(e){switch(e.operator){case i.ExclamationToken:const t=ae("logic_negate");return t.inputs=[Fe("BOOL",e.operand)],t;case i.PlusToken:return ke(e.operand);case i.MinusToken:return e.operand.kind==i.NumericLiteral?xe("-"+e.operand.text):Re(e.operand);default:ne(e)}return}(e);case i.PropertyAccessExpression:return Oe(e);case i.ArrayLiteralExpression:return function(e){const t=ae("lists_create_with");return t.inputs=e.elements.map(((e,t)=>Ce("ADD"+t,e))),t.mutation={items:e.elements.length.toString()},t}(e);case i.ElementAccessExpression:return function(e){const t=ae("lists_index_get");return t.inputs=[Ce("LIST",e.expression),Ce("INDEX",e.argumentExpression,l)],t}(e);case i.TaggedTemplateExpression:return function(e){const n=t.pxtInfo(e).callInfo;let r;const a=function(e){if(e.parent&&e.parent.kind===i.CallExpression){const n=e.parent,o=t.pxtInfo(n).callInfo,r=n.arguments.indexOf(e);if(o&&-1!==r){const e=s.apis.byQName[o.qName];if(e){const t=pxt.blocks.compileInfo(e);return t&&t.parameters[r]}}}return}(e);if(a&&a.shadowBlockId){const e=P.blocks.blocksById[a.shadowBlockId];e&&"TD_ID"===e.attributes.shim&&(r=e)}r||(r=P.blocks.apis.byQName[oe(n).blockIdentity]);const l=pxt.blocks.compileInfo(r),c=ae(r.attributes.blockId);let u;const p=l.parameters[0];u=p.fieldOptions&&p.fieldOptions[o.DecompileArgumentAsString]?e.getText():e.template.text;return c.fields=[we(p.actualName,u)],c}(e);case i.CallExpression:return Le(e,void 0,void 0,!0);default:ne(e,t.Util.lf("Unsupported syntax kind for output expression block: {0}",i[e.kind]))}}function be(e,t,n){if(_){const o=_.getRenamesInSpan(t,n);if(o.length){let n=0;o.forEach((o=>{const r=o.span.start+n-t,i=r+o.span.length;n+=o.diff,e=e.slice(0,r)+o.name+e.slice(i)}))}}return e}function ve(e){const n=be(e.getFullText(),e.getFullStart(),e.getEnd()).trim();return $e(e),z(e,q),Ie(t.TS_OUTPUT_TYPE,"EXPRESSION",n)}function Te(e){if(e.kind===i.BinaryExpression){const n=e;if("+"===n.operatorToken.getText()||n.operatorToken.kind==i.PlusEqualsToken){return!!t.pxtInfo(e).exprInfo}}return!1}function Ee(e,t){Te(e)?(Ee(e.left,t),Ee(e.right,t)):t.push(e)}function Se(e){const t=[];Ee(e,t);const n=[];for(let e=0;e<t.length;e++)(e>0||!A(t[e].getText()))&&n.push(Ce("ADD"+n.length,t[e],d));const o=ae("text_join");return o.inputs=n,o.mutation={items:n.length.toString()},o}function Ce(e,t,n,o){let r;if(r="number"==typeof t?xe(t.toString()):"boolean"==typeof t?Ae(t):"string"==typeof t?Be(t):ke(t),"expr"==r.kind&&"math_number"==r.type){const e=r.fields[0].value;"math_integer"==n&&e%1==0&&(r.type="math_integer"),"math_whole_number"==n&&e%1==0&&e>0&&(r.type="math_whole_number")}return le(e,r,n,o)}function xe(e){return Ie("math_number","NUM",e)}function Be(e){return Ie("text","TEXT",e)}function Ae(e){return Ie("logic_boolean","BOOL",e?"TRUE":"FALSE")}function Ie(e,t,n,o){const r=ae(e);return r.fields=[we(t,n)],r.isShadow=o,r}function De(e,t){return le(e,Ie("variables_get_reporter","VAR",t,!0),"variables_get_reporter")}function Ne(e,t,n){const o=pxt.blocks.reporterTypeForArgType(t),r=Ie(o,"VALUE",e,n);return"argument_reporter_custom"===o&&(r.mutation={typename:t}),r}function we(e,t){return{kind:"field",name:e,value:t}}function Re(e){const t=ae("math_arithmetic");return t.inputs=[Ce("A",0,l),Ce("B",e,l)],t.fields=[we("OP","MINUS")],t}function Oe(e,n=!1,o){let r=t.pxtInfo(e).callInfo;if(!r)return void ne(e);if(e.expression.kind===i.Identifier){const t=e.expression.text;if(P.declaredEnums[t]){const n=s.enumsByName[t];if(n&&n.blockId)return Ie(n.blockId,"MEMBER",e.name.text)}else if(P.declaredKinds[t]){return Ie(P.declaredKinds[t].kindInfo.blockId,"MEMBER",e.name.text)}}const a=oe(r);if(o=a.blockId||o,a.blockCombine)return function(e,t){return Ve(e,t,null,"@get@")}(e,e);if("lists_length"===a.blockId||"text_length"===a.blockId){const n=ae(t.U.htmlEscape(a.blockId));return n.inputs=[Ce("VALUE",e.expression)],n}let l=t.U.htmlEscape(a.blockId||r.qName);const[c]=x(e),u=c&&t.pxtInfo(c).callInfo;if(n||!o&&!a.blockIdentity||u&&u.qName===a.blockIdentity)return{kind:"text",value:l};a.enumval&&u&&a.useEnumVal&&(l=a.enumval);const p=P.compInfo(r);if(o&&p&&p.thisParameter){const n=ae(o);return n.inputs=[Ce(t.U.htmlEscape(p.thisParameter.definitionName),e.expression,p.thisParameter.shadowBlockId)],n}return Pe(a.blockIdentity?s.apis.byQName[a.blockIdentity]:s.blocksById[o],l)}function Pe(e,n){let o=/(?:%|\$)([a-zA-Z0-9_]+)/.exec(e.attributes.block);const r=ae(t.U.htmlEscape(e.attributes.blockId));return r.fields=[{kind:"field",name:t.U.htmlEscape(o[1]),value:n}],r}function Le(n,h,f,_=!1,m=!1){const y=n;let v,T=!1;const C=b(y,P,_,m);if(C)v=Me(y,void 0,C);else switch(y.kind){case i.Block:return Ke(y.statements,h,m);case i.ExpressionStatement:return Le(y.expression,h,f||y,_,m);case i.VariableStatement:if(v=Ke(y.declarationList.declarations,void 0,!1,f||y),!v)return A();T=!0;break;case i.FunctionExpression:case i.ArrowFunction:return function(e,t){return Le(e.body,t)}(y,h);case i.BinaryExpression:v=function(e){e.left.text;switch(e.operatorToken.kind){case i.EqualsToken:return e.left.kind===i.Identifier?Ue(e,e.left,e.right):e.left.kind==i.PropertyAccessExpression?He(e,e.left,e.right,"@set@"):function(e,t,n){const o=se("lists_index_set",e);return o.inputs=[Ce("LIST",t.expression),Ce("INDEX",t.argumentExpression,l),Ce("VALUE",n)],o}(e,e.left,e.right);case i.PlusEqualsToken:if(Te(e)){const t=se("variables_set",e),n=Xe(e.left);return ze(n,k.InBlocksOnly),t.inputs=[le("VALUE",Se(e),l)],t.fields=[we("VAR",n)],t}return e.left.kind==i.PropertyAccessExpression?He(e,e.left,e.right,"@change@"):Ue(e,e.left,e.right,!0);case i.MinusEqualsToken:const n=se("variables_change",e);return n.inputs=[le("VALUE",Re(e.right),l)],n.fields=[we("VAR",Xe(e.left))],n;default:return void ne(e,t.Util.lf("Unsupported operator token in statement {0}",i[e.operatorToken.kind]))}}(y);break;case i.PostfixUnaryExpression:case i.PrefixUnaryExpression:v=function(e){const t=e.operator===i.PlusPlusToken;if(!t&&e.operator!==i.MinusMinusToken)return void ne(e);return Ue(e,e.operand,t?1:-1,!0)}(y);break;case i.VariableDeclaration:const n=y;if(E(n))return function(e){X.push([Xe(e.name),e])}(n),A();v=function(e){if(function(e){if(e.name.kind!==i.Identifier)return ne(e,t.Util.lf("Variable declarations may not use binding patterns")),!1;if(!e.initializer)return ne(e,t.Util.lf("Variable declarations must have an initializer")),!1;return!0}(e))return Ue(e,e.name,e.initializer);return}(y);break;case i.WhileStatement:v=function(e){const t=se("device_while",e);return t.inputs=[Fe("COND",e.expression)],t.handlers=[{name:"DO",statement:Le(e.statement)}],t}(y);break;case i.IfStatement:v=function(e){let t=We(e);const n=se("controls_if",e);if(n.mutation={elseif:(t.ifStatements.length-1).toString(),else:t.elseStatement?"1":"0"},n.inputs=[],n.handlers=[],t.ifStatements.forEach(((e,t)=>{let o=Le(e.thenStatement);n.inputs.push(Fe("IF"+t,e.expression)),n.handlers.push({name:"DO"+t,statement:o})})),t.elseStatement){let e=Le(t.elseStatement);n.handlers.push({name:"ELSE",statement:e})}return n}(y);break;case i.ForStatement:v=function(t){const n=t.initializer,o=(n.declarations[0].name.text,t.condition),r=Xe(n.declarations[0].name);let s;if(o.operatorToken.kind!==i.LessThanToken||c(t.statement))if(s=se("pxt_controls_for",t),s.fields=[],s.inputs=[],s.handlers=[],s.inputs=[De("VAR",r)],o.operatorToken.kind===i.LessThanToken){const e=B(o.right);if(e.kind===i.NumericLiteral){const t=xe(parseFloat(e.text)-1+"");s.inputs.push(le("TO",t,p))}else{const t=ae("math_arithmetic");t.fields=[we("OP","MINUS")],t.inputs=[Ce("A",e,l),Ce("B",1,l)],s.inputs.push(le("TO",t,p))}}else o.operatorToken.kind===i.LessThanEqualsToken&&s.inputs.push(Ce("TO",o.right,p));else s=se("controls_repeat_ext",t),s.fields=[],s.inputs=[Ce("TIMES",o.right,p)],s.handlers=[];const a=Le(t.statement);return s.handlers=[{name:"DO",statement:a}],s;function c(t){return t.kind===i.Identifier&&Xe(t)===r||e.forEachChild(t,c)}}(y);break;case i.ForOfStatement:v=function(e){const t=Xe(e.initializer.declarations[0].name),n=se("pxt_controls_for_of",e);n.inputs=[Ce("LIST",e.expression),De("VAR",t)];const o=Le(e.statement);return n.handlers=[{name:"DO",statement:o}],n}(y);break;case i.FunctionDeclaration:v=function(e){const t=Xe(e.name);P.localReporters.push(e.parameters.map((e=>({name:e.name.getText(),type:e.type.getText()}))));const n=Le(e.body);let o;P.localReporters.pop(),o=se("function_definition",e),o.mutation={name:t},e.parameters&&(o.mutationChildren=[],e.parameters.forEach((e=>{const n=e.name.getText();o.mutationChildren.push({nodeName:"arg",attributes:{name:n,type:e.type.getText(),id:P.functionParamIds[t][n]}})})));return o.handlers=[{name:"STACK",statement:n}],o}(y);break;case i.CallExpression:v=function(n,r){const a=t.pxtInfo(n).callInfo,h=oe(a);if("Math.pow"==a.qName){const e=ae("math_arithmetic");return e.inputs=[le("A",ke(n.arguments[0]),l),le("B",ke(n.arguments[1]),l)],e.fields=[we("OP","POWER")],e}if(pxt.Util.startsWith(a.qName,"Math.")){const e=a.qName.substring(5);if(L(e)){let t;if(U(e))t=ae("math_js_round");else{let n;t=ae("math_js_op"),n=M(e)?"unary":F(e)?"infix":"binary",t.mutation={"op-type":n}}return t.inputs=a.args.map(((e,t)=>le("ARG"+t,ke(e),"math_number"))),t.fields=[we("OP",e)],t}}if(h.blockId===t.PAUSE_UNTIL_TYPE){const e=se(t.PAUSE_UNTIL_TYPE,n),o=n.arguments[0];let r;return r=o.body.kind===i.Block?o.body.statements[0].expression:o.body,e.inputs=[le("PREDICATE",ke(r),"logic_boolean")],e}if(!h.blockId||!h.block){const e=pxt.blocks.builtinFunctionInfo[a.qName];if(!e){const e=Xe(n.expression);if(P.declaredFunctions[e]){let t,o=!0;if(a.isExpression){const[e]=x(n);o=e&&e.kind===i.ExpressionStatement}return t=se(o?"function_call":"function_call_output",n),a.args.length&&(t.mutationChildren=[],t.inputs=[],P.declaredFunctions[e].parameters.forEach(((n,o)=>{const r=n.name.getText(),i=P.functionParamIds[e][r];t.mutationChildren.push({nodeName:"arg",attributes:{name:r,type:n.type.getText(),id:i}});const s=le(i,ke(a.args[o]));t.inputs.push(s)}))),t.mutation={name:e},t}return Me(n)}h.blockId=e.blockId}if(h.imageLiteral)return function(e,n){let o=e.arguments[0];if(o.kind!=i.StringLiteral&&o.kind!=i.NoSubstitutionTemplateLiteral)return void ne(e);const r=oe(n),s=se(r.blockId,e);s.fields=[];const a=(o.text||"").replace(/\s+/g,""),l=(r.imageLiteralColumns||5)*r.imageLiteral,c=r.imageLiteralRows||5,u=l*c;if(u!=a.length)return void ne(e,t.Util.lf("Invalid image pattern ({0} expected vs {1} actual)",u,a.length));let p="";for(let e=0;e<c;++e){for(let t=0;t<l;++t)p+=/[#*1]/.test(a[e*l+t])?"#":".";p+="\n"}return s.fields.push(we("LEDS",`\`${p}\``)),s}(n,a);e.isFunctionLike(a.decl);const f=R(a,P.blocks),_=P.blocks.apis.byQName[a.decompilerBlockAlias||a.qName],m=pxt.blocks.compileInfo(_),y=r?ae(h.blockId):se(h.blockId,n),k=e=>(y.inputs||(y.inputs=[])).push(e),b=e=>(y.fields||(y.fields=[])).push(e);"Math.max"==a.qName&&b({kind:"field",name:"op",value:"max"});let v=0;f.forEach(((e,n)=>{let r,f=e.value;const _=e.param,T=e.info,E=m.parameters[m.thisParameter?n-1:n],C=E&&E.range;if(C){const e=C.min,t=C.max;r={min:e.toString(),max:t.toString()}}if(0===n&&h.defaultInstance){if(f.getText()===h.defaultInstance)return;y.mutation={showing:"true"}}if(h.mutatePropertyEnum&&n===a.args.length-2)return;let x;if(_&&_.isOptional&&++v,_&&_.shadowBlockId&&(x=s.blocksById[_.shadowBlockId]),f.kind===i.CallExpression){const e=t.pxtInfo(f).callInfo,n=e&&oe(e);n&&"TD_ID"===n.shim&&T.isEnum&&(f=B(e.args[0]))}if(_&&T&&T.isEnum&&f.kind===i.Identifier)b(we(t.U.htmlEscape(_.definitionName),t.pxtInfo(f).commentAttrs.enumIdentity));else if(_&&_.fieldOptions&&_.fieldOptions[o.DecompileArgumentAsString])b(we(t.U.htmlEscape(_.definitionName),t.Util.htmlEscape(f.getText())));else switch(f.kind){case i.FunctionExpression:case i.ArrowFunction:f.body;const e=function(e){const n=S(e);if(n)return{callbackproperties:n[0].join(","),renamemap:t.Util.htmlEscape(JSON.stringify(n[1]))};return}(f);let v=!1;if(e)y.mutation=e;else{let e=f;const t=s.blocksById[h.blockId].parameters[m.thisParameter?n-1:n],o=(e,t)=>{"reporter"===h.draggableParameters?k(function(e,t,n){const o=pxt.blocks.reporterTypeForArgType(n);return le(e,Ne(t,n,!0),o)}("HANDLER_DRAG_PARAM_"+e.name,t,e.type)):k(De("HANDLER_DRAG_PARAM_"+e.name,t))};if(e.parameters.length&&(h.optionalVariableArgs?(y.mutation={numargs:e.parameters.length.toString()},e.parameters.forEach(((e,t)=>{y.mutation["arg"+t]=e.name.text}))):e.parameters.forEach(((e,n)=>{const r=t.handlerParameters[n];h.draggableParameters?o(r,e.name.text):b(we("HANDLER_"+r.name,e.name.text))}))),h.draggableParameters){if(e.parameters.length<t.handlerParameters.length)for(let n=e.parameters.length;n<t.handlerParameters.length;n++){const e=t.handlerParameters[n];o(e,e.name)}"reporter"===h.draggableParameters&&(P.localReporters.push(t.handlerParameters),v=!0)}}const E=Le(f);(y.handlers||(y.handlers=[])).push({name:"HANDLER",statement:E}),v&&P.localReporters.pop();break;case i.PropertyAccessExpression:const C=t.pxtInfo(f).callInfo,B=t.U.htmlEscape(_.definitionName),A=oe(C);x&&"TD_ID"===x.attributes.shim?k(le(B,Oe(f,!1,_.shadowBlockId),_.shadowBlockId,r)):T&&T.isEnum||C&&(A.fixedInstance||A.blockIdentity===a.qName)?b(we(B,Oe(f,!0).value)):k(Ce(B,f,_.shadowBlockId,r));break;case i.BinaryExpression:if(_&&_.shadowOptions&&_.shadowOptions.toString){const e=f;if(e.operatorToken.kind===i.PlusToken&&function(e){if(e.kind===i.StringLiteral||e.kind===i.NoSubstitutionTemplateLiteral)return""===e.text;return!1}(e.left)){k(Ce(t.U.htmlEscape(_.definitionName),e.right,_.shadowBlockId||"text"));break}}k(Ce(t.U.htmlEscape(_.definitionName),f,_.shadowBlockId,r));break;default:let I;const D=t.U.htmlEscape(_.definitionName);let w=!0;if("Math.random"==a.qName)I=le(D,function(e){switch(e.kind){case i.NumericLiteral:return xe((parseInt(e.text)-1).toString());case i.BinaryExpression:const t=e;if(t.operatorToken.kind==i.PlusToken&&"1"==t.right.text)return ke(t.left);default:return ke(e)}}(f),l,r),w=!1;else if(N(f)){const e="text"==_.fieldEditor?f.text:f.getText(),n=_.shadowBlockId&&!function(e){switch(e){case l:case c:case u:case p:case d:case g:return!0;default:return!1}}(_.shadowBlockId);if(Ge(_)&&_.fieldOptions.onParentBlock)return void b(we(D,e));if(n){const n=function(e){if(s.blocksById[e]){const t=pxt.blocks.compileInfo(s.blocksById[e]);if(!t.thisParameter&&1===t.parameters.length)return t.parameters[0]}return}(_.shadowBlockId);if(n&&Ge(n)){const o=Ie(_.shadowBlockId,n.definitionName,e,!0);_.shadowOptions&&(o.mutation={customfield:t.Util.htmlEscape(JSON.stringify(_.shadowOptions))}),I=le(D,o,_.shadowBlockId,r),w=!1}}}else if(f.kind===i.TaggedTemplateExpression&&_.fieldOptions&&_.fieldOptions[o.TaggedTemplate])return void b(we(D,t.Util.htmlEscape(f.getText())));w&&(I=Ce(D,f,_.shadowBlockId,r)),k(I)}})),v&&(y.mutation||(y.mutation={}),y.mutation._expanded=v.toString());return y}(y,_);break;case i.DebuggerStatement:v=function(e){return se(t.TS_DEBUGGER_TYPE,e)}(y);break;case i.BreakStatement:v=function(e){return se(t.TS_BREAK_TYPE,e)}(y);break;case i.ContinueStatement:v=function(e){return se(t.TS_CONTINUE_TYPE,e)}(y);break;case i.EmptyStatement:v=void 0;break;case i.EnumDeclaration:case i.ModuleDeclaration:return z(y,q),A();case i.ReturnStatement:v=function(e){const n=se(t.TS_RETURN_STATEMENT_TYPE,e);e.expression?n.inputs=[le("RETURN_VALUE",ke(e.expression),l)]:n.mutation={no_return_value:"true"};return n}(y);break;default:return void ne(y,h?t.Util.lf("Unsupported statement in block: {0}",i[y.kind]):t.Util.lf("Statement kind unsupported in blocks: {0}",i[y.kind]))}if(v){let e=v;for(;e.next;)e=e.next;e.next=A(),e.next&&(e.next.prev=e)}return T||function(t){let n,o=[];for(let e=0;e<q.length&&(n=q[e],!n.owner&&n.start>=t.pos&&n.end<=t.end&&(n.owner=t,n.ownerStatement=v,o.push(n)),!(n.start>t.end));e++);if(n&&n.isTrailingComment){const r=e.getLineAndCharacterOfPosition(a,t.end),i=e.getLineAndCharacterOfPosition(a,n.start);if(r.line===i.line){if(n.ownerStatement){n.ownerStatement.comment.splice(n.ownerStatement.comment.indexOf(n),1);for(const e of $)e.comment.splice(e.comment.indexOf(n),1)}n.owner=t,n.ownerStatement=v,o.push(n)}}if(o.length){const e=[];if(K(t)){let t=[];const n=[];o.forEach(((e,i)=>{let s=e.owner&&e.start<e.owner.getStart();e.kind===r.MultiLine&&s&&(t.length&&(n.push(t),t=[]),i!=o.length-1)?n.push([e]):(t.push(e),e.followedByEmptyLine&&s&&(n.push(t),t=[]))})),o=t,n.forEach((t=>{const n=Y();e.push(n),$.push({comment:t,refId:n})}))}v&&(e.length&&(v.data?v.data+=";"+e.join(";"):v.data=e.join(";")),o&&o.length&&(v.comment?v.comment=v.comment.concat(o):v.comment=o))}}(f||y),v;function A(){if(h&&h.length)return Le(h.shift(),h,void 0,!1,m)}}function Me(e,n,o){f.errorOnGreyBlocks&&ne(e);const r=se(t.TS_STATEMENT_TYPE,e);r.mutation={},$e(e);let s=e.getText();s=be(s,e.getStart(),e.getEnd()),z(e,q),n&&(s=n+s);const a=[];if(e.kind===i.VariableStatement)for(const t of e.declarationList.declarations)a.push(Xe(t.name));else e.kind===i.VariableDeclaration&&a.push(Xe(e.name));a.length&&(r.mutation.declaredvars=a.join(","));const l=s.split("\n");return r.mutation.numlines=l.length.toString(),o&&f.includeGreyBlockMessages&&(r.mutation.error=t.U.htmlEscape(o)),l.forEach(((e,n)=>{r.mutation[`line${n}`]=t.U.htmlEscape(e)})),r}function Fe(n,o){if(function(n){const o=B(n);switch(o.kind){case i.TrueKeyword:case i.FalseKeyword:case i.Identifier:case i.ElementAccessExpression:return;case i.BinaryExpression:return r(o);case i.CallExpression:return s(o);case i.PrefixUnaryExpression:if(o.operator===i.ExclamationToken)return;default:return t.Util.lf("Conditions must evaluate to booleans or identifiers")}function r(e){switch(e.operatorToken.kind){case i.EqualsEqualsToken:case i.EqualsEqualsEqualsToken:case i.ExclamationEqualsToken:case i.ExclamationEqualsEqualsToken:case i.LessThanToken:case i.LessThanEqualsToken:case i.GreaterThanToken:case i.GreaterThanEqualsToken:case i.AmpersandAmpersandToken:case i.BarBarToken:return;default:return t.Util.lf("Binary expressions in conditionals must evaluate to booleans")}}function s(n){const o=t.pxtInfo(n).callInfo;if(o){const t=P.blocks.apis.byQName[o.qName];if(t&&"boolean"==t.retType)return;if(e.isIdentifier(n.expression)&&P.declaredFunctions[n.expression.text])return}return t.Util.lf("Only functions that return booleans are allowed as conditions")}}(o)){return le(n,ve(o),g)}return Ce(n,o,g)}function Ue(e,t,n,o=!1,r=!1){const i=Xe(t);ze(i,k.InBlocksOnly);const s=se(o?"variables_change":"variables_set",e.parent||e);return s.inputs=[Ce("VALUE",n,l)],s.fields=[we("VAR",i)],s}function He(e,t,n,o){return Ve(e,t,n,o)}function Ve(e,n,o,r){const i=t.pxtInfo(n).callInfo,s=P.blocks.apis.byQName[i?i.qName:""];if(!s||!s.attributes.blockCombine)return void ne(n);const a=`${s.namespace}.${s.retType}.${r}`,l=P.blocks.blocks.find((e=>e.qName==a)),c=o?se(l.attributes.blockId,e):ae(l.attributes.blockId),u=l.attributes._def.parameters;let p=i.qName;return l.combinedProperties&&l.combinedProperties.forEach((e=>{0===e.indexOf(i.qName)&&"@"===e.charAt(i.qName.length)&&(p=e)})),c.inputs=[Ce(u[0].name,n.expression)],c.fields=[we(u[1].name,p)],o&&c.inputs.push(Ce(u[2].name,o)),c}function Ge(e){return e&&e.fieldOptions&&e.fieldOptions[o.DecompileLiterals]}function We(e){let t={ifStatements:[{expression:e.expression,thenStatement:e.thenStatement}],elseStatement:e.elseStatement};if(e.elseStatement&&e.elseStatement.kind==i.IfStatement){let n=We(e.elseStatement);t.ifStatements=t.ifStatements.concat(n.ifStatements),t.elseStatement=n.elseStatement}return t}function Ke(t,n,o=!1,r,s=!1){const a=[],l=n||[];for(let e=t.length-1;e>=0;e--){const n=t[e];(n.kind===i.FunctionDeclaration||n.kind==i.ExpressionStatement&&ce(n))&&!b(n,P,!1,o)?a.unshift(n):l.unshift(n)}if(a.map((e=>Le(e,void 0,void 0,!1,o))).forEach(ue),l.length){const t=l.shift(),n=Le(t,l,r,!1,o);if(s){let o=n,r=t;if(X.forEach((([e,n])=>{if(G[e]===k.InBlocksOnly)return;let i;n.initializer;i=G[e]===k.InTextBlocks?Me(n,"let "):Ue(t,n.name,n.initializer,!1,!0),i.next=o,o=i,r=n})),o){const t=se(e.pxtc.ON_START_TYPE,r);return t.handlers=[{name:"HANDLER",statement:o}],t}je(n)}return n}s&&je(void 0)}function je(t){f.alwaysEmitOnStart&&(me(e.pxtc.ON_START_TYPE,t),ye())}function ze(e,t){G[e]!==k.InTextBlocks&&(G[e]=t)}function $e(t){e.forEachChild(t,(e=>{e.kind===i.Identifier&&ze(Xe(e),k.InTextBlocks),$e(e)}))}function Xe(e){if(_){const t=_.getRenameForPosition(e.getStart());if(t)return t.name}return e.text}},n.getLeadingComments=function(t,n,o){return G(n,o||e.getLeadingCommentRangesOfNode(t,n))},n.getTrailingComments=function(t,n){return G(n,e.getTrailingCommentRanges(n.getFullText(),t.end))},n.getCommentsForStatement=function(e,t){let n,o=[];for(let r=0;r<t.length&&(n=t[r],!n.owner&&n.start>=e.pos&&n.end<=e.end&&(n.owner=e,o.push(n)),!(n.start>e.end));r++);return o},n.buildCommentMap=j}(t.decompiler||(t.decompiler={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){!function(e){function t(e,n){var o;switch(e){case"void":return"None";case"boolean":return"bool";case"string":return"str"}if(null===(o=n.byQName[e])||void 0===o?void 0:o.pyQName)return n.byQName[e].pyQName;const r=/^(?:Array<(.+)>)|(?:(.+)\[\])|(?:\[.+\])$/.exec(e);return r?`List[${t(r[1]||r[2],n)}]`:e}function n(e,t){return`\`\`\`${t?"python":"ts"}\n${e}\n\`\`\``}e.displayStringForSymbol=function(e,o,r){if(e){switch(e.kind){case 3:case 1:return function(e,o,r){let i="";3===e.kind?i+=o?"def ":"function ":i+="(method) ";i+=o?e.pyQName:e.qName;let s="";e.parameters&&e.parameters.length&&(s=e.parameters.map((e=>`${e.name}: ${o?e.pyTypeString:e.type}`)).join(", "));let a=e.retType||"void";o&&(a=t(a,r));return n(`${i}(${s}): ${a}`,o)}(e,o,r);case 6:case 7:return function(e,t){const o=t?e.pyQName:e.qName;if(6===e.kind)return n(`enum ${o}`,t);let r=`(enum member) ${o}`;e.attributes.enumval&&(r+=` = ${e.attributes.enumval}`);return n(r,!1)}(e,o);case 5:return function(e,t){return n(`namespace ${t?e.pyQName:e.qName}`,!1)}(e,o);case 9:return function(e,t){return n(`interface ${t?e.pyQName:e.qName}`,!1)}(e,o);case 8:return function(e,t){return n(`class ${t?e.pyQName:e.qName}`,t)}(e,o);case 4:return function(e,o,r){let i=o?e.pyQName:`let ${e.qName}`;if(e.retType){let s=e.retType;return o&&(s=t(s,r)),n(`${i}: ${s}`,o)}return n(i,o)}(e,o,r);case 2:return function(e,o,r){const i=`(property) ${o?e.pyQName:e.qName}`;if(e.retType){let s=e.retType;return o&&(s=t(s,r)),n(`${i}: ${s}`,!1)}return n(i,!1)}(e,o,r)}return`**${e.qName}**`}},e.displayStringForKeyword=function(e,t){return`\`\`\`${t?"py":"ts"}\n(keyword) ${e}\n\`\`\``}}(e.service||(e.service={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){!function(t){const n={r0:0,r1:1,r2:2,r3:3,r4:4,r5:5,r6:6,r7:7,r8:8,r9:9,r10:10,r11:10,r12:12,sp:13,r13:13,lr:14,r14:14,pc:15,r15:15};class o extends e.assembler.AbstractProcessor{constructor(){super(),this.addEnc("$r0","R0-7",(e=>this.inrange(7,e,e))),this.addEnc("$r1","R0-7",(e=>this.inrange(7,e,e<<3))),this.addEnc("$r2","R0-15",(e=>this.inrange(15,e,7&e|(8&e)<<4))),this.addEnc("$r3","R0-15",(e=>this.inrange(15,e,e<<3))),this.addEnc("$r4","R0-7",(e=>this.inrange(7,e,e<<6))),this.addEnc("$r5","R0-7",(e=>this.inrange(7,e,e<<8))),this.addEnc("$r01","R0-7",(e=>this.inrange(7,e,e|e<<3))),this.addEnc("$i0","#0-255",(e=>this.inrange(255,e,e))),this.addEnc("$i1","#0-1020",(e=>this.inrange(255,e/4,e>>2))),this.addEnc("$i2","#0-510",(e=>this.inrange(127,e/4,e>>2))),this.addEnc("$i3","#0-7",(e=>this.inrange(7,e,e<<6))),this.addEnc("$i4","#0-31",(e=>this.inrange(31,e,e<<6))),this.addEnc("$i5","#0-124",(e=>this.inrange(31,e/4,e>>2<<6))),this.addEnc("$i6","#1-32",(e=>0==e?null:32==e?0:this.inrange(31,e,e<<6))),this.addEnc("$i7","#0-62",(e=>this.inrange(31,e/2,e>>1<<6))),this.addEnc("$i32","#0-2^32",(e=>1)),this.addEnc("$rl0","{R0-7,...}",(e=>this.inrange(255,e,e))),this.addEnc("$rl1","{LR,R0-7,...}",(e=>16384&e?this.inrange(255,-16385&e,256|255&e):this.inrange(255,e,e))),this.addEnc("$rl2","{PC,R0-7,...}",(e=>32768&e?this.inrange(255,-32769&e,256|255&e):this.inrange(255,e,e))),this.addEnc("$la","LABEL",(e=>this.inrange(255,e/4,e>>2))).isWordAligned=!0,this.addEnc("$lb","LABEL",(e=>this.inrangeSigned(127,e/2,e>>1))),this.addEnc("$lb11","LABEL",(e=>this.inrangeSigned(1023,e/2,e>>1))),this.addInst("adcs  $r0, $r1",16704,65472),this.addInst("add   $r2, $r3",17408,65280),this.addInst("add   $r5, pc, $i1",40960,63488),this.addInst("add   $r5, sp, $i1",43008,63488),this.addInst("add   sp, $i2",45056,65408).canBeShared=!0,this.addInst("adds  $r0, $r1, $i3",7168,65024),this.addInst("adds  $r0, $r1, $r4",6144,65024),this.addInst("adds  $r01, $r4",6144,65024),this.addInst("adds  $r5, $i0",12288,63488),this.addInst("adr   $r5, $la",40960,63488),this.addInst("ands  $r0, $r1",16384,65472),this.addInst("asrs  $r0, $r1",16640,65472),this.addInst("asrs  $r0, $r1, $i6",4096,63488),this.addInst("bics  $r0, $r1",17280,65472),this.addInst("bkpt  $i0",48640,65280),this.addInst("blx   $r3",18304,65415),this.addInst("bx    $r3",18176,65408),this.addInst("cmn   $r0, $r1",17088,65472),this.addInst("cmp   $r0, $r1",17024,65472),this.addInst("cmp   $r2, $r3",17664,65280),this.addInst("cmp   $r5, $i0",10240,63488),this.addInst("eors  $r0, $r1",16448,65472),this.addInst("ldmia $r5!, $rl0",51200,63488),this.addInst("ldmia $r5, $rl0",51200,63488),this.addInst("ldr   $r0, [$r1, $i5]",26624,63488),this.addInst("ldr   $r0, [$r1, $r4]",22528,65024),this.addInst("ldr   $r5, [pc, $i1]",18432,63488),this.addInst("ldr   $r5, $la",18432,63488),this.addInst("ldr   $r5, [sp, $i1]",38912,63488).canBeShared=!0,this.addInst("ldr   $r5, [sp]",38912,63488).canBeShared=!0,this.addInst("ldrb  $r0, [$r1, $i4]",30720,63488),this.addInst("ldrb  $r0, [$r1, $r4]",23552,65024),this.addInst("ldrh  $r0, [$r1, $i7]",34816,63488),this.addInst("ldrh  $r0, [$r1, $r4]",23040,65024),this.addInst("ldrsb $r0, [$r1, $r4]",22016,65024),this.addInst("ldrsh $r0, [$r1, $r4]",24064,65024),this.addInst("lsls  $r0, $r1",16512,65472),this.addInst("lsls  $r0, $r1, $i4",0,63488),this.addInst("lsrs  $r0, $r1",16576,65472),this.addInst("lsrs  $r0, $r1, $i6",2048,63488),this.addInst("mov   $r2, $r3",17920,65280),this.addInst("movs  $r0, $r1",0,65472),this.addInst("movs  $r5, $i0",8192,63488),this.addInst("muls  $r0, $r1",17216,65472),this.addInst("mvns  $r0, $r1",17344,65472),this.addInst("negs  $r0, $r1",16960,65472),this.addInst("nop",18112,65535),this.addInst("orrs  $r0, $r1",17152,65472),this.addInst("pop   $rl2",48128,65024),this.addInst("push  $rl1",46080,65024),this.addInst("rev   $r0, $r1",47616,65472),this.addInst("rev16 $r0, $r1",47680,65472),this.addInst("revsh $r0, $r1",47808,65472),this.addInst("rors  $r0, $r1",16832,65472),this.addInst("sbcs  $r0, $r1",16768,65472),this.addInst("sev",48960,65535),this.addInst("stm   $r5!, $rl0",49152,63488),this.addInst("stmia $r5!, $rl0",49152,63488),this.addInst("stmea $r5!, $rl0",49152,63488),this.addInst("str   $r0, [$r1, $i5]",24576,63488).canBeShared=!0,this.addInst("str   $r0, [$r1]",24576,63488).canBeShared=!0,this.addInst("str   $r0, [$r1, $r4]",20480,65024),this.addInst("str   $r5, [sp, $i1]",36864,63488).canBeShared=!0,this.addInst("str   $r5, [sp]",36864,63488).canBeShared=!0,this.addInst("strb  $r0, [$r1, $i4]",28672,63488),this.addInst("strb  $r0, [$r1, $r4]",21504,65024),this.addInst("strh  $r0, [$r1, $i7]",32768,63488),this.addInst("strh  $r0, [$r1, $r4]",20992,65024),this.addInst("sub   sp, $i2",45184,65408),this.addInst("subs  $r0, $r1, $i3",7680,65024),this.addInst("subs  $r0, $r1, $r4",6656,65024),this.addInst("subs  $r01, $r4",6656,65024),this.addInst("subs  $r5, $i0",14336,63488),this.addInst("svc   $i0",57088,65280),this.addInst("sxtb  $r0, $r1",45632,65472),this.addInst("sxth  $r0, $r1",45568,65472),this.addInst("tst   $r0, $r1",16896,65472),this.addInst("udf   $i0",56832,65280),this.addInst("uxtb  $r0, $r1",45760,65472),this.addInst("uxth  $r0, $r1",45696,65472),this.addInst("wfe",48928,65535),this.addInst("wfi",48944,65535),this.addInst("yield",48912,65535),this.addInst("cpsid i",46706,65535),this.addInst("cpsie i",46690,65535),this.addInst("beq   $lb",53248,65280),this.addInst("bne   $lb",53504,65280),this.addInst("bcs   $lb",53760,65280),this.addInst("bcc   $lb",54016,65280),this.addInst("bmi   $lb",54272,65280),this.addInst("bpl   $lb",54528,65280),this.addInst("bvs   $lb",54784,65280),this.addInst("bvc   $lb",55040,65280),this.addInst("bhi   $lb",55296,65280),this.addInst("bls   $lb",55552,65280),this.addInst("bge   $lb",55808,65280),this.addInst("blt   $lb",56064,65280),this.addInst("bgt   $lb",56320,65280),this.addInst("ble   $lb",56576,65280),this.addInst("bhs   $lb",53760,65280),this.addInst("blo   $lb",54016,65280),this.addInst("b     $lb11",57344,63488),this.addInst("bal   $lb11",57344,63488),this.addInst("bl    $lb",61440,63488,!0),this.addInst("bb    $lb",57344,63488,!0),this.addInst("ldlit   $r5, $i32",18432,63488)}toFnPtr(t,n,o){return e.target.runtimeIsARM&&/::/.test(o)?t+n&-2:t+n|1}wordSize(){return 4}is32bit(e){return"bl"==e.name||"bb"==e.name}postProcessAbsAddress(e,t){return t^=1,t-=e.baseOffset}emit32(t,n,o){let r=!!(n%2);r&&(n=n+1&-4);let i=n>>1;if(e.assert(null!=i),(0|i)!=i||!(-2097152<i&&i<2097152))return e.assembler.emitErr("jump out of range",o);let s=2047&i,a=i>>11&1023;return{opcode:4026531840&i?62464|a:61440|a,opcode2:r?59392|s:63488|s,stack:0,numArgs:[n],labelName:o}}expandLdlit(t){let n,o=!1,r=[],i={},s=1;for(let a=0;a<t.lines.length;++a){let l=t.lines[a];if(r.push(l),"instruction"==l.type&&l.instruction&&"ldlit"==l.instruction.name){if(!n){let e=l.location+900,r=a+1;for(;r<t.lines.length&&!(t.lines[r].location>e);++r){let e=t.lines[r].getOp();("b"==e||"bb"==e||"pop"==e&&"pc"==t.lines[r].words[2])&&(n=t.lines[r])}if(n)o=!1;else for(o=!0;--r>a;)if("instruction"==t.lines[r].type){n=t.lines[r];break}}let r=l.words[1],c="#"+l.words[3],u=e.U.lookup(i,c);u||(u="_ldlit_"+ ++s,i[c]=u),l.update(`ldr ${r}, ${u}`)}if(l===n){n=null;let e=[],a="_jmpwords_"+ ++s;o&&e.push("bb "+a),e.push(".balign 4");for(let t of Object.keys(i)){let n=i[t];e.push(n+": .word "+t.slice(1))}o&&e.push(a+":");for(let n of e){t.buildLine(n,r);let e=r[r.length-1];e.scope=l.scope,e.lineNo=l.lineNo}i={}}}t.lines=r}getAddressFromLabel(e,t,n,o=!1){let r=e.lookupLabel(n);if(null==r)return null;let i=e.location()+4;return o&&(i&=4294967292),r-i}isPop(e){return 48128==e}isPush(e){return 46080==e}isAddSP(e){return 45056==e}isSubSP(e){return 45184==e}peephole(t,n,o){let i=this.encoders.$lb11,s=this.encoders.$lb;function a(e,t){return null!=e.encode(t.numArgs[0]+8)&&null!=e.encode(t.numArgs[0]-8)&&null!=e.encode(t.numArgs[0])}let l=t.getOp(),c=!1;"bne"!=l&&"beq"!=l||("b"==n.getOp()&&0==t.numArgs[0]&&(c=!0),"bb"==n.getOp()&&2==t.numArgs[0]&&(c=!0)),"bb"==l&&a(i,t)?t.update("b "+t.words[1]):"b"==l&&-2==t.numArgs[0]?t.update(""):"bne"==l&&c&&a(s,n)?(t.update("beq "+n.words[1]),n.update("")):"beq"==l&&c&&a(s,n)?(t.update("bne "+n.words[1]),n.update("")):"push"!=l||16384!=t.numArgs[0]||"push"!=n.getOp()||16384&n.numArgs[0]?"pop"==l&&"pop"==n.getOp()&&32768==n.numArgs[0]?(t.update(t.text.replace("}",", pc}")),n.update("")):"push"==l&&"pop"==n.getOp()&&t.numArgs[0]==n.numArgs[0]?(e.assert(t.numArgs[0]>0),t.update(""),n.update("")):"push"==l&&"pop"==n.getOp()&&4==t.words.length&&4==n.words.length?(e.assert("{"==t.words[1]),t.update("mov "+n.words[2]+", "+t.words[2]),n.update("")):o&&"movs $r5, $i0"==t.getOpExt()&&"mov $r0, $r1"==n.getOpExt()&&t.numArgs[0]==n.numArgs[1]&&function(e,t){return!!("pop"==e.getOp()&&e.numArgs[0]&1<<t)}(o,t.numArgs[0])?(t.update("movs r"+n.numArgs[0]+", #"+t.numArgs[1]),n.update("")):"pop"==l&&r(t)>=0&&"push"==n.getOp()&&r(t)==r(n)?(t.update("ldr r"+r(t)+", [sp, #0]"),n.update("")):"push"==l&&"ldr $r5, [sp, $i1]"==n.getOpExt()&&r(t)==n.numArgs[0]&&0==n.numArgs[1]?n.update(""):o&&"push"==l&&r(t)>=0&&function(e,t){return"movs $r5, $i0"==e.getOpExt()&&e.numArgs[0]!=t}(n,r(t))&&"pop"==o.getOp()&&r(t)==r(o)&&(t.update(""),o.update("")):(t.update(n.text.replace("{","{lr, ")),n.update(""))}registerNo(e){if(!e)return null;e=e.toLowerCase();const t=n[e];return void 0===t?null:t}testAssembler(){e.assembler.expectError(this,"lsl r0, r0, #8"),e.assembler.expectError(this,"push {pc,lr}"),e.assembler.expectError(this,"push {r17}"),e.assembler.expectError(this,"mov r0, r1 foo"),e.assembler.expectError(this,"movs r14, #100"),e.assembler.expectError(this,"push {r0"),e.assembler.expectError(this,"push lr,r0}"),e.assembler.expectError(this,"pop {lr,r0}"),e.assembler.expectError(this,"b #+11"),e.assembler.expectError(this,"b #+102400"),e.assembler.expectError(this,"bne undefined_label"),e.assembler.expectError(this,".foobar"),e.assembler.expect(this,"0200      lsls    r0, r0, #8\nb500      push    {lr}\n2064      movs    r0, #100        ; 0x64\nb401      push    {r0}\nbc08      pop     {r3}\nb501      push    {r0, lr}\nbd20      pop {r5, pc}\nbc01      pop {r0}\n4770      bx      lr\n0000      .balign 4\ne6c0      .word   -72000\nfffe\n"),e.assembler.expect(this,"4291      cmp     r1, r2\nd100      bne     l6\ne000      b       l8\n1840  l6: adds    r0, r0, r1\n4718  l8: bx      r3\n"),e.assembler.expect(this,"          @stackmark base\nb403      push    {r0, r1}\n          @stackmark locals\n9801      ldr     r0, [sp, locals@1]\nb401      push    {r0}\n9802      ldr     r0, [sp, locals@1]\nbc01      pop     {r0}\n          @stackempty locals\n9901      ldr     r1, [sp, locals@1]\n9102      str     r1, [sp, base@0]\n          @stackempty locals\nb002      add     sp, #8\n          @stackempty base\n"),e.assembler.expect(this,"b090      sub sp, #4*16\nb010      add sp, #4*16\n"),e.assembler.expect(this,'6261      .string "abc"\n0063      \n'),e.assembler.expect(this,'6261      .string "abcde"\n6463      \n0065      \n'),e.assembler.expect(this,"3042      adds r0, 0x42\n1c0d      adds r5, r1, #0\nd100      bne #0\n2800      cmp r0, #0\n6b28      ldr r0, [r5, #48]\n0200      lsls r0, r0, #8\n2063      movs r0, 0x63\n4240      negs r0, r0\n46c0      nop\nb500      push {lr}\nb401      push {r0}\nb402      push {r1}\nb404      push {r2}\nb408      push {r3}\nb520      push {r5, lr}\nbd00      pop {pc}\nbc01      pop {r0}\nbc02      pop {r1}\nbc04      pop {r2}\nbc08      pop {r3}\nbd20      pop {r5, pc}\n9003      str r0, [sp, #4*3]\n")}}function r(t){e.assert("push"==t.getOp()||"pop"==t.getOp());let n=0,o=-1,r=t.numArgs[0];for(;r>0;)1&r&&(o=-1==o?n:-2),r>>=1,n++;return o>=0?o:-1}t.ThumbProcessor=o}(e.thumb||(e.thumb={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){!function(n){let o,r=t.Util;r.assert;!function(e){e[e.None=0]="None",e[e.NumberLiteral=1]="NumberLiteral",e[e.PointerLiteral=2]="PointerLiteral",e[e.RuntimeCall=3]="RuntimeCall",e[e.ProcCall=4]="ProcCall",e[e.SharedRef=5]="SharedRef",e[e.SharedDef=6]="SharedDef",e[e.FieldAccess=7]="FieldAccess",e[e.Store=8]="Store",e[e.CellRef=9]="CellRef",e[e.Sequence=10]="Sequence",e[e.JmpValue=11]="JmpValue",e[e.Nop=12]="Nop",e[e.InstanceOf=13]="InstanceOf"}(o=n.EK||(n.EK={}));let i,s,a=0;class l{isExpr(){return!1}isStmt(){return!1}getId(){return this._id||(this._id=++a),this._id}}n.Node=l;class c extends l{constructor(e,t,n){super(),this.exprKind=e,this.args=t,this.data=n,this.callingConvention=0}static clone(e){let t=new c(e.exprKind,e.args?e.args.slice(0):null,e.data);return e.jsInfo&&(t.jsInfo=e.jsInfo),e.totalUses&&(t.totalUses=e.totalUses,t.currUses=e.currUses),t.callingConvention=e.callingConvention,t.mask=e.mask,t.isStringLiteral=e.isStringLiteral,t}reset(){this.currUses=0,this.prevTotalUses&&(this.totalUses=this.prevTotalUses)}ptrlabel(){return this.jsInfo instanceof u?this.jsInfo:null}hexlit(){const e=this.jsInfo;return null!=e.hexlit?e.hexlit:null}isExpr(){return!0}isPure(){return this.isStateless()||this.exprKind==o.CellRef}isLiteral(){switch(this.exprKind){case o.NumberLiteral:case o.PointerLiteral:return!0;default:return!1}}isStateless(){switch(this.exprKind){case o.NumberLiteral:case o.PointerLiteral:case o.SharedRef:return!0;default:return!1}}sharingInfo(){let e=this,t=this.getId();return this.exprKind!=o.SharedRef&&this.exprKind!=o.SharedDef||(e=this.args[0],e?t=e.getId():e={currUses:"",totalUses:""}),`${e.currUses}/${e.totalUses} #${t}`}toString(){return p(this)}canUpdateCells(){switch(this.exprKind){case o.NumberLiteral:case o.PointerLiteral:case o.CellRef:case o.JmpValue:case o.SharedRef:case o.Nop:return!1;case o.SharedDef:case o.FieldAccess:case o.InstanceOf:return this.args[0].canUpdateCells();case o.RuntimeCall:case o.ProcCall:case o.Sequence:case o.Store:return!0;default:throw t.oops()}}}n.Expr=c,function(e){e[e.None=0]="None",e[e.Expr=1]="Expr",e[e.Label=2]="Label",e[e.Jmp=3]="Jmp",e[e.StackEmpty=4]="StackEmpty",e[e.Breakpoint=5]="Breakpoint",e[e.Comment=6]="Comment"}(i=n.SK||(n.SK={})),function(e){e[e.Always=1]="Always",e[e.IfZero=2]="IfZero",e[e.IfNotZero=3]="IfNotZero"}(s=n.JmpMode||(n.JmpMode={})),n.lblNumUsesJmpNext=-101;class u extends l{constructor(e,t){super(),this.stmtKind=e,this.expr=t}isStmt(){return!0}toString(){return p(this)}}function p(e){return function e(r){if(r.isExpr()){let n=r,i=n.args?n.args[0]:null;switch(n.exprKind){case o.NumberLiteral:case o.PointerLiteral:return n.data+"";case o.CellRef:return n.data.toString();case o.JmpValue:return"JMPVALUE";case o.Nop:return"NOP";case o.SharedRef:return`SHARED_REF(#${i.getId()})`;case o.SharedDef:return`SHARED_DEF(#${i.getId()} u(${i.totalUses}): ${e(i)})`;case o.FieldAccess:return`${e(i)}.${n.data.name}`;case o.RuntimeCall:return n.data+"("+n.args.map(e).join(", ")+")";case o.ProcCall:let r=n.data,s="";return s=null!=r.ifaceIndex?`IFACE@${r.ifaceIndex}`:null!=r.virtualIndex?`VTABLE@${r.virtualIndex}`:t.getDeclName(r.proc.action),s+"("+n.args.map(e).join(", ")+")";case o.Sequence:return"("+n.args.map(e).join("; ")+")";case o.InstanceOf:return"("+e(n.args[0])+" instanceof "+n.data.id+")";case o.Store:return`{ ${e(n.args[0])} := ${e(n.args[1])} }`;default:throw t.oops()}}else{let o=r,i=o.expr?e(o.expr):"{null}";switch(o.stmtKind){case n.SK.Expr:return"    "+i+"\n";case n.SK.Jmp:let e=`goto ${o.lblName}\n`;switch(o.jmpMode){case s.Always:return o.expr?`    { JMPVALUE := ${i} } ${e}`:"    "+e;case s.IfZero:return`    if (! ${i}) ${e}`;case s.IfNotZero:return`    if (${i}) ${e}`;default:throw t.oops()}case n.SK.StackEmpty:return"    ;\n";case n.SK.Breakpoint:return"    // brk "+o.breakpointInfo.id+"\n";case n.SK.Comment:return"    // "+o.expr.data+"\n";case n.SK.Label:return o.lblName+":\n";default:throw t.oops()}}}(e)}n.Stmt=u;class d{constructor(e,n,o){this.index=e,this.def=n,this.info=o,this.isarg=!1,this.iscap=!1,this._isLocal=!1,this._isGlobal=!1,this._debugType="?",this.isUserVariable=!1,this.bitSize=0,n&&(t.isInPxtModules(n)||(this.isUserVariable=!0),o&&t.setCellProps(this))}getName(){return t.getDeclName(this.def)}getDebugInfo(){return{name:this.getName(),type:this._debugType,index:this.index}}toString(){let e="";return this.def&&(e+=this.getName()||"?"),this.isarg&&(e="ARG "+e),"["+e+"]"}uniqueName(){return this.isarg?"arg"+this.index:this.getName().replace(/[^\w]/g,"_")+"___"+t.getNodeId(this.def)}isLocal(){return this._isLocal}isGlobal(){return this._isGlobal}loadCore(){return m(o.CellRef,null,this)}load(){let e=this.loadCore();return t.target.isNative&&!t.isStackMachine()&&0!=this.bitSize?6==this.bitSize?k("pxt::fromUInt",[e]):k("pxt::fromInt",[e]):this.isByRefLocal()?k("pxtrt::ldlocRef",[e]):e}isByRefLocal(){return this.isLocal()&&this.info.captured&&this.info.written}storeDirect(e){return m(o.Store,[this.loadCore(),e])}storeByRef(e){if(this.isByRefLocal())return k("pxtrt::stlocRef",[this.loadCore(),e]);if(t.target.isNative&&!t.isStackMachine()&&0!=this.bitSize){let t=6==this.bitSize?"pxt::toUInt":"pxt::toInt";return this.storeDirect(k(t,[e],1))}return this.storeDirect(e)}get isTemporary(){return!1}}n.Cell=d;class g extends d{constructor(e,t){super(e,null,null),this.index=e,this.owningProc=t,this.uid=g.unnamedCellCounter++}getName(){return"unnamed"+this.uid}uniqueName(){return this.getName()+"___U"+this.index}isByRefLocal(){return!1}get isTemporary(){return!0}}function h(e){const t=()=>{if(!e.args)return 0;let t=0;for(let n of e.args)t+=h(n);return e.mask&&e.mask.conversions&&(t+=4*e.mask.conversions.length),t};switch(e.exprKind){case o.NumberLiteral:return 2;case o.PointerLiteral:return 6;case o.RuntimeCall:return t()+2+2+4;case o.CellRef:return 2;case o.FieldAccess:return t()+(e.data.needsCheck?4:0)+2;case o.ProcCall:case o.SharedRef:case o.SharedDef:case o.Store:case o.Sequence:case o.JmpValue:case o.Nop:case o.InstanceOf:return 1e6;default:throw r.oops()}}function f(e){switch((e=c.clone(e)).exprKind){case o.PointerLiteral:case o.NumberLiteral:return e;case o.RuntimeCall:for(let t=0;t<e.args.length;++t)e.args[t]=f(e.args[t]);return e;case o.CellRef:const t=e.data;return t.repl?(t.replUses++,t.repl):e;case o.FieldAccess:return e.args[0]=f(e.args[0]),e;default:throw r.oops()}}g.unnamedCellCounter=0,n.UnnamedCell=g;function _(e,t){return new u(e,t)}function m(e,t,n){return new c(e,t,n)}function y(e,t){let n=m(o.PointerLiteral,null,e);return n.jsInfo=t,n}function k(e,t,n=0){let r=m(o.RuntimeCall,t,e);return n&&(r.mask={refMask:n}),r}function b(e,i=!1,s=!1){let a=!!i&&e.some((e=>e.canUpdateCells())),l=[];for(let t of r.reversed(e))t.isStateless()||(t.exprKind!=o.CellRef||a)&&(t.canUpdateCells()&&(a=!0),l.push(t));l.reverse(),t.isStackMachine()&&!s&&(l=[]);let c=[],u=e.map((e=>{if(l.indexOf(e)>=0){let t=e,r=e;return e.exprKind==o.SharedDef?(e.args[0].totalUses++,t=n.op(o.SharedRef,[e.args[0]])):(t=n.op(o.SharedRef,[e]),r=n.op(o.SharedDef,[e]),e.totalUses=2,e.currUses=0),c.push(r),t}return e}));return{precomp:c,flattened:u}}n.Procedure=class extends l{constructor(){super(...arguments),this.numArgs=0,this.info=null,this.seqNo=-1,this.isRoot=!1,this.locals=[],this.captured=[],this.args=[],this.parent=null,this.debugInfo=null,this.fillDebugInfo=null,this.classInfo=null,this.perfCounterName=null,this.perfCounterNo=0,this.body=[],this.lblNo=0,this.action=null,this.cachedJS=null,this.usingCtx=null}reset(){this.body=[],this.lblNo=0,this.locals=[],this.captured=[],this.args=[]}isGetter(){return this.action&&this.action.kind==e.SyntaxKind.GetAccessor}vtLabel(){return this.label()+(t.isStackMachine()?"":"_args")}label(){return t.getFunctionLabel(this.action)}toString(){return`\nPROC ${t.getDeclName(this.action)}\n${this.body.map((e=>e.toString())).join("")}\n`}emit(e){this.body.push(e)}emitExpr(e){this.emit(_(i.Expr,e))}mkLabel(e){let t=_(i.Label,null);return t.lblName="."+e+"_"+this.lblNo+++"_"+this.seqNo,t.lbl=t,t}emitLbl(e){this.emit(e)}emitLblDirect(e){let t=_(i.Label,null);t.lblName=e,t.lbl=t,this.emit(t)}getFullName(){let n=t.getDeclName(this.action);if(this.action){let t=e.pxtc.nodeLocationInfo(this.action);n=t.fileName.replace("pxt_modules/","")+"("+(t.line+1)+","+(t.column+1)+"): "+n}return n}getName(){return(this.action&&this.action.name?this.action.name.text:null)||"inline"}mkLocal(e,t){let n=new d(this.locals.length,e,t);return this.locals.push(n),n}mkLocalUnnamed(){let e=new g(this.locals.length,this);return this.locals.push(e),e}localIndex(e,t=!1){return this.captured.filter((t=>t.def==e))[0]||this.locals.filter((t=>t.def==e))[0]||(t?null:this.args.filter((t=>t.def==e))[0])}stackEmpty(){this.emit(_(i.StackEmpty,null))}emitJmpZ(e,t){this.emitJmp(e,t,s.IfZero)}emitJmp(e,t,n=s.Always,r=null){let a=_(i.Jmp,t);a.jmpMode=n,r&&r.exprKind==o.NumberLiteral&&(r=null),a.terminateExpr=r,"string"==typeof e?a.lblName=e:(a.lbl=e,a.lblName=a.lbl.lblName),this.emit(a)}inlineSelf(e){const{precomp:t,flattened:n}=b(e,!1,!0);r.assert(n.length==this.args.length),this.args.map(((e,t)=>{e.repl=n[t],e.replUses=0}));const i=f(this.inlineBody);return this.args.forEach(((e,t)=>{e.repl.exprKind==o.SharedRef&&(e.repl.args[0].prevTotalUses||(e.repl.args[0].prevTotalUses=e.repl.args[0].totalUses),e.repl.args[0].totalUses+=e.replUses-1),e.repl=null,e.replUses=0})),t.length?(t.push(i),m(o.Sequence,t)):i}resolve(){let e=(e,t)=>{if(e.args)for(let n=0;n<e.args.length;++n)e.args[n]=t(e.args[n])},i=t=>{switch(t.exprKind){case o.SharedDef:throw r.oops();case o.SharedRef:let e=t.args[0];if(e.totalUses)return e.totalUses--,t;{e.totalUses=-1,e.currUses=0,e.irCurrUses=0;let n=c.clone(t);return n.exprKind=o.SharedDef,n.args[0]=i(n.args[0]),n}}return e(t,i),t},s=t=>{if(t.exprKind==o.SharedRef)return t;switch(e(t,s),t.exprKind){case o.Sequence:t.args=t.args.filter(((e,n)=>n==t.args.length-1||!e.isPure()||(e.exprKind==o.SharedRef&&e.args[0].totalUses>0&&e.args[0].totalUses--,!1)))}return t},a=t=>{switch(t.exprKind){case o.SharedDef:let e=t.args[0];if(r.assert(e.totalUses<0,"arg.totalUses < 0"),r.assert(0===e.currUses,"arg.currUses === 0"),-1==e.totalUses)return a(e);e.totalUses=1;break;case o.SharedRef:return r.assert(t.args[0].totalUses>0,"e.args[0].totalUses > 0"),t.args[0].totalUses++,t;case o.PointerLiteral:const n=t.ptrlabel();n&&(n.lblNumUses||(n.lblNumUses=0),n.lblNumUses++)}return e(t,a),t},l=t=>{switch(t.exprKind){case o.SharedDef:e(t,l);case o.SharedRef:let n=t.args[0];return r.assert(n.totalUses>0,"arg.totalUses > 0"),1==n.totalUses?(r.assert(t.exprKind==o.SharedDef),n):(n.irCurrUses++,t);default:return e(t,l),t}};this.body=this.body.filter((e=>!e.expr||(e.expr=s(i(e.expr)),e.stmtKind!=n.SK.Expr||!e.expr.isPure())));let u=r.toDictionary(this.body.filter((e=>e.stmtKind==n.SK.Label)),(e=>e.lblName));for(let e=0;e<this.body.length;++e)this.body[e].stmtNo=e;for(let e of this.body)switch(e.expr&&(e.expr=a(e.expr)),e.stmtKind){case n.SK.Expr:break;case n.SK.Jmp:e.lbl=r.lookup(u,e.lblName),e.lbl||t.oops("missing label: "+e.lblName),e.lbl.lblNumUses?e.lbl.lblNumUses++:e.lbl.lblNumUses=1;break;case n.SK.StackEmpty:case n.SK.Label:case n.SK.Breakpoint:case n.SK.Comment:break;default:t.oops()}let p=[],d=null,g=!t.target.debugMode,f=null;for(let e of this.body)e.expr&&(e.expr=s(l(e.expr))),d&&d.lbl==e&&d.stmtKind==n.SK.Jmp&&e.stmtKind==n.SK.Label&&d.jmpMode==n.JmpMode.Always&&1==e.lblNumUses&&(e.lblNumUses=n.lblNumUsesJmpNext),d=e,e.stmtKind==n.SK.Breakpoint?p[e.breakpointInfo.id]=e.breakpointInfo:g&&(e.stmtKind==n.SK.Jmp?e.expr&&(f?g=!1:f=e.expr):e.stmtKind==n.SK.StackEmpty||(e.stmtKind==n.SK.Label?e.lblNumUses!=n.lblNumUsesJmpNext&&(g=!1):g=!1));if(g&&f){h(f)<=4*this.args.length+4+2+(t.target.isNative?4:30)&&(this.inlineBody=f)}pxt.options.debug&&pxt.debug(this.toString())}},n.iterExpr=function e(t,n){if(n(t),t.args)for(let o of t.args)e(o,n)},n.stmt=_,n.comment=function(e){return _(i.Comment,y(e,e))},n.op=m,n.numlit=function(e){return m(o.NumberLiteral,null,e)},n.shared=function(e){switch(e.exprKind){case o.SharedRef:e=e.args[0];break;case o.NumberLiteral:return e}return m(o.SharedRef,[e])},n.ptrlit=y,n.rtcall=k,n.rtcallMask=function(e,t,n,o){r.startsWith(e,"@nomask@")&&(e=e.slice(8),t=0);let i=k(e,o,t);return i.callingConvention=n,i},n.flattenArgs=b}(t.ir||(t.ir={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){class n{constructor(e,t){this.wave=e,this.id=t,this.flags=0,this.resetAll()}refresh(){this.flags&=-9,!this.proc||this.usedActions||I(this.proc.action)?this.proc&&!this.proc.cachedJS?this.resetEmit():this.usedNodes&&(this.flags|=32):this.resetEmit(),this.classInfo&&this.classInfo.reset()}resetEmit(){this.flags&=-41,this.proc&&this.proc.classInfo&&this.proc.classInfo.ctor==this.proc&&(this.proc.classInfo.ctor=null),this.functionInfo=null,this.variableInfo=null,this.classInfo=null,this.callInfo=null,this.proc=null,this.cell=null,this.exprInfo=null,this.usedNodes=null,this.usedActions=null}resetTSC(){this.flags&=16,this.typeCache=null,this.symbolCache=null,this.commentAttrs=null,this.valueOverride=null,this.declCache=void 0,this.fullName=null,this.constantFolded=void 0}resetAll(){this.resetTSC(),this.resetEmit()}}let o;function r(e){return e<<2|2}t.PxtNode=n,function(e){e[e.Enum=0]="Enum",e[e.Number=1]="Number",e[e.String=2]="String",e[e.Boolean=3]="Boolean",e[e.Unsupported=4]="Unsupported"}(o||(o={})),t.taggedUndefined=0,t.taggedNull=r(1),t.taggedFalse=r(2),t.taggedNaN=r(3),t.taggedTrue=r(16),t.thumbArithmeticInstr={adds:!0,subs:!0,muls:!0,ands:!0,orrs:!0,eors:!0,lsls:!0,asrs:!0,lsrs:!0},t.numberArithmeticInstr={div:!0,mod:!0,le:!0,lt:!0,ge:!0,gt:!0,eq:!0,neq:!0};const i={"Array_::getAt":{name:"_pxt_array_get",argsFmt:["T","T","T"],value:0},"Array_::setAt":{name:"_pxt_array_set",argsFmt:["T","T","T","T"],value:0},"BufferMethods::getByte":{name:"_pxt_buffer_get",argsFmt:["T","T","T"],value:0},"BufferMethods::setByte":{name:"_pxt_buffer_set",argsFmt:["T","T","T","I"],value:0},"pxtrt::mapGetGeneric":{name:"_pxt_map_get",argsFmt:["T","T","S"],value:0},"pxtrt::mapSetGeneric":{name:"_pxt_map_set",argsFmt:["T","T","S","T"],value:0}};let s=t.ir.EK;t.SK=e.SyntaxKind,t.numReservedGlobals=1;let a=0,l=1;function c(n){if(n.pxt)return!!(16&n.pxt.flags);const o=e.getSourceFileOfNode(n);return!!o&&t.isPxtModulesFilename(o.fileName)}function u(e){if(e.pxt){const n=e.pxt;return n.wave!=l&&(n.wave=l,t.compileOptions&&t.compileOptions.skipPxtModulesTSC&&16&n.flags?t.compileOptions.skipPxtModulesEmit?n.refresh():n.resetEmit():n.resetAll()),n}{const t=new n(l,++a);return c(e)&&(t.flags|=16),e.pxt=t,t}}function p(e){return u(e).id}function d(t){return t?e.SyntaxKind[t.kind]:"<null>"}function g(e,t,n=!1){let o=new Error(t);if(o.ksEmitterUserError=!0,o.ksErrorCode=e,n&&H)return M||(M=t,U=e),o;throw o}function h(){return t.target.isNative&&t.target.nativeType==t.NATIVE_TYPE_VM}function f(){return t.target.isNative&&t.target.nativeType!=t.NATIVE_TYPE_VM}function _(){return t.target.isNative&&t.target.nativeType==t.NATIVE_TYPE_THUMB}function m(e){return f()?t.ir.rtcall("pxt::fromInt",[e]):e}function y(e){return f()?t.ir.rtcall("pxt::fromBool",[e]):e}function k(e){switch(e){case 0:return t.target.shortPointers?2:4;case 1:return 1;case 3:return 2;case 5:return 4;case 2:return 1;case 4:return 2;case 6:return 4;default:throw t.oops()}}function b(e){switch(e){case 1:case 3:case 5:return!0;case 2:case 4:case 6:return!1;default:throw t.oops()}}function v(e){switch(e.kind){case t.SK.TemplateHead:case t.SK.TemplateMiddle:case t.SK.TemplateTail:case t.SK.StringLiteral:case t.SK.NoSubstitutionTemplateLiteral:return!0;default:return!1}}function T(e){return e&&e.modifiers&&e.modifiers.some((e=>e.kind==t.SK.StaticKeyword))}function E(e){return e.modifiers&&e.modifiers.some((e=>e.kind==t.SK.ReadonlyKeyword))}function S(e,t){return e.explicitDefaults?e.explicitDefaults.indexOf(t)<0?null:e.paramDefl[t]:null}function C(e){if(!e)return null;switch(e.kind){case t.SK.MethodDeclaration:return"";case t.SK.Constructor:return"new/";case t.SK.GetAccessor:return"get/";case t.SK.SetAccessor:return"set/";default:return null}}function x(e){return C(e)+j(e)}function B(e){return null!=C(e)}function A(e){return e?B(e)?e:A(e.parent):null}function I(e){let n=e,o=!1;for(;;)switch(n=n.parent,n||g(9229,F("cannot determine parent of {0}",d(e))),n.kind){case t.SK.MethodDeclaration:case t.SK.Constructor:case t.SK.GetAccessor:case t.SK.SetAccessor:case t.SK.FunctionDeclaration:case t.SK.ArrowFunction:case t.SK.FunctionExpression:return n;case t.SK.WhileStatement:case t.SK.DoStatement:case t.SK.ForInStatement:case t.SK.ForOfStatement:case t.SK.ForStatement:o=!0;break;case t.SK.SourceFile:return o?L:null}}function D(e){return"objectFlags"in e}function N(e){return!!e&&(e.kind==t.SK.VariableDeclaration||e.kind==t.SK.BindingElement&&N(e.parent.parent))}function w(e){return!!e&&(N(e)&&!I(e)||e.kind==t.SK.PropertyDeclaration&&T(e))}function R(e){return!!e&&(e.kind==t.SK.Parameter||e.kind==t.SK.BindingElement&&R(e.parent.parent))}t.isInPxtModules=c,t.pxtInfo=u,t.getNodeId=p,t.stringKind=d,t.isStackMachine=h,t.needsNumberConversions=f,t.isThumb=_,t.sizeOfBitSize=k,t.isBitSizeSigned=b,t.setCellProps=function(n){var o;if(n._isLocal=N(o=n.def)&&!w(o)||R(n.def),n._isGlobal=w(n.def),!n.def.isThisParameter){let o=ee(n.def);o.flags&e.TypeFlags.Void&&t.oops("void-typed variable, "+n.toString()),n.bitSize=function(e){if(!e||!e.type)return 0;if(!pe(ee(e)))return 0;if(e.type.kind!=t.SK.TypeReference)return 0;switch(e.type.typeName.getText()){case"int8":return 1;case"int16":return 3;case"int32":return 5;case"uint8":return 2;case"uint16":return 4;case"uint32":return 6;default:return 0}}(n.def),0!=n.bitSize?n._debugType=(b(n.bitSize)?"int":"uint")+8*k(n.bitSize):ue(o)?n._debugType="string":o.flags&e.TypeFlags.NumberLike&&(n._debugType="number")}n.isLocal()&&0!=n.bitSize&&(n.bitSize=0,g(9256,F("bit sizes are not supported for locals and parameters")))},t.isStatic=T,t.isReadOnly=E,t.getExplicitDefault=S,t.isObjectType=D;class O{constructor(e,t){this.id=e,this.decl=t,this.baseClassInfo=null,this.allfields=[],this.methods={},this.attrs=K(t),this.reset()}reset(){this.vtable=null,this.itable=null}get isUsed(){return!!(8&u(this.decl).flags)}allMethods(){const e=[];for(let t of Object.keys(this.methods))for(let n of this.methods[t])e.push(n);return e}usedMethods(){const e=[];for(let t of Object.keys(this.methods))for(let n of this.methods[t]){8&u(n).flags&&e.push(n)}return e}}t.ClassInfo=O;let P,L,M,F=t.assembler.lf,U=0,H=0;function V(e,n){const o=u(n);return null==o.fullName&&(o.fullName=t.getFullName(e,n.symbol)),o.fullName}function G(n){n.kind==t.SK.VariableDeclaration&&(n=n.parent.parent);let o=t=>{const n=e.getSourceFileOfNode(t);if(!n)return"";const o=e.getLeadingCommentRangesOfNode(t,n);if(!o)return"";return o.map((e=>n.text.slice(e.pos,e.end))).join("\n")};return n.symbol&&n.symbol.declarations&&n.symbol.declarations.length>1?n.symbol.declarations.map(o).join("\n"):o(n)}function W(e){let n="";for(let t of e.declarations)n+=G(t);return t.parseCommentString(n)}function K(e){const n=e?u(e):null;if(!n||2&n.flags)return t.parseCommentString("");if(n.commentAttrs)return n.commentAttrs;let o=t.parseCommentString(G(e));return o._name=j(e),n.commentAttrs=o,o}function j(e){return e.name&&e.name.kind==t.SK.Identifier?e.name.text:"???"}function z(t){if(D(t)&&t.objectFlags&e.ObjectFlags.Reference){let e=t;if(e.typeArguments&&e.typeArguments.length)return e.target}return null}function $(t){return!!D(t)&&(t.objectFlags&e.ObjectFlags.Reference&&t.symbol&&"Array"==t.symbol.name)}function X(t){return!!D(t)&&(!!(t.objectFlags&e.ObjectFlags.Interface)||!!(t.objectFlags&e.ObjectFlags.Anonymous))}function Y(t){return!!t.isThisType||!!D(t)&&!!(t.objectFlags&e.ObjectFlags.Class||t.symbol&&t.symbol.flags&e.SymbolFlags.Class)}function J(e){let t=z(e);return Y(t||e)}function q(t,n=-1){return $(t)?t.typeArguments[0]:P.getIndexTypeOfType(t,e.IndexKind.Number)}function Z(e){return e}function Q(e){return null===e?t.taggedNull:void 0===e?t.taggedUndefined:!1===e?t.taggedFalse:!0===e?t.taggedTrue:isNaN(e)?t.taggedNaN:null}function ee(t){let n;const o=u(t);if(o.typeCache)return o.typeCache;if(e.isExpression(t)&&(n=P.getContextualType(t)),!n)try{n=P.getTypeAtLocation(t)}catch(e){g(9203,F("Unknown type for expression"))}return n?(o.typeCache=n,n):n}function te(t){if(!(t.flags&e.TypeFlags.Union))return o.Unsupported;let n,r=!0;return t.types.forEach((t=>{if(void 0===n)t.flags&e.TypeFlags.NumberLike?n=o.Number:t.flags&e.TypeFlags.BooleanLike?n=o.Boolean:t.flags&e.TypeFlags.StringLike?n=o.String:t.flags&e.TypeFlags.EnumLike&&(n=o.Enum);else switch(n){case o.Number:r=r&&!!(t.flags&e.TypeFlags.NumberLike);break;case o.Boolean:r=r&&!!(t.flags&e.TypeFlags.BooleanLike);break;case o.String:r=r&&!!(t.flags&e.TypeFlags.StringLike);break;case o.Enum:r=r&&!!(t.flags&e.TypeFlags.EnumLike)}})),r?n:o.Unsupported}function ne(t){let n=P.getSignatureFromDeclaration(t);return!(P.getReturnTypeOfSignature(n).flags&e.TypeFlags.Void)}function oe(e){return!(!e||!e.name)}function re(e){if(!e)return"";switch(e.kind){case t.SK.ModuleBlock:return re(e.parent);case t.SK.ClassDeclaration:case t.SK.ModuleDeclaration:return re(e.parent)+e.name.text+".";default:return""}}function ie(e){let n=oe(e)?e.name.text:null;if(!n){if(e.kind!=t.SK.Constructor){for(let t=e.parent;t;t=t.parent)if(oe(t))return ie(t)+".inline";return"inline"}n="constructor"}return re(e.parent)+n}function se(e){return ie(e).replace(/[^\w]+/g,"_")}function ae(e){return se(e)+"__P"+p(e)}t.getNodeFullName=V,t.getComments=G,t.parseCommentsOnSymbol=W,t.parseComments=K,t.getName=j,t.checkType=Z,t.taggedSpecial=Q,t.getDeclName=ie,t.getFunctionLabel=ae;class le{constructor(e){this.decl=e,this.capturedVars=[]}get isUsed(){return!!(8&u(this.decl).flags)}}function ce(e,t,n){return!!(e.flags&t)||te(e)===n}function ue(t){return ce(t,e.TypeFlags.String|e.TypeFlags.StringLiteral,o.String)}function pe(t){return ce(t,e.TypeFlags.Number|e.TypeFlags.NumberLiteral,o.Number)}t.FunctionAddInfo=le,t.compileBinary=function(n,o,r,a){t.compilerHooks.preBinary&&t.compilerHooks.preBinary(n,o,r),t.target=o.target,t.compileOptions=o,t.target.debugMode=!!o.breakpoints;const b=e.createDiagnosticCollection();P=n.getTypeChecker();let C=t.U.cpuUs(),D=[],G=[],z={},Z={},te=null,oe=null,re=!1,ce=[];if(l++,o.target.isNative){if(!o.extinfo||!o.extinfo.hexinfo)return{diagnostics:[{file:n.getSourceFiles()[0],start:0,length:0,category:t.DiagnosticCategory.Error,code:9043,messageText:F("The hex file is not available, please connect to internet and try again.")}],emittedFiles:[],emitSkipped:!0};let e=o.extinfo,r=o.target;if(e&&e.disabledDeps){const t=(o.otherMultiVariants||[]).find((e=>e.extinfo&&!e.extinfo.disabledDeps));t&&(pxt.debug(`using alternative extinfo (due to ${e.disabledDeps})`),e=t.extinfo,r=t.target)}t.hexfile.setupFor(r,e||t.emptyExtInfo()),t.hexfile.setupInlineAssembly(o)}let fe,_e=new de;function me(){_e.reset(),fe=null,r.breakpoints=[{id:0,isDebuggerStmt:!1,fileName:"bogus",start:0,length:0,line:0,column:0}],r.procCallLocations=[]}_e.res=r,_e.options=o,_e.target=o.target,o.computeUsedSymbols&&(r.usedSymbols={},r.usedArguments={});let ye=[];if(!o.forceEmit||0==r.diagnostics.length){let e=n.getSourceFiles().slice();const t=e.find((e=>e.fileName===pxt.MAIN_TS));t&&(e=e.filter((e=>e.fileName!==pxt.MAIN_TS)),e.push(t));const o=e.find((e=>e.fileName===pxt.TUTORIAL_CODE_STOP));o&&(e=e.filter((e=>e.fileName!==pxt.TUTORIAL_CODE_STOP)),e.push(o)),e.forEach((e=>{e.statements.forEach((e=>{ye.push(e)}))}))}let ke=n.getSourceFiles().filter((e=>t.Util.endsWith(e.fileName,a)))[0],be={kind:t.SK.FunctionDeclaration,parameters:[],name:{text:"<main>",pos:0,end:0},body:{kind:t.SK.Block,statements:ye},parent:ke,pos:0,end:0};L=be;const ve=u(be);for(ve.flags|=3,ot(be),D=[],me(),re=!0,Tn(be);Et(),!Fe(););!function(){let e=_e.globals.slice(0);e.forEach(((e,t)=>e.index=t));const n=e=>0==e?10:k(e);e.sort(((e,t)=>n(e.bitSize)-n(t.bitSize)||e.index-t.index));let o=4*t.numReservedGlobals,r=0;for(let t of e){const e=h()?0:t.bitSize;let n=k(e);for(;o&n-1;)o++;r||0!=e||(r=o),t.index=o,o+=n}_e.globalsWords=o+3>>2,_e.nonPtrGlobals=r?r>>2:_e.globalsWords}(),re=!1,function(){for(let e of _e.usedClassInfos)Ue(e);let e=Object.keys(_e.ifaceMemberMap);e.sort(t.U.strcmp),e.unshift(""),_e.emitString(""),_e.ifaceMembers=e,_e.ifaceMemberMap={};let n=0;for(let t of e)_e.ifaceMemberMap[t]=n++;for(let e of _e.usedClassInfos)for(let t of e.itable)t.idx=Re(t.name);for(let e of _e.usedClassInfos)e.lastSubtypeNo=void 0,e.classNo=void 0;let o=pxt.BuiltInType.User0;const r=e=>{t.U.assert(!e.classNo),e.classNo=o++;for(let t of e.derivedClasses)t.isUsed&&r(t);e.lastSubtypeNo=o-1};for(let e of _e.usedClassInfos){let t=e;for(;t.baseClassInfo;)t=t.baseClassInfo;t.classNo||r(t)}}();let Te=t.U.cpuUs();r.times.pass0=Te-C;let Ee=b.getDiagnostics();me(),re=!1,_e.finalPass=!0,En(be),t.U.assert(0==D.length),r.configData=[];for(let e of Object.keys(Z))Z["!"+e]||r.configData.push({name:e.replace(/^\!/,""),key:Z[e].key,value:Z[e].value});r.configData.sort(((e,t)=>e.key-t.key));let Se=t.U.cpuUs();if(r.times.pass1=Se-Te,kn(be,(function(){if(o.noEmit)return;_e.writeFile=(e,t)=>{r.outfiles[e]=t};for(let e of _e.procs)e.cachedJS&&!e.inlineBody||e.resolve();t.target.isNative&&(_e.procs=_e.procs.filter((e=>!(e.inlineBody&&!e.info.usedAsIface&&!e.info.usedAsValue))));o.target.isNative?(o.extinfo.yotta&&_e.writeFile("yotta.json",JSON.stringify(o.extinfo.yotta,null,2)),o.extinfo.platformio&&_e.writeFile("platformio.json",JSON.stringify(o.extinfo.platformio,null,2)),o.target.nativeType==t.NATIVE_TYPE_VM?t.vmEmit(_e,o):t.processorEmit(_e,o,r)):t.jsEmit(_e)})),r.times.passFinal=t.U.cpuUs()-Se,o.ast){let e=t.U.cpuUs();t.annotate(n,a,t.target),r.times.passAnnotate=t.U.cpuUs()-e}return t.compileOptions=null,0==Ee.length&&(Ee=b.getDiagnostics()),t.compilerHooks.postBinary&&t.compilerHooks.postBinary(n,o,r),{diagnostics:Ee,emittedFiles:void 0,emitSkipped:!!o.noEmit};function Ce(t,n,o,r,i,s,a){b.add(e.createDiagnosticForNode(n,{code:o,message:r,key:r.replace(/^[a-zA-Z]+/g,"_"),category:t},i,s,a))}function xe(e,n,o,r,i,s){Ce(t.DiagnosticCategory.Error,e,n,o,r,i,s)}function Be(t,n,o=9202){if(n)return g(o,n);t||g(o,F("Sorry, this language feature is not supported"));let r=d(t),i=!1,s=null;switch(t.kind){case e.SyntaxKind.ForInStatement:r=F("for in loops");break;case e.SyntaxKind.ForOfStatement:r=F("for of loops"),i=!0;break;case e.SyntaxKind.PropertyAccessExpression:r=F("property access");break;case e.SyntaxKind.DeleteExpression:r=F("delete");break;case e.SyntaxKind.GetAccessor:r=F("get accessor method"),i=!0;break;case e.SyntaxKind.SetAccessor:r=F("set accessor method"),i=!0;break;case e.SyntaxKind.TaggedTemplateExpression:r=F("tagged templates");break;case e.SyntaxKind.SpreadElement:r=F("spread");break;case e.SyntaxKind.TryStatement:case e.SyntaxKind.CatchClause:case e.SyntaxKind.FinallyKeyword:case e.SyntaxKind.ThrowStatement:r=F("throwing and catching exceptions");break;case e.SyntaxKind.ClassExpression:r=F("class expressions"),s=F("declare a class as class C {} not let C = class {}")}let a="";return a=i?F("{0} not currently supported",r):F("{0} not supported",e.SyntaxKind[t.kind]),s&&(a+=" - "+s),g(o,a)}function Ae(e){return p(e)+""}function Ie(e){const t=u(e);return t.functionInfo||(t.functionInfo=new le(e)),t.functionInfo}function De(e){const t=u(e);return t.variableInfo||(t.variableInfo={}),t.variableInfo}function Ne(e,t=!1){let n=De(e);t&&(n.written=!0);let o=I(e);if(null==o||o==fe.action);else{let t=fe.action;for(;t&&t!=o;){let n=Ie(t);n.capturedVars.indexOf(e)<0&&n.capturedVars.push(e),t=I(t)}n.captured=!0}}function we(e){const t=e(_e);return re&&_e.recordAction(oe,e),t}function Re(e,n=!1){return we((o=>{n&&(t.U.lookup(o.explicitlyUsedIfaceMembers,e)||(t.U.assert(!o.finalPass),o.explicitlyUsedIfaceMembers[e]=!0));let r=t.U.lookup(o.ifaceMemberMap,e);return null!=r||(t.U.assert(!o.finalPass),r=o.ifaceMemberMap[e]=-1,o.emitString(e)),r}))}function Oe(t){t.flags&e.TypeFlags.Void&&g(9203,F("void-typed variables not supported"))}function Pe(e){const n=u(e);Oe(ee(e)),n.cell||(n.cell=new t.ir.Cell(null,e,De(e))),_e.globals.indexOf(n.cell)<0&&_e.globals.push(n.cell)}function Le(e){if(w(e)){ot(e);const t=u(e);return t.cell||Pe(e),t.cell}{let t=fe.localIndex(e);return t||(_e.finalPass?g(9204,F("cannot locate identifer")):t=fe.mkLocal(e,De(e))),t}}function Me(e){return e.kind==t.SK.MethodDeclaration&&0==e.parameters.length&&"toString"==j(e)}function Fe(){re=!1;const e=_e.usedClassInfos.length;for(let e of _e.usedClassInfos){for(let t of e.allMethods()){const e=u(t),n=Ie(t);8&e.flags?n.virtualParent&&rt(n.virtualParent.decl):(n.virtualParent&&n.virtualParent.isUsed||Me(t)||yt(j(t)))&&rt(t)}const t=mt(e.decl);t&&rt(t)}return re=!0,0==D.length&&e==_e.usedClassInfos.length}function Ue(e){if(t.assert(e.isUsed,"inf.isUsed"),e.vtable)return e.vtable;let n=e.baseClassInfo?Ue(e.baseClassInfo).slice(0):[];e.derivedClasses=[],e.baseClassInfo&&e.baseClassInfo.derivedClasses.push(e);for(let o of e.usedMethods()){_e.numMethods++;let r=Ie(o);const i=K(o);if(Me(o)&&!i.shim&&(e.toStringMethod=ft(o),e.toStringMethod.info.usedAsIface=!0),r.virtualParent){_e.numVirtMethods++;let e=x(o),i=!1,s=ft(o);t.U.assert(!!s);for(let t=0;t<n.length;++t)x(n[t].action)==e&&(n[t]=s,r.virtualIndex=t,i=!0);i||(r.virtualIndex=n.length,n.push(s))}}e.vtable=n,e.itable=[];const o={};for(let t of e.allfields){let n=j(t),r=Lt(e,t,!1);o[n]=!0,e.itable.push({name:n,info:(r.idx+1)*(h()?1:4),idx:Re(n),proc:null})}for(let n=e;n;n=n.baseClassInfo)for(let o of n.usedMethods()){const n=j(o);if(K(o).shim)continue;const r=ft(o),i=e.itable.find((e=>e.name==n)),s=o.kind==t.SK.SetAccessor,a=o.kind==t.SK.GetAccessor;i?(s&&!i.setProc?i.setProc=r:a&&!i.proc&&(i.proc=r),i.info=0):e.itable.push({name:n,info:0,idx:Re(n),proc:s?null:r,setProc:s?r:null}),r.info.usedAsIface=!0}return e.vtable}function He(e){if(32&e.flags||16&e.flags&&t.compileOptions.skipPxtModulesEmit)throw r.needsFullRecompile=!0,g(9200,F("full recompile required"))}function Ve(e,n=null){n||(n=e.symbol.valueDeclaration);const o=u(n);if(!o.classInfo){const e=se(n)+"__C"+p(n),r=new O(e,n);o.classInfo=r,r.attrs.autoCreate&&(z[r.attrs.autoCreate]=!0),r.baseClassInfo=function(e){if(e.heritageClauses)for(let n of e.heritageClauses)switch(n.token){case t.SK.ExtendsKeyword:if(!n.types||1!=n.types.length)throw g(9228,F("invalid extends clause"));let o=ee(n.types[0]);if(o&&Y(o))return P.getTypeAtLocation(e),Ve(o);throw g(9228,F("cannot inherit from this type"));case t.SK.ImplementsKeyword:break;default:throw g(9228,F("invalid heritage clause"))}return null}(n);const i=r.baseClassInfo?t.U.toDictionary(r.baseClassInfo.allfields,(e=>j(e))):{},s=(e,t=r.baseClassInfo)=>t?t.methods[e]||s(e,t.baseClassInfo):null;for(let e of n.members)if(e.kind==t.SK.PropertyDeclaration){let n=e;T(n)||r.allfields.push(n);const o=j(n);(s(o)||t.U.lookup(i,o))&&xe(n,9279,F("redefinition of '{0}' as field",o))}else if(e.kind==t.SK.Constructor)for(let t of e.parameters)ge(t)&&r.allfields.push(t);else if(B(e)){let n=Ie(e);n.parentClassInfo=r,n.isUsed&&kt(r);const o=j(e);r.methods.hasOwnProperty(o)||(r.methods[o]=[]),r.methods[o].push(e);const s=t.U.lookup(i,o);if(s){const e=u(s);64&e.flags||(e.flags|=64,8&e.flags&&Re(o,!0),He(e))}}r.baseClassInfo&&(r.allfields=r.baseClassInfo.allfields.concat(r.allfields),function(e){for(let n of e.allMethods()){let o=null;const r=x(n),i=j(n);for(let t=e.baseClassInfo;t;t=t.baseClassInfo)if(t.methods.hasOwnProperty(i))for(let e of t.methods[i])x(e)==r&&(o=e);if(o){let e=Ie(n),r=Ie(o);o.parameters.length!=n.parameters.length&&xe(n,9255,F("the overriding method is currently required to have the same number of arguments as the base one")),e.virtualParent=r,r.virtualParent||(He(u(o)),r.virtualParent=r),t.assert(r.virtualParent==r,"pinf.virtualParent == pinf")}}}(r))}return o.classInfo}function Ge(e){if(!e)return!1;if(v(e))return!1;switch(e.kind){case t.SK.ArrayLiteralExpression:return e.elements.some(Ge);default:return null==Kt(e)}}function We(e){const t=Wt(e);if(t)return Jt(t.val);if(w(e)){if(K(e).shim)return ut(e,e,[])}let n=Le(e);return Ne(e),n.load()}function Ke(e){K(e).shim&&g(9207,F("built-in functions cannot be yet used as values; did you forget ()?"));let n=Ie(e);return je(n),n.location?n.location.load():(t.assert(!_e.finalPass||0==n.capturedVars.length,"!bin.finalPass || info.capturedVars.length == 0"),n.usedAsValue=!0,rt(e),Tt(e))}function je(e){void 0===e.usedBeforeDecl?e.usedBeforeDecl=!0:_e.finalPass&&e.usedBeforeDecl&&e.capturedVars.length&&I(e.decl)&&!e.alreadyEmitted&&g(9278,F("function referenced before all variables it uses are defined"))}function ze(e){const n=at(e),o=Wt(n);if(o)return Jt(o.val);if(n&&(N(n)||R(n)))return We(n);if(n&&n.kind==t.SK.FunctionDeclaration)return Ke(n);if("undefined"==e.text)return Jt(void 0);throw Be(e,F("Unknown or undeclared identifier"),9235)}function $e(e){let n=A(e);n||g(9208,F("'this' used outside of a method"));let o=Ie(n);return o.thisParameter||t.oops("no this"),We(o.thisParameter)}function Xe(e){let n;if(""==e)n=t.ir.rtcall("String_::mkEmpty",[]);else{let o=function(e){return we((t=>t.emitString(e)))}(e);n=t.ir.ptrlit(o,JSON.stringify(e))}return n.isStringLiteral=!0,n}function Ye(e){let n=lt(e),o=bn(e);return t.target.isNative||v(e)?Ot(o,n):(o=t.ir.rtcallMask("String_::stringConv",1,1,[o]),Ot(o,!0))}function Je(e){let n=0,o=(e,t)=>function(e){return v(e)&&""==e.text}(t)?e:(n++,Qt("String_::concat",[Ot(e,!0),Ye(t)],null)),r=u(Ye(e.head)).valueOverride;for(let t of e.templateSpans)r=o(r,t.expression),r=o(r,t.literal);return 0==n?Qt("String_::concat",[Ot(r,!0),Ot(t.ir.rtcall("String_::mkEmpty",[]),!1)],null):r}function qe(e){let n=at(e);const o=Wt(n);if(o)return Jt(o.val);if(n.kind==t.SK.SetAccessor&&(n=Ze(n)),n.kind==t.SK.GetAccessor)return dt(e,e,[],null,n);if(n.kind==t.SK.EnumMember)throw g(9210,F("Cannot compute enum value"));if(n.kind==t.SK.PropertySignature||n.kind==t.SK.PropertyAssignment)return dt(e,e,[],null,n,e.expression);if(n.kind==t.SK.PropertyDeclaration||n.kind==t.SK.Parameter){if(T(n))return We(n);if(Qe(n))return dt(e,e,[],null,n,e.expression);{let n=function(e){const n=ee(e.expression);if(J(n)){const o=Ve(n);let r=e.expression.kind==t.SK.ThisKeyword;return t.target.switches.noThisCheckOpt&&(r=!1),Lt(o,Mt(o,e.name.text),!r)}throw Be(e,F("bad field access"),9247)}(e);return t.ir.op(s.FieldAccess,[bn(e.expression)],n)}}if(B(n)||n.kind==t.SK.MethodSignature)throw g(9211,F("cannot use method as lambda; did you forget '()' ?"));if(n.kind==t.SK.FunctionDeclaration)return Ke(n);if(N(n))return We(n);throw Be(e,F("Unknown property access for {0}",d(n)),9237)}function Ze(n){const o=e.getDeclarationOfKind(n.symbol,t.SK.GetAccessor);if(null==o)throw g(9281,F("setter currently requires a corresponding getter"));return o}function Qe(e){if(e.kind==t.SK.Parameter||e.kind==t.SK.PropertyDeclaration){const n=u(e);return!!t.target.switches.slowFields||!!(64&n.flags)}return!1}function et(t,n=null){let o=ee(t.expression),r={callingConvention:0,paramDefl:{}},i=null,s=!1;if(!n&&ue(o)?i="String_::charAt":$(o)?i=n?"Array_::setAt":"Array_::getAt":X(o)&&(r=W(o.symbol),i=n?r.indexerSet:r.indexerGet),!i&&o.flags&(e.TypeFlags.Any|e.TypeFlags.StructuredOrTypeVariable)&&(i=n?"pxtrt::mapSetGeneric":"pxtrt::mapGetGeneric",s=!0),i){if(s||qt(t.argumentExpression)){return Qt(i,[t.expression,t.argumentExpression],r,n?[n]:[])}throw Be(t,F("non-numeric indexer on {0}",i),9238)}throw Be(t,F("unsupported indexer"),9239)}function tt(n){let r=function(e){return!!w(e)&&(!Ge(e.initializer)||!!K(e).whenUsed)}(n)||function(e){return e.kind==t.SK.FunctionDeclaration&&!I(e)||B(e)}(n)||e.isClassDeclaration(n);return!t.target.switches.noTreeShake&&(!(o.testMode&&r&&!c(n))&&r)}function nt(e){if(!tt(e))return!0;const t=u(e);return _e.finalPass?!!(8&t.flags):t==oe}function ot(e){if(!e)return;const t=u(e);t.classInfo?kt(t.classInfo):(o.computeUsedSymbols&&e.symbol&&(r.usedSymbols[V(P,e)]=null),h()&&B(e)&&Re(j(e),!0),it(e),8&t.flags||(t.flags|=8,tt(e)&&D.push(e)))}function rt(e){ot(e)}function it(e){re&&(oe?oe.usedNodes[Ae(e)]=e:t.U.oops("no using ctx for: "+j(e)))}function st(t){if(!t)return null;const n=u(t);if(void 0!==n.declCache)return n.declCache;let o,r=P.getSymbolAtLocation(t);if(r&&(o=r.valueDeclaration,!o&&r.declarations)){let t=r.declarations[0];t&&t.kind==e.SyntaxKind.ImportEqualsDeclaration&&(r=P.getSymbolAtLocation(t.moduleReference),r&&(o=r.valueDeclaration))}return o}function at(e){let n=st(e);if(ot(n),!n&&e&&e.kind==t.SK.PropertyAccessExpression){const o=e;n={kind:t.SK.PropertySignature,symbol:{isBogusSymbol:!0,name:o.name.getText()},name:o.name},u(n).flags|=2}return ve.declCache=n||null,n}function lt(e){return e.kind==t.SK.NullKeyword||e.kind==t.SK.NumericLiteral?!!e.isRefOverride:!v(e)}function ct(e){t.assert(e.length<=8,"args.length <= 8");let n=0;return e.forEach(((e,t)=>{lt(e)&&(n|=1<<t)})),n}function ut(n,r,i){let s=K(n),a=!(ee(r).flags&e.TypeFlags.Void),l=s.shim;if(l.indexOf("(")>=0){let e=/(.*)\((.*)\)$/.exec(l);if(e){i.length&&t.U.userError("no arguments expected");let a=[];if(e[2].replace(/\s/g,"")){for(let n of e[2].split(/,/)){let e=parseInt(n);isNaN(e)&&(e=Xt(r,n),null==e&&(e=zt(r,n)),null==e&&t.U.userError("invalid argument: "+n+" in "+l)),a.push(t.ir.numlit(e))}a.length>4&&t.U.userError("too many args")}return l=e[1],o.target.isNative&&t.hexfile.validateShim(ie(n),l,s,!0,a.map((e=>!0))),t.ir.rtcallMask(l,0,s.callingConvention,a)}}return"TD_NOOP"==l?(t.assert(!a,"!hasRet"),t.target.switches.profile&&"perfCounter"==s.shimArgument&&(i[0]&&i[0].kind==t.SK.StringLiteral&&(fe.perfCounterName=i[0].text),fe.perfCounterName||(fe.perfCounterName=fe.getFullName())),Jt(void 0)):"TD_ID"==l||"ENUM_GET"===l?(t.assert(1==i.length,"args.length == 1"),bn(i[0])):(o.target.shimRenames&&t.U.lookup(o.target.shimRenames,l)&&(l=o.target.shimRenames[l]),o.target.isNative&&t.hexfile.validateShim(ie(n),l,s,a,i.map(qt)),Qt(l,i,s))}function pt(e,n,o){if(!e)return;let r=e.getParameters(),i=n.length;r.length>n.length&&r.slice(n.length).forEach((e=>{if(e.valueDeclaration&&e.valueDeclaration.kind==t.SK.Parameter){let r=e.valueDeclaration;if(r.initializer)(function(e){switch(e.kind){case t.SK.UndefinedKeyword:case t.SK.NullKeyword:case t.SK.TrueKeyword:case t.SK.FalseKeyword:case t.SK.NumericLiteral:return!0;case t.SK.PropertyAccessExpression:return bn(e).exprKind==s.NumberLiteral;default:return!1}})(r.initializer)||g(9212,F("only numbers, null, true and false supported as default arguments")),n.push(r.initializer);else{let e=S(o,j(r)),t=e?Jt(parseInt(e)):null;null==t&&(t=Jt(void 0)),n.push(Ot(t))}}else g(9213,F("unsupported default argument (shouldn't happen)"))}));for(let e=0;e<i;e++){let o=r[e];o&&o.valueDeclaration&&o.valueDeclaration.kind==t.SK.Parameter&&(n[e],o.valueDeclaration)}o.imageLiteral&&(v(n[0])||g(9214,F("Only image literals (string literals) supported here; {0}",d(n[0]))),n[0]=function(e){e||(e="0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n");let n=0,o=0,r=0,i="",s=0;e+="\n";for(let t=0;t<e.length;++t)switch(e[t]){case".":case"_":case"0":i+="0,",n++,s++;break;case"#":case"*":case"1":i+="255,",n++,s++;break;case"\t":case"\r":case" ":break;case"\n":n&&(0==o?o=n:n!=o&&g(9205,F("lines in image literal have to have the same width (got {0} and then {1} pixels)",o,n)),n=0,r++);break;default:g(9206,F("Only 0 . _ (off) and 1 # * (on) are allowed in image literals"))}let a="_img"+_e.lblNo++;s%2!=0&&(i+="0"),_e.otherLiterals.push(`\n.balign 4\n${a}: .short 0xffff\n        .short ${o}, ${r}\n        .byte ${i}\n`);let l="new pxsim.Image("+o+", ["+i+"])";return{kind:t.SK.NumericLiteral,imageLiteral:a,jsLit:l}}(n[0].text))}function dt(n,o,i,s,a=null,l=null){var c;a||(a=at(o));let u=!1,p=!1,d=!1;const f=n===o;if(a)switch(a.kind){case t.SK.PropertySignature:case t.SK.PropertyAssignment:case t.SK.PropertyDeclaration:case t.SK.MethodSignature:u=!0;break;case t.SK.Parameter:ge(a)&&(u=!0);break;case t.SK.GetAccessor:case t.SK.SetAccessor:case t.SK.MethodDeclaration:u=!0,p=!0,d=T(a);break;case t.SK.FunctionDeclaration:d=!0;break;case t.SK.ModuleDeclaration:break;default:a=null}else o.kind==t.SK.PropertyAccessExpression&&(u=!0);t.target.switches.slowMethods&&(p=!1);const _=K(a);let m=i.slice(0);if(u&&T(a)&&(u=!1),u&&!l&&o.kind==t.SK.PropertyAccessExpression&&(l=o.expression),r.usedArguments&&_.trackArgs){let e=l?[l].concat(m):m,n=_.trackArgs.map((t=>e[t])).map((e=>{let n=at(e);return!n||n.kind!=t.SK.EnumMember&&n.kind!=t.SK.VariableDeclaration?e&&e.kind==t.SK.StringLiteral?e.text:"*":V(P,n)})).join(","),o=V(P,a),i=r.usedArguments[o];i||(i=r.usedArguments[o]=[]),i.indexOf(n)<0&&i.push(n)}function y(){let e=_t(a,n,m.map((e=>bn(e)))),o=e.data;return m[0]&&o.proc&&o.proc.classInfo&&(o.isThis=m[0].kind==t.SK.ThisKeyword),e}if(pt(s,m,_),d){if(!Ie(a).location)return _.shim&&!It(a)?ut(a,n,m):(rt(a),y())}if(o.kind==t.SK.SuperKeyword){let e=fe.classInfo.baseClassInfo.ctor;for(let t=fe.classInfo.baseClassInfo;t&&!e;t=t.baseClassInfo)e=t.ctor;if(!e&&_e.finalPass)throw g(9280,F("super() call requires an explicit constructor in base class"));let t=m.map((e=>bn(e)));return t.unshift($e(o)),gt(e,n,t)}if(u){if(t.U.assert(!T(a)),l?m.unshift(l):Be(n,F("strange method call"),9241),!a){t.U.assert(o.kind==t.SK.PropertyAccessExpression);const e=o.name.text;return ht(m.map((e=>bn(e))),{ifaceIndex:Re(e,!0),callLocationIndex:Cn(n),noArgs:f})}let r=Ie(a);if(r.parentClassInfo&&kt(r.parentClassInfo),rt(a),l.kind==t.SK.SuperKeyword)return y();const i=!!r.virtualParent,s=!!h()||!!t.target.switches.slowMethods;if(i&&!s)return a.kind==t.SK.MethodDeclaration?t.U.assert(!f):a.kind==t.SK.GetAccessor||a.kind==t.SK.SetAccessor?t.U.assert(f):t.U.assert(!1),t.U.assert(!_e.finalPass||null!=r.virtualIndex,"!bin.finalPass || info.virtualIndex != null"),ht(m.map((e=>bn(e))),{classInfo:r.parentClassInfo,virtualIndex:r.virtualIndex,noArgs:f,isThis:m[0].kind==t.SK.ThisKeyword});if(_.shim&&!It(a))return ut(a,n,m);if(_.helper){let o,r=P.getSymbolsInScope(n,e.SymbolFlags.Module);for(let e of r)if("helpers"==e.name)for(let n of e.declarations||[e.valueDeclaration])if(n.kind==t.SK.ModuleDeclaration)for(let e of n.body.statements)(null===(c=e.symbol)||void 0===c?void 0:c.name)==_.helper&&(o=e);return o||g(9215,F("helpers.{0} not found",_.helper)),o.kind!=t.SK.FunctionDeclaration&&g(9216,F("helpers.{0} isn't a function",_.helper)),rt(a=o),y()}return i||t.target.switches.slowMethods||!p?ht(m.map((e=>bn(e))),{ifaceIndex:Re(j(a),!0),isSet:f&&2==m.length,callLocationIndex:Cn(n),noArgs:f}):(t.U.assert(a.kind!=t.SK.MethodSignature),y())}return a&&a.kind==t.SK.ModuleDeclaration&&("String"==j(a)?g(9219,F('to convert X to string use: X + ""')):g(9220,F("namespaces cannot be called directly"))),m.unshift(o),t.U.assert(!f),ht(m.map((e=>bn(e))),{virtualIndex:-1,callLocationIndex:Cn(n),noArgs:f})}function gt(e,n,o){t.U.assert(!_e.finalPass||!!e);let r={proc:e,callLocationIndex:Cn(n),virtualIndex:null,ifaceIndex:null};return t.ir.op(s.ProcCall,o,r)}function ht(e,n){return t.ir.op(s.ProcCall,e,n)}function ft(e){return u(e).proc}function _t(e,n,o){const r=ft(e);if(e.kind==t.SK.FunctionDeclaration){je(Ie(e))}return t.assert(!!r||!_e.finalPass,"!!proc || !bin.finalPass"),gt(r,n,o)}function mt(e){return e.members.filter((e=>e.kind==t.SK.Constructor))[0]}function yt(e){return null!=t.U.lookup(_e.explicitlyUsedIfaceMembers,e)}function kt(e){if(it(e.decl),e.isUsed)return;u(e.decl).flags|=8,e.baseClassInfo&&kt(e.baseClassInfo),_e.usedClassInfos.push(e)}function bt(n){function r(e){return/^[0-9a-f]$/i.test(e)}let i=at(n.tag);if(!i)throw Be(n,F("invalid tagged template"),9265);let s,a=K(i),l={decl:i,qName:i?V(P,i):"?",args:[n.template],isExpression:!0};function c(i){s=function(n,i){let s=te;if("_"==i[0]&&"_"==i[1]&&o.jres[i]&&(s=o.jres[i],i=""),""==i&&s){let n=/font\/x-mkcd-b(\d+)/.exec(s.mimeType);if(n)if(_e.finalPass){let e=parseInt(n[1]),o=atob(s.data),r=_e.usedChars,a="",l="";for(let t=0;t<o.length;t+=e){let n=o.charCodeAt(t)+(o.charCodeAt(t+1)<<8);(n<128||r[n>>5]&1<<(31&n))&&(a+=o.slice(t,t+e),l+=n+", ")}i=t.U.toHex(t.U.stringToUint8Array(a))}else i="aabbccdd";else s.dataEncoding&&"base64"!=s.dataEncoding?"hex"==s.dataEncoding?i=s.data:g(9271,F("invalid jres encoding '{0}' on '{1}'",s.dataEncoding,s.id)):i=t.U.toHex(t.U.stringToUint8Array(e.pxtc.decodeBase64(s.data)))}if(/^e[14]/i.test(i)&&n.parent&&n.parent.kind==t.SK.CallExpression&&"image.ofBuffer"==n.parent.expression.getText()){const e=/^e([14])(..)(..)..(.*)/i.exec(i);i=`870${e[1]}${e[2]}00${e[3]}000000${e[4]}`}let a="";for(let e=0;e<i.length;++e){let t=i[e];if(!r(t)){if(/^[\s\.]$/.test(t))continue;throw Be(n,F("invalid character in hex literal '{0}'",t),9265)}r(i[e+1])&&(a+=t+i[e+1],e++)}if(t.target.isNative){const e=_e.emitHexLiteral(a.toLowerCase());return t.ir.ptrlit(e,e)}{const e="_hex"+Ae(n);return t.ir.ptrlit(e,{hexlit:a.toLowerCase()})}}(n,i(n.template.text))}if(u(n).callInfo=l,n.template.kind!=t.SK.NoSubstitutionTemplateLiteral)throw Be(n,F("substitution not supported in hex literal",a.shim),9265);switch(a.shim){case"@hex":c((e=>e));break;case"@f4":c((function(e){if(!Array.isArray(a.groups))throw Be(n,F("missing groups in @f4 literal"),9272);let o=[],r=[],i={},s=0;a.groups.forEach(((e,t)=>{for(let n of e)i[n]=t})),e+="\n";for(let l=0;l<e.length;++l){let c=e[l];switch(c){case" ":case"\t":break;case"\n":r.length>0&&(o.push(r),s=Math.max(r.length,s),r=[]);break;default:let e=t.U.lookup(i,c);if(null==e){if(2!=a.groups.length)throw Be(n,F("invalid character in image literal: '{0}'",e),9273);e=1}r.push(e)}}let l=8;return a.groups.length<=2?l=1:a.groups.length<=16&&(l=4),t.f4EncodeImg(s,o.length,l,((e,t)=>o[t][e]||0))}));break;default:if(void 0===a.shim&&a.helper)return function(n,o){var r;let i,s=P.getSymbolsInScope(n,e.SymbolFlags.Module);for(let e of s)if("helpers"==e.name)for(let n of e.declarations||[e.valueDeclaration])if(n.kind==t.SK.ModuleDeclaration)for(let e of n.body.statements)(null===(r=e.symbol)||void 0===r?void 0:r.name)==o.helper&&(i=e);i||g(9215,F("helpers.{0} not found",o.helper));i.kind!=t.SK.FunctionDeclaration&&g(9216,F("helpers.{0} isn't a function",o.helper));const a=i;return rt(a),_t(a,n,[Xe(n.text)])}(n.template,a);throw Be(n,F("invalid shim '{0}' on tagged template",a.shim),9265)}return a.helper&&(s=t.ir.rtcall(a.helper,[s])),s}function vt(e){let n=e.parameters.slice(0);if(!T(e)&&B(e)){let o=Ie(e);o.thisParameter||(o.thisParameter={kind:t.SK.Parameter,name:{text:"this"},isThisParameter:!0,parent:e}),n.unshift(o.thisParameter)}return n}function Tt(e,n=!1){let o=ae(e);return t.ir.ptrlit(o+"_Lit",o)}function Et(){for(fe=ft(be);D.length>0;){Tn(D.pop())}}function St(){const e=ce;if(e.length>0){ce=[];for(let t of e){const e=fe;try{xt(t)}finally{fe=e}}}}function Ct(e){_e.finalPass&&e.functionsToDefine&&t.U.pushRange(ce,e.functionsToDefine)}function xt(e){const n=Ie(e);let o=null;if(_e.finalPass){if(n.alreadyEmitted)return t.U.assert(n.usedBeforeDecl),null;n.alreadyEmitted=!0}let r=e.kind==t.SK.ArrowFunction||e.kind==t.SK.FunctionExpression,i=n.capturedVars.slice(0),a=i.map(((e,n)=>{let o=new t.ir.Cell(n,e,De(e));return o.iscap=!0,o}));void 0===n.usedBeforeDecl&&(n.usedBeforeDecl=!1),i.length>0?(t.assert(null!=I(e),"getEnclosingFunction(node) != null)"),o=t.ir.shared(t.ir.rtcall("pxt::mkAction",[t.ir.numlit(i.length),Tt(e,!0)])),n.usedAsValue=!0,i.forEach(((e,n)=>{let r=fe.localIndex(e);r||g(9223,F("cannot find captured value: {0}",P.symbolToString(e.symbol)));let i=r.loadCore();fe.emitExpr(t.ir.rtcall("pxtrt::stclo",[o,t.ir.numlit(n),i]))})),e.kind==t.SK.FunctionDeclaration&&(n.location=fe.mkLocal(e,De(e)),fe.emitExpr(n.location.storeDirect(o)),o=null)):r&&(o=Tt(e),n.usedAsValue=!0),t.assert(!!o==r,"!!lit == isExpression");let l=ft(e);if(l)fe=l,fe.reset();else{t.assert(!_e.finalPass,"!bin.finalPass");const o=u(e),r=new t.ir.Procedure;r.isRoot=!!(1&o.flags),r.action=e,r.info=n,o.proc=r,r.usingCtx=oe,fe=r,we((e=>e.addProc(r)))}fe.captured=a;const c=[];if(e.parent.kind==t.SK.ClassDeclaration){let n=Ve(null,e.parent);if(fe.classInfo?t.assert(fe.classInfo==n,"proc.classInfo == classInfo"):fe.classInfo=n,e.kind==t.SK.Constructor){if(n.baseClassInfo)for(let e of n.baseClassInfo.decl.members)e.kind==t.SK.Constructor&&rt(e);n.ctor?t.assert(n.ctor==fe,"classInfo.ctor == proc"):n.ctor=fe;for(let e of n.allfields)if(e.kind==t.SK.PropertyDeclaration&&!T(e)){let t=e;t.initializer&&c.push(t)}}}const p=[],d=[];fe.args=vt(e).map(((n,o)=>{n.name.kind===t.SK.ObjectBindingPattern&&p.push(n),e.kind==t.SK.Constructor&&ge(n)&&d.push(n);let r=new t.ir.Cell(o,n,De(n));return Ct(r.info),r.isarg=!0,r})),fe.args.forEach((e=>{if(e.isByRefLocal()){let n=t.ir.shared(t.ir.rtcall("pxtrt::mklocRef",[]));fe.emitExpr(t.ir.rtcall("pxtrt::stlocRef",[n,e.loadCore()],1)),fe.emitExpr(e.storeDirect(n))}})),p.forEach((e=>_n(e)));for(let e of d){let o=Lt(fe.classInfo,Mt(fe.classInfo,j(e)),!1),r=t.ir.op(s.FieldAccess,[We(n.thisParameter)],o);fe.emitExpr(t.ir.op(s.Store,[r,We(e)]))}for(let e of c){let o=Lt(fe.classInfo,Mt(fe.classInfo,j(e)),!1),r=t.ir.op(s.FieldAccess,[We(n.thisParameter)],o);fe.emitExpr(t.ir.op(s.Store,[r,bn(e.initializer)]))}if(St(),e.body.kind==t.SK.Block){if(En(e.body),ne(fe.action)){const n=fe.body[fe.body.length-1];n&&n.stmtKind==t.ir.SK.Jmp&&n.jmpMode==t.ir.JmpMode.Always||fe.emitJmp(an(e).ret,Jt(void 0),t.ir.JmpMode.Always)}}else{let n=bn(e.body);fe.emitJmp(an(e).ret,n,t.ir.JmpMode.Always)}fe.emitLblDirect(an(e).ret),fe.stackEmpty();let h=fe.mkLabel("final");if(ne(fe.action)?fe.emitJmp(h):fe.emitJmp(h,Jt(void 0)),fe.emitLbl(h),n.capturedVars.length&&n.usedBeforeDecl&&e.kind==t.SK.FunctionDeclaration&&!_e.finalPass){n.capturedVars.sort(((e,t)=>t.pos-e.pos));const t=De(n.capturedVars[0]);t.functionsToDefine||(t.functionsToDefine=[]),t.functionsToDefine.push(e)}return t.assert(!_e.finalPass||0==D.length,"!bin.finalPass || usedWorkList.length == 0"),o}function Bt(e){let n=t.ir.shared(e);return fe.emitExpr(n),n}function At(){return Bt(t.ir.op(s.JmpValue,[]))}function It(e){if(o.target.isNative)return!1;let n=e;return n.body&&(n.body.kind!=t.SK.Block||n.body.statements.length>0)}function Dt(n){if(!nt(n))return;if(32&u(n).flags)return;let r=K(n);if(null!=r.shim){if("@"==r.shim[0])return;if(o.target.isNative&&t.hexfile.validateShim(ie(n),r.shim,r,ne(n),vt(n).map((e=>he(ee(e))))),!It(n))return}if(e.isInAmbientContext(n))return;if(!n.body)return;let i=null,s=fe;try{i=xt(n)}finally{fe=s}return i}function Nt(){}function wt(e){let t=e;t.needsIRCache=!0,G.push(t)}function Rt(e,n=null){let o=G.length;return e.kind!=t.SK.PropertyAccessExpression&&e.kind!=t.SK.ElementAccessExpression||wt(e.expression),n&&wt(n),G.length==o?Nt:()=>{for(let e=o;e<G.length;++e)G[e].cachedIR=null,G[e].needsIRCache=!1;G.splice(o,G.length-o)}}function Ot(e,n=!1){let o={kind:t.SK.NullKeyword,isRefOverride:n};return u(o).valueOverride=e,o}function Pt(e,n,o,r=null){let i=Rt(e),s=r?bn(r):Jt(1),a=t.ir.shared(bn(e)),l=t.ir.shared(Ht(n,a,s));return Ft(e,Ot(l,!0)),i(),o?a:l}function Lt(e,n,o=!0){T(n)&&t.U.oops("fieldIndex on static field: "+j(n));let r=K(n),i=e.allfields.indexOf(n);return i<0&&_e.finalPass&&t.U.oops("missing field"),{idx:i,name:j(n),isRef:!0,shimName:r.shim,classInfo:e,needsCheck:o}}function Mt(e,t){const n=e.allfields.filter((e=>e.name.text==t))[0];return n||g(9224,F("field {0} not found",t)),n}function Ft(n,o,r=!1){let i=at(n),a=w(i);if(n.kind==t.SK.Identifier||a)if(i&&(a||N(i)||R(i))){let e=Le(i);Ne(i,!0),fe.emitExpr(e.storeByRef(bn(o)))}else Be(n,F("bad target identifier"),9248);else if(n.kind==t.SK.PropertyAccessExpression){let r=at(n);if(!r||r.kind!=t.SK.GetAccessor&&r.kind!=t.SK.SetAccessor)if(r&&(r.kind==t.SK.PropertySignature||r.kind==t.SK.PropertyAssignment||Qe(r)))fe.emitExpr(dt(n,n,[o],null,r));else{let e=bn(n);fe.emitExpr(t.ir.op(s.Store,[e,bn(o)]))}else Ze(r),r=e.getDeclarationOfKind(r.symbol,t.SK.SetAccessor),r||Be(n,F("setter not available"),9253),fe.emitExpr(dt(n,n,[o],null,r))}else if(n.kind==t.SK.ElementAccessExpression)fe.emitExpr(et(n,o));else if(n.kind==t.SK.ArrayLiteralExpression)if(o.kind==t.SK.ArrayLiteralExpression){const e=o.elements.map((e=>{const n=t.ir.shared(bn(e));return fe.emitExpr(n),n}));n.elements.forEach(((t,n)=>{Ft(t,Ot(e[n]))}))}else{const e=t.ir.shared(bn(o));n.elements.forEach(((n,o)=>{Ft(n,Ot(Zt("Array_::getAt",[e,t.ir.numlit(o)])))}))}else Be(n,F("bad assignment target"),9249)}function Ut(e){if(_())switch(e){case"numops::adds":case"numops::subs":case"numops::eors":case"numops::ands":case"numops::orrs":return"@nomask@"+e}if(h())switch(e){case"pxt::switch_eq":return"numops::eq"}return e}function Ht(e,t,n){return Zt(Ut(e),[t,n])}function Vt(e){if(e.kind==t.SK.Identifier)return e.text;if(e.kind==t.SK.PropertyAccessExpression){const t=e,n=Vt(t.expression);if(n)return n+"."+t.name.text}return null}function Gt(e,t){if(!t)return null;const n=t.val;switch(Vt(e)){case"Math.floor":return{val:Math.floor(n)};case"Math.ceil":return{val:Math.ceil(n)};case"Math.round":return{val:Math.round(n)}}return null}function Wt(n){if(!n)return null;const o=u(n);if(void 0!==o.constantFolded)return o.constantFolded;if(N(n)&&n.parent.flags&e.NodeFlags.Const){const e=n;e.initializer&&(o.constantFolded=Kt(e.initializer))}else if(n.kind==t.SK.EnumMember){const e=n,r=function(e){let n=K(e).enumval;if(!n){let t=P.getConstantValue(e);if(null==t)return null;n=t+""}return/^[+-]?\d+$/.test(n)||/^0x[A-Fa-f\d]{2,8}$/.test(n)?n:(t.U.userError("enumval only support number literals"),"0")}(e);if(null==r)o.constantFolded=Kt(e.initializer);else{const e=parseInt(r);isNaN(e)||(o.constantFolded={val:e})}}else if(n.kind==t.SK.PropertyDeclaration&&T(n)&&E(n)){const e=n;o.constantFolded=Kt(e.initializer)}return o.constantFolded}function Kt(e){if(!e)return null;const n=u(e);if(void 0===n.constantFolded){n.constantFolded=null;const o=function(e){if(!e)return null;switch(e.kind){case t.SK.PrefixUnaryExpression:{const n=e,o=Kt(n.operand);return function(e,n){if(!n)return null;const o=n.val;switch(e){case t.SK.PlusToken:return{val:+o};case t.SK.MinusToken:return{val:-o};case t.SK.TildeToken:return{val:~o};case t.SK.ExclamationToken:return{val:!o};default:return null}}(n.operator,o)}case t.SK.BinaryExpression:{const n=e,o=Kt(n.left);if(!o)return null;const r=Kt(n.right);return r?function(e,n,o){if(!n||!o)return null;const r=n.val,i=o.val;switch(e){case t.SK.PlusToken:return{val:r+i};case t.SK.MinusToken:return{val:r-i};case t.SK.SlashToken:return{val:r/i};case t.SK.PercentToken:return{val:r%i};case t.SK.AsteriskToken:return{val:r*i};case t.SK.AsteriskAsteriskToken:return{val:r**i};case t.SK.AmpersandToken:return{val:r&i};case t.SK.BarToken:return{val:r|i};case t.SK.CaretToken:return{val:r^i};case t.SK.LessThanLessThanToken:return{val:r<<i};case t.SK.GreaterThanGreaterThanToken:return{val:r>>i};case t.SK.GreaterThanGreaterThanGreaterThanToken:return{val:r>>>i};case t.SK.LessThanEqualsToken:return{val:r<=i};case t.SK.LessThanToken:return{val:r<i};case t.SK.GreaterThanEqualsToken:return{val:r>=i};case t.SK.GreaterThanToken:return{val:r>i};case t.SK.EqualsEqualsToken:return{val:r==i};case t.SK.EqualsEqualsEqualsToken:return{val:r===i};case t.SK.ExclamationEqualsEqualsToken:return{val:r!==i};case t.SK.ExclamationEqualsToken:return{val:r!=i};case t.SK.BarBarToken:return{val:r||i};case t.SK.AmpersandAmpersandToken:return{val:r&&i};default:return null}}(n.operatorToken.kind,o,r):null}case t.SK.NumericLiteral:{const t=parseFloat(e.text);return isNaN(t)?null:{val:t}}case t.SK.NullKeyword:return{val:null};case t.SK.TrueKeyword:return{val:!0};case t.SK.FalseKeyword:return{val:!1};case t.SK.UndefinedKeyword:return{val:void 0};case t.SK.CallExpression:{const t=e;return 1==t.arguments.length?Gt(t.expression,Kt(t.arguments[0])):null}case t.SK.PropertyAccessExpression:case t.SK.Identifier:return Wt(st(e));case t.SK.AsExpression:return Kt(e.expression);default:return null}}(e);n.constantFolded=o}return n.constantFolded}function jt(e){let n=t.target.switches.boxDebug,o=null;if(n)try{t.target.switches.boxDebug=!1,o=bn(e)}finally{t.target.switches.boxDebug=n}else o=bn(e);let r=Yt(o);if(void 0===r)throw g(9267,F("a constant number-like expression is required here"));return r}function zt(e,t){let n=$t(e,t,"userconfig");return null==n&&(n=$t(e,t,"config")),n}function $t(n,o,r){let i=P.getSymbolsInScope(n,e.SymbolFlags.Module).filter((e=>e.name==r&&!!e.valueDeclaration))[0];if(!i)return null;for(let e of i.valueDeclaration.body.statements)if(e.kind==t.SK.VariableStatement){let t=e;for(let e of t.declarationList.declarations)if(e.symbol.name==o)return jt(e.initializer)}return null}function Xt(t,n){let o=P.getSymbolsInScope(t,e.SymbolFlags.Enum).filter((e=>"DAL"==e.name&&!!e.valueDeclaration))[0];if(!o)return null;let r=o.valueDeclaration.members.filter((e=>e.symbol.name==n))[0];return r?P.getConstantValue(r):null}function Yt(e){if(e.exprKind==t.ir.EK.NumberLiteral){let n=e.data;if(o.target.isNative&&!h()){if(n==t.taggedNull||n==t.taggedUndefined||n==t.taggedFalse)return 0;if(n==t.taggedTrue)return 1;if("number"==typeof n)return n>>1}else if("number"==typeof n)return n}else if(e.exprKind==t.ir.EK.RuntimeCall&&2==e.args.length){let t=Yt(e.args[0]),n=Yt(e.args[1]);if(void 0===t||void 0===n)return;switch(e.data){case"numops::orrs":return t|n;case"numops::adds":return t+n;default:return void console.log(e)}}}function Jt(e){if(o.target.isNative&&!h()){const o=Q(e);if(null!=o)return t.ir.numlit(o);if("number"==typeof e){if(n=e,!t.target.switches.boxDebug&&(0|n)==n&&-1073741824<=n&&n<=1073741823)return t.ir.numlit(e<<1|1);{let n=_e.emitDouble(e);return t.ir.ptrlit(n,JSON.stringify(e))}}throw t.U.oops("bad literal: "+e)}return t.ir.numlit(e);var n}function qt(e){if(e.kind==t.SK.NullKeyword){let t=u(e).valueOverride;if(null!=t)return t.exprKind==s.NumberLiteral?!o.target.isNative||!!(1&t.data):t.exprKind==s.RuntimeCall&&"pxt::ptrOfLiteral"==t.data?t.args[0].exprKind==s.PointerLiteral&&!isNaN(parseFloat(t.args[0].jsInfo)):t.exprKind==s.PointerLiteral&&!isNaN(parseFloat(t.jsInfo))}return e.kind==t.SK.NumericLiteral||he(ee(e))}function Zt(e,n){return t.ir.rtcallMask(e,(1<<n.length)-1,0,n)}function Qt(e,n,r,a=null){let l=[],c=t.hexfile.lookupFunc(e);if(_()){let n=t.U.lookup(i,e);n&&(c=n,e=n.name)}c&&(l=c.argsFmt),a&&(n=n.concat(a));let u=ct(n),p=[],d=n.map(((n,o)=>{let i=bn(n);if(!f())return i;let a=l[o+1],c=qt(n);if(!a&&e.indexOf("::")<0&&(a=c?"I":"_"),a){if("_"==a[0]||"T"==a||"N"==a){let e=function(e){switch(e){case"_Buffer":return pxt.BuiltInType.BoxedBuffer;case"_Image":return t.target.imageRefTag||pxt.BuiltInType.RefImage;case"_Action":return pxt.BuiltInType.RefAction;case"_RefCollection":return pxt.BuiltInType.RefCollection;default:return null}}(a);return e&&p.push({argIdx:o,method:"_validate",refTag:e,refTagNullable:!!r.argsNullable}),i}if("I"==a)return i.exprKind==s.NumberLiteral&&"number"==typeof i.data?t.ir.numlit(i.data>>1):(p.push({argIdx:o,method:"pxt::toInt"}),i);if("B"==a)return u&=~(1<<o),sn(n,i);if("S"==a)return i.isStringLiteral||(p.push({argIdx:o,method:"_pxt_stringConv",returnsRef:!0}),u|=1<<o),i;if("F"==a||"D"==a)return"D"==a&&t.U.oops("double arguments not yet supported"),c||t.U.userError("argsFmt=...F/D... but argument not a number in "+e),p.push({argIdx:o,method:"D"==a?"pxt::toDouble":"pxt::toFloat"}),i;throw t.U.oops("invalid format specifier: "+a)}throw t.U.userError("not enough args for "+e)})),g=t.ir.rtcallMask(e,u,r?r.callingConvention:0,d);if(g.mask||(g.mask={refMask:0}),g.mask.conversions=p,o.target.isNative){let e=l[0];"I"==e?g=m(g):"B"==e?g=y(g):"F"==e?g=function(e){return f()?t.ir.rtcall("pxt::fromFloat",[e]):e}(g):"D"==e&&(t.U.oops("double returns not yet supported"),g=function(e){return f()?t.ir.rtcall("pxt::fromDouble",[e]):e}(g))}return g}function en(n){_e.numStmts++;const i=t.assembler.debug||t.target.switches.size||t.target.sourceMap;let s=!!o.breakpoints;if(!i&&!s)return;const a=e.getSourceFileOfNode(n);if(o.justMyCode&&c(a)&&(s=!1),!i&&!s)return;let l=n.pos;for(;/^\s$/.exec(a.text[l]);)l++;for(;"/"==a.text[l]&&"/"==a.text[l+1];){for(;a.text[l]&&"\n"!=a.text[l];)l++;l++}const u=e.getLineAndCharacterOfPosition(a,l);if(i){let e=n.end;e-l>80&&(e=l+80);const o=a.text.slice(l,e).trim().replace(/\n[^]*/,"...");fe.emit(t.ir.comment(`${a.fileName.replace(/pxt_modules\//,"")}(${u.line+1},${u.character+1}): ${o}`))}if(!s)return;const p=e.getLineAndCharacterOfPosition(a,n.end),d={id:r.breakpoints.length,isDebuggerStmt:n.kind==t.SK.DebuggerStatement,fileName:a.fileName,start:l,length:n.end-l,line:u.line,endLine:p.line,column:u.character,endColumn:p.character};r.breakpoints.push(d);const g=t.ir.stmt(t.ir.SK.Breakpoint,null);g.breakpointInfo=d,fe.emit(g)}function tn(e,n){switch(n){case t.SK.PlusToken:return"numops::adds";case t.SK.MinusToken:return"numops::subs";case t.SK.SlashToken:return"numops::div";case t.SK.PercentToken:return"numops::mod";case t.SK.AsteriskToken:return"numops::muls";case t.SK.AsteriskAsteriskToken:return"Math_::pow";case t.SK.AmpersandToken:return"numops::ands";case t.SK.BarToken:return"numops::orrs";case t.SK.CaretToken:return"numops::eors";case t.SK.LessThanLessThanToken:return"numops::lsls";case t.SK.GreaterThanGreaterThanToken:return"numops::asrs";case t.SK.GreaterThanGreaterThanGreaterThanToken:return"numops::lsrs";case t.SK.LessThanEqualsToken:return"numops::le";case t.SK.LessThanToken:return"numops::lt";case t.SK.GreaterThanEqualsToken:return"numops::ge";case t.SK.GreaterThanToken:return"numops::gt";case t.SK.EqualsEqualsToken:return"numops::eq";case t.SK.EqualsEqualsEqualsToken:return"numops::eqq";case t.SK.ExclamationEqualsEqualsToken:return"numops::neqq";case t.SK.ExclamationEqualsToken:return"numops::neq";default:return null}}function nn(e){if(e.operatorToken.kind==t.SK.EqualsToken)return function(e){let n=e.right;e.parent.kind==t.SK.ExpressionStatement&&(n=null);let o=Rt(e.left,n);Ft(e.left,e.right,!0);let r=n?bn(n):Jt(void 0);return o(),r}(e);const n=Kt(e);if(n)return Jt(n.val);let o=null,r=null;e.operatorToken.kind!=t.SK.PlusToken&&e.operatorToken.kind!=t.SK.PlusEqualsToken||(o=ee(e.left),r=ee(e.right),(ue(o)||ue(r)&&e.operatorToken.kind==t.SK.PlusToken)&&(u(e).exprInfo={leftType:P.typeToString(o),rightType:P.typeToString(r)}));if(e.operatorToken.kind==t.SK.CommaToken){if(ln(e.left))return bn(e.right);{let n=cn(e.left);return t.ir.op(s.Sequence,[n,bn(e.right)])}}switch(e.operatorToken.kind){case t.SK.BarBarToken:case t.SK.AmpersandAmpersandToken:return function(e){let n=bn(e.left),o=(ue(ee(e.left)),fe.mkLabel("lazy"));n=t.ir.shared(n);let r=t.ir.rtcall("numops::toBool",[n]),i=fe.mkLabel("lazySkip"),s=e.operatorToken.kind==t.SK.BarBarToken?t.ir.JmpMode.IfZero:e.operatorToken.kind==t.SK.AmpersandAmpersandToken?t.ir.JmpMode.IfNotZero:t.U.oops();return fe.emitJmp(i,r,s),fe.emitJmp(o,n,t.ir.JmpMode.Always,n),fe.emitLbl(i),fe.emitExpr(Zt("langsupp::ignore",[n])),fe.emitJmp(o,bn(e.right),t.ir.JmpMode.Always),fe.emitLbl(o),At()}(e);case t.SK.InstanceOfKeyword:return function(e){let n=ee(e.right),o=J(n)?at(e.right):null;o&&o.kind==t.SK.ClassDeclaration||g(9275,F("unsupported instanceof expression"));let r=Ve(n,o);kt(r);let i=t.ir.op(t.ir.EK.InstanceOf,[bn(e.left)],r);return i.jsInfo="bool",i}(e)}if(e.operatorToken.kind==t.SK.PlusToken&&(ue(o)||ue(r)))return Qt("String_::concat",[Ye(e.left),Ye(e.right)],null);if(e.operatorToken.kind==t.SK.PlusEqualsToken&&ue(o)){let n=Rt(e.left),o=t.ir.shared(Qt("String_::concat",[Ye(e.left),Ye(e.right)],null));return Ft(e.left,Ot(o)),n(),o}let i=function(e){switch(e){case t.SK.PlusEqualsToken:return t.SK.PlusToken;case t.SK.MinusEqualsToken:return t.SK.MinusToken;case t.SK.AsteriskEqualsToken:return t.SK.AsteriskToken;case t.SK.AsteriskAsteriskEqualsToken:return t.SK.AsteriskAsteriskToken;case t.SK.SlashEqualsToken:return t.SK.SlashToken;case t.SK.PercentEqualsToken:return t.SK.PercentToken;case t.SK.LessThanLessThanEqualsToken:return t.SK.LessThanLessThanToken;case t.SK.GreaterThanGreaterThanEqualsToken:return t.SK.GreaterThanGreaterThanToken;case t.SK.GreaterThanGreaterThanGreaterThanEqualsToken:return t.SK.GreaterThanGreaterThanGreaterThanToken;case t.SK.AmpersandEqualsToken:return t.SK.AmpersandToken;case t.SK.BarEqualsToken:return t.SK.BarToken;case t.SK.CaretEqualsToken:return t.SK.CaretToken;default:return t.SK.Unknown}}(e.operatorToken.kind),a=tn(0,i||e.operatorToken.kind);return a||Be(e.operatorToken,F("unsupported operator"),9250),i?Pt(e.left,a,!1,e.right):(n=>{n=Ut(n);let o=[e.left,e.right];return t.ir.rtcallMask(n,ct(o),0,o.map((e=>bn(e))))})(a)}function on(e){e.statements.forEach(En)}function rn(t){if(t.flags&e.NodeFlags.Let||t.flags&e.NodeFlags.Const)return!0;throw g(9260,F("variable needs to be defined using 'let' instead of 'var'"))}function sn(e,n=null){if(!n&&_()&&e.kind==t.SK.BinaryExpression){let n=e,o=t.U.lookup(t.thumbCmpMap,tn(0,n.operatorToken.kind));if(o)return t.ir.rtcall(o,[bn(n.left),bn(n.right)])}return n||(n=bn(e)),h()?n:t.ir.rtcall("numops::toBoolDecr",[n])}function an(e){let t=p(e);return{fortop:".fortop."+t,cont:".cont."+t,brk:".brk."+t,ret:".ret."+t}}function ln(e){if(!e)return!0;switch(e.kind){case t.SK.Identifier:case t.SK.StringLiteral:case t.SK.NumericLiteral:case t.SK.NullKeyword:return!0}return!1}function cn(e){return bn(e)}function un(e){if(ln(e))return;en(e);let t=cn(e);fe.emitExpr(t),fe.stackEmpty()}function pn(e=1){for(;e--;)fe.emitExpr(Zt("pxt::endTry",[]))}function dn(){g(9282,F("jumps (return, break, continue) through finally blocks not supported yet"))}function gn(t){let n=0;if(t.kind==e.SyntaxKind.Block&&t.parent)if(t.parent.kind==e.SyntaxKind.CatchClause){t.parent.parent.finallyBlock&&(n++,dn())}else if(t.parent.kind==e.SyntaxKind.TryStatement){const e=t.parent;e.tryBlock==t&&(e.catchClause&&n++,e.finallyBlock&&(n++,dn()))}return n}function hn(e){switch(e.kind){case t.SK.WhileStatement:case t.SK.ForInStatement:case t.SK.ForOfStatement:case t.SK.ForStatement:case t.SK.DoStatement:return!0;default:return!1}}function fn(e,n,r){if(e.name.kind===t.SK.ObjectBindingPattern||e.name.kind==t.SK.ArrayBindingPattern)return n||(n=e.initializer?t.ir.shared(bn(e.initializer)):We(e),r=e.initializer?ee(e.initializer):ee(e)),e.name.elements.forEach((e=>fn(e,n,r))),fe.stackEmpty(),null;if(!nt(e))return null;if(Wt(e))return null;let i;if(w(e)?(Pe(e),i=Le(e)):i=fe.mkLocal(e,De(e)),Ct(i.info),i.isByRefLocal()&&fe.emitExpr(i.storeDirect(t.ir.rtcall("pxtrt::mklocRef",[]))),Oe(ee(e)),e.kind===t.SK.BindingElement){en(e);let[t,o]=mn(e,n,r);fe.emitExpr(i.storeByRef(t))}else if(e.initializer){if(en(e),w(e)){let n=K(e).jres;if(n){"true"==n&&(n=V(P,e));let r=t.U.lookup(o.jres||{},n);r?te=r:g(9270,F("resource '{0}' not found in any .jres file",n))}}e.initializer,fe.emitExpr(i.storeByRef(bn(e.initializer))),te=null,fe.stackEmpty()}else(function(e){for(;e;){if(hn(e))return!0;e=e.parent}return!1})(e)&&(en(e),fe.emitExpr(i.storeByRef(Jt(void 0))),fe.stackEmpty());return i}function _n(e){return fn(e,null,null)}function mn(e,n,o){const r=e.parent.parent;if(r.kind===t.SK.BindingElement){const e=mn(r,n,o);n=e[0],o=e[1]}if(e.parent.kind==t.SK.ArrayBindingPattern){const r=e.parent.elements.indexOf(e);e.dotDotDotToken&&g(9203,F("spread operator not supported yet"));const i=q(o,r);return[Zt("Array_::getAt",[n,t.ir.numlit(r)]),i]}return function(e,n,o,r){const i=P.getPropertyOfType(o,r);t.U.assert(!!i,"field sym");const a=P.getTypeOfSymbolAtLocation(i,e);let l;if(J(o)){const e=Ve(o);l=t.ir.op(s.FieldAccess,[n],Lt(e,Mt(e,r)))}else l=ht([n],{ifaceIndex:Re(r,!0),callLocationIndex:Cn(e),noArgs:!0});return[l,a]}(e,n,o,(e.propertyName||e.name).text)}function yn(e){!function(e,n){const o=e=>{e&&e.kind==t.SK.ClassDeclaration&&g(9261,F("Interface with same name as a class not supported"))};if(o(n.symbol.valueDeclaration),n.symbol.declarations&&n.symbol.declarations.forEach(o),n.heritageClauses)for(let e of n.heritageClauses)switch(e.token){case t.SK.ExtendsKeyword:Y(ee(e.types[0]))&&g(9262,F("Extending a class by an interface not supported."))}}(0,e);let n=K(e);n.autoCreate&&(z[n.autoCreate]=!0)}function kn(e,t){let n=M;H++;try{M=null;let o=t(e);return M&&g(U,M),M=n,H--,o}catch(t){return H--,M=null,xe(e,t.ksErrorCode||9200,t.message),pxt.debug(t.stack),null}}function bn(e,n=!0){let o=e;if(n&&o.cachedIR)return o.cachedIR;let r=kn(o,vn)||Jt(void 0);return n&&o.needsIRCache?(o.cachedIR=t.ir.shared(r),o.cachedIR):r}function vn(n){let o=function(n){switch(n.kind){case t.SK.NullKeyword:let o=u(n).valueOverride;return o||Jt(null);case t.SK.TrueKeyword:return Jt(!0);case t.SK.FalseKeyword:return Jt(!1);case t.SK.TemplateHead:case t.SK.TemplateMiddle:case t.SK.TemplateTail:case t.SK.NumericLiteral:case t.SK.StringLiteral:case t.SK.NoSubstitutionTemplateLiteral:return function(e){if(e.kind==t.SK.NumericLiteral)return e.imageLiteral?t.ir.ptrlit(e.imageLiteral,e.jsLit):Jt(parseFloat(e.text));if(v(e))return Xe(e.text);throw t.oops()}(n);case t.SK.TaggedTemplateExpression:return bt(n);case t.SK.PropertyAccessExpression:return qe(n);case t.SK.BinaryExpression:return nn(n);case t.SK.PrefixUnaryExpression:return function(e){const n=Kt(e);if(n)return Jt(n.val);switch(e.operator){case t.SK.ExclamationToken:return y(t.ir.rtcall("Boolean_::bang",[sn(e.operand)]));case t.SK.PlusPlusToken:return Pt(e.operand,"numops::adds",!1);case t.SK.MinusMinusToken:return Pt(e.operand,"numops::subs",!1);case t.SK.PlusToken:case t.SK.MinusToken:{let n=bn(e.operand),o=Yt(n);return null!=o?Jt(-o):e.operator==t.SK.MinusToken?Ht("numops::subs",Jt(0),n):Ht("numops::subs",n,Jt(0))}case t.SK.TildeToken:{let t=bn(e.operand),n=Yt(t);return null!=n?Jt(~n):Zt(Ut("numops::bnot"),[t])}default:throw Be(e,F("unsupported prefix unary operation"),9245)}}(n);case t.SK.PostfixUnaryExpression:return function(e){if(pe(ee(e.operand)))switch(e.operator){case t.SK.PlusPlusToken:return Pt(e.operand,"numops::adds",!0);case t.SK.MinusMinusToken:return Pt(e.operand,"numops::subs",!0)}throw Be(e,F("unsupported postfix unary operation"),9246)}(n);case t.SK.ElementAccessExpression:return et(n);case t.SK.ParenthesizedExpression:return function(e){return bn(e.expression)}(n);case t.SK.TypeAssertionExpression:return function(e){return e.expression,bn(e.expression)}(n);case t.SK.ArrayLiteralExpression:return function(e){q(ee(e));let n=t.ir.shared(t.ir.rtcall("Array_::mk",[]));for(let o of e.elements){let e=lt(o)?2:0;fe.emitExpr(t.ir.rtcall("Array_::push",[n,bn(o)],e))}return n}(n);case t.SK.NewExpression:return function(e){let n=P.getTypeAtLocation(e);if(n&&$(n))throw t.oops();if(n&&J(n)){let n,o=at(e.expression);o.kind!=t.SK.ClassDeclaration&&g(9221,F("new expression only supported on class types"));let r=Ve(ee(e),o);for(let e=r;e&&(n=mt(e.decl),!n);e=e.baseClassInfo);kt(r);let i=r.id+"_VT",s=t.ir.rtcall("pxt::mkClassInstance",[t.ir.ptrlit(i,i)]);if(n){s=Bt(s),ot(n);let o=(e.arguments||[]).slice(0),r=K(n);pt(P.getResolvedSignature(e),o,r);let i=o.map((e=>bn(e)));return r.shim?t.ir.rtcall(r.shim,i):(i.unshift(s),fe.emitExpr(_t(n,e,i)),s)}return e.arguments&&e.arguments.length&&g(9222,F("constructor with arguments not found")),s}throw Be(e,F("unknown type for new"),9243)}(n);case t.SK.SuperKeyword:case t.SK.ThisKeyword:return $e(n);case t.SK.CallExpression:return function(e){const t=P.getResolvedSignature(e);return dt(e,e.expression,e.arguments,t)}(n);case t.SK.FunctionExpression:case t.SK.ArrowFunction:return Dt(n);case t.SK.Identifier:return ze(n);case t.SK.ConditionalExpression:return function(e){let n=fe.mkLabel("condexprz"),o=fe.mkLabel("condexprfin");return fe.emitJmp(n,sn(e.condition),t.ir.JmpMode.IfZero),fe.emitJmp(o,bn(e.whenTrue),t.ir.JmpMode.Always),fe.emitLbl(n),fe.emitJmp(o,bn(e.whenFalse),t.ir.JmpMode.Always),fe.emitLbl(o),At()}(n);case t.SK.AsExpression:return function(e){return e.expression,bn(e.expression)}(n);case t.SK.TemplateExpression:return Je(n);case t.SK.ObjectLiteralExpression:return function(e){let n=t.ir.shared(t.ir.rtcall("pxtrt::mkMap",[]));return e.properties.forEach((e=>{let o,r;if(t.assert(!e.questionToken),e.kind==t.SK.ShorthandPropertyAssignment){const n=e;t.assert(!n.equalsToken&&!n.objectAssignmentInitializer),o=e.name.text;const i=P.getShorthandAssignmentValueSymbol(e),s=i&&i.valueDeclaration&&i.valueDeclaration.name;if(!s||s.kind!=t.SK.Identifier)throw Be(e);r=ze(s)}else{if(e.name.kind==t.SK.ComputedPropertyName){const t=e.name.expression;return void fe.emitExpr(Qt("pxtrt::mapSetByString",[Ot(n,!0),t,e.initializer],null))}o=e.name.kind==t.SK.StringLiteral?e.name.text:e.name.getText(),r=bn(e.initializer)}const i=t.target.isNative?t.ir.numlit(Re(o)):t.ir.ptrlit(null,JSON.stringify(o)),s=[n,i,r];fe.emitExpr(t.ir.rtcall(t.target.isNative?"pxtrt::mapSet":"pxtrt::mapSetByString",s))})),n}(n);case t.SK.TypeOfExpression:return function(e){return Qt("pxt::typeOf",[e.expression],null)}(n);case e.SyntaxKind.DeleteExpression:return function(e){let n,o;if(e.expression.kind==t.SK.PropertyAccessExpression){const t=e.expression;n=t.expression,o=Ot(Xe(t.name.text))}else{if(e.expression.kind!=t.SK.ElementAccessExpression)throw g(9276,F("expression not supported as argument to 'delete'"));{const t=e.expression;n=t.expression,o=t.argumentExpression}}const r=ee(n);if(Y(r))throw g(9277,F("'delete' not supported on class types"));if($(r))throw g(9277,F("'delete' not supported on array"));return Qt("pxtrt::mapDeleteByString",[n,o],null)}(n);default:return Be(n),null}}(n);if(o.isExpr())return o;throw new Error("expecting expression")}function Tn(n){const o=u(n);if(o.usedNodes){re=!1;for(let e of t.U.values(o.usedNodes))ot(e);for(let e of o.usedActions)e(_e);re=!0}else w(n)||e.isClassDeclaration(n)?(re=!1,oe=o,oe.usedNodes=null,oe.usedActions=null,w(n)&&!Wt(n)&&Pe(n),En(n),re=!0):(oe=o,oe.usedNodes={},oe.usedActions=[],En(n),oe=null)}function En(e){kn(e,Sn)}function Sn(n){switch(n.kind){case t.SK.SourceFile:return function(e){e.statements.forEach(En)}(n);case t.SK.InterfaceDeclaration:return yn(n);case t.SK.VariableStatement:return function(n){function o(e){let n=t.U.lookup(Z,e.name);if(n||(n=e,Z[e.name]=n),n.value!=e.value)throw g(9269,F("conflicting values for config.{0}",e.name))}if(n.declarationList.flags&e.NodeFlags.Const){let e=n.parent&&n.parent.kind==t.SK.ModuleBlock?j(n.parent.parent):"?";if("config"==e||"userconfig"==e)for(let t of n.declarationList.declarations){let r=ie(t);if(!t.initializer)continue;let i=jt(t.initializer),s=Xt(n,"CFG_"+r);if(null==s||0==s)throw g(9268,F("can't find DAL.CFG_{0}",r));"userconfig"==e&&(r="!"+r),o({name:r,key:s,value:i})}}e.isInAmbientContext(n)||(rn(n.declarationList),n.declarationList.declarations.forEach(En))}(n);case t.SK.ModuleDeclaration:return function(e){En(e.body)}(n);case t.SK.EnumDeclaration:return;case t.SK.FunctionDeclaration:case t.SK.Constructor:case t.SK.MethodDeclaration:return void Dt(n);case t.SK.ExpressionStatement:return function(e){un(e.expression)}(n);case t.SK.Block:case t.SK.ModuleBlock:return on(n);case t.SK.VariableDeclaration:return _n(n),void St();case t.SK.IfStatement:return function(e){en(e);let t=fe.mkLabel("else");fe.emitJmpZ(t,sn(e.expression)),En(e.thenStatement);let n=fe.mkLabel("afterif");fe.emitJmp(n),fe.emitLbl(t),e.elseStatement&&En(e.elseStatement),fe.emitLbl(n)}(n);case t.SK.WhileStatement:return function(e){en(e);let t=an(e);fe.emitLblDirect(t.cont),en(e.expression),fe.emitJmpZ(t.brk,sn(e.expression)),En(e.statement),fe.emitJmp(t.cont),fe.emitLblDirect(t.brk)}(n);case t.SK.DoStatement:return function(e){en(e);let t=an(e);fe.emitLblDirect(t.cont),En(e.statement),en(e.expression),fe.emitJmpZ(t.brk,sn(e.expression)),fe.emitJmp(t.cont),fe.emitLblDirect(t.brk)}(n);case t.SK.ForStatement:return function(e){e.initializer&&e.initializer.kind==t.SK.VariableDeclarationList?(rn(e.initializer),e.initializer.declarations.forEach(En)):un(e.initializer),en(e);let n=an(e);fe.emitLblDirect(n.fortop),e.condition&&(en(e.condition),fe.emitJmpZ(n.brk,sn(e.condition))),En(e.statement),fe.emitLblDirect(n.cont),un(e.incrementor),fe.emitJmp(n.fortop),fe.emitLblDirect(n.brk)}(n);case t.SK.ForOfStatement:return function(e){if(!e.initializer||e.initializer.kind!=t.SK.VariableDeclarationList)return void Be(e,"only a single variable may be used to iterate a collection");let n=e.initializer;if(1!=n.declarations.length)return void Be(e,"only a single variable may be used to iterate a collection");rn(n);let o=ee(e.expression),r="",i="";if(ue(o))r="String_::charAt",i="String_::length";else{if(!$(o))return void Be(e.expression,"cannot use for...of with this expression");r="Array_::getAt",i="Array_::length"}ot(n.declarations[0]);const s=_n(n.declarations[0]);t.U.assert(!!s||!_e.finalPass),fe.stackEmpty();let a=fe.mkLocalUnnamed();fe.emitExpr(a.storeByRef(bn(e.expression)));let l=fe.mkLocalUnnamed();fe.emitExpr(l.storeByRef(Jt(0))),fe.stackEmpty(),en(e);let c=an(e);fe.emitLblDirect(c.fortop);let u=t.ir.rtcall(i,[a.loadCore()]),p=Ht("numops::lt_bool",l.load(),m(u));fe.emitJmpZ(c.brk,p),s&&fe.emitExpr(s.storeByRef(t.ir.rtcall(r,[a.loadCore(),(e=>f()?t.ir.rtcall("pxt::toInt",[e]):e)(l.loadCore())]))),St(),En(e.statement),fe.emitLblDirect(c.cont),fe.emitExpr(l.storeByRef(Ht("numops::adds",l.load(),Jt(1)))),fe.emitJmp(c.fortop),fe.emitLblDirect(c.brk),fe.emitExpr(a.storeByRef(Jt(void 0)))}(n);case t.SK.ContinueStatement:case t.SK.BreakStatement:return function(n){en(n);let o=n.label?n.label.text:null,r=n.kind==t.SK.BreakStatement,i=0,s=function n(s){return s?o&&s.kind==t.SK.LabeledStatement&&s.label.text==o?s.statement:s.kind==t.SK.SwitchStatement&&!o&&r||!o&&e.isIterationStatement(s,!1)?s:(i+=gn(s),n(s.parent)):null}(n);if(s){let o=an(s);pn(i),n.kind==t.SK.ContinueStatement?e.isIterationStatement(s,!1)?fe.emitJmp(o.cont):xe(n,9231,F("continue on non-loop")):n.kind==t.SK.BreakStatement?fe.emitJmp(o.brk):t.oops()}else xe(n,9230,F("cannot find outer loop"))}(n);case t.SK.LabeledStatement:return function(e){let t=an(e.statement);En(e.statement),fe.emitLblDirect(t.brk)}(n);case t.SK.ReturnStatement:return function(e){en(e);let n=null;e.expression?n=bn(e.expression):ne(fe.action)&&(n=Jt(void 0));let o=0;for(let t=e;t&&t!=fe.action;t=t.parent)o+=gn(t);pn(o),fe.emitJmp(an(fe.action).ret,n,t.ir.JmpMode.Always)}(n);case t.SK.ClassDeclaration:return function(e){const t=Ve(null,e);t.isUsed&&_e.usedClassInfos.indexOf(t)<0&&_e.usedClassInfos.push(t),e.members.forEach(En)}(n);case t.SK.PropertyDeclaration:case t.SK.PropertyAssignment:return function(e){if(T(e))_n(e);else if(e.initializer){let t=Ve(ee(e.parent));_e.finalPass&&t.isUsed&&!t.ctor&&g(9209,F("class field initializers currently require an explicit constructor"))}}(n);case t.SK.SwitchStatement:return function(e){en(e);let n,o=an(e),r=t.ir.shared(bn(e.expression)),i=e.caseBlock.clauses.map((e=>{let o=fe.mkLabel("switch");if(e.kind==t.SK.CaseClause){let n=e,i=bn(n.expression),s=lt(n.expression)?1:0,a=t.ir.rtcallMask(Ut("pxt::switch_eq"),s,0,[i,r]);fe.emitJmp(o,a,t.ir.JmpMode.IfNotZero,r)}else e.kind==t.SK.DefaultClause?(t.assert(!n,"!defaultLabel"),n=o):t.oops();return o}));n?fe.emitJmp(n,r):fe.emitJmp(o.brk,r),e.caseBlock.clauses.forEach(((e,t)=>{fe.emitLbl(i[t]),e.statements.forEach(En)})),fe.emitLblDirect(o.brk)}(n);case t.SK.TypeAliasDeclaration:return;case e.SyntaxKind.TryStatement:return function(e){const n=e=>Zt("pxt::beginTry",[t.ir.ptrlit(e.lblName,e)]);en(e);const o=fe.mkLabel("catch");o.lblName="_catch_"+p(e);const r=fe.mkLabel("finally");if(r.lblName="_finally_"+p(e),e.finallyBlock&&fe.emitExpr(n(r)),e.catchClause&&fe.emitExpr(n(o)),fe.stackEmpty(),on(e.tryBlock),fe.stackEmpty(),e.catchClause){const t=fe.mkLabel("catchend");pn(),fe.emitJmp(t),fe.emitLbl(o);const n=e.catchClause.variableDeclaration;if(n){_n(n);const e=Le(n);fe.emitExpr(e.storeByRef(Zt("pxt::getThrownValue",[])))}St(),on(e.catchClause.block),fe.emitLbl(t)}e.finallyBlock&&(pn(),fe.emitLbl(r),on(e.finallyBlock),fe.emitExpr(Zt("pxt::endFinally",[])))}(n);case e.SyntaxKind.ThrowStatement:return function(e){en(e),fe.emitExpr(Zt("pxt::throwValue",[bn(e.expression)]))}(n);case t.SK.DebuggerStatement:return function(e){en(e)}(n);case t.SK.GetAccessor:case t.SK.SetAccessor:return function(e){Dt(e)}(n);case t.SK.ImportEqualsDeclaration:case t.SK.EmptyStatement:case t.SK.SemicolonClassElement:return;default:Be(n)}}function Cn(e){return r.procCallLocations.push(t.nodeLocationInfo(e))-1}},t.isStringType=ue;class de{constructor(){this.procs=[],this.globals=[],this.finalPass=!1,this.writeFile=(e,t)=>{},this.usedClassInfos=[],this.numStmts=1,this.commSize=0,this.itEntries=0,this.itFullEntries=0,this.numMethods=0,this.numVirtMethods=0,this.usedChars=new Uint32Array(2048),this.explicitlyUsedIfaceMembers={},this.ifaceMemberMap={},this.strings={},this.hexlits={},this.doubles={},this.otherLiterals=[],this.codeHelpers={},this.lblNo=0}reset(){this.lblNo=0,this.otherLiterals=[],this.strings={},this.hexlits={},this.doubles={},this.numStmts=0}getTitle(){const e=this.options.name||t.U.lf("Untitled");return e.length>=90?e.slice(0,87)+"...":e}addProc(e){t.assert(!this.finalPass,"!this.finalPass"),this.procs.push(e),e.seqNo=this.procs.length}recordHelper(e,t,n){const o=e=>{e.codeHelpers[t]||(e.codeHelpers[t]=n(e))};o(this),this.recordAction(e,o)}recordAction(e,n){e?e.usedActions&&e.usedActions.push(n):t.U.oops("no using ctx!")}emitLabelled(e,n,o){let r=t.U.lookup(n,e);if(null!=r)return r;let i=o+this.lblNo++;return n[e]=i,i}emitDouble(e){return this.emitLabelled(t.target.switches.numFloat?function(e){let n=new Float32Array(1);return n[0]=e,t.U.toHex(new Uint8Array(n.buffer))}(e):function(e){let n=new Float64Array(1);return n[0]=e,t.U.toHex(new Uint8Array(n.buffer))}(e),this.doubles,"_dbl")}emitString(e){if(!this.finalPass)for(let t=0;t<e.length;++t){const n=e.charCodeAt(t);n>=128&&(this.usedChars[n>>5]|=1<<(31&n))}return this.emitLabelled(e,this.strings,"_str")}emitHexLiteral(e){return this.emitLabelled(e,this.hexlits,"_hexlit")}setPerfCounters(e){if(!t.target.switches.profile)return[];const n=e.slice();return this.procs.forEach((e=>{e.perfCounterName&&(t.U.assert(t.target.switches.profile),e.perfCounterNo=n.length,n.push(e.perfCounterName))})),n}}function ge(e){if(!e.modifiers)return!1;if(e.parent.kind!=t.SK.Constructor)return!1;for(let n of e.modifiers)if(n.kind==t.SK.PrivateKeyword||n.kind==t.SK.PublicKeyword||n.kind==t.SK.ProtectedKeyword)return!0;return!1}function he(t){return t.flags&e.TypeFlags.Union?t.types.every((e=>he(e))):!!(t.flags&(e.TypeFlags.NumberLike|e.TypeFlags.EnumLike|e.TypeFlags.BooleanLike))}t.Binary=de,t.isCtorField=ge}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(ts){var pxtc;(function(pxtc){function getTsCompilerOptions(e){let t=ts.getDefaultCompilerOptions();return t.target=ts.ScriptTarget.ES5,t.module=ts.ModuleKind.None,t.noImplicitAny=!0,t.noImplicitReturns=!0,t.allowUnreachableCode=!0,t}function nodeLocationInfo(e){let t=ts.getSourceFileOfNode(e);const n=e.getStart?e.getStart():e.pos,{line:o,character:r}=ts.getLineAndCharacterOfPosition(t,n),{line:i,character:s}=ts.getLineAndCharacterOfPosition(t,e.end);return{start:n,length:e.end-n,line:o,column:r,endLine:i,endColumn:s,fileName:t.fileName}}function patchUpDiagnostics(e,t=!1){t&&(e=e.filter((e=>5012!==e.code)));let n=e.filter((e=>1148==e.code));return n.length>0&&(e=n),e.map((e=>{if(!e.file){return{code:e.code,start:e.start,length:e.length,line:0,column:0,messageText:ts.flattenDiagnosticMessageText(e.messageText,"\n"),category:e.category,fileName:"?"}}const t=ts.getLineAndCharacterOfPosition(e.file,e.start);let n={code:e.code,start:e.start,length:e.length,line:t.line,column:t.character,messageText:ts.flattenDiagnosticMessageText(e.messageText,"\n"),category:e.category,fileName:e.file.fileName};return 1148==n.code&&(n.messageText=pxtc.Util.lf("all symbols in top-level scope are always exported; please use a namespace if you want to export only some")),n}))}function py2tsIfNecessary(e){if(e.target.preferredEditor==pxt.PYTHON_PROJECT_NAME){return pxtc.transpile.pyToTs(e)}}function mkCompileResult(){return{outfiles:{},diagnostics:[],success:!1,times:{}}}function storeGeneratedFiles(e,t){for(let n of e.generatedFiles||[])t.outfiles[n]=e.fileSystem[n]}function runConversionsAndStoreResults(e,t){const n=pxtc.U.cpuUs();t||(t=mkCompileResult());const o=py2tsIfNecessary(e);o&&(t=Object.assign(Object.assign({},t),{diagnostics:o.diagnostics,sourceMap:o.sourceMap,globalNames:o.globalNames})),storeGeneratedFiles(e,t),e.sourceFiles||(e.sourceFiles=Object.keys(e.fileSystem));const r=e.sourceFiles.indexOf(pxt.MAIN_TS);r>=0&&(e.sourceFiles.splice(r,1),e.sourceFiles.push(pxt.MAIN_TS));const i=e.sourceFiles.indexOf(pxt.TUTORIAL_CODE_STOP);return i>=0&&(e.sourceFiles.splice(i,1),e.sourceFiles.push(pxt.TUTORIAL_CODE_STOP)),t.times.conversions=pxtc.U.cpuUs()-n,t}function timesToMs(e){for(let t of Object.keys(e.times))e.times[t]=Math.round(e.times[t])/1e3}function buildProgram(e,t){let n={};for(let t in e.fileSystem)n[normalizePath(t)]=e.fileSystem[t];let o=getTsCompilerOptions(e),r={getSourceFile:(e,t,o)=>{e=normalizePath(e);let r="";return n.hasOwnProperty(e)?r=n[e]:o&&o("File not found: "+e),null==r&&(o("File not found: "+e),r=""),ts.createSourceFile(e,r,t,true)},fileExists:e=>(e=normalizePath(e),n.hasOwnProperty(e)),getCanonicalFileName:e=>e,getDefaultLibFileName:()=>"no-default-lib.d.ts",writeFile:(e,n,o,r)=>{t.outfiles[e]=n},getCurrentDirectory:()=>".",useCaseSensitiveFileNames:()=>!0,getNewLine:()=>"\n",readFile:e=>(e=normalizePath(e),n[e]||""),directoryExists:e=>!0,getDirectories:()=>[]},i=e.sourceFiles.filter((e=>pxtc.U.endsWith(e,".ts")));return ts.createProgram(i,o,r)}function isPxtModulesFilename(e){return pxtc.U.startsWith(e,"pxt_modules/")}function compile(opts,service){pxtc.compilerHooks||(pxtc.compilerHooks={},opts.target.compilerExtension&&eval(opts.target.compilerExtension)),pxtc.compilerHooks.init&&pxtc.compilerHooks.init(opts,service);let startTime=pxtc.U.cpuUs(),res=mkCompileResult(),program;if(service)storeGeneratedFiles(opts,res),program=service.getProgram();else{if(runConversionsAndStoreResults(opts,res),res.diagnostics.length>0)return res;program=buildProgram(opts,res)}const entryPoint=opts.sourceFiles.filter((e=>pxtc.U.endsWith(e,".ts"))).pop().replace(/.*\//,"");if(res.diagnostics=patchUpDiagnostics(program.getSyntacticDiagnostics(),opts.ignoreFileResolutionErrors),res.diagnostics.length>0)return opts.forceEmit&&(pxt.debug("syntactic errors, forcing emit"),pxtc.compileBinary(program,opts,res,entryPoint)),res;res.diagnostics=patchUpDiagnostics(program.getOptionsDiagnostics().concat(pxtc.Util.toArray(program.getGlobalDiagnostics())),opts.ignoreFileResolutionErrors);const semStart=pxtc.U.cpuUs();0==res.diagnostics.length&&(res.diagnostics=patchUpDiagnostics(program.getSemanticDiagnostics(),opts.ignoreFileResolutionErrors));const emitStart=pxtc.U.cpuUs();if(res.times["typescript-syn"]=semStart-startTime,res.times["typescript-sem"]=emitStart-semStart,res.times.typescript=emitStart-startTime,opts.ast&&(res.ast=program),opts.ast||opts.forceEmit||0==res.diagnostics.length){const e=pxtc.compileBinary(program,opts,res,entryPoint);res.times.compilebinary=pxtc.U.cpuUs()-emitStart,res.diagnostics=res.diagnostics.concat(patchUpDiagnostics(e.diagnostics))}0==res.diagnostics.length&&(res.success=!0);for(let e of opts.sourceFiles)pxtc.Util.startsWith(e,"built/")&&(res.outfiles[e.slice(6)]=opts.fileSystem[e]);return res.times.all=pxtc.U.cpuUs()-startTime,pxt.tickEvent("compile",res.times),res}function decompile(e,t,n,o=!1){let r=e.getSourceFile(n);pxtc.annotate(e,n,pxtc.target||pxt.appTarget&&pxt.appTarget.compile);const i=pxtc.getApiInfo(e,t.jres),s=pxtc.getBlocksInfo(i,t.bannedCategories),a={snippetMode:t.snippetMode||!1,alwaysEmitOnStart:t.alwaysDecompileOnStart,includeGreyBlockMessages:o,generateSourceMap:!!t.ast,allowedArgumentTypes:t.allowedArgumentTypes||["number","boolean","string"],errorOnGreyBlocks:!!t.errorOnGreyBlocks},[l,c]=pxtc.decompiler.buildRenameMap(e,r,{declarations:"variables",takenNames:{}});return pxtc.decompiler.decompileToBlocks(s,r,a,l)}function decompileSnippets(e,t,n=!1){const o=pxtc.getApiInfo(e,t.jres),r=pxtc.getBlocksInfo(o,t.bannedCategories),i=new pxtc.decompiler.RenameMap([]),s={snippetMode:t.snippetMode||!1,alwaysEmitOnStart:t.alwaysDecompileOnStart,includeGreyBlockMessages:n,generateSourceMap:!!t.ast,allowedArgumentTypes:t.allowedArgumentTypes||["number","boolean","string"],errorOnGreyBlocks:!!t.errorOnGreyBlocks};let a;const l=[];if(t.sourceTexts)for(let e=0;e<t.sourceTexts.length;e++){t.fileSystem[pxt.MAIN_TS]=t.sourceTexts[e],t.fileSystem[pxt.MAIN_BLOCKS]="";let n=getTSProgram(t,a);const o=n.getSourceFile(pxt.MAIN_TS),c=pxtc.decompiler.decompileToBlocks(r,o,s,i);l.push(c.outfiles[pxt.MAIN_BLOCKS]),a=n}return l}function getTSProgram(e,t){let n={},o={};for(let t in e.fileSystem)o[normalizePath(t)]=e.fileSystem[t];let r=getTsCompilerOptions(e),i={getSourceFile:(e,t,n)=>{e=normalizePath(e);let r="";return o.hasOwnProperty(e)?r=o[e]:n&&n("File not found: "+e),null==r&&(n("File not found: "+e),r=""),ts.createSourceFile(e,r,t,true)},fileExists:e=>(e=normalizePath(e),o.hasOwnProperty(e)),getCanonicalFileName:e=>e,getDefaultLibFileName:()=>"no-default-lib.d.ts",writeFile:(e,t,o,r)=>{n[e]=t},getCurrentDirectory:()=>".",useCaseSensitiveFileNames:()=>!0,getNewLine:()=>"\n",readFile:e=>(e=normalizePath(e),o[e]||""),directoryExists:e=>!0,getDirectories:()=>[]};e.sourceFiles||(e.sourceFiles=Object.keys(e.fileSystem));let s=e.sourceFiles.filter((e=>pxtc.U.endsWith(e,".ts"))),a=s.filter((e=>e!=pxt.MAIN_TS)),l=!1;s.length>a.length&&(s=a,s.push(pxt.MAIN_TS),l=!0);const c=s.indexOf(pxt.TUTORIAL_CODE_STOP);c>=0&&(s.splice(c,1),s.push(pxt.TUTORIAL_CODE_STOP));const u=ts.createProgram(s,r,i,t);return pxtc.annotate(u,pxt.MAIN_TS,pxtc.target||pxt.appTarget&&pxt.appTarget.compile),u}function normalizePath(e){e=e.replace(/\\/g,"/");const t=[];return e.split("/").forEach((e=>{".."===e&&t.length?t.pop():"."!==e&&t.push(e)})),t.join("/")}pxtc.getTsCompilerOptions=getTsCompilerOptions,pxtc.nodeLocationInfo=nodeLocationInfo,pxtc.patchUpDiagnostics=patchUpDiagnostics,pxtc.py2tsIfNecessary=py2tsIfNecessary,pxtc.storeGeneratedFiles=storeGeneratedFiles,pxtc.runConversionsAndStoreResults=runConversionsAndStoreResults,pxtc.timesToMs=timesToMs,pxtc.isPxtModulesFilename=isPxtModulesFilename,pxtc.compile=compile,pxtc.decompile=decompile,pxtc.decompileSnippets=decompileSnippets,pxtc.getTSProgram=getTSProgram})(pxtc=ts.pxtc||(ts.pxtc={}))}(ts||(ts={})),function(e){!function(t){const n=["type","offset","vaddr","paddr","filesz","memsz","flags","align"],o=e.HF2.read32,r=e.HF2.read16,i=4096;t.parse=function(t){1179403647!=o(t,0)&&e.U.userError("no magic"),1!=t[4]&&e.U.userError("not 32 bit"),1!=t[5]&&e.U.userError("not little endian"),1!=t[6]&&e.U.userError("bad version"),2!=r(t,16)&&e.U.userError("wrong object type"),40!=r(t,18)&&e.U.userError("not ARM");let s=o(t,28);o(t,32),0==s&&e.U.userError("expecting program headers");let a=r(t,42),l=r(t,44),c=e.U.range(l).map((e=>function(e){let r={},i=e;for(let i of n)r[i]=o(t,e),e+=4;let s=r;return s._filepos=i,s}(s+e*a))),u=t.length+1;for(;15&u;)u++;let p=0;for(let e of c)1==e.type&&(p=Math.max(p,e.vaddr+e.memsz));let d=(p+i-1&-4096)+(4095&u),g=-1;for(let e of c)4==e.type&&(g=e._filepos);return{imageMemStart:d,imageFileStart:u,phOffset:g,template:t}},t.patch=function(t,o){let r=new Uint8Array(t.imageFileStart+o.length);return r.fill(0),e.U.memcpy(r,0,t.template),e.U.memcpy(r,t.imageFileStart,o),function(t,o){let r=o._filepos;for(let i of n)e.HF2.write32(t,r,o[i]||0),r+=4}(r,{_filepos:t.phOffset,type:1,offset:t.imageFileStart,vaddr:t.imageMemStart,paddr:t.imageMemStart,filesz:o.length,memsz:o.length,flags:5,align:i}),r}}(e.elf||(e.elf={}))}(pxt||(pxt={})),function(e){!function(t){const n=e.HF2.read32,o=e.HF2.read16,r=[{name:"esp32",chipId:0,memmap:[{from:0,to:65536,id:"PADDING"},{from:1061158912,to:1065353216,id:"DROM"},{from:1065353216,to:1069547520,id:"EXTRAM_DATA"},{from:1073217536,to:1073225728,id:"RTC_DRAM"},{from:1073283072,to:1073741824,id:"BYTE_ACCESSIBLE"},{from:1073405952,to:1073741824,id:"DRAM"},{from:1073610752,to:1073741820,id:"DIRAM_DRAM"},{from:1073741824,to:1074200576,id:"IROM"},{from:1074200576,to:1074233344,id:"CACHE_PRO"},{from:1074233344,to:1074266112,id:"CACHE_APP"},{from:1074266112,to:1074397184,id:"IRAM"},{from:1074397184,to:1074528252,id:"DIRAM_IRAM"},{from:1074528256,to:1074536448,id:"RTC_IRAM"},{from:1074593792,to:1077936128,id:"IROM"},{from:1342177280,to:1342185472,id:"RTC_DATA"}]},{name:"esp32-s2",chipId:2,memmap:[{from:0,to:65536,id:"PADDING"},{from:1056964608,to:1073217536,id:"DROM"},{from:1062207488,to:1073217536,id:"EXTRAM_DATA"},{from:1073340416,to:1073348608,id:"RTC_DRAM"},{from:1073340416,to:1073741824,id:"BYTE_ACCESSIBLE"},{from:1073340416,to:1074208768,id:"MEM_INTERNAL"},{from:1073414144,to:1073741824,id:"DRAM"},{from:1073741824,to:1073848576,id:"IROM_MASK"},{from:1073872896,to:1074200576,id:"IRAM"},{from:1074200576,to:1074208768,id:"RTC_IRAM"},{from:1074266112,to:1082130432,id:"IROM"},{from:1342177280,to:1342185472,id:"RTC_DATA"}]},{name:"esp32-s3",chipId:4,memmap:[{from:0,to:65536,id:"PADDING"},{from:1006632960,to:1023410176,id:"DROM"},{from:1023410176,to:1040187392,id:"EXTRAM_DATA"},{from:1611653120,to:1611661312,id:"RTC_DRAM"},{from:1070104576,to:1070596096,id:"BYTE_ACCESSIBLE"},{from:1070104576,to:1077813248,id:"MEM_INTERNAL"},{from:1070104576,to:1070596096,id:"DRAM"},{from:1073741824,to:1073848576,id:"IROM_MASK"},{from:1077346304,to:1077805056,id:"IRAM"},{from:1611653120,to:1611661312,id:"RTC_IRAM"},{from:1107296256,to:1115684864,id:"IROM"},{from:1342177280,to:1342185472,id:"RTC_DATA"}]},{name:"esp32-c3",chipId:5,memmap:[{from:0,to:65536,id:"PADDING"},{from:1006632960,to:1015021568,id:"DROM"},{from:1070071808,to:1070465024,id:"DRAM"},{from:1070104576,to:1070596096,id:"BYTE_ACCESSIBLE"},{from:1072693248,to:1072824320,id:"DROM_MASK"},{from:1073741824,to:1074135040,id:"IROM_MASK"},{from:1107296256,to:1115684864,id:"IROM"},{from:1077395456,to:1077805056,id:"IRAM"},{from:1342177280,to:1342185472,id:"RTC_IRAM"},{from:1342177280,to:1342185472,id:"RTC_DRAM"},{from:1611653120,to:1611661312,id:"MEM_INTERNAL2"}]}];function i(t){return`0x${t.addr.toString(16)} 0x${t.data.length.toString(16)} bytes; ${t.isDROM?"drom ":""}${t.isMapped?"mapped ":""}${e.U.toHex(t.data.slice(0,20))}...`}function s(t){if(233!=t[0])throw new Error("ESP: invalid magic: "+t[0]);let i=24;const s=o(t,12),a=r.find((e=>e.chipId==s));if(!a)throw new Error("ESP: unknown chipid: "+s);const l={header:t.slice(0,i),chipName:a.name,segments:[]},c=t[1];for(let o=0;o<c;++o){const o=n(t,i),r=n(t,i+4);i+=8;const s=t.slice(i,i+r);if(s.length!=r)throw new Error("too short file");if(i+=r,u(o,"PADDING"))continue;const a=l.segments.filter((e=>e.addr+e.data.length==o))[0];a?a.data=e.U.uint8ArrayConcat([a.data,s]):l.segments.push({addr:o,isMapped:u(o,"DROM")||u(o,"IROM"),isDROM:u(o,"DROM"),data:s})}return l;function u(e,t){return a.memmap.some((n=>n.id==t&&n.from<=e&&e<=n.to))}}function a(t){const n=e.U.flatClone(t);return n.segments=n.segments.map(e.U.flatClone),n}t.toBuffer=function(t,n=!0){let o=(t=function(t){const n=65535;(t=a(t)).segments.sort(((e,t)=>e.addr-t.addr)),e.debug("esp padding:\n"+t.segments.map(i).join("\n")+"\n");const o=t.segments.filter((e=>e.isMapped)),r=t.segments.filter((e=>!e.isMapped));t.segments=[];let s=t.header.length;for(const t of o){const o=t.addr+t.data.length&n;if(o<36){const n=new Uint8Array(36-o);t.data=e.U.uint8ArrayConcat([t.data,n])}}for(;o.length>0;){let e=o[0];const r=l(e);if(r>0)e=c(r);else{if((s+8&n)!=(e.addr&n))throw new Error(`pad oops 0 ${s}+8 != ${e.addr} (mod mask)`);o.shift()}if(t.segments.push(e),s+=8+e.data.length,3&s)throw new Error("pad oops 1")}return t.segments=t.segments.concat(r),e.debug("esp padded:\n"+t.segments.map(i).join("\n")+"\n"),t;function l(e){let t=(e.addr-8&n)-s&n;return 0==t?0:(t-=8,t<0&&(t+=65536),t)}function c(e){if(!r.length||e<=8)return{addr:0,isMapped:!1,isDROM:!1,data:new Uint8Array(e)};const t=r[0],n={addr:t.addr,isMapped:t.isMapped,isDROM:t.isDROM,data:t.data.slice(0,e)};return t.data=t.data.slice(e),t.addr+=n.data.length,0==t.data.length&&r.shift(),n}}(t)).header.length;for(const e of t.segments)o+=8+e.data.length;o=o+16&-16;let r=new Uint8Array(o);r.set(t.header),r[1]=t.segments.length;let s=t.header.length,l=239;for(const n of t.segments){e.HF2.write32(r,s,n.addr),e.HF2.write32(r,s+4,n.data.length),r.set(n.data,s+8),s+=8+n.data.length;for(let e=0;e<n.data.length;++e)l^=n.data[e]}if(r[r.length-1]=l,n){r[23]=1;const t=ts.pxtc.BrowserImpl.sha256buffer(r);r=e.U.uint8ArrayConcat([r,e.U.fromHex(t)])}else r[23]=0;return r},t.parseBuffer=s,t.parseB64=function(t){return s(e.U.stringToUint8Array(atob(t.join(""))))},t.cloneStruct=a}(e.esp||(e.esp={}))}(pxt||(pxt={})),function(e){!function(t){let n;!function(e){e[e.None=0]="None",e[e.Whitespace=1]="Whitespace",e[e.Identifier=2]="Identifier",e[e.Keyword=3]="Keyword",e[e.Operator=4]="Operator",e[e.CommentLine=5]="CommentLine",e[e.CommentBlock=6]="CommentBlock",e[e.NewLine=7]="NewLine",e[e.Literal=8]="Literal",e[e.Tree=9]="Tree",e[e.Block=10]="Block",e[e.EOF=11]="EOF"}(n||(n={}));let o="";let r=e.SyntaxKind;function i(e){switch(e){case r.CommaToken:return 2;case r.EqualsToken:case r.PlusEqualsToken:case r.MinusEqualsToken:case r.AsteriskEqualsToken:case r.AsteriskAsteriskEqualsToken:case r.SlashEqualsToken:case r.PercentEqualsToken:case r.LessThanLessThanEqualsToken:case r.GreaterThanGreaterThanEqualsToken:case r.GreaterThanGreaterThanGreaterThanEqualsToken:case r.AmpersandEqualsToken:case r.BarEqualsToken:case r.CaretEqualsToken:return 5;case r.QuestionToken:case r.ColonToken:return 7;case r.BarBarToken:return 10;case r.AmpersandAmpersandToken:return 20;case r.BarToken:return 30;case r.CaretToken:return 40;case r.AmpersandToken:return 50;case r.EqualsEqualsToken:case r.ExclamationEqualsToken:case r.EqualsEqualsEqualsToken:case r.ExclamationEqualsEqualsToken:return 60;case r.LessThanToken:case r.GreaterThanToken:case r.LessThanEqualsToken:case r.GreaterThanEqualsToken:case r.InstanceOfKeyword:case r.InKeyword:case r.AsKeyword:return 70;case r.LessThanLessThanToken:case r.GreaterThanGreaterThanToken:case r.GreaterThanGreaterThanGreaterThanToken:return 80;case r.PlusToken:case r.MinusToken:return 90;case r.AsteriskToken:case r.SlashToken:case r.PercentToken:return 100;case r.AsteriskAsteriskToken:return 101;case r.DotToken:return 120;default:return 0}}function s(e){switch(e){case r.EndOfFileToken:return n.EOF;case r.SingleLineCommentTrivia:return n.CommentLine;case r.MultiLineCommentTrivia:return n.CommentBlock;case r.NewLineTrivia:return n.NewLine;case r.WhitespaceTrivia:return n.Whitespace;case r.ShebangTrivia:case r.ConflictMarkerTrivia:return n.CommentBlock;case r.NumericLiteral:case r.StringLiteral:case r.RegularExpressionLiteral:case r.NoSubstitutionTemplateLiteral:case r.TemplateHead:case r.TemplateMiddle:case r.TemplateTail:return n.Literal;case r.Identifier:return n.Identifier;default:return e<r.Identifier?n.Operator:n.Keyword}}function a(e,t){for(;e[t]&&e[t].kind==n.Whitespace;)t++;return t}function l(){return{kind:n.EOF,synKind:r.EndOfFileToken,pos:0,lineNo:0,text:""}}function c(e,t){return{kind:n.Whitespace,synKind:r.WhitespaceTrivia,pos:e.pos-t.length,lineNo:e.lineNo,text:t}}function u(e){return{kind:n.Block,synKind:r.OpenBraceToken,pos:e[0].pos,lineNo:e[0].lineNo,stmts:[{tokens:e}],text:"{",endToken:null}}function p(e){if(!e)return!1;switch(e.synKind){case r.IfKeyword:case r.ElseKeyword:case r.LetKeyword:case r.ConstKeyword:case r.VarKeyword:case r.DoKeyword:case r.WhileKeyword:case r.SwitchKeyword:case r.CaseKeyword:case r.DefaultKeyword:case r.ForKeyword:case r.ReturnKeyword:case r.BreakKeyword:case r.ContinueKeyword:case r.TryKeyword:case r.CatchKeyword:case r.FinallyKeyword:case r.DeleteKeyword:case r.FunctionKeyword:case r.ClassKeyword:case r.YieldKeyword:case r.DebuggerKeyword:return!0;default:return!1}}function d(e,o,s=null){let a,g=[],h=0,_=!1;for(e=e.concat([l()]);e[h].kind!=n.EOF;){let n=h;C(),t.Util.assert(h>n,`Error at ${e[h].text}`),m(e.slice(n,h))}return g;function m(e){if(o&&(e=f(e)),0==e.length)return;e.forEach(k),e=y(e);if(o&&g.length>0){let n=g[g.length-1].tokens[0].synKind,o=e[0].synKind;if(n==r.IfKeyword&&o==r.ElseKeyword||n==r.TryKeyword&&o==r.CatchKeyword||n==r.TryKeyword&&o==r.FinallyKeyword||n==r.CatchKeyword&&o==r.FinallyKeyword)return e.unshift(c(e[0]," ")),void t.Util.pushRange(g[g.length-1].tokens,e)}g.push({tokens:e})}function y(e){let t=[],o=0;for(;o<e.length;)if(e[o].blockSpanLength){let s=e.slice(o,o+e[o].blockSpanLength),a=!!s[0].blockSpanIsVirtual;delete s[0].blockSpanLength,delete s[0].blockSpanIsVirtual,o+=s.length,s=y(s),a?t.push((i=s,{kind:n.Tree,synKind:r.WhitespaceTrivia,pos:i[0].pos,lineNo:i[0].lineNo,children:i,endToken:null,text:""})):(t.push(c(s[0]," ")),t.push(u(f(s))))}else t.push(e[o++]);var i;return t}function k(e){if(e.kind==n.Tree){let n=e;n.children=t.Util.concat(d(n.children,!1,n).map((e=>e.tokens)))}}function b(t=!1){for(;;)switch(h++,e[h].kind){case n.Whitespace:case n.CommentBlock:case n.CommentLine:break;case n.NewLine:if(t)break;break;default:return}}function v(){for(;e[h].kind==n.Whitespace;)h++;e[h].kind==n.NewLine&&h++}function T(){for(;;)switch(h++,e[h].kind){case n.EOF:return;case n.Tree:if(e[h].synKind==r.OpenBraceToken)return h--,void S()}}function E(){t.Util.assert(e[h].synKind==r.OpenBraceToken);let o=e[h];t.Util.assert(o.kind==n.Tree);let i=e[h];i.stmts=d(o.children,!0,a),delete o.children,i.kind=n.Block,h++,_=!0}function S(){let t=h+1;b(),e[h].synKind==r.OpenBraceToken?(E(),v()):(C(),e[t].blockSpanLength=h-t)}function C(){for(;;){let l=e[h],c=h;if(a=l,_=!1,l.kind==n.EOF)return;if(o&&l.synKind==r.SemicolonToken)return h++,void v();if(l.synKind==r.EqualsGreaterThanToken){if(b(),e[h].synKind==r.OpenBraceToken){E();continue}{let t=h;C();let o=h;for(;e[o].kind==n.NewLine;)o--;return e[t].blockSpanLength=o-t,void(e[t].blockSpanIsVirtual=!0)}}if(o&&i(l.synKind)){let t=h;if(b(),!p(e[h]))continue;h=t}if(o&&l.kind==n.NewLine){if(b(),l=e[h],i(l.synKind)&&l.synKind!=r.PlusToken&&l.synKind!=r.MinusToken)continue;return void(h=c+1)}if(l.synKind==r.OpenBraceToken&&s&&s.synKind==r.ClassKeyword){let t=h-1;for(;t>=0&&e[t].kind==n.Whitespace;)t--;if(t<0||e[t].synKind!=r.EqualsToken)return h--,void S()}switch(t.Util.assert(c==h),l.synKind){case r.ForKeyword:case r.WhileKeyword:case r.IfKeyword:case r.CatchKeyword:if(b(),e[h].synKind!=r.OpenParenToken)continue;return void S();case r.DoKeyword:if(S(),h--,b(),e[h].synKind==r.WhileKeyword){h++;continue}return;case r.ElseKeyword:if(b(),e[h].synKind==r.IfKeyword)continue;return h=c,void S();case r.TryKeyword:case r.FinallyKeyword:return void S();case r.ClassKeyword:case r.NamespaceKeyword:case r.ModuleKeyword:case r.InterfaceKeyword:case r.FunctionKeyword:return void T()}t.Util.assert(!_,"forgot continue/return after expectBlock"),h++}}}function g(e){return e&&(e.kind==n.Whitespace||e.kind==n.NewLine)}function h(e){let t=[],o=!1;for(let r=0;r<e.length;++r)o&&(r=a(e,r)),e[r]&&(t.push(e[r]),o=e[r].kind==n.NewLine);return t}function f(e){for(e=e.slice(0);g(e[0]);)e.shift();for(;g(e[e.length-1]);)e.pop();return e}function _(e,t){if(t.synKind==r.NoSubstitutionTemplateLiteral&&/^`[\s\.#01]*`$/.test(t.text)){let n=t.text.slice(1,t.text.length-1).split("\n").map((e=>e.replace(/\s/g,""))).filter((e=>!!e));if(n.length<4||n.length>5)return;let o=Math.floor((Math.max(...n.map((e=>e.length)))+2)/5);o<=0&&(o=1);let r="`\n";for(let t=0;t<5;++t){let i=n[t]||"";for(;i.length<5*o;)i+=".";i=i.replace(/0/g,"."),i=i.replace(/1/g,"#"),i=i.replace(/...../g,(e=>"/"+e)),r+=e+i.replace(/./g,(e=>" "+e)).replace(/\//g," ").slice(3)+"\n"}r+=e+"`",t.text=r}}t.toStr=function e(t){return Array.isArray(t)?"[[ "+t.map(e).join("  ")+" ]]":"string"==typeof t.text?JSON.stringify(t.text):t+""},t.format=function(t,u){let p=function(t){o=t;let i=e.createScanner(e.ScriptTarget.Latest,!1,e.LanguageVariant.Standard,t,(e=>{let t=i.getTextPos();console.log("scanner error",t,e.message)})),a=[],l=0,c=-1;for(;;){let e=i.scan();if(e==r.CloseBraceToken&&l==c&&(c=-1,e=i.reScanTemplateToken()),e==r.SlashEqualsToken){let t=i.reScanSlashToken();t==r.RegularExpressionLiteral&&(e=t)}e==r.GreaterThanToken&&(e=i.reScanGreaterToken());let t={kind:s(e),synKind:e,lineNo:0,pos:i.getTokenPos(),text:i.getTokenText()};if(e==r.OpenBraceToken&&l++,e==r.CloseBraceToken&&--l<0&&(l=-1e7),a.push(t),e!=r.TemplateHead&&e!=r.TemplateMiddle||(c=l),t.kind==n.EOF)break}return{tokens:a,braceBalance:l}}(t).tokens;p=function(e,t){let o=[],i=!0,s=1;for(let l=0;l<e.length;++l){if(i){let i=l;if(l=a(e,l),e[l].kind==n.NewLine){let i=!1;t>=0&&e[l].pos>=t&&(t=-1,i=!0),o.push({text:"",kind:n.CommentLine,pos:e[l].pos,lineNo:s,synKind:r.SingleLineCommentTrivia,isCursor:i})}else l=i}o.push(e[l]),e[l].lineNo=s,e[l].kind==n.NewLine?(i=!0,s++):i=!1,t>=0&&e[l].pos>=t&&(t=-1)}return o}(p,u),p=function(e){let t=[];t.push({synKind:r.EndOfFileToken,token:{children:[]}});let o=(e,o)=>{let r=e;r.children=[],r.kind=n.Tree,t.push({synKind:o,token:r})};for(let i=0;i<e.length;++i){let s=e[i],a=t[t.length-1];switch(a.token.children.push(s),s.kind){case n.Operator:switch(s.synKind){case r.OpenBraceToken:case r.OpenParenToken:case r.OpenBracketToken:o(s,s.synKind+1);break;case r.CloseBraceToken:case r.CloseParenToken:case r.CloseBracketToken:for(a.token.children.pop();;){if(a=t.pop(),a.synKind==s.synKind){a.token.endToken=s;break}if(0==t.length||a.synKind==r.CloseBraceToken){t.push(a);break}}}}}return t[0].token.children}(p);let g=d(p,!0),f="",m="",y=-1,k=0;return g.forEach(T),g.forEach((e=>e.tokens.forEach(b))),-1==y&&(y=m.length),{formatted:m,pos:y};function b(e){if(e.kind==n.Tree){let t=e;e.synKind,r.OpenBraceToken,t.children.forEach(b)}else e.kind==n.Block&&e.stmts.forEach((e=>e.tokens.forEach(b)))}function v(e,t){if(k==e.lineNo)t();else{k=e.lineNo;let n=f;f+="    ",t(),f=n}}function T(e){let t=h(e.tokens);1!=t.length||t[0].isCursor||""!=t[0].text?(m+=f,v(t[0],(()=>{S(t)})),"\n"!=m[m.length-1]&&(m+="\n")):m+="\n"}function E(e){-1==y&&e.pos+e.text.length>=u&&(y=m.length+(u-e.pos)),m+=e.text}function S(e){e=function(e){let t=[],o=0,s=l();for(e=e.concat([l()]);o<e.length;){o=a(e,o);let l=e[o];if(l.kind==n.EOF)break;let p=a(e,o+1);if(l.kind==n.NewLine&&e[p].synKind==r.OpenBraceToken){o=p;continue}let d=!0,g=0==t.length?(u=l,{kind:n.NewLine,synKind:r.NewLineTrivia,pos:u.pos,lineNo:u.lineNo,text:"\n"}):t[t.length-1];switch(g.synKind){case r.ExclamationToken:case r.TildeToken:case r.DotToken:d=!1;break;case r.PlusToken:case r.MinusToken:case r.PlusPlusToken:case r.MinusMinusToken:g.isPrefix&&(d=!1)}switch(l.synKind){case r.DotToken:case r.CommaToken:case r.NewLineTrivia:case r.ColonToken:case r.SemicolonToken:case r.OpenBracketToken:d=!1;break;case r.PlusPlusToken:case r.MinusMinusToken:g.kind!=n.Tree&&g.kind!=n.Identifier&&g.kind!=n.Keyword||(d=!1);case r.PlusToken:case r.MinusToken:(s.kind==n.EOF||i(s.synKind)||s.synKind==r.SemicolonToken)&&(l.isPrefix=!0);break;case r.OpenParenToken:if(g.kind==n.Identifier&&(d=!1),g.kind==n.Keyword)switch(g.synKind){case r.IfKeyword:case r.ForKeyword:case r.WhileKeyword:case r.SwitchKeyword:case r.ReturnKeyword:case r.ThrowKeyword:case r.CatchKeyword:break;default:d=!1}}g.kind==n.NewLine&&(d=!1),d&&t.push(c(l," ")),t.push(l),l.kind!=n.NewLine&&(s=l),o++}var u;return t}(e);for(let t=0;t<e.length;++t){let o=e[t];switch(_(f,o),E(o),o.kind){case n.Tree:let r=o;v(o,(()=>{S(h(r.children))})),r.endToken&&E(r.endToken);break;case n.Block:let i=o;0==i.stmts.length?m+=" ":(m+="\n",i.stmts.forEach(T),m+=f.slice(4)),i.endToken?E(i.endToken):m+="}";break;case n.NewLine:if(e[t+1]&&e[t+1].kind==n.CommentLine&&""==e[t+1].text&&!e[t+1].isCursor)break;t==e.length-1?m+=f.slice(4):m+=f;break;case n.Whitespace:}}}}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){let n;function o(e,n){if(!n.packedSource)return;let o=e.currPtr+4096&-256,r=new Uint8Array(256);for(let i=0;i<n.packedSource.length;i+=256){for(let e=0;e<256;++e)r[e]=n.packedSource.charCodeAt(i+e);t.UF2.writeBytes(e,o,r,t.UF2.UF2_FLAG_NOFLASH),o+=256}}!function(e){e.asmTotalSource="";let n={},r=[];let i={commBase:0,funcInfo:{},codeStartIdx:-1,codePaddingSize:0,sha:null,codeStartAddrPadded:void 0,hexlines:void 0,jmpStartAddr:void 0,jmpStartIdx:void 0,codeStartAddr:void 0,elfInfo:void 0,espInfo:void 0};function s(e){let n="",o=0;for(;o<e.length;o+=2)n=e[o]+e[o+1]+n;return t.assert(o==e.length),n}function a(e){if(!(e=e.replace(/^[\s:]/,"")))return[];let n=[];if(e.replace(/([a-f0-9][a-f0-9])/gi,(e=>(n.push(parseInt(e,16)),""))))throw t.oops("bad bytes "+e);return n}function l(e){return e.flashCodeAlign||1024}e.getCommBase=function(){return i.commBase},e.getStartAddress=function(){return i.codeStartAddrPadded},e.setupInlineAssembly=function(o){n={};let r=o.sourceFiles.filter((e=>t.U.endsWith(e,".asm")));e.asmTotalSource="";let i=0;for(let t of r){let r=o.fileSystem[t];r.replace(/^\s*(\w+):/gm,((e,t)=>(n[t]=!0,"")));let s=".section code\n@stackmark func\n@scope user"+i+++"\n"+r+"\n@stackempty func\n@scope\n";e.asmTotalSource+=s}},e.parseHexBytes=a,e.parseHexRecord=function(e){let t=a(e);return{len:t[0],addr:t[1]<<8|t[2],type:t[3],data:t.slice(4,t.length-1),checksum:t[t.length-1]}},e.flashCodeAlign=l;const c="0108010842424242010801083ed8e98d";function u(e){return i.funcInfo[e]}function p(){let e=i.sha?i.sha.slice(0,16):"";for(;e.length<16;)e+="0";return e.toUpperCase()}function d(e){let t=0,n=":";return e.forEach((e=>t+=e)),e.push(255&-t),e.forEach((e=>n+=("0"+e.toString(16)).slice(-2))),n.toUpperCase()}e.setupFor=function(e,n){if(i=r.find((e=>e.sha==n.sha)),i)return;i={commBase:0,funcInfo:{},codeStartIdx:-1,codePaddingSize:0,sha:null,codeStartAddrPadded:void 0,hexlines:void 0,jmpStartAddr:void 0,jmpStartIdx:void 0,codeStartAddr:void 0,elfInfo:void 0,espInfo:void 0},r.length>10&&(r=[]),r.push(i);let o=n.functions;i.commBase=n.commBase||0,i.sha=n.sha;const u=n.hexinfo.hex;if(i.hexlines=u,t.target.nativeType==t.NATIVE_TYPE_VM){i.codeStartAddr=0,i.codeStartAddrPadded=0,i.jmpStartAddr=-1,i.jmpStartIdx=-1;for(let e of o)i.funcInfo[e.name]=e,e.value=16777215;if(t.target.useESP){const e=pxt.esp.parseB64(u),o=t.U.fromHex(c),r=(e,t)=>{for(let n=0;n<o.length;++n)if(e[t+n]!=o[n])return!1;return!0},s=e.segments.filter((e=>e.isDROM));t.U.assert(1==s.length);let a=!1;const l=s[0];i.codeStartAddr=l.addr+l.data.length,i.codeStartAddrPadded=i.codeStartAddr+255&-256,i.codePaddingSize=i.codeStartAddrPadded-i.codeStartAddr,pxt.debug(`user code start: 0x${i.codeStartAddrPadded.toString(16)}; dromlen=${l.data.length} pad=${i.codePaddingSize}`);for(let e=0;e<l.data.length;e+=32)if(r(l.data,e)){a=!0,e+=o.length;const t=e;for(let t of n.vmPointers||[])"0"!=t&&(t=t.replace(/^&/,""),i.funcInfo[t]={name:t,argsFmt:[],value:pxt.HF2.read32(l.data,e)},e+=4);pxt.HF2.write32(l.data,t,i.codeStartAddrPadded);break}t.U.assert(a||0==(n.vmPointers||[]).length),i.espInfo=e,i.codeStartAddrPadded=0}return}if(u.length<=2){const e=t.U.fromHex(u[0]);if(e[2]<=2&&96==e[3]){const t=1610612736,n=4096,o=e.length+n-1&~(n-1);i.elfInfo={template:e,imageMemStart:t+o,imageFileStart:o,phOffset:-1e3}}else i.elfInfo=pxt.elf.parse(e);i.codeStartAddr=i.elfInfo.imageMemStart,i.codeStartAddrPadded=i.elfInfo.imageMemStart;let n=u[0].indexOf(c);return n<0&&t.oops("no jmp table in elf"),i.jmpStartAddr=n/2,i.jmpStartIdx=-1,m(u[0].slice(n+32,n+32+8*o.length+16)),void y()}!function(e){for(let n=0;n<e.length;++n)if("2"==e[n][8]){let o=/^:02....02(....)..$/.exec(e[n]);t.U.assert(!!o);let r=16*parseInt(o[1],16);t.U.assert(0==(65535&r)),e[n]=d([2,0,0,4,0,r>>16])}}(u);let p=0,g="0000",h=0,f=0;i.codeStartAddr=0;let _=()=>{if(!i.codeStartAddr){let n=a(u[f]),o=16-(h+n[0]&15)&15;if(o)if(15&n[2]){let e=h+n[0],t=[o,e>>8,255&e,0];for(let e=0;e<o;++e)t.push(0);f++,u.splice(f,0,d(t)),i.codeStartAddr=e+o}else{if(16!=n[0]){for(n.pop(),n[0]=16;n.length<20;)n.push(0);u[f]=d(n)}i.codeStartAddr=h+16}else i.codeStartAddr=h+n[0];i.codeStartIdx=f+1;const r=l(e);i.codeStartAddrPadded=(i.codeStartAddr&~(r-1))+r;const s=i.codeStartAddrPadded-i.codeStartAddr;t.assert(0==(15&s)),i.codePaddingSize=s}};for(;p<u.length;++p){let t=/:02000004(....)/.exec(u[p]);if(t&&(g=t[1]),t=/^:..(....)00/.exec(u[p]),t){let n=parseInt(g+t[1],16);!e.flashUsableEnd&&h&&n-h>65536&&_(),e.flashUsableEnd&&n>=e.flashUsableEnd&&_(),f=p,h=n}/^:00000001/.test(u[p])&&_(),t=/^:10....000108010842424242010801083ED8E98D/.exec(u[p]),t&&(i.jmpStartAddr=h,i.jmpStartIdx=p)}pxt.debug(`code start: ${i.codeStartAddrPadded}, jmptbl: ${i.jmpStartAddr}`),i.jmpStartAddr||t.oops("No hex start"),i.codeStartAddr||t.oops("No hex end"),i.funcInfo={};for(let e=i.jmpStartIdx+1;e<u.length;++e){let t=/^:..(....)00(.{4,})/.exec(u[e]);if(t&&(m(t[2]),0==o.length))break}return void y();function m(n){let r=e.shortPointers?4:8;for(;n.length>=r;){let a=n.slice(0,r),l=parseInt(s(a),16);n=n.slice(r);let c=o.shift();if(!c)break;i.funcInfo[c.name]=c,l||t.U.oops("No value for "+c.name+" / "+a),0==c.argsFmt.length?l^=1:e.runtimeIsARM||e.nativeType!=t.NATIVE_TYPE_THUMB||1&l||t.U.oops("Non-thumb addr for "+c.name+" / "+a),c.value=l}}function y(){o.length&&t.oops("premature EOF in hex file; missing: "+o.map((e=>e.name)).join(", "))}},e.validateShim=function(e,o,r,i,s){if("TD_ID"==o||"TD_NOOP"==o||"ENUM_GET"==o)return;if(t.U.lookup(n,o))return;let a=`${e}(...) (shim=${o})`,l=u(o);if(l){i?"V"==l.argsFmt[0]&&t.U.userError("expecting function for "+a):"V"!=l.argsFmt[0]&&t.U.userError("expecting procedure for "+a);for(let e=0;e<s.length;++e){l.argsFmt[e+1]||t.U.userError("excessive parameters passed to "+a)}s.length!=l.argsFmt.length-1&&t.U.userError(`not enough arguments for ${a} (got ${s.length}; fmt=${l.argsFmt.join(",")})`)}else t.U.userError("function not found: "+a)},e.lookupFunc=u,e.lookupFunctionAddr=function(e){if("_pxt_comm_base"==e)return i.commBase;let t=u(e);return t?t.value:null},e.hexTemplateHash=p,e.hexPrelude=function(){return`    .startaddr 0x${i.codeStartAddrPadded.toString(16)}\n`},e.hexBytes=d,e.patchHex=function(e,n,r,a){let l=i.hexlines.slice(0,i.codeStartIdx);if(!e.target.useESP){let o=2*n.length+7>>3;t.assert(o<64e3,"program too large, bytes: "+2*n.length),n[17]=o,n[20]=e.commSize}let c=[];for(let e=0;e<i.codePaddingSize>>1;++e)c.push(0);n=c.concat(n);let u=0;function g(e,t){let n=[16,t>>8&255,255&t,0];for(let t=0;t<8;++t)n.push(255&(e[u]||0)),n.push((e[u]||0)>>>8),u++;return n}let h=[16912,0,65535&i.codeStartAddrPadded,i.codeStartAddrPadded>>>16],f=p();for(let e=0;e<4;++e)h.push(parseInt(s(f.slice(4*e,4*e+4)),16));let _=a?t.UF2.newBlockFile(t.target.uf2Family):null;if(i.elfInfo){let o=new Uint8Array(2*n.length);for(let e=0;e<n.length;++e)pxt.HF2.write16(o,2*e,n[e]);let r=pxt.elf.patch(i.elfInfo,o);for(let e=0;e<h.length;++e)pxt.HF2.write16(r,2*e+i.jmpStartAddr,h[e]);if(_&&!e.target.switches.rawELF){let n=e.options.name||"pxt";return n=n.replace(/[^a-zA-Z0-9\-\.]+/g,"_"),_.filename="Projects/"+n+".elf",t.UF2.writeBytes(_,0,r),[t.UF2.serializeFile(_)]}return[t.U.uint8ArrayToString(r)]}if(i.espInfo){const r=pxt.esp.cloneStruct(i.espInfo),s=r.segments.find((e=>e.isDROM));let a=s.data.length;const l=new Uint8Array(a+2*n.length+255&-256);l.set(s.data);for(let e=0;e<n.length;++e)pxt.HF2.write16(l,a,n[e]),a+=2;s.data=l;const c=pxt.esp.toBuffer(r);return _?(t.UF2.writeBytes(_,0,c),o(_,e),[t.UF2.serializeFile(_)]):[t.U.uint8ArrayToString(c)]}if(_){if(t.UF2.writeHex(_,l),t.UF2.writeBytes(_,i.jmpStartAddr,g(h,i.jmpStartIdx).slice(4)),e.checksumBlock){let n=[];for(let t of e.checksumBlock)n.push(255&t,t>>8);t.UF2.writeBytes(_,e.target.flashChecksumAddr,n)}}else l[i.jmpStartIdx]=d(g(h,i.jmpStartAddr)),e.checksumBlock&&t.U.oops("checksum block in HEX not implemented yet");u=0,r&&(l=[]);let m=i.codeStartAddr,y=m-16>>16;for(;u<n.length;)_?t.UF2.writeBytes(_,m,g(n,m).slice(4)):(m>>16!=y&&(y=m>>16,l.push(d([2,0,0,4,y>>8,255&y]))),l.push(d(g(n,m)))),m+=16;if(!r){let e=i.hexlines.slice(i.codeStartIdx);_?t.UF2.writeHex(_,e):t.Util.pushRange(l,e)}if(!_&&e.target.moveHexEof){for(;!l[l.length-1];)l.pop();":00000001FF"==l[l.length-1]&&l.pop()}if(e.packedSource)if(_)o(_,e);else{let t=0;for(let n=0;n<e.packedSource.length;n+=16){let o=[16,t>>8&255,255&t,14];for(let t=0;t<16;++t)o.push(255&(e.packedSource.charCodeAt(n+t)||0));l.push(d(o)),t+=16}}return!_&&e.target.moveHexEof&&l.push(":00000001FF"),_?[t.UF2.serializeFile(_)]:l}}(n=t.hexfile||(t.hexfile={})),t.hexDump=function(e,t=0){function n(e,t=8){let n=e.toString(16);for(;n.length<t;)n="0"+n;return n}let o="";for(let r=0;r<e.length;r+=16){o+=n(t+r)+": ";let i="";for(let t=0;t<16;t++){0==(3&t)&&(o+=" ");let s=e[r+t];null!=s?(o+=n(s,2)+" ",i+=32<=s&&s<127?String.fromCharCode(s):"."):o+="   "}o+=" "+i+"\n"}return o},t.asmline=function(e){return e.indexOf("\n")>=0?(e=e.replace(/^\s*/gm,"").replace(/^(.*)$/gm,((e,t)=>";"==t[0]&&" "==t[1]||/:\*$/.test(t)?t:"    "+t)))+"\n":(/(^[\s;])|(:$)/.test(e)||(e="    "+e),e+"\n")},t.firstMethodOffset=function(){return 9};const r=[21078089,22513679,15655169,18636881,19658081,21486649,21919277,20041213,20548751,16180187,18361627,19338023,19772677,16506547,23530697,22998697,21225203,19815283,23679599,19822889,21136133,19540043,21837031,18095489,23924267,23434627,22582379,21584111,22615171,23403001,19640683,19998031,18460439,20105387,17595791,16482043,23199959,18881641,21578371,22765747,20170273,16547639,16434589,21435019,20226751,19506731,21454393,23224541,23431973,23745511];function i(e){let n=32;t.U.assert(t.U.unique(e,(e=>""+e)).length==e.length,"non unique");for(let o=2;;o<<=1){if(n--,o<e.length)continue;let i,s=-1,a=-1;for(let l of r){let r=l<<8|n,c=new Uint16Array(o+t.vtLookups+1);t.U.assert(0==(1&c.length));let u=0,p=[];for(let o of e){t.U.assert(o>0);let e=Math.imul(o,r)>>>n;p.push(e);let i=!1;for(let n=0;n<t.vtLookups;n++){if(!c[e+n]){i=!0,c[e+n]=o;break}u++}if(!i){u=-1;break}}(-1==s||s>u)&&(s=u,a=r,i=c)}if(s>=0)return{mult:a,mapping:i,size:o}}}function s(e,n,o){const r=i(e.itable.map((e=>e.idx)));let s=t.target.shortPointers?".short":".word",a=`\n        .balign 4\n${e.id}_VT:\n        .short ${4*e.allfields.length+4}  ; size in bytes\n        .byte ${pxt.ValTypeObject}, ${pxt.VTABLE_MAGIC} ; magic\n        ${s} ${e.id}_IfaceVT\n        .short ${e.classNo} ; class-id\n        .short 0 ; reserved\n        .word ${r.mult} ; hash-mult\n`,l=e=>{"0"!=e&&(e+="@fn"),a+=`        ${s} ${e}\n`};l("pxt::RefRecord_destroy"),l("pxt::RefRecord_print"),l("pxt::RefRecord_scan"),l("pxt::RefRecord_gcsize");let c=e.toStringMethod;l(c?c.vtLabel():"0");for(let t of e.vtable)l(t.label()+"_nochk");a+=`\n        .balign ${t.target.shortPointers?2:4}\n${e.id}_IfaceVT:\n`;const u=2*r.mapping.length;let p="",d=u,g={};for(let t of e.itable){g[t.idx+""]=d;const e=t.proc?t.proc.isGetter()?1:2:0;p+=`  .short ${t.idx}, ${e} ; ${t.name}\n`,p+=`  .word ${t.proc?t.proc.vtLabel()+"@fn":t.info}\n`,d+=8,t.setProc&&(p+=`  .short ${t.idx}, 0 ; set ${t.name}\n`,p+=`  .word ${t.setProc.vtLabel()}@fn\n`,d+=8)}p+="  .word 0, 0 ; the end\n",d+=8;let h=r.mapping;for(let e=0;e<h.length;++e)o.itEntries++,h[e]&&o.itFullEntries++;return a+="  .short "+t.U.toArray(h).map(((e,t)=>(g[e+""]||u)-2*t)).join(", ")+"\n",a+=p,a+="\n",a}t.vtLookups=3,t.computeHashMultiplier=i,t.vtableToAsm=s;const a=["GC"];function l(e,o){let r=`\n    .short ${e.globalsWords}   ; num. globals\n    .short 0 ; patched with number of 64 bit words resulting from assembly\n    .word _pxt_config_data\n    .short 0 ; patched with comm section size\n    .short ${e.nonPtrGlobals} ; number of globals that are not pointers (they come first)\n    .word _pxt_iface_member_names\n    .word _pxt_lambda_trampoline@fn\n    .word _pxt_perf_counters\n    .word _pxt_restore_exception_state@fn\n    .word ${e.emitString(e.getTitle())} ; name\n`,i=null;i=new t.ThumbSnippets;const l=e.setPerfCounters(a);e.procs.forEach((n=>{let o=new t.ProctoAssembler(i,e,n);r+="\n"+o.getAssembly()+"\n"}));let c=new t.ProctoAssembler(i,e,null);c.emitHelpers(),r+="\n"+c.getAssembly()+"\n",r+=n.asmTotalSource,r+="_code_end:\n\n",t.U.iterMap(e.codeHelpers,((e,t)=>{r+=`    .section code\n${t}:\n${e}\n`})),r+=i.arithmetic(),r+="_helpers_end:\n\n",e.usedClassInfos.forEach((t=>{r+=s(t,0,e)})),r+="\n.balign 4\n_pxt_iface_member_names:\n",r+=`    .word ${e.ifaceMembers.length}\n`;let u=0;for(let t of e.ifaceMembers){let n=e.emitString(t);r+=`    .word ${n}  ; ${u++} .${t}\n`}r+="    .word 0\n",r+="_vtables_end:\n\n",r+="\n.balign 4\n_pxt_config_data:\n";const p=e.res.configData||[];for(let e of p)r+=`    .word ${e.key}, ${e.value}  ; ${e.name}=${e.value}\n`;r+="    .word 0\n\n",function(e,n){const o=t.U.unique(n.ifaceMembers.concat(Object.keys(n.strings)),(e=>e));for(let t of o)n.otherLiterals.push(e.string_literal(n.strings[t],t));for(let t of Object.keys(n.doubles)){let o=n.doubles[t];n.otherLiterals.push(`\n.balign 4\n${o}: ${e.obj_header("pxt::number_vt")}\n        .hex ${t}\n`)}for(let t of Object.keys(n.hexlits))n.otherLiterals.push(e.hex_literal(n.hexlits[t],t)),n.otherLiterals.push()}(i,e),r+=e.otherLiterals.join(""),r+="\n.balign 4\n.section code\n_pxt_perf_counters:\n",r+=`    .word ${l.length}\n`;let d="";for(let e=0;e<l.length;++e){let t=".perf"+e;r+=`    .word ${t}\n`,d+=`${t}: .string ${JSON.stringify(l[e])}\n`}return r+=d,r+="_literals_end:\n",r}function c(e){let o;return o=e.nativeType==t.NATIVE_TYPE_VM?new t.assembler.VMFile(new t.vm.VmProcessor(e)):new t.assembler.File(new t.thumb.ThumbProcessor),o.ei.testAssembler(),e.switches.noPeepHole&&(o.disablePeepHole=!0),o.lookupExternalLabel=n.lookupFunctionAddr,o.normalizeExternalLabel=e=>{let t=n.lookupFunc(e);return t?t.name:e},o}function u(e){if(e.errors.length>0){let n="";throw e.errors.forEach((e=>{let o=/^user(\d+)/.exec(e.scope);if(o){parseInt(o[1]);n+=t.U.lf("At inline assembly:\n"),n+=e.message}})),n?(console.log(t.U.lf("errors in inline assembly")),console.log(n),new Error(e.errors[0].message)):new Error(e.errors[0].message)}}t.processorInlineAssemble=function(e,t){let n=c(e);n.disablePeepHole=!0,n.emit(t),u(n);let o=[];for(let e=0;e<n.buf.length;e+=2)o.push(((n.buf[e+1]||0)<<16|n.buf[e])>>>0);return o};function p(e,t,n){let o=c(e);return o.emit(n),n=`; Interface tables: ${t.itFullEntries}/${t.itEntries} (${Math.round(100*t.itFullEntries/t.itEntries)}%)\n; Virtual methods: ${t.numVirtMethods} / ${t.numMethods}\n`+o.getSource(!0,t.numStmts,e.flashEnd),u(o),{src:n,buf:o.buf,thumbFile:o}}function d(o,r,i,s){const a=i.extinfo.disabledDeps;o=a?`${n.hexPrelude()}\n; compilation disabled on this variant due to ${i.extinfo.disabledDeps}\n.hex 718E3B92C615A841C49866C975EE5197\n.string "${i.extinfo.disabledDeps}"`:`; start\n${n.hexPrelude()}\n    .hex 708E3B92C615A841C49866C975EE5197 ; magic number\n    .hex ${n.hexTemplateHash()} ; hex template hash\n    .hex 873266330af9dbdb ; replaced in binary by program hash\n`+o,i.embedBlob&&(r.packedSource=function(e,n){let o=t.Util.toUTF8(e),r=(o.length,n.length,"A//");return r+=t.U.uint8ArrayToString([255&o.length,o.length>>8,255&n.length,n.length>>8,0,0,0,0]),r+=o,r+=n,r.length%2&&(r+="\0"),r}(i.embedMeta,e.pxtc.decodeBase64(i.embedBlob)),!r.target.noSourceInFlash&&r.packedSource.length<4e4&&(o+=function(e){let t="";for(let n=0;n<e.length;++n){let o=255&e.charCodeAt(n);t+=o<=15?"0"+o.toString(16):o.toString(16)}return`\n    .balign 16\n_stored_program: .hex ${t}\n`}(r.packedSource),r.packedSource=null));const l=n.flashCodeAlign(i.target);if(!a&&i.target.flashChecksumAddr){let e=0;for(;l>1<<e;)e++;let t=parseInt(n.hexTemplateHash().slice(8,16),16);const r=n.getStartAddress()/l;t=4294967040&t|e;let s=0,a=r;i.target.flashChecksumAddr<n.getStartAddress()&&(s=Math.ceil((i.target.flashChecksumAddr+32)/l),a-=s),o+=`\n    .balign 4\n__end_marker:\n    .word ${t}\n\n; ------- this will get removed from the final binary ------\n__flash_checksums:\n    .word 0x87eeb07c ; magic\n    .word __end_marker ; end marker position\n    .word ${t} ; end marker\n    ; template region\n    .short ${s}, ${a}\n    .word 0x${n.hexTemplateHash().slice(0,8)}\n    ; user region\n    .short ${r}, 0xffff\n    .hex 87326633 ; replaced later\n    .word 0x0 ; terminator\n`}const c=i.extinfo.outputPrefix||"";r.writeFile(c+t.BINARY_ASM,o);const u=p(i.target,r,o);if(u.thumbFile.commPtr&&(r.commSize=u.thumbFile.commPtr-n.getCommBase()),u.src&&r.writeFile(c+t.BINARY_ASM,u.src),a)return void g();const d=s.configData||[];if(d.some((e=>"BOOTLOADER_BOARD_ID"==e.name))){let e="const uint32_t configData[] = {\n";e+="    0x1e9e10f1, 0x20227a79, // magic\n",e+=`    ${d.length}, 0, // num. entries; reserved\n`;for(let t of d)e+=`    ${t.key}, 0x${t.value.toString(16)}, // ${t.name}\n`;e+="    0, 0\n};\n",r.writeFile(c+"config.c",e)}if(u.buf){const e=u.buf;let n="";for(let t=0;t<e.length;++t)n+=String.fromCharCode(255&e[t],e[t]>>8);const o=t.U.sha256(n).slice(0,16),s=t.U.range(4).map((e=>parseInt(o.slice(2*e,2*e+2),16)));t.U.assert(12935==e[12]);for(let t=0;t<s.length;++t)e[12+t]=s[t];if(i.target.flashChecksumAddr){let n=u.thumbFile.lookupLabel("__flash_checksums")/2;t.U.assert(n==e.length-16);let o=e.slice(e.length-16);e.splice(e.length-16,16);let i=Math.ceil(2*e.length/l);t.U.assert(12935==o[o.length-4]),o[o.length-4]=s[0],o[o.length-3]=s[1],o[o.length-5]=i,r.checksumBlock=o}g()}if(!s.procDebugInfo){for(let e of s.breakpoints){let n=t.U.lookup(u.thumbFile.getLabels(),"__brkp_"+e.id);null!=n&&(e.binAddr=n)}for(let e of r.procs)e.fillDebugInfo(u.thumbFile);if(s.procDebugInfo=r.procs.map((e=>e.debugInfo)),r.target.switches.size){const n=[];for(const o of r.procs){const r=e.pxtc.nodeLocationInfo(o.action),i=[r.fileName.replace("pxt_modules/",""),t.getDeclName(o.action),o.debugInfo.size,"function",r.line+1];n.push(i.map((e=>`"${e}"`)).join(","))}n.sort(),n.unshift("filename,name,size,type,line"),r.writeFile(c+"size.csv",n.join("\n"))}}function g(){if(pxt.isOutputText(t.target)){const e=n.patchHex(r,u.buf,!1,!1).join("\r\n")+"\r\n";r.writeFile(c+pxt.outputName(t.target),e)}else{const o=e.pxtc.encodeBase64(n.patchHex(r,u.buf,!1,!!t.target.useUF2)[0]);r.writeFile(c+pxt.outputName(t.target),o)}}}t.assemble=p,t.processorEmit=function(e,o,r){const i=l(e),s=t.U.flatClone(o);n.setupFor(o.target,o.extinfo||t.emptyExtInfo()),d(i,e,o,r);const a=s.otherMultiVariants||[];if(a.length)try{for(let o of a){const a=t.U.flatClone(s);a.extinfo=o.extinfo,o.target.isNative=!0,a.target=o.target,n.setupFor(a.target,a.extinfo),d(i,e,a,r)}}finally{n.setupFor(s.target,s.extinfo)}},t.validateShim=n.validateShim}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){e.getHelpForKeyword=function(e,t){const n={abstract:null,any:null,as:null,break:null,case:null,catch:null,class:null,continue:null,const:null,constructor:null,debugger:null,declare:null,delete:null,do:null,else:null,enum:null,export:null,extends:null,false:lf("Represents the negative outcome of a logical expression"),finally:null,for:null,from:null,function:null,get:null,if:null,implements:null,in:null,instanceof:null,interface:null,is:null,let:null,namespace:null,new:null,null:null,private:null,protected:null,public:null,return:null,set:null,static:null,super:null,switch:null,this:null,throw:null,true:lf("Represents the positive outcome of a logical expression"),try:null,type:null,typeof:null,undefined:null,void:null,while:null,with:null,of:null};if(t){return{True:n.true,False:n.false,None:null,abs:null,all:null,any:null,ascii:null,bin:null,bool:null,bytearray:null,bytes:null,callable:null,chr:null,classmethod:null,compile:null,complex:null,copyright:null,credits:null,delattr:null,dict:null,dir:null,divmod:null,enumerate:null,eval:null,exec:null,exit:null,filter:null,float:null,format:null,frozenset:null,getattr:null,globals:null,hasattr:null,hash:null,help:null,hex:null,id:null,input:null,int:null,isinstance:null,issubclass:null,iter:null,len:null,license:null,list:null,locals:null,map:null,max:null,memoryview:null,min:null,next:null,object:null,oct:null,open:null,ord:null,pow:null,print:null,property:null,quit:null,range:null,repr:null,reversed:null,round:null,set:null,setattr:null,slice:null,sorted:null,staticmethod:null,str:null,sum:null,super:null,tuple:null,type:null,vars:null}[e]}return n[e]}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){e.LSHost=class{constructor(e){this.p=e}getCompilationSettings(){const e=this.p.getCompilerOptions();return e.noLib=!0,e}getNewLine(){return"\n"}getScriptFileNames(){return this.p.getSourceFiles().map((e=>e.fileName))}getScriptVersion(e){return"0"}getScriptSnapshot(e){const t=this.p.getSourceFile(e);return{getLength:()=>t.getFullText().length,getText:()=>t.getFullText(),getChangeRange:()=>{}}}getCurrentDirectory(){return"."}getDefaultLibFileName(e){return""}useCaseSensitiveFileNames(){return!0}}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){!function(n){function o(e){var t,o;const r=null===(o=null===(t=null==e?void 0:e.pxt)||void 0===t?void 0:t.callInfo)||void 0===o?void 0:o.qName;return n.lastApiInfo.apis.byQName[r]}function r(e,t,o){if(!e||t<0)return;let r=e.parameters[t];if(e.attributes._def){const i=e.attributes._def.parameters[t].shadowBlockId;if(i){const e=o.blocksById[i],t=n.lastApiInfo.apis.byQName[e.qName];"TD_ID"===t.attributes.shim&&1===t.parameters.length&&(r=t.parameters[0])}}return r}function i(o,r,i,s,a=!1){const l={};s.forEach((e=>{var t,n;let o=e.symbol.retType;if(a)if(7==e.symbol.kind)o=e.symbol.namespace;else if(4==e.symbol.kind){const r=null===(n=null===(t=e.symbol.attributes)||void 0===t?void 0:t.enumIdentity)||void 0===n?void 0:n.split(".");(null==r?void 0:r.length)>1&&(o=r[0])}l[o]=[...l[o]||[],e]}));const c=l[o]||[];let u=[];for(let o of c){const s=f(o.symbol,r,e.SymbolFlags.Enum);if(s){const e=i.getTypeOfSymbolAtLocation(s,r),o=t.getEnumMembers(i,e).map((e=>t.enumMemberToQName(i,e))).map((e=>n.lastApiInfo.apis.byQName[e]));u=[...u,...o]}}return[...c,...d(u,1)]}function s(t){return t.flags&e.SymbolFlags.Variable?4:t.flags&e.SymbolFlags.Class?8:t.flags&e.SymbolFlags.Enum?6:t.flags&e.SymbolFlags.EnumMember?7:t.flags&e.SymbolFlags.Method?1:t.flags&e.SymbolFlags.Module?5:t.flags&e.SymbolFlags.Property?2:0}function a(e){return{kind:0,name:e,pyName:e,qName:e,pyQName:e,namespace:"",attributes:{callingConvention:0,paramDefl:{}},fileName:pxt.MAIN_TS,parameters:[],retType:"any"}}function l(e,t){var n,o;let r=e.getName(),i=/(.*)\.(.*)/.exec(r),a=i?i[2]:r,l=i?i[1]:"",c=null!==(o=null===(n=t.getSymbol())||void 0===n?void 0:n.getName())&&void 0!==o?o:"any";return{kind:s(e),name:a,pyName:a,qName:r,pyQName:r,namespace:l,attributes:{callingConvention:0,paramDefl:{}},fileName:pxt.MAIN_TS,parameters:[],retType:c}}function c(e,t,n){if(e)return t.byQName[n.getFullyQualifiedName(e)]}function u(e,n){return e.weight!==n.weight?n.weight-e.weight:t.compareSymbols(e.symbol,n.symbol)}function p(e,t){return{symbol:e,weight:t}}function d(e,t){return e.map((e=>p(e,t)))}function g(t,n){var o;if(t.flags&e.TypeFlags.NumberLiteral)return"Number";if(t.flags&e.TypeFlags.StringLiteral)return"String";if(t.flags&e.TypeFlags.BooleanLiteral)return"Boolean";const r=n.typeToString(t);return null!==(o={number:"Number",string:"String",boolean:"Boolean"}[r])&&void 0!==o?o:r}function h(e,t){return"."===t.charAt(0)&&(t=t.substr(1)),e.substr(0,e.lastIndexOf(".")+1)+t}function f(e,t,o){const r=n.service&&n.service.getProgram().getTypeChecker();if(!r)return null;const i=r.getSymbolsInScope(t,o);for(let t of i)if(t.escapedName.toString()===e.qName)return t;return null}function _({symbol:e}){return!(/^__/.test(e.name)||/^__/.test(e.namespace)||e.attributes.hidden||e.attributes.deprecated||"TD_ID"==e.attributes.shim||e.attributes.blockAliasFor)}n.getCallSymbol=o,n.getParameter=r,n.getApisForTsType=i,n.getBasicKindDefault=function(e,n){switch(e){case t.SK.StringKeyword:return'""';case t.SK.NumberKeyword:return"0";case t.SK.BooleanKeyword:return n?"False":"false";case t.SK.ArrayType:return"[]";case t.SK.NullKeyword:return n?"None":"null";default:return}},n.tsSymbolToPxtSymbolKind=s,n.makePxtSymbolFromKeyword=a,n.makePxtSymbolFromTsSymbol=l,n.getPxtSymbolFromTsSymbol=c,n.compareCompletionSymbols=u,n.completionSymbol=p,n.completionSymbols=d,n.getNodeAndSymbolAtLocation=function(e,n,o,r){const i=e.getSourceFile(n),s=e.getTypeChecker(),a=t.findInnerMostNodeAtPosition(i,o);if(a){const e=s.getSymbolAtLocation(a);if(e){return[a,c(e,r,s)]}}return null},n.tsTypeToPxtTypeString=g,n.filenameWithExtension=h,n.getWordAtPosition=function(e,t){let n=t,o=t;for(;n>0&&r(n);)--n;for(;o<e.length-1&&r(o);)++o;return n!=o?{text:e.substring(n+1,o),start:n+1,end:o}:null;function r(t){const n=e.charCodeAt(t);return n>=65&&n<=90||n>=97&&n<=122}},n.getTsSymbolFromPxtSymbol=f,n.getDefaultEnumValue=function(e,o){const r=n.service&&n.service.getProgram().getTypeChecker(),i=t.getEnumMembers(r,e);for(const e of i)if(e.name.kind===t.SK.Identifier){const i=t.enumMemberToQName(r,e),s=n.lastApiInfo.apis.byQName[i];return s?s.attributes.alias?o&&s.attributes.pyAlias||s.attributes.alias:o?s.pyQName:s.qName:i}return"0"},n.getCompletions=function(s){var f,m;const{fileName:y,fileContent:k,position:b,wordStartPos:v,wordEndPos:T,runtime:E}=s;let S=k;k&&n.host.setFile(y,k);const C=h(y,"ts"),x={startPos:v,endPos:T},B=/\.py$/.test(y),A={entries:[],isMemberCompletion:!1,isNewIdentifierLocation:!0,isTypeLocation:!1,namespace:[]};let I=S.lastIndexOf("\n",b-1);I=Math.max(0,I);const D=S.substring(I+1,b),N=B?"#":"//";if(D.trim().startsWith(N))return A;let w=-1,R=-1;for(let e=b-1;e>=0;--e){if("."==S[e]){w=e;break}if(!/\w/.test(S[e]))break;-1==R&&(R=e)}w==b-1?S=S.slice(0,b)+"_"+S.slice(b):-1==R&&(S=S.slice(0,b)+"_"+S.slice(b),R=b);const O=-1!==w;A.isMemberCompletion=O;const P=O?S.slice(w+1,T):S.slice(v,T);O&&(R=w);const L={};let M=n.cloneCompileOpts(n.host.opts);M.fileSystem[y]=S,n.addApiInfo(M),M.syntaxInfo={position:R,type:A.isMemberCompletion?"memberCompletion":"identifierCompletion"};let F,U=[];if(B){const e=t.transpile.pyToTs(M);if(e.syntaxInfo&&e.syntaxInfo.symbols&&(U=d(e.syntaxInfo.symbols,1)),e.globalNames&&(n.lastGlobalNames=e.globalNames),!U.length&&e.globalNames&&(U=d(pxt.U.values(e.globalNames),1)),Object.keys(e.outfiles).forEach((t=>{t===C&&n.host.setFile(t,e.outfiles[t])})),e.sourceMap){const n=S,o=e.outfiles[C]||"",r=t.BuildSourceMapHelpers(e.sourceMap,o,n).py.smallestOverlap(x);r&&(F=r.ts.startPos)}!O&&U.length>50&&(U=U.filter((e=>(B?e.symbol.pyQName:e.symbol.qName).toLowerCase().indexOf(P.toLowerCase())>=0))),M.ast=!0;t.compile(M,n.service)}else{F=b,M.ast=!0,n.host.setOpts(M);n.runConversionsAndCompileUsingService()}const H=n.service.getProgram(),V=H.getSourceFile(C),G=H.getTypeChecker();let W=t.findInnerMostNodeAtPosition(V,F);if(t.decompiler.buildCommentMap(V).some((e=>e.start<=b&&b<=e.end)))return A;if(W){if([t.SK.StringLiteral,t.SK.FirstTemplateToken,t.SK.NoSubstitutionTemplateLiteral].some((e=>W.kind===e)))return A}A.namespace=t.getCurrentNamespaces(W);let K=!1;if(O){const e=t.findInnerMostNodeAtPosition(V,B?F:w-1);if(e){let t;const o=G.getSymbolAtLocation(e);if(t=(null===(f=null==o?void 0:o.members)||void 0===f?void 0:f.size)>0?G.getDeclaredTypeOfSymbol(o):o?G.getTypeOfSymbolAtLocation(o,e):G.getTypeAtLocation(e),t){const e=t.symbol?G.getFullyQualifiedName(t.symbol):g(t,G);if(e){U=t.getApparentProperties().map((t=>e+"."+t.getName())).map((e=>n.lastApiInfo.apis.byQName[e])).filter((e=>!!e)).map((e=>p(e,1))),K=!0}}}}const j=pxt.U.values(n.lastApiInfo.apis.byQName);if(0===U.length){U=d(j.filter((e=>(B?e.pyQName:e.qName).toLowerCase().indexOf(P.toLowerCase())>=0)),1)}if(!B&&!K){W=t.findInnerMostNodeAtPosition(V,v),W||(W=V.getSourceFile());let o=e.SymbolFlags.Variable,r=G.getSymbolsInScope(W,o),i=W.getText();"_"!==i&&(r=r.filter((e=>e.name.indexOf(i)>=0)));let s=r.map((e=>{let t=c(e,n.lastApiInfo.apis,G);if(!t){t=l(e,G.getTypeOfSymbolAtLocation(e,W))}return t})).filter((e=>!!e)).map((e=>p(e,1)));s.forEach((e=>e.weight+=5)),U=[...U,...s]}const z=t.getParentCallExpression(W);if(z){let e=t.findCurrentCallArgIdx(z,W,F);if(e>=0){const t=n.blocksInfoOp(n.lastApiInfo.apis,E.bannedCategories),s=o(z);if(s){e>=s.parameters.length&&(e=s.parameters.length-1);const n=r(s,e,t);if(n){i(n.type,z,G,U,n.isEnum).forEach((e=>e.weight=10))}}}}if(!O){let e;if(B){let t=pxt.py.keywords;e=Object.keys(t)}else e=[...ts.pxtc.reservedWords,...ts.pxtc.keywordTypes];let t=e.filter((e=>e.indexOf(P)>=0)).map(a).map((e=>p(e,0)));U=[...U,...t]}let $={};$=B&&n.lastGlobalNames?n.lastGlobalNames:n.lastApiInfo.apis.byQName,U.map((e=>!e.symbol.attributes.alias||O&&7===e.symbol.kind?e:p(n.lastApiInfo.apis.byQName[e.symbol.attributes.alias],e.weight))).filter(_).forEach((e=>{L[e.symbol.qName]=e})),U=pxt.Util.values(L).filter((e=>!!e&&!!e.symbol)),U.sort(u),s.light&&U.length>100&&(U=U.splice(0,100));const{bannedCategories:X,screenSize:Y}=s.runtime,J={takenNames:$,blocksInfo:n.blocksInfoOp(n.lastApiInfo.apis,X),screenSize:Y,apis:n.lastApiInfo.apis,checker:null===(m=null===n.service||void 0===n.service?void 0:n.service.getProgram())||void 0===m?void 0:m.getTypeChecker()};return U.forEach((t=>function(t,o,r){const i=n.lastApiInfo.decls[t.qName];if(e.isFunctionLike(i)&&(t.snippetAddsDefinitions||o&&!t.pySnippet||!o&&!t.snippet)){const e=n.getSnippet(r,t,i,o),s=n.snippetStringify(e),a=n.snippetStringify(e,!0),l=n.snippetAddsDefinitions(e);o?(t.pySnippet=s,t.pySnippetWithMarkers=a):(t.snippet=s,t.snippetWithMarkers=a),t.snippetAddsDefinitions=l}}(t.symbol,B,J))),A.entries=U.map((e=>e.symbol)),A}}(t.service||(t.service={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){let n=function(t){let n=r(t);e.sys.write(n)};function o(e){for(const t of e)n(t)}function r(n){let o;if(void 0!==n.file){let t=n;const{line:r,character:i}=e.getLineAndCharacterOfPosition(t.file,t.start),s=t.file.fileName;o=Object.assign({fileName:s,line:r,column:i},t)}else o=Object.assign({fileName:void 0,line:void 0,column:void 0},n);return function(n){let o="";n.fileName&&(o+=`${n.fileName}(${n.line+1},${n.column+1}): `);let r=e.sys?e.sys.newLine:"\n";const i=t.DiagnosticCategory[n.category].toLowerCase();return o+=`${i} TS${n.code}: ${t.flattenDiagnosticMessageText(n.messageText,r)}${r}`,o}(o)}function i(t,n){const o=e.createCompilerHost(n);return o.getDefaultLibFileName=()=>"node_modules/pxt-core/pxtcompiler/ext-typescript/lib/lib.d.ts",e.createProgram(t,n,o)}function s(e){let n=e.getSyntacticDiagnostics();return 0===n.length&&(n=e.getOptionsDiagnostics().concat(t.Util.toArray(e.getGlobalDiagnostics())),0===n.length&&(n=e.getSemanticDiagnostics())),n.slice(0)}t.getDiagnosticString=r,t.plainTscCompileDir=function(t){const r=e.parseCommandLine([]);let a=e.findConfigFile(t,e.sys.fileExists);const l=function(){let n=e.sys.readFile(a);const i=e.parseConfigFileTextToJson(a,n),s=i.config;if(!s)return o([i.error]),void e.sys.exit(e.ExitStatus.DiagnosticsPresent_OutputsSkipped);const l=e.parseJsonConfigFileContent(s,e.sys,t,r.options,a);if(l.errors.length>0)return o(l.errors),void e.sys.exit(e.ExitStatus.DiagnosticsPresent_OutputsSkipped);return l}();let c=i(l.fileNames,l.options);return s(c).forEach(n),c},t.plainTscCompileFiles=i,t.getProgramDiagnostics=s}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){function n(t){if(!t||!t.kind)return null;switch(t.kind){case e.SyntaxKind.StringKeyword:return"str";case e.SyntaxKind.NumberKeyword:return"number";case e.SyntaxKind.BooleanKeyword:return"bool";case e.SyntaxKind.VoidKeyword:return"None";case e.SyntaxKind.FunctionType:return function(e){let t=n(e.type);return`(${e.parameters.map((e=>e.type)).map(n).join(", ")}) -> ${t}`}(t);case e.SyntaxKind.ArrayType:return`List[${n(t.elementType)}]`;case e.SyntaxKind.TypeReference:{let e=t;return e.typeName&&e.typeName.getText?e.typeName.getText():""}case e.SyntaxKind.AnyKeyword:return"any";default:return pxt.tickEvent("depython.todo.tstypenodetopytype",{kind:t.kind}),""}}function o(t){if(!t||!t.flags)return null;switch(t.flags){case e.TypeFlags.String:return"str";case e.TypeFlags.Number:return"number";case e.TypeFlags.Boolean:return"bool";case e.TypeFlags.Void:return"None";case e.TypeFlags.Any:return"any";default:return pxt.tickEvent("depython.todo.tstypetopytype",{kind:t.flags}),""}}function r(r,i,s){function a(t,n,o=!1){let i=r.getTypeAtLocation(n);if(!i)return"None";o&&(i=i.getCallSignatures()[0].getReturnType());const s=r.typeToString(i,void 0,e.TypeFormatFlags.UseFullyQualifiedType);return/^\d/.test(s)?"number":"this"==s?c(r,i.symbol):s}let l=function(e){switch(e.kind){case t.SK.MethodDeclaration:case t.SK.MethodSignature:return 1;case t.SK.PropertyDeclaration:case t.SK.PropertySignature:case t.SK.GetAccessor:case t.SK.SetAccessor:return 2;case t.SK.Constructor:case t.SK.FunctionDeclaration:return 3;case t.SK.VariableDeclaration:return 4;case t.SK.ModuleDeclaration:return 5;case t.SK.EnumDeclaration:return 6;case t.SK.EnumMember:return 7;case t.SK.ClassDeclaration:return 8;case t.SK.InterfaceDeclaration:return 9;default:return 0}}(s);if(0!=l){let c=s,u=t.parseComments(c);if(u.weight<0)return null;let p,d=/^(.*)\.(.*)/.exec(i),g=3==l||1==l,h=null,f=null,_=e.getSourceFileOfNode(s);if(_){let e=/^pxt_modules\/([^\/]+)/.exec(_.fileName);e&&(h=e[1])}if(8==l||9==l){let e=s;if(p=[],e.heritageClauses)for(let t of e.heritageClauses)if(t.types)for(let e of t.types)p.push(a(0,e))}6!=l&&7!==l||(p||(p=[])).push("Number");let m={kind:l,qName:i,namespace:d?d[1]:"",name:d?d[2]:i,fileName:s.getSourceFile().fileName,attributes:u,pkg:h,pkgs:f,extendsTypes:p,retType:s.kind==e.SyntaxKind.Constructor?"void":5==l?"":a(c.type,c,g),parameters:g?t.Util.toArray(c.parameters).map(((i,s)=>{let l,c,p=t.getName(i),d=u.paramHelp[p]||"",g=u.paramMin&&u.paramMin[p],h=u.paramMax&&u.paramMax[p];/\beg\.?:\s*(.+)/.exec(d);if(i.type&&i.type.kind===t.SK.FunctionType){const n=r.getSignatureFromDeclaration(i.type).getParameters();"objectdestructuring"===u.mutate?(t.assert(n.length>0),l=r.getTypeAtLocation(n[0].valueDeclaration).getProperties().map((e=>({name:e.getName(),type:r.typeToString(r.getTypeOfSymbolAtLocation(e,n[0].valueDeclaration))})))):c=n.map(((t,n)=>({name:t.getName(),type:r.typeToString(r.getTypeOfSymbolAtLocation(t,i),void 0,e.TypeFormatFlags.UseFullyQualifiedType)})))}let f={};const _=r.getTypeAtLocation(i);let m=_&&!!(_.flags&(e.TypeFlags.Enum|e.TypeFlags.EnumLiteral));if(u.block&&u.paramShadowOptions){const e=[];u.block.replace(/%(\w+)/g,((t,n)=>(e.push(n),""))),u.paramShadowOptions[e[s]]&&(f.fieldEditorOptions={value:u.paramShadowOptions[e[s]]})}g&&(f.min={value:g}),h&&(f.max={value:h});const y=i.type&&n(i.type)||_&&o(_)||"unknown",k=i.initializer?i.initializer.getText():t.getExplicitDefault(u,p)||(i.questionToken?"undefined":void 0);return{name:p,description:d,type:a(i.type,i),pyTypeString:y,initializer:k,default:u.paramDefl[p],properties:l,handlerParameters:c,options:f,isEnum:m}})):null,snippet:e.isFunctionLike(s)?null:void 0};switch(m.kind){case 7:m.pyName=t.U.snakify(m.name).toUpperCase();break;case 4:case 1:case 2:case 3:m.pyName=t.U.snakify(m.name);break;case 6:case 8:case 9:case 5:default:m.pyName=m.name}return(s.kind===t.SK.GetAccessor||(s.kind===t.SK.PropertyDeclaration||s.kind===t.SK.PropertySignature)&&t.isReadonly(s))&&(m.isReadOnly=!0),m}return null}function i(e){return!!e.attributes.block&&!!e.attributes.blockId}let s;function a(e,n){function o(t){return-t(e)+t(n)}let r=o((e=>i(e)?1:-1));return r||(r=o((e=>e.namespace?-1:1)),r||(s||(s={},s[4]=100,s[5]=101,s[3]=99,s[2]=98,s[1]=97,s[8]=89,s[6]=81,s[7]=80),r=o((e=>s[e.kind]||0)),r||(r=o((e=>e.attributes.weight||50)),r||t.U.strcmp(e.name,n.name))))}function l(e,n,o=!1){const i={byQName:{},jres:n},s={},a=e.getTypeChecker(),l=e=>{var n,o;if(e.kind!=t.SK.VariableStatement){if(t.isExported(e)){if(!e.symbol)return void console.warn("no symbol",e);let l=c(a,e.symbol);e.kind==t.SK.SetAccessor&&(l+="@set"),s[l]=e;let u=r(a,l,e);if(u){let r=t.U.lookup(i.byQName,l);if(r)if(9==r.kind&&9!=u.kind)i.byQName[l+"@type"]=r;else if(9!=r.kind&&9==u.kind)i.byQName[l+"@type"]=u,u=r;else{const e=null===(n=r.attributes._source)||void 0===n?void 0:n.trim(),i=null===(o=u.attributes._source)||void 0===o?void 0:o.trim();let s=e+"\n"+i;e&&(null==i?void 0:i.indexOf(e))>=0?s=i:i&&(null==e?void 0:e.indexOf(i))>=0&&(s=e),u.attributes=t.parseCommentString(s),5===r.kind&&(u.pkgs=r.pkgs||[],r.pkg!==u.pkg&&(u.pkgs.find((e=>e===r.pkg))||u.pkgs.push(r.pkg))),r.extendsTypes&&(u.extendsTypes=u.extendsTypes||[],r.extendsTypes.forEach((e=>{-1===u.extendsTypes.indexOf(e)&&u.extendsTypes.push(e)})))}!e.parent||e.parent.kind!=t.SK.ClassDeclaration&&e.parent.kind!=t.SK.InterfaceDeclaration||t.isStatic(e)||(u.isInstance=!0),i.byQName[l]=u}}if(e.kind==t.SK.ModuleDeclaration){let n=e;if(n.body.kind==t.SK.ModuleBlock){n.body.statements.forEach(l)}else n.body.kind==t.SK.ModuleDeclaration&&l(n.body)}else if(e.kind==t.SK.InterfaceDeclaration){e.members.forEach(l)}else if(e.kind==t.SK.ClassDeclaration){e.members.forEach(l)}else if(e.kind==t.SK.EnumDeclaration){e.members.forEach(l)}}else{e.declarationList.declarations.forEach(l)}};for(let t of e.getSourceFiles())t.statements.forEach(l);let u=[];for(let e in i.byQName){let o=i.byQName[e];o.qName=e,o.attributes._source=null,o.extendsTypes&&o.extendsTypes.length&&u.push(o);let r=o.attributes.jres;if(r){"true"==r&&(r=e);let i=t.U.lookup(n||{},r);i&&i.icon&&!o.attributes.iconURL&&(o.attributes.iconURL=i.icon),i&&i.data&&!o.attributes.jresURL&&(o.attributes.jresURL="data:"+i.mimeType+";base64,"+i.data)}if(o.pyName){let e=t.U.lookup(t.ts2PyFunNameMap,o.qName);if(e&&e.n)o.pyQName=e.n,o.pySnippet=e.snippet,o.pySnippetName=e.n,o.pySnippetWithMarkers=void 0;else if(o.namespace){let e=i.byQName[o.namespace];e?o.pyQName=e.pyQName+"."+o.pyName:(pxt.log("namespace missing: "+o.namespace),o.pyQName=o.namespace+"."+o.pyName)}else o.pyQName=o.pyName}}let p={},d=e=>{if(t.U.lookup(p,e.qName))return;p[e.qName]=!0;let n={};n[e.qName]=!0;for(let t of e.extendsTypes||[]){n[t]=!0;let e=i.byQName[t];if(e){d(e);for(let t of e.extendsTypes)n[t]=!0}}e.extendsTypes=Object.keys(n)};return u.forEach(d),o&&delete i.byQName["Array.map"],{apis:i,decls:s}}function c(e,t){return t.isBogusSymbol?t.name:e.getFullyQualifiedName(t)}t.placeholderChar="",t.ts2PyFunNameMap={"Math.trunc":{n:"int",t:e.SyntaxKind.NumberKeyword,snippet:"int(0)"},"Math.min":{n:"min",t:e.SyntaxKind.NumberKeyword,snippet:"min(0, 0)"},"Math.max":{n:"max",t:e.SyntaxKind.NumberKeyword,snippet:"max(0, 0)"},"Math.abs":{n:"abs",t:e.SyntaxKind.NumberKeyword,snippet:"abs(0)"},"console.log":{n:"print",t:e.SyntaxKind.VoidKeyword,snippet:'print(":)")'},".length":{n:"len",t:e.SyntaxKind.NumberKeyword},".toLowerCase()":{n:"string.lower",t:e.SyntaxKind.StringKeyword},".toUpperCase()":{n:"string.upper",t:e.SyntaxKind.StringKeyword},".charCodeAt(0)":{n:"ord",t:e.SyntaxKind.NumberKeyword},"pins.createBuffer":{n:"bytearray",t:e.SyntaxKind.Unknown},"pins.createBufferFromArray":{n:"bytes",t:e.SyntaxKind.Unknown},"control.createBuffer":{n:"bytearray",t:e.SyntaxKind.Unknown},"control.createBufferFromArray":{n:"bytes",t:e.SyntaxKind.Unknown},"!!":{n:"bool",t:e.SyntaxKind.BooleanKeyword},"Array.indexOf":{n:"Array.index",t:e.SyntaxKind.Unknown},"Array.push":{n:"Array.append",t:e.SyntaxKind.Unknown},parseInt:{n:"int",t:e.SyntaxKind.NumberKeyword,snippet:'int("0")'},"_py.range":{n:"range",t:e.SyntaxKind.Unknown,snippet:"range(4)"}},t.emitPyTypeFromTypeNode=n,t.emitPyTypeFromTsType=o,t.genDocs=function(n,o,r={}){pxt.debug(`generating docs for ${n}`),pxt.debug(JSON.stringify(Object.keys(o.byQName),null,2));const i={},s=t.Util.values(o.byQName),l=s.filter((e=>7==e.kind)).sort(a),c={},u={},p={},d=t=>{if(r.locs&&t.qName&&!/^__/.test(t.name)){if(pxt.debug(`loc: ${t.qName}`),7!=t.kind){const n=e.pxtc.blocksCategory(t);n&&(u[`{id:category}${n}`]=n)}t.attributes.jsDoc&&(p[t.qName]=t.attributes.jsDoc),t.attributes.block&&(u[`${t.qName}|block`]=t.attributes.block),t.attributes.group&&(u[`{id:group}${t.attributes.group}`]=t.attributes.group),t.attributes.subcategory&&(u[`{id:subcategory}${t.attributes.subcategory}`]=t.attributes.subcategory),t.parameters&&t.parameters.filter((e=>!!e.description)).forEach((e=>{p[`${t.qName}|param|${e.name}`]=e.description}))}},g=(e,t)=>{if(!r.locs)return;const o={};Object.keys(e).sort().forEach((t=>o[t]=e[t])),i[n+t+"-strings.json"]=JSON.stringify(o,null,2)};for(const e of s){if(5==e.kind){if(!s.filter((t=>t.namespace==e.name&&!!t.attributes.jsDoc))[0])continue;e.attributes.block||(e.attributes.block=e.name)}d(e)}return r.locs&&l.forEach((e=>{e.attributes.block&&(u[`${e.qName}|block`]=e.attributes.block),e.attributes.jsDoc&&(u[e.qName]=e.attributes.jsDoc)})),g(u,""),g(p,"-jsdoc"),r.pxtsnippet&&(r.pxtsnippet.forEach((e=>function(e,t){const n=["label","title","hint","errorMessage"];t[e.label]=e.label,e.questions.forEach((e=>{n.forEach((n=>{e[n]&&(t[e[n]]=e[n])}))}))}(e,c))),g(c,"-snippet")),i},t.hasBlock=i,t.compareSymbols=a,t.getApiInfo=function(e,t,n=!1){return l(e,t,n).apis},t.internalGetApiInfo=l,t.getFullName=c}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){!function(n){let o,r,i={fileSystem:{},sourceFiles:[],target:{isNative:!1,hasHex:!1,switches:{}}};class s{constructor(){this.opts=i,this.fileVersions={},this.projectVer=0,this.pxtModulesOK=null}getProjectVersion(){return this.projectVer+""}setFile(e,t){this.opts.fileSystem[e]!=t&&(this.fileVersions[e]=(this.fileVersions[e]||0)+1,this.opts.fileSystem[e]=t,this.projectVer++)}reset(){this.setOpts(i),this.pxtModulesOK=null}setOpts(e){t.Util.iterMap(e.fileSystem,((e,t)=>{this.opts.fileSystem[e]!=t&&(this.fileVersions[e]=(this.fileVersions[e]||0)+1)})),this.opts=Object.assign(Object.assign({},e),{fileSystem:Object.assign({},e.fileSystem)}),this.projectVer++}getCompilationSettings(){return t.getTsCompilerOptions(this.opts)}getScriptFileNames(){return this.opts.sourceFiles.filter((e=>t.U.endsWith(e,".ts")))}getScriptVersion(e){return(this.fileVersions[e]||0).toString()}getScriptSnapshot(t){let n=this.opts.fileSystem[t];return null!=n?e.ScriptSnapshot.fromString(n):null}getNewLine(){return"\n"}getCurrentDirectory(){return"."}getDefaultLibFileName(e){return"no-default-lib.d.ts"}log(e){console.log("LOG",e)}trace(e){console.log("TRACE",e)}error(e){console.error("ERROR",e)}useCaseSensitiveFileNames(){return!0}}function a(e,o){return e?(n.lastLocBlocksInfo||(n.lastLocBlocksInfo=t.getBlocksInfo(e,o)),n.lastLocBlocksInfo):(n.lastBlocksInfo||(n.lastBlocksInfo=t.getBlocksInfo(n.lastApiInfo.apis,o)),n.lastBlocksInfo)}function l(e){return n.lastApiInfo||(n.lastApiInfo=t.internalGetApiInfo(n.service.getProgram(),e.jres)),n.lastApiInfo}function c(e){if(!e.apisInfo){const n=l(e);e.apisInfo=t.U.clone(n.apis)}}function u(e){let t=pxt.U.flatClone(e);return t.fileSystem=pxt.U.flatClone(t.fileSystem),t}n.blocksInfoOp=a,n.getLastApiInfo=l,n.addApiInfo=c,n.cloneCompileOpts=u,n.IsOpErr=function(e){return!!e.errorMessage};const p={reset:()=>{n.service=e.createLanguageService(n.host),n.lastApiInfo=void 0,n.lastGlobalNames=void 0,n.host.reset()},setOptions:e=>{n.host.setOpts(e.options)},syntaxInfo:e=>{var o,r,i;let s=e.fileContent;e.fileContent&&n.host.setFile(e.fileName,e.fileContent);let a=u(n.host.opts);a.fileSystem[e.fileName]=s,c(a),a.syntaxInfo={position:e.position,type:e.infoType};const p=a.target.preferredEditor==pxt.PYTHON_PROJECT_NAME,g="symbol"===a.syntaxInfo.type,h="signature"===a.syntaxInfo.type;if(p){let e=t.transpile.pyToTs(a);e.globalNames&&(n.lastGlobalNames=e.globalNames)}else{a.ast=!0,n.host.setOpts(a);d();const r=n.service.getProgram(),i=r.getSourceFile(e.fileName),s=r.getTypeChecker();if(g||h){let r=t.findInnerMostNodeAtPosition(i,e.position);if(r)if(g){const e=s.getSymbolAtLocation(r);if(e){let t=n.getPxtSymbolFromTsSymbol(e,a.apisInfo,s);a.syntaxInfo.symbols=[t],a.syntaxInfo.beginPos=r.getStart(),a.syntaxInfo.endPos=r.getEnd()}}else if(h){const n=null===(o=null==r?void 0:r.pxt)||void 0===o?void 0:o.callInfo;if(n){const o=a.apisInfo.byQName[n.qName];a.syntaxInfo.symbols=[o],a.syntaxInfo.beginPos=r.getStart(),a.syntaxInfo.endPos=r.getEnd();const i=t.getParentCallExpression(r);if(i){const n=t.findCurrentCallArgIdx(i,r,e.position);a.syntaxInfo.auxResult=n}}}}}if(g&&!(null===(r=a.syntaxInfo.symbols)||void 0===r?void 0:r.length)){const o=n.getWordAtPosition(e.fileContent,e.position);if(o)if(p&&"range"===o.text){const e=l(a).apis;e.byQName["_py.range"]&&(a.syntaxInfo.symbols=[e.byQName["_py.range"]],a.syntaxInfo.beginPos=o.start,a.syntaxInfo.endPos=o.end)}else{const e=t.getHelpForKeyword(o.text,p);e&&(a.syntaxInfo.auxResult={documentation:e,displayString:n.displayStringForKeyword(o.text,p)},a.syntaxInfo.beginPos=o.start,a.syntaxInfo.endPos=o.end)}}if(null===(i=a.syntaxInfo.symbols)||void 0===i?void 0:i.length){const e=l(a).apis;p&&(a.syntaxInfo.symbols=a.syntaxInfo.symbols.map((t=>e.byQName[t.qName]||t))),g&&(a.syntaxInfo.auxResult=a.syntaxInfo.symbols.map((t=>n.displayStringForSymbol(t,p,e))))}return a.syntaxInfo},getCompletions:e=>n.getCompletions(e),compile:e=>{n.host.setOpts(e.options);const o=d();return t.timesToMs(o),o},decompile:e=>(n.host.setOpts(e.options),t.decompile(n.service.getProgram(),e.options,e.fileName,!1)),pydecompile:e=>(n.host.setOpts(e.options),t.transpile.tsToPy(n.service.getProgram(),e.fileName)),decompileSnippets:e=>(n.host.setOpts(e.options),t.decompileSnippets(n.service.getProgram(),e.options,!1)),assemble:e=>({words:t.processorInlineAssemble(n.host.opts.target,e.fileContent)}),py2ts:e=>(c(e.options),t.transpile.pyToTs(e.options)),fileDiags:e=>t.patchUpDiagnostics(function(e){if(!/\.ts$/.test(e))return[];let t=n.service.getSyntacticDiagnostics(e);return t&&t.length||(t=n.service.getSemanticDiagnostics(e)),t||(t=[]),t}(e.fileName)),allDiags:()=>{let e=d();return t.timesToMs(e),n.host.opts.target.switches.time&&console.log("DIAG-TIME",e.times),e},format:e=>{const n=e.format;return t.format(n.input,n.pos)},apiInfo:()=>{if(n.lastBlocksInfo=void 0,o=void 0,n.host.opts!==i)return n.lastApiInfo=t.internalGetApiInfo(n.service.getProgram(),n.host.opts.jres),n.lastApiInfo.apis},snippet:t=>{const o=t.snippet;if(!n.lastApiInfo)return;const r=n.lastApiInfo.apis.byQName[o.qName],i=n.lastApiInfo.decls[o.qName];if(!r||!i||!e.isFunctionLike(i))return;const s=!!o.python;let l={};l=s&&n.lastGlobalNames?n.lastGlobalNames:n.lastApiInfo.apis.byQName;const{bannedCategories:c,screenSize:u}=t.runtime,{apis:p}=n.lastApiInfo,d={apis:p,blocksInfo:a(p,c),takenNames:l,bannedCategories:c,screenSize:u,checker:n.service&&n.service.getProgram().getTypeChecker()},g=n.getSnippet(d,r,i,s);return n.snippetStringify(g)},blocksInfo:e=>a(e,e.blocks&&e.blocks.bannedCategories),apiSearch:e=>{const t=e.search,r=a(t.localizedApis,e.blocks&&e.blocks.bannedCategories);t.localizedStrings&&pxt.Util.setLocalizedStrings(t.localizedStrings);const i=(e,t,n)=>{if(e)return"string"==typeof e?e:t?e[t]:Object.keys(e).map((t=>e[t])).join(" ")},s=e=>{var t;if(null===(t=e.attributes)||void 0===t?void 0:t._def){let t=[];const n=e.attributes._def,o=pxt.blocks.compileInfo(e);for(let e of n.parts)switch(e.kind){case"label":t.push(e.text);break;case"param":let n=o.definitionNameToParam[e.name];t.push((null==n?void 0:n.defaultValue)||e.varName||(null==n?void 0:n.actualName)||e.name)}return t.join(" ")}return e.attributes.block},l=e=>{var t;const n=null===(t=e.attributes)||void 0===t?void 0:t.paramHelp;return n&&Object.keys(n).map((e=>n[e])).join(" "),""};if(!n.builtinItems){n.builtinItems=[],n.blockDefinitions=pxt.blocks.blockDefinitions();for(const e in n.blockDefinitions){const t=n.blockDefinitions[e];if(t.operators)for(const o in t.operators){t.operators[o].forEach((r=>n.builtinItems.push({id:e,name:t.name,jsdoc:"string"==typeof t.tooltip?t.tooltip:t.tooltip[r],block:r,field:[o,r],builtinBlock:!0})))}else n.builtinItems.push({id:e,name:t.name,jsdoc:i(t.tooltip,t.tooltipSearch),block:i(t.block,t.blockTextSearch),builtinBlock:!0})}}let c;if(!o||t.subset){const e={};let i=[];t.subset&&(n.tbSubset=t.subset,i=n.builtinItems.filter((e=>!!n.tbSubset[e.id]))),n.tbSubset?c=r.blocks.filter((e=>!!n.tbSubset[e.attributes.blockId])):(c=r.blocks,i=n.builtinItems);let a=c.map((e=>({id:e.attributes.blockId,qName:e.qName,name:e.name,namespace:e.namespace,block:s(e),params:l(e),jsdoc:e.attributes.jsDoc,localizedCategory:n.tbSubset&&"string"==typeof n.tbSubset[e.attributes.blockId]?n.tbSubset[e.attributes.blockId]:void 0}))),u={};i.forEach((e=>u[e.id]=!0)),a=a.filter((e=>!(e.id in u)));let p=0;c.forEach((t=>{const n=e[t.qName]=(e=>{const t=e.attributes.weight||50,n=r.apis.byQName[e.namespace];return(1e3*(n&&n.attributes.weight||50)+t)*(n&&n.attributes.advanced||e.attributes.advanced?1:1e6)})(t);p=Math.max(p,n)})),a=a.concat(i);o=new Fuse(a,{shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:16,minMatchCharLength:2,findAllMatches:!1,caseSensitive:!1,keys:[{name:"name",weight:.3},{name:"namespace",weight:.1},{name:"localizedCategory",weight:.1},{name:"block",weight:.4375},{name:"params",weight:.0625},{name:"jsdoc",weight:.0625}],sortFn:function(t,n){const o=t.qName?1-e[t.item.qName]/p:1,r=n.qName?1-e[n.item.qName]/p:1;return t.score*(1+o/10)-n.score*(1+r/10)}})}return o.search(t.term).slice(0,7)},projectSearch:e=>{const t=e.projectSearch,n=t.headers;if(!r){r=new Fuse(n,{shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:16,minMatchCharLength:2,findAllMatches:!1,caseSensitive:!1,keys:[{name:"name",weight:.3}]})}return r.search(t.term)},projectSearchClear:()=>{r=void 0}};function d(){c(n.host.opts);const e=t.U.flatClone(n.host.opts.fileSystem);let o=t.runConversionsAndStoreResults(n.host.opts);(null==o?void 0:o.globalNames)&&(n.lastGlobalNames=o.globalNames);const r=n.host.opts.fileSystem;n.host.opts.fileSystem=e;for(let e of Object.keys(r))n.host.setFile(e,r[e]);if(0==o.diagnostics.length){n.host.opts.skipPxtModulesEmit=!1,n.host.opts.skipPxtModulesTSC=!1;const e=n.host.opts.target.isNative?"native":"js";!n.host.opts.target.switches.noIncr&&n.host.pxtModulesOK&&(n.host.opts.skipPxtModulesTSC=!0,n.host.opts.noEmit?n.host.opts.skipPxtModulesEmit=!0:n.host.opts.target.isNative?n.host.opts.skipPxtModulesEmit=!1:"js"!=n.host.pxtModulesOK||n.host.opts.breakpoints&&!n.host.opts.justMyCode||(n.host.opts.skipPxtModulesEmit=!0));let r=t.compile(n.host.opts,n.service);if(o=Object.assign({sourceMap:o.sourceMap},r),(o.needsFullRecompile||(!o.success||o.diagnostics.length)&&n.host.opts.clearIncrBuildAndRetryOnError)&&(pxt.debug("triggering full recompile"),pxt.tickEvent("compile.fullrecompile"),n.host.opts.skipPxtModulesEmit=!1,r=t.compile(n.host.opts,n.service),o=Object.assign({sourceMap:o.sourceMap},r)),o.diagnostics.every((e=>!t.isPxtModulesFilename(e.fileName)))&&(n.host.pxtModulesOK=e),o.ast){let e=t.internalGetApiInfo(o.ast);e&&(n.lastApiInfo=e)}}return o}n.runConversionsAndCompileUsingService=d,n.performOperation=function(t,o){n.service||(n.host=new s,n.service=e.createLanguageService(n.host));let r=null;if(p.hasOwnProperty(t))try{r=(0,p[t])(o)||{}}catch(e){r={errorMessage:e.stack}}else r={errorMessage:"No such operation: "+t};return r}}(t.service||(t.service={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){!function(n){function o(e){return"object"==typeof e&&void 0!==e.default}function r(e){return"object"==typeof e&&"number"==typeof e.length}function i(e,t=!1){const n={};let a=1;return function e(l){if(o(l)){if(t){if(s(l.default))return e(l.default);const t=i(l.default,!1);let o=n[t];if(o&&!l.isLiteral||(o=a,a++,n[t]=o),t.indexOf(".")>=0&&t.indexOf(" ")<0){let e=t.split(".");return e[e.length-1]="${"+o+":"+e[e.length-1]+"}",e.join(".")}return"${"+o+":"+t+"}"}return e(l.default)}return r(l)?l.map((t=>e(t))).join(""):l}(e)}function s(e){return!!o(e)||!!r(e)&&e.map(s).reduce(((e,t)=>e||t),!1)}function a(e){return e.attributes.shim&&"@"==e.attributes.shim[0]||e.attributes.pyConvertToTaggedTemplate}n.snippetStringify=i,n.snippetHasReplacementPoints=s,n.snippetAddsDefinitions=function e(t){return o(t)?t.isDefinition||e(t.default):!!r(t)&&t.map(e).reduce(((e,t)=>e||t),!1)},n.getSnippet=function o(r,s,l,c,u=0){var p;let{apis:d,takenNames:g,blocksInfo:h,screenSize:f,checker:_}=r;const m=pxt.py.INDENT,y=c?"python":"typescript";let k=s.namespace,b=!1,v=!1,T="",E=0,S=[];if(a(s))return c?`${s.name}(""" """)`:`${s.name}\`\``;let C="";C=l.kind==t.SK.Constructor?U(l.symbol)||l.parent.name.getText():U(l.symbol)||l.name.getText(),c&&(C=t.U.snakify(C));const x=s.attributes;if("TD_ID"===x.shim&&u&&l.parameters.length)return M(l.parameters[0]);const B=s,A=pxt.blocks.compileInfo(B),I=h.blocksById,D=(null===(p=x._def)||void 0===p?void 0:p.parameters.filter((e=>!!A.definitionNameToParam[e.name])).map((e=>A.definitionNameToParam[e.name].actualName)))||[],N=l.parameters?l.parameters.filter((e=>!e.initializer&&!e.questionToken||D.indexOf(e.name.getText())>=0)):[],w=N.map(M).map((e=>({default:e,isLiteral:!0})));if(B.attributes.block)if(B.attributes.defaultInstance)k=B.attributes.defaultInstance,c&&k&&(k=t.U.snakify(k));else if(B.namespace){const e=d.byQName[B.namespace];if(e.attributes.fixedInstances){let n,o=t.Util.values(d.byQName),r=function(e){return o.filter((e=>e.extendsTypes)).filter((t=>t.extendsTypes.reduce(((t,n)=>t||-1!=n.indexOf(e)),!1))).reduce(((e,t)=>e.concat(t.extendsTypes)),[])},i=o.filter((e=>4===e.kind&&e.attributes.fixedInstance));const s=i.filter((t=>t.retType==e.qName)).sort(((e,t)=>e.name.localeCompare(t.name)));if(s.length)n=s[0];else{n=i.filter((t=>-1!==r(e.qName).indexOf(t.retType))).sort(((e,t)=>e.name.localeCompare(t.name)))[0]}n?(k=`${H(n)}`,T=n.namespace):T=e.namespace,T&&(v=!0),b=!0}else if(1==B.kind||2==B.kind){if(A.thisParameter){let e;A.thisParameter.definitionName&&(e=A.thisParameter.definitionName,e=e[0].toUpperCase()+e.substring(1),e=`my${e}`),k=A.thisParameter.defaultValue||e,c&&k&&(k=t.U.snakify(k))}b=!0}else if(8===e.kind)return}const R=x&&(c?x.pySnippet:x.snippet);let O;if(R)O=[R];else if(O=[C],(null==w?void 0:w.length)||1==B.kind||3==B.kind||8==B.kind){const e=w.reduce(((e,t)=>[...e,e.length?", ":"",t]),[]);O=O.concat(["(",...e,")"])}let P=k?[k,".",...O]:O;if(P=v?[function(e){const t=e.indexOf(".");return t<0?e:e.substring(0,t)}(T),".",...P]:P,x&&x.blockSetVariable)if(c){P=[{default:L(t.U.snakify(x.blockSetVariable)),isDefinition:!0}," = ",...P]}else{P=["let ",{default:L(x.blockSetVariable),isDefinition:!0}," = ",...P]}return[S,P];function L(t){return g[t]?e.pxtc.decompiler.getNewName(t,g,!1):t}function M(i){var a;const l=i.type;if(!l)return c?"None":"null";const p=i.name.kind===t.SK.Identifier?i.name.text:void 0,g=null===(a=null==x?void 0:x.paramDefl)||void 0===a?void 0:a[p];if(g){let e;if(l.kind==t.SK.AnyKeyword){const n=g.toUpperCase();e=Number.isNaN(+n)?"FALSE"==n||"TRUE"==n?t.SK.BooleanKeyword:n.includes(".")?t.SK.EnumKeyword:t.SK.StringKeyword:t.SK.NumberKeyword}if(l.kind===t.SK.StringKeyword||e===t.SK.StringKeyword)return 0!=g.indexOf('"')?`"${g}"`:g;const o=null==_?void 0:_.getTypeAtLocation(i),r=n.getPxtSymbolFromTsSymbol(null==o?void 0:o.symbol,d,_);return(null==r?void 0:r.attributes.fixedInstances)&&c?pxt.Util.snakify(g):c?t.tsSnippetToPySnippet(g,r):g}let h=function(e){var t,n;const o=pxt.blocks.compileInfo(s),r=null===(t=o.parameters)||void 0===t?void 0:t.find((t=>t.actualName===e));if(!(null==r?void 0:r.shadowBlockId))return null;let i=I[r.shadowBlockId];if(!i)return null;const a=null===(n=i.attributes)||void 0===n?void 0:n.paramFieldEditor;if(!a)return null;const l=a[e];if(!l)return null;const c=i.attributes.paramFieldEditorOptions||{};switch(l){case"sprite":return function(e){const t={initColor:0,initWidth:16,initHeight:16};if(null==e?void 0:e.sizes){const n=e.sizes.split(";"),o=[];for(let e=0;e<n.length;e++){const t=n[e].split(",");if(2!==t.length)continue;let r=parseInt(t[0]),i=parseInt(t[1]);isNaN(r)||isNaN(i)||(r<0&&f&&(r=f.width),i<0&&f&&(i=f.height),o.push([r,i]))}o.length>0&&(t.initWidth=o[0][0],t.initHeight=o[0][1])}return t.initColor=n(null==e?void 0:e.initColor,t.initColor),t.initWidth=n(null==e?void 0:e.initWidth,t.initWidth),t.initHeight=n(null==e?void 0:e.initHeight,t.initHeight),pxt.sprite.imageLiteralFromDimensions(t.initWidth,t.initHeight,t.initColor,y);function n(e,t){const n=parseInt(e);return isNaN(n)?t:n}}(c[e])}return null}(p);if(h)return h;let m=function(e){let t=(x._shadowOverrides||{})[e];if(!t){const n=pxt.blocks.compileInfo(s);for(const o of n.parameters)if(o.actualName===e){t=o.shadowBlockId;break}}if(!t)return null;let n=I[t];if(!n)return null;if("TD_ID"===n.attributes.shim&&n.parameters.length){let e=n.parameters[0].type;n=d.byQName[e]||n}return n}(p);if(m){let a=n.getTsSymbolFromPxtSymbol(m,i,e.SymbolFlags.Enum);if(a){let e=_.getTypeOfSymbolAtLocation(a,i);if(e){let t=F(e);if(t)return t}}const l=m.attributes;if("KIND_GET"===l.shim&&l.blockId){const e=l.kindNamespace||s.namespace,n=t.Util.values(d.byQName).find((t=>t.namespace===e&&t.attributes.isKind));if(n)return c?n.pyQName:n.qName}if(u<3&&n.lastApiInfo.decls[m.qName]){let e=o(r,m,n.lastApiInfo.decls[m.qName],c,u+1);if(e)return e}}if(l.kind===t.SK.StringKeyword&&"leds"===p)return c?'"""\n. . . . .\n. . . . .\n. . # . .\n. . . . .\n. . . . .\n"""':"`\n. . . . .\n. . . . .\n. . # . .\n. . . . .\n. . . . .\n`";if(l.kind===t.SK.FunctionType){const e=l;let t=_?_.getSignatureFromDeclaration(e):void 0;return t?V(t,!0):G(p)}const k=n.getBasicKindDefault(l.kind,c);if(void 0!==k)return k;let b=_&&_.getTypeAtLocation(i);if(b){let e=F(b);if(e)return e}return c?"None":"null"}function F(o){if(o.symbol&&o.symbol.flags&e.SymbolFlags.Enum){return n.getDefaultEnumValue(o,c)}const r=n.getPxtSymbolFromTsSymbol(o.symbol,d,_);if(t.isObjectType(o)){const t=r&&r.attributes&&(c?r.attributes.pySnippet:r.attributes.snippet);if(t)return t;if(o.objectFlags&e.ObjectFlags.Anonymous){const t=_.getSignaturesOfType(o,e.SignatureKind.Call);return t&&t.length?V(t[0],!1):G()}}if(o.flags&e.TypeFlags.NumberLike)return"0";if(r&&r.attributes.fixedInstances){const e=function(e){return pxt.Util.values(d.byQName).filter((t=>4===t.kind&&t.attributes.fixedInstance&&function(e,t,n){if(t==n)return!0;let o=e.byQName[t];return!(!o||!o.extendsTypes)&&o.extendsTypes.indexOf(n)>=0}(d,t.retType,e.qName)))}(r);if(e.length){const t=e[0];return c?t.pyQName:t.qName}}}function U(e){if(_){const n=t.getFullName(_,e),o=d.byQName[n];if(o)return H(o)}}function H(e){return c?e.pyName:e.name}function V(n,o){let r="",s=_.getReturnTypeOfSignature(n);if(s.flags&e.TypeFlags.NumberLike?r="return 0":s.flags&e.TypeFlags.StringLike?r='return ""':s.flags&(e.TypeFlags.Boolean|e.TypeFlags.BooleanLiteral)&&(r=c?"return False":"return false"),c){let s;s=x.optionalVariableArgs?"()":`(${n.parameters.map((e=>e.name)).join(", ")})`;let a=C||"fn";E++>0&&(a+=E),o&&!/^on/i.test(a)&&(a="on"+pxt.Util.capitalize(a));const l=N.filter((t=>{const n=_&&_.getTypeAtLocation(t);return!!(n&&n.symbol&&n.symbol.flags&e.SymbolFlags.Enum)})).map((e=>{const t=i(M(e)).toLowerCase(),n=t.lastIndexOf(".");return-1!==n?t.substr(n+1):t})).join("_");return l&&(a+="_"+l),a=t.U.snakify(a),a=L(a),S=[...S,S.length?"\n":"","def ",{default:a,isDefinition:!0},s,`:\n${m}`,{default:r||"pass"},"\n"],{default:a}}{let t="()";if(!x.optionalVariableArgs){let o=e.mapToDisplayParts((t=>{_.getSymbolDisplayBuilder().buildSignatureDisplay(n,t,void 0,e.TypeFormatFlags.UseFullyQualifiedType)})),r=e.displayPartsToString(o);t=r.substr(0,r.lastIndexOf(":"))}return["function",t,` {\n${m}`,{default:r},"\n}"]}}function G(e){return c?(e=e||"fn",e=L(e=t.U.snakify(e)),S=[...S,S.length?"\n":"","def ",{default:e,isDefinition:!0},`():\n${m}`,{default:"pass"},"\n"],{default:e}):"function () {}"}},n.isTaggedTemplate=a}(t.service||(t.service={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){!function(e){const t=e=>`main.${e}`;e.pyToTs=function(e,n=t("py")){return pxt.py.py2ts(e)},e.tsToPy=function(e,n=t("ts")){return pxt.py.decompileToPython(e,n)}}(e.transpile||(e.transpile={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(t){let n;function o(e,t){if(!e)return;const r=t(e);if(r===n.Continue)return o(e.parent,t);if(r===n.Abort)return;if(r===n.Found)return e;return r}function r(t){return o(t,(t=>e.isModuleDeclaration(t)?n.Found:n.Continue))}t.getParentCallExpression=function(t){return o(t,(t=>e.isCallExpression(t)?n.Found:e.isBlock(t)?n.Abort:n.Continue))},t.findCurrentCallArgIdx=function(e,t,n){let o=e.arguments.map((e=>e===t)).indexOf(!0);if(o>=0)return o;if(!(e.arguments.pos<=n&&n<e.end))return-1;if(0===e.arguments.length)return 0;o=0;for(let t of e.arguments){if(!(t.end<=n))break;o++}return e.arguments.hasTrailingComma||(o=Math.max(0,o-1)),o},function(e){e[e.Found=0]="Found",e[e.Continue=1]="Continue",e[e.Abort=2]="Abort"}(n=t.TraverseCheck||(t.TraverseCheck={})),t.traverseUp=o,t.enumMemberToQName=function(e,n){if(n.name.kind===t.SK.Identifier)return e.getFullyQualifiedName(e.getSymbolAtLocation(n.name))},t.findInnerMostNodeAtPosition=function n(o,r){for(let t of o.getChildren()){if(t.kind>=e.SyntaxKind.FirstPunctuation&&t.kind<=e.SyntaxKind.LastPunctuation)continue;let o=t.getStart(),i=t.getEnd();if(o<=r&&r<i)return n(t,r)}return o&&o.kind===t.SK.SourceFile?null:o},t.getParentNamespace=r,t.getCurrentNamespaces=function e(t){if(!t)return[];let n=r(t);if(!n)return[];let o=n.name.getText();return[...e(n.parent),o]},t.getEnumMembers=function(e,n){if(e&&n.symbol&&n.symbol.declarations&&n.symbol.declarations.length)for(let e=0;e<n.symbol.declarations.length;e++){const o=n.symbol.declarations[e];if(o.kind===t.SK.EnumDeclaration){return o.members}}},t.isExported=function(e){if(e.modifiers&&e.modifiers.some((e=>e.kind==t.SK.PrivateKeyword||e.kind==t.SK.ProtectedKeyword)))return!1;let n=e.symbol;if(!n)return!1;for(;;){let e=n.parent;if(!e)break;n=e}let o=n.valueDeclaration||n.declarations[0];return o.kind==t.SK.VariableDeclaration&&(o=o.parent.parent),!(!o.parent||o.parent.kind!=t.SK.SourceFile)},t.isReadonly=function(e){return e.modifiers&&e.modifiers.some((e=>e.kind==t.SK.ReadonlyKeyword))}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){!function(t){const n=e.assembler.emitErr,o=n("opcode name doesn't match","<name>");class r extends e.assembler.Instruction{constructor(e,t,n){super(e,t,n,n,!1)}emit(t){let r=t.words;if(r[0]!=this.name)return o;let i=this.opcode,s=1,a=[],l=null,c=null;for(let o=0;o<this.args.length;++o){let u=this.args[o],p=r[s++];if("$"==u[0]){let o=this.ei.encoders[u],r=null;if(o.isImmediate||o.isLabel){if(!p)return n("expecting number",p);if(p=p.replace(/^#/,""),r=t.bin.parseOneInt(p),null==r)return n("expecting number",p)}else e.oops();if(null==r)return n("didn't understand it",p);e.U.assert(r>=0),11111!=r&&"$lbl"==u&&(r-=t.bin.location()+2,r>>=1),a.push(r);const s=r;if(r=o.encode(r),null==r)return n(`argument (${s}) out of range or mis-aligned`,p);"$i3"==u?r=c|r<<6:"$i5"==u&&(r=c|r<<8),"$i2"==u||"$i4"==u?c=r:"$rt"==u?(11111!=r&&r>4096&&e.U.oops("label: "+p+" v="+r),i=32768|r,"callrt.p"==this.name&&(i|=8192)):t.isLong||r<0||r>255?(t.isLong=!0,"$lbl"==u&&(r-=1),i=r>>9&65535|49152,l=this.opcode+(r<<7)&65535):i=this.opcode+(r<<7)&65535}else if(u!=p)return n("expecting "+u,p)}return r[s]?n("trailing tokens",r[s]):{stack:0,opcode:i,opcode2:l,numArgs:a,labelName:t.bin.normalizeExternalLabel(null)}}}t.VmInstruction=r,t.withPush={},t.opcodes=["stloc     $i1","ldloc     $i1","stfld     $i4, $i5","ldfld     $i4, $i5","newobj    $i1","ldcap     $i1","bitconv   $i1","stglb     $i1","ldglb     $i1","ldint     $i1","ldintneg  $i1","ldspecial $i1","ldnumber  $i1","ldlit     $i1","checkinst $i1","mapget","mapset","ret       $i2, $i3","popmany   $i1","pushmany  $i1","callind   $i1","callproc  $i1","calliface $i2, $i3","callget   $i1","callset   $i1","jmp       $lbl","jmpnz     $lbl","jmpz      $lbl","try       $lbl","push","pop"];class i extends e.assembler.AbstractProcessor{constructor(e){super(),this.addEnc("$i1","#0-8388607",(e=>this.inrange(8388607,e,e))),this.addEnc("$i2","#0-31",(e=>this.inrange(31,e,e))),this.addEnc("$i3","#0-262143",(e=>this.inrange(262143,e,e))),this.addEnc("$i4","#0-255",(e=>this.inrange(255,e,e))),this.addEnc("$i5","#0-32767",(e=>this.inrange(32767,e,e))),this.addEnc("$lbl","LABEL",(e=>this.inminmax(-4194304,4194303,e,e))).isLabel=!0,this.addEnc("$rt","SHIM",(e=>this.inrange(8388607,e,e))).isLabel=!0;let n=1,o=!0;for(let e of t.opcodes.concat(["callrt $rt"])){let i=new r(this,e,n);this.instructions[i.name]=[i],(o||"callrt"==i.name)&&(t.withPush[i.name]=!0,i=new r(this,e.replace(/\w+/,(e=>e+".p")),64|n),this.instructions[i.name]=[i]),"mapset.p"==i.name&&(o=!1),n++}}testAssembler(){}postProcessRelAddress(e,t){return t}postProcessAbsAddress(e,t){return t}getAddressFromLabel(e,t,n,o=!1){let r=e.lookupLabel(n);return null==r?null:t.is32bit?r:r-(e.pc()+2)}toFnPtr(e,t){return e}wordSize(){return 8}peephole(e,n,o){let r=e.getOp(),i="";if(n){i=n.getOp();let e=r+";"+i,t=this.file.peepCounts;t[e]=(t[e]||0)+1}"stloc"==r&&"ldloc"==i&&e.numArgs[0]==n.numArgs[0]?(/LAST/.test(n.text)&&e.update(""),n.update("")):t.withPush[r]&&"push"==i&&(e.update(e.text.replace(/\w+/,(e=>e+".p"))),n.update(""))}}t.VmProcessor=i}(e.vm||(e.vm={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(e){let t;!function(e){e[e.NonLocal=0]="NonLocal",e[e.Global=1]="Global"}(t=e.VarModifier||(e.VarModifier={})),e.isIndex=function(e){return"Index"===e.kind},e.isSubscript=function(e){return"Subscript"===e.kind}}(e.py||(e.py={}))}(pxt||(pxt={})),function(e){!function(t){var n=e.blocks;let o,r,i,s,a,l,c,u,p,d,g=0,h=0,f=0,_="???";function m(e){return null==e}function y(e){return null!=e}function k(t){return e.tickEvent("python.todo.statement",{kind:t.kind}),n.mkStmt(n.mkText("TODO: "+t.kind))}function b(t){return e.tickEvent("python.todo.expression",{kind:t.kind}),n.mkText(" {TODO: "+t.kind+"} ")}const v=O({primType:"string"}),T=O({primType:"number"}),E=O({primType:"boolean"}),S=O({primType:"void"}),C=O({primType:"any"});let x;const B={str:v,string:v,number:T,bool:E,void:S,any:C};function A(e){switch(e){case ts.SyntaxKind.StringKeyword:return v;case ts.SyntaxKind.NumberKeyword:return T;case ts.SyntaxKind.BooleanKeyword:return E;case ts.SyntaxKind.VoidKeyword:return S;case ts.SyntaxKind.AnyKeyword:return C;default:return x}}function I(t){let n=e.U.flatClone(t);return delete n.pyAST,delete n.pyInstanceType,delete n.pyRetType,delete n.pySymbolType,delete n.moduleTypeMarker,delete n.declared,n.parameters&&(n.parameters=n.parameters.map((t=>(delete(t=e.U.flatClone(t)).pyType,t)))),n}function D(t){if("("==t[0]&&e.U.endsWith(t,")"))return D(t.slice(1,-1));const n=t.indexOf(" => ");if(n>0){const e=t.slice(n+4);if(-1==e.indexOf(")[]")){const o=D(e),r=t.slice(1,n-1);return L(o,(r?r.split(/, /):[]).map((e=>D(e.replace(/\w+\??: /,"")))))}}if(e.U.endsWith(t,"[]"))return P(D(t.slice(0,-2)));if("_py.Array"===t)return P(C);const o=e.U.lookup(B,t);if(o)return o;if(!!t&&!isNaN(t))return T;if("T"==t||"U"==t)return O({primType:"'"+t});if(t.indexOf("|")>=0){return O({primType:"@union",typeArgs:t.split("|").map((e=>e.trim())).map(D)})}let r=w(t+"@type")||w(t);return r?7==r.kind?T:8==r.kind||9==r.kind?r.pyInstanceType||O({classType:r}):6==r.kind?T:(Y(null,9502,e.U.lf("'{0}' is not a type near '{1}'",t,_||"???")),O({primType:t})):(Y(null,9501,e.U.lf("unknown type '{0}' near '{1}'",t,_||"???")),O({primType:t}))}function N(t){if(!t.pySymbolType){if(_=t.pyQName,t.parameters){pxtc.service.isTaggedTemplate(t)&&(t.parameters=[{name:"literal",description:"",type:"string",options:{}}]);for(let e of t.parameters)e.pyType||(e.pyType=D(e.type))}const n=t.pyRetType;if(me(t)?t.pyRetType=O({moduleType:t}):t.retType?t.pyRetType=D(t.retType):t.pyRetType||(e.U.oops("no type for: "+t.pyQName),t.pyRetType=O({})),n&&ee(t.pyAST,n,t.pyRetType),3==t.kind||1==t.kind){let n=t.parameters.map((e=>e.pyType));if(n.some(m))return Y(null,9526,e.U.lf("function symbol is missing parameter types near '{1}'",_||"???")),O({});t.pySymbolType=L(t.pyRetType,n.filter(y))}else t.pySymbolType=t.pyRetType;8!=t.kind&&9!=t.kind||(t.pyInstanceType=O({classType:t})),_=void 0}return t.pySymbolType}function w(t){return e.U.lookup(r,t)||e.U.lookup(o,t)}function R(e){if(!e)return;let t=w(e);return t&&N(t),t}function O(t={}){let n=e.U.flatClone(t);return n.tid=++h,n}function P(e){return O({primType:"@array",typeArgs:[e]})}function L(e,t){return O({primType:"@fn"+t.length,typeArgs:[e].concat(t)})}function M(t){return!!e.U.startsWith(t.primType||"","@fn")}function F(t){return!!t.primType&&!e.U.startsWith(t.primType,"@")}function U(t){return!!e.U.startsWith(t.primType||"","@union")}function H(){return i.currFun||i.currClass||i.currModule}function V(){let e=H();for(;e&&e.parent;)e=e.parent;return e}function G(){return"main"==i.currModule.name&&!i.currFun&&!i.currClass}function W(t,n,o){const r=R(n);return r||Y(t,9503,e.U.lf("No module named '{0}'",n)),r}function K(e,n,o,r){r||(r=H());let i=r.vars[e],s=null==i?void 0:i.symbol;if(!s){let n=z(r);n&&(n+=".");let a=n+e;s=!ae(r)||o!==t.VarModifier.Global&&o!==t.VarModifier.NonLocal?ae(r)?ie(4,e):se(4,a):se(4,e),i={symbol:s,modifier:o},r.vars[e]=i}for(let e of Object.keys(n))s[e]=n[e];return i}function j(e){return e.unifyWith?(e.unifyWith=j(e.unifyWith),e.unifyWith):e}function z(e){let t=e,n="";t.parent&&"FunctionDef"!==t.parent.kind&&"AsyncFunctionDef"!==t.parent.kind&&(n=z(t.parent),n?n+=".":n="");let o=e;return"Module"==e.kind&&"main"==o.name?"":o.name?n+o.name:n+"?"+e.kind}function $(t){let n=e.U.lookup(Ce,t);if(n)return n;for(let n of e.U.values(i.currModule.vars)){let o=n.symbol;if(o.isImport){if(o.expandsTo==t)return o.pyName||Y(null,9553,lf("missing pyName")),o.pyName;if(o.isImport&&e.U.startsWith(t,(o.expandsTo||"")+"."))return o.pyName+t.slice(o.expandsTo.length)}}return t}function X(e){return(e=j(e)).primType?e.typeArgs&&"@array"==e.primType?X(e.typeArgs[0])+"[]":M(e)&&e.typeArgs?"("+e.typeArgs.slice(1).map((e=>"_: "+X(e))).join(", ")+") => "+X(e.typeArgs[0]):U(e)&&e.typeArgs?e.typeArgs.map(X).join(" | "):e.primType+"":e.classType&&e.classType.pyQName?$(e.classType.pyQName)+"":e.moduleType&&e.moduleType.pyQName?$(e.moduleType.pyQName)+"":"any"}function Y(e,t,n){l.push(function(e,t,n,o){return e||(e=s),e&&i&&i.currModule?{fileName:a,start:e.startPos,length:e.endPos-e.startPos,line:void 0,column:void 0,code:n,category:t,messageText:o}:{fileName:a,start:0,length:0,line:void 0,column:void 0,code:n,category:t,messageText:o}}(e,pxtc.DiagnosticCategory.Error,t,n))}function J(e){return e.primType?e.primType:e.classType?e.classType:e.moduleType?(e.moduleType.moduleTypeMarker||(e.moduleType.moduleTypeMarker={}),e.moduleType.moduleTypeMarker):null}function q(e){return!J(j(e))}function Z(t,n,o){var r;(n=j(n)).classType!=o&&(q(n)?n.classType=o:ee(t,n,(N(r=o),r.pyInstanceType||Y(null,9527,e.U.lf("Instance type symbol '{0}' is missing pyInstanceType",r)),r.pyInstanceType)))}function Q(e,t){ee(e,_e(e),t)}function ee(t,n,o){if(n===o)return;if((n=j(n))===(o=j(o))||re(n)||re(o))return;if("any"===n.primType)return void(n.unifyWith=o);const r=J(n),i=J(o);if(r&&i)if(r===i){if(n.unifyWith=o,n.typeArgs&&o.typeArgs)for(let e=0;e<Math.min(n.typeArgs.length,o.typeArgs.length);++e)ee(t,n.typeArgs[e],o.typeArgs[e]);n.unifyWith=o}else!function(t,n,o){Y(t,9500,e.U.lf("types not compatible: {0} and {1}",X(n),X(o)))}(t,n,o);else r&&!i?ee(t,o,n):(f++,n.unifyWith=o)}function te(e,t){const n=j(e),o=j(t);if(n===o)return!0;const r=J(n),i=J(o);if(r===i)return!0;if(r&&i){if(oe(r)&&oe(i)&&r.extendsTypes&&r.extendsTypes.length&&r.extendsTypes.some((e=>e===i.qName)))return!0;if(U(o)){for(let e of o.typeArgs||[])if(te(n,e))return!0;return!1}}return!1}function ne(e,t){const n=j(_e(e)),o=j(t);te(n,o)||(M(n)||M(o)||F(n)||F(o))&&ee(e,n,o)}function oe(e){var t;return!!(null===(t=e)||void 0===t?void 0:t.name)}function re(e){var t;return!!(null===(t=null==e?void 0:e.primType)||void 0===t?void 0:t.startsWith("'"))}function ie(e,t){let n=/(.*)\.(.*)/.exec(t),o=n?n[2]:t;return{kind:e,name:o,pyName:o,qName:t,pyQName:t,namespace:n?n[1]:"",attributes:{},pyRetType:O()}}function se(t,n){let o=r[n];return o?(o.kind=t,o):(o=ie(t,n),o.pyQName||Y(null,9527,e.U.lf("Symbol '{0}' is missing pyQName",n)),r[o.pyQName]=o,o)}function ae(e){let t=e;for(;t;){if("FunctionDef"==t.kind)return!0;t=t.parent}return!1}function le(t,n,o){if(!n.symInfo){let r=z(n);e.U.endsWith(r,".__init__")&&(r=r.slice(0,-9)+".__constructor"),ae(o=o||H())?n.symInfo=ie(t,r):n.symInfo=se(t,r);const i=n.symInfo;i.pyAST=n,i.pyName||Y(null,9528,e.U.lf("Symbol '{0}' is missing pyName",i.qName||i.name)),o.vars[i.pyName]={symbol:i}}return n.symInfo}function ce(t){let n=t.symInfo.qName;return e.U.values(r).filter((e=>e.namespace==n&&2==e.kind))}function ue(t,n,o=!1,r=!1){let i=t.pyQName+"."+n,s=R(i);if(s)return s;if(!r)for(let o of t.extendsTypes||[]){let r=R(o);if(r){r==t&&e.U.userError("field lookup loop on: "+r.qName+" / "+n);let o=ue(r,n,!0);if(o)return o}}if(!o&&t.pyAST&&"ClassDef"==t.pyAST.kind){let e=se(2,i);return e.isInstance=!0,e}return null}function pe(t,n,o=!1){const r=_e(t),s=function(e){let t=j(e);return[t.classType,...de(t.primType),t.moduleType].filter(y)}(r);for(let l of s){let s=ue(l,n,o);if(s){return!!r.moduleType?s.isInstance&&Y(null,9505,e.U.lf("the field '{0}' of '{1}' is not static",n,l.pyQName)):(s.isInstance||Y(null,9504,e.U.lf("the field '{0}' of '{1}' is static",n,l.pyQName)),Ue(a=t,"super")&&0==a.args.length?s.isProtected=!0:We(t)&&(i.currClass||Y(null,9529,e.U.lf("no class context found for {0}",s.pyQName)),s.namespace!=i.currClass.symInfo.qName&&(s.isProtected=!0))),s}}var a;return null}function de(e){let t=[];return"@array"==e?t=[w("_py.Array"),w("Array")]:"string"==e&&(t=[w("_py.String"),w("String")]),t.filter((e=>!!e))}function ge(t){let n=H(),o=e.U.lookup(n.vars,t);if(o)return o;for(;n;){let o=e.U.lookup(n.vars,t);if(o)return o;do{n=n.parent}while(n&&"ClassDef"==n.kind)}return null}function he(e){if(!e)return null;const t=e.indexOf(".");if(t>0){const n=ge(e.slice(0,t)),o=null==n?void 0:n.symbol;o&&o.pyQName!=o.pyName&&(e=o.pyQName+e.slice(t))}else{const t=ge(e);if(t)return t}let n=R(e);return n?{symbol:n}:void 0}function fe(e){var t;return null===(t=he(e))||void 0===t?void 0:t.symbol}function _e(e){return e.tsType?j(e.tsType):(e.tsType=O(),e.tsType)}function me(e){if(!e)return!1;switch(e.kind){case 5:case 9:case 8:case 6:return!0;default:return!1}}function ye(t){const n=e.U.flatClone(i);let o;try{o=t()}finally{i=n}return o}function ke(e,t){return 0==t.length?n.mkText(""):n.mkGroup([n.mkText("/* TODO: "+e+" "),n.mkGroup(t),n.mkText(" */"),n.mkNewLine()])}function be(e){let t=Qe(e.value);return e.arg?n.mkInfix(n.mkText(e.arg),"=",t):n.mkGroup([n.mkText("**"),t])}function ve(n){if(!n)return O();let o=Le(n);if(o){let t=w(o+"@type")||w(o);if(t){if(N(t),6==t.kind)return T;if(t.pyInstanceType)return t.pyInstanceType}else if(B[o])return B[o];Y(n,9506,e.U.lf("cannot find type '{0}'",o))}else if(t.isSubscript(n)){if("List"===Le(n.value)&&t.isIndex(n.slice)){return P(ve(n.slice.value))}}return Y(n,9507,e.U.lf("invalid type syntax")),O({})}const Te={Sub:1,Div:1,Pow:1,LShift:1,RShift:1,BitOr:1,BitXor:1,BitAnd:1,FloorDiv:1,Mult:1},Ee={Add:"+",Sub:"-",Mult:"*",MatMult:"Math.matrixMult",Div:"/",Mod:"%",Pow:"**",LShift:"<<",RShift:">>",BitOr:"|",BitXor:"^",BitAnd:"&",FloorDiv:"Math.idiv",And:"&&",Or:"||",Eq:"==",NotEq:"!=",Lt:"<",LtE:"<=",Gt:">",GtE:">=",Is:"===",IsNot:"!==",In:"py.In",NotIn:"py.NotIn"},Se={Invert:"~",Not:"!",UAdd:"P+",USub:"P-"},Ce={"adafruit_bus_device.i2c_device.I2CDevice":"pins.I2CDevice"};function xe(e){i.blockDepth++;const t=n.mkBlock(e.map(et));return i.blockDepth--,t}function Be(e){e.vars||(e.vars={},e.parent=H(),e.blockDepth=i.blockDepth)}function Ae(e,t=!1){return"any"===X(e)?t?n.mkText(": any"):n.mkText(""):n.mkText(": "+X(e))}function Ie(e,t){try{return ye(t)}catch(t){return console.log(t),n.mkStmt(ke(`conversion failed for ${e.name||e.kind}`,[]))}}function De(e){if(!e||!e.pyAST)return!1;if("FunctionDef"!=e.pyAST.kind)return!1;const t=e.pyAST;return!(!t.callers||1!=t.callers.length)&&!t.callers[0].inCalledPosition}function Ne(t,o=!1){return Ie(t,(()=>{const r=!!i.currClass&&!i.currFun,s=G(),a=!!i.currFun;Be(t);const l=fe(z(t)),c=le(r?1:3,t);if(!o&&(l&&l.declared===g&&Y(t,9520,lf("Duplicate function declaration")),c.declared=g,De(c)))return n.mkText("");r&&(c.isInstance=!0),i.currFun=t;let u="",p=t.name;let d=[ke("decorators",t.decorator_list.filter((e=>"property"==Le(e)?(u="get",!1):"Attribute"!=e.kind||"setter"!=e.attr||"Name"!=e.value.kind||(p=e.value.id,u="set",!1))).map(Qe))];if(t.body.length>=1&&"Raise"==t.body[0].kind&&(t.alwaysThrows=!0),r)if(i.currClass||Y(t,9531,lf("method '{0}' is missing current class context",c.pyQName)),c.pyRetType||Y(t,9532,lf("method '{0}' is missing a return type",c.pyQName)),"__init__"==t.name)d.push(n.mkText("constructor")),Z(t,c.pyRetType,i.currClass.symInfo);else{if("__get__"==p||"__set__"==p){let e=t.vars.value,n=null==e?void 0:e.symbol;if("__set__"==p&&n){let e=ue(i.currClass.symInfo,"__get__");e&&e.pyAST&&"FunctionDef"==e.pyAST.kind&&ee(t,n.pyRetType,e.pyRetType)}p=p.replace(/_/g,"")}u||(u="_"==p[0]?c.isProtected?"protected":"private":"public"),d.push(n.mkText(u+" "),Fe(p))}else e.U.assert(!u),"_"==t.name[0]||s||o||a?d.push(n.mkText("function "),Fe(p)):d.push(n.mkText("export function "),Fe(p));let h=t.returns?ve(t.returns):c.pyRetType;d.push(function(t,o){const r=t.args;r.kwonlyargs.length&&Y(t,9517,e.U.lf("keyword-only arguments not supported yet"));let i=r.args.slice();if(o?("self"!=i[0].arg&&Y(t,9518,e.U.lf("first argument of method has to be called 'self'")),i.shift()):i.some((e=>"self"==e.arg))&&Y(t,9519,e.U.lf("non-methods cannot have an argument called 'self'")),!t.symInfo.parameters){let o=r.defaults.length-i.length;t.symInfo.parameters=i.map((i=>{i.annotation||Y(t,9519,e.U.lf("Arg '{0}' missing annotation",i.arg));let s=ve(i.annotation),a="";return o>=0&&(a=n.flattenNode([Qe(r.defaults[o])]).output,ee(i,s,_e(r.defaults[o]))),o++,{name:i.arg,description:"",type:"",initializer:a,default:a,pyType:s}}))}let s=t.symInfo.parameters.map((o=>{let r=K(o.name,{isParam:!0}),i=null==r?void 0:r.symbol;o.pyType||Y(t,9530,e.U.lf("parameter '{0}' missing pyType",o.name)),ee(t,N(i),o.pyType);let s=[Fe(o.name),Ae(o.pyType,!0)];return o.default&&s.push(n.mkText(" = "+o.default)),n.mkGroup(s)}));return r.vararg&&s.push(n.mkText("TODO *"+r.vararg.arg)),r.kwarg&&s.push(n.mkText("TODO **"+r.kwarg.arg)),n.H.mkParenthesizedExpression(n.mkCommaSep(s))}(t,r),h&&j(h)!=S?Ae(h):n.mkText("")),N(c);let f=t.body.map(et);if("__init__"==t.name){i.currClass||Y(t,9533,lf("__init__ method '{0}' is missing current class context",c.pyQName));for(let e of ce(i.currClass)){let t=e.pyAST;t&&t.value&&f.push(n.mkStmt(n.mkText(`this.${Pe(e.pyName)} = `),Qe(t.value)))}}const _=rt(t);d.push(n.mkBlock(_.concat(f)));let m=n.mkGroup(d);return o?d[d.length-1].noFinalNewline=!0:m=n.mkStmt(m),m}))}const we={FunctionDef:e=>Ne(e),ClassDef:t=>Ie(t,(()=>{Be(t);const o=le(8,t);e.U.assert(!i.currClass);let r=G();i.currClass=t,t.isNamespace=t.decorator_list.some((e=>"Name"==e.kind&&"namespace"==e.id));let s=t.isNamespace?[n.mkText("namespace "),Fe(t.name)]:[ke("keywords",t.keywords.map(be)),ke("decorators",t.decorator_list.map(Qe)),n.mkText(r?"class ":"export class "),Fe(t.name)];if(!t.isNamespace&&t.bases.length>0)if("Enum"==Le(t.bases[0]))t.isEnum=!0;else{s.push(n.mkText(" extends ")),s.push(n.mkCommaSep(t.bases.map(Qe)));let e=function(e){let t=fe(Me(e));return t&&t.pyAST&&"ClassDef"==t.pyAST.kind?t.pyAST:null}(t.bases[0]);e&&(t.baseClass=e,o.extendsTypes=[e.symInfo.pyQName])}let a=xe(t.body);s.push(a);let l=ce(t).filter((e=>2==e.kind&&e.isInstance)).map((e=>(e.pyName&&e.pyRetType||Y(t,9535,lf("field definition missing py name or ret type",e.qName)),e))).map((e=>n.mkStmt(function(e){return e.pyName&&"_"==e.pyName[0]?e.isProtected?n.mkText("protected "):n.mkText("private "):n.mkText("")}(e),Fe(e.pyName),Ae(e.pyRetType))));return a.children=l.concat(a.children),n.mkStmt(n.mkGroup(s))})),Return:e=>{if(e.value){let t=i.currFun;return t&&(t.symInfo.pyRetType||Y(e,9536,lf("function '{0}' missing return type",t.symInfo.pyQName)),Q(e.value,t.symInfo.pyRetType)),n.mkStmt(n.mkText("return "),Qe(e.value))}return n.mkStmt(n.mkText("return"))},AugAssign:e=>{let t=Ee[e.op];return t.length>3?n.mkStmt(n.mkInfix(Qe(e.target),"=",n.H.mkCall(t,[Qe(e.target),Qe(e.value)]))):n.mkStmt(Qe(e.target),n.mkText(" "+t+"= "),Qe(e.value))},Assign:e=>Re(e),AnnAssign:e=>Re(e),For:t=>{if(e.U.assert(0==t.orelse.length),t.target.forTargetEndPos=t.endPos,Ue(t.iter,"range")){let e=t.iter,o=Qe(t.target),r=Fe(Me(t.target));Q(t.target,T);let i=1==e.args.length?n.mkText("0"):Qe(e.args[0]),s=Qe(e.args[1==e.args.length?0:1]);return n.mkStmt(n.mkText("for ("),n.mkInfix(o,"=",i),n.mkText("; "),n.mkInfix(r,"<",s),n.mkText("; "),e.args.length>=3?n.mkInfix(r,"+=",Qe(e.args[2])):n.mkPostfix([r],"++"),n.mkText(")"),xe(t.body))}if(g>1){const e=_e(t.target);Q(t.iter,_e(t.iter)==v?e:P(e))}return n.mkStmt(n.mkText("for ("),Qe(t.target),n.mkText(" of "),Qe(t.iter),n.mkText(")"),xe(t.body))},While:t=>(e.U.assert(0==t.orelse.length),n.mkStmt(n.mkText("while ("),Qe(t.test),n.mkText(")"),xe(t.body))),If:t=>{let o=t=>{let r=[n.mkText("if ("),Qe(t.test),n.mkText(")"),xe(t.body)];return t.orelse.length&&(r[r.length-1].noFinalNewline=!0,1==t.orelse.length&&"If"==t.orelse[0].kind?(r.push(n.mkText(" else ")),e.U.pushRange(r,o(t.orelse[0]))):r.push(n.mkText(" else"),xe(t.orelse))),r};return n.mkStmt(n.mkGroup(o(t)))},With:t=>{if(1==t.items.length&&function(e,t){let n=_e(e);return!(!n.classType||n.classType.pyQName!=t)||X(n)==t}(t.items[0].context_expr,"pins.I2CDevice")){let o=t.items[0],r=[],i=Qe(o.context_expr);if(o.optional_vars){let e=Le(o.optional_vars);if(e){let s=K(e,{isLocal:!0}),a=null==s?void 0:s.symbol;e=Pe(e),r.push(n.mkStmt(n.mkText("const "+e+" = "),i)),a.pyRetType||Y(t,9537,lf("function '{0}' missing return type",a.pyQName)),Q(o.context_expr,a.pyRetType),i=n.mkText(e)}}return r.push(n.mkStmt(n.mkInfix(i,".",n.mkText("begin()")))),e.U.pushRange(r,t.body.map(et)),r.push(n.mkStmt(n.mkInfix(i,".",n.mkText("end()")))),n.mkGroup(r)}let o=[],r=t.items.map(((e,t)=>{let r="with"+t;if(e.optional_vars){let t=Me(e.optional_vars);K(t,{isLocal:!0}),r=Pe(t)}return o.push(n.mkStmt(n.mkText(r+".end()"))),n.mkStmt(n.mkText("const "+r+" = "),n.mkInfix(Qe(e.context_expr),".",n.mkText("begin()")))}));return e.U.pushRange(r,t.body.map(et)),e.U.pushRange(r,o),n.mkBlock(r)},Raise:e=>{let t,o=e.exc||e.cause;if(!o)return n.mkStmt(n.mkText("throw"));if(o&&"Call"==o.kind){let e=o;1==e.args.length&&(t=Qe(e.args[0]))}return t||(t=n.mkGroup([n.mkText("`"),Qe(o),n.mkText("`")])),n.mkStmt(n.H.mkCall("control.fail",[t]))},Assert:e=>(e.msg||Y(e,9537,lf("assert missing message")),n.mkStmt(n.H.mkCall("control.assert",[e.test,e.msg].filter((e=>!!e)).map(Qe)))),Import:e=>{for(let t of e.names)t.asname&&K(t.asname,{expandsTo:t.name}),W(e,t.name);return n.mkText("")},ImportFrom:e=>{let t=[];for(let o of e.names)if("*"==o.name)e.module||Y(e,9538,lf("import missing module name")),K(e.module,{isImportStar:!0});else{let r=e.module+"."+o.name,i=R(r),s=o.asname||o.name;me(i)?(K(s,{isImport:i,expandsTo:r}),t.push(n.mkStmt(n.mkText(`import ${Pe(s)} = ${r}`)))):K(s,{expandsTo:r})}return n.mkGroup(t)},ExprStmt:e=>{return"Str"==e.value.kind?((t=e.value.s).trim().split(/\n/).length<=1?t=t.trim():t+="\n",n.mkStmt(n.mkText("/** "+t+" */"))):n.mkStmt(Qe(e.value));var t},Pass:e=>n.mkStmt(n.mkText("")),Break:e=>n.mkStmt(n.mkText("break")),Continue:e=>n.mkStmt(n.mkText("continue")),Delete:t=>(Y(t,9550,e.U.lf("delete statements are unsupported")),k(t)),Try:e=>{let t=[n.mkText("try"),xe(e.body.concat(e.orelse))];for(let o of e.handlers)t.push(n.mkText("catch ("),o.name?Fe(o.name):n.mkText("_")),o.type&&t.push(n.mkText("/* instanceof "),Qe(o.type),n.mkText(" */")),t.push(n.mkText(")"),xe(o.body));return e.finalbody.length&&t.push(n.mkText("finally"),xe(e.finalbody)),n.mkStmt(n.mkGroup(t))},AsyncFunctionDef:t=>(Y(t,9551,e.U.lf("async function definitions are unsupported")),k(t)),AsyncFor:t=>(Y(t,9552,e.U.lf("async for statements are unsupported")),k(t)),AsyncWith:t=>(Y(t,9553,e.U.lf("async with statements are unsupported")),k(t)),Global:o=>{const r=V();H();for(const n of o.names){e.U.lookup(r.vars,n)||Y(o,9521,e.U.lf("No binding found for global variable"));K(n,{},t.VarModifier.Global).firstRefPos<o.startPos&&Y(o,9522,e.U.lf("Variable referenced before global declaration"))}return n.mkStmt(n.mkText(""))},Nonlocal:o=>{const r=V(),i=H();for(const n of o.names){const s=ot(n,i);s&&s!==r&&s.vars[n].modifier!==t.VarModifier.Global||Y(o,9523,e.U.lf("No binding found for nonlocal variable"));K(n,{},t.VarModifier.NonLocal).firstRefPos<o.startPos&&Y(o,9524,e.U.lf("Variable referenced before nonlocal declaration"))}return n.mkStmt(n.mkText(""))}};function Re(t){let o,r,s,a;if("Assign"===t.kind){if(1!=t.targets.length)return Y(t,9553,e.U.lf("multi-target assignment statements are unsupported")),k(t);a=t.targets[0],s=t.value,o=null,r=null}else{if("AnnAssign"!==t.kind)return t;a=t.target,s=t.value||null,o=t.annotation,r=ve(o),Q(a,r)}let l,c="",u=!!s&&Ue(s,"const"),p=Le(a)||"";if(G()||i.currClass||i.currFun||"_"==p[0]||(c="export "),p&&i.currClass&&!i.currFun){u=!(!s||!i.currClass.isNamespace);let e=ue(i.currClass.symInfo,p);if(e||Y(t,9544,lf("cannot get class field")),0==g)return n.mkText("/* skip for now */");e.pyRetType||Y(t,9539,lf("function '{0}' missing return type",e.pyQName)),Q(a,e.pyRetType),e.isInstance=!1,c=i.currClass.isNamespace?`export ${u?"const":"let"} `:"static "}if(!s)return Y(t,9555,e.U.lf("unable to determine value of assignment")),k(t);if(Q(a,_e(s)),u)return K(Me(a),{}),/^static /.test(c)||/const/.test(c)||(c+="const "),n.mkStmt(n.mkText(c),n.mkInfix(Qe(a),"=",Qe(s)));if(!c&&"Tuple"==a.kind){let o=a,r=[n.mkText("let "),n.mkText("[")];if(o.elts.filter((e=>"Name"!==e.kind)).length)return Y(t,9556,e.U.lf("non-trivial tuple assignment unsupported")),k(t);let i=o.elts.map((e=>e)).map((function(e){ze(e,"identifierCompletion"),_e(e);Ye(e);return Oe(e,!0)}));return r.push(n.mkCommaSep(i)),r.push(n.mkText("]")),n.mkStmt(n.mkInfix(n.mkGroup(r),"=",Qe(s)))}if("Name"===a.kind){const e=H().vars[p],t=null==e?void 0:e.symbol;t&&4===t.kind&&void 0===e.modifier&&(void 0===e.firstAssignPos||e.firstAssignPos>a.startPos)&&(e.firstAssignPos=a.startPos,e.firstAssignDepth=i.blockDepth)}if(o&&r&&("NameConstant"===s.kind&&null===s.value||"List"===s.kind&&0===s.elts.length)){const e=X(r);l=n.mkInfix(Qe(a),":",n.mkText(e))}return l||(l=Qe(a)),n.mkStmt(n.mkText(c),n.mkInfix(l,"=",Qe(s)))}function Oe(e,t=!1){let o=e.id,r=he(o),s=null==r?void 0:r.symbol,a=H().vars[o],l=null==a?void 0:a.symbol;return void 0===e.isdef&&(!s||4===s.kind&&s!==l?(i.currClass&&!i.currFun?(e.isdef=!1,r=K(o,{})):(e.isdef=!0,r=K(o,{isLocal:!0})),s=r.symbol):e.isdef=!1,e.symbolInfo=s,e.tsType||Y(e,9540,lf("definition missing ts type")),s.pyRetType||Y(e,9568,lf("missing py return type")),ee(e,e.tsType,s.pyRetType)),e.isdef&&it(r,H())&&(e.isdef=!1),Je(r,e),e.isdef&&!t?n.mkGroup([n.mkText("let "),Fe(o)]):Fe(o)}function Pe(e){return n.isReservedWord(e)?e+"_":e||e}function Le(e){if("Name"==e.kind){let t=e.id,n=ge(t),o=null==n?void 0:n.symbol;return o&&o.expandsTo?o.expandsTo:t}if("Attribute"==e.kind){let t=Le(e.value);if(t)return t+"."+e.attr}}function Me(e){let t=Le(e);return t||Y(null,9542,lf("Cannot get name of unknown expression kind '{0}'",e.kind)),t}function Fe(e){return"self"==e?n.mkText("this"):n.mkText(Pe(e))}function Ue(e,t){if("Call"!=e.kind)return!1;return Le(e.func)===t}function He(t,o,r){let i=Ee[o];return e.U.assert(!!i),i.length>3?n.H.mkCall(i,[t,r]):n.mkInfix(t,i,r)}const Ve={memoryview:{n:"",t:x},const:{n:"",t:T},"micropython.const":{n:"",t:T}};const Ge=function(){let e={};return Object.keys(pxtc.ts2PyFunNameMap).forEach((t=>{let n=pxtc.ts2PyFunNameMap[t];if(n&&n.n){let o={n:t,t:A(n.t),scale:n.scale};e[n.n]=o}})),Object.keys(Ve).forEach((t=>{e[t]=Ve[t]})),e}();function We(e){return"Name"==e.kind&&"self"==e.id}function Ke(e){return e.type==n.NT.Prefix&&'"'==e.op[0]?n.mkText(n.backtickLit(JSON.parse(e.op))):e}function je(e){return u&&e.startPos<=u.position&&u.position<=e.endPos}function ze(e,t){g>100&&u&&null==p&&(u.type==t||"symbol"==u.type)&&je(e)&&(p=e,d=H())}function $e(e,t){if(t&&t.pyAST&&"FunctionDef"==t.pyAST.kind){let n=t.pyAST;n.callers||(n.callers=[]),n.callers.indexOf(e)<0&&n.callers.push(e)}}const Xe={BoolOp:e=>{let t=Qe(e.values[0]);for(let n=1;n<e.values.length;++n)t=He(t,e.op,Qe(e.values[n]));return t},BinOp:e=>{let t=function(e){if("Mod"==e.op&&"Str"==e.left.kind&&("Tuple"==e.right.kind||"List"==e.right.kind)){let t=e.left.s,o=e.right.elts;o=o.slice();let r=[n.mkText("`")];return t.replace(/([^%]+)|(%[\d\.]*([a-zA-Z%]))/g,((e,t,i,s)=>{if(t)r.push(n.mkText(t.replace(/[`\\$]/g,(e=>"\\"+e))));else{let e=o.shift(),t=e?Qe(e):n.mkText("???");r.push(n.mkText("${"),t,n.mkText("}"))}return""})),r.push(n.mkText("`")),n.mkGroup(r)}return null}(e);if(t)return t;const o=Qe(e.left),r=Qe(e.right);return lt(e.left)&&lt(e.right)&&"Add"===e.op?n.H.extensionCall("concat",[o,r],!1):(t=He(o,e.op,r),Te[e.op]&&(Q(e.left,T),Q(e.right,T),e.tsType||Y(e,9570,lf("binary op missing ts type")),ee(e,e.tsType,T)),t)},UnaryOp:t=>{let o=Se[t.op];return e.U.assert(!!o),n.mkInfix(null,o,Qe(t.operand))},Lambda:t=>(Y(t,9574,e.U.lf("lambda expressions are not supported yet")),b(t)),IfExp:e=>n.mkInfix(n.mkInfix(Qe(e.test),"?",Qe(e.body)),":",Qe(e.orelse)),Dict:e=>{i.blockDepth++;const t=e.keys.map(((t,o)=>{const r=e.values[o];return void 0===t?b(e):n.mkStmt(n.mkInfix(Qe(t),":",Qe(r)),n.mkText(","))})),o=n.mkBlock(t);return i.blockDepth--,o},Set:e=>b(e),ListComp:e=>b(e),SetComp:e=>b(e),DictComp:e=>b(e),GeneratorExp:e=>{if(1==e.generators.length&&"Comprehension"==e.generators[0].kind){let t=e.generators[0];if(0==t.ifs.length)return ye((()=>{let o=Me(t.target);return K(o,{isParam:!0}),n.mkInfix(Qe(t.iter),".",n.H.mkCall("map",[n.mkGroup([Fe(o),n.mkText(" => "),Qe(e.elt)])]))}))}return b(e)},Await:e=>b(e),Yield:e=>b(e),YieldFrom:e=>b(e),Compare:e=>{if(1==e.ops.length&&("In"==e.ops[0]||"NotIn"==e.ops[0])){j(_e(e.comparators[0]))==v&&Q(e.left,v);let t=n.mkInfix(Qe(e.comparators[0]),".",n.H.mkCall("indexOf",[Qe(e.left)]));return n.mkInfix(t,"In"==e.ops[0]?">=":"<",n.mkText("0"))}let t=He(Qe(e.left),e.ops[0],Qe(e.comparators[0]));for(let n=1;n<e.ops.length;++n)t=He(t,"And",He(Qe(e.comparators[n-1]),e.ops[n],Qe(e.comparators[n])));return t},Call:t=>{t.func.inCalledPosition=!0;let o,r,s=Le(t.func),a=fe(s),l=a&&8==a.kind,c=a,g="";if(l)c=fe(a.pyQName+".__constructor");else if("Attribute"==t.func.kind){let e=t.func;r=e.value,o=_e(r),(o.classType||o.primType)&&(g=e.attr,c=pe(r,g,!0),c&&(g=c.name))}let h=t.args.slice();if("super"==s&&0==h.length)return i.currClass&&i.currClass.baseClass&&(t.tsType||Y(t,9543,lf("call expr missing ts type")),Z(t,t.tsType,i.currClass.baseClass.symInfo)),n.mkText("super");if(Ue(t,"int")&&1===h.length&&h[0]){const e=h[0],t=Qe(e),o=_e(e);if("string"===o.primType)return n.mkGroup([n.mkText("parseInt"),n.mkText("("),t,n.mkText(")")]);if("number"===o.primType)return n.mkGroup([n.mkInfix(n.mkText("Math"),".",n.mkText("trunc")),n.mkText("("),t,n.mkText(")")])}if(!c){let t=e.U.lookup(Ge,s);if(t&&(g=""),g&&(s=X(o)+"."+g,t=e.U.lookup(Ge,s),t||"@array"!=J(j(o))||(s="Array."+g,t=e.U.lookup(Ge,s))),g="",t)if("."==t.n[0]&&h.length){if(r=h.shift(),o=_e(r),g=t.n.slice(1),c=pe(r,g),c&&2==c.kind)return n.mkInfix(Qe(r),".",n.mkText(g))}else c=R(t.n)}if(Ue(t,"str"))return ee(t,t.tsType,v),n.mkInfix(n.mkText('""'),"+",Qe(t.args[0]));c||Y(t,9508,e.U.lf("can't find called function '{0}'",s));let f=c?c.parameters:null,_=[];if(f){for(h.length>f.length&&Y(t,9510,e.U.lf("too many arguments in call to '{0}'",c.pyQName));h.length<f.length;)h.push(null);h=h.slice(0,f.length);for(let n of t.keywords){let t=f.findIndex((e=>e.name==n.arg));t<0?Y(n,9511,e.U.lf("'{0}' doesn't have argument named '{1}'",c.pyQName,n.arg)):null!=h[t]?Y(n,9512,e.U.lf("argument '{0} already specified in call to '{1}'",n.arg,c.pyQName)):h[t]=n.value}for(let e=h.length-1;e>=0&&(f[e].initializer&&null==h[e]);e--)h.pop();for(let o=0;o<h.length;++o){let r=h[o];if(null!=r||f[o].initializer)if(r){f[o].pyType||Y(t,9545,lf("formal arg missing py type"));const e=f[o].pyType;"any"!==e.primType&&ne(r,e),"Name"==r.kind&&De(r.symbolInfo)?_.push(Ne(r.symbolInfo.pyAST,!0)):_.push(Qe(r))}else f[o].initializer||Y(t,9547,lf("formal arg missing initializer")),_.push(n.mkText(f[o].initializer));else Y(t,9513,e.U.lf("missing argument '{0}' in call to '{1}'",f[o].name,c.pyQName)),_.push(n.mkText("null"))}}else c&&Y(t,9509,e.U.lf("calling non-function")),_=h.map(Qe);if(!p&&u&&"signature"==u.type&&je(t)){p=t,d=H(),u.auxResult=0;for(let e=0;e<h.length;++e){u.auxResult=e;let t=h[e];if(!t)break;if(t.startPos<=u.position&&u.position<=t.endPos)break}}if(c)if(c.pyRetType||Y(t,9549,lf("function missing pyRetType")),r&&lt(r)&&o?function(e,t,n){switch(t.qName){case"Array.pop":case"Array.removeAt":case"Array.shift":case"Array.find":case"Array.get":case"Array._pickRandom":Q(e,n.typeArgs[0]);break;case"Array.concat":case"Array.slice":case"Array.filter":case"Array.fill":Q(e,n);break;case"Array.reduce":if("Call"===e.kind&&e.args.length>1){const t=_e(e.args[1]);t&&Q(e,t)}break;case"Array.map":Q(e,P(C));break;default:Q(e,t.pyRetType)}}(t,c,o):Q(t,c.pyRetType),t.symbolInfo=c,c.attributes.py2tsOverride){const e=function(e){const t=new RegExp(/([^\$]*\()?([^\$\(]*)\$(\d)(?:(?:(?:=(\d+|'[a-zA-Z0-9_]*'|false|true|null|undefined))|(\?)|))/,"y"),n=[];let o,r=0;do{r=t.lastIndex,o=t.exec(e),o&&(o[1]&&n.push({kind:"text",text:o[1]}),n.push({kind:"arg",prefix:o[2],index:parseInt(o[3]),default:o[4],isOptional:!!o[5]}))}while(o);null!=r?n.push({kind:"text",text:e.substr(r)}):n.push({kind:"text",text:e});return{parts:n}}(c.attributes.py2tsOverride);if(e){g&&!r&&Y(t,9550,lf("missing recv"));let o=function(e,t,o){const r=[];for(const o of e.parts)if("text"===o.kind)r.push(n.mkText(o.text));else if(t[o.index]||o.default)o.prefix&&r.push(n.mkText(o.prefix)),t[o.index]?r.push(t[o.index]):r.push(n.mkText(o.default));else if(!o.isOptional)return;if(o)return n.mkInfix(o,".",n.mkGroup(r));return n.mkGroup(r)}(e,_,g?Qe(r):void 0);return o||Y(t,9555,lf("buildOverride failed unexpectedly")),o}}else if(c.attributes.pyHelper)return n.mkGroup([n.mkInfix(n.mkText("_py"),".",n.mkText(c.attributes.pyHelper)),n.mkText("("),n.mkCommaSep(r?[Qe(r)].concat(_):_),n.mkText(")")]);let m=g?n.mkInfix(Qe(r),".",n.mkText(g)):Qe(t.func),y=[m,n.mkText("("),n.mkCommaSep(_),n.mkText(")")];return c&&1==_.length&&pxtc.service.isTaggedTemplate(c)&&(y=[m,Ke(_[0])]),l&&(a&&a.pyQName||Y(t,9551,lf("missing namedSymbol or pyQName")),y[0]=n.mkText($(a.pyQName)),y.unshift(n.mkText("new "))),n.mkGroup(y)},Num:e=>(e.tsType||Y(e,9556,lf("tsType missing")),ee(e,e.tsType,T),n.mkText(e.ns)),Str:e=>(e.tsType||Y(e,9557,lf("tsType missing")),ee(e,e.tsType,v),n.mkText(n.stringLit(e.s))),FormattedValue:e=>b(e),JoinedStr:e=>b(e),Bytes:t=>n.mkText(`hex\`${e.U.toHex(new Uint8Array(t.s))}\``),NameConstant:e=>(null!==e.value&&(e.tsType||Y(e,9558,lf("tsType missing")),ee(e,e.tsType,E)),n.mkText(JSON.stringify(e.value))),Ellipsis:e=>b(e),Constant:e=>b(e),Attribute:t=>{let o=Qe(t.value),r=_e(t.value),i=pe(t.value,t.attr),s=t.attr;if(ze(t,"memberCompletion"),i)t.symbolInfo=i,$e(t,i),t.tsType&&i.pyRetType||Y(t,9559,lf("tsType or pyRetType missing")),ee(t,t.tsType,i.pyRetType),s=i.name;else if(r.moduleType){let n=R(r.moduleType.pyQName+"."+t.attr);n?(t.symbolInfo=n,$e(t,n),Q(t,N(n)),s=n.name):Y(t,9514,e.U.lf("module '{0}' has no attribute '{1}'",r.moduleType.pyQName,t.attr))}else g>2&&Y(t,9515,e.U.lf("unknown object type; cannot lookup attribute '{0}'",t.attr));return n.mkInfix(o,".",n.mkText(Pe(s)))},Subscript:e=>{if("Index"==e.slice.kind){const t=j(_e(e.value));if(lt(e.value)){Q(e,t.typeArgs[0])}else"string"===t.primType?Q(e,t):g>2&&q(_e(e))&&Q(e,C);let o=e.slice.value;return g>2&&q(_e(o))&&Q(o,T),n.mkGroup([Qe(e.value),n.mkText("["),Qe(o),n.mkText("]")])}if("Slice"==e.slice.kind){const t=_e(e.value);Q(e,t);let o=e.slice;if(o.step){const r="string"===(null==t?void 0:t.primType);return n.H.mkCall(r?"_py.stringSlice":"_py.slice",[Qe(e.value),o.lower?Qe(o.lower):n.mkText("null"),o.upper?Qe(o.upper):n.mkText("null"),Qe(o.step)])}return n.mkInfix(Qe(e.value),".",n.H.mkCall("slice",[o.lower?Qe(o.lower):n.mkText("0"),o.upper?Qe(o.upper):null].filter(y)))}return b(e)},Starred:e=>n.mkGroup([n.mkText("... "),Qe(e.value)]),Name:e=>{if(ze(e,"identifierCompletion"),"self"==e.id&&i.currClass)return e.tsType||Y(e,9560,lf("missing tsType")),Z(e,e.tsType,i.currClass.symInfo),n.mkText("this");let t=Ye(e),o=null==t?void 0:t.symbol;if(o&&o.isImport)return Fe(o.name);if(Je(t,e),e.ctx.indexOf("Load")>=0){if(!o)return Fe(Me(e));if(!(null==o?void 0:o.qName))return Y(e,9561,lf("missing qName")),Fe("unknown");return Fe(o.qName.replace("@type",""))}return Oe(e)},List:qe,Tuple:qe};function Ye(t){let n=he(t.id),o=null==n?void 0:n.symbol;if(!n){let o=e.U.lookup(Ge,t.id);o&&(n=he(o.n))}if(n&&o){if(t.symbolInfo=o,t.tsType||Y(t,9562,lf("missing tsType")),ee(t,t.tsType,N(o)),o.isImport)return n;$e(t,o),t.forTargetEndPos&&n.forVariableEndPos!==t.forTargetEndPos&&(n.forVariableEndPos?n.lastRefPos=n.forVariableEndPos+1:n.forVariableEndPos=t.forTargetEndPos)}else g>0&&Y(t,9516,e.U.lf("name '{0}' is not defined",t.id));return n}function Je(e,n){if(e){if(e.modifier===t.VarModifier.Global){const t=V();t&&t.vars[e.symbol.name]&&(e=t.vars[e.symbol.name])}else if(e.modifier===t.VarModifier.NonLocal){const t=ot(e.symbol.name,H());t&&(e=t.vars[e.symbol.name])}(void 0===e.firstRefPos||e.firstRefPos>n.startPos)&&(e.firstRefPos=n.startPos),(void 0===e.lastRefPos||e.lastRefPos<n.startPos)&&(e.lastRefPos=n.startPos)}}function qe(e){return e.tsType||Y(e,9563,lf("missing tsType")),ee(e,e.tsType,P(e.elts[0]?_e(e.elts[0]):O())),n.mkGroup([n.mkText("["),n.mkCommaSep(e.elts.map(Qe)),n.mkText("]")])}function Ze(e){return`${e.startPos}:${e.endPos}`}function Qe(t){s=t;let n=Xe[t.kind];n||e.U.oops(t.kind+" - unknown expr"),_e(t);const o=n(t);return o.id=Ze(t),o}function et(t){s=t;let o=we[t.kind];o||e.U.oops(t.kind+" - unknown stmt");let r=(t._comments||[]).map((e=>e.value)),i=o(t);return r.length&&(i=n.mkGroup(r.map((e=>n.mkStmt(n.H.mkComment(e)))).concat(i))),i.id=Ze(t),i}function tt(e){return!e||(e.type==n.NT.Prefix&&""==e.op?e.children.every(tt):e.type==n.NT.NewLine)}function nt(e){const t=Fe(e.name),o=X(N(e));return n.mkStmt(n.mkGroup([n.mkText("let "),t,n.mkText(": "+o+";")]))}function ot(e,n){if(!n)return;const o=n.vars&&n.vars[e];return o&&o.modifier!=t.VarModifier.NonLocal?n:ot(e,n.parent)}function rt(e){const t=[];let n;for(const o of Object.keys(e.vars))n=e.vars[o],it(n,e)&&t.push(nt(null==n?void 0:n.symbol));return t}function it(e,t){return!!(4===e.symbol.kind&&!e.symbol.isParam&&void 0===e.modifier&&(e.lastRefPos>e.forVariableEndPos||e.firstRefPos<e.firstAssignPos||e.firstAssignDepth>t.blockDepth)&&!(function(e){return"Module"===e.kind&&"main"===e.name}(t)&&0===e.firstAssignDepth))}function st(t){if(e.U.assert("Module"==t.kind),t.tsBody)return;var o;i={currClass:void 0,currFun:void 0,currModule:o=t,blockDepth:0},a=o.tsFilename.replace(/\.ts$/,".py"),t.vars||(t.vars={});let r=rt(t).concat(t.body.map(et));return r.every(tt)?void 0:"main"==t.name?r:[n.mkText("namespace "+t.name+" "),n.mkBlock(r)]}function at(e){g=e,l=[],f=0,s=void 0}function lt(e){const t=j(_e(e));return t&&"@array"===t.primType}t.py2ts=function(i){let s=[];const g={};l=[],e.U.assert(!!i.sourceFiles,"missing sourceFiles! Cannot convert py to ts");let h=i.sourceFiles.filter((t=>e.U.endsWith(t,".py")));if(0==h.length)return{outfiles:g,diagnostics:l,success:0===l.length,sourceMap:[]};let _=(e,t)=>e.substr(0,e.length-t.length),m=e.U.toDictionary(h,(e=>_(e,".py"))),y=i.sourceFiles.filter((t=>e.U.endsWith(t,".ts"))).filter((e=>_(e,".ts")in m));e.U.assert(!!i.apisInfo,"missing apisInfo! Cannot convert py to ts"),a=h[0],function(t,n){r={},o={};let i=e.U.toDictionary(n,(e=>e));for(let n of e.U.values(t.byQName)){if(i.hasOwnProperty(n.fileName))continue;let t=n;t.extendsTypes&&(t.extendsTypes=t.extendsTypes.filter((e=>e!=t.qName))),t.pyQName&&t.qName||Y(null,9526,e.U.lf("Symbol '{0}' is missing qName for '{1}'",t.name,t.pyQName?"ts":"py")),o[t.pyQName]=t,o[t.qName]=t}x=D("Buffer")}(i.apisInfo,y),c=i,u=void 0,i.generatedFiles||(i.generatedFiles=[]);for(const t of h){let n=t,o=t.replace(/\.py$/,"").replace(/.*\//,""),r=i.fileSystem[t];try{a=t;let i=e.py.lex(r),c=e.py.parse(r,n,i);e.U.pushRange(l,c.diagnostics),s.push({kind:"Module",body:c.stmts,blockDepth:0,name:o,source:r,tsFilename:n.replace(/\.py$/,".ts")})}catch(e){console.log("Parse error",e)}}const k=l;for(let e=0;e<5;++e){at(e);for(let e of s)try{st(e)}catch(e){console.log("Conv pass error",e)}if(0==f)break}at(1e3),p=void 0,u=i.syntaxInfo||{position:0,type:"symbol"};let b=[];for(let e of s)try{let t=st(e);if(!t)continue;let o=n.flattenNode(t);function v(e){let t=e.id.split(":");if(2!=t.length)return;let n=t.map((e=>parseInt(e)));return{py:{startPos:n[0],endPos:n[1]},ts:{startPos:e.startPos,endPos:e.endPos}}}i.sourceFiles.push(e.tsFilename),i.generatedFiles.push(e.tsFilename),i.fileSystem[e.tsFilename]=o.output,g[e.tsFilename]=o.output,b=o.sourceMap.map(v).filter((e=>!!e))}catch(e){console.log("Conv error",e)}l=k.concat(l);let T={};const E=e.U.values(o).concat(e.U.values(r));let S=[];const C=e=>{if((e=>{switch(e.kind){case 6:case 7:case 4:case 3:case 5:return!0;case 2:case 1:return!e.isInstance;default:return!1}})(e)&&S.indexOf(e)<0){let t=I(e);T[t.qName||t.name]=t}};for(let t=d;t;t=t.parent)t&&t.vars&&e.U.values(t.vars).map((e=>e.symbol)).forEach(C);if(E.forEach(C),u&&p){if(p=p,u.beginPos=p.startPos,u.endPos=p.endPos,u.symbols||(u.symbols=[]),S=u.symbols.slice(),"memberCompletion"==u.type&&"Attribute"==p.kind){const e=_e(p.value);if(e.moduleType)for(let t of E)t.isInstance||t.namespace!=e.moduleType.qName||u.symbols.push(t);else if(e.classType||e.primType){const t=e.classType||de(e.primType).reduce(((e,t)=>e||t),null);if(t){t.extendsTypes&&t.qName||Y(null,9567,lf("missing extendsTypes or qName"));let e=t.extendsTypes.concat(t.qName);for(let t of E)t.isInstance&&e.indexOf(t.namespace)>=0&&u.symbols.push(t)}}}else if("identifierCompletion"==u.type)u.symbols=e.U.values(T);else{let e=p.symbolInfo;e&&u.symbols.push(e)}u.symbols=u.symbols.map(I)}let B=function(){for(let e of l)t.patchPosition(e,i.fileSystem[e.fileName]);return l}();return{outfiles:g,success:0===B.length,diagnostics:B,syntaxInfo:u,globalNames:T,sourceMap:b}}}(e.py||(e.py={}))}(pxt||(pxt={})),function(e){!function(t){let n;!function(e){e[e.Id=0]="Id",e[e.Op=1]="Op",e[e.Keyword=2]="Keyword",e[e.Number=3]="Number",e[e.String=4]="String",e[e.NewLine=5]="NewLine",e[e.Comment=6]="Comment",e[e.Indent=7]="Indent",e[e.Dedent=8]="Dedent",e[e.EOF=9]="EOF",e[e.Error=10]="Error"}(n=t.TokenType||(t.TokenType={})),t.keywords={False:!0,None:!0,True:!0,and:!0,as:!0,assert:!0,async:!0,await:!0,break:!0,class:!0,continue:!0,def:!0,del:!0,elif:!0,else:!0,except:!0,finally:!0,for:!0,from:!0,global:!0,if:!0,import:!0,in:!0,is:!0,lambda:!0,nonlocal:!0,not:!0,or:!0,pass:!0,raise:!0,return:!0,try:!0,while:!0,with:!0,yield:!0};let o,r,i=[];const s={"%":"Mod","&":"BitAnd","*":"Mult","**":"Pow","+":"Add","-":"Sub","/":"Div","//":"FloorDiv","<<":"LShift",">>":"RShift","@":"MatMult","^":"BitXor","|":"BitOr"},a={"!":"Bang","!=":"NotEq","(":"LParen",")":"RParen",",":"Comma","->":"Arrow",".":"Dot",":":"Colon",";":"Semicolon","<":"Lt","<=":"LtE","=":"Assign","==":"Eq",">":"Gt",">=":"GtE","[":"LSquare","]":"RSquare","{":"LBracket","}":"RBracket","~":"Invert"},l={b:/^[_0-1]$/,B:/^[_0-1]$/,o:/^[_0-7]$/,O:/^[_0-7]$/,x:/^[_0-9a-fA-F]$/,X:/^[_0-9a-fA-F]$/},c={b:2,B:2,o:8,O:8,x:16,X:16};let u,p,d=0,g=0;function h(e,t){let n=0,o=0;for(let r=0;r<e;++r)10==t.charCodeAt(r)&&(n++,o=r);return{line:n,column:e-o-1}}function f(e){switch(e.type){case n.Id:return`id(${e.value})`;case n.Op:return"'"+r[e.value]+"'";case n.Keyword:return e.value;case n.Number:return`num(${e.value})`;case n.String:return e.stringPrefix+JSON.stringify(e.value);case n.NewLine:return"<nl>";case n.Comment:return`/* ${e.value} */`;case n.Indent:return"indent"+e.value;case n.Dedent:return"dedent";case n.Error:return`[ERR: ${e.value}]`;case n.EOF:return"End of file";default:return"???"}}t.position=h,t.patchPosition=function(e,t){if(!e.start&&!e.length)return e.start=0,e.length=0,e.line=0,void(e.column=0);let n=h(e.start,t);e.line=n.line,e.column=n.column,e.length>0&&(n=h(e.start+e.length-1,t),e.endLine=n.line,e.endColumn=n.column+2)},t.tokenToString=f,t.friendlyTokenToString=function(e,t){let n=e.endPos-e.startPos,o="";return o=0==n?f(e):n>20?"`"+t.slice(e.startPos,e.startPos+20)+"`...":"`"+t.slice(e.startPos,e.endPos)+"`",o=o.replace(/\r/g,"").replace(/\n/g,"\\n").replace(/\t/g,"\\t"),o},t.tokensToString=function(e){let t="",o=0;for(let r of e){let e=f(r);o+e.length>70&&(o=0,t+="\n"),0!=o&&(t+=" "),t+=e,o+=e.length,r.type!=n.NewLine&&r.type!=n.Comment||(o=0,t+="\n")}return t},t.lex=function(h){for(0==i.length&&function(){const n={'"':T,"'":T,"#":x,"\\":C,".":A};o=e.U.clone(a);for(let e of Object.keys(s))o[e]=s[e],o[e+"="]=s[e]+"Assign";r={};for(let e of Object.keys(o))r[o[e]]=e;for(let e=0;e<128;++e)if(t.rx.isIdentifierStart(e))i[e]=m;else{let r=String.fromCharCode(e);if(n.hasOwnProperty(r))i[e]=n[r];else if(o.hasOwnProperty(r)){let t=!1,n=o[r];for(let e of Object.keys(o))e!=r&&e.startsWith(r)&&(t=!0);i[e]=t?()=>k(n):()=>y(n)}else t.rx.isSpace(e)?i[e]=()=>{}:13==e?i[e]=()=>{10==p.charCodeAt(d)&&d++,E()}:t.rx.isNewline(e)?i[e]=E:I(e)?i[e]=B:i[e]=D}}(),p=h,u=[],d=0,g=0,S();d<p.length;){g=d;const e=p.charCodeAt(d++);e<128?i[e]():t.rx.isIdentifierStart(e)?m():t.rx.isSpace(e)||(t.rx.isNewline(e)?E():D())}return g=d,E(),f(n.EOF,""),u;function f(e,t,n){let o={type:e,value:t,startPos:g,endPos:d,auxValue:n};return u.push(o),o}function _(e){f(n.Error,e)}function m(){for(;t.rx.isIdentifierChar(p.charCodeAt(d));)d++;let e=p.slice(g,d),o=p.charCodeAt(d);t.keywords.hasOwnProperty(e)?f(n.Keyword,e):34==o||39==o?v(e):f(n.Id,e)}function y(e){f(n.Op,e)}function k(e){let t=p.slice(g,d+1);if(2==t.length&&o.hasOwnProperty(t)){let n=p.slice(g,d+2);3==n.length&&o.hasOwnProperty(n)?(d+=2,e=o[n]):(d++,e=o[t])}y(e)}function b(e){switch(e){case 97:return 7;case 98:return 8;case 102:return 12;case 110:return 10;case 114:return 13;case 116:return 9;case 118:return 11;default:return 0}}function v(o){const r=p.charCodeAt(d++);let i=!1;p.charCodeAt(d)==r&&p.charCodeAt(d+1)==r&&(d+=2,i=!0);let s=(o=o.toLowerCase()).indexOf("r")>=0,a="",l="";for(;;){const n=p.charCodeAt(d++);if(n==r){if(!i)break;if(p.charCodeAt(d)==r&&p.charCodeAt(d+1)==r){d+=2;break}l+="\\"+String.fromCharCode(r),a+=String.fromCharCode(r)}else if(92==n){let n=p.charCodeAt(d++);if(13==n&&10==p.charCodeAt(d)&&(n=10,d++),34==n||39==n||92==n)s&&(l+="\\",a+="\\"),l+="\\"+String.fromCharCode(n),a+=String.fromCharCode(n);else if(!s&&b(n))l+="\\"+String.fromCharCode(n),a+=String.fromCharCode(b(n));else if(t.rx.isNewline(n))s&&(a+="\\"+String.fromCharCode(n),l+="\\\\",l+=10==n?"\\n":"\\u"+("0000"+n.toString(16)).slice(-4));else if(s||48!=n)if(s||117!=n&&120!=n)l+="\\\\"+String.fromCharCode(n),a+="\\"+String.fromCharCode(n);else{let t=117==n?4:2,o=p.slice(d,d+t);d+=t;let r=parseInt(o,16);isNaN(r)&&_(e.U.lf("invalid unicode or hex escape")),l+="\\"+String.fromCharCode(n)+o,a+=String.fromCharCode(r)}else l+="\\\\x00",a+="\0"}else{if(isNaN(n)){_(e.U.lf("end of file in a string"));break}if(t.rx.isNewline(n)&&!i){_(e.U.lf("new line in a string"));break}a+=String.fromCharCode(n),l+=String.fromCharCode(n)}}let c=f(n.String,a);c.quoted=l,c.stringPrefix=o}function T(){d--,v("")}function E(){f(n.NewLine,""),S()}function S(){let e=0;for(;;){const t=p.charCodeAt(d);if(9!=t){if(32!=t)break;e++,d++}else e=e+8&-8,d++}f(n.Indent,""+e)}function C(){let n=p.charCodeAt(d);t.rx.isNewline(n)?(d++,13==n&&10==p.charCodeAt(d)&&d++):_(e.U.lf("unexpected character after line continuation character"))}function x(){for(f(n.NewLine,"");d<p.length&&!t.rx.isNewline(p.charCodeAt(d));)d++;f(n.Comment,p.slice(g+1,d)),13==p.charCodeAt(d)&&10==p.charCodeAt(d+1)&&d++,d++,S()}function B(){let t=p[g],o="";if("0"==t){let r=p[d];const i=l[r];if(i){for(d++;;){const e=p[d];if(!i.test(e))break;o+=e,d++}if(o){let i=parseInt(o,c[r]);isNaN(i)&&_(e.U.lf("invalid number")),f(n.Number,t+r+o,i)}else _(e.U.lf("expecting numbers to follow 0b, 0o, 0x"));return}}let r=!1,i=!1,s=!1;for(d=g;;){const e=p.charCodeAt(d);if(!s||43!=e&&45!=e)if(s=!1,95==e||I(e));else if(i||r||46!=e){if(i||69!=e&&101!=e)break;i=!0,s=!0}else r=!0;else;o+=String.fromCharCode(e),d++}!r&&!i&&"0"==t&&o.length>1&&!/^0+/.test(o)&&_(e.U.lf("unexpected leading zero"));let a=parseFloat(o);isNaN(a)&&_(e.U.lf("invalid number")),f(n.Number,o,a)}function A(){I(p.charCodeAt(d))?B():f(n.Op,"Dot")}function I(e){return 48<=e&&e<=57}function D(){_(e.U.lf("invalid token"))}}}(e.py||(e.py={}))}(pxt||(pxt={})),function(e){!function(t){let n,o,r,i,s,a,l,c,u;function p(){return o[s]}function d(){for(;o[s];s++){let r=o[s];if(r.type!=t.TokenType.Comment){if(n>=0&&r.type==t.TokenType.Op)switch(r.value){case"LParen":case"LSquare":case"LBracket":n++;break;case"RParen":case"RSquare":case"RBracket":n--}if(r.type!=t.TokenType.Error){if(n>0){if(r.type==t.TokenType.NewLine||r.type==t.TokenType.Indent)continue}else if(r.type==t.TokenType.Indent){if(o[s+1].type==t.TokenType.NewLine){s++;continue}let n=parseInt(r.value),i=l[l.length-1];if(n==i)continue;if(n>i)return void l.push(n);{r.type=t.TokenType.Dedent;let i=0;for(;l.length;){let t=l[l.length-1];if(!(t>n)){for(t!=n&&h(9552,e.U.lf("inconsitent indentation"));i>1;)o.splice(s,0,r),i--;return}l.pop(),i++}}}return}h(9551,r.value)}else a.push(r)}}function g(){c=p(),c.type!=t.TokenType.EOF&&(s++,d())}function h(n,o){o||(o=e.U.lf("invalid syntax")),n||(n=9550);const s=p(),a={code:n,category:pxtc.DiagnosticCategory.Error,messageText:e.U.lf("{0} near {1}",o,t.friendlyTokenToString(s,r)),fileName:i,start:s.startPos,length:s.endPos?s.endPos-s.startPos:0,line:0,column:0};t.patchPosition(a,r),u.push(a),9572!=n&&u.length>100&&e.U.userError(e.U.lf("too many parse errors"))}function f(n,o){const r=p();(r.type==n&&r.value==o||(h(9553,e.U.lf("expecting {0}",t.tokenToString(function(e,t){return{type:e,value:t,startPos:0,endPos:0}}(n,o)))),r.type!=t.TokenType.NewLine))&&g()}function _(){f(t.TokenType.NewLine,"")}function m(e){f(t.TokenType.Keyword,e)}function y(e){f(t.TokenType.Op,e)}function k(){let e=p();return e.type==t.TokenType.Keyword?e.value:""}function b(){let e=p();return e.type==t.TokenType.Op?e.value:""}const v={if:function e(){let t=S("If");g(),t.test=z(),t.body=E(),"elif"==k()?t.orelse=[e()]:t.orelse=x();return C(t)},while:function(){let e=S("While");return m("while"),e.test=z(),e.body=E(),e.orelse=x(),C(e)},for:function(){let e=S("For");return m("for"),e.target=U(),H(e.target),m("in"),e.iter=F(),e.body=E(),e.orelse=x(),C(e)},try:function(){let e=S("Try");m("try"),e.body=E(),e.handlers=[];let t=!1;for(;"except"==k();){let n=S("ExceptHandler");e.handlers.push(n),g(),"Colon"!=b()?(t&&h(),n.type=z(),"as"==k()?(g(),n.name=ke()):n.name=void 0):(t=!0,n.type=void 0,n.name=void 0),n.body=E()}e.orelse=x(),0==e.handlers.length&&e.orelse.length&&h();"finally"==k()?(g(),e.finalbody=E()):e.finalbody=[];return C(e)},with:function(){let t=S("With");return m("with"),t.items=_e(e.U.lf("with item"),B),t.body=E(),C(t)},def:function(){let e=S("FunctionDef");m("def"),e.name=ke(),y("LParen"),e.args=K(!0),y("RParen"),e.returns=void 0,"Arrow"==b()&&(g(),e.returns=z());return e.body=E(),C(e)},class:function(){let e=S("ClassDef");if(m("class"),e.name=ke(),"LParen"==b()){let t=be();e.bases=t.args,e.keywords=t.keywords}else e.bases=[],e.keywords=[];return e.body=E(),C(e)}},T={del:function(){let t=S("Delete");return m("del"),t.targets=fe(e.U.lf("expression"),se),C(t)},pass:function(){let e=S("Pass");return m("pass"),C(e)},break:function(){let e=S("Break");return g(),C(e)},continue:function(){let e=S("Continue");return g(),C(e)},return:function(){let e=S("Return");g(),I()?e.value=void 0:e.value=F();return C(e)},raise:function(){let e=S("Raise");m("raise"),e.exc=void 0,e.cause=void 0,I()||(e.exc=z(),"from"==k()&&(g(),e.cause=z()));return C(e)},global:D,nonlocal:function(){let e=D();return e.kind="Nonlocal",e},import:function(){let t=S("Import");return g(),t.names=_e(e.U.lf("import name"),w),C(t)},from:function(){let n=S("ImportFrom");g(),n.level=O(),p().type==t.TokenType.Id?n.module=N():n.module=void 0;n.level||n.module||h();if(m("import"),"Mult"==b()){g();let e=S("Alias");e.name="*",n.names=[e]}else"LParen"==b()?(g(),n.names=fe(e.U.lf("import name"),R),y("RParen")):n.names=fe(e.U.lf("import name"),R);return C(n)},assert:function(){let e=S("Assert");g(),e.test=z(),"Comma"==b()?(g(),e.msg=z()):e.msg=void 0;return C(e)},yield:function(){p();if(g(),"from"==k()){let e=S("YieldFrom");return e.value=z(),A(C(e))}let e=S("Yield");I()||(e.value=F());return A(C(e))}};function E(){return y("Colon"),function(){if(p().type==t.TokenType.NewLine){let n;if(g(),p().type!=t.TokenType.Indent)h(9554,e.U.lf("expected an indented block")),n=W();else{const o=parseInt(p().value);for(g(),n=W();;){if(p().type==t.TokenType.Dedent){const e=isNaN(o)||parseInt(p().value)<o;if(g(),e)break}if(e.U.pushRange(n,W()),p().type==t.TokenType.EOF)break}}return n}return G()}()}function S(e,t){let n=t||p();return{startPos:n.startPos,endPos:n.endPos,kind:e}}function C(e){return e.endPos=c.endPos,e}function x(){return"else"==k()?(g(),E()):[]}function B(){let e=S("WithItem");return e.context_expr=z(),e.optional_vars=void 0,"as"==k()&&(g(),e.optional_vars=se()),C(e)}function A(e){let t=S("ExprStmt");return t.startPos=e.startPos,t.endPos=e.endPos,t.value=e,t}function I(){let e=p();return e.type==t.TokenType.NewLine||e.type==t.TokenType.Op&&"Semicolon"==e.value}function D(){let e=S("Global");for(g(),e.names=[];e.names.push(ke()),"Comma"==b();)g();return C(e)}function N(){let e="";for(;;){if(e+=ke(),"Dot"!=b())return e;e+=".",g()}}function w(){let e=S("Alias");return e.name=N(),"as"==k()?(g(),e.asname=ke()):e.asname=void 0,C(e)}function R(){let e=S("Alias");return e.name=ke(),"as"==k()?(g(),e.asname=ke()):e.asname=void 0,C(e)}function O(){let e=0;for(;;)if("Dot"==b())e+=1,g();else{if("Ellipsis"!=b())return e;e+=3,g()}}function P(e,t){let n=S("Tuple",e);return n.elts=t,C(n)}function L(t){let n=p(),o=fe(e.U.lf("expression"),t),r=o[0];return 1!=o.length?P(n,o):r}function M(){return L(le)}function F(){return L(z)}function U(){return L(se)}function H(e){if("Tuple"==e.kind){e.elts.forEach(H)}else e.ctx="Store"}function V(){let n=e.U.lookup(T,k());return n?n():function(){let n=p(),o=M(),r=b();if("Assign"==r){let e=S("Assign");for(e.targets=[o];;){if(g(),o=M(),r=b(),"Assign"!=r){e.value=o;break}e.targets.push(o)}return e.targets.forEach(H),C(e)}if("Colon"==r){let e=S("AnnAssign");return e.target=o,g(),e.annotation=z(),"Assign"==b()&&(g(),e.value=z()),e.simple=n.type==t.TokenType.Id&&"Name"==o.kind?1:0,H(e.target),C(e)}if(e.U.endsWith(r,"Assign")){let e=S("AugAssign");return e.target=o,e.op=r.replace("Assign",""),g(),e.value=F(),H(e.target),C(e)}if("Semicolon"==r||p().type==t.TokenType.NewLine){let e=S("ExprStmt");return e.value=o,C(e)}return h(9555,e.U.lf("unexpected token")),g(),null}()}function G(){let e=[V()];for(;"Semicolon"==b()&&(g(),p().type!=t.TokenType.NewLine);)e.push(V());return _(),e.filter((e=>!!e))}function W(){const o=u.length,r=p().type==t.TokenType.Indent;r&&(g(),h(9573,e.U.lf("unexpected indent")));let i=[];for(;"MatMult"==b();)g(),i.push(Te()),_();let s=k(),l=e.U.lookup(v,k()),d=[],f=a;if(a=[],"class"==s||"def"==s){let e=l();e.decorator_list=i,d=[e]}else i.length?h(9556,e.U.lf("decorators not allowed here")):d=l?[l()]:G();f.length&&d.length&&(d[0]._comments=f);if(u.length>o){for(n=-1;c.type!=t.TokenType.Dedent&&c.type!=t.TokenType.NewLine&&(g(),p().type!=t.TokenType.EOF););r&&p().type===t.TokenType.Dedent&&g(),n=0}return d}function K(n){let o=S("Arguments");for(o.args=[],o.defaults=[],o.kwonlyargs=[],o.kw_defaults=[],o.vararg=void 0;;){let n=b();if("Colon"==n||"RParen"==n)break;if("Mult"==n)o.vararg&&h(9557,e.U.lf("multiple *arg")),g(),p().type==t.TokenType.Id?o.vararg=r():o.vararg=void 0;else if("Pow"==n)o.kwarg&&h(9558,e.U.lf("multiple **arg")),g(),o.kwarg=r();else{o.kwarg&&h(9559,e.U.lf("arguments after **"));let t,n=r();"Assign"==b()&&(g(),t=z()),void 0!==o.vararg&&t?(o.kwonlyargs.push(n),o.kw_defaults.push(t)):(o.args.push(n),t?o.defaults.push(t):o.defaults.length&&h(9560,e.U.lf("non-default argument follows default argument")))}if("Comma"!=b())break;g()}return o.kwarg||(o.kwarg=void 0),o.vararg||(o.vararg=void 0),C(o);function r(){let e=S("Arg");return e.arg=ke(),e.annotation=void 0,n&&"Colon"==b()&&(g(),e.annotation=z()),e}}function j(e){let t=S("Lambda");return g(),t.args=K(!1),y("Colon"),t.body=e?ce():z(),C(t)}function z(){if("lambda"==k())return j();let e=p(),t=Y();if("if"==k()){let n=S("IfExp",e);return n.body=t,m("if"),n.test=Y(),m("else"),n.orelse=z(),C(n)}return t}function $(e,t){let n=p(),o=t();if(k()==e){let r=S("BoolOp",n);for(r.op="or"==e?"Or":"And",r.values=[o];k()==e;)m(e),r.values.push(t());return C(r)}return o}function X(){return $("and",J)}function Y(){return $("or",X)}function J(){if("not"==k()){let e=S("UnaryOp");return g(),e.op="Not",e.operand=J(),C(e)}return function(){let e=p(),t=se();if(!Z())return t;let n=S("Compare",e);n.left=t,n.comparators=[],n.ops=[];for(;;){let e=Z();if(!e)break;g(),"NotIn"==e?m("in"):"Is"==e&&"not"==k()&&(g(),e="IsNot"),n.ops.push(e),n.comparators.push(se())}return C(n)}()}const q={Lt:"Lt",Gt:"Gt",Eq:"Eq",GtE:"GtE",LtE:"LtE",NotEq:"NotEq",in:"In",not:"NotIn",is:"Is"};function Z(){return q[b()]||q[k()]||null}const Q={Invert:"Invert",Sub:"USub",Add:"UAdd"};function ee(e,t){let n=p(),o=e();for(;;){let r=b();if(!(r&&t.indexOf(","+r+",")>=0))return o;{let t=S("BinOp",n);t.left=o,t.op=r,g(),t.right=e(),o=t}}}function te(){return ee(Ee,",Mult,MatMult,Div,Mod,FloorDiv,")}function ne(){return ee(te,",Add,Sub,")}function oe(){return ee(ne,",LShift,RShift,")}function re(){return ee(oe,",BitAnd,")}function ie(){return ee(re,",BitXor,")}function se(){return ee(ie,",BitOr,")}function ae(){let t,n=p();if("Colon"!=b()&&(t=z()),"Colon"==b()){let e=S("Slice",n);e.lower=t,g();let o=b();return e.upper="Colon"!=o&&"Comma"!=o&&"RSquare"!=o?z():void 0,e.step=void 0,"Colon"==b()&&(g(),o=b(),"Comma"!=o&&"RSquare"!=o&&(e.step=z())),C(e)}{t||h(9570,e.U.lf("unable to parse lower subscript"));let n=S("Index");return n.value=t,C(n)}}function le(){if("Mult"==b()){let e=S("Starred");return e.value=se(),C(e)}return z()}function ce(){return"lambda"==k()?j(!0):Y()}function ue(){let e=[];for(;;){let t=S("Comprehension");for(t.is_async=0,e.push(t),m("for"),t.target=U(),H(t.target),m("in"),t.iter=Y(),t.ifs=[];"if"==k();)g(),t.ifs.push(ce());if("for"!=k())return e}}function pe(){let t=p();if("Mult"==b()){let e=S("Starred");return g(),e.value=z(),C(e)}if("Pow"==b()){let e=S("Keyword");return g(),e.arg=void 0,e.value=z(),C(e)}let n=z();if("Assign"==b()){"Name"!=n.kind&&h(9561,e.U.lf("invalid keyword argument; did you mean ==?")),g();let o=S("Keyword",t);return o.arg=n.id||"???",o.value=z(),C(o)}if("for"==k()){let e=S("GeneratorExp",t);return e.elt=n,e.generators=ue(),C(e)}return n}function de(){let e=S("NameConstant");return e.value=null,g(),C(e)}function ge(){let n=p();if(n.type==t.TokenType.Id){let e=S("Name");return g(),e.id=n.value,e.ctx="Load",C(e)}if(n.type==t.TokenType.Number){let e=S("Num");return g(),e.ns=n.value,e.n=n.auxValue,C(e)}if(n.type==t.TokenType.String){g();let o=n.value;for(;p().type==t.TokenType.String;)o+=p().value,g();if("b"==n.stringPrefix){let t=S("Bytes",n);return t.s=e.U.toArray(e.U.stringToUint8Array(o)),C(t)}{let e=S("Str",n);return e.s=o,C(e)}}if(n.type==t.TokenType.Keyword){if("None"==n.value||"True"==n.value||"False"==n.value){let e=S("NameConstant");return g(),e.value="True"==n.value||"False"!=n.value&&null,C(e)}return h(9564,e.U.lf("expecting atom")),de()}if(n.type==t.TokenType.Op){let t=n.value;return"LParen"==t?ye("RParen","Tuple","GeneratorExp"):"LSquare"==t?ye("RSquare","List","ListComp"):"LBracket"==t?function(){let t=p();if(g(),"Pow"==b())return g(),o(void 0,se());if("RBracket"==b()){let e=S("Dict",t);return g(),e.keys=[],e.values=[],C(e)}{let n=le();return"Starred"!=n.kind&&"Colon"==b()?(g(),o(n,z())):function(n){if("for"==k()){"Starred"==n.kind&&h(9562,e.U.lf("iterable unpacking cannot be used in comprehension"));let o=S("SetComp",t);return o.elt=n,o.generators=ue(),C(o)}let o=S("Set",t);if(o.elts=[n],"Comma"==b()){let t=me("RBracket",e.U.lf("set element"),le);o.elts=[n].concat(t)}else y("RBracket");return C(o)}(n)}function n(){if("Pow"==b())return g(),[null,se()];{let e=z();return y("Colon"),[e,z()]}}function o(o,r){if("for"==k()){o||h(9563,e.U.lf("dict unpacking cannot be used in dict comprehension"));let n=S("DictComp",t);return n.key=o,n.value=r,n.generators=ue(),C(n)}let i=S("Dict",t);if(i.keys=[o],i.values=[r],"Comma"==b()){let t=me("RBracket",e.U.lf("dict element"),n);for(let e of t)e.length>=2&&e[0]&&e[1]&&(i.keys.push(e[0]),i.values.push(e[1]))}else y("RBracket");return C(i)}}():(h(9565,e.U.lf("unexpected operator")),de())}return h(9566,e.U.lf("unexpected token")),de()}function he(){let n=b();return"RParen"==n||"RSquare"==n||"RBracket"==n||"Colon"==n||"Semicolon"==n||(!!e.U.endsWith(n,"Assign")||("in"==k()||p().type==t.TokenType.NewLine))}function fe(t,n){let o=[];if(he())return o;for(;;){o.push(n());let r="Comma"==b();if(r&&g(),he())return o;if(!r)return h(9567,e.U.lf("expecting {0}",t)),o}}function _e(e,t){let n=[];for(;n.push(t()),"Comma"==b();)g();return n}function me(t,n,o){g();let r=[];if(b()!=t)for(;;){r.push(o());let i="Comma"==b();if(i&&g(),b()==t)break;if(!i){h(9568,e.U.lf("expecting {0}",n));break}}return y(t),r}function ye(t,n,o){let r=p();if(g(),b()==t){g();let e=S(n,r);return e.elts=[],C(e)}let i=le();if("for"==k()){let e=S(o,r);return e.elt=i,e.generators=ue(),y(t),C(e)}if("Comma"==b()){let o=S(n,r);return g(),o.elts=fe(e.U.lf("expression"),le),o.elts.unshift(i),y(t),C(o)}if(y(t),"List"==n){let e=S(n,r);return e.elts=[i],C(e)}return i}function ke(){let n=p();return n.type!=t.TokenType.Id&&h(9569,e.U.lf("expecting identifier")),g(),n.value}function be(){let t=me("RParen",e.U.lf("argument"),pe),n=[],o=[];for(let r of t)"Keyword"==r.kind?o.push(r):(o.length&&h(9570,e.U.lf("positional argument follows keyword argument")),n.push(r));return{args:n,keywords:o}}function ve(t,n){let o=b();if("LParen"==o){let e=S("Call",t);e.func=n;let o=be();return e.args=o.args,e.keywords=o.keywords,C(e)}if("LSquare"==o){let o=p(),r=S("Subscript",t);r.value=n;let i=me("RSquare",e.U.lf("subscript"),ae);if(0==i.length)h(9571,e.U.lf("need non-empty index list"));else if(1==i.length)r.slice=i[0];else if(i.every((e=>"Index"==e.kind))){let e=i[0];e.value=P(o,i.map((e=>e.value))),r.slice=e}else{let e=S("ExtSlice",o);e.dims=i,r.slice=C(e)}return C(r)}if("Dot"==o){let e=S("Attribute",t);return e.value=n,g(),e.attr=ke(),C(e)}return n}function Te(){let e=p(),t=ge();for(;;){let n=ve(e,t);if(n===t)return t;t=n}}function Ee(){if(Q[b()]){let e=S("UnaryOp");return e.op=Q[b()],g(),e.operand=Ee(),C(e)}return function(){p();let e=Te();if("Pow"==b()){let t=S("BinOp");return g(),t.left=e,t.op="Pow",t.right=Ee(),C(t)}return e}()}const Se={kind:1,id:2,n:3,s:4,func:5,key:6,elt:7,elts:8,keys:9,left:10,ops:11,comparators:12,names:13,items:14,test:15,targets:16,dims:17,context_expr:18,name:19,bases:20,type:21,inClass:22,target:23,annotation:24,simple:25,op:26,operand:27,right:28,values:29,iter:30,ifs:31,is_async:32,value:33,slice:34,attr:35,generators:36,args:37,keywords:38,body:39,handlers:40,orelse:41,finalbody:42,decorator_list:43,kwonlyargs:44,kw_defaults:45,defaults:46,arg:47},Ce={lineno:1,col_offset:1,startPos:1,endPos:1,kind:1},xe={body:1,orelse:1,finalbody:1},Be={_comments:1,ctx:1,ns:1};t.dump=function(t,n=!1){const o=(t,r)=>{if(Array.isArray(r)){let e="";for(let n=0;n<r.length;++n)n>0&&(e+=", "),e+=o(t,r[n]);return"["+e+"]"}if(!r||!r.kind)return JSON.stringify(r);let i="",s=Object.keys(r);s.sort(((t,n)=>(Se[t]||100)-(Se[n]||100)||e.U.strcmp(t,n)));for(let a of s)if(!(e.U.lookup(Ce,a)||n&&e.U.lookup(Be,a)))if(i&&(i+=", "),i+=a+"=",Array.isArray(r[a])&&r[a].length&&e.U.lookup(xe,a)){i+="[\n";let e=t+"  ";for(let t of r[a])i+=e+o(e,t)+"\n";i+=t+"]"}else if("_comments"==a){i+="[\n";let e=t+"  ";for(let t of r[a])i+=e+JSON.stringify(t.value)+"\n";i+=t+"]"}else i+=o(t,r[a]);return r.kind+"("+i+")"};let r="";for(let e of t)r+=o("",e)+"\n";return r},t.parse=function(g,f,_){r=g,i=f,o=_,n=0,s=0,a=[],l=[0],u=[];let m=[];try{if(c=o[0],d(),p().type!=t.TokenType.EOF)for(m=W();p().type!=t.TokenType.EOF;)e.U.pushRange(m,W())}catch(t){h(9572,e.U.lf("exception: {0}",t.message))}return{stmts:m,diagnostics:u}}}(e.py||(e.py={}))}(pxt||(pxt={})),function(e){!function(t){function n(e,t,n){const o={fileName:e.getSourceFile().fileName,start:e.getStart(),length:e.getEnd()-e.getStart(),line:void 0,column:void 0,code:t,category:pxtc.DiagnosticCategory.Error,messageText:n},r=new Error(n);throw r.pyDiagnostic=o,r}t.decompileToPython=function(o,r){let i={blocksInfo:void 0,outfiles:{},diagnostics:[],success:!0,times:{}};try{let s=function(o,r){const i=o.getTypeChecker(),s=(new ts.pxtc.LSHost(o),o.getSourceFile(r)),a=pxtc.decompiler.buildCommentMap(s),l=e.U.toSet(h(),(e=>e)),[c,u]=ts.pxtc.decompiler.buildRenameMap(o,s,{takenNames:l,declarations:"all"}),p=pxtc.getApiInfo(o),d=e.U.mapMap(p.byQName,((e,t)=>t.fileName==r?void 0:t)),g=t.computeScopeVariableLookup(s);return E(s);function h(){return["ArithmeticError","AssertionError","AttributeError","BaseException","BlockingIOError","BrokenPipeError","BufferError","BytesWarning","ChildProcessError","ConnectionAbortedError","ConnectionError","ConnectionRefusedError","ConnectionResetError","DeprecationWarning","EOFError","Ellipsis","EnvironmentError","Exception","False","FileExistsError","FileNotFoundError","FloatingPointError","FutureWarning","GeneratorExit","IOError","ImportError","ImportWarning","IndentationError","IndexError","InterruptedError","IsADirectoryError","KeyError","KeyboardInterrupt","LookupError","MemoryError","NameError","None","NotADirectoryError","NotImplemented","NotImplementedError","OSError","OverflowError","PendingDeprecationWarning","PermissionError","ProcessLookupError","RecursionError","ReferenceError","ResourceWarning","RuntimeError","RuntimeWarning","StopAsyncIteration","StopIteration","SyntaxError","SyntaxWarning","SystemError","SystemExit","TabError","TimeoutError","True","TypeError","UnboundLocalError","UnicodeDecodeError","UnicodeEncodeError","UnicodeError","UnicodeTranslateError","UnicodeWarning","UserWarning","ValueError","Warning","ZeroDivisionError","_","__build_class__","__debug__","__doc__","__import__","__loader__","__name__","__package__","__spec__","abs","all","any","ascii","bin","bool","bytearray","bytes","callable","chr","classmethod","compile","complex","copyright","credits","delattr","dict","dir","divmod","enumerate","eval","exec","exit","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","license","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","quit","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip",...Object.keys(e.py.keywords)]}function f(e){if(!e.getSourceFile())return null;let t=e.getText();return d[t]||null}function _(e){if(!e.getSourceFile())return null;let t=e.getText();const n=i.getSymbolAtLocation(e);n&&(t=i.getFullyQualifiedName(n));let o=d[t];if(o&&o.attributes.alias)return o.attributes.alias;if(o&&o.pyQName){if(o.isInstance){if(ts.isPropertyAccessExpression(e))return null;const t=new RegExp(`(?:^|.)${o.namespace}.(.+)`).exec(o.pyQName);if(t)return t[1]}return o.pyQName}return t in pxtc.ts2PyFunNameMap?pxtc.ts2PyFunNameMap[t].n:null}function m(t){let o=_(t);if(o)return o;if(!ts.isIdentifier(t))return e.tickEvent("depython.todo.advancedname"),n(t,3001,"Unsupported advanced name format: "+t.getText());let r=t.text;if(t.getSourceFile()){const e=c.getRenameForPosition(t.getStart());e&&(r=e.name)}return r}function y(e){return"string"!=typeof e&&(e=m(e)),u[e]?pxtc.decompiler.getNewName(e,u):(u[e]=!0,e)}function k(e,t){return 0!=(e.flags&t)}function b(e,t){return k(i.getTypeAtLocation(e),t)}function v(e){return b(e,ts.TypeFlags.StringLike)}function T(e){return b(e,ts.TypeFlags.NumberLike)}function E(e){let t=e.getChildren().map(S).reduce(((e,t)=>e.concat(t)),[]).reduce(((e,t)=>t||e[e.length-1]?[...e,t]:e),[]);return a.filter((e=>!e.owner)).forEach((e=>t.push(...C(e)))),t.join("\n")}function S(e){switch(e.kind){case ts.SyntaxKind.SyntaxList:return e._children.map(S).reduce(((e,t)=>e.concat(t)),[]);case ts.SyntaxKind.EndOfFileToken:case ts.SyntaxKind.OpenBraceToken:case ts.SyntaxKind.CloseBraceToken:return[];default:return x(e)}}function C(e){let t=[];if(e.kind===pxtc.decompiler.CommentKind.SingleLine)t.push("# "+e.text);else{t.push('"""');for(const n of e.lines)t.push(n);t.push('"""')}return t}function x(e){const t=B(e);return pxtc.decompiler.getCommentsForStatement(e,a).map(C).reduce(((e,t)=>e.concat(t)),[]).concat(t)}function B(t){return ts.isVariableStatement(t)?U(t):ts.isClassDeclaration(t)?H(t):ts.isEnumDeclaration(t)?V(t):ts.isExpressionStatement(t)?K(t):ts.isFunctionDeclaration(t)?z(t):ts.isIfStatement(t)?M(t):ts.isForStatement(t)?L(t):ts.isForOfStatement(t)?P(t):ts.isWhileStatement(t)?N(t):ts.isReturnStatement(t)?D(t):ts.isBlock(t)?j(t):ts.isTypeAliasDeclaration(t)?I(t):ts.isEmptyStatement(t)?[]:ts.isModuleDeclaration(t)?A(t):ts.isBreakStatement(t)?["break"]:ts.isContinueStatement(t)?["continue"]:(e.tickEvent("depython.todo.statement",{statement:t.kind}),n(t,3002,`Not supported in MakeCode Python: ${ts.SyntaxKind[t.kind]} (${t.kind})`))}function A(e){let n=m(e.name),o=e.body&&e.body.getChildren().map(S).reduce(((e,t)=>e.concat(t)),[]).map((e=>t.indent1(e)));return["@namespace",`class ${n}:`].concat(o||[])}function I(e){let t=pxtc.emitPyTypeFromTypeNode(e.type);return[`${m(e.name)} = ${t}`]}function D(e){if(!e.expression)return["return"];let[t,n]=ke(e.expression),o=q("return ",t);return n.concat(o)}function N(e){let[t,n]=ke(e.expression),o=O(e.statement),r=q("while ",t,":");return n.concat(r).concat(o)}function w(e){let t=Math.floor(Number(e));return t!==1/0&&String(t)===e}function R(e){if(!e.initializer)return null;if(e.initializer.kind!==ts.SyntaxKind.VariableDeclarationList)return null;let t=e.initializer;if(1!==t.declarations.length)return null;let n=t.declarations[0],o=m(n.name);if(!n.initializer||!me(n.initializer)||!T(n.initializer))return null;let[r,i]=ke(n.initializer);if(i.length)return null;let s=J(r);if(!e.condition)return null;if(!ts.isBinaryExpression(e.condition))return null;if(!ts.isIdentifier(e.condition.left))return null;if(m(e.condition.left)!=o)return null;if(!T(e.condition.right))return null;let[a,l]=ke(e.condition.right);if(l.length)return null;let c=J(a),u=c;if(e.condition.operatorToken.kind===ts.SyntaxKind.LessThanEqualsToken&&w(c))u=""+(Number(c)+1);else if(e.condition.operatorToken.kind!==ts.SyntaxKind.LessThanToken)return null;return e.incrementor&&(ts.isPostfixUnaryExpression(e.incrementor)||ts.isPrefixUnaryExpression(e.incrementor))?e.incrementor.operator!==ts.SyntaxKind.PlusPlusToken?null:s<u?{name:o,fromIncl:s,toExcl:u}:null:null}function O(e){let n=B(e).map(t.indent1);return n.length<1&&(n=[t.indent1("pass")]),n}function P(t){if(!ts.isVariableDeclarationList(t.initializer))return e.tickEvent("depython.todo.forof.complexexp"),n(t,3003,"Unsupported expression in for..of initializer: "+t.initializer.getText());let o=t.initializer.declarations.map((e=>m(e.name)));if(1!==o.length)return e.tickEvent("depython.todo.forof.multidecl"),n(t,3004,"Unsupported multiple declerations in for..of: "+t.initializer.getText());let r=o[0],[i,s]=ke(t.expression),a=s;a=a.concat(q(`for ${r} in `,i,":"));let l=O(t.statement);return a=a.concat(l),a}function L(e){let n=R(e);if(n){let{name:t,fromIncl:o,toExcl:r}=n,i="0"===o?`for ${t} in range(${r}):`:`for ${t} in range(${o}, ${r}):`,s=O(e.statement);return[i].concat(s)}let o,r=[];if(e.initializer)if(ts.isVariableDeclarationList(e.initializer)){let t=e.initializer.declarations.map(X).reduce(((e,t)=>e.concat(t)),[]);r=r.concat(t)}else{let[t,n]=ke(e.initializer);r=r.concat(n).concat(t)}if(e.condition){let[t,n]=ke(e.condition);r=r.concat(n),o=J(t)}else o="True";let i=`while ${o}:`;r.push(i);let s=B(e.statement).map(t.indent1);if(0!==s.length||e.incrementor||(s=[t.indent1("pass")]),r=r.concat(s),e.incrementor){let n=W(e.incrementor);if(n)r=r.concat(n.map(t.indent1));else{let[n,o]=ke(e.incrementor);r=r.concat(o).concat(n.map(t.indent1))}}return r}function M(e){let{supportStmts:t,ifStmt:n,rest:o}=F(e);return t.concat([n]).concat(o)}function F(e){let t=[],[n,o]=ke(e.expression);t=t.concat(o);let r=`if ${J(n)}:`,i=[],s=O(e.thenStatement);if(i=i.concat(s),e.elseStatement)if(ts.isIfStatement(e.elseStatement)){let{supportStmts:n,ifStmt:o,rest:r}=F(e.elseStatement),s=`el${o}`;t=t.concat(n),i.push(s),i=i.concat(r)}else{i.push("else:");let t=O(e.elseStatement);i=i.concat(t)}return{supportStmts:t,ifStmt:r,rest:i}}function U(e){return e.declarationList.declarations.map(X).reduce(((e,t)=>e.concat(t)),[])}function H(t){return e.tickEvent("depython.todo.classes"),n(t,3016,"Unsupported: classes are not supported in Python right now.")}function V(o){let r=[];r.push(`class ${m(o.name)}(Enum):`);let i=o.members.every((e=>!!e.initializer)),s=!o.members.every((e=>!!e.initializer));if(!i&&!s)return e.tickEvent("depython.todo.enummix"),n(o,3005,"Unsupported enum decleration: has mixture of explicit and implicit initialization");if(i)return e.tickEvent("depython.todo.enuminit"),n(o,3006,"Unsupported: explicit enum initialization");let a=0;for(let e of o.members)r.push(t.indent1(`${m(e.name)} = ${a++}`));return r}function G(e){return!(!ts.isPrefixUnaryExpression(e)&&!ts.isPostfixUnaryExpression(e))&&(e.operator===ts.SyntaxKind.MinusMinusToken||e.operator===ts.SyntaxKind.PlusPlusToken)}function W(e){if(!G(e))return null;let[t,n]=ke(e.operand),o=e.operator===ts.SyntaxKind.MinusMinusToken?" -= 1":" += 1",r=n;return r.push(`${J(t)}${o}`),r}function K(e){let t=W(e.expression);if(t)return t;const[n,o]=ke(e.expression);return o.length?["",...o,...n,""]:[...o,...n]}function j(e){return e.getChildren().map(S).reduce(((e,t)=>e.concat(t)),[])}function z(o,r,i,s){let a=[];o.kind!==ts.SyntaxKind.MethodDeclaration&&o.kind!==ts.SyntaxKind.Constructor||a.push("self");let l=(i?se(o.parameters,i):o.parameters).map((e=>$(e,!s)));a=a.concat(l);let c,u=a.join(", "),p=[];if(r)c=r;else{if(!o.name)return e.tickEvent("depython.todo.anonymousfunc"),n(o,3012,"Unsupported: anonymous function decleration");c=m(o.name)}if(p.push(`def ${c}(${u}):`),!o.body)return e.tickEvent("depython.todo.funcwithoutbody"),n(o,3013,"Unsupported: function decleration without body");let d=[];if(ts.isBlock(o.body))d=j(o.body);else{let[e,t]=ke(o.body);d=d.concat(t),d.concat(e)}if(d.length){let e=g.getExplicitGlobals(o).map((e=>m(e)));e&&e.length&&d.unshift(`global ${e.join(", ")}`);let n=g.getExplicitNonlocals(o).map((e=>m(e)));n&&n.length&&d.unshift(`nonlocal ${n.join(", ")}`),p=p.concat(d.map(t.indent1))}else p.push(t.indent1("pass"));return p}function $(t,o=!0){let r=t.altName||m(t.name),i="";if(t.type&&o){let e=pxtc.emitPyTypeFromTypeNode(t.type);e&&-1===e.indexOf("(TODO")&&(i=`: ${e}`)}let s="";if(t.initializer){let[o,r]=ke(t.initializer);if(r.length)return e.tickEvent("depython.todo.complexinit"),n(t,3007,`Unsupported: complex expression in parameter default value not supported. Expression: ${t.initializer.getText()}`);s=` = ${J(o)}`}return`${r}${i}${s}`}function X(e){let t=[],n=m(e.name);if(e.initializer){let o,[r,i]=ke(e.initializer);if(t=t.concat(i),e.type){o=`${n}: ${pxtc.emitPyTypeFromTypeNode(e.type)} = ${J(r)}`}else o=`${n} = ${J(r)}`;return t.push(o),t}return t}function Y(e,t){return[[e],t||[]]}function J(e,t="\n"){return e.join(t)}function q(e="",t,n=""){return t[0]=e+t[0],t[t.length-1]=t[t.length-1]+n,t}function Z(t,o){switch(t){case ts.SyntaxKind.BarBarToken:return"or";case ts.SyntaxKind.AmpersandAmpersandToken:return"and";case ts.SyntaxKind.ExclamationToken:return"not";case ts.SyntaxKind.LessThanToken:return"<";case ts.SyntaxKind.LessThanEqualsToken:return"<=";case ts.SyntaxKind.GreaterThanToken:return">";case ts.SyntaxKind.GreaterThanEqualsToken:return">=";case ts.SyntaxKind.EqualsEqualsEqualsToken:case ts.SyntaxKind.EqualsEqualsToken:return"==";case ts.SyntaxKind.ExclamationEqualsEqualsToken:case ts.SyntaxKind.ExclamationEqualsToken:return"!=";case ts.SyntaxKind.EqualsToken:return"=";case ts.SyntaxKind.PlusToken:return"+";case ts.SyntaxKind.MinusToken:return"-";case ts.SyntaxKind.AsteriskToken:return"*";case ts.SyntaxKind.PlusEqualsToken:return"+=";case ts.SyntaxKind.MinusEqualsToken:return"-=";case ts.SyntaxKind.PercentToken:return"%";case ts.SyntaxKind.SlashToken:return"/";case ts.SyntaxKind.PlusPlusToken:case ts.SyntaxKind.MinusMinusToken:return e.tickEvent("depython.todo.unsupportedop",{op:t}),n(o,3008,"Unsupported ++ and -- in an expression (not a statement or for loop)");case ts.SyntaxKind.AmpersandToken:return"&";case ts.SyntaxKind.CaretToken:return"^";case ts.SyntaxKind.LessThanLessThanToken:return"<<";case ts.SyntaxKind.GreaterThanGreaterThanToken:return">>";case ts.SyntaxKind.GreaterThanGreaterThanGreaterThanToken:return e.tickEvent("depython.todo.unsupportedop",{op:t}),n(o,3009,"Unsupported operator: >>>");case ts.SyntaxKind.AsteriskAsteriskToken:return"**";case ts.SyntaxKind.AsteriskAsteriskEqualsToken:return"**=";case ts.SyntaxKind.PercentEqualsToken:return"%=";case ts.SyntaxKind.AsteriskEqualsToken:return"*=";case ts.SyntaxKind.SlashEqualsToken:return"/=";default:return e.tickEvent("depython.todo.unsupportedop",{op:t}),n(o,3008,`Unsupported Python operator (code: ${t})`)}}function Q(e){let t=v(e.left),n=v(e.right),o=e.operatorToken.kind===ts.SyntaxKind.PlusToken&&(t||n),[r,i]=ke(e.left);o&&!t&&(r=q("str(",r,")"));let s=Z(e.operatorToken.kind,e),[a,l]=ke(e.right);o&&!n&&(a=q("str(",a,")"));let c=i.concat(l);return[q(J(r)+" "+s+" ",a),c]}function ee(e){let t=_(e);if(t)return Y(t);let[n,o]=ke(e.expression),r=m(e.name);return Y("length"===r?`len(${J(n)})`:`${J(n)}.${r}`,o)}function te(e){if(ts.isPropertyAccessExpression(e)){let t=m(e.name),n=t.substr(t.lastIndexOf(".")+1);return ts.isIdentifier(e.expression)?[n]:te(e.expression).concat([n])}return ts.isIdentifier(e)?[m(e)]:[]}function ne(t,n,o,r){let s="";n&&(s=te(n).map(e.U.snakify).join("_"));let a=[];if(o&&o.length>1&&r&&r.length>1)for(let t=0;t<o.length&&t<r.length;t++){let n=r[t];if(k(i.getTypeAtLocation(n),ts.TypeFlags.EnumLike)){let t=te(n).map(e.U.snakify);a=a.concat(t)}}let l=a.join("_"),c="";s||l||!t||(c=m(t.name));let u=([s,l,c].filter((e=>e)).map(e.U.snakify).map((e=>e.toLowerCase())).join("_")||"my_callback").split("_");u.length>4&&(u=d(u));let p=e.U.toDictionary(["any","on","event"],(e=>e));for(;u.length>2;){let e=g(u,p);if(e.length==u.length)break;u=e}return u=["on",...u],u.join("_");function d(e){let t={},n=[];for(let o of e)o in t||(t[o]=!0,n.push(o));return n}function g(e,t){let n=[],o=!1;for(let r of e)!(r in t)||o?n.push(r):o=!0;return n}}function oe(e){let n=e.join(", ");return n.length>60&&e.length>1?e.map(((n,o)=>{let r=","==n.charAt(n.length-1)?"":",";if(0==o){let e=n.split("\n");if(e.length>1){n=e.shift()+"\n"+t.indent1(e.join("\n"))}return n+r}return o==e.length-1?t.indent1(n):t.indent1(n+r)})):[n]}function re(e,t,n,o,r){if((ts.isFunctionExpression(e)||ts.isArrowFunction(e))&&t&&t.type&&ts.isFunctionTypeNode(t.type)){let i;return ae(e,ne(t,n,o,r),i,!0)}return ke(e)}function ie(t){let o=i.getTypeAtLocation(t.expression),r=i.typeToTypeNode(o),s=ts.createNodeArray([]);if(ts.isFunctionTypeNode(r)&&(s=r.parameters,t.arguments&&s.length<t.arguments.length))return e.tickEvent("depython.todo.argparammismatch",{kind:t.kind}),n(t,3010,"TODO: Unsupported call site where caller the arguments outnumber the callee parameters: "+t.getText());const a=f(t.expression);if(t.arguments&&a&&"TD_ID"==a.attributes.shim)return ke(t.arguments[0]);if(ts.isPropertyAccessExpression(t.expression)&&"toString"===t.expression.name.getText()){const[e,n]=ke(t.expression.expression);return[q("str(",e,")"),n]}let[l,c]=ke(t.expression),u=J(l),p=(t.arguments||ts.createNodeArray()).map(((e,n,o)=>re(e,s[n],t.expression,s,o))),d=p.map((([e,t])=>t)).reduce(((e,t)=>e.concat(t)),c);if(0===u.indexOf("_py.py_")){if(p.length<=0)return e.tickEvent("depython.todo._pynoargs"),n(t,3014,"Unsupported: call expression has no arguments for _py.py_ fn");u=u.substr(7).split("_").filter(((e,t)=>0!==t)).join("_");return[q(`${p.shift()[0]}.${u}(`,oe(p.map((([e,t])=>e)).reduce(((e,t)=>e.concat(t)),[])),")"),d]}return[q(`${u}(`,oe(p.map((([e,t])=>e)).reduce(((e,t)=>e.concat(t)),[])),")"),d]}function se(e,t){let n=[],o={};for(let r=0;r<Math.max(e.length,t.length);r++){let i;if(e[r])i=e[r],o[m(i.name)]=!0;else{i=t[r];let e=m(i.name);o[e]&&(e=pxtc.decompiler.getNewName(e,o),i=Object.assign({altName:e},t[r]))}n.push(i)}return ts.createNodeArray(n,!1)}function ae(e,t,n,o){let r=e.name?m(e.name):y(t||"my_function");return Y(r,z(e,r,n,o))}function le(e){switch(e){case ts.SyntaxKind.ExclamationToken:return" ";case ts.SyntaxKind.PlusToken:case ts.SyntaxKind.MinusToken:return"";default:return" "}}function ce(e){let t=Z(e.operator,e),[n,o]=ke(e.operand);return Y(`${t}${le(e.operator)}${J(n)}`,o)}function ue(e){let t=Z(e.operator,e),[n,o]=ke(e.operand),r=le(e.operator);return Y(`${J(n)}${r}${t}`,o)}function pe(e){let t=e.elements.map(ke),n=t.map((([e,t])=>t)).reduce(((e,t)=>e.concat(t)),[]);return[q("[",oe(t.map((([e,t])=>e)).reduce(((e,t)=>e.concat(t)),[])),"]"),n]}function de(t){if(!t.argumentExpression)return e.tickEvent("depython.todo.accesswithoutexp"),n(t,3015,"Unsupported: element access expression without an argument expression");let[o,r]=ke(t.expression),[i,s]=ke(t.argumentExpression),a=r.concat(s);return Y(`${J(o)}[${J(i)}]`,a)}function ge(e){let[t,n]=ke(e.expression);return Y(`(${J(t)})`,n)}function he(e){if(ts.isNoSubstitutionTemplateLiteral(e))return Y(`"""\n${t.indent1(e.text.trim())}\n"""`);let[n,o]=ke(e.tag),[r,i]=ke(e.template),s=o.concat(i);return Y(`${J(n)}(${J(r)})`,s)}function fe(e){if("undefined"==e.text)return Y("None");return Y(m(e))}function _e(e,t){let n=e=>_e(e,t);return ts.isBinaryExpression(e)?n(e.left)&&n(e.right):ts.isPropertyAccessExpression(e)?n(e.expression):ts.isPrefixUnaryExpression(e)||ts.isPostfixUnaryExpression(e)?e.operator!==ts.SyntaxKind.PlusPlusToken&&e.operator!==ts.SyntaxKind.MinusMinusToken&&n(e.operand):ts.isParenthesizedExpression(e)?n(e.expression):ts.isArrayLiteralExpression(e)?e.elements.map(n).reduce(((e,t)=>e&&t),!0):ts.isElementAccessExpression(e)?n(e.expression)&&(!e.argumentExpression||n(e.argumentExpression)):t(e)}function me(e){return _e(e,(e=>{switch(e.kind){case ts.SyntaxKind.PropertyAccessExpression:case ts.SyntaxKind.BinaryExpression:case ts.SyntaxKind.ParenthesizedExpression:case ts.SyntaxKind.ArrayLiteralExpression:case ts.SyntaxKind.ElementAccessExpression:case ts.SyntaxKind.TrueKeyword:case ts.SyntaxKind.FalseKeyword:case ts.SyntaxKind.NullKeyword:case ts.SyntaxKind.UndefinedKeyword:case ts.SyntaxKind.NumericLiteral:case ts.SyntaxKind.StringLiteral:case ts.SyntaxKind.NoSubstitutionTemplateLiteral:return!0;case ts.SyntaxKind.CallExpression:case ts.SyntaxKind.NewExpression:case ts.SyntaxKind.FunctionExpression:case ts.SyntaxKind.ArrowFunction:case ts.SyntaxKind.Identifier:case ts.SyntaxKind.ThisKeyword:return!1;case ts.SyntaxKind.PrefixUnaryExpression:case ts.SyntaxKind.PostfixUnaryExpression:let t=e;return t.operator!==ts.SyntaxKind.PlusPlusToken&&t.operator!==ts.SyntaxKind.MinusMinusToken}return!1}))}function ye(e){let[t,n]=ke(e.condition),[o,r]=ke(e.whenTrue),[i,s]=ke(e.whenFalse),a=n.concat(r).concat(s);return Y(`${o} if ${J(t)} else ${J(i)}`,a)}function ke(t){if(ts.isBinaryExpression(t))return Q(t);if(ts.isPropertyAccessExpression(t))return ee(t);if(ts.isCallExpression(t))return ie(t);if(ts.isNewExpression(t))return ie(t);if(ts.isFunctionExpression(t)||ts.isArrowFunction(t))return ae(t);if(ts.isPrefixUnaryExpression(t))return ce(t);if(ts.isPostfixUnaryExpression(t))return ue(t);if(ts.isParenthesizedExpression(t))return ge(t);if(ts.isArrayLiteralExpression(t))return pe(t);if(ts.isElementAccessExpression(t))return de(t);if(ts.isNoSubstitutionTemplateLiteral(t)||ts.isTaggedTemplateExpression(t))return he(t);switch(t.kind){case ts.SyntaxKind.TrueKeyword:return Y("True");case ts.SyntaxKind.FalseKeyword:return Y("False");case ts.SyntaxKind.ThisKeyword:return Y("self");case ts.SyntaxKind.NullKeyword:case ts.SyntaxKind.UndefinedKeyword:return Y("None")}return ts.isIdentifier(t)?fe(t):ts.isNumericLiteral(t)||ts.isStringLiteral(t)?Y(t.getText()):ts.isConditionalExpression(t)?ye(t):(e.tickEvent("depython.todo.expression",{kind:t.kind}),n(t,3017,"Unsupported expression kind: "+t.kind))}}(o,r),a=r.replace(/(\.py)?\.\w*$/i,"")+".py";i.outfiles[a]=s}catch(t){t.pyDiagnostic?i.diagnostics=[t.pyDiagnostic]:e.reportException(t),i.success=!1}return i};function o(e){return n=>(n||"").split("\n").map((n=>`${t.INDENT.repeat(e)}${n}`)).join("\n")}t.INDENT="    ",t.indent=o,t.indent1=o(1)}(e.py||(e.py={}))}(pxt||(pxt={})),function(e){!function(e){!function(e){const t=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/;e.isIdentifierStart=function(e){return ts.pxtc.isIdentifierStart(e,ts.pxtc.ScriptTarget.ES5)},e.isIdentifierChar=function(e){return ts.pxtc.isIdentifierPart(e,ts.pxtc.ScriptTarget.ES5)},e.isSpace=function(e){return!!(32===e||9===e||11===e||12===e||160===e||e>=5760&&t.test(String.fromCharCode(e)))},e.isNewline=function(e){return 10===e||13===e||(8232===e||8233===e)}}(e.rx||(e.rx={}))}(e.py||(e.py={}))}(pxt||(pxt={})),function(e){!function(e){function t(e){const t={refs:[],children:[],owner:void 0};return function e(o){var r;if(!o)return t;if(ts.isPropertyAccessOrQualifiedName(o))return t;if(ts.isIdentifier(o))return{refs:[{kind:"read",node:o,varName:o.text}],children:[],owner:void 0};if(ts.isVariableDeclaration(o)||ts.isParameter(o)){const t=e(o.initializer);return{refs:[...t.refs,{kind:"decl",node:o,varName:o.name.getText()}],children:t.children,owner:void 0}}if(ts.isPrefixUnaryExpression(o)||ts.isPostfixUnaryExpression(o)){const t=e(o.operand),r=o.operand.getText();return n(t,{refs:[{kind:"assign",node:o,varName:r}],children:[],owner:void 0})}if(function(e){const t=[ts.SyntaxKind.EqualsToken,ts.SyntaxKind.PlusEqualsToken,ts.SyntaxKind.MinusEqualsToken,ts.SyntaxKind.AsteriskEqualsToken,ts.SyntaxKind.AsteriskAsteriskEqualsToken,ts.SyntaxKind.SlashEqualsToken,ts.SyntaxKind.PercentEqualsToken,ts.SyntaxKind.LessThanLessThanEqualsToken,ts.SyntaxKind.GreaterThanGreaterThanEqualsToken,ts.SyntaxKind.GreaterThanGreaterThanGreaterThanEqualsToken,ts.SyntaxKind.AmpersandEqualsToken,ts.SyntaxKind.BarEqualsToken,ts.SyntaxKind.CaretEqualsToken];return ts.isBinaryExpression(e)&&t.some((t=>e.operatorToken.kind===t))}(o)){const t=e(o.right);let r;o.operatorToken.kind!==ts.SyntaxKind.EqualsToken&&(r=e(o.left));const i=o.left.getText();return n(r,n(t,{refs:[{kind:"assign",node:o,varName:i}],children:[],owner:void 0}))}if(ts.isFunctionExpression(o)||ts.isArrowFunction(o)||ts.isFunctionDeclaration(o)||ts.isMethodDeclaration(o)){const i=null===(r=o.name)||void 0===r?void 0:r.getText();let s;i&&(s={kind:"decl",node:o,varName:i});const a=o.parameters.map((t=>e(t))).reduce(n,t),l=e(o.body),c=n(a,l);return c.owner=o,{refs:s?[s]:[],children:[c],owner:void 0}}return o.getChildren().map(e).reduce(n,t)}(e);function n(e,n){return e&&n?{refs:[...e.refs,...n.refs],children:[...e.children,...n.children],owner:e.owner||n.owner}:e||n||t}}function n(e,t,o=[]){const r=[],i=[],s=[],a=[],l={};for(const n of e.refs)"read"===n.kind||"assign"===n.kind?l[n.varName]?s.push(n):p(n)?i.push(n):t&&t[n.varName]?r.push(n):a.push(n):l[n.varName]=n;const c=t||l,u=t?[...o,l]:[];return{globalUsage:r,nonlocalUsage:i,localUsage:s,environmentUsage:a,children:e.children.map((e=>n(e,c,u))),owner:e.owner};function p(e){return o.map((t=>t[e.varName])).reduce(((e,t)=>t||e),void 0)}}function o(e){return`${e.kind}:${e.varName}`}e.computeScopeVariableLookup=function(e){const o=n(t(e)),r=new Map,i=new Map;return function e(t){const n=a((o=t,[...o.globalUsage,...o.environmentUsage].filter((e=>"assign"===e.kind)).map((e=>e))));var o;r.set(t.owner,n);const s=a(function(e){return e.nonlocalUsage.filter((e=>"assign"===e.kind)).map((e=>e))}(t));i.set(t.owner,s),t.children.forEach(e)}(o),{getExplicitGlobals:e=>r.get(e)||[],getExplicitNonlocals:e=>i.get(e)||[]};function s(e){let t=e.node.operand||e.node.left;return ts.isIdentifier(t)?t:void 0}function a(e){return e.map(s).filter((e=>!!e)).map((e=>e)).reduce(((e,t)=>e.find((e=>e.text===t.text))?e:[...e,t]),[])}},e.toStringVariableScopes=function(r){const i=t(r),s=n(i);return function t(n){return[n.refs.map(o).join(", "),...n.children.map(t).map((t=>t.map(e.indent1))).map((e=>["{",...e,"}"])).reduce(((e,t)=>[...e,...t]),[])]}(i).join("\n")+"\n\n\n"+function(t){return function t(n){const r=n.globalUsage.map(o).join(", "),i=n.nonlocalUsage.map(o).join(", "),s=n.localUsage.map(o).join(", "),a=n.environmentUsage.map(o).join(", ");return[r?"global "+r:"",i?"nonlocal "+i:"",s?"local "+s:"",a?"env "+a:"",...n.children.map(t).map((t=>t.map(e.indent1))).map((e=>["{",...e,"}"])).reduce(((e,t)=>[...e,...t]),[])].filter((e=>!!e))}(t).join("\n")}(s)}}(e.py||(e.py={}))}(pxt||(pxt={}));var $jscomp=$jscomp||{};$jscomp.scope={};var COMPILED=!0,goog=goog||{};goog.global=this||self,goog.isDef=function(e){return void 0!==e},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.exportPath_=function(e,t,n){e=e.split("."),n=n||goog.global,e[0]in n||void 0===n.execScript||n.execScript("var "+e[0]);for(var o;e.length&&(o=e.shift());)e.length||void 0===t?n=n[o]&&n[o]!==Object.prototype[o]?n[o]:n[o]={}:n[o]=t},goog.define=function(e,t){if(!COMPILED){var n=goog.global.CLOSURE_UNCOMPILED_DEFINES,o=goog.global.CLOSURE_DEFINES;n&&void 0===n.nodeType&&Object.prototype.hasOwnProperty.call(n,e)?t=n[e]:o&&void 0===o.nodeType&&Object.prototype.hasOwnProperty.call(o,e)&&(t=o[e])}return t},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var n=e;(n=n.substring(0,n.lastIndexOf(".")))&&!goog.getObjectByName(n);)goog.implicitNamespaces_[n]=!0}goog.exportPath_(e,t)},goog.getScriptNonce=function(e){return e&&e!=goog.global?goog.getScriptNonce_(e.document):(null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(e)?e:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if("string"!=typeof e||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED){if(e in goog.loadedModules_)return goog.loadedModules_[e].exports;if(!goog.implicitNamespaces_[e])return null!=(e=goog.getObjectByName(e))?e:null}return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var e=goog.global.$jscomp;return!!e&&("function"==typeof e.getCurrentModulePath&&!!e.getCurrentModulePath())},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(e){if(!COMPILED){if(!goog.isInEs6ModuleLoader_())throw Error("goog.declareModuleId may only be called from within an ES6 module");if(goog.moduleLoaderState_&&goog.moduleLoaderState_.moduleName)throw Error("goog.declareModuleId may only be called once per module.");if(e in goog.loadedModules_)throw Error('Module with namespace "'+e+'" already exists.')}if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=e;else{var t=goog.global.$jscomp;if(!t||"function"!=typeof t.getCurrentModulePath)throw Error('Module with namespace "'+e+'" has been loaded incorrectly.');t=t.require(t.getCurrentModulePath()),goog.loadedModules_[e]={exports:t,type:goog.ModuleType.ES6,moduleId:e}}},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&null!=goog.getObjectByName(e)},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){e=e.split("."),t=t||goog.global;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t},goog.globalize=function(e,t){for(var n in t=t||goog.global,e)t[n]=e[n]},goog.addDependency=function(e,t,n,o){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(e,t,n,o)},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(e),goog.isProvided_(e)){if(goog.isInModuleLoader_())return goog.module.getInternal_(e)}else if(goog.ENABLE_DEBUG_LOADER){var t=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(e)}finally{goog.moduleLoaderState_=t}}return null}},goog.requireType=function(e){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(e){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(e){return"(function(){"+e+"\n;})();\n"},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(e))var n=e.call(void 0,{});else{if("string"!=typeof e)throw Error("Invalid module definition");goog.useSafari10Workaround()&&(e=goog.workaroundSafari10EvalBug(e)),n=goog.loadModuleFromSource_.call(void 0,e)}var o=goog.moduleLoaderState_.moduleName;if("string"!=typeof o||!o)throw Error('Invalid module name "'+o+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(o,n):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof n&&null!=n&&Object.seal(n),goog.loadedModules_[o]={exports:n,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(e){return null}},goog.transpile_=function(e,t,n){var o=goog.global.$jscomp;o||(goog.global.$jscomp=o={});var r=o.transpile;if(!r){var i=goog.basePath+goog.TRANSPILER,s=goog.loadFileSync_(i);if(s){if(function(){(0,eval)(s+"\n//# sourceURL="+i)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,r=(o=goog.global.$jscomp).transpile}}return r||(r=o.transpile=function(e,t){return goog.logToConsole_(t+" requires transpilation but no transpiler was found."),e}),r(e,t,n)},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if("function"==typeof e.clone)return e.clone();for(var n in t="array"==t?[]:{},e)t[n]=goog.cloneObject(e[n]);return t}return e},goog.bindNative_=function(e,t,n){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,n){if(!e)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,o),e.apply(t,n)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,n){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var n in t)e[n]=t[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(e){}if(void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,n=t.createElement("script");n.type="text/javascript",n.defer=!1,n.appendChild(t.createTextNode(e)),t.head.appendChild(n),t.head.removeChild(n)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+e);var n=function(e){return goog.cssNameMapping_[e]||e},o=function(e){e=e.split("-");for(var t=[],o=0;o<e.length;o++)t.push(n(e[o]));return t.join("-")};return o=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?n:o:function(e){return e},e=t?e+"-"+o(t):o(e),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(e):e},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t,n){return n&&n.html&&(e=e.replace(/</g,"&lt;")),t&&(e=e.replace(/\{\$([^}]+)}/g,(function(e,n){return null!=t&&n in t?t[n]:e}))),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,n){goog.exportPath_(e,t,n)},goog.exportProperty=function(e,t,n){e[t]=n},goog.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,o){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return t.prototype[n].apply(e,r)}},goog.base=function(e,t,n){var o=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!o)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(void 0!==o.superClass_){for(var r=Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return o.superClass_.constructor.apply(e,r)}if("string"!=typeof t&&"symbol"!=typeof t)throw Error("method names provided to goog.base must be a string or a symbol");for(r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];i=!1;for(var s=e.constructor.prototype;s;s=Object.getPrototypeOf(s))if(s[t]===o)i=!0;else if(i)return s[t].apply(e,r);if(e[t]===o)return e.constructor.prototype[t].apply(e,r);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var n=t.constructor,o=t.statics;return n&&n!=Object.prototype.constructor||(n=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),n=goog.defineClass.createSealingConstructor_(n,e),e&&goog.inherits(n,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(n.prototype,t),null!=o&&(o instanceof Function?o(n):goog.defineClass.applyProperties_(n,o)),n},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return e;var n=!goog.defineClass.isUnsealable_(t),o=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===o&&n&&Object.seal instanceof Function&&Object.seal(t),t};return o},goog.defineClass.isUnsealable_=function(e){return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);for(var o=0;o<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;o++)n=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.isDocumentLoading_=function(){var e=goog.global.document;return e.attachEvent?"complete"!=e.readyState:"loading"==e.readyState},goog.findBasePath_=function(){if(null!=goog.global.CLOSURE_BASE_PATH&&"string"==typeof goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var e=goog.global.document,t=e.currentScript;for(t=(e=t?[t]:e.getElementsByTagName("SCRIPT")).length-1;0<=t;--t){var n=e[t].src,o=n.lastIndexOf("?");if(o=-1==o?n.length:o,"base.js"==n.substr(o-7,7)){goog.basePath=n.substr(0,o-7);break}}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null,this.transpilationTarget_=goog.TRANSPILE_TO_LANGUAGE},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(t,n){e?d[t]=!0:n()?(c=t,d[t]=!1):e=d[t]=!0}function b(a){try{return!!eval(a)}catch(e){return!1}}var c="es3",d={es3:!1},e=!1,f=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";return a("es5",(function(){return b("[1,].length==1")})),a("es6",(function(){return!f.match(/Edge\/(\d+)(\.\d)*/i)&&b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')})),a("es7",(function(){return b("2 ** 2 == 4")})),a("es8",(function(){return b("async () => 1, true")})),a("es9",(function(){return b("({...rest} = {}), true")})),a("es_next",(function(){return!1})),{target:c,map:d}},goog.Transpiler.prototype.needsTranspile=function(e,t){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(!this.requiresTranspilation_){var n=this.createRequiresTranspilation_();this.requiresTranspilation_=n.map,this.transpilationTarget_=this.transpilationTarget_||n.target}if(e in this.requiresTranspilation_)return!!this.requiresTranspilation_[e]||!(!goog.inHtmlDocument_()||"es6"!=t||"noModule"in goog.global.document.createElement("script"));throw Error("Unknown language mode: "+e)},goog.Transpiler.prototype.transpile=function(e,t){return goog.transpile_(e,t,this.transpilationTarget_)},goog.transpiler_=new goog.Transpiler,goog.protectScriptTag_=function(e){return e.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={},this.idToPath_={},this.written_={},this.loadingDeps_=[],this.depsToLoad_=[],this.paused_=!1,this.factory_=new goog.DependencyFactory(goog.transpiler_),this.deferredCallbacks_={},this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(e,t){function n(){o&&(goog.global.setTimeout(o,0),o=null)}var o=t;if(e.length){t=[];for(var r=0;r<e.length;r++){var i=this.getPathFromDeps_(e[r]);if(!i)throw Error("Unregonized namespace: "+e[r]);t.push(this.dependencies_[i])}i=goog.require;var s=0;for(r=0;r<e.length;r++)i(e[r]),t[r].onLoad((function(){++s==e.length&&n()}))}else n()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{},!1)),this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(e,t){(e=this.getPathFromDeps_(e))&&(t||this.areDepsLoaded_(this.dependencies_[e].requires))&&(t=this.deferredCallbacks_[e])&&(delete this.deferredCallbacks_[e],t())},goog.DebugLoader_.prototype.setDependencyFactory=function(e){this.factory_=e},goog.DebugLoader_.prototype.load_=function(e){if(!this.getPathFromDeps_(e))throw e="goog.require could not find: "+e,goog.logToConsole_(e),Error(e);var t=this,n=[],o=function(e){var r=t.getPathFromDeps_(e);if(!r)throw Error("Bad dependency path or symbol: "+e);if(!t.written_[r]){for(t.written_[r]=!0,e=t.dependencies_[r],r=0;r<e.requires.length;r++)goog.isProvided_(e.requires[r])||o(e.requires[r]);n.push(e)}};o(e),e=!!this.depsToLoad_.length,this.depsToLoad_=this.depsToLoad_.concat(n),this.paused_||e||this.loadDeps_()},goog.DebugLoader_.prototype.loadDeps_=function(){for(var e=this,t=this.paused_;this.depsToLoad_.length&&!t;)!function(){var n=!1,o=e.depsToLoad_.shift(),r=!1;e.loading_(o);var i={pause:function(){if(n)throw Error("Cannot call pause after the call to load.");t=!0},resume:function(){n?e.resume_():t=!1},loaded:function(){if(r)throw Error("Double call to loaded.");r=!0,e.loaded_(o)},pending:function(){for(var t=[],n=0;n<e.loadingDeps_.length;n++)t.push(e.loadingDeps_[n]);return t},setModuleState:function(e){goog.moduleLoaderState_={type:e,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(e,t,n){n&&(goog.loadedModules_[n]={exports:t,type:goog.ModuleType.ES6,moduleId:n||""})},registerGoogModuleExports:function(e,t){goog.loadedModules_[e]={exports:t,type:goog.ModuleType.GOOG,moduleId:e}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(t){if(n)throw Error("Cannot register with defer after the call to load.");e.defer_(o,t)},areDepsLoaded:function(){return e.areDepsLoaded_(o.requires)}};try{o.load(i)}finally{n=!0}}();t&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(e){this.loadingDeps_.push(e)},goog.DebugLoader_.prototype.loaded_=function(e){for(var t=0;t<this.loadingDeps_.length;t++)if(this.loadingDeps_[t]==e){this.loadingDeps_.splice(t,1);break}for(t=0;t<this.deferredQueue_.length;t++)if(this.deferredQueue_[t]==e.path){this.deferredQueue_.splice(t,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);e.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(e){for(var t=0;t<e.length;t++){var n=this.getPathFromDeps_(e[t]);if(!n||!(n in this.deferredCallbacks_)&&!goog.isProvided_(e[t]))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=function(e){return e in this.idToPath_?this.idToPath_[e]:e in this.dependencies_?e:null},goog.DebugLoader_.prototype.defer_=function(e,t){this.deferredCallbacks_[e.path]=t,this.deferredQueue_.push(e.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(e,t,n){},goog.LoadController.prototype.setModuleState=function(e){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(e){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(e,t,n,o,r){this.path=e,this.relativePath=t,this.provides=n,this.requires=o,this.loadFlags=r,this.loaded_=!1,this.loadCallbacks_=[]},goog.Dependency.prototype.getPathName=function(){var e=this.path,t=e.indexOf("://");return 0<=t&&(0<=(t=(e=e.substring(t+3)).indexOf("/"))&&(e=e.substring(t+1))),e},goog.Dependency.prototype.onLoad=function(e){this.loaded_?e():this.loadCallbacks_.push(e)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var e=this.loadCallbacks_;this.loadCallbacks_=[];for(var t=0;t<e.length;t++)e[t]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(e){var t=Math.random().toString(32);return goog.Dependency.callbackMap_[t]=e,t},goog.Dependency.unregisterCallback_=function(e){delete goog.Dependency.callbackMap_[e]},goog.Dependency.callback_=function(e,t){if(!(e in goog.Dependency.callbackMap_))throw Error("Callback key "+e+" does not exist (was base.js loaded more than once?).");for(var n=goog.Dependency.callbackMap_[e],o=[],r=1;r<arguments.length;r++)o.push(arguments[r]);n.apply(void 0,o)},goog.Dependency.prototype.load=function(e){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var t=goog.global.document;if("complete"==t.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path))return void e.loaded();throw Error('Cannot write "'+this.path+'" after document load')}if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var n=goog.Dependency.registerCallback_((function(t){goog.DebugLoader_.IS_OLD_IE_&&"complete"!=t.readyState||(goog.Dependency.unregisterCallback_(n),e.loaded())})),o=!goog.DebugLoader_.IS_OLD_IE_&&goog.getScriptNonce()?' nonce="'+goog.getScriptNonce()+'"':"";o='<script src="'+this.path+'" '+(goog.DebugLoader_.IS_OLD_IE_?"onreadystatechange":"onload")+"=\"goog.Dependency.callback_('"+n+'\', this)" type="text/javascript" '+(goog.Dependency.defer_?"defer":"")+o+"><\/script>",t.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(o):o)}else{var r=t.createElement("script");r.defer=goog.Dependency.defer_,r.async=!1,r.type="text/javascript",(o=goog.getScriptNonce())&&r.setAttribute("nonce",o),goog.DebugLoader_.IS_OLD_IE_?(e.pause(),r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(e.loaded(),e.resume())}):r.onload=function(){r.onload=null,e.loaded()},r.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(this.path):this.path,t.head.appendChild(r)}}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or setting CLOSURE_NO_DEPS to true."),e.loaded()):e.pause()},goog.Es6ModuleDependency=function(e,t,n,o,r){goog.Dependency.call(this,e,t,n,o,r)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(e){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?e.loaded():e.pause();else if(goog.inHtmlDocument_()){var t=goog.global.document,n=this;if(goog.isDocumentLoading_()){var o=function(e,n){e=n?'<script type="module" crossorigin>'+n+"<\/script>":'<script type="module" crossorigin src="'+e+'"><\/script>',t.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(e):e)};goog.Dependency.defer_=!0}else o=function(e,n){var o=t.createElement("script");o.defer=!0,o.async=!1,o.type="module",o.setAttribute("crossorigin",!0);var r=goog.getScriptNonce();r&&o.setAttribute("nonce",r),n?o.textContent=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScript(n):n:o.src=goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createScriptURL(e):e,t.head.appendChild(o)};var r=goog.Dependency.registerCallback_((function(){goog.Dependency.unregisterCallback_(r),e.setModuleState(goog.ModuleType.ES6)}));o(void 0,'goog.Dependency.callback_("'+r+'")'),o(this.path,void 0);var i=goog.Dependency.registerCallback_((function(t){goog.Dependency.unregisterCallback_(i),e.registerEs6ModuleExports(n.path,t,goog.moduleLoaderState_.moduleName)}));o(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+i+'", m)');var s=goog.Dependency.registerCallback_((function(){goog.Dependency.unregisterCallback_(s),e.clearModuleState(),e.loaded()}));o(void 0,'goog.Dependency.callback_("'+s+'")')}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),e.pause()},goog.TransformedDependency=function(e,t,n,o,r){goog.Dependency.call(this,e,t,n,o,r),this.contents_=null,this.lazyFetch_=!goog.inHtmlDocument_()||!("noModule"in goog.global.document.createElement("script"))},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(e){function t(){o.contents_=goog.loadFileSync_(o.path),o.contents_&&(o.contents_=o.transform(o.contents_),o.contents_&&(o.contents_+="\n//# sourceURL="+o.path))}function n(){if(o.lazyFetch_&&t(),o.contents_){r&&e.setModuleState(goog.ModuleType.ES6);try{var n=o.contents_;if(o.contents_=null,goog.globalEval(n),r)var i=goog.moduleLoaderState_.moduleName}finally{r&&e.clearModuleState()}r&&goog.global.$jscomp.require.ensure([o.getPathName()],(function(){e.registerEs6ModuleExports(o.path,goog.global.$jscomp.require(o.getPathName()),i)})),e.loaded()}}var o=this;if(goog.global.CLOSURE_IMPORT_SCRIPT)t(),this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=null,e.loaded()):e.pause();else{var r=this.loadFlags.module==goog.ModuleType.ES6;this.lazyFetch_||t();var i=1<e.pending().length,s=i&&goog.DebugLoader_.IS_OLD_IE_;if(i=goog.Dependency.defer_&&(i||goog.isDocumentLoading_()),s||i)e.defer((function(){n()}));else{var a=goog.global.document;if(s=goog.inHtmlDocument_()&&"ActiveXObject"in goog.global,r&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()&&!s){goog.Dependency.defer_=!0,e.pause();var l=a.onreadystatechange;a.onreadystatechange=function(){"interactive"==a.readyState&&(a.onreadystatechange=l,n(),e.resume()),goog.isFunction(l)&&l.apply(void 0,arguments)}}else!goog.DebugLoader_.IS_OLD_IE_&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()?function(){var e=goog.global.document,t=goog.Dependency.registerCallback_((function(){goog.Dependency.unregisterCallback_(t),n()})),o='<script type="text/javascript">'+goog.protectScriptTag_('goog.Dependency.callback_("'+t+'");')+"<\/script>";e.write(goog.TRUSTED_TYPES_POLICY_?goog.TRUSTED_TYPES_POLICY_.createHTML(o):o)}():n()}}},goog.TransformedDependency.prototype.transform=function(e){},goog.TranspiledDependency=function(e,t,n,o,r,i){goog.TransformedDependency.call(this,e,t,n,o,r),this.transpiler=i},goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(e){return this.transpiler.transpile(e,this.getPathName())},goog.PreTranspiledEs6ModuleDependency=function(e,t,n,o,r){goog.TransformedDependency.call(this,e,t,n,o,r)},goog.inherits(goog.PreTranspiledEs6ModuleDependency,goog.TransformedDependency),goog.PreTranspiledEs6ModuleDependency.prototype.transform=function(e){return e},goog.GoogModuleDependency=function(e,t,n,o,r,i,s){goog.TransformedDependency.call(this,e,t,n,o,r),this.needsTranspile_=i,this.transpiler_=s},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=function(e){return this.needsTranspile_&&(e=this.transpiler_.transpile(e,this.getPathName())),goog.LOAD_MODULE_USING_EVAL&&void 0!==goog.global.JSON?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+this.path+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+this.path+"\n"},goog.DebugLoader_.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader_.prototype.addDependency=function(e,t,n,o){t=t||[],e=e.replace(/\\/g,"/");var r=goog.normalizePath_(goog.basePath+e);for(o&&"boolean"!=typeof o||(o=o?{module:goog.ModuleType.GOOG}:{}),n=this.factory_.createDependency(r,e,t,n,o,goog.transpiler_.needsTranspile(o.lang||"es3",o.module)),this.dependencies_[r]=n,n=0;n<t.length;n++)this.idToPath_[t[n]]=r;this.idToPath_[e]=r},goog.DependencyFactory=function(e){this.transpiler=e},goog.DependencyFactory.prototype.createDependency=function(e,t,n,o,r,i){return r.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(e,t,n,o,r,i,this.transpiler):i?new goog.TranspiledDependency(e,t,n,o,r,this.transpiler):r.module==goog.ModuleType.ES6?"never"==goog.TRANSPILE&&goog.ASSUME_ES_MODULES_TRANSPILED?new goog.PreTranspiledEs6ModuleDependency(e,t,n,o,r):new goog.Es6ModuleDependency(e,t,n,o,r):new goog.Dependency(e,t,n,o,r)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(e){goog.debugLoader_.setDependencyFactory(e)},goog.global.CLOSURE_NO_DEPS||goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(e,t){goog.debugLoader_.bootstrap(e,t)}),goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(e){return e},goog.createTrustedTypesPolicy=function(e){var t=null,n=goog.global.trustedTypes||goog.global.TrustedTypes;if(!n||!n.createPolicy)return t;try{t=n.createPolicy(e,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(e){goog.logToConsole_(e.message)}return t},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null;var Blockly={connectionTypes:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4},constants:{},LINE_MODE_MULTIPLIER:40,PAGE_MODE_MULTIPLIER:125,DRAG_RADIUS:3,FLYOUT_DRAG_RADIUS:10,SNAP_RADIUS:48,CONNECTING_SNAP_RADIUS:96,CONNECTION_INDICATOR_RADIUS:9,CURRENT_CONNECTION_PREFERENCE:20,BUMP_DELAY:0,BUMP_RANDOMNESS:10,COLLAPSE_CHARS:30,LONGPRESS:750,SOUND_LIMIT:100,DRAG_STACK:!0,HSV_SATURATION:.45,HSV_VALUE:.65,SPRITE:{width:96,height:124,url:"sprites.png"}};Blockly.constants.ALIGN={LEFT:-1,CENTRE:0,RIGHT:1},Blockly.DRAG_NONE=0,Blockly.DRAG_STICKY=1,Blockly.DRAG_BEGIN=1,Blockly.DRAG_FREE=2,Blockly.OUTPUT_SHAPE_HEXAGONAL=1,Blockly.OUTPUT_SHAPE_ROUND=2,Blockly.OUTPUT_SHAPE_SQUARE=3,Blockly.OPPOSITE_TYPE=[],Blockly.OPPOSITE_TYPE[Blockly.connectionTypes.INPUT_VALUE]=Blockly.connectionTypes.OUTPUT_VALUE,Blockly.OPPOSITE_TYPE[Blockly.connectionTypes.OUTPUT_VALUE]=Blockly.connectionTypes.INPUT_VALUE,Blockly.OPPOSITE_TYPE[Blockly.connectionTypes.NEXT_STATEMENT]=Blockly.connectionTypes.PREVIOUS_STATEMENT,Blockly.OPPOSITE_TYPE[Blockly.connectionTypes.PREVIOUS_STATEMENT]=Blockly.connectionTypes.NEXT_STATEMENT,Blockly.VARIABLE_CATEGORY_NAME="VARIABLE",Blockly.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",Blockly.PROCEDURE_CATEGORY_NAME="PROCEDURE",Blockly.CREATE_VARIABLE_ID="CREATE_VARIABLE",Blockly.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",Blockly.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",Blockly.FUNCTION_DEFINITION_BLOCK_TYPE="function_definition",Blockly.FUNCTION_DECLARATION_BLOCK_TYPE="function_declaration",Blockly.FUNCTION_CALL_BLOCK_TYPE="function_call",Blockly.FUNCTION_CALL_OUTPUT_BLOCK_TYPE="function_call_output",Blockly.constants.COLLAPSED_INPUT_NAME="_TEMP_COLLAPSED_INPUT",Blockly.constants.COLLAPSED_FIELD_NAME="_TEMP_COLLAPSED_FIELD",Blockly.utils={},Blockly.utils.global=function(){return"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:this}(),Blockly.Msg={},Blockly.utils.global.Blockly||(Blockly.utils.global.Blockly={}),Blockly.utils.global.Blockly.Msg||(Blockly.utils.global.Blockly.Msg=Blockly.Msg),Blockly.utils.colour={},Blockly.utils.colour.parse=function(e){e=String(e).toLowerCase().trim();var t=Blockly.utils.colour.names[e];if(t)return t;if(t="#"==(t="0x"==e.substring(0,2)?"#"+e.substring(2):e)[0]?t:"#"+t,/^#[0-9a-f]{6}$/.test(t))return t;if(/^#[0-9a-f]{3}$/.test(t))return["#",t[1],t[1],t[2],t[2],t[3],t[3]].join("");var n=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return n&&(e=Number(n[1]),t=Number(n[2]),n=Number(n[3]),0<=e&&256>e&&0<=t&&256>t&&0<=n&&256>n)?Blockly.utils.colour.rgbToHex(e,t,n):null},Blockly.utils.colour.rgbToHex=function(e,t,n){return t=e<<16|t<<8|n,16>e?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},Blockly.utils.colour.rgbArrayToHex=function(e){return Blockly.utils.colour.rgbToHex(e[0],e[1],e[2])},Blockly.utils.colour.hexToRgb=function(e){return(e=Blockly.utils.colour.parse(e))?[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]:[0,0,0]},Blockly.utils.colour.hsvToHex=function(e,t,n){var o=0,r=0,i=0;if(0==t)i=r=o=n;else{var s=Math.floor(e/60),a=e/60-s;e=n*(1-t);var l=n*(1-t*a);switch(t=n*(1-t*(1-a)),s){case 1:o=l,r=n,i=e;break;case 2:o=e,r=n,i=t;break;case 3:o=e,r=l,i=n;break;case 4:o=t,r=e,i=n;break;case 5:o=n,r=e,i=l;break;case 6:case 0:o=n,r=t,i=e}}return Blockly.utils.colour.rgbToHex(Math.floor(o),Math.floor(r),Math.floor(i))},Blockly.hueToRgb=function(e){return Blockly.utils.colour.hsvToHex(e,Blockly.HSV_SATURATION,255*Blockly.HSV_VALUE)},Blockly.utils.colour.blend=function(e,t,n){return(e=Blockly.utils.colour.parse(e))&&(t=Blockly.utils.colour.parse(t))?(e=Blockly.utils.colour.hexToRgb(e),t=Blockly.utils.colour.hexToRgb(t),Blockly.utils.colour.rgbToHex(Math.round(t[0]+n*(e[0]-t[0])),Math.round(t[1]+n*(e[1]-t[1])),Math.round(t[2]+n*(e[2]-t[2])))):null},Blockly.utils.colour.darken=function(e,t){return Blockly.utils.colour.blend("#000000",e,t)},Blockly.utils.colour.lighten=function(e,t){return Blockly.utils.colour.blend("#ffffff",e,t)},Blockly.utils.colour.luminance=function(e){return(.2126*e[0]+.7152*e[1]+.0722*e[2])/255},Blockly.utils.colour.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},Blockly.utils.Coordinate=function(e,t){this.x=e,this.y=t},Blockly.utils.Coordinate.equals=function(e,t){return e==t||!(!e||!t)&&(e.x==t.x&&e.y==t.y)},Blockly.utils.Coordinate.distance=function(e,t){var n=e.x-t.x;return e=e.y-t.y,Math.sqrt(n*n+e*e)},Blockly.utils.Coordinate.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},Blockly.utils.Coordinate.difference=function(e,t){return new Blockly.utils.Coordinate(e.x-t.x,e.y-t.y)},Blockly.utils.Coordinate.sum=function(e,t){return new Blockly.utils.Coordinate(e.x+t.x,e.y+t.y)},Blockly.utils.Coordinate.prototype.clone=function(){return new Blockly.utils.Coordinate(this.x,this.y)},Blockly.utils.Coordinate.prototype.scale=function(e){return this.x*=e,this.y*=e,this},Blockly.utils.Coordinate.prototype.translate=function(e,t){return this.x+=e,this.y+=t,this},Blockly.utils.Coordinate.prototype.clone=function(){return new Blockly.utils.Coordinate(this.x,this.y)},Blockly.utils.Rect=function(e,t,n,o){this.top=e,this.bottom=t,this.left=n,this.right=o},Blockly.utils.Rect.prototype.contains=function(e,t){return e>=this.left&&e<=this.right&&t>=this.top&&t<=this.bottom},Blockly.utils.Rect.prototype.intersects=function(e){return!(this.left>e.right||this.right<e.left||this.top>e.bottom||this.bottom<e.top)},Blockly.utils.string={},Blockly.utils.string.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},Blockly.utils.string.shortestStringLength=function(e){return e.length?e.reduce((function(e,t){return e.length<t.length?e:t})).length:0},Blockly.utils.string.commonWordPrefix=function(e,t){if(!e.length)return 0;if(1==e.length)return e[0].length;var n=0;t=t||Blockly.utils.string.shortestStringLength(e);for(var o=0;o<t;o++){for(var r=e[0][o],i=1;i<e.length;i++)if(r!=e[i][o])return n;" "==r&&(n=o+1)}for(i=1;i<e.length;i++)if((r=e[i][o])&&" "!=r)return n;return t},Blockly.utils.string.commonWordSuffix=function(e,t){if(!e.length)return 0;if(1==e.length)return e[0].length;var n=0;t=t||Blockly.utils.string.shortestStringLength(e);for(var o=0;o<t;o++){for(var r=e[0].substr(-o-1,1),i=1;i<e.length;i++)if(r!=e[i].substr(-o-1,1))return n;" "==r&&(n=o+1)}for(i=1;i<e.length;i++)if((r=e[i].charAt(e[i].length-o-1))&&" "!=r)return n;return t},Blockly.utils.string.wrap=function(e,t){e=e.split("\n");for(var n=0;n<e.length;n++)e[n]=Blockly.utils.string.wrapLine_(e[n],t);return e.join("\n")},Blockly.utils.string.wrapLine_=function(e,t){if(e.length<=t)return e;for(var n=e.trim().split(/\s+/),o=0;o<n.length;o++)n[o].length>t&&(t=n[o].length);o=-1/0;var r=1;do{var i=o,s=e;e=[];var a=n.length/r,l=1;for(o=0;o<n.length-1;o++)l<(o+1.5)/a?(l++,e[o]=!0):e[o]=!1;e=Blockly.utils.string.wrapMutate_(n,e,t),o=Blockly.utils.string.wrapScore_(n,e,t),e=Blockly.utils.string.wrapToText_(n,e),r++}while(o>i);return s},Blockly.utils.string.wrapScore_=function(e,t,n){for(var o=[0],r=[],i=0;i<e.length;i++)o[o.length-1]+=e[i].length,!0===t[i]?(o.push(0),r.push(e[i].charAt(e[i].length-1))):!1===t[i]&&o[o.length-1]++;for(e=Math.max.apply(Math,o),i=t=0;i<o.length;i++)t-=2*Math.pow(Math.abs(n-o[i]),1.5),t-=Math.pow(e-o[i],1.5),-1!=".?!".indexOf(r[i])?t+=n/3:-1!=",;)]}".indexOf(r[i])&&(t+=n/4);return 1<o.length&&o[o.length-1]<=o[o.length-2]&&(t+=.5),t},Blockly.utils.string.wrapMutate_=function(e,t,n){for(var o,r=Blockly.utils.string.wrapScore_(e,t,n),i=0;i<t.length-1;i++)if(t[i]!=t[i+1]){var s=[].concat(t);s[i]=!s[i],s[i+1]=!s[i+1];var a=Blockly.utils.string.wrapScore_(e,s,n);a>r&&(r=a,o=s)}return o?Blockly.utils.string.wrapMutate_(e,o,n):t},Blockly.utils.string.wrapToText_=function(e,t){for(var n=[],o=0;o<e.length;o++)n.push(e[o]),void 0!==t[o]&&n.push(t[o]?"\n":" ");return n.join("")},Blockly.utils.Size=function(e,t){this.width=e,this.height=t},Blockly.utils.Size.equals=function(e,t){return e==t||!(!e||!t)&&(e.width==t.width&&e.height==t.height)},Blockly.utils.style={},Blockly.utils.style.getSize=function(e){if("none"!=Blockly.utils.style.getStyle_(e,"display"))return Blockly.utils.style.getSizeWithDisplay_(e);var t=e.style,n=t.display,o=t.visibility,r=t.position;t.visibility="hidden",t.position="absolute",t.display="inline";var i=e.offsetWidth;return e=e.offsetHeight,t.display=n,t.position=r,t.visibility=o,new Blockly.utils.Size(i,e)},Blockly.utils.style.getSizeWithDisplay_=function(e){return new Blockly.utils.Size(e.offsetWidth,e.offsetHeight)},Blockly.utils.style.getStyle_=function(e,t){return Blockly.utils.style.getComputedStyle(e,t)||Blockly.utils.style.getCascadedStyle(e,t)||e.style&&e.style[t]},Blockly.utils.style.getComputedStyle=function(e,t){return document.defaultView&&document.defaultView.getComputedStyle&&(e=document.defaultView.getComputedStyle(e,null))&&(e[t]||e.getPropertyValue(t))||""},Blockly.utils.style.getCascadedStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:null},Blockly.utils.style.getPageOffset=function(e){var t=new Blockly.utils.Coordinate(0,0);e=e.getBoundingClientRect();var n=document.documentElement;return n=new Blockly.utils.Coordinate(window.pageXOffset||n.scrollLeft,window.pageYOffset||n.scrollTop),t.x=e.left+n.x,t.y=e.top+n.y,t},Blockly.utils.style.getViewportPageOffset=function(){var e=document.body,t=document.documentElement;return new Blockly.utils.Coordinate(e.scrollLeft||t.scrollLeft,e.scrollTop||t.scrollTop)},Blockly.utils.style.setElementShown=function(e,t){e.style.display=t?"":"none"},Blockly.utils.style.isRightToLeft=function(e){return"rtl"==Blockly.utils.style.getStyle_(e,"direction")},Blockly.utils.style.getBorderBox=function(e){var t=Blockly.utils.style.getComputedStyle(e,"borderLeftWidth"),n=Blockly.utils.style.getComputedStyle(e,"borderRightWidth"),o=Blockly.utils.style.getComputedStyle(e,"borderTopWidth");return e=Blockly.utils.style.getComputedStyle(e,"borderBottomWidth"),{top:parseFloat(o),right:parseFloat(n),bottom:parseFloat(e),left:parseFloat(t)}},Blockly.utils.style.scrollIntoContainerView=function(e,t,n){e=Blockly.utils.style.getContainerOffsetToScrollInto(e,t,n),t.scrollLeft=e.x,t.scrollTop=e.y},Blockly.utils.style.getContainerOffsetToScrollInto=function(e,t,n){var o=Blockly.utils.style.getPageOffset(e),r=Blockly.utils.style.getPageOffset(t),i=Blockly.utils.style.getBorderBox(t),s=o.x-r.x-i.left;return o=o.y-r.y-i.top,r=Blockly.utils.style.getSizeWithDisplay_(e),e=t.clientWidth-r.width,r=t.clientHeight-r.height,i=t.scrollLeft,t=t.scrollTop,n?(i+=s-e/2,t+=o-r/2):(i+=Math.min(s,Math.max(s-e,0)),t+=Math.min(o,Math.max(o-r,0))),new Blockly.utils.Coordinate(i,t)},Blockly.utils.userAgent={},function(e){function t(e){return-1!=n.indexOf(e.toUpperCase())}Blockly.utils.userAgent.raw=e;var n=Blockly.utils.userAgent.raw.toUpperCase();Blockly.utils.userAgent.IE=t("Trident")||t("MSIE"),Blockly.utils.userAgent.EDGE=t("Edge"),Blockly.utils.userAgent.EDGE_OR_IE=Blockly.utils.userAgent.EDGE||Blockly.utils.userAgent.IE,Blockly.utils.userAgent.JAVA_FX=t("JavaFX"),Blockly.utils.userAgent.CHROME=(t("Chrome")||t("CriOS"))&&!Blockly.utils.userAgent.EDGE,Blockly.utils.userAgent.WEBKIT=t("WebKit")&&!Blockly.utils.userAgent.EDGE,Blockly.utils.userAgent.GECKO=t("Gecko")&&!Blockly.utils.userAgent.WEBKIT&&!Blockly.utils.userAgent.IE&&!Blockly.utils.userAgent.EDGE,Blockly.utils.userAgent.ANDROID=t("Android"),e=Blockly.utils.global.navigator&&Blockly.utils.global.navigator.maxTouchPoints,Blockly.utils.userAgent.IPAD=t("iPad")||t("Macintosh")&&0<e,Blockly.utils.userAgent.IPOD=t("iPod"),Blockly.utils.userAgent.IPHONE=t("iPhone")&&!Blockly.utils.userAgent.IPAD&&!Blockly.utils.userAgent.IPOD,Blockly.utils.userAgent.MAC=t("Macintosh"),Blockly.utils.userAgent.TABLET=Blockly.utils.userAgent.IPAD||Blockly.utils.userAgent.ANDROID&&!t("Mobile")||t("Silk"),Blockly.utils.userAgent.MOBILE=!Blockly.utils.userAgent.TABLET&&(Blockly.utils.userAgent.IPOD||Blockly.utils.userAgent.IPHONE||Blockly.utils.userAgent.ANDROID||t("IEMobile"))}(Blockly.utils.global.navigator&&Blockly.utils.global.navigator.userAgent||""),Blockly.utils.noEvent=function(e){e.preventDefault(),e.stopPropagation()},Blockly.utils.isTargetInput=function(e){return"textarea"==e.target.type||"text"==e.target.type||"number"==e.target.type||"email"==e.target.type||"password"==e.target.type||"search"==e.target.type||"tel"==e.target.type||"url"==e.target.type||e.target.isContentEditable||e.target.dataset&&"true"==e.target.dataset.isTextInput},Blockly.utils.getRelativeXY=function(e){var t=new Blockly.utils.Coordinate(0,0),n=e.getAttribute("x");return n&&(t.x=parseInt(n,10)),(n=e.getAttribute("y"))&&(t.y=parseInt(n,10)),(n=(n=e.getAttribute("transform"))&&n.match(Blockly.utils.getRelativeXY.XY_REGEX_))&&(t.x+=Number(n[1]),n[3]&&(t.y+=Number(n[3]))),(e=e.getAttribute("style"))&&-1<e.indexOf("translate")&&(e=e.match(Blockly.utils.getRelativeXY.XY_STYLE_REGEX_))&&(t.x+=Number(e[1]),e[3]&&(t.y+=Number(e[3]))),t},Blockly.utils.getInjectionDivXY_=function(e){for(var t=0,n=0;e;){var o=Blockly.utils.getRelativeXY(e);if(t+=o.x,n+=o.y,-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;e=e.parentNode}return new Blockly.utils.Coordinate(t,n)},Blockly.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,Blockly.utils.getRelativeXY.XY_STYLE_REGEX_=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,Blockly.utils.isRightButton=function(e){return!(!e.ctrlKey||!Blockly.utils.userAgent.MAC)||2==e.button},Blockly.utils.mouseToSvg=function(e,t,n){var o=t.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,n||(n=t.getScreenCTM().inverse()),o.matrixTransform(n)},Blockly.utils.getScrollDeltaPixels=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*Blockly.LINE_MODE_MULTIPLIER,y:e.deltaY*Blockly.LINE_MODE_MULTIPLIER};case 2:return{x:e.deltaX*Blockly.PAGE_MODE_MULTIPLIER,y:e.deltaY*Blockly.PAGE_MODE_MULTIPLIER}}},Blockly.utils.tokenizeInterpolation=function(e){return Blockly.utils.tokenizeInterpolation_(e,!0)},Blockly.utils.replaceMessageReferences=function(e){return"string"!=typeof e?e:(e=Blockly.utils.tokenizeInterpolation_(e,!1)).length?String(e[0]):""},Blockly.utils.checkMessageReferences=function(e){var t=!0,n=Blockly.Msg;e=e.match(/%{BKY_[A-Z]\w*}/gi);for(var o=0;o<e.length;o++){null==n[e[o].toUpperCase().slice(6,-1)]&&(t=!1)}return t},Blockly.utils.tokenizeInterpolation_=function(e,t){var n=[],o=e.split("");o.push("");var r=0;e=[];for(var i=null,s=0;s<o.length;s++){var a=o[s];0==r?"%"==a?((a=e.join(""))&&n.push(a),e.length=0,r=1):e.push(a):1==r?"%"==a?(e.push(a),r=0):t&&"0"<=a&&"9">=a?(r=2,i=a,(a=e.join(""))&&n.push(a),e.length=0):"{"==a?r=3:(e.push("%",a),r=0):2==r?"0"<=a&&"9">=a?i+=a:(n.push(parseInt(i,10)),s--,r=0):3==r&&(""==a?(e.splice(0,0,"%{"),s--,r=0):"}"!=a?e.push(a):(r=e.join(""),/[A-Z]\w*/i.test(r)?(a=r.toUpperCase(),(a=Blockly.utils.string.startsWith(a,"BKY_")?a.substring(4):null)&&a in Blockly.Msg?"string"==typeof(r=Blockly.Msg[a])?Array.prototype.push.apply(n,Blockly.utils.tokenizeInterpolation_(r,t)):t?n.push(String(r)):n.push(r):n.push("%{"+r+"}")):n.push("%{"+r+"}"),r=e.length=0))}for((a=e.join(""))&&n.push(a),t=[],s=e.length=0;s<n.length;++s)"string"==typeof n[s]?e.push(n[s]):((a=e.join(""))&&t.push(a),e.length=0,t.push(n[s]));return(a=e.join(""))&&t.push(a),e.length=0,t},Blockly.utils.genUid=function(){for(var e=Blockly.utils.genUid.soup_.length,t=[],n=0;20>n;n++)t[n]=Blockly.utils.genUid.soup_.charAt(Math.random()*e);return t.join("")},Blockly.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Blockly.utils.is3dSupported=function(){if(void 0!==Blockly.utils.is3dSupported.cached_)return Blockly.utils.is3dSupported.cached_;if(!Blockly.utils.global.getComputedStyle)return!1;var e=document.createElement("p"),t="none",n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var o in document.body.insertBefore(e,null),n)if(void 0!==e.style[o]){if(e.style[o]="translate3d(1px,1px,1px)",!(t=Blockly.utils.global.getComputedStyle(e)))return document.body.removeChild(e),!1;t=t.getPropertyValue(n[o])}return document.body.removeChild(e),Blockly.utils.is3dSupported.cached_="none"!==t,Blockly.utils.is3dSupported.cached_},Blockly.utils.runAfterPageLoad=function(e){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"==document.readyState)e();else var t=setInterval((function(){"complete"==document.readyState&&(clearInterval(t),e())}),10)},Blockly.utils.getViewportBBox=function(){var e=Blockly.utils.style.getViewportPageOffset();return new Blockly.utils.Rect(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},Blockly.utils.arrayRemove=function(e,t){return-1!=(t=e.indexOf(t))&&(e.splice(t,1),!0)},Blockly.utils.getDocumentScroll=function(){var e=document.documentElement,t=window;return Blockly.utils.userAgent.IE&&t.pageYOffset!=e.scrollTop?new Blockly.utils.Coordinate(e.scrollLeft,e.scrollTop):new Blockly.utils.Coordinate(t.pageXOffset||e.scrollLeft,t.pageYOffset||e.scrollTop)},Blockly.utils.getBlockTypeCounts=function(e,t){var n=Object.create(null),o=e.getDescendants(!0);for(t&&(e=e.getNextBlock())&&(e=o.indexOf(e),o.splice(e,o.length-e)),e=0;t=o[e];e++)n[t.type]?n[t.type]++:n[t.type]=1;return n};var resizeFromKeyboard=!0,initialWidth=0,lastHeight=0,debounceTimeout=null;Blockly.utils.resizeTracker=function(e){debounceTimeout&&clearTimeout(debounceTimeout),debounceTimeout=setTimeout((function(){var t=e.getInjectionDiv();resizeFromKeyboard=!0,t&&(initialWidth=t.clientWidth,lastHeight=t.clientHeight)}),1e3);var t=e.getInjectionDiv();if(t&&(0==initialWidth&&(resizeFromKeyboard=!0,initialWidth=t.clientWidth,lastHeight=t.clientHeight),resizeFromKeyboard)){var n=t.clientHeight;t.clientWidth!=initialWidth&&(resizeFromKeyboard=!1),n>lastHeight?resizeFromKeyboard=!1:lastHeight=n}},Blockly.utils.isOnScreenKeyboardResize=function(){return!(!Blockly.utils.dom.hasClass(document.activeElement,"blocklyHtmlInput")||!resizeFromKeyboard)},Blockly.utils.screenToWsCoordinates=function(e,t){var n=t.x;t=t.y;var o=e.getInjectionDiv().getBoundingClientRect();return n=new Blockly.utils.Coordinate(n-o.left,t-o.top),t=e.getOriginOffsetInPixels(),Blockly.utils.Coordinate.difference(n,t).scale(1/e.scale)},Blockly.utils.parseBlockColour=function(e){var t="string"==typeof e?Blockly.utils.replaceMessageReferences(e):e,n=Number(t);if(!isNaN(n)&&0<=n&&360>=n)return{hue:n,hex:Blockly.utils.colour.hsvToHex(n,Blockly.HSV_SATURATION,255*Blockly.HSV_VALUE)};if(n=Blockly.utils.colour.parse(t))return{hue:null,hex:n};throw n='Invalid colour: "'+t+'"',e!=t&&(n+=' (from "'+e+'")'),Error(n)},Blockly.Touch={},Blockly.Touch.TOUCH_ENABLED="ontouchstart"in Blockly.utils.global||!!(Blockly.utils.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!Blockly.utils.global.navigator||!Blockly.utils.global.navigator.maxTouchPoints&&!Blockly.utils.global.navigator.msMaxTouchPoints),Blockly.Touch.touchIdentifier_=null,Blockly.Touch.TOUCH_MAP={},Blockly.utils.global.PointerEvent?Blockly.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:Blockly.Touch.TOUCH_ENABLED&&(Blockly.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),Blockly.longPid_=0,Blockly.longStart=function(e,t){Blockly.longStop_(),e.changedTouches&&1!=e.changedTouches.length||(Blockly.longPid_=setTimeout((function(){e.changedTouches&&(e.button=2,e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),t&&t.handleRightClick(e)}),Blockly.LONGPRESS))},Blockly.longStop_=function(){Blockly.longPid_&&(clearTimeout(Blockly.longPid_),Blockly.longPid_=0)},Blockly.Touch.clearTouchIdentifier=function(){Blockly.Touch.touchIdentifier_=null},Blockly.Touch.shouldHandleEvent=function(e){return!Blockly.Touch.isMouseOrTouchEvent(e)||Blockly.Touch.checkTouchIdentifier(e)},Blockly.Touch.getTouchIdentifierFromEvent=function(e){return null!=e.pointerId?e.pointerId:e.changedTouches&&e.changedTouches[0]&&void 0!==e.changedTouches[0].identifier&&null!==e.changedTouches[0].identifier?e.changedTouches[0].identifier:"mouse"},Blockly.Touch.checkTouchIdentifier=function(e){var t=Blockly.Touch.getTouchIdentifierFromEvent(e);return void 0!==Blockly.Touch.touchIdentifier_&&null!==Blockly.Touch.touchIdentifier_?Blockly.Touch.touchIdentifier_==t:("mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type)&&(Blockly.Touch.touchIdentifier_=t,!0)},Blockly.Touch.setClientFromTouch=function(e){if(Blockly.utils.string.startsWith(e.type,"touch")){var t=e.changedTouches[0];e.clientX=t.clientX,e.clientY=t.clientY}},Blockly.Touch.isMouseOrTouchEvent=function(e){return Blockly.utils.string.startsWith(e.type,"touch")||Blockly.utils.string.startsWith(e.type,"mouse")||Blockly.utils.string.startsWith(e.type,"pointer")},Blockly.Touch.isTouchEvent=function(e){return!(e instanceof PointerEvent&&"mouse"==e.pointerType)&&(Blockly.utils.string.startsWith(e.type,"touch")||Blockly.utils.string.startsWith(e.type,"pointer"))},Blockly.Touch.splitEventByTouches=function(e){var t=[];if(e.changedTouches)for(var n=0;n<e.changedTouches.length;n++)t[n]={type:e.type,changedTouches:[e.changedTouches[n]],target:e.target,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()}};else t.push(e);return t},Blockly.browserEvents={},Blockly.browserEvents.conditionalBind=function(e,t,n,o,r,i){var s=!1,a=function(e){var t=!r;e=Blockly.Touch.splitEventByTouches(e);for(var i,a=0;i=e[a];a++)t&&!Blockly.Touch.shouldHandleEvent(i)||(Blockly.Touch.setClientFromTouch(i),n?o.call(n,i):o(i),s=!0)},l=[];if(Blockly.utils.global.PointerEvent&&t in Blockly.Touch.TOUCH_MAP)for(var c,u=0;c=Blockly.Touch.TOUCH_MAP[t][u];u++)e.addEventListener(c,a,!1),l.push([e,c,a]);else if(e.addEventListener(t,a,!1),l.push([e,t,a]),t in Blockly.Touch.TOUCH_MAP){var p=function(e){a(e),s&&!i&&e.preventDefault()};for(u=0;c=Blockly.Touch.TOUCH_MAP[t][u];u++)e.addEventListener(c,p,!1),l.push([e,c,p])}return l},Blockly.browserEvents.bind=function(e,t,n,o){var r=function(e){n?o.call(n,e):o(e)},i=[];if(Blockly.utils.global.PointerEvent&&t in Blockly.Touch.TOUCH_MAP)for(var s,a=0;s=Blockly.Touch.TOUCH_MAP[t][a];a++)e.addEventListener(s,r,!1),i.push([e,s,r]);else if(e.addEventListener(t,r,!1),i.push([e,t,r]),t in Blockly.Touch.TOUCH_MAP){var l=function(e){if(e.changedTouches&&1==e.changedTouches.length){var t=e.changedTouches[0];e.clientX=t.clientX,e.clientY=t.clientY}r(e),e.preventDefault()};for(a=0;s=Blockly.Touch.TOUCH_MAP[t][a];a++)e.addEventListener(s,l,!1),i.push([e,s,l])}return i},Blockly.browserEvents.unbind=function(e){for(;e.length;){var t=e.pop(),n=t[2];t[0].removeEventListener(t[1],n,!1)}return n},Blockly.ComponentManager=function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)},Blockly.ComponentManager.prototype.addComponent=function(e,t){var n=e.component.id;if(!t&&this.componentData_[n])throw Error('Plugin "'+n+'" with capabilities "'+this.componentData_[n].capabilities+'" already added.');this.componentData_[n]=e,t=[];for(var o=0;o<e.capabilities.length;o++){var r=String(e.capabilities[o]).toLowerCase();t.push(r),void 0===this.capabilityToComponentIds_[r]?this.capabilityToComponentIds_[r]=[n]:this.capabilityToComponentIds_[r].push(n)}this.componentData_[n].capabilities=t},Blockly.ComponentManager.prototype.removeComponent=function(e){var t=this.componentData_[e];if(t){for(var n=0;n<t.capabilities.length;n++){var o=String(t.capabilities[n]).toLowerCase();this.capabilityToComponentIds_[o].splice(this.capabilityToComponentIds_[o].indexOf(e),1)}delete this.componentData_[e]}},Blockly.ComponentManager.prototype.addCapability=function(e,t){if(!this.getComponent(e))throw Error('Cannot add capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,t)?console.warn('Plugin "'+e+'already has capability "'+t+'"'):(t=String(t).toLowerCase(),this.componentData_[e].capabilities.push(t),this.capabilityToComponentIds_[t].push(e))},Blockly.ComponentManager.prototype.removeCapability=function(e,t){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+t+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,t)?(t=String(t).toLowerCase(),this.componentData_[e].capabilities.splice(this.componentData_[e].capabilities.indexOf(t),1),this.capabilityToComponentIds_[t].splice(this.capabilityToComponentIds_[t].indexOf(e),1)):console.warn('Plugin "'+e+"doesn't have capability \""+t+'" to remove')},Blockly.ComponentManager.prototype.hasCapability=function(e,t){return t=String(t).toLowerCase(),-1!==this.componentData_[e].capabilities.indexOf(t)},Blockly.ComponentManager.prototype.getComponent=function(e){return this.componentData_[e]&&this.componentData_[e].component},Blockly.ComponentManager.prototype.getComponents=function(e,t){if(e=String(e).toLowerCase(),!(e=this.capabilityToComponentIds_[e]))return[];var n=[];if(t){var o=[],r=this.componentData_;e.forEach((function(e){o.push(r[e])})),o.sort((function(e,t){return e.weight-t.weight})),o.forEach((function(e){n.push(e.component)}))}else r=this.componentData_,e.forEach((function(e){n.push(r[e].component)}));return n},Blockly.ComponentManager.Capability=function(e){this.name_=e},Blockly.ComponentManager.Capability.prototype.toString=function(){return this.name_},Blockly.ComponentManager.Capability.POSITIONABLE=new Blockly.ComponentManager.Capability("positionable"),Blockly.ComponentManager.Capability.DRAG_TARGET=new Blockly.ComponentManager.Capability("drag_target"),Blockly.ComponentManager.Capability.DELETE_AREA=new Blockly.ComponentManager.Capability("delete_area"),Blockly.ComponentManager.Capability.AUTOHIDEABLE=new Blockly.ComponentManager.Capability("autohideable"),Blockly.utils.Svg=function(e){this.tagName_=e},Blockly.utils.Svg.prototype.toString=function(){return this.tagName_},Blockly.utils.Svg.ANIMATE=new Blockly.utils.Svg("animate"),Blockly.utils.Svg.CIRCLE=new Blockly.utils.Svg("circle"),Blockly.utils.Svg.CLIPPATH=new Blockly.utils.Svg("clipPath"),Blockly.utils.Svg.DEFS=new Blockly.utils.Svg("defs"),Blockly.utils.Svg.FECOMPOSITE=new Blockly.utils.Svg("feComposite"),Blockly.utils.Svg.FECOMPONENTTRANSFER=new Blockly.utils.Svg("feComponentTransfer"),Blockly.utils.Svg.FEFLOOD=new Blockly.utils.Svg("feFlood"),Blockly.utils.Svg.FEFUNCA=new Blockly.utils.Svg("feFuncA"),Blockly.utils.Svg.FEGAUSSIANBLUR=new Blockly.utils.Svg("feGaussianBlur"),Blockly.utils.Svg.FEPOINTLIGHT=new Blockly.utils.Svg("fePointLight"),Blockly.utils.Svg.FESPECULARLIGHTING=new Blockly.utils.Svg("feSpecularLighting"),Blockly.utils.Svg.FILTER=new Blockly.utils.Svg("filter"),Blockly.utils.Svg.FOREIGNOBJECT=new Blockly.utils.Svg("foreignObject"),Blockly.utils.Svg.G=new Blockly.utils.Svg("g"),Blockly.utils.Svg.IMAGE=new Blockly.utils.Svg("image"),Blockly.utils.Svg.LINE=new Blockly.utils.Svg("line"),Blockly.utils.Svg.PATH=new Blockly.utils.Svg("path"),Blockly.utils.Svg.PATTERN=new Blockly.utils.Svg("pattern"),Blockly.utils.Svg.POLYGON=new Blockly.utils.Svg("polygon"),Blockly.utils.Svg.RECT=new Blockly.utils.Svg("rect"),Blockly.utils.Svg.SVG=new Blockly.utils.Svg("svg"),Blockly.utils.Svg.TEXT=new Blockly.utils.Svg("text"),Blockly.utils.Svg.TSPAN=new Blockly.utils.Svg("tspan"),Blockly.utils.dom={},Blockly.utils.dom.SVG_NS="http://www.w3.org/2000/svg",Blockly.utils.dom.HTML_NS="http://www.w3.org/1999/xhtml",Blockly.utils.dom.XLINK_NS="http://www.w3.org/1999/xlink",Blockly.utils.dom.NodeType={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16},Blockly.utils.dom.cacheWidths_=null,Blockly.utils.dom.cacheReference_=0,Blockly.utils.dom.canvasContext_=null,Blockly.utils.dom.createSvgElement=function(e,t,n){for(var o in e=document.createElementNS(Blockly.utils.dom.SVG_NS,String(e)),t)e.setAttribute(o,t[o]);return document.body.runtimeStyle&&(e.runtimeStyle=e.currentStyle=e.style),n&&n.appendChild(e),e},Blockly.utils.dom.addClass=function(e,t){var n=e.getAttribute("class")||"";return-1==(" "+n+" ").indexOf(" "+t+" ")&&(n&&(n+=" "),e.setAttribute("class",n+t),!0)},Blockly.utils.dom.removeClasses=function(e,t){t=t.split(" ");for(var n=0;n<t.length;n++)Blockly.utils.dom.removeClass(e,t[n])},Blockly.utils.dom.removeClass=function(e,t){var n=e.getAttribute("class");if(-1==(" "+n+" ").indexOf(" "+t+" "))return!1;n=n.split(/\s+/);for(var o=0;o<n.length;o++)n[o]&&n[o]!=t||(n.splice(o,1),o--);return n.length?e.setAttribute("class",n.join(" ")):e.removeAttribute("class"),!0},Blockly.utils.dom.hasClass=function(e,t){return-1!=(" "+e.getAttribute("class")+" ").indexOf(" "+t+" ")},Blockly.utils.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},Blockly.utils.dom.insertAfter=function(e,t){var n=t.nextSibling;if(!(t=t.parentNode))throw Error("Reference node has no parent.");n?t.insertBefore(e,n):t.appendChild(e)},Blockly.utils.dom.containsNode=function(e,t){return!!(e.compareDocumentPosition(t)&Blockly.utils.dom.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},Blockly.utils.dom.setCssTransform=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t},Blockly.utils.dom.startTextWidthCache=function(){Blockly.utils.dom.cacheReference_++,Blockly.utils.dom.cacheWidths_||(Blockly.utils.dom.cacheWidths_=Object.create(null))},Blockly.utils.dom.stopTextWidthCache=function(){Blockly.utils.dom.cacheReference_--,Blockly.utils.dom.cacheReference_||(Blockly.utils.dom.cacheWidths_=null)},Blockly.utils.dom.getTextWidth=function(e){var t,n=e.textContent+"\n"+e.className.baseVal;if(Blockly.utils.dom.cacheWidths_&&(t=Blockly.utils.dom.cacheWidths_[n]))return t;try{t=Blockly.utils.userAgent.IE||Blockly.utils.userAgent.EDGE?e.getBBox().width:e.getComputedTextLength()}catch(t){return 8*e.textContent.length}return Blockly.utils.dom.cacheWidths_&&(Blockly.utils.dom.cacheWidths_[n]=t),t},Blockly.utils.dom.getFastTextWidth=function(e,t,n,o){return Blockly.utils.dom.getFastTextWidthWithSizeString(e,t+"pt",n,o)},Blockly.utils.dom.getFastTextWidthWithSizeString=function(e,t,n,o){var r,i=e.textContent;return e=i+"\n"+e.className.baseVal,Blockly.utils.dom.cacheWidths_&&(r=Blockly.utils.dom.cacheWidths_[e])||(Blockly.utils.dom.canvasContext_||((r=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(r),Blockly.utils.dom.canvasContext_=r.getContext("2d")),Blockly.utils.dom.canvasContext_.font=n+" "+t+" "+o,r=Blockly.utils.dom.canvasContext_.measureText(i).width,Blockly.utils.dom.cacheWidths_&&(Blockly.utils.dom.cacheWidths_[e]=r)),r},Blockly.utils.dom.measureFontMetrics=function(e,t,n,o){var r=document.createElement("span");r.style.font=n+" "+t+" "+o,r.textContent=e,(e=document.createElement("div")).style.width="1px",e.style.height="0px",(t=document.createElement("div")).setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),t.appendChild(r),t.appendChild(e),document.body.appendChild(t);try{n={},t.style.alignItems="baseline",n.baseline=e.offsetTop-r.offsetTop,t.style.alignItems="flex-end",n.height=e.offsetTop-r.offsetTop}finally{document.body.removeChild(t)}return n},Blockly.utils.math={},Blockly.utils.math.toRadians=function(e){return e*Math.PI/180},Blockly.utils.math.toDegrees=function(e){return 180*e/Math.PI},Blockly.utils.math.clamp=function(e,t,n){if(n<e){var o=n;n=e,e=o}return Math.max(e,Math.min(t,n))},Blockly.DropDownDiv=function(){},Blockly.DropDownDiv.boundsElement_=null,Blockly.DropDownDiv.owner_=null,Blockly.DropDownDiv.positionToField_=null,Blockly.DropDownDiv.ARROW_SIZE=16,Blockly.DropDownDiv.BORDER_SIZE=1,Blockly.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,Blockly.DropDownDiv.PADDING_Y=20,Blockly.DropDownDiv.ANIMATION_TIME=.25,Blockly.DropDownDiv.animateOutTimer_=null,Blockly.DropDownDiv.onHide_=null,Blockly.DropDownDiv.rendererClassName_="",Blockly.DropDownDiv.themeClassName_="",Blockly.DropDownDiv.createDom=function(){if(!Blockly.DropDownDiv.DIV_){var e=document.createElement("div");e.className="blocklyDropDownDiv",(Blockly.parentContainer||document.body).appendChild(e),Blockly.DropDownDiv.DIV_=e;var t=document.createElement("div");t.className="blocklyDropDownContent",e.appendChild(t),Blockly.DropDownDiv.content_=t,(t=document.createElement("div")).className="blocklyDropDownArrow",e.appendChild(t),Blockly.DropDownDiv.arrow_=t,Blockly.DropDownDiv.DIV_.style.opacity=0,Blockly.DropDownDiv.DIV_.style.transition="transform "+Blockly.DropDownDiv.ANIMATION_TIME+"s, opacity "+Blockly.DropDownDiv.ANIMATION_TIME+"s",e.addEventListener("focusin",(function(){Blockly.utils.dom.addClass(e,"blocklyFocused")})),e.addEventListener("focusout",(function(){Blockly.utils.dom.removeClass(e,"blocklyFocused")}))}},Blockly.DropDownDiv.setBoundsElement=function(e){Blockly.DropDownDiv.boundsElement_=e},Blockly.DropDownDiv.getContentDiv=function(){return Blockly.DropDownDiv.content_},Blockly.DropDownDiv.clearContent=function(){Blockly.DropDownDiv.content_.textContent="",Blockly.DropDownDiv.content_.style.width=""},Blockly.DropDownDiv.setColour=function(e,t){Blockly.DropDownDiv.DIV_.style.backgroundColor=e,Blockly.DropDownDiv.DIV_.style.borderColor=t},Blockly.DropDownDiv.showPositionedByBlock=function(e,t,n,o){return Blockly.DropDownDiv.showPositionedByRect_(Blockly.DropDownDiv.getScaledBboxOfBlock_(t),e,n,o)},Blockly.DropDownDiv.showPositionedByField=function(e,t,n){return Blockly.DropDownDiv.positionToField_=!0,Blockly.DropDownDiv.showPositionedByRect_(Blockly.DropDownDiv.getScaledBboxOfField_(e),e,t,n)},Blockly.DropDownDiv.getScaledBboxOfBlock_=function(e){var t=e.getSvgRoot(),n=t.getBBox(),o=e.workspace.scale;return e=n.height*o,n=n.width*o,t=Blockly.utils.style.getPageOffset(t),new Blockly.utils.Rect(t.y,t.y+e,t.x,t.x+n)},Blockly.DropDownDiv.getScaledBboxOfField_=function(e){return e=e.getScaledBBox(),new Blockly.utils.Rect(e.top,e.bottom,e.left,e.right)},Blockly.DropDownDiv.showPositionedByRect_=function(e,t,n,o){var r=e.left+(e.right-e.left)/2,i=e.bottom;e=e.top,o&&(e+=o);for(var s=(o=t.getSourceBlock()).workspace;s.options.parentWorkspace;)s=s.options.parentWorkspace;return Blockly.DropDownDiv.setBoundsElement(s.getParentSvg().parentNode),Blockly.DropDownDiv.show(t,o.RTL,r,i,r,e,n)},Blockly.DropDownDiv.show=function(e,t,n,o,r,i,s){return Blockly.DropDownDiv.owner_=e,Blockly.DropDownDiv.onHide_=s||null,(e=Blockly.DropDownDiv.DIV_).style.direction=t?"rtl":"ltr",t=Blockly.getMainWorkspace(),Blockly.DropDownDiv.rendererClassName_=t.getRenderer().getClassName(),Blockly.DropDownDiv.themeClassName_=t.getTheme().getClassName(),Blockly.utils.dom.addClass(e,Blockly.DropDownDiv.rendererClassName_),Blockly.utils.dom.addClass(e,Blockly.DropDownDiv.themeClassName_),Blockly.DropDownDiv.positionInternal_(n,o,r,i)},Blockly.DropDownDiv.getBoundsInfo_=function(){var e=Blockly.utils.style.getPageOffset(Blockly.DropDownDiv.boundsElement_),t=Blockly.utils.style.getSize(Blockly.DropDownDiv.boundsElement_);return{left:e.x,right:e.x+t.width,top:e.y,bottom:e.y+t.height,width:t.width,height:t.height}},Blockly.DropDownDiv.getPositionMetrics_=function(e,t,n,o){var r=Blockly.DropDownDiv.getBoundsInfo_(),i=Blockly.utils.style.getSize(Blockly.DropDownDiv.DIV_);return t+i.height<r.bottom?Blockly.DropDownDiv.getPositionBelowMetrics_(e,t,r,i):o-i.height>r.top?Blockly.DropDownDiv.getPositionAboveMetrics_(n,o,r,i):t+i.height<document.documentElement.clientHeight?Blockly.DropDownDiv.getPositionBelowMetrics_(e,t,r,i):o-i.height>document.documentElement.clientTop?Blockly.DropDownDiv.getPositionAboveMetrics_(n,o,r,i):Blockly.DropDownDiv.getPositionTopOfPageMetrics_(e,r,i)},Blockly.DropDownDiv.getPositionBelowMetrics_=function(e,t,n,o){return{initialX:(e=Blockly.DropDownDiv.getPositionX(e,n.left,n.right,o.width)).divX,initialY:t,finalX:e.divX,finalY:t+Blockly.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:-(Blockly.DropDownDiv.ARROW_SIZE/2+Blockly.DropDownDiv.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},Blockly.DropDownDiv.getPositionAboveMetrics_=function(e,t,n,o){return{initialX:(e=Blockly.DropDownDiv.getPositionX(e,n.left,n.right,o.width)).divX,initialY:t-o.height,finalX:e.divX,finalY:t-o.height-Blockly.DropDownDiv.PADDING_Y,arrowX:e.arrowX,arrowY:o.height-2*Blockly.DropDownDiv.BORDER_SIZE-Blockly.DropDownDiv.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},Blockly.DropDownDiv.getPositionTopOfPageMetrics_=function(e,t,n){return{initialX:(e=Blockly.DropDownDiv.getPositionX(e,t.left,t.right,n.width)).divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Blockly.DropDownDiv.getPositionX=function(e,t,n,o){var r=e;return e=Blockly.utils.math.clamp(t,e-o/2,n-o),r-=Blockly.DropDownDiv.ARROW_SIZE/2,t=Blockly.DropDownDiv.ARROW_HORIZONTAL_PADDING,{arrowX:o=Blockly.utils.math.clamp(t,r-e,o-t-Blockly.DropDownDiv.ARROW_SIZE),divX:e}},Blockly.DropDownDiv.isVisible=function(){return!!Blockly.DropDownDiv.owner_},Blockly.DropDownDiv.isDisplayed=function(){return"none"!=Blockly.DropDownDiv.DIV_.style.display},Blockly.DropDownDiv.hideIfOwner=function(e,t){return Blockly.DropDownDiv.owner_===e&&(t?Blockly.DropDownDiv.hideWithoutAnimation():Blockly.DropDownDiv.hide(),!0)},Blockly.DropDownDiv.hide=function(){var e=Blockly.DropDownDiv.DIV_;e.style.transform="translate(0, 0)",e.style.opacity=0,Blockly.DropDownDiv.animateOutTimer_=setTimeout((function(){Blockly.DropDownDiv.hideWithoutAnimation()}),1e3*Blockly.DropDownDiv.ANIMATION_TIME),Blockly.DropDownDiv.onHide_&&(Blockly.DropDownDiv.onHide_(),Blockly.DropDownDiv.onHide_=null)},Blockly.DropDownDiv.hideWithoutAnimation=function(){if(Blockly.DropDownDiv.isVisible()){Blockly.DropDownDiv.animateOutTimer_&&clearTimeout(Blockly.DropDownDiv.animateOutTimer_);var e=Blockly.DropDownDiv.DIV_;e.style.transform="",e.style.left="",e.style.top="",e.style.opacity=0,e.style.display="none",e.style.backgroundColor="",e.style.borderColor="",Blockly.DropDownDiv.onHide_&&(Blockly.DropDownDiv.onHide_(),Blockly.DropDownDiv.onHide_=null),Blockly.DropDownDiv.clearContent(),Blockly.DropDownDiv.owner_=null,Blockly.DropDownDiv.rendererClassName_&&(Blockly.utils.dom.removeClass(e,Blockly.DropDownDiv.rendererClassName_),Blockly.DropDownDiv.rendererClassName_=""),Blockly.DropDownDiv.themeClassName_&&(Blockly.utils.dom.removeClass(e,Blockly.DropDownDiv.themeClassName_),Blockly.DropDownDiv.themeClassName_=""),Blockly.getMainWorkspace().markFocused()}},Blockly.DropDownDiv.positionInternal_=function(e,t,n,o){(e=Blockly.DropDownDiv.getPositionMetrics_(e,t,n,o)).arrowVisible?(Blockly.DropDownDiv.arrow_.style.display="",Blockly.DropDownDiv.arrow_.style.transform="translate("+e.arrowX+"px,"+e.arrowY+"px) rotate(45deg)",Blockly.DropDownDiv.arrow_.setAttribute("class",e.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):Blockly.DropDownDiv.arrow_.style.display="none",t=Math.floor(e.initialX),n=Math.floor(e.initialY),o=Math.floor(e.finalX);var r=Math.floor(e.finalY),i=Blockly.DropDownDiv.DIV_;return i.style.left=t+"px",i.style.top=n+"px",i.style.display="block",i.style.opacity=1,i.style.transform="translate("+(o-t)+"px,"+(r-n)+"px)",!!e.arrowAtTop},Blockly.DropDownDiv.repositionForWindowResize=function(){if(Blockly.DropDownDiv.isVisible()&&Blockly.DropDownDiv.isDisplayed()){var e=Blockly.DropDownDiv.owner_,t=e.getSourceBlock();t=(e=Blockly.DropDownDiv.positionToField_?Blockly.DropDownDiv.getScaledBboxOfField_(e):Blockly.DropDownDiv.getScaledBboxOfBlock_(t)).left+(e.right-e.left)/2,Blockly.DropDownDiv.positionInternal_(t,e.bottom,t,e.top)}else Blockly.DropDownDiv.hideWithoutAnimation()},Blockly.registry={},Blockly.registry.typeMap_=Object.create(null),Blockly.registry.DEFAULT="default",Blockly.registry.Type=function(e){this.name_=e},Blockly.registry.Type.prototype.toString=function(){return this.name_},Blockly.registry.Type.CONNECTION_CHECKER=new Blockly.registry.Type("connectionChecker"),Blockly.registry.Type.CURSOR=new Blockly.registry.Type("cursor"),Blockly.registry.Type.EVENT=new Blockly.registry.Type("event"),Blockly.registry.Type.FIELD=new Blockly.registry.Type("field"),Blockly.registry.Type.RENDERER=new Blockly.registry.Type("renderer"),Blockly.registry.Type.TOOLBOX=new Blockly.registry.Type("toolbox"),Blockly.registry.Type.THEME=new Blockly.registry.Type("theme"),Blockly.registry.Type.TOOLBOX_ITEM=new Blockly.registry.Type("toolboxItem"),Blockly.registry.Type.FLYOUTS_VERTICAL_TOOLBOX=new Blockly.registry.Type("flyoutsVerticalToolbox"),Blockly.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new Blockly.registry.Type("flyoutsHorizontalToolbox"),Blockly.registry.Type.METRICS_MANAGER=new Blockly.registry.Type("metricsManager"),Blockly.registry.Type.BLOCK_DRAGGER=new Blockly.registry.Type("blockDragger"),Blockly.registry.register=function(e,t,n,o){if(!(e instanceof Blockly.registry.Type)&&"string"!=typeof e||""==String(e).trim())throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=String(e).toLowerCase(),"string"!=typeof t||""==t.trim())throw Error('Invalid name "'+t+'". The name must be a non-empty string.');if(t=t.toLowerCase(),!n)throw Error("Can not register a null value");var r=Blockly.registry.typeMap_[e];if(r||(r=Blockly.registry.typeMap_[e]=Object.create(null)),Blockly.registry.validate_(e,n),!o&&r[t])throw Error('Name "'+t+'" with type "'+e+'" already registered.');r[t]=n},Blockly.registry.validate_=function(e,t){switch(e){case String(Blockly.registry.Type.FIELD):if("function"!=typeof t.fromJson)throw Error('Type "'+e+'" must have a fromJson function')}},Blockly.registry.unregister=function(e,t){e=String(e).toLowerCase(),t=t.toLowerCase();var n=Blockly.registry.typeMap_[e];n&&n[t]?delete Blockly.registry.typeMap_[e][t]:console.warn("Unable to unregister ["+t+"]["+e+"] from the registry.")},Blockly.registry.getItem_=function(e,t,n){e=String(e).toLowerCase(),t=t.toLowerCase();var o=Blockly.registry.typeMap_[e];if(!o||!o[t]){if(t="Unable to find ["+t+"]["+e+"] in the registry.",n)throw Error(t+" You must require or register a "+e+" plugin.");return console.warn(t),null}return o[t]},Blockly.registry.hasItem=function(e,t){return e=String(e).toLowerCase(),t=t.toLowerCase(),!!(e=Blockly.registry.typeMap_[e])&&!!e[t]},Blockly.registry.getClass=function(e,t,n){return Blockly.registry.getItem_(e,t,n)},Blockly.registry.getObject=function(e,t,n){return Blockly.registry.getItem_(e,t,n)},Blockly.registry.getClassFromOptions=function(e,t,n){return"function"==typeof(t=t.plugins[e.toString()]||Blockly.registry.DEFAULT)?t:Blockly.registry.getClass(e,t,n)},Blockly.Events={},Blockly.Events.group_="",Blockly.Events.recordUndo=!0,Blockly.Events.disabled_=0,Blockly.Events.CREATE="create",Blockly.Events.BLOCK_CREATE=Blockly.Events.CREATE,Blockly.Events.DELETE="delete",Blockly.Events.BLOCK_DELETE=Blockly.Events.DELETE,Blockly.Events.CHANGE="change",Blockly.Events.BLOCK_CHANGE=Blockly.Events.CHANGE,Blockly.Events.MOVE="move",Blockly.Events.BLOCK_MOVE=Blockly.Events.MOVE,Blockly.Events.VAR_CREATE="var_create",Blockly.Events.VAR_DELETE="var_delete",Blockly.Events.VAR_RENAME="var_rename",Blockly.Events.UI="ui",Blockly.Events.END_DRAG="end_drag",Blockly.Events.BLOCK_DRAG="drag",Blockly.Events.SELECTED="selected",Blockly.Events.CLICK="click",Blockly.Events.MARKER_MOVE="marker_move",Blockly.Events.BUBBLE_OPEN="bubble_open",Blockly.Events.TRASHCAN_OPEN="trashcan_open",Blockly.Events.TOOLBOX_ITEM_SELECT="toolbox_item_select",Blockly.Events.THEME_CHANGE="theme_change",Blockly.Events.VIEWPORT_CHANGE="viewport_change",Blockly.Events.COMMENT_CREATE="comment_create",Blockly.Events.COMMENT_DELETE="comment_delete",Blockly.Events.COMMENT_CHANGE="comment_change",Blockly.Events.COMMENT_MOVE="comment_move",Blockly.Events.FINISHED_LOADING="finished_loading",Blockly.Events.BUMP_EVENTS=[Blockly.Events.BLOCK_CREATE,Blockly.Events.BLOCK_MOVE,Blockly.Events.COMMENT_CREATE,Blockly.Events.COMMENT_MOVE],Blockly.Events.FIRE_QUEUE_=[],Blockly.Events.fire=function(e){Blockly.Events.isEnabled()&&(Blockly.Events.FIRE_QUEUE_.length||setTimeout(Blockly.Events.fireNow_,0),Blockly.Events.FIRE_QUEUE_.push(e))},Blockly.Events.fireNow_=function(){for(var e,t=Blockly.Events.filter(Blockly.Events.FIRE_QUEUE_,!0),n=Blockly.Events.FIRE_QUEUE_.length=0;e=t[n];n++)if(e.workspaceId){var o=Blockly.Workspace.getById(e.workspaceId);o&&o.fireChangeListener(e)}},Blockly.Events.filter=function(e,t){e=e.slice(),t||e.reverse();for(var n,o=[],r=Object.create(null),i=0;n=e[i];i++)if(!n.isNull()){var s=[n.isUiEvent?Blockly.Events.UI:n.type,n.blockId,n.workspaceId].join(" "),a=r[s],l=a?a.event:null;a?n.type==Blockly.Events.MOVE&&a.index==i-1?(l.newParentId=n.newParentId,l.newInputName=n.newInputName,l.newCoordinate=n.newCoordinate,a.index=i):n.type==Blockly.Events.CHANGE&&n.element==l.element&&n.name==l.name?l.newValue=n.newValue:n.type==Blockly.Events.VIEWPORT_CHANGE?(l.viewTop=n.viewTop,l.viewLeft=n.viewLeft,l.scale=n.scale,l.oldScale=n.oldScale):(n.type!=Blockly.Events.CLICK||l.type!=Blockly.Events.BUBBLE_OPEN&&"breakpointSet"!=l.element)&&(r[s]={event:n,index:i},o.push(n)):(r[s]={event:n,index:i},o.push(n))}for(e=o.filter((function(e){return!e.isNull()})),t||e.reverse(),i=1;n=e[i];i++)n.type==Blockly.Events.CHANGE&&"mutation"==n.element&&e.unshift(e.splice(i,1)[0]);return e},Blockly.Events.clearPendingUndo=function(){for(var e,t=0;e=Blockly.Events.FIRE_QUEUE_[t];t++)e.recordUndo=!1},Blockly.Events.disable=function(){Blockly.Events.disabled_++},Blockly.Events.enable=function(){Blockly.Events.disabled_--},Blockly.Events.isEnabled=function(){return 0==Blockly.Events.disabled_},Blockly.Events.getGroup=function(){return Blockly.Events.group_},Blockly.Events.setGroup=function(e){Blockly.Events.group_="boolean"==typeof e?e?Blockly.utils.genUid():"":e},Blockly.Events.getDescendantIds=function(e){var t=[];e=e.getDescendants(!1);for(var n,o=0;n=e[o];o++)t[o]=n.id;return t},Blockly.Events.fromJson=function(e,t){var n=Blockly.Events.get(e.type);if(!n)throw Error("Unknown event type.");return(n=new n).fromJson(e),n.workspaceId=t.id,n},Blockly.Events.get=function(e){return Blockly.registry.getClass(Blockly.registry.Type.EVENT,e)},Blockly.Events.disableOrphans=function(e){if((e.type==Blockly.Events.MOVE||e.type==Blockly.Events.CREATE)&&e.workspaceId){var t=Blockly.Workspace.getById(e.workspaceId),n=t.getBlockById(e.blockId);if(n){e=Blockly.Events.recordUndo;try{Blockly.Events.recordUndo=!1;var o=n.getParent();if(o&&o.isEnabled()){var r,i=n.getDescendants(!1);for(t=0;r=i[t];t++)r.setEnabled(!0)}else if((n.outputConnection||n.previousConnection)&&!t.isDragging())do{n.setEnabled(!1),n=n.getNextBlock()}while(n)}finally{Blockly.Events.recordUndo=e}}}},Blockly.Events.Abstract=function(){this.isBlank=null,this.workspaceId=void 0,this.group=Blockly.Events.getGroup(),this.recordUndo=Blockly.Events.recordUndo},Blockly.Events.Abstract.prototype.isUiEvent=!1,Blockly.Events.Abstract.prototype.toJson=function(){var e={type:this.type};return this.group&&(e.group=this.group),e},Blockly.Events.Abstract.prototype.fromJson=function(e){this.isBlank=!1,this.group=e.group},Blockly.Events.Abstract.prototype.isNull=function(){return!1},Blockly.Events.Abstract.prototype.run=function(e){},Blockly.Events.Abstract.prototype.getEventWorkspace_=function(){if(this.workspaceId)var e=Blockly.Workspace.getById(this.workspaceId);if(!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e},Blockly.utils.object={},Blockly.utils.object.inherits=function(e,t){e.superClass_=t.prototype,e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Blockly.utils.object.mixin=function(e,t){for(var n in t)e[n]=t[n]},Blockly.utils.object.deepMerge=function(e,t){for(var n in t)e[n]=null!=t[n]&&"object"==typeof t[n]?Blockly.utils.object.deepMerge(e[n]||Object.create(null),t[n]):t[n];return e},Blockly.utils.object.values=function(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))},Blockly.utils.xml={},Blockly.utils.xml.NAME_SPACE="https://developers.google.com/blockly/xml",Blockly.utils.xml.document=function(){return document},Blockly.utils.xml.createElement=function(e){return Blockly.utils.xml.document().createElementNS(Blockly.utils.xml.NAME_SPACE,e)},Blockly.utils.xml.createTextNode=function(e){return Blockly.utils.xml.document().createTextNode(e)},Blockly.utils.xml.textToDomDocument=function(e){return(new DOMParser).parseFromString(e,"text/xml")},Blockly.utils.xml.domToText=function(e){return(new XMLSerializer).serializeToString(e)},Blockly.inputTypes={VALUE:Blockly.connectionTypes.INPUT_VALUE,STATEMENT:Blockly.connectionTypes.NEXT_STATEMENT,DUMMY:5},Blockly.Xml={},Blockly.Xml.workspaceToDom=function(e,t){var n=Blockly.utils.xml.createElement("xml"),o=Blockly.Xml.variablesToDom(e.getAllVariables(e));o.hasChildNodes()&&n.appendChild(o);var r,i=e.getTopComments(!0);for(o=0;r=i[o];o++)n.appendChild(r.toXmlWithXY(t));for(e=e.getTopBlocks(!0),o=0;i=e[o];o++)n.appendChild(Blockly.Xml.blockToDomWithXY(i,t));return n},Blockly.Xml.variablesToDom=function(e){for(var t,n=Blockly.utils.xml.createElement("variables"),o=0;t=e[o];o++){var r=Blockly.utils.xml.createElement("variable");r.appendChild(Blockly.utils.xml.createTextNode(t.name)),t.type&&r.setAttribute("type",t.type),r.id=t.getId(),n.appendChild(r)}return n},Blockly.Xml.blockToDomWithXY=function(e,t){if(e.isInsertionMarker()&&!(e=e.getChildren(!1)[0]))return new DocumentFragment;var n;e.workspace.RTL&&(n=e.workspace.getWidth()),t=Blockly.Xml.blockToDom(e,t);var o=e.getRelativeToSurfaceXY();return t.setAttribute("x",Math.round(e.workspace.RTL?n-o.x:o.x)),t.setAttribute("y",Math.round(o.y)),t},Blockly.Xml.fieldToDom_=function(e){if(e.isSerializable()){var t=Blockly.utils.xml.createElement("field");return t.setAttribute("name",e.name||""),e.toXml(t)}return null},Blockly.Xml.allFieldsToDom_=function(e,t){for(var n,o=0;n=e.inputList[o];o++)for(var r,i=0;r=n.fieldRow[i];i++)(r=Blockly.Xml.fieldToDom_(r))&&t.appendChild(r)},Blockly.Xml.blockToDom=function(e,t){if(e.isInsertionMarker())return(e=e.getChildren(!1)[0])?Blockly.Xml.blockToDom(e):new DocumentFragment;var n=Blockly.utils.xml.createElement(e.isShadow()?"shadow":"block");if(n.setAttribute("type",e.type),t||n.setAttribute("id",e.id),e.mutationToDom){var o=e.mutationToDom();o&&(o.hasChildNodes()||o.hasAttributes())&&n.appendChild(o)}if(Blockly.Xml.allFieldsToDom_(e,n),e.isBreakpointSet()&&(o=Blockly.utils.xml.createElement("breakpoint"),n.appendChild(o)),o=e.getCommentText()){var r=e.commentModel.size,i=e.commentModel.pinned;e.getCommentIcon&&e.getCommentIcon()&&e.getCommentIcon().getRelativePosition();var s=Blockly.utils.xml.createElement("comment");s.appendChild(Blockly.utils.xml.createTextNode(o)),s.setAttribute("pinned",i),s.setAttribute("h",r.height),s.setAttribute("w",r.width),n.appendChild(s)}for(e.data&&((o=Blockly.utils.xml.createElement("data")).appendChild(Blockly.utils.xml.createTextNode(e.data)),n.appendChild(o)),o=0;r=e.inputList[o];o++){var a;if(i=!0,r.type!=Blockly.inputTypes.DUMMY){var l=r.connection.targetBlock();r.type==Blockly.inputTypes.VALUE?a=Blockly.utils.xml.createElement("value"):r.type==Blockly.inputTypes.STATEMENT&&(a=Blockly.utils.xml.createElement("statement")),!(s=r.connection.getShadowDom())||l&&l.isShadow()||a.appendChild(Blockly.Xml.cloneShadow_(s,t)),l&&((s=Blockly.Xml.blockToDom(l,t)).nodeType==Blockly.utils.dom.NodeType.ELEMENT_NODE&&(a.appendChild(s),i=!1)),a.setAttribute("name",r.name),i||n.appendChild(a)}}return null!=e.inputsInline&&e.inputsInline!=e.inputsInlineDefault&&n.setAttribute("inline",e.inputsInline),e.isCollapsed()&&n.setAttribute("collapsed",!0),e.isEnabled()||n.setAttribute("disabled",!0),e.isDeletable()||e.isShadow()||n.setAttribute("deletable",!1),e.isMovablePersisted()||e.isShadow()||n.setAttribute("movable",!1),e.isEditablePersisted()||n.setAttribute("editable",!1),(o=e.getNextBlock())&&((s=Blockly.Xml.blockToDom(o,t)).nodeType==Blockly.utils.dom.NodeType.ELEMENT_NODE&&((a=Blockly.utils.xml.createElement("next")).appendChild(s),n.appendChild(a))),!(s=e.nextConnection&&e.nextConnection.getShadowDom())||o&&o.isShadow()||a.appendChild(Blockly.Xml.cloneShadow_(s,t)),n},Blockly.Xml.cloneShadow_=function(e,t){for(var n,o=e=e.cloneNode(!0);o;)if(t&&"shadow"==o.nodeName&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;)n=o,o=o.parentNode,n.nodeType==Blockly.utils.dom.NodeType.TEXT_NODE&&""==n.data.trim()&&o.firstChild!=n&&Blockly.utils.dom.removeNode(n);o&&(n=o,o=o.nextSibling,n.nodeType==Blockly.utils.dom.NodeType.TEXT_NODE&&""==n.data.trim()&&Blockly.utils.dom.removeNode(n))}return e},Blockly.Xml.domToText=function(e){return Blockly.utils.xml.domToText(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},Blockly.Xml.domToPrettyText=function(e){e=Blockly.Xml.domToText(e).split("<");for(var t="",n=1;n<e.length;n++){var o=e[n];"/"==o[0]&&(t=t.substring(2)),e[n]=t+"<"+o,"/"!=o[0]&&"/>"!=o.slice(-2)&&(t+="  ")}return(e=(e=e.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},Blockly.Xml.textToDom=function(e){e=e.replace(/xmlns="(.*?)"/,'xmlns="'+Blockly.utils.xml.NAME_SPACE+'"');var t=Blockly.utils.xml.textToDomDocument(e);if(!t||!t.documentElement||t.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+e);return t.documentElement},Blockly.Xml.clearWorkspaceAndLoadFromXml=function(e,t){return t.setResizesEnabled(!1),t.clear(),e=Blockly.Xml.domToWorkspace(e,t),t.setResizesEnabled(!0),e},Blockly.Xml.domToWorkspace=function(e,t){if(e instanceof Blockly.Workspace){var n=e;e=t,t=n,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var o;t.loadingEventsDisabled=!0,t.RTL&&(o=t.getWidth()),n=[],Blockly.utils.dom.startTextWidthCache();var r=Blockly.Events.getGroup();r||Blockly.Events.setGroup(!0),t.setResizesEnabled&&t.setResizesEnabled(!1);var i=!0;try{for(var s,a=0;s=e.childNodes[a];a++){var l=s.nodeName.toLowerCase(),c=s;if("block"==l||"shadow"==l&&!Blockly.Events.recordUndo){var u=Blockly.Xml.domToBlock(c,t);n.push(u.id);var p=c.hasAttribute("x")?parseInt(c.getAttribute("x"),10):10,d=c.hasAttribute("y")?parseInt(c.getAttribute("y"),10):10;isNaN(p)||isNaN(d)||u.moveBy(t.RTL?o-p:p,d),i=!1}else{if("shadow"==l)throw TypeError("Shadow block cannot be a top-level block.");if("comment"==l)t.rendered?Blockly.WorkspaceCommentSvg?Blockly.WorkspaceCommentSvg.fromXml(c,t,o):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment."):Blockly.WorkspaceComment?Blockly.WorkspaceComment.fromXml(c,t):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.");else if("variables"==l){if(!i)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");Blockly.Xml.domToVariables(c,t),i=!1}}}}finally{r||Blockly.Events.setGroup(!1),Blockly.utils.dom.stopTextWidthCache()}return t.setResizesEnabled&&t.setResizesEnabled(!0),t.loadingEventsDisabled=!1,t.getAllBlocks(!1).forEach((function(e){e.onLoadedIntoWorkspace()})),Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.FINISHED_LOADING))(t)),n},Blockly.Xml.appendDomToWorkspace=function(e,t){var n;if(Object.prototype.hasOwnProperty.call(t,"scale")&&(n=t.getBlocksBoundingBox()),e=Blockly.Xml.domToWorkspace(e,t),n&&n.top!=n.bottom){var o=n.bottom,r=t.RTL?n.right:n.left,i=1/0,s=-1/0,a=1/0;for(n=0;n<e.length;n++){var l=t.getBlockById(e[n]).getRelativeToSurfaceXY();l.y<a&&(a=l.y),l.x<i&&(i=l.x),l.x>s&&(s=l.x)}for(o=o-a+10,r=t.RTL?r-s:r-i,n=0;n<e.length;n++)t.getBlockById(e[n]).moveBy(r,o)}return e},Blockly.Xml.domToBlock=function(e,t){if(e instanceof Blockly.Workspace){var n=e;e=t,t=n,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}Blockly.Events.disable(),n=t.getAllVariables();try{var o=Blockly.Xml.domToBlockHeadless_(e,t),r=o.getDescendants(!1);if(t.rendered){o.setConnectionTracking(!1);for(var i=r.length-1;0<=i;i--)r[i].initSvg();for(i=r.length-1;0<=i;i--)r[i].render(!1);setTimeout((function(){o.disposed||o.setConnectionTracking(!0)}),1),o.updateDisabled(),t.resizeContents()}else for(i=r.length-1;0<=i;i--)r[i].initModel()}finally{Blockly.Events.enable()}if(Blockly.Events.isEnabled()){for(e=Blockly.Variables.getAddedVariables(t,n),i=0;i<e.length;i++)t=e[i],Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.VAR_CREATE))(t));Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.CREATE))(o))}return o},Blockly.Xml.domToVariables=function(e,t){for(var n,o=0;n=e.childNodes[o];o++)if(n.nodeType==Blockly.utils.dom.NodeType.ELEMENT_NODE){var r=n.getAttribute("type"),i=n.getAttribute("id");t.createVariable(n.textContent,r,i)}},Blockly.Xml.mapSupportedXmlTags_=function(e){for(var t,n={mutation:[],comment:[],data:[],field:[],input:[],next:[],breakpoint:[]},o=0;t=e.childNodes[o];o++)if(t.nodeType!=Blockly.utils.dom.NodeType.TEXT_NODE)switch(t.nodeName.toLowerCase()){case"mutation":n.mutation.push(t);break;case"comment":if(!Blockly.Comment){console.warn("Missing require for Blockly.Comment, ignoring block comment.");break}n.comment.push(t);break;case"data":n.data.push(t);break;case"title":case"field":n.field.push(t);break;case"value":case"statement":n.input.push(t);break;case"next":n.next.push(t);break;case"breakpoint":n.breakpoint.push(t);break;default:console.warn("Ignoring unknown tag: "+t.nodeName)}return n},Blockly.Xml.applyMutationTagNodes_=function(e,t){for(var n,o=!1,r=0;n=e[r];r++)t.domToMutation&&(t.domToMutation(n),t.initSvg&&(o=!0));return o},Blockly.Xml.applyCommentTagNodes_=function(e,t){for(var n,o=0;n=e[o];o++){var r=n.textContent,i="true"==n.getAttribute("pinned"),s=parseInt(n.getAttribute("w"),10),a=parseInt(n.getAttribute("h"),10);t.setCommentText(r),t.commentModel.pinned=i,isNaN(s)||isNaN(a)||(t.commentModel.size=new Blockly.utils.Size(s,a)),r=parseInt(n.getAttribute("relx"),10),n=parseInt(n.getAttribute("rely"),10),isNaN(r)||isNaN(n)||(t.commentModel.xy=new Blockly.utils.Coordinate(r,n)),i&&t.getCommentIcon&&!t.isInFlyout&&setTimeout((function(){t.getCommentIcon().setVisible(!0)}),1)}},Blockly.Xml.applyDataTagNodes_=function(e,t){for(var n,o=0;n=e[o];o++)t.data=n.textContent},Blockly.Xml.applyFieldTagNodes_=function(e,t){for(var n,o=0;n=e[o];o++){var r=n.getAttribute("name");Blockly.Xml.domToField_(t,r,n)}},Blockly.Xml.findChildBlocks_=function(e){for(var t,n={childBlockElement:null,childShadowElement:null},o=0;t=e.childNodes[o];o++)t.nodeType==Blockly.utils.dom.NodeType.ELEMENT_NODE&&("block"==t.nodeName.toLowerCase()?n.childBlockElement=t:"shadow"==t.nodeName.toLowerCase()&&(n.childShadowElement=t));return n},Blockly.Xml.applyInputTagNodes_=function(e,t,n,o){o=0;for(var r;r=e[o];o++){var i=r.getAttribute("name");if(i=n.getInput(i)){if((r=Blockly.Xml.findChildBlocks_(r)).childBlockElement){if(!i.connection)throw TypeError("Input connection does not exist.");Blockly.Xml.domToBlockHeadless_(r.childBlockElement,t,i.connection,!1)}r.childShadowElement&&i.connection.setShadowDom(r.childShadowElement)}}},Blockly.Xml.applyNextTagNodes_=function(e,t,n){for(var o,r=0;o=e[r];r++){if((o=Blockly.Xml.findChildBlocks_(o)).childBlockElement){if(!n.nextConnection)throw TypeError("Next statement does not exist.");if(n.nextConnection.isConnected())throw TypeError("Next statement is already connected.");Blockly.Xml.domToBlockHeadless_(o.childBlockElement,t,n.nextConnection,!0)}o.childShadowElement&&n.nextConnection&&n.nextConnection.setShadowDom(o.childShadowElement)}},Blockly.Xml.applyBreakpointTagNodes_=function(e,t){e&&0<e.length&&t.setBreakpoint(!0)},Blockly.Xml.domToBlockHeadless_=function(e,t,n,o){var r=e.getAttribute("type");if(!r)throw TypeError("Block type unspecified: "+e.outerHTML);var i=e.getAttribute("id");i=t.newBlock(r,i);var s=Blockly.Xml.mapSupportedXmlTags_(e),a=Blockly.Xml.applyMutationTagNodes_(s.mutation,i);if(Blockly.Xml.applyCommentTagNodes_(s.comment,i),Blockly.Xml.applyDataTagNodes_(s.data,i),n)if(o){if(!i.previousConnection)throw TypeError("Next block does not have previous statement.");n.connect(i.previousConnection)}else if(i.outputConnection)n.connect(i.outputConnection);else{if(!i.previousConnection)throw TypeError("Child block does not have output or previous statement.");n.connect(i.previousConnection)}return Blockly.Xml.applyFieldTagNodes_(s.field,i),Blockly.Xml.applyInputTagNodes_(s.input,t,i,r),Blockly.Xml.applyNextTagNodes_(s.next,t,i),Blockly.Xml.applyBreakpointTagNodes_(s.breakpoint,i),a&&i.initSvg(),(t=e.getAttribute("inline"))&&i.setInputsInline("true"==t),(t=e.getAttribute("disabled"))&&i.setEnabled("true"!=t&&"disabled"!=t),(t=e.getAttribute("deletable"))&&i.setDeletable("true"==t),(t=e.getAttribute("movable"))&&i.setMovable("true"==t),(t=e.getAttribute("editable"))&&i.setEditable("true"==t),(t=e.getAttribute("collapsed"))&&i.setCollapsed("true"==t),"shadow"==e.nodeName.toLowerCase()&&i.setShadow(!0),i},Blockly.Xml.domToField_=function(e,t,n){var o=e.getField(t);o?o.fromXml(n):console.warn("Ignoring non-existent field "+t+" in block "+e.type)},Blockly.Xml.deleteNext=function(e){for(var t,n=0;t=e.childNodes[n];n++)if("next"==t.nodeName.toLowerCase()){e.removeChild(t);break}},Blockly.Events.BlockBase=function(e){Blockly.Events.BlockBase.superClass_.constructor.call(this),this.blockId=(this.isBlank=void 0===e)?"":e.id,this.workspaceId=this.isBlank?"":e.workspace.id},Blockly.utils.object.inherits(Blockly.Events.BlockBase,Blockly.Events.Abstract),Blockly.Events.BlockBase.prototype.toJson=function(){var e=Blockly.Events.BlockBase.superClass_.toJson.call(this);return e.blockId=this.blockId,e},Blockly.Events.BlockBase.prototype.fromJson=function(e){Blockly.Events.BlockBase.superClass_.fromJson.call(this,e),this.blockId=e.blockId},Blockly.Events.BlockChange=function(e,t,n,o,r){Blockly.Events.Change.superClass_.constructor.call(this,e),e&&(this.element=void 0===t?"":t,this.name=void 0===n?"":n,this.oldValue=void 0===o?"":o,this.newValue=void 0===r?"":r)},Blockly.utils.object.inherits(Blockly.Events.BlockChange,Blockly.Events.BlockBase),Blockly.Events.Change=Blockly.Events.BlockChange,Blockly.Events.BlockChange.prototype.type=Blockly.Events.CHANGE,Blockly.Events.BlockChange.prototype.toJson=function(){var e=Blockly.Events.BlockChange.superClass_.toJson.call(this);return e.element=this.element,this.name&&(e.name=this.name),e.oldValue=this.oldValue,e.newValue=this.newValue,e},Blockly.Events.BlockChange.prototype.fromJson=function(e){Blockly.Events.BlockChange.superClass_.fromJson.call(this,e),this.element=e.element,this.name=e.name,this.oldValue=e.oldValue,this.newValue=e.newValue},Blockly.Events.BlockChange.prototype.isNull=function(){return this.oldValue==this.newValue},Blockly.Events.BlockChange.prototype.run=function(e){var t=this.getEventWorkspace_().getBlockById(this.blockId);if(t)switch(t.mutator&&t.mutator.setVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(t=t.getField(this.name))?t.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"breakpoint":t.enableBreakpoint(e);break;case"comment":t.setCommentText(e||null);break;case"collapsed":t.setCollapsed(!!e);break;case"disabled":t.setEnabled(!e);break;case"inline":t.setInputsInline(!!e);break;case"mutation":var n="";if(t.mutationToDom&&(n=(n=t.mutationToDom())&&Blockly.Xml.domToText(n)),t.domToMutation){var o=Blockly.Xml.textToDom(e||"<mutation/>");t.domToMutation(o),t.initSvg(),t.rendered&&t.render()}Blockly.Events.fire(new Blockly.Events.BlockChange(t,"mutation",null,n,e));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},Blockly.Events.Create=function(e){Blockly.Events.Create.superClass_.constructor.call(this,e),e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=e.workspace.rendered?Blockly.Xml.blockToDomWithXY(e):Blockly.Xml.blockToDom(e),this.ids=Blockly.Events.getDescendantIds(e))},Blockly.utils.object.inherits(Blockly.Events.Create,Blockly.Events.BlockBase),Blockly.Events.BlockCreate=Blockly.Events.Create,Blockly.Events.Create.prototype.type=Blockly.Events.CREATE,Blockly.Events.Create.prototype.toJson=function(){var e=Blockly.Events.Create.superClass_.toJson.call(this);return e.xml=Blockly.Xml.domToText(this.xml),e.ids=this.ids,this.recordUndo||(e.recordUndo=this.recordUndo),e},Blockly.Events.Create.prototype.fromJson=function(e){Blockly.Events.Create.superClass_.fromJson.call(this,e),this.xml=Blockly.Xml.textToDom(e.xml),this.ids=e.ids,void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},Blockly.Events.Create.prototype.run=function(e){var t=this.getEventWorkspace_();if(e)(e=Blockly.utils.xml.createElement("xml")).appendChild(this.xml),Blockly.Xml.domToWorkspace(e,t);else{e=0;for(var n;n=this.ids[e];e++){var o=t.getBlockById(n);o?o.dispose(!1):n==this.blockId&&console.warn("Can't uncreate non-existent block: "+n)}}},Blockly.Events.Delete=function(e){if(Blockly.Events.Delete.superClass_.constructor.call(this,e),e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=e.workspace.rendered?Blockly.Xml.blockToDomWithXY(e):Blockly.Xml.blockToDom(e),this.ids=Blockly.Events.getDescendantIds(e)}},Blockly.utils.object.inherits(Blockly.Events.Delete,Blockly.Events.BlockBase),Blockly.Events.BlockDelete=Blockly.Events.Delete,Blockly.Events.Delete.prototype.type=Blockly.Events.DELETE,Blockly.Events.Delete.prototype.toJson=function(){var e=Blockly.Events.Delete.superClass_.toJson.call(this);return e.oldXml=Blockly.Xml.domToText(this.oldXml),e.ids=this.ids,this.recordUndo||(e.recordUndo=this.recordUndo),e},Blockly.Events.Delete.prototype.fromJson=function(e){Blockly.Events.Delete.superClass_.fromJson.call(this,e),this.oldXml=Blockly.Xml.textToDom(e.oldXml),this.ids=e.ids,void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},Blockly.Events.Delete.prototype.run=function(e){var t=this.getEventWorkspace_();if(e){e=0;for(var n;n=this.ids[e];e++){var o=t.getBlockById(n);o?o.dispose(!1):n==this.blockId&&console.warn("Can't delete non-existent block: "+n)}}else(e=Blockly.utils.xml.createElement("xml")).appendChild(this.oldXml),Blockly.Xml.domToWorkspace(e,t)},Blockly.Events.Move=function(e){Blockly.Events.Move.superClass_.constructor.call(this,e),e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)},Blockly.utils.object.inherits(Blockly.Events.Move,Blockly.Events.BlockBase),Blockly.Events.BlockMove=Blockly.Events.Move,Blockly.Events.Move.prototype.type=Blockly.Events.MOVE,Blockly.Events.Move.prototype.toJson=function(){var e=Blockly.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(e.newParentId=this.newParentId),this.newInputName&&(e.newInputName=this.newInputName),this.newCoordinate&&(e.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(e.recordUndo=this.recordUndo),e},Blockly.Events.Move.prototype.fromJson=function(e){if(Blockly.Events.Move.superClass_.fromJson.call(this,e),this.newParentId=e.newParentId,this.newInputName=e.newInputName,e.newCoordinate){var t=e.newCoordinate.split(",");this.newCoordinate=new Blockly.utils.Coordinate(Number(t[0]),Number(t[1]))}void 0!==e.recordUndo&&(this.recordUndo=e.recordUndo)},Blockly.Events.Move.prototype.recordNew=function(){var e=this.currentLocation_();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate},Blockly.Events.Move.prototype.currentLocation_=function(){var e=this.getEventWorkspace_().getBlockById(this.blockId),t={},n=e.getParent();return n?(t.parentId=n.id,(e=n.getInputWithBlock(e))&&(t.inputName=e.name)):t.coordinate=e.getRelativeToSurfaceXY(),t},Blockly.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&Blockly.utils.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},Blockly.Events.Move.prototype.run=function(e){var t=this.getEventWorkspace_(),n=t.getBlockById(this.blockId);if(n){var o=e?this.newParentId:this.oldParentId,r=e?this.newInputName:this.oldInputName,i=e?this.newCoordinate:this.oldCoordinate;if(e=null,o&&!(e=t.getBlockById(o)))return void console.warn("Can't connect to non-existent block: "+o);if(n.getParent()&&n.unplug(),i)r=n.getRelativeToSurfaceXY(),n.moveBy(i.x-r.x,i.y-r.y);else{if(t=(n=n.outputConnection||n.previousConnection).type,r){if(e=e.getInput(r))var s=e.connection}else t==Blockly.connectionTypes.PREVIOUS_STATEMENT&&(s=e.nextConnection);s?n.connect(s):console.warn("Can't connect to non-existent input: "+r)}}else console.warn("Can't move non-existent block: "+this.blockId)},Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.CREATE,Blockly.Events.Create),Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.DELETE,Blockly.Events.Delete),Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.CHANGE,Blockly.Events.BlockChange),Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.MOVE,Blockly.Events.Move),Blockly.Events.FinishedLoading=function(e){this.isBlank=void 0===e,this.workspaceId=e?e.id:"",this.group=Blockly.Events.getGroup(),this.recordUndo=!1},Blockly.utils.object.inherits(Blockly.Events.FinishedLoading,Blockly.Events.Abstract),Blockly.Events.FinishedLoading.prototype.type=Blockly.Events.FINISHED_LOADING,Blockly.Events.FinishedLoading.prototype.toJson=function(){var e={type:this.type};return this.group&&(e.group=this.group),this.workspaceId&&(e.workspaceId=this.workspaceId),e},Blockly.Events.FinishedLoading.prototype.fromJson=function(e){this.isBlank=!1,this.workspaceId=e.workspaceId,this.group=e.group},Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.FINISHED_LOADING,Blockly.Events.FinishedLoading),Blockly.Events.UiBase=function(e){Blockly.Events.UiBase.superClass_.constructor.call(this),this.isBlank=void 0===e,this.workspaceId=e||"",this.recordUndo=!1},Blockly.utils.object.inherits(Blockly.Events.UiBase,Blockly.Events.Abstract),Blockly.Events.UiBase.prototype.isUiEvent=!0,Blockly.Events.Ui=function(e,t,n,o){Blockly.Events.Ui.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.element=void 0===t?"":t,this.oldValue=void 0===n?"":n,this.newValue=void 0===o?"":o},Blockly.utils.object.inherits(Blockly.Events.Ui,Blockly.Events.UiBase),Blockly.Events.Ui.prototype.type=Blockly.Events.UI,Blockly.Events.Ui.prototype.toJson=function(){var e=Blockly.Events.Ui.superClass_.toJson.call(this);return e.element=this.element,void 0!==this.newValue&&(e.newValue=this.newValue),this.blockId&&(e.blockId=this.blockId),e},Blockly.Events.Ui.prototype.fromJson=function(e){Blockly.Events.Ui.superClass_.fromJson.call(this,e),this.element=e.element,this.newValue=e.newValue,this.blockId=e.blockId},Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.UI,Blockly.Events.Ui),Blockly.Events.VarBase=function(e){Blockly.Events.VarBase.superClass_.constructor.call(this),this.varId=(this.isBlank=void 0===e)?"":e.getId(),this.workspaceId=this.isBlank?"":e.workspace.id},Blockly.utils.object.inherits(Blockly.Events.VarBase,Blockly.Events.Abstract),Blockly.Events.VarBase.prototype.toJson=function(){var e=Blockly.Events.VarBase.superClass_.toJson.call(this);return e.varId=this.varId,e},Blockly.Events.VarBase.prototype.fromJson=function(e){Blockly.Events.VarBase.superClass_.toJson.call(this),this.varId=e.varId},Blockly.Events.VarCreate=function(e){Blockly.Events.VarCreate.superClass_.constructor.call(this,e),e&&(this.varType=e.type,this.varName=e.name)},Blockly.utils.object.inherits(Blockly.Events.VarCreate,Blockly.Events.VarBase),Blockly.Events.VarCreate.prototype.type=Blockly.Events.VAR_CREATE,Blockly.Events.VarCreate.prototype.toJson=function(){var e=Blockly.Events.VarCreate.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},Blockly.Events.VarCreate.prototype.fromJson=function(e){Blockly.Events.VarCreate.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},Blockly.Events.VarCreate.prototype.run=function(e){var t=this.getEventWorkspace_();e?t.createVariable(this.varName,this.varType,this.varId):t.deleteVariableById(this.varId)},Blockly.Events.VarDelete=function(e){Blockly.Events.VarDelete.superClass_.constructor.call(this,e),e&&(this.varType=e.type,this.varName=e.name)},Blockly.utils.object.inherits(Blockly.Events.VarDelete,Blockly.Events.VarBase),Blockly.Events.VarDelete.prototype.type=Blockly.Events.VAR_DELETE,Blockly.Events.VarDelete.prototype.toJson=function(){var e=Blockly.Events.VarDelete.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},Blockly.Events.VarDelete.prototype.fromJson=function(e){Blockly.Events.VarDelete.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},Blockly.Events.VarDelete.prototype.run=function(e){var t=this.getEventWorkspace_();e?t.deleteVariableById(this.varId):t.createVariable(this.varName,this.varType,this.varId)},Blockly.Events.VarRename=function(e,t){Blockly.Events.VarRename.superClass_.constructor.call(this,e),e&&(this.oldName=e.name,this.newName=void 0===t?"":t)},Blockly.utils.object.inherits(Blockly.Events.VarRename,Blockly.Events.VarBase),Blockly.Events.VarRename.prototype.type=Blockly.Events.VAR_RENAME,Blockly.Events.VarRename.prototype.toJson=function(){var e=Blockly.Events.VarRename.superClass_.toJson.call(this);return e.oldName=this.oldName,e.newName=this.newName,e},Blockly.Events.VarRename.prototype.fromJson=function(e){Blockly.Events.VarRename.superClass_.fromJson.call(this,e),this.oldName=e.oldName,this.newName=e.newName},Blockly.Events.VarRename.prototype.run=function(e){var t=this.getEventWorkspace_();e?t.renameVariableById(this.varId,this.newName):t.renameVariableById(this.varId,this.oldName)},Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.VAR_CREATE,Blockly.Events.VarCreate),Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.VAR_DELETE,Blockly.Events.VarDelete),Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.VAR_RENAME,Blockly.Events.VarRename),Blockly.BlockDragSurfaceSvg=function(e){this.container_=e,this.createDom()},Blockly.BlockDragSurfaceSvg.prototype.SVG_=null,Blockly.BlockDragSurfaceSvg.prototype.dragGroup_=null,Blockly.BlockDragSurfaceSvg.prototype.container_=null,Blockly.BlockDragSurfaceSvg.prototype.scale_=1,Blockly.BlockDragSurfaceSvg.prototype.surfaceXY_=null,Blockly.BlockDragSurfaceSvg.prototype.childSurfaceXY_=new Blockly.utils.Coordinate(0,0),Blockly.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.SVG,{xmlns:Blockly.utils.dom.SVG_NS,"xmlns:html":Blockly.utils.dom.HTML_NS,"xmlns:xlink":Blockly.utils.dom.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{},this.SVG_))},Blockly.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(e){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(e),this.SVG_.style.display="block",this.surfaceXY_=new Blockly.utils.Coordinate(0,0),document.getElementsByClassName("injectionDiv")[0].style.overflow="visible"},Blockly.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(e,t,n){this.scale_=n,e=e.toFixed(0),t=t.toFixed(0),this.childSurfaceXY_.x=parseInt(e,10),this.childSurfaceXY_.y=parseInt(t,10),this.dragGroup_.setAttribute("transform","translate("+e+","+t+") scale("+n+")")},Blockly.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var e=this.surfaceXY_.x,t=this.surfaceXY_.y;e=e.toFixed(0),t=t.toFixed(0),this.SVG_.style.display="block",Blockly.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+t+"px, 0px)")},Blockly.BlockDragSurfaceSvg.prototype.translateBy=function(e,t){this.surfaceXY_=new Blockly.utils.Coordinate(this.surfaceXY_.x+e,this.surfaceXY_.y+t),this.translateSurfaceInternal_()},Blockly.BlockDragSurfaceSvg.prototype.translateSurface=function(e,t){this.surfaceXY_=new Blockly.utils.Coordinate(e*this.scale_,t*this.scale_),this.translateSurfaceInternal_()},Blockly.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var e=Blockly.utils.getRelativeXY(this.SVG_);return new Blockly.utils.Coordinate(e.x/this.scale_,e.y/this.scale_)},Blockly.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},Blockly.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},Blockly.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},Blockly.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},Blockly.BlockDragSurfaceSvg.prototype.clearAndHide=function(e){if(e?this.getCurrentBlock()&&e.appendChild(this.getCurrentBlock()):this.getCurrentBlock()&&this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null,document.getElementsByClassName("injectionDiv")[0].style.overflow="hidden"},Blockly.BlockDragSurfaceSvg.prototype.setOpacity=function(e){this.SVG_.setAttribute("opacity",e)},Blockly.Colours={text:"#575E75",workspace:"#F9F9F9",toolboxHover:"#4C97FF",toolboxSelected:"#e9eef2",toolboxText:"#575E75",toolbox:"#FFFFFF",flyout:"#444",scrollbar:"#CECDCE",scrollbarHover:"#CECDCE",textField:"#FFFFFF",insertionMarker:"#000000",insertionMarkerOpacity:.2,dragShadowOpacity:.4,stackGlow:"#FFF200",stackGlowSize:4,stackGlowOpacity:1,replacementGlow:"#FFF200",replacementGlowSize:2,replacementGlowOpacity:1,highlightGlow:"#FFF200",highlightGlowSize:1.1,highlightGlowOpacity:1,selectedGlow:"#FFF200",selectedGlowSize:.4,warningGlow:"#E53D00",warningGlowSize:1.1,warningGlowOpacity:1,colourPickerStroke:"#FFFFFF",fieldShadow:"rgba(255, 255, 255, 0.2)",dropDownShadow:"rgba(0, 0, 0, .3)",numPadBackground:"#547AB2",numPadBorder:"#435F91",numPadActiveBackground:"#435F91",numPadText:"#FFFFFF",valueReportBackground:"#FFFFFF",valueReportBorder:"#AAAAAA",canvasTransitionLength:500},Blockly.Css={},Blockly.Css.injected_=!1,Blockly.Css.register=function(e){if(Blockly.Css.injected_)throw Error("CSS already injected");Array.prototype.push.apply(Blockly.Css.CONTENT,e),e.length=0},Blockly.Css.inject=function(e,t){if(!Blockly.Css.injected_){Blockly.Css.injected_=!0;var n=Blockly.Css.CONTENT.join("\n");if(Blockly.Css.CONTENT.length=0,e){for(var o in e=t.replace(/[\\/]$/,""),n=n.replace(/<<<PATH>>>/g,e),Blockly.Colours)Blockly.Colours.hasOwnProperty(o)&&(n=n.replace(new RegExp("\\$colour\\_"+o,"g"),Blockly.Colours[o]));(o=document.createElement("style")).id="blockly-common-style",n=document.createTextNode(n),o.appendChild(n),document.head.insertBefore(o,document.head.firstChild)}}},Blockly.Css.CONTENT=[".blocklySvg {","background-color: $colour_workspace;","outline: none;","overflow: hidden;","position: absolute;","display: block;","touch-action: none;","}",".blocklyRelativeWrapper {","position: relative;","width: 100%;","height: 100%;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyWidgetDiv.fieldTextInput {","overflow: hidden;","border: 1px solid;","box-sizing: border-box;","transform-origin: 0 0;","-ms-transform-origin: 0 0;","-moz-transform-origin: 0 0;","-webkit-transform-origin: 0 0;","}",".blocklyTextDropDownArrow {","position: absolute;","}",".blocklyNonSelectable {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","touch-action: none;","cursor: move;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyBlockCanvas.blocklyTransitioning {","transition: all 0.5s ease-in-out;","}",".blocklyBlockCanvas.blocklyCanvasTransitioning,",".blocklyBubbleCanvas.blocklyCanvasTransitioning {","transition: transform .5s;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font: 9pt sans-serif;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: absolute;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-color: #dadce0;","background-color: #fff;","border-radius: 2px;","box-shadow: 0px 0px 8px 1px "+Blockly.Colours.dropDownShadow+";","padding: 4px;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","overflow-x: hidden;","position: relative;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyDropDownButtonHover {","box-shadow: 0px 0px 0px 4px "+Blockly.Colours.fieldShadow+";","}",".blocklyDropDownButton:active {","box-shadow: 0px 0px 0px 6px "+Blockly.Colours.fieldShadow+";","}",".blocklyDropDownButton > img {","width: 80%;","height: 80%;","margin-top: 5%","}",".blocklyDropDownPlaceholder {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","}",".blocklyNumPadButton {","display: inline-block;","float: left;","padding: 0;","width: 48px;","height: 48px;","margin: 4px;","border-radius: 4px;","background: $colour_numPadBackground;","color: $colour_numPadText;","outline: none;","border: 1px solid $colour_numPadBorder;","cursor: pointer;","font-weight: 600;",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 12pt;","-webkit-tap-highlight-color: rgba(0,0,0,0);","}",".blocklyNumPadButton > img {","margin-top: 10%;","width: 80%;","height: 80%;","}",".blocklyNumPadButton:active {","background: $colour_numPadActiveBackground;","-webkit-tap-highlight-color: rgba(0,0,0,0);","}",".blocklyArrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".blocklyArrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".valueReportBox {","min-width: 50px;","max-width: 300px;","max-height: 200px;","overflow: auto;","word-wrap: break-word;","text-align: center;",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: .8em;","}",".blocklyResizeSE {","cursor: se-resize;","fill: transparent;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: transparent;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #FFF200;","stroke-width: 4px;","}",".blocklyPath {","stroke-width: 1px;","transition: stroke .4s;","}",".blocklyDraggable:not(.blocklySelected)>.blocklyPath.blocklyReporterHover {","stroke-width: 2px;","stroke: white;","}",".blocklyBlockBackground.blocklyFieldHover {","stroke-width: 2px;","stroke: white;","}",".blocklySelected>.blocklyPath {","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","touch-action: none;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","touch-action: none;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDragging>.blocklyPath {","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDisabled .blocklyEditableText .blocklyBlockBackground,",".blocklyDisabled .blocklyNonEditableText .blocklyBlockBackground,",'.blocklyDisabled g[data-argument-type="dropdown"] .blocklyBlockBackground {',"fill-opacity: 0.1 !important;","}",".blocklyInsertionMarker>.blocklyPath {","stroke: none;","}",".blocklyInsertionMarker>.blocklyIconGroup {","display: none;","}",".blocklyInsertionMarker>.blocklyPath,",".blocklyInsertionMarker>.blocklyPathLight,",".blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: .2;","stroke: none;","}",".blocklyReplaceable .blocklyPath {","fill-opacity: 0.5;","}",".blocklyReplaceable .blocklyPathLight,",".blocklyReplaceable .blocklyPathDark {","display: none;","}",".blocklyText {","cursor: default;","fill: #fff;",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 12pt;","font-weight: bold;","}",".blocklyTextTruncated {","font-size: 11pt;","}",".blocklyMultilineText {","font-family: monospace;","}",".blocklyNonEditableText>g>text {","pointer-events: none;","}",".blocklyNonEditableText>text,",".blocklyEditableText>text,",".blocklyNonEditableText>g>text,",".blocklyEditableText>g>text {","fill: $colour_text;","}",".blocklyDropdownText {","fill: #fff !important;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyText text {","cursor: default;","}",".blocklySvg text,",".blocklyBlockDragSurface text {","user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup,",".blocklyBreakpointIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyBreakpointIconGroup:hover,",".blocklyBreakpointIconGroupReadonly {","fill-opacity: .6;","}",".blocklyIconShape {","fill: #000;","stroke-width: 1px;","stroke: #fff;","cursor: pointer;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","background-color: #FAF6BD;","}",".blocklyUneditableMinimalBody {","fill: #FAF6BD;","}",".blocklyHtmlInput {","border: none;",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 12pt;","height: 100%;","margin: 0;","outline: none;","box-sizing: border-box;","width: 100%;","text-align: center;","color: $colour_text;","font-weight: bold;","}",".blocklyHtmlInput::-ms-clear {","display: none;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","touch-action: none;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: $colour_flyout;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal,",".blocklyScrollbarVertical {","position: absolute;","outline: none;","touch-action: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: $colour_scrollbar;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: $colour_scrollbarHover;","}",".blocklyZoom>image {","opacity: 1;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyVerticalMarker {","stroke-width: 3px;","fill: rgba(255,255,255,.5);","pointer-events: none;","}",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-icon {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","}",".blocklyWidgetDiv .goog-menu {","background: #fff;","border-color: transparent;","border-style: solid;","border-width: 1px;","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","box-shadow: 0px 0px 3px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .goog-menu {","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","z-index: 20000;","box-shadow: 0px 0px 3px 1px rgba(0,0,0,.3);","}",".blocklyWidgetDiv .goog-menu.focused {","box-shadow: 0px 0px 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .goog-menu {","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","z-index: 20000;","}",".blocklyWidgetDiv .goog-menuitem,",".blocklyDropDownDiv .goog-menuitem {","color: #000;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"list-style: none;","margin: 0;","min-width: 7em;","border: none;","padding: 6px 15px;","white-space: nowrap;","cursor: pointer;","}",".blocklyWidgetDiv .goog-menu-nocheckbox .goog-menuitem,",".blocklyWidgetDiv .goog-menu-noicon .goog-menuitem,",".blocklyDropDownDiv .goog-menu-nocheckbox .goog-menuitem,",".blocklyDropDownDiv .goog-menu-noicon .goog-menuitem {","padding-left: 12px;","}",".blocklyWidgetDiv .goog-menuitem-content,",".blocklyDropDownDiv .goog-menuitem-content {","font-family: Arial, sans-serif;","font-size: 13px;","}",".blocklyWidgetDiv .goog-menuitem-content {","color: #000;","}",".blocklyDropDownDiv .goog-menuitem-content {","color: #000;","}",".blocklyWidgetDiv .goog-menuitem-disabled,",".blocklyDropDownDiv .goog-menuitem-disabled {","cursor: inherit;","}",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-content,",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-content {","color: #ccc !important;","}",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-icon {","opacity: .3;","filter: alpha(opacity=30);","}",".blocklyWidgetDiv .goog-menuitem-highlight ,",".blocklyDropDownDiv .goog-menuitem-highlight {","background-color: rgba(0,0,0,.1);","}",".blocklyWidgetDiv .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-icon {","background-repeat: no-repeat;","height: 16px;","left: 6px;","position: absolute;","right: auto;","vertical-align: middle;","width: 16px;","}",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-icon {","left: auto;","right: 6px;","}",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-icon {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px !important;","position: static;","float: left;","margin-left: -24px;","}",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-icon {","float: right;","margin-right: -24px;","}",".blocklyWidgetDiv .goog-menuseparator, ",".blocklyDropDownDiv .goog-menuseparator {","border-top: 1px solid #ccc;","margin: 4px 0;","padding: 0;","}",".blocklyComputeCanvas {","position: absolute;","width: 0;","height: 0;","}",".blocklyNoPointerEvents {","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","border-radius: 2px;","padding: 0 !important;","}",".blocklyDropDownNumPad {","background-color: $colour_numPadBackground;","}",".blocklyWidgetDiv .blocklyDropdownMenu .goog-menuitem,",".blocklyDropDownDiv .blocklyDropdownMenu .goog-menuitem,",".blocklyDropdownMenu .blocklyMenuItem {","padding-left: 28px;","}",".blocklyDropdownMenu .blocklyMenuItemRtl {","padding-left: 5px;","padding-right: 28px;","}",".blocklyWidgetDiv .blocklyMenu {","background: #fff;","border: 1px solid transparent;","box-shadow: 0 0 3px 1px rgba(0,0,0,.3);","font: normal 13px Arial, sans-serif;","margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","max-height: 100%;","z-index: 20000;","}",".blocklyDropDownDiv .goog-menu {","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","z-index: 20000;","box-shadow: 0px 0px 3px 1px rgba(0,0,0,.3);","}",".blocklyWidgetDiv .goog-menu.focused,",".blocklyWidgetDiv .blocklyMenu.blocklyFocused {","box-shadow: 0 0 6px 1px rgba(0,0,0,.3);","}",".blocklyDropDownDiv .blocklyMenu {","background: inherit;","border: inherit;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","position: relative;","z-index: 20000;","}",".blocklyMenuItem {","border: none;","color: #000;","cursor: pointer;","list-style: none;","margin: 0;","min-width: 7em;","padding: 6px 15px;","white-space: nowrap;","}",".blocklyMenuItemDisabled {","color: #ccc;","cursor: inherit;","}",".blocklyMenuItemHighlight {","background-color: rgba(0,0,0,.1);","}",".blocklyMenuItemCheckbox {","height: 16px;","position: absolute;","width: 16px;","}",".blocklyMenuItemSelected .blocklyMenuItemCheckbox {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;","float: left;","margin-left: -24px;","position: static;","}",".blocklyMenuItemRtl .blocklyMenuItemCheckbox {","float: right;","margin-right: -24px;","}",".blocklyDropDownDiv .goog-slider-horizontal {","margin: 8px;","height: 22px;","width: 150px;","position: relative;","outline: none;","border-radius: 11px;","margin-bottom: 20px;","background: #547AB2","}",".blocklyDropDownDiv .goog-slider-horizontal .goog-slider-thumb {","width: 26px;","height: 26px;","top: -1px;","position: absolute;","background-color: white;","border-radius: 100%;","-webkit-box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);","-moz-box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);","box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);","cursor: pointer","}",".blocklyFieldSliderLabel {",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 0.65rem;","color: $colour_toolboxText;","margin: 8px;","}",".blocklyFieldSliderLabelText {","font-weight: bold;","}",".blocklyFieldSliderReadout {","margin-left: 10px;","}",".blocklyHighlighted>.blocklyPath {","stroke: #ff8b27;","stroke-width: 5px;","}",".argumentEditorRemoveIcon {","position: absolute;","width: 24px;","height: 24px;","top: -40px;","left: 50%;","margin-left: -12px;","cursor: pointer;","}",".functioneditor i.argumentEditorTypeIcon {","position: absolute;","width: 24px;","height: 24px;","top: 40px;","left: 50%;","margin-left: -12px;","}",".blocklyWidgetDiv.fieldTextInput.argumentEditorInput {","overflow: visible;","}",".functionNameText {","font-weight: bold;","}",".field-text-quote {","fill: #a31515 !important;","}"],Blockly.Grid=function(e,t){this.gridPattern_=e,this.spacing_=t.spacing,this.length_=t.length,this.line2_=(this.line1_=e.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=t.snap,this.imageOptions_=t.image},Blockly.Grid.prototype.scale_=1,Blockly.Grid.prototype.dispose=function(){this.gridPattern_=null},Blockly.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},Blockly.Grid.prototype.getSpacing=function(){return this.spacing_},Blockly.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},Blockly.Grid.prototype.update=function(e){this.scale_=e;var t=this.spacing_*e||100;this.gridPattern_.setAttribute("width",this.imageOptions_&&this.imageOptions_.width?this.imageOptions_.width:t),this.gridPattern_.setAttribute("height",this.imageOptions_&&this.imageOptions_.height?this.imageOptions_.height:t);var n=(t=Math.floor(this.spacing_/2)+.5)-this.length_/2,o=t+this.length_/2;t*=e,n*=e,o*=e,this.imageOptions_?this.gridPattern_.setAttribute("patternTransform","scale("+e+")"):(this.setLineAttributes_(this.line1_,e,n,o,t,t),this.setLineAttributes_(this.line2_,e,t,t,n,o))},Blockly.Grid.prototype.setLineAttributes_=function(e,t,n,o,r,i){e&&(e.setAttribute("stroke-width",t),e.setAttribute("x1",n),e.setAttribute("y1",r),e.setAttribute("x2",o),e.setAttribute("y2",i))},Blockly.Grid.prototype.moveTo=function(e,t){this.gridPattern_.setAttribute("x",e),this.gridPattern_.setAttribute("y",t),(Blockly.utils.userAgent.IE||Blockly.utils.userAgent.EDGE)&&this.update(this.scale_)},Blockly.Grid.createDom=function(e,t,n){return e=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},n),0<t.length&&0<t.spacing?(Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{stroke:t.colour},e),1<t.length&&Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{stroke:t.colour},e)):t.image&&t.image.path?(t=t.image,delete(n=JSON.parse(JSON.stringify(t))).path,Blockly.utils.dom.createSvgElement("image",n,e).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.path),this.imageOptions_=t):Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{},e),e},Blockly.Theme=function(e,t,n,o){this.name=e,this.blockStyles=t||Object.create(null),this.categoryStyles=n||Object.create(null),this.componentStyles=o||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,Blockly.registry.register(Blockly.registry.Type.THEME,e,this)},Blockly.Theme.prototype.getClassName=function(){return this.name+"-theme"},Blockly.Theme.prototype.setBlockStyle=function(e,t){this.blockStyles[e]=t},Blockly.Theme.prototype.setCategoryStyle=function(e,t){this.categoryStyles[e]=t},Blockly.Theme.prototype.getComponentStyle=function(e){return(e=this.componentStyles[e])&&"string"==typeof e&&this.getComponentStyle(e)?this.getComponentStyle(e):e?String(e):null},Blockly.Theme.prototype.setComponentStyle=function(e,t){this.componentStyles[e]=t},Blockly.Theme.prototype.setFontStyle=function(e){this.fontStyle=e},Blockly.Theme.prototype.setStartHats=function(e){this.startHats=e},Blockly.Theme.defineTheme=function(e,t){var n=new Blockly.Theme(e),o=t.base;return o&&("string"==typeof o&&(o=Blockly.registry.getObject(Blockly.registry.Type.THEME,o)),o instanceof Blockly.Theme&&(Blockly.utils.object.deepMerge(n,o),n.name=e)),Blockly.utils.object.deepMerge(n.blockStyles,t.blockStyles),Blockly.utils.object.deepMerge(n.categoryStyles,t.categoryStyles),Blockly.utils.object.deepMerge(n.componentStyles,t.componentStyles),Blockly.utils.object.deepMerge(n.fontStyle,t.fontStyle),null!=t.startHats&&(n.startHats=t.startHats),n},Blockly.Themes={},Blockly.Themes.Classic={},Blockly.Themes.Classic.defaultBlockStyles={colour_blocks:{colourPrimary:"20"},field_blocks:{colourPrimary:Blockly.Colours.textField,colourSecondary:Blockly.Colours.textField,colourTertiary:Blockly.Colours.textField},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},Blockly.Themes.Classic.categoryStyles={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},Blockly.Themes.Classic=new Blockly.Theme("classic",Blockly.Themes.Classic.defaultBlockStyles,Blockly.Themes.Classic.categoryStyles),Blockly.utils.IdGenerator={},Blockly.utils.IdGenerator.nextId_=0,Blockly.utils.IdGenerator.getNextUniqueId=function(){return"blockly-"+(Blockly.utils.IdGenerator.nextId_++).toString(36)},Blockly.utils.Metrics=function(){},Blockly.utils.toolbox={},Blockly.utils.toolbox.CATEGORY_TOOLBOX_KIND="categoryToolbox",Blockly.utils.toolbox.FLYOUT_TOOLBOX_KIND="flyoutToolbox",Blockly.utils.toolbox.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},Blockly.utils.toolbox.convertToolboxDefToJson=function(e){return e?((e instanceof Element||"string"==typeof e)&&(e=Blockly.utils.toolbox.parseToolboxTree(e),e=Blockly.utils.toolbox.convertToToolboxJson_(e)),Blockly.utils.toolbox.validateToolbox_(e),e):null},Blockly.utils.toolbox.validateToolbox_=function(e){var t=e.kind;if(e=e.contents,t&&t!=Blockly.utils.toolbox.FLYOUT_TOOLBOX_KIND&&t!=Blockly.utils.toolbox.CATEGORY_TOOLBOX_KIND)throw Error("Invalid toolbox kind "+t+". Please supply either "+Blockly.utils.toolbox.FLYOUT_TOOLBOX_KIND+" or "+Blockly.utils.toolbox.CATEGORY_TOOLBOX_KIND);if(!e)throw Error("Toolbox must have a contents attribute.")},Blockly.utils.toolbox.convertFlyoutDefToJsonArray=function(e){return e?e.contents?e.contents:Array.isArray(e)&&0<e.length&&!e[0].nodeType?e:Blockly.utils.toolbox.xmlToJsonArray_(e):[]},Blockly.utils.toolbox.hasCategories=function(e){if(!e)return!1;var t=e.kind;return t?t==Blockly.utils.toolbox.CATEGORY_TOOLBOX_KIND:!!e.contents.filter((function(e){return"CATEGORY"==e.kind.toUpperCase()})).length},Blockly.utils.toolbox.isCategoryCollapsible=function(e){return!(!e||!e.contents)&&!!e.contents.filter((function(e){return"CATEGORY"==e.kind.toUpperCase()})).length},Blockly.utils.toolbox.convertToToolboxJson_=function(e){var t={contents:Blockly.utils.toolbox.xmlToJsonArray_(e)};return e instanceof Node&&Blockly.utils.toolbox.addAttributes_(e,t),t},Blockly.utils.toolbox.xmlToJsonArray_=function(e){var t,n=[],o=e.childNodes;for(o||(o=e),e=0;t=o[e];e++)if(t.tagName){var r={},i=t.tagName.toUpperCase();r.kind=i,"BLOCK"==i?r.blockxml=t:t.childNodes&&0<t.childNodes.length&&(r.contents=Blockly.utils.toolbox.xmlToJsonArray_(t)),Blockly.utils.toolbox.addAttributes_(t,r),n.push(r)}return n},Blockly.utils.toolbox.addAttributes_=function(e,t){for(var n=0;n<e.attributes.length;n++){var o=e.attributes[n];-1<o.nodeName.indexOf("css-")?(t.cssconfig=t.cssconfig||{},t.cssconfig[o.nodeName.replace("css-","")]=o.value):t[o.nodeName]=o.value}},Blockly.utils.toolbox.parseToolboxTree=function(e){if(e){if("string"!=typeof e&&(Blockly.utils.userAgent.IE&&e.outerHTML?e=e.outerHTML:e instanceof Element||(e=null)),"string"==typeof e&&"xml"!=(e=Blockly.Xml.textToDom(e)).nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else e=null;return e},Blockly.Options=function(e){var t=!!e.readOnly;if(t)var n=null,o=!1,r=!1,i=!1,s=!1,a=!1,l=!1,c=!1;else{n=Blockly.utils.toolbox.convertToolboxDefToJson(e.toolbox),o=null!=e.hasCategories?e.hasCategories:Blockly.utils.toolbox.hasCategories(n),void 0===(r=e.trashcan)&&(r=o);var u=e.maxTrashcanContents;r?void 0===u&&(u=32):u=0,void 0===(i=e.collapse)&&(i=o),void 0===(s=e.comments)&&(s=o),void 0===(a=e.disable)&&(a=o),void 0===(l=e.sounds)&&(l=!0);var p=e.inline;void 0===p&&(p=!1)}var d=!!e.rtl,g=e.horizontalLayout;void 0===g&&(g=!1);var h=e.toolboxPosition;h="end"!==h,h=g?h?Blockly.utils.toolbox.Position.TOP:Blockly.utils.toolbox.Position.BOTTOM:h==d?Blockly.utils.toolbox.Position.RIGHT:Blockly.utils.toolbox.Position.LEFT;var f=e.css;void 0===f&&(f=!0);var _="https://blockly-demo.appspot.com/static/media/";e.media?_=e.media:e.path&&(_=e.path+"media/");var m=void 0===e.oneBasedIndex||!!e.oneBasedIndex,y=e.renderer||"geras",k=e.colours;if(k)for(var b in k)k.hasOwnProperty(b)&&Blockly.Colours.hasOwnProperty(b)&&(Blockly.Colours[b]=k[b]);b=e.plugins||{},this.RTL=d,this.oneBasedIndex=m,this.collapse=i,this.comments=s,this.debugMode=c,this.disable=a,this.readOnly=t,this.maxBlocks=e.maxBlocks||1/0,this.maxInstances=e.maxInstances,this.inline=p,this.newFunctions=1==e.newFunctions,this.pathToMedia=_,this.hasCategories=o,this.moveOptions=Blockly.Options.parseMoveOptions_(e,o),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=r,this.maxTrashcanContents=u,this.hasSounds=l,this.hasCss=f,this.horizontalLayout=g,this.languageTree=n,this.gridOptions=Blockly.Options.parseGridOptions_(e),this.zoomOptions=Blockly.Options.parseZoomOptions_(e),this.toolboxPosition=h,this.theme=Blockly.Options.parseThemeOptions_(e),this.renderer=y,this.rendererOverrides=e.rendererOverrides,this.gridPattern=null,this.parentWorkspace=e.parentWorkspace,this.plugins=b},Blockly.BlocklyOptions=function(){},Blockly.Options.parseMoveOptions_=function(e,t){var n=e.move||{},o={};return void 0===n.scrollbars&&void 0===e.scrollbars?o.scrollbars=t:"object"==typeof n.scrollbars?(o.scrollbars={},o.scrollbars.horizontal=!!n.scrollbars.horizontal,o.scrollbars.vertical=!!n.scrollbars.vertical,o.scrollbars.horizontal&&o.scrollbars.vertical?o.scrollbars=!0:o.scrollbars.horizontal||o.scrollbars.vertical||(o.scrollbars=!1)):o.scrollbars=!!n.scrollbars||!!e.scrollbars,o.wheel=o.scrollbars&&void 0!==n.wheel?!!n.wheel:"object"==typeof o.scrollbars,o.drag=!!o.scrollbars&&(void 0===n.drag||!!n.drag),o},Blockly.Options.parseZoomOptions_=function(e){e=e.zoom||{};var t={};return t.controls=void 0!==e.controls&&!!e.controls,t.wheel=void 0!==e.wheel&&!!e.wheel,t.startScale=void 0===e.startScale?1:Number(e.startScale),t.maxScale=void 0===e.maxScale?3:Number(e.maxScale),t.minScale=void 0===e.minScale?.3:Number(e.minScale),t.scaleSpeed=void 0===e.scaleSpeed?1.2:Number(e.scaleSpeed),t.pinch=void 0===e.pinch?t.wheel||t.controls:!!e.pinch,t},Blockly.Options.parseGridOptions_=function(e){e=e.grid||{};var t={};return t.spacing=Number(e.spacing)||0,t.colour=e.colour||"#888",t.length=void 0===e.length?1:Number(e.length),t.snap=0<t.spacing&&!!e.snap,t.image=Blockly.Options.parseGridImageOptions_(e),t},Blockly.Options.parseGridImageOptions_=function(e){return(e=e.image)&&e.path?(e.width=e.width||100,e.height=e.height||100,e):null},Blockly.Options.parseThemeOptions_=function(e){return"string"==typeof(e=e.theme||Blockly.Themes.Classic)?Blockly.registry.getObject(Blockly.registry.Type.THEME,e):e instanceof Blockly.Theme?e:Blockly.Theme.defineTheme(e.name||"builtin"+Blockly.utils.IdGenerator.getNextUniqueId(),e)},Blockly.Options.parseToolboxTree=function(e){return Blockly.utils.deprecation.warn("Blockly.Options.parseToolboxTree","September 2020","September 2021","Blockly.utils.toolbox.parseToolboxTree"),Blockly.utils.toolbox.parseToolboxTree(e)},Blockly.ScrollbarPair=function(e,t,n,o,r){this.workspace_=e,n=void 0===n||n;var i=(t=void 0===t||t)&&n;t&&(this.hScroll=new Blockly.Scrollbar(e,!0,i,o,r)),n&&(this.vScroll=new Blockly.Scrollbar(e,!1,i,o,r)),i&&(this.corner_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{height:Blockly.Scrollbar.scrollbarThickness,width:Blockly.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),Blockly.utils.dom.insertAfter(this.corner_,e.getBubbleCanvas())),this.oldHostMetrics_=null},Blockly.ScrollbarPair.prototype.dispose=function(){Blockly.utils.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},Blockly.ScrollbarPair.prototype.resize=function(){var e=this.workspace_.getMetrics();if(e){var t=!1,n=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth==e.scrollWidth&&this.oldHostMetrics_.viewLeft==e.viewLeft&&this.oldHostMetrics_.scrollLeft==e.scrollLeft||(t=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight==e.scrollHeight&&this.oldHostMetrics_.viewTop==e.viewTop&&this.oldHostMetrics_.scrollTop==e.scrollTop||(n=!0)):n=t=!0,t||n){try{Blockly.Events.disable(),this.hScroll&&t&&this.hScroll.resize(e),this.vScroll&&n&&this.vScroll.resize(e)}finally{Blockly.Events.enable()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=e}},Blockly.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},Blockly.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},Blockly.ScrollbarPair.prototype.setOrigin=function(e,t){this.hScroll&&this.hScroll.setOrigin(e,t),this.vScroll&&this.vScroll.setOrigin(e,t)},Blockly.ScrollbarPair.prototype.set=function(e,t,n){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(t,!1),(n||void 0===n)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(e))},Blockly.ScrollbarPair.prototype.setX=function(e){this.hScroll&&this.hScroll.set(e,!0)},Blockly.ScrollbarPair.prototype.setY=function(e){this.vScroll&&this.vScroll.set(e,!0)},Blockly.ScrollbarPair.prototype.setContainerVisible=function(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)},Blockly.ScrollbarPair.prototype.isVisible=function(){var e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e},Blockly.ScrollbarPair.prototype.resizeContent=function(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)},Blockly.ScrollbarPair.prototype.resizeView=function(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)},Blockly.Scrollbar=function(e,t,n,o,r){this.workspace_=e,this.pair_=n||!1,this.horizontal_=t,this.margin_=void 0!==r?r:Blockly.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.svgGroup_=this.ratio=this.oldHostMetrics_=null,this.createDom_(o),this.position=new Blockly.utils.Coordinate(0,0),e=Blockly.Scrollbar.scrollbarThickness,t?(this.svgBackground_.setAttribute("height",e),this.outerSvg_.setAttribute("height",e),this.svgHandle_.setAttribute("height",e-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",e),this.outerSvg_.setAttribute("width",e),this.svgHandle_.setAttribute("width",e-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Blockly.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=Blockly.browserEvents.conditionalBind(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},Blockly.Scrollbar.prototype.origin_=new Blockly.utils.Coordinate(0,0),Blockly.Scrollbar.prototype.originHasChanged_=!0,Blockly.Scrollbar.prototype.startDragMouse_=0,Blockly.Scrollbar.prototype.scrollbarLength_=0,Blockly.Scrollbar.prototype.handleLength_=0,Blockly.Scrollbar.prototype.handlePosition_=0,Blockly.Scrollbar.prototype.isVisible_=!0,Blockly.Scrollbar.prototype.containerVisible_=!0,Blockly.Scrollbar.scrollbarThickness=15,Blockly.Touch.TOUCH_ENABLED&&(Blockly.Scrollbar.scrollbarThickness=25),Blockly.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5,Blockly.Scrollbar.metricsAreEquivalent_=function(e,t){return e.viewWidth==t.viewWidth&&e.viewHeight==t.viewHeight&&e.viewLeft==t.viewLeft&&e.viewTop==t.viewTop&&e.absoluteTop==t.absoluteTop&&e.absoluteLeft==t.absoluteLeft&&e.scrollWidth==t.scrollWidth&&e.scrollHeight==t.scrollHeight&&e.scrollLeft==t.scrollLeft&&e.scrollTop==t.scrollTop},Blockly.Scrollbar.prototype.dispose=function(){this.cleanUp_(),Blockly.browserEvents.unbind(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,Blockly.browserEvents.unbind(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,Blockly.utils.dom.removeNode(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},Blockly.Scrollbar.prototype.constrainHandleLength_=function(e){return 0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength_)},Blockly.Scrollbar.prototype.setHandleLength_=function(e){this.handleLength_=e,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},Blockly.Scrollbar.prototype.constrainHandlePosition_=function(e){return 0>=e||isNaN(e)?0:Math.min(e,this.scrollbarLength_-this.handleLength_)},Blockly.Scrollbar.prototype.setHandlePosition=function(e){this.handlePosition_=e,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},Blockly.Scrollbar.prototype.setScrollbarLength_=function(e){this.scrollbarLength_=e,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},Blockly.Scrollbar.prototype.setPosition=function(e,t){this.position.x=e,this.position.y=t,Blockly.utils.dom.setCssTransform(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},Blockly.Scrollbar.prototype.resize=function(e){(e||(e=this.workspace_.getMetrics()))&&(this.oldHostMetrics_&&Blockly.Scrollbar.metricsAreEquivalent_(e,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(e):this.resizeVertical_(e),this.oldHostMetrics_=e,this.updateMetrics_()))},Blockly.Scrollbar.prototype.requiresViewResize_=function(e){return!this.oldHostMetrics_||(this.oldHostMetrics_.viewWidth!==e.viewWidth||this.oldHostMetrics_.viewHeight!==e.viewHeight||this.oldHostMetrics_.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics_.absoluteTop!==e.absoluteTop)},Blockly.Scrollbar.prototype.resizeHorizontal_=function(e){this.requiresViewResize_(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)},Blockly.Scrollbar.prototype.resizeViewHorizontal=function(e){var t=e.viewWidth-2*this.margin_;this.pair_&&(t-=Blockly.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,t)),t=e.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(t+=Blockly.Scrollbar.scrollbarThickness),this.setPosition(t,e.absoluteTop+e.viewHeight-Blockly.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(e)},Blockly.Scrollbar.prototype.resizeContentHorizontal=function(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var t=this.scrollbarLength_*e.viewWidth/e.scrollWidth;t=this.constrainHandleLength_(t),this.setHandleLength_(t),t=e.scrollWidth-e.viewWidth;var n=this.scrollbarLength_-this.handleLength_;e=(e.viewLeft-e.scrollLeft)/t*n,e=this.constrainHandlePosition_(e),this.setHandlePosition(e),this.ratio=n/t}},Blockly.Scrollbar.prototype.resizeVertical_=function(e){this.requiresViewResize_(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)},Blockly.Scrollbar.prototype.resizeViewVertical=function(e){var t=e.viewHeight-2*this.margin_;this.pair_&&(t-=Blockly.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,t)),this.setPosition(this.workspace_.RTL?e.absoluteLeft+this.margin_:e.absoluteLeft+e.viewWidth-Blockly.Scrollbar.scrollbarThickness-this.margin_,e.absoluteTop+this.margin_),this.resizeContentVertical(e)},Blockly.Scrollbar.prototype.resizeContentVertical=function(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var t=this.scrollbarLength_*e.viewHeight/e.scrollHeight;t=this.constrainHandleLength_(t),this.setHandleLength_(t),t=e.scrollHeight-e.viewHeight;var n=this.scrollbarLength_-this.handleLength_;e=(e.viewTop-e.scrollTop)/t*n,e=this.constrainHandlePosition_(e),this.setHandlePosition(e),this.ratio=n/t}},Blockly.Scrollbar.prototype.createDom_=function(e){var t="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");e&&(t+=" "+e),this.outerSvg_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.SVG,{class:t},null),this.svgGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{},this.outerSvg_),this.svgBackground_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),e=Math.floor((Blockly.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),Blockly.utils.dom.insertAfter(this.outerSvg_,this.workspace_.getParentSvg())},Blockly.Scrollbar.prototype.isVisible=function(){return this.isVisible_},Blockly.Scrollbar.prototype.setContainerVisible=function(e){var t=e!=this.containerVisible_;this.containerVisible_=e,t&&this.updateDisplay_()},Blockly.Scrollbar.prototype.setVisible=function(e){var t=e!=this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=e,t&&this.updateDisplay_()},Blockly.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},Blockly.Scrollbar.prototype.onMouseDownBar_=function(e){if(this.workspace_.markFocused(),Blockly.Touch.clearTouchIdentifier(),this.cleanUp_(),Blockly.utils.isRightButton(e))e.stopPropagation();else{var t=Blockly.utils.mouseToSvg(e,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());t=this.horizontal_?t.x:t.y;var n=Blockly.utils.getInjectionDivXY_(this.svgHandle_);n=this.horizontal_?n.x:n.y;var o=this.handlePosition_,r=.95*this.handleLength_;t<=n?o-=r:t>=n+this.handleLength_&&(o+=r),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),this.setHandlePosition(this.constrainHandlePosition_(o)),this.updateMetrics_(),e.stopPropagation(),e.preventDefault()}},Blockly.Scrollbar.prototype.onMouseDownHandle_=function(e){this.workspace_.markFocused(),this.cleanUp_(),Blockly.utils.isRightButton(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?e.clientX:e.clientY,Blockly.Scrollbar.onMouseUpWrapper_=Blockly.browserEvents.conditionalBind(document,"mouseup",this,this.onMouseUpHandle_),Blockly.Scrollbar.onMouseMoveWrapper_=Blockly.browserEvents.conditionalBind(document,"mousemove",this,this.onMouseMoveHandle_),e.stopPropagation(),e.preventDefault())},Blockly.Scrollbar.prototype.onMouseMoveHandle_=function(e){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?e.clientX:e.clientY)-this.startDragMouse_))),this.updateMetrics_()},Blockly.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),Blockly.Touch.clearTouchIdentifier(),this.cleanUp_()},Blockly.Scrollbar.prototype.cleanUp_=function(){Blockly.hideChaff(!0),Blockly.Scrollbar.onMouseUpWrapper_&&(Blockly.browserEvents.unbind(Blockly.Scrollbar.onMouseUpWrapper_),Blockly.Scrollbar.onMouseUpWrapper_=null),Blockly.Scrollbar.onMouseMoveWrapper_&&(Blockly.browserEvents.unbind(Blockly.Scrollbar.onMouseMoveWrapper_),Blockly.Scrollbar.onMouseMoveWrapper_=null)},Blockly.Scrollbar.prototype.getRatio_=function(){var e=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(e)&&(e=0),e},Blockly.Scrollbar.prototype.updateMetrics_=function(){var e=this.getRatio_(),t={};this.horizontal_?t.x=e:t.y=e,this.workspace_.setMetrics(t)},Blockly.Scrollbar.prototype.set=function(e,t){e=this.constrainHandlePosition_(e*this.ratio),this.handlePosition_!==e&&(this.setHandlePosition(e),(t||void 0===t)&&this.updateMetrics_())},Blockly.Scrollbar.prototype.setOrigin=function(e,t){this.origin_=new Blockly.utils.Coordinate(e,t)},Blockly.Tooltip={},Blockly.Tooltip.visible=!1,Blockly.Tooltip.blocked_=!1,Blockly.Tooltip.LIMIT=50,Blockly.Tooltip.mouseOutPid_=0,Blockly.Tooltip.showPid_=0,Blockly.Tooltip.lastX_=0,Blockly.Tooltip.lastY_=0,Blockly.Tooltip.element_=null,Blockly.Tooltip.poisonedElement_=null,Blockly.Tooltip.OFFSET_X=0,Blockly.Tooltip.OFFSET_Y=10,Blockly.Tooltip.RADIUS_OK=10,Blockly.Tooltip.HOVER_MS=750,Blockly.Tooltip.MARGINS=5,Blockly.Tooltip.DIV=null,Blockly.Tooltip.getTooltipOfObject=function(e){if(e=Blockly.Tooltip.getTargetObject_(e)){for(e=e.tooltip;"function"==typeof e;)e=e();if("string"!=typeof e)throw Error("Tooltip function must return a string.");return e}return""},Blockly.Tooltip.getTargetObject_=function(e){for(;e&&e.tooltip;){if("string"==typeof e.tooltip||"function"==typeof e.tooltip)return e;e=e.tooltip}return null},Blockly.Tooltip.createDom=function(){Blockly.Tooltip.DIV||(Blockly.Tooltip.DIV=document.createElement("div"),Blockly.Tooltip.DIV.className="blocklyTooltipDiv",(Blockly.parentContainer||document.body).appendChild(Blockly.Tooltip.DIV))},Blockly.Tooltip.bindMouseEvents=function(e){e.mouseOverWrapper_=Blockly.browserEvents.bind(e,"mouseover",null,Blockly.Tooltip.onMouseOver_),e.mouseOutWrapper_=Blockly.browserEvents.bind(e,"mouseout",null,Blockly.Tooltip.onMouseOut_),e.addEventListener("mousemove",Blockly.Tooltip.onMouseMove_,!1)},Blockly.Tooltip.unbindMouseEvents=function(e){e&&(Blockly.browserEvents.unbind(e.mouseOverWrapper_),Blockly.browserEvents.unbind(e.mouseOutWrapper_),e.removeEventListener("mousemove",Blockly.Tooltip.onMouseMove_))},Blockly.Tooltip.onMouseOver_=function(e){Blockly.Tooltip.blocked_||(e=Blockly.Tooltip.getTargetObject_(e.currentTarget),Blockly.Tooltip.element_!=e&&(Blockly.Tooltip.hide(),Blockly.Tooltip.poisonedElement_=null,Blockly.Tooltip.element_=e),clearTimeout(Blockly.Tooltip.mouseOutPid_))},Blockly.Tooltip.onMouseOut_=function(e){Blockly.Tooltip.blocked_||(Blockly.Tooltip.mouseOutPid_=setTimeout((function(){Blockly.Tooltip.element_=null,Blockly.Tooltip.poisonedElement_=null,Blockly.Tooltip.hide()}),1),clearTimeout(Blockly.Tooltip.showPid_))},Blockly.Tooltip.onMouseMove_=function(e){if(Blockly.Tooltip.element_&&Blockly.Tooltip.element_.tooltip&&!Blockly.Tooltip.blocked_)if(Blockly.Tooltip.visible){var t=Blockly.Tooltip.lastX_-e.pageX;e=Blockly.Tooltip.lastY_-e.pageY,Math.sqrt(t*t+e*e)>Blockly.Tooltip.RADIUS_OK&&Blockly.Tooltip.hide()}else Blockly.Tooltip.poisonedElement_!=Blockly.Tooltip.element_&&(clearTimeout(Blockly.Tooltip.showPid_),Blockly.Tooltip.lastX_=e.pageX,Blockly.Tooltip.lastY_=e.pageY,Blockly.Tooltip.showPid_=setTimeout(Blockly.Tooltip.show_,Blockly.Tooltip.HOVER_MS))},Blockly.Tooltip.dispose=function(){Blockly.Tooltip.element_=null,Blockly.Tooltip.poisonedElement_=null,Blockly.Tooltip.hide()},Blockly.Tooltip.hide=function(){Blockly.Tooltip.visible&&(Blockly.Tooltip.visible=!1,Blockly.Tooltip.DIV&&(Blockly.Tooltip.DIV.style.display="none")),Blockly.Tooltip.showPid_&&clearTimeout(Blockly.Tooltip.showPid_)},Blockly.Tooltip.block=function(){Blockly.Tooltip.hide(),Blockly.Tooltip.blocked_=!0},Blockly.Tooltip.unblock=function(){Blockly.Tooltip.blocked_=!1},Blockly.Tooltip.show_=function(){if(!Blockly.Tooltip.blocked_&&(Blockly.Tooltip.poisonedElement_=Blockly.Tooltip.element_,Blockly.Tooltip.DIV)){Blockly.Tooltip.DIV.textContent="";var e=Blockly.Tooltip.getTooltipOfObject(Blockly.Tooltip.element_);e=(e=Blockly.utils.string.wrap(e,Blockly.Tooltip.LIMIT)).split("\n");for(var t=0;t<e.length;t++){var n=document.createElement("div");n.appendChild(document.createTextNode(e[t])),Blockly.Tooltip.DIV.appendChild(n)}e=Blockly.Tooltip.element_.RTL,t=document.documentElement.clientWidth,n=document.documentElement.clientHeight,Blockly.Tooltip.DIV.style.direction=e?"rtl":"ltr",Blockly.Tooltip.DIV.style.display="block",Blockly.Tooltip.visible=!0;var o=Blockly.Tooltip.lastX_;o=e?o-(Blockly.Tooltip.OFFSET_X+Blockly.Tooltip.DIV.offsetWidth):o+Blockly.Tooltip.OFFSET_X;var r=Blockly.Tooltip.lastY_+Blockly.Tooltip.OFFSET_Y;r+Blockly.Tooltip.DIV.offsetHeight>n+window.scrollY&&(r-=Blockly.Tooltip.DIV.offsetHeight+2*Blockly.Tooltip.OFFSET_Y),e?o=Math.max(Blockly.Tooltip.MARGINS-window.scrollX,o):o+Blockly.Tooltip.DIV.offsetWidth>t+window.scrollX-2*Blockly.Tooltip.MARGINS&&(o=t-Blockly.Tooltip.DIV.offsetWidth-2*Blockly.Tooltip.MARGINS),Blockly.Tooltip.DIV.style.top=r+"px",Blockly.Tooltip.DIV.style.left=o+"px"}},Blockly.utils.aria={},Blockly.utils.aria.ARIA_PREFIX_="aria-",Blockly.utils.aria.ROLE_ATTRIBUTE_="role",Blockly.utils.aria.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem",SEPARATOR:"separator"},Blockly.utils.aria.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},Blockly.utils.aria.setRole=function(e,t){e.setAttribute(Blockly.utils.aria.ROLE_ATTRIBUTE_,t)},Blockly.utils.aria.setState=function(e,t,n){Array.isArray(n)&&(n=n.join(" ")),e.setAttribute(Blockly.utils.aria.ARIA_PREFIX_+t,n)},Blockly.IASTNodeLocation=function(){},Blockly.IASTNodeLocationSvg=function(){},Blockly.IASTNodeLocationWithBlock=function(){},Blockly.IKeyboardAccessible=function(){},Blockly.utils.deprecation={},Blockly.utils.deprecation.warn=function(e,t,n,o){e=e+" was deprecated on "+t+" and will be deleted on "+n+".",o&&(e+="\nUse "+o+" instead."),console.warn(e)},Blockly.Connection=function(e,t){this.sourceBlock_=e,this.type=t},Blockly.Connection.CAN_CONNECT=0,Blockly.Connection.REASON_SELF_CONNECTION=1,Blockly.Connection.REASON_WRONG_TYPE=2,Blockly.Connection.REASON_TARGET_NULL=3,Blockly.Connection.REASON_CHECKS_FAILED=4,Blockly.Connection.REASON_DIFFERENT_WORKSPACES=5,Blockly.Connection.REASON_SHADOW_PARENT=6,Blockly.Connection.REASON_DRAG_CHECKS_FAILED=7,Blockly.Connection.prototype.targetConnection=null,Blockly.Connection.prototype.disposed=!1,Blockly.Connection.prototype.check_=null,Blockly.Connection.prototype.shadowDom_=null,Blockly.Connection.prototype.x=0,Blockly.Connection.prototype.y=0,Blockly.Connection.prototype.connect_=function(e){var t,n=Blockly.connectionTypes.INPUT_VALUE,o=this.getSourceBlock(),r=e.getSourceBlock(),i=!1;if(this==o.getFirstStatementConnection()&&(i=!0),e.isConnected()){if(i)var s=e.targetConnection;e.disconnect()}if(this.isConnected()){var a=this.getShadowDom(!0);this.shadowDom_=null;var l=this.targetBlock();if(l.isShadow())l.dispose(!1);else{this.disconnect();var c=l}this.shadowDom_=a}i&&s&&s.connect(o.previousConnection),Blockly.Events.isEnabled()&&(t=new(Blockly.Events.get(Blockly.Events.BLOCK_MOVE))(r)),Blockly.Connection.connectReciprocally_(this,e),r.setParent(o),t&&(t.recordNew(),Blockly.Events.fire(t)),c&&(e=this.type===n?c.outputConnection:c.previousConnection,(r=Blockly.Connection.getConnectionForOrphanedConnection(r,e))?e.connect(r):e.onFailedConnect(this))},Blockly.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowDom(null);var e=this.targetBlock();e&&e.unplug()}this.disposed=!0},Blockly.Connection.prototype.isConnectedToNonInsertionMarker=function(){return this.targetConnection&&!this.targetBlock().isInsertionMarker()},Blockly.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},Blockly.Connection.prototype.isSuperior=function(){return this.type==Blockly.connectionTypes.INPUT_VALUE||this.type==Blockly.connectionTypes.NEXT_STATEMENT},Blockly.Connection.prototype.isConnected=function(){return!!this.targetConnection},Blockly.Connection.prototype.canConnectWithReason=function(e){return Blockly.utils.deprecation.warn("Connection.prototype.canConnectWithReason","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnectWithReason(this,e,!1)},Blockly.Connection.prototype.checkConnection=function(e){Blockly.utils.deprecation.warn("Connection.prototype.checkConnection","July 2020","July 2021","the workspace's connection checker");var t=this.getConnectionChecker(),n=t.canConnectWithReason(this,e,!1);if(n!=Blockly.Connection.CAN_CONNECT)throw Error(t.getErrorMessage(n,this,e))},Blockly.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},Blockly.Connection.prototype.isConnectionAllowed=function(e){return Blockly.utils.deprecation.warn("Connection.prototype.isConnectionAllowed","July 2020","July 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,e,!0)},Blockly.Connection.prototype.onFailedConnect=function(e){},Blockly.Connection.prototype.connect=function(e){if(this.targetConnection!=e&&this.getConnectionChecker().canConnect(this,e,!1)){var t=Blockly.Events.getGroup();t||Blockly.Events.setGroup(!0),this.isSuperior()?this.connect_(e):e.connect_(this),t||Blockly.Events.setGroup(!1)}},Blockly.Connection.connectReciprocally_=function(e,t){if(!e||!t)throw Error("Cannot connect null connections.");e.targetConnection=t,t.targetConnection=e},Blockly.Connection.getSingleConnection_=function(e,t){for(var n,o=null,r=(t=t.outputConnection).getConnectionChecker(),i=0;n=e.inputList[i];i++)if((n=n.connection)&&r.canConnect(t,n,!1)){if(o)return null;o=n}return o},Blockly.Connection.getConnectionForOrphanedOutput_=function(e,t){for(var n;n=Blockly.Connection.getSingleConnection_(e,t);)if(!(e=n.targetBlock())||e.isShadow())return n;return null},Blockly.Connection.getConnectionForOrphanedConnection=function(e,t){if(t.type===Blockly.connectionTypes.OUTPUT_VALUE)return Blockly.Connection.getConnectionForOrphanedOutput_(e,t.getSourceBlock());e=e.lastConnectionInStack(!0);var n=t.getConnectionChecker();return e&&n.canConnect(t,e,!1)?e:null},Blockly.Connection.prototype.disconnect=function(){var e=this.targetConnection;if(!e)throw Error("Source connection not connected.");if(e.targetConnection!=this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var t=this.sourceBlock_,n=e.getSourceBlock();e=this}else t=e.getSourceBlock(),n=this.sourceBlock_;var o=Blockly.Events.getGroup();o||Blockly.Events.setGroup(!0),this.disconnectInternal_(t,n),n.isShadow()||e.respawnShadow_(),o||Blockly.Events.setGroup(!1)},Blockly.Connection.prototype.disconnectInternal_=function(e,t){var n;Blockly.Events.isEnabled()&&(n=new(Blockly.Events.get(Blockly.Events.BLOCK_MOVE))(t)),this.targetConnection=this.targetConnection.targetConnection=null,t.setParent(null),n&&(n.recordNew(),Blockly.Events.fire(n))},Blockly.Connection.prototype.respawnShadow_=function(){var e=this.getSourceBlock(),t=this.getShadowDom();if(e.workspace&&t)if((e=Blockly.Xml.domToBlock(t,e.workspace)).outputConnection)this.connect(e.outputConnection);else{if(!e.previousConnection)throw Error("Child block does not have output or previous statement.");this.connect(e.previousConnection)}},Blockly.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},Blockly.Connection.prototype.checkType=function(e){return Blockly.utils.deprecation.warn("Connection.prototype.checkType","October 2019","January 2021","the workspace's connection checker"),this.getConnectionChecker().canConnect(this,e,!1)},Blockly.Connection.prototype.checkType_=function(e){return Blockly.utils.deprecation.warn("Connection.prototype.checkType_","October 2019","January 2021","the workspace's connection checker"),this.checkType(e)},Blockly.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},Blockly.Connection.prototype.setCheck=function(e){return e?(Array.isArray(e)||(e=[e]),this.check_=e,this.onCheckChanged_()):this.check_=null,this},Blockly.Connection.prototype.getCheck=function(){return this.check_},Blockly.Connection.prototype.getOutputShape=function(){return this.check_?-1!==this.check_.indexOf("Boolean")?Blockly.OUTPUT_SHAPE_HEXAGONAL:(-1!==this.check_.indexOf("Number")||this.check_.indexOf("String"),Blockly.OUTPUT_SHAPE_ROUND):Blockly.OUTPUT_SHAPE_ROUND},Blockly.Connection.prototype.setShadowDom=function(e,t){this.shadowDom_=e,(e=this.targetBlock())?e.isShadow()&&!t&&(e.dispose(!1),this.respawnShadow_()):this.respawnShadow_()},Blockly.Connection.prototype.getShadowDom=function(e){return e&&this.targetBlock().isShadow()?Blockly.Xml.blockToDom(this.targetBlock()):this.shadowDom_},Blockly.Connection.prototype.neighbours=function(e){return[]},Blockly.Connection.prototype.getParentInput=function(){for(var e=null,t=this.sourceBlock_.inputList,n=0;n<t.length;n++)if(t[n].connection===this){e=t[n];break}return e},Blockly.Connection.prototype.toString=function(){var e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection==this)var t="Output Connection of ";else if(e.previousConnection==this)t="Previous Connection of ";else if(e.nextConnection==this)t="Next Connection of ";else{t=null;for(var n,o=0;n=e.inputList[o];o++)if(n.connection==this){t=n;break}if(!t)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";t='Input "'+t.name+'" connection on '}return t+e.toDevString()},Blockly.IConnectionChecker=function(){},Blockly.pxtBlocklyUtils={},Blockly.pxtBlocklyUtils._duplicateOnDragWhitelist=null,Blockly.pxtBlocklyUtils.measureText=function(e,t,n,o){var r=document.createElement("canvas").getContext("2d");return r.font=n+" "+e+" "+t,r.measureText(o).width},Blockly.pxtBlocklyUtils.isShadowArgumentReporter=function(e){return e.isShadow()&&("variables_get_reporter"===e.type||"argument_reporter_boolean"===e.type||"argument_reporter_number"===e.type||"argument_reporter_string"===e.type||"argument_reporter_array"===e.type||"argument_reporter_custom"===e.type||Blockly.pxtBlocklyUtils._duplicateOnDragWhitelist&&-1!==Blockly.pxtBlocklyUtils._duplicateOnDragWhitelist.indexOf(e.type))},Blockly.pxtBlocklyUtils.isFunctionArgumentReporter=function(e){return"argument_reporter_boolean"==e.type||"argument_reporter_number"==e.type||"argument_reporter_string"==e.type||"argument_reporter_array"==e.type||"argument_reporter_custom"==e.type},Blockly.pxtBlocklyUtils.whitelistDraggableBlockTypes=function(e){Blockly.pxtBlocklyUtils._duplicateOnDragWhitelist=e.slice()},Blockly.pxtBlocklyUtils.hasMatchingArgumentReporter=function(e,t){for(var n=t.getFieldValue("VALUE"),o=t.getTypeName(),r=0;r<e.inputList.length;++r){var i=e.inputList[r];if(i.type==Blockly.INPUT_VALUE){var s=i.connection.targetBlock();if(s&&s.type==t.type&&(i=s.getFieldValue("VALUE"),s=s.getTypeName(),i==n&&o==s))return!0}}return!1},Blockly.ConnectionChecker=function(){},Blockly.ConnectionChecker.prototype.canConnect=function(e,t,n,o){return this.canConnectWithReason(e,t,n,o)==Blockly.Connection.CAN_CONNECT},Blockly.ConnectionChecker.prototype.canConnectWithReason=function(e,t,n,o){var r=this.doSafetyChecks(e,t);return r!=Blockly.Connection.CAN_CONNECT?r:this.doTypeChecks(e,t)?n&&!this.doDragChecks(e,t,o||0)?Blockly.Connection.REASON_DRAG_CHECKS_FAILED:Blockly.Connection.CAN_CONNECT:Blockly.Connection.REASON_CHECKS_FAILED},Blockly.ConnectionChecker.prototype.getErrorMessage=function(e,t,n){switch(e){case Blockly.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Blockly.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Blockly.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Blockly.Connection.REASON_TARGET_NULL:return"Target connection is null.";case Blockly.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+t+" expected "+t.getCheck()+", found "+n.getCheck();case Blockly.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Blockly.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";default:return"Unknown connection failure: this should never happen!"}},Blockly.ConnectionChecker.prototype.doSafetyChecks=function(e,t){if(!e||!t)return Blockly.Connection.REASON_TARGET_NULL;if(e.isSuperior())var n=e.getSourceBlock(),o=t.getSourceBlock();else o=e.getSourceBlock(),n=t.getSourceBlock();return n==o?Blockly.Connection.REASON_SELF_CONNECTION:t.type!=Blockly.OPPOSITE_TYPE[e.type]?Blockly.Connection.REASON_WRONG_TYPE:n.workspace!==o.workspace?Blockly.Connection.REASON_DIFFERENT_WORKSPACES:Blockly.Connection.CAN_CONNECT},Blockly.ConnectionChecker.prototype.doTypeChecks=function(e,t){if(e=e.getCheck(),t=t.getCheck(),!e||!t)return!0;for(var n=0;n<e.length;n++)if(-1!=t.indexOf(e[n]))return!0;return!1},Blockly.ConnectionChecker.prototype.doDragChecks=function(e,t,n){if(e.distanceFrom(t)>n||t.getSourceBlock().isInsertionMarker())return!1;switch(t.type){case Blockly.connectionTypes.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,t);case Blockly.connectionTypes.OUTPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case Blockly.connectionTypes.INPUT_VALUE:if(t.isConnected()&&!t.targetBlock().isMovable()&&!t.targetBlock().isShadow()||t&&t.targetBlock()&&((n=t.targetBlock()).isShadow()&&Blockly.pxtBlocklyUtils.isFunctionArgumentReporter(n))||Blockly.pxtBlocklyUtils.isFunctionArgumentReporter(e.getSourceBlock())&&((n=t.getSourceBlock().getRootBlock()).isEnabled()&&!Blockly.pxtBlocklyUtils.hasMatchingArgumentReporter(n,e.getSourceBlock())))return!1;break;case Blockly.connectionTypes.NEXT_STATEMENT:if(t.isConnected()&&!e.getSourceBlock().nextConnection&&!t.targetBlock().isShadow()&&t.targetBlock().nextConnection)return!1;break;default:return!1}return-1==Blockly.draggingConnections.indexOf(t)},Blockly.ConnectionChecker.prototype.canConnectToPrevious_=function(e,t){if(e.targetConnection||-1!=Blockly.draggingConnections.indexOf(t))return!1;var n=e.getSourceBlock(),o=n.getFirstStatementConnection(),r=e==o;return e=e==n.nextConnection,!(null!=o&&!r&&!e)&&(n=null!=n.previousConnection,!!(r&&n||!t.targetConnection)||!!(t=t.targetBlock()).isInsertionMarker()&&!t.getPreviousBlock())},Blockly.registry.register(Blockly.registry.Type.CONNECTION_CHECKER,Blockly.registry.DEFAULT,Blockly.ConnectionChecker),Blockly.VariableMap=function(e){this.variableMap_=Object.create(null),this.workspace=e},Blockly.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},Blockly.VariableMap.prototype.renameVariable=function(e,t){var n=this.getVariable(t,e.type),o=this.workspace.getAllBlocks(!1);Blockly.Events.setGroup(!0);try{n&&n.getId()!=e.getId()?this.renameVariableWithConflict_(e,t,n,o):this.renameVariableAndUses_(e,t,o)}finally{Blockly.Events.setGroup(!1)}},Blockly.VariableMap.prototype.renameVariableById=function(e,t){var n=this.getVariableById(e);if(!n)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(n,t)},Blockly.VariableMap.prototype.renameVariableAndUses_=function(e,t,n){for(Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.VAR_RENAME))(e,t)),e.name=t,t=0;t<n.length;t++)n[t].updateVarName(e)},Blockly.VariableMap.prototype.renameVariableWithConflict_=function(e,t,n,o){var r=e.type;for(t!=n.name&&this.renameVariableAndUses_(n,t,o),t=0;t<o.length;t++)o[t].renameVarById(e.getId(),n.getId());Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.VAR_DELETE))(e)),e=this.getVariablesOfType(r).indexOf(e),this.variableMap_[r].splice(e,1)},Blockly.VariableMap.prototype.createVariable=function(e,t,n){var o=this.getVariable(e,t);if(o)return o;if(n&&this.getVariableById(n))throw Error('Variable id, "'+n+'", is already in use.');return o=n||Blockly.utils.genUid(),t=t||"",o=new Blockly.VariableModel(this.workspace,e,t,o),(e=this.variableMap_[t]||[]).push(o),delete this.variableMap_[t],this.variableMap_[t]=e,o},Blockly.VariableMap.prototype.deleteVariable=function(e){for(var t,n=this.variableMap_[e.type],o=0;t=n[o];o++)if(t.getId()==e.getId()){n.splice(o,1),Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.VAR_DELETE))(e));break}},Blockly.VariableMap.prototype.deleteVariableById=function(e){var t=this.getVariableById(e);if(t){var n,o=t.name,r=this.getVariableUsesById(e);for(e=0;n=r[e];e++)if("procedures_defnoreturn"==n.type||"procedures_defreturn"==n.type)return e=n.getFieldValue("NAME"),o=Blockly.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",e),void Blockly.alert(o);var i=this;1<r.length?(o=Blockly.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(r.length)).replace("%2",o),Blockly.confirm(o,(function(e){e&&t&&i.deleteVariableInternal(t,r)}))):i.deleteVariableInternal(t,r)}else console.warn("Can't delete non-existent variable: "+e)},Blockly.VariableMap.prototype.deleteVariableInternal=function(e,t){var n=Blockly.Events.getGroup();n||Blockly.Events.setGroup(!0);try{for(var o=0;o<t.length;o++)t[o].dispose(!0);this.deleteVariable(e)}finally{n||Blockly.Events.setGroup(!1)}},Blockly.VariableMap.prototype.getVariable=function(e,t){if(t=this.variableMap_[t||""])for(var n,o=0;n=t[o];o++)if(Blockly.Names.equals(n.name,e))return n;return null},Blockly.VariableMap.prototype.getVariableById=function(e){for(var t=Object.keys(this.variableMap_),n=0;n<t.length;n++)for(var o,r=t[n],i=0;o=this.variableMap_[r][i];i++)if(o.getId()==e)return o;return null},Blockly.VariableMap.prototype.getVariablesOfType=function(e){return(e=this.variableMap_[e||""])?e.slice():[]},Blockly.VariableMap.prototype.getVariableTypes=function(e){var t={};Blockly.utils.object.mixin(t,this.variableMap_),e&&e.getPotentialVariableMap()&&Blockly.utils.object.mixin(t,e.getPotentialVariableMap().variableMap_),e=Object.keys(t),t=!1;for(var n=0;n<e.length;n++)""==e[n]&&(t=!0);return t||e.push(""),e},Blockly.VariableMap.prototype.getAllVariables=function(){var e,t=[];for(e in this.variableMap_)t=t.concat(this.variableMap_[e]);return t},Blockly.VariableMap.prototype.getAllVariableNames=function(){var e,t=[];for(e in this.variableMap_)for(var n,o=this.variableMap_[e],r=0;n=o[r];r++)t.push(n.name);return t},Blockly.VariableMap.prototype.getVariableUsesById=function(e){for(var t=[],n=this.workspace.getAllBlocks(!1),o=0;o<n.length;o++){var r=n[o].getVarModels();if(r)for(var i=0;i<r.length;i++)r[i].getId()==e&&t.push(n[o])}return t},Blockly.Workspace=function(e){this.id=Blockly.utils.genUid(),Blockly.Workspace.WorkspaceDB_[this.id]=this,this.options=e||new Blockly.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.loadingEventsDisabled=!1,this.connectionChecker=new(Blockly.registry.getClassFromOptions(Blockly.registry.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.tapListeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new Blockly.VariableMap(this),this.potentialVariableMap_=null},Blockly.Workspace.prototype.rendered=!1,Blockly.Workspace.prototype.isClearing=!1,Blockly.Workspace.prototype.MAX_UNDO=1024,Blockly.Workspace.prototype.connectionDBList=null,Blockly.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete Blockly.Workspace.WorkspaceDB_[this.id]},Blockly.Workspace.SCAN_ANGLE=3,Blockly.Workspace.prototype.sortObjects_=function(e,t){return e=e.getRelativeToSurfaceXY(),t=t.getRelativeToSurfaceXY(),e.y+Blockly.Workspace.prototype.sortObjects_.offset*e.x-(t.y+Blockly.Workspace.prototype.sortObjects_.offset*t.x)},Blockly.Workspace.prototype.addTopBlock=function(e){this.topBlocks_.push(e)},Blockly.Workspace.prototype.removeTopBlock=function(e){if(!Blockly.utils.arrayRemove(this.topBlocks_,e))throw Error("Block not present in workspace's list of top-most blocks.")},Blockly.Workspace.prototype.getTopBlocks=function(e){var t=[].concat(this.topBlocks_);return e&&1<t.length&&(this.sortObjects_.offset=Math.sin(Blockly.utils.math.toRadians(Blockly.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t},Blockly.Workspace.prototype.addTypedBlock=function(e){this.typedBlocksDB_[e.type]||(this.typedBlocksDB_[e.type]=[]),this.typedBlocksDB_[e.type].push(e)},Blockly.Workspace.prototype.removeTypedBlock=function(e){this.typedBlocksDB_[e.type].splice(this.typedBlocksDB_[e.type].indexOf(e),1),this.typedBlocksDB_[e.type].length||delete this.typedBlocksDB_[e.type]},Blockly.Workspace.prototype.getBlocksByType=function(e,t){return this.typedBlocksDB_[e]?(e=this.typedBlocksDB_[e].slice(0),t&&1<e.length&&(this.sortObjects_.offset=Math.sin(Blockly.utils.math.toRadians(Blockly.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e):[]},Blockly.Workspace.prototype.addTopComment=function(e){this.topComments_.push(e),this.commentDB_[e.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB_[e.id]=e},Blockly.Workspace.prototype.removeTopComment=function(e){if(!Blockly.utils.arrayRemove(this.topComments_,e))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[e.id]},Blockly.Workspace.prototype.getTopComments=function(e){var t=[].concat(this.topComments_);return e&&1<t.length&&(this.sortObjects_.offset=Math.sin(Blockly.utils.math.toRadians(Blockly.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t},Blockly.Workspace.prototype.getAllBlocks=function(e){if(e){e=this.getTopBlocks(!0);for(var t=[],n=0;n<e.length;n++)t.push.apply(t,e[n].getDescendants(!0))}else for(t=this.getTopBlocks(!1),n=0;n<t.length;n++)t.push.apply(t,t[n].getChildren(!1));return t.filter((function(e){return!e.isInsertionMarker()}))},Blockly.Workspace.prototype.clear=function(){this.isClearing=!0;try{var e=Blockly.Events.getGroup();for(e||Blockly.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose(!1);e||Blockly.Events.setGroup(!1),this.variableMap_.clear(),Blockly.DropDownDiv&&Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.WidgetDiv&&Blockly.WidgetDiv.hide(!0),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},Blockly.Workspace.prototype.renameVariableById=function(e,t){this.variableMap_.renameVariableById(e,t)},Blockly.Workspace.prototype.createVariable=function(e,t,n){return this.variableMap_.createVariable(e,t,n)},Blockly.Workspace.prototype.getVariableUsesById=function(e){return this.variableMap_.getVariableUsesById(e)},Blockly.Workspace.prototype.deleteVariableById=function(e){this.variableMap_.deleteVariableById(e)},Blockly.Workspace.prototype.getVariable=function(e,t){return this.variableMap_.getVariable(e,t)},Blockly.Workspace.prototype.getVariableById=function(e){return this.variableMap_.getVariableById(e)},Blockly.Workspace.prototype.getVariablesOfType=function(e){return this.variableMap_.getVariablesOfType(e)},Blockly.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},Blockly.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},Blockly.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},Blockly.Workspace.prototype.getWidth=function(){return 0},Blockly.Workspace.prototype.newBlock=function(e,t){return e=new Blockly.Block(this,e,t),this.loadingEventsDisabled||e.onLoadedIntoWorkspace(),e},Blockly.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},Blockly.Workspace.prototype.remainingCapacityOfType=function(e){return this.options.maxInstances?(void 0!==this.options.maxInstances[e]?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0},Blockly.Workspace.prototype.isCapacityAvailable=function(e){if(!this.hasBlockLimits())return!0;var t,n=0;for(t in e){if(e[t]>this.remainingCapacityOfType(t))return!1;n+=e[t]}return!(n>this.remainingCapacity())},Blockly.Workspace.prototype.hasBlockLimits=function(){return 1/0!=this.options.maxBlocks||!!this.options.maxInstances},Blockly.Workspace.prototype.getUndoStack=function(){return this.undoStack_},Blockly.Workspace.prototype.getRedoStack=function(){return this.redoStack_},Blockly.Workspace.prototype.undo=function(e){var t=e?this.redoStack_:this.undoStack_,n=e?this.undoStack_:this.redoStack_,o=t.pop();if(o){for(var r=[o];t.length&&o.group&&o.group==t[t.length-1].group;)r.push(t.pop());for(t=0;o=r[t];t++)n.push(o);r=Blockly.Events.filter(r,e),Blockly.Events.recordUndo=!1;try{for(t=0;o=r[t];t++)o.run(e)}finally{Blockly.Events.recordUndo=!0}}},Blockly.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,Blockly.Events.clearPendingUndo()},Blockly.Workspace.prototype.addChangeListener=function(e){return this.listeners_.push(e),e},Blockly.Workspace.prototype.removeChangeListener=function(e){Blockly.utils.arrayRemove(this.listeners_,e)},Blockly.Workspace.prototype.fireChangeListener=function(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var t,n=0;t=this.listeners_[n];n++)t(e)},Blockly.Workspace.prototype.getBlockById=function(e){return this.blockDB_[e]||null},Blockly.Workspace.prototype.getCommentById=function(e){return this.commentDB_[e]||null},Blockly.Workspace.prototype.addCommentById=function(e){this.commentDB_[e.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB_[e.id]=e},Blockly.Workspace.prototype.removeCommentById=function(e){delete this.commentDB_[e]},Blockly.Workspace.prototype.setBlockById=function(e,t){this.blockDB_[e]=t},Blockly.Workspace.prototype.removeBlockById=function(e){delete this.blockDB_[e]},Blockly.Workspace.prototype.getCommentById=function(e){return this.commentDB_[e]||null},Blockly.Workspace.prototype.allInputsFilled=function(e){for(var t,n=this.getTopBlocks(!1),o=0;t=n[o];o++)if(!t.allInputsFilled(e))return!1;return!0},Blockly.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},Blockly.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new Blockly.VariableMap(this)},Blockly.Workspace.prototype.getVariableMap=function(){return this.variableMap_},Blockly.Workspace.prototype.setVariableMap=function(e){this.variableMap_=e},Blockly.Workspace.WorkspaceDB_=Object.create(null),Blockly.Workspace.getById=function(e){return Blockly.Workspace.WorkspaceDB_[e]||null},Blockly.Workspace.prototype.setDebugModeOption=function(e){this.options.debugMode=e},Blockly.Workspace.getAll=function(){var e,t=[];for(e in Blockly.Workspace.WorkspaceDB_)t.push(Blockly.Workspace.WorkspaceDB_[e]);return t},Blockly.WorkspaceDragSurfaceSvg=function(e){this.container_=e,this.createDom()},Blockly.WorkspaceDragSurfaceSvg.prototype.SVG_=null,Blockly.WorkspaceDragSurfaceSvg.prototype.container_=null,Blockly.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.SVG,{xmlns:Blockly.utils.dom.SVG_NS,"xmlns:html":Blockly.utils.dom.HTML_NS,"xmlns:xlink":Blockly.utils.dom.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},Blockly.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(e,t){e=e.toFixed(0),t=t.toFixed(0),this.SVG_.style.display="block",Blockly.utils.dom.setCssTransform(this.SVG_,"translate3d("+e+"px, "+t+"px, 0px)")},Blockly.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return Blockly.utils.getRelativeXY(this.SVG_)},Blockly.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(e){if(!e)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var t=this.SVG_.childNodes[0],n=this.SVG_.childNodes[1];if(!(t&&n&&Blockly.utils.dom.hasClass(t,"blocklyBlockCanvas")&&Blockly.utils.dom.hasClass(n,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(null!=this.previousSibling_?Blockly.utils.dom.insertAfter(t,this.previousSibling_):e.insertBefore(t,e.firstChild),Blockly.utils.dom.insertAfter(n,t),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");Blockly.utils.dom.setCssTransform(this.SVG_,""),this.previousSibling_=null},Blockly.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(e,t,n,o,r,i){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=n,e.setAttribute("transform","translate(0, 0) scale("+i+")"),t.setAttribute("transform","translate(0, 0) scale("+i+")"),this.SVG_.setAttribute("width",o),this.SVG_.setAttribute("height",r),this.SVG_.appendChild(e),this.SVG_.appendChild(t),this.SVG_.style.display="block"},Blockly.blockRendering={},Blockly.blockRendering.useDebugger=!1,Blockly.blockRendering.register=function(e,t){Blockly.registry.register(Blockly.registry.Type.RENDERER,e,t)},Blockly.blockRendering.unregister=function(e){Blockly.registry.unregister(Blockly.registry.Type.RENDERER,e)},Blockly.blockRendering.startDebugger=function(){Blockly.blockRendering.useDebugger=!0},Blockly.blockRendering.stopDebugger=function(){Blockly.blockRendering.useDebugger=!1},Blockly.blockRendering.init=function(e,t,n){return(e=new(Blockly.registry.getClass(Blockly.registry.Type.RENDERER,e))(e)).init(t,n),e},Blockly.ASTNode=function(e,t,n){if(!t)throw Error("Cannot create a node without a location.");this.type_=e,this.isConnection_=Blockly.ASTNode.isConnectionType_(e),this.location_=t,this.wsCoordinate_=null,this.processParams_(n||null)},Blockly.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},Blockly.ASTNode.NAVIGATE_ALL_FIELDS=!1,Blockly.ASTNode.DEFAULT_OFFSET_Y=-20,Blockly.ASTNode.isConnectionType_=function(e){switch(e){case Blockly.ASTNode.types.PREVIOUS:case Blockly.ASTNode.types.NEXT:case Blockly.ASTNode.types.INPUT:case Blockly.ASTNode.types.OUTPUT:return!0}return!1},Blockly.ASTNode.createFieldNode=function(e){return e?new Blockly.ASTNode(Blockly.ASTNode.types.FIELD,e):null},Blockly.ASTNode.createConnectionNode=function(e){if(!e)return null;var t=e.type;return t==Blockly.connectionTypes.INPUT_VALUE||t==Blockly.connectionTypes.NEXT_STATEMENT&&e.getParentInput()?Blockly.ASTNode.createInputNode(e.getParentInput()):t==Blockly.connectionTypes.NEXT_STATEMENT?new Blockly.ASTNode(Blockly.ASTNode.types.NEXT,e):t==Blockly.connectionTypes.OUTPUT_VALUE?new Blockly.ASTNode(Blockly.ASTNode.types.OUTPUT,e):t==Blockly.connectionTypes.PREVIOUS_STATEMENT?new Blockly.ASTNode(Blockly.ASTNode.types.PREVIOUS,e):null},Blockly.ASTNode.createInputNode=function(e){return e&&e.connection?new Blockly.ASTNode(Blockly.ASTNode.types.INPUT,e.connection):null},Blockly.ASTNode.createBlockNode=function(e){return e?new Blockly.ASTNode(Blockly.ASTNode.types.BLOCK,e):null},Blockly.ASTNode.createStackNode=function(e){return e?new Blockly.ASTNode(Blockly.ASTNode.types.STACK,e):null},Blockly.ASTNode.createWorkspaceNode=function(e,t){return t&&e?new Blockly.ASTNode(Blockly.ASTNode.types.WORKSPACE,e,{wsCoordinate:t}):null},Blockly.ASTNode.createTopNode=function(e){var t=e.previousConnection||e.outputConnection;return t?Blockly.ASTNode.createConnectionNode(t):Blockly.ASTNode.createBlockNode(e)},Blockly.ASTNode.prototype.processParams_=function(e){e&&e.wsCoordinate&&(this.wsCoordinate_=e.wsCoordinate)},Blockly.ASTNode.prototype.getLocation=function(){return this.location_},Blockly.ASTNode.prototype.getType=function(){return this.type_},Blockly.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},Blockly.ASTNode.prototype.isConnection=function(){return this.isConnection_},Blockly.ASTNode.prototype.findNextForInput_=function(){var e,t=this.location_.getParentInput(),n=t.getSourceBlock();for(t=n.inputList.indexOf(t)+1;e=n.inputList[t];t++){for(var o,r=e.fieldRow,i=0;o=r[i];i++)if(o.isClickable()||Blockly.ASTNode.NAVIGATE_ALL_FIELDS)return Blockly.ASTNode.createFieldNode(o);if(e.connection)return Blockly.ASTNode.createInputNode(e)}return null},Blockly.ASTNode.prototype.findNextForField_=function(){var e=this.location_,t=e.getParentInput(),n=e.getSourceBlock(),o=n.inputList.indexOf(t);for(e=t.fieldRow.indexOf(e)+1;t=n.inputList[o];o++){for(var r=t.fieldRow;e<r.length;){if(r[e].isClickable()||Blockly.ASTNode.NAVIGATE_ALL_FIELDS)return Blockly.ASTNode.createFieldNode(r[e]);e++}if(e=0,t.connection)return Blockly.ASTNode.createInputNode(t)}return null},Blockly.ASTNode.prototype.findPrevForInput_=function(){for(var e,t=this.location_.getParentInput(),n=t.getSourceBlock(),o=n.inputList.indexOf(t);e=n.inputList[o];o--){if(e.connection&&e!==t)return Blockly.ASTNode.createInputNode(e);for(var r,i=(e=e.fieldRow).length-1;r=e[i];i--)if(r.isClickable()||Blockly.ASTNode.NAVIGATE_ALL_FIELDS)return Blockly.ASTNode.createFieldNode(r)}return null},Blockly.ASTNode.prototype.findPrevForField_=function(){var e,t=this.location_,n=t.getParentInput(),o=t.getSourceBlock(),r=o.inputList.indexOf(n);for(t=n.fieldRow.indexOf(t)-1;e=o.inputList[r];r--){if(e.connection&&e!==n)return Blockly.ASTNode.createInputNode(e);for(e=e.fieldRow;-1<t;){if(e[t].isClickable()||Blockly.ASTNode.NAVIGATE_ALL_FIELDS)return Blockly.ASTNode.createFieldNode(e[t]);t--}0<=r-1&&(t=o.inputList[r-1].fieldRow.length-1)}return null},Blockly.ASTNode.prototype.navigateBetweenStacks_=function(e){var t=this.getLocation();if(t instanceof Blockly.Block||(t=t.getSourceBlock()),!t||!t.workspace)return null;var n=t.getRootBlock();t=n.workspace.getTopBlocks(!0);for(var o,r=0;o=t[r];r++)if(n.id==o.id)return-1==(e=r+(e?1:-1))||e==t.length?null:Blockly.ASTNode.createStackNode(t[e]);throw Error("Couldn't find "+(e?"next":"previous")+" stack?!")},Blockly.ASTNode.prototype.findTopASTNodeForBlock_=function(e){var t=e.previousConnection||e.outputConnection;return t?Blockly.ASTNode.createConnectionNode(t):Blockly.ASTNode.createBlockNode(e)},Blockly.ASTNode.prototype.getOutAstNodeForBlock_=function(e){if(!e)return null;var t=(e=e.getTopStackBlock()).previousConnection||e.outputConnection;return t&&t.targetConnection&&t.targetConnection.getParentInput()?Blockly.ASTNode.createInputNode(t.targetConnection.getParentInput()):Blockly.ASTNode.createStackNode(e)},Blockly.ASTNode.prototype.findFirstFieldOrInput_=function(e){e=e.inputList;for(var t,n=0;t=e[n];n++){for(var o,r=t.fieldRow,i=0;o=r[i];i++)if(o.isClickable()||Blockly.ASTNode.NAVIGATE_ALL_FIELDS)return Blockly.ASTNode.createFieldNode(o);if(t.connection)return Blockly.ASTNode.createInputNode(t)}return null},Blockly.ASTNode.prototype.getSourceBlock=function(){return this.getType()===Blockly.ASTNode.types.BLOCK||this.getType()===Blockly.ASTNode.types.STACK?this.getLocation():this.getType()===Blockly.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},Blockly.ASTNode.prototype.next=function(){switch(this.type_){case Blockly.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case Blockly.ASTNode.types.OUTPUT:var e=this.location_;return Blockly.ASTNode.createBlockNode(e.getSourceBlock());case Blockly.ASTNode.types.FIELD:return this.findNextForField_();case Blockly.ASTNode.types.INPUT:return this.findNextForInput_();case Blockly.ASTNode.types.BLOCK:return Blockly.ASTNode.createConnectionNode(this.location_.nextConnection);case Blockly.ASTNode.types.PREVIOUS:return e=this.location_,Blockly.ASTNode.createBlockNode(e.getSourceBlock());case Blockly.ASTNode.types.NEXT:return e=this.location_,Blockly.ASTNode.createConnectionNode(e.targetConnection)}return null},Blockly.ASTNode.prototype.in=function(){switch(this.type_){case Blockly.ASTNode.types.WORKSPACE:var e=this.location_.getTopBlocks(!0);if(0<e.length)return Blockly.ASTNode.createStackNode(e[0]);break;case Blockly.ASTNode.types.STACK:return e=this.location_,this.findTopASTNodeForBlock_(e);case Blockly.ASTNode.types.BLOCK:return e=this.location_,this.findFirstFieldOrInput_(e);case Blockly.ASTNode.types.INPUT:return Blockly.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},Blockly.ASTNode.prototype.prev=function(){switch(this.type_){case Blockly.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case Blockly.ASTNode.types.FIELD:return this.findPrevForField_();case Blockly.ASTNode.types.INPUT:return this.findPrevForInput_();case Blockly.ASTNode.types.BLOCK:var e=this.location_;return Blockly.ASTNode.createConnectionNode(e.previousConnection||e.outputConnection);case Blockly.ASTNode.types.PREVIOUS:if((e=(e=this.location_).targetConnection)&&!e.getParentInput())return Blockly.ASTNode.createConnectionNode(e);break;case Blockly.ASTNode.types.NEXT:return e=this.location_,Blockly.ASTNode.createBlockNode(e.getSourceBlock())}return null},Blockly.ASTNode.prototype.out=function(){switch(this.type_){case Blockly.ASTNode.types.STACK:var e=this.location_,t=e.getRelativeToSurfaceXY();return t=new Blockly.utils.Coordinate(t.x,t.y+Blockly.ASTNode.DEFAULT_OFFSET_Y),Blockly.ASTNode.createWorkspaceNode(e.workspace,t);case Blockly.ASTNode.types.OUTPUT:return(t=(e=this.location_).targetConnection)?Blockly.ASTNode.createConnectionNode(t):Blockly.ASTNode.createStackNode(e.getSourceBlock());case Blockly.ASTNode.types.FIELD:return Blockly.ASTNode.createBlockNode(this.location_.getSourceBlock());case Blockly.ASTNode.types.INPUT:return e=this.location_,Blockly.ASTNode.createBlockNode(e.getSourceBlock());case Blockly.ASTNode.types.BLOCK:return e=this.location_,this.getOutAstNodeForBlock_(e);case Blockly.ASTNode.types.PREVIOUS:case Blockly.ASTNode.types.NEXT:return e=this.location_,this.getOutAstNodeForBlock_(e.getSourceBlock())}return null},Blockly.Blocks={},Blockly.Icon=function(e){this.block_=e,this.iconGroup_=null},Blockly.Icon.prototype.collapseHidden=!0,Blockly.Icon.prototype.SIZE=25,Blockly.Icon.prototype.bubble_=null,Blockly.Icon.prototype.iconXY_=null,Blockly.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&Blockly.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),Blockly.browserEvents.conditionalBind(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},Blockly.Icon.prototype.dispose=function(){Blockly.utils.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},Blockly.Icon.prototype.updateEditable=function(){},Blockly.Icon.prototype.isVisible=function(){return!!this.bubble_},Blockly.Icon.prototype.iconClick_=function(e){this.block_.workspace.isDragging()||this.block_.isInFlyout||Blockly.utils.isRightButton(e)||this.setVisible(!this.isVisible())},Blockly.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary,this.block_.style.colourSecondary)},Blockly.Icon.prototype.renderIcon=function(e){if(this.collapseHidden&&this.block_.isCollapsed()||this.block_.isInsertionMarker())return this.iconGroup_.setAttribute("display","none"),e;this.iconGroup_.setAttribute("display","block");var t=this.SIZE;return this.block_.RTL&&(e-=t),this.iconGroup_.setAttribute("transform","translate("+e+",9),scale(1.4)"),this.computeIconLocation(),this.block_.RTL?e-Blockly.BlockSvg.SEP_SPACE_X:e+(t+Blockly.BlockSvg.SEP_SPACE_X)},Blockly.Icon.prototype.moveIcon=function(e,t){var n=this.SIZE;return this.block_.RTL&&(e-=n),this.iconGroup_.setAttribute("transform","translate("+e+","+(9+t)+"),scale(1.4)"),this.block_.RTL?e-Blockly.BlockSvg.SEP_SPACE_X:e+(n+Blockly.BlockSvg.SEP_SPACE_X)},Blockly.Icon.prototype.setIconLocation=function(e){this.iconXY_=e,this.isVisible()&&this.bubble_.setAnchorLocation(e)},Blockly.Icon.prototype.computeIconLocation=function(){var e=this.block_.getRelativeToSurfaceXY(),t=Blockly.utils.getRelativeXY(this.iconGroup_);e=new Blockly.utils.Coordinate(e.x+t.x+this.SIZE/2,e.y+t.y+this.SIZE/2),Blockly.utils.Coordinate.equals(this.getIconLocation(),e)||this.setIconLocation(e)},Blockly.Icon.prototype.getIconLocation=function(){return this.iconXY_},Blockly.Icon.prototype.getCorrectedSize=function(){return new Blockly.utils.Size(Blockly.Icon.prototype.SIZE,Blockly.Icon.prototype.SIZE-2)},Blockly.Breakpoint=function(e){Blockly.Breakpoint.superClass_.constructor.call(this,e),this.createIcon(),this.set_=e.isBreakpointSet()||!1},Blockly.utils.object.inherits(Blockly.Breakpoint,Blockly.Icon),Blockly.Breakpoint.prototype.collapseHidden=!1,Blockly.Breakpoint.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyBreakpointIconGroup"},null),this.block_.isInFlyout&&Blockly.utils.dom.addClass(this.iconGroup_,"blocklyBreakpointIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),Blockly.bindEventWithChecks_(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},Blockly.Breakpoint.prototype.drawIcon_=function(e){var t=this.block_.isBreakpointSet()?"#f00":"#ccc";this.bigDot=Blockly.utils.dom.createSvgElement("circle",{class:"blocklyBreakpointSymbol",fill:t,stroke:"white","stroke-width":2,cx:7,cy:11.5,r:8},e)},Blockly.Breakpoint.prototype.enableBreakpoint=function(){this.setVisible(this.block_.isBreakpointSet())},Blockly.Breakpoint.prototype.dispose=function(){this.block_.breakpoint=null,goog.dom.removeNode(this.iconGroup_),this.block_=this.iconGroup_=null},Blockly.Breakpoint.prototype.setVisible=function(e){e!=this.isVisible()&&(Blockly.Events.fire(new Blockly.Events.Ui(this.block_,"breakpointSet",!e,e)),e?this.bigDot.setAttribute("fill","#f00"):this.bigDot.setAttribute("fill","#ccc"),this.set_=!this.set_,this.block_.setBreakpoint(e))},Blockly.Breakpoint.prototype.isVisible=function(){return!!this.set_},Blockly.Breakpoint.prototype.setIconLocation=function(e){this.iconXY_=e},Blockly.Breakpoint.prototype.updateColour=function(){},Blockly.Breakpoint.prototype.applyColour=function(){},Blockly.Extensions={},Blockly.Extensions.ALL_=Object.create(null),Blockly.Extensions.register=function(e,t){if("string"!=typeof e||""==e.trim())throw Error('Error: Invalid extension name "'+e+'"');if(Blockly.Extensions.ALL_[e])throw Error('Error: Extension "'+e+'" is already registered.');if("function"!=typeof t)throw Error('Error: Extension "'+e+'" must be a function');Blockly.Extensions.ALL_[e]=t},Blockly.Extensions.registerMixin=function(e,t){if(!t||"object"!=typeof t)throw Error('Error: Mixin "'+e+'" must be a object');Blockly.Extensions.register(e,(function(){this.mixin(t)}))},Blockly.Extensions.registerMutator=function(e,t,n,o){var r='Error when registering mutator "'+e+'": ';Blockly.Extensions.checkHasFunction_(r,t.domToMutation,"domToMutation"),Blockly.Extensions.checkHasFunction_(r,t.mutationToDom,"mutationToDom");var i=Blockly.Extensions.checkMutatorDialog_(t,r);if(n&&"function"!=typeof n)throw Error('Extension "'+e+'" is not a function');Blockly.Extensions.register(e,(function(){if(i){if(!Blockly.Mutator)throw Error(r+"Missing require for Blockly.Mutator");this.setMutator(new Blockly.Mutator(o||[]))}this.mixin(t),n&&n.apply(this)}))},Blockly.Extensions.unregister=function(e){Blockly.Extensions.ALL_[e]?delete Blockly.Extensions.ALL_[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},Blockly.Extensions.apply=function(e,t,n){var o=Blockly.Extensions.ALL_[e];if("function"!=typeof o)throw Error('Error: Extension "'+e+'" not found.');if(n)Blockly.Extensions.checkNoMutatorProperties_(e,t);else var r=Blockly.Extensions.getMutatorProperties_(t);if(o.apply(t),n)Blockly.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+e+'": ',t);else if(!Blockly.Extensions.mutatorPropertiesMatch_(r,t))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},Blockly.Extensions.checkHasFunction_=function(e,t,n){if(!t)throw Error(e+'missing required property "'+n+'"');if("function"!=typeof t)throw Error(e+'" required property "'+n+'" must be a function')},Blockly.Extensions.checkNoMutatorProperties_=function(e,t){if(Blockly.Extensions.getMutatorProperties_(t).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+t.id)},Blockly.Extensions.checkMutatorDialog_=function(e,t){var n=void 0!==e.compose,o=void 0!==e.decompose;if(n&&o){if("function"!=typeof e.compose)throw Error(t+"compose must be a function.");if("function"!=typeof e.decompose)throw Error(t+"decompose must be a function.");return!0}if(!n&&!o)return!1;throw Error(t+'Must have both or neither of "compose" and "decompose"')},Blockly.Extensions.checkBlockHasMutatorProperties_=function(e,t){if("function"!=typeof t.domToMutation)throw Error(e+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof t.mutationToDom)throw Error(e+'Applying a mutator didn\'t add "mutationToDom"');Blockly.Extensions.checkMutatorDialog_(t,e)},Blockly.Extensions.getMutatorProperties_=function(e){var t=[];return void 0!==e.domToMutation&&t.push(e.domToMutation),void 0!==e.mutationToDom&&t.push(e.mutationToDom),void 0!==e.compose&&t.push(e.compose),void 0!==e.decompose&&t.push(e.decompose),t},Blockly.Extensions.mutatorPropertiesMatch_=function(e,t){if((t=Blockly.Extensions.getMutatorProperties_(t)).length!=e.length)return!1;for(var n=0;n<t.length;n++)if(e[n]!=t[n])return!1;return!0},Blockly.Extensions.buildTooltipForDropdown=function(e,t){var n=[];return"object"==typeof document&&Blockly.utils.runAfterPageLoad((function(){for(var e in t)Blockly.utils.checkMessageReferences(t[e])})),function(){this.type&&-1==n.indexOf(this.type)&&(Blockly.Extensions.checkDropdownOptionsInTable_(this,e,t),n.push(this.type)),this.setTooltip(function(){var o=String(this.getFieldValue(e)),r=t[o];return null==r?-1==n.indexOf(this.type)&&(o="No tooltip mapping for value "+o+" of field "+e,null!=this.type&&(o+=" of block type "+this.type),console.warn(o+".")):r=Blockly.utils.replaceMessageReferences(r),r}.bind(this))}},Blockly.Extensions.checkDropdownOptionsInTable_=function(e,t,n){var o=e.getField(t);if(!o.isOptionListDynamic()){o=o.getOptions();for(var r=0;r<o.length;++r){var i=o[r][1];null==n[i]&&console.warn("No tooltip mapping for value "+i+" of field "+t+" of block type "+e.type)}}},Blockly.Extensions.buildTooltipWithFieldText=function(e,t){return"object"==typeof document&&Blockly.utils.runAfterPageLoad((function(){Blockly.utils.checkMessageReferences(e)})),function(){this.setTooltip(function(){var n=this.getField(t);return Blockly.utils.replaceMessageReferences(e).replace("%1",n?n.getText():"")}.bind(this))}},Blockly.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var e=this.getParent();return e&&e.getInputsInline()&&e.tooltip||this.tooltipWhenNotConnected_}.bind(this))},Blockly.Extensions.register("parent_tooltip_when_inline",Blockly.Extensions.extensionParentTooltip_),Blockly.blockAnimations={},Blockly.blockAnimations.disconnectPid_=0,Blockly.blockAnimations.disconnectGroup_=null,Blockly.blockAnimations.disposeUiEffect=function(e){var t=e.workspace,n=e.getSvgRoot();t.getAudioManager().play("delete"),e=t.getSvgXY(n),(n=n.cloneNode(!0)).translateX_=e.x,n.translateY_=e.y,n.setAttribute("transform","translate("+e.x+","+e.y+")"),t.getParentSvg().appendChild(n),n.bBox_=n.getBBox(),Blockly.blockAnimations.disposeUiStep_(n,t.RTL,new Date,t.scale)},Blockly.blockAnimations.disposeUiStep_=function(e,t,n,o){var r=(new Date-n)/150;1<r?Blockly.utils.dom.removeNode(e):(e.setAttribute("transform","translate("+(e.translateX_+(t?-1:1)*e.bBox_.width*o/2*r)+","+(e.translateY_+e.bBox_.height*o*r)+") scale("+(1-r)*o+")"),setTimeout(Blockly.blockAnimations.disposeUiStep_,10,e,t,n,o))},Blockly.blockAnimations.connectionUiEffect=function(e){var t=e.workspace,n=t.scale;if(t.getAudioManager().play("click"),!(1>n)){var o=t.getSvgXY(e.getSvgRoot());e.outputConnection?(o.x+=(e.RTL?3:-3)*n,o.y+=13*n):e.previousConnection&&(o.x+=(e.RTL?-23:23)*n,o.y+=3*n),e=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CIRCLE,{cx:o.x,cy:o.y,r:0,fill:"none",stroke:"#888","stroke-width":10},t.getParentSvg()),Blockly.blockAnimations.connectionUiStep_(e,new Date,n)}},Blockly.blockAnimations.connectionUiStep_=function(e,t,n){var o=(new Date-t)/150;1<o?Blockly.utils.dom.removeNode(e):(e.setAttribute("r",25*o*n),e.style.opacity=1-o,Blockly.blockAnimations.disconnectPid_=setTimeout(Blockly.blockAnimations.connectionUiStep_,10,e,t,n))},Blockly.blockAnimations.disconnectUiEffect=function(e){if(e.workspace.getAudioManager().play("disconnect"),!(1>e.workspace.scale)){var t=e.getHeightWidth().height;t=Math.atan(10/t)/Math.PI*180,e.RTL||(t*=-1),Blockly.blockAnimations.disconnectUiStep_(e.getSvgRoot(),t,new Date)}},Blockly.blockAnimations.disconnectUiStep_=function(e,t,n){var o=(new Date-n)/200;1<o?e.skew_="":(e.skew_="skewX("+Math.round(Math.sin(o*Math.PI*3)*(1-o)*t)+")",Blockly.blockAnimations.disconnectGroup_=e,Blockly.blockAnimations.disconnectPid_=setTimeout(Blockly.blockAnimations.disconnectUiStep_,10,e,t,n)),e.setAttribute("transform",e.translate_+e.skew_)},Blockly.blockAnimations.disconnectUiStop=function(){if(Blockly.blockAnimations.disconnectGroup_){clearTimeout(Blockly.blockAnimations.disconnectPid_);var e=Blockly.blockAnimations.disconnectGroup_;e.skew_="",e.setAttribute("transform",e.translate_),Blockly.blockAnimations.disconnectGroup_=null}},Blockly.Events.BlockDrag=function(e,t,n){Blockly.Events.BlockDrag.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.isStart=t,this.blocks=n},Blockly.utils.object.inherits(Blockly.Events.BlockDrag,Blockly.Events.UiBase),Blockly.Events.BlockDrag.prototype.type=Blockly.Events.BLOCK_DRAG,Blockly.Events.BlockDrag.prototype.toJson=function(){var e=Blockly.Events.BlockDrag.superClass_.toJson.call(this);return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e},Blockly.Events.BlockDrag.prototype.fromJson=function(e){Blockly.Events.BlockDrag.superClass_.fromJson.call(this,e),this.isStart=e.isStart,this.blockId=e.blockId,this.blocks=e.blocks},Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.BLOCK_DRAG,Blockly.Events.BlockDrag),Blockly.Events.EndBlockDrag=function(e){e&&(Blockly.Events.EndBlockDrag.superClass_.constructor.call(this,e),this.recordUndo=!1,this.blockId=e.id,this.allNestedIds=e.getDescendants().map((function(e){return e.id})))},Blockly.utils.object.inherits(Blockly.Events.EndBlockDrag,Blockly.Events.BlockBase),Blockly.Events.EndBlockDrag.prototype.type=Blockly.Events.END_DRAG,Blockly.Events.EndBlockDrag.prototype.toJson=function(){var e=Blockly.Events.EndBlockDrag.superClass_.toJson.call(this);return this.blockId&&(e.blockId=this.blockId),this.allNestedIds&&(e.allNestedIds=this.allNestedIds),e},Blockly.Events.EndBlockDrag.prototype.fromJson=function(e){Blockly.Events.EndBlockDrag.superClass_.fromJson.call(this,e),this.blockId=e.blockId,this.allNestedIds=e.allNestedIds},Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.END_DRAG,Blockly.Events.EndBlockDrag),Blockly.IBlockDragger=function(){},Blockly.InsertionMarkerManager=function(e){this.topBlock_=Blockly.selected=e,this.workspace_=e.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.connectionIndicator_=this.connectionLine_=this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},Blockly.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2},Blockly.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.",Blockly.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,Blockly.Events.disable();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{Blockly.Events.enable()}},Blockly.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},Blockly.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},Blockly.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},Blockly.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(Blockly.Events.disable(),this.hidePreview_(),Blockly.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var e=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;Blockly.blockAnimations.connectionUiEffect(e.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},Blockly.InsertionMarkerManager.prototype.update=function(e,t){var n=this.getCandidate_(e);((this.wouldDeleteBlock_=this.shouldDelete_(n,t))||this.shouldUpdatePreviews_(n,e))&&(Blockly.Events.disable(),this.maybeHidePreview_(n),this.maybeShowPreview_(n),Blockly.Events.enable()),this.updateConnectionLine_(e)},Blockly.InsertionMarkerManager.prototype.createMarkerBlock_=function(e){var t=e.type;Blockly.Events.disable();try{this.workspace_.loadingEventsDisabled=!0;var n=this.workspace_.newBlock(t);if(this.workspace_.loadingEventsDisabled=!1,n.setInsertionMarker(!0),e.mutationToDom){var o=e.mutationToDom();o&&n.domToMutation(o)}for(t=0;t<e.inputList.length;t++){var r=e.inputList[t];if(r.name!=Blockly.constants.COLLAPSED_INPUT_NAME&&!r.isVisible()){var i=n.inputList[t];if(!i)throw Error(Blockly.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","an input"));for(o=0;o<r.fieldRow.length;o++){var s=r.fieldRow[o],a=i.fieldRow[o];if(!a)throw Error(Blockly.InsertionMarkerManager.DUPLICATE_BLOCK_ERROR.replace("%1","a field"));a.setValue(s.getValue())}}}n.setCollapsed(e.isCollapsed()),n.setInputsInline(e.getInputsInline()),n.initSvg(),n.getSvgRoot().setAttribute("visibility","hidden")}finally{Blockly.Events.enable()}return n},Blockly.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var e=this.topBlock_.getConnections_(!1),t=this.topBlock_.lastConnectionInStack(!0);if(t&&t!=this.topBlock_.nextConnection){if(e.push(t),this.lastOnStack_=t,this.lastMarker_){Blockly.Events.disable();try{this.lastMarker_.dispose()}finally{Blockly.Events.enable()}}this.lastMarker_=this.createMarkerBlock_(t.getSourceBlock())}return e},Blockly.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(e,t){var n=e.local,o=e.closest;return e=e.radius,n&&o?this.localConnection_&&this.closestConnection_?(this.closestConnection_!=o||this.localConnection_!=n)&&(n=this.localConnection_.x+t.x-this.closestConnection_.x,t=this.localConnection_.y+t.y-this.closestConnection_.y,t=Math.sqrt(n*n+t*t),!(o&&e>t-Blockly.CURRENT_CONNECTION_PREFERENCE)):!this.localConnection_&&!this.closestConnection_||(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0):!(!this.localConnection_||!this.closestConnection_)},Blockly.InsertionMarkerManager.prototype.getCandidate_=function(e){for(var t=this.getStartRadius_(),n=null,o=null,r=0;r<this.availableConnections_.length;r++){var i=this.availableConnections_[r],s=i.closest(t,e);s.connection&&(n=s.connection,o=i,t=s.radius)}return{closest:n,local:o,radius:t}},Blockly.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?Blockly.CONNECTING_SNAP_RADIUS:Blockly.SNAP_RADIUS},Blockly.InsertionMarkerManager.prototype.shouldDelete_=function(e,t){return!(!t||!this.workspace_.getComponentManager().hasCapability(t.id,Blockly.ComponentManager.Capability.DELETE_AREA))&&t.wouldDelete(this.topBlock_,e&&!!e.closest)},Blockly.InsertionMarkerManager.prototype.maybeShowPreview_=function(e){if(!this.wouldDeleteBlock_){var t=e.closest;e=e.local,t&&(t==this.closestConnection_||t.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=t,this.localConnection_=e,this.showPreview_()))}},Blockly.InsertionMarkerManager.prototype.showPreview_=function(){var e=this.closestConnection_,t=this.workspace_.getRenderer();switch(t.getConnectionPreviewMethod(e,this.localConnection_,this.topBlock_)){case Blockly.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case Blockly.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case Blockly.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}e&&t.shouldHighlightConnection(e)&&e.highlight()},Blockly.InsertionMarkerManager.prototype.createConnectionLine_=function(){if(!this.connectionLine_){this.connectionLine_=Blockly.utils.dom.createSvgElement("line",{class:"blocklyConnectionLine",x1:0,y1:0,x2:0,y2:0},this.localConnection_.sourceBlock_.getSvgRoot()),this.connectionIndicator_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyInputConnectionIndicator"},this.closestConnection_.sourceBlock_.getSvgRoot()),Blockly.utils.dom.createSvgElement("circle",{r:Blockly.CONNECTION_INDICATOR_RADIUS},this.connectionIndicator_);var e=this.closestConnection_.offsetInBlock_;this.connectionIndicator_.setAttribute("transform","translate("+e.x+","+e.y+")")}},Blockly.InsertionMarkerManager.prototype.updateConnectionLine_=function(e){if(this.closestConnection_&&this.localConnection_&&this.connectionLine_){var t=Blockly.CONNECTION_INDICATOR_RADIUS,n=this.localConnection_.offsetInBlock_,o=this.closestConnection_.x-this.localConnection_.x-e.x+n.x;e=this.closestConnection_.y-this.localConnection_.y-e.y+n.y;var r=Math.atan2(e-n.y,o-n.x);Math.sqrt(Math.pow(o-n.x,2)+Math.pow(e-n.y,2))<2*t+1?Blockly.utils.dom.addClass(this.connectionLine_,"hidden"):(Blockly.utils.dom.removeClass(this.connectionLine_,"hidden"),this.connectionLine_.setAttribute("x1",n.x+Math.cos(r)*t),this.connectionLine_.setAttribute("y1",n.y+Math.sin(r)*t),this.connectionLine_.setAttribute("x2",o-Math.cos(r)*t),this.connectionLine_.setAttribute("y2",e-Math.sin(r)*t))}},Blockly.InsertionMarkerManager.prototype.hideConnectionLine_=function(){this.localConnection_&&this.connectionLine_&&(this.localConnection_.sourceBlock_.getSvgRoot().removeChild(this.connectionLine_),this.connectionLine_=null,this.closestConnection_.sourceBlock_.getSvgRoot().removeChild(this.connectionIndicator_),this.connectionIndicator_=null)},Blockly.InsertionMarkerManager.prototype.maybeHidePreview_=function(e){if(e.closest){var t=this.closestConnection_!=e.closest;e=this.localConnection_!=e.local,this.closestConnection_&&this.localConnection_&&(t||e||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},Blockly.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},Blockly.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var e=this.localConnection_,t=this.closestConnection_,n=this.lastOnStack_&&e==this.lastOnStack_?this.lastMarker_:this.firstMarker_;if((e=n.getMatchingConnection(e.getSourceBlock(),e))==this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");n.render(),n.rendered=!0,n.getSvgRoot().setAttribute("visibility","visible"),e&&t&&n.positionNearConnection(e,t),t&&e.connect(t),this.markerConnection_=e},Blockly.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var e=this.markerConnection_,t=e.getSourceBlock(),n=t.nextConnection,o=t.previousConnection,r=t.outputConnection;if(r=e.type==Blockly.connectionTypes.INPUT_VALUE&&!(r&&r.targetConnection),!(e!=n||o&&o.targetConnection)||r?e.targetBlock().unplug(!1):e.type==Blockly.connectionTypes.NEXT_STATEMENT&&e!=n?((n=e.targetConnection).getSourceBlock().unplug(!1),o=o?o.targetConnection:null,t.unplug(!0),o&&o.connect(n)):t.unplug(!0),e.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(e=t.getSvgRoot())&&e.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},Blockly.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var e=this.closestConnection_;this.highlightedBlock_=e.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(e,!0),this.createConnectionLine_()},Blockly.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null,this.hideConnectionLine_()},Blockly.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0),this.createConnectionLine_()},Blockly.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null,this.hideConnectionLine_()},Blockly.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var e=[];return this.firstMarker_&&e.push(this.firstMarker_),this.lastMarker_&&e.push(this.lastMarker_),e},Blockly.BlockDragger=function(e,t,n){this.draggingBlock_=e,this.workspace_=t,this.draggedConnectionManager_=new Blockly.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=Blockly.BlockDragger.initIconData_(e)},Blockly.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},Blockly.BlockDragger.initIconData_=function(e){var t=[];e=e.getDescendants(!1);for(var n,o=0;n=e[o];o++){n=n.getIcons();for(var r=0;r<n.length;r++){var i={location:n[r].getIconLocation(),icon:n[r]};i.location&&t.push(i)}}return t},Blockly.BlockDragger.prototype.startDrag=function(e,t){var n=this;Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),t&&(this.dragIconData_=this.dragIconData_.filter((function(e){return e.icon.block_.id==n.draggingBlock_.id}))),Blockly.utils.dom.startTextWidthCache(),this.workspace_.setResizesEnabled(!1),Blockly.blockAnimations.disconnectUiStop(),this.shouldDisconnect_(t)&&this.disconnectBlock_(t,e),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},Blockly.BlockDragger.prototype.shouldDisconnect_=function(e){return!!(this.draggingBlock_.getParent()||e&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},Blockly.BlockDragger.prototype.disconnectBlock_=function(e,t){this.draggingBlock_.unplug(e),e=this.pixelsToWorkspaceUnits_(t),e=Blockly.utils.Coordinate.sum(this.startXY_,e),this.draggingBlock_.translate(e.x,e.y),Blockly.blockAnimations.disconnectUiEffect(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},Blockly.BlockDragger.prototype.fireDragStartEvent_=function(){var e=new(Blockly.Events.get(Blockly.Events.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));Blockly.Events.fire(e)},Blockly.BlockDragger.prototype.drag=function(e,t){t=this.pixelsToWorkspaceUnits_(t);var n=Blockly.utils.Coordinate.sum(this.startXY_,t);this.draggingBlock_.moveDuringDrag(n),this.dragIcons_(t),n=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(e),this.draggedConnectionManager_.update(t,this.dragTarget_),e=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),e!=this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==n&&(n&&n.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},Blockly.BlockDragger.prototype.endDrag=function(e,t){if(this.drag(e,t),this.dragIconData_=[],this.fireDragEndEvent_(),Blockly.utils.dom.stopTextWidthCache(),Blockly.blockAnimations.disconnectUiStop(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))e=this.startXY_;else{var n=(e=this.getNewLocationAfterDrag_(t)).delta;e=e.newLocation}this.draggingBlock_.moveOffDragSurface(e),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),n?this.updateBlockAfterMove_(n):Blockly.bumpObjectIntoBounds_(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),Blockly.Events.setGroup(!1)},Blockly.BlockDragger.prototype.getNewLocationAfterDrag_=function(e){var t={};return t.delta=this.pixelsToWorkspaceUnits_(e),t.newLocation=Blockly.utils.Coordinate.sum(this.startXY_,t.delta),t},Blockly.BlockDragger.prototype.maybeDeleteBlock_=function(){return!!this.wouldDeleteBlock_&&(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),Blockly.draggingConnections=[],!0)},Blockly.BlockDragger.prototype.updateBlockAfterMove_=function(e){this.draggingBlock_.moveConnections(e.x,e.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},Blockly.BlockDragger.prototype.fireDragEndEvent_=function(){var e=new Blockly.Events.EndBlockDrag(this.draggingBlock_);Blockly.Events.fire(e)},Blockly.BlockDragger.prototype.updateToolboxStyle_=function(e){var t=this.workspace_.getToolbox();if(t){var n=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";e&&"function"==typeof t.removeStyle?t.removeStyle(n):e||"function"!=typeof t.addStyle||t.addStyle(n)}},Blockly.BlockDragger.prototype.fireMoveEvent_=function(){var e=new(Blockly.Events.get(Blockly.Events.BLOCK_MOVE))(this.draggingBlock_);e.oldCoordinate=this.startXY_,e.recordNew(),Blockly.Events.fire(e)},Blockly.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},Blockly.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new Blockly.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},Blockly.BlockDragger.prototype.workspaceOriginInPixels_=function(){var e=goog.style.getPageOffset(this.workspace_.getInjectionDiv()),t=this.workspace_.getOriginOffsetInPixels();return Blockly.utils.Coordinate.sum(e,t)},Blockly.BlockDragger.prototype.dragIcons_=function(e){for(var t=0;t<this.dragIconData_.length;t++){var n=this.dragIconData_[t];n.icon.setIconLocation(Blockly.utils.Coordinate.sum(n.location,e))}};Blockly.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]},Blockly.registry.register(Blockly.registry.Type.BLOCK_DRAGGER,Blockly.registry.DEFAULT,Blockly.BlockDragger),Blockly.IContextMenu=function(){},Blockly.IDeletable=function(){},Blockly.IDraggable=function(){},Blockly.IBubble=function(){},Blockly.Bubble=function(e,t,n,o,r,i){this.workspace_=e,this.content_=t,this.shape_=n,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,n=Blockly.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(n=-n),this.arrow_radians_=Blockly.utils.math.toRadians(n),e.getBubbleCanvas().appendChild(this.createDom_(t,!(!r||!i))),this.setAnchorLocation(o),r&&i||(r=(e=this.content_.getBBox()).width+2*Blockly.Bubble.BORDER_WIDTH,i=e.height+2*Blockly.Bubble.BORDER_WIDTH),this.setBubbleSize(r,i),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0},Blockly.Bubble.BORDER_WIDTH=1,Blockly.Bubble.RESIZE_SIZE=12*Blockly.Bubble.BORDER_WIDTH,Blockly.Bubble.ARROW_THICKNESS=5,Blockly.Bubble.ARROW_ANGLE=20,Blockly.Bubble.ARROW_BEND=4,Blockly.Bubble.ANCHOR_RADIUS=8,Blockly.Bubble.LINE_THICKNESS=1,Blockly.Bubble.onMouseUpWrapper_=null,Blockly.Bubble.onMouseMoveWrapper_=null,Blockly.Bubble.unbindDragEvents_=function(){Blockly.Bubble.onMouseUpWrapper_&&(Blockly.browserEvents.unbind(Blockly.Bubble.onMouseUpWrapper_),Blockly.Bubble.onMouseUpWrapper_=null),Blockly.Bubble.onMouseMoveWrapper_&&(Blockly.browserEvents.unbind(Blockly.Bubble.onMouseMoveWrapper_),Blockly.Bubble.onMouseMoveWrapper_=null)},Blockly.Bubble.bubbleMouseUp_=function(e){Blockly.Touch.clearTouchIdentifier(),Blockly.Bubble.unbindDragEvents_()},Blockly.Bubble.prototype.rendered_=!1,Blockly.Bubble.prototype.anchorXY_=null,Blockly.Bubble.prototype.relativeLeft_=0,Blockly.Bubble.prototype.relativeTop_=0,Blockly.Bubble.prototype.width_=0,Blockly.Bubble.prototype.height_=0,Blockly.Bubble.prototype.autoLayout_=!0,Blockly.Bubble.prototype.useArrow_=!1,Blockly.Bubble.prototype.createDom_=function(e,t){this.bubbleGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{},null);var n={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return!Blockly.utils.userAgent.JAVA_FX&&this.useArrow_||(n={}),n=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,n,this.bubbleGroup_),this.bubbleArrow_=Blockly.utils.dom.createSvgElement(this.useArrow_?Blockly.utils.Svg.PATH:Blockly.utils.Svg.LINE,{},n),this.bubbleBack_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:Blockly.Bubble.BORDER_WIDTH,ry:Blockly.Bubble.BORDER_WIDTH},n),this.bubbleGroup_.appendChild(e),t?(this.resizeGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),e=Blockly.Bubble.RESIZE_SIZE,Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,e.toString())},this.resizeGroup_),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{class:"blocklyResizeLine",x1:e/3,y1:e-1,x2:e-1,y2:e/3},this.resizeGroup_),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*e/3,y1:e-1,x2:e-1,y2:2*e/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=Blockly.browserEvents.conditionalBind(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=Blockly.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_},Blockly.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},Blockly.Bubble.prototype.setSvgId=function(e){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=e)},Blockly.Bubble.prototype.bubbleMouseDown_=function(e){var t=this.workspace_.getGesture(e);t&&t.handleBubbleStart(e,this)},Blockly.Bubble.prototype.showContextMenu=function(e){},Blockly.Bubble.prototype.isDeletable=function(){return!1},Blockly.Bubble.prototype.setDeleteStyle=function(e){},Blockly.Bubble.prototype.resizeMouseDown_=function(e){this.promote(),Blockly.Bubble.unbindDragEvents_(),Blockly.utils.isRightButton(e)||(this.workspace_.startDrag(e,new Blockly.utils.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),Blockly.Bubble.onMouseUpWrapper_=Blockly.browserEvents.conditionalBind(document,"mouseup",this,Blockly.Bubble.bubbleMouseUp_),Blockly.Bubble.onMouseMoveWrapper_=Blockly.browserEvents.conditionalBind(document,"mousemove",this,this.resizeMouseMove_),Blockly.hideChaff()),e.stopPropagation()},Blockly.Bubble.prototype.resizeMouseMove_=function(e){this.autoLayout_=!1,e=this.workspace_.moveDrag(e),this.setBubbleSize(this.workspace_.RTL?-e.x:e.x,e.y),this.workspace_.RTL&&this.positionBubble_()},Blockly.Bubble.prototype.registerResizeEvent=function(e){this.resizeCallback_=e},Blockly.Bubble.prototype.registerMoveEvent=function(e){this.moveCallback_=e},Blockly.Bubble.prototype.promote=function(){var e=this.bubbleGroup_.parentNode;return e.lastChild!==this.bubbleGroup_&&(e.appendChild(this.bubbleGroup_),!0)},Blockly.Bubble.prototype.setAnchorLocation=function(e){this.anchorXY_=e,this.rendered_&&this.positionBubble_()},Blockly.Bubble.prototype.layoutBubble_=function(){var e=this.workspace_.getMetricsManager().getViewMetrics(!0),t=this.getOptimalRelativeLeft_(e),n=this.getOptimalRelativeTop_(e),o=this.shape_.getBBox(),r={x:t,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},i={x:-this.width_-30,y:n};n={x:o.width,y:n};var s={x:t,y:o.height};t=o.width<o.height?n:s,o=o.width<o.height?s:n,n=this.getOverlap_(r,e),s=this.getOverlap_(i,e);var a=this.getOverlap_(t,e);e=this.getOverlap_(o,e),n==(e=Math.max(n,s,a,e))?(this.relativeLeft_=r.x,this.relativeTop_=r.y):s==e?(this.relativeLeft_=i.x,this.relativeTop_=i.y):a==e?(this.relativeLeft_=t.x,this.relativeTop_=t.y):(this.relativeLeft_=o.x,this.relativeTop_=o.y)},Blockly.Bubble.prototype.getOverlap_=function(e,t){var n=this.workspace_.RTL?this.anchorXY_.x-e.x-this.width_:e.x+this.anchorXY_.x;return e=e.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(n+this.width_,t.left+t.width)-Math.max(n,t.left))*(Math.min(e+this.height_,t.top+t.height)-Math.max(e,t.top))/(this.width_*this.height_)))},Blockly.Bubble.prototype.getOptimalRelativeLeft_=function(e){var t=-this.width_/4;if(this.width_>e.width)return t;if(this.workspace_.RTL)var n=this.anchorXY_.x-t,o=n-this.width_,r=e.left+e.width,i=e.left+Blockly.Scrollbar.scrollbarThickness/this.workspace_.scale;else n=(o=t+this.anchorXY_.x)+this.width_,i=e.left,r=e.left+e.width-Blockly.Scrollbar.scrollbarThickness/this.workspace_.scale;return this.workspace_.RTL?o<i?t=-(i-this.anchorXY_.x+this.width_):n>r&&(t=-(r-this.anchorXY_.x)):o<i?t=i-this.anchorXY_.x:n>r&&(t=r-this.anchorXY_.x-this.width_),t},Blockly.Bubble.prototype.getOptimalRelativeTop_=function(e){var t=-this.height_/4;if(this.height_>e.height)return t;var n=this.anchorXY_.y+t,o=n+this.height_,r=e.top;e=e.top+e.height-Blockly.Scrollbar.scrollbarThickness/this.workspace_.scale;var i=this.anchorXY_.y;return n<r?t=r-i:o>e&&(t=e-i-this.height_),t},Blockly.Bubble.prototype.positionBubble_=function(){var e=this.anchorXY_.x;e=this.workspace_.RTL?e-this.relativeLeft_:e+this.relativeLeft_,this.moveTo(e,this.relativeTop_+this.anchorXY_.y)},Blockly.Bubble.prototype.moveTo=function(e,t){this.bubbleGroup_.setAttribute("transform","translate("+e+","+t+")")},Blockly.Bubble.prototype.setDragging=function(e){!e&&this.moveCallback_&&this.moveCallback_()},Blockly.Bubble.prototype.getBubbleSize=function(){return new Blockly.utils.Size(this.width_,this.height_)},Blockly.Bubble.prototype.setBubbleSize=function(e,t){var n=2*Blockly.Bubble.BORDER_WIDTH;if(e=Math.max(e,n+45),t=Math.max(t,n+20),this.width_=e,this.height_=t,this.bubbleBack_.setAttribute("width",e),this.bubbleBack_.setAttribute("height",t),this.resizeGroup_){var o=Blockly.Bubble.RESIZE_SIZE;this.workspace_.RTL?this.resizeGroup_.setAttribute("transform","translate("+o+","+(t-n)+") scale(-1 1)"):this.resizeGroup_.setAttribute("transform","translate("+(e-o)+","+(t-o)+")")}this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},Blockly.Bubble.prototype.renderArrow_=function(){this.useArrow_?this.drawArrow_():this.drawLine_()},Blockly.Bubble.prototype.drawArrow_=function(){var e=[],t=this.width_/2,n=this.height_/2,o=-this.relativeLeft_,r=-this.relativeTop_;if(t==o&&n==r)e.push("M "+t+","+n);else{r-=n,o-=t,this.workspace_.RTL&&(o*=-1);var i=Math.sqrt(r*r+o*o),s=Math.acos(o/i);0>r&&(s=2*Math.PI-s);var a=s+Math.PI/2;a>2*Math.PI&&(a-=2*Math.PI);var l=Math.sin(a),c=Math.cos(a),u=this.getBubbleSize();a=(u.width+u.height)/Blockly.Bubble.ARROW_THICKNESS,a=Math.min(a,u.width,u.height)/4,o=t+(u=1-Blockly.Bubble.ANCHOR_RADIUS/i)*o,r=n+u*r,u=t+a*c;var p=n+a*l;t-=a*c,n-=a*l,(l=s+this.arrow_radians_)>2*Math.PI&&(l-=2*Math.PI),s=Math.sin(l)*i/Blockly.Bubble.ARROW_BEND,i=Math.cos(l)*i/Blockly.Bubble.ARROW_BEND,e.push("M"+u+","+p),e.push("C"+(u+i)+","+(p+s)+" "+o+","+r+" "+o+","+r),e.push("C"+o+","+r+" "+(t+i)+","+(n+s)+" "+t+","+n)}e.push("z"),this.bubbleArrow_.setAttribute("d",e.join(" "))},Blockly.Bubble.prototype.drawLine_=function(){var e=this.width_/2,t=Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT/2,n=-this.relativeLeft_,o=-this.relativeTop_;e==n&&t==o||(o-=t,n-=e,this.workspace_.RTL&&(n=-1*n-this.width_),this.bubbleArrow_.setAttribute("x1",e),this.bubbleArrow_.setAttribute("y1",t),this.bubbleArrow_.setAttribute("x2",e+n),this.bubbleArrow_.setAttribute("y2",t+o),this.bubbleArrow_.setAttribute("stroke-width",Blockly.Bubble.LINE_THICKNESS))},Blockly.Bubble.prototype.setColour=function(e,t){this.bubbleBack_.setAttribute("fill",e),this.useArrow_?this.bubbleArrow_.setAttribute("fill",e):(this.bubbleBack_.setAttribute("stroke",t),this.bubbleArrow_.setAttribute("stroke",t))},Blockly.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&Blockly.browserEvents.unbind(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&Blockly.browserEvents.unbind(this.onMouseDownResizeWrapper_),Blockly.Bubble.unbindDragEvents_(),Blockly.utils.dom.removeNode(this.bubbleGroup_),this.disposed=!0},Blockly.Bubble.prototype.moveDuringDrag=function(e,t){e?e.translateSurface(t.x,t.y):this.moveTo(t.x,t.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x-this.anchorXY_.x,this.relativeTop_=t.y-this.anchorXY_.y,this.renderArrow_()},Blockly.Bubble.prototype.getRelativeToSurfaceXY=function(){return new Blockly.utils.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},Blockly.Bubble.prototype.setAutoLayout=function(e){this.autoLayout_=e},Blockly.Bubble.textToDom=function(e){var t=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:Blockly.Bubble.BORDER_WIDTH},null);e=e.split("\n");for(var n=0;n<e.length;n++){var o=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.TSPAN,{dy:"1em",x:Blockly.Bubble.BORDER_WIDTH},t),r=document.createTextNode(e[n]);o.appendChild(r)}return t},Blockly.Bubble.createNonEditableBubble=function(e,t,n){if((n=new Blockly.Bubble(t.workspace,e,t.pathObject.svgPath,n,null,null)).setSvgId(t.id),t.RTL){t=e.getBBox().width;for(var o,r=0;o=e.childNodes[r];r++)o.setAttribute("text-anchor","end"),o.setAttribute("x",t+Blockly.Bubble.BORDER_WIDTH)}return n},Blockly.Events.CommentBase=function(e){this.commentId=(this.isBlank=void 0===e)?"":e.id,this.workspaceId=this.isBlank?"":e.workspace.id,this.group=Blockly.Events.getGroup(),this.recordUndo=Blockly.Events.recordUndo},Blockly.utils.object.inherits(Blockly.Events.CommentBase,Blockly.Events.Abstract),Blockly.Events.CommentBase.prototype.toJson=function(){var e=Blockly.Events.CommentBase.superClass_.toJson.call(this);return this.commentId&&(e.commentId=this.commentId),e},Blockly.Events.CommentBase.prototype.fromJson=function(e){Blockly.Events.CommentBase.superClass_.fromJson.call(this,e),this.commentId=e.commentId},Blockly.Events.CommentChange=function(e,t,n){Blockly.Events.CommentChange.superClass_.constructor.call(this,e),e&&(this.oldContents_=void 0===t?"":t,this.newContents_=void 0===n?"":n)},Blockly.utils.object.inherits(Blockly.Events.CommentChange,Blockly.Events.CommentBase),Blockly.Events.CommentChange.prototype.type=Blockly.Events.COMMENT_CHANGE,Blockly.Events.CommentChange.prototype.toJson=function(){var e=Blockly.Events.CommentChange.superClass_.toJson.call(this);return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e},Blockly.Events.CommentChange.prototype.fromJson=function(e){Blockly.Events.CommentChange.superClass_.fromJson.call(this,e),this.oldContents_=e.oldContents,this.newContents_=e.newContents},Blockly.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},Blockly.Events.CommentChange.prototype.run=function(e){var t=this.getEventWorkspace_().getCommentById(this.commentId);t?(e=e?this.newContents_:this.oldContents_,t.setContent(e),e.hasOwnProperty("minimized")&&t.setMinimized(e.minimized),e.hasOwnProperty("width")&&e.hasOwnProperty("height")&&t.setSize(e.width,e.height)):console.warn("Can't change non-existent comment: "+this.commentId)},Blockly.Events.CommentCreate=function(e){Blockly.Events.CommentCreate.superClass_.constructor.call(this,e),e&&(this.xml=e.toXmlWithXY())},Blockly.utils.object.inherits(Blockly.Events.CommentCreate,Blockly.Events.CommentBase),Blockly.Events.CommentCreate.prototype.type=Blockly.Events.COMMENT_CREATE,Blockly.Events.CommentCreate.prototype.toJson=function(){var e=Blockly.Events.CommentCreate.superClass_.toJson.call(this);return e.xml=Blockly.Xml.domToText(this.xml),e},Blockly.Events.CommentCreate.prototype.fromJson=function(e){Blockly.Events.CommentCreate.superClass_.fromJson.call(this,e),this.xml=Blockly.Xml.textToDom(e.xml)},Blockly.Events.CommentCreate.prototype.run=function(e){Blockly.Events.CommentCreateDeleteHelper(this,e)},Blockly.Events.CommentCreateDeleteHelper=function(e,t){var n=e.getEventWorkspace_();t?((t=Blockly.utils.xml.createElement("xml")).appendChild(e.xml),Blockly.Xml.domToWorkspace(t,n)):(n=n.getCommentById(e.commentId))?n.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+e.commentId)},Blockly.Events.CommentDelete=function(e){Blockly.Events.CommentDelete.superClass_.constructor.call(this,e),e&&(this.xml=e.toXmlWithXY())},Blockly.utils.object.inherits(Blockly.Events.CommentDelete,Blockly.Events.CommentBase),Blockly.Events.CommentDelete.prototype.type=Blockly.Events.COMMENT_DELETE,Blockly.Events.CommentDelete.prototype.toJson=function(){return Blockly.Events.CommentDelete.superClass_.toJson.call(this)},Blockly.Events.CommentDelete.prototype.fromJson=function(e){Blockly.Events.CommentDelete.superClass_.fromJson.call(this,e)},Blockly.Events.CommentDelete.prototype.run=function(e){Blockly.Events.CommentCreateDeleteHelper(this,!e)},Blockly.Events.CommentMove=function(e){Blockly.Events.CommentMove.superClass_.constructor.call(this,e),e&&(this.comment_=e,this.oldCoordinate_=e.getXY(),this.newCoordinate_=null)},Blockly.utils.object.inherits(Blockly.Events.CommentMove,Blockly.Events.CommentBase),Blockly.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},Blockly.Events.CommentMove.prototype.type=Blockly.Events.COMMENT_MOVE,Blockly.Events.CommentMove.prototype.setOldCoordinate=function(e){this.oldCoordinate_=e},Blockly.Events.CommentMove.prototype.toJson=function(){var e=Blockly.Events.CommentMove.superClass_.toJson.call(this);return this.oldCoordinate_&&(e.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),e},Blockly.Events.CommentMove.prototype.fromJson=function(e){if(Blockly.Events.CommentMove.superClass_.fromJson.call(this,e),e.oldCoordinate){var t=e.oldCoordinate.split(",");this.oldCoordinate_=new Blockly.utils.Coordinate(Number(t[0]),Number(t[1]))}e.newCoordinate&&(t=e.newCoordinate.split(","),this.newCoordinate_=new Blockly.utils.Coordinate(Number(t[0]),Number(t[1])))},Blockly.Events.CommentMove.prototype.isNull=function(){return Blockly.utils.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},Blockly.Events.CommentMove.prototype.run=function(e){var t=this.getEventWorkspace_().getCommentById(this.commentId);if(t){e=e?this.newCoordinate_:this.oldCoordinate_;var n=t.getXY();t.moveBy(e.x-n.x,e.y-n.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.COMMENT_CREATE,Blockly.Events.CommentCreate),Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.COMMENT_CHANGE,Blockly.Events.CommentChange),Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.COMMENT_MOVE,Blockly.Events.CommentMove),Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.COMMENT_DELETE,Blockly.Events.CommentDelete),Blockly.BubbleDragger=function(e,t){this.draggingBubble_=e,this.workspace_=t,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=Blockly.utils.is3dSupported()&&t.getBlockDragSurface()?t.getBlockDragSurface():null},Blockly.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},Blockly.BubbleDragger.prototype.startBubbleDrag=function(){Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},Blockly.BubbleDragger.prototype.dragBubble=function(e,t){t=this.pixelsToWorkspaceUnits_(t),t=Blockly.utils.Coordinate.sum(this.startXY_,t),this.draggingBubble_.moveDuringDrag(this.dragSurface_,t),t=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(e),e=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),e!=this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==t&&(t&&t.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},Blockly.BubbleDragger.prototype.shouldDelete_=function(e){return!(!e||!this.workspace_.getComponentManager().hasCapability(e.id,Blockly.ComponentManager.Capability.DELETE_AREA))&&e.wouldDelete(this.draggingBubble_,!1)},Blockly.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},Blockly.BubbleDragger.prototype.endBubbleDrag=function(e,t){this.dragBubble(e,t),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?e=this.startXY_:(e=this.pixelsToWorkspaceUnits_(t),e=Blockly.utils.Coordinate.sum(this.startXY_,e)),this.draggingBubble_.moveTo(e.x,e.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),Blockly.Events.setGroup(!1)},Blockly.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var e=new(Blockly.Events.get(Blockly.Events.COMMENT_MOVE))(this.draggingBubble_);e.setOldCoordinate(this.startXY_),e.recordNew(),Blockly.Events.fire(e)}},Blockly.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new Blockly.utils.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&e.scale(1/this.workspace_.options.parentWorkspace.scale),e},Blockly.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},Blockly.Events.Click=function(e,t,n){Blockly.Events.Click.superClass_.constructor.call(this,e?e.workspace.id:t),this.blockId=e?e.id:null,this.targetType=n},Blockly.utils.object.inherits(Blockly.Events.Click,Blockly.Events.UiBase),Blockly.Events.Click.prototype.type=Blockly.Events.CLICK,Blockly.Events.Click.prototype.toJson=function(){var e=Blockly.Events.Click.superClass_.toJson.call(this);return e.targetType=this.targetType,this.blockId&&(e.blockId=this.blockId),e},Blockly.Events.Click.prototype.fromJson=function(e){Blockly.Events.Click.superClass_.fromJson.call(this,e),this.targetType=e.targetType,this.blockId=e.blockId},Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.CLICK,Blockly.Events.Click),Blockly.WorkspaceDragger=function(e){this.workspace_=e,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new Blockly.utils.Coordinate(e.scrollX,e.scrollY)},Blockly.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},Blockly.WorkspaceDragger.prototype.startDrag=function(){Blockly.selected&&Blockly.selected.unselect(),this.workspace_.setupDragSurface()},Blockly.WorkspaceDragger.prototype.endDrag=function(e){this.drag(e),this.workspace_.resetDragSurface()},Blockly.WorkspaceDragger.prototype.drag=function(e){if(e=Blockly.utils.Coordinate.sum(this.startScrollXY_,e),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(e.x,e.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(e.x,this.workspace_.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace_.scroll(this.workspace_.scrollX,e.y)}},Blockly.Gesture=function(e,t){this.mouseDownXY_=null,this.currentDragDeltaXY_=new Blockly.utils.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=t,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=e,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.shouldDuplicateOnDrag_=this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!Blockly.DRAG_STACK},Blockly.Gesture.prototype.dispose=function(){Blockly.Touch.clearTouchIdentifier(),Blockly.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&Blockly.browserEvents.unbind(this.onMoveWrapper_),this.onUpWrapper_&&Blockly.browserEvents.unbind(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},Blockly.Gesture.prototype.updateFromEvent_=function(e){var t=new Blockly.utils.Coordinate(e.clientX,e.clientY);this.updateDragDelta_(t)&&(this.updateIsDragging_(),Blockly.longStop_()),this.mostRecentEvent_=e},Blockly.Gesture.prototype.updateDragDelta_=function(e){return this.currentDragDeltaXY_=Blockly.utils.Coordinate.difference(e,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=Blockly.utils.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?Blockly.FLYOUT_DRAG_RADIUS:Blockly.DRAG_RADIUS))},Blockly.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(!this.targetBlock_||!this.flyout_.isBlockCreatable_(this.targetBlock_))&&(!(this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_))&&(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),!0))},Blockly.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},Blockly.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():(this.targetBlock_.isMovable()||this.shouldDuplicateOnDrag_)&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},Blockly.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new Blockly.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},Blockly.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},Blockly.Gesture.prototype.startDraggingBlock_=function(){this.shouldDuplicateOnDrag_&&this.duplicateOnDrag_(),this.blockDragger_=new(Blockly.registry.getClassFromOptions(Blockly.registry.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},Blockly.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new Blockly.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},Blockly.Gesture.prototype.doStart=function(e){Blockly.utils.isTargetInput(e)?this.cancel():(this.hasStarted_=!0,Blockly.blockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),Blockly.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=e,Blockly.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),Blockly.utils.isRightButton(e)?this.handleRightClick(e):("touchstart"!=e.type.toLowerCase()&&"pointerdown"!=e.type.toLowerCase()||"mouse"==e.pointerType||Blockly.longStart(e,this),this.mouseDownXY_=new Blockly.utils.Coordinate(e.clientX,e.clientY),this.healStack_=e.altKey||e.ctrlKey||e.metaKey,this.bindMouseEvents(e)))},Blockly.Gesture.prototype.bindMouseEvents=function(e){this.onMoveWrapper_=Blockly.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=Blockly.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this)),e.preventDefault(),e.stopPropagation()},Blockly.Gesture.prototype.handleMove=function(e){this.updateFromEvent_(e),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),e.preventDefault(),e.stopPropagation()},Blockly.Gesture.prototype.handleUp=function(e){this.updateFromEvent_(e),Blockly.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(e,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(e,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_(e):this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(e),e.preventDefault(),e.stopPropagation(),this.dispose())},Blockly.Gesture.prototype.cancel=function(){this.isEnding_||(this.isEnding_=!0,Blockly.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},Blockly.Gesture.prototype.handleRightClick=function(e){this.targetBlock_?(this.bringBlockToFront_(),Blockly.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(e)):this.startBubble_?this.startBubble_.showContextMenu(e):this.startWorkspace_&&!this.flyout_&&(Blockly.hideChaff(),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),this.dispose()},Blockly.Gesture.prototype.handleWsStart=function(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(t),this.mostRecentEvent_=e,this.doStart(e)},Blockly.Gesture.prototype.fireWorkspaceClick_=function(e){Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.CLICK))(null,e.id,"workspace"))},Blockly.Gesture.prototype.handleFlyoutStart=function(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(t),this.handleWsStart(e,t.getWorkspace())},Blockly.Gesture.prototype.handleBlockStart=function(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(t),this.mostRecentEvent_=e},Blockly.Gesture.prototype.handleBubbleStart=function(e,t){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(t),this.mostRecentEvent_=e},Blockly.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},Blockly.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},Blockly.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&(Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var e=new(Blockly.Events.get(Blockly.Events.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");Blockly.Events.fire(e)}this.bringBlockToFront_(),Blockly.Events.setGroup(!1)},Blockly.Gesture.prototype.doWorkspaceClick_=function(e){e=this.creatorWorkspace_,Blockly.selected&&Blockly.selected.unselect(),this.fireWorkspaceClick_(this.startWorkspace_||e)},Blockly.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},Blockly.Gesture.prototype.setStartField=function(e){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=e)},Blockly.Gesture.prototype.setStartBubble=function(e){this.startBubble_||(this.startBubble_=e)},Blockly.Gesture.prototype.setStartBlock=function(e){this.startBlock_||this.startBubble_||(this.startBlock_=e,this.shouldDuplicateOnDrag_=!e.disabled&&!e.getInheritedDisabled()&&!e.isInFlyout&&Blockly.pxtBlocklyUtils.isShadowArgumentReporter(e),e.isInFlyout&&e!=e.getRootBlock()?this.setTargetBlock_(e.getRootBlock()):this.setTargetBlock_(e))},Blockly.Gesture.prototype.setTargetBlock_=function(e){e.isShadow()&&!this.shouldDuplicateOnDrag_?this.setTargetBlock_(e.getParent()):this.targetBlock_=e},Blockly.Gesture.prototype.setStartWorkspace_=function(e){this.startWorkspace_||(this.startWorkspace_=e)},Blockly.Gesture.prototype.setStartFlyout_=function(e){this.flyout_||(this.flyout_=e)},Blockly.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},Blockly.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},Blockly.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isClickable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},Blockly.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},Blockly.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},Blockly.Gesture.prototype.hasStarted=function(){return this.hasStarted_},Blockly.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},Blockly.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},Blockly.Gesture.inProgress=function(){for(var e,t=Blockly.Workspace.getAll(),n=0;e=t[n];n++)if(e.currentGesture_)return!0;return!1},Blockly.Gesture.prototype.forceStartBlockDrag=function(e,t){this.handleBlockStart(e,t),this.handleWsStart(e,t.workspace),this.hasExceededDragRadius_=this.isDraggingBlock_=!0,this.startDraggingBlock_()},Blockly.Gesture.prototype.duplicateOnDrag_=function(){var e=null;Blockly.Events.disable();try{this.startWorkspace_.setResizesEnabled(!1);var t=Blockly.Xml.blockToDom(this.targetBlock_);if("variables_get_reporter"==t.getAttribute("type")){var n=t.firstChild;if(!n)throw"unable to create a variable_get block from a variables_get_reporter block, block has no VAR field";var o=document.createElement("block");o.setAttribute("type","variables_get");var r=document.createElement("field");r.setAttribute("name",n.getAttribute("name")),r.setAttribute("id",n.getAttribute("id")),r.textContent=n.textContent,o.appendChild(r),t=o}this.targetBlock_.inputList[0]&&this.targetBlock_.inputList[0].fieldRow[0]&&this.targetBlock_.inputList[0].fieldRow[0].clearHover&&this.targetBlock_.inputList[0].fieldRow[0].clearHover(),e=Blockly.Xml.domToBlock(t,this.startWorkspace_);var i=this.targetBlock_.getRelativeToSurfaceXY();e.moveBy(i.x,i.y),e.setShadow(!1),e.setMovable(!0)}finally{Blockly.Events.enable()}e?(Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockCreate(e)),e.select(),this.targetBlock_=e):console.error("Something went wrong while duplicating a block.")},Blockly.IRegistrable=function(){},Blockly.Marker=function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"},Blockly.Marker.prototype.setDrawer=function(e){this.drawer_=e},Blockly.Marker.prototype.getDrawer=function(){return this.drawer_},Blockly.Marker.prototype.getCurNode=function(){return this.curNode_},Blockly.Marker.prototype.setCurNode=function(e){var t=this.curNode_;this.curNode_=e,this.drawer_&&this.drawer_.draw(t,this.curNode_)},Blockly.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},Blockly.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},Blockly.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()},Blockly.Cursor=function(){Blockly.Cursor.superClass_.constructor.call(this),this.type="cursor"},Blockly.utils.object.inherits(Blockly.Cursor,Blockly.Marker),Blockly.Cursor.prototype.next=function(){var e=this.getCurNode();if(!e)return null;for(e=e.next();e&&e.next()&&(e.getType()==Blockly.ASTNode.types.NEXT||e.getType()==Blockly.ASTNode.types.BLOCK);)e=e.next();return e&&this.setCurNode(e),e},Blockly.Cursor.prototype.in=function(){var e=this.getCurNode();return e?(e.getType()!=Blockly.ASTNode.types.PREVIOUS&&e.getType()!=Blockly.ASTNode.types.OUTPUT||(e=e.next()),(e=e.in())&&this.setCurNode(e),e):null},Blockly.Cursor.prototype.prev=function(){var e=this.getCurNode();if(!e)return null;for(e=e.prev();e&&e.prev()&&(e.getType()==Blockly.ASTNode.types.NEXT||e.getType()==Blockly.ASTNode.types.BLOCK);)e=e.prev();return e&&this.setCurNode(e),e},Blockly.Cursor.prototype.out=function(){var e=this.getCurNode();return e?((e=e.out())&&e.getType()==Blockly.ASTNode.types.BLOCK&&(e=e.prev()||e),e&&this.setCurNode(e),e):null},Blockly.registry.register(Blockly.registry.Type.CURSOR,Blockly.registry.DEFAULT,Blockly.Cursor),Blockly.MarkerManager=function(e){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=e},Blockly.MarkerManager.LOCAL_MARKER="local_marker_1",Blockly.MarkerManager.prototype.registerMarker=function(e,t){this.markers_[e]&&this.unregisterMarker(e),t.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,t)),this.setMarkerSvg(t.getDrawer().createDom()),this.markers_[e]=t},Blockly.MarkerManager.prototype.unregisterMarker=function(e){var t=this.markers_[e];if(!t)throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.");t.dispose(),delete this.markers_[e]},Blockly.MarkerManager.prototype.getCursor=function(){return this.cursor_},Blockly.MarkerManager.prototype.getMarker=function(e){return this.markers_[e]||null},Blockly.MarkerManager.prototype.setCursor=function(e){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=e)&&(e=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(e),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},Blockly.MarkerManager.prototype.setCursorSvg=function(e){e?(this.workspace_.getBlockCanvas().appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null},Blockly.MarkerManager.prototype.setMarkerSvg=function(e){e?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(e,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(e)):this.markerSvg_=null},Blockly.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},Blockly.MarkerManager.prototype.dispose=function(){for(var e,t=Object.keys(this.markers_),n=0;e=t[n];n++)this.unregisterMarker(e);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},Blockly.WidgetDiv={},Blockly.WidgetDiv.owner_=null,Blockly.WidgetDiv.dispose_=null,Blockly.WidgetDiv.rendererClassName_="",Blockly.WidgetDiv.themeClassName_="",Blockly.WidgetDiv.createDom=function(){Blockly.WidgetDiv.DIV||(Blockly.WidgetDiv.DIV=document.createElement("div"),Blockly.WidgetDiv.DIV.className="blocklyWidgetDiv",(Blockly.parentContainer||document.body).appendChild(Blockly.WidgetDiv.DIV))},Blockly.WidgetDiv.show=function(e,t,n){Blockly.WidgetDiv.hide(),Blockly.WidgetDiv.owner_=e,Blockly.WidgetDiv.dispose_=n,(e=Blockly.WidgetDiv.DIV).style.direction=t?"rtl":"ltr",e.style.display="block",t=Blockly.getMainWorkspace(),Blockly.WidgetDiv.rendererClassName_=t.getRenderer().getClassName(),Blockly.WidgetDiv.themeClassName_=t.getTheme().getClassName(),Blockly.utils.dom.addClass(e,Blockly.WidgetDiv.rendererClassName_),Blockly.utils.dom.addClass(e,Blockly.WidgetDiv.themeClassName_)},Blockly.WidgetDiv.repositionForWindowResize=function(){if(Blockly.WidgetDiv.owner_&&Blockly.WidgetDiv.owner_.getScaledBBox&&Blockly.WidgetDiv.isDisplayed()){var e=Blockly.WidgetDiv.owner_.getScaledBBox();Blockly.WidgetDiv.DIV.style.left=e.left+"px",Blockly.WidgetDiv.DIV.style.top=e.top+"px"}else Blockly.WidgetDiv.hide()},Blockly.WidgetDiv.hide=function(){if(Blockly.WidgetDiv.isVisible()){Blockly.WidgetDiv.owner_=null;var e=Blockly.WidgetDiv.DIV;e.style.display="none",e.style.left="",e.style.top="",Blockly.WidgetDiv.dispose_&&Blockly.WidgetDiv.dispose_(),Blockly.WidgetDiv.dispose_=null,e.textContent="",Blockly.WidgetDiv.rendererClassName_&&(Blockly.utils.dom.removeClass(e,Blockly.WidgetDiv.rendererClassName_),Blockly.WidgetDiv.rendererClassName_=""),Blockly.WidgetDiv.themeClassName_&&(Blockly.utils.dom.removeClass(e,Blockly.WidgetDiv.themeClassName_),Blockly.WidgetDiv.themeClassName_=""),Blockly.getMainWorkspace().markFocused()}},Blockly.WidgetDiv.isVisible=function(){return!!Blockly.WidgetDiv.owner_},Blockly.WidgetDiv.isDisplayed=function(){return"none"!=Blockly.WidgetDiv.DIV.style.display},Blockly.WidgetDiv.hideIfOwner=function(e){Blockly.WidgetDiv.owner_==e&&Blockly.WidgetDiv.hide()},Blockly.WidgetDiv.positionInternal_=function(e,t,n){Blockly.WidgetDiv.DIV.style.left=e+"px",Blockly.WidgetDiv.DIV.style.top=t+"px",Blockly.WidgetDiv.DIV.style.height=n+"px"},Blockly.WidgetDiv.positionWithAnchor=function(e,t,n,o){var r=Blockly.WidgetDiv.calculateY_(e,t,n);e=Blockly.WidgetDiv.calculateX_(e,t,n,o),0>r?Blockly.WidgetDiv.positionInternal_(e,0,n.height+r):Blockly.WidgetDiv.positionInternal_(e,r,n.height)},Blockly.WidgetDiv.calculateX_=function(e,t,n,o){return o?(t=Math.max(t.right-n.width,e.left),Math.min(t,e.right-n.width)):(t=Math.min(t.left,e.right-n.width),Math.max(t,e.left))},Blockly.WidgetDiv.calculateY_=function(e,t,n){return t.bottom+n.height>=e.bottom?t.top-n.height:t.bottom},Blockly.Field=function(e,t,n){this.value_=this.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new Blockly.utils.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,n&&this.configure_(n),this.setValue(e),t&&this.setValidator(t)},Blockly.Field.prototype.DEFAULT_VALUE=null,Blockly.Field.prototype.name=void 0,Blockly.Field.prototype.className_="blocklyText",Blockly.Field.prototype.disposed=!1,Blockly.Field.prototype.maxDisplayLength=1/0,Blockly.Field.prototype.sourceBlock_=null,Blockly.Field.prototype.isDirty_=!0,Blockly.Field.prototype.visible_=!0,Blockly.Field.prototype.argType_=null,Blockly.Field.prototype.clickTarget_=null,Blockly.Field.NBSP="",Blockly.Field.IE_TEXT_OFFSET="0.3em",Blockly.Field.prototype.EDITABLE=!0,Blockly.Field.prototype.SERIALIZABLE=!1,Blockly.Field.prototype.configure_=function(e){var t=e.tooltip;"string"==typeof t&&(t=Blockly.utils.replaceMessageReferences(e.tooltip)),t&&this.setTooltip(t)},Blockly.Field.prototype.setSourceBlock=function(e){if(this.sourceBlock_)throw Error("Field already bound to a block.");this.sourceBlock_=e},Blockly.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},Blockly.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},Blockly.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.setDataAttribute_(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},Blockly.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},Blockly.Field.prototype.initModel=function(){},Blockly.Field.prototype.onLoadedIntoWorkspace=function(){},Blockly.Field.prototype.createBorderRect_=function(){this.borderRect_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},Blockly.Field.prototype.createTextElement_=function(){this.textElement_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},Blockly.Field.prototype.setDataAttribute_=function(){null!==this.getArgTypes()&&(this.sourceBlock_.isShadow()?this.sourceBlock_.svgGroup_.setAttribute("data-argument-type",this.getArgTypes()):this.fieldGroup_.setAttribute("data-argument-type",this.getArgTypes()))},Blockly.Field.prototype.bindEvents_=function(){Blockly.Tooltip.bindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_=Blockly.browserEvents.conditionalBind(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},Blockly.Field.prototype.fromXml=function(e){this.setValue(e.textContent)},Blockly.Field.prototype.toXml=function(e){return e.textContent=this.getValue(),e},Blockly.Field.prototype.dispose=function(){Blockly.DropDownDiv.hideIfOwner(this),Blockly.WidgetDiv.hideIfOwner(this),1<this.getTotalFields_()&&Blockly.Tooltip.unbindMouseEvents(this.getClickTarget_()),this.mouseDownWrapper_&&Blockly.browserEvents.unbind(this.mouseDownWrapper_),Blockly.utils.dom.removeNode(this.fieldGroup_),this.disposed=!0},Blockly.Field.prototype.updateEditable=function(){var e=this.fieldGroup_;this.EDITABLE&&e&&(this.sourceBlock_.isEditable()?(Blockly.utils.dom.addClass(e,"blocklyEditableText"),Blockly.utils.dom.removeClass(e,"blocklyNonEditableText"),e.style.cursor=this.CURSOR):(Blockly.utils.dom.addClass(e,"blocklyNonEditableText"),Blockly.utils.dom.removeClass(e,"blocklyEditableText"),e.style.cursor=""))},Blockly.Field.prototype.isClickable=function(){return!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&!!this.showEditor_&&"function"==typeof this.showEditor_},Blockly.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},Blockly.Field.prototype.isSerializable=function(){var e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e},Blockly.Field.prototype.isVisible=function(){return this.visible_},Blockly.Field.prototype.setVisible=function(e){if(this.visible_!=e){this.visible_=e;var t=this.getSvgRoot();t&&(t.style.display=e?"block":"none")}},Blockly.Field.prototype.addArgType=function(e){null==this.argType_&&(this.argType_=[]),this.argType_.push(e)},Blockly.Field.prototype.getArgTypes=function(){return null===this.argType_||0===this.argType_.length?null:this.argType_.join(" ")},Blockly.Field.prototype.setValidator=function(e){this.validator_=e},Blockly.Field.prototype.getValidator=function(){return this.validator_},Blockly.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},Blockly.Field.prototype.applyColour=function(){},Blockly.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},Blockly.Field.prototype.showEditor=function(e){this.isClickable()&&this.showEditor_(e)},Blockly.Field.prototype.updateSize_=function(e){var t=this.getConstants(),n=2*(e=null!=e?e:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0),o=t.FIELD_TEXT_HEIGHT,r=0;this.textElement_&&(n+=r=Blockly.utils.dom.getFastTextWidth(this.textElement_,t.FIELD_TEXT_FONTSIZE,t.FIELD_TEXT_FONTWEIGHT,t.FIELD_TEXT_FONTFAMILY)),this.borderRect_&&(o=Math.max(o,t.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=o,this.size_.width=n,this.positionTextElement_(e,r),this.positionBorderRect_()},Blockly.Field.prototype.positionTextElement_=function(e,t){if(this.textElement_){var n=this.getConstants(),o=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-t-e:e),this.textElement_.setAttribute("y",n.FIELD_TEXT_BASELINE_CENTER?o:o-n.FIELD_TEXT_HEIGHT/2+n.FIELD_TEXT_BASELINE)}},Blockly.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},Blockly.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0==this.size_.width&&!this.sourceBlock_.isInsertionMarker_&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new Blockly.utils.Size(0,0)},Blockly.Field.prototype.getScaledBBox=function(){if(this.borderRect_)e=this.borderRect_.getBoundingClientRect(),n=Blockly.utils.style.getPageOffset(this.borderRect_),o=e.width,e=e.height;else{var e=this.sourceBlock_.getHeightWidth(),t=this.sourceBlock_.workspace.scale,n=this.getAbsoluteXY_(),o=e.width*t;e=e.height*t,Blockly.utils.userAgent.GECKO?(n.x+=1.5*t,n.y+=1.5*t):Blockly.utils.userAgent.EDGE||Blockly.utils.userAgent.IE||(n.x-=.5*t,n.y-=.5*t),o+=1*t,e+=1*t}return new Blockly.utils.Rect(n.y,n.y+e,n.x,n.x+o)},Blockly.Field.prototype.getDisplayText_=function(){var e=this.getText();return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+""),e=e.replace(/\s/g,Blockly.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+=""),e):Blockly.Field.NBSP},Blockly.Field.prototype.getText=function(){if(this.getText_){var e=this.getText_.call(this);if(null!==e)return String(e)}return String(this.getValue())},Blockly.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},Blockly.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},Blockly.Field.prototype.setValue=function(e){if(null!==e){var t=this.doClassValidation_(e);if(!((e=this.processValidation_(e,t))instanceof Error)){if((t=this.getValidator())&&(t=t.call(this,e),(e=this.processValidation_(e,t))instanceof Error))return;if(!(t=this.sourceBlock_)||!t.disposed){var n=this.getValue();n===e?this.doValueUpdate_(e):(t&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BLOCK_CHANGE))(t,"field",this.name||null,n,e)),this.doValueUpdate_(e),this.isDirty_&&this.forceRerender())}}}},Blockly.Field.prototype.processValidation_=function(e,t){return null===t?(this.doValueInvalid_(e),this.isDirty_&&this.forceRerender(),Error()):(void 0!==t&&(e=t),e)},Blockly.Field.prototype.getValue=function(){return this.value_},Blockly.Field.prototype.doClassValidation_=function(e){return null==e?null:e},Blockly.Field.prototype.doValueUpdate_=function(e){this.value_=e,this.isDirty_=!0},Blockly.Field.prototype.doValueInvalid_=function(e){},Blockly.Field.prototype.onMouseDown_=function(e){this.sourceBlock_&&this.sourceBlock_.workspace&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)},Blockly.Field.prototype.setTooltip=function(e){e||""===e||(e=this.sourceBlock_);var t=this.getClickTarget_();t?t.tooltip=e:this.tooltip_=e},Blockly.Field.prototype.getTooltip=function(){var e=this.getClickTarget_();return e?Blockly.Tooltip.getTooltipOfObject(e):Blockly.Tooltip.getTooltipOfObject({tooltip:this.tooltip_})},Blockly.Field.prototype.getClickTarget_=function(){if(this.clickTarget_)return this.clickTarget_;if(!this.sourceBlock_)return null;for(var e,t=0,n=0,o=0;e=this.sourceBlock_.inputList[o];o++){for(var r,i=0;r=e.fieldRow[i];i++)r instanceof Blockly.FieldLabel||t++;e.connection&&n++}return this.clickTarget_=1>=t&&this.sourceBlock_.outputConnection&&!n?this.sourceBlock_.getSvgRoot():this.getSvgRoot()},Blockly.Field.prototype.getTotalFields_=function(e){e=void 0!==e&&e;for(var t,n=0,o=0;t=this.sourceBlock_.inputList[o];o++)for(var r,i=0;r=t.fieldRow[i];i++)r instanceof Blockly.FieldLabel&&e||n++;return n},Blockly.Field.prototype.getAbsoluteXY_=function(){return Blockly.utils.style.getPageOffset(this.getClickTarget_())},Blockly.Field.prototype.referencesVariables=function(){return!1},Blockly.Field.prototype.getParentInput=function(){for(var e=null,t=this.sourceBlock_,n=t.inputList,o=0;o<t.inputList.length;o++)for(var r=n[o],i=r.fieldRow,s=0;s<i.length;s++)if(i[s]===this){e=r;break}return e},Blockly.Field.prototype.getFlipRtl=function(){return!1},Blockly.Field.prototype.isTabNavigable=function(){return!1},Blockly.Field.prototype.onShortcut=function(e){return!1},Blockly.Field.prototype.setCursorSvg=function(e){e?(this.fieldGroup_.appendChild(e),this.cursorSvg_=e):this.cursorSvg_=null},Blockly.Field.prototype.setMarkerSvg=function(e){e?(this.fieldGroup_.appendChild(e),this.markerSvg_=e):this.markerSvg_=null},Blockly.Field.prototype.updateMarkers_=function(){var e=this.sourceBlock_.workspace;e.keyboardAccessibilityMode&&this.cursorSvg_&&e.getCursor().draw(),e.keyboardAccessibilityMode&&this.markerSvg_&&e.getMarker(Blockly.MarkerManager.LOCAL_MARKER).draw()},Blockly.fieldRegistry={},Blockly.fieldRegistry.register=function(e,t){Blockly.registry.register(Blockly.registry.Type.FIELD,e,t)},Blockly.fieldRegistry.unregister=function(e){Blockly.registry.unregister(Blockly.registry.Type.FIELD,e)},Blockly.fieldRegistry.fromJson=function(e){var t=Blockly.registry.getObject(Blockly.registry.Type.FIELD,e.type);return t?t.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},Blockly.FieldLabel=function(e,t,n){this.class_=null,Blockly.FieldLabel.superClass_.constructor.call(this,e,null,n),n||(this.class_=t||null)},Blockly.utils.object.inherits(Blockly.FieldLabel,Blockly.Field),Blockly.FieldLabel.prototype.DEFAULT_VALUE="",Blockly.FieldLabel.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text);return new Blockly.FieldLabel(t,void 0,e)},Blockly.FieldLabel.prototype.EDITABLE=!1,Blockly.FieldLabel.prototype.bindEvents_=function(){var e=this.getClickTarget_();e.mouseOverWrapper_=[],e.mouseOutWrapper_=[]},Blockly.FieldLabel.prototype.configure_=function(e){Blockly.FieldLabel.superClass_.configure_.call(this,e),this.class_=e.class},Blockly.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&Blockly.utils.dom.addClass(this.textElement_,this.class_)},Blockly.FieldLabel.prototype.doClassValidation_=function(e){return null==e?null:String(e)},Blockly.FieldLabel.prototype.setClass=function(e){this.textElement_&&(this.class_&&Blockly.utils.dom.removeClass(this.textElement_,this.class_),e&&Blockly.utils.dom.addClass(this.textElement_,e)),this.class_=e},Blockly.fieldRegistry.register("field_label",Blockly.FieldLabel),Blockly.FieldLabelHover=function(e,t){Blockly.FieldLabelHover.superClass_.constructor.call(this,e,t),this.arrowWidth_=0},Blockly.utils.object.inherits(Blockly.FieldLabelHover,Blockly.FieldLabel),Blockly.FieldLabelHover.prototype.initView=function(){Blockly.FieldLabelHover.superClass_.initView.call(this),this.sourceBlock_.isEditable()&&(this.mouseOverWrapper_=Blockly.bindEvent_(this.getClickTarget_(),"mouseover",this,this.onMouseOver_),this.mouseOutWrapper_=Blockly.bindEvent_(this.getClickTarget_(),"mouseout",this,this.onMouseOut_))},Blockly.FieldLabelHover.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text);return new Blockly.FieldLabelHover(t,e.class)},Blockly.FieldLabelHover.prototype.EDITABLE=!1,Blockly.FieldLabelHover.prototype.SERIALIZABLE=!0,Blockly.FieldLabelHover.prototype.updateWidth=function(){this.size_.width=Blockly.utils.dom.getFastTextWidth(this.textElement_,this.constants_.FIELD_TEXT_FONTSIZE,this.constants_.FIELD_TEXT_FONTWEIGHT,this.constants_.FIELD_TEXT_FONTFAMILY)},Blockly.FieldLabelHover.prototype.onMouseOver_=function(e){!this.sourceBlock_.isInFlyout&&this.sourceBlock_.isShadow()&&((e=this.sourceBlock_.workspace.getGesture(e))&&e.isDragging()||!this.sourceBlock_.pathObject.svgPath||(Blockly.utils.dom.addClass(this.sourceBlock_.pathObject.svgPath,"blocklyFieldHover"),this.sourceBlock_.pathObject.svgPath.style.strokeDasharray="2"))},Blockly.FieldLabelHover.prototype.clearHover=function(){this.sourceBlock_.pathObject.svgPath&&(Blockly.utils.dom.removeClass(this.sourceBlock_.pathObject.svgPath,"blocklyFieldHover"),this.sourceBlock_.pathObject.svgPath.style.strokeDasharray="")},Blockly.FieldLabelHover.prototype.onMouseOut_=function(e){!this.sourceBlock_.isInFlyout&&this.sourceBlock_.isShadow()&&((e=this.sourceBlock_.workspace.getGesture(e))&&e.isDragging()||this.clearHover())},Blockly.FieldLabelHover.dispose=function(){this.mouseOverWrapper_&&(Blockly.unbindEvent_(this.mouseOverWrapper_),this.mouseOverWrapper_=null),this.mouseOutWrapper_&&(Blockly.unbindEvent_(this.mouseOutWrapper_),this.mouseOutWrapper_=null),Blockly.FieldLabelHover.superClass_.dispose.call(this),this.variableMap_=this.workspace_=null},Blockly.fieldRegistry.register("field_label_hover",Blockly.FieldLabelHover),Blockly.FieldVariableGetter=function(e,t,n,o,r){this.defaultVariableName=e||"",this.size_=new Blockly.utils.Size(0,0),r&&this.configure_(r),t&&this.setValidator(t),r||this.setTypes_(n,o)},Blockly.utils.object.inherits(Blockly.FieldVariableGetter,Blockly.Field),Blockly.FieldVariableGetter.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.variable);return new Blockly.FieldVariableGetter(t,null,e.variableTypes,e.defaultType)},Blockly.FieldVariableGetter.prototype.workspace_=null,Blockly.FieldVariableGetter.prototype.CURSOR="copy",Blockly.FieldVariableGetter.prototype.EDITABLE=!1,Blockly.FieldVariableGetter.prototype.SERIALIZABLE=!0,Blockly.FieldVariableGetter.prototype.initView=function(){this.createTextElement_(),this.sourceBlock_.isEditable()&&(this.mouseOverWrapper_=Blockly.bindEvent_(this.getClickTarget_(),"mouseover",this,this.onMouseOver_),this.mouseOutWrapper_=Blockly.bindEvent_(this.getClickTarget_(),"mouseout",this,this.onMouseOut_))},Blockly.FieldVariableGetter.prototype.initModel=function(){if(!this.variable_){var e=Blockly.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(e.getId())}},Blockly.FieldVariableGetter.prototype.onMouseOver_=function(e){this.sourceBlock_.isInFlyout||(e=this.sourceBlock_.workspace.getGesture(e))&&e.isDragging()||!(e=this.sourceBlock_.pathObject.svgPath)||(Blockly.utils.dom.addClass(e,"blocklyFieldHover"),e.style.strokeDasharray="2")},Blockly.FieldVariableGetter.prototype.clearHover=function(){var e=this.sourceBlock_.pathObject.svgPath;e&&(Blockly.utils.dom.removeClass(e,"blocklyFieldHover"),e.style.strokeDasharray="")},Blockly.FieldVariableGetter.prototype.onMouseOut_=function(e){this.sourceBlock_.isInFlyout||(e=this.sourceBlock_.workspace.getGesture(e))&&e.isDragging()||this.clearHover()},Blockly.FieldVariableGetter.dispose=function(){this.mouseOverWrapper_&&(Blockly.unbindEvent_(this.mouseOverWrapper_),this.mouseOverWrapper_=null),this.mouseOutWrapper_&&(Blockly.unbindEvent_(this.mouseOutWrapper_),this.mouseOutWrapper_=null),Blockly.FieldVariableGetter.superClass_.dispose.call(this),this.variableMap_=this.workspace_=null},Blockly.FieldVariableGetter.prototype.fromXml=function(e){e.getAttribute("id");var t=e.textContent,n=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(t=Blockly.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,t,n),null!=n&&n!==t.type)throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.type+", and does not match variable field that references it: "+Blockly.Xml.domToText(e)+".");this.setValue(t.getId())},Blockly.FieldVariableGetter.prototype.toXml=function(e){return this.initModel(),e.id=this.variable_.getId(),e.textContent=this.variable_.name,this.variable_.type&&e.setAttribute("variabletype",this.variable_.type),e},Blockly.FieldVariableGetter.prototype.setSourceBlock=function(e){goog.asserts.assert(!e.isShadow(),"Variable fields are not allowed to exist on shadow blocks."),Blockly.FieldVariableGetter.superClass_.setSourceBlock.call(this,e)},Blockly.FieldVariableGetter.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},Blockly.FieldVariableGetter.prototype.getText=function(){return this.variable_?this.variable_.name:""},Blockly.FieldVariableGetter.prototype.getVariable=function(){return this.variable_},Blockly.FieldVariableGetter.prototype.doValueUpdate_=function(e){this.variable_=Blockly.Variables.getVariable(this.sourceBlock_.workspace,e),Blockly.FieldVariableGetter.superClass_.doValueUpdate_.call(this,e)},Blockly.FieldVariableGetter.prototype.doClassValidation_=function(e){if(null===e)return null;var t=Blockly.Variables.getVariable(this.sourceBlock_.workspace,e);return t?(t=t.type,this.typeIsAllowed_(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)},Blockly.FieldVariableGetter.prototype.typeIsAllowed_=function(e){var t=this.getVariableTypes_();if(!t)return!0;for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1},Blockly.FieldVariableGetter.prototype.getVariableTypes_=function(){var e=this.variableTypes;if(null===e&&this.sourceBlock_)return this.sourceBlock_.workspace.getVariableTypes();if(0==(e=e||[""]).length)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e},Blockly.FieldVariableGetter.prototype.setTypes_=function(e,t){if(t=t||"",null==e||null==e)e=null;else{if(!Array.isArray(e))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var n=!1,o=0;o<e.length;o++)e[o]==t&&(n=!0);if(!n)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}this.defaultType_=t,this.variableTypes=e},Blockly.FieldVariableGetter.prototype.showEditor_=function(){},Blockly.FieldVariableGetter.prototype.updateEditable=function(){!this.sourceBlock_.isInFlyout&&this.sourceBlock_.isEditable()&&(this.sourceBlock_.pathObject.svgPath.style.cursor=this.CURSOR)},Blockly.FieldVariableGetter.prototype.referencesVariables=function(){return!0},Blockly.fieldRegistry.register("field_variable_getter",Blockly.FieldVariableGetter),Blockly.Input=function(e,t,n,o){if(e!=Blockly.inputTypes.DUMMY&&!t)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=e,this.name=t,this.sourceBlock_=n,this.connection=o,this.fieldRow=[]},Blockly.Input.prototype.align=Blockly.constants.ALIGN.LEFT,Blockly.Input.prototype.visible_=!0,Blockly.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},Blockly.Input.prototype.appendField=function(e,t){return this.insertFieldAt(this.fieldRow.length,e,t),this},Blockly.Input.prototype.insertFieldAt=function(e,t,n){if(0>e||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return t||""==t&&n?("string"==typeof t&&(t=Blockly.fieldRegistry.fromJson({type:"field_label",text:t})),t.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(t.init(),t.applyColour()),t.name=n,t.setVisible(this.isVisible()),t.prefixField&&(e=this.insertFieldAt(e,t.prefixField)),this.fieldRow.splice(e,0,t),++e,t.suffixField&&(e=this.insertFieldAt(e,t.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),e):e},Blockly.Input.prototype.removeField=function(e,t){for(var n,o=0;n=this.fieldRow[o];o++)if(n.name===e)return n.dispose(),this.fieldRow.splice(o,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(t)return!1;throw Error('Field "'+e+'" not found.')},Blockly.Input.prototype.isVisible=function(){return this.visible_},Blockly.Input.prototype.setVisible=function(e){var t=[];if(this.visible_==e)return t;this.visible_=e;for(var n,o=0;n=this.fieldRow[o];o++)n.setVisible(e);return this.connection&&(this.connection=this.connection,e?t=this.connection.startTrackingAll():this.connection.stopTrackingAll(),o=this.connection.targetBlock())&&(o.getSvgRoot().style.display=e?"block":"none"),t},Blockly.Input.prototype.markDirty=function(){for(var e,t=0;e=this.fieldRow[t];t++)e.markDirty()},Blockly.Input.prototype.setCheck=function(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this},Blockly.Input.prototype.setAlign=function(e){return this.align=e,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},Blockly.Input.prototype.setShadowDom=function(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this},Blockly.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},Blockly.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var e=0;e<this.fieldRow.length;e++)this.fieldRow[e].init(this.sourceBlock_)},Blockly.Input.prototype.dispose=function(){for(var e,t=0;e=this.fieldRow[t];t++)e.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},Blockly.Block=function(e,t,n){if(Blockly.Generator&&void 0!==Blockly.Generator.prototype[t])throw Error('Block prototypeName "'+t+'" conflicts with Blockly.Generator members.');var o=e&&e.getFlyout&&e.getFlyout()?e.getFlyout().getWorkspace():null;if(this.id=!n||e.getBlockById(n)||o&&o.getBlockById(n)?Blockly.utils.genUid():n,e.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=this.startHat=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new Blockly.utils.Size(160,80),xy:new Blockly.utils.Coordinate(10,10)},this.xy_=new Blockly.utils.Coordinate(0,0),this.workspace=e,this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.rendered=null,this.statementInputCount=0,t){if(this.type=t,!(n=Blockly.Blocks[t])||"object"!=typeof n)throw TypeError("Unknown block type: "+t);Blockly.utils.object.mixin(this,n)}e.addTopBlock(this),e.addTypedBlock(this),(e=Blockly.Events.getGroup())||Blockly.Events.setGroup(!0),t=Blockly.Events.recordUndo;try{"function"==typeof this.init&&(Blockly.Events.recordUndo=!1,this.init(),Blockly.Events.recordUndo=t),Blockly.Events.isEnabled()&&Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BLOCK_CREATE))(this))}finally{e||Blockly.Events.setGroup(!1),Blockly.Events.recordUndo=t}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)},Blockly.Block.COLLAPSED_INPUT_NAME=Blockly.constants.COLLAPSED_INPUT_NAME,Blockly.Block.COLLAPSED_FIELD_NAME=Blockly.constants.COLLAPSED_FIELD_NAME,Blockly.Block.prototype.data=null,Blockly.Block.prototype.disposed=!1,Blockly.Block.prototype.hue_=null,Blockly.Block.prototype.colour_="#000000",Blockly.Block.prototype.styleName_="",Blockly.Block.prototype.dispose=function(e){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(e),Blockly.Events.isEnabled()&&Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BLOCK_DELETE))(this)),Blockly.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),Blockly.selected==this&&(Blockly.selected=null);for(var t=this.childBlocks_.length-1;0<=t;t--)this.childBlocks_[t].dispose(!1);t=0;for(var n;n=this.inputList[t];t++)n.dispose();this.inputList.length=0;var o,r=this.getConnections_(!0);for(t=0;o=r[t];t++)o.dispose()}finally{Blockly.Events.enable(),this.disposed=!0}}},Blockly.Block.prototype.initModel=function(){for(var e,t=0;e=this.inputList[t];t++)for(var n,o=0;n=e.fieldRow[o];o++)n.initModel&&n.initModel()},Blockly.Block.prototype.unplug=function(e){this.outputConnection?this.unplugFromRow_(e):this.previousConnection&&this.unplugFromStack_(e)},Blockly.Block.prototype.unplugFromRow_=function(e){var t=null;this.outputConnection.isConnected()&&(t=this.outputConnection.targetConnection,this.outputConnection.disconnect()),t&&e&&(e=this.getOnlyValueConnection_())&&e.isConnected()&&!e.targetBlock().isShadow()&&((e=e.targetConnection).disconnect(),this.workspace.connectionChecker.canConnect(e,t,!1)?t.connect(e):e.onFailedConnect(t))},Blockly.Block.prototype.getOnlyValueConnection_=function(){for(var e=null,t=0;t<this.inputList.length;t++){var n=this.inputList[t].connection;if(n&&n.type==Blockly.connectionTypes.INPUT_VALUE&&n.targetConnection){if(e)return null;e=n}}return e},Blockly.Block.prototype.unplugFromStack_=function(e){var t=null;this.previousConnection.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect());var n=this.getNextBlock();e&&n&&!n.isShadow()&&((e=this.nextConnection.targetConnection).disconnect(),t&&this.workspace.connectionChecker.canConnect(t,e,!1)&&t.connect(e))},Blockly.Block.prototype.getConnections_=function(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(var t,n=0;t=this.inputList[n];n++)t.connection&&e.push(t.connection);return e},Blockly.Block.prototype.lastConnectionInStack=function(e){for(var t=this.nextConnection;t;){var n=t.targetBlock();if(!n||e&&n.isShadow())return t;t=n.nextConnection}return null},Blockly.Block.prototype.bumpNeighbours=function(){},Blockly.Block.prototype.getParent=function(){return this.parentBlock_},Blockly.Block.prototype.getInputWithBlock=function(e){for(var t,n=0;t=this.inputList[n];n++)if(t.connection&&t.connection.targetBlock()==e)return t;return null},Blockly.Block.prototype.getInputWithConnection=function(e){for(var t,n=0;t=this.inputList[n];n++)if(t.connection==e)return t;return null},Blockly.Block.prototype.getSurroundParent=function(){var e=this;do{var t=e;if(!(e=e.getParent()))return null}while(e.getNextBlock()==t);return e},Blockly.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},Blockly.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},Blockly.Block.prototype.getFirstStatementConnection=function(){for(var e,t=0;e=this.inputList[t];t++)if(e.connection&&e.connection.type==Blockly.connectionTypes.NEXT_STATEMENT)return e.connection;return null},Blockly.Block.prototype.getRootBlock=function(){var e=this;do{var t=e;e=t.parentBlock_}while(e);return t},Blockly.Block.prototype.getTopStackBlock=function(){var e=this;do{var t=e.getPreviousBlock()}while(t&&t.getNextBlock()==e&&(e=t));return e},Blockly.Block.prototype.getChildren=function(e){if(!e)return this.childBlocks_;e=[];for(var t,n=0;t=this.inputList[n];n++)t.connection&&(t=t.connection.targetBlock())&&e.push(t);return(n=this.getNextBlock())&&e.push(n),e},Blockly.Block.prototype.setParent=function(e){if(e!=this.parentBlock_){if(this.parentBlock_){if(Blockly.utils.arrayRemove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw Error("Still connected to previous block.");if(this.outputConnection&&this.outputConnection.isConnected())throw Error("Still connected to parent block.");this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}},Blockly.Block.prototype.getDescendants=function(e,t){for(var n,o=[this],r=this.getChildren(e),i=0;n=r[i];i++)t&&n.isShadow()||o.push.apply(o,n.getDescendants(e));return o},Blockly.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.Block.prototype.inDebugWorkspace=function(){return!(!this.workspace||!this.workspace.options.debugMode)},Blockly.Block.prototype.setDeletable=function(e){this.deletable_=e},Blockly.Block.prototype.isMovable=function(){return this.isMovablePersisted()&&!this.inDebugWorkspace()},Blockly.Block.prototype.isMovablePersisted=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.Block.prototype.setMovable=function(e){this.movable_=e},Blockly.Block.prototype.isDuplicatable=function(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(Blockly.utils.getBlockTypeCounts(this,!0))},Blockly.Block.prototype.isShadow=function(){return this.isShadow_},Blockly.Block.prototype.setShadow=function(e){this.isShadow_=e},Blockly.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},Blockly.Block.prototype.setInsertionMarker=function(e){this.isInsertionMarker_!=e&&(this.isInsertionMarker_=e)&&(this.setColour(Blockly.Colours.insertionMarker),this.setOpacity(Blockly.Colours.insertionMarkerOpacity),Blockly.utils.dom.addClass(this.svgGroup_,"blocklyInsertionMarker"))},Blockly.Block.prototype.isEditable=function(){return this.isEditablePersisted()&&!this.inDebugWorkspace()},Blockly.Block.prototype.isEditablePersisted=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.Block.prototype.setEditable=function(e){this.editable_=e,e=0;for(var t;t=this.inputList[e];e++)for(var n,o=0;n=t.fieldRow[o];o++)n.updateEditable()},Blockly.Block.prototype.isDisposed=function(){return this.disposed},Blockly.Block.prototype.getMatchingConnection=function(e,t){var n=this.getConnections_(!0);if(e=e.getConnections_(!0),n.length!=e.length)throw Error("Connection lists did not match in length.");for(var o=0;o<e.length;o++)if(e[o]==t)return n[o];return null},Blockly.Block.prototype.setHelpUrl=function(e){this.helpUrl=e},Blockly.Block.prototype.setTooltip=function(e){this.tooltip=e},Blockly.Block.prototype.getTooltip=function(){return Blockly.Tooltip.getTooltipOfObject(this)},Blockly.Block.prototype.getColour=function(){return this.colour_},Blockly.Block.prototype.getStyleName=function(){return this.styleName_},Blockly.Block.prototype.getHue=function(){return this.hue_},Blockly.Block.prototype.setColour=function(e){e=Blockly.utils.parseBlockColour(e),this.hue_=e.hue,this.colour_=e.hex},Blockly.Block.prototype.setStyle=function(e){this.styleName_=e},Blockly.Block.prototype.setOnChange=function(e){if(e&&"function"!=typeof e)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=e)&&(this.onchangeWrapper_=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},Blockly.Block.prototype.getField=function(e){if("string"!=typeof e)throw TypeError("Blockly.Block.prototype.getField expects a string with the field name but received "+(void 0===e?"nothing":e+" of type "+typeof e)+" instead");for(var t,n=0;t=this.inputList[n];n++)for(var o,r=0;o=t.fieldRow[r];r++)if(o.name===e)return o;return null},Blockly.Block.prototype.getVars=function(){for(var e,t=[],n=0;e=this.inputList[n];n++)for(var o,r=0;o=e.fieldRow[r];r++)o.referencesVariables()&&t.push(o.getValue());return t},Blockly.Block.prototype.getVarModels=function(){for(var e,t=[],n=0;e=this.inputList[n];n++)for(var o,r=0;o=e.fieldRow[r];r++)o.referencesVariables()&&(o=this.workspace.getVariableById(o.getValue()))&&t.push(o);return t},Blockly.Block.prototype.updateVarName=function(e){for(var t,n=0;t=this.inputList[n];n++)for(var o,r=0;o=t.fieldRow[r];r++)o.referencesVariables()&&e.getId()==o.getValue()&&o.forceRerender()},Blockly.Block.prototype.renameVarById=function(e,t){for(var n,o=0;n=this.inputList[o];o++)for(var r,i=0;r=n.fieldRow[i];i++)r.referencesVariables()&&e==r.getValue()&&r.setValue(t)},Blockly.Block.prototype.getFieldValue=function(e){return(e=this.getField(e))?e.getValue():null},Blockly.Block.prototype.setFieldValue=function(e,t){var n=this.getField(t);if(!n)throw Error('Field "'+t+'" not found.');n.setValue(e)},Blockly.Block.prototype.setPreviousStatement=function(e,t){if(e){if(void 0===t&&(t=null),!this.previousConnection){if(this.outputConnection)throw Error("Remove output connection prior to adding previous connection.");this.previousConnection=this.makeConnection_(Blockly.connectionTypes.PREVIOUS_STATEMENT)}this.previousConnection.setCheck(t)}else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},Blockly.Block.prototype.setNextStatement=function(e,t){if(e)void 0===t&&(t=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Blockly.connectionTypes.NEXT_STATEMENT)),this.nextConnection.setCheck(t);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},Blockly.Block.prototype.setOutput=function(e,t){if(e){if(void 0===t&&(t=null),!this.outputConnection){if(this.previousConnection)throw Error("Remove previous connection prior to adding output connection.");this.outputConnection=this.makeConnection_(Blockly.connectionTypes.OUTPUT_VALUE)}this.outputConnection.setCheck(t)}else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},Blockly.Block.prototype.setInputsInline=function(e){this.inputsInline!=e&&(Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)},Blockly.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==Blockly.inputTypes.DUMMY&&this.inputList[e].type==Blockly.inputTypes.DUMMY)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==Blockly.inputTypes.VALUE&&this.inputList[e].type==Blockly.inputTypes.DUMMY)return!0;return!1},Blockly.Block.prototype.setStartHat=function(e){this.startHat!=e&&(this.startHat=e)},Blockly.Block.prototype.getStartHat=function(){return this.startHat},Blockly.Block.prototype.setOutputShape=function(e){this.outputShape_=e},Blockly.Block.prototype.getOutputShape=function(){return this.outputShape_},Blockly.Block.prototype.isEnabled=function(){return!this.disabled},Blockly.Block.prototype.setEnabled=function(e){this.isEnabled()!=e&&(Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BLOCK_CHANGE))(this,"disabled",null,this.disabled,!e)),this.disabled=!e)},Blockly.Block.prototype.getInheritedDisabled=function(){for(var e=this.getSurroundParent();e;){if(e.disabled)return!0;e=e.getSurroundParent()}return!1},Blockly.Block.prototype.isCollapsed=function(){return this.collapsed_},Blockly.Block.prototype.setCollapsed=function(e){this.collapsed_!=e&&(Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)},Blockly.Block.prototype.toString=function(e,t,n){function o(e){var t=e.getCheck();return!t&&e.targetConnection&&(t=e.targetConnection.getCheck()),!!t&&(-1!=t.indexOf("Boolean")||-1!=t.indexOf("Number"))}function r(){s&&s.getType()==a.getType()&&s.getLocation()==a.getLocation()&&(s=null)}n=[],t=t||"?";var i=Blockly.ASTNode.NAVIGATE_ALL_FIELDS;Blockly.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var s=Blockly.ASTNode.createBlockNode(this),a=s;s;){switch(s.getType()){case Blockly.ASTNode.types.INPUT:var l=s.getLocation();s.in()?o(l)&&n.push("("):n.push(t);break;case Blockly.ASTNode.types.FIELD:(l=s.getLocation()).name!=Blockly.constants.COLLAPSED_FIELD_NAME&&n.push(l.getText())}if(!(s=(l=s).in()||l.next())){for(s=l.out(),r();s&&!s.next();)s=s.out(),r(),s&&s.getType()==Blockly.ASTNode.types.INPUT&&o(s.getLocation())&&n.push(")");s&&(s=s.next())}}for(Blockly.ASTNode.NAVIGATE_ALL_FIELDS=i,t=2;t<n.length;t++)"("==n[t-2]&&")"==n[t]&&(n[t-2]=n[t-1],n.splice(t-1,2));return n=(n=n.reduce((function(e,t){return e+("("==e.substr(-1)||")"==t?"":" ")+t}),"")).trim()||"???",e&&n.length>e&&(n=n.substring(0,e-3)+"..."),n},Blockly.Block.prototype.appendValueInput=function(e){return this.appendInput_(Blockly.inputTypes.VALUE,e)},Blockly.Block.prototype.appendStatementInput=function(e){return this.appendInput_(Blockly.inputTypes.STATEMENT,e)},Blockly.Block.prototype.appendDummyInput=function(e){return this.appendInput_(Blockly.inputTypes.DUMMY,e||"")},Blockly.Block.prototype.jsonInit=function(e){var t=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(t+"Must not have both an output and a previousStatement.");if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(t+"Must not have both a colour and a style.");e.style?this.jsonInitStyle_(e,t):this.jsonInitColour_(e,t);for(var n=0;void 0!==e["message"+n];)this.interpolate_(e["message"+n],e["args"+n]||[],e["lastDummyAlign"+n],t),n++;if(void 0!==e.inputsInline&&this.setInputsInline(e.inputsInline),void 0!==e.startHat&&this.setStartHat(e.startHat),void 0!==e.output&&this.setOutput(!0,e.output),void 0!==e.outputShape&&this.setOutputShape(e.outputShape),void 0!==e.previousStatement&&this.setPreviousStatement(!0,e.previousStatement),void 0!==e.nextStatement&&this.setNextStatement(!0,e.nextStatement),void 0!==e.tooltip&&(n=e.tooltip,n=Blockly.utils.replaceMessageReferences(n),this.setTooltip(n)),void 0!==e.enableContextMenu&&(n=e.enableContextMenu,this.contextMenu=!!n),void 0!==e.helpUrl&&(n=e.helpUrl,n=Blockly.utils.replaceMessageReferences(n),this.setHelpUrl(n)),"string"==typeof e.extensions&&(console.warn(t+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),void 0!==e.mutator&&Blockly.Extensions.apply(e.mutator,this,!0),t=e.extensions,Array.isArray(t))for(n=0;n<t.length;++n)Blockly.Extensions.apply(t[n],this,!1);void 0!==e.outputShape&&this.setOutputShape(e.outputShape),void 0!==e.category&&this.setCategory(e.category)},Blockly.Block.prototype.setColourFromRawValues_=function(e,t,n){e=goog.isString(e)?Blockly.utils.replaceMessageReferences(e):e,t=goog.isString(t)?Blockly.utils.replaceMessageReferences(t):t,n=goog.isString(n)?Blockly.utils.replaceMessageReferences(n):n,this.setColour(e,t,n)},Blockly.Block.prototype.jsonInitColour_=function(e,t){if("colour"in e)if(void 0===e.colour)console.warn(t+"Undefined colour value.");else{var n=e.colour;try{this.setColourFromRawValues_(n,e.colourSecondary,e.colourTertiary)}catch(e){console.warn(t+"Illegal colour value: ",n)}}},Blockly.Block.prototype.jsonInitStyle_=function(e,t){e=e.style;try{this.setStyle(e)}catch(n){console.warn(t+"Style does not exist: ",e)}},Blockly.Block.prototype.mixin=function(e,t){if(void 0!==t&&"boolean"!=typeof t)throw Error("opt_disableCheck must be a boolean if provided");if(!t){for(var n in t=[],e)void 0!==this[n]&&t.push(n);if(t.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(t))}Blockly.utils.object.mixin(this,e)},Blockly.Block.prototype.interpolate_=function(e,t,n,o){e=Blockly.utils.tokenizeInterpolation(e),this.validateTokens_(e,t.length),t=this.interpolateArguments_(e,t,n),n=[],e=0;for(var r;r=t[e];e++)if(this.isInputKeyword_(r.type)){if(r=this.inputFromJson_(r,o)){for(var i,s=0;i=n[s];s++)r.appendField(i[0],i[1]);n.length=0}}else(s=this.fieldFromJson_(r))&&n.push([s,r.name])},Blockly.Block.prototype.validateTokens_=function(e,t){for(var n=[],o=0,r=0;r<e.length;r++){var i=e[r];if("number"==typeof i){if(1>i||i>t)throw Error('Block "'+this.type+'": Message index %'+i+" out of range.");if(n[i])throw Error('Block "'+this.type+'": Message index %'+i+" duplicated.");n[i]=!0,o++}}if(o!=t)throw Error('Block "'+this.type+'": Message does not reference all '+t+" arg(s).")},Blockly.Block.prototype.interpolateArguments_=function(e,t,n){for(var o=[],r=0;r<e.length;r++){var i=e[r];"number"==typeof i&&(i=t[i-1]),("string"!=typeof i||(i=this.stringToFieldJson_(i)))&&o.push(i)}return(e=o.length)&&!this.isInputKeyword_(o[e-1].type)&&(e={type:"input_dummy"},n&&(e.align=n),o.push(e)),o},Blockly.Block.prototype.fieldFromJson_=function(e){var t=Blockly.fieldRegistry.fromJson(e);return!t&&e.alt?"string"==typeof e.alt?(e=this.stringToFieldJson_(e.alt))?this.fieldFromJson_(e):null:this.fieldFromJson_(e.alt):t},Blockly.Block.prototype.inputFromJson_=function(e,t){var n={LEFT:Blockly.constants.ALIGN.LEFT,RIGHT:Blockly.constants.ALIGN.RIGHT,CENTRE:Blockly.constants.ALIGN.CENTRE,CENTER:Blockly.constants.ALIGN.CENTRE},o=null;switch(e.type){case"input_value":o=this.appendValueInput(e.name);break;case"input_statement":o=this.appendStatementInput(e.name);break;case"input_dummy":o=this.appendDummyInput(e.name)}return o?(e.check&&o.setCheck(e.check),e.align&&(void 0===(n=n[e.align.toUpperCase()])?console.warn(t+"Illegal align value: ",e.align):o.setAlign(n)),o):null},Blockly.Block.prototype.isInputKeyword_=function(e){return"input_value"==e||"input_statement"==e||"input_dummy"==e},Blockly.Block.prototype.stringToFieldJson_=function(e){return(e=e.trim())?{type:"field_label",text:e}:null},Blockly.Block.prototype.appendInput_=function(e,t){var n=null;return e!=Blockly.inputTypes.VALUE&&e!=Blockly.inputTypes.STATEMENT||(n=this.makeConnection_(e)),e==Blockly.inputTypes.STATEMENT&&this.statementInputCount++,e=new Blockly.Input(e,t,this,n),this.inputList.push(e),e},Blockly.Block.prototype.moveInputBefore=function(e,t){if(e!=t){for(var n,o=-1,r=t?-1:this.inputList.length,i=0;n=this.inputList[i];i++)if(n.name==e){if(o=i,-1!=r)break}else if(t&&n.name==t&&(r=i,-1!=o))break;if(-1==o)throw Error('Named input "'+e+'" not found.');if(-1==r)throw Error('Reference input "'+t+'" not found.');this.moveNumberedInputBefore(o,r)}},Blockly.Block.prototype.moveNumberedInputBefore=function(e,t){if(e==t)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(t>this.inputList.length)throw RangeError("Reference input "+t+" out of bounds.");var n=this.inputList[e];this.inputList.splice(e,1),e<t&&t--,this.inputList.splice(t,0,n)},Blockly.Block.prototype.removeInput=function(e,t){for(var n,o=0;n=this.inputList[o];o++)if(n.name==e)return n.type==Blockly.inputTypes.STATEMENT&&this.statementInputCount--,n.dispose(),this.inputList.splice(o,1),!0;if(t)return!1;throw Error("Input not found: "+e)},Blockly.Block.prototype.getInput=function(e){for(var t,n=0;t=this.inputList[n];n++)if(t.name==e)return t;return null},Blockly.Block.prototype.getInputTargetBlock=function(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()},Blockly.Block.prototype.getCommentText=function(){return this.commentModel.text},Blockly.Block.prototype.setCommentText=function(e){this.commentModel.text!=e&&(Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BLOCK_CHANGE))(this,"comment",null,this.commentModel.text,e)),this.comment=this.commentModel.text=e)},Blockly.Block.prototype.enableBreakpoint=function(e){var t=!1;e?(this.breakpoint||(this.breakpoint=new Blockly.Breakpoint(this),t=!0),this.breakpoint.setVisible(this.isBreakpointSet())):this.breakpoint&&(this.breakpoint.dispose(),t=!0),t&&Blockly.Events.fire(new Blockly.Events.BlockChange(this,"breakpoint",null,!e,e))},Blockly.Block.prototype.isBreakpointSet=function(){return this.breakpointSet_||!1},Blockly.Block.prototype.setBreakpoint=function(e){this.breakpointSet_=e},Blockly.Block.prototype.setOutputShape=function(e){this.outputShape_=e},Blockly.Block.prototype.getOutputShape=function(){return this.outputShape_||Blockly.OUTPUT_SHAPE_ROUND},Blockly.Block.prototype.setCategory=function(e){this.category_=e},Blockly.Block.prototype.getCategory=function(){return this.category_},Blockly.Block.prototype.setWarningText=function(e,t){},Blockly.Block.prototype.setMutator=function(e){},Blockly.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},Blockly.Block.prototype.moveBy=function(e,t){if(this.parentBlock_)throw Error("Block has parent.");var n=new(Blockly.Events.get(Blockly.Events.BLOCK_MOVE))(this);this.xy_.translate(e,t),n.recordNew(),Blockly.Events.fire(n)},Blockly.Block.prototype.makeConnection_=function(e){return new Blockly.Connection(this,e)},Blockly.Block.prototype.allInputsFilled=function(e){if(void 0===e&&(e=!0),!e&&this.isShadow())return!1;for(var t,n=0;t=this.inputList[n];n++)if(t.connection&&(!(t=t.connection.targetBlock())||!t.allInputsFilled(e)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(e)},Blockly.Block.prototype.toDevString=function(){var e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e},Blockly.Block.prototype.onLoadedIntoWorkspace=function(){for(var e,t=0;e=this.inputList[t];t++)for(var n,o=0;n=e.fieldRow[o];o++)n.onLoadedIntoWorkspace&&n.onLoadedIntoWorkspace()},Blockly.blockRendering.IPathObject=function(e,t){},Blockly.utils.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},Blockly.Menu=function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null},Blockly.Menu.prototype.addChild=function(e){this.menuItems_.push(e)},Blockly.Menu.prototype.render=function(e){var t=document.createElement("div");t.className="blocklyMenu goog-menu blocklyNonSelectable",t.tabIndex=0,this.roleName_&&Blockly.utils.aria.setRole(t,this.roleName_),this.element_=t;for(var n,o=0;n=this.menuItems_[o];o++)t.appendChild(n.createDom());this.mouseOverHandler_=Blockly.browserEvents.conditionalBind(t,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=Blockly.browserEvents.conditionalBind(t,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=Blockly.browserEvents.conditionalBind(t,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=Blockly.browserEvents.conditionalBind(t,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=Blockly.browserEvents.conditionalBind(t,"keydown",this,this.handleKeyEvent_),e.appendChild(t)},Blockly.Menu.prototype.getElement=function(){return this.element_},Blockly.Menu.prototype.focus=function(){var e=this.getElement();e&&(e.focus({preventScroll:!0}),Blockly.utils.dom.addClass(e,"blocklyFocused"))},Blockly.Menu.prototype.blur_=function(){var e=this.getElement();e&&(e.blur(),Blockly.utils.dom.removeClass(e,"blocklyFocused"))},Blockly.Menu.prototype.setRole=function(e){this.roleName_=e},Blockly.Menu.prototype.dispose=function(){this.mouseOverHandler_&&(Blockly.browserEvents.unbind(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&(Blockly.browserEvents.unbind(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&(Blockly.browserEvents.unbind(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&(Blockly.browserEvents.unbind(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&(Blockly.browserEvents.unbind(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var e,t=0;e=this.menuItems_[t];t++)e.dispose();this.element_=null},Blockly.Menu.prototype.getMenuItem_=function(e){for(var t=this.getElement();e&&e!=t;){if(Blockly.utils.dom.hasClass(e,"blocklyMenuItem"))for(var n,o=0;n=this.menuItems_[o];o++)if(n.getElement()==e)return n;e=e.parentElement}return null},Blockly.Menu.prototype.setHighlighted=function(e){var t=this.highlightedItem_;t&&(t.setHighlighted(!1),this.highlightedItem_=null),e&&(e.setHighlighted(!0),this.highlightedItem_=e,t=this.getElement(),Blockly.utils.style.scrollIntoContainerView(e.getElement(),t),Blockly.utils.aria.setState(t,Blockly.utils.aria.State.ACTIVEDESCENDANT,e.getId()))},Blockly.Menu.prototype.highlightNext=function(){var e=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(e,1)},Blockly.Menu.prototype.highlightPrevious=function(){var e=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>e?this.menuItems_.length:e,-1)},Blockly.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},Blockly.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},Blockly.Menu.prototype.highlightHelper_=function(e,t){e+=t;for(var n;n=this.menuItems_[e];){if(n.isEnabled()){this.setHighlighted(n);break}e+=t}},Blockly.Menu.prototype.handleMouseOver_=function(e){(e=this.getMenuItem_(e.target))&&(e.isEnabled()?this.highlightedItem_!=e&&this.setHighlighted(e):this.setHighlighted(null))},Blockly.Menu.prototype.handleClick_=function(e){var t=this.openingCoords;if(this.openingCoords=null,t&&"number"==typeof e.clientX){var n=new Blockly.utils.Coordinate(e.clientX,e.clientY);if(1>Blockly.utils.Coordinate.distance(t,n))return}(e=this.getMenuItem_(e.target))&&e.performAction()},Blockly.Menu.prototype.handleMouseEnter_=function(e){this.focus()},Blockly.Menu.prototype.handleMouseLeave_=function(e){this.getElement()&&(this.blur_(),this.setHighlighted(null))},Blockly.Menu.prototype.handleKeyEvent_=function(e){if(this.menuItems_.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var t=this.highlightedItem_;switch(e.keyCode){case Blockly.utils.KeyCodes.ENTER:case Blockly.utils.KeyCodes.SPACE:t&&t.performAction();break;case Blockly.utils.KeyCodes.UP:this.highlightPrevious();break;case Blockly.utils.KeyCodes.DOWN:this.highlightNext();break;case Blockly.utils.KeyCodes.PAGE_UP:case Blockly.utils.KeyCodes.HOME:this.highlightFirst_();break;case Blockly.utils.KeyCodes.PAGE_DOWN:case Blockly.utils.KeyCodes.END:this.highlightLast_();break;default:return}e.preventDefault(),e.stopPropagation()}},Blockly.Menu.prototype.getSize=function(){var e=this.getElement(),t=Blockly.utils.style.getSize(e);return t.height=e.scrollHeight,t},Blockly.MenuItem=function(e,t){this.content_=e,this.value_=t,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null},Blockly.MenuItem.prototype.createDom=function(){var e=document.createElement("div");e.id=Blockly.utils.IdGenerator.getNextUniqueId(),this.element_=e,e.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var t=document.createElement("div");if(t.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var n=document.createElement("div");n.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",t.appendChild(n)}return n=this.content_,"string"==typeof this.content_&&(n=document.createTextNode(this.content_)),t.appendChild(n),e.appendChild(t),this.roleName_&&Blockly.utils.aria.setRole(e,this.roleName_),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.SELECTED,this.checkable_&&this.checked_||!1),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.DISABLED,!this.enabled_),e},Blockly.MenuItem.prototype.dispose=function(){this.element_=null},Blockly.MenuItem.prototype.getElement=function(){return this.element_},Blockly.MenuItem.prototype.getId=function(){return this.element_.id},Blockly.MenuItem.prototype.getValue=function(){return this.value_},Blockly.MenuItem.prototype.setRightToLeft=function(e){this.rightToLeft_=e},Blockly.MenuItem.prototype.setRole=function(e){this.roleName_=e},Blockly.MenuItem.prototype.setCheckable=function(e){this.checkable_=e},Blockly.MenuItem.prototype.setChecked=function(e){this.checked_=e},Blockly.MenuItem.prototype.setHighlighted=function(e){this.highlight_=e;var t=this.getElement();t&&this.isEnabled()&&(e?(Blockly.utils.dom.addClass(t,"blocklyMenuItemHighlight"),Blockly.utils.dom.addClass(t,"goog-menuitem-highlight")):(Blockly.utils.dom.removeClass(t,"blocklyMenuItemHighlight"),Blockly.utils.dom.removeClass(t,"goog-menuitem-highlight")))},Blockly.MenuItem.prototype.isEnabled=function(){return this.enabled_},Blockly.MenuItem.prototype.setEnabled=function(e){this.enabled_=e},Blockly.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},Blockly.MenuItem.prototype.onAction=function(e,t){this.actionHandler_=e.bind(t)},goog.debug={},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(e,t){goog.debug.Error.call(this,goog.asserts.subs_(e,t)),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(e,t){for(var n="",o=(e=e.split("%s")).length-1,r=0;r<o;r++)n+=e[r]+(r<t.length?t[r]:"%s");return n+e[o]},goog.asserts.doAssertFailure_=function(e,t,n,o){var r="Assertion failed";if(n){r+=": "+n;var i=o}else e&&(r+=": "+e,i=t);e=new goog.asserts.AssertionError(""+r,i||[]),goog.asserts.errorHandler_(e)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertExists=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&null==e&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&"number"!=typeof e&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&"string"!=typeof e&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&"boolean"!=typeof e&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,n,o){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],n,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertFinite=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||"number"==typeof e&&isFinite(e)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:0>n?Math.max(0,e.length+n):n,"string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,n);for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.lastIndexOf.call(e,t,null==n?e.length-1:n)}:function(e,t,n){if(0>(n=null==n?e.length-1:n)&&(n=Math.max(0,e.length+n)),"string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.lastIndexOf(t,n);for(;0<=n;n--)if(n in e&&e[n]===t)return n;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,n){goog.asserts.assert(null!=e.length),Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var o=e.length,r="string"==typeof e?e.split(""):e,i=0;i<o;i++)i in r&&t.call(n,r[i],i,e)},goog.array.forEachRight=function(e,t,n){var o=e.length,r="string"==typeof e?e.split(""):e;for(--o;0<=o;--o)o in r&&t.call(n,r[o],o,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.filter.call(e,t,n)}:function(e,t,n){for(var o=e.length,r=[],i=0,s="string"==typeof e?e.split(""):e,a=0;a<o;a++)if(a in s){var l=s[a];t.call(n,l,a,e)&&(r[i++]=l)}return r},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.map.call(e,t,n)}:function(e,t,n){for(var o=e.length,r=Array(o),i="string"==typeof e?e.split(""):e,s=0;s<o;s++)s in i&&(r[s]=t.call(n,i[s],s,e));return r},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,n,o){return goog.asserts.assert(null!=e.length),o&&(t=goog.bind(t,o)),Array.prototype.reduce.call(e,t,n)}:function(e,t,n,o){var r=n;return goog.array.forEach(e,(function(n,i){r=t.call(o,r,n,i,e)})),r},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,n,o){return goog.asserts.assert(null!=e.length),goog.asserts.assert(null!=t),o&&(t=goog.bind(t,o)),Array.prototype.reduceRight.call(e,t,n)}:function(e,t,n,o){var r=n;return goog.array.forEachRight(e,(function(n,i){r=t.call(o,r,n,i,e)})),r},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.some.call(e,t,n)}:function(e,t,n){for(var o=e.length,r="string"==typeof e?e.split(""):e,i=0;i<o;i++)if(i in r&&t.call(n,r[i],i,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.every.call(e,t,n)}:function(e,t,n){for(var o=e.length,r="string"==typeof e?e.split(""):e,i=0;i<o;i++)if(i in r&&!t.call(n,r[i],i,e))return!1;return!0},goog.array.count=function(e,t,n){var o=0;return goog.array.forEach(e,(function(e,r,i){t.call(n,e,r,i)&&++o}),n),o},goog.array.find=function(e,t,n){return 0>(t=goog.array.findIndex(e,t,n))?null:"string"==typeof e?e.charAt(t):e[t]},goog.array.findIndex=function(e,t,n){for(var o=e.length,r="string"==typeof e?e.split(""):e,i=0;i<o;i++)if(i in r&&t.call(n,r[i],i,e))return i;return-1},goog.array.findRight=function(e,t,n){return 0>(t=goog.array.findIndexRight(e,t,n))?null:"string"==typeof e?e.charAt(t):e[t]},goog.array.findIndexRight=function(e,t,n){var o=e.length,r="string"==typeof e?e.split(""):e;for(--o;0<=o;o--)if(o in r&&t.call(n,r[o],o,e))return o;return-1},goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!goog.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,n){goog.array.splice(e,n,0,t)},goog.array.insertArrayAt=function(e,t,n){goog.partial(goog.array.splice,e,n,0).apply(null,t)},goog.array.insertBefore=function(e,t,n){var o;2==arguments.length||0>(o=goog.array.indexOf(e,n))?e.push(t):goog.array.insertAt(e,t,o)},goog.array.remove=function(e,t){var n;return(n=0<=(t=goog.array.indexOf(e,t)))&&goog.array.removeAt(e,t),n},goog.array.removeLast=function(e,t){return 0<=(t=goog.array.lastIndexOf(e,t))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,n){return 0<=(t=goog.array.findIndex(e,t,n))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAllIf=function(e,t,n){var o=0;return goog.array.forEachRight(e,(function(r,i){t.call(n,r,i,e)&&goog.array.removeAt(e,i)&&o++})),o},goog.array.concat=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(e){var t=e.length;if(0<t){for(var n=Array(t),o=0;o<t;o++)n[o]=e[o];return n}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var n=1;n<arguments.length;n++){var o=arguments[n];if(goog.isArrayLike(o)){var r=e.length||0,i=o.length||0;e.length=r+i;for(var s=0;s<i;s++)e[r+s]=o[s]}else e.push(o)}},goog.array.splice=function(e,t,n,o){return goog.asserts.assert(null!=e.length),Array.prototype.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,n){return goog.asserts.assert(null!=e.length),2>=arguments.length?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)},goog.array.removeDuplicates=function(e,t,n){t=t||e;var o=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};n=n||o,o={};for(var r=0,i=0;i<e.length;){var s=e[i++],a=n(s);Object.prototype.hasOwnProperty.call(o,a)||(o[a]=!0,t[r++]=s)}t.length=r},goog.array.binarySearch=function(e,t,n){return goog.array.binarySearch_(e,n||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,n){return goog.array.binarySearch_(e,t,!0,void 0,n)},goog.array.binarySearch_=function(e,t,n,o,r){for(var i,s=0,a=e.length;s<a;){var l=s+(a-s>>>1),c=n?t.call(r,e[l],l,e):t(o,e[l]);0<c?s=l+1:(a=l,i=!c)}return i?s:-s-1},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){for(var n=Array(e.length),o=0;o<e.length;o++)n[o]={index:o,value:e[o]};var r=t||goog.array.defaultCompare;for(goog.array.sort(n,(function(e,t){return r(e.value,t.value)||e.index-t.index})),o=0;o<e.length;o++)e[o]=n[o].value},goog.array.sortByKey=function(e,t,n){var o=n||goog.array.defaultCompare;goog.array.sort(e,(function(e,n){return o(t(e),t(n))}))},goog.array.sortObjectsByKey=function(e,t,n){goog.array.sortByKey(e,(function(e){return e[t]}),n)},goog.array.isSorted=function(e,t,n){t=t||goog.array.defaultCompare;for(var o=1;o<e.length;o++){var r=t(e[o-1],e[o]);if(0<r||0==r&&n)return!1}return!0},goog.array.equals=function(e,t,n){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var o=e.length;n=n||goog.array.defaultCompareEquality;for(var r=0;r<o;r++)if(!n(e[r],t[r]))return!1;return!0},goog.array.compare3=function(e,t,n){n=n||goog.array.defaultCompare;for(var o=Math.min(e.length,t.length),r=0;r<o;r++){var i=n(e[r],t[r]);if(0!=i)return i}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return e>t?1:e<t?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,n){return 0>(n=goog.array.binarySearch(e,t,n))&&(goog.array.insertAt(e,t,-(n+1)),!0)},goog.array.binaryRemove=function(e,t,n){return 0<=(t=goog.array.binarySearch(e,t,n))&&goog.array.removeAt(e,t)},goog.array.bucket=function(e,t,n){for(var o={},r=0;r<e.length;r++){var i=e[r],s=t.call(n,i,r,e);void 0!==s&&(o[s]||(o[s]=[])).push(i)}return o},goog.array.toObject=function(e,t,n){var o={};return goog.array.forEach(e,(function(r,i){o[t.call(n,r,i,e)]=r})),o},goog.array.range=function(e,t,n){var o=[],r=0,i=e;if(void 0!==t&&(r=e,i=t),0>(n=n||1)*(i-r))return[];if(0<n)for(e=r;e<i;e+=n)o.push(e);else for(e=r;e>i;e+=n)o.push(e);return o},goog.array.repeat=function(e,t){for(var n=[],o=0;o<t;o++)n[o]=e;return n},goog.array.flatten=function(e){for(var t=[],n=0;n<arguments.length;n++){var o=arguments[n];if(goog.isArray(o))for(var r=0;r<o.length;r+=8192){var i=goog.array.slice(o,r,r+8192);i=goog.array.flatten.apply(null,i);for(var s=0;s<i.length;s++)t.push(i[s])}else t.push(o)}return t},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(0<(t%=e.length)?Array.prototype.unshift.apply(e,e.splice(-t,t)):0>t&&Array.prototype.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,n){goog.asserts.assert(0<=t&&t<e.length),goog.asserts.assert(0<=n&&n<e.length),t=Array.prototype.splice.call(e,t,1),Array.prototype.splice.call(e,n,0,t[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],n=arguments[0].length,o=1;o<arguments.length;o++)arguments[o].length<n&&(n=arguments[o].length);for(o=0;o<n;o++){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i][o]);t.push(r)}return t},goog.array.shuffle=function(e,t){t=t||Math.random;for(var n=e.length-1;0<n;n--){var o=Math.floor(t()*(n+1)),r=e[n];e[n]=e[o],e[o]=r}},goog.array.copyByIndex=function(e,t){var n=[];return goog.array.forEach(t,(function(t){n.push(e[t])})),n},goog.array.concatMap=function(e,t,n){return goog.array.concat.apply([],goog.array.map(e,t,n))},goog.string={},goog.string.internal={},goog.string.internal.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.internal.endsWith=function(e,t){var n=e.length-t.length;return 0<=n&&e.indexOf(t,n)==n},goog.string.internal.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.internal.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.internal.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.internal.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},goog.string.internal.caseInsensitiveCompare=function(e,t){return(e=String(e).toLowerCase())<(t=String(t).toLowerCase())?-1:e==t?0:1},goog.string.internal.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.internal.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.internal.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.internal.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.internal.GT_RE_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(goog.string.internal.QUOT_RE_,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(goog.string.internal.NULL_RE_,"&#0;"))}return e},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(e,t){return goog.string.internal.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.internal.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.internal.caseInsensitiveContains=function(e,t){return goog.string.internal.contains(e.toLowerCase(),t.toLowerCase())},goog.string.internal.compareVersions=function(e,t){var n=0;e=goog.string.internal.trim(String(e)).split("."),t=goog.string.internal.trim(String(t)).split(".");for(var o=Math.max(e.length,t.length),r=0;0==n&&r<o;r++){var i=e[r]||"",s=t[r]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=0==i[1].length?0:parseInt(i[1],10);var a=0==s[1].length?0:parseInt(s[1],10);n=goog.string.internal.compareElements_(n,a)||goog.string.internal.compareElements_(0==i[2].length,0==s[2].length)||goog.string.internal.compareElements_(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return n},goog.string.internal.compareElements_=function(e,t){return e<t?-1:e>t?1:0},goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return e&&(e=e.userAgent)?e:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,n=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,o=[];t=n.exec(e);)o.push([t[1],t[2],t[3]||void 0]);return o},goog.object={},goog.object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},goog.object.forEach=function(e,t,n){for(var o in e)t.call(n,e[o],o,e)},goog.object.filter=function(e,t,n){var o,r={};for(o in e)t.call(n,e[o],o,e)&&(r[o]=e[o]);return r},goog.object.map=function(e,t,n){var o,r={};for(o in e)r[o]=t.call(n,e[o],o,e);return r},goog.object.some=function(e,t,n){for(var o in e)if(t.call(n,e[o],o,e))return!0;return!1},goog.object.every=function(e,t,n){for(var o in e)if(!t.call(n,e[o],o,e))return!1;return!0},goog.object.getCount=function(e){var t,n=0;for(t in e)n++;return n},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,n=[],o=0;for(t in e)n[o++]=e[t];return n},goog.object.getKeys=function(e){var t,n=[],o=0;for(t in e)n[o++]=t;return n},goog.object.getValueByKeys=function(e,t){var n=goog.isArrayLike(t),o=n?t:arguments;for(n=n?0:1;n<o.length;n++){if(null==e)return;e=e[o[n]]}return e},goog.object.containsKey=function(e,t){return null!==e&&t in e},goog.object.containsValue=function(e,t){for(var n in e)if(e[n]==t)return!0;return!1},goog.object.findKey=function(e,t,n){for(var o in e)if(t.call(n,e[o],o,e))return o},goog.object.findValue=function(e,t,n){return(t=goog.object.findKey(e,t,n))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var n;return(n=t in e)&&delete e[t],n},goog.object.add=function(e,t,n){if(null!==e&&t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,n)},goog.object.get=function(e,t,n){return null!==e&&t in e?e[t]:n},goog.object.set=function(e,t,n){e[t]=n},goog.object.setIfUndefined=function(e,t,n){return t in e?e[t]:e[t]=n},goog.object.setWithReturnValueIfNotSet=function(e,t,n){return t in e?e[t]:(n=n(),e[t]=n)},goog.object.equals=function(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1;for(var o in t)if(!(o in e))return!1;return!0},goog.object.clone=function(e){var t,n={};for(t in e)n[t]=e[t];return n},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(goog.isFunction(e.clone))return e.clone();for(var n in t="array"==t?[]:{},e)t[n]=goog.object.unsafeClone(e[n]);return t}return e},goog.object.transpose=function(e){var t,n={};for(t in e)n[e[t]]=t;return n},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var n,o,r=1;r<arguments.length;r++){for(n in o=arguments[r])e[n]=o[n];for(var i=0;i<goog.object.PROTOTYPE_FIELDS_.length;i++)n=goog.object.PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var n={},o=0;o<t;o+=2)n[arguments[o]]=arguments[o+1];return n},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var n={},o=0;o<t;o++)n[arguments[o]]=!0;return n},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.object.getAllPropertyNames=function(e,t,n){if(!e)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(e);for(var o={};e&&(e!==Object.prototype||t)&&(e!==Function.prototype||n);){for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++)o[r[i]]=!0;e=Object.getPrototypeOf(e)}return goog.object.getKeys(o)},goog.object.getSuperClass=function(e){return(e=Object.getPrototypeOf(e.prototype))&&e.constructor},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){return e=goog.array.find(e,o),n[e]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);t=goog.labs.userAgent.util.extractVersionTuples(t);var n={};goog.array.forEach(t,(function(e){n[e[0]]=e[1]}));var o=goog.partial(goog.object.containsKey,n);return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?e(["Edg"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS"]):(t=t[2])&&t[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),e)},goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];t="";var n=/MSIE +([\d\.]+)/.exec(e);if(n&&n[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==n[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=n[1];return t},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(e){if(goog.asserts.ENABLE_ASSERTS){var t=goog.dom.asserts.getWindow_(e);t&&(!e||!(e instanceof t.Location)&&e instanceof t.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(e))}return e},goog.dom.asserts.assertIsElementType_=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var n=goog.dom.asserts.getWindow_(e);n&&void 0!==n[t]&&(e&&(e instanceof n[t]||!(e instanceof n.Location||e instanceof n.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,goog.dom.asserts.debugStringForType_(e)))}return e},goog.dom.asserts.assertIsHTMLAnchorElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(e){if(!goog.isObject(e))return void 0===e?"undefined":null===e?"null":typeof e;try{return e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(e){try{var t=e&&e.ownerDocument,n=t&&(t.defaultView||t.parentWindow);if((n=n||goog.global).Element&&n.Location)return n}catch(e){}return null},goog.functions={},goog.functions.constant=function(e){return function(){return e}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(e,t){return e},goog.functions.error=function(e){return function(){throw Error(e)}},goog.functions.fail=function(e){return function(){throw e}},goog.functions.lock=function(e,t){return t=t||0,function(){return e.apply(this,Array.prototype.slice.call(arguments,0,t))}},goog.functions.nth=function(e){return function(){return arguments[e]}},goog.functions.partialRight=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=Array.prototype.slice.call(arguments);return t.push.apply(t,n),e.apply(this,t)}},goog.functions.withReturnValue=function(e,t){return goog.functions.sequence(e,goog.functions.constant(t))},goog.functions.equalTo=function(e,t){return function(n){return t?e==n:e===n}},goog.functions.compose=function(e,t){var n=arguments,o=n.length;return function(){var e;o&&(e=n[o-1].apply(this,arguments));for(var t=o-2;0<=t;t--)e=n[t].call(this,e);return e}},goog.functions.sequence=function(e){var t=arguments,n=t.length;return function(){for(var e,o=0;o<n;o++)e=t[o].apply(this,arguments);return e}},goog.functions.and=function(e){var t=arguments,n=t.length;return function(){for(var e=0;e<n;e++)if(!t[e].apply(this,arguments))return!1;return!0}},goog.functions.or=function(e){var t=arguments,n=t.length;return function(){for(var e=0;e<n;e++)if(t[e].apply(this,arguments))return!0;return!1}},goog.functions.not=function(e){return function(){return!e.apply(this,arguments)}},goog.functions.create=function(e,t){var n=function(){};return n.prototype=e.prototype,n=new n,e.apply(n,Array.prototype.slice.call(arguments,1)),n},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(e){var t,n=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(n||(t=e(),n=!0),t):e()}},goog.functions.once=function(e){var t=e;return function(){if(t){var e=t;t=null,e()}}},goog.functions.debounce=function(e,t,n){var o=0;return function(r){goog.global.clearTimeout(o);var i=arguments;o=goog.global.setTimeout((function(){e.apply(n,i)}),t)}},goog.functions.throttle=function(e,t,n){var o=0,r=!1,i=[],s=function(){o=0,r&&(r=!1,a())},a=function(){o=goog.global.setTimeout(s,t),e.apply(n,i)};return function(e){i=arguments,o?r=!0:a()}},goog.functions.rateLimit=function(e,t,n){var o=0,r=function(){o=0};return function(i){o||(o=goog.global.setTimeout(r,t),e.apply(n,arguments))}},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(e){this.tagName_=e},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP");goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(e){return!0===goog.dom.tags.VOID_TAGS_[e]},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.string.TypedString=function(){},goog.string.Const=function(e,t){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=e===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(e){return e instanceof goog.string.Const&&e.constructor===goog.string.Const&&e.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?e.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+e+"'"),"type_error:Const")},goog.string.Const.from=function(e){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeScript.fromConstantAndArgs=function(e,t){for(var n=[],o=1;o<arguments.length;o++)n.push(goog.html.SafeScript.stringify_(arguments[o]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(e)+")("+n.join(", ")+");")},goog.html.SafeScript.fromJson=function(e){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(e))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(e){return goog.html.SafeScript.unwrapTrustedScript(e).toString()},goog.html.SafeScript.unwrapTrustedScript=function(e){return e instanceof goog.html.SafeScript&&e.constructor===goog.html.SafeScript&&e.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(e){return JSON.stringify(e).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeScript).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(e):e,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(e){return goog.fs.url.getUrlObject_().createObjectURL(e)},goog.fs.url.revokeObjectUrl=function(e){goog.fs.url.getUrlObject_().revokeObjectURL(e)},goog.fs.url.getUrlObject_=function(){var e=goog.fs.url.findUrlObject_();if(null!=e)return e;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return void 0!==goog.global.URL&&void 0!==goog.global.URL.createObjectURL?goog.global.URL:void 0!==goog.global.webkitURL&&void 0!==goog.global.webkitURL.createObjectURL?goog.global.webkitURL:void 0!==goog.global.createObjectURL?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return null!=goog.fs.url.findUrlObject_()},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||3<=goog.LOCALE.length&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))||7<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))&&("adlm"==goog.LOCALE.substring(3,7).toLowerCase()||"arab"==goog.LOCALE.substring(3,7).toLowerCase()||"hebr"==goog.LOCALE.substring(3,7).toLowerCase()||"nkoo"==goog.LOCALE.substring(3,7).toLowerCase()||"rohg"==goog.LOCALE.substring(3,7).toLowerCase()||"thaa"==goog.LOCALE.substring(3,7).toLowerCase())||8<=goog.LOCALE.length&&("-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4))&&("adlm"==goog.LOCALE.substring(4,8).toLowerCase()||"arab"==goog.LOCALE.substring(4,8).toLowerCase()||"hebr"==goog.LOCALE.substring(4,8).toLowerCase()||"nkoo"==goog.LOCALE.substring(4,8).toLowerCase()||"rohg"==goog.LOCALE.substring(4,8).toLowerCase()||"thaa"==goog.LOCALE.substring(4,8).toLowerCase()),goog.i18n.bidi.Format={LRE:"",RLE:"",PDF:"",LRM:"",RLM:""},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?0<e?goog.i18n.bidi.Dir.LTR:0>e?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z------\ud801\ud804-\ud839\ud83c-\udbff---",goog.i18n.bidi.rtlChars_="--\ud802-\ud803\ud83a-\ud83b--",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)},goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)},goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(e,t){return e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t),goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(e,t){return t=(void 0===t?goog.i18n.bidi.hasAnyRtl(e):t)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,e.replace(goog.i18n.bidi.bracketGuardTextRe_,t+"$&"+t)},goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"},goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"},goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(e,t){var n=0,o=0,r=!1;for(e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),t=0;t<e.length;t++){var i=e[t];goog.i18n.bidi.startsWithRtl(i)?(n++,o++):goog.i18n.bidi.isRequiredLtrRe_.test(i)?r=!0:goog.i18n.bidi.hasAnyLtr(i)?o++:goog.i18n.bidi.hasNumeralsRe_.test(i)&&(r=!0)}return 0==o?r?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:n/o>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t))&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(e,t){switch(goog.i18n.bidi.estimateDirection(t)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(e,t){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=e===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(e,t){var n=goog.html.TrustedResourceUrl.unwrap(this),o=(n=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(n))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(n[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",n[2]||"",e)+goog.html.TrustedResourceUrl.stringifyParams_("#",o,t))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(e){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(e).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(e){return e instanceof goog.html.TrustedResourceUrl&&e.constructor===goog.html.TrustedResourceUrl&&e.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(e,t){var n=goog.string.Const.unwrap(e);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return e=n.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,(function(e,o){if(!Object.prototype.hasOwnProperty.call(t,o))throw Error('Found marker, "'+o+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[o])instanceof goog.string.Const?goog.string.Const.unwrap(e):encodeURIComponent(String(e))})),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(e,t,n,o){return goog.html.TrustedResourceUrl.format(e,t).cloneWithParams(n,o)},goog.html.TrustedResourceUrl.fromConstant=function(e){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.TrustedResourceUrl.fromConstants=function(e){for(var t="",n=0;n<e.length;n++)t+=goog.string.Const.unwrap(e[n]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(e){return e=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(e):e,new goog.html.TrustedResourceUrl(goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.html.TrustedResourceUrl.stringifyParams_=function(e,t,n){if(null==n)return t;if("string"==typeof n)return n?e+encodeURIComponent(n):"";for(var o in n){var r=n[o];r=goog.isArray(r)?r:[r];for(var i=0;i<r.length;i++){var s=r[i];null!=s&&(t||(t=e),t+=(t.length>e.length?"&":"")+encodeURIComponent(o)+"="+encodeURIComponent(String(s)))}}return t},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeUrl=function(e,t){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=e===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&t||"",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(e){return e instanceof goog.html.SafeUrl&&e.constructor===goog.html.SafeUrl&&e.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime))(?:;\w+=(?:\w+|"[\w;=]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(e){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(e)},goog.html.SafeUrl.fromBlob=function(e){return e=goog.html.SAFE_MIME_TYPE_PATTERN_.test(e.type)?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.DATA_URL_PATTERN_=/^data:([^,]*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(e){var t=(e=e.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return t=t&&goog.html.SAFE_MIME_TYPE_PATTERN_.test(t[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t?e:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"tel:")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(e){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(e))||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"fb-messenger://share")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromWhatsAppUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"whatsapp://send")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromSmsUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(e){var t=e.indexOf("#");if(0<t&&(e=e.substring(0,t)),!(t=e.match(/[?&]body=/gi)))return!0;if(1<t.length)return!1;if(!(e=e.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(e)}catch(e){return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(e)},goog.html.SafeUrl.fromSshUrl=function(e){return goog.string.internal.caseInsensitiveStartsWith(e,"ssh://")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(e,t){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,e,t)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(e,t,n){return(e=e.exec(t))?(e=e[1],-1==(n instanceof goog.string.Const?[goog.string.Const.unwrap(n)]:n.map((function(e){return goog.string.Const.unwrap(e)}))).indexOf(e)&&(t=goog.html.SafeUrl.INNOCUOUS_STRING)):t=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeUrl.fromTrustedResourceUrl=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(e))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(e){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SAFE_URL_PATTERN_.test(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(e,t){return e instanceof goog.html.SafeUrl?e:(e="object"==typeof e&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),t&&/^data:/i.test(e)&&(t=goog.html.SafeUrl.fromDataUrl(e)).getTypedStringValue()==e?t:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(e),"%s does not match the safe URL pattern",e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(e){return new goog.html.SafeUrl(goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,e)},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(e,";"),"Last character of style string is not ';': "+e),goog.asserts.assert(goog.string.internal.contains(e,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+e),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(e){return e instanceof goog.html.SafeStyle&&e.constructor===goog.html.SafeStyle&&e.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=e,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(e){var t,n="";for(t in e){if(!/^[-_a-zA-Z0-9]+$/.test(t))throw Error("Name allows only [-_a-zA-Z0-9], got: "+t);var o=e[t];null!=o&&(n+=t+":"+(o=goog.isArray(o)?goog.array.map(o,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(o))+";")}return n?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(n):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(e){if(e instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(e).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(e=e instanceof goog.string.Const?goog.string.Const.unwrap(e):goog.html.SafeStyle.sanitizePropertyValueString_(String(e)),/[{;}]/.test(e))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[e]);return e},goog.html.SafeStyle.sanitizePropertyValueString_=function(e){var t=e.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(t)?goog.html.SafeStyle.COMMENT_RE_.test(e)?(goog.asserts.fail("String value disallows comments, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(e)?goog.html.SafeStyle.hasBalancedSquareBrackets_(e)?goog.html.SafeStyle.sanitizeUrl_(e):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(e){for(var t=!0,n=!0,o=0;o<e.length;o++){var r=e.charAt(o);"'"==r&&n?t=!t:'"'==r&&t&&(n=!n)}return t&&n},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(e){for(var t=!0,n=/^[-_a-zA-Z0-9]$/,o=0;o<e.length;o++){var r=e.charAt(o);if("]"==r){if(t)return!1;t=!0}else if("["==r){if(!t)return!1;t=!1}else if(!t&&!n.test(r))return!1}return t},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_="[-,.\"'%_!# a-zA-Z0-9\\[\\]]",goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(e){return e.replace(goog.html.SafeStyle.URL_RE_,(function(e,t,n,o){var r="";return n=n.replace(/^(['"])(.*)\1$/,(function(e,t,n){return r=t,n})),e=goog.html.SafeUrl.sanitize(n).getTypedStringValue(),t+r+e+r+o}))},goog.html.SafeStyle.concat=function(e){var t="",n=function(e){goog.isArray(e)?goog.array.forEach(e,n):t+=goog.html.SafeStyle.unwrap(e)};return goog.array.forEach(arguments,n),t?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(e,t){if(goog.string.internal.contains(e,"<"))throw Error("Selector does not allow '<', got: "+e);var n=e.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(n))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+e);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(n))throw Error("() and [] in selector must be balanced, got: "+e);return t instanceof goog.html.SafeStyle||(t=goog.html.SafeStyle.create(t)),e=e+"{"+goog.html.SafeStyle.unwrap(t).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(e){for(var t={"(":")","[":"]"},n=[],o=0;o<e.length;o++){var r=e[o];if(t[r])n.push(t[r]);else if(goog.object.contains(t,r)&&n.pop()!=r)return!1}return 0==n.length},goog.html.SafeStyleSheet.concat=function(e){var t="",n=function(e){goog.isArray(e)?goog.array.forEach(e,n):t+=goog.html.SafeStyleSheet.unwrap(e)};return goog.array.forEach(arguments,n),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeStyleSheet.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(e,"<"),"Forbidden '<' character in style sheet string: "+e),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(e){return e instanceof goog.html.SafeStyleSheet&&e.constructor===goog.html.SafeStyleSheet&&e.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=e,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(e){return goog.html.SafeHtml.unwrapTrustedHTML(e).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(e){return e instanceof goog.html.SafeHtml&&e.constructor===goog.html.SafeHtml&&e.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(e){if(e instanceof goog.html.SafeHtml)return e;var t="object"==typeof e,n=null;return t&&e.implementsGoogI18nBidiDirectionalString&&(n=e.getDirection()),e=t&&e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(e),n)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(e,t,n){return goog.html.SafeHtml.verifyTagName(String(e)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(e),t,n)},goog.html.SafeHtml.verifyTagName=function(e){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+e+">.":"");if(e.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+e+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(e,t,n,o){e&&goog.html.TrustedResourceUrl.unwrap(e);var r={};return r.src=e||null,r.srcdoc=t&&goog.html.SafeHtml.unwrap(t),e=goog.html.SafeHtml.combineAttributes(r,{sandbox:""},n),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,o)},goog.html.SafeHtml.createSandboxIframe=function(e,t,n,o){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var r={};return r.src=e?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)):null,r.srcdoc=t||null,r.sandbox="",e=goog.html.SafeHtml.combineAttributes(r,{},n),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,o)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(e,t){return goog.html.TrustedResourceUrl.unwrap(e),e=goog.html.SafeHtml.combineAttributes({src:e},{},t),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",e)},goog.html.SafeHtml.createScript=function(e,t){for(var n in t){var o=n.toLowerCase();if("language"==o||"src"==o||"text"==o||"type"==o)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+o+'" attribute':"")}for(n="",e=goog.array.concat(e),o=0;o<e.length;o++)n+=goog.html.SafeScript.unwrap(e[o]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",t,e)},goog.html.SafeHtml.createStyle=function(e,t){t=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},t);var n="";e=goog.array.concat(e);for(var o=0;o<e.length;o++)n+=goog.html.SafeStyleSheet.unwrap(e[o]);return e=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",t,e)},goog.html.SafeHtml.createMetaRefresh=function(e,t){return e=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(t||0)+"; url="+e})},goog.html.SafeHtml.getAttrNameAndValue_=function(e,t,n){if(n instanceof goog.string.Const)n=goog.string.Const.unwrap(n);else if("style"==t.toLowerCase()){if(!goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");n=goog.html.SafeHtml.getStyleValue_(n)}else{if(/^on/i.test(t))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+t+'" requires goog.string.Const value, "'+n+'" given.':"");if(t.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(n instanceof goog.html.TrustedResourceUrl)n=goog.html.TrustedResourceUrl.unwrap(n);else if(n instanceof goog.html.SafeUrl)n=goog.html.SafeUrl.unwrap(n);else{if("string"!=typeof n)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+t+'" on tag "'+e+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+n+'" given.':"");n=goog.html.SafeUrl.sanitize(n).getTypedStringValue()}}return n.implementsGoogStringTypedString&&(n=n.getTypedStringValue()),goog.asserts.assert("string"==typeof n||"number"==typeof n,"String or number value expected, got "+typeof n+" with value: "+n),t+'="'+goog.string.internal.htmlEscape(String(n))+'"'},goog.html.SafeHtml.getStyleValue_=function(e){if(!goog.isObject(e))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof e+" given: "+e:"");return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),goog.html.SafeStyle.unwrap(e)},goog.html.SafeHtml.createWithDir=function(e,t,n,o){return(t=goog.html.SafeHtml.create(t,n,o)).dir_=e,t},goog.html.SafeHtml.join=function(e,t){var n=(e=goog.html.SafeHtml.htmlEscape(e)).getDirection(),o=[],r=function(e){goog.isArray(e)?goog.array.forEach(e,r):(e=goog.html.SafeHtml.htmlEscape(e),o.push(goog.html.SafeHtml.unwrap(e)),e=e.getDirection(),n==goog.i18n.bidi.Dir.NEUTRAL?n=e:e!=goog.i18n.bidi.Dir.NEUTRAL&&n!=e&&(n=null))};return goog.array.forEach(t,r),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o.join(goog.html.SafeHtml.unwrap(e)),n)},goog.html.SafeHtml.concat=function(e){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(e,t){var n=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return n.dir_=e,n},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(e,t){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(e,t)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e,t){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(e):e,this.dir_=t,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(e,t,n){var o=null,r="<"+e+goog.html.SafeHtml.stringifyAttributes(e,t);return null==n?n=[]:goog.isArray(n)||(n=[n]),goog.dom.tags.isVoidTag(e.toLowerCase())?(goog.asserts.assert(!n.length,"Void tag <"+e+"> does not allow content."),r+=">"):(o=goog.html.SafeHtml.concat(n),r+=">"+goog.html.SafeHtml.unwrap(o)+"</"+e+">",o=o.getDirection()),(e=t&&t.dir)&&(o=/^(ltr|rtl|auto)$/i.test(e)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,o)},goog.html.SafeHtml.stringifyAttributes=function(e,t){var n="";if(t)for(var o in t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(o))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+o+'".':"");var r=t[o];null!=r&&(n+=" "+goog.html.SafeHtml.getAttrNameAndValue_(e,o,r))}return n},goog.html.SafeHtml.combineAttributes=function(e,t,n){var o,r={};for(o in e)goog.asserts.assert(o.toLowerCase()==o,"Must be lower case"),r[o]=e[o];for(o in t)goog.asserts.assert(o.toLowerCase()==o,"Must be lower case"),r[o]=t[o];if(n)for(o in n){var i=o.toLowerCase();if(i in e)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+i+'" attribute, got "'+o+'" with value "'+n[o]+'"':"");i in t&&delete r[i],r[o]=n[o]}return r},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(e,t,n){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(t,n||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(e,t,n){e.insertAdjacentHTML(t,goog.html.SafeHtml.unwrapTrustedHTML(n))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue((function(){if(goog.DEBUG&&"undefined"==typeof document)return!1;var e=document.createElement("div"),t=document.createElement("div");return t.appendChild(document.createElement("div")),e.appendChild(t),!(goog.DEBUG&&!e.firstChild)&&(t=e.firstChild.firstChild,e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!t.parentElement)})),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(e,t){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;e.lastChild;)e.removeChild(e.lastChild);e.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setInnerHtml=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var n=e.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[n])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+e.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(e,t)},goog.dom.safe.setOuterHtml=function(e,t){e.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setFormElementAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLFormElement(e).action=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setButtonFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLButtonElement(e).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setInputFormAction=function(e,t){t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),goog.dom.asserts.assertIsHTMLInputElement(e).formAction=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setStyle=function(e,t){e.style.cssText=goog.html.SafeStyle.unwrap(t)},goog.dom.safe.documentWrite=function(e,t){e.write(goog.html.SafeHtml.unwrapTrustedHTML(t))},goog.dom.safe.setAnchorHref=function(e,t){goog.dom.asserts.assertIsHTMLAnchorElement(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setImageSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLImageElement(e),!(t instanceof goog.html.SafeUrl)){var n=/^data:image\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,n)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setAudioSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLAudioElement(e),!(t instanceof goog.html.SafeUrl)){var n=/^data:audio\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,n)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setVideoSrc=function(e,t){if(goog.dom.asserts.assertIsHTMLVideoElement(e),!(t instanceof goog.html.SafeUrl)){var n=/^data:video\//i.test(t);t=goog.html.SafeUrl.sanitizeAssertUnchanged(t,n)}e.src=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.setEmbedSrc=function(e,t){goog.dom.asserts.assertIsHTMLEmbedElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setFrameSrc=function(e,t){goog.dom.asserts.assertIsHTMLFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrcdoc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(t)},goog.dom.safe.setLinkHrefAndRel=function(e,t,n){goog.dom.asserts.assertIsHTMLLinkElement(e),e.rel=n,goog.string.internal.caseInsensitiveContains(n,"stylesheet")?(goog.asserts.assert(t instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),e.href=goog.html.TrustedResourceUrl.unwrap(t)):e.href=t instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(t):t instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(t):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(t))},goog.dom.safe.setObjectData=function(e,t){goog.dom.asserts.assertIsHTMLObjectElement(e),e.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t)},goog.dom.safe.setScriptSrc=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setScriptContent=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.text=goog.html.SafeScript.unwrapTrustedScript(t),(t=goog.getScriptNonce())&&e.setAttribute("nonce",t)},goog.dom.safe.setLocationHref=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.href=goog.html.SafeUrl.unwrap(t)},goog.dom.safe.assignLocation=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.assign(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.replaceLocation=function(e,t){goog.dom.asserts.assertIsLocation(e),t=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t),e.replace(goog.html.SafeUrl.unwrap(t))},goog.dom.safe.openInWindow=function(e,t,n,o,r){return e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),(t||goog.global).open(goog.html.SafeUrl.unwrap(e),n?goog.string.Const.unwrap(n):"",o,r)},goog.dom.safe.parseFromStringHtml=function(e,t){return goog.dom.safe.parseFromString(e,t,"text/html")},goog.dom.safe.parseFromString=function(e,t,n){return e.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(t),n)},goog.dom.safe.createImageFromBlob=function(e){if(!/^image\/.*/g.test(e.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var t=goog.global.URL.createObjectURL(e);return(e=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(t)},goog.dom.safe.setImageSrc(e,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),t)),e},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:""},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(e,t){for(var n=e.split("%s"),o="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)o+=n.shift()+r.shift();return o+n.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&"~">=e||""<=e&&"">=e},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(e,t,n){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var o=e.toLowerCase().match(n),r=t.toLowerCase().match(n),i=Math.min(o.length,r.length),s=0;s<i;s++){n=o[s];var a=r[s];if(n!=a)return e=parseInt(n,10),!isNaN(e)&&(t=parseInt(a,10),!isNaN(t)&&e-t)?e-t:n<a?-1:1}return o.length!=r.length?o.length-r.length:e<t?-1:1},goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\D+/g)},goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(e,t){return e=goog.string.internal.htmlEscape(e,t),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},o=t?t.createElement("div"):goog.global.document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,(function(e,t){var r=n[e];return r||("#"==t.charAt(0)&&(t=Number("0"+t.substr(1)),isNaN(t)||(r=String.fromCharCode(t))),r||(goog.dom.safe.setInnerHtml(o,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),e+" ")),r=o.firstChild.nodeValue.slice(0,-1)),n[e]=r)}))},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,(function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"!=t.charAt(0)||(t=Number("0"+t.substr(1)),isNaN(t))?e:String.fromCharCode(t)}}))},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var n=t.length,o=0;o<n;o++){var r=1==n?t:t.charAt(o);if(e.charAt(0)==r&&e.charAt(e.length-1)==r)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,n){return n&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),n&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,n,o){if(n&&(e=goog.string.unescapeEntities(e)),o&&e.length>t){o>t&&(o=t);var r=e.length-o;e=e.substring(0,t-o)+"..."+e.substring(r)}else e.length>t&&(o=Math.floor(t/2),r=e.length-o,e=e.substring(0,o+t%2)+"..."+e.substring(r));return n&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){e=String(e);for(var t=['"'],n=0;n<e.length;n++){var o=e.charAt(n),r=o.charCodeAt(0);t[n+1]=goog.string.specialEscapeChars_[o]||(31<r&&127>r?o:goog.string.escapeChar(o))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=goog.string.escapeChar(e.charAt(n));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t=e.charCodeAt(0);if(31<t&&127>t)var n=e;else 256>t?(n="\\x",(16>t||256<t)&&(n+="0")):(n="\\u",4096>t&&(n+="0")),n+=t.toString(16).toUpperCase();return goog.string.jsEscapeCache_[e]=n},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,n){var o=e;return 0<=t&&t<e.length&&0<n&&(o=e.substr(0,t)+e.substr(t+n,e.length-t-n)),o},goog.string.remove=function(e,t){return e.replace(t,"")},goog.string.removeAll=function(e,t){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,"")},goog.string.replaceAll=function(e,t,n){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,n.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)},goog.string.padNumber=function(e,t,n){return-1==(n=(e=void 0!==n?e.toFixed(n):String(e)).indexOf("."))&&(n=e.length),goog.string.repeat("0",Math.max(0,t-n))+e},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(e){for(var t=0,n=0;n<e.length;++n)t=31*t+e.charCodeAt(n)>>>0;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,(function(e,t){return t.toUpperCase()}))},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){return t="string"==typeof t?goog.string.regExpEscape(t):"\\s",e.replace(new RegExp("(^"+(t?"|["+t+"]+":"")+")([a-z])","g"),(function(e,t,n){return t+n.toUpperCase()}))},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),"string"==typeof e?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,n){e=e.split(t);for(var o=[];0<n&&e.length;)o.push(e.shift()),n--;return e.length&&o.push(e.join(t)),o},goog.string.lastComponent=function(e,t){if(!t)return e;"string"==typeof t&&(t=[t]);for(var n=-1,o=0;o<t.length;o++)if(""!=t[o]){var r=e.lastIndexOf(t[o]);r>n&&(n=r)}return-1==n?e:e.slice(n+1)},goog.string.editDistance=function(e,t){var n=[],o=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var r=0;r<t.length+1;r++)n[r]=r;for(r=0;r<e.length;r++){o[0]=r+1;for(var i=0;i<t.length;i++)o[i+1]=Math.min(o[i]+1,n[i+1]+1,n[i]+Number(e[r]!=t[i]));for(i=0;i<n.length;i++)n[i]=o[i]}return o[t.length]},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){e=goog.labs.userAgent.util.extractVersionTuples(e);var t,n=goog.labs.userAgent.engine.getEngineTuple_(e);if(n)return"Gecko"==n[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):n[1];if((e=e[0])&&(t=e[2])&&(t=/Trident\/([^\s;]+)/.exec(t)))return t[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var n=e[t];if("Edge"==n[0])return n}},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){return(e=goog.array.find(e,(function(e){return t==e[0]})))&&e[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.isGo2Phone=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("GAFP")},goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";return goog.labs.userAgent.platform.isWindows()?t=(e=(t=/Windows (?:NT|Phone) ([0-9.]+)/).exec(e))?e[1]:"0.0":goog.labs.userAgent.platform.isIos()?t=(e=(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(e))&&e[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?t=(e=(t=/Mac OS X ([0-9_.]+)/).exec(e))?e[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?t=(e=(t=/(?:KaiOS)\/(\S+)/i).exec(e))&&e[1]:goog.labs.userAgent.platform.isAndroid()?t=(e=(t=/Android\s+([^\);]+)(\)|;)/).exec(e))&&e[1]:goog.labs.userAgent.platform.isChromeOS()&&(t=(e=(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(e))&&e[1]),t||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)},goog.reflect={},goog.reflect.object=function(e,t){return t},goog.reflect.objectProperty=function(e,t){return e},goog.reflect.sinkValue=function(e){return goog.reflect.sinkValue[" "](e),e},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(e){}return!1},goog.reflect.cache=function(e,t,n,o){return o=o?o(t):t,Object.prototype.hasOwnProperty.call(e,o)?e[o]:e[o]=n(t)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigatorTyped();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.ASSUME_GO2PHONE=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigatorTyped();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.GO2PHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_GO2PHONE:goog.labs.userAgent.platform.isGo2Phone(),goog.userAgent.determineVersion_=function(){var e="",t=goog.userAgent.getVersionRegexResult_();return t&&(e=t?t[1]:""),goog.userAgent.IE&&(null!=(t=goog.userAgent.getDocumentMode_())&&t>parseFloat(e))?String(t):e},goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(e):void 0},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,e,(function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,e)}))},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE)return goog.userAgent.getDocumentMode_()}(),goog.dom.BrowserFeature={},goog.dom.BrowserFeature.ASSUME_NO_OFFSCREEN_CANVAS=!1,goog.dom.BrowserFeature.ASSUME_OFFSCREEN_CANVAS=!1,goog.dom.BrowserFeature.detectOffscreenCanvas_=function(e){try{return!!new self.OffscreenCanvas(0,0).getContext(e)}catch(e){}return!1},goog.dom.BrowserFeature.OFFSCREEN_CANVAS_2D=!goog.dom.BrowserFeature.ASSUME_NO_OFFSCREEN_CANVAS&&(goog.dom.BrowserFeature.ASSUME_OFFSCREEN_CANVAS||goog.dom.BrowserFeature.detectOffscreenCanvas_("2d")),goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES=!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE=!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9)||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.1"),goog.dom.BrowserFeature.CAN_USE_INNER_TEXT=goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY=goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT=goog.userAgent.IE,goog.dom.BrowserFeature.LEGACY_IE_RANGES=goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9),goog.math={},goog.math.randomInt=function(e){return Math.floor(Math.random()*e)},goog.math.uniformRandom=function(e,t){return e+Math.random()*(t-e)},goog.math.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},goog.math.modulo=function(e,t){return 0>(e%=t)*t?e+t:e},goog.math.lerp=function(e,t,n){return e+n*(t-e)},goog.math.nearlyEquals=function(e,t,n){return Math.abs(e-t)<=(n||1e-6)},goog.math.standardAngle=function(e){return goog.math.modulo(e,360)},goog.math.standardAngleInRadians=function(e){return goog.math.modulo(e,2*Math.PI)},goog.math.toRadians=function(e){return e*Math.PI/180},goog.math.toDegrees=function(e){return 180*e/Math.PI},goog.math.angleDx=function(e,t){return t*Math.cos(goog.math.toRadians(e))},goog.math.angleDy=function(e,t){return t*Math.sin(goog.math.toRadians(e))},goog.math.angle=function(e,t,n,o){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(o-t,n-e)))},goog.math.angleDifference=function(e,t){return 180<(e=goog.math.standardAngle(t)-goog.math.standardAngle(e))?e-=360:-180>=e&&(e=360+e),e},goog.math.sign=function(e){return 0<e?1:0>e?-1:e},goog.math.longestCommonSubsequence=function(e,t,n,o){n=n||function(e,t){return e==t},o=o||function(t,n){return e[t]};for(var r=e.length,i=t.length,s=[],a=0;a<r+1;a++)s[a]=[],s[a][0]=0;for(var l=0;l<i+1;l++)s[0][l]=0;for(a=1;a<=r;a++)for(l=1;l<=i;l++)n(e[a-1],t[l-1])?s[a][l]=s[a-1][l-1]+1:s[a][l]=Math.max(s[a-1][l],s[a][l-1]);var c=[];for(a=r,l=i;0<a&&0<l;)n(e[a-1],t[l-1])?(c.unshift(o(a-1,l-1)),a--,l--):s[a-1][l]>s[a][l-1]?a--:l--;return c},goog.math.sum=function(e){return goog.array.reduce(arguments,(function(e,t){return e+t}),0)},goog.math.average=function(e){return goog.math.sum.apply(null,arguments)/arguments.length},goog.math.sampleVariance=function(e){var t=arguments.length;if(2>t)return 0;var n=goog.math.average.apply(null,arguments);return goog.math.sum.apply(null,goog.array.map(arguments,(function(e){return Math.pow(e-n,2)})))/(t-1)},goog.math.standardDeviation=function(e){return Math.sqrt(goog.math.sampleVariance.apply(null,arguments))},goog.math.isInt=function(e){return isFinite(e)&&0==e%1},goog.math.isFiniteNumber=function(e){return isFinite(e)},goog.math.isNegativeZero=function(e){return 0==e&&0>1/e},goog.math.log10Floor=function(e){if(0<e){var t=Math.round(Math.log(e)*Math.LOG10E);return t-(parseFloat("1e"+t)>e?1:0)}return 0==e?-1/0:NaN},goog.math.safeFloor=function(e,t){return goog.asserts.assert(void 0===t||0<t),Math.floor(e+(t||2e-15))},goog.math.safeCeil=function(e,t){return goog.asserts.assert(void 0===t||0<t),Math.ceil(e-(t||2e-15))},goog.math.Coordinate=function(e,t){this.x=void 0!==e?e:0,this.y=void 0!==t?t:0},goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)},goog.DEBUG&&(goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"}),goog.math.Coordinate.prototype.equals=function(e){return e instanceof goog.math.Coordinate&&goog.math.Coordinate.equals(this,e)},goog.math.Coordinate.equals=function(e,t){return e==t||!(!e||!t)&&(e.x==t.x&&e.y==t.y)},goog.math.Coordinate.distance=function(e,t){var n=e.x-t.x;return e=e.y-t.y,Math.sqrt(n*n+e*e)},goog.math.Coordinate.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},goog.math.Coordinate.azimuth=function(e){return goog.math.angle(0,0,e.x,e.y)},goog.math.Coordinate.squaredDistance=function(e,t){var n=e.x-t.x;return n*n+(e=e.y-t.y)*e},goog.math.Coordinate.difference=function(e,t){return new goog.math.Coordinate(e.x-t.x,e.y-t.y)},goog.math.Coordinate.sum=function(e,t){return new goog.math.Coordinate(e.x+t.x,e.y+t.y)},goog.math.Coordinate.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},goog.math.Coordinate.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},goog.math.Coordinate.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},goog.math.Coordinate.prototype.translate=function(e,t){return e instanceof goog.math.Coordinate?(this.x+=e.x,this.y+=e.y):(this.x+=Number(e),"number"==typeof t&&(this.y+=t)),this},goog.math.Coordinate.prototype.scale=function(e,t){return this.x*=e,this.y*="number"==typeof t?t:e,this},goog.math.Coordinate.prototype.rotateRadians=function(e,t){t=t||new goog.math.Coordinate(0,0);var n=this.x,o=this.y,r=Math.cos(e);e=Math.sin(e),this.x=(n-t.x)*r-(o-t.y)*e+t.x,this.y=(n-t.x)*e+(o-t.y)*r+t.y},goog.math.Coordinate.prototype.rotateDegrees=function(e,t){this.rotateRadians(goog.math.toRadians(e),t)},goog.math.Size=function(e,t){this.width=e,this.height=t},goog.math.Size.equals=function(e,t){return e==t||!(!e||!t)&&(e.width==t.width&&e.height==t.height)},goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)},goog.DEBUG&&(goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"}),goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)},goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)},goog.math.Size.prototype.area=function(){return this.width*this.height},goog.math.Size.prototype.perimeter=function(){return 2*(this.width+this.height)},goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height},goog.math.Size.prototype.isEmpty=function(){return!this.area()},goog.math.Size.prototype.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},goog.math.Size.prototype.fitsInside=function(e){return this.width<=e.width&&this.height<=e.height},goog.math.Size.prototype.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},goog.math.Size.prototype.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this},goog.math.Size.prototype.scale=function(e,t){return this.width*=e,this.height*="number"==typeof t?t:e,this},goog.math.Size.prototype.scaleToCover=function(e){return e=this.aspectRatio()<=e.aspectRatio()?e.width/this.width:e.height/this.height,this.scale(e)},goog.math.Size.prototype.scaleToFit=function(e){return e=this.aspectRatio()>e.aspectRatio()?e.width/this.width:e.height/this.height,this.scale(e)},goog.dom.ASSUME_QUIRKS_MODE=!1,goog.dom.ASSUME_STANDARDS_MODE=!1,goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE,goog.dom.getDomHelper=function(e){return e?new goog.dom.DomHelper(goog.dom.getOwnerDocument(e)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)},goog.dom.getDocument=function(){return document},goog.dom.getElement=function(e){return goog.dom.getElementHelper_(document,e)},goog.dom.getElementHelper_=function(e,t){return"string"==typeof t?e.getElementById(t):t},goog.dom.getRequiredElement=function(e){return goog.dom.getRequiredElementHelper_(document,e)},goog.dom.getRequiredElementHelper_=function(e,t){return goog.asserts.assertString(t),e=goog.dom.getElementHelper_(e,t),goog.asserts.assertElement(e,"No element found with id: "+t)},goog.dom.$=goog.dom.getElement,goog.dom.getElementsByTagName=function(e,t){return(t||document).getElementsByTagName(String(e))},goog.dom.getElementsByTagNameAndClass=function(e,t,n){return goog.dom.getElementsByTagNameAndClass_(document,e,t,n)},goog.dom.getElementByTagNameAndClass=function(e,t,n){return goog.dom.getElementByTagNameAndClass_(document,e,t,n)},goog.dom.getElementsByClass=function(e,t){var n=t||document;return goog.dom.canUseQuerySelector_(n)?n.querySelectorAll("."+e):goog.dom.getElementsByTagNameAndClass_(document,"*",e,t)},goog.dom.getElementByClass=function(e,t){var n=t||document;return(n.getElementsByClassName?n.getElementsByClassName(e)[0]:goog.dom.getElementByTagNameAndClass_(document,"*",e,t))||null},goog.dom.getRequiredElementByClass=function(e,t){return t=goog.dom.getElementByClass(e,t),goog.asserts.assert(t,"No element found with className: "+e)},goog.dom.canUseQuerySelector_=function(e){return!(!e.querySelectorAll||!e.querySelector)},goog.dom.getElementsByTagNameAndClass_=function(e,t,n,o){if(e=o||e,t=t&&"*"!=t?String(t).toUpperCase():"",goog.dom.canUseQuerySelector_(e)&&(t||n))return e.querySelectorAll(t+(n?"."+n:""));if(n&&e.getElementsByClassName){if(e=e.getElementsByClassName(n),t){o={};for(var r,i=0,s=0;r=e[s];s++)t==r.nodeName&&(o[i++]=r);return o.length=i,o}return e}if(e=e.getElementsByTagName(t||"*"),n){for(o={},s=i=0;r=e[s];s++)"function"==typeof(t=r.className).split&&goog.array.contains(t.split(/\s+/),n)&&(o[i++]=r);return o.length=i,o}return e},goog.dom.getElementByTagNameAndClass_=function(e,t,n,o){var r=o||e,i=t&&"*"!=t?String(t).toUpperCase():"";return goog.dom.canUseQuerySelector_(r)&&(i||n)?r.querySelector(i+(n?"."+n:"")):goog.dom.getElementsByTagNameAndClass_(e,t,n,o)[0]||null},goog.dom.$$=goog.dom.getElementsByTagNameAndClass,goog.dom.setProperties=function(e,t){goog.object.forEach(t,(function(t,n){t&&"object"==typeof t&&t.implementsGoogStringTypedString&&(t=t.getTypedStringValue()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:goog.dom.DIRECT_ATTRIBUTE_MAP_.hasOwnProperty(n)?e.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[n],t):goog.string.startsWith(n,"aria-")||goog.string.startsWith(n,"data-")?e.setAttribute(n,t):e[n]=t}))},goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},goog.dom.getViewportSize=function(e){return goog.dom.getViewportSize_(e||window)},goog.dom.getViewportSize_=function(e){return e=e.document,e=goog.dom.isCss1CompatMode_(e)?e.documentElement:e.body,new goog.math.Size(e.clientWidth,e.clientHeight)},goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)},goog.dom.getDocumentHeightForWindow=function(e){return goog.dom.getDocumentHeight_(e)},goog.dom.getDocumentHeight_=function(e){var t=e.document,n=0;if(t){n=t.body;var o=t.documentElement;if(!o||!n)return 0;if(e=goog.dom.getViewportSize_(e).height,goog.dom.isCss1CompatMode_(t)&&o.scrollHeight)n=o.scrollHeight!=e?o.scrollHeight:o.offsetHeight;else{t=o.scrollHeight;var r=o.offsetHeight;o.clientHeight!=r&&(t=n.scrollHeight,r=n.offsetHeight),n=t>e?t>r?t:r:t<r?t:r}}return n},goog.dom.getPageScroll=function(e){return goog.dom.getDomHelper((e||goog.global||window).document).getDocumentScroll()},goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)},goog.dom.getDocumentScroll_=function(e){var t=goog.dom.getDocumentScrollElement_(e);return e=goog.dom.getWindow_(e),goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10")&&e.pageYOffset!=t.scrollTop?new goog.math.Coordinate(t.scrollLeft,t.scrollTop):new goog.math.Coordinate(e.pageXOffset||t.scrollLeft,e.pageYOffset||t.scrollTop)},goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)},goog.dom.getDocumentScrollElement_=function(e){return e.scrollingElement?e.scrollingElement:!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(e)?e.documentElement:e.body||e.documentElement},goog.dom.getWindow=function(e){return e?goog.dom.getWindow_(e):window},goog.dom.getWindow_=function(e){return e.parentWindow||e.defaultView},goog.dom.createDom=function(e,t,n){return goog.dom.createDom_(document,arguments)},goog.dom.createDom_=function(e,t){var n=String(t[0]),o=t[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&o&&(o.name||o.type)){if(n=["<",n],o.name&&n.push(' name="',goog.string.htmlEscape(o.name),'"'),o.type){n.push(' type="',goog.string.htmlEscape(o.type),'"');var r={};goog.object.extend(r,o),delete r.type,o=r}n.push(">"),n=n.join("")}return n=goog.dom.createElement_(e,n),o&&("string"==typeof o?n.className=o:goog.isArray(o)?n.className=o.join(" "):goog.dom.setProperties(n,o)),2<t.length&&goog.dom.append_(e,n,t,2),n},goog.dom.append_=function(e,t,n,o){function r(n){n&&t.appendChild("string"==typeof n?e.createTextNode(n):n)}for(;o<n.length;o++){var i=n[o];goog.isArrayLike(i)&&!goog.dom.isNodeLike(i)?goog.array.forEach(goog.dom.isNodeList(i)?goog.array.toArray(i):i,r):r(i)}},goog.dom.$dom=goog.dom.createDom,goog.dom.createElement=function(e){return goog.dom.createElement_(document,e)},goog.dom.createElement_=function(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)},goog.dom.createTextNode=function(e){return document.createTextNode(String(e))},goog.dom.createTable=function(e,t,n){return goog.dom.createTable_(document,e,t,!!n)},goog.dom.createTable_=function(e,t,n,o){for(var r=goog.dom.createElement_(e,"TABLE"),i=r.appendChild(goog.dom.createElement_(e,"TBODY")),s=0;s<t;s++){for(var a=goog.dom.createElement_(e,"TR"),l=0;l<n;l++){var c=goog.dom.createElement_(e,"TD");o&&goog.dom.setTextContent(c,goog.string.Unicode.NBSP),a.appendChild(c)}i.appendChild(a)}return r},goog.dom.constHtmlToNode=function(e){var t=goog.array.map(arguments,goog.string.Const.unwrap);return t=goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Constant HTML string, that gets turned into a Node later, so it will be automatically balanced."),t.join("")),goog.dom.safeHtmlToNode(t)},goog.dom.safeHtmlToNode=function(e){return goog.dom.safeHtmlToNode_(document,e)},goog.dom.safeHtmlToNode_=function(e,t){var n=goog.dom.createElement_(e,"DIV");return goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(goog.dom.safe.setInnerHtml(n,goog.html.SafeHtml.concat(goog.html.SafeHtml.BR,t)),n.removeChild(goog.asserts.assert(n.firstChild))):goog.dom.safe.setInnerHtml(n,t),goog.dom.childrenToNode_(e,n)},goog.dom.childrenToNode_=function(e,t){if(1==t.childNodes.length)return t.removeChild(goog.asserts.assert(t.firstChild));for(e=e.createDocumentFragment();t.firstChild;)e.appendChild(t.firstChild);return e},goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)},goog.dom.isCss1CompatMode_=function(e){return goog.dom.COMPAT_MODE_KNOWN_?goog.dom.ASSUME_STANDARDS_MODE:"CSS1Compat"==e.compatMode},goog.dom.canHaveChildren=function(e){if(e.nodeType!=goog.dom.NodeType.ELEMENT)return!1;switch(e.tagName){case"APPLET":case"AREA":case"BASE":case"BR":case"COL":case"COMMAND":case"EMBED":case"FRAME":case"HR":case"IMG":case"INPUT":case"IFRAME":case"ISINDEX":case"KEYGEN":case"LINK":case"NOFRAMES":case"NOSCRIPT":case"META":case"OBJECT":case"PARAM":case"SCRIPT":case"SOURCE":case"STYLE":case"TRACK":case"WBR":return!1}return!0},goog.dom.appendChild=function(e,t){goog.asserts.assert(null!=e&&null!=t,"goog.dom.appendChild expects non-null arguments"),e.appendChild(t)},goog.dom.append=function(e,t){goog.dom.append_(goog.dom.getOwnerDocument(e),e,arguments,1)},goog.dom.removeChildren=function(e){for(var t;t=e.firstChild;)e.removeChild(t)},goog.dom.insertSiblingBefore=function(e,t){goog.asserts.assert(null!=e&&null!=t,"goog.dom.insertSiblingBefore expects non-null arguments"),t.parentNode&&t.parentNode.insertBefore(e,t)},goog.dom.insertSiblingAfter=function(e,t){goog.asserts.assert(null!=e&&null!=t,"goog.dom.insertSiblingAfter expects non-null arguments"),t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)},goog.dom.insertChildAt=function(e,t,n){goog.asserts.assert(null!=e,"goog.dom.insertChildAt expects a non-null parent"),e.insertBefore(t,e.childNodes[n]||null)},goog.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},goog.dom.replaceNode=function(e,t){goog.asserts.assert(null!=e&&null!=t,"goog.dom.replaceNode expects non-null arguments");var n=t.parentNode;n&&n.replaceChild(e,t)},goog.dom.flattenElement=function(e){var t,n=e.parentNode;if(n&&n.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(e.removeNode)return e.removeNode(!1);for(;t=e.firstChild;)n.insertBefore(t,e);return goog.dom.removeNode(e)}},goog.dom.getChildren=function(e){return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&null!=e.children?e.children:goog.array.filter(e.childNodes,(function(e){return e.nodeType==goog.dom.NodeType.ELEMENT}))},goog.dom.getFirstElementChild=function(e){return void 0!==e.firstElementChild?e.firstElementChild:goog.dom.getNextElementNode_(e.firstChild,!0)},goog.dom.getLastElementChild=function(e){return void 0!==e.lastElementChild?e.lastElementChild:goog.dom.getNextElementNode_(e.lastChild,!1)},goog.dom.getNextElementSibling=function(e){return void 0!==e.nextElementSibling?e.nextElementSibling:goog.dom.getNextElementNode_(e.nextSibling,!0)},goog.dom.getPreviousElementSibling=function(e){return void 0!==e.previousElementSibling?e.previousElementSibling:goog.dom.getNextElementNode_(e.previousSibling,!1)},goog.dom.getNextElementNode_=function(e,t){for(;e&&e.nodeType!=goog.dom.NodeType.ELEMENT;)e=t?e.nextSibling:e.previousSibling;return e},goog.dom.getNextNode=function(e){if(!e)return null;if(e.firstChild)return e.firstChild;for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null},goog.dom.getPreviousNode=function(e){if(!e)return null;if(!e.previousSibling)return e.parentNode;for(e=e.previousSibling;e&&e.lastChild;)e=e.lastChild;return e},goog.dom.isNodeLike=function(e){return goog.isObject(e)&&0<e.nodeType},goog.dom.isElement=function(e){return goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT},goog.dom.isWindow=function(e){return goog.isObject(e)&&e.window==e},goog.dom.getParentElement=function(e){var t;return!goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10")&&goog.global.SVGElement&&e instanceof goog.global.SVGElement||!(t=e.parentElement)?(t=e.parentNode,goog.dom.isElement(t)?t:null):t},goog.dom.contains=function(e,t){if(!e||!t)return!1;if(e.contains&&t.nodeType==goog.dom.NodeType.ELEMENT)return e==t||e.contains(t);if(void 0!==e.compareDocumentPosition)return e==t||!!(16&e.compareDocumentPosition(t));for(;t&&e!=t;)t=t.parentNode;return t==e},goog.dom.compareNodeOrder=function(e,t){if(e==t)return 0;if(e.compareDocumentPosition)return 2&e.compareDocumentPosition(t)?1:-1;if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){if(e.nodeType==goog.dom.NodeType.DOCUMENT)return-1;if(t.nodeType==goog.dom.NodeType.DOCUMENT)return 1}if("sourceIndex"in e||e.parentNode&&"sourceIndex"in e.parentNode){var n=e.nodeType==goog.dom.NodeType.ELEMENT,o=t.nodeType==goog.dom.NodeType.ELEMENT;if(n&&o)return e.sourceIndex-t.sourceIndex;var r=e.parentNode,i=t.parentNode;return r==i?goog.dom.compareSiblingOrder_(e,t):!n&&goog.dom.contains(r,t)?-1*goog.dom.compareParentsDescendantNodeIe_(e,t):!o&&goog.dom.contains(i,e)?goog.dom.compareParentsDescendantNodeIe_(t,e):(n?e.sourceIndex:r.sourceIndex)-(o?t.sourceIndex:i.sourceIndex)}return(n=(o=goog.dom.getOwnerDocument(e)).createRange()).selectNode(e),n.collapse(!0),(e=o.createRange()).selectNode(t),e.collapse(!0),n.compareBoundaryPoints(goog.global.Range.START_TO_END,e)},goog.dom.compareParentsDescendantNodeIe_=function(e,t){var n=e.parentNode;if(n==t)return-1;for(;t.parentNode!=n;)t=t.parentNode;return goog.dom.compareSiblingOrder_(t,e)},goog.dom.compareSiblingOrder_=function(e,t){for(;t=t.previousSibling;)if(t==e)return-1;return 1},goog.dom.findCommonAncestor=function(e){var t,n=arguments.length;if(!n)return null;if(1==n)return arguments[0];var o=[],r=1/0;for(t=0;t<n;t++){for(var i=[],s=arguments[t];s;)i.unshift(s),s=s.parentNode;o.push(i),r=Math.min(r,i.length)}for(i=null,t=0;t<r;t++){s=o[0][t];for(var a=1;a<n;a++)if(s!=o[a][t])return i;i=s}return i},goog.dom.isInDocument=function(e){return 16==(16&e.ownerDocument.compareDocumentPosition(e))},goog.dom.getOwnerDocument=function(e){return goog.asserts.assert(e,"Node cannot be null or undefined."),e.nodeType==goog.dom.NodeType.DOCUMENT?e:e.ownerDocument||e.document},goog.dom.getFrameContentDocument=function(e){return e.contentDocument||e.contentWindow.document},goog.dom.getFrameContentWindow=function(e){try{return e.contentWindow||(e.contentDocument?goog.dom.getWindow(e.contentDocument):null)}catch(e){}return null},goog.dom.setTextContent=function(e,t){if(goog.asserts.assert(null!=e,"goog.dom.setTextContent expects a non-null value for node"),"textContent"in e)e.textContent=t;else if(e.nodeType==goog.dom.NodeType.TEXT)e.data=String(t);else if(e.firstChild&&e.firstChild.nodeType==goog.dom.NodeType.TEXT){for(;e.lastChild!=e.firstChild;)e.removeChild(goog.asserts.assert(e.lastChild));e.firstChild.data=String(t)}else{goog.dom.removeChildren(e);var n=goog.dom.getOwnerDocument(e);e.appendChild(n.createTextNode(String(t)))}},goog.dom.getOuterHtml=function(e){if(goog.asserts.assert(null!==e,"goog.dom.getOuterHtml expects a non-null value for element"),"outerHTML"in e)return e.outerHTML;var t=goog.dom.getOwnerDocument(e);return(t=goog.dom.createElement_(t,"DIV")).appendChild(e.cloneNode(!0)),t.innerHTML},goog.dom.findNode=function(e,t){var n=[];return goog.dom.findNodes_(e,t,n,!0)?n[0]:void 0},goog.dom.findNodes=function(e,t){var n=[];return goog.dom.findNodes_(e,t,n,!1),n},goog.dom.findNodes_=function(e,t,n,o){if(null!=e)for(e=e.firstChild;e;){if(t(e)&&(n.push(e),o)||goog.dom.findNodes_(e,t,n,o))return!0;e=e.nextSibling}return!1},goog.dom.findElement=function(e,t){for(e=goog.dom.getChildrenReverse_(e);0<e.length;){var n=e.pop();if(t(n))return n;for(n=n.lastElementChild;n;n=n.previousElementSibling)e.push(n)}return null},goog.dom.findElements=function(e,t){var n=[];for(e=goog.dom.getChildrenReverse_(e);0<e.length;){var o=e.pop();for(t(o)&&n.push(o),o=o.lastElementChild;o;o=o.previousElementSibling)e.push(o)}return n},goog.dom.getChildrenReverse_=function(e){if(e.nodeType==goog.dom.NodeType.DOCUMENT)return[e.documentElement];var t=[];for(e=e.lastElementChild;e;e=e.previousElementSibling)t.push(e);return t},goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"},goog.dom.isFocusableTabIndex=function(e){return goog.dom.hasSpecifiedTabIndex_(e)&&goog.dom.isTabIndexFocusable_(e)},goog.dom.setFocusableTabIndex=function(e,t){t?e.tabIndex=0:(e.tabIndex=-1,e.removeAttribute("tabIndex"))},goog.dom.isFocusable=function(e){var t;return(t=goog.dom.nativelySupportsFocus_(e)?!e.disabled&&(!goog.dom.hasSpecifiedTabIndex_(e)||goog.dom.isTabIndexFocusable_(e)):goog.dom.isFocusableTabIndex(e))&&goog.userAgent.IE?goog.dom.hasNonZeroBoundingRect_(e):t},goog.dom.hasSpecifiedTabIndex_=function(e){return goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9")?null!=(e=e.getAttributeNode("tabindex"))&&e.specified:e.hasAttribute("tabindex")},goog.dom.isTabIndexFocusable_=function(e){return"number"==typeof(e=e.tabIndex)&&0<=e&&32768>e},goog.dom.nativelySupportsFocus_=function(e){return"A"==e.tagName&&e.hasAttribute("href")||"INPUT"==e.tagName||"TEXTAREA"==e.tagName||"SELECT"==e.tagName||"BUTTON"==e.tagName},goog.dom.hasNonZeroBoundingRect_=function(e){return null!=(e=!goog.isFunction(e.getBoundingClientRect)||goog.userAgent.IE&&null==e.parentElement?{height:e.offsetHeight,width:e.offsetWidth}:e.getBoundingClientRect())&&0<e.height&&0<e.width},goog.dom.getTextContent=function(e){if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&null!==e&&"innerText"in e)e=goog.string.canonicalizeNewlines(e.innerText);else{var t=[];goog.dom.getTextContent_(e,t,!0),e=t.join("")}return e=(e=e.replace(/ \xAD /g," ").replace(/\xAD/g,"")).replace(/\u200B/g,""),goog.dom.BrowserFeature.CAN_USE_INNER_TEXT||(e=e.replace(/ +/g," "))," "!=e&&(e=e.replace(/^\s*/,"")),e},goog.dom.getRawTextContent=function(e){var t=[];return goog.dom.getTextContent_(e,t,!1),t.join("")},goog.dom.getTextContent_=function(e,t,n){if(!(e.nodeName in goog.dom.TAGS_TO_IGNORE_))if(e.nodeType==goog.dom.NodeType.TEXT)n?t.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(e.nodeValue);else if(e.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)t.push(goog.dom.PREDEFINED_TAG_VALUES_[e.nodeName]);else for(e=e.firstChild;e;)goog.dom.getTextContent_(e,t,n),e=e.nextSibling},goog.dom.getNodeTextLength=function(e){return goog.dom.getTextContent(e).length},goog.dom.getNodeTextOffset=function(e,t){t=t||goog.dom.getOwnerDocument(e).body;for(var n=[];e&&e!=t;){for(var o=e;o=o.previousSibling;)n.unshift(goog.dom.getTextContent(o));e=e.parentNode}return goog.string.trimLeft(n.join("")).replace(/ +/g," ").length},goog.dom.getNodeAtOffset=function(e,t,n){e=[e];for(var o=0,r=null;0<e.length&&o<t;)if(!((r=e.pop()).nodeName in goog.dom.TAGS_TO_IGNORE_))if(r.nodeType==goog.dom.NodeType.TEXT){var i=r.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");o+=i.length}else if(r.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)o+=goog.dom.PREDEFINED_TAG_VALUES_[r.nodeName].length;else for(i=r.childNodes.length-1;0<=i;i--)e.push(r.childNodes[i]);return goog.isObject(n)&&(n.remainder=r?r.nodeValue.length+t-o-1:0,n.node=r),r},goog.dom.isNodeList=function(e){if(e&&"number"==typeof e.length){if(goog.isObject(e))return"function"==typeof e.item||"string"==typeof e.item;if(goog.isFunction(e))return"function"==typeof e.item}return!1},goog.dom.getAncestorByTagNameAndClass=function(e,t,n,o){if(!t&&!n)return null;var r=t?String(t).toUpperCase():null;return goog.dom.getAncestor(e,(function(e){return(!r||e.nodeName==r)&&(!n||"string"==typeof e.className&&goog.array.contains(e.className.split(/\s+/),n))}),!0,o)},goog.dom.getAncestorByClass=function(e,t,n){return goog.dom.getAncestorByTagNameAndClass(e,null,t,n)},goog.dom.getAncestor=function(e,t,n,o){for(e&&!n&&(e=e.parentNode),n=0;e&&(null==o||n<=o);){if(goog.asserts.assert("parentNode"!=e.name),t(e))return e;e=e.parentNode,n++}return null},goog.dom.getActiveElement=function(e){try{var t=e&&e.activeElement;return t&&t.nodeName?t:null}catch(e){return null}},goog.dom.getPixelRatio=function(){var e=goog.dom.getWindow();return void 0!==e.devicePixelRatio?e.devicePixelRatio:e.matchMedia?goog.dom.matchesPixelRatio_(3)||goog.dom.matchesPixelRatio_(2)||goog.dom.matchesPixelRatio_(1.5)||goog.dom.matchesPixelRatio_(1)||.75:1},goog.dom.matchesPixelRatio_=function(e){return goog.dom.getWindow().matchMedia("(min-resolution: "+e+"dppx),(min--moz-device-pixel-ratio: "+e+"),(min-resolution: "+96*e+"dpi)").matches?e:0},goog.dom.getCanvasContext2D=function(e){return e.getContext("2d")},goog.dom.DomHelper=function(e){this.document_=e||goog.global.document||document},goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper,goog.dom.DomHelper.prototype.setDocument=function(e){this.document_=e},goog.dom.DomHelper.prototype.getDocument=function(){return this.document_},goog.dom.DomHelper.prototype.getElement=function(e){return goog.dom.getElementHelper_(this.document_,e)},goog.dom.DomHelper.prototype.getRequiredElement=function(e){return goog.dom.getRequiredElementHelper_(this.document_,e)},goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement,goog.dom.DomHelper.prototype.getElementsByTagName=function(e,t){return(t||this.document_).getElementsByTagName(String(e))},goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(e,t,n){return goog.dom.getElementsByTagNameAndClass_(this.document_,e,t,n)},goog.dom.DomHelper.prototype.getElementByTagNameAndClass=function(e,t,n){return goog.dom.getElementByTagNameAndClass_(this.document_,e,t,n)},goog.dom.DomHelper.prototype.getElementsByClass=function(e,t){return goog.dom.getElementsByClass(e,t||this.document_)},goog.dom.DomHelper.prototype.getElementByClass=function(e,t){return goog.dom.getElementByClass(e,t||this.document_)},goog.dom.DomHelper.prototype.getRequiredElementByClass=function(e,t){return goog.dom.getRequiredElementByClass(e,t||this.document_)},goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass,goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties,goog.dom.DomHelper.prototype.getViewportSize=function(e){return goog.dom.getViewportSize(e||this.getWindow())},goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())},goog.dom.DomHelper.prototype.createDom=function(e,t,n){return goog.dom.createDom_(this.document_,arguments)},goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom,goog.dom.DomHelper.prototype.createElement=function(e){return goog.dom.createElement_(this.document_,e)},goog.dom.DomHelper.prototype.createTextNode=function(e){return this.document_.createTextNode(String(e))},goog.dom.DomHelper.prototype.createTable=function(e,t,n){return goog.dom.createTable_(this.document_,e,t,!!n)},goog.dom.DomHelper.prototype.safeHtmlToNode=function(e){return goog.dom.safeHtmlToNode_(this.document_,e)},goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)},goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)},goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)},goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)},goog.dom.DomHelper.prototype.getActiveElement=function(e){return goog.dom.getActiveElement(e||this.document_)},goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild,goog.dom.DomHelper.prototype.append=goog.dom.append,goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren,goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren,goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore,goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter,goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt,goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode,goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode,goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement,goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren,goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild,goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild,goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling,goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling,goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode,goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode,goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike,goog.dom.DomHelper.prototype.isElement=goog.dom.isElement,goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow,goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement,goog.dom.DomHelper.prototype.contains=goog.dom.contains,goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder,goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor,goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument,goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument,goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow,goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent,goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml,goog.dom.DomHelper.prototype.findNode=goog.dom.findNode,goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes,goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex,goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex,goog.dom.DomHelper.prototype.isFocusable=goog.dom.isFocusable,goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent,goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength,goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset,goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset,goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList,goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass,goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass,goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor,goog.dom.DomHelper.prototype.getCanvasContext2D=goog.dom.getCanvasContext2D,goog.dom.classlist={},goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST=!1,goog.dom.classlist.getClassName_=function(e){return"string"==typeof e.className?e.className:e.getAttribute&&e.getAttribute("class")||""},goog.dom.classlist.get=function(e){return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList?e.classList:goog.dom.classlist.getClassName_(e).match(/\S+/g)||[]},goog.dom.classlist.set=function(e,t){"string"==typeof e.className?e.className=t:e.setAttribute&&e.setAttribute("class",t)},goog.dom.classlist.contains=function(e,t){return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList?e.classList.contains(t):goog.array.contains(goog.dom.classlist.get(e),t)},goog.dom.classlist.add=function(e,t){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList)e.classList.add(t);else if(!goog.dom.classlist.contains(e,t)){var n=goog.dom.classlist.getClassName_(e);goog.dom.classlist.set(e,n+(0<n.length?" "+t:t))}},goog.dom.classlist.addAll=function(e,t){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList)goog.array.forEach(t,(function(t){goog.dom.classlist.add(e,t)}));else{var n={};for(var o in goog.array.forEach(goog.dom.classlist.get(e),(function(e){n[e]=!0})),goog.array.forEach(t,(function(e){n[e]=!0})),t="",n)t+=0<t.length?" "+o:o;goog.dom.classlist.set(e,t)}},goog.dom.classlist.remove=function(e,t){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList?e.classList.remove(t):goog.dom.classlist.contains(e,t)&&goog.dom.classlist.set(e,goog.array.filter(goog.dom.classlist.get(e),(function(e){return e!=t})).join(" "))},goog.dom.classlist.removeAll=function(e,t){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList?goog.array.forEach(t,(function(t){goog.dom.classlist.remove(e,t)})):goog.dom.classlist.set(e,goog.array.filter(goog.dom.classlist.get(e),(function(e){return!goog.array.contains(t,e)})).join(" "))},goog.dom.classlist.enable=function(e,t,n){n?goog.dom.classlist.add(e,t):goog.dom.classlist.remove(e,t)},goog.dom.classlist.enableAll=function(e,t,n){(n?goog.dom.classlist.addAll:goog.dom.classlist.removeAll)(e,t)},goog.dom.classlist.swap=function(e,t,n){return!!goog.dom.classlist.contains(e,t)&&(goog.dom.classlist.remove(e,t),goog.dom.classlist.add(e,n),!0)},goog.dom.classlist.toggle=function(e,t){var n=!goog.dom.classlist.contains(e,t);return goog.dom.classlist.enable(e,t,n),n},goog.dom.classlist.addRemove=function(e,t,n){goog.dom.classlist.remove(e,t),goog.dom.classlist.add(e,n)},goog.a11y={},goog.a11y.aria={},goog.a11y.aria.Role={ALERT:"alert",ALERTDIALOG:"alertdialog",APPLICATION:"application",ARTICLE:"article",BANNER:"banner",BUTTON:"button",CHECKBOX:"checkbox",COLUMNHEADER:"columnheader",COMBOBOX:"combobox",COMPLEMENTARY:"complementary",CONTENTINFO:"contentinfo",DEFINITION:"definition",DIALOG:"dialog",DIRECTORY:"directory",DOCUMENT:"document",FORM:"form",GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",HEADING:"heading",IMG:"img",LINK:"link",LIST:"list",LISTBOX:"listbox",LISTITEM:"listitem",LOG:"log",MAIN:"main",MARQUEE:"marquee",MATH:"math",MENU:"menu",MENUBAR:"menubar",MENU_ITEM:"menuitem",MENU_ITEM_CHECKBOX:"menuitemcheckbox",MENU_ITEM_RADIO:"menuitemradio",NAVIGATION:"navigation",NOTE:"note",OPTION:"option",PRESENTATION:"presentation",PROGRESSBAR:"progressbar",RADIO:"radio",RADIOGROUP:"radiogroup",REGION:"region",ROW:"row",ROWGROUP:"rowgroup",ROWHEADER:"rowheader",SCROLLBAR:"scrollbar",SEARCH:"search",SEPARATOR:"separator",SLIDER:"slider",SPINBUTTON:"spinbutton",STATUS:"status",TAB:"tab",TAB_LIST:"tablist",TAB_PANEL:"tabpanel",TEXTBOX:"textbox",TEXTINFO:"textinfo",TIMER:"timer",TOOLBAR:"toolbar",TOOLTIP:"tooltip",TREE:"tree",TREEGRID:"treegrid",TREEITEM:"treeitem"},goog.a11y.aria.State={ACTIVEDESCENDANT:"activedescendant",ATOMIC:"atomic",AUTOCOMPLETE:"autocomplete",BUSY:"busy",CHECKED:"checked",COLINDEX:"colindex",CONTROLS:"controls",DESCRIBEDBY:"describedby",DISABLED:"disabled",DROPEFFECT:"dropeffect",EXPANDED:"expanded",FLOWTO:"flowto",GRABBED:"grabbed",HASPOPUP:"haspopup",HIDDEN:"hidden",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",LIVE:"live",MULTILINE:"multiline",MULTISELECTABLE:"multiselectable",ORIENTATION:"orientation",OWNS:"owns",POSINSET:"posinset",PRESSED:"pressed",READONLY:"readonly",RELEVANT:"relevant",REQUIRED:"required",ROWINDEX:"rowindex",SELECTED:"selected",SETSIZE:"setsize",SORT:"sort",VALUEMAX:"valuemax",VALUEMIN:"valuemin",VALUENOW:"valuenow",VALUETEXT:"valuetext"},goog.a11y.aria.AutoCompleteValues={INLINE:"inline",LIST:"list",BOTH:"both",NONE:"none"},goog.a11y.aria.DropEffectValues={COPY:"copy",MOVE:"move",LINK:"link",EXECUTE:"execute",POPUP:"popup",NONE:"none"},goog.a11y.aria.LivePriority={OFF:"off",POLITE:"polite",ASSERTIVE:"assertive"},goog.a11y.aria.OrientationValues={VERTICAL:"vertical",HORIZONTAL:"horizontal"},goog.a11y.aria.RelevantValues={ADDITIONS:"additions",REMOVALS:"removals",TEXT:"text",ALL:"all"},goog.a11y.aria.SortValues={ASCENDING:"ascending",DESCENDING:"descending",NONE:"none",OTHER:"other"},goog.a11y.aria.CheckedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"},goog.a11y.aria.ExpandedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"},goog.a11y.aria.GrabbedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"};goog.a11y.aria.InvalidValues={FALSE:"false",TRUE:"true",GRAMMAR:"grammar",SPELLING:"spelling"},goog.a11y.aria.PressedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"},goog.a11y.aria.SelectedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"},goog.a11y.aria.datatables={},goog.a11y.aria.datatables.getDefaultValuesMap=function(){return goog.a11y.aria.DefaultStateValueMap_||(goog.a11y.aria.DefaultStateValueMap_=goog.object.create(goog.a11y.aria.State.ATOMIC,!1,goog.a11y.aria.State.AUTOCOMPLETE,"none",goog.a11y.aria.State.DROPEFFECT,"none",goog.a11y.aria.State.HASPOPUP,!1,goog.a11y.aria.State.LIVE,"off",goog.a11y.aria.State.MULTILINE,!1,goog.a11y.aria.State.MULTISELECTABLE,!1,goog.a11y.aria.State.ORIENTATION,"vertical",goog.a11y.aria.State.READONLY,!1,goog.a11y.aria.State.RELEVANT,"additions text",goog.a11y.aria.State.REQUIRED,!1,goog.a11y.aria.State.SORT,"none",goog.a11y.aria.State.BUSY,!1,goog.a11y.aria.State.DISABLED,!1,goog.a11y.aria.State.HIDDEN,!1,goog.a11y.aria.State.INVALID,"false")),goog.a11y.aria.DefaultStateValueMap_},goog.a11y.aria.ARIA_PREFIX_="aria-",goog.a11y.aria.ROLE_ATTRIBUTE_="role",goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_=goog.object.createSet("A AREA BUTTON HEAD INPUT LINK MENU META OPTGROUP OPTION PROGRESS STYLE SELECT SOURCE TEXTAREA TITLE TRACK".split(" ")),goog.a11y.aria.CONTAINER_ROLES_=[goog.a11y.aria.Role.COMBOBOX,goog.a11y.aria.Role.GRID,goog.a11y.aria.Role.GROUP,goog.a11y.aria.Role.LISTBOX,goog.a11y.aria.Role.MENU,goog.a11y.aria.Role.MENUBAR,goog.a11y.aria.Role.RADIOGROUP,goog.a11y.aria.Role.ROW,goog.a11y.aria.Role.ROWGROUP,goog.a11y.aria.Role.TAB_LIST,goog.a11y.aria.Role.TEXTBOX,goog.a11y.aria.Role.TOOLBAR,goog.a11y.aria.Role.TREE,goog.a11y.aria.Role.TREEGRID],goog.a11y.aria.setRole=function(e,t){t?(goog.asserts.ENABLE_ASSERTS&&goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.Role,t),"No such ARIA role "+t),e.setAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_,t)):goog.a11y.aria.removeRole(e)},goog.a11y.aria.getRole=function(e){return e.getAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)||null},goog.a11y.aria.removeRole=function(e){e.removeAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)},goog.a11y.aria.setState=function(e,t,n){goog.isArray(n)&&(n=n.join(" "));var o=goog.a11y.aria.getAriaAttributeName_(t);""===n||null==n?t in(n=goog.a11y.aria.datatables.getDefaultValuesMap())?e.setAttribute(o,n[t]):e.removeAttribute(o):e.setAttribute(o,n)},goog.a11y.aria.toggleState=function(e,t){var n=goog.a11y.aria.getState(e,t);goog.string.isEmptyOrWhitespace(goog.string.makeSafe(n))||"true"==n||"false"==n?goog.a11y.aria.setState(e,t,"true"==n?"false":"true"):goog.a11y.aria.removeState(e,t)},goog.a11y.aria.removeState=function(e,t){e.removeAttribute(goog.a11y.aria.getAriaAttributeName_(t))},goog.a11y.aria.getState=function(e,t){return null==(e=e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t)))||null==e?"":String(e)},goog.a11y.aria.getActiveDescendant=function(e){var t=goog.a11y.aria.getState(e,goog.a11y.aria.State.ACTIVEDESCENDANT);return goog.dom.getOwnerDocument(e).getElementById(t)},goog.a11y.aria.setActiveDescendant=function(e,t){var n="";t&&(n=t.id,goog.asserts.assert(n,"The active element should have an id.")),goog.a11y.aria.setState(e,goog.a11y.aria.State.ACTIVEDESCENDANT,n)},goog.a11y.aria.getLabel=function(e){return goog.a11y.aria.getState(e,goog.a11y.aria.State.LABEL)},goog.a11y.aria.setLabel=function(e,t){goog.a11y.aria.setState(e,goog.a11y.aria.State.LABEL,t)},goog.a11y.aria.assertRoleIsSetInternalUtil=function(e,t){goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_[e.tagName]||(e=goog.a11y.aria.getRole(e),goog.asserts.assert(null!=e,"The element ARIA role cannot be null."),goog.asserts.assert(goog.array.contains(t,e),'Non existing or incorrect role set for element.The role set is "'+e+'". The role should be any of "'+t+'". Check the ARIA specification for more details http://www.w3.org/TR/wai-aria/roles.'))},goog.a11y.aria.getStateBoolean=function(e,t){return e=e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t)),goog.asserts.assert("boolean"==typeof e||null==e||"true"==e||"false"==e),null==e||"boolean"==typeof e?e:"true"==e},goog.a11y.aria.getStateNumber=function(e,t){return e=e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t)),goog.asserts.assert((null==e||!isNaN(Number(e)))&&"boolean"!=typeof e),null==e?null:Number(e)},goog.a11y.aria.getStateString=function(e,t){return e=e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t)),goog.asserts.assert((null==e||"string"==typeof e)&&(""==e||isNaN(Number(e)))&&"true"!=e&&"false"!=e),null==e||""==e?null:e},goog.a11y.aria.getStringArrayStateInternalUtil=function(e,t){return e=e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t)),goog.a11y.aria.splitStringOnWhitespace_(e)},goog.a11y.aria.hasState=function(e,t){return e.hasAttribute(goog.a11y.aria.getAriaAttributeName_(t))},goog.a11y.aria.isContainerRole=function(e){return e=goog.a11y.aria.getRole(e),goog.array.contains(goog.a11y.aria.CONTAINER_ROLES_,e)},goog.a11y.aria.splitStringOnWhitespace_=function(e){return e?e.split(/\s+/):[]},goog.a11y.aria.getAriaAttributeName_=function(e){return goog.asserts.ENABLE_ASSERTS&&(goog.asserts.assert(e,"ARIA attribute cannot be empty."),goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.State,e),"No such ARIA attribute "+e)),goog.a11y.aria.ARIA_PREFIX_+e},goog.dom.vendor={},goog.dom.vendor.getVendorJsPrefix=function(){return goog.userAgent.WEBKIT?"Webkit":goog.userAgent.GECKO?"Moz":goog.userAgent.IE?"ms":goog.userAgent.OPERA?"O":null},goog.dom.vendor.getVendorPrefix=function(){return goog.userAgent.WEBKIT?"-webkit":goog.userAgent.GECKO?"-moz":goog.userAgent.IE?"-ms":goog.userAgent.OPERA?"-o":null},goog.dom.vendor.getPrefixedPropertyName=function(e,t){if(t&&e in t)return e;var n=goog.dom.vendor.getVendorJsPrefix();return n?(e=(n=n.toLowerCase())+goog.string.toTitleCase(e),void 0===t||e in t?e:null):null},goog.dom.vendor.getPrefixedEventType=function(e){return((goog.dom.vendor.getVendorJsPrefix()||"")+e).toLowerCase()},goog.math.Box=function(e,t,n,o){this.top=e,this.right=t,this.bottom=n,this.left=o},goog.math.Box.boundingBox=function(e){for(var t=new goog.math.Box(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x),n=1;n<arguments.length;n++)t.expandToIncludeCoordinate(arguments[n]);return t},goog.math.Box.prototype.getWidth=function(){return this.right-this.left},goog.math.Box.prototype.getHeight=function(){return this.bottom-this.top},goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)},goog.DEBUG&&(goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"}),goog.math.Box.prototype.contains=function(e){return goog.math.Box.contains(this,e)},goog.math.Box.prototype.expand=function(e,t,n,o){return goog.isObject(e)?(this.top-=e.top,this.right+=e.right,this.bottom+=e.bottom,this.left-=e.left):(this.top-=e,this.right+=Number(t),this.bottom+=Number(n),this.left-=Number(o)),this},goog.math.Box.prototype.expandToInclude=function(e){this.left=Math.min(this.left,e.left),this.top=Math.min(this.top,e.top),this.right=Math.max(this.right,e.right),this.bottom=Math.max(this.bottom,e.bottom)},goog.math.Box.prototype.expandToIncludeCoordinate=function(e){this.top=Math.min(this.top,e.y),this.right=Math.max(this.right,e.x),this.bottom=Math.max(this.bottom,e.y),this.left=Math.min(this.left,e.x)},goog.math.Box.equals=function(e,t){return e==t||!(!e||!t)&&(e.top==t.top&&e.right==t.right&&e.bottom==t.bottom&&e.left==t.left)},goog.math.Box.contains=function(e,t){return!(!e||!t)&&(t instanceof goog.math.Box?t.left>=e.left&&t.right<=e.right&&t.top>=e.top&&t.bottom<=e.bottom:t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom)},goog.math.Box.relativePositionX=function(e,t){return t.x<e.left?t.x-e.left:t.x>e.right?t.x-e.right:0},goog.math.Box.relativePositionY=function(e,t){return t.y<e.top?t.y-e.top:t.y>e.bottom?t.y-e.bottom:0},goog.math.Box.distance=function(e,t){var n=goog.math.Box.relativePositionX(e,t);return e=goog.math.Box.relativePositionY(e,t),Math.sqrt(n*n+e*e)},goog.math.Box.intersects=function(e,t){return e.left<=t.right&&t.left<=e.right&&e.top<=t.bottom&&t.top<=e.bottom},goog.math.Box.intersectsWithPadding=function(e,t,n){return e.left<=t.right+n&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},goog.math.Box.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},goog.math.Box.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},goog.math.Box.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this},goog.math.Box.prototype.translate=function(e,t){return e instanceof goog.math.Coordinate?(this.left+=e.x,this.right+=e.x,this.top+=e.y,this.bottom+=e.y):(goog.asserts.assertNumber(e),this.left+=e,this.right+=e,"number"==typeof t&&(this.top+=t,this.bottom+=t)),this},goog.math.Box.prototype.scale=function(e,t){return t="number"==typeof t?t:e,this.left*=e,this.right*=e,this.top*=t,this.bottom*=t,this},goog.math.IRect=function(){},goog.math.Rect=function(e,t,n,o){this.left=e,this.top=t,this.width=n,this.height=o},goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)},goog.math.Rect.prototype.toBox=function(){return new goog.math.Box(this.top,this.left+this.width,this.top+this.height,this.left)},goog.math.Rect.createFromPositionAndSize=function(e,t){return new goog.math.Rect(e.x,e.y,t.width,t.height)},goog.math.Rect.createFromBox=function(e){return new goog.math.Rect(e.left,e.top,e.right-e.left,e.bottom-e.top)},goog.DEBUG&&(goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"}),goog.math.Rect.equals=function(e,t){return e==t||!(!e||!t)&&(e.left==t.left&&e.width==t.width&&e.top==t.top&&e.height==t.height)},goog.math.Rect.prototype.intersection=function(e){var t=Math.max(this.left,e.left),n=Math.min(this.left+this.width,e.left+e.width);if(t<=n){var o=Math.max(this.top,e.top);if(o<=(e=Math.min(this.top+this.height,e.top+e.height)))return this.left=t,this.top=o,this.width=n-t,this.height=e-o,!0}return!1},goog.math.Rect.intersection=function(e,t){var n=Math.max(e.left,t.left),o=Math.min(e.left+e.width,t.left+t.width);if(n<=o){var r=Math.max(e.top,t.top);if(r<=(e=Math.min(e.top+e.height,t.top+t.height)))return new goog.math.Rect(n,r,o-n,e-r)}return null},goog.math.Rect.intersects=function(e,t){return e.left<=t.left+t.width&&t.left<=e.left+e.width&&e.top<=t.top+t.height&&t.top<=e.top+e.height},goog.math.Rect.prototype.intersects=function(e){return goog.math.Rect.intersects(this,e)},goog.math.Rect.difference=function(e,t){var n=goog.math.Rect.intersection(e,t);if(!n||!n.height||!n.width)return[e.clone()];n=[];var o=e.top,r=e.height,i=e.left+e.width,s=e.top+e.height,a=t.left+t.width,l=t.top+t.height;return t.top>e.top&&(n.push(new goog.math.Rect(e.left,e.top,e.width,t.top-e.top)),o=t.top,r-=t.top-e.top),l<s&&(n.push(new goog.math.Rect(e.left,l,e.width,s-l)),r=l-o),t.left>e.left&&n.push(new goog.math.Rect(e.left,o,t.left-e.left,r)),a<i&&n.push(new goog.math.Rect(a,o,i-a,r)),n},goog.math.Rect.prototype.difference=function(e){return goog.math.Rect.difference(this,e)},goog.math.Rect.prototype.boundingRect=function(e){var t=Math.max(this.left+this.width,e.left+e.width),n=Math.max(this.top+this.height,e.top+e.height);this.left=Math.min(this.left,e.left),this.top=Math.min(this.top,e.top),this.width=t-this.left,this.height=n-this.top},goog.math.Rect.boundingRect=function(e,t){return e&&t?((e=new goog.math.Rect(e.left,e.top,e.width,e.height)).boundingRect(t),e):null},goog.math.Rect.prototype.contains=function(e){return e instanceof goog.math.Coordinate?e.x>=this.left&&e.x<=this.left+this.width&&e.y>=this.top&&e.y<=this.top+this.height:this.left<=e.left&&this.left+this.width>=e.left+e.width&&this.top<=e.top&&this.top+this.height>=e.top+e.height},goog.math.Rect.prototype.squaredDistance=function(e){var t=e.x<this.left?this.left-e.x:Math.max(e.x-(this.left+this.width),0);return t*t+(e=e.y<this.top?this.top-e.y:Math.max(e.y-(this.top+this.height),0))*e},goog.math.Rect.prototype.distance=function(e){return Math.sqrt(this.squaredDistance(e))},goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)},goog.math.Rect.prototype.getTopLeft=function(){return new goog.math.Coordinate(this.left,this.top)},goog.math.Rect.prototype.getCenter=function(){return new goog.math.Coordinate(this.left+this.width/2,this.top+this.height/2)},goog.math.Rect.prototype.getBottomRight=function(){return new goog.math.Coordinate(this.left+this.width,this.top+this.height)},goog.math.Rect.prototype.ceil=function(){return this.left=Math.ceil(this.left),this.top=Math.ceil(this.top),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},goog.math.Rect.prototype.floor=function(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},goog.math.Rect.prototype.round=function(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this.width=Math.round(this.width),this.height=Math.round(this.height),this},goog.math.Rect.prototype.translate=function(e,t){return e instanceof goog.math.Coordinate?(this.left+=e.x,this.top+=e.y):(this.left+=goog.asserts.assertNumber(e),"number"==typeof t&&(this.top+=t)),this},goog.math.Rect.prototype.scale=function(e,t){return t="number"==typeof t?t:e,this.left*=e,this.width*=e,this.top*=t,this.height*=t,this},goog.style={},goog.style.setStyle=function(e,t,n){if("string"==typeof t)goog.style.setStyle_(e,n,t);else for(var o in t)goog.style.setStyle_(e,t[o],o)},goog.style.setStyle_=function(e,t,n){(n=goog.style.getVendorJsStyleName_(e,n))&&(e.style[n]=t)},goog.style.styleNameCache_={},goog.style.getVendorJsStyleName_=function(e,t){var n=goog.style.styleNameCache_[t];if(!n){var o=goog.string.toCamelCase(t);n=o,void 0===e.style[o]&&(o=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(o),void 0!==e.style[o]&&(n=o)),goog.style.styleNameCache_[t]=n}return n},goog.style.getVendorStyleName_=function(e,t){var n=goog.string.toCamelCase(t);return void 0===e.style[n]&&(n=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(n),void 0!==e.style[n])?goog.dom.vendor.getVendorPrefix()+"-"+t:t},goog.style.getStyle=function(e,t){var n=e.style[goog.string.toCamelCase(t)];return void 0!==n?n:e.style[goog.style.getVendorJsStyleName_(e,t)]||""},goog.style.getComputedStyle=function(e,t){var n=goog.dom.getOwnerDocument(e);return n.defaultView&&n.defaultView.getComputedStyle&&(e=n.defaultView.getComputedStyle(e,null))&&(e[t]||e.getPropertyValue(t))||""},goog.style.getCascadedStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:null},goog.style.getStyle_=function(e,t){return goog.style.getComputedStyle(e,t)||goog.style.getCascadedStyle(e,t)||e.style&&e.style[t]},goog.style.getComputedBoxSizing=function(e){return goog.style.getStyle_(e,"boxSizing")||goog.style.getStyle_(e,"MozBoxSizing")||goog.style.getStyle_(e,"WebkitBoxSizing")||null},goog.style.getComputedPosition=function(e){return goog.style.getStyle_(e,"position")},goog.style.getBackgroundColor=function(e){return goog.style.getStyle_(e,"backgroundColor")},goog.style.getComputedOverflowX=function(e){return goog.style.getStyle_(e,"overflowX")},goog.style.getComputedOverflowY=function(e){return goog.style.getStyle_(e,"overflowY")},goog.style.getComputedZIndex=function(e){return goog.style.getStyle_(e,"zIndex")},goog.style.getComputedTextAlign=function(e){return goog.style.getStyle_(e,"textAlign")},goog.style.getComputedCursor=function(e){return goog.style.getStyle_(e,"cursor")},goog.style.getComputedTransform=function(e){var t=goog.style.getVendorStyleName_(e,"transform");return goog.style.getStyle_(e,t)||goog.style.getStyle_(e,"transform")},goog.style.setPosition=function(e,t,n){if(t instanceof goog.math.Coordinate){var o=t.x;t=t.y}else o=t,t=n;e.style.left=goog.style.getPixelStyleValue_(o,!1),e.style.top=goog.style.getPixelStyleValue_(t,!1)},goog.style.getPosition=function(e){return new goog.math.Coordinate(e.offsetLeft,e.offsetTop)},goog.style.getClientViewportElement=function(e){return e=e?goog.dom.getOwnerDocument(e):goog.dom.getDocument(),!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||goog.dom.getDomHelper(e).isCss1CompatMode()?e.documentElement:e.body},goog.style.getViewportPageOffset=function(e){var t=e.body;return e=e.documentElement,new goog.math.Coordinate(t.scrollLeft||e.scrollLeft,t.scrollTop||e.scrollTop)},goog.style.getBoundingClientRect_=function(e){try{var t=e.getBoundingClientRect()}catch(e){return{left:0,top:0,right:0,bottom:0}}return goog.userAgent.IE&&e.ownerDocument.body&&(e=e.ownerDocument,t.left-=e.documentElement.clientLeft+e.body.clientLeft,t.top-=e.documentElement.clientTop+e.body.clientTop),t},goog.style.getOffsetParent=function(e){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(8))return goog.asserts.assert(e&&"offsetParent"in e),e.offsetParent;var t=goog.dom.getOwnerDocument(e),n=goog.style.getStyle_(e,"position"),o="fixed"==n||"absolute"==n;for(e=e.parentNode;e&&e!=t;e=e.parentNode)if(e.nodeType==goog.dom.NodeType.DOCUMENT_FRAGMENT&&e.host&&(e=e.host),n=goog.style.getStyle_(e,"position"),!(o=o&&"static"==n&&e!=t.documentElement&&e!=t.body)&&(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight||"fixed"==n||"absolute"==n||"relative"==n))return e;return null},goog.style.getVisibleRectForElement=function(e){for(var t=new goog.math.Box(0,1/0,1/0,0),n=goog.dom.getDomHelper(e),o=n.getDocument().body,r=n.getDocument().documentElement,i=n.getDocumentScrollElement();e=goog.style.getOffsetParent(e);)if(!(goog.userAgent.IE&&0==e.clientWidth||goog.userAgent.WEBKIT&&0==e.clientHeight&&e==o)&&e!=o&&e!=r&&"visible"!=goog.style.getStyle_(e,"overflow")){var s=goog.style.getPageOffset(e),a=goog.style.getClientLeftTop(e);s.x+=a.x,s.y+=a.y,t.top=Math.max(t.top,s.y),t.right=Math.min(t.right,s.x+e.clientWidth),t.bottom=Math.min(t.bottom,s.y+e.clientHeight),t.left=Math.max(t.left,s.x)}return o=i.scrollLeft,i=i.scrollTop,t.left=Math.max(t.left,o),t.top=Math.max(t.top,i),n=n.getViewportSize(),t.right=Math.min(t.right,o+n.width),t.bottom=Math.min(t.bottom,i+n.height),0<=t.top&&0<=t.left&&t.bottom>t.top&&t.right>t.left?t:null},goog.style.getContainerOffsetToScrollInto=function(e,t,n){var o=t||goog.dom.getDocumentScrollElement(),r=goog.style.getPageOffset(e),i=goog.style.getPageOffset(o),s=goog.style.getBorderBox(o);return o==goog.dom.getDocumentScrollElement()?(t=r.x-o.scrollLeft,r=r.y-o.scrollTop,goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(10)&&(t+=s.left,r+=s.top)):(t=r.x-i.x-s.left,r=r.y-i.y-s.top),s=goog.style.getSizeWithDisplay_(e),e=o.clientWidth-s.width,s=o.clientHeight-s.height,i=o.scrollLeft,o=o.scrollTop,n?(i+=t-e/2,o+=r-s/2):(i+=Math.min(t,Math.max(t-e,0)),o+=Math.min(r,Math.max(r-s,0))),new goog.math.Coordinate(i,o)},goog.style.scrollIntoContainerView=function(e,t,n){t=t||goog.dom.getDocumentScrollElement(),e=goog.style.getContainerOffsetToScrollInto(e,t,n),t.scrollLeft=e.x,t.scrollTop=e.y},goog.style.getClientLeftTop=function(e){return new goog.math.Coordinate(e.clientLeft,e.clientTop)},goog.style.getPageOffset=function(e){var t=goog.dom.getOwnerDocument(e);goog.asserts.assertObject(e,"Parameter is required");var n=new goog.math.Coordinate(0,0);return e==goog.style.getClientViewportElement(t)||(e=goog.style.getBoundingClientRect_(e),t=goog.dom.getDomHelper(t).getDocumentScroll(),n.x=e.left+t.x,n.y=e.top+t.y),n},goog.style.getPageOffsetLeft=function(e){return goog.style.getPageOffset(e).x},goog.style.getPageOffsetTop=function(e){return goog.style.getPageOffset(e).y},goog.style.getFramedPageOffset=function(e,t){var n=new goog.math.Coordinate(0,0),o=goog.dom.getWindow(goog.dom.getOwnerDocument(e));if(!goog.reflect.canAccessProperty(o,"parent"))return n;do{var r=o==t?goog.style.getPageOffset(e):goog.style.getClientPositionForElement_(goog.asserts.assert(e));n.x+=r.x,n.y+=r.y}while(o&&o!=t&&o!=o.parent&&(e=o.frameElement)&&(o=o.parent));return n},goog.style.translateRectForAnotherFrame=function(e,t,n){if(t.getDocument()!=n.getDocument()){var o=t.getDocument().body;n=goog.style.getFramedPageOffset(o,n.getWindow()),n=goog.math.Coordinate.difference(n,goog.style.getPageOffset(o)),!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||t.isCss1CompatMode()||(n=goog.math.Coordinate.difference(n,t.getDocumentScroll())),e.left+=n.x,e.top+=n.y}},goog.style.getRelativePosition=function(e,t){return e=goog.style.getClientPosition(e),t=goog.style.getClientPosition(t),new goog.math.Coordinate(e.x-t.x,e.y-t.y)},goog.style.getClientPositionForElement_=function(e){return e=goog.style.getBoundingClientRect_(e),new goog.math.Coordinate(e.left,e.top)},goog.style.getClientPosition=function(e){return goog.asserts.assert(e),e.nodeType==goog.dom.NodeType.ELEMENT?goog.style.getClientPositionForElement_(e):(e=e.changedTouches?e.changedTouches[0]:e,new goog.math.Coordinate(e.clientX,e.clientY))},goog.style.setPageOffset=function(e,t,n){var o=goog.style.getPageOffset(e);t instanceof goog.math.Coordinate&&(n=t.y,t=t.x),t=goog.asserts.assertNumber(t)-o.x,goog.style.setPosition(e,e.offsetLeft+t,e.offsetTop+(Number(n)-o.y))},goog.style.setSize=function(e,t,n){if(t instanceof goog.math.Size)n=t.height,t=t.width;else if(null==n)throw Error("missing height argument");goog.style.setWidth(e,t),goog.style.setHeight(e,n)},goog.style.getPixelStyleValue_=function(e,t){return"number"==typeof e&&(e=(t?Math.round(e):e)+"px"),e},goog.style.setHeight=function(e,t){e.style.height=goog.style.getPixelStyleValue_(t,!0)},goog.style.setWidth=function(e,t){e.style.width=goog.style.getPixelStyleValue_(t,!0)},goog.style.getSize=function(e){return goog.style.evaluateWithTemporaryDisplay_(goog.style.getSizeWithDisplay_,e)},goog.style.evaluateWithTemporaryDisplay_=function(e,t){if("none"!=goog.style.getStyle_(t,"display"))return e(t);var n=t.style,o=n.display,r=n.visibility,i=n.position;return n.visibility="hidden",n.position="absolute",n.display="inline",e=e(t),n.display=o,n.position=i,n.visibility=r,e},goog.style.getSizeWithDisplay_=function(e){var t=e.offsetWidth,n=e.offsetHeight,o=goog.userAgent.WEBKIT&&!t&&!n;return(void 0===t||o)&&e.getBoundingClientRect?(e=goog.style.getBoundingClientRect_(e),new goog.math.Size(e.right-e.left,e.bottom-e.top)):new goog.math.Size(t,n)},goog.style.getTransformedSize=function(e){return e.getBoundingClientRect?(e=goog.style.evaluateWithTemporaryDisplay_(goog.style.getBoundingClientRect_,e),new goog.math.Size(e.right-e.left,e.bottom-e.top)):null},goog.style.getBounds=function(e){var t=goog.style.getPageOffset(e);return e=goog.style.getSize(e),new goog.math.Rect(t.x,t.y,e.width,e.height)},goog.style.toCamelCase=function(e){return goog.string.toCamelCase(String(e))},goog.style.toSelectorCase=function(e){return goog.string.toSelectorCase(e)},goog.style.getOpacity=function(e){goog.asserts.assert(e);var t=e.style;return e="","opacity"in t?e=t.opacity:"MozOpacity"in t?e=t.MozOpacity:"filter"in t&&(t=t.filter.match(/alpha\(opacity=([\d.]+)\)/))&&(e=String(t[1]/100)),""==e?e:Number(e)},goog.style.setOpacity=function(e,t){goog.asserts.assert(e),"opacity"in(e=e.style)?e.opacity=t:"MozOpacity"in e?e.MozOpacity=t:"filter"in e&&(e.filter=""===t?"":"alpha(opacity="+100*Number(t)+")")},goog.style.setTransparentBackgroundImage=function(e,t){e=e.style,goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?e.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+t+'", sizingMethod="crop")':(e.backgroundImage="url("+t+")",e.backgroundPosition="top left",e.backgroundRepeat="no-repeat")},goog.style.clearTransparentBackgroundImage=function(e){"filter"in(e=e.style)?e.filter="":e.backgroundImage="none"},goog.style.showElement=function(e,t){goog.style.setElementShown(e,t)},goog.style.setElementShown=function(e,t){e.style.display=t?"":"none"},goog.style.isElementShown=function(e){return"none"!=e.style.display},goog.style.installSafeStyleSheet=function(e,t){var n=(t=goog.dom.getDomHelper(t)).getDocument();if(goog.userAgent.IE&&n.createStyleSheet)return t=n.createStyleSheet(),goog.style.setSafeStyleSheet(t,e),t;if(!(n=t.getElementsByTagNameAndClass("HEAD")[0])){var o=t.getElementsByTagNameAndClass("BODY")[0];n=t.createDom("HEAD"),o.parentNode.insertBefore(n,o)}return o=t.createDom("STYLE"),goog.style.setSafeStyleSheet(o,e),t.appendChild(n,o),o},goog.style.uninstallStyles=function(e){goog.dom.removeNode(e.ownerNode||e.owningElement||e)},goog.style.setSafeStyleSheet=function(e,t){t=goog.html.SafeStyleSheet.unwrap(t),goog.userAgent.IE&&void 0!==e.cssText?e.cssText=t:e.innerHTML=t},goog.style.setPreWrap=function(e){e=e.style,goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(e.whiteSpace="pre",e.wordWrap="break-word"):e.whiteSpace=goog.userAgent.GECKO?"-moz-pre-wrap":"pre-wrap"},goog.style.setInlineBlock=function(e){(e=e.style).position="relative",goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(e.zoom="1",e.display="inline"):e.display="inline-block"},goog.style.isRightToLeft=function(e){return"rtl"==goog.style.getStyle_(e,"direction")},goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT||goog.userAgent.EDGE?"WebkitUserSelect":null,goog.style.isUnselectable=function(e){return goog.style.unselectableStyle_?"none"==e.style[goog.style.unselectableStyle_].toLowerCase():!(!goog.userAgent.IE&&!goog.userAgent.OPERA)&&"on"==e.getAttribute("unselectable")},goog.style.setUnselectable=function(e,t,n){n=n?null:e.getElementsByTagName("*");var o=goog.style.unselectableStyle_;if(o){if(t=t?"none":"",e.style&&(e.style[o]=t),n){e=0;for(var r;r=n[e];e++)r.style&&(r.style[o]=t)}}else if((goog.userAgent.IE||goog.userAgent.OPERA)&&(t=t?"on":"",e.setAttribute("unselectable",t),n))for(e=0;r=n[e];e++)r.setAttribute("unselectable",t)},goog.style.getBorderBoxSize=function(e){return new goog.math.Size(e.offsetWidth,e.offsetHeight)},goog.style.setBorderBoxSize=function(e,t){var n=goog.dom.getOwnerDocument(e),o=goog.dom.getDomHelper(n).isCss1CompatMode();!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10")||o&&goog.userAgent.isVersionOrHigher("8")?goog.style.setBoxSizingSize_(e,t,"border-box"):(n=e.style,o?(o=goog.style.getPaddingBox(e),e=goog.style.getBorderBox(e),n.pixelWidth=t.width-e.left-o.left-o.right-e.right,n.pixelHeight=t.height-e.top-o.top-o.bottom-e.bottom):(n.pixelWidth=t.width,n.pixelHeight=t.height))},goog.style.getContentBoxSize=function(e){var t=goog.dom.getOwnerDocument(e),n=goog.userAgent.IE&&e.currentStyle;return n&&goog.dom.getDomHelper(t).isCss1CompatMode()&&"auto"!=n.width&&"auto"!=n.height&&!n.boxSizing?(t=goog.style.getIePixelValue_(e,n.width,"width","pixelWidth"),e=goog.style.getIePixelValue_(e,n.height,"height","pixelHeight"),new goog.math.Size(t,e)):(n=goog.style.getBorderBoxSize(e),t=goog.style.getPaddingBox(e),e=goog.style.getBorderBox(e),new goog.math.Size(n.width-e.left-t.left-t.right-e.right,n.height-e.top-t.top-t.bottom-e.bottom))},goog.style.setContentBoxSize=function(e,t){var n=goog.dom.getOwnerDocument(e),o=goog.dom.getDomHelper(n).isCss1CompatMode();!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10")||o&&goog.userAgent.isVersionOrHigher("8")?goog.style.setBoxSizingSize_(e,t,"content-box"):(n=e.style,o?(n.pixelWidth=t.width,n.pixelHeight=t.height):(o=goog.style.getPaddingBox(e),e=goog.style.getBorderBox(e),n.pixelWidth=t.width+e.left+o.left+o.right+e.right,n.pixelHeight=t.height+e.top+o.top+o.bottom+e.bottom))},goog.style.setBoxSizingSize_=function(e,t,n){e=e.style,goog.userAgent.GECKO?e.MozBoxSizing=n:goog.userAgent.WEBKIT?e.WebkitBoxSizing=n:e.boxSizing=n,e.width=Math.max(t.width,0)+"px",e.height=Math.max(t.height,0)+"px"},goog.style.getIePixelValue_=function(e,t,n,o){if(/^\d+px?$/.test(t))return parseInt(t,10);var r=e.style[n],i=e.runtimeStyle[n];return e.runtimeStyle[n]=e.currentStyle[n],e.style[n]=t,t=e.style[o],e.style[n]=r,e.runtimeStyle[n]=i,+t},goog.style.getIePixelDistance_=function(e,t){return(t=goog.style.getCascadedStyle(e,t))?goog.style.getIePixelValue_(e,t,"left","pixelLeft"):0},goog.style.getBox_=function(e,t){if(goog.userAgent.IE){var n=goog.style.getIePixelDistance_(e,t+"Left"),o=goog.style.getIePixelDistance_(e,t+"Right"),r=goog.style.getIePixelDistance_(e,t+"Top");return e=goog.style.getIePixelDistance_(e,t+"Bottom"),new goog.math.Box(r,o,e,n)}return n=goog.style.getComputedStyle(e,t+"Left"),o=goog.style.getComputedStyle(e,t+"Right"),r=goog.style.getComputedStyle(e,t+"Top"),e=goog.style.getComputedStyle(e,t+"Bottom"),new goog.math.Box(parseFloat(r),parseFloat(o),parseFloat(e),parseFloat(n))},goog.style.getPaddingBox=function(e){return goog.style.getBox_(e,"padding")},goog.style.getMarginBox=function(e){return goog.style.getBox_(e,"margin")},goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6},goog.style.getIePixelBorder_=function(e,t){return"none"==goog.style.getCascadedStyle(e,t+"Style")?0:(t=goog.style.getCascadedStyle(e,t+"Width"))in goog.style.ieBorderWidthKeywords_?goog.style.ieBorderWidthKeywords_[t]:goog.style.getIePixelValue_(e,t,"left","pixelLeft")},goog.style.getBorderBox=function(e){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){var t=goog.style.getIePixelBorder_(e,"borderLeft"),n=goog.style.getIePixelBorder_(e,"borderRight"),o=goog.style.getIePixelBorder_(e,"borderTop");return e=goog.style.getIePixelBorder_(e,"borderBottom"),new goog.math.Box(o,n,e,t)}return t=goog.style.getComputedStyle(e,"borderLeftWidth"),n=goog.style.getComputedStyle(e,"borderRightWidth"),o=goog.style.getComputedStyle(e,"borderTopWidth"),e=goog.style.getComputedStyle(e,"borderBottomWidth"),new goog.math.Box(parseFloat(o),parseFloat(n),parseFloat(e),parseFloat(t))},goog.style.getFontFamily=function(e){var t=goog.dom.getOwnerDocument(e),n="";if(t.body.createTextRange&&goog.dom.contains(t,e)){(t=t.body.createTextRange()).moveToElementText(e);try{n=t.queryCommandValue("FontName")}catch(e){n=""}}return n||(n=goog.style.getStyle_(e,"fontFamily")),1<(e=n.split(",")).length&&(n=e[0]),goog.string.stripQuotes(n,"\"'")},goog.style.lengthUnitRegex_=/[^\d]+$/,goog.style.getLengthUnits=function(e){return(e=e.match(goog.style.lengthUnitRegex_))&&e[0]||null},goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,in:1,mm:1,pc:1,pt:1},goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1},goog.style.getFontSize=function(e){var t=goog.style.getStyle_(e,"fontSize"),n=goog.style.getLengthUnits(t);if(t&&"px"==n)return parseInt(t,10);if(goog.userAgent.IE){if(String(n)in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_)return goog.style.getIePixelValue_(e,t,"left","pixelLeft");if(e.parentNode&&e.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&String(n)in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_)return e=e.parentNode,n=goog.style.getStyle_(e,"fontSize"),goog.style.getIePixelValue_(e,t==n?"1em":t,"left","pixelLeft")}return n=goog.dom.createDom("SPAN",{style:"visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"}),goog.dom.appendChild(e,n),t=n.offsetHeight,goog.dom.removeNode(n),t},goog.style.parseStyleAttribute=function(e){var t={};return goog.array.forEach(e.split(/\s*;\s*/),(function(e){var n=e.match(/\s*([\w-]+)\s*:(.+)/);n&&(e=n[1],n=goog.string.trim(n[2]),t[goog.string.toCamelCase(e.toLowerCase())]=n)})),t},goog.style.toStyleAttribute=function(e){var t=[];return goog.object.forEach(e,(function(e,n){t.push(goog.string.toSelectorCase(n),":",e,";")})),t.join("")},goog.style.setFloat=function(e,t){e.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=t},goog.style.getFloat=function(e){return e.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""},goog.style.getScrollbarWidth=function(e){var t=goog.dom.createElement("DIV");return e&&(t.className=e),t.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px",e=goog.dom.createElement("DIV"),goog.style.setSize(e,"200px","200px"),t.appendChild(e),goog.dom.appendChild(goog.dom.getDocument().body,t),e=t.offsetWidth-t.clientWidth,goog.dom.removeNode(t),e},goog.style.MATRIX_TRANSLATION_REGEX_=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/,goog.style.getCssTranslation=function(e){return(e=goog.style.getComputedTransform(e))&&(e=e.match(goog.style.MATRIX_TRANSLATION_REGEX_))?new goog.math.Coordinate(parseFloat(e[1]),parseFloat(e[2])):new goog.math.Coordinate(0,0)},goog.disposable={},goog.disposable.IDisposable=function(){},goog.disposable.IDisposable.prototype.dispose=goog.abstractMethod,goog.disposable.IDisposable.prototype.isDisposed=goog.abstractMethod,goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(goog.Disposable.INCLUDE_STACK_ON_CREATION&&(this.creationStack=Error().stack),goog.Disposable.instances_[goog.getUid(this)]=this),this.disposed_=this.disposed_,this.onDisposeCallbacks_=this.onDisposeCallbacks_},goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2},goog.Disposable.MONITORING_MODE=0,goog.Disposable.INCLUDE_STACK_ON_CREATION=!0,goog.Disposable.instances_={},goog.Disposable.getUndisposedObjects=function(){var e,t=[];for(e in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(e)&&t.push(goog.Disposable.instances_[Number(e)]);return t},goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}},goog.Disposable.prototype.disposed_=!1,goog.Disposable.prototype.isDisposed=function(){return this.disposed_},goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed,goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var e=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(e))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");if(goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&this.onDisposeCallbacks_&&0<this.onDisposeCallbacks_.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete goog.Disposable.instances_[e]}},goog.Disposable.prototype.registerDisposable=function(e){this.addOnDisposeCallback(goog.partial(goog.dispose,e))},goog.Disposable.prototype.addOnDisposeCallback=function(e,t){this.disposed_?void 0!==t?e.call(t):e():(this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]),this.onDisposeCallbacks_.push(void 0!==t?goog.bind(e,t):e))},goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()},goog.Disposable.isDisposed=function(e){return!(!e||"function"!=typeof e.isDisposed)&&e.isDisposed()},goog.dispose=function(e){e&&"function"==typeof e.dispose&&e.dispose()},goog.disposeAll=function(e){for(var t=0,n=arguments.length;t<n;++t){var o=arguments[t];goog.isArrayLike(o)?goog.disposeAll.apply(null,o):goog.dispose(o)}},goog.debug.entryPointRegistry={},goog.debug.EntryPointMonitor=function(){},goog.debug.entryPointRegistry.refList_=[],goog.debug.entryPointRegistry.monitors_=[],goog.debug.entryPointRegistry.monitorsMayExist_=!1,goog.debug.entryPointRegistry.register=function(e){if(goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=e,goog.debug.entryPointRegistry.monitorsMayExist_)for(var t=goog.debug.entryPointRegistry.monitors_,n=0;n<t.length;n++)e(goog.bind(t[n].wrap,t[n]))},goog.debug.entryPointRegistry.monitorAll=function(e){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var t=goog.bind(e.wrap,e),n=0;n<goog.debug.entryPointRegistry.refList_.length;n++)goog.debug.entryPointRegistry.refList_[n](t);goog.debug.entryPointRegistry.monitors_.push(e)},goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(e){var t=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(e==t[t.length-1],"Only the most recent monitor can be unwrapped."),e=goog.bind(e.unwrap,e);for(var n=0;n<goog.debug.entryPointRegistry.refList_.length;n++)goog.debug.entryPointRegistry.refList_[n](e);t.length--},goog.debug.errorcontext={},goog.debug.errorcontext.addErrorContext=function(e,t,n){e[goog.debug.errorcontext.CONTEXT_KEY_]||(e[goog.debug.errorcontext.CONTEXT_KEY_]={}),e[goog.debug.errorcontext.CONTEXT_KEY_][t]=n},goog.debug.errorcontext.getErrorContext=function(e){return e[goog.debug.errorcontext.CONTEXT_KEY_]||{}},goog.debug.errorcontext.CONTEXT_KEY_="__closure__error__context__984382",goog.debug.LOGGING_ENABLED=goog.DEBUG,goog.debug.FORCE_SLOPPY_STACKS=!1,goog.debug.catchErrors=function(e,t,n){var o=(n=n||goog.global).onerror,r=!!t;goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("535.3")&&(r=!r),n.onerror=function(t,n,i,s,a){return o&&o(t,n,i,s,a),e({message:t,fileName:n,line:i,lineNumber:i,col:s,error:a}),r}},goog.debug.expose=function(e,t){if(void 0===e)return"undefined";if(null==e)return"NULL";var n,o=[];for(n in e)if(t||!goog.isFunction(e[n])){var r=n+" = ";try{r+=e[n]}catch(e){r+="*** "+e+" ***"}o.push(r)}return o.join("\n")},goog.debug.deepExpose=function(e,t){var n=[],o=[],r={},i=function(e,s){var a=s+"  ";try{if(void 0===e)n.push("undefined");else if(null===e)n.push("NULL");else if("string"==typeof e)n.push('"'+e.replace(/\n/g,"\n"+s)+'"');else if(goog.isFunction(e))n.push(String(e).replace(/\n/g,"\n"+s));else if(goog.isObject(e)){goog.hasUid(e)||o.push(e);var l=goog.getUid(e);if(r[l])n.push("*** reference loop detected (id="+l+") ***");else{for(var c in r[l]=!0,n.push("{"),e)!t&&goog.isFunction(e[c])||(n.push("\n"),n.push(a),n.push(c+" = "),i(e[c],a));n.push("\n"+s+"}"),delete r[l]}}else n.push(e)}catch(e){n.push("*** "+e+" ***")}};for(i(e,""),e=0;e<o.length;e++)goog.removeUid(o[e]);return n.join("")},goog.debug.exposeArray=function(e){for(var t=[],n=0;n<e.length;n++)goog.isArray(e[n])?t.push(goog.debug.exposeArray(e[n])):t.push(e[n]);return"[ "+t.join(", ")+" ]"},goog.debug.normalizeErrorObject=function(e){var t=goog.getObjectByName("window.location.href");if(null==e&&(e='Unknown Error of type "null/undefined"'),"string"==typeof e)return{message:e,name:"Unknown error",lineNumber:"Not available",fileName:t,stack:"Not available"};var n=!1;try{var o=e.lineNumber||e.line||"Not available"}catch(e){o="Not available",n=!0}try{var r=e.fileName||e.filename||e.sourceURL||goog.global.$googDebugFname||t}catch(e){r="Not available",n=!0}return!n&&e.lineNumber&&e.fileName&&e.stack&&e.message&&e.name?e:(null==(t=e.message)&&(t=e.constructor&&e.constructor instanceof Function?'Unknown Error of type "'+(e.constructor.name?e.constructor.name:goog.debug.getFunctionName(e.constructor))+'"':"Unknown Error of unknown type"),{message:t,name:e.name||"UnknownError",lineNumber:o,fileName:r,stack:e.stack||"Not available"})},goog.debug.enhanceError=function(e,t){if(e instanceof Error||(e=Error(e),Error.captureStackTrace&&Error.captureStackTrace(e,goog.debug.enhanceError)),e.stack||(e.stack=goog.debug.getStacktrace(goog.debug.enhanceError)),t){for(var n=0;e["message"+n];)++n;e["message"+n]=String(t)}return e},goog.debug.enhanceErrorWithContext=function(e,t){if(e=goog.debug.enhanceError(e),t)for(var n in t)goog.debug.errorcontext.addErrorContext(e,n,t[n]);return e},goog.debug.getStacktraceSimple=function(e){if(!goog.debug.FORCE_SLOPPY_STACKS){var t=goog.debug.getNativeStackTrace_(goog.debug.getStacktraceSimple);if(t)return t}t=[];for(var n=arguments.callee.caller,o=0;n&&(!e||o<e);){t.push(goog.debug.getFunctionName(n)),t.push("()\n");try{n=n.caller}catch(e){t.push("[exception trying to get caller]\n");break}if(++o>=goog.debug.MAX_STACK_DEPTH){t.push("[...long stack...]");break}}return e&&o>=e?t.push("[...reached max depth limit...]"):t.push("[end]"),t.join("")},goog.debug.MAX_STACK_DEPTH=50,goog.debug.getNativeStackTrace_=function(e){var t=Error();if(Error.captureStackTrace)return Error.captureStackTrace(t,e),String(t.stack);try{throw t}catch(e){t=e}return(e=t.stack)?String(e):null},goog.debug.getStacktrace=function(e){var t;return goog.debug.FORCE_SLOPPY_STACKS||(t=goog.debug.getNativeStackTrace_(e||goog.debug.getStacktrace)),t||(t=goog.debug.getStacktraceHelper_(e||arguments.callee.caller,[])),t},goog.debug.getStacktraceHelper_=function(e,t){var n=[];if(goog.array.contains(t,e))n.push("[...circular reference...]");else if(e&&t.length<goog.debug.MAX_STACK_DEPTH){n.push(goog.debug.getFunctionName(e)+"(");for(var o=e.arguments,r=0;o&&r<o.length;r++){0<r&&n.push(", ");var i=o[r];switch(typeof i){case"object":i=i?"object":"null";break;case"string":break;case"number":i=String(i);break;case"boolean":i=i?"true":"false";break;case"function":i=(i=goog.debug.getFunctionName(i))?i:"[fn]";break;default:i=typeof i}40<i.length&&(i=i.substr(0,40)+"..."),n.push(i)}t.push(e),n.push(")\n");try{n.push(goog.debug.getStacktraceHelper_(e.caller,t))}catch(e){n.push("[exception trying to get caller]\n")}}else e?n.push("[...long stack...]"):n.push("[end]");return n.join("")},goog.debug.getFunctionName=function(e){if(goog.debug.fnNameCache_[e])return goog.debug.fnNameCache_[e];if(e=String(e),!goog.debug.fnNameCache_[e]){var t=/function\s+([^\(]+)/m.exec(e);goog.debug.fnNameCache_[e]=t?t[1]:"[Anonymous]"}return goog.debug.fnNameCache_[e]},goog.debug.makeWhitespaceVisible=function(e){return e.replace(/ /g,"[_]").replace(/\f/g,"[f]").replace(/\n/g,"[n]\n").replace(/\r/g,"[r]").replace(/\t/g,"[t]")},goog.debug.runtimeType=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.debug.fnNameCache_={},goog.debug.freezeInternal_=goog.DEBUG&&Object.freeze||function(e){return e},goog.debug.freeze=function(e){return goog.debug.freezeInternal_(e)},goog.events={},$jscomp.scope.purify=function(e){return{valueOf:e}.valueOf()},goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("8")||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!!(goog.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!goog.global.navigator||!goog.global.navigator.maxTouchPoints&&!goog.global.navigator.msMaxTouchPoints),POINTER_EVENTS:"PointerEvent"in goog.global,MSPOINTER_EVENTS:"MSPointerEvent"in goog.global&&!(!goog.global.navigator||!goog.global.navigator.msPointerEnabled),PASSIVE_EVENTS:(0,$jscomp.scope.purify)((function(){if(!goog.global.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{goog.global.addEventListener("test",goog.nullFunction,t),goog.global.removeEventListener("test",goog.nullFunction,t)}catch(e){}return e}))},goog.events.EventId=function(e){this.id=e},goog.events.EventId.prototype.toString=function(){return this.id},goog.events.Event=function(e,t){this.type=e instanceof goog.events.EventId?String(e):e,this.currentTarget=this.target=t,this.defaultPrevented=this.propagationStopped_=!1,this.returnValue_=!0},goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0},goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0,this.returnValue_=!1},goog.events.Event.stopPropagation=function(e){e.stopPropagation()},goog.events.Event.preventDefault=function(e){e.preventDefault()},goog.events.getVendorPrefixedName_=function(e){return goog.userAgent.WEBKIT?"webkit"+e:goog.userAgent.OPERA?"o"+e.toLowerCase():e.toLowerCase()},goog.events.EventType={CLICK:"click",RIGHTCLICK:"rightclick",DBLCLICK:"dblclick",AUXCLICK:"auxclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSECANCEL:"mousecancel",SELECTIONCHANGE:"selectionchange",SELECTSTART:"selectstart",WHEEL:"wheel",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:"focusin",FOCUSOUT:"focusout",CHANGE:"change",RESET:"reset",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONSOLEMESSAGE:"consolemessage",CONTEXTMENU:"contextmenu",DEVICECHANGE:"devicechange",DEVICEMOTION:"devicemotion",DEVICEORIENTATION:"deviceorientation",DOMCONTENTLOADED:"DOMContentLoaded",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",ORIENTATIONCHANGE:"orientationchange",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",CANPLAY:"canplay",CANPLAYTHROUGH:"canplaythrough",DURATIONCHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",LOADEDDATA:"loadeddata",LOADEDMETADATA:"loadedmetadata",PAUSE:"pause",PLAY:"play",PLAYING:"playing",PROGRESS:"progress",RATECHANGE:"ratechange",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIMEUPDATE:"timeupdate",VOLUMECHANGE:"volumechange",WAITING:"waiting",SOURCEOPEN:"sourceopen",SOURCEENDED:"sourceended",SOURCECLOSED:"sourceclosed",ABORT:"abort",UPDATE:"update",UPDATESTART:"updatestart",UPDATEEND:"updateend",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",INSTALL:"install",ACTIVATE:"activate",FETCH:"fetch",FOREIGNFETCH:"foreignfetch",MESSAGEERROR:"messageerror",STATECHANGE:"statechange",UPDATEFOUND:"updatefound",CONTROLLERCHANGE:"controllerchange",ANIMATIONSTART:goog.events.getVendorPrefixedName_("AnimationStart"),ANIMATIONEND:goog.events.getVendorPrefixedName_("AnimationEnd"),ANIMATIONITERATION:goog.events.getVendorPrefixedName_("AnimationIteration"),TRANSITIONEND:goog.events.getVendorPrefixedName_("TransitionEnd"),POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTERCANCEL:"pointercancel",POINTERMOVE:"pointermove",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERENTER:"MSPointerEnter",MSPOINTERHOVER:"MSPointerHover",MSPOINTERLEAVE:"MSPointerLeave",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROUT:"MSPointerOut",MSPOINTEROVER:"MSPointerOver",MSPOINTERUP:"MSPointerUp",TEXT:"text",TEXTINPUT:goog.userAgent.IE?"textinput":"textInput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",BEFOREINPUT:"beforeinput",EXIT:"exit",LOADABORT:"loadabort",LOADCOMMIT:"loadcommit",LOADREDIRECT:"loadredirect",LOADSTART:"loadstart",LOADSTOP:"loadstop",RESPONSIVE:"responsive",SIZECHANGED:"sizechanged",UNRESPONSIVE:"unresponsive",VISIBILITYCHANGE:"visibilitychange",STORAGE:"storage",DOMSUBTREEMODIFIED:"DOMSubtreeModified",DOMNODEINSERTED:"DOMNodeInserted",DOMNODEREMOVED:"DOMNodeRemoved",DOMNODEREMOVEDFROMDOCUMENT:"DOMNodeRemovedFromDocument",DOMNODEINSERTEDINTODOCUMENT:"DOMNodeInsertedIntoDocument",DOMATTRMODIFIED:"DOMAttrModified",DOMCHARACTERDATAMODIFIED:"DOMCharacterDataModified",BEFOREPRINT:"beforeprint",AFTERPRINT:"afterprint",BEFOREINSTALLPROMPT:"beforeinstallprompt",APPINSTALLED:"appinstalled"},goog.events.getPointerFallbackEventName_=function(e,t,n){return goog.events.BrowserFeature.POINTER_EVENTS?e:goog.events.BrowserFeature.MSPOINTER_EVENTS?t:n},goog.events.PointerFallbackEventType={POINTERDOWN:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERDOWN,goog.events.EventType.MSPOINTERDOWN,goog.events.EventType.MOUSEDOWN),POINTERUP:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERUP,goog.events.EventType.MSPOINTERUP,goog.events.EventType.MOUSEUP),POINTERCANCEL:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERCANCEL,goog.events.EventType.MSPOINTERCANCEL,goog.events.EventType.MOUSECANCEL),POINTERMOVE:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERMOVE,goog.events.EventType.MSPOINTERMOVE,goog.events.EventType.MOUSEMOVE),POINTEROVER:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTEROVER,goog.events.EventType.MSPOINTEROVER,goog.events.EventType.MOUSEOVER),POINTEROUT:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTEROUT,goog.events.EventType.MSPOINTEROUT,goog.events.EventType.MOUSEOUT),POINTERENTER:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERENTER,goog.events.EventType.MSPOINTERENTER,goog.events.EventType.MOUSEENTER),POINTERLEAVE:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERLEAVE,goog.events.EventType.MSPOINTERLEAVE,goog.events.EventType.MOUSELEAVE)},goog.events.PointerTouchFallbackEventType={POINTERDOWN:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERDOWN,goog.events.EventType.MSPOINTERDOWN,goog.events.EventType.TOUCHSTART),POINTERUP:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERUP,goog.events.EventType.MSPOINTERUP,goog.events.EventType.TOUCHEND),POINTERCANCEL:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERCANCEL,goog.events.EventType.MSPOINTERCANCEL,goog.events.EventType.TOUCHCANCEL),POINTERMOVE:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERMOVE,goog.events.EventType.MSPOINTERMOVE,goog.events.EventType.TOUCHMOVE)},goog.events.PointerAsMouseEventType={MOUSEDOWN:goog.events.PointerFallbackEventType.POINTERDOWN,MOUSEUP:goog.events.PointerFallbackEventType.POINTERUP,MOUSECANCEL:goog.events.PointerFallbackEventType.POINTERCANCEL,MOUSEMOVE:goog.events.PointerFallbackEventType.POINTERMOVE,MOUSEOVER:goog.events.PointerFallbackEventType.POINTEROVER,MOUSEOUT:goog.events.PointerFallbackEventType.POINTEROUT,MOUSEENTER:goog.events.PointerFallbackEventType.POINTERENTER,MOUSELEAVE:goog.events.PointerFallbackEventType.POINTERLEAVE},goog.events.MouseAsMouseEventType={MOUSEDOWN:goog.events.EventType.MOUSEDOWN,MOUSEUP:goog.events.EventType.MOUSEUP,MOUSECANCEL:goog.events.EventType.MOUSECANCEL,MOUSEMOVE:goog.events.EventType.MOUSEMOVE,MOUSEOVER:goog.events.EventType.MOUSEOVER,MOUSEOUT:goog.events.EventType.MOUSEOUT,MOUSEENTER:goog.events.EventType.MOUSEENTER,MOUSELEAVE:goog.events.EventType.MOUSELEAVE},goog.events.PointerAsTouchEventType={TOUCHCANCEL:goog.events.PointerTouchFallbackEventType.POINTERCANCEL,TOUCHEND:goog.events.PointerTouchFallbackEventType.POINTERUP,TOUCHMOVE:goog.events.PointerTouchFallbackEventType.POINTERMOVE,TOUCHSTART:goog.events.PointerTouchFallbackEventType.POINTERDOWN},goog.events.USE_LAYER_XY_AS_OFFSET_XY=!1,goog.events.BrowserEvent=function(e,t){goog.events.Event.call(this,e?e.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.platformModifierKey=!1,this.pointerId=0,this.pointerType="",this.event_=null,e&&this.init(e,t)},goog.inherits(goog.events.BrowserEvent,goog.events.Event),goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2},goog.events.BrowserEvent.PointerType={MOUSE:"mouse",PEN:"pen",TOUCH:"touch"},goog.events.BrowserEvent.IEButtonMap=goog.debug.freeze([1,4,2]),goog.events.BrowserEvent.IE_BUTTON_MAP=goog.events.BrowserEvent.IEButtonMap,goog.events.BrowserEvent.IE_POINTER_TYPE_MAP=goog.debug.freeze({2:goog.events.BrowserEvent.PointerType.TOUCH,3:goog.events.BrowserEvent.PointerType.PEN,4:goog.events.BrowserEvent.PointerType.MOUSE}),goog.events.BrowserEvent.prototype.init=function(e,t){var n=this.type=e.type,o=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.currentTarget=t,(t=e.relatedTarget)?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(t,"nodeName")||(t=null)):n==goog.events.EventType.MOUSEOVER?t=e.fromElement:n==goog.events.EventType.MOUSEOUT&&(t=e.toElement),this.relatedTarget=t,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(goog.events.USE_LAYER_XY_AS_OFFSET_XY?(this.offsetX=void 0!==e.layerX?e.layerX:e.offsetX,this.offsetY=void 0!==e.layerY?e.layerY:e.offsetY):(this.offsetX=goog.userAgent.WEBKIT||void 0!==e.offsetX?e.offsetX:e.layerX,this.offsetY=goog.userAgent.WEBKIT||void 0!==e.offsetY?e.offsetY:e.layerY),this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.keyCode=e.keyCode||0,this.key=e.key||"",this.charCode=e.charCode||("keypress"==n?e.keyCode:0),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.platformModifierKey=goog.userAgent.MAC?e.metaKey:e.ctrlKey,this.pointerId=e.pointerId||0,this.pointerType=goog.events.BrowserEvent.getPointerType_(e),this.state=e.state,this.event_=e,e.defaultPrevented&&this.preventDefault()},goog.events.BrowserEvent.prototype.isButton=function(e){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==e:"click"==this.type?e==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IE_BUTTON_MAP[e])},goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)},goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this),this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0},goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var e=this.event_;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}},goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_},goog.events.BrowserEvent.getPointerType_=function(e){return"string"==typeof e.pointerType?e.pointerType:goog.events.BrowserEvent.IE_POINTER_TYPE_MAP[e.pointerType]||""},goog.events.Listenable=function(){},goog.events.Listenable.IMPLEMENTED_BY_PROP="closure_listenable_"+(1e6*Math.random()|0),goog.events.Listenable.addImplementation=function(e){e.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=!0},goog.events.Listenable.isImplementedBy=function(e){return!(!e||!e[goog.events.Listenable.IMPLEMENTED_BY_PROP])},goog.events.ListenableKey=function(){},goog.events.ListenableKey.counter_=0,goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_},goog.events.Listener=function(e,t,n,o,r,i){goog.events.Listener.ENABLE_MONITORING&&(this.creationStack=Error().stack),this.listener=e,this.proxy=t,this.src=n,this.type=o,this.capture=!!r,this.handler=i,this.key=goog.events.ListenableKey.reserveKey(),this.removed=this.callOnce=!1},goog.events.Listener.ENABLE_MONITORING=!1,goog.events.Listener.prototype.markAsRemoved=function(){this.removed=!0,this.handler=this.src=this.proxy=this.listener=null},goog.events.ListenerMap=function(e){this.src=e,this.listeners={},this.typeCount_=0},goog.events.ListenerMap.prototype.getTypeCount=function(){return this.typeCount_},goog.events.ListenerMap.prototype.getListenerCount=function(){var e,t=0;for(e in this.listeners)t+=this.listeners[e].length;return t},goog.events.ListenerMap.prototype.add=function(e,t,n,o,r){var i=e.toString();(e=this.listeners[i])||(e=this.listeners[i]=[],this.typeCount_++);var s=goog.events.ListenerMap.findListenerIndex_(e,t,o,r);return-1<s?(t=e[s],n||(t.callOnce=!1)):((t=new goog.events.Listener(t,null,this.src,i,!!o,r)).callOnce=n,e.push(t)),t},goog.events.ListenerMap.prototype.remove=function(e,t,n,o){if(!((e=e.toString())in this.listeners))return!1;var r=this.listeners[e];return-1<(t=goog.events.ListenerMap.findListenerIndex_(r,t,n,o))&&(r[t].markAsRemoved(),goog.array.removeAt(r,t),0==r.length&&(delete this.listeners[e],this.typeCount_--),!0)},goog.events.ListenerMap.prototype.removeByKey=function(e){var t=e.type;if(!(t in this.listeners))return!1;var n=goog.array.remove(this.listeners[t],e);return n&&(e.markAsRemoved(),0==this.listeners[t].length&&(delete this.listeners[t],this.typeCount_--)),n},goog.events.ListenerMap.prototype.removeAll=function(e){e=e&&e.toString();var t,n=0;for(t in this.listeners)if(!e||t==e){for(var o=this.listeners[t],r=0;r<o.length;r++)++n,o[r].markAsRemoved();delete this.listeners[t],this.typeCount_--}return n},goog.events.ListenerMap.prototype.getListeners=function(e,t){var n=[];if(e=this.listeners[e.toString()])for(var o=0;o<e.length;++o){var r=e[o];r.capture==t&&n.push(r)}return n},goog.events.ListenerMap.prototype.getListener=function(e,t,n,o){var r=-1;return(e=this.listeners[e.toString()])&&(r=goog.events.ListenerMap.findListenerIndex_(e,t,n,o)),-1<r?e[r]:null},goog.events.ListenerMap.prototype.hasListener=function(e,t){var n=void 0!==e,o=n?e.toString():"",r=void 0!==t;return goog.object.some(this.listeners,(function(e,i){for(i=0;i<e.length;++i)if(!(n&&e[i].type!=o||r&&e[i].capture!=t))return!0;return!1}))},goog.events.ListenerMap.findListenerIndex_=function(e,t,n,o){for(var r=0;r<e.length;++r){var i=e[r];if(!i.removed&&i.listener==t&&i.capture==!!n&&i.handler==o)return r}return-1},goog.events.LISTENER_MAP_PROP_="closure_lm_"+(1e6*Math.random()|0),goog.events.onString_="on",goog.events.onStringMap_={},goog.events.CaptureSimulationMode={OFF_AND_FAIL:0,OFF_AND_SILENT:1,ON:2},goog.events.CAPTURE_SIMULATION_MODE=2,goog.events.listenerCountEstimate_=0,goog.events.listen=function(e,t,n,o,r){if(o&&o.once)return goog.events.listenOnce(e,t,n,o,r);if(goog.isArray(t)){for(var i=0;i<t.length;i++)goog.events.listen(e,t[i],n,o,r);return null}return n=goog.events.wrapListener(n),goog.events.Listenable.isImplementedBy(e)?(o=goog.isObject(o)?!!o.capture:!!o,e.listen(t,n,o,r)):goog.events.listen_(e,t,n,!1,o,r)},goog.events.listen_=function(e,t,n,o,r,i){if(!t)throw Error("Invalid event type");var s=goog.isObject(r)?!!r.capture:!!r;if(s&&!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_FAIL)return goog.asserts.fail("Can not register capture listener in IE8-."),null;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_SILENT)return null}var a=goog.events.getListenerMap_(e);if(a||(e[goog.events.LISTENER_MAP_PROP_]=a=new goog.events.ListenerMap(e)),(n=a.add(t,n,o,s,i)).proxy)return n;if(o=goog.events.getProxy(),n.proxy=o,o.src=e,o.listener=n,e.addEventListener)goog.events.BrowserFeature.PASSIVE_EVENTS||(r=s),void 0===r&&(r=!1),e.addEventListener(t.toString(),o,r);else if(e.attachEvent)e.attachEvent(goog.events.getOnString_(t.toString()),o);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");goog.asserts.assert("change"===t,"MediaQueryList only has a change event"),e.addListener(o)}return goog.events.listenerCountEstimate_++,n},goog.events.getProxy=function(){var e=goog.events.handleBrowserEvent_,t=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t},goog.events.listenOnce=function(e,t,n,o,r){if(goog.isArray(t)){for(var i=0;i<t.length;i++)goog.events.listenOnce(e,t[i],n,o,r);return null}return n=goog.events.wrapListener(n),goog.events.Listenable.isImplementedBy(e)?(o=goog.isObject(o)?!!o.capture:!!o,e.listenOnce(t,n,o,r)):goog.events.listen_(e,t,n,!0,o,r)},goog.events.listenWithWrapper=function(e,t,n,o,r){t.listen(e,n,o,r)},goog.events.unlisten=function(e,t,n,o,r){if(goog.isArray(t)){for(var i=0;i<t.length;i++)goog.events.unlisten(e,t[i],n,o,r);return null}return o=goog.isObject(o)?!!o.capture:!!o,n=goog.events.wrapListener(n),goog.events.Listenable.isImplementedBy(e)?e.unlisten(t,n,o,r):!!e&&(!(!(e=goog.events.getListenerMap_(e))||!(t=e.getListener(t,n,o,r)))&&goog.events.unlistenByKey(t))},goog.events.unlistenByKey=function(e){if("number"==typeof e||!e||e.removed)return!1;var t=e.src;if(goog.events.Listenable.isImplementedBy(t))return t.unlistenByKey(e);var n=e.type,o=e.proxy;return t.removeEventListener?t.removeEventListener(n,o,e.capture):t.detachEvent?t.detachEvent(goog.events.getOnString_(n),o):t.addListener&&t.removeListener&&t.removeListener(o),goog.events.listenerCountEstimate_--,(n=goog.events.getListenerMap_(t))?(n.removeByKey(e),0==n.getTypeCount()&&(n.src=null,t[goog.events.LISTENER_MAP_PROP_]=null)):e.markAsRemoved(),!0},goog.events.unlistenWithWrapper=function(e,t,n,o,r){t.unlisten(e,n,o,r)},goog.events.removeAll=function(e,t){if(!e)return 0;if(goog.events.Listenable.isImplementedBy(e))return e.removeAllListeners(t);if(!(e=goog.events.getListenerMap_(e)))return 0;var n=0;for(var o in t=t&&t.toString(),e.listeners)if(!t||o==t)for(var r=e.listeners[o].concat(),i=0;i<r.length;++i)goog.events.unlistenByKey(r[i])&&++n;return n},goog.events.getListeners=function(e,t,n){return goog.events.Listenable.isImplementedBy(e)||e&&(e=goog.events.getListenerMap_(e))?e.getListeners(t,n):[]},goog.events.getListener=function(e,t,n,o,r){return n=goog.events.wrapListener(n),o=!!o,goog.events.Listenable.isImplementedBy(e)||e&&(e=goog.events.getListenerMap_(e))?e.getListener(t,n,o,r):null},goog.events.hasListener=function(e,t,n){return(goog.events.Listenable.isImplementedBy(e)||!!(e=goog.events.getListenerMap_(e)))&&e.hasListener(t,n)},goog.events.expose=function(e){var t,n=[];for(t in e)e[t]&&e[t].id?n.push(t+" = "+e[t]+" ("+e[t].id+")"):n.push(t+" = "+e[t]);return n.join("\n")},goog.events.getOnString_=function(e){return e in goog.events.onStringMap_?goog.events.onStringMap_[e]:goog.events.onStringMap_[e]=goog.events.onString_+e},goog.events.fireListeners=function(e,t,n,o){return goog.events.Listenable.isImplementedBy(e)?e.fireListeners(t,n,o):goog.events.fireListeners_(e,t,n,o)},goog.events.fireListeners_=function(e,t,n,o){var r=!0;if((e=goog.events.getListenerMap_(e))&&(t=e.listeners[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var i=t[e];i&&i.capture==n&&!i.removed&&(i=goog.events.fireListener(i,o),r=r&&!1!==i)}return r},goog.events.fireListener=function(e,t){var n=e.listener,o=e.handler||e.src;return e.callOnce&&goog.events.unlistenByKey(e),n.call(o,t)},goog.events.getTotalListenerCount=function(){return goog.events.listenerCountEstimate_},goog.events.dispatchEvent=function(e,t){return goog.asserts.assert(goog.events.Listenable.isImplementedBy(e),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance."),e.dispatchEvent(t)},goog.events.protectBrowserEventEntryPoint=function(e){goog.events.handleBrowserEvent_=e.protectEntryPoint(goog.events.handleBrowserEvent_)},goog.events.handleBrowserEvent_=function(e,t){if(e.removed)return!0;if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){var n=t||goog.getObjectByName("window.event");t=new goog.events.BrowserEvent(n,this);var o=!0;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.ON){if(!goog.events.isMarkedIeEvent_(n)){goog.events.markIeEvent_(n),n=[];for(var r=t.currentTarget;r;r=r.parentNode)n.push(r);for(e=e.type,r=n.length-1;!t.propagationStopped_&&0<=r;r--){t.currentTarget=n[r];var i=goog.events.fireListeners_(n[r],e,!0,t);o=o&&i}for(r=0;!t.propagationStopped_&&r<n.length;r++)t.currentTarget=n[r],i=goog.events.fireListeners_(n[r],e,!1,t),o=o&&i}}else o=goog.events.fireListener(e,t);return o}return goog.events.fireListener(e,new goog.events.BrowserEvent(t,this))},goog.events.markIeEvent_=function(e){var t=!1;if(0==e.keyCode)try{return void(e.keyCode=-1)}catch(e){t=!0}(t||null==e.returnValue)&&(e.returnValue=!0)},goog.events.isMarkedIeEvent_=function(e){return 0>e.keyCode||null!=e.returnValue},goog.events.uniqueIdCounter_=0,goog.events.getUniqueId=function(e){return e+"_"+goog.events.uniqueIdCounter_++},goog.events.getListenerMap_=function(e){return(e=e[goog.events.LISTENER_MAP_PROP_])instanceof goog.events.ListenerMap?e:null},goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+(1e9*Math.random()>>>0),goog.events.wrapListener=function(e){return goog.asserts.assert(e,"Listener can not be null."),goog.isFunction(e)?e:(goog.asserts.assert(e.handleEvent,"An object listener must have handleEvent method."),e[goog.events.LISTENER_WRAPPER_PROP_]||(e[goog.events.LISTENER_WRAPPER_PROP_]=function(t){return e.handleEvent(t)}),e[goog.events.LISTENER_WRAPPER_PROP_])},goog.debug.entryPointRegistry.register((function(e){goog.events.handleBrowserEvent_=e(goog.events.handleBrowserEvent_)})),goog.events.EventHandler=function(e){goog.Disposable.call(this),this.handler_=e,this.keys_={}},goog.inherits(goog.events.EventHandler,goog.Disposable),goog.events.EventHandler.typeArray_=[],goog.events.EventHandler.prototype.listen=function(e,t,n,o){return this.listen_(e,t,n,o)},goog.events.EventHandler.prototype.listenWithScope=function(e,t,n,o,r){return this.listen_(e,t,n,o,r)},goog.events.EventHandler.prototype.listen_=function(e,t,n,o,r){goog.isArray(t)||(t&&(goog.events.EventHandler.typeArray_[0]=t.toString()),t=goog.events.EventHandler.typeArray_);for(var i=0;i<t.length;i++){var s=goog.events.listen(e,t[i],n||this.handleEvent,o||!1,r||this.handler_||this);if(!s)break;this.keys_[s.key]=s}return this},goog.events.EventHandler.prototype.listenOnce=function(e,t,n,o){return this.listenOnce_(e,t,n,o)},goog.events.EventHandler.prototype.listenOnceWithScope=function(e,t,n,o,r){return this.listenOnce_(e,t,n,o,r)},goog.events.EventHandler.prototype.listenOnce_=function(e,t,n,o,r){if(goog.isArray(t))for(var i=0;i<t.length;i++)this.listenOnce_(e,t[i],n,o,r);else{if(!(e=goog.events.listenOnce(e,t,n||this.handleEvent,o,r||this.handler_||this)))return this;this.keys_[e.key]=e}return this},goog.events.EventHandler.prototype.listenWithWrapper=function(e,t,n,o){return this.listenWithWrapper_(e,t,n,o)},goog.events.EventHandler.prototype.listenWithWrapperAndScope=function(e,t,n,o,r){return this.listenWithWrapper_(e,t,n,o,r)},goog.events.EventHandler.prototype.listenWithWrapper_=function(e,t,n,o,r){return t.listen(e,n,o,r||this.handler_||this,this),this},goog.events.EventHandler.prototype.getListenerCount=function(){var e,t=0;for(e in this.keys_)Object.prototype.hasOwnProperty.call(this.keys_,e)&&t++;return t},goog.events.EventHandler.prototype.unlisten=function(e,t,n,o,r){if(goog.isArray(t))for(var i=0;i<t.length;i++)this.unlisten(e,t[i],n,o,r);else o=goog.isObject(o)?!!o.capture:!!o,(e=goog.events.getListener(e,t,n||this.handleEvent,o,r||this.handler_||this))&&(goog.events.unlistenByKey(e),delete this.keys_[e.key]);return this},goog.events.EventHandler.prototype.unlistenWithWrapper=function(e,t,n,o,r){return t.unlisten(e,n,o,r||this.handler_||this,this),this},goog.events.EventHandler.prototype.removeAll=function(){goog.object.forEach(this.keys_,(function(e,t){this.keys_.hasOwnProperty(t)&&goog.events.unlistenByKey(e)}),this),this.keys_={}},goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this),this.removeAll()},goog.events.EventHandler.prototype.handleEvent=function(e){throw Error("EventHandler.handleEvent not implemented")},goog.events.EventTarget=function(){goog.Disposable.call(this),this.eventTargetListeners_=new goog.events.ListenerMap(this),this.actualEventTarget_=this,this.parentEventTarget_=null},goog.inherits(goog.events.EventTarget,goog.Disposable),goog.events.Listenable.addImplementation(goog.events.EventTarget),goog.events.EventTarget.MAX_ANCESTORS_=1e3,goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_},goog.events.EventTarget.prototype.setParentEventTarget=function(e){this.parentEventTarget_=e},goog.events.EventTarget.prototype.addEventListener=function(e,t,n,o){goog.events.listen(this,e,t,n,o)},goog.events.EventTarget.prototype.removeEventListener=function(e,t,n,o){goog.events.unlisten(this,e,t,n,o)},goog.events.EventTarget.prototype.dispatchEvent=function(e){this.assertInitialized_();var t=this.getParentEventTarget();if(t)for(var n=[],o=1;t;t=t.getParentEventTarget())n.push(t),goog.asserts.assert(++o<goog.events.EventTarget.MAX_ANCESTORS_,"infinite loop");return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_,e,n)},goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this),this.removeAllListeners(),this.parentEventTarget_=null},goog.events.EventTarget.prototype.listen=function(e,t,n,o){return this.assertInitialized_(),this.eventTargetListeners_.add(String(e),t,!1,n,o)},goog.events.EventTarget.prototype.listenOnce=function(e,t,n,o){return this.eventTargetListeners_.add(String(e),t,!0,n,o)},goog.events.EventTarget.prototype.unlisten=function(e,t,n,o){return this.eventTargetListeners_.remove(String(e),t,n,o)},goog.events.EventTarget.prototype.unlistenByKey=function(e){return this.eventTargetListeners_.removeByKey(e)},goog.events.EventTarget.prototype.removeAllListeners=function(e){return this.eventTargetListeners_?this.eventTargetListeners_.removeAll(e):0},goog.events.EventTarget.prototype.fireListeners=function(e,t,n){if(!(e=this.eventTargetListeners_.listeners[String(e)]))return!0;e=e.concat();for(var o=!0,r=0;r<e.length;++r){var i=e[r];if(i&&!i.removed&&i.capture==t){var s=i.listener,a=i.handler||i.src;i.callOnce&&this.unlistenByKey(i),o=!1!==s.call(a,n)&&o}}return o&&0!=n.returnValue_},goog.events.EventTarget.prototype.getListeners=function(e,t){return this.eventTargetListeners_.getListeners(String(e),t)},goog.events.EventTarget.prototype.getListener=function(e,t,n,o){return this.eventTargetListeners_.getListener(String(e),t,n,o)},goog.events.EventTarget.prototype.hasListener=function(e,t){return this.eventTargetListeners_.hasListener(void 0!==e?String(e):void 0,t)},goog.events.EventTarget.prototype.setTargetForTesting=function(e){this.actualEventTarget_=e},goog.events.EventTarget.prototype.assertInitialized_=function(){goog.asserts.assert(this.eventTargetListeners_,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")},goog.events.EventTarget.dispatchEventInternal_=function(e,t,n){var o=t.type||t;if("string"==typeof t)t=new goog.events.Event(t,e);else if(t instanceof goog.events.Event)t.target=t.target||e;else{var r=t;t=new goog.events.Event(o,e),goog.object.extend(t,r)}if(r=!0,n)for(var i=n.length-1;!t.propagationStopped_&&0<=i;i--){var s=t.currentTarget=n[i];r=s.fireListeners(o,!0,t)&&r}if(t.propagationStopped_||(r=(s=t.currentTarget=e).fireListeners(o,!0,t)&&r,t.propagationStopped_||(r=s.fireListeners(o,!1,t)&&r)),n)for(i=0;!t.propagationStopped_&&i<n.length;i++)r=(s=t.currentTarget=n[i]).fireListeners(o,!1,t)&&r;return r},goog.ui={},goog.ui.IdGenerator=function(){},goog.addSingletonGetter(goog.ui.IdGenerator),goog.ui.IdGenerator.prototype.nextId_=0,goog.ui.IdGenerator.prototype.idPrefix_="",goog.ui.IdGenerator.prototype.setIdPrefix=function(e){this.idPrefix_=e},goog.ui.IdGenerator.prototype.getNextUniqueId=function(){return this.idPrefix_+":"+(this.nextId_++).toString(36)},goog.ui.Component=function(e){goog.events.EventTarget.call(this),this.dom_=e||goog.dom.getDomHelper(),this.rightToLeft_=goog.ui.Component.defaultRightToLeft_,this.id_=null,this.inDocument_=!1,this.element_=null,this.googUiComponentHandler_=void 0,this.childIndex_=this.children_=this.parent_=this.model_=null,this.pointerEventsEnabled_=this.wasDecorated_=!1},goog.inherits(goog.ui.Component,goog.events.EventTarget),goog.ui.Component.ALLOW_DETACHED_DECORATION=!1,goog.ui.Component.prototype.idGenerator_=goog.ui.IdGenerator.getInstance(),goog.ui.Component.DEFAULT_BIDI_DIR=0,goog.ui.Component.defaultRightToLeft_=1!=goog.ui.Component.DEFAULT_BIDI_DIR&&(-1==goog.ui.Component.DEFAULT_BIDI_DIR||null),goog.ui.Component.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",HIDE:"hide",DISABLE:"disable",ENABLE:"enable",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight",ACTIVATE:"activate",DEACTIVATE:"deactivate",SELECT:"select",UNSELECT:"unselect",CHECK:"check",UNCHECK:"uncheck",FOCUS:"focus",BLUR:"blur",OPEN:"open",CLOSE:"close",ENTER:"enter",LEAVE:"leave",ACTION:"action",CHANGE:"change"},goog.ui.Component.Error={NOT_SUPPORTED:"Method not supported",DECORATE_INVALID:"Invalid element to decorate",ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",NOT_OUR_CHILD:"Child is not in parent component",NOT_IN_DOCUMENT:"Operation not supported while component is not in document",STATE_INVALID:"Invalid component state"},goog.ui.Component.State={ALL:255,DISABLED:1,HOVER:2,ACTIVE:4,SELECTED:8,CHECKED:16,FOCUSED:32,OPENED:64},goog.ui.Component.getStateTransitionEvent=function(e,t){switch(e){case goog.ui.Component.State.DISABLED:return t?goog.ui.Component.EventType.DISABLE:goog.ui.Component.EventType.ENABLE;case goog.ui.Component.State.HOVER:return t?goog.ui.Component.EventType.HIGHLIGHT:goog.ui.Component.EventType.UNHIGHLIGHT;case goog.ui.Component.State.ACTIVE:return t?goog.ui.Component.EventType.ACTIVATE:goog.ui.Component.EventType.DEACTIVATE;case goog.ui.Component.State.SELECTED:return t?goog.ui.Component.EventType.SELECT:goog.ui.Component.EventType.UNSELECT;case goog.ui.Component.State.CHECKED:return t?goog.ui.Component.EventType.CHECK:goog.ui.Component.EventType.UNCHECK;case goog.ui.Component.State.FOCUSED:return t?goog.ui.Component.EventType.FOCUS:goog.ui.Component.EventType.BLUR;case goog.ui.Component.State.OPENED:return t?goog.ui.Component.EventType.OPEN:goog.ui.Component.EventType.CLOSE}throw Error(goog.ui.Component.Error.STATE_INVALID)},goog.ui.Component.setDefaultRightToLeft=function(e){goog.ui.Component.defaultRightToLeft_=e},goog.ui.Component.prototype.getId=function(){return this.id_||(this.id_=this.idGenerator_.getNextUniqueId())},goog.ui.Component.prototype.setId=function(e){this.parent_&&this.parent_.childIndex_&&(goog.object.remove(this.parent_.childIndex_,this.id_),goog.object.add(this.parent_.childIndex_,e,this)),this.id_=e},goog.ui.Component.prototype.getElement=function(){return this.element_},goog.ui.Component.prototype.getElementStrict=function(){var e=this.element_;return goog.asserts.assert(e,"Can not call getElementStrict before rendering/decorating."),e},goog.ui.Component.prototype.setElementInternal=function(e){this.element_=e},goog.ui.Component.prototype.getElementsByClass=function(e){return this.element_?this.dom_.getElementsByClass(e,this.element_):[]},goog.ui.Component.prototype.getElementByClass=function(e){return this.element_?this.dom_.getElementByClass(e,this.element_):null},goog.ui.Component.prototype.getRequiredElementByClass=function(e){var t=this.getElementByClass(e);return goog.asserts.assert(t,"Expected element in component with class: %s",e),t},goog.ui.Component.prototype.getHandler=function(){return this.googUiComponentHandler_||(this.googUiComponentHandler_=new goog.events.EventHandler(this)),goog.asserts.assert(this.googUiComponentHandler_)},goog.ui.Component.prototype.setParent=function(e){if(this==e)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);if(e&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=e)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=e,goog.ui.Component.superClass_.setParentEventTarget.call(this,e)},goog.ui.Component.prototype.getParent=function(){return this.parent_},goog.ui.Component.prototype.setParentEventTarget=function(e){if(this.parent_&&this.parent_!=e)throw Error(goog.ui.Component.Error.NOT_SUPPORTED);goog.ui.Component.superClass_.setParentEventTarget.call(this,e)},goog.ui.Component.prototype.getDomHelper=function(){return this.dom_},goog.ui.Component.prototype.isInDocument=function(){return this.inDocument_},goog.ui.Component.prototype.createDom=function(){this.element_=this.dom_.createElement("DIV")},goog.ui.Component.prototype.render=function(e){this.render_(e)},goog.ui.Component.prototype.renderBefore=function(e){this.render_(e.parentNode,e)},goog.ui.Component.prototype.render_=function(e,t){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.element_||this.createDom(),e?e.insertBefore(this.element_,t||null):this.dom_.getDocument().body.appendChild(this.element_),this.parent_&&!this.parent_.isInDocument()||this.enterDocument()},goog.ui.Component.prototype.decorate=function(e){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(!e||!this.canDecorate(e))throw Error(goog.ui.Component.Error.DECORATE_INVALID);this.wasDecorated_=!0;var t=goog.dom.getOwnerDocument(e);this.dom_&&this.dom_.getDocument()==t||(this.dom_=goog.dom.getDomHelper(e)),this.decorateInternal(e),goog.ui.Component.ALLOW_DETACHED_DECORATION&&!goog.dom.contains(t,e)||this.enterDocument()},goog.ui.Component.prototype.canDecorate=function(e){return!0},goog.ui.Component.prototype.wasDecorated=function(){return this.wasDecorated_},goog.ui.Component.prototype.decorateInternal=function(e){this.element_=e},goog.ui.Component.prototype.enterDocument=function(){this.inDocument_=!0,this.forEachChild((function(e){!e.isInDocument()&&e.getElement()&&e.enterDocument()}))},goog.ui.Component.prototype.exitDocument=function(){this.forEachChild((function(e){e.isInDocument()&&e.exitDocument()})),this.googUiComponentHandler_&&this.googUiComponentHandler_.removeAll(),this.inDocument_=!1},goog.ui.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument(),this.googUiComponentHandler_&&(this.googUiComponentHandler_.dispose(),delete this.googUiComponentHandler_),this.forEachChild((function(e){e.dispose()})),!this.wasDecorated_&&this.element_&&goog.dom.removeNode(this.element_),this.parent_=this.model_=this.element_=this.childIndex_=this.children_=null,goog.ui.Component.superClass_.disposeInternal.call(this)},goog.ui.Component.prototype.makeId=function(e){return this.getId()+"."+e},goog.ui.Component.prototype.makeIds=function(e){var t,n={};for(t in e)n[t]=this.makeId(e[t]);return n},goog.ui.Component.prototype.getModel=function(){return this.model_},goog.ui.Component.prototype.setModel=function(e){this.model_=e},goog.ui.Component.prototype.getFragmentFromId=function(e){return e.substring(this.getId().length+1)},goog.ui.Component.prototype.getElementByFragment=function(e){if(!this.inDocument_)throw Error(goog.ui.Component.Error.NOT_IN_DOCUMENT);return this.dom_.getElement(this.makeId(e))},goog.ui.Component.prototype.addChild=function(e,t){this.addChildAt(e,this.getChildCount(),t)},goog.ui.Component.prototype.addChildAt=function(e,t,n){if(goog.asserts.assert(!!e,"Provided element must not be null."),e.inDocument_&&(n||!this.inDocument_))throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(0>t||t>this.getChildCount())throw Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);this.childIndex_&&this.children_||(this.childIndex_={},this.children_=[]),e.getParent()==this?(goog.object.set(this.childIndex_,e.getId(),e),goog.array.remove(this.children_,e)):goog.object.add(this.childIndex_,e.getId(),e),e.setParent(this),goog.array.insertAt(this.children_,e,t),e.inDocument_&&this.inDocument_&&e.getParent()==this?(t=(n=this.getContentElement()).childNodes[t]||null)!=e.getElement()&&n.insertBefore(e.getElement(),t):n?(this.element_||this.createDom(),t=this.getChildAt(t+1),e.render_(this.getContentElement(),t?t.element_:null)):this.inDocument_&&!e.inDocument_&&e.element_&&e.element_.parentNode&&e.element_.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&e.enterDocument()},goog.ui.Component.prototype.getContentElement=function(){return this.element_},goog.ui.Component.prototype.isRightToLeft=function(){return null==this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.inDocument_?this.element_:this.dom_.getDocument().body)),this.rightToLeft_},goog.ui.Component.prototype.setRightToLeft=function(e){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.rightToLeft_=e},goog.ui.Component.prototype.hasChildren=function(){return!!this.children_&&0!=this.children_.length},goog.ui.Component.prototype.getChildCount=function(){return this.children_?this.children_.length:0},goog.ui.Component.prototype.getChildIds=function(){var e=[];return this.forEachChild((function(t){e.push(t.getId())})),e},goog.ui.Component.prototype.getChild=function(e){return this.childIndex_&&e&&goog.object.get(this.childIndex_,e)||null},goog.ui.Component.prototype.getChildAt=function(e){return this.children_&&this.children_[e]||null},goog.ui.Component.prototype.forEachChild=function(e,t){this.children_&&goog.array.forEach(this.children_,e,t)},goog.ui.Component.prototype.indexOfChild=function(e){return this.children_&&e?goog.array.indexOf(this.children_,e):-1},goog.ui.Component.prototype.removeChild=function(e,t){if(e){var n="string"==typeof e?e:e.getId();e=this.getChild(n),n&&e&&(goog.object.remove(this.childIndex_,n),goog.array.remove(this.children_,e),t&&(e.exitDocument(),e.element_&&goog.dom.removeNode(e.element_)),e.setParent(null))}if(!e)throw Error(goog.ui.Component.Error.NOT_OUR_CHILD);return e},goog.ui.Component.prototype.removeChildAt=function(e,t){return this.removeChild(this.getChildAt(e),t)},goog.ui.Component.prototype.removeChildren=function(e){for(var t=[];this.hasChildren();)t.push(this.removeChildAt(0,e));return t},goog.ui.Component.prototype.pointerEventsEnabled=function(){return this.pointerEventsEnabled_},goog.ui.Component.prototype.setPointerEventsEnabled=function(e){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.pointerEventsEnabled_=e},goog.ui.ControlRenderer=function(){},goog.addSingletonGetter(goog.ui.ControlRenderer),goog.tagUnsealableClass(goog.ui.ControlRenderer),goog.ui.ControlRenderer.getCustomRenderer=function(e,t){return(e=new e).getCssClass=function(){return t},e},goog.ui.ControlRenderer.CSS_CLASS="goog-control",goog.ui.ControlRenderer.IE6_CLASS_COMBINATIONS=[],goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_=goog.object.create(goog.a11y.aria.Role.BUTTON,goog.a11y.aria.State.PRESSED,goog.a11y.aria.Role.CHECKBOX,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.MENU_ITEM,goog.a11y.aria.State.SELECTED,goog.a11y.aria.Role.MENU_ITEM_CHECKBOX,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.MENU_ITEM_RADIO,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.RADIO,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.TAB,goog.a11y.aria.State.SELECTED,goog.a11y.aria.Role.TREEITEM,goog.a11y.aria.State.SELECTED),goog.ui.ControlRenderer.prototype.getAriaRole=function(){},goog.ui.ControlRenderer.prototype.createDom=function(e){return e.getDomHelper().createDom("DIV",this.getClassNames(e).join(" "),e.getContent())},goog.ui.ControlRenderer.prototype.getContentElement=function(e){return e},goog.ui.ControlRenderer.prototype.enableClassName=function(e,t,n){if(e=e.getElement?e.getElement():e){var o=[t];goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")&&(o=this.getAppliedCombinedClassNames_(goog.dom.classlist.get(e),t)).push(t),goog.dom.classlist.enableAll(e,o,n)}},goog.ui.ControlRenderer.prototype.enableExtraClassName=function(e,t,n){this.enableClassName(e,t,n)},goog.ui.ControlRenderer.prototype.canDecorate=function(e){return!0},goog.ui.ControlRenderer.prototype.decorate=function(e,t){t.id&&e.setId(t.id);var n=this.getContentElement(t);n&&n.firstChild?e.setContentInternal(n.firstChild.nextSibling?goog.array.clone(n.childNodes):n.firstChild):e.setContentInternal(null);var o=0,r=this.getCssClass(),i=this.getStructuralCssClass(),s=!1,a=!1,l=!1,c=goog.array.toArray(goog.dom.classlist.get(t));if(goog.array.forEach(c,(function(e){s||e!=r?a||e!=i?o|=this.getStateFromClass(e):a=!0:(s=!0,i==r&&(a=!0)),this.getStateFromClass(e)==goog.ui.Component.State.DISABLED&&(goog.asserts.assertElement(n),goog.dom.isFocusableTabIndex(n)&&goog.dom.setFocusableTabIndex(n,!1))}),this),e.setStateInternal(o),s||(c.push(r),i==r&&(a=!0)),a||c.push(i),(e=e.getExtraClassNames())&&c.push.apply(c,e),goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")){var u=this.getAppliedCombinedClassNames_(c);0<u.length&&(c.push.apply(c,u),l=!0)}return s&&a&&!e&&!l||goog.dom.classlist.set(t,c.join(" ")),t},goog.ui.ControlRenderer.prototype.initializeDom=function(e){e.isRightToLeft()&&this.setRightToLeft(e.getElement(),!0),e.isEnabled()&&this.setFocusable(e,e.isVisible())},goog.ui.ControlRenderer.prototype.setAriaRole=function(e,t){(t=t||this.getAriaRole())&&(goog.asserts.assert(e,"The element passed as a first parameter cannot be null."),t!=goog.a11y.aria.getRole(e)&&goog.a11y.aria.setRole(e,t))},goog.ui.ControlRenderer.prototype.setAriaStates=function(e,t){goog.asserts.assert(e),goog.asserts.assert(t);var n=e.getAriaLabel();null!=n&&this.setAriaLabel(t,n),e.isVisible()||goog.a11y.aria.setState(t,goog.a11y.aria.State.HIDDEN,!e.isVisible()),e.isEnabled()||this.updateAriaState(t,goog.ui.Component.State.DISABLED,!e.isEnabled()),e.isSupportedState(goog.ui.Component.State.SELECTED)&&this.updateAriaState(t,goog.ui.Component.State.SELECTED,e.isSelected()),e.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(t,goog.ui.Component.State.CHECKED,e.isChecked()),e.isSupportedState(goog.ui.Component.State.OPENED)&&this.updateAriaState(t,goog.ui.Component.State.OPENED,e.isOpen())},goog.ui.ControlRenderer.prototype.setAriaLabel=function(e,t){goog.a11y.aria.setLabel(e,t)},goog.ui.ControlRenderer.prototype.setAllowTextSelection=function(e,t){goog.style.setUnselectable(e,!t,!goog.userAgent.IE&&!goog.userAgent.OPERA)},goog.ui.ControlRenderer.prototype.setRightToLeft=function(e,t){this.enableClassName(e,this.getStructuralCssClass()+"-rtl",t)},goog.ui.ControlRenderer.prototype.isFocusable=function(e){var t;return!(!e.isSupportedState(goog.ui.Component.State.FOCUSED)||!(t=e.getKeyEventTarget()))&&goog.dom.isFocusableTabIndex(t)},goog.ui.ControlRenderer.prototype.setFocusable=function(e,t){var n;if(e.isSupportedState(goog.ui.Component.State.FOCUSED)&&(n=e.getKeyEventTarget())){if(!t&&e.isFocused()){try{n.blur()}catch(e){}e.isFocused()&&e.handleBlur(null)}goog.dom.isFocusableTabIndex(n)!=t&&goog.dom.setFocusableTabIndex(n,t)}},goog.ui.ControlRenderer.prototype.setVisible=function(e,t){goog.style.setElementShown(e,t),e&&goog.a11y.aria.setState(e,goog.a11y.aria.State.HIDDEN,!t)},goog.ui.ControlRenderer.prototype.setState=function(e,t,n){var o=e.getElement();if(o){var r=this.getClassForState(t);r&&this.enableClassName(e,r,n),this.updateAriaState(o,t,n)}},goog.ui.ControlRenderer.prototype.updateAriaState=function(e,t,n){goog.ui.ControlRenderer.ariaAttributeMap_||(goog.ui.ControlRenderer.ariaAttributeMap_=goog.object.create(goog.ui.Component.State.DISABLED,goog.a11y.aria.State.DISABLED,goog.ui.Component.State.SELECTED,goog.a11y.aria.State.SELECTED,goog.ui.Component.State.CHECKED,goog.a11y.aria.State.CHECKED,goog.ui.Component.State.OPENED,goog.a11y.aria.State.EXPANDED)),goog.asserts.assert(e,"The element passed as a first parameter cannot be null."),(t=goog.ui.ControlRenderer.getAriaStateForAriaRole_(e,goog.ui.ControlRenderer.ariaAttributeMap_[t]))&&goog.a11y.aria.setState(e,t,n)},goog.ui.ControlRenderer.getAriaStateForAriaRole_=function(e,t){return(e=goog.a11y.aria.getRole(e))?(e=goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_[e]||t,goog.ui.ControlRenderer.isAriaState_(t)?e:t):t},goog.ui.ControlRenderer.isAriaState_=function(e){return e==goog.a11y.aria.State.CHECKED||e==goog.a11y.aria.State.SELECTED},goog.ui.ControlRenderer.prototype.setContent=function(e,t){var n=this.getContentElement(e);n&&(goog.dom.removeChildren(n),t&&("string"==typeof t?goog.dom.setTextContent(n,t):(e=function(e){if(e){var t=goog.dom.getOwnerDocument(n);n.appendChild("string"==typeof e?t.createTextNode(e):e)}},goog.isArray(t)?goog.array.forEach(t,e):!goog.isArrayLike(t)||"nodeType"in t?e(t):goog.array.forEach(goog.array.clone(t),e))))},goog.ui.ControlRenderer.prototype.getKeyEventTarget=function(e){return e.getElement()},goog.ui.ControlRenderer.prototype.getCssClass=function(){return goog.ui.ControlRenderer.CSS_CLASS},goog.ui.ControlRenderer.prototype.getIe6ClassCombinations=function(){return[]},goog.ui.ControlRenderer.prototype.getStructuralCssClass=function(){return this.getCssClass()},goog.ui.ControlRenderer.prototype.getClassNames=function(e){var t=this.getCssClass(),n=[t],o=this.getStructuralCssClass();return o!=t&&n.push(o),t=this.getClassNamesForState(e.getState()),n.push.apply(n,t),(e=e.getExtraClassNames())&&n.push.apply(n,e),goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")&&n.push.apply(n,this.getAppliedCombinedClassNames_(n)),n},goog.ui.ControlRenderer.prototype.getAppliedCombinedClassNames_=function(e,t){var n=[];return t&&(e=goog.array.concat(e,[t])),goog.array.forEach(this.getIe6ClassCombinations(),(function(o){!goog.array.every(o,goog.partial(goog.array.contains,e))||t&&!goog.array.contains(o,t)||n.push(o.join("_"))})),n},goog.ui.ControlRenderer.prototype.getClassNamesForState=function(e){for(var t=[];e;){var n=e&-e;t.push(this.getClassForState(n)),e&=~n}return t},goog.ui.ControlRenderer.prototype.getClassForState=function(e){return this.classByState_||this.createClassByStateMap_(),this.classByState_[e]},goog.ui.ControlRenderer.prototype.getStateFromClass=function(e){return this.stateByClass_||this.createStateByClassMap_(),e=parseInt(this.stateByClass_[e],10),isNaN(e)?0:e},goog.ui.ControlRenderer.prototype.createClassByStateMap_=function(){var e=this.getStructuralCssClass(),t=!goog.string.contains(goog.string.normalizeWhitespace(e)," ");goog.asserts.assert(t,"ControlRenderer has an invalid css class: '"+e+"'"),this.classByState_=goog.object.create(goog.ui.Component.State.DISABLED,e+"-disabled",goog.ui.Component.State.HOVER,e+"-hover",goog.ui.Component.State.ACTIVE,e+"-active",goog.ui.Component.State.SELECTED,e+"-selected",goog.ui.Component.State.CHECKED,e+"-checked",goog.ui.Component.State.FOCUSED,e+"-focused",goog.ui.Component.State.OPENED,e+"-open")},goog.ui.ControlRenderer.prototype.createStateByClassMap_=function(){this.classByState_||this.createClassByStateMap_(),this.stateByClass_=goog.object.transpose(this.classByState_)},goog.ui.MenuSeparatorRenderer=function(){goog.ui.ControlRenderer.call(this)},goog.inherits(goog.ui.MenuSeparatorRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.MenuSeparatorRenderer),goog.ui.MenuSeparatorRenderer.CSS_CLASS="goog-menuseparator",goog.ui.MenuSeparatorRenderer.prototype.createDom=function(e){return e.getDomHelper().createDom("DIV",this.getCssClass())},goog.ui.MenuSeparatorRenderer.prototype.decorate=function(e,t){if(t.id&&e.setId(t.id),"HR"==t.tagName){var n=t;t=this.createDom(e),goog.dom.insertSiblingBefore(t,n),goog.dom.removeNode(n)}else goog.dom.classlist.add(t,this.getCssClass());return t},goog.ui.MenuSeparatorRenderer.prototype.setContent=function(e,t){},goog.ui.MenuSeparatorRenderer.prototype.getCssClass=function(){return goog.ui.MenuSeparatorRenderer.CSS_CLASS},goog.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,FF_JP_QUOTE:58,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},goog.events.KeyCodes.isTextModifyingKeyEvent=function(e){if(e.altKey&&!e.ctrlKey||e.metaKey||e.keyCode>=goog.events.KeyCodes.F1&&e.keyCode<=goog.events.KeyCodes.F12)return!1;if(goog.events.KeyCodes.isCharacterKey(e.keyCode))return!0;switch(e.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.VK_NONAME:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return!1;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return!goog.userAgent.GECKO;default:return e.keyCode<goog.events.KeyCodes.FIRST_MEDIA_KEY||e.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}},goog.events.KeyCodes.firesKeyPressEvent=function(e,t,n,o,r,i){if(goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("525"))return!0;if(goog.userAgent.MAC&&r)return goog.events.KeyCodes.isCharacterKey(e);if(r&&!o)return!1;if(!goog.userAgent.GECKO){"number"==typeof t&&(t=goog.events.KeyCodes.normalizeKeyCode(t));var s=t==goog.events.KeyCodes.CTRL||t==goog.events.KeyCodes.ALT||goog.userAgent.MAC&&t==goog.events.KeyCodes.META,a=t==goog.events.KeyCodes.SHIFT&&(o||i);if((!n||goog.userAgent.MAC)&&s||goog.userAgent.MAC&&a)return!1}if((goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&o&&n)switch(e){case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.TILDE:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:return!1}if(goog.userAgent.IE&&o&&t==e)return!1;switch(e){case goog.events.KeyCodes.ENTER:return!goog.userAgent.GECKO||!i&&!r&&!(n&&o);case goog.events.KeyCodes.ESC:return!(goog.userAgent.WEBKIT||goog.userAgent.EDGE||goog.userAgent.GECKO)}return(!goog.userAgent.GECKO||!(o||r||i))&&goog.events.KeyCodes.isCharacterKey(e)},goog.events.KeyCodes.isCharacterKey=function(e){if(e>=goog.events.KeyCodes.ZERO&&e<=goog.events.KeyCodes.NINE||e>=goog.events.KeyCodes.NUM_ZERO&&e<=goog.events.KeyCodes.NUM_MULTIPLY||e>=goog.events.KeyCodes.A&&e<=goog.events.KeyCodes.Z||(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&0==e)return!0;switch(e){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.PLUS_SIGN:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.AT_SIGN:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.FF_EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.FF_HASH:case goog.events.KeyCodes.FF_JP_QUOTE:return!0;case goog.events.KeyCodes.FF_DASH:return goog.userAgent.GECKO;default:return!1}},goog.events.KeyCodes.normalizeKeyCode=function(e){return goog.userAgent.GECKO?goog.events.KeyCodes.normalizeGeckoKeyCode(e):goog.userAgent.MAC&&goog.userAgent.WEBKIT?goog.events.KeyCodes.normalizeMacWebKitKeyCode(e):e},goog.events.KeyCodes.normalizeGeckoKeyCode=function(e){switch(e){case goog.events.KeyCodes.FF_EQUALS:return goog.events.KeyCodes.EQUALS;case goog.events.KeyCodes.FF_SEMICOLON:return goog.events.KeyCodes.SEMICOLON;case goog.events.KeyCodes.FF_DASH:return goog.events.KeyCodes.DASH;case goog.events.KeyCodes.MAC_FF_META:return goog.events.KeyCodes.META;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return goog.events.KeyCodes.WIN_KEY;default:return e}},goog.events.KeyCodes.normalizeMacWebKitKeyCode=function(e){switch(e){case goog.events.KeyCodes.MAC_WK_CMD_RIGHT:return goog.events.KeyCodes.META;default:return e}},goog.events.KeyHandler=function(e,t){goog.events.EventTarget.call(this),e&&this.attach(e,t)},goog.inherits(goog.events.KeyHandler,goog.events.EventTarget),goog.events.KeyHandler.prototype.element_=null,goog.events.KeyHandler.prototype.keyPressKey_=null,goog.events.KeyHandler.prototype.keyDownKey_=null,goog.events.KeyHandler.prototype.keyUpKey_=null,goog.events.KeyHandler.prototype.lastKey_=-1,goog.events.KeyHandler.prototype.keyCode_=-1,goog.events.KeyHandler.prototype.altKey_=!1,goog.events.KeyHandler.EventType={KEY:"key"},goog.events.KeyHandler.safariKey_={3:goog.events.KeyCodes.ENTER,12:goog.events.KeyCodes.NUMLOCK,63232:goog.events.KeyCodes.UP,63233:goog.events.KeyCodes.DOWN,63234:goog.events.KeyCodes.LEFT,63235:goog.events.KeyCodes.RIGHT,63236:goog.events.KeyCodes.F1,63237:goog.events.KeyCodes.F2,63238:goog.events.KeyCodes.F3,63239:goog.events.KeyCodes.F4,63240:goog.events.KeyCodes.F5,63241:goog.events.KeyCodes.F6,63242:goog.events.KeyCodes.F7,63243:goog.events.KeyCodes.F8,63244:goog.events.KeyCodes.F9,63245:goog.events.KeyCodes.F10,63246:goog.events.KeyCodes.F11,63247:goog.events.KeyCodes.F12,63248:goog.events.KeyCodes.PRINT_SCREEN,63272:goog.events.KeyCodes.DELETE,63273:goog.events.KeyCodes.HOME,63275:goog.events.KeyCodes.END,63276:goog.events.KeyCodes.PAGE_UP,63277:goog.events.KeyCodes.PAGE_DOWN,63289:goog.events.KeyCodes.NUMLOCK,63302:goog.events.KeyCodes.INSERT},goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT},goog.events.KeyHandler.USES_KEYDOWN_=!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("525"),goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_=goog.userAgent.MAC&&goog.userAgent.GECKO,goog.events.KeyHandler.prototype.handleKeyDown_=function(e){(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&(this.lastKey_==goog.events.KeyCodes.CTRL&&!e.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!e.altKey||goog.userAgent.MAC&&this.lastKey_==goog.events.KeyCodes.META&&!e.metaKey)&&this.resetState(),-1==this.lastKey_&&(e.ctrlKey&&e.keyCode!=goog.events.KeyCodes.CTRL?this.lastKey_=goog.events.KeyCodes.CTRL:e.altKey&&e.keyCode!=goog.events.KeyCodes.ALT?this.lastKey_=goog.events.KeyCodes.ALT:e.metaKey&&e.keyCode!=goog.events.KeyCodes.META&&(this.lastKey_=goog.events.KeyCodes.META)),goog.events.KeyHandler.USES_KEYDOWN_&&!goog.events.KeyCodes.firesKeyPressEvent(e.keyCode,this.lastKey_,e.shiftKey,e.ctrlKey,e.altKey,e.metaKey)?this.handleEvent(e):(this.keyCode_=goog.events.KeyCodes.normalizeKeyCode(e.keyCode),goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(this.altKey_=e.altKey))},goog.events.KeyHandler.prototype.resetState=function(){this.keyCode_=this.lastKey_=-1},goog.events.KeyHandler.prototype.handleKeyup_=function(e){this.resetState(),this.altKey_=e.altKey},goog.events.KeyHandler.prototype.handleEvent=function(e){var t=e.getBrowserEvent(),n=t.altKey;if(goog.userAgent.IE&&e.type==goog.events.EventType.KEYPRESS)var o=this.keyCode_,r=o!=goog.events.KeyCodes.ENTER&&o!=goog.events.KeyCodes.ESC?t.keyCode:0;else(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&e.type==goog.events.EventType.KEYPRESS?(o=this.keyCode_,r=0<=t.charCode&&63232>t.charCode&&goog.events.KeyCodes.isCharacterKey(o)?t.charCode:0):goog.userAgent.OPERA&&!goog.userAgent.WEBKIT?(o=this.keyCode_,r=goog.events.KeyCodes.isCharacterKey(o)?t.keyCode:0):(e.type==goog.events.EventType.KEYPRESS?(goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(n=this.altKey_),t.keyCode==t.charCode?32>t.keyCode?(o=t.keyCode,r=0):(o=this.keyCode_,r=t.charCode):(o=t.keyCode||this.keyCode_,r=t.charCode||0)):(o=t.keyCode||this.keyCode_,r=t.charCode||0),goog.userAgent.MAC&&r==goog.events.KeyCodes.QUESTION_MARK&&o==goog.events.KeyCodes.WIN_KEY&&(o=goog.events.KeyCodes.SLASH));var i=o=goog.events.KeyCodes.normalizeKeyCode(o);o?63232<=o&&o in goog.events.KeyHandler.safariKey_?i=goog.events.KeyHandler.safariKey_[o]:25==o&&e.shiftKey&&(i=9):t.keyIdentifier&&t.keyIdentifier in goog.events.KeyHandler.keyIdentifier_&&(i=goog.events.KeyHandler.keyIdentifier_[t.keyIdentifier]),goog.userAgent.GECKO&&goog.events.KeyHandler.USES_KEYDOWN_&&e.type==goog.events.EventType.KEYPRESS&&!goog.events.KeyCodes.firesKeyPressEvent(i,this.lastKey_,e.shiftKey,e.ctrlKey,n,e.metaKey)||(e=i==this.lastKey_,this.lastKey_=i,(t=new goog.events.KeyEvent(i,r,e,t)).altKey=n,this.dispatchEvent(t))},goog.events.KeyHandler.prototype.getElement=function(){return this.element_},goog.events.KeyHandler.prototype.attach=function(e,t){this.keyUpKey_&&this.detach(),this.element_=e,this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,t),this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,t,this),this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,t,this)},goog.events.KeyHandler.prototype.detach=function(){this.keyPressKey_&&(goog.events.unlistenByKey(this.keyPressKey_),goog.events.unlistenByKey(this.keyDownKey_),goog.events.unlistenByKey(this.keyUpKey_),this.keyUpKey_=this.keyDownKey_=this.keyPressKey_=null),this.element_=null,this.keyCode_=this.lastKey_=-1},goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this),this.detach()},goog.events.KeyEvent=function(e,t,n,o){goog.events.BrowserEvent.call(this,o),this.type=goog.events.KeyHandler.EventType.KEY,this.keyCode=e,this.charCode=t,this.repeat=n},goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent),goog.ui.ComponentUtil={},goog.ui.ComponentUtil.getMouseEventType=function(e){return e.pointerEventsEnabled()?goog.events.PointerAsMouseEventType:goog.events.MouseAsMouseEventType},goog.ui.registry={},goog.ui.registry.getDefaultRenderer=function(e){for(var t;e&&(t=goog.getUid(e),!(t=goog.ui.registry.defaultRenderers_[t]));)e=e.superClass_?e.superClass_.constructor:null;return t?goog.isFunction(t.getInstance)?t.getInstance():new t:null},goog.ui.registry.setDefaultRenderer=function(e,t){if(!goog.isFunction(e))throw Error("Invalid component class "+e);if(!goog.isFunction(t))throw Error("Invalid renderer class "+t);e=goog.getUid(e),goog.ui.registry.defaultRenderers_[e]=t},goog.ui.registry.getDecoratorByClassName=function(e){return e in goog.ui.registry.decoratorFunctions_?goog.ui.registry.decoratorFunctions_[e]():null},goog.ui.registry.setDecoratorByClassName=function(e,t){if(!e)throw Error("Invalid class name "+e);if(!goog.isFunction(t))throw Error("Invalid decorator function "+t);goog.ui.registry.decoratorFunctions_[e]=t},goog.ui.registry.getDecorator=function(e){goog.asserts.assert(e);for(var t=goog.dom.classlist.get(e),n=0,o=t.length;n<o;n++)if(e=goog.ui.registry.getDecoratorByClassName(t[n]))return e;return null},goog.ui.registry.reset=function(){goog.ui.registry.defaultRenderers_={},goog.ui.registry.decoratorFunctions_={}},goog.ui.registry.defaultRenderers_={},goog.ui.registry.decoratorFunctions_={},goog.ui.Control=function(e,t,n){goog.ui.Component.call(this,n),this.renderer_=t||goog.ui.registry.getDefaultRenderer(this.constructor),this.setContentInternal(void 0!==e?e:null),this.ariaLabel_=null},goog.inherits(goog.ui.Control,goog.ui.Component),goog.tagUnsealableClass(goog.ui.Control),goog.ui.Control.registerDecorator=goog.ui.registry.setDecoratorByClassName,goog.ui.Control.getDecorator=goog.ui.registry.getDecorator,goog.ui.Control.prototype.content_=null,goog.ui.Control.prototype.state_=0,goog.ui.Control.prototype.supportedStates_=goog.ui.Component.State.DISABLED|goog.ui.Component.State.HOVER|goog.ui.Component.State.ACTIVE|goog.ui.Component.State.FOCUSED,goog.ui.Control.prototype.autoStates_=goog.ui.Component.State.ALL,goog.ui.Control.prototype.statesWithTransitionEvents_=0,goog.ui.Control.prototype.visible_=!0,goog.ui.Control.prototype.extraClassNames_=null,goog.ui.Control.prototype.handleMouseEvents_=!0,goog.ui.Control.prototype.allowTextSelection_=!1,goog.ui.Control.prototype.preferredAriaRole_=null,goog.ui.Control.prototype.isHandleMouseEvents=function(){return this.handleMouseEvents_},goog.ui.Control.prototype.setHandleMouseEvents=function(e){this.isInDocument()&&e!=this.handleMouseEvents_&&this.enableMouseEventHandling_(e),this.handleMouseEvents_=e},goog.ui.Control.prototype.getKeyEventTarget=function(){return this.renderer_.getKeyEventTarget(this)},goog.ui.Control.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler)},goog.ui.Control.prototype.getRenderer=function(){return this.renderer_},goog.ui.Control.prototype.setRenderer=function(e){if(this.isInDocument())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.getElement()&&this.setElementInternal(null),this.renderer_=e},goog.ui.Control.prototype.getExtraClassNames=function(){return this.extraClassNames_},goog.ui.Control.prototype.addClassName=function(e){e&&(this.extraClassNames_?goog.array.contains(this.extraClassNames_,e)||this.extraClassNames_.push(e):this.extraClassNames_=[e],this.renderer_.enableExtraClassName(this,e,!0))},goog.ui.Control.prototype.removeClassName=function(e){e&&this.extraClassNames_&&goog.array.remove(this.extraClassNames_,e)&&(0==this.extraClassNames_.length&&(this.extraClassNames_=null),this.renderer_.enableExtraClassName(this,e,!1))},goog.ui.Control.prototype.enableClassName=function(e,t){t?this.addClassName(e):this.removeClassName(e)},goog.ui.Control.prototype.createDom=function(){var e=this.renderer_.createDom(this);this.setElementInternal(e),this.renderer_.setAriaRole(e,this.getPreferredAriaRole()),this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(e,!1),this.isVisible()||this.renderer_.setVisible(e,!1)},goog.ui.Control.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_},goog.ui.Control.prototype.setPreferredAriaRole=function(e){this.preferredAriaRole_=e},goog.ui.Control.prototype.getAriaLabel=function(){return this.ariaLabel_},goog.ui.Control.prototype.setAriaLabel=function(e){this.ariaLabel_=e;var t=this.getElement();t&&this.renderer_.setAriaLabel(t,e)},goog.ui.Control.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())},goog.ui.Control.prototype.canDecorate=function(e){return this.renderer_.canDecorate(e)},goog.ui.Control.prototype.decorateInternal=function(e){e=this.renderer_.decorate(this,e),this.setElementInternal(e),this.renderer_.setAriaRole(e,this.getPreferredAriaRole()),this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(e,!1),this.visible_="none"!=e.style.display},goog.ui.Control.prototype.enterDocument=function(){if(goog.ui.Control.superClass_.enterDocument.call(this),this.renderer_.setAriaStates(this,this.getElementStrict()),this.renderer_.initializeDom(this),this.supportedStates_&~goog.ui.Component.State.DISABLED&&(this.isHandleMouseEvents()&&this.enableMouseEventHandling_(!0),this.isSupportedState(goog.ui.Component.State.FOCUSED))){var e=this.getKeyEventTarget();if(e){var t=this.getKeyHandler();t.attach(e),this.getHandler().listen(t,goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent).listen(e,goog.events.EventType.FOCUS,this.handleFocus).listen(e,goog.events.EventType.BLUR,this.handleBlur)}}},goog.ui.Control.prototype.enableMouseEventHandling_=function(e){var t=goog.ui.ComponentUtil.getMouseEventType(this),n=this.getHandler(),o=this.getElement();e?(n.listen(o,t.MOUSEDOWN,this.handleMouseDown).listen(o,[t.MOUSEUP,t.MOUSECANCEL],this.handleMouseUp).listen(o,goog.events.EventType.MOUSEOVER,this.handleMouseOver).listen(o,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.pointerEventsEnabled()&&n.listen(o,goog.events.EventType.GOTPOINTERCAPTURE,this.preventPointerCapture_),this.handleContextMenu!=goog.nullFunction&&n.listen(o,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&(goog.userAgent.isVersionOrHigher(9)||n.listen(o,goog.events.EventType.DBLCLICK,this.handleDblClick),this.ieMouseEventSequenceSimulator_||(this.ieMouseEventSequenceSimulator_=new goog.ui.Control.IeMouseEventSequenceSimulator_(this),this.registerDisposable(this.ieMouseEventSequenceSimulator_)))):(n.unlisten(o,t.MOUSEDOWN,this.handleMouseDown).unlisten(o,[t.MOUSEUP,t.MOUSECANCEL],this.handleMouseUp).unlisten(o,goog.events.EventType.MOUSEOVER,this.handleMouseOver).unlisten(o,goog.events.EventType.MOUSEOUT,this.handleMouseOut),this.pointerEventsEnabled()&&n.unlisten(o,goog.events.EventType.GOTPOINTERCAPTURE,this.preventPointerCapture_),this.handleContextMenu!=goog.nullFunction&&n.unlisten(o,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&(goog.userAgent.isVersionOrHigher(9)||n.unlisten(o,goog.events.EventType.DBLCLICK,this.handleDblClick),goog.dispose(this.ieMouseEventSequenceSimulator_),this.ieMouseEventSequenceSimulator_=null))},goog.ui.Control.prototype.exitDocument=function(){goog.ui.Control.superClass_.exitDocument.call(this),this.keyHandler_&&this.keyHandler_.detach(),this.isVisible()&&this.isEnabled()&&this.renderer_.setFocusable(this,!1)},goog.ui.Control.prototype.disposeInternal=function(){goog.ui.Control.superClass_.disposeInternal.call(this),this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_),delete this.renderer_,this.ieMouseEventSequenceSimulator_=this.extraClassNames_=this.content_=null},goog.ui.Control.prototype.getContent=function(){return this.content_},goog.ui.Control.prototype.setContent=function(e){this.renderer_.setContent(this.getElement(),e),this.setContentInternal(e)},goog.ui.Control.prototype.setContentInternal=function(e){this.content_=e},goog.ui.Control.prototype.getCaption=function(){var e=this.getContent();return e?(e="string"==typeof e?e:goog.isArray(e)?goog.array.map(e,goog.dom.getRawTextContent).join(""):goog.dom.getTextContent(e),goog.string.collapseBreakingSpaces(e)):""},goog.ui.Control.prototype.setCaption=function(e){this.setContent(e)},goog.ui.Control.prototype.setRightToLeft=function(e){goog.ui.Control.superClass_.setRightToLeft.call(this,e);var t=this.getElement();t&&this.renderer_.setRightToLeft(t,e)},goog.ui.Control.prototype.isAllowTextSelection=function(){return this.allowTextSelection_},goog.ui.Control.prototype.setAllowTextSelection=function(e){this.allowTextSelection_=e;var t=this.getElement();t&&this.renderer_.setAllowTextSelection(t,e)},goog.ui.Control.prototype.isVisible=function(){return this.visible_},goog.ui.Control.prototype.setVisible=function(e,t){return!!(t||this.visible_!=e&&this.dispatchEvent(e?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE))&&((t=this.getElement())&&this.renderer_.setVisible(t,e),this.isEnabled()&&this.renderer_.setFocusable(this,e),this.visible_=e,!0)},goog.ui.Control.prototype.isEnabled=function(){return!this.hasState(goog.ui.Component.State.DISABLED)},goog.ui.Control.prototype.isParentDisabled_=function(){var e=this.getParent();return!!e&&"function"==typeof e.isEnabled&&!e.isEnabled()},goog.ui.Control.prototype.setEnabled=function(e){!this.isParentDisabled_()&&this.isTransitionAllowed(goog.ui.Component.State.DISABLED,!e)&&(e||(this.setActive(!1),this.setHighlighted(!1)),this.isVisible()&&this.renderer_.setFocusable(this,e),this.setState(goog.ui.Component.State.DISABLED,!e,!0))},goog.ui.Control.prototype.isHighlighted=function(){return this.hasState(goog.ui.Component.State.HOVER)},goog.ui.Control.prototype.setHighlighted=function(e){this.isTransitionAllowed(goog.ui.Component.State.HOVER,e)&&this.setState(goog.ui.Component.State.HOVER,e)},goog.ui.Control.prototype.isActive=function(){return this.hasState(goog.ui.Component.State.ACTIVE)},goog.ui.Control.prototype.setActive=function(e){this.isTransitionAllowed(goog.ui.Component.State.ACTIVE,e)&&this.setState(goog.ui.Component.State.ACTIVE,e)},goog.ui.Control.prototype.isSelected=function(){return this.hasState(goog.ui.Component.State.SELECTED)},goog.ui.Control.prototype.setSelected=function(e){this.isTransitionAllowed(goog.ui.Component.State.SELECTED,e)&&this.setState(goog.ui.Component.State.SELECTED,e)},goog.ui.Control.prototype.isChecked=function(){return this.hasState(goog.ui.Component.State.CHECKED)},goog.ui.Control.prototype.setChecked=function(e){this.isTransitionAllowed(goog.ui.Component.State.CHECKED,e)&&this.setState(goog.ui.Component.State.CHECKED,e)},goog.ui.Control.prototype.isFocused=function(){return this.hasState(goog.ui.Component.State.FOCUSED)},goog.ui.Control.prototype.setFocused=function(e){this.isTransitionAllowed(goog.ui.Component.State.FOCUSED,e)&&this.setState(goog.ui.Component.State.FOCUSED,e)},goog.ui.Control.prototype.isOpen=function(){return this.hasState(goog.ui.Component.State.OPENED)},goog.ui.Control.prototype.setOpen=function(e){this.isTransitionAllowed(goog.ui.Component.State.OPENED,e)&&this.setState(goog.ui.Component.State.OPENED,e)},goog.ui.Control.prototype.getState=function(){return this.state_},goog.ui.Control.prototype.hasState=function(e){return!!(this.state_&e)},goog.ui.Control.prototype.setState=function(e,t,n){n||e!=goog.ui.Component.State.DISABLED?this.isSupportedState(e)&&t!=this.hasState(e)&&(this.renderer_.setState(this,e,t),this.state_=t?this.state_|e:this.state_&~e):this.setEnabled(!t)},goog.ui.Control.prototype.setStateInternal=function(e){this.state_=e},goog.ui.Control.prototype.isSupportedState=function(e){return!!(this.supportedStates_&e)},goog.ui.Control.prototype.setSupportedState=function(e,t){if(this.isInDocument()&&this.hasState(e)&&!t)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);!t&&this.hasState(e)&&this.setState(e,!1),this.supportedStates_=t?this.supportedStates_|e:this.supportedStates_&~e},goog.ui.Control.prototype.isAutoState=function(e){return!!(this.autoStates_&e)&&this.isSupportedState(e)},goog.ui.Control.prototype.setAutoStates=function(e,t){this.autoStates_=t?this.autoStates_|e:this.autoStates_&~e},goog.ui.Control.prototype.isDispatchTransitionEvents=function(e){return!!(this.statesWithTransitionEvents_&e)&&this.isSupportedState(e)},goog.ui.Control.prototype.setDispatchTransitionEvents=function(e,t){this.statesWithTransitionEvents_=t?this.statesWithTransitionEvents_|e:this.statesWithTransitionEvents_&~e},goog.ui.Control.prototype.isTransitionAllowed=function(e,t){return this.isSupportedState(e)&&this.hasState(e)!=t&&(!(this.statesWithTransitionEvents_&e)||this.dispatchEvent(goog.ui.Component.getStateTransitionEvent(e,t)))&&!this.isDisposed()},goog.ui.Control.prototype.handleMouseOver=function(e){!goog.ui.Control.isMouseEventWithinElement_(e,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.ENTER)&&this.isEnabled()&&this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0)},goog.ui.Control.prototype.handleMouseOut=function(e){!goog.ui.Control.isMouseEventWithinElement_(e,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.LEAVE)&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1),this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!1))},goog.ui.Control.prototype.preventPointerCapture_=function(e){var t=e.target;t.releasePointerCapture&&t.releasePointerCapture(e.pointerId)},goog.ui.Control.prototype.handleContextMenu=goog.nullFunction,goog.ui.Control.isMouseEventWithinElement_=function(e,t){return!!e.relatedTarget&&goog.dom.contains(t,e.relatedTarget)},goog.ui.Control.prototype.handleMouseDown=function(e){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),e.isMouseActionButton()&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!0),this.renderer_&&this.renderer_.isFocusable(this)&&this.getKeyEventTarget().focus())),!this.isAllowTextSelection()&&e.isMouseActionButton()&&e.preventDefault()},goog.ui.Control.prototype.handleMouseUp=function(e){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),this.isActive()&&this.performActionInternal(e)&&this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1))},goog.ui.Control.prototype.handleDblClick=function(e){this.isEnabled()&&this.performActionInternal(e)},goog.ui.Control.prototype.performActionInternal=function(e){this.isAutoState(goog.ui.Component.State.CHECKED)&&this.setChecked(!this.isChecked()),this.isAutoState(goog.ui.Component.State.SELECTED)&&this.setSelected(!0),this.isAutoState(goog.ui.Component.State.OPENED)&&this.setOpen(!this.isOpen());var t=new goog.events.Event(goog.ui.Component.EventType.ACTION,this);return e&&(t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.platformModifierKey=e.platformModifierKey),this.dispatchEvent(t)},goog.ui.Control.prototype.handleFocus=function(e){this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!0)},goog.ui.Control.prototype.handleBlur=function(e){this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1),this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!1)},goog.ui.Control.prototype.handleKeyEvent=function(e){return!!(this.isVisible()&&this.isEnabled()&&this.handleKeyEventInternal(e))&&(e.preventDefault(),e.stopPropagation(),!0)},goog.ui.Control.prototype.handleKeyEventInternal=function(e){return e.keyCode==goog.events.KeyCodes.ENTER&&this.performActionInternal(e)},goog.ui.registry.setDefaultRenderer(goog.ui.Control,goog.ui.ControlRenderer),goog.ui.registry.setDecoratorByClassName(goog.ui.ControlRenderer.CSS_CLASS,(function(){return new goog.ui.Control(null)})),goog.ui.Control.IeMouseEventSequenceSimulator_=function(e){goog.Disposable.call(this),this.control_=e,this.clickExpected_=!1,this.handler_=new goog.events.EventHandler(this),this.registerDisposable(this.handler_);var t=this.control_.getElementStrict();e=goog.ui.ComponentUtil.getMouseEventType(e),this.handler_.listen(t,e.MOUSEDOWN,this.handleMouseDown_).listen(t,e.MOUSEUP,this.handleMouseUp_).listen(t,goog.events.EventType.CLICK,this.handleClick_)},goog.inherits(goog.ui.Control.IeMouseEventSequenceSimulator_,goog.Disposable),goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_=!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseDown_=function(){this.clickExpected_=!1},goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseUp_=function(){this.clickExpected_=!0},goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_=function(e,t){if(!goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_)return e.button=goog.events.BrowserEvent.MouseButton.LEFT,e.type=t,e;var n=document.createEvent("MouseEvents");return n.initMouseEvent(t,e.bubbles,e.cancelable,e.view||null,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,goog.events.BrowserEvent.MouseButton.LEFT,e.relatedTarget||null),n},goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleClick_=function(e){if(this.clickExpected_)this.clickExpected_=!1;else{var t=e.getBrowserEvent(),n=t.button,o=t.type,r=goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(t,goog.events.EventType.MOUSEDOWN);this.control_.handleMouseDown(new goog.events.BrowserEvent(r,e.currentTarget)),r=goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(t,goog.events.EventType.MOUSEUP),this.control_.handleMouseUp(new goog.events.BrowserEvent(r,e.currentTarget)),goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_||(t.button=n,t.type=o)}},goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.disposeInternal=function(){this.control_=null,goog.ui.Control.IeMouseEventSequenceSimulator_.superClass_.disposeInternal.call(this)},goog.ui.Separator=function(e,t){goog.ui.Control.call(this,null,e||goog.ui.MenuSeparatorRenderer.getInstance(),t),this.setSupportedState(goog.ui.Component.State.DISABLED,!1),this.setSupportedState(goog.ui.Component.State.HOVER,!1),this.setSupportedState(goog.ui.Component.State.ACTIVE,!1),this.setSupportedState(goog.ui.Component.State.FOCUSED,!1),this.setStateInternal(goog.ui.Component.State.DISABLED)},goog.inherits(goog.ui.Separator,goog.ui.Control),goog.ui.Separator.prototype.enterDocument=function(){goog.ui.Separator.superClass_.enterDocument.call(this);var e=this.getElement();goog.asserts.assert(e,"The DOM element for the separator cannot be null."),goog.a11y.aria.setRole(e,"separator")},goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,(function(){return new goog.ui.Separator})),goog.ui.MenuSeparator=function(e){goog.ui.Separator.call(this,goog.ui.MenuSeparatorRenderer.getInstance(),e)},goog.inherits(goog.ui.MenuSeparator,goog.ui.Separator),goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,(function(){return new goog.ui.Separator})),Blockly.ContextMenu={},Blockly.ContextMenu.currentBlock=null,Blockly.ContextMenu.menu_=null,Blockly.ContextMenu.show=function(e,t,n){if(Blockly.WidgetDiv.show(Blockly.ContextMenu,n,Blockly.ContextMenu.dispose),t.length){var o=Blockly.ContextMenu.populate_(t,n);Blockly.ContextMenu.menu_=o,Blockly.ContextMenu.position_(o,e,n),setTimeout((function(){o.focus()}),1),Blockly.ContextMenu.currentBlock=null}else Blockly.ContextMenu.hide()},Blockly.ContextMenu.populate_=function(e,t){var n=new Blockly.Menu;n.setRole(Blockly.utils.aria.Role.MENU);for(var o,r=0;o=e[r];r++){var i=o.separator?new goog.ui.MenuSeparator:new Blockly.MenuItem(o.text);i.setRightToLeft(t),i.setRole(Blockly.utils.aria.Role.MENUITEM),n.addChild(i),i.setEnabled(o.enabled),o.enabled&&i.onAction((function(e){Blockly.ContextMenu.hide(),this.callback(this.scope)}),o)}return n},Blockly.ContextMenu.position_=function(e,t,n){var o=Blockly.utils.getViewportBBox();t=new Blockly.utils.Rect(t.clientY+o.top,t.clientY+o.top,t.clientX+o.left,t.clientX+o.left),Blockly.ContextMenu.createWidget_(e);var r=e.getSize();n&&(t.left+=r.width,t.right+=r.width,o.left+=r.width,o.right+=r.width),Blockly.WidgetDiv.positionWithAnchor(o,t,r,n),e.focus()},Blockly.ContextMenu.createWidget_=function(e){e.render(Blockly.WidgetDiv.DIV);var t=e.getElement();Blockly.utils.dom.addClass(t,"blocklyContextMenu"),Blockly.browserEvents.conditionalBind(t,"contextmenu",null,Blockly.utils.noEvent),e.focus()},Blockly.ContextMenu.hide=function(){Blockly.WidgetDiv.hideIfOwner(Blockly.ContextMenu),Blockly.ContextMenu.currentBlock=null},Blockly.ContextMenu.dispose=function(){Blockly.ContextMenu.menu_&&(Blockly.ContextMenu.menu_.dispose(),Blockly.ContextMenu.menu_=null)},Blockly.ContextMenu.callbackFactory=function(e,t){return function(){Blockly.Events.disable();try{var n=Blockly.Xml.domToBlock(t,e.workspace),o=e.getRelativeToSurfaceXY();o.x=e.RTL?o.x-Blockly.SNAP_RADIUS:o.x+Blockly.SNAP_RADIUS,o.y+=2*Blockly.SNAP_RADIUS,n.moveBy(o.x,o.y)}finally{Blockly.Events.enable()}Blockly.Events.isEnabled()&&!n.isShadow()&&Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BLOCK_CREATE))(n)),n.select()}},Blockly.ContextMenu.commentDeleteOption=function(e){return{text:Blockly.Msg.REMOVE_COMMENT,enabled:!e.workspace.options.debugMode,callback:function(){Blockly.Events.setGroup(!0),e.dispose(!0,!0),Blockly.Events.setGroup(!1)}}},Blockly.ContextMenu.commentDuplicateOption=function(e){return{text:Blockly.Msg.DUPLICATE_COMMENT,enabled:!e.workspace.options.debugMode,callback:function(){Blockly.duplicate(e)}}},Blockly.ContextMenu.workspaceCommentOption=function(e,t){if(!Blockly.WorkspaceCommentSvg)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var n={enabled:!Blockly.utils.userAgent.IE&&!e.options.debugMode};return n.text=Blockly.Msg.ADD_COMMENT,n.callback=function(){var n=new Blockly.WorkspaceCommentSvg(e,Blockly.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,Blockly.WorkspaceCommentSvg.DEFAULT_SIZE,Blockly.WorkspaceCommentSvg.DEFAULT_SIZE),o=e.getInjectionDiv().getBoundingClientRect();o=new Blockly.utils.Coordinate(t.clientX-o.left,t.clientY-o.top);var r=e.getOriginOffsetInPixels();(o=Blockly.utils.Coordinate.difference(o,r)).scale(1/e.scale),n.moveBy(o.x,o.y),e.rendered&&(n.initSvg(),n.render(),n.select())},n},Blockly.ContextMenuRegistry=function(){Blockly.ContextMenuRegistry.registry=this,this.registry_=Object.create(null)},Blockly.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},Blockly.ContextMenuRegistry.registry=null,Blockly.ContextMenuRegistry.prototype.register=function(e){if(this.registry_[e.id])throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registry_[e.id]=e},Blockly.ContextMenuRegistry.prototype.unregister=function(e){if(!this.registry_[e])throw Error('Menu item with ID "'+e+'" not found.');delete this.registry_[e]},Blockly.ContextMenuRegistry.prototype.getItem=function(e){return this.registry_[e]||null},Blockly.ContextMenuRegistry.prototype.getContextMenuOptions=function(e,t){var n=[],o=this.registry_;return Object.keys(o).forEach((function(r){if(r=o[r],e==r.scopeType){var i=r.preconditionFn(t);"hidden"!=i&&(r={text:"function"==typeof r.displayText?r.displayText(t):r.displayText,enabled:"enabled"==i,callback:r.callback,scope:t,weight:r.weight},n.push(r))}})),n.sort((function(e,t){return e.weight-t.weight})),n},new Blockly.ContextMenuRegistry,Blockly.Events.Selected=function(e,t,n){Blockly.Events.Selected.superClass_.constructor.call(this,n),this.oldElementId=e,this.newElementId=t},Blockly.utils.object.inherits(Blockly.Events.Selected,Blockly.Events.UiBase),Blockly.Events.Selected.prototype.type=Blockly.Events.SELECTED,Blockly.Events.Selected.prototype.toJson=function(){var e=Blockly.Events.Selected.superClass_.toJson.call(this);return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e},Blockly.Events.Selected.prototype.fromJson=function(e){Blockly.Events.Selected.superClass_.fromJson.call(this,e),this.oldElementId=e.oldElementId,this.newElementId=e.newElementId},Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.SELECTED,Blockly.Events.Selected),Blockly.IBoundedElement=function(){},Blockly.ICopyable=function(){},Blockly.RenderedConnection=function(e,t){Blockly.RenderedConnection.superClass_.constructor.call(this,e,t),this.db_=e.workspace.connectionDBList[t],this.dbOpposite_=e.workspace.connectionDBList[Blockly.OPPOSITE_TYPE[t]],this.offsetInBlock_=new Blockly.utils.Coordinate(0,0),this.trackedState_=Blockly.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},Blockly.utils.object.inherits(Blockly.RenderedConnection,Blockly.Connection),Blockly.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1},Blockly.RenderedConnection.prototype.dispose=function(){Blockly.RenderedConnection.superClass_.dispose.call(this),this.trackedState_==Blockly.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},Blockly.RenderedConnection.prototype.getSourceBlock=function(){return Blockly.RenderedConnection.superClass_.getSourceBlock.call(this)},Blockly.RenderedConnection.prototype.targetBlock=function(){return Blockly.RenderedConnection.superClass_.targetBlock.call(this)},Blockly.RenderedConnection.prototype.distanceFrom=function(e){var t=this.x-e.x;return e=this.y-e.y,Math.sqrt(t*t+e*e)},Blockly.RenderedConnection.prototype.bumpAwayFrom=function(e){if(!this.sourceBlock_.workspace.isDragging()){var t=this.sourceBlock_.getRootBlock();if(!t.isInFlyout){var n=!1;if(!t.isMovable()){if(!(t=e.getSourceBlock().getRootBlock()).isMovable())return;e=this,n=!0}var o=Blockly.selected==t;o||t.addSelect();var r=e.x+Blockly.SNAP_RADIUS+Math.floor(Math.random()*Blockly.BUMP_RANDOMNESS)-this.x,i=e.y+Blockly.SNAP_RADIUS+Math.floor(Math.random()*Blockly.BUMP_RANDOMNESS)-this.y;n&&(i=-i),t.RTL&&(r=e.x-Blockly.SNAP_RADIUS-Math.floor(Math.random()*Blockly.BUMP_RANDOMNESS)-this.x),t.moveBy(r,i),o||t.removeSelect()}}},Blockly.RenderedConnection.prototype.moveTo=function(e,t){this.trackedState_==Blockly.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,t),this.trackedState_=Blockly.RenderedConnection.TrackedState.TRACKED):this.trackedState_==Blockly.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,t)),this.x=e,this.y=t},Blockly.RenderedConnection.prototype.moveBy=function(e,t){this.moveTo(this.x+e,this.y+t)},Blockly.RenderedConnection.prototype.moveToOffset=function(e){this.moveTo(e.x+this.offsetInBlock_.x,e.y+this.offsetInBlock_.y)},Blockly.RenderedConnection.prototype.setOffsetInBlock=function(e,t){this.offsetInBlock_.x=e,this.offsetInBlock_.y=t},Blockly.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},Blockly.RenderedConnection.prototype.tighten=function(){var e=this.targetConnection.x-this.x,t=this.targetConnection.y-this.y;if(0!=Math.round(e)||0!=Math.round(t)){var n=this.targetBlock(),o=n.getSvgRoot();if(!o)throw Error("block is not rendered.");n.rendered&&(o=Blockly.utils.getRelativeXY(o),n.getSvgRoot().setAttribute("transform","translate("+(o.x-e)+","+(o.y-t)+")"),n.moveConnections(-e,-t))}},Blockly.RenderedConnection.prototype.closest=function(e,t){return this.dbOpposite_.searchForClosest(this,e,t)},Blockly.RenderedConnection.prototype.highlight=function(){var e=this.sourceBlock_.workspace.getRenderer().getConstants(),t=e.shapeFor(this);this.type==Blockly.connectionTypes.INPUT_VALUE||this.type==Blockly.connectionTypes.OUTPUT_VALUE?(e=e.TAB_OFFSET_FROM_TOP,t=Blockly.utils.svgPaths.moveBy(0,-e)+Blockly.utils.svgPaths.lineOnAxis("v",e)+t.pathDown+Blockly.utils.svgPaths.lineOnAxis("v",e)):(e=e.NOTCH_OFFSET_LEFT-e.CORNER_RADIUS,t=Blockly.utils.svgPaths.moveBy(-e,0)+Blockly.utils.svgPaths.lineOnAxis("h",e)+t.pathLeft+Blockly.utils.svgPaths.lineOnAxis("h",e)),e=this.sourceBlock_.getRelativeToSurfaceXY(),Blockly.Connection.highlightedPath_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:t,transform:"translate("+(this.x-e.x)+","+(this.y-e.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},Blockly.RenderedConnection.prototype.unhighlight=function(){Blockly.utils.dom.removeNode(Blockly.Connection.highlightedPath_),delete Blockly.Connection.highlightedPath_},Blockly.RenderedConnection.prototype.setTracking=function(e){e&&this.trackedState_==Blockly.RenderedConnection.TrackedState.TRACKED||!e&&this.trackedState_==Blockly.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db_.addConnection(this,this.y),this.trackedState_=Blockly.RenderedConnection.TrackedState.TRACKED):(this.trackedState_==Blockly.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=Blockly.RenderedConnection.TrackedState.UNTRACKED))},Blockly.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var e=this.targetBlock().getDescendants(!1),t=0;t<e.length;t++){for(var n=e[t],o=n.getConnections_(!0),r=0;r<o.length;r++)o[r].setTracking(!1);for(n=n.getIcons(),r=0;r<n.length;r++)n[r].setVisible(!1)}},Blockly.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var e=[];if(this.type!=Blockly.connectionTypes.INPUT_VALUE&&this.type!=Blockly.connectionTypes.NEXT_STATEMENT)return e;var t=this.targetBlock();if(t){if(t.isCollapsed()){var n=[];t.outputConnection&&n.push(t.outputConnection),t.nextConnection&&n.push(t.nextConnection),t.previousConnection&&n.push(t.previousConnection)}else n=t.getConnections_(!0);for(var o=0;o<n.length;o++)e.push.apply(e,n[o].startTrackingAll());e.length||(e[0]=t)}return e},Blockly.RenderedConnection.prototype.isConnectionAllowed=function(e,t){return Blockly.utils.deprecation.warn("RenderedConnection.prototype.isConnectionAllowed","July 2020","July 2021","Blockly.Workspace.prototype.getConnectionChecker().canConnect"),!(this.distanceFrom(e)>t)&&Blockly.RenderedConnection.superClass_.isConnectionAllowed.call(this,e)},Blockly.RenderedConnection.prototype.onFailedConnect=function(e){var t=this.getSourceBlock();if(Blockly.Events.recordUndo){var n=Blockly.Events.getGroup();setTimeout(function(){t.isDisposed()||t.getParent()||(Blockly.Events.setGroup(n),this.bumpAwayFrom(e),Blockly.Events.setGroup(!1))}.bind(this),Blockly.BUMP_DELAY)}},Blockly.RenderedConnection.prototype.disconnectInternal_=function(e,t){Blockly.RenderedConnection.superClass_.disconnectInternal_.call(this,e,t),e.rendered&&e.render(),t.rendered&&(t.updateDisabled(),t.render(),t.getSvgRoot().style.display="block")},Blockly.RenderedConnection.prototype.respawnShadow_=function(){Blockly.RenderedConnection.superClass_.respawnShadow_.call(this);var e=this.targetBlock();e&&(e.initSvg(),e.render(!1),(e=this.getSourceBlock()).rendered&&e.render())},Blockly.RenderedConnection.prototype.neighbours=function(e){return this.dbOpposite_.getNeighbours(this,e)},Blockly.RenderedConnection.prototype.connect_=function(e){Blockly.RenderedConnection.superClass_.connect_.call(this,e);var t=this.getSourceBlock();e=e.getSourceBlock();var n=t.rendered,o=e.rendered;n&&t.updateDisabled(),o&&e.updateDisabled(),n&&o&&(this.type==Blockly.connectionTypes.NEXT_STATEMENT||this.type==Blockly.connectionTypes.PREVIOUS_STATEMENT?e.render():t.render()),(t=t.getInputWithBlock(e))&&(t=t.isVisible(),e.getSvgRoot().style.display=t?"block":"none")},Blockly.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},Blockly.BasicCursor=function(){Blockly.BasicCursor.superClass_.constructor.call(this)},Blockly.utils.object.inherits(Blockly.BasicCursor,Blockly.Cursor),Blockly.BasicCursor.registrationName="basicCursor",Blockly.BasicCursor.prototype.next=function(){var e=this.getCurNode();return e?((e=this.getNextNode_(e,this.validNode_))&&this.setCurNode(e),e):null},Blockly.BasicCursor.prototype.in=function(){return this.next()},Blockly.BasicCursor.prototype.prev=function(){var e=this.getCurNode();return e?((e=this.getPreviousNode_(e,this.validNode_))&&this.setCurNode(e),e):null},Blockly.BasicCursor.prototype.out=function(){return this.prev()},Blockly.BasicCursor.prototype.getNextNode_=function(e,t){if(!e)return null;var n=e.in()||e.next();return t(n)?n:n?this.getNextNode_(n,t):t(e=this.findSiblingOrParent_(e.out()))?e:e?this.getNextNode_(e,t):null},Blockly.BasicCursor.prototype.getPreviousNode_=function(e,t){if(!e)return null;var n=e.prev();return t(n=n?this.getRightMostChild_(n):e.out())?n:n?this.getPreviousNode_(n,t):null},Blockly.BasicCursor.prototype.validNode_=function(e){var t=!1;return(e=e&&e.getType())!=Blockly.ASTNode.types.OUTPUT&&e!=Blockly.ASTNode.types.INPUT&&e!=Blockly.ASTNode.types.FIELD&&e!=Blockly.ASTNode.types.NEXT&&e!=Blockly.ASTNode.types.PREVIOUS&&e!=Blockly.ASTNode.types.WORKSPACE||(t=!0),t},Blockly.BasicCursor.prototype.findSiblingOrParent_=function(e){if(!e)return null;var t=e.next();return t||this.findSiblingOrParent_(e.out())},Blockly.BasicCursor.prototype.getRightMostChild_=function(e){if(!e.in())return e;for(e=e.in();e.next();)e=e.next();return this.getRightMostChild_(e)},Blockly.registry.register(Blockly.registry.Type.CURSOR,Blockly.BasicCursor.registrationName,Blockly.BasicCursor),Blockly.TabNavigateCursor=function(){Blockly.TabNavigateCursor.superClass_.constructor.call(this)},Blockly.utils.object.inherits(Blockly.TabNavigateCursor,Blockly.BasicCursor),Blockly.TabNavigateCursor.prototype.validNode_=function(e){var t=!1,n=e&&e.getType();return e&&(e=e.getLocation(),n==Blockly.ASTNode.types.FIELD&&e&&e.isTabNavigable()&&e.isClickable()&&(t=!0)),t},Blockly.BlockSvg=function(e,t,n){this.svgGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{},null),this.svgGroup_.translate_="",this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup_,this.style),this.renderIsInProgress_=this.rendered=!1,this.workspace=e,this.previousConnection=this.nextConnection=this.outputConnection=null,this.useDragSurface_=Blockly.utils.is3dSupported()&&!!e.getBlockDragSurface();var o=this.pathObject.svgPath;o.tooltip=this,Blockly.Tooltip.bindMouseEvents(o),Blockly.BlockSvg.superClass_.constructor.call(this,e,t,n),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:Blockly.utils.userAgent.IE&&this.svgGroup_.setAttribute("data-id",this.id)},Blockly.utils.object.inherits(Blockly.BlockSvg,Blockly.Block),Blockly.BlockSvg.prototype.height=0,Blockly.BlockSvg.prototype.width=0,Blockly.BlockSvg.prototype.warningTextDb_=null,Blockly.BlockSvg.INLINE=-1,Blockly.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_",Blockly.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var e,t=0;e=this.inputList[t];t++)e.init();for(e=this.getIcons(),t=0;t<e.length;t++)e[t].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||Blockly.browserEvents.conditionalBind(t,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t),!this.workspace.options.readOnly&&this.outputConnection&&this.bindReporterHoverEvents_()},Blockly.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},Blockly.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},Blockly.BlockSvg.prototype.getColourShadow=function(){return Blockly.utils.deprecation.warn("BlockSvg.prototype.getColourShadow","January 2020","January 2021","style.colourSecondary"),this.getColourSecondary()},Blockly.BlockSvg.prototype.getColourBorder=function(){return Blockly.utils.deprecation.warn("BlockSvg.prototype.getColourBorder","January 2020","January 2021","style.colourTertiary"),{colourBorder:this.getColourTertiary(),colourLight:null,colourDark:null}},Blockly.BlockSvg.prototype.select=function(){if(this.isMovable())if(this.isShadow()&&this.getParent())this.getParent().select();else if(Blockly.selected!=this){var e=null;if(Blockly.selected){e=Blockly.selected.id,Blockly.Events.disable();try{Blockly.selected.unselect()}finally{Blockly.Events.enable()}}e=new(Blockly.Events.get(Blockly.Events.SELECTED))(e,this.id,this.workspace.id),Blockly.Events.fire(e),Blockly.selected=this,this.addSelect()}},Blockly.BlockSvg.prototype.unselect=function(){if(Blockly.selected==this){var e=new(Blockly.Events.get(Blockly.Events.SELECTED))(this.id,null,this.workspace.id);e.workspaceId=this.workspace.id,Blockly.Events.fire(e),Blockly.selected=null,this.removeSelect()}},Blockly.BlockSvg.prototype.setHighlightWarning=function(e){this.rendered&&((this.isHighlightingWarningBlock_=e)&&!this.svgPathWarningHighlight_?(e=Blockly.mainWorkspace.options.warningGlowFilterId||"blocklyHighlightWarningFilter",this.svgPathWarningHighlight_=this.svgPath_.cloneNode(!0),this.svgPathWarningHighlight_.setAttribute("fill","none"),this.svgPathWarningHighlight_.setAttribute("filter","url(#"+e+")"),this.getSvgRoot().appendChild(this.svgPathWarningHighlight_)):!this.isHighlightingWarningBlock_&&this.svgPathWarningHighlight_&&(this.getSvgRoot().removeChild(this.svgPathWarningHighlight_),this.svgPathWarningHighlight_=null))},Blockly.BlockSvg.prototype.mutator=null,Blockly.BlockSvg.prototype.comment=null,Blockly.BlockSvg.prototype.commentIcon_=null,Blockly.BlockSvg.prototype.warning=null,Blockly.BlockSvg.prototype.breakpoint=null,Blockly.BlockSvg.prototype.getIcons=function(){var e=[];return this.breakpoint&&e.push(this.breakpoint),this.mutator&&e.push(this.mutator),this.commentIcon_&&e.push(this.commentIcon_),this.warning&&e.push(this.warning),e},Blockly.BlockSvg.prototype.setParent=function(e){var t=this.parentBlock_;if(e!=t){Blockly.utils.dom.startTextWidthCache(),Blockly.BlockSvg.superClass_.setParent.call(this,e),Blockly.utils.dom.stopTextWidthCache();var n=this.getSvgRoot();if(!this.workspace.isClearing&&n){var o=this.getRelativeToSurfaceXY();e?(e.getSvgRoot().appendChild(n),e=this.getRelativeToSurfaceXY(),this.moveConnections(e.x-o.x,e.y-o.y)):t&&(this.workspace.getCanvas().appendChild(n),this.translate(o.x,o.y)),this.applyColour()}}},Blockly.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var e=0,t=0,n=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,o=this.getSvgRoot();if(o)do{var r=Blockly.utils.getRelativeXY(o);e+=r.x,t+=r.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()==o&&(e+=(r=this.workspace.getBlockDragSurface().getSurfaceTranslation()).x,t+=r.y),o=o.parentNode}while(o&&o!=this.workspace.getCanvas()&&o!=n);return new Blockly.utils.Coordinate(e,t)},Blockly.BlockSvg.prototype.moveBy=function(e,t){if(this.parentBlock_)throw Error("Block has parent.");var n=Blockly.Events.isEnabled();if(n)var o=new(Blockly.Events.get(Blockly.Events.BLOCK_MOVE))(this);var r=this.getRelativeToSurfaceXY();this.translate(r.x+e,r.y+t),this.moveConnections(e,t),n&&(o.recordNew(),Blockly.Events.fire(o)),this.workspace.resizeContents()},Blockly.BlockSvg.prototype.translate=function(e,t){this.getSvgRoot().setAttribute("transform","translate("+e+","+t+")")},Blockly.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var e=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(e.x,e.y),(e=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(e)}},Blockly.BlockSvg.prototype.moveTo=function(e){var t=this.getRelativeToSurfaceXY();this.moveBy(e.x-t.x,e.y-t.y)},Blockly.BlockSvg.prototype.moveOffDragSurface=function(e){this.useDragSurface_&&(this.translate(e.x,e.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},Blockly.BlockSvg.prototype.moveDuringDrag=function(e){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(e.x,e.y):(this.svgGroup_.translate_="translate("+e.x+","+e.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},Blockly.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},Blockly.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e&&e.shouldSnap()){var t=e.getSpacing(),n=t/2,o=this.getRelativeToSurfaceXY();e=Math.round((o.x-n)/t)*t+n-o.x,t=Math.round((o.y-n)/t)*t+n-o.y,e=Math.round(e),t=Math.round(t),0==e&&0==t||this.moveBy(e,t)}}},Blockly.BlockSvg.prototype.getBoundingRectangle=function(){var e=this.getRelativeToSurfaceXY(),t=this.getHeightWidth();if(this.RTL)var n=e.x-t.width,o=e.x;else n=e.x,o=e.x+t.width;return new Blockly.utils.Rect(e.y,e.y+t.height,n,o)},Blockly.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var e,t=0;e=this.inputList[t];t++)e.markDirty()},Blockly.BlockSvg.prototype.setOpacity=function(e){this.opacity_=e,this.rendered&&this.updateColour()},Blockly.BlockSvg.prototype.getOpacity=function(){return this.opacity_},Blockly.BlockSvg.prototype.setCollapsed=function(e){this.collapsed_!=e&&(Blockly.BlockSvg.superClass_.setCollapsed.call(this,e),e?this.rendered&&this.render():this.updateCollapsed_())},Blockly.BlockSvg.prototype.updateCollapsed_=function(){for(var e,t=this.isCollapsed(),n=Blockly.constants.COLLAPSED_INPUT_NAME,o=Blockly.constants.COLLAPSED_FIELD_NAME,r=0;e=this.inputList[r];r++)e.name!=n&&e.setVisible(!t);if(t){for(e=this.getIcons(),r=0;t=e[r];r++)t.setVisible(!1);if(r=this.toString(Blockly.COLLAPSE_CHARS),e=this.getField(o))e.setValue(r);else{(e=this.getInput(n)||this.appendDummyInput(n)).appendField(new Blockly.FieldLabel(r),o);var i=this;(n=this.workspace.getRenderer().getConstants().EXPAND_IMAGE_DATAURI)&&e.appendField(new Blockly.FieldImage(n,24,24,"",(function(){i.setCollapsed(!1)}),!1))}}else this.updateDisabled(),this.removeInput(n)},Blockly.BlockSvg.prototype.tab=function(e,t){var n=new Blockly.TabNavigateCursor;n.setCurNode(Blockly.ASTNode.createFieldNode(e)),e=n.getCurNode(),t?n.next():n.prev(),(t=n.getCurNode())&&t!==e&&(t.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(t))},Blockly.BlockSvg.prototype.onMouseDown_=function(e){var t=this.workspace&&this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)},Blockly.BlockSvg.prototype.showHelp=function(){var e="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;e&&alert(e)},Blockly.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var e=Blockly.ContextMenuRegistry.registry.getContextMenuOptions(Blockly.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(e),e},Blockly.BlockSvg.prototype.showContextMenu=function(e){if(this.parentBlock_&&this.isShadow_&&!Blockly.pxtBlocklyUtils.isShadowArgumentReporter(this))this.parentBlock_.showContextMenu_(e);else{var t=this.generateContextMenu();t&&t.length&&(Blockly.ContextMenu.show(e,t,this.RTL),Blockly.ContextMenu.currentBlock=this)}},Blockly.BlockSvg.prototype.moveConnections=function(e,t){if(this.rendered){for(var n=this.getConnections_(!1),o=0;o<n.length;o++)n[o].moveBy(e,t);for(n=this.getIcons(),o=0;o<n.length;o++)n[o].computeIconLocation();for(o=0;o<this.childBlocks_.length;o++)this.childBlocks_[o].moveConnections(e,t);Blockly.WidgetDiv.repositionForWindowResize(),Blockly.DropDownDiv.repositionForWindowResize()}},Blockly.BlockSvg.prototype.setDragging=function(e){if(e){var t=this.getSvgRoot();t.translate_="",t.skew_="",Blockly.draggingConnections=Blockly.draggingConnections.concat(this.getConnections_(!0)),Blockly.utils.dom.addClass(this.svgGroup_,"blocklyDragging")}else Blockly.draggingConnections=[],Blockly.utils.dom.removeClass(this.svgGroup_,"blocklyDragging");for(t=0;t<this.childBlocks_.length;t++)this.childBlocks_[t].setDragging(e)},Blockly.BlockSvg.prototype.setMovable=function(e){Blockly.BlockSvg.superClass_.setMovable.call(this,e),e||this.unselect(),this.pathObject.updateMovable(e)},Blockly.BlockSvg.prototype.setEditable=function(e){Blockly.BlockSvg.superClass_.setEditable.call(this,e),e=this.getIcons();for(var t=0;t<e.length;t++)e[t].updateEditable()},Blockly.BlockSvg.prototype.setShadow=function(e){Blockly.BlockSvg.superClass_.setShadow.call(this,e),this.applyColour()},Blockly.BlockSvg.prototype.setInsertionMarker=function(e,t){this.isInsertionMarker_!=e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},Blockly.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},Blockly.BlockSvg.prototype.dispose=function(e,t){if(this.workspace){Blockly.Tooltip.dispose(),Blockly.Tooltip.unbindMouseEvents(this.pathObject.svgPath),Blockly.utils.dom.startTextWidthCache();var n=this.workspace;if(Blockly.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),Blockly.ContextMenu.currentBlock==this&&Blockly.ContextMenu.hide(),t&&this.rendered&&(this.unplug(e),Blockly.blockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var o in this.warningTextDb_)clearTimeout(this.warningTextDb_[o]);this.warningTextDb_=null}for(t=this.getIcons(),o=0;o<t.length;o++)t[o].dispose();Blockly.BlockSvg.superClass_.dispose.call(this,!!e),Blockly.utils.dom.removeNode(this.svgGroup_),n.resizeContents(),this.svgGroup_=null,Blockly.utils.dom.stopTextWidthCache()}},Blockly.BlockSvg.prototype.toCopyData=function(){if(this.isInsertionMarker_)return null;var e=Blockly.Xml.blockToDom(this,!0);Blockly.Xml.deleteNext(e);var t=this.getRelativeToSurfaceXY();return e.setAttribute("x",this.RTL?-t.x:t.x),e.setAttribute("y",t.y),{xml:e,source:this.workspace,typeCounts:Blockly.utils.getBlockTypeCounts(this,!0)}},Blockly.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var e=this.getIcons(),t=0;t<e.length;t++)e[t].applyColour();for(e=0;t=this.inputList[e];e++)for(var n,o=0;n=t.fieldRow[o];o++)n.applyColour()},Blockly.BlockSvg.prototype.updateDisabled=function(){var e=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var t,n=0;t=e[n];n++)t.rendered&&t.updateDisabled()},Blockly.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},Blockly.BlockSvg.prototype.enableBreakpoint=function(e){var t=!1;e?this.breakpoint||(this.breakpoint=new Blockly.Breakpoint(this),t=!0,this.breakpoint.enableBreakpoint()):this.breakpoint&&(this.breakpoint.dispose(),t=!0),t&&this.rendered&&(this.render(),this.bumpNeighbours())},Blockly.BlockSvg.prototype.setCommentText=function(e){if(!Blockly.Comment)throw Error("Missing require for Blockly.Comment");this.commentModel.text!=e&&(Blockly.BlockSvg.superClass_.setCommentText.call(this,e),e=null!=e,!!this.commentIcon_==e?this.commentIcon_.updateText():(e?this.comment=this.commentIcon_=new Blockly.Comment(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},Blockly.BlockSvg.prototype.setWarningText=function(e,t){if(!Blockly.Warning)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var n=t||"";if(n)this.warningTextDb_[n]&&(clearTimeout(this.warningTextDb_[n]),delete this.warningTextDb_[n]);else for(var o in this.warningTextDb_)clearTimeout(this.warningTextDb_[o]),delete this.warningTextDb_[o];if(this.workspace.isDragging()){var r=this;this.warningTextDb_[n]=setTimeout((function(){r.workspace&&(delete r.warningTextDb_[n],r.setWarningText(e,n))}),100)}else{if(this.isInFlyout&&(e=null),t=!1,"string"==typeof e){o=this.getSurroundParent();for(var i=null;o;)o.isCollapsed()&&(i=o),o=o.getSurroundParent();i&&i.setWarningText(Blockly.Msg.COLLAPSED_WARNINGS_WARNING,Blockly.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new Blockly.Warning(this),t=!0),this.warning.setText(e,n)}else this.warning&&!n?(this.warning.dispose(),t=!0):this.warning&&(t=this.warning.getText(),this.warning.setText("",n),(o=this.warning.getText())||this.warning.dispose(),t=t!=o);t&&this.rendered&&(this.render(),this.bumpNeighbours())}},Blockly.BlockSvg.prototype.setMutator=function(e){this.mutator&&this.mutator!==e&&this.mutator.dispose(),e&&(e.setBlock(this),this.mutator=e,e.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},Blockly.BlockSvg.prototype.setEnabled=function(e){this.isEnabled()!=e&&(Blockly.BlockSvg.superClass_.setEnabled.call(this,e),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},Blockly.BlockSvg.prototype.setHighlighted=function(e){this.rendered&&this.pathObject.updateHighlighted(e)},Blockly.BlockSvg.prototype.setHighlightWarning=function(e){this.rendered&&this.pathObject.updateHighlightedWarning(e)},Blockly.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},Blockly.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},Blockly.BlockSvg.prototype.setDeleteStyle=function(e){this.pathObject.updateDraggingDelete(e)},Blockly.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},Blockly.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},Blockly.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},Blockly.BlockSvg.prototype.setColour=function(e,t,n){Blockly.BlockSvg.superClass_.setColour.call(this,e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(e.style),this.style=e.style,this.styleName_=e.name,t&&(this.style.colourSecondary=t),n&&(this.style.colourTertiary=n),this.applyColour()},Blockly.BlockSvg.prototype.setStyle=function(e){var t=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_=e,!t)throw Error("Invalid style name: "+e);this.hat=t.hat,this.pathObject.setStyle(t),this.colour_=t.colourPrimary,this.style=t,this.applyColour()},Blockly.BlockSvg.prototype.bringToFront=function(){var e=this;do{var t=e.getSvgRoot(),n=t.parentNode,o=n.childNodes;o[o.length-1]!==t&&n.appendChild(t),e=e.getParent()}while(e)},Blockly.BlockSvg.prototype.setPreviousStatement=function(e,t){Blockly.BlockSvg.superClass_.setPreviousStatement.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours())},Blockly.BlockSvg.prototype.setNextStatement=function(e,t){Blockly.BlockSvg.superClass_.setNextStatement.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours())},Blockly.BlockSvg.prototype.setOutput=function(e,t){Blockly.BlockSvg.superClass_.setOutput.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours())},Blockly.BlockSvg.prototype.setInputsInline=function(e){Blockly.BlockSvg.superClass_.setInputsInline.call(this,e),this.rendered&&(this.render(),this.bumpNeighbours())},Blockly.BlockSvg.prototype.removeInput=function(e,t){return e=Blockly.BlockSvg.superClass_.removeInput.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours()),e},Blockly.BlockSvg.prototype.moveNumberedInputBefore=function(e,t){Blockly.BlockSvg.superClass_.moveNumberedInputBefore.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours())},Blockly.BlockSvg.prototype.appendInput_=function(e,t){return e=Blockly.BlockSvg.superClass_.appendInput_.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours()),e},Blockly.BlockSvg.prototype.setConnectionTracking=function(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var t=this.nextConnection.targetBlock();t&&t.setConnectionTracking(e)}if(!this.collapsed_)for(t=0;t<this.inputList.length;t++){var n=this.inputList[t].connection;n&&(n.setTracking(e),(n=n.targetBlock())&&n.setConnectionTracking(e))}},Blockly.BlockSvg.prototype.getConnections_=function(e){var t=[];if((e||this.rendered)&&(this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection),e||!this.collapsed_)){e=0;for(var n;n=this.inputList[e];e++)n.connection&&t.push(n.connection)}return t},Blockly.BlockSvg.prototype.lastConnectionInStack=function(e){return Blockly.BlockSvg.superClass_.lastConnectionInStack.call(this,e)},Blockly.BlockSvg.prototype.getMatchingConnection=function(e,t){return Blockly.BlockSvg.superClass_.getMatchingConnection.call(this,e,t)},Blockly.BlockSvg.prototype.makeConnection_=function(e){return new Blockly.RenderedConnection(this,e)},Blockly.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var e=this.getRootBlock();if(!e.isInFlyout)for(var t,n=this.getConnections_(!1),o=0;t=n[o];o++){t.isConnected()&&t.isSuperior()&&t.targetBlock().bumpNeighbours();for(var r,i=t.neighbours(Blockly.SNAP_RADIUS),s=0;r=i[s];s++)t.isConnected()&&r.isConnected()||r.getSourceBlock().getRootBlock()!=e&&(t.isSuperior()?r.bumpAwayFrom(t):t.bumpAwayFrom(r))}}},Blockly.BlockSvg.prototype.scheduleSnapAndBump=function(){var e=this,t=Blockly.Events.getGroup();setTimeout((function(){Blockly.Events.setGroup(t),e.snapToGrid(),Blockly.Events.setGroup(!1)}),Blockly.BUMP_DELAY/2),setTimeout((function(){Blockly.Events.setGroup(t),e.bumpNeighbours(),Blockly.Events.setGroup(!1)}),Blockly.BUMP_DELAY)},Blockly.BlockSvg.prototype.bindReporterHoverEvents_=function(){var e=this;Blockly.bindEvent_(this.svgGroup_,"mouseover",null,(function(t){var n=e;if(!n.isInFlyout){for(;n.isShadow_&&n.parentBlock_;)n=n.parentBlock_;n.parentBlock_&&n.outputConnection&&(Blockly.utils.dom.addClass(n.pathObject.svgPath,"blocklyReporterHover"),t.stopPropagation())}})),Blockly.bindEvent_(this.svgGroup_,"mouseout",null,(function(){e.isInFlyout||Blockly.utils.dom.removeClass(e.pathObject.svgPath,"blocklyReporterHover")}))},Blockly.BlockSvg.prototype.positionNearConnection=function(e,t){e.type!=Blockly.connectionTypes.NEXT_STATEMENT&&e.type!=Blockly.connectionTypes.INPUT_VALUE||this.moveBy(t.x-e.x,t.y-e.y)},Blockly.BlockSvg.prototype.getParent=function(){return Blockly.BlockSvg.superClass_.getParent.call(this)},Blockly.BlockSvg.prototype.getRootBlock=function(){return Blockly.BlockSvg.superClass_.getRootBlock.call(this)},Blockly.BlockSvg.prototype.render=function(e){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,Blockly.utils.dom.startTextWidthCache(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),!1!==e){var t=this.getParent();t?t.render(!0):this.workspace.resizeContents()}Blockly.utils.dom.stopTextWidthCache(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},Blockly.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(Blockly.MarkerManager.LOCAL_MARKER).draw()},Blockly.BlockSvg.prototype.updateConnectionLocations_=function(){var e=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(e),this.outputConnection&&this.outputConnection.moveToOffset(e);for(var t=0;t<this.inputList.length;t++){var n=this.inputList[t].connection;n&&(n.moveToOffset(e),n.isConnected()&&n.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(e),this.nextConnection.isConnected()&&this.nextConnection.tighten())},Blockly.BlockSvg.prototype.setCursorSvg=function(e){this.pathObject.setCursorSvg(e)},Blockly.BlockSvg.prototype.setMarkerSvg=function(e){this.pathObject.setMarkerSvg(e)},Blockly.BlockSvg.prototype.getHeightWidth=function(){var e=this.height,t=this.width,n=this.getNextBlock();if(n){n=n.getHeightWidth();var o=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=n.height-o,t=Math.max(t,n.width)}return{height:e,width:t}},Blockly.BlockSvg.prototype.fadeForReplacement=function(e){this.pathObject.updateReplacementFade(e)},Blockly.BlockSvg.prototype.highlightShapeForInput=function(e,t){this.pathObject.updateShapeForInputHighlight(e,t)},Blockly.ConnectionDB=function(e){this.connections_=[],this.connectionChecker_=e},Blockly.ConnectionDB.prototype.addConnection=function(e,t){t=this.calculateIndexForYPos_(t),this.connections_.splice(t,0,e)},Blockly.ConnectionDB.prototype.findIndexOfConnection_=function(e,t){if(!this.connections_.length)return-1;var n=this.calculateIndexForYPos_(t);if(n>=this.connections_.length)return-1;t=e.y;for(var o=n;0<=o&&this.connections_[o].y==t;){if(this.connections_[o]==e)return o;o--}for(o=n;o<this.connections_.length&&this.connections_[o].y==t;){if(this.connections_[o]==e)return o;o++}return-1},Blockly.ConnectionDB.prototype.calculateIndexForYPos_=function(e){if(!this.connections_.length)return 0;for(var t=0,n=this.connections_.length;t<n;){var o=Math.floor((t+n)/2);if(this.connections_[o].y<e)t=o+1;else{if(!(this.connections_[o].y>e)){t=o;break}n=o}}return t},Blockly.ConnectionDB.prototype.removeConnection=function(e,t){if(-1==(e=this.findIndexOfConnection_(e,t)))throw Error("Unable to find connection in connectionDB.");this.connections_.splice(e,1)},Blockly.ConnectionDB.prototype.getNeighbours=function(e,t){function n(e){var n=r-o[e].x,s=i-o[e].y;return Math.sqrt(n*n+s*s)<=t&&l.push(o[e]),s<t}var o=this.connections_,r=e.x,i=e.y;e=0;for(var s=o.length-2,a=s;e<a;)o[a].y<i?e=a:s=a,a=Math.floor((e+s)/2);var l=[];if(s=e=a,o.length){for(;0<=e&&n(e);)e--;do{s++}while(s<o.length&&n(s))}return l},Blockly.ConnectionDB.prototype.isInYRange_=function(e,t,n){return Math.abs(this.connections_[e].y-t)<=n},Blockly.ConnectionDB.prototype.searchForClosest=function(e,t,n){if(!this.connections_.length)return{connection:null,radius:t};var o=e.y,r=e.x;e.x=r+n.x,e.y=o+n.y;var i=this.calculateIndexForYPos_(e.y);n=null;for(var s,a=t,l=i-1;0<=l&&this.isInYRange_(l,e.y,t);)s=this.connections_[l],this.connectionChecker_.canConnect(e,s,!0,a)&&(n=s,a=s.distanceFrom(e)),l--;for(;i<this.connections_.length&&this.isInYRange_(i,e.y,t);)s=this.connections_[i],this.connectionChecker_.canConnect(e,s,!0,a)&&(n=s,a=s.distanceFrom(e)),i++;return e.x=r,e.y=o,{connection:n,radius:a}},Blockly.ConnectionDB.init=function(e){var t=[];return t[Blockly.connectionTypes.INPUT_VALUE]=new Blockly.ConnectionDB(e),t[Blockly.connectionTypes.OUTPUT_VALUE]=new Blockly.ConnectionDB(e),t[Blockly.connectionTypes.NEXT_STATEMENT]=new Blockly.ConnectionDB(e),t[Blockly.connectionTypes.PREVIOUS_STATEMENT]=new Blockly.ConnectionDB(e),t},Blockly.Events.ThemeChange=function(e,t){Blockly.Events.ThemeChange.superClass_.constructor.call(this,t),this.themeName=e},Blockly.utils.object.inherits(Blockly.Events.ThemeChange,Blockly.Events.UiBase),Blockly.Events.ThemeChange.prototype.type=Blockly.Events.THEME_CHANGE,Blockly.Events.ThemeChange.prototype.toJson=function(){var e=Blockly.Events.ThemeChange.superClass_.toJson.call(this);return e.themeName=this.themeName,e},Blockly.Events.ThemeChange.prototype.fromJson=function(e){Blockly.Events.ThemeChange.superClass_.fromJson.call(this,e),this.themeName=e.themeName},Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.THEME_CHANGE,Blockly.Events.ThemeChange),Blockly.Events.ViewportChange=function(e,t,n,o,r){Blockly.Events.ViewportChange.superClass_.constructor.call(this,o),this.viewTop=e,this.viewLeft=t,this.scale=n,this.oldScale=r},Blockly.utils.object.inherits(Blockly.Events.ViewportChange,Blockly.Events.UiBase);Blockly.Events.ViewportChange.prototype.type=Blockly.Events.VIEWPORT_CHANGE,Blockly.Events.ViewportChange.prototype.toJson=function(){var e=Blockly.Events.ViewportChange.superClass_.toJson.call(this);return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e},Blockly.Events.ViewportChange.prototype.fromJson=function(e){Blockly.Events.ViewportChange.superClass_.fromJson.call(this,e),this.viewTop=e.viewTop,this.viewLeft=e.viewLeft,this.scale=e.scale,this.oldScale=e.oldScale},Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.VIEWPORT_CHANGE,Blockly.Events.ViewportChange),Blockly.IMetricsManager=function(){},Blockly.MetricsManager=function(e){this.workspace_=e},Blockly.MetricsManager.prototype.getDimensionsPx_=function(e){var t=0,n=0;return e&&(t=e.getWidth(),n=e.getHeight()),new Blockly.utils.Size(t,n)},Blockly.MetricsManager.prototype.getFlyoutMetrics=function(e){return{width:(e=this.getDimensionsPx_(this.workspace_.getFlyout(e))).width,height:e.height,position:this.workspace_.toolboxPosition}},Blockly.MetricsManager.prototype.getToolboxMetrics=function(){var e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}},Blockly.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},Blockly.MetricsManager.prototype.getAbsoluteMetrics=function(){var e=0,t=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),o=!!this.workspace_.getToolbox(),r=!!this.workspace_.getFlyout(!0),i=o?t.position:n.position,s=i==Blockly.utils.toolbox.Position.LEFT;return i=i==Blockly.utils.toolbox.Position.TOP,o&&s?e=t.width:r&&s&&(e=n.width),s=0,o&&i?s=t.height:r&&i&&(s=n.height),{top:s,left:e}},Blockly.MetricsManager.prototype.getViewMetrics=function(e){e=e?this.workspace_.scale:1;var t=this.getSvgMetrics(),n=this.getToolboxMetrics(),o=this.getFlyoutMetrics(!0),r=this.workspace_.getToolbox()?n.position:o.position;return this.workspace_.getToolbox()?r==Blockly.utils.toolbox.Position.TOP||r==Blockly.utils.toolbox.Position.BOTTOM?t.height-=n.height:r!=Blockly.utils.toolbox.Position.LEFT&&r!=Blockly.utils.toolbox.Position.RIGHT||(t.width-=n.width):this.workspace_.getFlyout(!0)&&(r==Blockly.utils.toolbox.Position.TOP||r==Blockly.utils.toolbox.Position.BOTTOM?t.height-=o.height:r!=Blockly.utils.toolbox.Position.LEFT&&r!=Blockly.utils.toolbox.Position.RIGHT||(t.width-=o.width)),{height:t.height/e,width:t.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}},Blockly.MetricsManager.prototype.getContentMetrics=function(e){e=e?1:this.workspace_.scale;var t=this.workspace_.getBlocksBoundingBox();return{height:(t.bottom-t.top)*e,width:(t.right-t.left)*e,top:t.top*e,left:t.left*e}},Blockly.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},Blockly.MetricsManager.prototype.getComputedFixedEdges_=function(e){if(!this.hasFixedEdges())return{};var t=this.workspace_.isMovableHorizontally(),n=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);var o={};return n||(o.top=e.top,o.bottom=e.top+e.height),t||(o.left=e.left,o.right=e.left+e.width),o},Blockly.MetricsManager.prototype.getPaddedContent_=function(e,t){var n=t.top+t.height,o=t.left+t.width,r=e.width,i=r/2,s=(e=e.height)/2;return{top:Math.min(t.top-s,n-e),bottom:Math.max(n+s,t.top+e),left:Math.min(t.left-i,o-r),right:Math.max(o+i,t.left+r)}},Blockly.MetricsManager.prototype.getScrollMetrics=function(e,t,n){e=e?this.workspace_.scale:1,t=t||this.getViewMetrics(!1);var o=n||this.getContentMetrics();n=this.getComputedFixedEdges_(t),t=this.getPaddedContent_(t,o),o=void 0!==n.top?n.top:t.top;var r=void 0!==n.left?n.left:t.left;return{top:o/e,left:r/e,width:((void 0!==n.right?n.right:t.right)-r)/e,height:((void 0!==n.bottom?n.bottom:t.bottom)-o)/e}},Blockly.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},Blockly.MetricsManager.prototype.getMetrics=function(){var e=this.getToolboxMetrics(),t=this.getFlyoutMetrics(!0),n=this.getSvgMetrics(),o=this.getAbsoluteMetrics(),r=this.getViewMetrics(),i=this.getContentMetrics(),s=this.getScrollMetrics(!1,r,i);return{contentHeight:i.height,contentWidth:i.width,contentTop:i.top,contentLeft:i.left,scrollHeight:s.height,scrollWidth:s.width,scrollTop:s.top,scrollLeft:s.left,viewHeight:r.height,viewWidth:r.width,viewTop:r.top,viewLeft:r.left,absoluteTop:o.top,absoluteLeft:o.left,svgHeight:n.height,svgWidth:n.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:t.width,flyoutHeight:t.height}},Blockly.registry.register(Blockly.registry.Type.METRICS_MANAGER,Blockly.registry.DEFAULT,Blockly.MetricsManager),Blockly.FlyoutMetricsManager=function(e,t){this.flyout_=t,Blockly.FlyoutMetricsManager.superClass_.constructor.call(this,e)},Blockly.utils.object.inherits(Blockly.FlyoutMetricsManager,Blockly.MetricsManager),Blockly.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var e=this.workspace_.getCanvas().getBBox()}catch(t){e={height:0,y:0,width:0,x:0}}return e},Blockly.FlyoutMetricsManager.prototype.getContentMetrics=function(e){var t=this.getBoundingBox_();return e=e?1:this.workspace_.scale,{height:t.height*e,width:t.width*e,top:t.y*e,left:t.x*e}},Blockly.FlyoutMetricsManager.prototype.getScrollMetrics=function(e,t,n){return t=n||this.getContentMetrics(),n=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(t.height+2*n)/e,width:(t.width+t.left+n)/e,top:0,left:0}},Blockly.ThemeManager=function(e,t){this.workspace_=e,this.theme_=t,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)},Blockly.ThemeManager.prototype.getTheme=function(){return this.theme_},Blockly.ThemeManager.prototype.setTheme=function(e){var t,n=this.theme_;for(this.theme_=e,(e=this.workspace_.getInjectionDiv())&&(n&&Blockly.utils.dom.removeClass(e,n.getClassName()),Blockly.utils.dom.addClass(e,this.theme_.getClassName())),n=0;e=this.subscribedWorkspaces_[n];n++)e.refreshTheme();for(n=0,e=Object.keys(this.componentDB_);t=e[n];n++)for(var o,r=0;o=this.componentDB_[t][r];r++){var i=o.element;o=o.propertyName;var s=this.theme_&&this.theme_.getComponentStyle(t);i.style[o]=s||""}Blockly.hideChaff()},Blockly.ThemeManager.prototype.subscribeWorkspace=function(e){this.subscribedWorkspaces_.push(e)},Blockly.ThemeManager.prototype.unsubscribeWorkspace=function(e){if(0>(e=this.subscribedWorkspaces_.indexOf(e)))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.");this.subscribedWorkspaces_.splice(e,1)},Blockly.ThemeManager.prototype.subscribe=function(e,t,n){this.componentDB_[t]||(this.componentDB_[t]=[]),this.componentDB_[t].push({element:e,propertyName:n}),t=this.theme_&&this.theme_.getComponentStyle(t),e.style[n]=t||""},Blockly.ThemeManager.prototype.unsubscribe=function(e){if(e)for(var t,n=Object.keys(this.componentDB_),o=0;t=n[o];o++){for(var r=this.componentDB_[t],i=r.length-1;0<=i;i--)r[i].element===e&&r.splice(i,1);this.componentDB_[t].length||delete this.componentDB_[t]}},Blockly.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null},Blockly.TouchGesture=function(e,t){Blockly.TouchGesture.superClass_.constructor.call(this,e,t),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},Blockly.utils.object.inherits(Blockly.TouchGesture,Blockly.Gesture),Blockly.TouchGesture.ZOOM_IN_MULTIPLIER=5,Blockly.TouchGesture.ZOOM_OUT_MULTIPLIER=6,Blockly.TouchGesture.prototype.doStart=function(e){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,Blockly.TouchGesture.superClass_.doStart.call(this,e),!this.isEnding_&&Blockly.Touch.isTouchEvent(e)&&this.handleTouchStart(e)},Blockly.TouchGesture.prototype.bindMouseEvents=function(e){this.onStartWrapper_=Blockly.browserEvents.conditionalBind(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=Blockly.browserEvents.conditionalBind(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=Blockly.browserEvents.conditionalBind(document,"mouseup",null,this.handleUp.bind(this),!0),e.preventDefault(),e.stopPropagation()},Blockly.TouchGesture.prototype.handleStart=function(e){!this.isDragging()&&Blockly.Touch.isTouchEvent(e)&&(this.handleTouchStart(e),this.isMultiTouch()&&Blockly.longStop_())},Blockly.TouchGesture.prototype.handleMove=function(e){this.isDragging()?Blockly.Touch.shouldHandleEvent(e)&&Blockly.TouchGesture.superClass_.handleMove.call(this,e):this.isMultiTouch()?(Blockly.Touch.isTouchEvent(e)&&this.handleTouchMove(e),Blockly.longStop_()):Blockly.TouchGesture.superClass_.handleMove.call(this,e)},Blockly.TouchGesture.prototype.handleUp=function(e){Blockly.Touch.isTouchEvent(e)&&!this.isDragging()&&this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()?Blockly.Touch.shouldHandleEvent(e)&&Blockly.TouchGesture.superClass_.handleUp.call(this,e):(e.preventDefault(),e.stopPropagation(),this.dispose())},Blockly.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},Blockly.TouchGesture.prototype.dispose=function(){Blockly.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&Blockly.browserEvents.unbind(this.onStartWrapper_)},Blockly.TouchGesture.prototype.handleTouchStart=function(e){var t=Blockly.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[t]=this.getTouchPoint(e),2==(t=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=Blockly.utils.Coordinate.distance(this.cachedPoints_[t[0]],this.cachedPoints_[t[1]]),this.isMultiTouch_=!0,e.preventDefault())},Blockly.TouchGesture.prototype.handleTouchMove=function(e){var t=Blockly.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[t]=this.getTouchPoint(e),t=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&2===t.length?this.handlePinch_(e):Blockly.TouchGesture.superClass_.handleMove.call(this,e)},Blockly.TouchGesture.prototype.handlePinch_=function(e){var t=Object.keys(this.cachedPoints_);if(t=Blockly.utils.Coordinate.distance(this.cachedPoints_[t[0]],this.cachedPoints_[t[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var n=t-this.previousScale_;n=0<n?n*Blockly.TouchGesture.ZOOM_IN_MULTIPLIER:n*Blockly.TouchGesture.ZOOM_OUT_MULTIPLIER;var o=this.startWorkspace_,r=Blockly.utils.mouseToSvg(e,o.getParentSvg(),o.getInverseScreenCTM());o.zoom(r.x,r.y,n)}this.previousScale_=t,e.preventDefault()},Blockly.TouchGesture.prototype.handleTouchEnd=function(e){e=Blockly.Touch.getTouchIdentifierFromEvent(e),this.cachedPoints_[e]&&delete this.cachedPoints_[e],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},Blockly.TouchGesture.prototype.getTouchPoint=function(e){return this.startWorkspace_?new Blockly.utils.Coordinate(e.pageX?e.pageX:e.changedTouches[0].pageX,e.pageY?e.pageY:e.changedTouches[0].pageY):null},Blockly.WorkspaceAudio=function(e){this.parentWorkspace_=e,this.SOUNDS_=Object.create(null)},Blockly.WorkspaceAudio.prototype.lastSound_=null,Blockly.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},Blockly.WorkspaceAudio.prototype.load=function(e,t){if(e.length){try{var n=new Blockly.utils.global.Audio}catch(e){return}for(var o,r=0;r<e.length;r++){var i=e[r],s=i.match(/\.(\w+)$/);if(s&&n.canPlayType("audio/"+s[1])){o=new Blockly.utils.global.Audio(i);break}}o&&o.play&&(this.SOUNDS_[t]=o)}},Blockly.WorkspaceAudio.prototype.preload=function(){for(var e in this.SOUNDS_){var t=this.SOUNDS_[e];t.volume=.01;var n=t.play();if(void 0!==n?n.then(t.pause).catch((function(){})):t.pause(),Blockly.utils.userAgent.IPAD||Blockly.utils.userAgent.IPHONE)break}},Blockly.WorkspaceAudio.prototype.play=function(e,t){var n=this.SOUNDS_[e];n?(e=new Date,null!=this.lastSound_&&e-this.lastSound_<Blockly.SOUND_LIMIT||(this.lastSound_=e,(n=Blockly.utils.userAgent.IPAD||Blockly.utils.userAgent.ANDROID?n:n.cloneNode()).volume=void 0===t?1:t,n.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(e,t)},Blockly.WorkspaceSvg=function(e,t,n){Blockly.WorkspaceSvg.superClass_.constructor.call(this,e),this.metricsManager_=new(Blockly.registry.getClassFromOptions(Blockly.registry.Type.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=e.setMetrics||Blockly.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new Blockly.ComponentManager,this.connectionDBList=Blockly.ConnectionDB.init(this.connectionChecker),t&&(this.blockDragSurface_=t),n&&(this.workspaceDragSurface_=n),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&Blockly.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new Blockly.WorkspaceAudio(e.parentWorkspace),this.grid_=this.options.gridPattern?new Blockly.Grid(this.options.gridPattern,e.gridOptions):null,this.markerManager_=new Blockly.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),Blockly.Variables&&Blockly.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(Blockly.VARIABLE_CATEGORY_NAME,Blockly.Variables.flyoutCategory),Blockly.VariablesDynamic&&Blockly.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(Blockly.VARIABLE_DYNAMIC_CATEGORY_NAME,Blockly.VariablesDynamic.flyoutCategory),e.newFunctions&&Blockly.Functions&&Blockly.Functions.flyoutCategory?this.registerToolboxCategoryCallback(Blockly.PROCEDURE_CATEGORY_NAME,Blockly.Functions.flyoutCategory):Blockly.Procedures&&Blockly.Procedures.flyoutCategory&&(this.registerToolboxCategoryCallback(Blockly.PROCEDURE_CATEGORY_NAME,Blockly.Procedures.flyoutCategory),this.addChangeListener(Blockly.Procedures.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new Blockly.ThemeManager(this,this.options.theme||Blockly.Themes.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=Blockly.blockRendering.init(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new Blockly.utils.Size(0,0)},Blockly.utils.object.inherits(Blockly.WorkspaceSvg,Blockly.Workspace),Blockly.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,Blockly.WorkspaceSvg.prototype.rendered=!0,Blockly.WorkspaceSvg.prototype.isVisible_=!0,Blockly.WorkspaceSvg.prototype.isFlyout=!1,Blockly.WorkspaceSvg.prototype.isMutator=!1,Blockly.WorkspaceSvg.prototype.resizesEnabled_=!0,Blockly.WorkspaceSvg.prototype.scrollX=0,Blockly.WorkspaceSvg.prototype.scrollY=0,Blockly.WorkspaceSvg.prototype.startScrollX=0,Blockly.WorkspaceSvg.prototype.startScrollY=0,Blockly.WorkspaceSvg.prototype.dragDeltaXY_=null,Blockly.WorkspaceSvg.prototype.scale=1,Blockly.WorkspaceSvg.prototype.oldScale_=1,Blockly.WorkspaceSvg.prototype.oldTop_=0,Blockly.WorkspaceSvg.prototype.oldLeft_=0,Blockly.WorkspaceSvg.prototype.trashcan=null,Blockly.WorkspaceSvg.prototype.scrollbar=null,Blockly.WorkspaceSvg.prototype.flyout_=null,Blockly.WorkspaceSvg.prototype.toolbox_=null,Blockly.WorkspaceSvg.prototype.currentGesture_=null,Blockly.WorkspaceSvg.prototype.blockDragSurface_=null,Blockly.WorkspaceSvg.prototype.workspaceDragSurface_=null,Blockly.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,Blockly.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,Blockly.WorkspaceSvg.prototype.injectionDiv_=null,Blockly.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,Blockly.WorkspaceSvg.prototype.targetWorkspace=null,Blockly.WorkspaceSvg.prototype.inverseScreenCTM_=null,Blockly.WorkspaceSvg.prototype.inverseScreenCTMDirty_=!0,Blockly.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},Blockly.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},Blockly.WorkspaceSvg.prototype.setMetricsManager=function(e){this.metricsManager_=e,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},Blockly.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},Blockly.WorkspaceSvg.prototype.setCursorSvg=function(e){this.markerManager_.setCursorSvg(e)},Blockly.WorkspaceSvg.prototype.setMarkerSvg=function(e){this.markerManager_.setMarkerSvg(e)},Blockly.WorkspaceSvg.prototype.getMarker=function(e){return this.markerManager_?this.markerManager_.getMarker(e):null},Blockly.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},Blockly.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},Blockly.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},Blockly.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},Blockly.WorkspaceSvg.prototype.setTheme=function(e){e||(e=Blockly.Themes.Classic),this.themeManager_.setTheme(e)},Blockly.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter((function(e){return!!e.getStyleName()}))),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var e=new(Blockly.Events.get(Blockly.Events.THEME_CHANGE))(this.getTheme().name,this.id);Blockly.Events.fire(e)},Blockly.WorkspaceSvg.prototype.updateBlockStyles_=function(e){for(var t,n=0;t=e[n];n++){var o=t.getStyleName();o&&(t.setStyle(o),t.mutator&&t.mutator.updateBlockStyle())}},Blockly.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM_=e.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},Blockly.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},Blockly.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},Blockly.WorkspaceSvg.prototype.getSvgXY=function(e){var t=0,n=0,o=1;(Blockly.utils.dom.containsNode(this.getCanvas(),e)||Blockly.utils.dom.containsNode(this.getBubbleCanvas(),e))&&(o=this.scale);do{var r=Blockly.utils.getRelativeXY(e);e!=this.getCanvas()&&e!=this.getBubbleCanvas()||(o=1),t+=r.x*o,n+=r.y*o,e=e.parentNode}while(e&&e!=this.getParentSvg());return new Blockly.utils.Coordinate(t,n)},Blockly.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var e=this.cachedParentSvgSize_;return new Blockly.utils.Size(e.width,e.height)},Blockly.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return Blockly.utils.getInjectionDivXY_(this.getCanvas())},Blockly.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var e=this.svgGroup_;e;){if(-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=e;break}e=e.parentNode}return this.injectionDiv_},Blockly.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},Blockly.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(e){this.resizeHandlerWrapper_=e},Blockly.WorkspaceSvg.prototype.createDom=function(e){return this.svgGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{class:"blocklyWorkspace"},null),e&&(this.svgBackground_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),"blocklyMainBackground"==e&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||(Blockly.browserEvents.conditionalBind(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),Blockly.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(Blockly.registry.getClassFromOptions(Blockly.registry.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(e=Blockly.registry.getClassFromOptions(Blockly.registry.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new e),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},Blockly.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&(Blockly.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),Blockly.WorkspaceSvg.superClass_.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var e=this.getParentSvg();e&&e.parentNode&&Blockly.utils.dom.removeNode(e.parentNode)}this.resizeHandlerWrapper_&&(Blockly.browserEvents.unbind(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},Blockly.WorkspaceSvg.prototype.newBlock=function(e,t){return e=new Blockly.BlockSvg(this,e,t),this.loadingEventsDisabled||e.onLoadedIntoWorkspace(),e},Blockly.WorkspaceSvg.prototype.addTrashcan=function(){if(!Blockly.Trashcan)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new Blockly.Trashcan(this);var e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.svgBlockCanvas_)},Blockly.WorkspaceSvg.prototype.addZoomControls=function(){if(!Blockly.ZoomControls)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new Blockly.ZoomControls(this);var e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)},Blockly.WorkspaceSvg.prototype.addFlyout=function(e){var t=new Blockly.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new(Blockly.registry.getClassFromOptions(Blockly.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(t):new(Blockly.registry.getClassFromOptions(Blockly.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(t),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(e)},Blockly.WorkspaceSvg.prototype.getFlyout=function(e){return this.flyout_||e?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},Blockly.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},Blockly.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},Blockly.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},Blockly.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var e,t=this.componentManager_.getComponents(Blockly.ComponentManager.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),o=[],r=0;e=t[r];r++)e.position(n,o),(e=e.getBoundingRectangle())&&o.push(e);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},Blockly.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var e=Blockly.utils.getDocumentScroll();Blockly.utils.Coordinate.equals(this.lastRecordedPageScroll_,e)||(this.lastRecordedPageScroll_=e,this.updateScreenCalculations_())},Blockly.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},Blockly.WorkspaceSvg.prototype.setCachedParentSvgSize=function(e,t){var n=this.getParentSvg();isNaN(e)||null===e||(this.cachedParentSvgSize_.width=e,n.cachedWidth_=e),isNaN(t)||null===t||(this.cachedParentSvgSize_.height=t,n.cachedHeight_=t)},Blockly.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},Blockly.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var e=this.svgGroup_;e;){if("svg"==e.tagName){this.cachedParentSvg_=e;break}e=e.parentNode}return this.cachedParentSvg_},Blockly.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if(Blockly.Events.isEnabled()){var e=this.scale,t=-this.scrollY,n=-this.scrollX;if(!(e==this.oldScale_&&1>Math.abs(t-this.oldTop_)&&1>Math.abs(n-this.oldLeft_))){var o=new(Blockly.Events.get(Blockly.Events.VIEWPORT_CHANGE))(t,n,e,this.id,this.oldScale_);this.oldScale_=e,this.oldTop_=t,this.oldLeft_=n,Blockly.Events.fire(o)}}},Blockly.WorkspaceSvg.prototype.translate=function(e,t){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(e,t);else{var n="translate("+e+","+t+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",n),this.svgBubbleCanvas_.setAttribute("transform",n)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(e,t,this.scale),this.grid_&&this.grid_.moveTo(e,t),this.maybeFireViewportChangeEvent()},Blockly.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var e=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),e="translate("+e.x+","+e.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",e),this.svgBubbleCanvas_.setAttribute("transform",e)}},Blockly.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var e=this.svgBlockCanvas_.previousSibling,t=parseInt(this.getParentSvg().getAttribute("width"),10),n=parseInt(this.getParentSvg().getAttribute("height"),10),o=Blockly.utils.getRelativeXY(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),e,t,n,this.scale),this.workspaceDragSurface_.translateSurface(o.x,o.y)}},Blockly.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},Blockly.WorkspaceSvg.prototype.getWidth=function(){var e=this.getMetrics();return e?e.viewWidth/this.scale:0},Blockly.WorkspaceSvg.prototype.setVisible=function(e){if(this.isVisible_=e,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox_&&this.toolbox_.setVisible(e),e){for(var t=(e=this.getAllBlocks(!1)).length-1;0<=t;t--)e[t].markDirty();this.render(),this.resize()}else Blockly.hideChaff(!0),Blockly.DropDownDiv.hideWithoutAnimation()},Blockly.WorkspaceSvg.prototype.render=function(){for(var e=this.getAllBlocks(!1),t=e.length-1;0<=t;t--)e[t].render(!1);if(this.currentGesture_)for(e=this.currentGesture_.getInsertionMarkers(),t=0;t<e.length;t++)e[t].render(!1);this.markerManager_.updateMarkers()},Blockly.WorkspaceSvg.prototype.highlightBlock=function(e,t){if(void 0===t){for(var n,o=0;n=this.highlightedBlocks_[o];o++)n.setHighlighted(!1);this.highlightedBlocks_.length=0}(n=e?this.getBlockById(e):null)&&((e=void 0===t||t)?-1==this.highlightedBlocks_.indexOf(n)&&this.highlightedBlocks_.push(n):Blockly.utils.arrayRemove(this.highlightedBlocks_,n),n.setHighlighted(e))},Blockly.WorkspaceSvg.prototype.paste=function(e){!this.rendered||!e.tagName||e.getElementsByTagName("block").length>=this.remainingCapacity()||(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==e.tagName.toLowerCase()?this.pasteWorkspaceComment_(e):this.pasteBlock_(e))},Blockly.WorkspaceSvg.prototype.pasteBlock_=function(e){Blockly.Events.disable();try{var t=Blockly.Xml.domToBlock(e,this),n=parseInt(e.getAttribute("x"),10),o=parseInt(e.getAttribute("y"),10);if(!isNaN(n)&&!isNaN(o)){this.RTL&&(n=-n);do{e=!1;for(var r,i=this.getAllBlocks(!1),s=0;r=i[s];s++){var a=r.getRelativeToSurfaceXY();if(1>=Math.abs(n-a.x)&&1>=Math.abs(o-a.y)){e=!0;break}}if(!e){var l,c=t.getConnections_(!1);for(s=0;l=c[s];s++)if(l.closest(Blockly.SNAP_RADIUS,new Blockly.utils.Coordinate(n,o)).connection){e=!0;break}}e&&(n=this.RTL?n-Blockly.SNAP_RADIUS:n+Blockly.SNAP_RADIUS,o+=2*Blockly.SNAP_RADIUS)}while(e);t.moveBy(n,o)}}finally{Blockly.Events.enable()}Blockly.Events.isEnabled()&&!t.isShadow()&&Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BLOCK_CREATE))(t)),t.select()},Blockly.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(e){Blockly.Events.disable();try{var t=Blockly.WorkspaceCommentSvg.fromXml(e,this),n=parseInt(e.getAttribute("x"),10),o=parseInt(e.getAttribute("y"),10);isNaN(n)||isNaN(o)||(this.RTL&&(n=-n),t.moveBy(n+50,o+50))}finally{Blockly.Events.enable()}Blockly.Events.isEnabled()&&Blockly.WorkspaceComment.fireCreateEvent(t),t.select()},Blockly.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox_&&e.toolbox_.getFlyout()&&e.toolbox_.refreshSelection()},Blockly.WorkspaceSvg.prototype.renameVariableById=function(e,t){Blockly.WorkspaceSvg.superClass_.renameVariableById.call(this,e,t),this.refreshToolboxSelection()},Blockly.WorkspaceSvg.prototype.deleteVariableById=function(e){Blockly.WorkspaceSvg.superClass_.deleteVariableById.call(this,e),this.refreshToolboxSelection()},Blockly.WorkspaceSvg.prototype.createVariable=function(e,t,n){return e=Blockly.WorkspaceSvg.superClass_.createVariable.call(this,e,t,n),this.refreshToolboxSelection(),e},Blockly.WorkspaceSvg.prototype.recordDeleteAreas=function(){Blockly.utils.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},Blockly.WorkspaceSvg.prototype.recordDragTargets=function(){var e=this.componentManager_.getComponents(Blockly.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var t,n=0;t=e[n];n++){var o=t.getClientRect();o&&this.dragTargetAreas_.push({component:t,clientRect:o})}},Blockly.WorkspaceSvg.prototype.getDragTarget=function(e){for(var t,n=0;t=this.dragTargetAreas_[n];n++)if(t.clientRect.contains(e.clientX,e.clientY))return t.component;return null},Blockly.WorkspaceSvg.prototype.onMouseDown_=function(e){var t=this.getGesture(e);t&&t.handleWsStart(e,this)},Blockly.WorkspaceSvg.prototype.startDrag=function(e,t){(e=Blockly.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,this.dragDeltaXY_=Blockly.utils.Coordinate.difference(t,e)},Blockly.WorkspaceSvg.prototype.moveDrag=function(e){return(e=Blockly.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,Blockly.utils.Coordinate.sum(this.dragDeltaXY_,e)},Blockly.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},Blockly.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},Blockly.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},Blockly.WorkspaceSvg.prototype.isMovableHorizontally=function(){var e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())},Blockly.WorkspaceSvg.prototype.isMovableVertically=function(){var e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())},Blockly.WorkspaceSvg.prototype.onMouseWheel_=function(e){if(Blockly.Gesture.inProgress())e.preventDefault(),e.stopPropagation();else{var t=this.options.zoomOptions&&this.options.zoomOptions.wheel,n=this.options.moveOptions&&this.options.moveOptions.wheel;if(t||n){var o=Blockly.utils.getScrollDeltaPixels(e);!t||!e.ctrlKey&&n?(t=this.scrollX-o.x,n=this.scrollY-o.y,e.shiftKey&&!o.x&&(t=this.scrollX-o.y,n=this.scrollY),this.scroll(t,n)):(o=-o.y/50,t=Blockly.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,o)),e.ctrlKey||e.metaKey?(o=-e.deltaY/50,t=Blockly.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(t.x,t.y,o)):(Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),t=this.scrollX-e.deltaX,n=this.scrollY-e.deltaY,this.startDragMetrics=this.getMetrics(),this.scroll(t,n)),e.preventDefault()}}},Blockly.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var e=this.getTopBoundedElements();if(!e.length)return new Blockly.utils.Rect(0,0,0,0);for(var t=e[0].getBoundingRectangle(),n=1;n<e.length;n++){var o=e[n];o.isInsertionMarker&&o.isInsertionMarker()||((o=o.getBoundingRectangle()).top<t.top&&(t.top=o.top),o.bottom>t.bottom&&(t.bottom=o.bottom),o.left<t.left&&(t.left=o.left),o.right>t.right&&(t.right=o.right))}return t},Blockly.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),Blockly.Events.setGroup(!0);for(var e,t=this.getTopBlocks(!0),n=0,o=0;e=t[o];o++)if(e.isMovable()){var r=e.getRelativeToSurfaceXY();e.moveBy(-r.x,n-r.y),e.snapToGrid(),n=e.getRelativeToSurfaceXY().y+e.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}Blockly.Events.setGroup(!1),this.setResizesEnabled(!0)},Blockly.WorkspaceSvg.prototype.showContextMenu=function(e){if(!this.options.readOnly&&!this.isFlyout){var t=Blockly.ContextMenuRegistry.registry.getContextMenuOptions(Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(t,e),Blockly.ContextMenu.show(e,t,this.RTL)}},Blockly.WorkspaceSvg.buildDeleteList_=function(e){function t(e){if(e.isDeletable())n=n.concat(e.getDescendants());else{e=e.getChildren();for(var o=0;o<e.length;o++)t(e[o])}}for(var n=[],o=0;o<e.length;o++)t(e[o]);return n},Blockly.WorkspaceSvg.prototype.updateToolbox=function(e){if(e=Blockly.utils.toolbox.convertToolboxDefToJson(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Blockly.utils.toolbox.hasCategories(e)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox_.render(e)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout_.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},Blockly.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(Blockly.mainWorkspace=this,this.setBrowserFocus())},Blockly.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch(e){try{this.getParentSvg().parentNode.setActive()}catch(e){this.getParentSvg().parentNode.focus({preventScroll:!0})}}},Blockly.WorkspaceSvg.prototype.zoom=function(e,t,n){n=Math.pow(this.options.zoomOptions.scaleSpeed,n);var o=this.scale*n;if(this.scale!=o){o>this.options.zoomOptions.maxScale?n=this.options.zoomOptions.maxScale/this.scale:o<this.options.zoomOptions.minScale&&(n=this.options.zoomOptions.minScale/this.scale);var r=this.getCanvas().getCTM(),i=this.getParentSvg().createSVGPoint();i.x=e,i.y=t,e=(i=i.matrixTransform(r.inverse())).x,t=i.y,r=r.translate(e*(1-n),t*(1-n)).scale(n),this.scrollX=r.e,this.scrollY=r.f,this.setScale(o),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation()}},Blockly.WorkspaceSvg.prototype.zoomCenter=function(e){var t=this.getMetrics();if(this.flyout_){var n=t.svgWidth?t.svgWidth/2:0;t=t.svgHeight?t.svgHeight/2:0}else n=t.viewWidth/2+t.absoluteLeft,t=t.viewHeight/2+t.absoluteTop;this.zoom(n,t,e)},Blockly.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var e=this.getMetrics(),t=e.viewWidth;e=e.viewHeight;var n=this.getBlocksBoundingBox(),o=n.right-n.left;if(n=n.bottom-n.top,o){this.flyout_&&(this.horizontalLayout?(e+=this.flyout_.getHeight(),n+=this.flyout_.getHeight()/this.scale):(t+=this.flyout_.getWidth(),o+=this.flyout_.getWidth()/this.scale)),t/=o,e/=n,Blockly.Events.disable();try{this.setScale(Math.min(t,e)),this.scrollCenter()}finally{Blockly.Events.enable()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},Blockly.WorkspaceSvg.prototype.beginCanvasTransition=function(){Blockly.utils.dom.addClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),Blockly.utils.dom.addClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},Blockly.WorkspaceSvg.prototype.endCanvasTransition=function(){Blockly.utils.dom.removeClass(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),Blockly.utils.dom.removeClass(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},Blockly.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var e=this.getMetrics(),t=(e.scrollWidth-e.viewWidth)/2,n=(e.scrollHeight-e.viewHeight)/2;t=-t-e.scrollLeft,n=-n-e.scrollTop,this.scroll(t,n)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},Blockly.WorkspaceSvg.prototype.centerOnBlock=function(e,t){if(this.isMovable()){if(e=e?this.getBlockById(e):null){t&&Blockly.utils.dom.addClass(this.svgBlockCanvas_,"blocklyTransitioning");var n=e.getRelativeToSurfaceXY(),o=this.scale;t=(n.x+(this.RTL?-1:1)*e.width/2)*o,e=(n.y+e.height/2)*o,n=this.getMetrics(),this.scroll(-(t-n.viewWidth/2),-(e-n.viewHeight/2));var r=this.svgBlockCanvas_;setTimeout((function(){Blockly.utils.dom.removeClass(r,"blocklyTransitioning")}),Blockly.Colours.canvasTransitionLength)}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},Blockly.WorkspaceSvg.prototype.setScale=function(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,Blockly.hideChaff(!1),this.flyout_&&(this.flyout_.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))},Blockly.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},Blockly.WorkspaceSvg.prototype.scroll=function(e,t){Blockly.hideChaff(!0);var n=this.getMetrics();e=Math.min(e,-n.scrollLeft),t=Math.min(t,-n.scrollTop);var o=n.scrollTop+Math.max(0,n.scrollHeight-n.viewHeight);e=Math.max(e,-(n.scrollLeft+Math.max(0,n.scrollWidth-n.viewWidth))),t=Math.max(t,-o),this.scrollX=e,this.scrollY=t,this.scrollbar&&this.scrollbar.set(-(e+n.scrollLeft),-(t+n.scrollTop),!1),e+=n.absoluteLeft,t+=n.absoluteTop,Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),this.translate(e,t)},Blockly.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(e){var t=this.getMetrics();"number"==typeof e.x&&(this.scrollX=-(t.scrollLeft+(t.scrollWidth-t.viewWidth)*e.x)),"number"==typeof e.y&&(this.scrollY=-(t.scrollTop+(t.scrollHeight-t.viewHeight)*e.y)),this.translate(this.scrollX+t.absoluteLeft,this.scrollY+t.absoluteTop)},Blockly.WorkspaceSvg.prototype.getBlockById=function(e){return Blockly.WorkspaceSvg.superClass_.getBlockById.call(this,e)},Blockly.WorkspaceSvg.prototype.getTopBlocks=function(e){return Blockly.WorkspaceSvg.superClass_.getTopBlocks.call(this,e)},Blockly.WorkspaceSvg.prototype.addTopBlock=function(e){this.addTopBoundedElement(e),Blockly.WorkspaceSvg.superClass_.addTopBlock.call(this,e)},Blockly.WorkspaceSvg.prototype.removeTopBlock=function(e){this.removeTopBoundedElement(e),Blockly.WorkspaceSvg.superClass_.removeTopBlock.call(this,e)},Blockly.WorkspaceSvg.prototype.addTopComment=function(e){this.addTopBoundedElement(e),Blockly.WorkspaceSvg.superClass_.addTopComment.call(this,e)},Blockly.WorkspaceSvg.prototype.removeTopComment=function(e){this.removeTopBoundedElement(e),Blockly.WorkspaceSvg.superClass_.removeTopComment.call(this,e)},Blockly.WorkspaceSvg.prototype.addTopBoundedElement=function(e){this.topBoundedElements_.push(e)},Blockly.WorkspaceSvg.prototype.removeTopBoundedElement=function(e){Blockly.utils.arrayRemove(this.topBoundedElements_,e)},Blockly.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},Blockly.WorkspaceSvg.prototype.setResizesEnabled=function(e){var t=!this.resizesEnabled_&&e;this.resizesEnabled_=e,t&&this.resizeContents()},Blockly.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),Blockly.WorkspaceSvg.superClass_.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},Blockly.WorkspaceSvg.prototype.registerButtonCallback=function(e,t){if("function"!=typeof t)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[e]=t},Blockly.WorkspaceSvg.prototype.getButtonCallback=function(e){return(e=this.flyoutButtonCallbacks_[e])?e:null},Blockly.WorkspaceSvg.prototype.removeButtonCallback=function(e){this.flyoutButtonCallbacks_[e]=null},Blockly.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(e,t){if("function"!=typeof t)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[e]=t},Blockly.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(e){return this.toolboxCategoryCallbacks_[e]||null},Blockly.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(e){this.toolboxCategoryCallbacks_[e]=null},Blockly.WorkspaceSvg.prototype.getGesture=function(e){var t="mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type,n=this.currentGesture_;return n?t&&n.hasStarted()?(console.warn("Tried to start the same gesture twice."),n.cancel(),null):n:t?this.currentGesture_=new Blockly.TouchGesture(e,this):null},Blockly.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},Blockly.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},Blockly.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},Blockly.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},Blockly.inject=function(e,t){if(Blockly.checkBlockColourConstants(),"string"==typeof e&&(e=document.getElementById(e)||document.querySelector(e)),!e||!Blockly.utils.dom.containsNode(document,e))throw Error("Error: container is not in current document.");t=new Blockly.Options(t||{});var n=document.createElement("div");n.className="injectionDiv",n.tabIndex=0,Blockly.utils.aria.setState(n,Blockly.utils.aria.State.LABEL,Blockly.Msg.WORKSPACE_ARIA_LABEL),e.appendChild(n),Blockly.utils.dom.startTextWidthCache(),e=Blockly.createDom_(n,t);var o=new Blockly.BlockDragSurfaceSvg(n),r=new Blockly.WorkspaceDragSurfaceSvg(n),i=Blockly.createMainWorkspace_(e,t,o,r);return Blockly.init_(i),Blockly.mainWorkspace=i,Blockly.svgResize(i),n.addEventListener("focusin",(function(){Blockly.mainWorkspace=i})),i},Blockly.createDom_=function(e,t){e.setAttribute("dir","LTR"),Blockly.Css.inject(t.hasCss,t.pathToMedia),e=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.SVG,{xmlns:Blockly.utils.dom.SVG_NS,"xmlns:html":Blockly.utils.dom.HTML_NS,"xmlns:xlink":Blockly.utils.dom.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},e);var n=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.DEFS,{},e),o=String(Math.random()).substring(2);return t.gridPattern=Blockly.Grid.createDom(o,t.gridOptions,n),e},Blockly.createMainWorkspace_=function(e,t,n,o){return t.parentWorkspace=null,n=(t=new Blockly.WorkspaceSvg(t,n,o)).options,t.scale=n.zoomOptions.startScale,e.appendChild(t.createDom("blocklyMainBackground")),Blockly.utils.dom.addClass(t.getInjectionDiv(),t.getRenderer().getClassName()),Blockly.utils.dom.addClass(t.getInjectionDiv(),t.getTheme().getClassName()),!n.hasCategories&&n.languageTree&&(o=t.addFlyout(Blockly.utils.Svg.SVG),Blockly.utils.dom.insertAfter(o,e)),n.hasTrashcan&&t.addTrashcan(),n.zoomOptions&&n.zoomOptions.controls&&t.addZoomControls(),t.getThemeManager().subscribe(e,"workspaceBackgroundColour","background-color"),t.translate(0,0),t.addChangeListener(Blockly.bumpIntoBoundsHandler_(t)),Blockly.svgResize(t),Blockly.WidgetDiv.createDom(),Blockly.DropDownDiv.createDom(),Blockly.Tooltip.createDom(),t},Blockly.extractObjectFromEvent_=function(e,t){var n=null;switch(t.type){case Blockly.Events.BLOCK_CREATE:case Blockly.Events.BLOCK_MOVE:(n=e.getBlockById(t.blockId))&&(n=n.getRootBlock());break;case Blockly.Events.COMMENT_CREATE:case Blockly.Events.COMMENT_MOVE:n=e.getCommentById(t.commentId)}return n},Blockly.bumpTopObjectsIntoBounds_=function(e){var t=e.getMetricsManager();if(t.hasFixedEdges()&&!e.isDragging()){t=t.getScrollMetrics(!0);for(var n,o=e.getTopBoundedElements(),r=0;n=o[r];r++)Blockly.bumpObjectIntoBounds_(e,t,n)}},Blockly.bumpIntoBoundsHandler_=function(e){return function(t){var n=e.getMetricsManager();if(n.hasFixedEdges()&&!e.isDragging())if(-1!==Blockly.Events.BUMP_EVENTS.indexOf(t.type)){n=n.getScrollMetrics(!0);var o=Blockly.extractObjectFromEvent_(e,t);if(o){var r=Blockly.Events.getGroup();Blockly.Events.setGroup(t.group),Blockly.bumpObjectIntoBounds_(e,n,o)&&!t.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),null!==r&&Blockly.Events.setGroup(r)}}else t.type===Blockly.Events.VIEWPORT_CHANGE&&t.scale>t.oldScale&&Blockly.bumpTopObjectsIntoBounds_(e)}},Blockly.bumpObjectIntoBounds_=function(e,t,n){var o=n.getBoundingRectangle(),r=o.right-o.left,i=Blockly.utils.math.clamp(t.top,o.top,t.top+t.height-(o.bottom-o.top))-o.top,s=t.left;return t=t.left+t.width-r,e.RTL?s=Math.min(t,s):t=Math.max(s,t),!(!(e=Blockly.utils.math.clamp(s,o.left,t)-o.left)&&!i)&&(n.moveBy(e,i),!0)},Blockly.init_=function(e){var t=e.options,n=e.getParentSvg();if(Blockly.browserEvents.conditionalBind(n.parentNode,"contextmenu",null,(function(e){Blockly.utils.isTargetInput(e)||e.preventDefault()})),n=Blockly.browserEvents.conditionalBind(window,"resize",null,(function(){Blockly.utils.resizeTracker(e),Blockly.hideChaff(!0),Blockly.svgResize(e),Blockly.bumpTopObjectsIntoBounds_(e)})),e.setResizeHandlerWrapper(n),Blockly.inject.bindDocumentEvents_(),t.languageTree){n=e.getToolbox();var o=e.getFlyout(!0);n?n.init():o&&(o.init(e),o.show(t.languageTree),"function"==typeof o.scrollToStart&&o.scrollToStart())}t.hasTrashcan&&e.trashcan.init(),t.zoomOptions&&t.zoomOptions.controls&&e.zoomControls_.init(),t.moveOptions&&t.moveOptions.scrollbars?(e.scrollbar=new Blockly.ScrollbarPair(e,!0===t.moveOptions.scrollbars||!!t.moveOptions.scrollbars.horizontal,!0===t.moveOptions.scrollbars||!!t.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),t.hasSounds&&Blockly.inject.loadSounds_(t.pathToMedia,e)},Blockly.inject.bindDocumentEvents_=function(){Blockly.documentEventsBound_||(Blockly.browserEvents.conditionalBind(document,"scroll",null,(function(){for(var e,t=Blockly.Workspace.getAll(),n=0;e=t[n];n++)e.updateInverseScreenCTM&&e.updateInverseScreenCTM()})),Blockly.browserEvents.conditionalBind(document,"keydown",null,Blockly.onKeyDown),Blockly.browserEvents.bind(document,"touchend",null,Blockly.longStop_),Blockly.browserEvents.bind(document,"touchcancel",null,Blockly.longStop_),Blockly.utils.userAgent.IPAD&&Blockly.browserEvents.conditionalBind(window,"orientationchange",document,(function(){Blockly.svgResize(Blockly.getMainWorkspace())}))),Blockly.documentEventsBound_=!0},Blockly.inject.loadSounds_=function(e,t){var n=t.getAudioManager();n.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),n.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),n.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");var o=[];e=function(){for(;o.length;)Blockly.browserEvents.unbind(o.pop());n.preload()},o.push(Blockly.browserEvents.conditionalBind(document,"mousemove",null,e,!0)),o.push(Blockly.browserEvents.conditionalBind(document,"touchstart",null,e,!0))},Blockly.Names=function(e,t){if(this.variablePrefix_=t||"",this.reservedDict_=Object.create(null),e)for(e=e.split(","),t=0;t<e.length;t++)this.reservedDict_[e[t]]=!0;this.reset()},Blockly.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",Blockly.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},Blockly.Names.prototype.setVariableMap=function(e){this.variableMap_=e},Blockly.Names.prototype.getNameForUserVariable_=function(e){return this.variableMap_?(e=this.variableMap_.getVariableById(e))?e.name:null:(console.warn("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)},Blockly.Names.prototype.populateVariables=function(e){e=Blockly.Variables.allUsedVarModels(e);for(var t=0;t<e.length;t++)this.getName(e[t].getId(),Blockly.VARIABLE_CATEGORY_NAME)},Blockly.Names.prototype.populateProcedures=function(e){e=(e=Blockly.Procedures.allProcedures(e))[0].concat(e[1]);for(var t=0;t<e.length;t++)this.getName(e[t][0],Blockly.PROCEDURE_CATEGORY_NAME)},Blockly.Names.prototype.getName=function(e,t){var n=e;t==Blockly.VARIABLE_CATEGORY_NAME&&(e=this.getNameForUserVariable_(e))&&(n=e),e=n.toLowerCase();var o=t==Blockly.VARIABLE_CATEGORY_NAME||t==Blockly.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";t in this.db_||(this.db_[t]=Object.create(null));var r=this.db_[t];return e in r?o+r[e]:(t=this.getDistinctName(n,t),r[e]=t.substr(o.length),t)},Blockly.Names.prototype.getUserNames=function(e){return Object.keys(this.db_[e]||{})},Blockly.Names.prototype.getDistinctName=function(e,t){e=this.safeName_(e);for(var n="";this.dbReverse_[e+n]||e+n in this.reservedDict_;)n=n?n+1:2;return e+=n,this.dbReverse_[e]=!0,(t==Blockly.VARIABLE_CATEGORY_NAME||t==Blockly.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+e},Blockly.Names.prototype.safeName_=function(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(e[0])&&(e="my_"+e)):e=Blockly.Msg.UNNAMED_KEY||"unnamed",e},Blockly.Names.equals=function(e,t){return e.toLowerCase()==t.toLowerCase()},Blockly.Procedures={},Blockly.Procedures.NAME_TYPE=Blockly.PROCEDURE_CATEGORY_NAME,Blockly.Procedures.DEFAULT_ARG="x",Blockly.Procedures.allProcedures=function(e){var t=e.getBlocksByType("procedures_defnoreturn",!1).map((function(e){return e.getProcedureDef()}));return e=e.getBlocksByType("procedures_defreturn",!1).map((function(e){return e.getProcedureDef()})),t.sort(Blockly.Procedures.procTupleComparator_),e.sort(Blockly.Procedures.procTupleComparator_),[t,e]},Blockly.Procedures.procTupleComparator_=function(e,t){return e[0].localeCompare(t[0],void 0,{sensitivity:"base"})},Blockly.Procedures.findLegalName=function(e,t){if(t.isInFlyout)return e;for(e=e||Blockly.Msg.UNNAMED_KEY||"unnamed";!Blockly.Procedures.isLegalName_(e,t.workspace,t);){var n=e.match(/^(.*?)(\d+)$/);e=n?n[1]+(parseInt(n[2],10)+1):e+"2"}return e},Blockly.Procedures.isLegalName_=function(e,t,n){return!Blockly.Procedures.isNameUsed(e,t,n)},Blockly.Procedures.isNameUsed=function(e,t,n){t=t.getAllBlocks(!1);for(var o=0;o<t.length;o++)if(t[o]!=n){var r="";if(t[o].getProcedureDef?r=t[o].getProcedureDef()[0]:t[o].getName&&(r=t[o].getName()),Blockly.Names.equals(r,e))return!0}return!1},Blockly.Procedures.rename=function(e){e=e.trim();var t=Blockly.Procedures.findLegalName(e,this.getSourceBlock()),n=this.getValue();if(!t)return n;if(n!=e&&n!=t){e=this.getSourceBlock().workspace.getAllBlocks(!1);for(var o=0;o<e.length;o++)e[o].renameProcedure&&e[o].renameProcedure(n,t)}return t},Blockly.Procedures.flyoutCategory=function(e){function t(e,t){for(var o=0;o<e.length;o++){var r=e[o][0],i=e[o][1],s=Blockly.utils.xml.createElement("block");s.setAttribute("type",t),s.setAttribute("gap",16);var a=Blockly.utils.xml.createElement("mutation");for(a.setAttribute("name",r),s.appendChild(a),r=0;r<i.length;r++){var l=Blockly.utils.xml.createElement("arg");l.setAttribute("name",i[r]),a.appendChild(l)}n.push(s)}}var n=[];if(Blockly.Blocks.procedures_defnoreturn){var o=Blockly.utils.xml.createElement("block");o.setAttribute("type","procedures_defnoreturn"),o.setAttribute("gap",16);var r=Blockly.utils.xml.createElement("field");r.setAttribute("name","NAME"),r.appendChild(Blockly.utils.xml.createTextNode(Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),o.appendChild(r),n.push(o)}return Blockly.Blocks.procedures_defreturn&&((o=Blockly.utils.xml.createElement("block")).setAttribute("type","procedures_defreturn"),o.setAttribute("gap",16),(r=Blockly.utils.xml.createElement("field")).setAttribute("name","NAME"),r.appendChild(Blockly.utils.xml.createTextNode(Blockly.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),o.appendChild(r),n.push(o)),Blockly.Blocks.procedures_ifreturn&&((o=Blockly.utils.xml.createElement("block")).setAttribute("type","procedures_ifreturn"),o.setAttribute("gap",16),n.push(o)),n.length&&n[n.length-1].setAttribute("gap",24),t((e=Blockly.Procedures.allProcedures(e))[0],"procedures_callnoreturn"),t(e[1],"procedures_callreturn"),n},Blockly.Procedures.updateMutatorFlyout_=function(e){for(var t,n=[],o=e.getBlocksByType("procedures_mutatorarg",!1),r=0;t=o[r];r++)n.push(t.getFieldValue("NAME"));o=Blockly.utils.xml.createElement("xml"),(r=Blockly.utils.xml.createElement("block")).setAttribute("type","procedures_mutatorarg"),(t=Blockly.utils.xml.createElement("field")).setAttribute("name","NAME"),n=Blockly.Variables.generateUniqueNameFromOptions(Blockly.Procedures.DEFAULT_ARG,n),n=Blockly.utils.xml.createTextNode(n),t.appendChild(n),r.appendChild(t),o.appendChild(r),e.updateToolbox(o)},Blockly.Procedures.mutatorOpenListener=function(e){if(e.type==Blockly.Events.BUBBLE_OPEN&&"mutator"===e.bubbleType&&e.isOpen){var t=(e=Blockly.Workspace.getById(e.workspaceId).getBlockById(e.blockId)).type;"procedures_defnoreturn"!=t&&"procedures_defreturn"!=t||(e=e.mutator.getWorkspace(),Blockly.Procedures.updateMutatorFlyout_(e),e.addChangeListener(Blockly.Procedures.mutatorChangeListener_))}},Blockly.Procedures.mutatorChangeListener_=function(e){e.type!=Blockly.Events.BLOCK_CREATE&&e.type!=Blockly.Events.BLOCK_DELETE&&e.type!=Blockly.Events.BLOCK_CHANGE||(e=Blockly.Workspace.getById(e.workspaceId),Blockly.Procedures.updateMutatorFlyout_(e))},Blockly.Procedures.getCallers=function(e,t){var n=[];t=t.getAllBlocks(!1);for(var o=0;o<t.length;o++)if(t[o].getProcedureCall){var r=t[o].getProcedureCall();r&&Blockly.Names.equals(r,e)&&n.push(t[o])}return n},Blockly.Procedures.mutateCallers=function(e){var t,n=Blockly.Events.recordUndo,o=e.getProcedureDef()[0],r=e.mutationToDom(!0);for(e=Blockly.Procedures.getCallers(o,e.workspace),o=0;t=e[o];o++){var i=t.mutationToDom();i=i&&Blockly.Xml.domToText(i),t.domToMutation(r);var s=t.mutationToDom();i!=(s=s&&Blockly.Xml.domToText(s))&&(Blockly.Events.recordUndo=!1,Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BLOCK_CHANGE))(t,"mutation",null,i,s)),Blockly.Events.recordUndo=n)}},Blockly.Procedures.getDefinition=function(e,t){t=t.getAllBlocks(!1);for(var n=0;n<t.length;n++)if(t[n].getProcedureDef){var o=t[n].getProcedureDef();if(o&&Blockly.Names.equals(o[0],e))return t[n]}return null},Blockly.ShortcutRegistry=function(){Blockly.ShortcutRegistry.registry=this,this.registry_=Object.create(null),this.keyMap_=Object.create(null)},Blockly.ShortcutRegistry.modifierKeys={Shift:Blockly.utils.KeyCodes.SHIFT,Control:Blockly.utils.KeyCodes.CTRL,Alt:Blockly.utils.KeyCodes.ALT,Meta:Blockly.utils.KeyCodes.META},Blockly.ShortcutRegistry.prototype.register=function(e,t){if(this.registry_[e.name]&&!t)throw Error('Shortcut with name "'+e.name+'" already exists.');this.registry_[e.name]=e},Blockly.ShortcutRegistry.prototype.unregister=function(e){return this.registry_[e]?(this.removeAllKeyMappings(e),delete this.registry_[e],!0):(console.warn('Keyboard shortcut with name "'+e+'" not found.'),!1)},Blockly.ShortcutRegistry.prototype.addKeyMapping=function(e,t,n){e=String(e);var o=this.keyMap_[e];if(o&&!n)throw Error('Shortcut with name "'+t+'" collides with shortcuts '+o.toString());o&&n?o.unshift(t):this.keyMap_[e]=[t]},Blockly.ShortcutRegistry.prototype.removeKeyMapping=function(e,t,n){var o=this.keyMap_[e];if(!o&&!n)return console.warn('No keyboard shortcut with name "'+t+'" registered with key code "'+e+'"'),!1;var r=o.indexOf(t);return-1<r?(o.splice(r,1),0==o.length&&delete this.keyMap_[e],!0):(n||console.warn('No keyboard shortcut with name "'+t+'" registered with key code "'+e+'"'),!1)},Blockly.ShortcutRegistry.prototype.removeAllKeyMappings=function(e){for(var t in this.keyMap_)this.removeKeyMapping(t,e,!0)},Blockly.ShortcutRegistry.prototype.setKeyMap=function(e){this.keyMap_=e},Blockly.ShortcutRegistry.prototype.getKeyMap=function(){return Blockly.utils.object.deepMerge(Object.create(null),this.keyMap_)},Blockly.ShortcutRegistry.prototype.getRegistry=function(){return Blockly.utils.object.deepMerge(Object.create(null),this.registry_)},Blockly.ShortcutRegistry.prototype.onKeyDown=function(e,t){var n=this.serializeKeyEvent_(t);if(!(n=this.getShortcutNamesByKeyCode(n)))return!1;for(var o,r=0;o=n[r];r++)if((!(o=this.registry_[o]).preconditionFn||o.preconditionFn(e))&&o.callback&&o.callback(e,t,o))return!0;return!1},Blockly.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(e){return this.keyMap_[e]||[]},Blockly.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(e){var t,n=[];for(t in this.keyMap_)-1<this.keyMap_[t].indexOf(e)&&n.push(t);return n},Blockly.ShortcutRegistry.prototype.serializeKeyEvent_=function(e){var t,n="";for(t in Blockly.ShortcutRegistry.modifierKeys)e.getModifierState(t)&&(""!=n&&(n+="+"),n+=t);return""!=n&&e.keyCode?n=n+"+"+e.keyCode:e.keyCode&&(n=e.keyCode.toString()),n},Blockly.ShortcutRegistry.prototype.checkModifiers_=function(e){for(var t,n=Blockly.utils.object.values(Blockly.ShortcutRegistry.modifierKeys),o=0;t=e[o];o++)if(0>n.indexOf(t))throw Error(t+" is not a valid modifier key.")},Blockly.ShortcutRegistry.prototype.createSerializedKey=function(e,t){var n="";if(t)for(var o in this.checkModifiers_(t),Blockly.ShortcutRegistry.modifierKeys)-1<t.indexOf(Blockly.ShortcutRegistry.modifierKeys[o])&&(""!=n&&(n+="+"),n+=o);return""!=n&&e?n=n+"+"+e:e&&(n=e.toString()),n},new Blockly.ShortcutRegistry,Blockly.VariableModel=function(e,t,n,o){this.workspace=e,this.name=t,this.type=n||"",this.id_=o||Blockly.utils.genUid(),Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.VAR_CREATE))(this))},Blockly.VariableModel.prototype.getId=function(){return this.id_},Blockly.VariableModel.compareByName=function(e,t){return e.name.localeCompare(t.name,void 0,{sensitivity:"base"})},Blockly.Variables={},Blockly.Variables.NAME_TYPE=Blockly.VARIABLE_CATEGORY_NAME,Blockly.Variables.allUsedVarModels=function(e){var t=e.getAllBlocks(!1).filter((function(e){return!e.disabled}));e=Object.create(null);for(var n=0;n<t.length;n++){var o=t[n].getVarModels();if(o)for(var r=0;r<o.length;r++){var i=o[r],s=i.getId();s&&(e[s]=i)}}for(s in t=[],e)t.push(e[s]);return t},Blockly.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_={},Blockly.Variables.allDeveloperVariables=function(e){e=e.getAllBlocks(!1);for(var t,n=Object.create(null),o=0;t=e[o];o++){var r=t.getDeveloperVariables;if(!r&&t.getDeveloperVars&&(r=t.getDeveloperVars,Blockly.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[t.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+t.type+"')"),Blockly.Variables.ALL_DEVELOPER_VARS_WARNINGS_BY_BLOCK_TYPE_[t.type]=!0)),r)for(t=r(),r=0;r<t.length;r++)n[t[r]]=!0}return Object.keys(n)},Blockly.Variables.flyoutCategory=function(e){var t=[],n=document.createElement("button");return n.setAttribute("text","%{BKY_NEW_VARIABLE}"),n.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback(Blockly.CREATE_VARIABLE_ID,(function(e){Blockly.Variables.createVariableButtonHandler(e.getTargetWorkspace())})),t.push(n),e=Blockly.Variables.flyoutCategoryBlocks(e),t.concat(e)},Blockly.Variables.flyoutCategoryBlocks=function(e){var t=[];if(0<(e=e.getVariablesOfType("")).length){var n=e[e.length-1];if(Blockly.Blocks.variables_set){var o=Blockly.utils.xml.createElement("block");o.setAttribute("type","variables_set"),o.setAttribute("gap",Blockly.Blocks.math_change?8:24),o.appendChild(Blockly.Variables.generateVariableFieldDom(n)),t.push(o)}if(Blockly.Blocks.math_change&&((o=Blockly.utils.xml.createElement("block")).setAttribute("type","math_change"),o.setAttribute("gap",Blockly.Blocks.variables_get?20:8),o.appendChild(Blockly.Variables.generateVariableFieldDom(n)),n=Blockly.Xml.textToDom('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),o.appendChild(n),t.push(o)),Blockly.Blocks.variables_get){e.sort(Blockly.VariableModel.compareByName),n=0;for(var r;r=e[n];n++)(o=Blockly.utils.xml.createElement("block")).setAttribute("type","variables_get"),o.setAttribute("gap",8),o.appendChild(Blockly.Variables.generateVariableFieldDom(r)),t.push(o)}}return t},Blockly.Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",Blockly.Variables.generateUniqueName=function(e){return Blockly.Variables.generateUniqueNameFromOptions(Blockly.Variables.VAR_LETTER_OPTIONS.charAt(0),e.getAllVariableNames())},Blockly.Variables.generateUniqueNameFromOptions=function(e,t){if(!t.length)return e;for(var n=Blockly.Variables.VAR_LETTER_OPTIONS,o="",r=n.indexOf(e);;){for(var i=!1,s=0;s<t.length;s++)if(t[s].toLowerCase()==e){i=!0;break}if(!i)return e;++r==n.length&&(r=0,o=Number(o)+1),e=n.charAt(r)+o}},Blockly.Variables.createVariableButtonHandler=function(e,t,n){var o=n||"",r=function(n){Blockly.Variables.promptName(Blockly.Msg.NEW_VARIABLE_TITLE,n,(function(n){if(n){var i=Blockly.Variables.nameUsedWithAnyType(n,e),s=Blockly.Functions.getDefinition(n,e);i||s?(s||i.type==o?s=Blockly.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",i.name):s=(s=Blockly.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",i.name).replace("%2",i.type),Blockly.alert(s,(function(){r(n)}))):(e.createVariable(n,o),t&&t(n))}else t&&t(null)}))};r("")},Blockly.Variables.createVariable=Blockly.Variables.createVariableButtonHandler,Blockly.Variables.renameVariable=function(e,t,n){var o=function(r){var i=Blockly.Msg.RENAME_VARIABLE_TITLE.replace("%1",t.name);Blockly.Variables.promptName(i,r,(function(r){if(r){var i=Blockly.Variables.nameUsedWithOtherType_(r,t.type,e);i?(i=Blockly.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",i.name).replace("%2",i.type),Blockly.alert(i,(function(){o(r)}))):(e.renameVariableById(t.getId(),r),n&&n(r))}else n&&n(null)}))};o(t.name||"")},Blockly.Variables.promptName=function(e,t,n){Blockly.prompt(e,t,(function(e){e&&((e=e.replace(/[\s\xa0]+/g," ").trim())==Blockly.Msg.RENAME_VARIABLE||e==Blockly.Msg.NEW_VARIABLE)&&(e=null),n(e)}))},Blockly.Variables.nameUsedWithOtherType_=function(e,t,n){n=n.getVariableMap().getAllVariables(),e=e.toLowerCase();for(var o,r=0;o=n[r];r++)if(o.name.toLowerCase()==e&&o.type!=t)return o;return null},Blockly.Variables.nameUsedWithAnyType=function(e,t){t=t.getVariableMap().getAllVariables(),e=e.toLowerCase();for(var n,o=0;n=t[o];o++)if(n.name.toLowerCase()==e)return n;return null},Blockly.Variables.generateVariableFieldXmlString=function(e){var t=e.type;return'<field name="VAR" id="'+e.getId()+'" variabletype="'+goog.string.htmlEscape(t)+'">'+goog.string.htmlEscape(e.name)+"</field>"},Blockly.Variables.generateVariableFieldDom=function(e){var t=Blockly.utils.xml.createElement("field");return t.setAttribute("name","VAR"),t.setAttribute("id",e.getId()),t.setAttribute("variabletype",e.type),e=Blockly.utils.xml.createTextNode(e.name),t.appendChild(e),t},Blockly.Variables.getOrCreateVariablePackage=function(e,t,n,o){var r=Blockly.Variables.getVariable(e,t,n,o);return r||(r=Blockly.Variables.createVariable_(e,t,n,o)),r},Blockly.Variables.getVariable=function(e,t,n,o){var r=e.getPotentialVariableMap(),i=null;if(t&&(!(i=e.getVariableById(t))&&r&&(i=r.getVariableById(t)),i))return i;if(n){if(null==o)throw Error("Tried to look up a variable by name without a type");!(i=e.getVariable(n,o))&&r&&(i=r.getVariable(n,o))}return i},Blockly.Variables.createVariable_=function(e,t,n,o){var r=e.getPotentialVariableMap();return n||(n=Blockly.Variables.generateUniqueName(e.isFlyout?e.targetWorkspace:e)),r?r.createVariable(n,o,t):e.createVariable(n,o,t)},Blockly.Variables.getAddedVariables=function(e,t){e=e.getAllVariables();var n=[];if(t.length!=e.length)for(var o=0;o<e.length;o++){var r=e[o];-1==t.indexOf(r)&&n.push(r)}return n},Blockly.Functions={},Blockly.Functions.NAME_TYPE=Blockly.PROCEDURE_CATEGORY_NAME,Blockly.Functions.flyoutCategory=function(e){var t=[];Blockly.Functions.addCreateButton_(e,t),e=Blockly.Functions.getAllFunctionDefinitionBlocks(e);for(var n=0;n<e.length;n++){var o=e[n].getName(),r=e[n].getArguments(),i=Blockly.utils.xml.createElement("block");i.setAttribute("type","function_call"),i.setAttribute("gap",16);var s=Blockly.utils.xml.createElement("mutation");for(s.setAttribute("name",o),i.appendChild(s),o=0;o<r.length;o++){var a=Blockly.utils.xml.createElement("arg");a.setAttribute("name",r[o].name),a.setAttribute("type",r[o].type),a.setAttribute("id",r[o].id),s.appendChild(a)}t.push(i)}return t},Blockly.Functions.addCreateButton_=function(e,t){var n=document.createElement("button");n.setAttribute("text",Blockly.Msg.FUNCTION_CREATE_NEW),n.setAttribute("callbackKey","CREATE_FUNCTION"),e.registerButtonCallback("CREATE_FUNCTION",(function(){Blockly.Functions.createFunctionCallback_(e)})),t.push(n)},Blockly.Functions.getCallers=function(e,t){var n=[];t=t.getAllBlocks();for(var o=0;o<t.length;o++)(t[o].type==Blockly.FUNCTION_CALL_BLOCK_TYPE||t[o].type===Blockly.FUNCTION_CALL_OUTPUT_BLOCK_TYPE)&&t[o].getName&&t[o].getName()==e&&n.push(t[o]);return n},Blockly.Functions.getDefinition=function(e,t){t=t.getTopBlocks(!1);for(var n=0;n<t.length;n++)if(t[n].type==Blockly.FUNCTION_DEFINITION_BLOCK_TYPE&&t[n].getName&&t[n].getName()==e)return t[n];return null},Blockly.Functions.getAllFunctionDefinitionBlocks=function(e){e=e.getTopBlocks(!1);for(var t=[],n=0;n<e.length;n++)e[n].type===Blockly.FUNCTION_DEFINITION_BLOCK_TYPE&&t.push(e[n]);return t},Blockly.Functions.isCustomType=function(e){return!("boolean"==e||"string"==e||"number"==e)},Blockly.Functions.newFunctionMutation=function(e){return e='<xml><mutation name="'+Blockly.Functions.findLegalName(Blockly.Msg.FUNCTIONS_DEFAULT_FUNCTION_NAME,e)+'" functionid="'+Blockly.utils.genUid()+'"></mutation></xml>',(e=Blockly.Xml.textToDom(e).firstChild).removeAttribute("xmlns"),e},Blockly.Functions.incrementNameSuffix=function(e){var t=e.match(/^(.*?)(\d+)$/);return t?t[1]+(parseInt(t[2],10)+1):e+"2"},Blockly.Functions.findUniqueParamName=function(e,t){for(;!Blockly.Functions.isUniqueParamName(e,t);)e=Blockly.Functions.incrementNameSuffix(e);return e},Blockly.Functions.isUniqueParamName=function(e,t){return!t||-1==t.indexOf(e)},Blockly.Functions.createFunctionCallback_=function(e){Blockly.hideChaff(),Blockly.selected&&Blockly.selected.unselect(),Blockly.Functions.editFunctionExternalHandler(Blockly.Functions.newFunctionMutation(e),Blockly.Functions.createFunctionCallbackFactory_(e))},Blockly.Functions.createFunctionCallbackFactory_=function(e){return function(t){if(t){if(t='<xml><block type="'+Blockly.FUNCTION_DEFINITION_BLOCK_TYPE+'">'+Blockly.Xml.domToText(t)+"</block></xml>",t=Blockly.Xml.textToDom(t),Blockly.Events.setGroup(!0),(t=Blockly.Xml.domToBlock(t.firstChild,e)).updateDisplay_(),e.getMetrics){var n=e.getMetrics(),o=t.getHeightWidth();t.moveBy(n.viewLeft+n.viewWidth/2-o.width/2,n.viewTop+n.viewHeight/2-o.height/2),t.scheduleSnapAndBump()}e.centerOnBlock(t.id),Blockly.Events.setGroup(!1)}}},Blockly.Functions.editFunctionCallback_=function(e){if(e.type==Blockly.FUNCTION_CALL_BLOCK_TYPE||e.type==Blockly.FUNCTION_CALL_OUTPUT_BLOCK_TYPE){var t=e.workspace.isFlyout?e.workspace.targetWorkspace:e.workspace;e=Blockly.Functions.getDefinition(e.getName(),t)}Blockly.hideChaff(),Blockly.selected&&Blockly.selected.unselect(),Blockly.Functions.editFunctionExternalHandler(e.mutationToDom(),Blockly.Functions.editFunctionCallbackFactory_(e))},Blockly.Functions.editFunctionCallbackFactory_=function(e){return function(t){t&&(Blockly.Functions.mutateCallersAndDefinition(e.getName(),e.workspace,t),e.updateDisplay_())}},Blockly.Functions.editFunctionExternalHandler=function(e,t){console.warn("External function editor must be overriden: Blockly.Functions.editFunctionExternalHandler",e,t)},Blockly.Functions.makeEditOption=function(e){return{enabled:!e.inDebugWorkspace(),text:Blockly.Msg.FUNCTIONS_EDIT_OPTION,callback:function(){Blockly.Functions.editFunctionCallback_(e)}}},Blockly.Functions.makeCreateCallOption=function(e){var t=e.getField("function_name").getText(),n=goog.dom.createDom("mutation");return n.setAttribute("name",t),(n=goog.dom.createDom("block",null,n)).setAttribute("type","function_call"),{enabled:0<e.workspace.remainingCapacity()&&!e.inDebugWorkspace(),text:Blockly.Msg.FUNCTIONS_CREATE_CALL_OPTION.replace("%1",t),callback:Blockly.ContextMenu.callbackFactory(e,n)}},Blockly.Functions.makeGoToDefinitionOption=function(e){return{enabled:!e.inDebugWorkspace(),text:Blockly.Msg.FUNCTIONS_GO_TO_DEFINITION_OPTION,callback:function(){var t=e.getField("function_name").getText();(t=Blockly.Functions.getDefinition(t,e.workspace))&&e.workspace.centerOnBlock(t.id)}}},Blockly.Functions.getReporterArgumentType=function(e){switch(e){case"Boolean":case"Number":case"String":return e.toLowerCase();default:return e}},Blockly.Functions.namesInUse=function(e,t,n){var o={};return e.getAllVariables().forEach((function(e){o[e.name]=!0})),e.getAllBlocks().forEach((function(e){e==t||n&&e.getFunctionId&&e.getFunctionId()==n||(e.type==Blockly.FUNCTION_DEFINITION_BLOCK_TYPE?o[e.getName()]=!0:"procedures_defreturn"!=e.type&&"procedures_defnoreturn"!=e.type||(o[e.getProcedureDef()[0]]=!0))})),o},Blockly.Functions.idsInUse=function(e){var t=[];return e.getAllBlocks().forEach((function(e){e.type==Blockly.FUNCTION_DEFINITION_BLOCK_TYPE&&t.push(e.getFunctionId())})),t},Blockly.Functions.findLegalName=function(e,t,n){if(n&&n.isInFlyout)return e;for(t=Blockly.Functions.namesInUse(t,n);t[e];)e=Blockly.Functions.incrementNameSuffix(e);return e},Blockly.Functions.rename=function(e){e=e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"");var t=Blockly.Functions.findLegalName(e,this.sourceBlock_.workspace,this.sourceBlock_),n=this.getValue();if(!e)return n;if(!t)return e;if(!n)return this.sourceBlock_.name_=t;if(n!=e&&n!=t){(e=this.sourceBlock_).name_=t;var o=e.mutationToDom();e.name_=n,Blockly.Functions.mutateCallersAndDefinition(n,e.workspace,o)}return t},Blockly.Functions.validateFunctionExternal=function(e,t){var n=e.getAttribute("name");if(!n)return Blockly.alert(Blockly.Msg.FUNCTION_WARNING_EMPTY_NAME),!1;for(var o={},r=0;r<e.childNodes.length;++r){var i=e.childNodes[r].getAttribute("name");if(!i)return Blockly.alert(Blockly.Msg.FUNCTION_WARNING_EMPTY_NAME),!1;if(o[i])return Blockly.alert(Blockly.Msg.FUNCTION_WARNING_DUPLICATE_ARG),!1;o[i]=!0}return o[n]?(Blockly.alert(Blockly.Msg.FUNCTION_WARNING_ARG_NAME_IS_FUNCTION_NAME),!1):(e=e.getAttribute("functionid"),!Blockly.Functions.namesInUse(t,null,e)[n]||(Blockly.alert(Blockly.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",n)),!1))},Blockly.Functions.getArgMap=function(e,t){for(var n={},o=0;o<e.childNodes.length;++o){var r=e.childNodes[o],i=t?r.getAttribute("id"):r.getAttribute("name");r=t?r.getAttribute("name"):r.getAttribute("id"),n[i]=r}return n},Blockly.Functions.mutateCallersAndDefinition=function(e,t,n){var o=Blockly.Functions.getDefinition(e,t);o?((e=Blockly.Functions.getCallers(e,o.workspace)).push(o),Blockly.Events.setGroup(!0),e.forEach((function(e){var t=e.mutationToDom(),r=t&&Blockly.Xml.domToText(t);e.domToMutation(n);var i=e.mutationToDom(),s=i&&Blockly.Xml.domToText(i);if(r!=s)if(Blockly.Events.fire(new Blockly.Events.BlockChange(e,"mutation",null,r,s)),e.id==o.id){var a=Blockly.Functions.getArgMap(t),l=Blockly.Functions.getArgMap(i,!0);o.getDescendants().forEach((function(e){if(Blockly.pxtBlocklyUtils.isFunctionArgumentReporter(e)){var t=e.getFieldValue("VALUE"),n=a[t];l[n]?l[n]!==t&&e.setFieldValue(l[n],"VALUE"):e.dispose()}}))}else setTimeout((function(){e.bumpNeighbours()}),Blockly.BUMP_DELAY)})),Blockly.Events.setGroup(!1)):console.warn("Attempted to change function "+e+", but no definition block was found on the workspace")},Blockly.Functions.createFlyout=function(e,t){var n=new Blockly.Options({scrollbars:!0,disabledPatternId:e.options.disabledPatternId,parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,toolboxPosition:e.options.toolboxPosition,zoomOptions:e.options.zoomOptions,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,newFunctions:e.options.newFunctions,move:{scrollbars:!0}}),o=(n=n.horizontalLayout?new Blockly.HorizontalFlyout(n):new Blockly.VerticalFlyout(n)).createDom("svg");return goog.dom.insertSiblingAfter(o,t),n.init(e),n},Blockly.VERSION="4.0.6",Blockly.mainWorkspace=null,Blockly.selected=null,Blockly.draggingConnections=[],Blockly.clipboardXml_=null,Blockly.clipboardSource_=null,Blockly.clipboardTypeCounts_=null,Blockly.cache3dSupported_=null,Blockly.parentContainer=null,Blockly.svgSize=function(e){return Blockly.utils.deprecation.warn("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new Blockly.utils.Size(e.cachedWidth_,e.cachedHeight_)},Blockly.resizeSvgContents=function(e){e.resizeContents()},Blockly.svgResize=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;var t=e.getParentSvg(),n=e.getCachedParentSvgSize(),o=t.parentNode;if(o){var r=o.offsetWidth;o=o.offsetHeight,n.width!=r&&(t.setAttribute("width",r+"px"),e.setCachedParentSvgSize(r,null)),n.height!=o&&(t.setAttribute("height",o+"px"),e.setCachedParentSvgSize(null,o)),e.resize()}},Blockly.onKeyDown=function(e){var t=Blockly.mainWorkspace;t&&!(Blockly.utils.isTargetInput(e)||t.rendered&&!t.isVisible())&&Blockly.ShortcutRegistry.registry.onKeyDown(t,e)},Blockly.deleteBlock=function(e){e.workspace.isFlyout||(Blockly.Events.setGroup(!0),Blockly.hideChaff(),e.outputConnection?e.dispose(!1,!0):e.dispose(!0,!0),Blockly.Events.setGroup(!1))},Blockly.copy=function(e){(e=e.toCopyData())&&(Blockly.clipboardXml_=e.xml,Blockly.clipboardSource_=e.source,Blockly.clipboardTypeCounts_=e.typeCounts)},Blockly.paste=function(){if(!Blockly.clipboardXml_)return!1;var e=Blockly.clipboardSource_;return e.isFlyout&&(e=e.targetWorkspace),!(!Blockly.clipboardTypeCounts_||!e.isCapacityAvailable(Blockly.clipboardTypeCounts_))&&(Blockly.Events.setGroup(!0),e.paste(Blockly.clipboardXml_),Blockly.Events.setGroup(!1),!0)},Blockly.duplicate=function(e){var t=Blockly.clipboardXml_,n=Blockly.clipboardSource_;Blockly.copy(e),e.workspace.paste(Blockly.clipboardXml_),Blockly.clipboardXml_=t,Blockly.clipboardSource_=n},Blockly.onContextMenu_=function(e){Blockly.utils.isTargetInput(e)||e.preventDefault()},Blockly.hideChaff=function(e){Blockly.Tooltip.hide(),Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation();var t=!!e;Blockly.getMainWorkspace().getComponentManager().getComponents(Blockly.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach((function(e){e.autoHide(t)}))},Blockly.getMainWorkspace=function(){return Blockly.mainWorkspace},Blockly.alert=function(e,t){alert(e),t&&t()},Blockly.confirm=function(e,t){t(confirm(e))},Blockly.prompt=function(e,t,n,o){n(prompt(e,t,o))},Blockly.jsonInitFactory_=function(e){return function(){this.jsonInit(e)}},Blockly.defineBlocksWithJsonArray=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n){var o=n.type;null==o||""===o?console.warn("Block definition #"+t+" in JSON array is missing a type attribute. Skipping."):(Blockly.Blocks[o]&&console.warn("Block definition #"+t+' in JSON array overwrites prior definition of "'+o+'".'),Blockly.Blocks[o]={init:Blockly.jsonInitFactory_(n)})}else console.warn("Block definition #"+t+" in JSON array is "+n+". Skipping.")}},Blockly.isNumber=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},Blockly.hueToHex=function(e){return Blockly.utils.colour.hsvToHex(e,Blockly.HSV_SATURATION,255*Blockly.HSV_VALUE)},Blockly.checkBlockColourConstants=function(){Blockly.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),Blockly.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),Blockly.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),Blockly.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),Blockly.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),Blockly.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),Blockly.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),Blockly.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),Blockly.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),Blockly.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),Blockly.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),Blockly.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),Blockly.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),Blockly.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),Blockly.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),Blockly.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},Blockly.checkBlockColourConstant_=function(e,t,n){for(var o="Blockly",r=Blockly,i=0;i<t.length;++i)o+="."+t[i],r&&(r=r[t[i]]);r&&r!==n&&(e=(void 0===n?'%1 has been removed. Use Blockly.Msg["%2"].':'%1 is deprecated and unused. Override Blockly.Msg["%2"].').replace("%1",o).replace("%2",e),console.warn(e))},Blockly.setParentContainer=function(e){Blockly.parentContainer=e},Blockly.bindEvent_=Blockly.browserEvents.bind,Blockly.unbindEvent_=Blockly.browserEvents.unbind,Blockly.bindEventWithChecks_=Blockly.browserEvents.conditionalBind,Blockly.ALIGN_LEFT=Blockly.constants.ALIGN.LEFT,Blockly.ALIGN_CENTRE=Blockly.constants.ALIGN.CENTRE,Blockly.ALIGN_RIGHT=Blockly.constants.ALIGN.RIGHT,Blockly.INPUT_VALUE=Blockly.connectionTypes.INPUT_VALUE,Blockly.OUTPUT_VALUE=Blockly.connectionTypes.OUTPUT_VALUE,Blockly.NEXT_STATEMENT=Blockly.connectionTypes.NEXT_STATEMENT,Blockly.PREVIOUS_STATEMENT=Blockly.connectionTypes.PREVIOUS_STATEMENT,Blockly.DUMMY_INPUT=Blockly.inputTypes.DUMMY,Blockly.TOOLBOX_AT_TOP=Blockly.utils.toolbox.Position.TOP,Blockly.TOOLBOX_AT_BOTTOM=Blockly.utils.toolbox.Position.BOTTOM,Blockly.TOOLBOX_AT_LEFT=Blockly.utils.toolbox.Position.LEFT,Blockly.TOOLBOX_AT_RIGHT=Blockly.utils.toolbox.Position.RIGHT,Blockly.Events.BubbleOpen=function(e,t,n){Blockly.Events.BubbleOpen.superClass_.constructor.call(this,e?e.workspace.id:void 0),this.blockId=e?e.id:null,this.isOpen=t,this.bubbleType=n},Blockly.utils.object.inherits(Blockly.Events.BubbleOpen,Blockly.Events.UiBase),Blockly.Events.BubbleOpen.prototype.type=Blockly.Events.BUBBLE_OPEN,Blockly.Events.BubbleOpen.prototype.toJson=function(){var e=Blockly.Events.BubbleOpen.superClass_.toJson.call(this);return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId,e},Blockly.Events.BubbleOpen.prototype.fromJson=function(e){Blockly.Events.BubbleOpen.superClass_.fromJson.call(this,e),this.isOpen=e.isOpen,this.bubbleType=e.bubbleType,this.blockId=e.blockId},Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.BUBBLE_OPEN,Blockly.Events.BubbleOpen),Blockly.Warning=function(e){Blockly.Warning.superClass_.constructor.call(this,e),this.createIcon(),this.text_=Object.create(null)},Blockly.utils.object.inherits(Blockly.Warning,Blockly.Icon),Blockly.Warning.prototype.collapseHidden=!1,Blockly.Warning.prototype.drawIcon_=function(e){Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},e),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},e),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},e)},Blockly.Warning.prototype.setVisible=function(e){e!=this.isVisible()&&(Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BUBBLE_OPEN))(this.block_,e,"warning")),e?this.createBubble_():this.disposeBubble_())},Blockly.Warning.prototype.createBubble_=function(){this.paragraphElement_=Blockly.Bubble.textToDom(this.getText()),this.bubble_=Blockly.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},Blockly.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},Blockly.Warning.prototype.setText=function(e,t){this.text_[t]!=e&&(e?this.text_[t]=e:delete this.text_[t],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},Blockly.Warning.prototype.getText=function(){var e,t=[];for(e in this.text_)t.push(this.text_[e]);return t.join("\n")},Blockly.Warning.prototype.dispose=function(){this.block_.warning=null,Blockly.Icon.prototype.dispose.call(this)},Blockly.Comment=function(e){Blockly.Comment.superClass_.constructor.call(this,e),this.model_=e.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()},Blockly.utils.object.inherits(Blockly.Comment,Blockly.Icon),Blockly.Comment.prototype.drawIcon_=function(e){Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{class:"blocklyIconShape",d:"m 2,2 0,9.2211 3.0026599,0 1.6008929,1.5989 1.8138195,-1.5989 6.6046683,0 0,-9.2211 -13.0220406,0 z",style:"fill: #fff;"},e),Blockly.utils.dom.createSvgElement("rect",{class:"blocklyIconSymbol",x:"4",y:"8",height:"1",width:"6",style:"fill: #575E75;"},e),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"blocklyIconSymbol",x:"4",y:"6",height:"1",width:"6",style:"fill: #575E75;"},e),Blockly.utils.dom.createSvgElement("rect",{class:"blocklyIconSymbol",x:"4",y:"4",height:"1",width:"8",style:"fill: #575E75;"},e)},Blockly.Comment.prototype.createEditor_=function(){return this.svgGroup_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyCommentBubble"},null),this.svgGroup_.translate_="",this.createTextEditor_(),this.svgGroup_.appendChild(this.foreignObject_),this.createTopBarIcons_(),this.resizeTextarea_(),this.block_.isEditable()&&(Blockly.bindEventWithChecks_(this.deleteIcon_,"mousedown",this,this.deleteMouseDown_),Blockly.bindEventWithChecks_(this.deleteIcon_,"mouseup",this,this.deleteMouseUp_),Blockly.bindEventWithChecks_(this.minimizeArrow_,"mousedown",this,this.minimizeMouseUp_)),this.svgGroup_},Blockly.Comment.prototype.createTextEditor_=function(){this.foreignObject_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FOREIGNOBJECT,{x:Blockly.Bubble.BORDER_WIDTH,y:Blockly.Bubble.BORDER_WIDTH+Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT},null);var e=document.createElementNS(Blockly.utils.dom.HTML_NS,"body");e.setAttribute("xmlns",Blockly.utils.dom.HTML_NS),e.className="blocklyMinimalBody";var t=this.textarea_=document.createElementNS(Blockly.utils.dom.HTML_NS,"textarea");return t.className="blocklyCommentTextarea",t.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),t.value=this.model_.text,this.block_.isEditable()||t.setAttribute("readonly",!0),e.appendChild(t),this.foreignObject_.appendChild(e),this.block_.isEditable()&&(this.onMouseUpWrapper_=Blockly.browserEvents.conditionalBind(t,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=Blockly.browserEvents.conditionalBind(t,"wheel",this,(function(e){e.stopPropagation()})),this.onChangeWrapper_=Blockly.browserEvents.conditionalBind(t,"change",this,(function(e){this.cachedText_!=this.model_.text&&Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BLOCK_CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))})),this.onInputWrapper_=Blockly.browserEvents.conditionalBind(t,"input",this,(function(e){this.model_.text=t.value})),setTimeout(t.focus.bind(t),0)),this.foreignObject_},Blockly.Comment.prototype.createTopBarIcons_=function(){this.minimizeArrow_=Blockly.utils.dom.createSvgElement("image",{x:Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET,y:Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT/2+Blockly.WorkspaceCommentSvg.BORDER_WIDTH-Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE/2,width:Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE,height:Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE},this.svgGroup_),this.minimizeArrow_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"comment-arrow-down.svg"),this.deleteIcon_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyCommentDeleteIcon"},this.svgGroup_),Blockly.utils.dom.createSvgElement("rect",{x:"-12.5",y:"1",width:"27.5",height:"27.5",fill:"transparent",class:"blocklyDeleteIconShape"},this.deleteIcon_),Blockly.WorkspaceCommentSvg.drawDeleteIcon(this.deleteIcon_)},Blockly.Comment.prototype.deleteMouseDown_=function(e){e.stopPropagation()},Blockly.Comment.prototype.deleteMouseUp_=function(e){this.block_.setCommentText(null),e.stopPropagation(),Blockly.Touch.clearTouchIdentifier()},Blockly.Comment.prototype.minimizeMouseUp_=function(e){this.block_.comment.setVisible(!1),e.stopPropagation(),Blockly.Touch.clearTouchIdentifier()},Blockly.Comment.prototype.updateEditable=function(){Blockly.Comment.superClass_.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},Blockly.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},Blockly.Comment.prototype.resizeTextarea_=function(){var e=this.model_.size,t=2*Blockly.Bubble.BORDER_WIDTH,n=Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT;this.foreignObject_.setAttribute("width",Math.max(e.width-t,0)),this.foreignObject_.setAttribute("height",Math.max(e.height-t-n,0)),this.textarea_.style.width=e.width-t-4+"px",this.textarea_.style.height=e.height-t-n-4+"px",this.RTL?(this.minimizeArrow_.setAttribute("x",e.width-Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE-Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET),this.minimizeArrow_.setAttribute("transform","translate("+-e.width+", 1)"),this.deleteIcon_.setAttribute("transform","translate("+(-e.width+Blockly.WorkspaceCommentSvg.DELETE_ICON_SIZE+Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET)+",0) scale(-1 1)")):this.deleteIcon_.setAttribute("transform","translate("+(e.width-Blockly.WorkspaceCommentSvg.DELETE_ICON_SIZE-Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET)+",0)")},Blockly.Comment.prototype.setVisible=function(e){e!=this.isVisible()&&(Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BUBBLE_OPEN))(this.block_,e,"comment")),(this.model_.pinned=e)?this.createBubble_():(this.model_.xy=this.getRelativePosition(),this.disposeBubble_()))},Blockly.Comment.prototype.setRelativePosition=function(e){this.model_.xy=e,this.bubble_&&(this.bubble_.relativeLeft_=e.x,this.bubble_.relativeTop_=e.y,this.bubble_.positionBubble_(),this.bubble_.renderArrow_())},Blockly.Comment.prototype.getRelativePosition=function(){return this.bubble_?new Blockly.utils.Coordinate(this.bubble_.relativeLeft_,this.bubble_.relativeTop_):this.model_.xy},Blockly.Comment.prototype.createBubble_=function(){Blockly.utils.userAgent.IE?this.createNonEditableBubble_():this.createEditableBubble_()},Blockly.Comment.prototype.createEditableBubble_=function(){this.bubble_=new Blockly.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour(),this.setRelativePosition(this.model_.xy)},Blockly.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=Blockly.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=Blockly.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},Blockly.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&(Blockly.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&(Blockly.browserEvents.unbind(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&(Blockly.browserEvents.unbind(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&(Blockly.browserEvents.unbind(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},Blockly.Comment.prototype.startEdit_=function(e){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},Blockly.Comment.prototype.getBubbleSize=function(){return this.model_.size},Blockly.Comment.prototype.setBubbleSize=function(e,t){this.bubble_?this.bubble_.setBubbleSize(e,t):(this.model_.size.width=e,this.model_.size.height=t)},Blockly.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},Blockly.Comment.prototype.dispose=function(){this.block_.comment=null,Blockly.Icon.prototype.dispose.call(this)},Blockly.Css.register(".blocklyCommentTextarea {,background-color: #FAF6BD;,border: 0;,outline: 0;,margin: 0;,padding: 3px;,resize: none;,display: block;,color: $colour_text;,overflow: hidden;,font-size: 12pt;,line-height: 22px;,}".split(",")),Blockly.IComponent=function(){},Blockly.IDragTarget=function(){},Blockly.DragTarget=function(){},Blockly.DragTarget.prototype.onDragEnter=function(e){},Blockly.DragTarget.prototype.onDragOver=function(e){},Blockly.DragTarget.prototype.onDragExit=function(e){},Blockly.DragTarget.prototype.onDrop=function(e){},Blockly.DragTarget.prototype.shouldPreventMove=function(e){return!1},Blockly.IDeleteArea=function(){},Blockly.DeleteArea=function(){Blockly.DeleteArea.superClass_.constructor.call(this),this.wouldDelete_=!1},Blockly.utils.object.inherits(Blockly.DeleteArea,Blockly.DragTarget),Blockly.DeleteArea.prototype.wouldDelete=function(e,t){return e instanceof Blockly.BlockSvg?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e&&!t)):this.updateWouldDelete_(e.isDeletable()),this.wouldDelete_},Blockly.DeleteArea.prototype.updateWouldDelete_=function(e){this.wouldDelete_=e},Blockly.IFlyout=function(){},Blockly.Flyout=function(e){Blockly.Flyout.superClass_.constructor.call(this),e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new Blockly.WorkspaceSvg(e),this.workspace_.setMetricsManager(new Blockly.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=Blockly.utils.genUid(),this.RTL=!!e.RTL,this.horizontalLayout=!1,this.toolboxPosition_=e.toolboxPosition,this.hasTwoScrolls=!1,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null},Blockly.utils.object.inherits(Blockly.Flyout,Blockly.DeleteArea),Blockly.Flyout.prototype.autoClose=!0,Blockly.Flyout.prototype.isVisible_=!1,Blockly.Flyout.prototype.containerVisible_=!0,Blockly.Flyout.prototype.CORNER_RADIUS=8,Blockly.Flyout.prototype.MARGIN=Blockly.Flyout.prototype.CORNER_RADIUS,Blockly.Flyout.prototype.GAP_X=3*Blockly.Flyout.prototype.MARGIN,Blockly.Flyout.prototype.GAP_Y=3*Blockly.Flyout.prototype.MARGIN,Blockly.Flyout.prototype.SCROLLBAR_MARGIN=2.5,Blockly.Flyout.prototype.width_=0,Blockly.Flyout.prototype.height_=0,Blockly.Flyout.prototype.dragAngleRange_=70,Blockly.Flyout.prototype.svgGroup_=null,Blockly.Flyout.prototype.scrollbar_=null,Blockly.Flyout.prototype.targetWorkspace_=null,Blockly.Flyout.prototype.createDom=function(e){return this.svgGroup_=Blockly.utils.dom.createSvgElement(e,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},Blockly.Flyout.prototype.init=function(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new Blockly.ScrollbarPair(this.workspace_,this.horizontalLayout||this.hasTwoScrolls,!this.horizontalLayout||this.hasTwoScrolls,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,Blockly.browserEvents.conditionalBind(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,Blockly.browserEvents.conditionalBind(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:1,capabilities:[Blockly.ComponentManager.Capability.DELETE_AREA,Blockly.ComponentManager.Capability.DRAG_TARGET]})},Blockly.Flyout.prototype.dispose=function(){this.hide(),this.clearOldEventListeners_(),this.workspace_.getComponentManager().removeComponent(this.id),Blockly.browserEvents.unbind(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(Blockly.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},Blockly.Flyout.prototype.getWidth=function(){return this.width_},Blockly.Flyout.prototype.getHeight=function(){return this.height_},Blockly.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},Blockly.Flyout.prototype.getWorkspace=function(){return this.workspace_},Blockly.Flyout.prototype.isVisible=function(){return this.isVisible_},Blockly.Flyout.prototype.setVisible=function(e){var t=e!=this.isVisible();this.isVisible_=e,t&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},Blockly.Flyout.prototype.setContainerVisible=function(e){var t=e!=this.containerVisible_;this.containerVisible_=e,t&&this.updateDisplay_()},Blockly.Flyout.prototype.updateDisplay_=function(){var e=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=e?"block":"none",this.workspace_.scrollbar.setContainerVisible(e)},Blockly.Flyout.prototype.setTwoScrolls=function(){this.hasTwoScrolls||(this.hasTwoScrolls=!0)},Blockly.Flyout.prototype.positionAt_=function(e,t,n,o){this.svgGroup_.setAttribute("width",e),this.svgGroup_.setAttribute("height",t),this.workspace_.setCachedParentSvgSize(e,t),"svg"==this.svgGroup_.tagName?Blockly.utils.dom.setCssTransform(this.svgGroup_,"translate("+n+"px,"+o+"px)"):this.svgGroup_.setAttribute("transform","translate("+n+","+o+")"),(e=this.workspace_.scrollbar)&&(e.setOrigin(n,o),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))},Blockly.Flyout.prototype.hide=function(){this.isVisible()&&this.setVisible(!1)},Blockly.Flyout.prototype.clearOldEventListeners_=function(){for(var e,t=0;e=this.listeners_[t];t++)Blockly.browserEvents.unbind(e);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)},Blockly.Flyout.prototype.show=function(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldEventListeners_(),this.clearOldBlocks_(),"string"==typeof e&&(e=this.getDynamicCategoryContents_(e)),this.setVisible(!0),e=Blockly.utils.toolbox.convertFlyoutDefToJsonArray(e),e=this.createFlyoutInfo_(e),this.layout_(e.contents,e.gaps),this.listeners_.push(Blockly.browserEvents.conditionalBind(this.svgBackground_,"mouseover",this,(function(){for(var e,t=this.workspace_.getTopBlocks(!1),n=0;e=t[n];n++)e.removeSelect()}))),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},Blockly.Flyout.prototype.createFlyoutInfo_=function(e){var t=[],n=[];this.permanentlyDisabled_.length=0;for(var o,r=this.horizontalLayout?this.GAP_X:this.GAP_Y,i=0;o=e[i];i++)switch(o.custom&&(o=this.getDynamicCategoryContents_(o.custom),o=Blockly.utils.toolbox.convertFlyoutDefToJsonArray(o),e.splice.apply(e,[i,1].concat(o)),o=e[i]),o.kind.toUpperCase()){case"BLOCK":var s=o,a=this.getBlockXml_(s);o=this.createBlock_(a),s=parseInt(s.gap||a.getAttribute("gap"),10),n.push(isNaN(s)?r:s),t.push({type:"block",block:o});break;case"SEP":this.addSeparatorGap_(o,n,r);break;case"LABEL":o=this.createButton_(o,!0),t.push({type:"button",button:o}),n.push(r);break;case"BUTTON":o=this.createButton_(o,!1),t.push({type:"button",button:o}),n.push(r)}return{contents:t,gaps:n}},Blockly.Flyout.prototype.getDynamicCategoryContents_=function(e){if("function"!=typeof(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");if(e=e(this.workspace_.targetWorkspace),!Array.isArray(e))throw new TypeError("Result of toolbox category callback must be an array.");return e},Blockly.Flyout.prototype.createButton_=function(e,t){if(!Blockly.FlyoutButton)throw Error("Missing require for Blockly.FlyoutButton");return new Blockly.FlyoutButton(this.workspace_,this.targetWorkspace,e,t)},Blockly.Flyout.prototype.createBlock_=function(e){return(e=Blockly.Xml.domToBlock(e,this.workspace_)).isEnabled()||this.permanentlyDisabled_.push(e),e},Blockly.Flyout.prototype.getBlockXml_=function(e){var t=null,n=e.blockxml;if(n&&"string"!=typeof n?t=n:n&&"string"==typeof n?(t=Blockly.Xml.textToDom(n),e.blockxml=t):e.type&&((t=Blockly.utils.xml.createElement("xml")).setAttribute("type",e.type),t.setAttribute("disabled",e.disabled),e.blockxml=t),!t)throw Error("Error: Invalid block definition. Block definition must have blockxml or type.");return t},Blockly.Flyout.prototype.addSeparatorGap_=function(e,t,n){e=parseInt(e.gap,10),!isNaN(e)&&0<t.length?t[t.length-1]=e:t.push(n)},Blockly.Flyout.prototype.clearOldBlocks_=function(){for(var e,t=this.workspace_.getTopBlocks(!1),n=0;e=t[n];n++)e.workspace==this.workspace_&&e.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(t=this.mats_[n])&&(Blockly.Tooltip.unbindMouseEvents(t),Blockly.utils.dom.removeNode(t));for(n=this.mats_.length=0;t=this.buttons_[n];n++)t.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},Blockly.Flyout.prototype.addBlockListeners_=function(e,t,n){this.listeners_.push(Blockly.browserEvents.conditionalBind(e,"mousedown",null,this.blockMouseDown_(t))),this.listeners_.push(Blockly.browserEvents.conditionalBind(n,"mousedown",null,this.blockMouseDown_(t))),this.listeners_.push(Blockly.browserEvents.bind(e,"mouseenter",t,t.addSelect)),this.listeners_.push(Blockly.browserEvents.bind(e,"mouseleave",t,t.removeSelect)),this.listeners_.push(Blockly.browserEvents.bind(n,"mouseenter",t,t.addSelect)),this.listeners_.push(Blockly.browserEvents.bind(n,"mouseleave",t,t.removeSelect))},Blockly.Flyout.prototype.blockMouseDown_=function(e){var t=this;return function(n){var o=t.targetWorkspace.getGesture(n);o&&(o.setStartBlock(e),o.handleFlyoutStart(n,t))}},Blockly.Flyout.prototype.onMouseDown_=function(e){var t=this.targetWorkspace.getGesture(e);t&&t.handleFlyoutStart(e,this)},Blockly.Flyout.prototype.isBlockCreatable_=function(e){return e.isEnabled()},Blockly.Flyout.prototype.createBlock=function(e){var t=null;Blockly.Events.disable();var n=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{t=this.placeNewBlock_(e)}finally{Blockly.Events.enable()}if(Blockly.hideChaff(),e=Blockly.Variables.getAddedVariables(this.targetWorkspace,n),Blockly.Events.isEnabled()){for(Blockly.Events.setGroup(!0),n=0;n<e.length;n++){var o=e[n];Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.VAR_CREATE))(o))}Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BLOCK_CREATE))(t))}return this.autoClose?this.hide():this.filterForCapacity_(),t},Blockly.Flyout.prototype.initFlyoutButton_=function(e,t,n){var o=e.createDom();e.moveTo(t,n),e.show(),this.listeners_.push(Blockly.browserEvents.conditionalBind(o,"mousedown",this,this.onMouseDown_)),this.buttons_.push(e)},Blockly.Flyout.prototype.createRect_=function(e,t,n,o,r){return(t=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{"fill-opacity":0,x:t,y:n,height:o.height,width:o.width},null)).tooltip=e,Blockly.Tooltip.bindMouseEvents(t),this.workspace_.getCanvas().insertBefore(t,e.getSvgRoot()),e.flyoutRect_=t,this.mats_[r]=t},Blockly.Flyout.prototype.moveRectToBlock_=function(e,t){var n=t.getHeightWidth();e.setAttribute("width",n.width),e.setAttribute("height",n.height);var o=t.startHat_?Blockly.BlockSvg.START_HAT_HEIGHT:0;o&&t.moveBy(0,o),t=t.getRelativeToSurfaceXY(),e.setAttribute("y",t.y),e.setAttribute("x",this.RTL?t.x-n.width:t.x)},Blockly.Flyout.prototype.filterForCapacity_=function(){for(var e,t=this.workspace_.getTopBlocks(!1),n=0;e=t[n];n++)if(-1==this.permanentlyDisabled_.indexOf(e))for(var o=this.targetWorkspace.isCapacityAvailable(Blockly.utils.getBlockTypeCounts(e));e;)e.setEnabled(o),e=e.getNextBlock()},Blockly.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},Blockly.Flyout.prototype.isScrollable=function(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()},Blockly.Flyout.prototype.placeNewBlock_=function(e){var t=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered.");"function_call"==e.type&&e.inputList.forEach((function(e){if(e.connection&&e.connection.targetConnection&&"variables_get"==e.connection.targetBlock().type){var n=(e=e.connection.targetBlock()).inputList[0].fieldRow[0].getText();n=Blockly.Variables.getOrCreateVariablePackage(t,null,n,"").getId(),e.setFieldValue(n,"VAR")}}));var n=Blockly.Xml.blockToDom(e,!0);if(t.setResizesEnabled(!1),!(n=Blockly.Xml.domToBlock(n,t)).getSvgRoot())throw Error("block is not rendered.");var o=t.getOriginOffsetInPixels(),r=this.workspace_.getOriginOffsetInPixels();return(e=e.getRelativeToSurfaceXY()).scale(this.workspace_.scale),e=Blockly.utils.Coordinate.sum(r,e),(o=Blockly.utils.Coordinate.difference(e,o)).scale(1/t.scale),n.moveBy(o.x,o.y),n},Blockly.HorizontalFlyout=function(e){Blockly.HorizontalFlyout.superClass_.constructor.call(this,e),this.horizontalLayout=!0},Blockly.utils.object.inherits(Blockly.HorizontalFlyout,Blockly.Flyout),Blockly.HorizontalFlyout.prototype.setMetrics_=function(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),n=t.getScrollMetrics(),o=t.getViewMetrics();t=t.getAbsoluteMetrics(),"number"==typeof e.x&&(this.workspace_.scrollX=-(n.left+(n.width-o.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}},Blockly.HorizontalFlyout.prototype.getX=function(){return 0},Blockly.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager(),t=e.getAbsoluteMetrics(),n=e.getViewMetrics();e=e.getToolboxMetrics();var o=this.toolboxPosition_==Blockly.utils.toolbox.Position.TOP;return this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?o?e.height:n.height-this.height_:o?0:n.height:o?0:n.height+t.top-this.height_},Blockly.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,this.setBackgroundPath_(e.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}},Blockly.HorizontalFlyout.prototype.setBackgroundPath_=function(e,t){var n=this.toolboxPosition_==Blockly.utils.toolbox.Position.TOP,o=["M 0,"+(n?0:this.CORNER_RADIUS)];n?(o.push("h",e+2*this.CORNER_RADIUS),o.push("v",t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",-e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),o.push("h",e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",t),o.push("h",-e-2*this.CORNER_RADIUS)),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))},Blockly.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},Blockly.HorizontalFlyout.prototype.wheel_=function(e){var t=Blockly.utils.getScrollDeltaPixels(e);if(t=t.x||t.y){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics();t=n.getViewMetrics().left-o.left+t,this.workspace_.scrollbar.setX(t),Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation()}e.preventDefault(),e.stopPropagation()},Blockly.HorizontalFlyout.prototype.layout_=function(e,t){this.workspace_.scale=this.targetWorkspace.scale;var n=this.MARGIN,o=n+this.tabWidth_;this.RTL&&(e=e.reverse());for(var r,i=0;r=e[i];i++)if("block"==r.type){for(var s,a=(r=r.block).getDescendants(!1),l=0;s=a[l];l++)s.isInFlyout=!0;r.render(),a=r.getSvgRoot(),l=r.getHeightWidth(),s=r.outputConnection?this.tabWidth_:0,s=this.RTL?o+l.width:o-s,r.moveBy(s,n),s=this.createRect_(r,s,n,l,i),o+=l.width+t[i],this.addBlockListeners_(a,r,s)}else"button"==r.type&&(this.initFlyoutButton_(r.button,o,n),o+=r.button.width+t[i])},Blockly.HorizontalFlyout.prototype.isDragTowardWorkspace=function(e){e=Math.atan2(e.y,e.x)/Math.PI*180;var t=this.dragAngleRange_;return e<90+t&&e>90-t||e>-90-t&&e<-90+t},Blockly.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var e=this.svgGroup_.getBoundingClientRect(),t=e.top;return this.toolboxPosition_==Blockly.utils.toolbox.Position.TOP?new Blockly.utils.Rect(-1e9,t+e.height,-1e9,1e9):new Blockly.utils.Rect(t,1e9,-1e9,1e9)},Blockly.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var e,t=0,n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++)t=Math.max(t,e.getHeightWidth().height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,t+=Blockly.Scrollbar.scrollbarThickness,this.height_!=t){for(o=0;e=n[o];o++)e.flyoutRect_&&this.moveRectToBlock_(e.flyoutRect_,e);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=Blockly.utils.toolbox.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.recordDragTargets()}},Blockly.registry.register(Blockly.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,Blockly.registry.DEFAULT,Blockly.HorizontalFlyout),Blockly.VerticalFlyout=function(e){Blockly.VerticalFlyout.superClass_.constructor.call(this,e)},Blockly.utils.object.inherits(Blockly.VerticalFlyout,Blockly.Flyout),Blockly.VerticalFlyout.registryName="verticalFlyout",Blockly.VerticalFlyout.prototype.setMetrics_=function(e){if(this.isVisible()){var t=this.workspace_.getMetricsManager(),n=t.getScrollMetrics(),o=t.getViewMetrics();t=t.getAbsoluteMetrics(),"number"==typeof e.y&&(this.workspace_.scrollY=-(n.top+(n.height-o.height)*e.y)),"number"==typeof e.x&&(this.workspace_.scrollX=-(n.left+(n.width-o.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+t.left,this.workspace_.scrollY+t.top)}},Blockly.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager(),t=e.getAbsoluteMetrics(),n=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition==this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_==Blockly.utils.toolbox.Position.LEFT?e.width:n.width-this.width_:this.toolboxPosition_==Blockly.utils.toolbox.Position.LEFT?0:n.width:this.toolboxPosition_==Blockly.utils.toolbox.Position.LEFT?0:n.width+t.left-this.width_},Blockly.VerticalFlyout.prototype.getY=function(){return 0},Blockly.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,e.height-2*this.CORNER_RADIUS),e=this.getX();var t=this.getY();this.positionAt_(this.width_,this.height_,e,t)}},Blockly.VerticalFlyout.prototype.setBackgroundPath_=function(e,t){var n=this.toolboxPosition_==Blockly.utils.toolbox.Position.RIGHT,o=e+this.CORNER_RADIUS;(o=["M "+(n?o:0)+",0"]).push("h",n?-e:e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",Math.max(0,t)),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",n?e:-e),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))},Blockly.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0),this.workspace_.scrollbar.setX(0)},Blockly.VerticalFlyout.prototype.wheel_=function(e){var t=Blockly.utils.getScrollDeltaPixels(e);if(t.y){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics();n=n.getViewMetrics(),this.workspace_.scrollbar.setY(n.top-o.top+t.y),t.x&&this.workspace_.scrollbar.setX(n.left-o.left+t.x),Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation()}e.preventDefault(),e.stopPropagation()},Blockly.VerticalFlyout.prototype.layout_=function(e,t){this.workspace_.scale=this.targetWorkspace.scale;for(var n,o=this.MARGIN,r=this.RTL?o:o+this.tabWidth_,i=0;n=e[i];i++)if("block"==n.type){for(var s,a=(n=n.block).getDescendants(!1),l=0;s=a[l];l++)s.isInFlyout=!0;n.render(),a=n.getSvgRoot(),l=n.getHeightWidth(),s=n.outputConnection?r-this.tabWidth_:r,n.moveBy(s,o),s=this.createRect_(n,this.RTL?s-l.width:s,o,l,i),this.addBlockListeners_(a,n,s),o+=l.height+t[i]}else"button"==n.type&&(this.initFlyoutButton_(n.button,r,o),o+=n.button.height+t[i])},Blockly.VerticalFlyout.prototype.isDragTowardWorkspace=function(e){e=Math.atan2(e.y,e.x)/Math.PI*180;var t=this.dragAngleRange_;return e<t&&e>-t||e<-180+t||e>180-t},Blockly.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var e=this.svgGroup_.getBoundingClientRect(),t=e.left;return this.toolboxPosition_==Blockly.utils.toolbox.Position.LEFT?new Blockly.utils.Rect(-1e9,1e9,-1e9,t+e.width):new Blockly.utils.Rect(-1e9,1e9,t,1e9)},Blockly.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var e,t=0,n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++){var r=e.getHeightWidth().width;e.outputConnection&&(r-=this.tabWidth_),t=Math.max(t,r)}for(o=0;e=this.buttons_[o];o++)t=Math.max(t,e.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,t+=Blockly.Scrollbar.scrollbarThickness,this.width_!=t){for(o=0;e=n[o];o++){if(this.RTL){r=e.getRelativeToSurfaceXY().x;var i=t/this.workspace_.scale-this.MARGIN;e.outputConnection||(i-=this.tabWidth_),e.moveBy(i-r,0)}e.flyoutRect_&&this.moveRectToBlock_(e.flyoutRect_,e)}if(this.RTL)for(o=0;e=this.buttons_[o];o++)n=e.getPosition().y,e.moveTo(t/this.workspace_.scale-e.width-this.MARGIN-this.tabWidth_,n);this.targetWorkspace.toolboxPosition!=this.toolboxPosition_||this.toolboxPosition_!=Blockly.utils.toolbox.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.recordDragTargets()}},Blockly.registry.register(Blockly.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,Blockly.registry.DEFAULT,Blockly.VerticalFlyout),Blockly.FlyoutButton=function(e,t,n,o){this.workspace_=e,this.targetWorkspace_=t,this.text_=n.text,this.position_=new Blockly.utils.Coordinate(0,0),this.isLabel_=o,this.helpButtonIcon_=n["web-help-button"]||null,this.callbackKey_=n.callbackKey||n.callbackkey,this.cssClass_=n["web-class"]||null,this.icon_=n["web-icon"]||null,this.iconClass_=n["web-icon-class"]||null,this.iconColor_=n["web-icon-color"]||null,this.line_=n["web-line"]||null,this.lineWidth_=n["web-line-width"]||null,this.onMouseUpWrapper_=null,this.info=n},Blockly.FlyoutButton.MARGIN_X=17.5,Blockly.FlyoutButton.MARGIN_Y=2,Blockly.FlyoutButton.prototype.width=0,Blockly.FlyoutButton.prototype.height=40,Blockly.FlyoutButton.HELP_IMAGE_URI="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCAyNiAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTMiIGN5PSIxMyIgcj0iMTMiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNy45NTIgOS4xODQwMkMxNy45NTIgMTAuMjU2IDE3LjgxNiAxMS4wNzIgMTcuNTQ0IDExLjYzMkMxNy4yODggMTIuMTkyIDE2Ljc1MiAxMi43OTIgMTUuOTM2IDEzLjQzMkMxNS4xMiAxNC4wNzIgMTQuNTc2IDE0LjU4NCAxNC4zMDQgMTQuOTY4QzE0LjA0OCAxNS4zMzYgMTMuOTIgMTUuNzM2IDEzLjkyIDE2LjE2OFYxNi45NkgxMS44MDhDMTEuNDI0IDE2LjQ2NCAxMS4yMzIgMTUuODQgMTEuMjMyIDE1LjA4OEMxMS4yMzIgMTQuNjg4IDExLjM4NCAxNC4yODggMTEuNjg4IDEzLjg4OEMxMS45OTIgMTMuNDg4IDEyLjUzNiAxMi45NjggMTMuMzIgMTIuMzI4QzE0LjEwNCAxMS42NzIgMTQuNjI0IDExLjE2OCAxNC44OCAxMC44MTZDMTUuMTM2IDEwLjQ0OCAxNS4yNjQgOS45NjgwMiAxNS4yNjQgOS4zNzYwMkMxNS4yNjQgOC4yMDgwMiAxNC40MTYgNy42MjQwMiAxMi43MiA3LjYyNDAyQzExLjc2IDcuNjI0MDIgMTAuNzUyIDcuNzM2MDIgOS42OTYgNy45NjAwMkw5LjE0NCA4LjA4MDAyTDkgNi4wODgwMkMxMC40ODggNS41NjAwMiAxMS44NCA1LjI5NjAyIDEzLjA1NiA1LjI5NjAyQzE0LjczNiA1LjI5NjAyIDE1Ljk2OCA1LjYwODAyIDE2Ljc1MiA2LjIzMjAyQzE3LjU1MiA2Ljg0MDAyIDE3Ljk1MiA3LjgyNDAyIDE3Ljk1MiA5LjE4NDAyWk0xMS40IDIyVjE4LjY0SDE0LjE4NFYyMkgxMS40WiIgZmlsbD0iIzU5NUU3NCIvPgo8L3N2Zz4K",Blockly.FlyoutButton.prototype.createDom=function(){var e=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(e+=" "+this.cssClass_),this.svgGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{class:e},this.workspace_.getCanvas()),!this.isLabel_)var t=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);e=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var n=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),o=Blockly.utils.replaceMessageReferences(this.text_);this.workspace_.RTL&&(o+=""),n.textContent=o,this.isLabel_&&(this.svgText_=n,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill")),o=Blockly.utils.style.getComputedStyle(n,"fontSize");var r=Blockly.utils.style.getComputedStyle(n,"fontWeight"),i=Blockly.utils.style.getComputedStyle(n,"fontFamily");return this.width=Blockly.utils.dom.getFastTextWidthWithSizeString(n,o,r,i),(this.icon_||this.iconClass_)&&(o=Blockly.utils.dom.createSvgElement("text",{class:this.iconClass_?"blocklyFlyoutLabelIcon "+this.iconClass_:"blocklyFlyoutLabelIcon",x:0,y:0,"text-anchor":"start"},this.svgGroup_),this.icon_&&(o.textContent=this.icon_),this.iconColor_&&o.setAttribute("style","fill: "+this.iconColor_),o.setAttribute("dominant-baseline","central"),o.setAttribute("dy",Blockly.utils.userAgent.EDGE_OR_IE?Blockly.Field.IE_TEXT_OFFSET:"0"),o.setAttribute("x",this.targetWorkspace_.RTL?this.width+Blockly.FlyoutButton.MARGIN_X:0),o.setAttribute("y",this.height/2+Blockly.FlyoutButton.MARGIN_Y),this.width+=Blockly.utils.dom.getTextWidth(o)+2*Blockly.FlyoutButton.MARGIN_X),this.helpButtonIcon_&&(this.helpButtonImage_=Blockly.utils.dom.createSvgElement("image",{class:"blocklyFlyoutButton",height:"25px",width:"25px",x:(this.workspace_.RTL?-this.width+Blockly.FlyoutButton.MARGIN_X+15:this.width+15)+"px",y:"10px"},this.svgGroup_),this.helpButtonImage_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.FlyoutButton.HELP_IMAGE_URI)),this.line_&&((o=Blockly.utils.dom.createSvgElement("line",{class:"blocklyFlyoutLine","stroke-dasharray":this.line_,"text-anchor":"middle"},this.svgGroup_)).setAttribute("x1",0),o.setAttribute("x2",null!=this.lineWidth_?this.lineWidth_:this.width),o.setAttribute("y1",this.height),o.setAttribute("y2",this.height)),this.isLabel_||(this.width+=2*Blockly.FlyoutButton.MARGIN_X,this.height+=2*Blockly.FlyoutButton.MARGIN_Y,t.setAttribute("width",this.width),t.setAttribute("height",this.height)),e.setAttribute("width",this.width),e.setAttribute("height",this.height),n.setAttribute("text-anchor","middle"),n.setAttribute("dominant-baseline","central"),n.setAttribute("dy",Blockly.utils.userAgent.EDGE_OR_IE?Blockly.Field.IE_TEXT_OFFSET:"0"),n.setAttribute("x",this.width/2),n.setAttribute("y",this.height/2),this.updateTransform_(),this.onMouseUpWrapper_=Blockly.browserEvents.conditionalBind(this.helpButtonIcon_&&this.callback_?this.helpButtonImage_:this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},Blockly.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},Blockly.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},Blockly.FlyoutButton.prototype.moveTo=function(e,t){this.position_.x=e,this.position_.y=t,this.updateTransform_()},Blockly.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},Blockly.FlyoutButton.prototype.getPosition=function(){return this.position_},Blockly.FlyoutButton.prototype.getButtonText=function(){return this.text_},Blockly.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},Blockly.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&Blockly.browserEvents.unbind(this.onMouseUpWrapper_),this.svgGroup_&&Blockly.utils.dom.removeNode(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},Blockly.FlyoutButton.prototype.onMouseUp_=function(e){(e=this.targetWorkspace_.getGesture(e))&&e.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},Blockly.Css.register([".blocklyFlyoutButton {","fill: #F4F4F4;","}",".blocklyFlyoutButtonBackground {","stroke: #fff;","}",".blocklyFlyoutButton .blocklyText {","fill: $colour_text;","}",".blocklyFlyoutButtonShadow {","fill: none;","}",".blocklyFlyoutButton:hover {","fill: #EAEAEA;","cursor: pointer;","}",".blocklyFlyoutLabel {","cursor: default;","}",".blocklyFlyoutLabelBackground {","opacity: 0;","}",".blocklyFlyoutLabelText {",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 14pt;","fill: $colour_text;","font-weight: bold;","}"]),Blockly.Generator=function(e){this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},Blockly.Generator.prototype.INFINITE_LOOP_TRAP=null,Blockly.Generator.prototype.STATEMENT_PREFIX=null,Blockly.Generator.prototype.STATEMENT_SUFFIX=null,Blockly.Generator.prototype.INDENT="  ",Blockly.Generator.prototype.COMMENT_WRAP=60,Blockly.Generator.prototype.ORDER_OVERRIDES=[],Blockly.Generator.prototype.isInitialized=null,Blockly.Generator.prototype.workspaceToCode=function(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=Blockly.getMainWorkspace());var t=[];this.init(e),e=e.getTopBlocks(!0);for(var n,o=0;n=e[o];o++){var r=this.blockToCode(n);Array.isArray(r)&&(r=r[0]),r&&(n.outputConnection&&(r=this.scrubNakedValue(r),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(r=this.injectId(this.STATEMENT_PREFIX,n)+r),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(r+=this.injectId(this.STATEMENT_SUFFIX,n))),t.push(r))}return t=t.join("\n"),(t=(t=(t=this.finish(t)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},Blockly.Generator.prototype.prefixLines=function(e,t){return t+e.replace(/(?!\n$)\n/g,"\n"+t)},Blockly.Generator.prototype.allNestedComments=function(e){var t=[];e=e.getDescendants(!0);for(var n=0;n<e.length;n++){var o=e[n].getCommentText();o&&t.push(o)}return t.length&&t.push(""),t.join("\n")},Blockly.Generator.prototype.blockToCode=function(e,t){if(!1===this.isInitialized&&console.warn("Generator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return t?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return t?"":this.blockToCode(e.getChildren(!1)[0]);var n=this[e.type];if("function"!=typeof n)throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+e.type+'".');if(n=n.call(e,e),Array.isArray(n)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,n[0],t),n[1]]}if("string"==typeof n)return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(n=this.injectId(this.STATEMENT_PREFIX,e)+n),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(n+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,n,t);if(null===n)return"";throw SyntaxError("Invalid code generated: "+n)},Blockly.Generator.prototype.valueToCode=function(e,t,n){if(isNaN(n))throw TypeError("Expecting valid order from block: "+e.type);var o=e.getInputTargetBlock(t);if(!o)return"";if(""===(t=this.blockToCode(o)))return"";if(!Array.isArray(t))throw TypeError("Expecting tuple from value block: "+o.type);if(e=t[0],t=t[1],isNaN(t))throw TypeError("Expecting valid order from value block: "+o.type);if(!e)return"";o=!1;var r=Math.floor(n),i=Math.floor(t);if(r<=i&&(r!=i||0!=r&&99!=r))for(o=!0,r=0;r<this.ORDER_OVERRIDES.length;r++)if(this.ORDER_OVERRIDES[r][0]==n&&this.ORDER_OVERRIDES[r][1]==t){o=!1;break}return o&&(e="("+e+")"),e},Blockly.Generator.prototype.statementToCode=function(e,t){if(e=e.getInputTargetBlock(t),"string"!=typeof(t=this.blockToCode(e)))throw TypeError("Expecting code from statement block: "+(e&&e.type));return t&&(t=this.prefixLines(t,this.INDENT)),t},Blockly.Generator.prototype.addLoopTrap=function(e,t){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,t),this.INDENT)+e),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,t),this.INDENT)+e),this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,t),this.INDENT)),e},Blockly.Generator.prototype.injectId=function(e,t){return t=t.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+t+"'")},Blockly.Generator.prototype.RESERVED_WORDS_="",Blockly.Generator.prototype.addReservedWords=function(e){this.RESERVED_WORDS_+=e+","},Blockly.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Object.defineProperty(Blockly.Generator.prototype,"variableDB_",{get:function(){return Blockly.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(e){Blockly.utils.deprecation.warn("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=e}}),Blockly.Generator.prototype.provideFunction_=function(e,t){if(!this.definitions_[e]){var n,o=this.nameDB_.getDistinctName(e,Blockly.PROCEDURE_CATEGORY_NAME);for(this.functionNames_[e]=o,t=t.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);n!=t;)n=t,t=t.replace(/^(( {2})*) {2}/gm,"$1\0");t=t.replace(/\0/g,this.INDENT),this.definitions_[e]=t}return this.functionNames_[e]},Blockly.Generator.prototype.init=function(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},Blockly.Generator.prototype.scrub_=function(e,t,n){return t},Blockly.Generator.prototype.finish=function(e){return delete this.definitions_,delete this.functionNames_,e},Blockly.Generator.prototype.scrubNakedValue=function(e){return e},Blockly.IToolboxItem=function(){},Blockly.ISelectableToolboxItem=function(){},Blockly.ICollapsibleToolboxItem=function(){},Blockly.ToolboxItem=function(e,t,n){this.id_=e.toolboxitemid||Blockly.utils.IdGenerator.getNextUniqueId(),this.level_=(this.parent_=n||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=t,this.workspace_=this.parentToolbox_.getWorkspace()},Blockly.ToolboxItem.prototype.init=function(){},Blockly.ToolboxItem.prototype.getDiv=function(){return null},Blockly.ToolboxItem.prototype.getId=function(){return this.id_},Blockly.ToolboxItem.prototype.getParent=function(){return null},Blockly.ToolboxItem.prototype.getLevel=function(){return this.level_},Blockly.ToolboxItem.prototype.isSelectable=function(){return!1},Blockly.ToolboxItem.prototype.isCollapsible=function(){return!1},Blockly.ToolboxItem.prototype.dispose=function(){},Blockly.ToolboxCategory=function(e,t,n){Blockly.ToolboxCategory.superClass_.constructor.call(this,e,t,n),this.name_=Blockly.utils.replaceMessageReferences(e.name),this.colour_=this.getColour_(e),this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),Blockly.utils.object.mixin(this.cssConfig_,e.cssconfig||e.cssConfig),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.parseContents_(e)},Blockly.utils.object.inherits(Blockly.ToolboxCategory,Blockly.ToolboxItem),Blockly.ToolboxCategory.registrationName="category",Blockly.ToolboxCategory.nestedPadding=19,Blockly.ToolboxCategory.borderWidth=8,Blockly.ToolboxCategory.defaultBackgroundColour="#57e",Blockly.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},Blockly.ToolboxCategory.prototype.parseContents_=function(e){var t=e.contents;if(e.custom)this.flyoutItems_=e.custom;else if(t){e=0;for(var n;n=t[e];e++)this.flyoutItems_.push(n)}},Blockly.ToolboxCategory.prototype.init=function(){this.createDom_(),"true"==this.toolboxItemDef_.hidden&&this.hide()},Blockly.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),Blockly.utils.aria.setRole(this.htmlDiv_,Blockly.utils.aria.Role.TREEITEM),Blockly.utils.aria.setState(this.htmlDiv_,Blockly.utils.aria.State.SELECTED,!1),Blockly.utils.aria.setState(this.htmlDiv_,Blockly.utils.aria.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Blockly.utils.aria.setRole(this.iconDom_,Blockly.utils.aria.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),Blockly.utils.aria.setState(this.htmlDiv_,Blockly.utils.aria.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},Blockly.ToolboxCategory.prototype.createContainer_=function(){var e=document.createElement("div");return Blockly.utils.dom.addClass(e,this.cssConfig_.container),e},Blockly.ToolboxCategory.prototype.createRowContainer_=function(){var e=document.createElement("div");Blockly.utils.dom.addClass(e,this.cssConfig_.row);var t=Blockly.ToolboxCategory.nestedPadding*this.getLevel();return t=t.toString()+"px",this.workspace_.RTL?e.style.paddingRight=t:e.style.paddingLeft=t,e},Blockly.ToolboxCategory.prototype.createRowContentsContainer_=function(){var e=document.createElement("div");return Blockly.utils.dom.addClass(e,this.cssConfig_.rowcontentcontainer),e},Blockly.ToolboxCategory.prototype.createIconDom_=function(){var e=document.createElement("span");return this.parentToolbox_.isHorizontal()||Blockly.utils.dom.addClass(e,this.cssConfig_.icon),e.style.display="inline-block",e},Blockly.ToolboxCategory.prototype.createLabelDom_=function(e){var t=document.createElement("span");return t.setAttribute("id",this.getId()+".label"),t.textContent=e,Blockly.utils.dom.addClass(t,this.cssConfig_.label),t},Blockly.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},Blockly.ToolboxCategory.prototype.addColourBorder_=function(e){e&&(e=Blockly.ToolboxCategory.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)},Blockly.ToolboxCategory.prototype.getColour_=function(e){var t=e.categorystyle||e.categoryStyle;return(e=e.colour)&&t?(console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour'),""):t?this.getColourfromStyle_(t):this.parseColour_(e)},Blockly.ToolboxCategory.prototype.getColourfromStyle_=function(e){var t=this.workspace_.getTheme();if(e&&t){if((t=t.categoryStyles[e])&&t.colour)return this.parseColour_(t.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""},Blockly.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},Blockly.ToolboxCategory.prototype.parseColour_=function(e){if(null==(e=Blockly.utils.replaceMessageReferences(e))||""===e)return"";var t=Number(e);return isNaN(t)?(t=Blockly.utils.colour.parse(e))?t:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):Blockly.hueToHex(t)},Blockly.ToolboxCategory.prototype.openIcon_=function(e){e&&(Blockly.utils.dom.removeClasses(e,this.cssConfig_.closedicon),Blockly.utils.dom.addClass(e,this.cssConfig_.openicon))},Blockly.ToolboxCategory.prototype.closeIcon_=function(e){e&&(Blockly.utils.dom.removeClasses(e,this.cssConfig_.openicon),Blockly.utils.dom.addClass(e,this.cssConfig_.closedicon))},Blockly.ToolboxCategory.prototype.setVisible_=function(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},Blockly.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},Blockly.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},Blockly.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},Blockly.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var e=this;e.getParent();)if(!(e=e.getParent()).isExpanded())return!1;return!0},Blockly.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},Blockly.ToolboxCategory.prototype.onClick=function(e){},Blockly.ToolboxCategory.prototype.setSelected=function(e){if(e){var t=this.parseColour_(Blockly.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||t,Blockly.utils.dom.addClass(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",Blockly.utils.dom.removeClass(this.rowDiv_,this.cssConfig_.selected);Blockly.utils.aria.setState(this.htmlDiv_,Blockly.utils.aria.State.SELECTED,e)},Blockly.ToolboxCategory.prototype.setDisabled=function(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",e),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},Blockly.ToolboxCategory.prototype.getName=function(){return this.name_},Blockly.ToolboxCategory.prototype.getParent=function(){return this.parent_},Blockly.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},Blockly.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},Blockly.ToolboxCategory.prototype.updateFlyoutContents=function(e){this.flyoutItems_=[],"string"==typeof e?this.toolboxItemDef_.custom=e:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=Blockly.utils.toolbox.convertFlyoutDefToJsonArray(e)),this.parseContents_(this.toolboxItemDef_)},Blockly.ToolboxCategory.prototype.dispose=function(){Blockly.utils.dom.removeNode(this.htmlDiv_)},Blockly.Css.register([".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: rgba(255, 255, 255, 0.2);","}",'.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {',"margin: 1px 5px 1px 0;","}",'.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {',"margin: 1px 0 1px 5px;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","padding-right: 0px","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","visibility: hidden;","width: 16px;","}",".blocklyTreeIconClosed {","background-position: -32px -1px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {',"background-position: 0 -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosed {","background-position: -32px -17px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {',"background-position: 0 -17px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeLabel {","cursor: default;","font: 16px sans-serif;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}"]),Blockly.registry.register(Blockly.registry.Type.TOOLBOX_ITEM,Blockly.ToolboxCategory.registrationName,Blockly.ToolboxCategory),Blockly.ToolboxSeparator=function(e,t){Blockly.ToolboxSeparator.superClass_.constructor.call(this,e,t),this.cssConfig_={container:"blocklyTreeSeparator"},Blockly.utils.object.mixin(this.cssConfig_,e.cssconfig||e.cssConfig)},Blockly.utils.object.inherits(Blockly.ToolboxSeparator,Blockly.ToolboxItem),Blockly.ToolboxSeparator.registrationName="sep",Blockly.ToolboxSeparator.prototype.init=function(){this.createDom_()},Blockly.ToolboxSeparator.prototype.createDom_=function(){var e=document.createElement("div");return Blockly.utils.dom.addClass(e,this.cssConfig_.container),this.htmlDiv_=e},Blockly.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},Blockly.ToolboxSeparator.prototype.dispose=function(){Blockly.utils.dom.removeNode(this.htmlDiv_)},Blockly.Css.register('.blocklyTreeSeparator {,border-bottom: solid #e5e5e5 1px;,height: 0;,margin: 5px 0;,},.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {,border-right: solid #e5e5e5 1px;,border-bottom: none;,height: auto;,margin: 0 5px 0 5px;,padding: 5px 0;,width: 0;,}'.split(",")),Blockly.registry.register(Blockly.registry.Type.TOOLBOX_ITEM,Blockly.ToolboxSeparator.registrationName,Blockly.ToolboxSeparator),Blockly.CollapsibleToolboxCategory=function(e,t,n){this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[],Blockly.CollapsibleToolboxCategory.superClass_.constructor.call(this,e,t,n)},Blockly.utils.object.inherits(Blockly.CollapsibleToolboxCategory,Blockly.ToolboxCategory),Blockly.CollapsibleToolboxCategory.registrationName="collapsibleCategory",Blockly.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var e=Blockly.CollapsibleToolboxCategory.superClass_.makeDefaultCssConfig_.call(this);return e.contents="blocklyToolboxContents",e},Blockly.CollapsibleToolboxCategory.prototype.parseContents_=function(e){var t=e.contents,n=!0;if(e.custom)this.flyoutItems_=e.custom;else if(t){e=0;for(var o;o=t[e];e++)!Blockly.registry.hasItem(Blockly.registry.Type.TOOLBOX_ITEM,o.kind)||o.kind.toLowerCase()==Blockly.ToolboxSeparator.registrationName&&n?(this.flyoutItems_.push(o),n=!0):(this.createToolboxItem_(o),n=!1)}},Blockly.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(e){var t=e.kind;"CATEGORY"==t.toUpperCase()&&Blockly.utils.toolbox.isCategoryCollapsible(e)&&(t=Blockly.CollapsibleToolboxCategory.registrationName),e=new(Blockly.registry.getClass(Blockly.registry.Type.TOOLBOX_ITEM,t))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)},Blockly.CollapsibleToolboxCategory.prototype.init=function(){Blockly.CollapsibleToolboxCategory.superClass_.init.call(this),this.setExpanded("true"==this.toolboxItemDef_.expanded||this.toolboxItemDef_.expanded)},Blockly.CollapsibleToolboxCategory.prototype.createDom_=function(){Blockly.CollapsibleToolboxCategory.superClass_.createDom_.call(this);var e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),Blockly.utils.aria.setRole(this.subcategoriesDiv_,Blockly.utils.aria.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},Blockly.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var e=document.createElement("span");return this.parentToolbox_.isHorizontal()||(Blockly.utils.dom.addClass(e,this.cssConfig_.icon),e.style.visibility="visible"),e.style.display="inline-block",e},Blockly.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(e){var t=document.createElement("div");Blockly.utils.dom.addClass(t,this.cssConfig_.contents);for(var n=0;n<e.length;n++){var o=e[n];o.init();var r=o.getDiv();t.appendChild(r),o.getClickTarget&&o.getClickTarget().setAttribute("id",o.getId())}return t},Blockly.CollapsibleToolboxCategory.prototype.setExpanded=function(e){this.expanded_!=e&&((this.expanded_=e)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),Blockly.utils.aria.setState(this.htmlDiv_,Blockly.utils.aria.State.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize())},Blockly.CollapsibleToolboxCategory.prototype.setVisible_=function(e){this.htmlDiv_.style.display=e?"block":"none";for(var t,n=0;t=this.getChildToolboxItems()[n];n++)t.setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()==this&&this.parentToolbox_.clearSelection()},Blockly.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},Blockly.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},Blockly.CollapsibleToolboxCategory.prototype.onClick=function(e){this.toggleExpanded()},Blockly.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},Blockly.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},Blockly.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},Blockly.registry.register(Blockly.registry.Type.TOOLBOX_ITEM,Blockly.CollapsibleToolboxCategory.registrationName,Blockly.CollapsibleToolboxCategory),Blockly.Events.ToolboxItemSelect=function(e,t,n){Blockly.Events.ToolboxItemSelect.superClass_.constructor.call(this,n),this.oldItem=e,this.newItem=t},Blockly.utils.object.inherits(Blockly.Events.ToolboxItemSelect,Blockly.Events.UiBase),Blockly.Events.ToolboxItemSelect.prototype.type=Blockly.Events.TOOLBOX_ITEM_SELECT,Blockly.Events.ToolboxItemSelect.prototype.toJson=function(){var e=Blockly.Events.ToolboxItemSelect.superClass_.toJson.call(this);return e.oldItem=this.oldItem,e.newItem=this.newItem,e},Blockly.Events.ToolboxItemSelect.prototype.fromJson=function(e){Blockly.Events.ToolboxItemSelect.superClass_.fromJson.call(this,e),this.oldItem=e.oldItem,this.newItem=e.newItem},Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.TOOLBOX_ITEM_SELECT,Blockly.Events.ToolboxItemSelect),Blockly.IAutoHideable=function(){},Blockly.IStyleable=function(){},Blockly.IToolbox=function(){},Blockly.Toolbox=function(e){Blockly.Toolbox.superClass_.constructor.call(this),this.workspace_=e,this.id="toolbox",this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout_=e.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=e.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=e.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]},Blockly.utils.object.inherits(Blockly.Toolbox,Blockly.DeleteArea),Blockly.Toolbox.prototype.onShortcut=function(e){return!1},Blockly.Toolbox.prototype.init=function(){var e=this.workspace_,t=e.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),Blockly.utils.dom.insertAfter(this.flyout_.createDom("svg"),t),this.setVisible(!0),this.flyout_.init(e),this.render(this.toolboxDef_),(e=e.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[Blockly.ComponentManager.Capability.AUTOHIDEABLE,Blockly.ComponentManager.Capability.DELETE_AREA,Blockly.ComponentManager.Capability.DRAG_TARGET]})},Blockly.Toolbox.prototype.createDom_=function(e){e=e.getParentSvg();var t=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Blockly.utils.aria.setRole(this.contentsDiv_,Blockly.utils.aria.Role.TREE),t.appendChild(this.contentsDiv_),e.parentNode.insertBefore(t,e),this.attachEvents_(t,this.contentsDiv_),t},Blockly.Toolbox.prototype.createContainer_=function(){var e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),Blockly.utils.dom.addClass(e,"blocklyToolboxDiv"),Blockly.utils.dom.addClass(e,"blocklyNonSelectable"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e},Blockly.Toolbox.prototype.createContentsContainer_=function(){var e=document.createElement("div");return Blockly.utils.dom.addClass(e,"blocklyToolboxContents"),this.isHorizontal()&&(e.style.flexDirection="row"),e},Blockly.Toolbox.prototype.attachEvents_=function(e,t){e=Blockly.browserEvents.conditionalBind(e,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(e),t=Blockly.browserEvents.conditionalBind(t,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(t)},Blockly.Toolbox.prototype.onClick_=function(e){if(Blockly.utils.isRightButton(e)||e.target==this.HtmlDiv)Blockly.hideChaff(!1);else{var t=e.target.getAttribute("id");t&&((t=this.getToolboxItemById(t)).isSelectable()&&(this.setSelectedItem(t),t.onClick(e))),Blockly.hideChaff(!0)}Blockly.Touch.clearTouchIdentifier()},Blockly.Toolbox.prototype.onKeyDown_=function(e){var t=!1;switch(e.keyCode){case Blockly.utils.KeyCodes.DOWN:t=this.selectNext_();break;case Blockly.utils.KeyCodes.UP:t=this.selectPrevious_();break;case Blockly.utils.KeyCodes.LEFT:t=this.selectParent_();break;case Blockly.utils.KeyCodes.RIGHT:t=this.selectChild_();break;case Blockly.utils.KeyCodes.ENTER:case Blockly.utils.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),t=!0);break;default:t=!1}!t&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(t=this.selectedItem_.onKeyDown(e)),t&&e.preventDefault()},Blockly.Toolbox.prototype.createFlyout_=function(){var e=this.workspace_,t=new Blockly.Options({parentWorkspace:e,rtl:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,renderer:e.options.renderer,rendererOverrides:e.options.rendererOverrides,move:{scrollbars:!0}});return t.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?Blockly.registry.getClassFromOptions(Blockly.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):Blockly.registry.getClassFromOptions(Blockly.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(t)},Blockly.Toolbox.prototype.render=function(e){this.toolboxDef_=e;for(var t=0;t<this.contents_.length;t++){var n=this.contents_[t];n&&n.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()},Blockly.Toolbox.prototype.renderContents_=function(e){for(var t,n=document.createDocumentFragment(),o=0;t=e[o];o++)this.createToolboxItem_(t,n);this.contentsDiv_.appendChild(n)},Blockly.Toolbox.prototype.createToolboxItem_=function(e,t){var n=e.kind;"CATEGORY"==n.toUpperCase()&&Blockly.utils.toolbox.isCategoryCollapsible(e)&&(n=Blockly.CollapsibleToolboxCategory.registrationName),(n=Blockly.registry.getClass(Blockly.registry.Type.TOOLBOX_ITEM,n.toLowerCase()))&&(e=new n(e,this),this.addToolboxItem_(e),e.init(),(n=e.getDiv())&&t.appendChild(n),e.getClickTarget&&e.getClickTarget().setAttribute("id",e.getId()))},Blockly.Toolbox.prototype.addToolboxItem_=function(e){if(this.contents_.push(e),this.contentMap_[e.getId()]=e,e.isCollapsible())for(var t,n=0;t=e.getChildToolboxItems()[n];n++)this.addToolboxItem_(t)},Blockly.Toolbox.prototype.getToolboxItems=function(){return this.contents_},Blockly.Toolbox.prototype.addStyle=function(e){Blockly.utils.dom.addClass(this.HtmlDiv,e)},Blockly.Toolbox.prototype.removeStyle=function(e){Blockly.utils.dom.removeClass(this.HtmlDiv,e)},Blockly.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect(),t=e.top,n=t+e.height,o=e.left;return e=o+e.width,this.toolboxPosition==Blockly.utils.toolbox.Position.TOP?new Blockly.utils.Rect(-1e7,n,-1e7,1e7):this.toolboxPosition==Blockly.utils.toolbox.Position.BOTTOM?new Blockly.utils.Rect(t,1e7,-1e7,1e7):this.toolboxPosition==Blockly.utils.toolbox.Position.LEFT?new Blockly.utils.Rect(-1e7,1e7,-1e7,e):new Blockly.utils.Rect(-1e7,1e7,o,1e7)},Blockly.Toolbox.prototype.wouldDelete=function(e,t){return e instanceof Blockly.BlockSvg?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(e.isDeletable()),this.wouldDelete_},Blockly.Toolbox.prototype.onDragEnter=function(e){this.updateCursorDeleteStyle_(!0)},Blockly.Toolbox.prototype.onDragExit=function(e){this.updateCursorDeleteStyle_(!1)},Blockly.Toolbox.prototype.onDrop=function(e){this.updateCursorDeleteStyle_(!1)},Blockly.Toolbox.prototype.updateWouldDelete_=function(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))},Blockly.Toolbox.prototype.updateCursorDeleteStyle_=function(e){var t=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(t):this.removeStyle(t)},Blockly.Toolbox.prototype.getToolboxItemById=function(e){return this.contentMap_[e]||null},Blockly.Toolbox.prototype.getWidth=function(){return this.width_},Blockly.Toolbox.prototype.getHeight=function(){return this.height_},Blockly.Toolbox.prototype.getFlyout=function(){return this.flyout_},Blockly.Toolbox.prototype.setFlyout=function(e){this.flyout_=e},Blockly.Toolbox.prototype.getWorkspace=function(){return this.workspace_},Blockly.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},Blockly.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},Blockly.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},Blockly.Toolbox.prototype.position=function(){var e=this.workspace_.getMetrics(),t=this.HtmlDiv;t&&(this.horizontalLayout_?(t.style.left="0",t.style.height="auto",t.style.width="100%",this.height_=t.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition==Blockly.utils.toolbox.Position.TOP?t.style.top="0":t.style.bottom="0"):(this.toolboxPosition==Blockly.utils.toolbox.Position.RIGHT?t.style.right="0":t.style.left="0",t.style.height="100%",this.width_=t.offsetWidth,this.height_=e.viewHeight),this.flyout_.position())},Blockly.Toolbox.prototype.handleToolboxItemResize=function(){var e=this.workspace_,t=this.HtmlDiv.getBoundingClientRect();e.translate(this.toolboxPosition==Blockly.utils.toolbox.Position.LEFT?e.scrollX+t.width:e.scrollX,this.toolboxPosition==Blockly.utils.toolbox.Position.TOP?e.scrollY+t.height:e.scrollY),Blockly.svgResize(e)},Blockly.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},Blockly.Toolbox.prototype.refreshTheme=function(){for(var e=0;e<this.contents_.length;e++){var t=this.contents_[e];t.refreshTheme&&t.refreshTheme()}},Blockly.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},Blockly.Toolbox.prototype.setVisible=function(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())},Blockly.Toolbox.prototype.autoHide=function(e){!e&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},Blockly.Toolbox.prototype.setSelectedItem=function(e){var t=this.selectedItem_;!e&&!t||e&&!e.isSelectable()||(this.shouldDeselectItem_(t,e)&&null!=t&&this.deselectItem_(t),this.shouldSelectItem_(t,e)&&null!=e&&this.selectItem_(t,e),this.updateFlyout_(t,e),this.fireSelectEvent_(t,e))},Blockly.Toolbox.prototype.shouldDeselectItem_=function(e,t){return null!=e&&(!e.isCollapsible()||e!=t)},Blockly.Toolbox.prototype.shouldSelectItem_=function(e,t){return null!=t&&t!=e},Blockly.Toolbox.prototype.deselectItem_=function(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),Blockly.utils.aria.setState(this.contentsDiv_,Blockly.utils.aria.State.ACTIVEDESCENDANT,"")},Blockly.Toolbox.prototype.selectItem_=function(e,t){this.selectedItem_=t,this.previouslySelectedItem_=e,t.setSelected(!0),Blockly.utils.aria.setState(this.contentsDiv_,Blockly.utils.aria.State.ACTIVEDESCENDANT,t.getId())},Blockly.Toolbox.prototype.selectItemByPosition=function(e){-1<e&&e<this.contents_.length&&((e=this.contents_[e]).isSelectable()&&this.setSelectedItem(e))},Blockly.Toolbox.prototype.updateFlyout_=function(e,t){(e!=t||t.isCollapsible())&&t&&t.getContents().length?(this.flyout_.show(t.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},Blockly.Toolbox.prototype.fireSelectEvent_=function(e,t){var n=e&&e.getName(),o=t&&t.getName();e==t&&(o=null),e=new(Blockly.Events.get(Blockly.Events.TOOLBOX_ITEM_SELECT))(n,o,this.workspace_.id),Blockly.Events.fire(e)},Blockly.Toolbox.prototype.selectParent_=function(){return!!this.selectedItem_&&(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),!0):!(!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable())&&(this.setSelectedItem(this.selectedItem_.getParent()),!0))},Blockly.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var e=this.selectedItem_;return e.isExpanded()?this.selectNext_():e.setExpanded(!0),!0},Blockly.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var e=this.contents_.indexOf(this.selectedItem_)+1;if(-1<e&&e<this.contents_.length){for(var t=this.contents_[e];t&&!t.isSelectable();)t=this.contents_[++e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1},Blockly.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var e=this.contents_.indexOf(this.selectedItem_)-1;if(-1<e&&e<this.contents_.length){for(var t=this.contents_[e];t&&!t.isSelectable();)t=this.contents_[--e];if(t&&t.isSelectable())return this.setSelectedItem(t),!0}return!1},Blockly.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var e=0;e<this.contents_.length;e++)this.contents_[e].dispose();for(e=0;e<this.boundEvents_.length;e++)Blockly.browserEvents.unbind(this.boundEvents_[e]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),Blockly.utils.dom.removeNode(this.HtmlDiv)},Blockly.Css.register([".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyToolboxDiv {","background-color: #ddd;","overflow-x: visible;","overflow-y: auto;","padding: 4px 0 4px 0;","position: absolute;","z-index: 70;","-webkit-tap-highlight-color: transparent;","}",".blocklyToolboxContents {","display: flex;","flex-wrap: wrap;","flex-direction: column;","}",".blocklyToolboxContents:focus {","outline: none;","}"]),Blockly.registry.register(Blockly.registry.Type.TOOLBOX,Blockly.registry.DEFAULT,Blockly.Toolbox),Blockly.Events.TrashcanOpen=function(e,t){Blockly.Events.TrashcanOpen.superClass_.constructor.call(this,t),this.isOpen=e},Blockly.utils.object.inherits(Blockly.Events.TrashcanOpen,Blockly.Events.UiBase),Blockly.Events.TrashcanOpen.prototype.type=Blockly.Events.TRASHCAN_OPEN,Blockly.Events.TrashcanOpen.prototype.toJson=function(){var e=Blockly.Events.TrashcanOpen.superClass_.toJson.call(this);return e.isOpen=this.isOpen,e},Blockly.Events.TrashcanOpen.prototype.fromJson=function(e){Blockly.Events.TrashcanOpen.superClass_.fromJson.call(this,e),this.isOpen=e.isOpen},Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.TRASHCAN_OPEN,Blockly.Events.TrashcanOpen),Blockly.IPositionable=function(){},Blockly.uiPosition={},Blockly.uiPosition.verticalPosition={TOP:0,BOTTOM:1},Blockly.uiPosition.horizontalPosition={LEFT:0,RIGHT:1},Blockly.uiPosition.bumpDirection={UP:0,DOWN:1},Blockly.uiPosition.getStartPositionRect=function(e,t,n,o,r,i){var s=i.scrollbar&&i.scrollbar.canScrollVertically();return e.horizontal===Blockly.uiPosition.horizontalPosition.LEFT?(n=r.absoluteMetrics.left+n,s&&i.RTL&&(n+=Blockly.Scrollbar.scrollbarThickness)):(n=r.absoluteMetrics.left+r.viewMetrics.width-t.width-n,s&&!i.RTL&&(n-=Blockly.Scrollbar.scrollbarThickness)),e.vertical===Blockly.uiPosition.verticalPosition.TOP?e=r.absoluteMetrics.top+o:(e=r.absoluteMetrics.top+r.viewMetrics.height-t.height-o,i.scrollbar&&i.scrollbar.canScrollHorizontally()&&(e-=Blockly.Scrollbar.scrollbarThickness)),new Blockly.utils.Rect(e,e+t.height,n,n+t.width)},Blockly.uiPosition.getCornerOppositeToolbox=function(e,t){return{horizontal:t.toolboxMetrics.position===Blockly.utils.toolbox.Position.LEFT||e.horizontalLayout&&!e.RTL?Blockly.uiPosition.horizontalPosition.RIGHT:Blockly.uiPosition.horizontalPosition.LEFT,vertical:t.toolboxMetrics.position===Blockly.utils.toolbox.Position.BOTTOM?Blockly.uiPosition.verticalPosition.TOP:Blockly.uiPosition.verticalPosition.BOTTOM}},Blockly.uiPosition.bumpPositionRect=function(e,t,n,o){for(var r,i=e.left,s=e.right-e.left,a=e.bottom-e.top,l=0;r=o[l];l++)e.intersects(r)&&(e=n===Blockly.uiPosition.bumpDirection.UP?r.top-a-t:r.bottom+t,e=new Blockly.utils.Rect(e,e+a,i,i+s),l=-1);return e},Blockly.Trashcan=function(e){Blockly.Trashcan.superClass_.constructor.call(this),this.workspace_=e,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(e=new Blockly.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(e.toolboxPosition=this.workspace_.toolboxPosition==Blockly.utils.toolbox.Position.TOP?Blockly.utils.toolbox.Position.BOTTOM:Blockly.utils.toolbox.Position.TOP,this.flyout=new(Blockly.registry.getClassFromOptions(Blockly.registry.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(e)):(e.toolboxPosition=this.workspace_.toolboxPosition==Blockly.utils.toolbox.Position.RIGHT?Blockly.utils.toolbox.Position.LEFT:Blockly.utils.toolbox.Position.RIGHT,this.flyout=new(Blockly.registry.getClassFromOptions(Blockly.registry.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(e)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))},Blockly.utils.object.inherits(Blockly.Trashcan,Blockly.DeleteArea),Blockly.Trashcan.prototype.WIDTH_=47,Blockly.Trashcan.prototype.BODY_HEIGHT_=44,Blockly.Trashcan.prototype.LID_HEIGHT_=16,Blockly.Trashcan.prototype.MARGIN_VERTICAL_=20,Blockly.Trashcan.prototype.MARGIN_HORIZONTAL_=20,Blockly.Trashcan.prototype.MARGIN_HOTSPOT_=10,Blockly.Trashcan.prototype.SPRITE_LEFT_=0,Blockly.Trashcan.prototype.SPRITE_TOP_=32,Blockly.Trashcan.prototype.HAS_BLOCKS_LID_ANGLE_=.1,Blockly.Trashcan.ANIMATION_LENGTH_=80,Blockly.Trashcan.ANIMATION_FRAMES_=4,Blockly.Trashcan.OPACITY_MIN_=.4,Blockly.Trashcan.OPACITY_MAX_=.8,Blockly.Trashcan.MAX_LID_ANGLE_=45,Blockly.Trashcan.prototype.isLidOpen=!1,Blockly.Trashcan.prototype.minOpenness_=0,Blockly.Trashcan.prototype.svgGroup_=null,Blockly.Trashcan.prototype.svgLid_=null,Blockly.Trashcan.prototype.lidTask_=0,Blockly.Trashcan.prototype.lidOpen_=0,Blockly.Trashcan.prototype.left_=0,Blockly.Trashcan.prototype.top_=0,Blockly.Trashcan.prototype.initialized_=!1,Blockly.Trashcan.prototype.createDom=function(){this.svgGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{class:"blocklyTrash"},null);var e=String(Math.random()).substring(2),t=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+e},this.svgGroup_);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},t);var n=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.IMAGE,{width:Blockly.SPRITE.width,x:-this.SPRITE_LEFT_,height:Blockly.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+e+")"},this.svgGroup_);return n.setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+Blockly.SPRITE.url),t=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+e},this.svgGroup_),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{width:this.WIDTH_,height:this.LID_HEIGHT_},t),this.svgLid_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.IMAGE,{width:Blockly.SPRITE.width,x:-this.SPRITE_LEFT_,height:Blockly.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+e+")"},this.svgGroup_),this.svgLid_.setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+Blockly.SPRITE.url),Blockly.browserEvents.bind(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),Blockly.browserEvents.bind(this.svgGroup_,"mouseup",this,this.click),Blockly.browserEvents.bind(n,"mouseover",this,this.mouseOver_),Blockly.browserEvents.bind(n,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},Blockly.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&(Blockly.utils.dom.insertAfter(this.flyout.createDom(Blockly.utils.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[Blockly.ComponentManager.Capability.AUTOHIDEABLE,Blockly.ComponentManager.Capability.DELETE_AREA,Blockly.ComponentManager.Capability.DRAG_TARGET,Blockly.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},Blockly.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&(Blockly.utils.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},Blockly.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},Blockly.Trashcan.prototype.contentsIsOpen=function(){return this.flyout.isVisible()},Blockly.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var e=this.contents_.map(Blockly.Xml.textToDom);this.flyout.show(e),this.fireUiEvent_(!0)}},Blockly.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1))},Blockly.Trashcan.prototype.autoHide=function(e){!e&&this.flyout&&this.closeFlyout()},Blockly.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},Blockly.Trashcan.prototype.position=function(e,t){if(this.initialized_){var n=Blockly.uiPosition.getCornerOppositeToolbox(this.workspace_,e);e=Blockly.uiPosition.getStartPositionRect(n,new Blockly.utils.Size(this.WIDTH_,this.BODY_HEIGHT_+this.LID_HEIGHT_),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,e,this.workspace_),t=Blockly.uiPosition.bumpPositionRect(e,this.MARGIN_VERTICAL_,n.vertical===Blockly.uiPosition.verticalPosition.TOP?Blockly.uiPosition.bumpDirection.DOWN:Blockly.uiPosition.bumpDirection.UP,t),this.top_=t.top,this.left_=t.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},Blockly.Trashcan.prototype.getBoundingRectangle=function(){return new Blockly.utils.Rect(this.top_,this.top_+this.BODY_HEIGHT_+this.LID_HEIGHT_,this.left_,this.left_+this.WIDTH_)},Blockly.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),t=e.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_;return e=e.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,new Blockly.utils.Rect(t,t+this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_,e,e+this.WIDTH_+2*this.MARGIN_HOTSPOT_)},Blockly.Trashcan.prototype.onDragOver=function(e){this.setLidOpen(this.wouldDelete_)},Blockly.Trashcan.prototype.onDragExit=function(e){this.setLidOpen(!1)},Blockly.Trashcan.prototype.onDrop=function(e){setTimeout(this.setLidOpen.bind(this,!1),100)},Blockly.Trashcan.prototype.setLidOpen=function(e){this.isLidOpen!=e&&(clearTimeout(this.lidTask_),this.isLidOpen=e,this.animateLid_())},Blockly.Trashcan.prototype.animateLid_=function(){var e=Blockly.Trashcan.ANIMATION_FRAMES_,t=1/(e+1);this.lidOpen_+=this.isLidOpen?t:-t,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*Blockly.Trashcan.MAX_LID_ANGLE_),t=Blockly.Trashcan.OPACITY_MIN_,this.svgGroup_.style.opacity=t+this.lidOpen_*(Blockly.Trashcan.OPACITY_MAX_-t),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),Blockly.Trashcan.ANIMATION_LENGTH_/e))},Blockly.Trashcan.prototype.setLidAngle_=function(e){var t=this.workspace_.toolboxPosition==Blockly.utils.toolbox.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(t?-e:e)+","+(t?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")")},Blockly.Trashcan.prototype.setMinOpenness_=function(e){this.minOpenness_=e,this.isLidOpen||this.setLidAngle_(e*Blockly.Trashcan.MAX_LID_ANGLE_)},Blockly.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},Blockly.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},Blockly.Trashcan.prototype.fireUiEvent_=function(e){e=new(Blockly.Events.get(Blockly.Events.TRASHCAN_OPEN))(e,this.workspace_.id),Blockly.Events.fire(e)},Blockly.Trashcan.prototype.blockMouseDownWhenOpenable_=function(e){!this.contentsIsOpen()&&this.hasContents_()&&e.stopPropagation()},Blockly.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},Blockly.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},Blockly.Trashcan.prototype.onDelete_=function(e){if(!(0>=this.workspace_.options.maxTrashcanContents)&&e.type==Blockly.Events.BLOCK_DELETE&&e.oldXml.tagName&&"shadow"!=e.oldXml.tagName.toLowerCase()&&(e=this.cleanBlockXML_(e.oldXml),-1==this.contents_.indexOf(e))){for(this.contents_.unshift(e);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(this.HAS_BLOCKS_LID_ANGLE_)}},Blockly.Trashcan.prototype.cleanBlockXML_=function(e){for(var t=e=e.cloneNode(!0);t;){t.removeAttribute&&(t.removeAttribute("x"),t.removeAttribute("y"),t.removeAttribute("id"),t.removeAttribute("disabled"),"comment"==t.nodeName&&(t.removeAttribute("h"),t.removeAttribute("w"),t.removeAttribute("pinned")));var n=t.firstChild||t.nextSibling;if(!n)for(n=t.parentNode;n;){if(n.nextSibling){n=n.nextSibling;break}n=n.parentNode}t=n}return Blockly.Xml.domToText(e)},Blockly.VariablesDynamic={},Blockly.VariablesDynamic.onCreateVariableButtonClick_String=function(e){Blockly.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"String")},Blockly.VariablesDynamic.onCreateVariableButtonClick_Number=function(e){Blockly.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Number")},Blockly.VariablesDynamic.onCreateVariableButtonClick_Colour=function(e){Blockly.Variables.createVariableButtonHandler(e.getTargetWorkspace(),void 0,"Colour")},Blockly.VariablesDynamic.flyoutCategory=function(e){var t=[],n=document.createElement("button");return n.setAttribute("text",Blockly.Msg.NEW_STRING_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),t.push(n),(n=document.createElement("button")).setAttribute("text",Blockly.Msg.NEW_NUMBER_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),t.push(n),(n=document.createElement("button")).setAttribute("text",Blockly.Msg.NEW_COLOUR_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),t.push(n),e.registerButtonCallback("CREATE_VARIABLE_STRING",Blockly.VariablesDynamic.onCreateVariableButtonClick_String),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",Blockly.VariablesDynamic.onCreateVariableButtonClick_Number),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",Blockly.VariablesDynamic.onCreateVariableButtonClick_Colour),e=Blockly.VariablesDynamic.flyoutCategoryBlocks(e),t.concat(e)},Blockly.VariablesDynamic.flyoutCategoryBlocks=function(e){var t=[];if(0<(e=e.getAllVariables()).length){if(Blockly.Blocks.variables_set_dynamic){var n=e[e.length-1],o=Blockly.utils.xml.createElement("block");o.setAttribute("type","variables_set_dynamic"),o.setAttribute("gap",24),o.appendChild(Blockly.Variables.generateVariableFieldDom(n)),t.push(o)}if(Blockly.Blocks.variables_get_dynamic){e.sort(Blockly.VariableModel.compareByName),n=0;for(var r;r=e[n];n++)(o=Blockly.utils.xml.createElement("block")).setAttribute("type","variables_get_dynamic"),o.setAttribute("gap",8),o.appendChild(Blockly.Variables.generateVariableFieldDom(r)),t.push(o)}}return t},Blockly.WorkspaceComment=function(e,t,n,o,r,i){this.id=r&&!e.getCommentById(r)?r:Blockly.utils.genUid(),e.addTopComment(this),this.xy_=new Blockly.utils.Coordinate(0,0),this.height_=n,this.width_=o,this.isMinimized_=i,this.workspace=e,this.RTL=e.RTL,this.editable_=this.movable_=this.deletable_=!0,this.content_=t.trim(),this.isComment=!0,Blockly.WorkspaceComment.fireCreateEvent(this)},Blockly.WorkspaceComment.MAX_LABEL_LENGTH=12,Blockly.WorkspaceComment.COMMENT_TEXT_LIMIT=8e3,Blockly.WorkspaceComment.prototype.data=null,Blockly.WorkspaceComment.prototype.dispose=function(){this.workspace&&(Blockly.Events.isEnabled()&&Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.COMMENT_DELETE))(this)),this.workspace.removeTopComment(this),this.workspace=null)},Blockly.WorkspaceComment.prototype.getHeight=function(){return this.height_},Blockly.WorkspaceComment.prototype.setHeight=function(e){this.height_=e},Blockly.WorkspaceComment.prototype.getWidth=function(){return this.width_},Blockly.WorkspaceComment.prototype.setWidth=function(e){this.width_=e},Blockly.WorkspaceComment.prototype.getXY=function(){return new Blockly.utils.Coordinate(this.xy_.x,this.xy_.y)},Blockly.WorkspaceComment.prototype.moveBy=function(e,t){var n=new(Blockly.Events.get(Blockly.Events.COMMENT_MOVE))(this);this.xy_.translate(e,t),n.recordNew(),Blockly.Events.fire(n)},Blockly.WorkspaceComment.prototype.isDeletable=function(){return this.deletable_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.WorkspaceComment.prototype.setDeletable=function(e){this.deletable_=e},Blockly.WorkspaceComment.prototype.isMovable=function(){return this.movable_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.WorkspaceComment.prototype.setMovable=function(e){this.movable_=e},Blockly.WorkspaceComment.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.WorkspaceComment.prototype.setEditable=function(e){this.editable_=e},Blockly.WorkspaceComment.prototype.getContent=function(){return this.content_},Blockly.WorkspaceComment.prototype.setContent=function(e){this.content_!=e&&(e=e.trim(),Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.COMMENT_CHANGE))(this,this.content_,e)),this.content_=e)},Blockly.WorkspaceComment.prototype.isMinimized=function(){return this.isMinimized_},Blockly.WorkspaceComment.prototype.getRelativeToSurfaceXY=function(){return this.xy_},Blockly.WorkspaceComment.prototype.toXmlWithXY=function(e){return(e=this.toXml(e)).setAttribute("x",Math.round(this.xy_.x)),e.setAttribute("y",Math.round(this.xy_.y)),e.setAttribute("h",this.height_),e.setAttribute("w",this.width_),e},Blockly.WorkspaceComment.prototype.getLabelText=function(){return this.content_.length>Blockly.WorkspaceComment.MAX_LABEL_LENGTH?this.RTL?""+this.content_.slice(0,Blockly.WorkspaceComment.MAX_LABEL_LENGTH):this.content_.slice(0,Blockly.WorkspaceComment.MAX_LABEL_LENGTH)+"":this.content_},Blockly.WorkspaceComment.prototype.toXml=function(e){var t=Blockly.utils.xml.createElement("comment");return e||(t.id=this.id),t.textContent=this.getContent(),this.isMinimized_&&t.setAttribute("minimized",!0),this.data&&t.setAttribute("data",this.data),t},Blockly.WorkspaceComment.fireCreateEvent=function(e){if(Blockly.Events.isEnabled()){var t=Blockly.Events.getGroup();t||Blockly.Events.setGroup(!0);try{Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.COMMENT_CREATE))(e))}finally{t||Blockly.Events.setGroup(!1)}}},Blockly.WorkspaceComment.fromXml=function(e,t){var n=Blockly.WorkspaceComment.parseAttributes(e);return(t=new Blockly.WorkspaceComment(t,n.content,n.h,n.w,n.id,n.minimized)).data=e.getAttribute("data"),n=parseInt(e.getAttribute("x"),10),e=parseInt(e.getAttribute("y"),10),isNaN(n)||isNaN(e)||t.moveBy(n,e),Blockly.WorkspaceComment.fireCreateEvent(t),t},Blockly.WorkspaceComment.parseAttributes=function(e){var t=e.getAttribute("h"),n=e.getAttribute("w");return{id:e.getAttribute("id"),h:t?parseInt(t,10):100,w:n?parseInt(n,10):100,x:parseInt(e.getAttribute("x"),10),y:parseInt(e.getAttribute("y"),10),minimized:"true"==e.getAttribute("minimized")||!1,content:e.textContent}},Blockly.WorkspaceCommentSvg=function(e,t,n,o,r,i){this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.svgGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{class:"blocklyComment"},null),this.svgGroup_.translate_="",this.svgRect_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:Blockly.WorkspaceCommentSvg.BORDER_WIDTH,ry:Blockly.WorkspaceCommentSvg.BORDER_WIDTH}),this.svgGroup_.appendChild(this.svgRect_),this.rendered_=!1,this.useDragSurface_=Blockly.utils.is3dSupported()&&!!e.blockDragSurface_,Blockly.WorkspaceCommentSvg.superClass_.constructor.call(this,e,t,n,o,r,i),this.render()},Blockly.utils.object.inherits(Blockly.WorkspaceCommentSvg,Blockly.WorkspaceComment),Blockly.WorkspaceCommentSvg.DEFAULT_SIZE=200,Blockly.WorkspaceCommentSvg.prototype.dispose=function(){this.workspace&&(Blockly.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),Blockly.Events.isEnabled()&&Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.COMMENT_DELETE))(this)),Blockly.utils.dom.removeNode(this.svgGroup_),this.svgRect_=this.svgGroup_=null,this.disposeInternal_(),Blockly.Events.disable(),Blockly.WorkspaceCommentSvg.superClass_.dispose.call(this),Blockly.Events.enable())},Blockly.WorkspaceCommentSvg.prototype.initSvg=function(e){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit_||(Blockly.browserEvents.conditionalBind(this.svgRectTarget_,"mousedown",this,this.pathMouseDown_),Blockly.browserEvents.conditionalBind(this.svgHandleTarget_,"mousedown",this,this.pathMouseDown_)),this.eventsInit_=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!e&&this.textarea_&&this.textarea_.select()},Blockly.WorkspaceCommentSvg.prototype.pathMouseDown_=function(e){var t=this.workspace.getGesture(e);t&&t.handleBubbleStart(e,this)},Blockly.WorkspaceCommentSvg.prototype.showContextMenu=function(e){if(!this.workspace.options.readOnly&&!this.workspace.options.debugMode){var t=[];this.isDeletable()&&this.isMovable()&&(t.push(Blockly.ContextMenu.commentDuplicateOption(this)),t.push(Blockly.ContextMenu.commentDeleteOption(this))),Blockly.ContextMenu.show(e,t,this.RTL)}},Blockly.WorkspaceCommentSvg.prototype.select=function(){if(Blockly.selected!=this){var e=null;if(Blockly.selected){e=Blockly.selected.id,Blockly.Events.disable();try{Blockly.selected.unselect()}finally{Blockly.Events.enable()}}e=new(Blockly.Events.get(Blockly.Events.SELECTED))(e,this.id,this.workspace.id),Blockly.Events.fire(e),Blockly.selected=this,this.addSelect()}},Blockly.WorkspaceCommentSvg.prototype.unselect=function(){if(Blockly.selected==this){var e=new(Blockly.Events.get(Blockly.Events.SELECTED))(this.id,null,this.workspace.id);Blockly.Events.fire(e),Blockly.selected=null,this.removeSelect(),this.blurFocus()}},Blockly.WorkspaceCommentSvg.prototype.addSelect=function(){Blockly.utils.dom.addClass(this.svgGroup_,"blocklySelected"),this.setFocus()},Blockly.WorkspaceCommentSvg.prototype.removeSelect=function(){Blockly.utils.dom.removeClass(this.svgGroup_,"blocklySelected"),this.blurFocus()},Blockly.WorkspaceCommentSvg.prototype.addFocus=function(){Blockly.utils.dom.addClass(this.svgGroup_,"blocklyFocused")},Blockly.WorkspaceCommentSvg.prototype.removeFocus=function(){Blockly.utils.dom.removeClass(this.svgGroup_,"blocklyFocused")},Blockly.WorkspaceCommentSvg.prototype.getRelativeToSurfaceXY=function(){var e=0,t=0,n=this.useDragSurface_?this.workspace.blockDragSurface_.getGroup():null,o=this.getSvgRoot();if(o)do{var r=Blockly.utils.getRelativeXY(o);e+=r.x,t+=r.y,this.useDragSurface_&&this.workspace.blockDragSurface_.getCurrentBlock()==o&&(e+=(r=this.workspace.blockDragSurface_.getSurfaceTranslation()).x,t+=r.y),o=o.parentNode}while(o&&o!=this.workspace.getBubbleCanvas()&&o!=n);return this.xy_=new Blockly.utils.Coordinate(e,t)},Blockly.WorkspaceCommentSvg.prototype.moveBy=function(e,t){var n=new(Blockly.Events.get(Blockly.Events.COMMENT_MOVE))(this),o=this.getRelativeToSurfaceXY();this.translate(o.x+e,o.y+t),this.xy_=new Blockly.utils.Coordinate(o.x+e,o.y+t),n.recordNew(),Blockly.Events.fire(n),this.workspace.resizeContents()},Blockly.WorkspaceCommentSvg.prototype.translate=function(e,t){this.xy_=new Blockly.utils.Coordinate(e,t),this.getSvgRoot().setAttribute("transform","translate("+e+","+t+")")},Blockly.WorkspaceCommentSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var e=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.blockDragSurface_.translateSurface(e.x,e.y),this.workspace.blockDragSurface_.setBlocksAndShow(this.getSvgRoot())}},Blockly.WorkspaceCommentSvg.prototype.moveOffDragSurface=function(e){this.useDragSurface_&&(this.translate(e.x,e.y),this.workspace.blockDragSurface_.clearAndHide(this.workspace.getCanvas()))},Blockly.WorkspaceCommentSvg.prototype.moveDuringDrag=function(e,t){e?e.translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},Blockly.WorkspaceCommentSvg.prototype.moveTo=function(e,t){this.translate(e,t)},Blockly.WorkspaceCommentSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},Blockly.WorkspaceCommentSvg.prototype.getBubbleSize=function(){if(this.rendered_)return{width:parseInt(this.svgRect_.getAttribute("width")),height:parseInt(this.svgRect_.getAttribute("height"))};this.getHeightWidth()},Blockly.WorkspaceCommentSvg.prototype.getBoundingRectangle=function(){var e=this.getRelativeToSurfaceXY(),t=this.getHeightWidth(),n=e.y,o=e.y+t.height;if(this.RTL){var r=e.x-t.width;e=e.x}else r=e.x,e=e.x+t.width;return new Blockly.utils.Rect(n,o,r,e)},Blockly.WorkspaceCommentSvg.prototype.updateMovable=function(){this.isMovable()?Blockly.utils.dom.addClass(this.svgGroup_,"blocklyDraggable"):Blockly.utils.dom.removeClass(this.svgGroup_,"blocklyDraggable")},Blockly.WorkspaceCommentSvg.prototype.setMovable=function(e){Blockly.WorkspaceCommentSvg.superClass_.setMovable.call(this,e),this.updateMovable()},Blockly.WorkspaceCommentSvg.prototype.setEditable=function(e){Blockly.WorkspaceCommentSvg.superClass_.setEditable.call(this,e),this.textarea_&&(this.textarea_.readOnly=!e)},Blockly.WorkspaceCommentSvg.prototype.setDragging=function(e){e?((e=this.getSvgRoot()).translate_="",e.skew_="",Blockly.utils.dom.addClass(this.svgGroup_,"blocklyDragging")):Blockly.utils.dom.removeClass(this.svgGroup_,"blocklyDragging")},Blockly.WorkspaceCommentSvg.prototype.getSvgRoot=function(){return this.svgGroup_},Blockly.WorkspaceCommentSvg.prototype.getContent=function(){return this.textarea_?this.textarea_.value:this.content_},Blockly.WorkspaceCommentSvg.prototype.setContent=function(e){Blockly.WorkspaceCommentSvg.superClass_.setContent.call(this,e),this.textarea_&&(this.textarea_.value=e)},Blockly.WorkspaceCommentSvg.prototype.setDeleteStyle=function(e){e?Blockly.utils.dom.addClass(this.svgGroup_,"blocklyDraggingDelete"):Blockly.utils.dom.removeClass(this.svgGroup_,"blocklyDraggingDelete")},Blockly.WorkspaceCommentSvg.prototype.setAutoLayout=function(e){};Blockly.WorkspaceCommentSvg.fromXml=function(e,t,n){Blockly.Events.disable();try{var o=Blockly.WorkspaceComment.parseAttributes(e),r=new Blockly.WorkspaceCommentSvg(t,o.content,o.h,o.w,o.minimized,o.id);if(t.rendered&&(r.initSvg(!0),r.render(!1)),!isNaN(o.x)&&!isNaN(o.y))if(t.RTL){var i=n||t.getWidth();r.moveBy(i-o.x,o.y)}else r.moveBy(o.x,o.y);r.data=e.getAttribute("data")}finally{Blockly.Events.enable()}return Blockly.WorkspaceComment.fireCreateEvent(r),r},Blockly.WorkspaceCommentSvg.prototype.toXmlWithXY=function(e){var t;this.workspace.RTL&&(t=this.workspace.getWidth()),e=this.toXml(e);var n=this.getRelativeToSurfaceXY();return e.setAttribute("x",Math.round(this.workspace.RTL?t-n.x:n.x)),e.setAttribute("y",Math.round(n.y)),e.setAttribute("h",this.getHeight()),e.setAttribute("w",this.getWidth()),e},Blockly.WorkspaceCommentSvg.prototype.toCopyData=function(){return{xml:this.toXmlWithXY(),source:this.workspace,typeCounts:null}},Blockly.WorkspaceCommentSvg.prototype.getHeightWidth=function(){console.warn("method is overriden by workspace_comment_render_svg.js")},Blockly.Css.register([".blocklyCommentForeignObject {","position: relative;","z-index: 0;","}",".blocklyComment > image {","cursor: pointer","}",".blocklyCommentRect {","fill: #E7DE8E;","stroke: #bcA903;","stroke-width: 1px;","}",".blocklyCommentTarget {","fill: transparent;","stroke: #F9F3A1;","}",".blocklyCommentTargetFocused {","fill: none;","}",".blocklyCommentText {","fill: #000;","pointer-events: none;","}",".blocklyCommentHandleTarget {","fill: none;","}",".blocklyCommentHandleTargetFocused {","fill: transparent;","}",".blocklyFocused>.blocklyCommentRect {","fill: #FFB900;","stroke: #B9B272;","}",".blocklySelected>.blocklyCommentTarget {","stroke: #FFB900;","stroke-width: 1px;","}",".blocklyCommentForeignObject {","position: relative;","z-index: 0;","}",".blocklyCommentRect {","fill: #FAF6BD;","stroke: #F9F3A1;","stroke-width: 1px","}",".blocklyCommentTarget {","fill: transparent;","stroke: #F9F3A1;","}",".blocklyCommentTargetFocused {","fill: none;","}",".blocklyCommentHandleTarget {","fill: none;","}",".blocklyCommentHandleTargetFocused {","fill: transparent;","}",".blocklyUneditableComment {","fill: $colour_text;","}",".blocklyCommentDeleteIcon {","cursor: pointer;","fill: #000;","display: none;","}",".blocklyFocused > .blocklyCommentDeleteIcon,",".blocklyCommentBubble > .blocklyCommentDeleteIcon {","display: block;","}",".blocklySelected > .blocklyCommentDeleteIcon {","display: block;","}",".blocklyDeleteIconShape.blocklyDeleteIconHighlighted {","fill: rgba(255, 255, 255, 0.20);","}",".blocklyCommentDeleteIcon {","cursor: pointer;","fill: #000;","display: none","}",".blocklySelected > .blocklyCommentDeleteIcon {","display: block","}"]),Blockly.WorkspaceCommentSvg.render={},Blockly.WorkspaceCommentSvg.BORDER_WIDTH=1,Blockly.WorkspaceCommentSvg.RESIZE_SIZE=12*Blockly.WorkspaceCommentSvg.BORDER_WIDTH,Blockly.WorkspaceCommentSvg.TEXTAREA_OFFSET=12,Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT=32,Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE=16,Blockly.WorkspaceCommentSvg.DELETE_ICON_SIZE=12,Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET=6,Blockly.WorkspaceCommentSvg.MINIMIZE_WIDTH=200,Blockly.WorkspaceCommentSvg.UNEDITABLE_TEXT_LENGTH=35,Blockly.WorkspaceCommentSvg.UNEDITABLE_LINE_GAP=30,Blockly.WorkspaceCommentSvg.prototype.getHeightWidth=function(){return{width:this.getWidth(),height:this.getHeight()}},Blockly.WorkspaceCommentSvg.prototype.render=function(){if(!this.rendered_){var e=this.getHeightWidth();!this.isEditable()||Blockly.utils.userAgent.IE?(this.createUneditableText_(),this.svgGroup_.appendChild(this.uneditableTextGroup_)):(this.commentEditor_=this.createEditor_(),this.svgGroup_.appendChild(this.commentEditor_));var t=this.commentEditor_||this.uneditableTextGroup_;if(this.svgHandleTarget_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"blocklyCommentHandleTarget",fill:"transparent",rx:Blockly.WorkspaceCommentSvg.BORDER_WIDTH,ry:Blockly.WorkspaceCommentSvg.BORDER_WIDTH,height:Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT},this.svgGroup_),this.svgGroup_.appendChild(this.svgHandleTarget_),this.svgRectTarget_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"blocklyDraggable blocklyCommentTarget",x:0,y:0,rx:4*Blockly.WorkspaceCommentSvg.BORDER_WIDTH,ry:4*Blockly.WorkspaceCommentSvg.BORDER_WIDTH},this.svgGroup_),this.isEditable()&&!Blockly.utils.userAgent.IE&&this.addResizeDom_(),this.createTopBarIcons_(),this.createTopBarLabel_(),this.isMinimized()?(this.minimizeArrow_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"comment-arrow-up.svg"),t.setAttribute("display","none"),this.resizeGroup_.setAttribute("display","none")):(this.minimizeArrow_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"comment-arrow-down.svg"),this.topBarLabel_.setAttribute("display","none")),this.textarea_)this.textarea_.value=this.content_;else for(t=0;t<this.content_.length;t+=Blockly.WorkspaceCommentSvg.UNEDITABLE_TEXT_LENGTH){var n=this.content_.substring(t,t+Blockly.WorkspaceCommentSvg.UNEDITABLE_TEXT_LENGTH);this.pushUneditableTextLine_(n)}this.isEditable()&&!Blockly.utils.userAgent.IE?this.setSize(e.width,e.height):this.setSize(8*Blockly.WorkspaceCommentSvg.UNEDITABLE_TEXT_LENGTH+25,this.uneditableTextLineY-10),this.rendered_=!0,this.resizeGroup_&&(Blockly.browserEvents.conditionalBind(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_),Blockly.bindEventWithChecks_(this.resizeGroup_,"mouseup",this,this.resizeMouseUp_)),Blockly.bindEventWithChecks_(this.minimizeArrow_,"mousedown",this,this.minimizeArrowMouseDown_),Blockly.bindEventWithChecks_(this.minimizeArrow_,"mouseout",this,this.minimizeArrowMouseOut_),Blockly.bindEventWithChecks_(this.minimizeArrow_,"mouseup",this,this.minimizeArrowMouseUp_),this.isDeletable()&&(Blockly.browserEvents.conditionalBind(this.deleteGroup_,"mousedown",this,this.deleteMouseDown_),Blockly.browserEvents.conditionalBind(this.deleteGroup_,"mouseout",this,this.deleteMouseOut_),Blockly.browserEvents.conditionalBind(this.deleteGroup_,"mouseup",this,this.deleteMouseUp_))}},Blockly.WorkspaceCommentSvg.prototype.createEditor_=function(){this.foreignObject_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FOREIGNOBJECT,{x:Blockly.WorkspaceCommentSvg.BORDER_WIDTH,y:Blockly.WorkspaceCommentSvg.BORDER_WIDTH+Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT,class:"blocklyCommentForeignObject"},null);var e=document.createElementNS(Blockly.utils.dom.HTML_NS,"body");e.setAttribute("xmlns",Blockly.utils.dom.HTML_NS),e.className="blocklyMinimalBody";var t=document.createElementNS(Blockly.utils.dom.HTML_NS,"textarea");return t.className="blocklyCommentTextarea",t.setAttribute("dir",this.RTL?"RTL":"LTR"),t.setAttribute("maxlength",Blockly.WorkspaceComment.COMMENT_TEXT_LIMIT),t.readOnly=!this.isEditable(),e.appendChild(t),this.textarea_=t,this.textarea_.style.margin=Blockly.WorkspaceCommentSvg.TEXTAREA_OFFSET+"px",this.foreignObject_.appendChild(e),Blockly.browserEvents.conditionalBind(t,"wheel",this,(function(e){e.stopPropagation()})),Blockly.browserEvents.conditionalBind(t,"change",this,(function(e){this.text_!=t.value&&this.setContent(t.value)})),this.labelText_=this.getLabelText(),this.foreignObject_},Blockly.WorkspaceCommentSvg.prototype.addResizeDom_=function(){this.resizeGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup_);var e=Blockly.WorkspaceCommentSvg.RESIZE_SIZE;Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.POLYGON,{points:"0,0 0,x x,x x,0".replace(/x/g,e.toString())},this.resizeGroup_),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{class:"blocklyResizeLine",x1:e/3,y1:e-1,x2:e-1,y2:e/3},this.resizeGroup_),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{class:"blocklyResizeLine",x1:2*e/3,y1:e-1,x2:e-1,y2:2*e/3},this.resizeGroup_)},Blockly.WorkspaceCommentSvg.prototype.createCommentTopBar_=function(){this.svgHandleTarget_=Blockly.utils.dom.createSvgElement("rect",{class:"blocklyDraggable blocklyCommentHandleTarget",fill:"transparent",rx:Blockly.WorkspaceCommentSvg.BORDER_WIDTH,ry:Blockly.WorkspaceCommentSvg.BORDER_WIDTH,height:Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT},this.svgGroup_),this.createTopBarIcons_(),this.createTopBarLabel_()},Blockly.WorkspaceCommentSvg.prototype.createTopBarLabel_=function(){this.topBarLabel_=Blockly.utils.dom.createSvgElement("text",{class:"blocklyCommentText",x:this.width_/2,y:Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT/2+Blockly.WorkspaceCommentSvg.BORDER_WIDTH,"text-anchor":"middle","dominant-baseline":"middle"},this.svgGroup_);var e=document.createTextNode(this.labelText_);this.topBarLabel_.appendChild(e)},Blockly.WorkspaceCommentSvg.prototype.createTopBarIcons_=function(){this.minimizeArrow_=Blockly.utils.dom.createSvgElement("image",{x:Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET,y:Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT/2+Blockly.WorkspaceCommentSvg.BORDER_WIDTH-Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE/2,width:Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE,height:Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE},this.svgGroup_),this.isDeletable()&&this.addDeleteDom_()},Blockly.WorkspaceCommentSvg.prototype.addDeleteDom_=function(){this.deleteGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup_),this.deleteIconBorder_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{x:"-12.5",y:"1",width:"27.5",height:"27.5",fill:"transparent",class:"blocklyDeleteIconShape"},this.deleteGroup_),Blockly.WorkspaceCommentSvg.drawDeleteIcon(this.deleteGroup_)},Blockly.WorkspaceCommentSvg.drawDeleteIcon=function(e){e=Blockly.utils.dom.createSvgElement("g",{transform:"scale (1.5) translate(-6, 1)"},e),Blockly.utils.dom.createSvgElement("rect",{x:5,y:2,width:"4",height:"2",stroke:"#fff","stroke-width":"1",fill:"transparent"},e),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{x1:1,y1:4,x2:13,y2:4,stroke:"#fff","stroke-width":"1","stroke-linecap":"round"},e),Blockly.utils.dom.createSvgElement("rect",{x:2,y:4,width:10,height:12,rx:"1",ry:"1",stroke:"#fff","stroke-width":"1",fill:"transparent"},e),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{x1:5,y1:7,x2:5,y2:13,stroke:"#fff","stroke-width":"1","stroke-linecap":"round"},e),Blockly.utils.dom.createSvgElement("line",{x1:7,y1:7,x2:7,y2:13,stroke:"#fff","stroke-width":"1","stroke-linecap":"round"},e),Blockly.utils.dom.createSvgElement("line",{x1:9,y1:7,x2:9,y2:13,stroke:"#fff","stroke-width":"1","stroke-linecap":"round"},e)},Blockly.WorkspaceCommentSvg.prototype.minimizeArrowMouseDown_=function(e){this.shouldToggleMinimize_=!0,e.stopPropagation()},Blockly.WorkspaceCommentSvg.prototype.minimizeArrowMouseOut_=function(e){this.shouldToggleMinimize_=!1},Blockly.WorkspaceCommentSvg.prototype.minimizeArrowMouseUp_=function(e){this.shouldToggleMinimize_&&(this.shouldToggleMinimize=!1,this.toggleMinimize_()),e.stopPropagation(),Blockly.Touch.clearTouchIdentifier()},Blockly.WorkspaceCommentSvg.prototype.deleteMouseDown_=function(e){this.shouldDelete_=!0,e.stopPropagation()},Blockly.WorkspaceCommentSvg.prototype.deleteMouseOut_=function(e){this.shouldDelete_=!1},Blockly.WorkspaceCommentSvg.prototype.deleteMouseUp_=function(e){this.shouldDelete_&&this.dispose(),e.stopPropagation(),Blockly.Touch.clearTouchIdentifier()},Blockly.WorkspaceCommentSvg.prototype.resizeMouseDown_=function(e){this.resizeStartSize_={width:this.width_,height:this.height_},this.unbindDragEvents_(),this.workspace.setResizesEnabled(!1),Blockly.utils.isRightButton(e)||(this.workspace.startDrag(e,new Blockly.utils.Coordinate(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper_=Blockly.bindEventWithChecks_(document,"mouseup",this,this.resizeMouseUp_),this.onMouseMoveWrapper_=Blockly.bindEventWithChecks_(document,"mousemove",this,this.resizeMouseMove_),Blockly.hideChaff()),e.stopPropagation()},Blockly.WorkspaceCommentSvg.prototype.setRenderedMinimizeState_=function(e,t){var n=this.commentEditor_||this.uneditableTextGroup_;e?(this.minimizeArrow_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"comment-arrow-up.svg"),n.setAttribute("display","none"),this.resizeGroup_&&this.resizeGroup_.setAttribute("display","none"),t&&this.labelText_!=t&&(this.topBarLabel_.textContent=t),this.topBarLabel_.removeAttribute("display")):(this.minimizeArrow_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"comment-arrow-down.svg"),this.topBarLabel_.setAttribute("display","none"),n.removeAttribute("display"),this.resizeGroup_&&this.resizeGroup_.removeAttribute("display"))},Blockly.WorkspaceCommentSvg.prototype.unbindDragEvents_=function(){this.onMouseUpWrapper_&&(Blockly.browserEvents.unbind(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(Blockly.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)},Blockly.WorkspaceCommentSvg.prototype.resizeMouseUp_=function(){Blockly.Touch.clearTouchIdentifier(),this.unbindDragEvents_();var e=this.resizeStartSize_;this.resizeStartSize_=null,this.width_==e.width&&this.height_==e.height||(Blockly.Events.fire(new Blockly.Events.CommentChange(this,{width:e.width,height:e.height},{width:this.width_,height:this.height_})),this.workspace.setResizesEnabled(!0))},Blockly.WorkspaceCommentSvg.prototype.resizeMouseMove_=function(e){this.autoLayout_=!1,e=this.workspace.moveDrag(e);var t=!1;Blockly.Events.isEnabled()&&(Blockly.Events.disable(),t=!0),this.setSize(this.RTL?-e.x:e.x,e.y),t&&Blockly.Events.enable()},Blockly.WorkspaceCommentSvg.prototype.resizeComment_=function(){var e=2*Blockly.WorkspaceCommentSvg.BORDER_WIDTH,t=Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT,n=2*Blockly.WorkspaceCommentSvg.TEXTAREA_OFFSET,o=this.commentEditor_||this.uneditableBackground_;o.setAttribute("width",this.width_-e),o.setAttribute("height",this.height_-e-t),this.RTL&&o.setAttribute("x",-this.width_),this.textarea_&&(this.textarea_.style.width=this.width_-n+"px",this.textarea_.style.height=this.height_-e-n-t+"px")},Blockly.WorkspaceCommentSvg.prototype.setSize=function(e,t){var n=this.width_,o=this.height_,r=2*Blockly.WorkspaceCommentSvg.BORDER_WIDTH;this.isMinimized_?(e=Blockly.WorkspaceCommentSvg.MINIMIZE_WIDTH,t=Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT):(e=Math.max(e,r+50),t=Math.max(t,r+20+Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT),this.width_=e,this.height_=t,Blockly.Events.fire(new Blockly.Events.CommentChange(this,{width:n,height:o},{width:this.width_,height:this.height_}))),this.svgRect_.setAttribute("width",e),this.svgRect_.setAttribute("height",t),this.svgRectTarget_.setAttribute("width",e),this.svgRectTarget_.setAttribute("height",t),this.svgHandleTarget_.setAttribute("width",e),this.svgHandleTarget_.setAttribute("height",Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT),this.RTL?(this.minimizeArrow_.setAttribute("x",e-Blockly.WorkspaceCommentSvg.MINIMIZE_ICON_SIZE-Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET),this.svgRect_.setAttribute("transform","scale(-1 1)"),this.svgHandleTarget_.setAttribute("transform","scale(-1 1)"),this.svgHandleTarget_.setAttribute("transform","translate("+-e+", 1)"),this.minimizeArrow_.setAttribute("transform","translate("+-e+", 1)"),this.isDeletable()&&this.deleteGroup_.setAttribute("transform","translate("+(-e+Blockly.WorkspaceCommentSvg.DELETE_ICON_SIZE+Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET)+",0) scale(-1 1)")):this.isDeletable()&&this.deleteGroup_.setAttribute("transform","translate("+(e-Blockly.WorkspaceCommentSvg.DELETE_ICON_SIZE-Blockly.WorkspaceCommentSvg.TOP_BAR_ICON_INSET)+",0)"),n=Blockly.WorkspaceCommentSvg.RESIZE_SIZE,this.resizeGroup_&&(this.RTL?this.resizeGroup_.setAttribute("transform","translate("+(-e+n)+","+(t-n)+") scale(-1 1)"):this.resizeGroup_.setAttribute("transform","translate("+(e-r-n)+","+(t-r-n)+")")),this.isMinimized_&&(this.topBarLabel_.setAttribute("x",e/2),this.topBarLabel_.setAttribute("y",t/2)),this.resizeComment_()},Blockly.WorkspaceComment.prototype.toggleMinimize_=function(){this.setMinimized(!this.isMinimized_)},Blockly.WorkspaceComment.prototype.setMinimized=function(e){this.isMinimized_!=e&&(Blockly.Events.fire(new Blockly.Events.CommentChange(this,{minimized:this.isMinimized_},{minimized:e})),(this.isMinimized_=e)?(this.rendered_&&this.setRenderedMinimizeState_(!0,this.getLabelText()),this.setSize(Blockly.WorkspaceCommentSvg.MINIMIZE_WIDTH,Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT)):(this.rendered_&&this.setRenderedMinimizeState_(!1),this.setContent(this.content_),this.setSize(this.width_,this.height_)))},Blockly.WorkspaceCommentSvg.prototype.disposeInternal_=function(){this.svgHandleTarget_=this.svgRectTarget_=this.svgRect_=this.foreignObject_=this.textarea_=null,this.disposed_=!0},Blockly.WorkspaceCommentSvg.prototype.setFocus=function(){var e=this;this.focused_=!0,setTimeout((function(){e.disposed_||(e.textarea_.focus(),e.addFocus(),Blockly.utils.dom.addClass(e.svgRectTarget_,"blocklyCommentTargetFocused"),Blockly.utils.dom.addClass(e.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))}),0)},Blockly.WorkspaceCommentSvg.prototype.blurFocus=function(){var e=this;this.focused_=!1,setTimeout((function(){e.disposed_||(e.textarea_.blur(),e.removeFocus(),Blockly.utils.dom.removeClass(e.svgRectTarget_,"blocklyCommentTargetFocused"),Blockly.utils.dom.removeClass(e.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))}),0)},Blockly.WorkspaceCommentSvg.prototype.createUneditableText_=function(){this.uneditableTextGroup_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyUneditableComment"},this.svgGroup_),this.uneditableBackground_=Blockly.utils.dom.createSvgElement("rect",{class:"blocklyUneditableMinimalBody",y:Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT.toString()},this.svgGroup_),this.uneditableTextGroup_.appendChild(this.uneditableBackground_),this.uneditableTextLineY=2*Blockly.WorkspaceCommentSvg.TOP_BAR_HEIGHT},Blockly.WorkspaceCommentSvg.prototype.pushUneditableTextLine_=function(e){var t=Blockly.utils.dom.createSvgElement("text",{x:15,y:this.uneditableTextLineY},this.uneditableTextGroup_);e=document.createTextNode(e),t.appendChild(e),this.uneditableTextLineY+=Blockly.WorkspaceCommentSvg.UNEDITABLE_LINE_GAP},Blockly.ZoomControls=function(e){this.workspace_=e,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null},Blockly.ZoomControls.prototype.WIDTH_=32,Blockly.ZoomControls.prototype.HEIGHT_=32,Blockly.ZoomControls.prototype.SMALL_SPACING_=2,Blockly.ZoomControls.prototype.LARGE_SPACING_=11,Blockly.ZoomControls.prototype.MARGIN_VERTICAL_=20,Blockly.ZoomControls.prototype.MARGIN_HORIZONTAL_=20,Blockly.ZoomControls.prototype.svgGroup_=null,Blockly.ZoomControls.prototype.left_=0,Blockly.ZoomControls.prototype.top_=0,Blockly.ZoomControls.prototype.initialized_=!1,Blockly.ZoomControls.prototype.createDom=function(){this.svgGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{},null);var e=String(Math.random()).substring(2);return this.createZoomOutSvg_(e),this.createZoomInSvg_(e),this.workspace_.isMovable()&&this.createZoomResetSvg_(e),this.svgGroup_},Blockly.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[Blockly.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},Blockly.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&Blockly.utils.dom.removeNode(this.svgGroup_),this.onZoomResetWrapper_&&Blockly.browserEvents.unbind(this.onZoomResetWrapper_),this.onZoomInWrapper_&&Blockly.browserEvents.unbind(this.onZoomInWrapper_),this.onZoomOutWrapper_&&Blockly.browserEvents.unbind(this.onZoomOutWrapper_)},Blockly.ZoomControls.prototype.getBoundingRectangle=function(){var e=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(e+=this.LARGE_SPACING_+this.HEIGHT_),new Blockly.utils.Rect(this.top_,this.top_+e,this.left_,this.left_+this.WIDTH_)},Blockly.ZoomControls.prototype.position=function(e,t){if(this.initialized_){var n=Blockly.uiPosition.getCornerOppositeToolbox(this.workspace_,e),o=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(o+=this.LARGE_SPACING_+this.HEIGHT_),e=Blockly.uiPosition.getStartPositionRect(n,new Blockly.utils.Size(this.WIDTH_,o),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,e,this.workspace_),n=n.vertical,t=Blockly.uiPosition.bumpPositionRect(e,this.MARGIN_VERTICAL_,n===Blockly.uiPosition.verticalPosition.TOP?Blockly.uiPosition.bumpDirection.DOWN:Blockly.uiPosition.bumpDirection.UP,t),n===Blockly.uiPosition.verticalPosition.TOP?(n=this.SMALL_SPACING_+this.HEIGHT_,this.zoomInGroup_.setAttribute("transform","translate(0, "+n+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(n+this.LARGE_SPACING_+this.HEIGHT_)+")")):(n=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0,this.zoomInGroup_.setAttribute("transform","translate(0, "+n+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(n+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=t.top,this.left_=t.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},Blockly.ZoomControls.prototype.createZoomOutSvg_=function(e){this.zoomOutGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var t=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup_);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{width:32,height:32},t),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.IMAGE,{width:Blockly.SPRITE.width,height:Blockly.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup_).setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+Blockly.SPRITE.url),this.onZoomOutWrapper_=Blockly.browserEvents.conditionalBind(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},Blockly.ZoomControls.prototype.createZoomInSvg_=function(e){this.zoomInGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var t=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup_);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{width:32,height:32},t),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.IMAGE,{width:Blockly.SPRITE.width,height:Blockly.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup_).setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+Blockly.SPRITE.url),this.onZoomInWrapper_=Blockly.browserEvents.conditionalBind(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},Blockly.ZoomControls.prototype.zoom_=function(e,t){this.workspace_.markFocused(),this.workspace_.zoomCenter(e),this.fireZoomEvent_(),Blockly.Touch.clearTouchIdentifier(),t.stopPropagation(),t.preventDefault()},Blockly.ZoomControls.prototype.createZoomResetSvg_=function(e){this.zoomResetGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var t=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup_);Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{width:32,height:32},t),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.IMAGE,{width:Blockly.SPRITE.width,height:Blockly.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup_).setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+Blockly.SPRITE.url),this.onZoomResetWrapper_=Blockly.browserEvents.conditionalBind(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},Blockly.ZoomControls.prototype.resetZoom_=function(e){this.workspace_.markFocused();var t=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(t),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),Blockly.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()},Blockly.ZoomControls.prototype.fireZoomEvent_=function(){var e=new(Blockly.Events.get(Blockly.Events.CLICK))(null,this.workspace_.id,"zoom_controls");Blockly.Events.fire(e)},Blockly.Css.register([".blocklyZoom>image, .blocklyZoom>svg>image {","opacity: .4;","}",".blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {","opacity: .6;","}",".blocklyZoom>image:active, .blocklyZoom>svg>image:active {","opacity: .8;","}"]),Blockly.ShortcutItems={},Blockly.ShortcutItems.names={ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},Blockly.ShortcutItems.registerEscape=function(){var e={name:Blockly.ShortcutItems.names.ESCAPE,preconditionFn:function(e){return!e.options.readOnly},callback:function(){return Blockly.hideChaff(),!0}};Blockly.ShortcutRegistry.registry.register(e),Blockly.ShortcutRegistry.registry.addKeyMapping(Blockly.utils.KeyCodes.ESC,e.name)},Blockly.ShortcutItems.registerDelete=function(){var e={name:Blockly.ShortcutItems.names.DELETE,preconditionFn:function(e){return!e.options.readOnly&&Blockly.selected&&Blockly.selected.isDeletable()},callback:function(e,t){return t.preventDefault(),!Blockly.Gesture.inProgress()&&(Blockly.deleteBlock(Blockly.selected),!0)}};Blockly.ShortcutRegistry.registry.register(e),Blockly.ShortcutRegistry.registry.addKeyMapping(Blockly.utils.KeyCodes.DELETE,e.name),Blockly.ShortcutRegistry.registry.addKeyMapping(Blockly.utils.KeyCodes.BACKSPACE,e.name)},Blockly.ShortcutItems.registerCopy=function(){var e={name:Blockly.ShortcutItems.names.COPY,preconditionFn:function(e){return!e.options.readOnly&&!Blockly.Gesture.inProgress()&&Blockly.selected&&Blockly.selected.isDeletable()&&Blockly.selected.isMovable()},callback:function(e,t){return t.preventDefault(),Blockly.hideChaff(),Blockly.copy(Blockly.selected),!0}};Blockly.ShortcutRegistry.registry.register(e);var t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.C,[Blockly.utils.KeyCodes.CTRL]);Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name),t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.C,[Blockly.utils.KeyCodes.ALT]),Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name),t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.C,[Blockly.utils.KeyCodes.META]),Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name)},Blockly.ShortcutItems.registerCut=function(){var e={name:Blockly.ShortcutItems.names.CUT,preconditionFn:function(e){return!e.options.readOnly&&!Blockly.Gesture.inProgress()&&Blockly.selected&&Blockly.selected.isDeletable()&&Blockly.selected.isMovable()&&!Blockly.selected.workspace.isFlyout},callback:function(){return Blockly.copy(Blockly.selected),Blockly.deleteBlock(Blockly.selected),!0}};Blockly.ShortcutRegistry.registry.register(e);var t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.X,[Blockly.utils.KeyCodes.CTRL]);Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name),t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.X,[Blockly.utils.KeyCodes.ALT]),Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name),t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.X,[Blockly.utils.KeyCodes.META]),Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name)},Blockly.ShortcutItems.registerPaste=function(){var e={name:Blockly.ShortcutItems.names.PASTE,preconditionFn:function(e){return!e.options.readOnly&&!Blockly.Gesture.inProgress()},callback:function(){return Blockly.paste()}};Blockly.ShortcutRegistry.registry.register(e);var t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.V,[Blockly.utils.KeyCodes.CTRL]);Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name),t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.V,[Blockly.utils.KeyCodes.ALT]),Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name),t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.V,[Blockly.utils.KeyCodes.META]),Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name)},Blockly.ShortcutItems.registerUndo=function(){var e={name:Blockly.ShortcutItems.names.UNDO,preconditionFn:function(e){return!e.options.readOnly&&!Blockly.Gesture.inProgress()},callback:function(e){return Blockly.hideChaff(),e.undo(!1),!0}};Blockly.ShortcutRegistry.registry.register(e);var t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.Z,[Blockly.utils.KeyCodes.CTRL]);Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name),t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.Z,[Blockly.utils.KeyCodes.ALT]),Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name),t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.Z,[Blockly.utils.KeyCodes.META]),Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name)},Blockly.ShortcutItems.registerRedo=function(){var e={name:Blockly.ShortcutItems.names.REDO,preconditionFn:function(e){return!Blockly.Gesture.inProgress()&&!e.options.readOnly},callback:function(e){return Blockly.hideChaff(),e.undo(!0),!0}};Blockly.ShortcutRegistry.registry.register(e);var t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.Z,[Blockly.utils.KeyCodes.SHIFT,Blockly.utils.KeyCodes.CTRL]);Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name),t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.Z,[Blockly.utils.KeyCodes.SHIFT,Blockly.utils.KeyCodes.ALT]),Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name),t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.Z,[Blockly.utils.KeyCodes.SHIFT,Blockly.utils.KeyCodes.META]),Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name),t=Blockly.ShortcutRegistry.registry.createSerializedKey(Blockly.utils.KeyCodes.Y,[Blockly.utils.KeyCodes.CTRL]),Blockly.ShortcutRegistry.registry.addKeyMapping(t,e.name)},Blockly.ShortcutItems.registerDefaultShortcuts=function(){Blockly.ShortcutItems.registerEscape(),Blockly.ShortcutItems.registerDelete(),Blockly.ShortcutItems.registerCopy(),Blockly.ShortcutItems.registerCut(),Blockly.ShortcutItems.registerPaste(),Blockly.ShortcutItems.registerUndo(),Blockly.ShortcutItems.registerRedo()},Blockly.ShortcutItems.registerDefaultShortcuts(),Blockly.ContextMenuItems={},Blockly.ContextMenuItems.registerUndo=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(){return Blockly.Msg.UNDO},preconditionFn:function(e){return 0<e.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(e){e.workspace.undo(!1)},scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},Blockly.ContextMenuItems.registerRedo=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(){return Blockly.Msg.REDO},preconditionFn:function(e){return 0<e.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(e){e.workspace.undo(!0)},scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},Blockly.ContextMenuItems.registerCleanup=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(){return Blockly.Msg.CLEAN_UP},preconditionFn:function(e){return e.workspace.isMovable()?1<e.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(e){e.workspace.cleanUp()},scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},Blockly.ContextMenuItems.toggleOption_=function(e,t){for(var n=0,o=0;o<t.length;o++)for(var r=t[o];r;)setTimeout(r.setCollapsed.bind(r,e),n),r=r.getNextBlock(),n+=10},Blockly.ContextMenuItems.registerCollapse=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(){return Blockly.Msg.COLLAPSE_ALL},preconditionFn:function(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(var t=0;t<e.length;t++){var n=e[t];if(!n.isCollapsed()&&null==n.previousConnection&&null==n.outputConnection)return"enabled"}return"disabled"}return"hidden"},callback:function(e){Blockly.ContextMenuItems.toggleOption_(!0,e.workspace.getTopBlocks(!0))},scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Blockly.ContextMenuItems.registerExpand=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(){return Blockly.Msg.EXPAND_ALL},preconditionFn:function(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(var t=0;t<e.length;t++)for(var n=e[t];n;){if(n.isCollapsed())return"enabled";n=n.getNextBlock()}return"disabled"}return"hidden"},callback:function(e){Blockly.ContextMenuItems.toggleOption_(!1,e.workspace.getTopBlocks(!0))},scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Blockly.ContextMenuItems.addDeletableBlocks_=function(e,t){if(e.isDeletable())Array.prototype.push.apply(t,e.getDescendants(!1));else{e=e.getChildren(!1);for(var n=0;n<e.length;n++)Blockly.ContextMenuItems.addDeletableBlocks_(e[n],t)}},Blockly.ContextMenuItems.getDeletableBlocks_=function(e){var t=[];e=e.getTopBlocks(!0);for(var n=0;n<e.length;n++)Blockly.ContextMenuItems.addDeletableBlocks_(e[n],t);return t},Blockly.ContextMenuItems.deleteNext_=function(e,t){Blockly.Events.setGroup(t);var n=e.shift();n&&(n.workspace?(n.dispose(!1,!0),setTimeout(Blockly.ContextMenuItems.deleteNext_,10,e,t)):Blockly.ContextMenuItems.deleteNext_(e,t)),Blockly.Events.setGroup(!1)},Blockly.ContextMenuItems.registerDeleteAll=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(e){if(e.workspace)return 1==(e=Blockly.ContextMenuItems.getDeletableBlocks_(e.workspace).length)?Blockly.Msg.DELETE_BLOCK:Blockly.Msg.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:function(e){if(e.workspace)return 0<Blockly.ContextMenuItems.getDeletableBlocks_(e.workspace).length?"enabled":"disabled"},callback:function(e){if(e.workspace){e.workspace.cancelCurrentGesture();var t=Blockly.ContextMenuItems.getDeletableBlocks_(e.workspace),n=Blockly.utils.genUid();2>t.length?Blockly.ContextMenuItems.deleteNext_(t,n):Blockly.confirm(Blockly.Msg.DELETE_ALL_BLOCKS.replace("%1",t.length),(function(e){e&&Blockly.ContextMenuItems.deleteNext_(t,n)}))}},scopeType:Blockly.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},Blockly.ContextMenuItems.registerWorkspaceOptions_=function(){Blockly.ContextMenuItems.registerUndo(),Blockly.ContextMenuItems.registerRedo(),Blockly.ContextMenuItems.registerCleanup(),Blockly.ContextMenuItems.registerCollapse(),Blockly.ContextMenuItems.registerExpand(),Blockly.ContextMenuItems.registerDeleteAll()},Blockly.ContextMenuItems.registerDuplicate=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(){return Blockly.Msg.DUPLICATE_BLOCK},preconditionFn:function(e){return!(e=e.block).isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(e){e.block&&Blockly.duplicate(e.block)},scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},Blockly.ContextMenuItems.registerComment=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.getCommentIcon()?Blockly.Msg.REMOVE_COMMENT:Blockly.Msg.ADD_COMMENT},preconditionFn:function(e){return e=e.block,Blockly.utils.userAgent.IE||e.isInFlyout||!e.workspace.options.comments||e.isCollapsed()||!e.isEditable()?"hidden":"enabled"},callback:function(e){(e=e.block).getCommentIcon()?e.setCommentText(null):e.setCommentText("")},scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},Blockly.ContextMenuItems.registerInline=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.getInputsInline()?Blockly.Msg.EXTERNAL_INPUTS:Blockly.Msg.INLINE_INPUTS},preconditionFn:function(e){if(!(e=e.block).isInFlyout&&e.isMovable()&&!e.isCollapsed())for(var t=1;t<e.inputList.length;t++)if(e.inputList[t-1].type!=Blockly.inputTypes.STATEMENT&&e.inputList[t].type!=Blockly.inputTypes.STATEMENT)return"enabled";return"hidden"},callback:function(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},Blockly.ContextMenuItems.registerCollapseExpandBlock=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.isCollapsed()?Blockly.Msg.EXPAND_BLOCK:Blockly.Msg.COLLAPSE_BLOCK},preconditionFn:function(e){var t=e.block;return!t.isInFlyout&&t.isMovable()&&t.workspace.options.collapse&&null==e.block.previousConnection&&null==e.block.outputConnection?"enabled":"hidden"},callback:function(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Blockly.ContextMenuItems.registerDisable=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(e){return e.block.isEnabled()?Blockly.Msg.DISABLE_BLOCK:Blockly.Msg.ENABLE_BLOCK},preconditionFn:function(e){return!(e=e.block).isInFlyout&&e.workspace.options.disable&&e.isEditable()?e.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(e){e=e.block;var t=Blockly.Events.getGroup();t||Blockly.Events.setGroup(!0),e.setEnabled(!e.isEnabled()),t||Blockly.Events.setGroup(!1)},scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},Blockly.ContextMenuItems.registerDelete=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(e){var t=e.block;return e=t.getDescendants(!1).length,(t=t.getNextBlock())&&(e-=t.getDescendants(!1).length),1==e?Blockly.Msg.DELETE_BLOCK:Blockly.Msg.DELETE_X_BLOCKS.replace("%1",String(e))},preconditionFn:function(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback:function(e){Blockly.Events.setGroup(!0),e.block&&Blockly.deleteBlock(e.block),Blockly.Events.setGroup(!1)},scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},Blockly.ContextMenuItems.registerHelp=function(){Blockly.ContextMenuRegistry.registry.register({displayText:function(){return Blockly.Msg.HELP},preconditionFn:function(e){return("function"==typeof(e=e.block).helpUrl?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback:function(e){e.block.showHelp()},scopeType:Blockly.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})},Blockly.ContextMenuItems.registerBlockOptions_=function(){Blockly.ContextMenuItems.registerDuplicate(),Blockly.ContextMenuItems.registerComment(),Blockly.ContextMenuItems.registerInline(),Blockly.ContextMenuItems.registerCollapseExpandBlock(),Blockly.ContextMenuItems.registerDisable(),Blockly.ContextMenuItems.registerDelete(),Blockly.ContextMenuItems.registerHelp()},Blockly.ContextMenuItems.registerDefaultOptions=function(){Blockly.ContextMenuItems.registerWorkspaceOptions_(),Blockly.ContextMenuItems.registerBlockOptions_()},Blockly.ContextMenuItems.registerDefaultOptions(),Blockly.Mutator=function(e){Blockly.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=e},Blockly.utils.object.inherits(Blockly.Mutator,Blockly.Icon),Blockly.Mutator.prototype.workspace_=null,Blockly.Mutator.prototype.workspaceWidth_=0,Blockly.Mutator.prototype.workspaceHeight_=0,Blockly.Mutator.prototype.setBlock=function(e){this.block_=e},Blockly.Mutator.prototype.getWorkspace=function(){return this.workspace_},Blockly.Mutator.prototype.drawIcon_=function(e){Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"blocklyIconShape",rx:"10",ry:"10",height:"16",width:"16"},e),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},e),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},e)},Blockly.Mutator.prototype.iconClick_=function(e){this.block_.isEditable()&&Blockly.Icon.prototype.iconClick_.call(this,e)},Blockly.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.SVG,{x:Blockly.Bubble.BORDER_WIDTH,y:Blockly.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var e,t=Blockly.utils.xml.createElement("xml"),n=0;e=this.quarkNames_[n];n++){var o=Blockly.utils.xml.createElement("block");o.setAttribute("type",e),t.appendChild(o)}else t=null;return(n=new Blockly.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides})).toolboxPosition=this.block_.RTL?Blockly.utils.toolbox.Position.RIGHT:Blockly.utils.toolbox.Position.LEFT,(e=!!t)&&(n.languageTree=Blockly.utils.toolbox.convertToolboxDefToJson(t)),this.workspace_=new Blockly.WorkspaceSvg(n),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(Blockly.Events.disableOrphans),t=e?this.workspace_.addFlyout(Blockly.utils.Svg.G):null,n=this.workspace_.createDom("blocklyMutatorBackground"),t&&n.insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},Blockly.Mutator.prototype.updateEditable=function(){Blockly.Mutator.superClass_.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&Blockly.utils.dom.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&Blockly.utils.dom.addClass(this.iconGroup_,"blocklyIconGroupReadonly")))},Blockly.Mutator.prototype.resizeBubble_=function(){var e=2*Blockly.Bubble.BORDER_WIDTH,t=this.workspace_.getCanvas().getBBox(),n=t.width+t.x,o=t.height+3*e,r=this.workspace_.getFlyout();if(r){var i=r.getWorkspace().getMetricsManager().getScrollMetrics();o=Math.max(o,i.height+20),n+=r.getWidth()}this.block_.RTL&&(n=-t.x),n+=3*e,(Math.abs(this.workspaceWidth_-n)>e||Math.abs(this.workspaceHeight_-o)>e)&&(this.workspaceWidth_=n,this.workspaceHeight_=o,this.bubble_.setBubbleSize(n+e,o+e),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(e="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",e)),this.workspace_.resize()},Blockly.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},Blockly.Mutator.prototype.setVisible=function(e){if(e!=this.isVisible())if(Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BUBBLE_OPEN))(this.block_,e,"mutator")),e){this.bubble_=new Blockly.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var t=this.workspace_.options.languageTree;e=this.workspace_.getFlyout(),t&&(e.init(this.workspace_),e.show(t)),this.rootBlock_=this.block_.decompose(this.workspace_),t=this.rootBlock_.getDescendants(!1);for(var n,o=0;n=t[o];o++)n.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),e?(t=2*e.CORNER_RADIUS,e=this.rootBlock_.RTL?e.getWidth()+t:t):e=t=16,this.block_.RTL&&(e=-e),this.rootBlock_.moveBy(e,t),this.block_.saveConnections){var r=this,i=this.block_;i.saveConnections(this.rootBlock_),this.sourceListener_=function(){i.saveConnections(r.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},Blockly.Mutator.prototype.workspaceChanged_=function(e){if(!(e.isUiEvent||e.type==Blockly.Events.CHANGE&&"disabled"==e.element)){if(!this.workspace_.isDragging()){e=this.workspace_.getTopBlocks(!1);for(var t,n=0;t=e[n];n++){var o=t.getRelativeToSurfaceXY();if(20>o.y&&t.moveBy(0,20-o.y),t.RTL){var r=-20,i=this.workspace_.getFlyout();i&&(r-=i.getWidth()),o.x>r&&t.moveBy(r-o.x,0)}else 20>o.x&&t.moveBy(20-o.x,0)}}if(this.rootBlock_.workspace==this.workspace_){if(Blockly.Events.setGroup(!0),e=(e=(t=this.block_).mutationToDom())&&Blockly.Xml.domToText(e),n=t.rendered,t.rendered=!1,t.compose(this.rootBlock_),t.rendered=n,t.initSvg(),t.rendered&&t.render(),e!=(n=(n=t.mutationToDom())&&Blockly.Xml.domToText(n))){Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BLOCK_CHANGE))(t,"mutation",null,e,n));var s=Blockly.Events.getGroup();setTimeout((function(){Blockly.Events.setGroup(s),t.bumpNeighbours(),Blockly.Events.setGroup(!1)}),Blockly.BUMP_DELAY)}this.workspace_.isDragging()||this.resizeBubble_(),Blockly.Events.setGroup(!1)}}},Blockly.Mutator.prototype.dispose=function(){this.block_.mutator=null,Blockly.Icon.prototype.dispose.call(this)},Blockly.Mutator.prototype.updateBlockStyle=function(){var e=this.workspace_;if(e&&e.getAllBlocks(!1)){for(var t,n=e.getAllBlocks(!1),o=0;t=n[o];o++)t.setStyle(t.getStyleName());if(o=e.getFlyout())for(e=o.workspace_.getAllBlocks(!1),o=0;t=e[o];o++)t.setStyle(t.getStyleName())}},Blockly.Mutator.reconnect=function(e,t,n){if(!e||!e.getSourceBlock().workspace)return!1;n=t.getInput(n).connection;var o=e.targetBlock();return!(o&&o!=t||n.targetConnection==e)&&(n.isConnected()&&n.disconnect(),n.connect(e),!0)},Blockly.Mutator.findParentWs=function(e){var t=null;if(e&&e.options){var n=e.options.parentWorkspace;e.isFlyout?n&&n.options&&(t=n.options.parentWorkspace):n&&(t=n)}return t},Blockly.FieldTextInput=function(e,t,n){this.spellcheck_=!0,Blockly.FieldTextInput.superClass_.constructor.call(this,e,t,n),this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.htmlInput_=null,this.fullBlockClickTarget_=!1,this.workspace_=null},Blockly.utils.object.inherits(Blockly.FieldTextInput,Blockly.Field),Blockly.FieldTextInput.prototype.DEFAULT_VALUE="",Blockly.FieldTextInput.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text);return new Blockly.FieldTextInput(t,void 0,e)},Blockly.FieldTextInput.ANIMATION_TIME=.25,Blockly.FieldTextInput.TEXT_MEASURE_PADDING_MAGIC=45,Blockly.FieldTextInput.prototype.htmlInput_=null,Blockly.FieldTextInput.prototype.SERIALIZABLE=!0,Blockly.FieldTextInput.BORDERRADIUS=4,Blockly.FieldTextInput.prototype.CURSOR="text",Blockly.FieldTextInput.prototype.configure_=function(e){Blockly.FieldTextInput.superClass_.configure_.call(this,e),"boolean"==typeof e.spellcheck&&(this.spellcheck_=e.spellcheck)},Blockly.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var e,t=0,n=0,o=0;e=this.sourceBlock_.inputList[o];o++){for(var r=0;e.fieldRow[r];r++)t++;e.connection&&n++}this.fullBlockClickTarget_=1>=t&&this.sourceBlock_.outputConnection&&!n}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},Blockly.FieldTextInput.prototype.autoCapitalize_=!0,Blockly.FieldTextInput.prototype.onMouseOver_=function(e){this.sourceBlock_.isInFlyout||(e=this.sourceBlock_.workspace.getGesture(e))&&e.isDragging()||this.sourceBlock_.pathObject.svgPath&&Blockly.utils.dom.addClass(this.sourceBlock_.pathObject.svgPath,"blocklyFieldHover")},Blockly.FieldTextInput.prototype.onMouseOut_=function(e){this.sourceBlock_.isInFlyout||(e=this.sourceBlock_.workspace.getGesture(e))&&e.isDragging()||this.sourceBlock_.pathObject.svgPath&&Blockly.utils.dom.removeClass(this.sourceBlock_.pathObject.svgPath,"blocklyFieldHover")},Blockly.FieldTextInput.prototype.dispose=function(){this.mouseOverWrapper_&&(Blockly.unbindEvent_(this.mouseOverWrapper_),this.mouseOverWrapper_=null),this.mouseOutWrapper_&&(Blockly.unbindEvent_(this.mouseOutWrapper_),this.mouseOutWrapper_=null),Blockly.WidgetDiv.hideIfOwner(this),Blockly.FieldTextInput.superClass_.dispose.call(this)},Blockly.FieldTextInput.prototype.doClassValidation_=function(e){return null==e?null:String(e)},Blockly.FieldTextInput.prototype.doValueInvalid_=function(e){this.isBeingEdited_&&(this.isTextValid_=!1,e=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new(Blockly.Events.get(Blockly.Events.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))},Blockly.FieldTextInput.prototype.doValueUpdate_=function(e){this.isTextValid_=!0,this.value_=e,this.isBeingEdited_||(this.isDirty_=!0)},Blockly.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},Blockly.FieldTextInput.prototype.render_=function(){if(Blockly.FieldTextInput.superClass_.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var e=this.htmlInput_;this.isTextValid_?(Blockly.utils.dom.removeClass(e,"blocklyInvalidInput"),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.INVALID,!1)):(Blockly.utils.dom.addClass(e,"blocklyInvalidInput"),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.INVALID,!0))}},Blockly.FieldTextInput.prototype.setSpellcheck=function(e){e!=this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},Blockly.FieldTextInput.prototype.setAutoCapitalize=function(e){this.autoCapitalize_=e},Blockly.FieldTextInput.prototype.setRestrictor=function(e){this.restrictor_=e},Blockly.FieldTextInput.prototype.showEditor_=function(e,t,n,o,r){this.workspace_=this.sourceBlock_.workspace,n=n||!1,!(e=t||!1)&&(Blockly.utils.userAgent.MOBILE||Blockly.utils.userAgent.ANDROID||Blockly.utils.userAgent.IPAD)?this.showPromptEditor_():this.showInlineEditor_(e,n,o,r)},Blockly.FieldTextInput.prototype.showPromptEditor_=function(){Blockly.prompt(Blockly.Msg.CHANGE_VALUE_TITLE,this.getText(),function(e){this.setValue(this.getValueFromEditorText_(e))}.bind(this))},Blockly.FieldTextInput.prototype.showInlineEditor_=function(e,t,n,o){Blockly.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(t,n,o),this.isBeingEdited_=!0,o&&o.call(this),e||(this.focus(),this.htmlInput_.setSelectionRange(0,99999))},Blockly.FieldTextInput.prototype.widgetCreate_=function(e,t,n){t=Blockly.WidgetDiv.DIV,Blockly.utils.dom.addClass(this.getClickTarget_(),"editing"),(n=document.createElement("input")).className="blocklyHtmlInput",n.setAttribute("spellcheck",this.spellcheck_),e&&n.setAttribute("readonly","true"),this.autoCapitalize_||n.setAttribute("autocapitalize","none"),e=this.workspace_.getScale();var o=this.getConstants().FIELD_TEXT_FONTSIZE*e+"pt";if(t.style.fontSize=o,n.style.fontSize=o,o=Blockly.FieldTextInput.BORDERRADIUS*e+"px",this.fullBlockClickTarget_){o=((o=this.getScaledBBox()).bottom-o.top)/2+"px";var r=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;n.style.border=1*e+"px solid "+r,t.style.borderRadius=o,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0px 0px 0px "+4*e+"px")}return n.style.borderRadius=o,t.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(n),n},Blockly.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_&&this.onFinishEditing_(this.value_),this.unbindInputEvents_(),this.htmlInput_.dropDownArrowMouseWrapper_&&Blockly.unbindEvent_(this.htmlInput_.dropDownArrowMouseWrapper_);var e=Blockly.WidgetDiv.DIV.style;e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,Blockly.utils.dom.removeClass(this.getClickTarget_(),"editing")},Blockly.FieldTextInput.prototype.bindInputEvents_=function(e){this.onKeyDownWrapper_=Blockly.browserEvents.conditionalBind(e,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=Blockly.browserEvents.conditionalBind(e,"input",this,this.onHtmlInputChange_)},Blockly.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&(Blockly.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(Blockly.browserEvents.unbind(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},Blockly.FieldTextInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode==Blockly.utils.KeyCodes.ENTER?(Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation()):e.keyCode==Blockly.utils.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation()):e.keyCode==Blockly.utils.KeyCodes.TAB&&(Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())},Blockly.FieldTextInput.GECKO_KEYCODE_WHITELIST=[97,99,118,120],Blockly.FieldTextInput.prototype.onHtmlInputChange_=function(e){(e=this.htmlInput_.value)!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=e,Blockly.Events.setGroup(!0),e=this.getValueFromEditorText_(e),this.setValue(e),this.forceRerender(),this.resizeEditor_(),Blockly.Events.setGroup(!1)),this.text_=this.htmlInput_.value,this.forceRerender(),Blockly.Events.setGroup(!1),this.resizeEditor_()},Blockly.FieldTextInput.prototype.focus=function(){this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select()},Blockly.FieldTextInput.prototype.setEditorValue_=function(e){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e)},Blockly.FieldTextInput.prototype.resizeEditor_=function(){var e=Blockly.WidgetDiv.DIV,t=this.getScaledBBox();e.style.width=t.right-t.left+"px",e.style.height=t.bottom-t.top+"px",t=new Blockly.utils.Coordinate(this.sourceBlock_.RTL?t.right-e.offsetWidth:t.left,t.top),e.style.left=t.x+"px",e.style.top=t.y+"px"},Blockly.FieldTextInput.prototype.isTabNavigable=function(){return!0},Blockly.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},Blockly.FieldTextInput.prototype.getEditorText_=function(e){return String(e)},Blockly.FieldTextInput.prototype.getValueFromEditorText_=function(e){return e},Blockly.fieldRegistry.register("field_input",Blockly.FieldTextInput),Blockly.FieldAngle=function(e,t,n){this.clockwise_=Blockly.FieldAngle.CLOCKWISE,this.offset_=Blockly.FieldAngle.OFFSET,this.wrap_=Blockly.FieldAngle.WRAP,this.round_=Blockly.FieldAngle.ROUND,Blockly.FieldAngle.superClass_.constructor.call(this,e,t,n),this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.line_=this.gauge_=this.editor_=null,this.addArgType("angle")},Blockly.utils.object.inherits(Blockly.FieldAngle,Blockly.FieldTextInput),Blockly.FieldAngle.prototype.DEFAULT_VALUE=0,Blockly.FieldAngle.fromJson=function(e){return new Blockly.FieldAngle(e.angle,void 0,e)},Blockly.FieldAngle.prototype.SERIALIZABLE=!0,Blockly.FieldAngle.ROUND=15,Blockly.FieldAngle.HALF=60,Blockly.FieldAngle.CLOCKWISE=!0,Blockly.FieldAngle.OFFSET=90,Blockly.FieldAngle.WRAP=180,Blockly.FieldAngle.HANDLE_RADIUS=10,Blockly.FieldAngle.ARROW_WIDTH=Blockly.FieldAngle.HANDLE_RADIUS,Blockly.FieldAngle.RADIUS=Blockly.FieldAngle.HALF-Blockly.FieldAngle.HANDLE_RADIUS-1,Blockly.FieldAngle.CENTER_RADIUS=2,Blockly.FieldAngle.ARROW_SVG_DATAURI="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgd2lkdGg9IjhweCIKICAgaGVpZ2h0PSIxMHB4IgogICB2aWV3Qm94PSIwIDAgOCAxMCIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0ic3ZnMiIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMC45MSByMTM3MjUiCiAgIHNvZGlwb2RpOmRvY25hbWU9ImFycm93LnN2ZyI+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhMTYiPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMSIKICAgICBvYmplY3R0b2xlcmFuY2U9IjEwIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwIgogICAgIGd1aWRldG9sZXJhbmNlPSIxMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTE3OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI3MTAiCiAgICAgaWQ9Im5hbWVkdmlldzE0IgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp6b29tPSIyMy42IgogICAgIGlua3NjYXBlOmN4PSI0IgogICAgIGlua3NjYXBlOmN5PSI1IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnMiIgLz4KICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzLjIgKDM5MDY5KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICA8dGl0bGUKICAgICBpZD0idGl0bGU0Ij5hcnJvdzwvdGl0bGU+CiAgPGRlc2MKICAgICBpZD0iZGVzYzYiPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM4IiAvPgogIDxnCiAgICAgaWQ9IlBhZ2UtMSIKICAgICBzdHJva2U9Im5vbmUiCiAgICAgc3Ryb2tlLXdpZHRoPSIxIgogICAgIGZpbGw9Im5vbmUiCiAgICAgZmlsbC1ydWxlPSJldmVub2RkIgogICAgIHRyYW5zZm9ybT0icm90YXRlKDkwLCA0LCA1KSIKICAgICBzdHlsZT0iZmlsbDojMDAwMDAwIj4KICAgIDxnCiAgICAgICBpZD0iYXJyb3ciCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNC4wMDAwMDAsIC0zLjAwMDAwMCkiCiAgICAgICBmaWxsPSIjNEM5N0ZGIgogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMCI+CiAgICAgIDxwYXRoCiAgICAgICAgIGQ9Ik04LjAxODkxMDgzLDYuNjgyMjMwNTUgTDMuNTA5OTE2MDEsNy40MzM3Mjk2OSBDMy4yNDY3OTEzMSw3LjQ3NzU4MzggMy4wMTg5MTA4Myw3LjczOTQyMTUxIDMuMDE4OTEwODMsOC4wMTU1NjM4OCBDMy4wMTg5MTA4Myw4LjI4MzYzMDI5IDMuMjM4NzQxMzQsOC41NTIyMDIzIDMuNTA5OTE2MDEsOC41OTczOTgwOCBMOC4wMTg5MTA4Myw5LjM0ODg5NzIyIEw4LjAxODkxMDgzLDExLjAxODUzMzcgQzguMDE4OTEwODMsMTEuNTYyNTI3NiA4LjM4MzI2Njg2LDExLjc1MjAwMzIgOC44MzI3MjI3OSwxMS40MjY4ODQ3IEwxMi42NDEwMTc2LDguNjcyMTE1ODcgQzEzLjA5ODE2MzgsOC4zNDE0MzQ1NSAxMy4wOTU3MjIzLDcuODE0NzA1MTggMTIuNjUyNzQxMSw3LjQ4MzIwODA2IEw4LjgyMDk5OTM2LDQuNjE1NzkyNTMgQzguMzc1NTc2NjQsNC4yODI0NjgzOCA4LjAxODkxMDgzLDQuNDYxOTQ5NDggOC4wMTg5MTA4Myw1LjAxMjU5NDAyIEw4LjAxODkxMDgzLDYuNjgyMjMwNTUgWiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOC4wMDE2NzMsIDguMDE3MjM3KSByb3RhdGUoLTkwLjAwMDAwMCkgdHJhbnNsYXRlKC04LjAwMTY3MywgLTguMDE3MjM3KSAiCiAgICAgICAgIGlkPSJwYXRoMTIiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDAiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K",Blockly.FieldAngle.prototype.configure_=function(e){switch(Blockly.FieldAngle.superClass_.configure_.call(this,e),e.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var t=e.clockwise;"boolean"==typeof t&&(this.clockwise_=t),null!=(t=e.offset)&&(t=Number(t),isNaN(t)||(this.offset_=t)),null!=(t=e.wrap)&&(t=Number(t),isNaN(t)||(this.wrap_=t)),null!=(e=e.round)&&(e=Number(e),isNaN(e)||(this.round_=e))},Blockly.FieldAngle.prototype.initView=function(){Blockly.FieldAngle.superClass_.initView.call(this),this.symbol_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("")),this.textElement_.appendChild(this.symbol_)},Blockly.FieldAngle.prototype.render_=function(){Blockly.FieldAngle.superClass_.render_.call(this),this.updateGraph_()},Blockly.FieldAngle.prototype.showEditor_=function(e){Blockly.FieldAngle.superClass_.showEditor_.call(this,e,Blockly.utils.userAgent.MOBILE||Blockly.utils.userAgent.ANDROID||Blockly.utils.userAgent.IPAD),this.dropdownCreate_(),Blockly.DropDownDiv.getContentDiv().appendChild(this.editor_),Blockly.DropDownDiv.setColour(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),Blockly.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},Blockly.FieldAngle.prototype.dropdownCreate_=function(){var e=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.SVG,{xmlns:Blockly.utils.dom.SVG_NS,"xmlns:html":Blockly.utils.dom.HTML_NS,"xmlns:xlink":Blockly.utils.dom.XLINK_NS,version:"1.1",height:2*Blockly.FieldAngle.HALF+"px",width:2*Blockly.FieldAngle.HALF+"px",style:"touch-action: none"},null),t=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CIRCLE,{cx:Blockly.FieldAngle.HALF,cy:Blockly.FieldAngle.HALF,r:Blockly.FieldAngle.RADIUS,class:"blocklyAngleCircle"},e);this.gauge_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{class:"blocklyAngleGauge"},e),this.line_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{x1:Blockly.FieldAngle.HALF,y1:Blockly.FieldAngle.HALF,class:"blocklyAngleLine"},e);for(var n=0;360>n;n+=15)Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.LINE,{x1:Blockly.FieldAngle.HALF+Blockly.FieldAngle.RADIUS,y1:Blockly.FieldAngle.HALF,x2:Blockly.FieldAngle.HALF+Blockly.FieldAngle.RADIUS-(0==n%45?10:5),y2:Blockly.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+n+","+Blockly.FieldAngle.HALF+","+Blockly.FieldAngle.HALF+")"},e);Blockly.utils.dom.createSvgElement("circle",{cx:Blockly.FieldAngle.HALF,cy:Blockly.FieldAngle.HALF,r:Blockly.FieldAngle.CENTER_RADIUS,class:"blocklyAngleCenterPoint"},e),this.handle_=Blockly.utils.dom.createSvgElement("g",{},e),Blockly.utils.dom.createSvgElement("circle",{cx:0,cy:0,r:Blockly.FieldAngle.HANDLE_RADIUS,class:"blocklyAngleDragHandle"},this.handle_),this.arrowSvg_=Blockly.utils.dom.createSvgElement("image",{width:Blockly.FieldAngle.ARROW_WIDTH,height:Blockly.FieldAngle.ARROW_WIDTH,x:-Blockly.FieldAngle.ARROW_WIDTH/2,y:-Blockly.FieldAngle.ARROW_WIDTH/2},this.handle_),this.arrowSvg_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.FieldAngle.ARROW_SVG_DATAURI),this.clickWrapper_=Blockly.browserEvents.conditionalBind(e,"click",this,this.hide_),this.clickSurfaceWrapper_=Blockly.browserEvents.conditionalBind(t,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=Blockly.browserEvents.conditionalBind(t,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=e},Blockly.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&(Blockly.browserEvents.unbind(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&(Blockly.browserEvents.unbind(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&(Blockly.browserEvents.unbind(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},Blockly.FieldAngle.prototype.onMouseUp=function(){Blockly.unbindEvent_(this.mouseMoveWrapper_),Blockly.unbindEvent_(this.mouseUpWrapper_)},Blockly.FieldAngle.prototype.onMouseMove_=function(e){var t=this.gauge_.ownerSVGElement.getBoundingClientRect(),n=e.clientX-t.left-Blockly.FieldAngle.HALF;e=e.clientY-t.top-Blockly.FieldAngle.HALF,t=Math.atan(-e/n),isNaN(t)||(t=Blockly.utils.math.toDegrees(t),0>n?t+=180:0<e&&(t+=360),t=this.clockwise_?this.offset_+360-t:360-(this.offset_-t),this.displayMouseOrKeyboardValue_(t))},Blockly.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(e){this.round_&&(e=Math.round(e/this.round_)*this.round_),(e=this.wrapValue_(e))!=this.value_&&this.setEditorValue_(e)},Blockly.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var e=Number(this.getText())+this.offset_,t=Blockly.utils.math.toRadians(e%360);e=["M ",Blockly.FieldAngle.HALF,",",Blockly.FieldAngle.HALF];var n=Blockly.FieldAngle.HALF,o=Blockly.FieldAngle.HALF;if(!isNaN(t)){var r=Number(this.clockwise_),i=Blockly.utils.math.toRadians(this.offset_),s=Math.cos(i)*Blockly.FieldAngle.RADIUS,a=Math.sin(i)*-Blockly.FieldAngle.RADIUS;r&&(t=2*i-t),n+=Math.cos(t)*Blockly.FieldAngle.RADIUS,o-=Math.sin(t)*Blockly.FieldAngle.RADIUS,t=Math.abs(Math.floor((t-i)/Math.PI)%2),r&&(t=1-t),e.push(" l ",s,",",a," A ",Blockly.FieldAngle.RADIUS,",",Blockly.FieldAngle.RADIUS," 0 ",t," ",r," ",n,",",o," z")}this.gauge_.setAttribute("d",e.join("")),this.line_.setAttribute("x2",n),this.line_.setAttribute("y2",o),this.handle_.setAttribute("transform","translate("+n+","+o+")")}},Blockly.FieldAngle.prototype.onHtmlInputKeyDown_=function(e){var t;if(Blockly.FieldAngle.superClass_.onHtmlInputKeyDown_.call(this,e),e.keyCode===Blockly.utils.KeyCodes.LEFT?t=this.sourceBlock_.RTL?1:-1:e.keyCode===Blockly.utils.KeyCodes.RIGHT?t=this.sourceBlock_.RTL?-1:1:e.keyCode===Blockly.utils.KeyCodes.DOWN?t=-1:e.keyCode===Blockly.utils.KeyCodes.UP&&(t=1),t){var n=this.getValue();this.displayMouseOrKeyboardValue_(n+t*this.round_),e.preventDefault(),e.stopPropagation()}},Blockly.FieldAngle.prototype.doClassValidation_=function(e){return e=Number(e),isNaN(e)||!isFinite(e)?null:this.wrapValue_(e)},Blockly.FieldAngle.prototype.wrapValue_=function(e){return 0>(e%=360)&&(e+=360),e>this.wrap_&&(e-=360),e},Blockly.Css.register(".blocklyAngleCenterPoint {,stroke: #fff;,stroke-width: 1;,fill: #fff;,},.blocklyAngleDragHandle {,stroke: #fff;,stroke-width: 5;,stroke-opacity: 0.25;,fill: #fff;,cursor: pointer;,},.blocklyAngleMarks {,stroke: #fff;,stroke-width: 1;,stroke-opacity: 0.5;,},.blocklyAngleGauge {,fill: #fff;,fill-opacity: 0.20;,},.blocklyAngleLine {,stroke: #fff;,stroke-width: 1;,stroke-linecap: round;,pointer-events: none;,}".split(",")),Blockly.fieldRegistry.register("field_angle",Blockly.FieldAngle),Blockly.FieldCheckbox=function(e,t,n){this.checkChar_=null,Blockly.FieldCheckbox.superClass_.constructor.call(this,e,t,n),this.addArgType("checkbox")},Blockly.utils.object.inherits(Blockly.FieldCheckbox,Blockly.Field),Blockly.FieldCheckbox.prototype.DEFAULT_VALUE=!1,Blockly.FieldCheckbox.fromJson=function(e){return new Blockly.FieldCheckbox(e.checked,void 0,e)},Blockly.FieldCheckbox.CHECK_CHAR="",Blockly.FieldCheckbox.prototype.SERIALIZABLE=!0,Blockly.FieldCheckbox.prototype.CURSOR="default",Blockly.FieldCheckbox.prototype.configure_=function(e){Blockly.FieldCheckbox.superClass_.configure_.call(this,e),e.checkCharacter&&(this.checkChar_=e.checkCharacter)},Blockly.FieldCheckbox.prototype.initView=function(){Blockly.FieldCheckbox.superClass_.initView.call(this),Blockly.utils.dom.addClass(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},Blockly.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},Blockly.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_||Blockly.FieldCheckbox.CHECK_CHAR},Blockly.FieldCheckbox.prototype.setCheckCharacter=function(e){this.checkChar_=e,this.forceRerender()},Blockly.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},Blockly.FieldCheckbox.prototype.doClassValidation_=function(e){return!0===e||"TRUE"===e?"TRUE":!1===e||"FALSE"===e?"FALSE":null},Blockly.FieldCheckbox.prototype.doValueUpdate_=function(e){this.value_=this.convertValueToBool_(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},Blockly.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},Blockly.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},Blockly.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},Blockly.FieldCheckbox.prototype.convertValueToBool_=function(e){return"string"==typeof e?"TRUE"==e:!!e},Blockly.fieldRegistry.register("field_checkbox",Blockly.FieldCheckbox),Blockly.FieldColour=function(e,t,n){Blockly.FieldColour.superClass_.constructor.call(this,e,t,n),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null,this.addArgType("colour")},Blockly.utils.object.inherits(Blockly.FieldColour,Blockly.Field),Blockly.FieldColour.fromJson=function(e){return new Blockly.FieldColour(e.colour,void 0,e)},Blockly.FieldColour.prototype.SERIALIZABLE=!0,Blockly.FieldColour.prototype.CURSOR="default",Blockly.FieldColour.prototype.isDirty_=!1,Blockly.FieldColour.prototype.colours_=null,Blockly.FieldColour.prototype.titles_=null,Blockly.FieldColour.prototype.columns_=0,Blockly.FieldColour.prototype.configure_=function(e){Blockly.FieldColour.superClass_.configure_.call(this,e),e.colourOptions&&(this.colours_=e.colourOptions,this.titles_=e.colourTitles),e.columns&&(this.columns_=e.columns)},Blockly.FieldColour.prototype.initView=function(){this.size_=new Blockly.utils.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},Blockly.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},Blockly.FieldColour.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:Blockly.utils.colour.parse(e)},Blockly.FieldColour.prototype.doValueUpdate_=function(e){this.value_=e,this.borderRect_?this.borderRect_.style.fill=e:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",e),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},Blockly.FieldColour.prototype.getText=function(){var e=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(e)&&(e="#"+e[1]+e[3]+e[5]),e},Blockly.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),Blockly.FieldColour.prototype.DEFAULT_VALUE=Blockly.FieldColour.COLOURS[0],Blockly.FieldColour.TITLES=[],Blockly.FieldColour.COLUMNS=7,Blockly.FieldColour.prototype.setColours=function(e,t){return this.colours_=e,t&&(this.titles_=t),this},Blockly.FieldColour.prototype.setColumns=function(e){return this.columns_=e,this},Blockly.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),Blockly.DropDownDiv.getContentDiv().appendChild(this.picker_),Blockly.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},Blockly.FieldColour.prototype.onClick_=function(e){null!==(e=(e=e.target)&&e.label)&&(this.setValue(e),Blockly.DropDownDiv.hideIfOwner(this))},Blockly.FieldColour.prototype.onKeyDown_=function(e){var t=!1;e.keyCode===Blockly.utils.KeyCodes.UP?(this.moveHighlightBy_(0,-1),t=!0):e.keyCode===Blockly.utils.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),t=!0):e.keyCode===Blockly.utils.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),t=!0):e.keyCode===Blockly.utils.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),t=!0):e.keyCode===Blockly.utils.KeyCodes.ENTER&&((t=this.getHighlighted_())&&(null!==(t=t&&t.label)&&this.setValue(t)),Blockly.DropDownDiv.hideWithoutAnimation(),t=!0),t&&e.stopPropagation()},Blockly.FieldColour.prototype.moveHighlightBy_=function(e,t){var n=this.colours_||Blockly.FieldColour.COLOURS,o=this.columns_||Blockly.FieldColour.COLUMNS,r=this.highlightedIndex_%o,i=Math.floor(this.highlightedIndex_/o);r+=e,i+=t,0>e?0>r&&0<i?(r=o-1,i--):0>r&&(r=0):0<e?r>o-1&&i<Math.floor(n.length/o)-1?(r=0,i++):r>o-1&&r--:0>t?0>i&&(i=0):0<t&&i>Math.floor(n.length/o)-1&&(i=Math.floor(n.length/o)-1),this.setHighlightedCell_(this.picker_.childNodes[i].childNodes[r],i*o+r)},Blockly.FieldColour.prototype.onMouseMove_=function(e){var t=(e=e.target)&&Number(e.getAttribute("data-index"));null!==t&&t!==this.highlightedIndex_&&this.setHighlightedCell_(e,t)},Blockly.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},Blockly.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var e=this.getHighlighted_();e&&Blockly.utils.dom.removeClass(e,"blocklyColourHighlighted")},Blockly.FieldColour.prototype.getHighlighted_=function(){var e=this.columns_||Blockly.FieldColour.COLUMNS,t=this.picker_.childNodes[Math.floor(this.highlightedIndex_/e)];return t?t.childNodes[this.highlightedIndex_%e]:null},Blockly.FieldColour.prototype.setHighlightedCell_=function(e,t){var n=this.getHighlighted_();n&&Blockly.utils.dom.removeClass(n,"blocklyColourHighlighted"),Blockly.utils.dom.addClass(e,"blocklyColourHighlighted"),this.highlightedIndex_=t,Blockly.utils.aria.setState(this.picker_,Blockly.utils.aria.State.ACTIVEDESCENDANT,e.getAttribute("id"))},Blockly.FieldColour.prototype.dropdownCreate_=function(){var e=this.columns_||Blockly.FieldColour.COLUMNS,t=this.colours_||Blockly.FieldColour.COLOURS,n=this.titles_||Blockly.FieldColour.TITLES,o=this.getValue(),r=document.createElement("table");r.className="blocklyColourTable",r.tabIndex=0,r.dir="ltr",Blockly.utils.aria.setRole(r,Blockly.utils.aria.Role.GRID),Blockly.utils.aria.setState(r,Blockly.utils.aria.State.EXPANDED,!0),Blockly.utils.aria.setState(r,Blockly.utils.aria.State.ROWCOUNT,Math.floor(t.length/e)),Blockly.utils.aria.setState(r,Blockly.utils.aria.State.COLCOUNT,e);for(var i,s=0;s<t.length;s++){0==s%e&&(i=document.createElement("tr"),Blockly.utils.aria.setRole(i,Blockly.utils.aria.Role.ROW),r.appendChild(i));var a=document.createElement("td");i.appendChild(a),a.label=t[s],a.title=n[s]||t[s],a.id=Blockly.utils.IdGenerator.getNextUniqueId(),a.setAttribute("data-index",s),Blockly.utils.aria.setRole(a,Blockly.utils.aria.Role.GRIDCELL),Blockly.utils.aria.setState(a,Blockly.utils.aria.State.LABEL,t[s]),Blockly.utils.aria.setState(a,Blockly.utils.aria.State.SELECTED,t[s]==o),a.style.backgroundColor=t[s],t[s]==o&&(a.className="blocklyColourSelected",this.highlightedIndex_=s)}this.onClickWrapper_=Blockly.browserEvents.conditionalBind(r,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=Blockly.browserEvents.conditionalBind(r,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=Blockly.browserEvents.conditionalBind(r,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=Blockly.browserEvents.conditionalBind(r,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=Blockly.browserEvents.conditionalBind(r,"keydown",this,this.onKeyDown_),this.picker_=r},Blockly.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&(Blockly.browserEvents.unbind(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&(Blockly.browserEvents.unbind(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&(Blockly.browserEvents.unbind(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&(Blockly.browserEvents.unbind(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&(Blockly.browserEvents.unbind(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},Blockly.Css.register([".blocklyColourTable {","outline: none;","border-radius: 11px;","border-collapse: separate;","border-spacing: 4px;","}",".blocklyColourTable > tr > td {","height: 22px;","width: 22px;","margin: 0;","border: 0;","text-align: center;","cursor: pointer;","border-radius: 4px;","border: 2px solid rgba(0,0,0,.1);","}",".blocklyColourTable > tr > td:hover {","border: 1px solid #FFF;","box-sizing: border-box;","}",".blocklyColourTable > tr > td.blocklyColourSelected {","border: 1px solid #000;","box-sizing: border-box;","color: #fff;","}",".blocklyColourTable>tr>td.blocklyColourHighlighted {","border-color: #eee;","box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);","position: relative;","}",".blocklyColourSelected, .blocklyColourSelected:hover {","border-color: #eee !important;","outline: 1px solid #333;","position: relative;","}"]),Blockly.fieldRegistry.register("field_colour",Blockly.FieldColour),goog.Thenable=function(){},goog.Thenable.prototype.then=function(e,t,n){},goog.Thenable.IMPLEMENTED_BY_PROP="$goog_Thenable",goog.Thenable.addImplementation=function(e){COMPILED?e.prototype[goog.Thenable.IMPLEMENTED_BY_PROP]=!0:e.prototype.$goog_Thenable=!0},goog.Thenable.isImplementedBy=function(e){if(!e)return!1;try{return COMPILED?!!e[goog.Thenable.IMPLEMENTED_BY_PROP]:!!e.$goog_Thenable}catch(e){return!1}},goog.async={},goog.async.FreeList=function(e,t,n){this.limit_=n,this.create_=e,this.reset_=t,this.occupants_=0,this.head_=null},goog.async.FreeList.prototype.get=function(){if(0<this.occupants_){this.occupants_--;var e=this.head_;this.head_=e.next,e.next=null}else e=this.create_();return e},goog.async.FreeList.prototype.put=function(e){this.reset_(e),this.occupants_<this.limit_&&(this.occupants_++,e.next=this.head_,this.head_=e)},goog.async.FreeList.prototype.occupants=function(){return this.occupants_},goog.async.WorkQueue=function(){this.workTail_=this.workHead_=null},goog.async.WorkQueue.DEFAULT_MAX_UNUSED=100,goog.async.WorkQueue.freelist_=new goog.async.FreeList((function(){return new goog.async.WorkItem}),(function(e){e.reset()}),goog.async.WorkQueue.DEFAULT_MAX_UNUSED),goog.async.WorkQueue.prototype.add=function(e,t){var n=this.getUnusedItem_();n.set(e,t),this.workTail_?this.workTail_.next=n:(goog.asserts.assert(!this.workHead_),this.workHead_=n),this.workTail_=n},goog.async.WorkQueue.prototype.remove=function(){var e=null;return this.workHead_&&(e=this.workHead_,this.workHead_=this.workHead_.next,this.workHead_||(this.workTail_=null),e.next=null),e},goog.async.WorkQueue.prototype.returnUnused=function(e){goog.async.WorkQueue.freelist_.put(e)},goog.async.WorkQueue.prototype.getUnusedItem_=function(){return goog.async.WorkQueue.freelist_.get()},goog.async.WorkItem=function(){this.next=this.scope=this.fn=null},goog.async.WorkItem.prototype.set=function(e,t){this.fn=e,this.scope=t,this.next=null},goog.async.WorkItem.prototype.reset=function(){this.next=this.scope=this.fn=null},goog.async.throwException=function(e){goog.global.setTimeout((function(){throw e}),0)},goog.async.nextTick=function(e,t,n){var o=e;t&&(o=goog.bind(e,t)),o=goog.async.nextTick.wrapCallback_(o),goog.isFunction(goog.global.setImmediate)&&(n||goog.async.nextTick.useSetImmediate_())?goog.global.setImmediate(o):(goog.async.nextTick.setImmediate_||(goog.async.nextTick.setImmediate_=goog.async.nextTick.getSetImmediateEmulator_()),goog.async.nextTick.setImmediate_(o))},goog.async.nextTick.useSetImmediate_=function(){return!(goog.global.Window&&goog.global.Window.prototype&&!goog.labs.userAgent.browser.isEdge()&&goog.global.Window.prototype.setImmediate==goog.global.setImmediate)},goog.async.nextTick.getSetImmediateEmulator_=function(){var e=goog.global.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!goog.labs.userAgent.engine.isPresto()&&(e=function(){var e=goog.dom.createElement("IFRAME");e.style.display="none",goog.dom.safe.setIframeSrc(e,goog.html.TrustedResourceUrl.fromConstant(goog.string.Const.EMPTY)),document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),goog.dom.safe.documentWrite(e,goog.html.SafeHtml.EMPTY),e.close();var n="callImmediate"+Math.random(),o="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=goog.bind((function(e){"*"!=o&&e.origin!=o||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,o)}}}),void 0!==e&&!goog.labs.userAgent.browser.isIE()){var t=new e,n={},o=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).cb;n.cb=null,e()}},function(e){o.next={cb:e},o=o.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in goog.dom.createElement("SCRIPT")?function(e){var t=goog.dom.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){goog.global.setTimeout(e,0)}},goog.async.nextTick.wrapCallback_=goog.functions.identity,goog.debug.entryPointRegistry.register((function(e){goog.async.nextTick.wrapCallback_=e})),goog.ASSUME_NATIVE_PROMISE=!1,goog.async.run=function(e,t){goog.async.run.schedule_||goog.async.run.initializeRunner_(),goog.async.run.workQueueScheduled_||(goog.async.run.schedule_(),goog.async.run.workQueueScheduled_=!0),goog.async.run.workQueue_.add(e,t)},goog.async.run.initializeRunner_=function(){if(goog.ASSUME_NATIVE_PROMISE||goog.global.Promise&&goog.global.Promise.resolve){var e=goog.global.Promise.resolve(void 0);goog.async.run.schedule_=function(){e.then(goog.async.run.processWorkQueue)}}else goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue)}},goog.async.run.forceNextTick=function(e){goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue),e&&e(goog.async.run.processWorkQueue)}},goog.async.run.workQueueScheduled_=!1,goog.async.run.workQueue_=new goog.async.WorkQueue,goog.DEBUG&&(goog.async.run.resetQueue=function(){goog.async.run.workQueueScheduled_=!1,goog.async.run.workQueue_=new goog.async.WorkQueue}),goog.async.run.processWorkQueue=function(){for(var e;e=goog.async.run.workQueue_.remove();){try{e.fn.call(e.scope)}catch(e){goog.async.throwException(e)}goog.async.run.workQueue_.returnUnused(e)}goog.async.run.workQueueScheduled_=!1},goog.promise={},goog.promise.Resolver=function(){},goog.Promise=function(e,t){if(this.state_=goog.Promise.State_.PENDING,this.result_=void 0,this.callbackEntriesTail_=this.callbackEntries_=this.parent_=null,this.executing_=!1,0<goog.Promise.UNHANDLED_REJECTION_DELAY?this.unhandledRejectionId_=0:0==goog.Promise.UNHANDLED_REJECTION_DELAY&&(this.hadUnhandledRejection_=!1),goog.Promise.LONG_STACK_TRACES&&(this.stack_=[],this.addStackTrace_(Error("created")),this.currentStep_=0),e!=goog.nullFunction)try{var n=this;e.call(t,(function(e){n.resolve_(goog.Promise.State_.FULFILLED,e)}),(function(e){if(goog.DEBUG&&!(e instanceof goog.Promise.CancellationError))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}n.resolve_(goog.Promise.State_.REJECTED,e)}))}catch(e){this.resolve_(goog.Promise.State_.REJECTED,e)}},goog.Promise.LONG_STACK_TRACES=!1,goog.Promise.UNHANDLED_REJECTION_DELAY=0,goog.Promise.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3},goog.Promise.CallbackEntry_=function(){this.next=this.context=this.onRejected=this.onFulfilled=this.child=null,this.always=!1},goog.Promise.CallbackEntry_.prototype.reset=function(){this.context=this.onRejected=this.onFulfilled=this.child=null,this.always=!1},goog.Promise.DEFAULT_MAX_UNUSED=100,goog.Promise.freelist_=new goog.async.FreeList((function(){return new goog.Promise.CallbackEntry_}),(function(e){e.reset()}),goog.Promise.DEFAULT_MAX_UNUSED),goog.Promise.getCallbackEntry_=function(e,t,n){var o=goog.Promise.freelist_.get();return o.onFulfilled=e,o.onRejected=t,o.context=n,o},goog.Promise.returnEntry_=function(e){goog.Promise.freelist_.put(e)},goog.Promise.resolve=function(e){if(e instanceof goog.Promise)return e;var t=new goog.Promise(goog.nullFunction);return t.resolve_(goog.Promise.State_.FULFILLED,e),t},goog.Promise.reject=function(e){return new goog.Promise((function(t,n){n(e)}))},goog.Promise.resolveThen_=function(e,t,n){goog.Promise.maybeThen_(e,t,n,null)||goog.async.run(goog.partial(t,e))},goog.Promise.race=function(e){return new goog.Promise((function(t,n){e.length||t(void 0);for(var o,r=0;r<e.length;r++)o=e[r],goog.Promise.resolveThen_(o,t,n)}))},goog.Promise.all=function(e){return new goog.Promise((function(t,n){var o=e.length,r=[];if(o)for(var i,s=function(e,n){o--,r[e]=n,0==o&&t(r)},a=function(e){n(e)},l=0;l<e.length;l++)i=e[l],goog.Promise.resolveThen_(i,goog.partial(s,l),a);else t(r)}))},goog.Promise.allSettled=function(e){return new goog.Promise((function(t,n){var o=e.length,r=[];if(o){n=function(e,n,i){o--,r[e]=n?{fulfilled:!0,value:i}:{fulfilled:!1,reason:i},0==o&&t(r)};for(var i,s=0;s<e.length;s++)i=e[s],goog.Promise.resolveThen_(i,goog.partial(n,s,!0),goog.partial(n,s,!1))}else t(r)}))},goog.Promise.firstFulfilled=function(e){return new goog.Promise((function(t,n){var o=e.length,r=[];if(o)for(var i,s=function(e){t(e)},a=function(e,t){o--,r[e]=t,0==o&&n(r)},l=0;l<e.length;l++)i=e[l],goog.Promise.resolveThen_(i,s,goog.partial(a,l));else t(void 0)}))},goog.Promise.withResolver=function(){var e,t,n=new goog.Promise((function(n,o){e=n,t=o}));return new goog.Promise.Resolver_(n,e,t)},goog.Promise.prototype.then=function(e,t,n){return null!=e&&goog.asserts.assertFunction(e,"opt_onFulfilled should be a function."),null!=t&&goog.asserts.assertFunction(t,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("then")),this.addChildPromise_(goog.isFunction(e)?e:null,goog.isFunction(t)?t:null,n)},goog.Thenable.addImplementation(goog.Promise),goog.Promise.prototype.thenVoid=function(e,t,n){null!=e&&goog.asserts.assertFunction(e,"opt_onFulfilled should be a function."),null!=t&&goog.asserts.assertFunction(t,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("then")),this.addCallbackEntry_(goog.Promise.getCallbackEntry_(e||goog.nullFunction,t||null,n))},goog.Promise.prototype.thenAlways=function(e,t){return goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("thenAlways")),(e=goog.Promise.getCallbackEntry_(e,e,t)).always=!0,this.addCallbackEntry_(e),this},goog.Promise.prototype.thenCatch=function(e,t){return goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("thenCatch")),this.addChildPromise_(null,e,t)},goog.Promise.prototype.cancel=function(e){if(this.state_==goog.Promise.State_.PENDING){var t=new goog.Promise.CancellationError(e);goog.async.run((function(){this.cancelInternal_(t)}),this)}},goog.Promise.prototype.cancelInternal_=function(e){this.state_==goog.Promise.State_.PENDING&&(this.parent_?(this.parent_.cancelChild_(this,e),this.parent_=null):this.resolve_(goog.Promise.State_.REJECTED,e))},goog.Promise.prototype.cancelChild_=function(e,t){if(this.callbackEntries_){for(var n=0,o=null,r=null,i=this.callbackEntries_;i&&(i.always||(n++,i.child==e&&(o=i),!(o&&1<n)));i=i.next)o||(r=i);o&&(this.state_==goog.Promise.State_.PENDING&&1==n?this.cancelInternal_(t):(r?this.removeEntryAfter_(r):this.popEntry_(),this.executeCallback_(o,goog.Promise.State_.REJECTED,t)))}},goog.Promise.prototype.addCallbackEntry_=function(e){this.hasEntry_()||this.state_!=goog.Promise.State_.FULFILLED&&this.state_!=goog.Promise.State_.REJECTED||this.scheduleCallbacks_(),this.queueEntry_(e)},goog.Promise.prototype.addChildPromise_=function(e,t,n){var o=goog.Promise.getCallbackEntry_(null,null,null);return o.child=new goog.Promise((function(r,i){o.onFulfilled=e?function(t){try{var o=e.call(n,t);r(o)}catch(e){i(e)}}:r,o.onRejected=t?function(e){try{var o=t.call(n,e);void 0===o&&e instanceof goog.Promise.CancellationError?i(e):r(o)}catch(e){i(e)}}:i})),o.child.parent_=this,this.addCallbackEntry_(o),o.child},goog.Promise.prototype.unblockAndFulfill_=function(e){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED),this.state_=goog.Promise.State_.PENDING,this.resolve_(goog.Promise.State_.FULFILLED,e)},goog.Promise.prototype.unblockAndReject_=function(e){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED),this.state_=goog.Promise.State_.PENDING,this.resolve_(goog.Promise.State_.REJECTED,e)},goog.Promise.prototype.resolve_=function(e,t){this.state_==goog.Promise.State_.PENDING&&(this===t&&(e=goog.Promise.State_.REJECTED,t=new TypeError("Promise cannot resolve to itself")),this.state_=goog.Promise.State_.BLOCKED,goog.Promise.maybeThen_(t,this.unblockAndFulfill_,this.unblockAndReject_,this)||(this.result_=t,this.state_=e,this.parent_=null,this.scheduleCallbacks_(),e!=goog.Promise.State_.REJECTED||t instanceof goog.Promise.CancellationError||goog.Promise.addUnhandledRejection_(this,t)))},goog.Promise.maybeThen_=function(e,t,n,o){if(e instanceof goog.Promise)return e.thenVoid(t,n,o),!0;if(goog.Thenable.isImplementedBy(e))return e.then(t,n,o),!0;if(goog.isObject(e))try{var r=e.then;if(goog.isFunction(r))return goog.Promise.tryThen_(e,r,t,n,o),!0}catch(e){return n.call(o,e),!0}return!1},goog.Promise.tryThen_=function(e,t,n,o,r){var i=!1,s=function(e){i||(i=!0,o.call(r,e))};try{t.call(e,(function(e){i||(i=!0,n.call(r,e))}),s)}catch(e){s(e)}},goog.Promise.prototype.scheduleCallbacks_=function(){this.executing_||(this.executing_=!0,goog.async.run(this.executeCallbacks_,this))},goog.Promise.prototype.hasEntry_=function(){return!!this.callbackEntries_},goog.Promise.prototype.queueEntry_=function(e){goog.asserts.assert(null!=e.onFulfilled),this.callbackEntriesTail_?this.callbackEntriesTail_.next=e:this.callbackEntries_=e,this.callbackEntriesTail_=e},goog.Promise.prototype.popEntry_=function(){var e=null;return this.callbackEntries_&&(e=this.callbackEntries_,this.callbackEntries_=e.next,e.next=null),this.callbackEntries_||(this.callbackEntriesTail_=null),null!=e&&goog.asserts.assert(null!=e.onFulfilled),e},goog.Promise.prototype.removeEntryAfter_=function(e){goog.asserts.assert(this.callbackEntries_),goog.asserts.assert(null!=e),e.next==this.callbackEntriesTail_&&(this.callbackEntriesTail_=e),e.next=e.next.next},goog.Promise.prototype.executeCallbacks_=function(){for(var e;e=this.popEntry_();)goog.Promise.LONG_STACK_TRACES&&this.currentStep_++,this.executeCallback_(e,this.state_,this.result_);this.executing_=!1},goog.Promise.prototype.executeCallback_=function(e,t,n){if(t==goog.Promise.State_.REJECTED&&e.onRejected&&!e.always&&this.removeUnhandledRejection_(),e.child)e.child.parent_=null,goog.Promise.invokeCallback_(e,t,n);else try{e.always?e.onFulfilled.call(e.context):goog.Promise.invokeCallback_(e,t,n)}catch(e){goog.Promise.handleRejection_.call(null,e)}goog.Promise.returnEntry_(e)},goog.Promise.invokeCallback_=function(e,t,n){t==goog.Promise.State_.FULFILLED?e.onFulfilled.call(e.context,n):e.onRejected&&e.onRejected.call(e.context,n)},goog.Promise.prototype.addStackTrace_=function(e){if(goog.Promise.LONG_STACK_TRACES&&"string"==typeof e.stack){var t=e.stack.split("\n",4)[3];e=e.message,e+=Array(11-e.length).join(" "),this.stack_.push(e+t)}},goog.Promise.prototype.appendLongStack_=function(e){if(goog.Promise.LONG_STACK_TRACES&&e&&"string"==typeof e.stack&&this.stack_.length){for(var t=["Promise trace:"],n=this;n;n=n.parent_){for(var o=this.currentStep_;0<=o;o--)t.push(n.stack_[o]);t.push("Value: ["+(n.state_==goog.Promise.State_.REJECTED?"REJECTED":"FULFILLED")+"] <"+String(n.result_)+">")}e.stack+="\n\n"+t.join("\n")}},goog.Promise.prototype.removeUnhandledRejection_=function(){if(0<goog.Promise.UNHANDLED_REJECTION_DELAY)for(var e=this;e&&e.unhandledRejectionId_;e=e.parent_)goog.global.clearTimeout(e.unhandledRejectionId_),e.unhandledRejectionId_=0;else if(0==goog.Promise.UNHANDLED_REJECTION_DELAY)for(e=this;e&&e.hadUnhandledRejection_;e=e.parent_)e.hadUnhandledRejection_=!1},goog.Promise.addUnhandledRejection_=function(e,t){0<goog.Promise.UNHANDLED_REJECTION_DELAY?e.unhandledRejectionId_=goog.global.setTimeout((function(){e.appendLongStack_(t),goog.Promise.handleRejection_.call(null,t)}),goog.Promise.UNHANDLED_REJECTION_DELAY):0==goog.Promise.UNHANDLED_REJECTION_DELAY&&(e.hadUnhandledRejection_=!0,goog.async.run((function(){e.hadUnhandledRejection_&&(e.appendLongStack_(t),goog.Promise.handleRejection_.call(null,t))})))},goog.Promise.handleRejection_=goog.async.throwException,goog.Promise.setUnhandledRejectionHandler=function(e){goog.Promise.handleRejection_=e},goog.Promise.CancellationError=function(e){goog.debug.Error.call(this,e)},goog.inherits(goog.Promise.CancellationError,goog.debug.Error),goog.Promise.CancellationError.prototype.name="cancel",goog.Promise.Resolver_=function(e,t,n){this.promise=e,this.resolve=t,this.reject=n},goog.Timer=function(e,t){goog.events.EventTarget.call(this),this.interval_=e||1,this.timerObject_=t||goog.Timer.defaultTimerObject,this.boundTick_=goog.bind(this.tick_,this),this.last_=goog.now()},goog.inherits(goog.Timer,goog.events.EventTarget),goog.Timer.MAX_TIMEOUT_=2147483647,goog.Timer.INVALID_TIMEOUT_ID_=-1,goog.Timer.prototype.enabled=!1,goog.Timer.defaultTimerObject=goog.global,goog.Timer.intervalScale=.8,goog.Timer.prototype.timer_=null,goog.Timer.prototype.getInterval=function(){return this.interval_},goog.Timer.prototype.setInterval=function(e){this.interval_=e,this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()},goog.Timer.prototype.tick_=function(){if(this.enabled){var e=goog.now()-this.last_;0<e&&e<this.interval_*goog.Timer.intervalScale?this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-e):(this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null),this.dispatchTick(),this.enabled&&(this.stop(),this.start()))}},goog.Timer.prototype.dispatchTick=function(){this.dispatchEvent(goog.Timer.TICK)},goog.Timer.prototype.start=function(){this.enabled=!0,this.timer_||(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now())},goog.Timer.prototype.stop=function(){this.enabled=!1,this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null)},goog.Timer.prototype.disposeInternal=function(){goog.Timer.superClass_.disposeInternal.call(this),this.stop(),delete this.timerObject_},goog.Timer.TICK="tick",goog.Timer.callOnce=function(e,t,n){if(goog.isFunction(e))n&&(e=goog.bind(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=goog.bind(e.handleEvent,e)}return Number(t)>goog.Timer.MAX_TIMEOUT_?goog.Timer.INVALID_TIMEOUT_ID_:goog.Timer.defaultTimerObject.setTimeout(e,t||0)},goog.Timer.clear=function(e){goog.Timer.defaultTimerObject.clearTimeout(e)},goog.Timer.promise=function(e,t){var n=null;return new goog.Promise((function(o,r){(n=goog.Timer.callOnce((function(){o(t)}),e))==goog.Timer.INVALID_TIMEOUT_ID_&&r(Error("Failed to schedule timer."))})).thenCatch((function(e){throw goog.Timer.clear(n),e}))},goog.events.MouseWheelHandler=function(e,t){goog.events.EventTarget.call(this),this.element_=e,e=goog.dom.isElement(this.element_)?this.element_:this.element_?this.element_.body:null,this.isRtl_=!!e&&goog.style.isRightToLeft(e),this.listenKey_=goog.events.listen(this.element_,goog.userAgent.GECKO?"DOMMouseScroll":"mousewheel",this,t)},goog.inherits(goog.events.MouseWheelHandler,goog.events.EventTarget),goog.events.MouseWheelHandler.EventType={MOUSEWHEEL:"mousewheel"},goog.events.MouseWheelHandler.prototype.setMaxDeltaX=function(e){this.maxDeltaX_=e},goog.events.MouseWheelHandler.prototype.setMaxDeltaY=function(e){this.maxDeltaY_=e},goog.events.MouseWheelHandler.prototype.handleEvent=function(e){var t=0,n=0,o=e.getBrowserEvent();"mousewheel"==o.type?(e=goog.events.MouseWheelHandler.smartScale_(-o.wheelDelta,40),void 0!==o.wheelDeltaX?(t=goog.events.MouseWheelHandler.smartScale_(-o.wheelDeltaX,40),n=goog.events.MouseWheelHandler.smartScale_(-o.wheelDeltaY,40)):n=e):(100<(e=o.detail)?e=3:-100>e&&(e=-3),void 0!==o.axis&&o.axis===o.HORIZONTAL_AXIS?t=e:n=e),"number"==typeof this.maxDeltaX_&&(t=goog.math.clamp(t,-this.maxDeltaX_,this.maxDeltaX_)),"number"==typeof this.maxDeltaY_&&(n=goog.math.clamp(n,-this.maxDeltaY_,this.maxDeltaY_)),this.isRtl_&&(t=-t),t=new goog.events.MouseWheelEvent(e,o,t,n),this.dispatchEvent(t)},goog.events.MouseWheelHandler.smartScale_=function(e,t){return goog.userAgent.WEBKIT&&(goog.userAgent.MAC||goog.userAgent.LINUX)&&0!=e%t?e:e/t},goog.events.MouseWheelHandler.prototype.disposeInternal=function(){goog.events.MouseWheelHandler.superClass_.disposeInternal.call(this),goog.events.unlistenByKey(this.listenKey_),this.listenKey_=null},goog.events.MouseWheelEvent=function(e,t,n,o){goog.events.BrowserEvent.call(this,t),this.type=goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.detail=e,this.deltaX=n,this.deltaY=o},goog.inherits(goog.events.MouseWheelEvent,goog.events.BrowserEvent),goog.fx={},goog.fx.Transition=function(){},goog.fx.Transition.EventType={PLAY:"play",BEGIN:"begin",RESUME:"resume",END:"end",STOP:"stop",FINISH:"finish",PAUSE:"pause"},goog.fx.TransitionBase=function(){goog.events.EventTarget.call(this),this.state_=goog.fx.TransitionBase.State.STOPPED,this.endTime=this.startTime=null},goog.inherits(goog.fx.TransitionBase,goog.events.EventTarget),goog.fx.TransitionBase.State={STOPPED:0,PAUSED:-1,PLAYING:1},goog.fx.TransitionBase.prototype.play=goog.abstractMethod,goog.fx.TransitionBase.prototype.stop=goog.abstractMethod,goog.fx.TransitionBase.prototype.pause=goog.abstractMethod,goog.fx.TransitionBase.prototype.getStateInternal=function(){return this.state_},goog.fx.TransitionBase.prototype.setStatePlaying=function(){this.state_=goog.fx.TransitionBase.State.PLAYING},goog.fx.TransitionBase.prototype.setStatePaused=function(){this.state_=goog.fx.TransitionBase.State.PAUSED},goog.fx.TransitionBase.prototype.setStateStopped=function(){this.state_=goog.fx.TransitionBase.State.STOPPED},goog.fx.TransitionBase.prototype.isPlaying=function(){return this.state_==goog.fx.TransitionBase.State.PLAYING},goog.fx.TransitionBase.prototype.isPaused=function(){return this.state_==goog.fx.TransitionBase.State.PAUSED},goog.fx.TransitionBase.prototype.isStopped=function(){return this.state_==goog.fx.TransitionBase.State.STOPPED},goog.fx.TransitionBase.prototype.onBegin=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.BEGIN)},goog.fx.TransitionBase.prototype.onEnd=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.END)},goog.fx.TransitionBase.prototype.onFinish=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.FINISH)},goog.fx.TransitionBase.prototype.onPause=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.PAUSE)},goog.fx.TransitionBase.prototype.onPlay=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.PLAY)},goog.fx.TransitionBase.prototype.onResume=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.RESUME)},goog.fx.TransitionBase.prototype.onStop=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.STOP)},goog.fx.TransitionBase.prototype.dispatchAnimationEvent=function(e){this.dispatchEvent(e)},goog.async.AnimationDelay=function(e,t,n){goog.Disposable.call(this),this.id_=null,this.usingListeners_=!1,this.listener_=e,this.handler_=n,this.win_=t||window,this.callback_=goog.bind(this.doAction_,this)},goog.inherits(goog.async.AnimationDelay,goog.Disposable),goog.async.AnimationDelay.TIMEOUT=20,goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_="MozBeforePaint",goog.async.AnimationDelay.prototype.start=function(){this.stop(),this.usingListeners_=!1;var e=this.getRaf_(),t=this.getCancelRaf_();e&&!t&&this.win_.mozRequestAnimationFrame?(this.id_=goog.events.listen(this.win_,goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_,this.callback_),this.win_.mozRequestAnimationFrame(null),this.usingListeners_=!0):this.id_=e&&t?e.call(this.win_,this.callback_):this.win_.setTimeout(goog.functions.lock(this.callback_),goog.async.AnimationDelay.TIMEOUT)},goog.async.AnimationDelay.prototype.startIfNotActive=function(){this.isActive()||this.start()},goog.async.AnimationDelay.prototype.stop=function(){if(this.isActive()){var e=this.getRaf_(),t=this.getCancelRaf_();e&&!t&&this.win_.mozRequestAnimationFrame?goog.events.unlistenByKey(this.id_):e&&t?t.call(this.win_,this.id_):this.win_.clearTimeout(this.id_)}this.id_=null},goog.async.AnimationDelay.prototype.fire=function(){this.stop(),this.doAction_()},goog.async.AnimationDelay.prototype.fireIfActive=function(){this.isActive()&&this.fire()},goog.async.AnimationDelay.prototype.isActive=function(){return null!=this.id_},goog.async.AnimationDelay.prototype.doAction_=function(){this.usingListeners_&&this.id_&&goog.events.unlistenByKey(this.id_),this.id_=null,this.listener_.call(this.handler_,goog.now())},goog.async.AnimationDelay.prototype.disposeInternal=function(){this.stop(),goog.async.AnimationDelay.superClass_.disposeInternal.call(this)},goog.async.AnimationDelay.prototype.getRaf_=function(){var e=this.win_;return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||null},goog.async.AnimationDelay.prototype.getCancelRaf_=function(){var e=this.win_;return e.cancelAnimationFrame||e.cancelRequestAnimationFrame||e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||null},goog.async.Delay=function(e,t,n){goog.Disposable.call(this),this.listener_=e,this.interval_=t||0,this.handler_=n,this.callback_=goog.bind(this.doAction_,this)},goog.inherits(goog.async.Delay,goog.Disposable),goog.Delay=goog.async.Delay,goog.async.Delay.prototype.id_=0,goog.async.Delay.prototype.disposeInternal=function(){goog.async.Delay.superClass_.disposeInternal.call(this),this.stop(),delete this.listener_,delete this.handler_},goog.async.Delay.prototype.start=function(e){this.stop(),this.id_=goog.Timer.callOnce(this.callback_,void 0!==e?e:this.interval_)},goog.async.Delay.prototype.startIfNotActive=function(e){this.isActive()||this.start(e)},goog.async.Delay.prototype.stop=function(){this.isActive()&&goog.Timer.clear(this.id_),this.id_=0},goog.async.Delay.prototype.fire=function(){this.stop(),this.doAction_()},goog.async.Delay.prototype.fireIfActive=function(){this.isActive()&&this.fire()},goog.async.Delay.prototype.isActive=function(){return 0!=this.id_},goog.async.Delay.prototype.doAction_=function(){this.id_=0,this.listener_&&this.listener_.call(this.handler_)},goog.fx.anim={},goog.fx.anim.Animated=function(){},goog.fx.anim.TIMEOUT=goog.async.AnimationDelay.TIMEOUT,goog.fx.anim.activeAnimations_={},goog.fx.anim.animationWindow_=null,goog.fx.anim.animationDelay_=null,goog.fx.anim.registerAnimation=function(e){var t=goog.getUid(e);t in goog.fx.anim.activeAnimations_||(goog.fx.anim.activeAnimations_[t]=e),goog.fx.anim.requestAnimationFrame_()},goog.fx.anim.unregisterAnimation=function(e){e=goog.getUid(e),delete goog.fx.anim.activeAnimations_[e],goog.object.isEmpty(goog.fx.anim.activeAnimations_)&&goog.fx.anim.cancelAnimationFrame_()},goog.fx.anim.tearDown=function(){goog.fx.anim.animationWindow_=null,goog.dispose(goog.fx.anim.animationDelay_),goog.fx.anim.animationDelay_=null,goog.fx.anim.activeAnimations_={}},goog.fx.anim.setAnimationWindow=function(e){var t=goog.fx.anim.animationDelay_&&goog.fx.anim.animationDelay_.isActive();goog.dispose(goog.fx.anim.animationDelay_),goog.fx.anim.animationDelay_=null,goog.fx.anim.animationWindow_=e,t&&goog.fx.anim.requestAnimationFrame_()},goog.fx.anim.requestAnimationFrame_=function(){goog.fx.anim.animationDelay_||(goog.fx.anim.animationDelay_=goog.fx.anim.animationWindow_?new goog.async.AnimationDelay((function(e){goog.fx.anim.cycleAnimations_(e)}),goog.fx.anim.animationWindow_):new goog.async.Delay((function(){goog.fx.anim.cycleAnimations_(goog.now())}),goog.fx.anim.TIMEOUT));var e=goog.fx.anim.animationDelay_;e.isActive()||e.start()},goog.fx.anim.cancelAnimationFrame_=function(){goog.fx.anim.animationDelay_&&goog.fx.anim.animationDelay_.stop()},goog.fx.anim.cycleAnimations_=function(e){goog.object.forEach(goog.fx.anim.activeAnimations_,(function(t){t.onAnimationFrame(e)})),goog.object.isEmpty(goog.fx.anim.activeAnimations_)||goog.fx.anim.requestAnimationFrame_()},goog.fx.Animation=function(e,t,n,o){if(goog.fx.TransitionBase.call(this),!goog.isArray(e)||!goog.isArray(t))throw Error("Start and end parameters must be arrays");if(e.length!=t.length)throw Error("Start and end points must be the same length");this.startPoint=e,this.endPoint=t,this.duration=n,this.accel_=o,this.coords=[],this.useRightPositioningForRtl_=!1,this.progress=this.fps_=0,this.lastFrame=null},goog.inherits(goog.fx.Animation,goog.fx.TransitionBase),goog.fx.Animation.prototype.getDuration=function(){return this.duration},goog.fx.Animation.prototype.enableRightPositioningForRtl=function(e){this.useRightPositioningForRtl_=e},goog.fx.Animation.prototype.isRightPositioningForRtlEnabled=function(){return this.useRightPositioningForRtl_},goog.fx.Animation.EventType={PLAY:goog.fx.Transition.EventType.PLAY,BEGIN:goog.fx.Transition.EventType.BEGIN,RESUME:goog.fx.Transition.EventType.RESUME,END:goog.fx.Transition.EventType.END,STOP:goog.fx.Transition.EventType.STOP,FINISH:goog.fx.Transition.EventType.FINISH,PAUSE:goog.fx.Transition.EventType.PAUSE,ANIMATE:"animate",DESTROY:"destroy"},goog.fx.Animation.TIMEOUT=goog.fx.anim.TIMEOUT,goog.fx.Animation.State=goog.fx.TransitionBase.State,goog.fx.Animation.setAnimationWindow=function(e){goog.fx.anim.setAnimationWindow(e)},goog.fx.Animation.prototype.play=function(e){if(e||this.isStopped())this.progress=0,this.coords=this.startPoint;else if(this.isPlaying())return!1;return goog.fx.anim.unregisterAnimation(this),this.startTime=e=goog.now(),this.isPaused()&&(this.startTime-=this.duration*this.progress),this.endTime=this.startTime+this.duration,this.lastFrame=this.startTime,this.progress||this.onBegin(),this.onPlay(),this.isPaused()&&this.onResume(),this.setStatePlaying(),goog.fx.anim.registerAnimation(this),this.cycle(e),!0},goog.fx.Animation.prototype.stop=function(e){goog.fx.anim.unregisterAnimation(this),this.setStateStopped(),e&&(this.progress=1),this.updateCoords_(this.progress),this.onStop(),this.onEnd()},goog.fx.Animation.prototype.pause=function(){this.isPlaying()&&(goog.fx.anim.unregisterAnimation(this),this.setStatePaused(),this.onPause())},goog.fx.Animation.prototype.getProgress=function(){return this.progress},goog.fx.Animation.prototype.setProgress=function(e){this.progress=e,this.isPlaying()&&(this.startTime=goog.now()-this.duration*this.progress,this.endTime=this.startTime+this.duration)},goog.fx.Animation.prototype.disposeInternal=function(){this.isStopped()||this.stop(!1),this.onDestroy(),goog.fx.Animation.superClass_.disposeInternal.call(this)},goog.fx.Animation.prototype.destroy=function(){this.dispose()},goog.fx.Animation.prototype.onAnimationFrame=function(e){this.cycle(e)},goog.fx.Animation.prototype.cycle=function(e){goog.asserts.assertNumber(this.startTime),goog.asserts.assertNumber(this.endTime),goog.asserts.assertNumber(this.lastFrame),e<this.startTime&&(this.endTime=e+this.endTime-this.startTime,this.startTime=e),this.progress=(e-this.startTime)/(this.endTime-this.startTime),1<this.progress&&(this.progress=1),this.fps_=1e3/(e-this.lastFrame),this.lastFrame=e,this.updateCoords_(this.progress),1==this.progress?(this.setStateStopped(),goog.fx.anim.unregisterAnimation(this),this.onFinish(),this.onEnd()):this.isPlaying()&&this.onAnimate()},goog.fx.Animation.prototype.updateCoords_=function(e){goog.isFunction(this.accel_)&&(e=this.accel_(e)),this.coords=Array(this.startPoint.length);for(var t=0;t<this.startPoint.length;t++)this.coords[t]=(this.endPoint[t]-this.startPoint[t])*e+this.startPoint[t]},goog.fx.Animation.prototype.onAnimate=function(){this.dispatchAnimationEvent(goog.fx.Animation.EventType.ANIMATE)},goog.fx.Animation.prototype.onDestroy=function(){this.dispatchAnimationEvent(goog.fx.Animation.EventType.DESTROY)},goog.fx.Animation.prototype.dispatchAnimationEvent=function(e){this.dispatchEvent(new goog.fx.AnimationEvent(e,this))},goog.fx.AnimationEvent=function(e,t){goog.events.Event.call(this,e),this.coords=t.coords,this.x=t.coords[0],this.y=t.coords[1],this.z=t.coords[2],this.duration=t.duration,this.progress=t.getProgress(),this.fps=t.fps_,this.state=t.getStateInternal(),this.anim=t},goog.inherits(goog.fx.AnimationEvent,goog.events.Event),goog.fx.AnimationEvent.prototype.coordsAsInts=function(){return goog.array.map(this.coords,Math.round)},goog.fx.AnimationQueue=function(){goog.fx.TransitionBase.call(this),this.queue=[]},goog.inherits(goog.fx.AnimationQueue,goog.fx.TransitionBase),goog.fx.AnimationQueue.prototype.add=function(e){goog.asserts.assert(this.isStopped(),"Not allowed to add animations to a running animation queue."),goog.array.contains(this.queue,e)||(this.queue.push(e),goog.events.listen(e,goog.fx.Transition.EventType.FINISH,this.onAnimationFinish,!1,this))},goog.fx.AnimationQueue.prototype.remove=function(e){goog.asserts.assert(this.isStopped(),"Not allowed to remove animations from a running animation queue."),goog.array.remove(this.queue,e)&&goog.events.unlisten(e,goog.fx.Transition.EventType.FINISH,this.onAnimationFinish,!1,this)},goog.fx.AnimationQueue.prototype.onAnimationFinish=goog.abstractMethod,goog.fx.AnimationQueue.prototype.disposeInternal=function(){goog.array.forEach(this.queue,(function(e){e.dispose()})),this.queue.length=0,goog.fx.AnimationQueue.superClass_.disposeInternal.call(this)},goog.fx.AnimationParallelQueue=function(){goog.fx.AnimationQueue.call(this),this.finishedCounter_=0},goog.inherits(goog.fx.AnimationParallelQueue,goog.fx.AnimationQueue),goog.fx.AnimationParallelQueue.prototype.play=function(e){if(0==this.queue.length)return!1;if(e||this.isStopped())this.finishedCounter_=0,this.onBegin();else if(this.isPlaying())return!1;this.onPlay(),this.isPaused()&&this.onResume();var t=this.isPaused()&&!e;return this.startTime=goog.now(),this.endTime=null,this.setStatePlaying(),goog.array.forEach(this.queue,(function(n){t&&!n.isPaused()||n.play(e)})),!0},goog.fx.AnimationParallelQueue.prototype.pause=function(){this.isPlaying()&&(goog.array.forEach(this.queue,(function(e){e.isPlaying()&&e.pause()})),this.setStatePaused(),this.onPause())},goog.fx.AnimationParallelQueue.prototype.stop=function(e){goog.array.forEach(this.queue,(function(t){t.isStopped()||t.stop(e)})),this.setStateStopped(),this.endTime=goog.now(),this.onStop(),this.onEnd()},goog.fx.AnimationParallelQueue.prototype.onAnimationFinish=function(e){this.finishedCounter_++,this.finishedCounter_==this.queue.length&&(this.endTime=goog.now(),this.setStateStopped(),this.onFinish(),this.onEnd())},goog.fx.AnimationSerialQueue=function(){goog.fx.AnimationQueue.call(this),this.current_=0},goog.inherits(goog.fx.AnimationSerialQueue,goog.fx.AnimationQueue),goog.fx.AnimationSerialQueue.prototype.play=function(e){if(0==this.queue.length)return!1;if(e||this.isStopped())this.current_<this.queue.length&&!this.queue[this.current_].isStopped()&&this.queue[this.current_].stop(!1),this.current_=0,this.onBegin();else if(this.isPlaying())return!1;return this.onPlay(),this.isPaused()&&this.onResume(),this.startTime=goog.now(),this.endTime=null,this.setStatePlaying(),this.queue[this.current_].play(e),!0},goog.fx.AnimationSerialQueue.prototype.pause=function(){this.isPlaying()&&(this.queue[this.current_].pause(),this.setStatePaused(),this.onPause())},goog.fx.AnimationSerialQueue.prototype.stop=function(e){if(this.setStateStopped(),this.endTime=goog.now(),e)for(e=this.current_;e<this.queue.length;++e){var t=this.queue[e];t.isStopped()&&t.play(),t.isStopped()||t.stop(!0)}else this.current_<this.queue.length&&this.queue[this.current_].stop(!1);this.onStop(),this.onEnd()},goog.fx.AnimationSerialQueue.prototype.onAnimationFinish=function(e){this.isPlaying()&&(this.current_++,this.current_<this.queue.length?this.queue[this.current_].play():(this.endTime=goog.now(),this.setStateStopped(),this.onFinish(),this.onEnd()))},goog.userAgent.platform={},goog.userAgent.platform.determineVersion_=function(){if(goog.userAgent.WINDOWS){var e=/Windows NT ([0-9.]+)/;return(e=e.exec(goog.userAgent.getUserAgentString()))?e[1]:"0"}return goog.userAgent.MAC?(e=(e=/10[_.][0-9_.]+/).exec(goog.userAgent.getUserAgentString()))?e[0].replace(/_/g,"."):"10":goog.userAgent.ANDROID?(e=(e=/Android\s+([^\);]+)(\)|;)/).exec(goog.userAgent.getUserAgentString()))?e[1]:"":goog.userAgent.IPHONE||goog.userAgent.IPAD||goog.userAgent.IPOD?(e=(e=/(?:iPhone|CPU)\s+OS\s+(\S+)/).exec(goog.userAgent.getUserAgentString()))?e[1].replace(/_/g,"."):"":""},goog.userAgent.platform.VERSION=goog.userAgent.platform.determineVersion_(),goog.userAgent.platform.isVersion=function(e){return 0<=goog.string.compareVersions(goog.userAgent.platform.VERSION,e)},goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.userAgent.product.determineVersion_=function(){if(goog.userAgent.product.FIREFOX)return goog.userAgent.product.getFirstRegExpGroup_(/Firefox\/([0-9.]+)/);if(goog.userAgent.product.IE||goog.userAgent.product.EDGE||goog.userAgent.product.OPERA)return goog.userAgent.VERSION;if(goog.userAgent.product.CHROME)return goog.labs.userAgent.platform.isIos()?goog.userAgent.product.getFirstRegExpGroup_(/CriOS\/([0-9.]+)/):goog.userAgent.product.getFirstRegExpGroup_(/Chrome\/([0-9.]+)/);if(goog.userAgent.product.SAFARI&&!goog.labs.userAgent.platform.isIos())return goog.userAgent.product.getFirstRegExpGroup_(/Version\/([0-9.]+)/);if(goog.userAgent.product.IPHONE||goog.userAgent.product.IPAD){var e=goog.userAgent.product.execRegExp_(/Version\/(\S+).*Mobile\/(\S+)/);if(e)return e[1]+"."+e[2]}else if(goog.userAgent.product.ANDROID)return(e=goog.userAgent.product.getFirstRegExpGroup_(/Android\s+([0-9.]+)/))?e:goog.userAgent.product.getFirstRegExpGroup_(/Version\/([0-9.]+)/);return""},goog.userAgent.product.getFirstRegExpGroup_=function(e){return(e=goog.userAgent.product.execRegExp_(e))?e[1]:""},goog.userAgent.product.execRegExp_=function(e){return e.exec(goog.userAgent.getUserAgentString())},goog.userAgent.product.VERSION=goog.userAgent.product.determineVersion_(),goog.userAgent.product.isVersion=function(e){return 0<=goog.string.compareVersions(goog.userAgent.product.VERSION,e)},goog.style.bidi={},goog.style.bidi.getScrollLeft=function(e){var t=goog.style.isRightToLeft(e);return t&&goog.style.bidi.usesNegativeScrollLeftInRtl_()?-e.scrollLeft:!t||goog.userAgent.EDGE_OR_IE&&goog.userAgent.isVersionOrHigher("8")||"visible"==goog.style.getComputedOverflowX(e)?e.scrollLeft:e.scrollWidth-e.clientWidth-e.scrollLeft},goog.style.bidi.getOffsetStart=function(e){var t=e.offsetLeft,n=e.offsetParent;if(n||"fixed"!=goog.style.getComputedPosition(e)||(n=goog.dom.getOwnerDocument(e).documentElement),!n)return t;if(goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher(58)){var o=goog.style.getBorderBox(n);t+=o.left}else goog.userAgent.isDocumentModeOrHigher(8)&&!goog.userAgent.isDocumentModeOrHigher(9)&&(t-=(o=goog.style.getBorderBox(n)).left);return goog.style.isRightToLeft(n)?n.clientWidth-(t+e.offsetWidth):t},goog.style.bidi.setScrollOffset=function(e,t){t=Math.max(t,0),goog.style.isRightToLeft(e)?goog.style.bidi.usesNegativeScrollLeftInRtl_()?e.scrollLeft=-t:goog.userAgent.EDGE_OR_IE&&goog.userAgent.isVersionOrHigher("8")?e.scrollLeft=t:e.scrollLeft=e.scrollWidth-t-e.clientWidth:e.scrollLeft=t},goog.style.bidi.usesNegativeScrollLeftInRtl_=function(){var e=goog.userAgent.product.SAFARI&&goog.userAgent.product.isVersion(10),t=goog.userAgent.IOS&&goog.userAgent.platform.isVersion(10);return goog.userAgent.GECKO||e||t},goog.style.bidi.setPosition=function(e,t,n,o){null!==n&&(e.style.top=n+"px"),o?(e.style.right=t+"px",e.style.left=""):(e.style.left=t+"px",e.style.right="")},goog.fx.Dragger=function(e,t,n){goog.events.EventTarget.call(this),this.target=e,this.handle=t||e,this.limits=n||new goog.math.Rect(NaN,NaN,NaN,NaN),this.document_=goog.dom.getOwnerDocument(e),this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.deltaY=this.deltaX=this.startY=this.startX=this.screenY=this.screenX=this.clientY=this.clientX=0,this.enabled_=!0,this.dragging_=!1,this.preventMouseDown_=!0,this.hysteresisDistanceSquared_=0,this.useRightPositioningForRtl_=this.ieDragStartCancellingOn_=!1,goog.events.listen(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this),this.useSetCapture_=goog.fx.Dragger.HAS_SET_CAPTURE_},goog.inherits(goog.fx.Dragger,goog.events.EventTarget),goog.tagUnsealableClass(goog.fx.Dragger),goog.fx.Dragger.HAS_SET_CAPTURE_=goog.global.document&&goog.global.document.documentElement&&!!goog.global.document.documentElement.setCapture&&!!goog.global.document.releaseCapture,goog.fx.Dragger.cloneNode=function(e){for(var t=e.cloneNode(!0),n=goog.dom.getElementsByTagName("TEXTAREA",e),o=goog.dom.getElementsByTagName("TEXTAREA",t),r=0;r<n.length;r++)o[r].value=n[r].value;switch(e.tagName){case"TR":return goog.dom.createDom("TABLE",null,goog.dom.createDom("TBODY",null,t));case"TD":case"TH":return goog.dom.createDom("TABLE",null,goog.dom.createDom("TBODY",null,goog.dom.createDom("TR",null,t)));case"TEXTAREA":t.value=e.value;default:return t}},goog.fx.Dragger.EventType={EARLY_CANCEL:"earlycancel",START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"},goog.fx.Dragger.prototype.setAllowSetCapture=function(e){this.useSetCapture_=e&&goog.fx.Dragger.HAS_SET_CAPTURE_},goog.fx.Dragger.prototype.enableRightPositioningForRtl=function(e){this.useRightPositioningForRtl_=e},goog.fx.Dragger.prototype.getHandler=function(){return this.eventHandler_},goog.fx.Dragger.prototype.setLimits=function(e){this.limits=e||new goog.math.Rect(NaN,NaN,NaN,NaN)},goog.fx.Dragger.prototype.setHysteresis=function(e){this.hysteresisDistanceSquared_=Math.pow(e,2)},goog.fx.Dragger.prototype.getHysteresis=function(){return Math.sqrt(this.hysteresisDistanceSquared_)},goog.fx.Dragger.prototype.setScrollTarget=function(e){this.scrollTarget_=e},goog.fx.Dragger.prototype.setCancelIeDragStart=function(e){this.ieDragStartCancellingOn_=e},goog.fx.Dragger.prototype.getEnabled=function(){return this.enabled_},goog.fx.Dragger.prototype.setEnabled=function(e){this.enabled_=e},goog.fx.Dragger.prototype.setPreventMouseDown=function(e){this.preventMouseDown_=e},goog.fx.Dragger.prototype.disposeInternal=function(){goog.fx.Dragger.superClass_.disposeInternal.call(this),goog.events.unlisten(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this),this.cleanUpAfterDragging_(),this.handle=this.target=null},goog.fx.Dragger.prototype.isRightToLeft_=function(){return void 0===this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.target)),this.rightToLeft_},goog.fx.Dragger.prototype.startDrag=function(e){var t=e.type==goog.events.EventType.MOUSEDOWN;if(!this.enabled_||this.dragging_||t&&!e.isMouseActionButton())this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);else{if(0==this.hysteresisDistanceSquared_){if(!this.fireDragStart_(e))return;this.dragging_=!0,this.preventMouseDown_&&t&&e.preventDefault()}else this.preventMouseDown_&&t&&e.preventDefault();this.setupDragHandlers(),this.clientX=this.startX=e.clientX,this.clientY=this.startY=e.clientY,this.screenX=e.screenX,this.screenY=e.screenY,this.computeInitialPosition(),this.pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll()}},goog.fx.Dragger.prototype.setupDragHandlers=function(){var e=this.document_,t=e.documentElement,n=!this.useSetCapture_;this.eventHandler_.listen(e,[goog.events.EventType.TOUCHMOVE,goog.events.EventType.MOUSEMOVE],this.handleMove_,{capture:n,passive:!1}),this.eventHandler_.listen(e,[goog.events.EventType.TOUCHEND,goog.events.EventType.MOUSEUP],this.endDrag,n),this.useSetCapture_?(t.setCapture(!1),this.eventHandler_.listen(t,goog.events.EventType.LOSECAPTURE,this.endDrag)):this.eventHandler_.listen(goog.dom.getWindow(e),goog.events.EventType.BLUR,this.endDrag),goog.userAgent.IE&&this.ieDragStartCancellingOn_&&this.eventHandler_.listen(e,goog.events.EventType.DRAGSTART,goog.events.Event.preventDefault),this.scrollTarget_&&this.eventHandler_.listen(this.scrollTarget_,goog.events.EventType.SCROLL,this.onScroll_,n)},goog.fx.Dragger.prototype.fireDragStart_=function(e){return this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.START,this,e.clientX,e.clientY,e))},goog.fx.Dragger.prototype.cleanUpAfterDragging_=function(){this.eventHandler_.removeAll(),this.useSetCapture_&&this.document_.releaseCapture()},goog.fx.Dragger.prototype.endDrag=function(e,t){if(this.cleanUpAfterDragging_(),this.dragging_){this.dragging_=!1;var n=this.limitX(this.deltaX),o=this.limitY(this.deltaY);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.END,this,e.clientX,e.clientY,e,n,o,t||e.type==goog.events.EventType.TOUCHCANCEL))}else this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)},goog.fx.Dragger.prototype.endDragCancel=function(e){this.endDrag(e,!0)},goog.fx.Dragger.prototype.handleMove_=function(e){if(this.enabled_){var t=(this.useRightPositioningForRtl_&&this.isRightToLeft_()?-1:1)*(e.clientX-this.clientX),n=e.clientY-this.clientY;if(this.clientX=e.clientX,this.clientY=e.clientY,this.screenX=e.screenX,this.screenY=e.screenY,!this.dragging_){var o=this.startX-this.clientX,r=this.startY-this.clientY;if(o*o+r*r>this.hysteresisDistanceSquared_){if(!this.fireDragStart_(e))return void(this.isDisposed()||this.endDrag(e));this.dragging_=!0}}t=(n=this.calculatePosition_(t,n)).x,n=n.y,this.dragging_&&this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.BEFOREDRAG,this,e.clientX,e.clientY,e,t,n))&&(this.doDrag(e,t,n,!1),e.preventDefault())}},goog.fx.Dragger.prototype.calculatePosition_=function(e,t){var n=goog.dom.getDomHelper(this.document_).getDocumentScroll();return e+=n.x-this.pageScroll.x,t+=n.y-this.pageScroll.y,this.pageScroll=n,this.deltaX+=e,this.deltaY+=t,e=this.limitX(this.deltaX),t=this.limitY(this.deltaY),new goog.math.Coordinate(e,t)},goog.fx.Dragger.prototype.onScroll_=function(e){var t=this.calculatePosition_(0,0);e.clientX=this.clientX,e.clientY=this.clientY,this.doDrag(e,t.x,t.y,!0)},goog.fx.Dragger.prototype.doDrag=function(e,t,n,o){this.defaultAction(t,n),this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.DRAG,this,e.clientX,e.clientY,e,t,n))},goog.fx.Dragger.prototype.limitX=function(e){var t=this.limits,n=isNaN(t.left)?null:t.left;return t=isNaN(t.width)?0:t.width,Math.min(null!=n?n+t:1/0,Math.max(null!=n?n:-1/0,e))},goog.fx.Dragger.prototype.limitY=function(e){var t=this.limits,n=isNaN(t.top)?null:t.top;return t=isNaN(t.height)?0:t.height,Math.min(null!=n?n+t:1/0,Math.max(null!=n?n:-1/0,e))},goog.fx.Dragger.prototype.computeInitialPosition=function(){this.deltaX=this.useRightPositioningForRtl_?goog.style.bidi.getOffsetStart(this.target):this.target.offsetLeft,this.deltaY=this.target.offsetTop},goog.fx.Dragger.prototype.defaultAction=function(e,t){this.useRightPositioningForRtl_&&this.isRightToLeft_()?this.target.style.right=e+"px":this.target.style.left=e+"px",this.target.style.top=t+"px"},goog.fx.Dragger.prototype.isDragging=function(){return this.dragging_},goog.fx.DragEvent=function(e,t,n,o,r,i,s,a){goog.events.Event.call(this,e),this.clientX=n,this.clientY=o,this.browserEvent=r,this.left=void 0!==i?i:t.deltaX,this.top=void 0!==s?s:t.deltaY,this.dragger=t,this.dragCanceled=!!a},goog.inherits(goog.fx.DragEvent,goog.events.Event),goog.color={},goog.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},goog.color.parse=function(e){var t={};e=String(e);var n=goog.color.prependHashIfNecessaryHelper(e);if(goog.color.isValidHexColor_(n))return t.hex=goog.color.normalizeHex(n),t.type="hex",t;if((n=goog.color.isValidRgbColor_(e)).length)return t.hex=goog.color.rgbArrayToHex(n),t.type="rgb",t;if(goog.color.names&&(n=goog.color.names[e.toLowerCase()]))return t.hex=n,t.type="named",t;throw Error(e+" is not a valid color string")},goog.color.isValidColor=function(e){var t=goog.color.prependHashIfNecessaryHelper(e);return!!(goog.color.isValidHexColor_(t)||goog.color.isValidRgbColor_(e).length||goog.color.names&&goog.color.names[e.toLowerCase()])},goog.color.parseRgb=function(e){var t=goog.color.isValidRgbColor_(e);if(!t.length)throw Error(e+" is not a valid RGB color");return t},goog.color.hexToRgbStyle=function(e){return goog.color.rgbStyle_(goog.color.hexToRgb(e))},goog.color.hexTripletRe_=/#(.)(.)(.)/,goog.color.normalizeHex=function(e){if(!goog.color.isValidHexColor_(e))throw Error("'"+e+"' is not a valid hex color");return 4==e.length&&(e=e.replace(goog.color.hexTripletRe_,"#$1$1$2$2$3$3")),e.toLowerCase()},goog.color.hexToRgb=function(e){return e=goog.color.normalizeHex(e),[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]},goog.color.rgbToHex=function(e,t,n){if(e=Number(e),t=Number(t),n=Number(n),e!=(255&e)||t!=(255&t)||n!=(255&n))throw Error('"('+e+","+t+","+n+'") is not a valid RGB color');return t=e<<16|t<<8|n,16>e?"#"+(16777216|t).toString(16).substr(1):"#"+t.toString(16)},goog.color.rgbArrayToHex=function(e){return goog.color.rgbToHex(e[0],e[1],e[2])},goog.color.rgbToHsl=function(e,t,n){e/=255,t/=255,n/=255;var o=Math.max(e,t,n),r=Math.min(e,t,n),i=0,s=0,a=.5*(o+r);return o!=r&&(o==e?i=60*(t-n)/(o-r):o==t?i=60*(n-e)/(o-r)+120:o==n&&(i=60*(e-t)/(o-r)+240),s=0<a&&.5>=a?(o-r)/(2*a):(o-r)/(2-2*a)),[Math.round(i+360)%360,s,a]},goog.color.rgbArrayToHsl=function(e){return goog.color.rgbToHsl(e[0],e[1],e[2])},goog.color.hueToRgb_=function(e,t,n){return 0>n?n+=1:1<n&&--n,1>6*n?e+6*(t-e)*n:1>2*n?t:2>3*n?e+(t-e)*(2/3-n)*6:e},goog.color.hslToRgb=function(e,t,n){if(e/=360,0==t)n=t=e=255*n;else{var o=.5>n?n*(1+t):n+t-t*n,r=2*n-o;n=255*goog.color.hueToRgb_(r,o,e+1/3),t=255*goog.color.hueToRgb_(r,o,e),e=255*goog.color.hueToRgb_(r,o,e-1/3)}return[Math.round(n),Math.round(t),Math.round(e)]},goog.color.hslArrayToRgb=function(e){return goog.color.hslToRgb(e[0],e[1],e[2])},goog.color.validHexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i,goog.color.isValidHexColor_=function(e){return goog.color.validHexColorRe_.test(e)},goog.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i,goog.color.isValidRgbColor_=function(e){var t=e.match(goog.color.rgbColorRe_);if(t){e=Number(t[1]);var n=Number(t[2]);if(t=Number(t[3]),0<=e&&255>=e&&0<=n&&255>=n&&0<=t&&255>=t)return[e,n,t]}return[]},goog.color.prependZeroIfNecessaryHelper=function(e){return 1==e.length?"0"+e:e},goog.color.prependHashIfNecessaryHelper=function(e){return"#"==e.charAt(0)?e:"#"+e},goog.color.rgbStyle_=function(e){return"rgb("+e.join(",")+")"},goog.color.hsvToRgb=function(e,t,n){var o=0,r=0,i=0;if(0==t)i=r=o=n;else{var s=Math.floor(e/60),a=e/60-s;e=n*(1-t);var l=n*(1-t*a);switch(t=n*(1-t*(1-a)),s){case 1:o=l,r=n,i=e;break;case 2:o=e,r=n,i=t;break;case 3:o=e,r=l,i=n;break;case 4:o=t,r=e,i=n;break;case 5:o=n,r=e,i=l;break;case 6:case 0:o=n,r=t,i=e}}return[Math.round(o),Math.round(r),Math.round(i)]},goog.color.rgbToHsv=function(e,t,n){var o=Math.max(Math.max(e,t),n),r=Math.min(Math.min(e,t),n);if(r==o)r=e=0;else{var i=o-r;r=i/o,0>(e=60*(e==o?(t-n)/i:t==o?2+(n-e)/i:4+(e-t)/i))&&(e+=360),360<e&&(e-=360)}return[e,r,o]},goog.color.rgbArrayToHsv=function(e){return goog.color.rgbToHsv(e[0],e[1],e[2])},goog.color.hsvArrayToRgb=function(e){return goog.color.hsvToRgb(e[0],e[1],e[2])},goog.color.hexToHsl=function(e){return e=goog.color.hexToRgb(e),goog.color.rgbToHsl(e[0],e[1],e[2])},goog.color.hslToHex=function(e,t,n){return goog.color.rgbArrayToHex(goog.color.hslToRgb(e,t,n))},goog.color.hslArrayToHex=function(e){return goog.color.rgbArrayToHex(goog.color.hslToRgb(e[0],e[1],e[2]))},goog.color.hexToHsv=function(e){return goog.color.rgbArrayToHsv(goog.color.hexToRgb(e))},goog.color.hsvToHex=function(e,t,n){return goog.color.rgbArrayToHex(goog.color.hsvToRgb(e,t,n))},goog.color.hsvArrayToHex=function(e){return goog.color.hsvToHex(e[0],e[1],e[2])},goog.color.hslDistance=function(e,t){var n=.5>=e[2]?e[1]*e[2]:e[1]*(1-e[2]),o=.5>=t[2]?t[1]*t[2]:t[1]*(1-t[2]);return(e[2]-t[2])*(e[2]-t[2])+n*n+o*o-2*n*o*Math.cos(2*(e[0]/360-t[0]/360)*Math.PI)},goog.color.blend=function(e,t,n){return n=goog.math.clamp(n,0,1),[Math.round(t[0]+n*(e[0]-t[0])),Math.round(t[1]+n*(e[1]-t[1])),Math.round(t[2]+n*(e[2]-t[2]))]},goog.color.darken=function(e,t){return goog.color.blend([0,0,0],e,t)},goog.color.lighten=function(e,t){return goog.color.blend([255,255,255],e,t)},goog.color.highContrast=function(e,t){for(var n=[],o=0;o<t.length;o++)n.push({color:t[o],diff:goog.color.yiqBrightnessDiff_(t[o],e)+goog.color.colorDiff_(t[o],e)});return n.sort((function(e,t){return t.diff-e.diff})),n[0].color},goog.color.yiqBrightness_=function(e){return Math.round((299*e[0]+587*e[1]+114*e[2])/1e3)},goog.color.yiqBrightnessDiff_=function(e,t){return Math.abs(goog.color.yiqBrightness_(e)-goog.color.yiqBrightness_(t))},goog.color.colorDiff_=function(e,t){return Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1])+Math.abs(e[2]-t[2])},goog.fx.dom={},goog.fx.dom.PredefinedEffect=function(e,t,n,o,r){goog.fx.Animation.call(this,t,n,o,r),this.element=e},goog.inherits(goog.fx.dom.PredefinedEffect,goog.fx.Animation),goog.fx.dom.PredefinedEffect.prototype.updateStyle=goog.nullFunction,goog.fx.dom.PredefinedEffect.prototype.isRightToLeft=function(){return void 0===this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.element)),this.rightToLeft_},goog.fx.dom.PredefinedEffect.prototype.onAnimate=function(){this.updateStyle(),goog.fx.dom.PredefinedEffect.superClass_.onAnimate.call(this)},goog.fx.dom.PredefinedEffect.prototype.onEnd=function(){this.updateStyle(),goog.fx.dom.PredefinedEffect.superClass_.onEnd.call(this)},goog.fx.dom.PredefinedEffect.prototype.onBegin=function(){this.updateStyle(),goog.fx.dom.PredefinedEffect.superClass_.onBegin.call(this)},goog.fx.dom.Slide=function(e,t,n,o,r){if(2!=t.length||2!=n.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.call(this,e,t,n,o,r)},goog.inherits(goog.fx.dom.Slide,goog.fx.dom.PredefinedEffect),goog.fx.dom.Slide.prototype.updateStyle=function(){var e=this.isRightPositioningForRtlEnabled()&&this.isRightToLeft()?"right":"left";this.element.style[e]=Math.round(this.coords[0])+"px",this.element.style.top=Math.round(this.coords[1])+"px"},goog.fx.dom.SlideFrom=function(e,t,n,o){goog.fx.dom.Slide.call(this,e,[e.offsetLeft,e.offsetTop],t,n,o)},goog.inherits(goog.fx.dom.SlideFrom,goog.fx.dom.Slide),goog.fx.dom.SlideFrom.prototype.onBegin=function(){this.startPoint=[this.isRightPositioningForRtlEnabled()?goog.style.bidi.getOffsetStart(this.element):this.element.offsetLeft,this.element.offsetTop],goog.fx.dom.SlideFrom.superClass_.onBegin.call(this)},goog.fx.dom.Swipe=function(e,t,n,o,r){if(2!=t.length||2!=n.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.call(this,e,t,n,o,r),this.maxWidth_=Math.max(this.endPoint[0],this.startPoint[0]),this.maxHeight_=Math.max(this.endPoint[1],this.startPoint[1])},goog.inherits(goog.fx.dom.Swipe,goog.fx.dom.PredefinedEffect),goog.fx.dom.Swipe.prototype.updateStyle=function(){var e=this.coords[0],t=this.coords[1];this.clip_(Math.round(e),Math.round(t),this.maxWidth_,this.maxHeight_),this.element.style.width=Math.round(e)+"px";var n=this.isRightPositioningForRtlEnabled()&&this.isRightToLeft()?"marginRight":"marginLeft";this.element.style[n]=Math.round(e)-this.maxWidth_+"px",this.element.style.marginTop=Math.round(t)-this.maxHeight_+"px"},goog.fx.dom.Swipe.prototype.clip_=function(e,t,n,o){this.element.style.clip="rect("+(o-t)+"px "+n+"px "+o+"px "+(n-e)+"px)"},goog.fx.dom.Scroll=function(e,t,n,o,r){if(2!=t.length||2!=n.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.call(this,e,t,n,o,r)},goog.inherits(goog.fx.dom.Scroll,goog.fx.dom.PredefinedEffect),goog.fx.dom.Scroll.prototype.updateStyle=function(){this.isRightPositioningForRtlEnabled()?goog.style.bidi.setScrollOffset(this.element,Math.round(this.coords[0])):this.element.scrollLeft=Math.round(this.coords[0]),this.element.scrollTop=Math.round(this.coords[1])},goog.fx.dom.Resize=function(e,t,n,o,r){if(2!=t.length||2!=n.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.call(this,e,t,n,o,r)},goog.inherits(goog.fx.dom.Resize,goog.fx.dom.PredefinedEffect),goog.fx.dom.Resize.prototype.updateStyle=function(){this.element.style.width=Math.round(this.coords[0])+"px",this.element.style.height=Math.round(this.coords[1])+"px"},goog.fx.dom.ResizeWidth=function(e,t,n,o,r){goog.fx.dom.PredefinedEffect.call(this,e,[t],[n],o,r)},goog.inherits(goog.fx.dom.ResizeWidth,goog.fx.dom.PredefinedEffect),goog.fx.dom.ResizeWidth.prototype.updateStyle=function(){this.element.style.width=Math.round(this.coords[0])+"px"},goog.fx.dom.ResizeHeight=function(e,t,n,o,r){goog.fx.dom.PredefinedEffect.call(this,e,[t],[n],o,r)},goog.inherits(goog.fx.dom.ResizeHeight,goog.fx.dom.PredefinedEffect),goog.fx.dom.ResizeHeight.prototype.updateStyle=function(){this.element.style.height=Math.round(this.coords[0])+"px"},goog.fx.dom.Fade=function(e,t,n,o,r){if("number"==typeof t&&(t=[t]),"number"==typeof n&&(n=[n]),goog.fx.dom.PredefinedEffect.call(this,e,t,n,o,r),1!=t.length||1!=n.length)throw Error("Start and end points must be 1D");this.lastOpacityUpdate_=goog.fx.dom.Fade.OPACITY_UNSET_},goog.inherits(goog.fx.dom.Fade,goog.fx.dom.PredefinedEffect),goog.fx.dom.Fade.TOLERANCE_=1/1024,goog.fx.dom.Fade.OPACITY_UNSET_=-1,goog.fx.dom.Fade.prototype.updateStyle=function(){var e=this.coords[0];Math.abs(e-this.lastOpacityUpdate_)>=goog.fx.dom.Fade.TOLERANCE_&&(goog.style.setOpacity(this.element,e),this.lastOpacityUpdate_=e)},goog.fx.dom.Fade.prototype.onBegin=function(){this.lastOpacityUpdate_=goog.fx.dom.Fade.OPACITY_UNSET_,goog.fx.dom.Fade.superClass_.onBegin.call(this)},goog.fx.dom.Fade.prototype.onEnd=function(){this.lastOpacityUpdate_=goog.fx.dom.Fade.OPACITY_UNSET_,goog.fx.dom.Fade.superClass_.onEnd.call(this)},goog.fx.dom.Fade.prototype.show=function(){this.element.style.display=""},goog.fx.dom.Fade.prototype.hide=function(){this.element.style.display="none"},goog.fx.dom.FadeOut=function(e,t,n){goog.fx.dom.Fade.call(this,e,1,0,t,n)},goog.inherits(goog.fx.dom.FadeOut,goog.fx.dom.Fade),goog.fx.dom.FadeIn=function(e,t,n){goog.fx.dom.Fade.call(this,e,0,1,t,n)},goog.inherits(goog.fx.dom.FadeIn,goog.fx.dom.Fade),goog.fx.dom.FadeOutAndHide=function(e,t,n){goog.fx.dom.Fade.call(this,e,1,0,t,n)},goog.inherits(goog.fx.dom.FadeOutAndHide,goog.fx.dom.Fade),goog.fx.dom.FadeOutAndHide.prototype.onBegin=function(){this.show(),goog.fx.dom.FadeOutAndHide.superClass_.onBegin.call(this)},goog.fx.dom.FadeOutAndHide.prototype.onEnd=function(){this.hide(),goog.fx.dom.FadeOutAndHide.superClass_.onEnd.call(this)},goog.fx.dom.FadeInAndShow=function(e,t,n){goog.fx.dom.Fade.call(this,e,0,1,t,n)},goog.inherits(goog.fx.dom.FadeInAndShow,goog.fx.dom.Fade),goog.fx.dom.FadeInAndShow.prototype.onBegin=function(){this.show(),goog.fx.dom.FadeInAndShow.superClass_.onBegin.call(this)},goog.fx.dom.BgColorTransform=function(e,t,n,o,r){if(3!=t.length||3!=n.length)throw Error("Start and end points must be 3D");goog.fx.dom.PredefinedEffect.call(this,e,t,n,o,r)},goog.inherits(goog.fx.dom.BgColorTransform,goog.fx.dom.PredefinedEffect),goog.fx.dom.BgColorTransform.prototype.setColor=function(){for(var e=[],t=0;t<this.coords.length;t++)e[t]=Math.round(this.coords[t]);e="rgb("+e.join(",")+")",this.element.style.backgroundColor=e},goog.fx.dom.BgColorTransform.prototype.updateStyle=function(){this.setColor()},goog.fx.dom.bgColorFadeIn=function(e,t,n,o){function r(){e.style.backgroundColor=i}var i=e.style.backgroundColor||"",s=goog.style.getBackgroundColor(e);s=s&&"transparent"!=s&&"rgba(0, 0, 0, 0)"!=s?goog.color.hexToRgb(goog.color.parse(s).hex):[255,255,255],t=new goog.fx.dom.BgColorTransform(e,t,s,n),o?o.listen(t,goog.fx.Transition.EventType.END,r):goog.events.listen(t,goog.fx.Transition.EventType.END,r),t.play()},goog.fx.dom.ColorTransform=function(e,t,n,o,r){if(3!=t.length||3!=n.length)throw Error("Start and end points must be 3D");goog.fx.dom.PredefinedEffect.call(this,e,t,n,o,r)},goog.inherits(goog.fx.dom.ColorTransform,goog.fx.dom.PredefinedEffect),goog.fx.dom.ColorTransform.prototype.updateStyle=function(){for(var e=[],t=0;t<this.coords.length;t++)e[t]=Math.round(this.coords[t]);e="rgb("+e.join(",")+")",this.element.style.color=e},goog.ui.RangeModel=function(){goog.events.EventTarget.call(this)},goog.inherits(goog.ui.RangeModel,goog.events.EventTarget),goog.tagUnsealableClass(goog.ui.RangeModel),goog.ui.RangeModel.prototype.value_=0,goog.ui.RangeModel.prototype.minimum_=0,goog.ui.RangeModel.prototype.maximum_=100,goog.ui.RangeModel.prototype.extent_=0,goog.ui.RangeModel.prototype.step_=1,goog.ui.RangeModel.prototype.isChanging_=!1,goog.ui.RangeModel.prototype.mute_=!1,goog.ui.RangeModel.prototype.setMute=function(e){this.mute_=e},goog.ui.RangeModel.prototype.setValue=function(e){e=this.roundToStepWithMin(e),this.value_!=e&&(this.value_=e+this.extent_>this.maximum_?this.maximum_-this.extent_:e<this.minimum_?this.minimum_:e,this.isChanging_||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))},goog.ui.RangeModel.prototype.getValue=function(){return this.roundToStepWithMin(this.value_)},goog.ui.RangeModel.prototype.setExtent=function(e){e=this.roundToStepWithMin(e),this.extent_!=e&&(this.extent_=0>e?0:this.value_+e>this.maximum_?this.maximum_-this.value_:e,this.isChanging_||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))},goog.ui.RangeModel.prototype.getExtent=function(){return this.roundToStep(this.extent_)},goog.ui.RangeModel.prototype.setMinimum=function(e){if(this.minimum_!=e){var t=this.isChanging_;this.isChanging_=!0,this.minimum_=e,e+this.extent_>this.maximum_&&(this.extent_=this.maximum_-this.minimum_),e>this.value_&&this.setValue(e),e>this.maximum_&&(this.extent_=0,this.setMaximum(e),this.setValue(e)),(this.isChanging_=t)||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE)}},goog.ui.RangeModel.prototype.getMinimum=function(){return this.roundToStepWithMin(this.minimum_)},goog.ui.RangeModel.prototype.setMaximum=function(e){if(e=this.roundToStepWithMin(e),this.maximum_!=e){var t=this.isChanging_;this.isChanging_=!0,this.maximum_=e,e<this.value_+this.extent_&&this.setValue(e-this.extent_),e<this.minimum_&&(this.extent_=0,this.setMinimum(e),this.setValue(this.maximum_)),e<this.minimum_+this.extent_&&(this.extent_=this.maximum_-this.minimum_),(this.isChanging_=t)||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE)}},goog.ui.RangeModel.prototype.getMaximum=function(){return this.roundToStepWithMin(this.maximum_)},goog.ui.RangeModel.prototype.getStep=function(){return this.step_},goog.ui.RangeModel.prototype.setStep=function(e){this.step_!=e&&(this.step_=e,e=this.isChanging_,this.isChanging_=!0,this.setMaximum(this.getMaximum()),this.setExtent(this.getExtent()),this.setValue(this.getValue()),(this.isChanging_=e)||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))},goog.ui.RangeModel.prototype.roundToStepWithMin=function(e){return null==this.step_?e:this.minimum_+Math.round((e-this.minimum_)/this.step_)*this.step_},goog.ui.RangeModel.prototype.roundToStep=function(e){return null==this.step_?e:Math.round(e/this.step_)*this.step_},goog.ui.SliderBase=function(e,t){goog.ui.Component.call(this,e),this.additionalAnimations_=null,this.rangeModel=new goog.ui.RangeModel,this.labelFn_=t||goog.functions.NULL,this.focusElementOnSliderDrag_=!0,goog.events.listen(this.rangeModel,goog.ui.Component.EventType.CHANGE,this.handleRangeModelChange,!1,this)},goog.inherits(goog.ui.SliderBase,goog.ui.Component),goog.tagUnsealableClass(goog.ui.SliderBase),goog.ui.SliderBase.EventType={DRAG_VALUE_START:goog.events.getUniqueId("dragvaluestart"),DRAG_VALUE_END:goog.events.getUniqueId("dragvalueend"),DRAG_EXTENT_START:goog.events.getUniqueId("dragextentstart"),DRAG_EXTENT_END:goog.events.getUniqueId("dragextentend"),DRAG_START:goog.events.getUniqueId("dragstart"),DRAG_END:goog.events.getUniqueId("dragend"),ANIMATION_END:goog.events.getUniqueId("animationend")},goog.ui.SliderBase.Orientation={VERTICAL:"vertical",HORIZONTAL:"horizontal"},goog.ui.SliderBase.prototype.orientation_=goog.ui.SliderBase.Orientation.HORIZONTAL,goog.ui.SliderBase.MOUSE_DOWN_INCREMENT_INTERVAL_=200,goog.ui.SliderBase.ANIMATION_INTERVAL_=100,goog.ui.SliderBase.prototype.isAnimating_=!1,goog.ui.SliderBase.prototype.moveToPointEnabled_=!1,goog.ui.SliderBase.prototype.blockIncrement_=10,goog.ui.SliderBase.prototype.minExtent_=0,goog.ui.SliderBase.prototype.isHandleMouseWheel_=!0,goog.ui.SliderBase.prototype.mouseDownTime_=0,goog.ui.SliderBase.prototype.MOUSE_DOWN_DELAY_=1e3,goog.ui.SliderBase.prototype.enabled_=!0,goog.ui.SliderBase.prototype.flipForRtl_=!1,goog.ui.SliderBase.prototype.enableFlipForRtl=function(e){this.flipForRtl_=e},goog.ui.SliderBase.prototype.getCssClass=goog.abstractMethod,goog.ui.SliderBase.prototype.createDom=function(){goog.ui.SliderBase.superClass_.createDom.call(this);var e=this.getDomHelper().createDom("DIV",this.getCssClass(this.orientation_));this.decorateInternal(e)},goog.ui.SliderBase.prototype.createThumbs=goog.abstractMethod,goog.ui.SliderBase.SLIDER_DRAGGING_CSS_CLASS_="goog-slider-dragging",goog.ui.SliderBase.THUMB_DRAGGING_CSS_CLASS_="goog-slider-thumb-dragging",goog.ui.SliderBase.DISABLED_CSS_CLASS_="goog-slider-disabled",goog.ui.SliderBase.prototype.decorateInternal=function(e){goog.ui.SliderBase.superClass_.decorateInternal.call(this,e),goog.asserts.assert(e),goog.dom.classlist.add(e,this.getCssClass(this.orientation_)),this.createThumbs(),this.setAriaRoles()},goog.ui.SliderBase.prototype.enterDocument=function(){goog.ui.SliderBase.superClass_.enterDocument.call(this),this.valueDragger_=new goog.fx.Dragger(this.valueThumb),this.extentDragger_=new goog.fx.Dragger(this.extentThumb),this.valueDragger_.enableRightPositioningForRtl(this.flipForRtl_),this.extentDragger_.enableRightPositioningForRtl(this.flipForRtl_),this.valueDragger_.defaultAction=this.extentDragger_.defaultAction=goog.nullFunction,this.keyHandler_=new goog.events.KeyHandler(this.getElement()),this.enableEventHandlers_(!0),this.getElement().tabIndex=0,this.updateUi_()},goog.ui.SliderBase.prototype.enableEventHandlers_=function(e){e?(this.getHandler().listen(this.valueDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).listen(this.extentDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).listen(this.valueDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).listen(this.extentDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).listen(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,this.handleKeyDown_).listen(this.getElement(),goog.events.EventType.CLICK,this.handleMouseDownAndClick_).listen(this.getElement(),goog.events.EventType.MOUSEDOWN,this.handleMouseDownAndClick_),this.isHandleMouseWheel()&&this.enableMouseWheelHandling_(!0)):(this.getHandler().unlisten(this.valueDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).unlisten(this.extentDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).unlisten(this.valueDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).unlisten(this.extentDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).unlisten(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,this.handleKeyDown_).unlisten(this.getElement(),goog.events.EventType.CLICK,this.handleMouseDownAndClick_).unlisten(this.getElement(),goog.events.EventType.MOUSEDOWN,this.handleMouseDownAndClick_),this.isHandleMouseWheel()&&this.enableMouseWheelHandling_(!1))},goog.ui.SliderBase.prototype.exitDocument=function(){goog.ui.SliderBase.superClass_.exitDocument.call(this),goog.disposeAll(this.valueDragger_,this.extentDragger_,this.keyHandler_,this.mouseWheelHandler_)},goog.ui.SliderBase.prototype.handleBeforeDrag_=function(e){var t=e.dragger==this.valueDragger_?this.valueThumb:this.extentThumb;if(this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL){var n=this.getElement().clientHeight-t.offsetHeight;n=(n-e.top)/n*(this.getMaximum()-this.getMinimum())+this.getMinimum()}else n=this.getElement().clientWidth-t.offsetWidth,n=e.left/n*(this.getMaximum()-this.getMinimum())+this.getMinimum();n=e.dragger==this.valueDragger_?Math.min(Math.max(n,this.getMinimum()),this.getValue()+this.getExtent()):Math.min(Math.max(n,this.getValue()),this.getMaximum()),this.setThumbPosition_(t,n)},goog.ui.SliderBase.prototype.handleThumbDragStartEnd_=function(e){var t=e.type==goog.fx.Dragger.EventType.START;goog.dom.classlist.enable(goog.asserts.assertElement(this.getElement()),goog.ui.SliderBase.SLIDER_DRAGGING_CSS_CLASS_,t),goog.dom.classlist.enable(goog.asserts.assertElement(e.target.handle),goog.ui.SliderBase.THUMB_DRAGGING_CSS_CLASS_,t),e=e.dragger==this.valueDragger_,t?(this.dispatchEvent(goog.ui.SliderBase.EventType.DRAG_START),this.dispatchEvent(e?goog.ui.SliderBase.EventType.DRAG_VALUE_START:goog.ui.SliderBase.EventType.DRAG_EXTENT_START)):(this.dispatchEvent(goog.ui.SliderBase.EventType.DRAG_END),this.dispatchEvent(e?goog.ui.SliderBase.EventType.DRAG_VALUE_END:goog.ui.SliderBase.EventType.DRAG_EXTENT_END))},goog.ui.SliderBase.prototype.handleKeyDown_=function(e){var t=!0;switch(e.keyCode){case goog.events.KeyCodes.HOME:this.animatedSetValue(this.getMinimum());break;case goog.events.KeyCodes.END:this.animatedSetValue(this.getMaximum());break;case goog.events.KeyCodes.PAGE_UP:this.moveThumbs(this.getBlockIncrement());break;case goog.events.KeyCodes.PAGE_DOWN:this.moveThumbs(-this.getBlockIncrement());break;case goog.events.KeyCodes.LEFT:var n=this.flipForRtl_&&this.isRightToLeft()?1:-1;this.moveThumbs(e.shiftKey?n*this.getBlockIncrement():n*this.getUnitIncrement());break;case goog.events.KeyCodes.DOWN:this.moveThumbs(e.shiftKey?-this.getBlockIncrement():-this.getUnitIncrement());break;case goog.events.KeyCodes.RIGHT:n=this.flipForRtl_&&this.isRightToLeft()?-1:1,this.moveThumbs(e.shiftKey?n*this.getBlockIncrement():n*this.getUnitIncrement());break;case goog.events.KeyCodes.UP:this.moveThumbs(e.shiftKey?this.getBlockIncrement():this.getUnitIncrement());break;default:t=!1}t&&e.preventDefault()},goog.ui.SliderBase.prototype.handleMouseDownAndClick_=function(e){this.focusElementOnSliderDrag_&&this.getElement().focus&&this.getElement().focus();var t=e.target;goog.dom.contains(this.valueThumb,t)||goog.dom.contains(this.extentThumb,t)||((t=e.type==goog.events.EventType.CLICK)&&goog.now()<this.mouseDownTime_+this.MOUSE_DOWN_DELAY_||(t||(this.mouseDownTime_=goog.now()),this.moveToPointEnabled_?this.animatedSetValue(this.getValueFromMousePosition(e)):this.startBlockIncrementing_(e)))},goog.ui.SliderBase.prototype.handleMouseWheel_=function(e){this.moveThumbs((0<e.detail?-1:1)*this.getUnitIncrement()),e.preventDefault()},goog.ui.SliderBase.prototype.startBlockIncrementing_=function(e){this.storeMousePos_(e),this.thumbToMove_=this.getClosestThumb_(this.getValueFromMousePosition(e)),this.incrementing_=this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?this.lastMousePosition_<this.thumbToMove_.offsetTop:this.lastMousePosition_>this.getOffsetStart_(this.thumbToMove_)+this.thumbToMove_.offsetWidth,e=goog.dom.getOwnerDocument(this.getElement()),this.getHandler().listen(e,goog.events.EventType.MOUSEUP,this.stopBlockIncrementing_,!0).listen(this.getElement(),goog.events.EventType.MOUSEMOVE,this.storeMousePos_),this.incTimer_||(this.incTimer_=new goog.Timer(goog.ui.SliderBase.MOUSE_DOWN_INCREMENT_INTERVAL_),this.getHandler().listen(this.incTimer_,goog.Timer.TICK,this.handleTimerTick_)),this.handleTimerTick_(),this.incTimer_.start()},goog.ui.SliderBase.prototype.handleTimerTick_=function(){var e;if(this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL){var t=this.lastMousePosition_,n=this.thumbToMove_.offsetTop;this.incrementing_?t<n&&(e=this.getThumbPosition_(this.thumbToMove_)+this.getBlockIncrement()):t>n+this.thumbToMove_.offsetHeight&&(e=this.getThumbPosition_(this.thumbToMove_)-this.getBlockIncrement())}else t=this.lastMousePosition_,n=this.getOffsetStart_(this.thumbToMove_),this.incrementing_?t>n+this.thumbToMove_.offsetWidth&&(e=this.getThumbPosition_(this.thumbToMove_)+this.getBlockIncrement()):t<n&&(e=this.getThumbPosition_(this.thumbToMove_)-this.getBlockIncrement());void 0!==e&&this.setThumbPosition_(this.thumbToMove_,e)},goog.ui.SliderBase.prototype.stopBlockIncrementing_=function(){this.incTimer_&&this.incTimer_.stop();var e=goog.dom.getOwnerDocument(this.getElement());this.getHandler().unlisten(e,goog.events.EventType.MOUSEUP,this.stopBlockIncrementing_,!0).unlisten(this.getElement(),goog.events.EventType.MOUSEMOVE,this.storeMousePos_)},goog.ui.SliderBase.prototype.getRelativeMousePos_=function(e){return e=goog.style.getRelativePosition(e,this.getElement()),this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?e.y:this.flipForRtl_&&this.isRightToLeft()?this.getElement().clientWidth-e.x:e.x},goog.ui.SliderBase.prototype.storeMousePos_=function(e){this.lastMousePosition_=this.getRelativeMousePos_(e)},goog.ui.SliderBase.prototype.getValueFromMousePosition=function(e){var t=this.getMinimum(),n=this.getMaximum();if(this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL){var o=this.valueThumb.offsetHeight,r=this.getElement().clientHeight-o;return(n-t)*(r-(e=this.getRelativeMousePos_(e)-o/2))/r+t}return o=this.valueThumb.offsetWidth,r=this.getElement().clientWidth-o,(n-t)*(e=this.getRelativeMousePos_(e)-o/2)/r+t},goog.ui.SliderBase.prototype.getThumbPosition_=function(e){if(e==this.valueThumb)return this.rangeModel.getValue();if(e==this.extentThumb)return this.rangeModel.getValue()+this.rangeModel.getExtent();throw Error("Illegal thumb element. Neither minThumb nor maxThumb")},goog.ui.SliderBase.prototype.isDragging=function(){return this.valueDragger_.isDragging()||this.extentDragger_.isDragging()},goog.ui.SliderBase.prototype.moveThumbs=function(e){Math.abs(e)<this.getStep()&&(e=goog.math.sign(e)*this.getStep());var t=this.getThumbPosition_(this.valueThumb)+e;e=this.getThumbPosition_(this.extentThumb)+e,t=goog.math.clamp(t,this.getMinimum(),this.getMaximum()-this.minExtent_),e=goog.math.clamp(e,this.getMinimum()+this.minExtent_,this.getMaximum()),this.setValueAndExtent(t,e-t)},goog.ui.SliderBase.prototype.setThumbPosition_=function(e,t){var n=this.rangeModel.roundToStepWithMin(t);t=e==this.valueThumb?n:this.rangeModel.getValue(),e=e==this.extentThumb?n:this.rangeModel.getValue()+this.rangeModel.getExtent(),t>=this.getMinimum()&&e>=t+this.minExtent_&&this.getMaximum()>=e&&this.setValueAndExtent(t,e-t)},goog.ui.SliderBase.prototype.setValueAndExtent=function(e,t){this.getMinimum()<=e&&e<=this.getMaximum()-t&&this.minExtent_<=t&&t<=this.getMaximum()-e&&(e!=this.getValue()||t!=this.getExtent())&&(this.rangeModel.setMute(!0),this.rangeModel.setExtent(0),this.rangeModel.setValue(e),this.rangeModel.setExtent(t),this.rangeModel.setMute(!1),this.handleRangeModelChange(null))},goog.ui.SliderBase.prototype.getMinimum=function(){return this.rangeModel.getMinimum()},goog.ui.SliderBase.prototype.setMinimum=function(e){this.rangeModel.setMinimum(e)},goog.ui.SliderBase.prototype.getMaximum=function(){return this.rangeModel.getMaximum()},goog.ui.SliderBase.prototype.setMaximum=function(e){this.rangeModel.setMaximum(e)},goog.ui.SliderBase.prototype.getValueThumb=function(){return this.valueThumb},goog.ui.SliderBase.prototype.getExtentThumb=function(){return this.extentThumb},goog.ui.SliderBase.prototype.getClosestThumb_=function(e){return e<=this.rangeModel.getValue()+this.rangeModel.getExtent()/2?this.valueThumb:this.extentThumb},goog.ui.SliderBase.prototype.handleRangeModelChange=function(e){this.updateUi_(),this.updateAriaStates(),this.dispatchEvent(goog.ui.Component.EventType.CHANGE)},goog.ui.SliderBase.prototype.updateUi_=function(){if(this.valueThumb&&!this.isAnimating_){var e=this.getThumbCoordinateForValue(this.getThumbPosition_(this.valueThumb)),t=this.getThumbCoordinateForValue(this.getThumbPosition_(this.extentThumb));if(this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL)this.valueThumb.style.top=e.y+"px",this.extentThumb.style.top=t.y+"px",this.rangeHighlight&&(e=this.calculateRangeHighlightPositioning_(t.y,e.y,this.valueThumb.offsetHeight),this.rangeHighlight.style.top=e.offset+"px",this.rangeHighlight.style.height=e.size+"px");else{var n=this.flipForRtl_&&this.isRightToLeft()?"right":"left";this.valueThumb.style[n]=e.x+"px",this.extentThumb.style[n]=t.x+"px",this.rangeHighlight&&(e=this.calculateRangeHighlightPositioning_(e.x,t.x,this.valueThumb.offsetWidth),this.rangeHighlight.style[n]=e.offset+"px",this.rangeHighlight.style.width=e.size+"px")}}},goog.ui.SliderBase.prototype.calculateRangeHighlightPositioning_=function(e,t,n){var o=Math.ceil(n/2);return{offset:e+o,size:Math.max(t-e+n-2*o,0)}},goog.ui.SliderBase.prototype.getThumbCoordinateForValue=function(e){var t=new goog.math.Coordinate;if(this.valueThumb){var n=this.getMinimum(),o=this.getMaximum();e=e==n&&n==o?0:(e-n)/(o-n),this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?(n=this.valueThumb.offsetHeight,n=this.getElement().clientHeight-n,e=Math.round(e*n),t.x=this.moveToPointEnabled_?0:this.getOffsetStart_(this.valueThumb),t.y=n-e):(n=this.getElement().clientWidth-this.valueThumb.offsetWidth,t.x=Math.round(e*n),t.y=this.moveToPointEnabled_?0:this.valueThumb.offsetTop)}return t},goog.ui.SliderBase.prototype.animatedSetValue=function(e){e=goog.math.clamp(e,this.getMinimum(),this.getMaximum()),this.isAnimating_&&(this.currentAnimation_.stop(!0),this.currentAnimation_.dispose());var t=new goog.fx.AnimationParallelQueue,n=this.getClosestThumb_(e),o=this.getValue(),r=this.getExtent(),i=this.getThumbPosition_(n),s=this.getThumbCoordinateForValue(i),a=this.getStep();Math.abs(e-i)<a&&(e=goog.math.clamp(i+(e>i?a:-a),this.getMinimum(),this.getMaximum())),this.setThumbPosition_(n,e),i=this.getThumbCoordinateForValue(this.getThumbPosition_(n)),a=this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?[this.getOffsetStart_(n),i.y]:[i.x,n.offsetTop],(s=new goog.fx.dom.Slide(n,[s.x,s.y],a,goog.ui.SliderBase.ANIMATION_INTERVAL_)).enableRightPositioningForRtl(this.flipForRtl_),t.add(s),this.rangeHighlight&&this.addRangeHighlightAnimations_(n,o,r,i,t),this.additionalAnimations_&&(e=this.additionalAnimations_.createAnimations(o,e,goog.ui.SliderBase.ANIMATION_INTERVAL_),goog.array.forEach(e,(function(e){t.add(e)}))),this.currentAnimation_=t,this.getHandler().listen(t,goog.fx.Transition.EventType.END,this.endAnimation_),this.isAnimating_=!0,t.play(!1)},goog.ui.SliderBase.prototype.isAnimating=function(){return this.isAnimating_},goog.ui.SliderBase.prototype.setAdditionalAnimations=function(e){this.additionalAnimations_=e},goog.ui.SliderBase.prototype.addRangeHighlightAnimations_=function(e,t,n,o,r){var i=this.getThumbCoordinateForValue(t),s=this.getThumbCoordinateForValue(t+n);t=i,n=s,e==this.valueThumb?t=o:n=o,this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?(e=this.calculateRangeHighlightPositioning_(s.y,i.y,this.valueThumb.offsetHeight),i=this.calculateRangeHighlightPositioning_(n.y,t.y,this.valueThumb.offsetHeight),o=new goog.fx.dom.Slide(this.rangeHighlight,[this.getOffsetStart_(this.rangeHighlight),e.offset],[this.getOffsetStart_(this.rangeHighlight),i.offset],goog.ui.SliderBase.ANIMATION_INTERVAL_),e=new goog.fx.dom.ResizeHeight(this.rangeHighlight,e.size,i.size,goog.ui.SliderBase.ANIMATION_INTERVAL_),o.enableRightPositioningForRtl(this.flipForRtl_),e.enableRightPositioningForRtl(this.flipForRtl_),r.add(o),r.add(e)):(e=this.calculateRangeHighlightPositioning_(i.x,s.x,this.valueThumb.offsetWidth),i=this.calculateRangeHighlightPositioning_(t.x,n.x,this.valueThumb.offsetWidth),o=new goog.fx.dom.Slide(this.rangeHighlight,[e.offset,this.rangeHighlight.offsetTop],[i.offset,this.rangeHighlight.offsetTop],goog.ui.SliderBase.ANIMATION_INTERVAL_),e=new goog.fx.dom.ResizeWidth(this.rangeHighlight,e.size,i.size,goog.ui.SliderBase.ANIMATION_INTERVAL_),o.enableRightPositioningForRtl(this.flipForRtl_),e.enableRightPositioningForRtl(this.flipForRtl_),r.add(o),r.add(e))},goog.ui.SliderBase.prototype.endAnimation_=function(e){this.isAnimating_=!1,this.dispatchEvent(goog.ui.SliderBase.EventType.ANIMATION_END)},goog.ui.SliderBase.prototype.setOrientation=function(e){if(this.orientation_!=e){var t=this.getCssClass(this.orientation_),n=this.getCssClass(e);this.orientation_=e,this.getElement()&&(goog.dom.classlist.swap(goog.asserts.assert(this.getElement()),t,n),e=this.flipForRtl_&&this.isRightToLeft()?"right":"left",this.valueThumb.style[e]=this.valueThumb.style.top="",this.extentThumb.style[e]=this.extentThumb.style.top="",this.rangeHighlight&&(this.rangeHighlight.style[e]=this.rangeHighlight.style.top="",this.rangeHighlight.style.width=this.rangeHighlight.style.height=""),this.updateUi_())}},goog.ui.SliderBase.prototype.getOrientation=function(){return this.orientation_},goog.ui.SliderBase.prototype.disposeInternal=function(){goog.ui.SliderBase.superClass_.disposeInternal.call(this),this.incTimer_&&this.incTimer_.dispose(),delete this.incTimer_,this.currentAnimation_&&this.currentAnimation_.dispose(),delete this.currentAnimation_,delete this.valueThumb,delete this.extentThumb,this.rangeHighlight&&delete this.rangeHighlight,this.rangeModel.dispose(),delete this.rangeModel,this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_),this.mouseWheelHandler_&&(this.mouseWheelHandler_.dispose(),delete this.mouseWheelHandler_),this.valueDragger_&&(this.valueDragger_.dispose(),delete this.valueDragger_),this.extentDragger_&&(this.extentDragger_.dispose(),delete this.extentDragger_)},goog.ui.SliderBase.prototype.getBlockIncrement=function(){return this.blockIncrement_},goog.ui.SliderBase.prototype.setBlockIncrement=function(e){this.blockIncrement_=e},goog.ui.SliderBase.prototype.setMinExtent=function(e){this.minExtent_=e},goog.ui.SliderBase.prototype.unitIncrement_=1,goog.ui.SliderBase.prototype.getUnitIncrement=function(){return this.unitIncrement_},goog.ui.SliderBase.prototype.setUnitIncrement=function(e){this.unitIncrement_=e},goog.ui.SliderBase.prototype.getStep=function(){return this.rangeModel.getStep()},goog.ui.SliderBase.prototype.setStep=function(e){this.rangeModel.setStep(e)},goog.ui.SliderBase.prototype.getMoveToPointEnabled=function(){return this.moveToPointEnabled_},goog.ui.SliderBase.prototype.setMoveToPointEnabled=function(e){this.moveToPointEnabled_=e},goog.ui.SliderBase.prototype.getValue=function(){return this.rangeModel.getValue()},goog.ui.SliderBase.prototype.setValue=function(e){this.setThumbPosition_(this.valueThumb,e)},goog.ui.SliderBase.prototype.getExtent=function(){return this.rangeModel.getExtent()},goog.ui.SliderBase.prototype.setExtent=function(e){this.setThumbPosition_(this.extentThumb,this.rangeModel.getValue()+e)},goog.ui.SliderBase.prototype.setVisible=function(e){goog.style.setElementShown(this.getElement(),e),e&&this.updateUi_()},goog.ui.SliderBase.prototype.setAriaRoles=function(){var e=this.getElement();goog.asserts.assert(e,"The DOM element for the slider base cannot be null."),goog.a11y.aria.setRole(e,goog.a11y.aria.Role.SLIDER),this.updateAriaStates()},goog.ui.SliderBase.prototype.updateAriaStates=function(){var e=this.getElement();e&&(goog.a11y.aria.setState(e,goog.a11y.aria.State.VALUEMIN,this.getMinimum()),goog.a11y.aria.setState(e,goog.a11y.aria.State.VALUEMAX,this.getMaximum()),goog.a11y.aria.setState(e,goog.a11y.aria.State.VALUENOW,this.getValue()),goog.a11y.aria.setState(e,goog.a11y.aria.State.VALUETEXT,this.getTextValue()||""))},goog.ui.SliderBase.prototype.setHandleMouseWheel=function(e){this.isInDocument()&&e!=this.isHandleMouseWheel()&&this.enableMouseWheelHandling_(e),this.isHandleMouseWheel_=e},goog.ui.SliderBase.prototype.isHandleMouseWheel=function(){return this.isHandleMouseWheel_},goog.ui.SliderBase.prototype.enableMouseWheelHandling_=function(e){e?(this.mouseWheelHandler_||(this.mouseWheelHandler_=new goog.events.MouseWheelHandler(this.getElement())),this.getHandler().listen(this.mouseWheelHandler_,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.handleMouseWheel_,{passive:!1})):this.getHandler().unlisten(this.mouseWheelHandler_,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.handleMouseWheel_,{passive:!1})},goog.ui.SliderBase.prototype.setEnabled=function(e){this.enabled_!=e&&this.dispatchEvent(e?goog.ui.Component.EventType.ENABLE:goog.ui.Component.EventType.DISABLE)&&(this.enabled_=e,this.enableEventHandlers_(e),e||this.stopBlockIncrementing_(),goog.dom.classlist.enable(goog.asserts.assert(this.getElement()),goog.ui.SliderBase.DISABLED_CSS_CLASS_,!e))},goog.ui.SliderBase.prototype.isEnabled=function(){return this.enabled_},goog.ui.SliderBase.prototype.getOffsetStart_=function(e){return this.flipForRtl_?goog.style.bidi.getOffsetStart(e):e.offsetLeft},goog.ui.SliderBase.prototype.getTextValue=function(){return this.labelFn_(this.getValue())},goog.ui.SliderBase.prototype.setFocusElementOnSliderDrag=function(e){this.focusElementOnSliderDrag_=e},goog.ui.SliderBase.AnimationFactory=function(){},goog.ui.Slider=function(e,t){goog.ui.SliderBase.call(this,e,t),this.rangeModel.setExtent(0)},goog.inherits(goog.ui.Slider,goog.ui.SliderBase),goog.tagUnsealableClass(goog.ui.Slider),goog.ui.Slider.Orientation=goog.ui.SliderBase.Orientation,goog.ui.Slider.CSS_CLASS_PREFIX="goog-slider",goog.ui.Slider.THUMB_CSS_CLASS=goog.ui.Slider.CSS_CLASS_PREFIX+"-thumb",goog.ui.Slider.prototype.getCssClass=function(e){return e==goog.ui.SliderBase.Orientation.VERTICAL?goog.ui.Slider.CSS_CLASS_PREFIX+"-vertical":goog.ui.Slider.CSS_CLASS_PREFIX+"-horizontal"},goog.ui.Slider.prototype.getThumbCssClass=function(){return goog.ui.Slider.THUMB_CSS_CLASS},goog.ui.Slider.prototype.createThumbs=function(){var e=this.getElement(),t=goog.dom.getElementsByTagNameAndClass(null,this.getThumbCssClass(),e)[0];t||(t=this.createThumb_(),e.appendChild(t)),this.valueThumb=this.extentThumb=t},goog.ui.Slider.prototype.createThumb_=function(){var e=this.getDomHelper().createDom("DIV",this.getThumbCssClass());return goog.a11y.aria.setRole(e,goog.a11y.aria.Role.BUTTON),e},Blockly.FieldColourSlider=function(e,t){Blockly.FieldColourSlider.superClass_.constructor.call(this,e,t),this.addArgType("colour")},Blockly.utils.object.inherits(Blockly.FieldColourSlider,Blockly.Field),Blockly.FieldColourSlider.fromJson=function(e){return new Blockly.FieldColourSlider(e.colour)},Blockly.FieldColourSlider.prototype.init=function(e){Blockly.FieldColourSlider.superClass_.init.call(this,e),this.setValue(this.getValue())},Blockly.FieldColourSlider.prototype.getValue=function(){return this.colour_},Blockly.FieldColourSlider.prototype.setValue=function(e){this.sourceBlock_&&Blockly.Events.isEnabled()&&this.colour_!=e&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.colour_,e)),this.colour_=e,this.sourceBlock_&&this.sourceBlock_.setColour(e,e,this.sourceBlock_.style.colourTertiary),this.updateSliderHandles_(),this.updateDom_()},Blockly.FieldColourSlider.prototype.createColourStops_=function(e){for(var t=[],n=0;360>=n;n+=20)switch(e){case"hue":t.push(Blockly.utils.colour.hsvToHex(n,this.saturation_,this.brightness_));break;case"saturation":t.push(Blockly.utils.colour.hsvToHex(this.hue_,n/360,this.brightness_));break;case"brightness":t.push(Blockly.utils.colour.hsvToHex(this.hue_,this.saturation_,255*n/360));break;default:throw Error("Unknown channel for colour sliders: "+e)}return t},Blockly.FieldColourSlider.prototype.setGradient_=function(e,t){t=this.createColourStops_(t).join(","),goog.style.setStyle(e,"background","-moz-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","-webkit-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","-o-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","-ms-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","linear-gradient(left, "+t+")")},Blockly.FieldColourSlider.prototype.updateDom_=function(){this.hueSlider_&&(this.setGradient_(this.hueSlider_.getElement(),"hue"),this.setGradient_(this.saturationSlider_.getElement(),"saturation"),this.setGradient_(this.brightnessSlider_.getElement(),"brightness"),this.hueReadout_.textContent=Math.floor(100*this.hue_/360).toFixed(0),this.saturationReadout_.textContent=Math.floor(100*this.saturation_).toFixed(0),this.brightnessReadout_.textContent=Math.floor(100*this.brightness_/255).toFixed(0))},Blockly.FieldColourSlider.prototype.updateSliderHandles_=function(){this.hueSlider_&&(this.hueSlider_.setValue(this.hue_),this.saturationSlider_.setValue(this.saturation_),this.brightnessSlider_.setValue(this.brightness_))},Blockly.FieldColourSlider.prototype.getText=function(){var e=this.colour_,t=e.match(/^#(.)\1(.)\2(.)\3$/);return t&&(e="#"+t[1]+t[2]+t[3]),e},Blockly.FieldColourSlider.prototype.createLabelDom_=function(e){var t=document.createElement("div");t.setAttribute("class","blocklyColourPickerLabel");var n=document.createElement("span");n.setAttribute("class","blocklyColourPickerReadout");var o=document.createElement("span");return o.setAttribute("class","blocklyColourPickerLabelText"),o.textContent=e,t.appendChild(o),t.appendChild(n),[t,n]},Blockly.FieldColourSlider.prototype.sliderCallbackFactory_=function(e){var t=this;return function(n){n=n.target.getValue();var o=Blockly.utils.colour.hexToHsv(t.getValue());switch(e){case"hue":o[0]=t.hue_=n;break;case"saturation":o[1]=t.saturation_=n;break;case"brightness":o[2]=t.brightness_=n}null!==(n=Blockly.utils.colour.hsvToHex(o[0],o[1],o[2]))&&t.setValue(n,!0)}},Blockly.FieldColourSlider.prototype.showEditor_=function(){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var e=Blockly.DropDownDiv.getContentDiv(),t=Blockly.utils.colour.hexToHsv(this.getValue());this.hue_=t[0],this.saturation_=t[1],this.brightness_=t[2],t=this.createLabelDom_("Hue"),e.appendChild(t[0]),this.hueReadout_=t[1],this.hueSlider_=new goog.ui.Slider,this.hueSlider_.setUnitIncrement(5),this.hueSlider_.setMinimum(0),this.hueSlider_.setMaximum(360),this.hueSlider_.render(e),t=this.createLabelDom_("Saturation"),e.appendChild(t[0]),this.saturationReadout_=t[1],this.saturationSlider_=new goog.ui.Slider,this.saturationSlider_.setUnitIncrement(.01),this.saturationSlider_.setStep(.001),this.saturationSlider_.setMinimum(0),this.saturationSlider_.setMaximum(1),this.saturationSlider_.render(e),t=this.createLabelDom_("Brightness"),e.appendChild(t[0]),this.brightnessReadout_=t[1],this.brightnessSlider_=new goog.ui.Slider,this.brightnessSlider_.setUnitIncrement(2),this.brightnessSlider_.setMinimum(0),this.brightnessSlider_.setMaximum(255),this.brightnessSlider_.render(e),Blockly.FieldColourSlider.hueChangeEventKey_=goog.events.listen(this.hueSlider_,goog.ui.Component.EventType.CHANGE,this.sliderCallbackFactory_("hue")),Blockly.FieldColourSlider.saturationChangeEventKey_=goog.events.listen(this.saturationSlider_,goog.ui.Component.EventType.CHANGE,this.sliderCallbackFactory_("saturation")),Blockly.FieldColourSlider.brightnessChangeEventKey_=goog.events.listen(this.brightnessSlider_,goog.ui.Component.EventType.CHANGE,this.sliderCallbackFactory_("brightness")),Blockly.DropDownDiv.setColour("#ffffff","#dddddd"),Blockly.DropDownDiv.setCategory(this.sourceBlock_.parentBlock_.getCategory()),Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_),this.setValue(this.getValue())},Blockly.FieldColourSlider.prototype.dispose=function(){Blockly.FieldColourSlider.hueChangeEventKey_&&goog.events.unlistenByKey(Blockly.FieldColourSlider.hueChangeEventKey_),Blockly.FieldColourSlider.saturationChangeEventKey_&&goog.events.unlistenByKey(Blockly.FieldColourSlider.saturationChangeEventKey_),Blockly.FieldColourSlider.brightnessChangeEventKey_&&goog.events.unlistenByKey(Blockly.FieldColourSlider.brightnessChangeEventKey_),Blockly.Events.setGroup(!1),Blockly.FieldColourSlider.superClass_.dispose.call(this)},Blockly.fieldRegistry.register("field_colour_slider",Blockly.FieldColourSlider),Blockly.MenuSeparator=function(){this.element_=null,this.rightToLeft_=!1,this.colour_="#ddd"},Blockly.MenuSeparator.prototype.dispose=function(){this.element_=null},Blockly.MenuSeparator.prototype.getElement=function(){return this.element_},Blockly.MenuSeparator.prototype.getId=function(){return this.element_.id},Blockly.MenuSeparator.prototype.setRightToLeft=function(e){this.rightToLeft_=e},Blockly.MenuSeparator.prototype.setColour=function(e){this.colour_=e},Blockly.MenuSeparator.prototype.createDom=function(){var e=document.createElement("div");return e.id=Blockly.utils.IdGenerator.getNextUniqueId(),this.element_=e,e.className="goog-menuseparator "+(this.rightToLeft_?"goog-menuseparator-rtl ":""),e.style.borderColor=this.colour_,Blockly.utils.aria.setRole(e,Blockly.utils.aria.Role.SEPARATOR),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.DISABLED,!0),e},Blockly.MenuSeparator.prototype.isEnabled=function(){return!1},Blockly.FieldDropdown=function(e,t,n){"function"!=typeof e&&Blockly.FieldDropdown.validateOptions_(e),this.menuGenerator_=e,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],Blockly.FieldDropdown.superClass_.constructor.call(this,this.selectedOption_[1],t,n),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null,this.addArgType("dropdown")},Blockly.utils.object.inherits(Blockly.FieldDropdown,Blockly.Field),Blockly.FieldDropdown.fromJson=function(e){return new Blockly.FieldDropdown(e.options,void 0,e)},Blockly.FieldDropdown.prototype.EDITABLE=!1,Blockly.FieldDropdown.prototype.fromXml=function(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)},Blockly.FieldDropdown.prototype.SERIALIZABLE=!0,Blockly.FieldDropdown.CHECKMARK_OVERHANG=25,Blockly.FieldDropdown.MAX_MENU_HEIGHT_VH=.45,Blockly.FieldDropdown.IMAGE_Y_OFFSET=5,Blockly.FieldDropdown.IMAGE_Y_PADDING=2*Blockly.FieldDropdown.IMAGE_Y_OFFSET,Blockly.FieldDropdown.ARROW_CHAR=Blockly.utils.userAgent.ANDROID?"":"",Blockly.FieldDropdown.prototype.CURSOR="pointer",Blockly.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&Blockly.utils.dom.addClass(this.borderRect_,"blocklyDropdownRect")},Blockly.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},Blockly.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?Blockly.FieldDropdown.ARROW_CHAR+" ":" "+Blockly.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},Blockly.FieldDropdown.prototype.createSVGArrow_=function(){var e=Blockly.utils.userAgent.IE||Blockly.utils.userAgent.IOS,t=e?"image":"use";e=e?this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI:"#"+(this.constants_.dropdownArrowImageId||"blocklyDropdownArrowSvg"),this.svgArrow_=Blockly.utils.dom.createSvgElement(t,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",e)},Blockly.FieldDropdown.prototype.showEditor_=function(e){if(this.dropdownCreate_(),this.menu_.openingCoords=e&&"number"==typeof e.clientX?new Blockly.utils.Coordinate(e.clientX,e.clientY):null,this.menu_.render(Blockly.DropDownDiv.getContentDiv()),e=this.menu_.getElement(),Blockly.utils.dom.addClass(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){e=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var t=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;Blockly.DropDownDiv.setColour(e,t)}Blockly.DropDownDiv.showPositionedByField(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()};let iface;var pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly;Blockly.FieldDropdown.prototype.dropdownCreate_=function(){var e=new Blockly.Menu;e.setRole(Blockly.utils.aria.Role.LISTBOX),this.menu_=e;var t=this.getOptions(!1);this.selectedMenuItem_=null;for(var n=0;n<t.length;n++){var o=t[n][0],r=t[n][1];if("SEPARATOR"===r)(o=new Blockly.MenuSeparator).setRightToLeft(this.sourceBlock_.RTL),o.setColour(this.sourceBlock_.style.colourTertiary),e.addChild(o);else{if("object"==typeof o){var i=new Image(o.width,o.height);i.src=o.src,i.alt=o.alt||"",o=i}(o=new Blockly.MenuItem(o,r)).setRole(Blockly.utils.aria.Role.OPTION),o.setRightToLeft(this.sourceBlock_.RTL),o.setCheckable(!0),e.addChild(o),o.setChecked(r==this.value_),r==this.value_&&(this.selectedMenuItem_=o),o.onAction(this.handleMenuActionEvent_,this)}}},Blockly.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},Blockly.FieldDropdown.prototype.handleMenuActionEvent_=function(e){Blockly.DropDownDiv.hideIfOwner(this,!0),this.onItemSelected_(this.menu_,e)},Blockly.FieldDropdown.prototype.onItemSelected_=function(e,t){null!==(e=t.getValue())&&(this.setValue(e),this.sourceBlock_.workspace&&Blockly.Events.fire(new Blockly.Events.Ui(this.sourceBlock_,"itemSelected",void 0,e)))},Blockly.FieldDropdown.prototype.trimOptions_=function(){var e=this.menuGenerator_;if(Array.isArray(e)){for(var t=!1,n=0;n<e.length;n++){var o=e[n][0];"string"==typeof o?e[n][0]=Blockly.utils.replaceMessageReferences(o):(null!=o.alt&&(e[n][0].alt=Blockly.utils.replaceMessageReferences(o.alt)),t=!0)}if(!(t||2>e.length)){for(t=[],n=0;n<e.length;n++)t.push(e[n][0]);n=Blockly.utils.string.shortestStringLength(t),o=Blockly.utils.string.commonWordPrefix(t,n);var r=Blockly.utils.string.commonWordSuffix(t,n);!o&&!r||n<=o+r||(o&&(this.prefixField=t[0].substring(0,o-1)),r&&(this.suffixField=t[0].substr(1-r)),this.menuGenerator_=Blockly.FieldDropdown.applyTrim_(e,o,r))}}},Blockly.FieldDropdown.applyTrim_=function(e,t,n){for(var o=[],r=0;r<e.length;r++){var i=e[r][0],s=e[r][1];i=i.substring(t,i.length-n),o[r]=[i,s]}return o},Blockly.FieldDropdown.prototype.isOptionListDynamic=function(){return"function"==typeof this.menuGenerator_},Blockly.FieldDropdown.prototype.getOptions=function(e){return this.isOptionListDynamic()?(this.generatedOptions_&&e||(this.generatedOptions_=this.menuGenerator_.call(this),Blockly.FieldDropdown.validateOptions_(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},Blockly.FieldDropdown.prototype.doClassValidation_=function(e){for(var t,n=!1,o=this.getOptions(!0),r=0;t=o[r];r++)if(t[1]==e){n=!0;break}return n||this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),e},Blockly.FieldDropdown.prototype.doValueUpdate_=function(e){Blockly.FieldDropdown.superClass_.doValueUpdate_.call(this,e),e=this.getOptions(!0);for(var t,n=0;t=e[n];n++)t[1]==this.value_&&(this.selectedOption_=t)},Blockly.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",this.sourceBlock_.style.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=this.sourceBlock_.style.colourSecondary:this.arrow_.style.fill=this.sourceBlock_.style.colourPrimary)},Blockly.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var e=this.selectedOption_&&this.selectedOption_[0];e&&"object"==typeof e?this.renderSelectedImage_(e):this.renderSelectedText_(),this.positionBorderRect_()},Blockly.FieldDropdown.prototype.renderSelectedImage_=function(e){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",e.src),this.imageElement_.setAttribute("height",e.height),this.imageElement_.setAttribute("width",e.width);var t=Number(e.height);e=Number(e.width);var n=!!this.borderRect_,o=Math.max(n?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,t+Blockly.FieldDropdown.IMAGE_Y_PADDING);n=n?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var r=this.svgArrow_?this.positionSVGArrow_(e+n,o/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):Blockly.utils.dom.getFastTextWidth(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=e+r+2*n,this.size_.height=o;var i=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",n+r):(i=e+r,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",n)),this.imageElement_.setAttribute("y",o/2-t/2),this.positionTextElement_(i+n,e+r)},Blockly.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),Blockly.utils.dom.addClass(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var e=!!this.borderRect_,t=Math.max(e?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),n=Blockly.utils.dom.getFastTextWidth(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);e=e?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var o=0;this.svgArrow_&&(o=this.positionSVGArrow_(n+e,t/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=n+o+2*e,this.size_.height=t,this.positionTextElement_(e,n)},Blockly.FieldDropdown.prototype.positionSVGArrow_=function(e,t){if(!this.svgArrow_)return 0;var n=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,o=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,r=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?n:e+o)+","+t+")"),r+o},Blockly.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var e=this.selectedOption_[0];return"object"==typeof e?e.alt:e},Blockly.FieldDropdown.validateOptions_=function(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var t=!1,n=0;n<e.length;++n){var o=e[n];Array.isArray(o)?"string"!=typeof o[1]?(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option id must be a string. Found "+o[1]+" in: ",o)):o[0]&&"string"!=typeof o[0]&&"string"!=typeof o[0].src&&(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must have a string label or image description. Found"+o[0]+" in: ",o)):(t=!0,console.error("Invalid option["+n+"]: Each FieldDropdown option must be an array. Found: ",o))}if(t)throw TypeError("Found invalid FieldDropdown options.")},Blockly.fieldRegistry.register("field_dropdown",Blockly.FieldDropdown),Blockly.FieldIconMenu=function(e){this.icons_=e,Blockly.FieldIconMenu.superClass_.constructor.call(this,e[0].value),this.addArgType("iconmenu")},Blockly.utils.object.inherits(Blockly.FieldIconMenu,Blockly.Field),Blockly.FieldIconMenu.fromJson=function(e){return new Blockly.FieldIconMenu(e.options)},Blockly.FieldIconMenu.DROPDOWN_WIDTH=168,Blockly.FieldIconMenu.savedPrimary_=null,Blockly.FieldIconMenu.prototype.init=function(e){this.arrowX_=18,this.arrowY_=10,e.RTL&&(this.arrowX_=-this.arrowX_-12),this.arrowIcon_=Blockly.utils.dom.createSvgElement("image",{height:"12px",width:"12px",transform:"translate("+this.arrowX_+","+this.arrowY_+")"}),this.arrowIcon_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"dropdown-arrow.svg"),e.getSvgRoot().appendChild(this.arrowIcon_),Blockly.FieldIconMenu.superClass_.init.call(this,e)},Blockly.FieldIconMenu.prototype.CURSOR="default",Blockly.FieldIconMenu.prototype.setValue=function(e){null!==e&&e!==this.value_&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.Change(this.sourceBlock_,"field",this.name,this.value_,e)),this.value_=e,this.setParentFieldImage(this.getSrcForValue(this.value_)))},Blockly.FieldIconMenu.prototype.setParentFieldImage=function(e){if(this.sourceBlock_&&this.sourceBlock_.parentBlock_)for(var t,n=this.sourceBlock_.parentBlock_,o=0;t=n.inputList[o];o++)for(var r,i=0;r=t.fieldRow[i];i++)if(r instanceof Blockly.FieldImage)return void r.setValue(e)},Blockly.FieldIconMenu.prototype.getValue=function(){return this.value_},Blockly.FieldIconMenu.prototype.getSrcForValue=function(e){for(var t,n=0;t=this.icons_[n];n++)if(t.value===e)return t.src},Blockly.FieldIconMenu.prototype.showEditor_=function(){if(!Blockly.DropDownDiv.hideIfOwner(this)){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var e=Blockly.DropDownDiv.getContentDiv();e.setAttribute("role","menu"),e.setAttribute("aria-haspopup","true");for(var t,n=0;t=this.icons_[n];n++)if("placeholder"==t.type){var o=document.createElement("span");o.setAttribute("class","blocklyDropDownPlaceholder"),o.style.width=t.width+"px",o.style.height=t.height+"px",e.appendChild(o)}else{(o=document.createElement("button")).setAttribute("id",":"+n),o.setAttribute("role","menuitem"),o.setAttribute("class","blocklyDropDownButton"),o.title=t.alt,o.style.width=t.width+"px",o.style.height=t.height+"px";var r=this.sourceBlock_.getColour();t.value==this.getValue()&&(r=this.sourceBlock_.getColourTertiary(),o.setAttribute("aria-selected","true")),o.style.backgroundColor=r,o.style.borderColor=this.sourceBlock_.getColourTertiary(),Blockly.bindEvent_(o,"click",this,this.buttonClick_),Blockly.bindEvent_(o,"mouseup",this,this.buttonClick_),Blockly.bindEvent_(o,"mousedown",o,(function(e){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),e.preventDefault()})),Blockly.bindEvent_(o,"mouseover",o,(function(){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),e.setAttribute("aria-activedescendant",this.id)})),Blockly.bindEvent_(o,"mouseout",o,(function(){this.setAttribute("class","blocklyDropDownButton"),e.removeAttribute("aria-activedescendant")})),(r=document.createElement("img")).src=t.src,o.setAttribute("data-value",t.value),r.setAttribute("data-value",t.value),o.appendChild(r),e.appendChild(o)}e.style.width=Blockly.FieldIconMenu.DROPDOWN_WIDTH+"px",Blockly.DropDownDiv.setColour(this.sourceBlock_.getColour(),this.sourceBlock_.getColourTertiary()),Blockly.DropDownDiv.setCategory(this.sourceBlock_.parentBlock_.getCategory()),this.savedPrimary_=this.sourceBlock_.getColour(),this.sourceBlock_.setColour(this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourTertiary()),n=this.sourceBlock_.workspace.scale,n=-Blockly.BlockSvg.MIN_BLOCK_Y*n-Blockly.BlockSvg.FIELD_Y_OFFSET*n,Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_,this.onHide_.bind(this),n)||this.arrowIcon_.setAttribute("transform","translate("+(this.arrowX_+Blockly.DropDownDiv.ARROW_SIZE/1.5+1)+","+(this.arrowY_+Blockly.DropDownDiv.ARROW_SIZE/1.5)+") rotate(180)")}},Blockly.FieldIconMenu.prototype.buttonClick_=function(e){e=e.target.getAttribute("data-value"),this.setValue(e),Blockly.DropDownDiv.hide()},Blockly.FieldIconMenu.prototype.onHide_=function(){this.sourceBlock_&&this.sourceBlock_.setColour(this.savedPrimary_,this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourTertiary()),Blockly.DropDownDiv.content_.removeAttribute("role"),Blockly.DropDownDiv.content_.removeAttribute("aria-haspopup"),Blockly.DropDownDiv.content_.removeAttribute("aria-activedescendant"),this.arrowIcon_.setAttribute("transform","translate("+this.arrowX_+","+this.arrowY_+")")},Blockly.fieldRegistry.register("field_iconmenu",Blockly.FieldIconMenu),Blockly.FieldLabelSerializable=function(e,t,n){Blockly.FieldLabelSerializable.superClass_.constructor.call(this,e,t,n)},Blockly.utils.object.inherits(Blockly.FieldLabelSerializable,Blockly.FieldLabel),Blockly.FieldLabelSerializable.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text);return new Blockly.FieldLabelSerializable(t,void 0,e)},Blockly.FieldLabelSerializable.prototype.EDITABLE=!1,Blockly.FieldLabelSerializable.prototype.SERIALIZABLE=!0,Blockly.fieldRegistry.register("field_label_serializable",Blockly.FieldLabelSerializable),Blockly.FieldImage=function(e,t,n,o,r,i,s){if(!e)throw Error("Src value of an image field is required");if(e=Blockly.utils.replaceMessageReferences(e),n=Number(Blockly.utils.replaceMessageReferences(n)),t=Number(Blockly.utils.replaceMessageReferences(t)),isNaN(n)||isNaN(t))throw Error("Height and width values of an image field must cast to numbers.");if(0>=n||0>=t)throw Error("Height and width values of an image field must be greater than 0.");this.flipRtl_=!1,this.altText_="",Blockly.FieldImage.superClass_.constructor.call(this,e,null,s),s||(this.flipRtl_=!!i,this.altText_=Blockly.utils.replaceMessageReferences(o)||""),this.size_=new Blockly.utils.Size(t,n+Blockly.FieldImage.Y_PADDING),this.imageHeight_=n,this.clickHandler_=null,"function"==typeof r&&(this.clickHandler_=r),this.imageElement_=null},Blockly.utils.object.inherits(Blockly.FieldImage,Blockly.Field),Blockly.FieldImage.prototype.DEFAULT_VALUE="",Blockly.FieldImage.fromJson=function(e){return new Blockly.FieldImage(e.src,e.width,e.height,void 0,void 0,void 0,e)},Blockly.FieldImage.Y_PADDING=1,Blockly.FieldImage.prototype.EDITABLE=!1,Blockly.FieldImage.prototype.SERIALIZABLE=!1,Blockly.FieldImage.prototype.isDirty_=!1,Blockly.FieldImage.prototype.configure_=function(e){Blockly.FieldImage.superClass_.configure_.call(this,e),this.flipRtl_=!!e.flipRtl,this.altText_=Blockly.utils.replaceMessageReferences(e.alt)||""},Blockly.FieldImage.prototype.initView=function(){this.imageElement_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},Blockly.FieldImage.prototype.updateSize_=function(){},Blockly.FieldImage.prototype.doClassValidation_=function(e){return"string"!=typeof e?null:e},Blockly.FieldImage.prototype.doValueUpdate_=function(e){this.value_=e,this.imageElement_&&this.imageElement_.setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",String(this.value_))},Blockly.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},Blockly.FieldImage.prototype.setAlt=function(e){e!=this.altText_&&(this.altText_=e||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},Blockly.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},Blockly.FieldImage.prototype.setOnClickHandler=function(e){this.clickHandler_=e},Blockly.FieldImage.prototype.getText_=function(){return this.altText_},Blockly.fieldRegistry.register("field_image",Blockly.FieldImage),Blockly.FieldTextDropdown=function(e,t,n,o){this.menuGenerator_=t,Blockly.FieldDropdown.prototype.trimOptions_.call(this),Blockly.FieldTextDropdown.superClass_.constructor.call(this,e,n,o),this.addArgType("textdropdown")},Blockly.utils.object.inherits(Blockly.FieldTextDropdown,Blockly.FieldTextInput),Blockly.FieldTextDropdown.fromJson=function(e){var t=new Blockly.FieldTextDropdown(e.text,e.options);return"boolean"==typeof e.spellcheck&&t.setSpellcheck(e.spellcheck),t},Blockly.FieldTextDropdown.DROPDOWN_SVG_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiM1NzVFNzUiLz48L3N2Zz4K",Blockly.FieldTextDropdown.prototype.initView=function(){Blockly.FieldTextDropdown.superClass_.initView.call(this),this.createSVGArrow_()},Blockly.FieldTextDropdown.prototype.updateSize_=function(){Blockly.FieldTextDropdown.superClass_.updateSize_.call(this);var e=this.positionSVGArrow_(this.size_.width,this.size_.height/2-this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE/2);this.size_.width+=e},Blockly.FieldTextDropdown.prototype.dispose=function(){this.mouseUpWrapper_&&(Blockly.unbindEvent_(this.mouseUpWrapper_),this.mouseUpWrapper_=null,Blockly.Touch.clearTouchIdentifier()),Blockly.FieldTextDropdown.superClass_.dispose.call(this)},Blockly.FieldTextDropdown.prototype.showEditor_=function(e){Blockly.FieldTextDropdown.superClass_.showEditor_.call(this,e,!1,Blockly.utils.userAgent.MOBILE||Blockly.utils.userAgent.ANDROID||Blockly.utils.userAgent.IPAD,!0,(function(){this.dropDownOpen_||this.showDropdown_(),Blockly.Touch.clearTouchIdentifier()}))},Blockly.FieldTextDropdown.prototype.isOptionListDynamic=Blockly.FieldDropdown.prototype.isOptionListDynamic,Blockly.FieldTextDropdown.prototype.getOptions=Blockly.FieldDropdown.prototype.getOptions,Blockly.FieldTextDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=Blockly.utils.dom.createSvgElement("image",{height:this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.constants_.FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(Blockly.utils.dom.XLINK_NS,"xlink:href",Blockly.FieldTextDropdown.DROPDOWN_SVG_DATAURI)},Blockly.FieldTextDropdown.prototype.showDropdown_=Blockly.FieldDropdown.prototype.showEditor_,Blockly.FieldTextDropdown.prototype.dropdownCreate_=Blockly.FieldDropdown.prototype.dropdownCreate_,Blockly.FieldTextDropdown.prototype.dropdownDispose_=Blockly.FieldDropdown.prototype.dropdownDispose_,Blockly.FieldTextDropdown.prototype.positionSVGArrow_=Blockly.FieldDropdown.prototype.positionSVGArrow_,Blockly.FieldTextDropdown.prototype.handleMenuActionEvent_=Blockly.FieldDropdown.prototype.handleMenuActionEvent_,Blockly.FieldTextDropdown.prototype.onItemSelected_=function(e,t){null!==(e=t.getValue())&&(this.setValue(e),Blockly.WidgetDiv.hideIfOwner(this))},Blockly.fieldRegistry.register("field_textdropdown",Blockly.FieldTextDropdown),Blockly.FieldMultilineInput=function(e,t,n){Blockly.FieldMultilineInput.superClass_.constructor.call(this,e,t,n),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1},Blockly.utils.object.inherits(Blockly.FieldMultilineInput,Blockly.FieldTextInput),Blockly.FieldMultilineInput.prototype.configure_=function(e){Blockly.FieldMultilineInput.superClass_.configure_.call(this,e),e.maxLines&&this.setMaxLines(e.maxLines)},Blockly.FieldMultilineInput.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text);return new Blockly.FieldMultilineInput(t,void 0,e)},Blockly.FieldMultilineInput.prototype.toXml=function(e){return e.textContent=this.getValue().replace(/\n/g,"&#10;"),e},Blockly.FieldMultilineInput.prototype.fromXml=function(e){this.setValue(e.textContent.replace(/&#10;/g,"\n"))},Blockly.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},Blockly.FieldMultilineInput.prototype.getDisplayText_=function(){var e=this.getText();if(!e)return Blockly.Field.NBSP;var t=e.split("\n");e="";for(var n=this.isOverflowedY_?this.maxLines_:t.length,o=0;o<n;o++){var r=t[o];r.length>this.maxDisplayLength?r=r.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&o===n-1&&(r=r.substring(0,r.length-3)+"..."),e+=r=r.replace(/\s/g,Blockly.Field.NBSP),o!==n-1&&(e+="\n")}return this.sourceBlock_.RTL&&(e+=""),e},Blockly.FieldMultilineInput.prototype.doValueUpdate_=function(e){Blockly.FieldMultilineInput.superClass_.doValueUpdate_.call(this,e),this.isOverflowedY_=this.value_.split("\n").length>this.maxLines_},Blockly.FieldMultilineInput.prototype.render_=function(){for(var e;e=this.textGroup_.firstChild;)this.textGroup_.removeChild(e);e=this.getDisplayText_().split("\n");for(var t=0,n=0;n<e.length;n++){var o=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:t+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(e[n])),t+=o}this.isBeingEdited_&&(e=this.htmlInput_,this.isOverflowedY_?Blockly.utils.dom.addClass(e,"blocklyHtmlTextAreaInputOverflowedY"):Blockly.utils.dom.removeClass(e,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),e=this.htmlInput_,this.isTextValid_?(Blockly.utils.dom.removeClass(e,"blocklyInvalidInput"),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.INVALID,!1)):(Blockly.utils.dom.addClass(e,"blocklyInvalidInput"),Blockly.utils.aria.setState(e,Blockly.utils.aria.State.INVALID,!0)))},Blockly.FieldMultilineInput.prototype.updateSize_=function(){for(var e=this.textGroup_.childNodes,t=0,n=0,o=0;o<e.length;o++){var r=Blockly.utils.dom.getTextWidth(e[o]);r>t&&(t=r),n+=this.getConstants().FIELD_TEXT_HEIGHT+(0<o?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){e=this.value_.split("\n"),r=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.TEXT,{class:"blocklyText blocklyMultilineText"});var i=this.getConstants().FIELD_TEXT_FONTSIZE,s=this.getConstants().FIELD_TEXT_FONTWEIGHT,a=this.getConstants().FIELD_TEXT_FONTFAMILY;for(o=0;o<e.length;o++){e[o].length>this.maxDisplayLength&&(e[o]=e[o].substring(0,this.maxDisplayLength)),r.textContent=e[o];var l=Blockly.utils.dom.getFastTextWidth(r,i,s,a);l>t&&(t=l)}t+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(n+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,t+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",t),this.borderRect_.setAttribute("height",n)),this.size_.width=t,this.size_.height=n,this.positionBorderRect_()},Blockly.FieldMultilineInput.prototype.showEditor_=function(e,t){Blockly.FieldMultilineInput.superClass_.showEditor_.call(this,e,t),this.forceRerender()},Blockly.FieldMultilineInput.prototype.widgetCreate_=function(){var e=Blockly.WidgetDiv.DIV,t=this.workspace_.getScale(),n=document.createElement("textarea");n.className="blocklyHtmlInput blocklyHtmlTextAreaInput",n.setAttribute("spellcheck",this.spellcheck_);var o=this.getConstants().FIELD_TEXT_FONTSIZE*t+"pt";e.style.fontSize=o,n.style.fontSize=o,n.style.borderRadius=Blockly.FieldTextInput.BORDERRADIUS*t+"px",o=this.getConstants().FIELD_BORDER_RECT_X_PADDING*t;var r=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*t/2;return n.style.padding=r+"px "+o+"px "+r+"px "+o+"px",o=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,n.style.lineHeight=o*t+"px",e.appendChild(n),n.value=n.defaultValue=this.getEditorText_(this.value_),n.untypedDefaultValue_=this.value_,n.oldValue_=null,Blockly.utils.userAgent.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(n),n},Blockly.FieldMultilineInput.prototype.setMaxLines=function(e){"number"==typeof e&&0<e&&e!==this.maxLines_&&(this.maxLines_=e,this.forceRerender())},Blockly.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},Blockly.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(e){e.keyCode!==Blockly.utils.KeyCodes.ENTER&&Blockly.FieldMultilineInput.superClass_.onHtmlInputKeyDown_.call(this,e)},Blockly.Css.register(".blocklyHtmlTextAreaInput {,font-family: monospace;,resize: none;,overflow: hidden;,height: 100%;,text-align: left;,},.blocklyHtmlTextAreaInputOverflowedY {,overflow-y: scroll;,}".split(",")),Blockly.fieldRegistry.register("field_multilinetext",Blockly.FieldMultilineInput),Blockly.FieldNumber=function(e,t,n,o,r,i){this.getNumRestrictor(t,n,o),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,Blockly.FieldNumber.superClass_.constructor.call(this,e,r,i),i||this.setConstraints(t,n,o),this.addArgType("number")},Blockly.utils.object.inherits(Blockly.FieldNumber,Blockly.FieldTextInput),Blockly.FieldNumber.prototype.DEFAULT_VALUE=0,Blockly.FieldNumber.fromJson=function(e){return new Blockly.FieldNumber(e.value,void 0,void 0,void 0,void 0,e)},Blockly.FieldNumber.prototype.SERIALIZABLE=!0,Blockly.FieldNumber.DROPDOWN_WIDTH=168,Blockly.FieldNumber.NUMPAD_BUTTONS="789456123.0- ".split(""),Blockly.FieldNumber.NUMPAD_DELETE_ICON="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 40 40'%3E%3Cpath d='M28.89,11.45H16.79a2.86,2.86,0,0,0-2,.84L9.09,18a2.85,2.85,0,0,0,0,4l5.69,5.69a2.86,2.86,0,0,0,2,.84h12.1a2.86,2.86,0,0,0,2.86-2.86V14.31A2.86,2.86,0,0,0,28.89,11.45ZM27.15,22.73a1,1,0,0,1,0,1.41,1,1,0,0,1-.71.3,1,1,0,0,1-.71-0.3L23,21.41l-2.73,2.73a1,1,0,0,1-1.41,0,1,1,0,0,1,0-1.41L21.59,20l-2.73-2.73a1,1,0,0,1,0-1.41,1,1,0,0,1,1.41,0L23,18.59l2.73-2.73a1,1,0,1,1,1.42,1.41L24.42,20Z' fill='%23"+Blockly.Colours.numPadText.substr(1)+"'/%3E%3C/svg%3E",Blockly.FieldNumber.activeField_=null,Blockly.FieldNumber.prototype.getNumRestrictor=function(e,t,n){return this.setConstraints(e,t,n),e="[\\d]",this.decimalAllowed_&&(e+="|[\\.]"),this.negativeAllowed_&&(e+="|[-]"),new RegExp(e)},Blockly.FieldNumber.prototype.configure_=function(e){Blockly.FieldNumber.superClass_.configure_.call(this,e),this.setMinInternal_(e.min),this.setMaxInternal_(e.max),this.setPrecisionInternal_(e.precision)},Blockly.FieldNumber.prototype.setConstraints=function(e,t,n){this.decimalAllowed_=null==n||isNaN(n)||0==n||Math.floor(n)!=n,this.negativeAllowed_=null==e||isNaN(e)||0>e,this.setMinInternal_(e),this.setMaxInternal_(t),this.setPrecisionInternal_(n),this.setValue(this.getValue())},Blockly.FieldNumber.prototype.setMin=function(e){this.setMinInternal_(e),this.setValue(this.getValue())},Blockly.FieldNumber.prototype.setMinInternal_=function(e){null==e?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))},Blockly.FieldNumber.prototype.getMin=function(){return this.min_},Blockly.FieldNumber.prototype.setMax=function(e){this.setMaxInternal_(e),this.setValue(this.getValue())},Blockly.FieldNumber.prototype.setMaxInternal_=function(e){null==e?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))},Blockly.FieldNumber.prototype.getMax=function(){return this.max_},Blockly.FieldNumber.prototype.setPrecision=function(e){this.setPrecisionInternal_(e),this.setValue(this.getValue())},Blockly.FieldNumber.prototype.setPrecisionInternal_=function(e){this.precision_=Number(e)||0;var t=String(this.precision_);-1!=t.indexOf("e")&&(t=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var n=t.indexOf(".");this.decimalPlaces_=-1==n?e?0:null:t.length-n-1},Blockly.FieldNumber.prototype.getPrecision=function(){return this.precision_},Blockly.FieldNumber.prototype.showEditor_=function(e,t){Blockly.FieldNumber.activeField_=this,t=void 0!==t?t:Blockly.utils.userAgent.MOBILE||Blockly.utils.userAgent.ANDROID||Blockly.utils.userAgent.IPAD,Blockly.FieldNumber.superClass_.showEditor_.call(this,e,t,t),t&&this.showNumPad_()},Blockly.FieldNumber.prototype.showNumPad_=function(){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var e=Blockly.DropDownDiv.getContentDiv();e.setAttribute("role","menu"),e.setAttribute("aria-haspopup","true"),this.addButtons_(e);var t=this.sourceBlock_.parentBlock_?this.sourceBlock_.parentBlock_.getColour():Blockly.Colours.numPadBackground;Blockly.DropDownDiv.setColour(t,this.sourceBlock_.parentBlock_?this.sourceBlock_.parentBlock_.style.colourTertiary:Blockly.Colours.numPadBorder),e.style.width=Blockly.FieldNumber.DROPDOWN_WIDTH+"px",Blockly.DropDownDiv.showPositionedByField(this,this.onHide_.bind(this)),this.htmlInput_.select()},Blockly.FieldNumber.prototype.addButtons_=function(e){for(var t,n=this.sourceBlock_.parentBlock_?this.sourceBlock_.parentBlock_.getColour():Blockly.Colours.numPadBackground,o=this.sourceBlock_.parentBlock_?this.sourceBlock_.parentBlock_.style.colourTertiary:this.sourceBlock_.style.colourTertiary,r=Blockly.FieldNumber.NUMPAD_BUTTONS,i=0;t=r[i];i++){var s=document.createElement("button");if(s.setAttribute("role","menuitem"),s.setAttribute("class","blocklyNumPadButton"),s.setAttribute("style","background:"+n+";border: 1px solid "+o+";"),s.title=t,s.innerHTML=t,Blockly.bindEvent_(s,"mousedown",this,this.numPadButtonTouch),"."!=t||this.decimalAllowed_){if("-"==t&&!this.negativeAllowed_)continue;if(" "==t&&!this.negativeAllowed_)continue;" "==t&&this.negativeAllowed_&&s.setAttribute("style","visibility: hidden")}else s.setAttribute("style","visibility: hidden");e.appendChild(s)}(r=document.createElement("button")).setAttribute("role","menuitem"),r.setAttribute("class","blocklyNumPadButton"),r.setAttribute("style","background:"+n+";border: 1px solid "+o+";"),r.title="Delete",(n=document.createElement("img")).src=Blockly.FieldNumber.NUMPAD_DELETE_ICON,r.appendChild(n),Blockly.bindEvent_(r,"mousedown",this,this.numPadEraseButtonTouch),e.appendChild(r)},Blockly.FieldNumber.prototype.numPadButtonTouch=function(e){var t=e.target.innerText,n=this.htmlInput_.value,o=this.htmlInput_.selectionStart,r=this.htmlInput_.selectionEnd,i=n.slice(0,o)+t+n.slice(r);0==r-o&&(i=n+t),this.updateDisplay_(i),Blockly.Touch.clearTouchIdentifier(),e.preventDefault()},Blockly.FieldNumber.prototype.numPadEraseButtonTouch=function(e){var t=this.htmlInput_.value,n=this.htmlInput_.selectionStart,o=this.htmlInput_.selectionEnd,r=t.slice(0,n)+t.slice(o);0==o-n&&(r=0==o?t.slice(0,t.length-1):t.slice(0,n-1)+t.slice(n)),this.updateDisplay_(r),Blockly.Touch.clearTouchIdentifier(),e.preventDefault()},Blockly.FieldNumber.prototype.updateDisplay_=function(e){this.htmlInput_.value=e,Blockly.FieldNumber.superClass_.resizeEditor_.call(this),this.htmlInput_.setSelectionRange(e.length,e.length),this.htmlInput_.scrollLeft=this.htmlInput_.scrollWidth,this.onHtmlInputChange_({})},Blockly.FieldNumber.prototype.onHide_=function(){Blockly.DropDownDiv.content_.removeAttribute("role"),Blockly.DropDownDiv.content_.removeAttribute("aria-haspopup")},Blockly.FieldNumber.prototype.doClassValidation_=function(e){return null===e?null:(e=(e=(e=(e=String(e)).replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e)?null:(this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),null!=this.decimalPlaces_&&(e=Number(e.toFixed(this.decimalPlaces_))),e))},Blockly.FieldNumber.prototype.widgetCreate_=function(e,t,n){return e=Blockly.FieldNumber.superClass_.widgetCreate_.call(this,e,t,n),-1/0<this.min_&&Blockly.utils.aria.setState(e,Blockly.utils.aria.State.VALUEMIN,this.min_),1/0>this.max_&&Blockly.utils.aria.setState(e,Blockly.utils.aria.State.VALUEMAX,this.max_),e},Blockly.fieldRegistry.register("field_number",Blockly.FieldNumber),Blockly.FieldNumberDropdown=function(e,t,n,o,r,i){this.setConstraints=Blockly.FieldNumber.prototype.setConstraints,this.setMinInternal_=Blockly.FieldNumber.prototype.setMinInternal_,this.setMaxInternal_=Blockly.FieldNumber.prototype.setMaxInternal_,this.setPrecisionInternal_=Blockly.FieldNumber.prototype.setPrecisionInternal_,n=Blockly.FieldNumber.prototype.getNumRestrictor.call(this,n,o,r),Blockly.FieldNumberDropdown.superClass_.constructor.call(this,e,t,i,n),this.addArgType("numberdropdown")},Blockly.utils.object.inherits(Blockly.FieldNumberDropdown,Blockly.FieldTextDropdown),Blockly.FieldNumberDropdown.fromJson=function(e){return new Blockly.FieldNumberDropdown(e.value,e.options,e.min,e.max,e.precision)},Blockly.FieldNumberDropdown.prototype.classValidator=Blockly.FieldNumber.prototype.classValidator,Blockly.fieldRegistry.register("field_numberdropdown",Blockly.FieldNumberDropdown),Blockly.FieldVariable=function(e,t,n,o,r){this.menuGenerator_=Blockly.FieldVariable.dropdownCreate,this.defaultVariableName="string"==typeof e?e:"",this.size_=new Blockly.utils.Size(0,0),r&&this.configure_(r),t&&this.setValidator(t),r||this.setTypes_(n,o)},Blockly.utils.object.inherits(Blockly.FieldVariable,Blockly.FieldDropdown),Blockly.FieldVariable.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.variable);return new Blockly.FieldVariable(t,void 0,void 0,void 0,e)},Blockly.FieldVariable.prototype.SERIALIZABLE=!0,Blockly.FieldVariable.prototype.configure_=function(e){Blockly.FieldVariable.superClass_.configure_.call(this,e),this.setTypes_(e.variableTypes,e.defaultType)},Blockly.FieldVariable.prototype.initModel=function(){if(!this.variable_){var e=Blockly.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(e.getId())}},Blockly.FieldVariable.prototype.shouldAddBorderRect_=function(){return Blockly.FieldVariable.superClass_.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||!("variables_get"==this.sourceBlock_.type||"variables_get_reporter"==this.sourceBlock_.type))},Blockly.FieldVariable.prototype.fromXml=function(e){e.getAttribute("id");var t=e.textContent,n=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(t=Blockly.Variables.getOrCreateVariablePackage(this.sourceBlock_.workspace,null,t,n),null!=n&&n!==t.type)throw Error("Serialized variable type with id '"+t.getId()+"' had type "+t.type+", and does not match variable field that references it: "+Blockly.Xml.domToText(e)+".");this.setValue(t.getId())},Blockly.FieldVariable.prototype.toXml=function(e){return this.initModel(),e.id=this.variable_.getId(),e.textContent=this.variable_.name,this.variable_.type&&e.setAttribute("variabletype",this.variable_.type),e},Blockly.FieldVariable.prototype.setSourceBlock=function(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");Blockly.FieldVariable.superClass_.setSourceBlock.call(this,e)},Blockly.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},Blockly.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},Blockly.FieldVariable.prototype.getVariable=function(){return this.variable_},Blockly.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},Blockly.FieldVariable.prototype.doClassValidation_=function(e){if(null===e)return null;var t=Blockly.Variables.getVariable(this.sourceBlock_.workspace,e);return t?(t=t.type,this.typeIsAllowed_(t)?e:(console.warn("Variable type doesn't match this field!  Type was "+t),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)},Blockly.FieldVariable.prototype.doValueUpdate_=function(e){this.variable_=Blockly.Variables.getVariable(this.sourceBlock_.workspace,e),Blockly.FieldVariable.superClass_.doValueUpdate_.call(this,e)},Blockly.FieldVariable.prototype.typeIsAllowed_=function(e){var t=this.getVariableTypes_();if(!t)return!0;for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1},Blockly.FieldVariable.prototype.getVariableTypes_=function(){var e=this.variableTypes;if(null===e&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(0==(e=e||[""]).length)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e},Blockly.FieldVariable.prototype.setTypes_=function(e,t){if(t=t||"",null==e||null==e)e=null;else{if(!Array.isArray(e))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");for(var n=!1,o=0;o<e.length;o++)e[o]==t&&(n=!0);if(!n)throw Error("Invalid default type '"+t+"' in the definition of a FieldVariable")}this.defaultType_=t,this.variableTypes=e},Blockly.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var e=this.getText(),t=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var n=this.getVariableTypes_(),o=0;o<n.length;o++){var r=this.sourceBlock_.workspace.getVariablesOfType(n[o]);t=t.concat(r)}for(t.sort(Blockly.VariableModel.compareByName),n=[],o=0;o<t.length;o++)n[o]=[t[o].name,t[o].getId()];return Blockly.Msg.NEW_VARIABLE_TYPE_DROPDOWN&&this.variable_.type?(n.push([Blockly.Msg.NEW_VARIABLE_TYPE_DROPDOWN.replace("%1",this.variable_.type),Blockly.CREATE_VARIABLE_ID]),n.push([void 0,"SEPARATOR"])):Blockly.Msg.NEW_VARIABLE_DROPDOWN&&(n.push([Blockly.Msg.NEW_VARIABLE_DROPDOWN,Blockly.CREATE_VARIABLE_ID]),n.push([void 0,"SEPARATOR"])),n.push([Blockly.Msg.RENAME_VARIABLE,Blockly.RENAME_VARIABLE_ID]),Blockly.Msg.DELETE_VARIABLE&&n.push([Blockly.Msg.DELETE_VARIABLE.replace("%1",e),Blockly.DELETE_VARIABLE_ID]),n},Blockly.FieldVariable.prototype.onItemSelected_=function(e,t){if(e=t.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(e==Blockly.RENAME_VARIABLE_ID)return void Blockly.Variables.renameVariable(this.sourceBlock_.workspace,this.variable_);if(e==Blockly.DELETE_VARIABLE_ID)return void this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId());if(e==Blockly.CREATE_VARIABLE_ID){var n=this,o=this.sourceBlock_.workspace,r=o.getVariableById(this.getValue()).type;return void Blockly.Variables.createVariableButtonHandler(o,(function(e){e=o.getVariable(e,r),n.setValue(e.getId())}),r)}}this.setValue(e)},Blockly.FieldVariable.prototype.referencesVariables=function(){return!0},Blockly.fieldRegistry.register("field_variable",Blockly.FieldVariable),Blockly.FieldVerticalSeparator=function(){Blockly.FieldVerticalSeparator.superClass_.constructor.call(this)},Blockly.utils.object.inherits(Blockly.FieldVerticalSeparator,Blockly.Field),Blockly.FieldVerticalSeparator.fromJson=function(e){return new Blockly.FieldVerticalSeparator},Blockly.FieldVerticalSeparator.prototype.EDITABLE=!1,Blockly.FieldVerticalSeparator.prototype.initView=function(){var e=this.constants_.ICON_SEPARATOR_HEIGHT;this.lineElement_=Blockly.utils.dom.createSvgElement("line",{stroke:this.sourceBlock_.style.colourSecondary,"stroke-linecap":"round",x1:0,y1:0,x2:0,y2:e},this.fieldGroup_),this.size_=new Blockly.utils.Size(1,e),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_)},Blockly.FieldVerticalSeparator.prototype.setLineHeight=function(e){this.lineElement_.setAttribute("y2",e)},Blockly.FieldVerticalSeparator.prototype.dispose=function(){Blockly.utils.dom.removeNode(this.fieldGroup_),this.lineElement_=this.fieldGroup_=null},Blockly.FieldVerticalSeparator.prototype.getValue=function(){return null},Blockly.FieldVerticalSeparator.prototype.setValue=function(e){},Blockly.FieldVerticalSeparator.prototype.setText=function(e){},Blockly.FieldVerticalSeparator.prototype.render_=function(){},Blockly.FieldVerticalSeparator.prototype.updateWidth=function(){},Blockly.fieldRegistry.register("field_vertical_separator",Blockly.FieldVerticalSeparator),Blockly.FieldSlider=function(e,t,n,o,r,i,s){Blockly.FieldSlider.superClass_.constructor.call(this,e,null,null,null,s),this.setConstraints(t,n,o),this.step_=parseFloat(r)||void 0,this.labelText_=i},Blockly.utils.object.inherits(Blockly.FieldSlider,Blockly.FieldNumber),Blockly.FieldSlider.prototype.min_=null,Blockly.FieldSlider.prototype.max_=null,Blockly.FieldSlider.prototype.step_=null,Blockly.FieldSlider.prototype.precision_=null,Blockly.FieldSlider.prototype.labelText_=null,Blockly.FieldSlider.fromJson=function(e){return new Blockly.FieldSlider(e.value,e.min,e.max,e.precision,e.step,e.labelText)},Blockly.FieldSlider.prototype.setOptions=function(e,t,n,o){this.setConstraints(e,t,o),this.step_=parseFloat(n)||void 0,e=this.getNumRestrictor(this.min_,this.max_,this.precision_),this.setRestrictor(e)},Blockly.FieldSlider.prototype.setLabel=function(e){null!=e&&(this.labelText_=e)},Blockly.FieldSlider.prototype.setColor=function(e){null!=e&&(this.sliderColor_=e)},Blockly.FieldSlider.prototype.init=function(){Blockly.FieldTextInput.superClass_.init.call(this),this.setValue(this.getValue()),this.sourceBlock_.isEditable()&&(this.mouseOverWrapper_=Blockly.bindEvent_(this.getClickTarget_(),"mouseover",this,this.onMouseOver_),this.mouseOutWrapper_=Blockly.bindEvent_(this.getClickTarget_(),"mouseout",this,this.onMouseOut_))},Blockly.FieldSlider.prototype.showEditor_=function(e){Blockly.FieldSlider.superClass_.showEditor_.call(this,e),1/0!=this.max_&&-1/0!=this.min_&&(this.showSlider_(),this.setValue(this.getValue()))},Blockly.FieldSlider.prototype.showSlider_=function(){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var e=Blockly.DropDownDiv.getContentDiv();e.setAttribute("role","menu"),e.setAttribute("aria-haspopup","true"),this.addSlider_(e),Blockly.DropDownDiv.setColour("#ffffff","#dddddd"),Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_),this.slider_&&this.slider_.setVisible(!0)},Blockly.FieldSlider.prototype.addSlider_=function(e){if(this.labelText_){var t=this.createLabelDom_(this.labelText_);e.appendChild(t[0]),this.readout_=t[1]}this.slider_=new goog.ui.Slider,this.slider_.setMinimum(this.min_),this.slider_.setMaximum(this.max_),this.slider_.setMoveToPointEnabled(!this.step_),this.step_&&this.slider_.setBlockIncrement(this.step_),this.slider_.setRightToLeft(this.sourceBlock_.RTL),t=parseFloat(this.getValue()),t=isNaN(t)?0:t,this.slider_.setValue(t),this.slider_.render(e);var n=this;Blockly.FieldSlider.changeEventKey_=goog.events.listen(this.slider_,goog.ui.Component.EventType.CHANGE,(function(e){if(null!==(e=e.target.getValue()||0)){n.setValue(e);var t=n.htmlInput_;t&&(t.value=e,t.focus())}})),Blockly.FieldSlider.focusEventKey_=goog.events.listen(this.slider_.getElement(),goog.ui.Component.EventType.FOCUS,(function(){n.htmlInput_.focus()}))},Blockly.FieldSlider.prototype.createLabelDom_=function(e){var t=document.createElement("div");t.setAttribute("class","blocklyFieldSliderLabel");var n=document.createElement("span");n.setAttribute("class","blocklyFieldSliderReadout");var o=document.createElement("span");return o.setAttribute("class","blocklyFieldSliderLabelText"),o.innerHTML=e,t.appendChild(o),t.appendChild(n),[t,n]},Blockly.FieldSlider.prototype.setValue=function(e){Blockly.FieldSlider.superClass_.setValue.call(this,e),this.updateSliderHandles_(),this.updateDom_()},Blockly.FieldSlider.prototype.updateDom_=function(){this.slider_&&this.readout_&&(this.setBackground_(this.slider_.getElement()),this.setReadout_(this.readout_,this.getValue()))},Blockly.FieldSlider.prototype.setBackground_=function(e){this.sliderColor_?goog.style.setStyle(e,"background",this.sliderColor_):this.sourceBlock_.isShadow()&&this.sourceBlock_.parentBlock_&&goog.style.setStyle(e,"background",this.sourceBlock_.parentBlock_.getColourTertiary())},Blockly.FieldSlider.prototype.setReadout_=function(e,t){e.innerHTML=t},Blockly.FieldSlider.prototype.updateSliderHandles_=function(){this.slider_&&this.slider_.setValue(parseFloat(this.getValue()))},Blockly.FieldSlider.prototype.onHtmlInputChange_=function(e){Blockly.FieldSlider.superClass_.onHtmlInputChange_.call(this,e),this.slider_&&this.slider_.setValue(parseFloat(this.getValue()))},Blockly.FieldSlider.prototype.dispose=function(){Blockly.FieldSlider.changeEventKey_&&goog.events.unlistenByKey(Blockly.FieldSlider.changeEventKey_),Blockly.FieldSlider.focusEventKey_&&goog.events.unlistenByKey(Blockly.FieldSlider.focusEventKey_),Blockly.Events.setGroup(!1),Blockly.FieldSlider.superClass_.dispose.call(this)},Blockly.fieldRegistry.register("field_slider",Blockly.FieldSlider),Blockly.FieldString=function(e,t,n){Blockly.FieldString.superClass_.constructor.call(this,e,t),this.setRestrictor(n),this.addArgType("text")},Blockly.utils.object.inherits(Blockly.FieldString,Blockly.FieldTextInput),Blockly.FieldString.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text);return t=new Blockly.FieldString(t,e.class),"boolean"==typeof e.spellcheck&&t.setSpellcheck(e.spellcheck),t},Blockly.FieldString.quotePadding=0,Blockly.FieldString.prototype.initView=function(){this.quoteSize_=16,this.quoteWidth_=8,this.quoteRightX_=this.quoteLeftX_=0,this.quoteY_=10,this.quoteLeft_&&this.quoteLeft_.parentNode.removeChild(this.quoteLeft_),this.quoteLeft_=Blockly.utils.dom.createSvgElement("text",{"font-size":this.quoteSize_+"px",class:"field-text-quote"},this.fieldGroup_),Blockly.FieldString.superClass_.initView.call(this),this.quoteRight_&&this.quoteRight_.parentNode.removeChild(this.quoteRight_),this.quoteRight_=Blockly.utils.dom.createSvgElement("text",{"font-size":this.quoteSize_+"px",class:"field-text-quote"},this.fieldGroup_),this.quoteLeft_.appendChild(document.createTextNode('"')),this.quoteRight_.appendChild(document.createTextNode('"')),this.mouseOverWrapper_=Blockly.bindEvent_(this.getClickTarget_(),"mouseover",this,this.onMouseOver_),this.mouseOutWrapper_=Blockly.bindEvent_(this.getClickTarget_(),"mouseout",this,this.onMouseOut_)},Blockly.FieldString.prototype.updateSize_=function(){Blockly.FieldString.superClass_.updateSize_.call(this);var e=this.value_?this.size_.width:1,t=this.positionLeft(e+3);this.textElement_.setAttribute("x",t),t+=this.positionRight(t+e+3),this.size_.width=e+t},Blockly.FieldString.prototype.positionLeft=function(e){return this.quoteLeft_?(this.quoteLeftX_=this.sourceBlock_.RTL?e+this.quoteWidth_+2*Blockly.FieldString.quotePadding:0,e=this.quoteWidth_+Blockly.FieldString.quotePadding,this.quoteLeft_.setAttribute("transform","translate("+this.quoteLeftX_+","+this.quoteY_+")"),e):0},Blockly.FieldString.prototype.positionRight=function(e){return this.quoteRight_?(this.quoteRightX_=this.sourceBlock_.RTL?Blockly.FieldString.quotePadding:e+Blockly.FieldString.quotePadding,e=this.quoteWidth_+Blockly.FieldString.quotePadding,this.quoteRight_.setAttribute("transform","translate("+this.quoteRightX_+","+this.quoteY_+")"),e):0},Blockly.fieldRegistry.register("field_string",Blockly.FieldString),Blockly.FieldArgumentEditor=function(e,t,n){Blockly.FieldArgumentEditor.superClass_.constructor.call(this,e,t,n)},Blockly.utils.object.inherits(Blockly.FieldArgumentEditor,Blockly.FieldTextInput),Blockly.FieldArgumentEditor.REMOVE_ARG_URI="data:image/svg+xml;charset=UTF-8,%3c?xml version='1.0' encoding='UTF-8' standalone='no'?%3e%3csvg width='20px' height='20px' viewBox='0 0 20 20' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3c!-- Generator: Sketch 48.1 (47250) - http://www.bohemiancoding.com/sketch --%3e%3ctitle%3edelete-argument v2%3c/title%3e%3cdesc%3eCreated with Sketch.%3c/desc%3e%3cdefs%3e%3c/defs%3e%3cg id='Page-1' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3e%3cg id='delete-argument-v2' stroke='%23FF661A'%3e%3cg id='Group' transform='translate(3.000000, 2.500000)'%3e%3cpath d='M1,3 L13,3 L11.8900496,14.0995037 C11.8389294,14.6107055 11.4087639,15 10.8950124,15 L3.10498756,15 C2.59123611,15 2.16107055,14.6107055 2.10995037,14.0995037 L1,3 Z' id='Rectangle' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3c/path%3e%3cpath d='M7,11 L7,6' id='Line' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3c/path%3e%3cpath d='M9.5,11 L9.5,6' id='Line-Copy' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3c/path%3e%3cpath d='M4.5,11 L4.5,6' id='Line-Copy-2' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3e%3c/path%3e%3crect id='Rectangle-2' fill='%23FF661A' x='0' y='2.5' width='14' height='1' rx='0.5'%3e%3c/rect%3e%3cpath d='M6,0 L8,0 C8.55228475,-1.01453063e-16 9,0.44771525 9,1 L9,3 L5,3 L5,1 C5,0.44771525 5.44771525,1.01453063e-16 6,0 Z' id='Rectangle-3' stroke-width='1.5'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e",Blockly.FieldArgumentEditor.prototype.showEditor_=function(){Blockly.FieldArgumentEditor.superClass_.showEditor_.call(this);var e=Blockly.WidgetDiv.DIV;e.className+=" argumentEditorInput";var t=document.createElement("img");if(t.setAttribute("class","argumentEditorRemoveIcon"),t.setAttribute("src",Blockly.FieldArgumentEditor.REMOVE_ARG_URI),this.removeButtonMouseWrapper_=Blockly.bindEvent_(t,"mousedown",this,this.removeCallback_),e.appendChild(t),this.sourceBlock_&&this.sourceBlock_.typeName_&&(t=Blockly.PXTBlockly.FunctionUtils.getArgumentIcon(this.sourceBlock_.typeName_))){t+=" icon argumentEditorTypeIcon";var n=document.createElement("i");n.className=t,e.appendChild(n)}},Blockly.FieldArgumentEditor.prototype.removeCallback_=function(){this.sourceBlock_&&this.sourceBlock_.removeFieldCallback?this.sourceBlock_.removeFieldCallback(this):console.warn("Expected a source block with removeFieldCallback")},Blockly.FieldArgumentEditor.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text);return t=new Blockly.FieldArgumentEditor(t,e.class),"boolean"==typeof e.spellcheck&&t.setSpellcheck(e.spellcheck),t},Blockly.fieldRegistry.register("field_argument_editor",Blockly.FieldArgumentEditor),Blockly.utils.svgPaths={},Blockly.utils.svgPaths.point=function(e,t){return" "+e+","+t+" "},Blockly.utils.svgPaths.curve=function(e,t){return" "+e+t.join("")},Blockly.utils.svgPaths.moveTo=function(e,t){return" M "+e+","+t+" "},Blockly.utils.svgPaths.moveBy=function(e,t){return" m "+e+","+t+" "},Blockly.utils.svgPaths.lineTo=function(e,t){return" l "+e+","+t+" "},Blockly.utils.svgPaths.line=function(e){return" l"+e.join("")},Blockly.utils.svgPaths.lineOnAxis=function(e,t){return" "+e+" "+t+" "},Blockly.utils.svgPaths.arc=function(e,t,n,o){return e+" "+n+" "+n+" "+t+o},Blockly.blockRendering.ConstantProvider=function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=Blockly.utils.svgPaths.moveBy(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!Blockly.utils.userAgent.IE&&!Blockly.utils.userAgent.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}},Blockly.blockRendering.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},Blockly.blockRendering.ConstantProvider.prototype.setTheme=function(e){this.blockStyles=Object.create(null);var t,n=e.blockStyles;for(t in n)this.blockStyles[t]=this.validatedBlockStyle_(n[t]);this.setDynamicProperties_(e)},Blockly.blockRendering.ConstantProvider.prototype.setDynamicProperties_=function(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=null!=e.startHats?e.startHats:this.ADD_START_HATS},Blockly.blockRendering.ConstantProvider.prototype.setFontConstants_=function(e){this.FIELD_TEXT_FONTFAMILY=e.fontStyle&&null!=e.fontStyle.family?e.fontStyle.family:this.FIELD_TEXT_FONTFAMILY,this.FIELD_TEXT_FONTWEIGHT=e.fontStyle&&null!=e.fontStyle.weight?e.fontStyle.weight:this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTSIZE=e.fontStyle&&null!=e.fontStyle.size?e.fontStyle.size:this.FIELD_TEXT_FONTSIZE,e=Blockly.utils.dom.measureFontMetrics("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline},Blockly.blockRendering.ConstantProvider.prototype.setComponentConstants_=function(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},Blockly.blockRendering.ConstantProvider.prototype.getBlockStyleForColour=function(e){var t="auto_"+e;return this.blockStyles[t]||(this.blockStyles[t]=this.createBlockStyle_(e)),{style:this.blockStyles[t],name:t}},Blockly.blockRendering.ConstantProvider.prototype.getBlockStyle=function(e){return this.blockStyles[e||""]||(e&&0==e.indexOf("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))},Blockly.blockRendering.ConstantProvider.prototype.createBlockStyle_=function(e){return this.validatedBlockStyle_({colourPrimary:e})},Blockly.blockRendering.ConstantProvider.prototype.validatedBlockStyle_=function(e){var t={};return e&&Blockly.utils.object.mixin(t,e),e=Blockly.utils.parseBlockColour(t.colourPrimary||"#000"),t.colourPrimary=e.hex,t.colourSecondary=t.colourSecondary?Blockly.utils.parseBlockColour(t.colourSecondary).hex:this.generateSecondaryColour_(t.colourPrimary),t.colourTertiary=t.colourTertiary?Blockly.utils.parseBlockColour(t.colourTertiary).hex:this.generateTertiaryColour_(t.colourPrimary),t.hat=t.hat||"",t},Blockly.blockRendering.ConstantProvider.prototype.generateSecondaryColour_=function(e){return Blockly.utils.colour.blend("#fff",e,.6)||e},Blockly.blockRendering.ConstantProvider.prototype.generateTertiaryColour_=function(e){return Blockly.utils.colour.blend("#fff",e,.3)||e},Blockly.blockRendering.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&Blockly.utils.dom.removeNode(this.embossFilter_),this.disabledPattern_&&Blockly.utils.dom.removeNode(this.disabledPattern_),this.debugFilter_&&Blockly.utils.dom.removeNode(this.debugFilter_),this.cssNode_=null},Blockly.blockRendering.ConstantProvider.prototype.makeJaggedTeeth=function(){var e=this.JAGGED_TEETH_HEIGHT,t=this.JAGGED_TEETH_WIDTH;return{height:e,width:t,path:Blockly.utils.svgPaths.line([Blockly.utils.svgPaths.point(t,e/4),Blockly.utils.svgPaths.point(2*-t,e/2),Blockly.utils.svgPaths.point(t,e/4)])}},Blockly.blockRendering.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH;return{height:e,width:t,path:Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(30,-e),Blockly.utils.svgPaths.point(70,-e),Blockly.utils.svgPaths.point(t,0)])}},Blockly.blockRendering.ConstantProvider.prototype.makePuzzleTab=function(){function e(e){var o=-(e=e?-1:1),r=n/2,i=r+2.5,s=r+.5,a=Blockly.utils.svgPaths.point(-t,e*r);return r=Blockly.utils.svgPaths.point(t,e*r),Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(0,e*i),Blockly.utils.svgPaths.point(-t,o*s),a])+Blockly.utils.svgPaths.curve("s",[Blockly.utils.svgPaths.point(t,2.5*o),r])}var t=this.TAB_WIDTH,n=this.TAB_HEIGHT,o=e(!0),r=e(!1);return{type:this.SHAPES.PUZZLE,width:t,height:n,pathDown:r,pathUp:o}},Blockly.blockRendering.ConstantProvider.prototype.makeNotch=function(){function e(e){return Blockly.utils.svgPaths.line([Blockly.utils.svgPaths.point(e*o,n),Blockly.utils.svgPaths.point(3*e,0),Blockly.utils.svgPaths.point(e*o,-n)])}var t=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,o=(t-3)/2,r=e(1),i=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:n,pathLeft:r,pathRight:i}},Blockly.blockRendering.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS;return{width:e,height:e,pathTop:Blockly.utils.svgPaths.arc("a","0 0,0",e,Blockly.utils.svgPaths.point(-e,e)),pathBottom:Blockly.utils.svgPaths.arc("a","0 0,0",e,Blockly.utils.svgPaths.point(e,e))}},Blockly.blockRendering.ConstantProvider.prototype.makeOutsideCorners=function(){var e=this.CORNER_RADIUS,t=Blockly.utils.svgPaths.moveBy(0,e)+Blockly.utils.svgPaths.arc("a","0 0,1",e,Blockly.utils.svgPaths.point(e,-e)),n=Blockly.utils.svgPaths.arc("a","0 0,1",e,Blockly.utils.svgPaths.point(e,e)),o=Blockly.utils.svgPaths.arc("a","0 0,1",e,Blockly.utils.svgPaths.point(-e,-e));return{topLeft:t,topRight:n,bottomRight:Blockly.utils.svgPaths.arc("a","0 0,1",e,Blockly.utils.svgPaths.point(-e,e)),bottomLeft:o,rightHeight:e}},Blockly.blockRendering.ConstantProvider.prototype.shapeFor=function(e){switch(e.type){case Blockly.connectionTypes.INPUT_VALUE:case Blockly.connectionTypes.OUTPUT_VALUE:return this.PUZZLE_TAB;case Blockly.connectionTypes.PREVIOUS_STATEMENT:case Blockly.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},Blockly.blockRendering.ConstantProvider.prototype.createDom=function(e,t,n){this.injectCSS_(t,n),e=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.DEFS,{},e),t=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},e),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},t),n=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},t),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},n),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},t),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},t),this.embossFilterId=t.id,this.embossFilter_=t,t=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},e),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{width:10,height:10,fill:"#aaa"},t),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},t),this.disabledPatternId=t.id,this.disabledPattern_=t,Blockly.blockRendering.Debug&&(e=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),t=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter_=e)},Blockly.blockRendering.ConstantProvider.prototype.injectCSS_=function(e,t){t=this.getCSS_(t),e="blockly-renderer-style-"+e,this.cssNode_=document.getElementById(e);var n=t.join("\n");this.cssNode_?this.cssNode_.firstChild.textContent=n:((t=document.createElement("style")).id=e,e=document.createTextNode(n),t.appendChild(e),document.head.insertBefore(t,document.head.firstChild),this.cssNode_=t)},Blockly.blockRendering.ConstantProvider.prototype.getCSS_=function(e){return[e+" .blocklyText, ",e+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",e+" .blocklyText {","fill: #fff;","}",e+" .blocklyNonEditableText>rect,",e+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",e+" .blocklyNonEditableText>text,",e+" .blocklyEditableText>text {","fill: #000;","}",e+" .blocklyFlyoutLabelText {","fill: #000;","}",e+" .blocklyText.blocklyBubbleText {","fill: #000;","}",e+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",e+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",e+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",e+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",e+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",e+" .blocklyReplaceable .blocklyPathLight,",e+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",e+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},Blockly.blockRendering.Types={NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608},Blockly.blockRendering.Types.LEFT_CORNER=Blockly.blockRendering.Types.LEFT_SQUARE_CORNER|Blockly.blockRendering.Types.LEFT_ROUND_CORNER,Blockly.blockRendering.Types.RIGHT_CORNER=Blockly.blockRendering.Types.RIGHT_SQUARE_CORNER|Blockly.blockRendering.Types.RIGHT_ROUND_CORNER,Blockly.blockRendering.Types.nextTypeValue_=16777216,Blockly.blockRendering.Types.getType=function(e){return Object.prototype.hasOwnProperty.call(Blockly.blockRendering.Types,e)||(Blockly.blockRendering.Types[e]=Blockly.blockRendering.Types.nextTypeValue_,Blockly.blockRendering.Types.nextTypeValue_<<=1),Blockly.blockRendering.Types[e]},Blockly.blockRendering.Types.isField=function(e){return e.type&Blockly.blockRendering.Types.FIELD},Blockly.blockRendering.Types.isHat=function(e){return e.type&Blockly.blockRendering.Types.HAT},Blockly.blockRendering.Types.isIcon=function(e){return e.type&Blockly.blockRendering.Types.ICON},Blockly.blockRendering.Types.isSpacer=function(e){return e.type&Blockly.blockRendering.Types.SPACER},Blockly.blockRendering.Types.isInRowSpacer=function(e){return e.type&Blockly.blockRendering.Types.IN_ROW_SPACER},Blockly.blockRendering.Types.isInput=function(e){return e.type&Blockly.blockRendering.Types.INPUT},Blockly.blockRendering.Types.isExternalInput=function(e){return e.type&Blockly.blockRendering.Types.EXTERNAL_VALUE_INPUT},Blockly.blockRendering.Types.isInlineInput=function(e){return e.type&Blockly.blockRendering.Types.INLINE_INPUT},Blockly.blockRendering.Types.isStatementInput=function(e){return e.type&Blockly.blockRendering.Types.STATEMENT_INPUT},Blockly.blockRendering.Types.isPreviousConnection=function(e){return e.type&Blockly.blockRendering.Types.PREVIOUS_CONNECTION},Blockly.blockRendering.Types.isNextConnection=function(e){return e.type&Blockly.blockRendering.Types.NEXT_CONNECTION},Blockly.blockRendering.Types.isPreviousOrNextConnection=function(e){return e.type&(Blockly.blockRendering.Types.PREVIOUS_CONNECTION|Blockly.blockRendering.Types.NEXT_CONNECTION)},Blockly.blockRendering.Types.isLeftRoundedCorner=function(e){return e.type&Blockly.blockRendering.Types.LEFT_ROUND_CORNER},Blockly.blockRendering.Types.isRightRoundedCorner=function(e){return e.type&Blockly.blockRendering.Types.RIGHT_ROUND_CORNER},Blockly.blockRendering.Types.isLeftSquareCorner=function(e){return e.type&Blockly.blockRendering.Types.LEFT_SQUARE_CORNER},Blockly.blockRendering.Types.isRightSquareCorner=function(e){return e.type&Blockly.blockRendering.Types.RIGHT_SQUARE_CORNER},Blockly.blockRendering.Types.isCorner=function(e){return e.type&Blockly.blockRendering.Types.CORNER},Blockly.blockRendering.Types.isJaggedEdge=function(e){return e.type&Blockly.blockRendering.Types.JAGGED_EDGE},Blockly.blockRendering.Types.isRow=function(e){return e.type&Blockly.blockRendering.Types.ROW},Blockly.blockRendering.Types.isBetweenRowSpacer=function(e){return e.type&Blockly.blockRendering.Types.BETWEEN_ROW_SPACER},Blockly.blockRendering.Types.isTopRow=function(e){return e.type&Blockly.blockRendering.Types.TOP_ROW},Blockly.blockRendering.Types.isBottomRow=function(e){return e.type&Blockly.blockRendering.Types.BOTTOM_ROW},Blockly.blockRendering.Types.isTopOrBottomRow=function(e){return e.type&(Blockly.blockRendering.Types.TOP_ROW|Blockly.blockRendering.Types.BOTTOM_ROW)},Blockly.blockRendering.Types.isInputRow=function(e){return e.type&Blockly.blockRendering.Types.INPUT_ROW},Blockly.blockRendering.Measurable=function(e){this.height=this.width=0,this.type=Blockly.blockRendering.Types.NONE,this.centerline=this.xPos=0,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT},Blockly.blockRendering.Connection=function(e,t){Blockly.blockRendering.Connection.superClass_.constructor.call(this,e),this.connectionModel=t,this.shape=this.constants_.shapeFor(t),this.isDynamicShape=!!this.shape.isDynamic,this.type|=Blockly.blockRendering.Types.CONNECTION},Blockly.utils.object.inherits(Blockly.blockRendering.Connection,Blockly.blockRendering.Measurable),Blockly.blockRendering.OutputConnection=function(e,t){Blockly.blockRendering.OutputConnection.superClass_.constructor.call(this,e,t),this.type|=Blockly.blockRendering.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0},Blockly.utils.object.inherits(Blockly.blockRendering.OutputConnection,Blockly.blockRendering.Connection),Blockly.blockRendering.PreviousConnection=function(e,t){Blockly.blockRendering.PreviousConnection.superClass_.constructor.call(this,e,t),this.type|=Blockly.blockRendering.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},Blockly.utils.object.inherits(Blockly.blockRendering.PreviousConnection,Blockly.blockRendering.Connection),Blockly.blockRendering.NextConnection=function(e,t){Blockly.blockRendering.NextConnection.superClass_.constructor.call(this,e,t),this.type|=Blockly.blockRendering.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width},Blockly.utils.object.inherits(Blockly.blockRendering.NextConnection,Blockly.blockRendering.Connection),Blockly.blockRendering.InputConnection=function(e,t){Blockly.blockRendering.InputConnection.superClass_.constructor.call(this,e,t.connection),this.type|=Blockly.blockRendering.Types.INPUT,this.input=t,this.align=t.align,(this.connectedBlock=t.connection&&t.connection.targetBlock()?t.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0},Blockly.utils.object.inherits(Blockly.blockRendering.InputConnection,Blockly.blockRendering.Connection),Blockly.blockRendering.InlineInput=function(e,t){Blockly.blockRendering.InlineInput.superClass_.constructor.call(this,e,t),this.type|=Blockly.blockRendering.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0},Blockly.utils.object.inherits(Blockly.blockRendering.InlineInput,Blockly.blockRendering.InputConnection),Blockly.blockRendering.StatementInput=function(e,t){Blockly.blockRendering.StatementInput.superClass_.constructor.call(this,e,t),this.type|=Blockly.blockRendering.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width},Blockly.utils.object.inherits(Blockly.blockRendering.StatementInput,Blockly.blockRendering.InputConnection),Blockly.blockRendering.ExternalValueInput=function(e,t){Blockly.blockRendering.ExternalValueInput.superClass_.constructor.call(this,e,t),this.type|=Blockly.blockRendering.Types.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width},Blockly.utils.object.inherits(Blockly.blockRendering.ExternalValueInput,Blockly.blockRendering.InputConnection),Blockly.blockRendering.Icon=function(e,t){Blockly.blockRendering.Icon.superClass_.constructor.call(this,e),this.icon=t,this.isVisible=t.isVisible(),this.type|=Blockly.blockRendering.Types.ICON,e=t.getCorrectedSize(),this.height=e.height,this.width=e.width},Blockly.utils.object.inherits(Blockly.blockRendering.Icon,Blockly.blockRendering.Measurable),Blockly.blockRendering.JaggedEdge=function(e){Blockly.blockRendering.JaggedEdge.superClass_.constructor.call(this,e),this.type|=Blockly.blockRendering.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width},Blockly.utils.object.inherits(Blockly.blockRendering.JaggedEdge,Blockly.blockRendering.Measurable),Blockly.blockRendering.Field=function(e,t,n){Blockly.blockRendering.Field.superClass_.constructor.call(this,e),this.field=t,this.isEditable=t.EDITABLE,this.flipRtl=t.getFlipRtl(),this.type|=Blockly.blockRendering.Types.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width,this.parentInput=n},Blockly.utils.object.inherits(Blockly.blockRendering.Field,Blockly.blockRendering.Measurable),Blockly.blockRendering.Hat=function(e){Blockly.blockRendering.Hat.superClass_.constructor.call(this,e),this.type|=Blockly.blockRendering.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height},Blockly.utils.object.inherits(Blockly.blockRendering.Hat,Blockly.blockRendering.Measurable),Blockly.blockRendering.SquareCorner=function(e,t){Blockly.blockRendering.SquareCorner.superClass_.constructor.call(this,e),this.type=(t&&"left"!=t?Blockly.blockRendering.Types.RIGHT_SQUARE_CORNER:Blockly.blockRendering.Types.LEFT_SQUARE_CORNER)|Blockly.blockRendering.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING},Blockly.utils.object.inherits(Blockly.blockRendering.SquareCorner,Blockly.blockRendering.Measurable),Blockly.blockRendering.RoundCorner=function(e,t){Blockly.blockRendering.RoundCorner.superClass_.constructor.call(this,e),this.type=(t&&"left"!=t?Blockly.blockRendering.Types.RIGHT_ROUND_CORNER:Blockly.blockRendering.Types.LEFT_ROUND_CORNER)|Blockly.blockRendering.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2},Blockly.utils.object.inherits(Blockly.blockRendering.RoundCorner,Blockly.blockRendering.Measurable),Blockly.blockRendering.InRowSpacer=function(e,t){Blockly.blockRendering.InRowSpacer.superClass_.constructor.call(this,e),this.type=this.type|Blockly.blockRendering.Types.SPACER|Blockly.blockRendering.Types.IN_ROW_SPACER,this.width=t,this.height=this.constants_.SPACER_DEFAULT_HEIGHT},Blockly.utils.object.inherits(Blockly.blockRendering.InRowSpacer,Blockly.blockRendering.Measurable),Blockly.blockRendering.Row=function(e){this.type=Blockly.blockRendering.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.isCollapsedStack=this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=this.hasStatement=this.hasExternalInput=!1,this.constants_=e,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null},Blockly.blockRendering.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},Blockly.blockRendering.Row.prototype.getLastInput=function(){for(var e,t=this.elements.length-1;e=this.elements[t];t--)if(Blockly.blockRendering.Types.isInput(e))return e;return null},Blockly.blockRendering.Row.prototype.startsWithElemSpacer=function(){return!0},Blockly.blockRendering.Row.prototype.endsWithElemSpacer=function(){return!0},Blockly.blockRendering.Row.prototype.getFirstSpacer=function(){for(var e,t=0;e=this.elements[t];t++)if(Blockly.blockRendering.Types.isSpacer(e))return e;return null},Blockly.blockRendering.Row.prototype.getLastSpacer=function(){for(var e,t=this.elements.length-1;e=this.elements[t];t--)if(Blockly.blockRendering.Types.isSpacer(e))return e;return null},Blockly.blockRendering.TopRow=function(e){Blockly.blockRendering.TopRow.superClass_.constructor.call(this,e),this.type|=Blockly.blockRendering.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null},Blockly.utils.object.inherits(Blockly.blockRendering.TopRow,Blockly.blockRendering.Row),Blockly.blockRendering.TopRow.prototype.hasLeftSquareCorner=function(e){var t=(e.hat?"cap"===e.hat:this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,n=e.getPreviousBlock();return!!e.outputConnection||t||!!n&&n.getNextBlock()==e},Blockly.blockRendering.TopRow.prototype.hasRightSquareCorner=function(e){return!0},Blockly.blockRendering.TopRow.prototype.measure=function(){for(var e,t=0,n=0,o=0,r=0;e=this.elements[r];r++)n+=e.width,Blockly.blockRendering.Types.isSpacer(e)||(Blockly.blockRendering.Types.isHat(e)?o=Math.max(o,e.ascenderHeight):t=Math.max(t,e.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width},Blockly.blockRendering.TopRow.prototype.startsWithElemSpacer=function(){return!1},Blockly.blockRendering.TopRow.prototype.endsWithElemSpacer=function(){return!1},Blockly.blockRendering.BottomRow=function(e){Blockly.blockRendering.BottomRow.superClass_.constructor.call(this,e),this.type|=Blockly.blockRendering.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0},Blockly.utils.object.inherits(Blockly.blockRendering.BottomRow,Blockly.blockRendering.Row),Blockly.blockRendering.BottomRow.prototype.hasLeftSquareCorner=function(e){return!!e.outputConnection||!!e.getNextBlock()},Blockly.blockRendering.BottomRow.prototype.hasRightSquareCorner=function(e){return!0},Blockly.blockRendering.BottomRow.prototype.measure=function(){for(var e,t=0,n=0,o=0,r=0;e=this.elements[r];r++)n+=e.width,Blockly.blockRendering.Types.isSpacer(e)||(Blockly.blockRendering.Types.isNextConnection(e)?o=Math.max(o,e.height):t=Math.max(t,e.height));this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,t)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width},Blockly.blockRendering.BottomRow.prototype.startsWithElemSpacer=function(){return!1},Blockly.blockRendering.BottomRow.prototype.endsWithElemSpacer=function(){return!1},Blockly.blockRendering.SpacerRow=function(e,t,n){Blockly.blockRendering.SpacerRow.superClass_.constructor.call(this,e),this.type=this.type|Blockly.blockRendering.Types.SPACER|Blockly.blockRendering.Types.BETWEEN_ROW_SPACER,this.width=n,this.height=t,this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new Blockly.blockRendering.InRowSpacer(this.constants_,n)]},Blockly.utils.object.inherits(Blockly.blockRendering.SpacerRow,Blockly.blockRendering.Row),Blockly.blockRendering.SpacerRow.prototype.measure=function(){},Blockly.blockRendering.InputRow=function(e){Blockly.blockRendering.InputRow.superClass_.constructor.call(this,e),this.type|=Blockly.blockRendering.Types.INPUT_ROW,this.connectedBlockWidths=0},Blockly.utils.object.inherits(Blockly.blockRendering.InputRow,Blockly.blockRendering.Row),Blockly.blockRendering.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var e,t=0,n=0;e=this.elements[n];n++)this.width+=e.width,Blockly.blockRendering.Types.isInput(e)&&(Blockly.blockRendering.Types.isStatementInput(e)?t+=e.connectedBlockWidth:Blockly.blockRendering.Types.isExternalInput(e)&&0!=e.connectedBlockWidth&&(t+=e.connectedBlockWidth-e.connectionWidth)),Blockly.blockRendering.Types.isSpacer(e)||(this.height=Math.max(this.height,e.height));this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t},Blockly.blockRendering.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement},Blockly.blockRendering.RenderInfo=function(e,t){this.block_=t,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.outputConnection=t.outputConnection?new Blockly.blockRendering.OutputConnection(this.constants_,t.outputConnection):null,this.isInline=t.getInputsInline()&&!t.isCollapsed(),this.isCollapsed=t.isCollapsed(),this.isInsertionMarker=t.isInsertionMarker(),this.RTL=t.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new Blockly.blockRendering.TopRow(this.constants_),this.bottomRow=new Blockly.blockRendering.BottomRow(this.constants_),this.startY=this.startX=0},Blockly.blockRendering.RenderInfo.prototype.getRenderer=function(){return this.renderer_},Blockly.blockRendering.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},Blockly.blockRendering.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var e=new Blockly.blockRendering.InputRow(this.constants_);this.inputRows.push(e);for(var t,n=this.block_.getIcons(),o=0;t=n[o];o++){var r=new Blockly.blockRendering.Icon(this.constants_,t);this.isCollapsed&&t.collapseHidden?this.hiddenIcons.push(r):e.elements.push(r)}for(t=null,o=0;n=this.block_.inputList[o];o++)if(n.isVisible()){for(this.shouldStartNewRow_(n,t)&&(this.rows.push(e),e=new Blockly.blockRendering.InputRow(this.constants_),this.inputRows.push(e)),t=0;r=n.fieldRow[t];t++)e.elements.push(new Blockly.blockRendering.Field(this.constants_,r,n));this.addInput_(n,e),t=n}this.isCollapsed&&(this.block_.inputList.find((function(e){return e.type==Blockly.NEXT_STATEMENT}))?e=this.addCollapsedRow_(e):(e.hasJaggedEdge=!0,e.elements.push(new Blockly.blockRendering.JaggedEdge(this.constants_)))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)},Blockly.blockRendering.RenderInfo.prototype.populateTopRow_=function(){var e=!!this.block_.previousConnection,t=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e,n=this.topRow.hasLeftSquareCorner(this.block_)?Blockly.blockRendering.SquareCorner:Blockly.blockRendering.RoundCorner;this.topRow.elements.push(new n(this.constants_)),t?(e=new Blockly.blockRendering.Hat(this.constants_),this.topRow.elements.push(e),this.topRow.capline=e.ascenderHeight):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Blockly.blockRendering.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type==Blockly.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,n=this.topRow.hasRightSquareCorner(this.block_)?Blockly.blockRendering.SquareCorner:Blockly.blockRendering.RoundCorner,this.topRow.elements.push(new n(this.constants_,"right"))},Blockly.blockRendering.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&(this.block_.inputList[this.block_.inputList.length-1].type==Blockly.inputTypes.STATEMENT||this.rows[this.rows.length-1].isCollapsedStack)?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new Blockly.blockRendering.SquareCorner(this.constants_)):this.bottomRow.elements.push(new Blockly.blockRendering.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new Blockly.blockRendering.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new Blockly.blockRendering.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new Blockly.blockRendering.RoundCorner(this.constants_,"right"))},Blockly.blockRendering.RenderInfo.prototype.addInput_=function(e,t){this.isInline&&e.type==Blockly.inputTypes.VALUE?(t.elements.push(new Blockly.blockRendering.InlineInput(this.constants_,e)),t.hasInlineInput=!0):e.type==Blockly.inputTypes.STATEMENT?(t.elements.push(new Blockly.blockRendering.StatementInput(this.constants_,e)),t.hasStatement=!0):e.type==Blockly.inputTypes.VALUE?(t.elements.push(new Blockly.blockRendering.ExternalValueInput(this.constants_,e)),t.hasExternalInput=!0):e.type==Blockly.inputTypes.DUMMY&&(t.minHeight=Math.max(t.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),null==t.align&&(t.align=e.align)},Blockly.blockRendering.RenderInfo.prototype.addCollapsedRow_=function(e){},Blockly.blockRendering.RenderInfo.prototype.shouldStartNewRow_=function(e,t){return!!t&&(e.type==Blockly.inputTypes.STATEMENT||t.type==Blockly.inputTypes.STATEMENT||(e.type==Blockly.inputTypes.VALUE||e.type==Blockly.inputTypes.DUMMY)&&!this.isInline)},Blockly.blockRendering.RenderInfo.prototype.addElemSpacing_=function(){for(var e,t=0;e=this.rows[t];t++){var n=e.elements;if(e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,n[0]))),n.length){for(var o=0;o<n.length-1;o++){e.elements.push(n[o]);var r=this.getInRowSpacing_(n[o],n[o+1]);e.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,r))}e.elements.push(n[n.length-1]),e.endsWithElemSpacer()&&e.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(n[n.length-1],null)))}}},Blockly.blockRendering.RenderInfo.prototype.getInRowSpacing_=function(e,t){if(!e&&t&&Blockly.blockRendering.Types.isStatementInput(t))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&Blockly.blockRendering.Types.isInput(e)&&!t){if(Blockly.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(Blockly.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}return e&&Blockly.blockRendering.Types.isLeftSquareCorner(e)&&t&&(Blockly.blockRendering.Types.isPreviousConnection(t)||Blockly.blockRendering.Types.isNextConnection(t))?t.notchOffset:e&&Blockly.blockRendering.Types.isLeftRoundedCorner(e)&&t&&(Blockly.blockRendering.Types.isPreviousConnection(t)||Blockly.blockRendering.Types.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},Blockly.blockRendering.RenderInfo.prototype.computeBounds_=function(){for(var e,t=0,n=0,o=0,r=0;e=this.rows[r];r++){if(e.measure(),n=Math.max(n,e.width),e.hasStatement){var i=e.getLastInput();t=Math.max(t,e.width-i.width)}o=Math.max(o,e.widthWithConnectedBlocks)}for(this.statementEdge=t,this.width=n,r=0;e=this.rows[r];r++)e.hasStatement&&(e.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,o),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},Blockly.blockRendering.RenderInfo.prototype.alignRowElements_=function(){for(var e,t=0;e=this.rows[t];t++)if(e.hasStatement)this.alignStatementRow_(e);else{var n=e.width;0<(n=this.getDesiredRowWidth_(e)-n)&&this.addAlignmentPadding_(e,n),Blockly.blockRendering.Types.isTopOrBottomRow(e)&&(e.widthWithConnectedBlocks=e.width)}},Blockly.blockRendering.RenderInfo.prototype.getDesiredRowWidth_=function(e){return this.width-this.startX},Blockly.blockRendering.RenderInfo.prototype.addAlignmentPadding_=function(e,t){var n=e.getFirstSpacer(),o=e.getLastSpacer();(e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=t),e.align==Blockly.constants.ALIGN.LEFT?o.width+=t:e.align==Blockly.constants.ALIGN.CENTRE?(n.width+=t/2,o.width+=t/2):e.align==Blockly.constants.ALIGN.RIGHT?n.width+=t:o.width+=t,e.width+=t},Blockly.blockRendering.RenderInfo.prototype.alignStatementRow_=function(e){var t=e.getLastInput(),n=e.width-t.width,o=this.statementEdge;0<(n=o-n)&&this.addAlignmentPadding_(e,n),n=e.width,o=this.getDesiredRowWidth_(e),t.width+=o-n,t.height=Math.max(t.height,e.height),e.width+=o-n,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)},Blockly.blockRendering.RenderInfo.prototype.addRowSpacing_=function(){var e=this.rows;this.rows=[];for(var t=0;t<e.length;t++)this.rows.push(e[t]),t!=e.length-1&&this.rows.push(this.makeSpacerRow_(e[t],e[t+1]))},Blockly.blockRendering.RenderInfo.prototype.makeSpacerRow_=function(e,t){var n=this.getSpacerRowHeight_(e,t),o=this.getSpacerRowWidth_(e,t);return n=new Blockly.blockRendering.SpacerRow(this.constants_,n,o),e.hasStatement&&(n.followsStatement=!0),t.hasStatement&&(n.precedesStatement=!0),n},Blockly.blockRendering.RenderInfo.prototype.getSpacerRowWidth_=function(e,t){return this.width-this.startX},Blockly.blockRendering.RenderInfo.prototype.getSpacerRowHeight_=function(e,t){return this.constants_.MEDIUM_PADDING},Blockly.blockRendering.RenderInfo.prototype.getElemCenterline_=function(e,t){return Blockly.blockRendering.Types.isSpacer(t)?e.yPos+t.height/2:Blockly.blockRendering.Types.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,Blockly.blockRendering.Types.isNextConnection(t)?e+t.height/2:e-t.height/2):Blockly.blockRendering.Types.isTopRow(e)?Blockly.blockRendering.Types.isHat(t)?e.capline-t.height/2:e.capline+t.height/2:e.yPos+e.height/2},Blockly.blockRendering.RenderInfo.prototype.recordElemPositions_=function(e){for(var t,n=e.xPos,o=0;t=e.elements[o];o++)Blockly.blockRendering.Types.isSpacer(t)&&(t.height=e.height),t.xPos=n,t.centerline=this.getElemCenterline_(e,t),n+=t.width},Blockly.blockRendering.RenderInfo.prototype.finalize_=function(){for(var e,t=0,n=0,o=0;e=this.rows[o];o++)e.yPos=n,e.xPos=this.startX,n+=e.height,t=Math.max(t,e.widthWithConnectedBlocks),this.recordElemPositions_(e);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=t+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight},Blockly.blockRendering.Debug=function(e){this.debugElements_=[],this.svgRoot_=null,this.constants_=e},Blockly.blockRendering.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0},Blockly.blockRendering.Debug.prototype.clearElems=function(){for(var e,t=0;e=this.debugElements_[t];t++)Blockly.utils.dom.removeNode(e);this.debugElements_=[]},Blockly.blockRendering.Debug.prototype.drawSpacerRow=function(e,t,n){if(Blockly.blockRendering.Debug.config.rowSpacers){var o=Math.abs(e.height),r=0>e.height;r&&(t-=o),this.debugElements_.push(Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:n?-(e.xPos+e.width):e.xPos,y:t,width:e.width,height:o,stroke:r?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},Blockly.blockRendering.Debug.prototype.drawSpacerElem=function(e,t,n){if(Blockly.blockRendering.Debug.config.elemSpacers){t=Math.abs(e.width);var o=0>e.width,r=o?e.xPos-t:e.xPos;n&&(r=-(r+t)),this.debugElements_.push(Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:r,y:e.centerline-e.height/2,width:t,height:e.height,stroke:"pink",fill:o?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},Blockly.blockRendering.Debug.prototype.drawRenderedElem=function(e,t){if(Blockly.blockRendering.Debug.config.elems){var n=e.xPos;t&&(n=-(n+e.width)),t=e.centerline-e.height/2,this.debugElements_.push(Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:n,y:t,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),Blockly.blockRendering.Types.isField(e)&&e.field instanceof Blockly.FieldLabel&&this.debugElements_.push(Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:n,y:t+this.constants_.FIELD_TEXT_BASELINE,width:e.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}Blockly.blockRendering.Types.isInput(e)&&Blockly.blockRendering.Debug.config.connections&&this.drawConnection(e.connectionModel)},Blockly.blockRendering.Debug.prototype.drawConnection=function(e){if(Blockly.blockRendering.Debug.config.connections){if(e.type==Blockly.connectionTypes.INPUT_VALUE)var t=4,n="magenta",o="none";else e.type==Blockly.connectionTypes.OUTPUT_VALUE?(t=2,o=n="magenta"):e.type==Blockly.connectionTypes.NEXT_STATEMENT?(t=4,n="goldenrod",o="none"):e.type==Blockly.connectionTypes.PREVIOUS_STATEMENT&&(t=2,o=n="goldenrod");this.debugElements_.push(Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CIRCLE,{class:"blockRenderDebug",cx:e.offsetInBlock_.x,cy:e.offsetInBlock_.y,r:t,fill:o,stroke:n},this.svgRoot_))}},Blockly.blockRendering.Debug.prototype.drawRenderedRow=function(e,t,n){Blockly.blockRendering.Debug.config.rows&&(this.debugElements_.push(Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:n?-(e.xPos+e.width):e.xPos,y:e.yPos,width:e.width,height:e.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),Blockly.blockRendering.Types.isTopOrBottomRow(e)||Blockly.blockRendering.Debug.config.connectedBlockBounds&&this.debugElements_.push(Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:n?-(e.xPos+e.widthWithConnectedBlocks):e.xPos,y:e.yPos,width:e.widthWithConnectedBlocks,height:e.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},Blockly.blockRendering.Debug.prototype.drawRowWithElements=function(e,t,n){for(var o=0,r=e.elements.length;o<r;o++){var i=e.elements[o];i?Blockly.blockRendering.Types.isSpacer(i)?this.drawSpacerElem(i,e.height,n):this.drawRenderedElem(i,n):console.warn("A row has an undefined or null element.",e,i)}this.drawRenderedRow(e,t,n)},Blockly.blockRendering.Debug.prototype.drawBoundingBox=function(e){if(Blockly.blockRendering.Debug.config.blockBounds){var t=e.RTL?-e.width:0;this.debugElements_.push(Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:t,y:0,width:e.width,height:e.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),Blockly.blockRendering.Debug.config.connectedBlockBounds&&(t=e.RTL?-e.widthWithChildren:0,this.debugElements_.push(Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"blockRenderDebug",x:t,y:0,width:e.widthWithChildren,height:e.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}},Blockly.blockRendering.Debug.prototype.drawDebug=function(e,t){this.clearElems(),this.svgRoot_=e.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var n,o=0,r=0;n=t.rows[r];r++)Blockly.blockRendering.Types.isBetweenRowSpacer(n)?this.drawSpacerRow(n,o,t.RTL):this.drawRowWithElements(n,o,t.RTL),o+=n.height;e.previousConnection&&this.drawConnection(e.previousConnection),e.nextConnection&&this.drawConnection(e.nextConnection),e.outputConnection&&this.drawConnection(e.outputConnection),t.rightSide&&this.drawRenderedElem(t.rightSide,t.RTL),this.drawBoundingBox(t),this.drawRender(e.pathObject.svgPath)},Blockly.blockRendering.Debug.prototype.drawRender=function(e){Blockly.blockRendering.Debug.config.render&&(e.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout((function(){e.setAttribute("filter","")}),100))},Blockly.blockRendering.Drawer=function(e,t){this.block_=e,this.info_=t,this.topLeft_=e.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=t.getRenderer().getConstants()},Blockly.blockRendering.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),Blockly.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},Blockly.blockRendering.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},Blockly.blockRendering.Drawer.prototype.hideHiddenIcons_=function(){for(var e,t=0;e=this.info_.hiddenIcons[t];t++)e.icon.iconGroup_.setAttribute("display","none")},Blockly.blockRendering.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var e=1;e<this.info_.rows.length-1;e++){var t=this.info_.rows[e];t.hasJaggedEdge?this.drawJaggedEdge_(t):t.isCollapsedStack?this.drawCollapsedStack_(t):t.hasStatement?this.drawStatementInput_(t):t.hasExternalInput?this.drawValueInput_(t):this.drawRightSideRow_(t)}this.drawBottom_(),this.drawLeft_()},Blockly.blockRendering.Drawer.prototype.drawTop_=function(){var e=this.info_.topRow,t=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=Blockly.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var n,o=0;n=t[o];o++)Blockly.blockRendering.Types.isLeftRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:Blockly.blockRendering.Types.isRightRoundedCorner(n)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:Blockly.blockRendering.Types.isPreviousConnection(n)?this.outlinePath_+=n.shape.pathLeft:Blockly.blockRendering.Types.isHat(n)?this.outlinePath_+=this.constants_.START_HAT.path:Blockly.blockRendering.Types.isSpacer(n)&&(this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("h",n.width));this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("v",e.height)},Blockly.blockRendering.Drawer.prototype.drawJaggedEdge_=function(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+Blockly.utils.svgPaths.lineOnAxis("v",e.height-this.constants_.JAGGED_TEETH.height)},Blockly.blockRendering.Drawer.prototype.drawValueInput_=function(e){var t=e.getLastInput();this.positionExternalValueConnection_(e);var n="function"==typeof t.shape.pathDown?t.shape.pathDown(t.height):t.shape.pathDown;this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("H",t.xPos+t.width)+n+Blockly.utils.svgPaths.lineOnAxis("v",e.height-t.connectionHeight)},Blockly.blockRendering.Drawer.prototype.drawStatementInput_=function(e){var t=e.getLastInput(),n=t.xPos+t.notchOffset+t.shape.width;t=t.shape.pathRight+Blockly.utils.svgPaths.lineOnAxis("h",-(t.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var o=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("H",n)+t+Blockly.utils.svgPaths.lineOnAxis("v",o)+this.constants_.INSIDE_CORNERS.pathBottom+Blockly.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},Blockly.blockRendering.Drawer.prototype.drawCollapsedStack_=function(e){},Blockly.blockRendering.Drawer.prototype.drawRightSideRow_=function(e){this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},Blockly.blockRendering.Drawer.prototype.drawBottom_=function(){var e=this.info_.bottomRow,t=e.elements;this.positionNextConnection_();for(var n,o=0,r="",i=t.length-1;n=t[i];i--)Blockly.blockRendering.Types.isNextConnection(n)?r+=n.shape.pathRight:Blockly.blockRendering.Types.isLeftSquareCorner(n)?r+=Blockly.utils.svgPaths.lineOnAxis("H",e.xPos):Blockly.blockRendering.Types.isLeftRoundedCorner(n)?r+=this.constants_.OUTSIDE_CORNERS.bottomLeft:Blockly.blockRendering.Types.isRightRoundedCorner(n)?(r+=this.constants_.OUTSIDE_CORNERS.bottomRight,o=this.constants_.OUTSIDE_CORNERS.rightHeight):Blockly.blockRendering.Types.isSpacer(n)&&(r+=Blockly.utils.svgPaths.lineOnAxis("h",-1*n.width));this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("V",e.baseline-o),this.outlinePath_+=r},Blockly.blockRendering.Drawer.prototype.drawLeft_=function(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){var t=e.connectionOffsetY+e.height;e="function"==typeof e.shape.pathUp?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("V",t)+e}this.outlinePath_+="z"},Blockly.blockRendering.Drawer.prototype.drawInternals_=function(){for(var e,t=0;e=this.info_.rows[t];t++)for(var n,o=0;n=e.elements[o];o++)Blockly.blockRendering.Types.isInlineInput(n)?this.drawInlineInput_(n):(Blockly.blockRendering.Types.isIcon(n)||Blockly.blockRendering.Types.isField(n))&&this.layoutField_(n)},Blockly.blockRendering.Drawer.prototype.layoutField_=function(e){if(Blockly.blockRendering.Types.isField(e))var t=e.field.getSvgRoot();else Blockly.blockRendering.Types.isIcon(e)&&(t=e.icon.iconGroup_);var n=e.centerline-e.height/2,o=e.xPos,r="";this.info_.RTL&&(o=-(o+e.width),e.flipRtl&&(o+=e.width,r="scale(-1 1)")),Blockly.blockRendering.Types.isIcon(e)?(t.setAttribute("display","block"),t.setAttribute("transform","translate("+o+","+n+")"),e.icon.computeIconLocation()):t.setAttribute("transform","translate("+o+","+n+")"+r),this.info_.isInsertionMarker&&t.setAttribute("display","none")},Blockly.blockRendering.Drawer.prototype.drawInlineInput_=function(e){var t=e.width,n=e.height,o=e.connectionOffsetY,r=e.connectionHeight+o;this.inlinePath_+=Blockly.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-n/2)+Blockly.utils.svgPaths.lineOnAxis("v",o)+e.shape.pathDown+Blockly.utils.svgPaths.lineOnAxis("v",n-r)+Blockly.utils.svgPaths.lineOnAxis("h",t-e.connectionWidth)+Blockly.utils.svgPaths.lineOnAxis("v",-n)+"z",this.positionInlineInputConnection_(e)},Blockly.blockRendering.Drawer.prototype.positionInlineInputConnection_=function(e){var t=e.centerline-e.height/2;if(e.connectionModel){var n=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t+e.connectionOffsetY)}},Blockly.blockRendering.Drawer.prototype.positionStatementInputConnection_=function(e){var t=e.getLastInput();if(t.connectionModel){var n=e.xPos+e.statementEdge+t.notchOffset;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e.yPos)}},Blockly.blockRendering.Drawer.prototype.positionExternalValueConnection_=function(e){var t=e.getLastInput();if(t.connectionModel){var n=e.xPos+e.width;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e.yPos)}},Blockly.blockRendering.Drawer.prototype.positionPreviousConnection_=function(){var e=this.info_.topRow;if(e.connection){var t=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-t:t,0)}},Blockly.blockRendering.Drawer.prototype.positionNextConnection_=function(){var e=this.info_.bottomRow;if(e.connection){var t=e.connection,n=t.xPos;t.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,e.baseline)}},Blockly.blockRendering.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}},Blockly.Events.MarkerMove=function(e,t,n,o){var r=e?e.workspace.id:void 0;o&&o.getType()==Blockly.ASTNode.types.WORKSPACE&&(r=o.getLocation().id),Blockly.Events.MarkerMove.superClass_.constructor.call(this,r),this.blockId=e?e.id:null,this.oldNode=n,this.newNode=o,this.isCursor=t},Blockly.utils.object.inherits(Blockly.Events.MarkerMove,Blockly.Events.UiBase),Blockly.Events.MarkerMove.prototype.type=Blockly.Events.MARKER_MOVE,Blockly.Events.MarkerMove.prototype.toJson=function(){var e=Blockly.Events.MarkerMove.superClass_.toJson.call(this);return e.isCursor=this.isCursor,e.blockId=this.blockId,e.oldNode=this.oldNode,e.newNode=this.newNode,e},Blockly.Events.MarkerMove.prototype.fromJson=function(e){Blockly.Events.MarkerMove.superClass_.fromJson.call(this,e),this.isCursor=e.isCursor,this.blockId=e.blockId,this.oldNode=e.oldNode,this.newNode=e.newNode},Blockly.registry.register(Blockly.registry.Type.EVENT,Blockly.Events.MARKER_MOVE,Blockly.Events.MarkerMove),Blockly.blockRendering.MarkerSvg=function(e,t,n){this.workspace_=e,this.marker_=n,this.parent_=null,this.constants_=t,this.currentMarkerSvg=null,e=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=n.colour||e},Blockly.blockRendering.MarkerSvg.CURSOR_CLASS="blocklyCursor",Blockly.blockRendering.MarkerSvg.MARKER_CLASS="blocklyMarker",Blockly.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER=.75,Blockly.blockRendering.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},Blockly.blockRendering.MarkerSvg.prototype.getMarker=function(){return this.marker_},Blockly.blockRendering.MarkerSvg.prototype.isCursor=function(){return"cursor"==this.marker_.type},Blockly.blockRendering.MarkerSvg.prototype.createDom=function(){var e=this.isCursor()?Blockly.blockRendering.MarkerSvg.CURSOR_CLASS:Blockly.blockRendering.MarkerSvg.MARKER_CLASS;return this.svgGroup_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{class:e},null),this.createDomInternal_(),this.svgGroup_},Blockly.blockRendering.MarkerSvg.prototype.setParent_=function(e){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),e.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),e.setMarkerSvg(this.getSvgRoot())),this.parent_=e},Blockly.blockRendering.MarkerSvg.prototype.draw=function(e,t){if(t){this.constants_=this.workspace_.getRenderer().getConstants();var n=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||n,this.applyColour_(t),this.showAtLocation_(t),this.fireMarkerEvent_(e,t),void 0!==(e=this.currentMarkerSvg.childNodes[0])&&e.beginElement&&e.beginElement()}else this.hide()},Blockly.blockRendering.MarkerSvg.prototype.showAtLocation_=function(e){var t=e.getLocation().type;e.getType()==Blockly.ASTNode.types.BLOCK?this.showWithBlock_(e):e.getType()==Blockly.ASTNode.types.OUTPUT?this.showWithOutput_(e):t==Blockly.connectionTypes.INPUT_VALUE?this.showWithInput_(e):t==Blockly.connectionTypes.NEXT_STATEMENT?this.showWithNext_(e):e.getType()==Blockly.ASTNode.types.PREVIOUS?this.showWithPrevious_(e):e.getType()==Blockly.ASTNode.types.FIELD?this.showWithField_(e):e.getType()==Blockly.ASTNode.types.WORKSPACE?this.showWithCoordinates_(e):e.getType()==Blockly.ASTNode.types.STACK&&this.showWithStack_(e)},Blockly.blockRendering.MarkerSvg.prototype.showWithBlockPrevOutput_=function(e){var t=(e=e.getSourceBlock()).width,n=e.height,o=n*Blockly.blockRendering.MarkerSvg.HEIGHT_MULTIPLIER,r=this.constants_.CURSOR_BLOCK_PADDING;if(e.previousConnection){var i=this.constants_.shapeFor(e.previousConnection);this.positionPrevious_(t,r,o,i)}else e.outputConnection?(i=this.constants_.shapeFor(e.outputConnection),this.positionOutput_(t,n,i)):this.positionBlock_(t,r,o);this.setParent_(e),this.showCurrent_()},Blockly.blockRendering.MarkerSvg.prototype.showWithBlock_=function(e){this.showWithBlockPrevOutput_(e)},Blockly.blockRendering.MarkerSvg.prototype.showWithPrevious_=function(e){this.showWithBlockPrevOutput_(e)},Blockly.blockRendering.MarkerSvg.prototype.showWithOutput_=function(e){this.showWithBlockPrevOutput_(e)},Blockly.blockRendering.MarkerSvg.prototype.showWithCoordinates_=function(e){var t=e.getWsCoordinate();e=t.x,t=t.y,this.workspace_.RTL&&(e-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(e,t,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},Blockly.blockRendering.MarkerSvg.prototype.showWithField_=function(e){var t=(e=e.getLocation()).getSize().width,n=e.getSize().height;this.positionRect_(0,0,t,n),this.setParent_(e),this.showCurrent_()},Blockly.blockRendering.MarkerSvg.prototype.showWithInput_=function(e){var t=(e=e.getLocation()).getSourceBlock();this.positionInput_(e),this.setParent_(t),this.showCurrent_()},Blockly.blockRendering.MarkerSvg.prototype.showWithNext_=function(e){var t=e.getLocation();e=t.getSourceBlock();var n=0;t=t.getOffsetInBlock().y;var o=e.getHeightWidth().width;this.workspace_.RTL&&(n=-o),this.positionLine_(n,t,o),this.setParent_(e),this.showCurrent_()},Blockly.blockRendering.MarkerSvg.prototype.showWithStack_=function(e){var t=(e=e.getLocation()).getHeightWidth(),n=t.width+this.constants_.CURSOR_STACK_PADDING;t=t.height+this.constants_.CURSOR_STACK_PADDING;var o=-this.constants_.CURSOR_STACK_PADDING/2,r=-this.constants_.CURSOR_STACK_PADDING/2,i=o;this.workspace_.RTL&&(i=-(n+o)),this.positionRect_(i,r,n,t),this.setParent_(e),this.showCurrent_()},Blockly.blockRendering.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},Blockly.blockRendering.MarkerSvg.prototype.positionBlock_=function(e,t,n){e=Blockly.utils.svgPaths.moveBy(-t,n)+Blockly.utils.svgPaths.lineOnAxis("V",-t)+Blockly.utils.svgPaths.lineOnAxis("H",e+2*t)+Blockly.utils.svgPaths.lineOnAxis("V",n),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},Blockly.blockRendering.MarkerSvg.prototype.positionInput_=function(e){var t=e.getOffsetInBlock().x,n=e.getOffsetInBlock().y;e=Blockly.utils.svgPaths.moveTo(0,0)+this.constants_.shapeFor(e).pathDown,this.markerInput_.setAttribute("d",e),this.markerInput_.setAttribute("transform","translate("+t+","+n+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},Blockly.blockRendering.MarkerSvg.prototype.positionLine_=function(e,t,n){this.markerSvgLine_.setAttribute("x",e),this.markerSvgLine_.setAttribute("y",t),this.markerSvgLine_.setAttribute("width",n),this.currentMarkerSvg=this.markerSvgLine_},Blockly.blockRendering.MarkerSvg.prototype.positionOutput_=function(e,t,n){e=Blockly.utils.svgPaths.moveBy(e,0)+Blockly.utils.svgPaths.lineOnAxis("h",-(e-n.width))+Blockly.utils.svgPaths.lineOnAxis("v",this.constants_.TAB_OFFSET_FROM_TOP)+n.pathDown+Blockly.utils.svgPaths.lineOnAxis("V",t)+Blockly.utils.svgPaths.lineOnAxis("H",e),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},Blockly.blockRendering.MarkerSvg.prototype.positionPrevious_=function(e,t,n,o){e=Blockly.utils.svgPaths.moveBy(-t,n)+Blockly.utils.svgPaths.lineOnAxis("V",-t)+Blockly.utils.svgPaths.lineOnAxis("H",this.constants_.NOTCH_OFFSET_LEFT)+o.pathLeft+Blockly.utils.svgPaths.lineOnAxis("H",e+2*t)+Blockly.utils.svgPaths.lineOnAxis("V",n),this.markerBlock_.setAttribute("d",e),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},Blockly.blockRendering.MarkerSvg.prototype.positionRect_=function(e,t,n,o){this.markerSvgRect_.setAttribute("x",e),this.markerSvgRect_.setAttribute("y",t),this.markerSvgRect_.setAttribute("width",n),this.markerSvgRect_.setAttribute("height",o),this.currentMarkerSvg=this.markerSvgRect_},Blockly.blockRendering.MarkerSvg.prototype.flipRtl_=function(e){e.setAttribute("transform","scale(-1 1)")},Blockly.blockRendering.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},Blockly.blockRendering.MarkerSvg.prototype.fireMarkerEvent_=function(e,t){var n=t.getSourceBlock();e=new(Blockly.Events.get(Blockly.Events.MARKER_MOVE))(n,this.isCursor(),e,t),Blockly.Events.fire(e)},Blockly.blockRendering.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},Blockly.blockRendering.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var e=this.getBlinkProperties_();Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.ANIMATE,e,this.markerSvgLine_),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.ANIMATE,e,this.markerInput_),e.attributeName="stroke",Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.ANIMATE,e,this.markerBlock_)}return this.markerSvg_},Blockly.blockRendering.MarkerSvg.prototype.applyColour_=function(e){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(e=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstChild.setAttribute("values",e),this.markerInput_.firstChild.setAttribute("values",e),this.markerBlock_.firstChild.setAttribute("values",e))},Blockly.blockRendering.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&Blockly.utils.dom.removeNode(this.svgGroup_)},Blockly.blockRendering.PathObject=function(e,t,n){this.constants=n,this.svgRoot=e,this.svgPath=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=t,this.markerSvg=this.cursorSvg=null},Blockly.blockRendering.PathObject.prototype.setPath=function(e){this.svgPath.setAttribute("d",e)},Blockly.blockRendering.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},Blockly.blockRendering.PathObject.prototype.setCursorSvg=function(e){e?(this.svgRoot.appendChild(e),this.cursorSvg=e):this.cursorSvg=null},Blockly.blockRendering.PathObject.prototype.setMarkerSvg=function(e){e?(this.cursorSvg?this.svgRoot.insertBefore(e,this.cursorSvg):this.svgRoot.appendChild(e),this.markerSvg=e):this.markerSvg=null},Blockly.blockRendering.PathObject.prototype.applyColour=function(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())},Blockly.blockRendering.PathObject.prototype.setStyle=function(e){this.style=e},Blockly.blockRendering.PathObject.prototype.setClass_=function(e,t){t?Blockly.utils.dom.addClass(this.svgRoot,e):Blockly.utils.dom.removeClass(this.svgRoot,e)},Blockly.blockRendering.PathObject.prototype.updateHighlighted=function(e){e?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")},Blockly.blockRendering.PathObject.prototype.updateShadow_=function(e){e&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},Blockly.blockRendering.PathObject.prototype.updateDisabled_=function(e){this.setClass_("blocklyDisabled",e),e&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},Blockly.blockRendering.PathObject.prototype.updateSelected=function(e){this.setClass_("blocklySelected",e)},Blockly.blockRendering.PathObject.prototype.updateDraggingDelete=function(e){this.setClass_("blocklyDraggingDelete",e)},Blockly.blockRendering.PathObject.prototype.updateInsertionMarker=function(e){this.setClass_("blocklyInsertionMarker",e)},Blockly.blockRendering.PathObject.prototype.updateMovable=function(e){this.setClass_("blocklyDraggable",e)},Blockly.blockRendering.PathObject.prototype.updateReplacementFade=function(e){this.setClass_("blocklyReplaceable",e)},Blockly.blockRendering.PathObject.prototype.updateShapeForInputHighlight=function(e,t){},Blockly.blockRendering.Renderer=function(e){this.name=e,this.overrides=this.constants_=null},Blockly.blockRendering.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},Blockly.blockRendering.Renderer.prototype.init=function(e,t){this.constants_=this.makeConstants_(),t&&(this.overrides=t,Blockly.utils.object.mixin(this.constants_,t)),this.constants_.setTheme(e),this.constants_.init()},Blockly.blockRendering.Renderer.prototype.createDom=function(e,t){this.constants_.createDom(e,this.name+"-"+t.name,"."+this.getClassName()+"."+t.getClassName())},Blockly.blockRendering.Renderer.prototype.refreshDom=function(e,t){var n=this.getConstants();n.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Blockly.utils.object.mixin(this.constants_,this.overrides),this.constants_.randomIdentifier=n.randomIdentifier,this.constants_.setTheme(t),this.constants_.init(),this.createDom(e,t)},Blockly.blockRendering.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},Blockly.blockRendering.Renderer.prototype.makeConstants_=function(){return new Blockly.blockRendering.ConstantProvider},Blockly.blockRendering.Renderer.prototype.makeRenderInfo_=function(e){return new Blockly.blockRendering.RenderInfo(this,e)},Blockly.blockRendering.Renderer.prototype.makeDrawer_=function(e,t){return new Blockly.blockRendering.Drawer(e,t)},Blockly.blockRendering.Renderer.prototype.makeDebugger_=function(){if(!Blockly.blockRendering.Debug)throw Error("Missing require for Blockly.blockRendering.Debug");return new Blockly.blockRendering.Debug(this.getConstants())},Blockly.blockRendering.Renderer.prototype.makeMarkerDrawer=function(e,t){return new Blockly.blockRendering.MarkerSvg(e,this.getConstants(),t)},Blockly.blockRendering.Renderer.prototype.makePathObject=function(e,t){return new Blockly.blockRendering.PathObject(e,t,this.constants_)},Blockly.blockRendering.Renderer.prototype.getConstants=function(){return this.constants_},Blockly.blockRendering.Renderer.prototype.shouldHighlightConnection=function(e){return!0},Blockly.blockRendering.Renderer.prototype.orphanCanConnectAtEnd=function(e,t,n){return!!Blockly.Connection.getConnectionForOrphanedConnection(e,n===Blockly.connectionTypes.OUTPUT_VALUE?t.outputConnection:t.previousConnection)},Blockly.blockRendering.Renderer.prototype.getConnectionPreviewMethod=function(e,t,n){return t.type==Blockly.connectionTypes.OUTPUT_VALUE||t.type==Blockly.connectionTypes.PREVIOUS_STATEMENT?!e.isConnected()||this.orphanCanConnectAtEnd(n,e.targetBlock(),t.type)?Blockly.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:Blockly.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:Blockly.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},Blockly.blockRendering.Renderer.prototype.render=function(e){Blockly.blockRendering.useDebugger&&!e.renderingDebugger&&(e.renderingDebugger=this.makeDebugger_());var t=this.makeRenderInfo_(e);t.measure(),this.makeDrawer_(e,t).draw()},Blockly.geras={},Blockly.geras.ConstantProvider=function(){Blockly.geras.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2},Blockly.utils.object.inherits(Blockly.geras.ConstantProvider,Blockly.blockRendering.ConstantProvider),Blockly.geras.ConstantProvider.prototype.getCSS_=function(e){return Blockly.geras.ConstantProvider.superClass_.getCSS_.call(this,e).concat([e+" .blocklyInsertionMarker>.blocklyPathLight,",e+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])},Blockly.geras.Highlighter=function(e){this.info_=e,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH},Blockly.geras.Highlighter.prototype.getPath=function(){return this.steps_+"\n"+this.inlineSteps_},Blockly.geras.Highlighter.prototype.drawTopCorner=function(e){this.steps_+=Blockly.utils.svgPaths.moveBy(e.xPos,this.info_.startY);for(var t,n=0;t=e.elements[n];n++)Blockly.blockRendering.Types.isLeftSquareCorner(t)?this.steps_+=this.highlightConstants_.START_POINT:Blockly.blockRendering.Types.isLeftRoundedCorner(t)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):Blockly.blockRendering.Types.isPreviousConnection(t)?this.steps_+=this.notchPaths_.pathLeft:Blockly.blockRendering.Types.isHat(t)?this.steps_+=this.startPaths_.path(this.RTL_):Blockly.blockRendering.Types.isSpacer(t)&&0!=t.width&&(this.steps_+=Blockly.utils.svgPaths.lineOnAxis("H",t.xPos+t.width-this.highlightOffset_));this.steps_+=Blockly.utils.svgPaths.lineOnAxis("H",e.xPos+e.width-this.highlightOffset_)},Blockly.geras.Highlighter.prototype.drawJaggedEdge_=function(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+Blockly.utils.svgPaths.lineOnAxis("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},Blockly.geras.Highlighter.prototype.drawValueInput=function(e){var t=e.getLastInput();if(this.RTL_){var n=e.height-t.connectionHeight;this.steps_+=Blockly.utils.svgPaths.moveTo(t.xPos+t.width-this.highlightOffset_,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+Blockly.utils.svgPaths.lineOnAxis("v",n)}else this.steps_+=Blockly.utils.svgPaths.moveTo(t.xPos+t.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},Blockly.geras.Highlighter.prototype.drawStatementInput=function(e){var t=e.getLastInput();if(this.RTL_){var n=e.height-2*this.insideCornerPaths_.height;this.steps_+=Blockly.utils.svgPaths.moveTo(t.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+Blockly.utils.svgPaths.lineOnAxis("v",n)+this.insideCornerPaths_.pathBottom(this.RTL_)+Blockly.utils.svgPaths.lineTo(e.width-t.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Blockly.utils.svgPaths.moveTo(t.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+Blockly.utils.svgPaths.lineTo(e.width-t.xPos-this.insideCornerPaths_.width,0)},Blockly.geras.Highlighter.prototype.drawRightSideRow=function(e){var t=e.xPos+e.width-this.highlightOffset_;e.followsStatement&&(this.steps_+=Blockly.utils.svgPaths.lineOnAxis("H",t)),this.RTL_&&(this.steps_+=Blockly.utils.svgPaths.lineOnAxis("H",t),e.height>this.highlightOffset_&&(this.steps_+=Blockly.utils.svgPaths.lineOnAxis("V",e.yPos+e.height-this.highlightOffset_)))},Blockly.geras.Highlighter.prototype.drawBottomRow=function(e){if(this.RTL_)this.steps_+=Blockly.utils.svgPaths.lineOnAxis("V",e.baseline-this.highlightOffset_);else{var t=this.info_.bottomRow.elements[0];Blockly.blockRendering.Types.isLeftSquareCorner(t)?this.steps_+=Blockly.utils.svgPaths.moveTo(e.xPos+this.highlightOffset_,e.baseline-this.highlightOffset_):Blockly.blockRendering.Types.isLeftRoundedCorner(t)&&(this.steps_+=Blockly.utils.svgPaths.moveTo(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},Blockly.geras.Highlighter.prototype.drawLeft=function(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=Blockly.utils.svgPaths.moveTo(this.info_.startX,e):(this.steps_+=Blockly.utils.svgPaths.moveTo(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=Blockly.utils.svgPaths.lineOnAxis("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,Blockly.blockRendering.Types.isLeftRoundedCorner(e.elements[0])?this.steps_+=Blockly.utils.svgPaths.lineOnAxis("V",this.outsideCornerPaths_.height):this.steps_+=Blockly.utils.svgPaths.lineOnAxis("V",e.capline+this.highlightOffset_))},Blockly.geras.Highlighter.prototype.drawInlineInput=function(e){var t=this.highlightOffset_,n=e.xPos+e.connectionWidth,o=e.centerline-e.height/2,r=e.width-e.connectionWidth,i=o+t;this.RTL_?(o=e.connectionOffsetY-t,e=e.height-(e.connectionOffsetY+e.connectionHeight)+t,this.inlineSteps_+=Blockly.utils.svgPaths.moveTo(n-t,i)+Blockly.utils.svgPaths.lineOnAxis("v",o)+this.puzzleTabPaths_.pathDown(this.RTL_)+Blockly.utils.svgPaths.lineOnAxis("v",e)+Blockly.utils.svgPaths.lineOnAxis("h",r)):this.inlineSteps_+=Blockly.utils.svgPaths.moveTo(e.xPos+e.width+t,i)+Blockly.utils.svgPaths.lineOnAxis("v",e.height)+Blockly.utils.svgPaths.lineOnAxis("h",-r)+Blockly.utils.svgPaths.moveTo(n,o+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)},Blockly.geras.InlineInput=function(e,t){Blockly.geras.InlineInput.superClass_.constructor.call(this,e,t),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)},Blockly.utils.object.inherits(Blockly.geras.InlineInput,Blockly.blockRendering.InlineInput),Blockly.geras.StatementInput=function(e,t){Blockly.geras.StatementInput.superClass_.constructor.call(this,e,t),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)},Blockly.utils.object.inherits(Blockly.geras.StatementInput,Blockly.blockRendering.StatementInput),Blockly.geras.RenderInfo=function(e,t){Blockly.geras.RenderInfo.superClass_.constructor.call(this,e,t)},Blockly.utils.object.inherits(Blockly.geras.RenderInfo,Blockly.blockRendering.RenderInfo),Blockly.geras.RenderInfo.prototype.getRenderer=function(){return this.renderer_},Blockly.geras.RenderInfo.prototype.populateBottomRow_=function(){Blockly.geras.RenderInfo.superClass_.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type==Blockly.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},Blockly.geras.RenderInfo.prototype.addInput_=function(e,t){this.isInline&&e.type==Blockly.inputTypes.VALUE?(t.elements.push(new Blockly.geras.InlineInput(this.constants_,e)),t.hasInlineInput=!0):e.type==Blockly.inputTypes.STATEMENT?(t.elements.push(new Blockly.geras.StatementInput(this.constants_,e)),t.hasStatement=!0):e.type==Blockly.inputTypes.VALUE?(t.elements.push(new Blockly.blockRendering.ExternalValueInput(this.constants_,e)),t.hasExternalInput=!0):e.type==Blockly.inputTypes.DUMMY&&(t.minHeight=Math.max(t.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),t.hasDummyInput=!0),this.isInline||null!=t.align||(t.align=e.align)},Blockly.geras.RenderInfo.prototype.addElemSpacing_=function(){for(var e,t=!1,n=0;e=this.rows[n];n++)e.hasExternalInput&&(t=!0);for(n=0;e=this.rows[n];n++){var o=e.elements;if(e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(var r=0;r<o.length-1;r++){e.elements.push(o[r]);var i=this.getInRowSpacing_(o[r],o[r+1]);e.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,i))}e.elements.push(o[o.length-1]),e.endsWithElemSpacer()&&(i=this.getInRowSpacing_(o[o.length-1],null),t&&e.hasDummyInput&&(i+=this.constants_.TAB_WIDTH),e.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,i)))}}},Blockly.geras.RenderInfo.prototype.getInRowSpacing_=function(e,t){if(!e)return t&&Blockly.blockRendering.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:t&&Blockly.blockRendering.Types.isInlineInput(t)?this.constants_.MEDIUM_LARGE_PADDING:t&&Blockly.blockRendering.Types.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!Blockly.blockRendering.Types.isInput(e)&&(!t||Blockly.blockRendering.Types.isStatementInput(t)))return Blockly.blockRendering.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:Blockly.blockRendering.Types.isIcon(e)?2*this.constants_.LARGE_PADDING+1:Blockly.blockRendering.Types.isHat(e)?this.constants_.NO_PADDING:Blockly.blockRendering.Types.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:Blockly.blockRendering.Types.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:Blockly.blockRendering.Types.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isInput(e)&&!t){if(Blockly.blockRendering.Types.isExternalInput(e))return this.constants_.NO_PADDING;if(Blockly.blockRendering.Types.isInlineInput(e))return this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isStatementInput(e))return this.constants_.NO_PADDING}if(!Blockly.blockRendering.Types.isInput(e)&&t&&Blockly.blockRendering.Types.isInput(t)){if(Blockly.blockRendering.Types.isField(e)&&e.isEditable){if(Blockly.blockRendering.Types.isInlineInput(t)||Blockly.blockRendering.Types.isExternalInput(t))return this.constants_.SMALL_PADDING}else{if(Blockly.blockRendering.Types.isInlineInput(t)||Blockly.blockRendering.Types.isExternalInput(t))return this.constants_.MEDIUM_LARGE_PADDING;if(Blockly.blockRendering.Types.isStatementInput(t))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(Blockly.blockRendering.Types.isIcon(e)&&t&&!Blockly.blockRendering.Types.isInput(t))return this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isInlineInput(e)&&t&&Blockly.blockRendering.Types.isField(t))return t.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(Blockly.blockRendering.Types.isLeftSquareCorner(e)&&t){if(Blockly.blockRendering.Types.isHat(t))return this.constants_.NO_PADDING;if(Blockly.blockRendering.Types.isPreviousConnection(t))return t.notchOffset;if(Blockly.blockRendering.Types.isNextConnection(t))return e=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,t.notchOffset+e}if(Blockly.blockRendering.Types.isLeftRoundedCorner(e)&&t){if(Blockly.blockRendering.Types.isPreviousConnection(t))return t.notchOffset-this.constants_.CORNER_RADIUS;if(Blockly.blockRendering.Types.isNextConnection(t))return e=(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2,t.notchOffset-this.constants_.CORNER_RADIUS+e}return Blockly.blockRendering.Types.isField(e)&&t&&Blockly.blockRendering.Types.isField(t)&&e.isEditable==t.isEditable||t&&Blockly.blockRendering.Types.isJaggedEdge(t)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},Blockly.geras.RenderInfo.prototype.getSpacerRowHeight_=function(e,t){return Blockly.blockRendering.Types.isTopRow(e)&&Blockly.blockRendering.Types.isBottomRow(t)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:Blockly.blockRendering.Types.isTopRow(e)||Blockly.blockRendering.Types.isBottomRow(t)?this.constants_.NO_PADDING:e.hasExternalInput&&t.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&t.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&t.hasStatement||!e.hasStatement&&t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},Blockly.geras.RenderInfo.prototype.getElemCenterline_=function(e,t){if(Blockly.blockRendering.Types.isSpacer(t))return e.yPos+t.height/2;if(Blockly.blockRendering.Types.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,Blockly.blockRendering.Types.isNextConnection(t)?e+t.height/2:e-t.height/2;if(Blockly.blockRendering.Types.isTopRow(e))return Blockly.blockRendering.Types.isHat(t)?e.capline-t.height/2:e.capline+t.height/2;var n=e.yPos;return Blockly.blockRendering.Types.isField(t)||Blockly.blockRendering.Types.isIcon(t)?(n+=t.height/2,(e.hasInlineInput||e.hasStatement)&&t.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(n+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):n=Blockly.blockRendering.Types.isInlineInput(t)?n+t.height/2:n+e.height/2,n},Blockly.geras.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var e,t=0,n=null,o=this.rows.length-1;e=this.rows[o];o--)e.nextRightEdge=t,Blockly.blockRendering.Types.isInputRow(e)&&(e.hasStatement&&this.alignStatementRow_(e),n&&n.hasStatement&&e.width<n.width?e.nextRightEdge=n.width:t=e.width,n=e);for(o=t=0;e=this.rows[o];o++)e.hasStatement?t=this.getDesiredRowWidth_(e):Blockly.blockRendering.Types.isSpacer(e)?e.width=Math.max(t,e.nextRightEdge):(0<(t=Math.max(t,e.nextRightEdge)-e.width)&&this.addAlignmentPadding_(e,t),t=e.width)}else Blockly.geras.RenderInfo.superClass_.alignRowElements_.call(this)},Blockly.geras.RenderInfo.prototype.getDesiredRowWidth_=function(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:Blockly.geras.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},Blockly.geras.RenderInfo.prototype.finalize_=function(){for(var e,t=0,n=0,o=0;e=this.rows[o];o++){e.yPos=n,e.xPos=this.startX,n+=e.height,t=Math.max(t,e.widthWithConnectedBlocks);var r=n-this.topRow.ascenderHeight;e==this.bottomRow&&r<this.constants_.MIN_BLOCK_HEIGHT&&(r=this.constants_.MIN_BLOCK_HEIGHT-r,this.bottomRow.height+=r,n+=r),this.recordElemPositions_(e)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline},Blockly.geras.Drawer=function(e,t){Blockly.geras.Drawer.superClass_.constructor.call(this,e,t),this.highlighter_=new Blockly.geras.Highlighter(t)},Blockly.utils.object.inherits(Blockly.geras.Drawer,Blockly.blockRendering.Drawer),Blockly.geras.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var e=this.block_.pathObject;e.setPath(this.outlinePath_+"\n"+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),Blockly.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},Blockly.geras.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),Blockly.geras.Drawer.superClass_.drawTop_.call(this)},Blockly.geras.Drawer.prototype.drawJaggedEdge_=function(e){this.highlighter_.drawJaggedEdge_(e),Blockly.geras.Drawer.superClass_.drawJaggedEdge_.call(this,e)},Blockly.geras.Drawer.prototype.drawValueInput_=function(e){this.highlighter_.drawValueInput(e),Blockly.geras.Drawer.superClass_.drawValueInput_.call(this,e)},Blockly.geras.Drawer.prototype.drawStatementInput_=function(e){this.highlighter_.drawStatementInput(e),Blockly.geras.Drawer.superClass_.drawStatementInput_.call(this,e)},Blockly.geras.Drawer.prototype.drawRightSideRow_=function(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("H",e.xPos+e.width)+Blockly.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},Blockly.geras.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),Blockly.geras.Drawer.superClass_.drawBottom_.call(this)},Blockly.geras.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),Blockly.geras.Drawer.superClass_.drawLeft_.call(this)},Blockly.geras.Drawer.prototype.drawInlineInput_=function(e){this.highlighter_.drawInlineInput(e),Blockly.geras.Drawer.superClass_.drawInlineInput_.call(this,e)},Blockly.geras.Drawer.prototype.positionInlineInputConnection_=function(e){var t=e.centerline-e.height/2;if(e.connectionModel){var n=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),e.connectionModel.setOffsetInBlock(n,t+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},Blockly.geras.Drawer.prototype.positionStatementInputConnection_=function(e){var t=e.getLastInput();if(t.connectionModel){var n=e.xPos+e.statementEdge+t.notchOffset;n=this.info_.RTL?-1*n:n+this.constants_.DARK_PATH_OFFSET,t.connectionModel.setOffsetInBlock(n,e.yPos+this.constants_.DARK_PATH_OFFSET)}},Blockly.geras.Drawer.prototype.positionExternalValueConnection_=function(e){var t=e.getLastInput();if(t.connectionModel){var n=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(n*=-1),t.connectionModel.setOffsetInBlock(n,e.yPos)}},Blockly.geras.Drawer.prototype.positionNextConnection_=function(){var e=this.info_.bottomRow;if(e.connection){var t=e.connection,n=t.xPos;t.connectionModel.setOffsetInBlock((this.info_.RTL?-n:n)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}},Blockly.geras.HighlightConstantProvider=function(e){this.constantProvider=e,this.OFFSET=.5,this.START_POINT=Blockly.utils.svgPaths.moveBy(this.OFFSET,this.OFFSET)},Blockly.geras.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},Blockly.geras.HighlightConstantProvider.prototype.makeInsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,n=(1-Math.SQRT1_2)*(e+t)-t,o=Blockly.utils.svgPaths.moveBy(n,n)+Blockly.utils.svgPaths.arc("a","0 0,0",e,Blockly.utils.svgPaths.point(-n-t,e-n)),r=Blockly.utils.svgPaths.arc("a","0 0,0",e+t,Blockly.utils.svgPaths.point(e+t,e+t)),i=Blockly.utils.svgPaths.moveBy(n,-n)+Blockly.utils.svgPaths.arc("a","0 0,0",e+t,Blockly.utils.svgPaths.point(e-n,n+t));return{width:e+t,height:e,pathTop:function(e){return e?o:""},pathBottom:function(e){return e?r:i}}},Blockly.geras.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var e=this.constantProvider.CORNER_RADIUS,t=this.OFFSET,n=(1-Math.SQRT1_2)*(e-t)+t,o=Blockly.utils.svgPaths.moveBy(n,n)+Blockly.utils.svgPaths.arc("a","0 0,1",e-t,Blockly.utils.svgPaths.point(e-n,-n+t)),r=Blockly.utils.svgPaths.moveBy(t,e)+Blockly.utils.svgPaths.arc("a","0 0,1",e-t,Blockly.utils.svgPaths.point(e,-e+t)),i=-n,s=Blockly.utils.svgPaths.moveBy(n,i)+Blockly.utils.svgPaths.arc("a","0 0,1",e-t,Blockly.utils.svgPaths.point(-n+t,-i-e));return{height:e,topLeft:function(e){return e?o:r},bottomLeft:function(){return s}}},Blockly.geras.HighlightConstantProvider.prototype.makePuzzleTab=function(){var e=this.constantProvider.TAB_WIDTH,t=this.constantProvider.TAB_HEIGHT,n=Blockly.utils.svgPaths.moveBy(-2,3.4-t)+Blockly.utils.svgPaths.lineTo(-.45*e,-2.1),o=Blockly.utils.svgPaths.lineOnAxis("v",2.5)+Blockly.utils.svgPaths.moveBy(.97*-e,2.5)+Blockly.utils.svgPaths.curve("q",[Blockly.utils.svgPaths.point(.05*-e,10),Blockly.utils.svgPaths.point(.3*e,9.5)])+Blockly.utils.svgPaths.moveBy(.67*e,-1.9)+Blockly.utils.svgPaths.lineOnAxis("v",2.5),r=Blockly.utils.svgPaths.lineOnAxis("v",-1.5)+Blockly.utils.svgPaths.moveBy(-.92*e,-.5)+Blockly.utils.svgPaths.curve("q",[Blockly.utils.svgPaths.point(-.19*e,-5.5),Blockly.utils.svgPaths.point(0,-11)])+Blockly.utils.svgPaths.moveBy(.92*e,1),i=Blockly.utils.svgPaths.moveBy(-5,t-.7)+Blockly.utils.svgPaths.lineTo(.46*e,-2.1);return{width:e,height:t,pathUp:function(e){return e?n:r},pathDown:function(e){return e?o:i}}},Blockly.geras.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:Blockly.utils.svgPaths.lineOnAxis("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},Blockly.geras.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:Blockly.utils.svgPaths.lineTo(5.1,2.6)+Blockly.utils.svgPaths.moveBy(-10.2,6.8)+Blockly.utils.svgPaths.lineTo(5.1,2.6),height:12,width:10.2}},Blockly.geras.HighlightConstantProvider.prototype.makeStartHat=function(){var e=this.constantProvider.START_HAT.height,t=Blockly.utils.svgPaths.moveBy(25,-8.7)+Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(29.7,-6.2),Blockly.utils.svgPaths.point(57.2,-.5),Blockly.utils.svgPaths.point(75,8.7)]),n=Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(17.8,-9.2),Blockly.utils.svgPaths.point(45.3,-14.9),Blockly.utils.svgPaths.point(75,-8.7)])+Blockly.utils.svgPaths.moveTo(100.5,e+.5);return{path:function(e){return e?t:n}}},Blockly.geras.PathObject=function(e,t,n){this.constants=n,this.svgRoot=e,this.svgPathDark=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"},this.svgRoot),this.svgPath=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.svgPathLight=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000",this.style=t},Blockly.utils.object.inherits(Blockly.geras.PathObject,Blockly.blockRendering.PathObject),Blockly.geras.PathObject.prototype.setPath=function(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)},Blockly.geras.PathObject.prototype.setHighlightPath=function(e){this.svgPathLight.setAttribute("d",e)},Blockly.geras.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},Blockly.geras.PathObject.prototype.applyColour=function(e){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),Blockly.geras.PathObject.superClass_.applyColour.call(this,e),this.svgPath.setAttribute("stroke","none")},Blockly.geras.PathObject.prototype.setStyle=function(e){this.style=e,this.colourDark=Blockly.utils.colour.blend("#000",this.style.colourPrimary,.2)||this.colourDark},Blockly.geras.PathObject.prototype.updateHighlighted=function(e){e?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},Blockly.geras.PathObject.prototype.updateShadow_=function(e){e&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},Blockly.geras.PathObject.prototype.updateDisabled_=function(e){Blockly.geras.PathObject.superClass_.updateDisabled_.call(this,e),e&&this.svgPath.setAttribute("stroke","none")},Blockly.geras.Renderer=function(e){Blockly.geras.Renderer.superClass_.constructor.call(this,e),this.highlightConstants_=null},Blockly.utils.object.inherits(Blockly.geras.Renderer,Blockly.blockRendering.Renderer),Blockly.geras.Renderer.prototype.init=function(e,t){Blockly.geras.Renderer.superClass_.init.call(this,e,t),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},Blockly.geras.Renderer.prototype.refreshDom=function(e,t){Blockly.geras.Renderer.superClass_.refreshDom.call(this,e,t),this.getHighlightConstants().init()},Blockly.geras.Renderer.prototype.makeConstants_=function(){return new Blockly.geras.ConstantProvider},Blockly.geras.Renderer.prototype.makeRenderInfo_=function(e){return new Blockly.geras.RenderInfo(this,e)},Blockly.geras.Renderer.prototype.makeDrawer_=function(e,t){return new Blockly.geras.Drawer(e,t)},Blockly.geras.Renderer.prototype.makePathObject=function(e,t){return new Blockly.geras.PathObject(e,t,this.getConstants())},Blockly.geras.Renderer.prototype.makeHighlightConstants_=function(){return new Blockly.geras.HighlightConstantProvider(this.getConstants())},Blockly.geras.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},Blockly.blockRendering.register("geras",Blockly.geras.Renderer),Blockly.zelos={},Blockly.zelos.ConstantProvider=function(){Blockly.zelos.ConstantProvider.superClass_.constructor.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.replacementGlowFilter_=null},Blockly.utils.object.inherits(Blockly.zelos.ConstantProvider,Blockly.blockRendering.ConstantProvider),Blockly.zelos.ConstantProvider.prototype.setFontConstants_=function(e){Blockly.zelos.ConstantProvider.superClass_.setFontConstants_.call(this,e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},Blockly.zelos.ConstantProvider.prototype.init=function(){Blockly.zelos.ConstantProvider.superClass_.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},Blockly.zelos.ConstantProvider.prototype.setDynamicProperties_=function(e){Blockly.zelos.ConstantProvider.superClass_.setDynamicProperties_.call(this,e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var t=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=t&&!isNaN(t)?t:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE},Blockly.zelos.ConstantProvider.prototype.dispose=function(){Blockly.zelos.ConstantProvider.superClass_.dispose.call(this),this.selectedGlowFilter_&&Blockly.utils.dom.removeNode(this.selectedGlowFilter_),this.replacementGlowFilter_&&Blockly.utils.dom.removeNode(this.replacementGlowFilter_)},Blockly.zelos.ConstantProvider.prototype.makeStartHat=function(){var e=this.START_HAT_HEIGHT,t=this.START_HAT_WIDTH;return{height:e,width:t,path:Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(25,-e),Blockly.utils.svgPaths.point(71,-e),Blockly.utils.svgPaths.point(t,0)])}},Blockly.zelos.ConstantProvider.prototype.makeHexagonal=function(){function e(e,n,o){var r=e/2;return r=r>t?t:r,o=o?-1:1,e=(n?-1:1)*e/2,Blockly.utils.svgPaths.lineTo(-o*r,e)+Blockly.utils.svgPaths.lineTo(o*r,e)}var t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(e){return(e/=2)>t?t:e},height:function(e){return e},connectionOffsetY:function(e){return e/2},connectionOffsetX:function(e){return-e},pathDown:function(t){return e(t,!1,!1)},pathUp:function(t){return e(t,!0,!1)},pathRightDown:function(t){return e(t,!1,!0)},pathRightUp:function(t){return e(t,!1,!0)}}},Blockly.zelos.ConstantProvider.prototype.makeRounded=function(){function e(e,t,o){var r=e>n?e-n:0;return e=(e>n?n:e)/2,Blockly.utils.svgPaths.arc("a","0 0,1",e,Blockly.utils.svgPaths.point((t?-1:1)*e,(t?-1:1)*e))+Blockly.utils.svgPaths.lineOnAxis("v",(o?1:-1)*r)+Blockly.utils.svgPaths.arc("a","0 0,1",e,Blockly.utils.svgPaths.point((t?1:-1)*e,(t?-1:1)*e))}var t=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,n=2*t;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(e){return(e/=2)>t?t:e},height:function(e){return e},connectionOffsetY:function(e){return e/2},connectionOffsetX:function(e){return-e},pathDown:function(t){return e(t,!1,!1)},pathUp:function(t){return e(t,!0,!1)},pathRightDown:function(t){return e(t,!1,!0)},pathRightUp:function(t){return e(t,!1,!0)}}},Blockly.zelos.ConstantProvider.prototype.makeSquared=function(){function e(e,n,o){return e-=2*t,Blockly.utils.svgPaths.arc("a","0 0,1",t,Blockly.utils.svgPaths.point((n?-1:1)*t,(n?-1:1)*t))+Blockly.utils.svgPaths.lineOnAxis("v",(o?1:-1)*e)+Blockly.utils.svgPaths.arc("a","0 0,1",t,Blockly.utils.svgPaths.point((n?1:-1)*t,(n?-1:1)*t))}var t=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(e){return t},height:function(e){return e},connectionOffsetY:function(e){return e/2},connectionOffsetX:function(e){return-e},pathDown:function(t){return e(t,!1,!1)},pathUp:function(t){return e(t,!0,!1)},pathRightDown:function(t){return e(t,!1,!0)},pathRightUp:function(t){return e(t,!1,!0)}}},Blockly.zelos.ConstantProvider.prototype.shapeFor=function(e){var t=e.getCheck();switch(!t&&e.targetConnection&&(t=e.targetConnection.getCheck()),e.type){case Blockly.connectionTypes.INPUT_VALUE:case Blockly.connectionTypes.OUTPUT_VALUE:if(null!=(e=e.getSourceBlock().getOutputShape()))switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return t&&-1!=t.indexOf("Boolean")?this.HEXAGONAL:(t&&-1!=t.indexOf("Number")||t&&t.indexOf("String"),this.ROUNDED);case Blockly.connectionTypes.PREVIOUS_STATEMENT:case Blockly.connectionTypes.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},Blockly.zelos.ConstantProvider.prototype.makeNotch=function(){function e(e){return Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(e*r/2,0),Blockly.utils.svgPaths.point(e*r*3/4,s/2),Blockly.utils.svgPaths.point(e*r,s)])+Blockly.utils.svgPaths.line([Blockly.utils.svgPaths.point(e*r,i)])+Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(e*r/4,s/2),Blockly.utils.svgPaths.point(e*r/2,s),Blockly.utils.svgPaths.point(e*r,s)])+Blockly.utils.svgPaths.lineOnAxis("h",e*o)+Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(e*r/2,0),Blockly.utils.svgPaths.point(e*r*3/4,-s/2),Blockly.utils.svgPaths.point(e*r,-s)])+Blockly.utils.svgPaths.line([Blockly.utils.svgPaths.point(e*r,-i)])+Blockly.utils.svgPaths.curve("c",[Blockly.utils.svgPaths.point(e*r/4,-s/2),Blockly.utils.svgPaths.point(e*r/2,-s),Blockly.utils.svgPaths.point(e*r,-s)])}var t=this.NOTCH_WIDTH,n=this.NOTCH_HEIGHT,o=t/3,r=o/3,i=n/2,s=i/2,a=e(1),l=e(-1);return{type:this.SHAPES.NOTCH,width:t,height:n,pathLeft:a,pathRight:l}},Blockly.zelos.ConstantProvider.prototype.makeInsideCorners=function(){var e=this.CORNER_RADIUS,t=Blockly.utils.svgPaths.arc("a","0 0,0",e,Blockly.utils.svgPaths.point(-e,e)),n=Blockly.utils.svgPaths.arc("a","0 0,1",e,Blockly.utils.svgPaths.point(-e,e));return{width:e,height:e,pathTop:t,pathBottom:Blockly.utils.svgPaths.arc("a","0 0,0",e,Blockly.utils.svgPaths.point(e,e)),rightWidth:e,rightHeight:e,pathTopRight:n,pathBottomRight:Blockly.utils.svgPaths.arc("a","0 0,1",e,Blockly.utils.svgPaths.point(e,e))}},Blockly.zelos.ConstantProvider.prototype.generateSecondaryColour_=function(e){return Blockly.utils.colour.blend("#000",e,.15)||e},Blockly.zelos.ConstantProvider.prototype.generateTertiaryColour_=function(e){return Blockly.utils.colour.blend("#000",e,.25)||e},Blockly.zelos.ConstantProvider.prototype.createDom=function(e,t,n){Blockly.zelos.ConstantProvider.superClass_.createDom.call(this,e,t,n),e=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.DEFS,{},e),t=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},t),n=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.selectedGlowFilterId=t.id,this.selectedGlowFilter_=t,e=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),t=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},t),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter_=e},Blockly.zelos.ConstantProvider.prototype.getCSS_=function(e){return[e+" .blocklyText,",e+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",e+" .blocklyText {","fill: #fff;","}",e+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",e+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",e+" .blocklyNonEditableText>text,",e+" .blocklyEditableText>text,",e+" .blocklyNonEditableText>g>text,",e+" .blocklyEditableText>g>text {","fill: #575E75;","}",e+" .blocklyFlyoutLabelText {","fill: #575E75;","fill: #fff;","}",e+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",e+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",e+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",e+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",e+" .blocklyDropdownText {","fill: #fff !important;","}",e+".blocklyWidgetDiv .goog-menuitem,",e+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",e+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",e+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",e+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",e+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]},Blockly.zelos.TopRow=function(e){Blockly.zelos.TopRow.superClass_.constructor.call(this,e)},Blockly.utils.object.inherits(Blockly.zelos.TopRow,Blockly.blockRendering.TopRow),Blockly.zelos.TopRow.prototype.endsWithElemSpacer=function(){return!1},Blockly.zelos.TopRow.prototype.hasLeftSquareCorner=function(e){var t=(e.hat?"cap"===e.hat:this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||t},Blockly.zelos.TopRow.prototype.hasRightSquareCorner=function(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection},Blockly.zelos.BottomRow=function(e){Blockly.zelos.BottomRow.superClass_.constructor.call(this,e)},Blockly.utils.object.inherits(Blockly.zelos.BottomRow,Blockly.blockRendering.BottomRow),Blockly.zelos.BottomRow.prototype.endsWithElemSpacer=function(){return!1},Blockly.zelos.BottomRow.prototype.hasLeftSquareCorner=function(e){return!!e.outputConnection},Blockly.zelos.BottomRow.prototype.hasRightSquareCorner=function(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection},Blockly.zelos.RightConnectionShape=function(e){Blockly.zelos.RightConnectionShape.superClass_.constructor.call(this,e),this.type|=Blockly.blockRendering.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0},Blockly.utils.object.inherits(Blockly.zelos.RightConnectionShape,Blockly.blockRendering.Measurable),Blockly.zelos.RenderInfo=function(e,t){Blockly.zelos.RenderInfo.superClass_.constructor.call(this,e,t),this.topRow=new Blockly.zelos.TopRow(this.constants_),this.bottomRow=new Blockly.zelos.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!t.getInputsInline()||t.isCollapsed(),this.hasStatementInput=0<t.statementInputCount,this.rightSide=this.outputConnection?new Blockly.zelos.RightConnectionShape(this.constants_):null},Blockly.utils.object.inherits(Blockly.zelos.RenderInfo,Blockly.blockRendering.RenderInfo),Blockly.zelos.RenderInfo.prototype.getRenderer=function(){return this.renderer_},Blockly.zelos.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},Blockly.zelos.RenderInfo.prototype.shouldStartNewRow_=function(e,t){return!!t&&(e.type==Blockly.inputTypes.STATEMENT||t.type==Blockly.inputTypes.STATEMENT||(e.type==Blockly.inputTypes.VALUE||e.type==Blockly.inputTypes.DUMMY)&&(!this.isInline||this.isMultiRow))},Blockly.zelos.RenderInfo.prototype.getDesiredRowWidth_=function(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):Blockly.zelos.RenderInfo.superClass_.getDesiredRowWidth_.call(this,e)},Blockly.zelos.RenderInfo.prototype.getInRowSpacing_=function(e,t){return e&&t||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&t&&Blockly.blockRendering.Types.isStatementInput(t)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&Blockly.blockRendering.Types.isLeftRoundedCorner(e)&&t&&(Blockly.blockRendering.Types.isPreviousConnection(t)||Blockly.blockRendering.Types.isNextConnection(t))?t.notchOffset-this.constants_.CORNER_RADIUS:e&&Blockly.blockRendering.Types.isLeftSquareCorner(e)&&t&&Blockly.blockRendering.Types.isHat(t)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},Blockly.zelos.RenderInfo.prototype.getSpacerRowHeight_=function(e,t){if(Blockly.blockRendering.Types.isTopRow(e)&&Blockly.blockRendering.Types.isBottomRow(t))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var n=Blockly.blockRendering.Types.isInputRow(e)&&e.hasStatement,o=Blockly.blockRendering.Types.isInputRow(t)&&t.hasStatement;return o||n?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),o&&n?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):Blockly.blockRendering.Types.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):Blockly.blockRendering.Types.isBottomRow(t)?this.outputConnection?!t.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},Blockly.zelos.RenderInfo.prototype.getSpacerRowWidth_=function(e,t){var n=this.width-this.startX;return Blockly.blockRendering.Types.isInputRow(e)&&e.hasStatement||Blockly.blockRendering.Types.isInputRow(t)&&t.hasStatement?Math.max(n,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):n},Blockly.zelos.RenderInfo.prototype.getElemCenterline_=function(e,t){if(e.hasStatement&&!Blockly.blockRendering.Types.isSpacer(t)&&!Blockly.blockRendering.Types.isStatementInput(t))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(Blockly.blockRendering.Types.isInlineInput(t)){var n=t.connectedBlock;if(n&&n.outputConnection&&n.nextConnection)return e.yPos+n.height/2}return Blockly.zelos.RenderInfo.superClass_.getElemCenterline_.call(this,e,t)},Blockly.zelos.RenderInfo.prototype.addInput_=function(e,t){e.type==Blockly.inputTypes.DUMMY&&t.hasDummyInput&&t.align==Blockly.constants.ALIGN.LEFT&&e.align==Blockly.constants.ALIGN.RIGHT&&(t.rightAlignedDummyInput=e),Blockly.zelos.RenderInfo.superClass_.addInput_.call(this,e,t)},Blockly.zelos.RenderInfo.prototype.addAlignmentPadding_=function(e,t){if(e.rightAlignedDummyInput){for(var n,o,r=0;(o=e.elements[r])&&(Blockly.blockRendering.Types.isSpacer(o)&&(n=o),!Blockly.blockRendering.Types.isField(o)||o.parentInput!=e.rightAlignedDummyInput);r++);if(n)return n.width+=t,void(e.width+=t)}Blockly.zelos.RenderInfo.superClass_.addAlignmentPadding_.call(this,e,t)},Blockly.zelos.RenderInfo.prototype.adjustXPosition_=function(){for(var e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,t=e,n=2;n<this.rows.length-1;n+=2){var o=this.rows[n-1],r=this.rows[n],i=this.rows[n+1];if(o=2==n?!!this.topRow.hasPreviousConnection:!!o.followsStatement,i=n+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!i.precedesStatement,Blockly.blockRendering.Types.isInputRow(r)&&r.hasStatement)r.measure(),t=r.width-r.getLastInput().width+e;else if(o&&(2==n||i)&&Blockly.blockRendering.Types.isInputRow(r)&&!r.hasStatement){i=r.xPos,o=null;for(var s,a=0;s=r.elements[a];a++)Blockly.blockRendering.Types.isSpacer(s)&&(o=s),!(o&&(Blockly.blockRendering.Types.isField(s)||Blockly.blockRendering.Types.isInput(s))&&i<t)||Blockly.blockRendering.Types.isField(s)&&(s.field instanceof Blockly.FieldLabel||s.field instanceof Blockly.FieldImage)||(o.width+=t-i),i+=s.width}}},Blockly.zelos.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var e,t=0,n=0;e=this.rows[n];n++)e.yPos=t,t+=e.height;this.height=t,n=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,t=this.outputConnection.shape.height(n),n=this.outputConnection.shape.width(n),this.outputConnection.height=t,this.outputConnection.width=n,this.outputConnection.startX=n,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(t),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(n),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=n,this.rightSide.height=t,this.rightSide.width=e,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+e),this.startX=n,this.width+=n+e,this.widthWithChildren+=n+e}},Blockly.zelos.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e,t=0,n=0;e=this.rows[n];n++)if(Blockly.blockRendering.Types.isInputRow(e)){t=e.elements[e.elements.length-2];var o=this.getNegativeSpacing_(e.elements[1]),r=this.getNegativeSpacing_(t);t=o+r;var i=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-t<i&&(o=(t=this.width-i)/2,r=t/2),e.elements.unshift(new Blockly.blockRendering.InRowSpacer(this.constants_,-o)),e.elements.push(new Blockly.blockRendering.InRowSpacer(this.constants_,-r))}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,n=0;e=this.rows[n];n++)Blockly.blockRendering.Types.isTopOrBottomRow(e)&&(e.elements[1].width-=t,e.elements[1].widthWithConnectedBlocks-=t),e.width-=t,e.widthWithConnectedBlocks-=t}},Blockly.zelos.RenderInfo.prototype.getNegativeSpacing_=function(e){if(!e)return 0;var t=this.outputConnection.width,n=this.outputConnection.shape.type,o=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(n){case o.SHAPES.ROUND:return n=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,t-(n=this.height/2>n?n:this.height/2)*(1-Math.sin(Math.acos((n-this.constants_.SMALL_PADDING)/n)));default:return 0}if(Blockly.blockRendering.Types.isInlineInput(e)){var r=e.connectedBlock;return e=r?r.pathObject.outputShapeType:e.shape.type,r&&r.outputConnection&&(r.statementInputCount||r.nextConnection)||n==o.SHAPES.HEXAGONAL&&n!=e?0:t-this.constants_.SHAPE_IN_SHAPE_PADDING[n][e]}return Blockly.blockRendering.Types.isField(e)?n==o.SHAPES.ROUND&&e.field instanceof Blockly.FieldTextInput?t-2.75*o.GRID_UNIT:t-this.constants_.SHAPE_IN_SHAPE_PADDING[n][0]:Blockly.blockRendering.Types.isIcon(e)?this.constants_.SMALL_PADDING:0},Blockly.zelos.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var e=2;e<this.rows.length-1;e+=2){var t=this.rows[e-1],n=this.rows[e],o=this.rows[e+1],r=2==e,i=e+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!o.precedesStatement;if(r?this.topRow.hasPreviousConnection:t.followsStatement){var s=3==n.elements.length&&(n.elements[1].field instanceof Blockly.FieldLabel||n.elements[1].field instanceof Blockly.FieldImage);if(!r&&s)t.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.SMALL_PADDING,n.height-=this.constants_.MEDIUM_PADDING;else if(r||i){if(i){for(r=!1,i=0;s=n.elements[i];i++)if(Blockly.blockRendering.Types.isInlineInput(s)&&s.connectedBlock&&!s.connectedBlock.isShadow()&&40<=s.connectedBlock.getHeightWidth().height){r=!0;break}r&&(t.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.SMALL_PADDING)}}else t.height+=this.constants_.SMALL_PADDING}}},Blockly.zelos.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),Blockly.zelos.RenderInfo.superClass_.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)},Blockly.zelos.Drawer=function(e,t){Blockly.zelos.Drawer.superClass_.constructor.call(this,e,t)},Blockly.utils.object.inherits(Blockly.zelos.Drawer,Blockly.blockRendering.Drawer),Blockly.zelos.Drawer.prototype.draw=function(){var e=this.block_.pathObject;e.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),e.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&e.flipRTL(),Blockly.blockRendering.useDebugger&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()},Blockly.zelos.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):Blockly.zelos.Drawer.superClass_.drawOutline_.call(this)},Blockly.zelos.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():Blockly.zelos.Drawer.superClass_.drawLeft_.call(this)},Blockly.zelos.Drawer.prototype.drawRightSideRow_=function(e){if(!(0>=e.height))if(e.precedesStatement||e.followsStatement){var t=this.constants_.INSIDE_CORNERS.rightHeight;t=e.height-(e.precedesStatement?t:0),this.outlinePath_+=(e.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<t?Blockly.utils.svgPaths.lineOnAxis("V",e.yPos+t):"")+(e.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("V",e.yPos+e.height)},Blockly.zelos.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},Blockly.zelos.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},Blockly.zelos.Drawer.prototype.drawFlatTop_=function(){var e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=Blockly.utils.svgPaths.moveBy(e.xPos,this.info_.startY),this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("h",e.width)},Blockly.zelos.Drawer.prototype.drawFlatBottom_=function(){var e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("V",e.baseline),this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("h",-e.width)},Blockly.zelos.Drawer.prototype.drawInlineInput_=function(e){this.positionInlineInputConnection_(e);var t=e.input.name;if(!e.connectedBlock&&!this.info_.isInsertionMarker){var n=e.width-2*e.connectionWidth;e=Blockly.utils.svgPaths.moveTo(e.xPos+e.connectionWidth,e.centerline-e.height/2)+Blockly.utils.svgPaths.lineOnAxis("h",n)+e.shape.pathRightDown(e.height)+Blockly.utils.svgPaths.lineOnAxis("h",-n)+e.shape.pathUp(e.height)+"z",this.block_.pathObject.setOutlinePath(t,e)}},Blockly.zelos.Drawer.prototype.drawStatementInput_=function(e){var t=e.getLastInput(),n=t.xPos+t.notchOffset+t.shape.width,o=t.shape.pathRight+Blockly.utils.svgPaths.lineOnAxis("h",-(t.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,r=e.height-2*this.constants_.INSIDE_CORNERS.height;t=this.constants_.INSIDE_CORNERS.pathBottom+Blockly.utils.svgPaths.lineOnAxis("h",t.notchOffset-this.constants_.INSIDE_CORNERS.width)+(t.connectedBottomNextConnection?"":t.shape.pathLeft),this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("H",n)+o+Blockly.utils.svgPaths.lineOnAxis("v",r)+t+Blockly.utils.svgPaths.lineOnAxis("H",e.xPos+e.width),this.positionStatementInputConnection_(e)},Blockly.zelos.MarkerSvg=function(e,t,n){Blockly.zelos.MarkerSvg.superClass_.constructor.call(this,e,t,n)},Blockly.utils.object.inherits(Blockly.zelos.MarkerSvg,Blockly.blockRendering.MarkerSvg),Blockly.zelos.MarkerSvg.prototype.showWithInputOutput_=function(e){var t=e.getSourceBlock();e=e.getLocation().getOffsetInBlock(),this.positionCircle_(e.x,e.y),this.setParent_(t),this.showCurrent_()},Blockly.zelos.MarkerSvg.prototype.showWithOutput_=function(e){this.showWithInputOutput_(e)},Blockly.zelos.MarkerSvg.prototype.showWithInput_=function(e){this.showWithInputOutput_(e)},Blockly.zelos.MarkerSvg.prototype.showWithBlock_=function(e){var t=(e=e.getLocation()).getHeightWidth();this.positionRect_(0,0,t.width,t.height),this.setParent_(e),this.showCurrent_()},Blockly.zelos.MarkerSvg.prototype.positionCircle_=function(e,t){this.markerCircle_.setAttribute("cx",e),this.markerCircle_.setAttribute("cy",t),this.currentMarkerSvg=this.markerCircle_},Blockly.zelos.MarkerSvg.prototype.hide=function(){Blockly.zelos.MarkerSvg.superClass_.hide.call(this),this.markerCircle_.style.display="none"},Blockly.zelos.MarkerSvg.prototype.createDomInternal_=function(){if(Blockly.zelos.MarkerSvg.superClass_.createDomInternal_.call(this),this.markerCircle_=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var e=this.getBlinkProperties_();Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.ANIMATE,e,this.markerCircle_)}return this.markerSvg_},Blockly.zelos.MarkerSvg.prototype.applyColour_=function(e){Blockly.zelos.MarkerSvg.superClass_.applyColour_.call(this,e),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")},Blockly.zelos.PathObject=function(e,t,n){Blockly.zelos.PathObject.superClass_.constructor.call(this,e,t,n),this.constants=n,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null},Blockly.utils.object.inherits(Blockly.zelos.PathObject,Blockly.blockRendering.PathObject),Blockly.zelos.PathObject.prototype.setPath=function(e){Blockly.zelos.PathObject.superClass_.setPath.call(this,e),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",e)},Blockly.zelos.PathObject.prototype.applyColour=function(e){for(var t in Blockly.zelos.PathObject.superClass_.applyColour.call(this,e),e.isShadow()&&e.getParent()&&this.svgPath.setAttribute("stroke",e.getParent().style.colourTertiary),this.outlines_)this.outlines_[t].setAttribute("fill",this.style.colourTertiary)},Blockly.zelos.PathObject.prototype.flipRTL=function(){for(var e in Blockly.zelos.PathObject.superClass_.flipRTL.call(this),this.outlines_)this.outlines_[e].setAttribute("transform","scale(-1 1)")},Blockly.zelos.PathObject.prototype.updateSelected=function(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},Blockly.zelos.PathObject.prototype.updateReplacementFade=function(e){this.setClass_("blocklyReplaceable",e),e?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},Blockly.zelos.PathObject.prototype.updateShapeForInputHighlight=function(e,t){e=e.getParentInput().name,(e=this.getOutlinePath_(e))&&(t?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))},Blockly.zelos.PathObject.prototype.beginDrawing=function(){for(var e in this.remainingOutlines_=Object.create(null),this.outlines_)this.remainingOutlines_[e]=1},Blockly.zelos.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var e in this.remainingOutlines_)this.removeOutlinePath_(e);this.remainingOutlines_=null},Blockly.zelos.PathObject.prototype.setOutlinePath=function(e,t){(e=this.getOutlinePath_(e)).setAttribute("d",t),e.setAttribute("fill",this.style.colourTertiary)},Blockly.zelos.PathObject.prototype.getOutlinePath_=function(e){return this.outlines_[e]||(this.outlines_[e]=Blockly.utils.dom.createSvgElement(Blockly.utils.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[e],this.outlines_[e]},Blockly.zelos.PathObject.prototype.removeOutlinePath_=function(e){this.outlines_[e].parentNode.removeChild(this.outlines_[e]),delete this.outlines_[e]},Blockly.zelos.Renderer=function(e){Blockly.zelos.Renderer.superClass_.constructor.call(this,e)},Blockly.utils.object.inherits(Blockly.zelos.Renderer,Blockly.blockRendering.Renderer),Blockly.zelos.Renderer.prototype.makeConstants_=function(){return new Blockly.zelos.ConstantProvider},Blockly.zelos.Renderer.prototype.makeRenderInfo_=function(e){return new Blockly.zelos.RenderInfo(this,e)},Blockly.zelos.Renderer.prototype.makeDrawer_=function(e,t){return new Blockly.zelos.Drawer(e,t)},Blockly.zelos.Renderer.prototype.makeMarkerDrawer=function(e,t){return new Blockly.zelos.MarkerSvg(e,this.getConstants(),t)},Blockly.zelos.Renderer.prototype.makePathObject=function(e,t){return new Blockly.zelos.PathObject(e,t,this.getConstants())},Blockly.zelos.Renderer.prototype.shouldHighlightConnection=function(e){return e.type!=Blockly.connectionTypes.INPUT_VALUE&&e.type!==Blockly.connectionTypes.OUTPUT_VALUE},Blockly.zelos.Renderer.prototype.getConnectionPreviewMethod=function(e,t,n){return t.type==Blockly.connectionTypes.OUTPUT_VALUE?e.isConnected()?Blockly.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:Blockly.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:Blockly.zelos.Renderer.superClass_.getConnectionPreviewMethod(e,t,n)},Blockly.blockRendering.register("zelos",Blockly.zelos.Renderer),Blockly.pxt={},Blockly.pxt.ConstantProvider=function(){Blockly.pxt.ConstantProvider.superClass_.constructor.call(this),this.FIELD_TEXT_FONTFAMILY='"Monaco", "Menlo", "Ubuntu Mono", "Consolas", "source-code-pro", monospace',this.FIELD_TEXT_FONTWEIGHT="600",this.ICON_SEPARATOR_HEIGHT=8*this.GRID_UNIT,this.ELLIPSES_RADIUS=6,this.ELLIPSES_SPACING=8,this.COLLAPSE_IMAGE_DATAURI="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg enable-background='new 0 0 24 24' version='1.1' viewBox='0 0 24 24' xml:space='preserve' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle type='text/css'%3E .st0%7Bfill:%23CF8B17;%7D .st1%7Bfill:%23FFFFFF;%7D%0A%3C/style%3E%3Ctitle%3Erepeat%3C/title%3E%3Ccircle cx='12' cy='12' r='10.503' fill='none' stroke='%23fff' stroke-linecap='square' stroke-linejoin='round' stroke-width='2'/%3E%3Cg transform='matrix(.0086269 0 0 -.0086269 4.8224 17.354)'%3E%3Cpath d='m1611 367.42q0 53-37 90l-651 651q-38 38-91 38-54 0-90-38l-651-651q-38-36-38-90 0-53 38-91l74-75q39-37 91-37 53 0 90 37l486 486 486-486q37-37 90-37 52 0 91 37l75 75q37 39 37 91z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E%0A",this.EXPAND_IMAGE_DATAURI="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg enable-background='new 0 0 24 24' version='1.1' viewBox='0 0 24 24' xml:space='preserve' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle type='text/css'%3E .st0%7Bfill:%23CF8B17;%7D .st1%7Bfill:%23FFFFFF;%7D%0A%3C/style%3E%3Ctitle%3Erepeat%3C/title%3E%3Ccircle cx='12' cy='12' r='10.503' fill='none' stroke='%23fff' stroke-linecap='square' stroke-linejoin='round' stroke-width='2'/%3E%3Cg transform='matrix(.0086269 0 0 -.0086269 4.8224 17.654)'%3E%3Cpath d='m1611 832q0-53-37-90l-651-651q-38-38-91-38-54 0-90 38l-651 651q-38 36-38 90 0 53 38 91l74 75q39 37 91 37 53 0 90-37l486-486 486 486q37 37 90 37 52 0 91-37l75-75q37-39 37-91z' fill='%23fff'/%3E%3C/g%3E%3C/svg%3E%0A",this.highlightedGlowFilterId="",this.highlightedGlowFilter_=null,this.warningGlowFilterId="",this.warningGlowFilter_=null,this.dropdownArrowImageId=""},Blockly.utils.object.inherits(Blockly.pxt.ConstantProvider,Blockly.zelos.ConstantProvider),Blockly.pxt.ConstantProvider.prototype.init=function(){Blockly.pxt.ConstantProvider.superClass_.init.call(this),this.ELLIPSES=this.makeEllipses()},Blockly.pxt.ConstantProvider.prototype.createDom=function(e,t,n){Blockly.pxt.ConstantProvider.superClass_.createDom.call(this,e,t,n),e=Blockly.utils.dom.createSvgElement("defs",{},e),t=Blockly.utils.dom.createSvgElement("filter",{id:"blocklyHighlightGlowFilter"+this.randomIdentifier_,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),Blockly.utils.dom.createSvgElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:Blockly.Colours.highlightGlowSize},t),n=Blockly.utils.dom.createSvgElement("feComponentTransfer",{result:"outBlur"},t),Blockly.utils.dom.createSvgElement("feFuncA",{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),Blockly.utils.dom.createSvgElement("feFlood",{"flood-color":Blockly.Colours.highlightGlow,"flood-opacity":Blockly.Colours.highlightGlowOpacity,result:"outColor"},t),Blockly.utils.dom.createSvgElement("feComposite",{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.highlightedGlowFilterId=t.id,this.highlightedGlowFilter_=t,t=Blockly.utils.dom.createSvgElement("filter",{id:"blocklyHighlightWarningFilter"+this.randomIdentifier_,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),Blockly.utils.dom.createSvgElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:Blockly.Colours.warningGlowSize},t),n=Blockly.utils.dom.createSvgElement("feComponentTransfer",{result:"outBlur"},t),Blockly.utils.dom.createSvgElement("feFuncA",{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),Blockly.utils.dom.createSvgElement("feFlood",{"flood-color":Blockly.Colours.warningGlow,"flood-opacity":Blockly.Colours.warningGlowOpacity,result:"outColor"},t),Blockly.utils.dom.createSvgElement("feComposite",{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.warningGlowFilterId=t.id,this.warningGlowFilter_=t,t=this.FIELD_DROPDOWN_SVG_ARROW_SIZE,(e=Blockly.utils.dom.createSvgElement("image",{id:"blocklyDropdownArrowSvg"+this.randomIdentifier_,height:t+"px",width:t+"px"},e)).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.FIELD_DROPDOWN_SVG_ARROW_DATAURI),this.dropdownArrowImageId=e.id},Blockly.pxt.ConstantProvider.prototype.makeEllipses=function(){for(var e=this.ELLIPSES_RADIUS,t=this.ELLIPSES_SPACING,n="",o=0;3>o;o++)n+=Blockly.utils.svgPaths.moveBy(t,0)+Blockly.utils.svgPaths.arc("a","180 1,1",e,Blockly.utils.svgPaths.point(2*e,0));for(o=0;3>o;o++)n+=Blockly.utils.svgPaths.arc("a","180 1,1",e,Blockly.utils.svgPaths.point(2*-e,0))+Blockly.utils.svgPaths.moveBy(-t,0);return n},Blockly.pxt.ConstantProvider.prototype.getCSS_=function(e){return Blockly.pxt.ConstantProvider.superClass_.getCSS_.call(this,e).concat([e+" .blocklyConnectionIndicator, "+e+" .blocklyInputConnectionIndicator {","fill: #ff0000;","fill-opacity: 0.9;","stroke: #ffff00;","stroke-width: 3px;","}",e+" .blocklyConnectionIndicator {","display: none;","}",e+" .blocklyBlockDragSurface > g > .blocklyDraggable > .blocklyConnectionIndicator {","display: block;","}",e+" .blocklyConnectionLine {","stroke: #ffff00;","stroke-width: 4px;","}",e+" .blocklyConnectionLine.hidden {","display: none;","}",e+" .blocklyFlyoutHeading .blocklyFlyoutLabelText {font-size: 1.5rem;","}"])},Blockly.pxt.PathObject=function(e,t,n){Blockly.pxt.PathObject.superClass_.constructor.call(this,e,t,n),this.svgOutputConnectionIndicator_=this.svgPathHighlightedWarning_=this.svgPathHighlighted_=null,Blockly.utils.dom.addClass(this.svgPath,"blocklyBlockBackground")},Blockly.utils.object.inherits(Blockly.pxt.PathObject,Blockly.zelos.PathObject),Blockly.pxt.PathObject.prototype.setPath=function(e){Blockly.pxt.PathObject.superClass_.setPath.call(this,e),this.svgPathHighlighted_&&this.svgPathHighlighted_.setAttribute("d",e),this.svgPathHighlightedWarning_&&this.svgPathHighlightedWarning_.setAttribute("d",e)},Blockly.pxt.PathObject.prototype.applyColour=function(e){if(Blockly.pxt.PathObject.superClass_.applyColour.call(this,e),e.isShadow()&&e.getParent()){e=e.getParent().style.colourTertiary;var t=Blockly.utils.colour.hexToRgb(e);.15>Blockly.utils.colour.luminance(t)&&this.svgPath.setAttribute("stroke",Blockly.utils.colour.lighten(e,.3))}},Blockly.pxt.PathObject.prototype.updateHighlighted=function(e){this.setClass_("blocklyHighlighted",e),e?this.svgPathHighlighted_||(this.svgPathHighlighted_=this.svgPath.cloneNode(!0),this.svgPathHighlighted_.setAttribute("fill","none"),this.svgPathHighlighted_.setAttribute("filter","url(#"+this.constants.highlightedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathHighlighted_)):this.svgPathHighlighted_&&(this.svgRoot.removeChild(this.svgPathHighlighted_),this.svgPathHighlighted_=null)},Blockly.pxt.PathObject.prototype.updateHighlightedWarning=function(e){this.setClass_("blocklyHighlightedWarning",e),e?this.svgPathHighlightedWarning_||(this.svgPathHighlightedWarning_=this.svgPath.cloneNode(!0),this.svgPathHighlightedWarning_.setAttribute("fill","none"),this.svgPathHighlightedWarning_.setAttribute("filter","url(#"+this.constants.warningGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathHighlightedWarning_)):this.svgPathHighlightedWarning_&&(this.svgRoot.removeChild(this.svgPathHighlightedWarning_),this.svgPathHighlightedWarning_=null)},Blockly.pxt.PathObject.prototype.updateSelected=function(e){Blockly.pxt.PathObject.superClass_.updateSelected.call(this,e),e&&this.svgOutputConnectionIndicator_&&(this.svgRoot.removeChild(this.svgOutputConnectionIndicator_),this.svgRoot.appendChild(this.svgOutputConnectionIndicator_))},Blockly.pxt.PathObject.prototype.positionConnectionIndicator=function(e,t){this.svgOutputConnectionIndicator_||(this.svgOutputConnectionIndicator_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyConnectionIndicator"}),this.svgRoot.appendChild(this.svgOutputConnectionIndicator_),Blockly.utils.dom.createSvgElement("circle",{r:Blockly.CONNECTION_INDICATOR_RADIUS},this.svgOutputConnectionIndicator_)),this.svgOutputConnectionIndicator_.setAttribute("transform","translate("+e+","+t+")")},Blockly.pxt.Drawer=function(e,t){Blockly.pxt.Drawer.superClass_.constructor.call(this,e,t)},Blockly.utils.object.inherits(Blockly.pxt.Drawer,Blockly.zelos.Drawer),Blockly.pxt.Drawer.prototype.drawCollapsedStack_=function(e){var t=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.constants_.INSIDE_CORNERS.width,n=this.constants_.STATEMENT_INPUT_PADDING_LEFT+2*this.constants_.INSIDE_CORNERS.width+Blockly.utils.svgPaths.lineOnAxis("h",-this.constants_.INSIDE_CORNERS.width)+this.constants_.INSIDE_CORNERS.pathTop,o=e.height-2*this.constants_.INSIDE_CORNERS.height,r=this.constants_.INSIDE_CORNERS.pathBottom+Blockly.utils.svgPaths.lineOnAxis("h",this.constants_.INSIDE_CORNERS.width),i=this.constants_.ELLIPSES;this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.bottomRight+Blockly.utils.svgPaths.lineOnAxis("H",t)+n+Blockly.utils.svgPaths.lineOnAxis("v",o/2)+i+Blockly.utils.svgPaths.lineOnAxis("v",o/2)+r+Blockly.utils.svgPaths.lineOnAxis("H",e.xPos+e.width-this.constants_.OUTSIDE_CORNERS.rightHeight)+this.constants_.OUTSIDE_CORNERS.topRight},Blockly.pxt.Drawer.prototype.drawLeft_=function(){if(Blockly.pxt.Drawer.superClass_.drawLeft_.call(this),this.info_.rows.find((function(e){return e.isCollapsedStack}))){var e=this.info_.startY;Blockly.blockRendering.Types.isLeftRoundedCorner(this.info_.topRow.elements[0])&&(e+=this.constants_.OUTSIDE_CORNERS.rightHeight),this.outlinePath_=this.outlinePath_.slice(0,-1),this.outlinePath_+=Blockly.utils.svgPaths.lineOnAxis("V",e)}},Blockly.pxt.Drawer.prototype.drawLeftDynamicConnection_=function(){Blockly.pxt.Drawer.superClass_.drawLeftDynamicConnection_.call(this),this.block_.pathObject.positionConnectionIndicator(this.block_.outputConnection.getOffsetInBlock().x,this.block_.outputConnection.getOffsetInBlock().y)},Blockly.pxt.CollapsedInputRow=function(e){Blockly.pxt.CollapsedInputRow.superClass_.constructor.call(this,e),this.type|=Blockly.blockRendering.Types.INPUT_ROW},Blockly.utils.object.inherits(Blockly.pxt.CollapsedInputRow,Blockly.blockRendering.Row),Blockly.pxt.CollapsedInputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT},Blockly.pxt.RenderInfo=function(e,t){Blockly.pxt.RenderInfo.superClass_.constructor.call(this,e,t)},Blockly.utils.object.inherits(Blockly.pxt.RenderInfo,Blockly.zelos.RenderInfo),Blockly.pxt.RenderInfo.prototype.addCollapsedRow_=function(e){return this.rows.push(e),e=new Blockly.pxt.CollapsedInputRow(this.constants_),this.inputRowNum_++,e.isCollapsedStack=!0,e.hasDummyInput=!0,e},Blockly.pxt.Renderer=function(e){Blockly.zelos.Renderer.superClass_.constructor.call(this,e)},Blockly.utils.object.inherits(Blockly.pxt.Renderer,Blockly.zelos.Renderer),Blockly.pxt.Renderer.prototype.makePathObject=function(e,t){return new Blockly.pxt.PathObject(e,t,this.getConstants())},Blockly.pxt.Renderer.prototype.makeRenderInfo_=function(e){return new Blockly.pxt.RenderInfo(this,e)},Blockly.pxt.Renderer.prototype.makeDrawer_=function(e,t){return new Blockly.pxt.Drawer(e,t)},Blockly.pxt.Renderer.prototype.makeConstants_=function(){return new Blockly.pxt.ConstantProvider},Blockly.blockRendering.register("pxt",Blockly.pxt.Renderer),Blockly.Themes.Dark=Blockly.Theme.defineTheme("dark",{base:Blockly.Themes.Classic,componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),Blockly.Themes.Deuteranopia={},Blockly.Themes.Deuteranopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#f2a72c",colourSecondary:"#f1c172",colourTertiary:"#da921c"},list_blocks:{colourPrimary:"#7d65ab",colourSecondary:"#a88be0",colourTertiary:"#66518e"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#795a07",colourSecondary:"#ac8726",colourTertiary:"#c4a03f"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"},variable_dynamic_blocks:{colourPrimary:"#47025a",colourSecondary:"#820fa1",colourTertiary:"#8e579d"}},Blockly.Themes.Deuteranopia.categoryStyles={colour_category:{colour:"#f2a72c"},list_category:{colour:"#7d65ab"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#795a07"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#47025a"},variable_dynamic_category:{colour:"#47025a"}},Blockly.Themes.Deuteranopia=new Blockly.Theme("deuteranopia",Blockly.Themes.Deuteranopia.defaultBlockStyles,Blockly.Themes.Deuteranopia.categoryStyles),Blockly.Themes.HighContrast={},Blockly.Themes.HighContrast.defaultBlockStyles={colour_blocks:{colourPrimary:"#a52714",colourSecondary:"#FB9B8C",colourTertiary:"#FBE1DD"},list_blocks:{colourPrimary:"#4a148c",colourSecondary:"#AD7BE9",colourTertiary:"#CDB6E9"},logic_blocks:{colourPrimary:"#01579b",colourSecondary:"#64C7FF",colourTertiary:"#C5EAFF"},loop_blocks:{colourPrimary:"#33691e",colourSecondary:"#9AFF78",colourTertiary:"#E1FFD7"},math_blocks:{colourPrimary:"#1a237e",colourSecondary:"#8A9EFF",colourTertiary:"#DCE2FF"},procedure_blocks:{colourPrimary:"#006064",colourSecondary:"#77E6EE",colourTertiary:"#CFECEE"},text_blocks:{colourPrimary:"#004d40",colourSecondary:"#5ae27c",colourTertiary:"#D2FFDD"},variable_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},variable_dynamic_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB"},hat_blocks:{colourPrimary:"#880e4f",colourSecondary:"#FF73BE",colourTertiary:"#FFD4EB",hat:"cap"}},Blockly.Themes.HighContrast.categoryStyles={colour_category:{colour:"#a52714"},list_category:{colour:"#4a148c"},logic_category:{colour:"#01579b"},loop_category:{colour:"#33691e"},math_category:{colour:"#1a237e"},procedure_category:{colour:"#006064"},text_category:{colour:"#004d40"},variable_category:{colour:"#880e4f"},variable_dynamic_category:{colour:"#880e4f"}},Blockly.Themes.HighContrast=new Blockly.Theme("highcontrast",Blockly.Themes.HighContrast.defaultBlockStyles,Blockly.Themes.HighContrast.categoryStyles),Blockly.Themes.HighContrast.setComponentStyle("selectedGlowColour","#000000"),Blockly.Themes.HighContrast.setComponentStyle("selectedGlowSize",1),Blockly.Themes.HighContrast.setComponentStyle("replacementGlowColour","#000000"),Blockly.Themes.HighContrast.setFontStyle({family:null,weight:null,size:16}),Blockly.Themes.Tritanopia={},Blockly.Themes.Tritanopia.defaultBlockStyles={colour_blocks:{colourPrimary:"#05427f",colourSecondary:"#2974c0",colourTertiary:"#2d74bb"},list_blocks:{colourPrimary:"#b69ce8",colourSecondary:"#ccbaef",colourTertiary:"#9176c5"},logic_blocks:{colourPrimary:"#9fd2f1",colourSecondary:"#c0e0f4",colourTertiary:"#74bae5"},loop_blocks:{colourPrimary:"#aa1846",colourSecondary:"#d36185",colourTertiary:"#7c1636"},math_blocks:{colourPrimary:"#e6da39",colourSecondary:"#f3ec8e",colourTertiary:"#f2eeb7"},procedure_blocks:{colourPrimary:"#590721",colourSecondary:"#8c475d",colourTertiary:"#885464"},text_blocks:{colourPrimary:"#058863",colourSecondary:"#5ecfaf",colourTertiary:"#04684c"},variable_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"},variable_dynamic_blocks:{colourPrimary:"#4b2d84",colourSecondary:"#816ea7",colourTertiary:"#83759e"}},Blockly.Themes.Tritanopia.categoryStyles={colour_category:{colour:"#05427f"},list_category:{colour:"#b69ce8"},logic_category:{colour:"#9fd2f1"},loop_category:{colour:"#aa1846"},math_category:{colour:"#e6da39"},procedure_category:{colour:"#590721"},text_category:{colour:"#058863"},variable_category:{colour:"#4b2d84"},variable_dynamic_category:{colour:"#4b2d84"}},Blockly.Themes.Tritanopia=new Blockly.Theme("tritanopia",Blockly.Themes.Tritanopia.defaultBlockStyles,Blockly.Themes.Tritanopia.categoryStyles),Blockly.requires={},function(e,t){"function"==typeof define&&define.amd?define(["./blockly_compressed.js"],t):"object"==typeof exports?module.exports=t(require("./blockly_compressed.js")):e.Blockly.Blocks=t(e.Blockly)}(this,(function(e){return e.Blocks.colour={},e.Constants={},e.Constants.Colour={},e.Constants.Colour.HUE=20,e.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",outputShape:e.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"field_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",outputShape:e.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"LEFT"},{type:"input_value",name:"GREEN",check:"Number",align:"LEFT"},{type:"input_value",name:"BLUE",check:"Number",align:"LEFT"}],output:"Colour",outputShape:e.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"LEFT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"LEFT"},{type:"input_value",name:"RATIO",check:"Number",align:"LEFT"}],output:"Colour",outputShape:e.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),e.PXTBlockly={},e.PXTBlockly.Extensions={},e.PXTBlockly.Extensions.INLINE_SVGS=function(){this.ADD_IMAGE_DATAURI="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4KCjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0icmVwZWF0IgogICB4PSIwcHgiCiAgIHk9IjBweCIKICAgdmlld0JveD0iMCAwIDI0IDI0IgogICBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyNCAyNDsiCiAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTEgcjEzNzI1IgogICBzb2RpcG9kaTpkb2NuYW1lPSJhZGQuc3ZnIj48bWV0YWRhdGEKICAgICBpZD0ibWV0YWRhdGExNSI+PHJkZjpSREY+PGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPjxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PjxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz48ZGM6dGl0bGU+cmVwZWF0PC9kYzp0aXRsZT48L2NjOldvcms+PC9yZGY6UkRGPjwvbWV0YWRhdGE+PGRlZnMKICAgICBpZD0iZGVmczEzIiAvPjxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBwYWdlY29sb3I9IiNmZjQ4MjEiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMSIKICAgICBvYmplY3R0b2xlcmFuY2U9IjEwIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwIgogICAgIGd1aWRldG9sZXJhbmNlPSIxMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTY4MCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI5NjkiCiAgICAgaWQ9Im5hbWVkdmlldzExIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp6b29tPSIxOS42NjY2NjciCiAgICAgaW5rc2NhcGU6Y3g9IjEyLjkxNTI1NCIKICAgICBpbmtzY2FwZTpjeT0iMTYuMDY3Nzk2IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0icmVwZWF0IiAvPjxzdHlsZQogICAgIHR5cGU9InRleHQvY3NzIgogICAgIGlkPSJzdHlsZTMiPgoJLnN0MHtmaWxsOiNDRjhCMTc7fQoJLnN0MXtmaWxsOiNGRkZGRkY7fQo8L3N0eWxlPjx0aXRsZQogICAgIGlkPSJ0aXRsZTUiPnJlcGVhdDwvdGl0bGU+PHJlY3QKICAgICBzdHlsZT0ib3BhY2l0eToxO2ZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MTtzdHJva2UtbGluZWNhcDpzcXVhcmU7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1kYXNob2Zmc2V0OjA7c3Ryb2tlLW9wYWNpdHk6MC4wNzg0MzEzNyIKICAgICBpZD0icmVjdDQxNDMiCiAgICAgd2lkdGg9IjQuMDUwMDAwMiIKICAgICBoZWlnaHQ9IjEyLjM5NzA1IgogICAgIHg9IjkuOTc1MDAwNCIKICAgICB5PSItMTguMTk4NTI2IgogICAgIHJ4PSIwLjgxIgogICAgIHJ5PSIwLjgxIgogICAgIHRyYW5zZm9ybT0ic2NhbGUoMSwtMSkiIC8+PHJlY3QKICAgICBzdHlsZT0ib3BhY2l0eToxO2ZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MTtzdHJva2UtbGluZWNhcDpzcXVhcmU7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1kYXNob2Zmc2V0OjA7c3Ryb2tlLW9wYWNpdHk6MC4wNzg0MzEzNyIKICAgICBpZD0icmVjdDQxNDMtMSIKICAgICB3aWR0aD0iNC4wNTAwMDAyIgogICAgIGhlaWdodD0iMTIuMzk3MTE5IgogICAgIHg9IjkuOTc1MDAwNCIKICAgICB5PSI1LjgwMTQ0MDciCiAgICAgcng9IjAuODEiCiAgICAgcnk9IjAuODEiCiAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMCwxLDEsMCwwLDApIiAvPjxjaXJjbGUKICAgICBzdHlsZT0ib3BhY2l0eToxO2ZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6I2ZmZmZmZjtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpzcXVhcmU7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1kYXNob2Zmc2V0OjA7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICBpZD0icGF0aDQxMzYiCiAgICAgY3g9IjEyIgogICAgIGN5PSIxMiIKICAgICByPSIxMC41MDMxOTEiIC8+PC9zdmc+",this.REMOVE_IMAGE_DATAURI="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4KCjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0icmVwZWF0IgogICB4PSIwcHgiCiAgIHk9IjBweCIKICAgdmlld0JveD0iMCAwIDI0IDI0IgogICBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyNCAyNDsiCiAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTEgcjEzNzI1IgogICBzb2RpcG9kaTpkb2NuYW1lPSJyZW1vdmUuc3ZnIj48bWV0YWRhdGEKICAgICBpZD0ibWV0YWRhdGExNSI+PHJkZjpSREY+PGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPjxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PjxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz48ZGM6dGl0bGU+cmVwZWF0PC9kYzp0aXRsZT48L2NjOldvcms+PC9yZGY6UkRGPjwvbWV0YWRhdGE+PGRlZnMKICAgICBpZD0iZGVmczEzIiAvPjxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBwYWdlY29sb3I9IiNmZjFhZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMSIKICAgICBvYmplY3R0b2xlcmFuY2U9IjEwIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwIgogICAgIGd1aWRldG9sZXJhbmNlPSIxMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTY4MCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI5NTAiCiAgICAgaWQ9Im5hbWVkdmlldzExIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp6b29tPSIxOS42NjY2NjciCiAgICAgaW5rc2NhcGU6Y3g9IjAuMDUwODQ3NTIxIgogICAgIGlua3NjYXBlOmN5PSI5Ljk2NjEwMTciCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJyZXBlYXQiIC8+PHN0eWxlCiAgICAgdHlwZT0idGV4dC9jc3MiCiAgICAgaWQ9InN0eWxlMyI+Cgkuc3Qwe2ZpbGw6I0NGOEIxNzt9Cgkuc3Qxe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+PHRpdGxlCiAgICAgaWQ9InRpdGxlNSI+cmVwZWF0PC90aXRsZT48cmVjdAogICAgIHN0eWxlPSJvcGFjaXR5OjE7ZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1saW5lY2FwOnNxdWFyZTtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLWRhc2hvZmZzZXQ6MDtzdHJva2Utb3BhY2l0eTowLjA3ODQzMTM3IgogICAgIGlkPSJyZWN0NDE0My0xIgogICAgIHdpZHRoPSI0LjA1MDAwMDIiCiAgICAgaGVpZ2h0PSIxMi4zOTcxMTkiCiAgICAgeD0iOS45NzUwMDA0IgogICAgIHk9IjUuODAxNDQwNyIKICAgICByeD0iMC44MSIKICAgICByeT0iMC44MSIKICAgICB0cmFuc2Zvcm09Im1hdHJpeCgwLDEsMSwwLDAsMCkiIC8+PGNpcmNsZQogICAgIHN0eWxlPSJvcGFjaXR5OjE7ZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnNxdWFyZTtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLWRhc2hvZmZzZXQ6MDtzdHJva2Utb3BhY2l0eToxIgogICAgIGlkPSJwYXRoNDEzNiIKICAgICBjeD0iMTIiCiAgICAgY3k9IjEyIgogICAgIHI9IjEwLjUwMzE5MSIgLz48L3N2Zz4="},e.PXTBlockly.Extensions.FUNCTION_CONTEXTMENU_EDIT={customContextMenu:function(t){t.push(e.Functions.makeGoToDefinitionOption(this))}},e.PXTBlockly.Extensions.OUTPUT_NUMBER=function(){this.setInputsInline(!0),this.setOutputShape(e.OUTPUT_SHAPE_ROUND),this.setOutput(!0,"Number")},e.PXTBlockly.Extensions.OUTPUT_STRING=function(){this.setInputsInline(!0),this.setOutputShape(e.OUTPUT_SHAPE_ROUND),this.setOutput(!0,"String")},e.PXTBlockly.Extensions.OUTPUT_BOOLEAN=function(){this.setInputsInline(!0),this.setOutputShape(e.OUTPUT_SHAPE_HEXAGONAL),this.setOutput(!0,"Boolean")},e.PXTBlockly.Extensions.OUTPUT_ARRAY=function(){this.setInputsInline(!0),this.setOutputShape(e.OUTPUT_SHAPE_ROUND),this.setOutput(!0,"Array")},e.PXTBlockly.Extensions.registerAll=function(){e.Extensions.register("inline-svgs",this.INLINE_SVGS),e.Extensions.registerMixin("function_contextmenu_edit",e.PXTBlockly.Extensions.FUNCTION_CONTEXTMENU_EDIT),e.Extensions.register("output_number",e.PXTBlockly.Extensions.OUTPUT_NUMBER),e.Extensions.register("output_string",e.PXTBlockly.Extensions.OUTPUT_STRING),e.Extensions.register("output_boolean",e.PXTBlockly.Extensions.OUTPUT_BOOLEAN),e.Extensions.register("output_array",e.PXTBlockly.Extensions.OUTPUT_ARRAY)},e.PXTBlockly.Extensions.registerAll(),e.Constants.Lists={},e.Constants.Lists.HUE=260,e.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",outputShape:e.OUTPUT_SHAPE_ROUND,style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",outputShape:e.OUTPUT_SHAPE_ROUND,style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",outputShape:e.OUTPUT_SHAPE_ROUND,inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",outputShape:e.OUTPUT_SHAPE_HEXAGONAL,style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),e.Blocks.lists_create_with={init:function(){e.Extensions.apply("inline-svgs",this,!1),this.setHelpUrl(e.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.horizontalAfter_=this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setOutputShape(e.OUTPUT_SHAPE_ROUND),this.setInputsInline(!0),this.setTooltip(e.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var t=e.utils.xml.createElement("mutation");return t.setAttribute("items",this.itemCount_),this.horizontalAfter_&&t.setAttribute("horizontalafter",this.horizontalAfter_),t},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10),(e=e.getAttribute("horizontalafter"))&&(this.horizontalAfter_=parseInt(e,10)),this.updateShape_()},storeConnections_:function(){this.valueConnections_=[];for(var e=0;e<this.itemCount_;e++)this.valueConnections_.push(this.getInput("ADD"+e).connection.targetConnection)},restoreConnections_:function(){for(var t=0;t<this.itemCount_;t++)e.Mutator.reconnect(this.valueConnections_[t],this,"ADD"+t)},addItem_:function(){function t(e,t){var n=[];if(!e||!e.children)return n;for(var o=0;o<e.children.length;o++){var r=e.children[o];r.tagName===t&&n.push(r)}return n}function n(t,n,r){if(n&&r){var i=e.utils.xml.createElement("value");i.setAttribute("name",n),i.appendChild(o("shadow",r)),t.appendChild(i)}}function o(t,n){return(t=e.utils.xml.createElement(t)).setAttribute("type",n),t.setAttribute("id",e.utils.genUid()),t}if(this.storeConnections_(),this.update_((function(){this.itemCount_++})),this.restoreConnections_(),1<this.itemCount_){var r=this.getInput("ADD0");if(r&&r.connection.targetConnection){var i=this.getInput("ADD"+(this.itemCount_-1)),s=r.connection.getShadowDom(),a=s&&s.getAttribute("type");if(a){var l=o("shadow",a),c=t(s,"value");for(s=0;s<c.length;s++){var u=c[s],p=u.getAttribute("name"),d=t(u,"shadow")[0];n(l,p,d=d&&d.getAttribute("type"))}i.connection.setShadowDom(l)}if((s=(r=(s=r.connection.targetConnection)&&s.getSourceBlock())&&r.type)&&s!==a){if(a=o("block",s),r&&r.inputList)for(s=0;s<r.inputList.length;s++)d=(d=(u=r.inputList[s]).connection&&u.connection.getShadowDom())&&d.getAttribute("type"),n(a,u.name,d);a=e.Xml.domToBlock(a,this.workspace),i.connection.connect(a.outputConnection)}else i.connection.respawnShadow_()}}},removeItem_:function(){this.storeConnections_(),this.update_((function(){this.itemCount_--})),this.restoreConnections_()},update_:function(t){e.Events.setGroup(!0);var n=this,o=n.mutationToDom();o=o&&e.Xml.domToText(o);var r=n.rendered;n.rendered=!1,t&&t.call(this),this.updateShape_(),n.rendered=r,n.initSvg();var i=e.Events.getGroup();o!=(t=(t=n.mutationToDom())&&e.Xml.domToText(t))&&(e.Events.fire(new e.Events.BlockChange(n,"mutation",null,o,t)),setTimeout((function(){e.Events.setGroup(i),n.bumpNeighbours(),e.Events.setGroup(!1)}),e.BUMP_DELAY)),n.rendered&&n.render(),e.Events.setGroup(!1)},updateShape_:function(){var t=this,n=function(){t.removeItem_()};this.itemCount_?(this.getInput("EMPTY")&&this.removeInput("EMPTY"),this.getInput("TITLE")||this.appendDummyInput("TITLE").appendField(e.Msg.LISTS_CREATE_WITH_INPUT_WITH)):(this.getInput("TITLE")&&this.removeInput("TITLE"),this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(e.Msg.LISTS_CREATE_EMPTY_TITLE));var o=0;for(o=0;o<this.itemCount_;o++)this.getInput("ADD"+o)||this.appendValueInput("ADD"+o);for(;this.getInput("ADD"+o);)this.removeInput("ADD"+o),o++;this.getInput("BUTTONS")&&this.removeInput("BUTTONS"),o=this.appendDummyInput("BUTTONS"),0<this.itemCount_&&o.appendField(new e.FieldImage(this.REMOVE_IMAGE_DATAURI,24,24,"*",n,!1)),o.appendField(new e.FieldImage(this.ADD_IMAGE_DATAURI,24,24,"*",(function(){t.addItem_()}),!1)),n=this.itemCount_<=this.horizontalAfter_,this.setInputsInline(n),this.setOutputShape(n?e.OUTPUT_SHAPE_ROUND:e.OUTPUT_SHAPE_SQUARE)}},e.Blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(e.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(e.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},e.Blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(e.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},e.Blocks.lists_indexOf={init:function(){var t=[[e.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[e.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(e.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.setOutputShape(e.OUTPUT_SHAPE_ROUND),this.appendValueInput("VALUE").setCheck("Array").appendField(e.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new e.FieldDropdown(t),"END"),this.setInputsInline(!0);var n=this;this.setTooltip((function(){return e.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"0":"-1")}))}},e.Blocks.lists_getIndex={init:function(){var t=[[e.Msg.LISTS_GET_INDEX_GET,"GET"],[e.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[e.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[e.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[e.Msg.LISTS_GET_INDEX_LAST,"LAST"],[e.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(e.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),this.setOutputShape(e.OUTPUT_SHAPE_ROUND),t=new e.FieldDropdown(t,(function(e){e="REMOVE"==e,this.getSourceBlock().updateStatement_(e)})),this.appendValueInput("VALUE").setCheck("Array").appendField(e.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(t,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),e.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var n=this;this.setTooltip((function(){var t=n.getFieldValue("MODE"),o=n.getFieldValue("WHERE"),r="";switch(t+" "+o){case"GET FROM_START":case"GET FROM_END":r=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":r=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":r=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":r=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":r=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":r=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":r=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":r=e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":r=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":r=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":r=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":r=e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return"FROM_START"!=o&&"FROM_END"!=o||(r+="  "+("FROM_START"==o?e.Msg.LISTS_INDEX_FROM_START_TOOLTIP:e.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),r}))},mutationToDom:function(){var t=e.utils.xml.createElement("mutation");t.setAttribute("statement",!this.outputConnection);var n=this.getInput("AT").type==e.INPUT_VALUE;return t.setAttribute("at",n),t},domToMutation:function(e){var t="true"==e.getAttribute("statement");this.updateStatement_(t),e="false"!=e.getAttribute("at"),this.updateAt_(e)},updateStatement_:function(e){e!=!this.outputConnection&&(this.unplug(!0,!0),e?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(t){this.removeInput("AT"),this.removeInput("ORDINAL",!0),t?(this.appendValueInput("AT").setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var n=new e.FieldDropdown(this.WHERE_OPTIONS,(function(e){var n="FROM_START"==e||"FROM_END"==e;if(n!=t){var o=this.getSourceBlock();return o.updateAt_(n),o.setFieldValue(e,"WHERE"),null}}));this.getInput("AT").appendField(n,"WHERE"),e.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},e.Blocks.lists_setIndex={init:function(){var t=[[e.Msg.LISTS_SET_INDEX_SET,"SET"],[e.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[e.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[e.Msg.LISTS_GET_INDEX_LAST,"LAST"],[e.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(e.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(e.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new e.FieldDropdown(t),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(e.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var n=this;this.setTooltip((function(){var t=n.getFieldValue("MODE"),o=n.getFieldValue("WHERE"),r="";switch(t+" "+o){case"SET FROM_START":case"SET FROM_END":r=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":r=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":r=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":r=e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":r=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":r=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":r=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":r=e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return"FROM_START"!=o&&"FROM_END"!=o||(r+="  "+e.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),r}))},mutationToDom:function(){var t=e.utils.xml.createElement("mutation"),n=this.getInput("AT").type==e.INPUT_VALUE;return t.setAttribute("at",n),t},domToMutation:function(e){e="false"!=e.getAttribute("at"),this.updateAt_(e)},updateAt_:function(t){this.removeInput("AT"),this.removeInput("ORDINAL",!0),t?(this.appendValueInput("AT").setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var n=new e.FieldDropdown(this.WHERE_OPTIONS,(function(e){var n="FROM_START"==e||"FROM_END"==e;if(n!=t){var o=this.getSourceBlock();return o.updateAt_(n),o.setFieldValue(e,"WHERE"),null}}));this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(n,"WHERE")}},e.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[e.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[e.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[e.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[e.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(e.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(e.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),e.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setOutputShape(e.OUTPUT_SHAPE_ROUND),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(e.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var t=e.utils.xml.createElement("mutation"),n=this.getInput("AT1").type==e.INPUT_VALUE;return t.setAttribute("at1",n),n=this.getInput("AT2").type==e.INPUT_VALUE,t.setAttribute("at2",n),t},domToMutation:function(e){var t="true"==e.getAttribute("at1");e="true"==e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},updateAt_:function(t,n){this.removeInput("AT"+t),this.removeInput("ORDINAL"+t,!0),n?(this.appendValueInput("AT"+t).setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+t).appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+t);var o=new e.FieldDropdown(this["WHERE_OPTIONS_"+t],(function(e){var o="FROM_START"==e||"FROM_END"==e;if(o!=n){var r=this.getSourceBlock();return r.updateAt_(t,o),r.setFieldValue(e,"WHERE"+t),null}}));this.getInput("AT"+t).appendField(o,"WHERE"+t),1==t&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),e.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},e.Blocks.lists_sort={init:function(){this.jsonInit({message0:e.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[e.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[e.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[e.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[e.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[e.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",outputShape:e.OUTPUT_SHAPE_ROUND,style:"list_blocks",tooltip:e.Msg.LISTS_SORT_TOOLTIP,helpUrl:e.Msg.LISTS_SORT_HELPURL})}},e.Blocks.lists_split={init:function(){var t=this,n=new e.FieldDropdown([[e.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[e.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],(function(e){t.updateType_(e)}));this.setHelpUrl(e.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(n,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(e.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setOutputShape(e.OUTPUT_SHAPE_ROUND),this.setTooltip((function(){var n=t.getFieldValue("MODE");if("SPLIT"==n)return e.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==n)return e.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+n)}))},updateType_:function(e){if(this.getFieldValue("MODE")!=e){var t=this.getInput("INPUT").connection;t.setShadowDom(null);var n=t.targetBlock();n&&(t.disconnect(),n.isShadow()?n.dispose():this.bumpNeighbours())}"SPLIT"==e?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var t=e.utils.xml.createElement("mutation");return t.setAttribute("mode",this.getFieldValue("MODE")),t},domToMutation:function(e){this.updateType_(e.getAttribute("mode"))}},e.Blocks.logic={},e.Constants.Logic={},e.Constants.Logic.HUE=210,e.Blocks.controls_if={init:function(){e.Extensions.apply("inline-svgs",this,!1),this.elseCount_=this.elseifCount_=0,this.setHelpUrl(e.Msg.CONTROLS_IF_HELPURL),this.appendValueInput("IF0").setCheck("Boolean").appendField(e.Msg.CONTROLS_IF_MSG_IF),this.appendDummyInput("THEN0").appendField(e.Msg.CONTROLS_IF_MSG_THEN),this.appendStatementInput("DO0"),this.setOutputShape(e.OUTPUT_SHAPE_HEXAGONAL),this.updateShape_(),this.setInputsInline(!0),this.setColour(e.Msg.LOGIC_HUE),this.setPreviousStatement(!0),this.setNextStatement(!0),e.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION.call(this)},mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var t=e.utils.xml.createElement("mutation");return this.elseifCount_&&t.setAttribute("elseif",this.elseifCount_),this.elseCount_&&t.setAttribute("else",1),t},domToMutation:function(e){e&&(this.elseifCount_=parseInt(e.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(e.getAttribute("else"),10)||0,this.rebuildShape_())},storeConnections_:function(e){e||(e=0),this.valueConnections_=[null],this.statementConnections_=[null],this.elseStatementConnection_=null;for(var t=1;t<=this.elseifCount_;t++)e!=t&&(this.valueConnections_.push(this.getInput("IF"+t).connection.targetConnection),this.statementConnections_.push(this.getInput("DO"+t).connection.targetConnection));this.getInput("ELSE")&&(this.elseStatementConnection_=this.getInput("ELSE").connection.targetConnection)},restoreConnections_:function(){for(var t=1;t<=this.elseifCount_;t++)e.Mutator.reconnect(this.valueConnections_[t],this,"IF"+t),e.Mutator.reconnect(this.statementConnections_[t],this,"DO"+t);this.getInput("ELSE")&&e.Mutator.reconnect(this.elseStatementConnection_,this,"ELSE")},addElse_:function(){this.storeConnections_(),this.update_((function(){this.elseCount_++})),this.restoreConnections_()},removeElse_:function(){this.storeConnections_(),this.update_((function(){this.elseCount_--})),this.restoreConnections_()},addElseIf_:function(){this.storeConnections_(),this.update_((function(){this.elseifCount_++})),this.restoreConnections_()},removeElseIf_:function(e){this.storeConnections_(e),this.update_((function(){this.elseifCount_--})),this.restoreConnections_()},update_:function(t){e.Events.setGroup(!0);var n=this,o=n.mutationToDom();o=o&&e.Xml.domToText(o);var r=n.rendered;n.rendered=!1,t&&t.call(this),this.updateShape_(),n.rendered=r,n.initSvg();var i=e.Events.getGroup();o!=(t=(t=n.mutationToDom())&&e.Xml.domToText(t))&&(e.Events.fire(new e.Events.BlockChange(n,"mutation",null,o,t)),setTimeout((function(){e.Events.setGroup(i),n.bumpNeighbours(),e.Events.setGroup(!1)}),e.BUMP_DELAY)),n.rendered&&n.render(),e.Events.setGroup(!1)},updateShape_:function(){var t=this;this.getInput("ELSE")&&(this.removeInput("ELSE"),this.removeInput("ELSETITLE"),this.removeInput("ELSEBUTTONS"));for(var n=1;this.getInput("IF"+n);)this.removeInput("IF"+n),this.removeInput("IFTITLE"+n),this.removeInput("IFBUTTONS"+n),this.removeInput("DO"+n),n++;for(n=1;n<=this.elseifCount_;n++){var o=function(e){return function(){t.removeElseIf_(e)}}(n);this.appendValueInput("IF"+n).setCheck("Boolean").appendField(e.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendDummyInput("IFTITLE"+n).appendField(e.Msg.CONTROLS_IF_MSG_THEN),this.appendDummyInput("IFBUTTONS"+n).appendField(new e.FieldImage(this.REMOVE_IMAGE_DATAURI,24,24,"*",o,!1)).setAlign(e.ALIGN_RIGHT),this.appendStatementInput("DO"+n)}this.elseCount_&&(this.appendDummyInput("ELSETITLE").appendField(e.Msg.CONTROLS_IF_MSG_ELSE),this.appendDummyInput("ELSEBUTTONS").setAlign(e.ALIGN_RIGHT).appendField(new e.FieldImage(this.REMOVE_IMAGE_DATAURI,24,24,"*",t.removeElse_.bind(t),!1)),this.appendStatementInput("ELSE")),this.getInput("ADDBUTTON")&&this.removeInput("ADDBUTTON"),t=this,n=function(){0==t.elseCount_?t.addElse_():(t.elseifCount_||(t.elseifCount_=0),t.addElseIf_())},this.appendDummyInput("ADDBUTTON").appendField(new e.FieldImage(this.ADD_IMAGE_DATAURI,24,24,"*",n,!1))},rebuildShape_:function(){var e=[null],t=[null],n=null;this.getInput("ELSE")&&(n=this.getInput("ELSE").connection.targetConnection);for(var o=1;this.getInput("IF"+o);){var r=this.getInput("IF"+o),i=this.getInput("DO"+o);e.push(r.connection.targetConnection),t.push(i.connection.targetConnection),o++}this.updateShape_(),this.reconnectChildBlocks_(e,t,n)},reconnectChildBlocks_:function(t,n,o){for(var r=1;r<=this.elseifCount_;r++)e.Mutator.reconnect(t[r],this,"IF"+r),e.Mutator.reconnect(n[r],this,"DO"+r);e.Mutator.reconnect(o,this,"ELSE")}},e.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",outputShape:e.OUTPUT_SHAPE_HEXAGONAL,style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1 %{BKY_CONTROLS_IF_MSG_THEN}",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE}",message3:"%1",args3:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",outputShape:e.OUTPUT_SHAPE_HEXAGONAL,style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",outputShape:e.OUTPUT_SHAPE_HEXAGONAL,style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",outputShape:e.OUTPUT_SHAPE_HEXAGONAL,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),e.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),e.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},e.Extensions.register("logic_op_tooltip",e.Extensions.buildTooltipForDropdown("OP",e.Constants.Logic.TOOLTIPS_BY_OP)),e.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,suppressPrefixSuffix:!0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var t=e.utils.xml.createElement("mutation");return this.elseifCount_&&t.setAttribute("elseif",this.elseifCount_),this.elseCount_&&t.setAttribute("else",1),t},domToMutation:function(e){this.elseifCount_=parseInt(e.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(e.getAttribute("else"),10)||0,this.rebuildShape_()},decompose:function(e){var t=e.newBlock("controls_if_if");t.initSvg();for(var n=t.nextConnection,o=1;o<=this.elseifCount_;o++){var r=e.newBlock("controls_if_elseif");r.initSvg(),n.connect(r.previousConnection),n=r.nextConnection}return this.elseCount_&&((e=e.newBlock("controls_if_else")).initSvg(),n.connect(e.previousConnection)),t},compose:function(e){e=e.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var t=[null],n=[null],o=null;e&&!e.isInsertionMarker();){switch(e.type){case"controls_if_elseif":this.elseifCount_++,t.push(e.valueConnection_),n.push(e.statementConnection_);break;case"controls_if_else":this.elseCount_++,o=e.statementConnection_;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.nextConnection&&e.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(t,n,o)},saveConnections:function(e){e=e.nextConnection.targetBlock();for(var t=1;e;){switch(e.type){case"controls_if_elseif":var n=this.getInput("IF"+t),o=this.getInput("DO"+t);e.valueConnection_=n&&n.connection.targetConnection,e.statementConnection_=o&&o.connection.targetConnection,t++;break;case"controls_if_else":o=this.getInput("ELSE"),e.statementConnection_=o&&o.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.nextConnection&&e.nextConnection.targetBlock()}},rebuildShape_:function(){var e=[null],t=[null],n=null;this.getInput("ELSE")&&(n=this.getInput("ELSE").connection.targetConnection);for(var o=1;this.getInput("IF"+o);){var r=this.getInput("IF"+o),i=this.getInput("DO"+o);e.push(r.connection.targetConnection),t.push(i.connection.targetConnection),o++}this.updateShape_(),this.reconnectChildBlocks_(e,t,n)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var t=1;this.getInput("IF"+t);)this.removeInput("IF"+t),this.removeInput("DO"+t),t++;for(t=1;t<=this.elseifCount_;t++)this.appendValueInput("IF"+t).setCheck("Boolean").appendField(e.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+t).appendField(e.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(e.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(t,n,o){for(var r=1;r<=this.elseifCount_;r++)e.Mutator.reconnect(t[r],this,"IF"+r),e.Mutator.reconnect(n[r],this,"DO"+r);e.Mutator.reconnect(o,this,"ELSE")}},e.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?e.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?e.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?e.Msg.CONTROLS_IF_TOOLTIP_4:"":e.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},e.Extensions.register("controls_if_tooltip",e.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),e.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(t){this.prevBlocks_||(this.prevBlocks_=[null,null]);var n=this.getInputTargetBlock("A"),o=this.getInputTargetBlock("B");n&&o&&!this.workspace.connectionChecker.doTypeChecks(n.outputConnection,o.outputConnection)&&(e.Events.setGroup(t.group),(t=this.prevBlocks_[0])!==n&&(n.unplug(),!t||t.isDisposed()||t.isShadow()||this.getInput("A").connection.connect(t.outputConnection)),(n=this.prevBlocks_[1])!==o&&(o.unplug(),!n||n.isDisposed()||n.isShadow()||this.getInput("B").connection.connect(n.outputConnection)),this.bumpNeighbours(),e.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},e.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.mixin(e.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},e.Extensions.register("logic_compare",e.Constants.Logic.LOGIC_COMPARE_EXTENSION),e.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(t){var n=this.getInputTargetBlock("THEN"),o=this.getInputTargetBlock("ELSE"),r=this.outputConnection.targetConnection;if((n||o)&&r)for(var i=0;2>i;i++){var s=1==i?n:o;s&&!s.workspace.connectionChecker.doTypeChecks(s.outputConnection,r)&&(e.Events.setGroup(t.group),r===this.prevParentConnection_?(this.unplug(),r.getSourceBlock().bumpNeighbours()):(s.unplug(),s.bumpNeighbours()),e.Events.setGroup(!1))}this.prevParentConnection_=r}},e.Extensions.registerMixin("logic_ternary",e.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),e.Blocks.loops={},e.Constants.Loops={},e.Constants.Loops.HUE=120,e.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"input_value",name:"VAR",check:"Variable"},{type:"input_value",name:"FROM",check:"Number",align:"LEFT"},{type:"input_value",name:"TO",check:"Number",align:"LEFT"},{type:"input_value",name:"BY",check:"Number",align:"LEFT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"input_value",name:"VAR",check:"Variable"},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),e.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},e.Extensions.register("controls_whileUntil_tooltip",e.Extensions.buildTooltipForDropdown("MODE",e.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),e.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},e.Extensions.register("controls_flow_tooltip",e.Extensions.buildTooltipForDropdown("FLOW",e.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),e.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(t){if(!this.isInFlyout){var n=this.getField("VAR").getVariable(),o=n.name;if(!this.isCollapsed()&&null!=o){var r={enabled:!this.inDebugWorkspace()};r.text=e.Msg.VARIABLES_SET_CREATE_GET.replace("%1",o),n=e.Variables.generateVariableFieldDom(n),(o=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),o.appendChild(n),r.callback=e.ContextMenu.callbackFactory(this,o),t.push(r)}}}},e.Extensions.registerMixin("contextMenu_newGetVariableBlock",e.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),e.Extensions.register("controls_for_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),e.Extensions.register("controls_forEach_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],suppressPrefixSuffix:!0,getSurroundLoop:function(t){do{if(-1!=e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.LOOP_TYPES.indexOf(t.type))return t;t=t.getSurroundParent()}while(t);return null},onchange:function(t){if(this.workspace.isDragging&&!this.workspace.isDragging()&&t.type==e.Events.BLOCK_MOVE){var n=e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(this);if(this.setWarningText(n?null:e.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var o=e.Events.getGroup();e.Events.setGroup(t.group),this.setEnabled(n),e.Events.setGroup(o)}}}},e.Extensions.registerMixin("controls_flow_in_loop_check",e.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),e.Blocks.math={},e.Constants.Math={},e.Constants.Math.HUE=230,e.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"field_blocks",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_integer",message0:"%1",args0:[{type:"field_number",name:"NUM",precision:1}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"field_blocks",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_whole_number",message0:"%1",args0:[{type:"field_number",name:"NUM",min:0,precision:1}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"field_blocks",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_positive_number",message0:"%1",args0:[{type:"field_number",name:"NUM",min:0}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"field_blocks",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_number_minmax",message0:"%1",args0:[{type:"field_slider",name:"SLIDER",value:0,step:1,labelText:"Number"}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"field_blocks",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",mutator:"math_number_minmax_mutator",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",outputShape:e.OUTPUT_SHAPE_HEXAGONAL,style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),e.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},e.Extensions.register("math_op_tooltip",e.Extensions.buildTooltipForDropdown("OP",e.Constants.Math.TOOLTIPS_BY_OP)),e.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var t=e.utils.xml.createElement("mutation"),n="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return t.setAttribute("divisor_input",n),t},domToMutation:function(e){e="true"==e.getAttribute("divisor_input"),this.updateShape_(e)},updateShape_:function(e){var t=this.getInput("DIVISOR");e?t||this.appendValueInput("DIVISOR").setCheck("Number"):t&&this.removeInput("DIVISOR")}},e.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator((function(e){e="DIVISIBLE_BY"==e,this.getSourceBlock().updateShape_(e)}))},e.Extensions.registerMutator("math_is_divisibleby_mutator",e.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,e.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),e.Extensions.register("math_change_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),e.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(e){"MODE"==e?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){var t=e.utils.xml.createElement("mutation");return t.setAttribute("op",this.getFieldValue("OP")),t},domToMutation:function(e){this.updateType_(e.getAttribute("op"))}},e.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(e){this.updateType_(e)}.bind(this))},e.Extensions.registerMutator("math_modes_of_list_mutator",e.Constants.Math.LIST_MODES_MUTATOR_MIXIN,e.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),e.Constants.Math.MATH_NUMBER_MINMAX_MIXIN={mutationToDom:function(){var t=e.utils.xml.createElement("mutation");return null!=this.inputList[0].fieldRow[0].min_&&t.setAttribute("min",this.inputList[0].fieldRow[0].min_),null!=this.inputList[0].fieldRow[0].max_&&t.setAttribute("max",this.inputList[0].fieldRow[0].max_),null!=this.inputList[0].fieldRow[0].labelText_&&t.setAttribute("label",this.inputList[0].fieldRow[0].labelText_),null!=this.inputList[0].fieldRow[0].step_&&t.setAttribute("step",this.inputList[0].fieldRow[0].step_),null!=this.inputList[0].fieldRow[0].sliderColor_&&t.setAttribute("color",this.inputList[0].fieldRow[0].sliderColor_),null!=this.inputList[0].fieldRow[0].precision_&&t.setAttribute("precision",this.inputList[0].fieldRow[0].precision_),t},domToMutation:function(e){var t=e.getAttribute("min"),n=e.getAttribute("max"),o=e.getAttribute("step"),r=e.getAttribute("label"),i=e.getAttribute("color");e=e.getAttribute("precision"),this.inputList[0].fieldRow[0].setLabel(r),this.inputList[0].fieldRow[0].setOptions(t,n,o,e),this.inputList[0].fieldRow[0].setColor(i)}},e.Extensions.registerMutator("math_number_minmax_mutator",e.Constants.Math.MATH_NUMBER_MINMAX_MIXIN),e.Blocks.procedures={},e.Blocks.procedures_defnoreturn={init:function(){var t=e.Procedures.findLegalName("",this);(t=new e.FieldTextInput(t,e.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(e.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(t,"NAME").appendField("","PARAMS"),this.setMutator(new e.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&e.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(e.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(e.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(t){this.hasStatements_!==t&&(t?(this.appendStatementInput("STACK").appendField(e.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=t)},updateParams_:function(){var t="";this.arguments_.length&&(t=e.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),e.Events.disable();try{this.setFieldValue(t,"PARAMS")}finally{e.Events.enable()}},mutationToDom:function(t){var n=e.utils.xml.createElement("mutation");t&&n.setAttribute("name",this.getFieldValue("NAME"));for(var o=0;o<this.argumentVarModels_.length;o++){var r=e.utils.xml.createElement("arg"),i=this.argumentVarModels_[o];r.setAttribute("name",i.name),r.setAttribute("varid",i.getId()),t&&this.paramIds_&&r.setAttribute("paramId",this.paramIds_[o]),n.appendChild(r)}return this.hasStatements_||n.setAttribute("statements","false"),n},domToMutation:function(t){this.arguments_=[],this.argumentVarModels_=[];for(var n,o=0;n=t.childNodes[o];o++)if("arg"==n.nodeName.toLowerCase()){var r=n.getAttribute("name");n=n.getAttribute("varid")||n.getAttribute("varId"),this.arguments_.push(r),null!=(n=e.Variables.getOrCreateVariablePackage(this.workspace,n,r,""))?this.argumentVarModels_.push(n):console.log("Failed to create a variable with name "+r+", ignoring.")}this.updateParams_(),e.Procedures.mutateCallers(this),this.setStatements_("false"!==t.getAttribute("statements"))},decompose:function(t){var n=e.utils.xml.createElement("block");n.setAttribute("type","procedures_mutatorcontainer");var o=e.utils.xml.createElement("statement");o.setAttribute("name","STACK"),n.appendChild(o);for(var r=0;r<this.arguments_.length;r++){var i=e.utils.xml.createElement("block");i.setAttribute("type","procedures_mutatorarg");var s=e.utils.xml.createElement("field");s.setAttribute("name","NAME");var a=e.utils.xml.createTextNode(this.arguments_[r]);s.appendChild(a),i.appendChild(s),s=e.utils.xml.createElement("next"),i.appendChild(s),o.appendChild(i),o=s}return t=e.Xml.domToBlock(n,t),"procedures_defreturn"==this.type?t.setFieldValue(this.hasStatements_,"STATEMENTS"):t.removeInput("STATEMENT_INPUT"),e.Procedures.mutateCallers(this),t},compose:function(t){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var n=t.getInputTargetBlock("STACK");n&&!n.isInsertionMarker();){var o=n.getFieldValue("NAME");this.arguments_.push(o),o=this.workspace.getVariable(o,""),this.argumentVarModels_.push(o),this.paramIds_.push(n.id),n=n.nextConnection&&n.nextConnection.targetBlock()}this.updateParams_(),e.Procedures.mutateCallers(this),null!==(t=t.getFieldValue("STATEMENTS"))&&(t="TRUE"==t,this.hasStatements_!=t)&&(t?(this.setStatements_(!0),e.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(t=this.getInput("STACK").connection,(this.statementConnection_=t.targetConnection)&&((t=t.targetBlock()).unplug(),t.bumpNeighbours()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(t,n){var o=this.workspace.getVariableById(t);if(""==o.type){o=o.name,n=this.workspace.getVariableById(n);for(var r=!1,i=0;i<this.argumentVarModels_.length;i++)this.argumentVarModels_[i].getId()==t&&(this.arguments_[i]=n.name,this.argumentVarModels_[i]=n,r=!0);r&&(this.displayRenamedVar_(o,n.name),e.Procedures.mutateCallers(this))}},updateVarName:function(t){for(var n=t.name,o=!1,r=0;r<this.argumentVarModels_.length;r++)if(this.argumentVarModels_[r].getId()==t.getId()){var i=this.arguments_[r];this.arguments_[r]=n,o=!0}o&&(this.displayRenamedVar_(i,n),e.Procedures.mutateCallers(this))},displayRenamedVar_:function(t,n){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var o,r=this.mutator.workspace_.getAllBlocks(!1),i=0;o=r[i];i++)"procedures_mutatorarg"==o.type&&e.Names.equals(t,o.getFieldValue("NAME"))&&o.setFieldValue(n,"NAME")},customContextMenu:function(t){if(!this.isInFlyout){var n={enabled:!this.options.debugMode},o=this.getFieldValue("NAME");n.text=e.Msg.PROCEDURES_CREATE_DO.replace("%1",o);var r=e.utils.xml.createElement("mutation");for(r.setAttribute("name",o),o=0;o<this.arguments_.length;o++){var i=e.utils.xml.createElement("arg");i.setAttribute("name",this.arguments_[o]),r.appendChild(i)}if((o=e.utils.xml.createElement("block")).setAttribute("type",this.callType_),o.appendChild(r),n.callback=e.ContextMenu.callbackFactory(this,o),t.push(n),!this.isCollapsed())for(o=0;o<this.argumentVarModels_.length;o++)n={enabled:!this.inDebugWorkspace()},r=this.argumentVarModels_[o],n.text=e.Msg.VARIABLES_SET_CREATE_GET.replace("%1",r.name),r=e.Variables.generateVariableFieldDom(r),(i=e.utils.xml.createElement("block")).setAttribute("type","variables_get"),i.appendChild(r),n.callback=e.ContextMenu.callbackFactory(this,i),t.push(n)}},callType_:"procedures_callnoreturn"},e.Blocks.procedures_defreturn={init:function(){var t=e.Procedures.findLegalName("",this);(t=new e.FieldTextInput(t,e.Procedures.rename)).setSpellcheck(!1),this.appendDummyInput().appendField(e.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(t,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(e.ALIGN_RIGHT).appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new e.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&e.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(e.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(e.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:e.Blocks.procedures_defnoreturn.setStatements_,updateParams_:e.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:e.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:e.Blocks.procedures_defnoreturn.domToMutation,decompose:e.Blocks.procedures_defnoreturn.decompose,compose:e.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:e.Blocks.procedures_defnoreturn.getVars,getVarModels:e.Blocks.procedures_defnoreturn.getVarModels,renameVarById:e.Blocks.procedures_defnoreturn.renameVarById,updateVarName:e.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:e.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:e.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},e.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(e.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(e.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new e.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},e.Blocks.procedures_mutatorarg={init:function(){var t=new e.FieldTextInput(e.Procedures.DEFAULT_ARG,this.validator_);t.oldShowEditorFn_=t.showEditor_,t.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(e.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(t,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,t.onFinishEditing_=this.deleteIntermediateVars_,t.createdVariables_=[],t.onFinishEditing_("x")},validator_:function(t){var n=this.getSourceBlock(),o=e.Mutator.findParentWs(n.workspace);if(!(t=t.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;for(var r=(n.workspace.targetWorkspace||n.workspace).getAllBlocks(!1),i=t.toLowerCase(),s=0;s<r.length;s++)if(r[s].id!=this.getSourceBlock().id){var a=r[s].getFieldValue("NAME");if(a&&a.toLowerCase()==i)return null}return n.isInFlyout||((n=o.getVariable(t,""))&&n.name!=t&&o.renameVariableById(n.getId(),t),n||(n=o.createVariable(t,""))&&this.createdVariables_&&this.createdVariables_.push(n)),t},deleteIntermediateVars_:function(t){var n=e.Mutator.findParentWs(this.getSourceBlock().workspace);if(n)for(var o=0;o<this.createdVariables_.length;o++){var r=this.createdVariables_[o];r.name!=t&&n.deleteVariableById(r.getId())}}},e.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(e.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(t,n){e.Names.equals(t,this.getProcedureCall())&&(this.setFieldValue(n,"NAME"),this.setTooltip((this.outputConnection?e.Msg.PROCEDURES_CALLRETURN_TOOLTIP:e.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",n)))},setProcedureParameters_:function(t,n){var o=e.Procedures.getDefinition(this.getProcedureCall(),this.workspace),r=o&&o.mutator&&o.mutator.isVisible();if(r||(this.quarkConnections_={},this.quarkIds_=null),n)if(t.join("\n")==this.arguments_.join("\n"))this.quarkIds_=n;else{if(n.length!=t.length)throw RangeError("paramNames and paramIds must be the same length.");this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),o=this.rendered,this.rendered=!1;for(var i=0;i<this.arguments_.length;i++){var s=this.getInput("ARG"+i);s&&(s=s.connection.targetConnection,this.quarkConnections_[this.quarkIds_[i]]=s,r&&s&&-1==n.indexOf(this.quarkIds_[i])&&(s.disconnect(),s.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(t),this.argumentVarModels_=[],i=0;i<this.arguments_.length;i++)t=e.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[i],""),this.argumentVarModels_.push(t);if(this.updateShape_(),this.quarkIds_=n)for(i=0;i<this.arguments_.length;i++)(n=this.quarkIds_[i])in this.quarkConnections_&&(s=this.quarkConnections_[n],e.Mutator.reconnect(s,this,"ARG"+i)||delete this.quarkConnections_[n]);(this.rendered=o)&&this.render()}},updateShape_:function(){for(var t=0;t<this.arguments_.length;t++){var n=this.getField("ARGNAME"+t);if(n){e.Events.disable();try{n.setValue(this.arguments_[t])}finally{e.Events.enable()}}else n=new e.FieldLabel(this.arguments_[t]),this.appendValueInput("ARG"+t).setAlign(e.ALIGN_RIGHT).appendField(n,"ARGNAME"+t).init()}for(;this.getInput("ARG"+t);)this.removeInput("ARG"+t),t++;(t=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(t.appendField(e.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),t.init()):this.getField("WITH")&&t.removeField("WITH"))},mutationToDom:function(){var t=e.utils.xml.createElement("mutation");t.setAttribute("name",this.getProcedureCall());for(var n=0;n<this.arguments_.length;n++){var o=e.utils.xml.createElement("arg");o.setAttribute("name",this.arguments_[n]),t.appendChild(o)}return t},domToMutation:function(e){var t=e.getAttribute("name");this.renameProcedure(this.getProcedureCall(),t),t=[];for(var n,o=[],r=0;n=e.childNodes[r];r++)"arg"==n.nodeName.toLowerCase()&&(t.push(n.getAttribute("name")),o.push(n.getAttribute("paramId")));this.setProcedureParameters_(t,o)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(t){if(this.workspace&&!this.workspace.isFlyout&&t.recordUndo)if(t.type==e.Events.BLOCK_CREATE&&-1!=t.ids.indexOf(this.id)){var n=this.getProcedureCall();if(!(n=e.Procedures.getDefinition(n,this.workspace))||n.type==this.defType_&&JSON.stringify(n.getVars())==JSON.stringify(this.arguments_)||(n=null),!n){e.Events.setGroup(t.group),t=e.utils.xml.createElement("xml"),(n=e.utils.xml.createElement("block")).setAttribute("type",this.defType_);var o=this.getRelativeToSurfaceXY(),r=o.y+2*e.SNAP_RADIUS;n.setAttribute("x",o.x+e.SNAP_RADIUS*(this.RTL?-1:1)),n.setAttribute("y",r),o=this.mutationToDom(),n.appendChild(o),(o=e.utils.xml.createElement("field")).setAttribute("name","NAME"),(r=this.getProcedureCall())||(r=e.Procedures.findLegalName("",this),this.renameProcedure("",r)),o.appendChild(e.utils.xml.createTextNode(r)),n.appendChild(o),t.appendChild(n),e.Xml.domToWorkspace(t,this.workspace),e.Events.setGroup(!1)}}else t.type==e.Events.BLOCK_DELETE?(n=this.getProcedureCall(),(n=e.Procedures.getDefinition(n,this.workspace))||(e.Events.setGroup(t.group),this.dispose(!0),e.Events.setGroup(!1))):t.type==e.Events.CHANGE&&"disabled"==t.element&&(n=this.getProcedureCall(),(n=e.Procedures.getDefinition(n,this.workspace))&&n.id==t.blockId&&((n=e.Events.getGroup())&&console.log("Saw an existing group while responding to a definition change"),e.Events.setGroup(t.group),t.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),e.Events.setGroup(n)))},customContextMenu:function(t){if(this.workspace.isMovable()){var n={enabled:!0};n.text=e.Msg.PROCEDURES_HIGHLIGHT_DEF;var o=this.getProcedureCall(),r=this.workspace;n.callback=function(){var t=e.Procedures.getDefinition(o,r);t&&(r.centerOnBlock(t.id),t.select())},t.push(n)}},defType_:"procedures_defnoreturn"},e.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(e.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},getProcedureCall:e.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:e.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:e.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:e.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:e.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:e.Blocks.procedures_callnoreturn.domToMutation,getVars:e.Blocks.procedures_callnoreturn.getVars,getVarModels:e.Blocks.procedures_callnoreturn.getVarModels,onchange:e.Blocks.procedures_callnoreturn.onchange,customContextMenu:e.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},e.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(e.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(e.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var t=e.utils.xml.createElement("mutation");return t.setAttribute("value",Number(this.hasReturnValue_)),t},domToMutation:function(t){this.hasReturnValue_=1==t.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(t){if(this.workspace.isDragging&&!this.workspace.isDragging()){t=!1;var n=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(n.type)){t=!0;break}n=n.getSurroundParent()}while(n);t?("procedures_defnoreturn"==n.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=n.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(e.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setEnabled(!0)):(this.setWarningText(e.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setEnabled(!1))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},e.PXTBlockly.FunctionUtils={},e.PXTBlockly.FunctionUtils.argumentIcons={},e.PXTBlockly.FunctionUtils.argumentDefaultNames={},e.PXTBlockly.FunctionUtils.getArgumentIcon=function(t){return e.PXTBlockly.FunctionUtils.argumentIcons&&e.PXTBlockly.FunctionUtils.argumentIcons[t]||void 0},e.PXTBlockly.FunctionUtils.getArgumentDefaultName=function(t){return e.PXTBlockly.FunctionUtils.argumentDefaultNames&&e.PXTBlockly.FunctionUtils.argumentDefaultNames[t]||e.Msg.FUNCTIONS_DEFAULT_CUSTOM_ARG_NAME},e.PXTBlockly.FunctionUtils.mutationToDom=function(){this.ensureIds_();var t=e.utils.xml.createElement("mutation");return t.setAttribute("name",this.name_),t.setAttribute("functionid",this.functionId_),this.arguments_.forEach((function(n){var o=e.utils.xml.createElement("arg");o.setAttribute("name",n.name),o.setAttribute("id",n.id),o.setAttribute("type",n.type),t.appendChild(o)})),t},e.PXTBlockly.FunctionUtils.domToMutation=function(t){for(var n=[],o=0;o<t.childNodes.length;++o){var r=t.childNodes[o];"arg"==r.nodeName.toLowerCase()&&n.push({id:r.getAttribute("id"),name:r.getAttribute("name"),type:r.getAttribute("type")})}this.arguments_=n,this.name_=t.getAttribute("name"),t=t.getAttribute("functionid"),0>e.Functions.idsInUse(this.workspace).indexOf(t)&&(this.functionId_=t),this.ensureIds_(),t=this.getHeightWidth?this.getHeightWidth():null,this.type!==e.FUNCTION_DEFINITION_BLOCK_TYPE||t&&!t.height&&!t.width?this.updateDisplay_():!this.getFieldValue("function_name")&&this.name_&&this.setFieldValue(this.name_,"function_name")},e.PXTBlockly.FunctionUtils.ensureIds_=function(){switch(this.type){case e.FUNCTION_DEFINITION_BLOCK_TYPE:this.functionId_&&"null"!=this.functionId_||(this.functionId_=e.utils.genUid());for(var t=0;t<this.arguments_.length;++t)this.arguments_[t].id||(this.arguments_[t].id=e.utils.genUid());break;case e.FUNCTION_CALL_OUTPUT_BLOCK_TYPE:case e.FUNCTION_CALL_BLOCK_TYPE:if(t=e.Functions.getDefinition(this.name_,this.workspace)){this.functionId_=t.getFunctionId();var n=t.getArguments();for(t=0;t<this.arguments_.length;++t)for(var o=0;o<n.length;++o)if(n[o].name==this.arguments_[t].name){this.arguments_[t].id=n[o].id;break}}}},e.PXTBlockly.FunctionUtils.getName=function(){return this.name_},e.PXTBlockly.FunctionUtils.getFunctionId=function(){return this.functionId_},e.PXTBlockly.FunctionUtils.getArguments=function(){return this.arguments_},e.PXTBlockly.FunctionUtils.setStatements_=function(e){this.hasStatements_!==e&&(e?this.appendStatementInput("STACK"):this.removeInput("STACK",!0),this.hasStatements_=e)},e.PXTBlockly.FunctionUtils.updateDisplay_=function(){var e=this.rendered;this.rendered=!1;var t=this.disconnectOldBlocks_();this.removeValueInputs_(),this.createAllInputs_(t),this.deleteShadows_(t),(this.rendered=e)&&!this.isInsertionMarker()&&this.initSvg&&(this.initSvg(),this.render())},e.PXTBlockly.FunctionUtils.disconnectOldBlocks_=function(){for(var e,t={},n=0;e=this.inputList[n];n++)if("STACK"!==e.name&&e.connection){var o=e.connection.targetBlock();o={shadow:e.connection.getShadowDom(),block:o},t[e.name]=o,e.connection.setShadowDom(null,!0),e.connection.targetConnection&&e.connection.disconnect()}return t},e.PXTBlockly.FunctionUtils.removeValueInputs_=function(){for(var t,n=[],o=0;t=this.inputList[o];o++)t.type==e.INPUT_VALUE?t.dispose():n.push(t);this.inputList=n},e.PXTBlockly.FunctionUtils.createAllInputs_=function(t){var n=!1,o=!1,r=!1;if(this.inputList.forEach((function(e){"function_title"==e.name?n=!0:"function_name"==e.name?o=!0:"function_collapse"==e.name&&(r=!0)})),!n){var i="";switch(this.type){case e.FUNCTION_CALL_OUTPUT_BLOCK_TYPE:case e.FUNCTION_CALL_BLOCK_TYPE:i=e.Msg.FUNCTIONS_CALL_TITLE;break;case e.FUNCTION_DEFINITION_BLOCK_TYPE:case e.FUNCTION_DECLARATION_BLOCK_TYPE:i=e.Msg.PROCEDURES_DEFNORETURN_TITLE}this.appendDummyInput("function_title").appendField(i,"function_title")}o?this.updateFunctionLabel_(this.getName()):this.addFunctionLabel_(this.getName());var s=this;this.arguments_.forEach((function(n){var o=s.appendValueInput(n.id);e.Functions.isCustomType(n.type)?o.setCheck(n.type):o.setCheck(n.type.charAt(0).toUpperCase()+n.type.slice(1)),s.isInsertionMarker()||s.populateArgument_(n,t,o)})),r&&this.moveInputBefore("function_collapse",null),this.hasStatements_&&this.moveInputBefore("STACK",null)},e.PXTBlockly.FunctionUtils.deleteShadows_=function(e){if(e)for(var t in e){var n=e[t];n&&(n=n.block)&&n.isShadow()&&(n.dispose(),delete e[t])}},e.PXTBlockly.FunctionUtils.updateLabelEditor_=function(t){e.Events.disable(),this.getField("function_name").setValue(t),e.Events.enable()},e.PXTBlockly.FunctionUtils.updateLabelField_=function(e){this.getField("function_name").setValue(e)},e.PXTBlockly.FunctionUtils.addLabelEditor_=function(t){(t=this.type===e.FUNCTION_DEFINITION_BLOCK_TYPE?new e.FieldTextInput(t||"",e.Functions.rename):new e.FieldTextInput(t||"")).setSpellcheck(!1),t.setAutoCapitalize(!1),this.appendDummyInput("function_name").appendField(t,"function_name")},e.PXTBlockly.FunctionUtils.addLabelField_=function(t){this.appendDummyInput("function_name").appendField(new e.FieldLabel(t,"functionNameText"),"function_name")},e.PXTBlockly.FunctionUtils.getShadowBlockInfoFromType_=function(t,n){switch(t){case"boolean":var o="logic_boolean",r="BOOL";t="TRUE";break;case"number":o="math_number",r="NUM",t="1";break;case"string":o="text",r="TEXT",t="abc";break;case"Array":o="variables_get",r="VAR",t=e.Variables.getOrCreateVariablePackage(n,null,"list","").getId();break;default:o="variables_get",r="VAR",t=e.Variables.getOrCreateVariablePackage(n,null,e.PXTBlockly.FunctionUtils.getArgumentDefaultName(t),"").getId()}return[o,r,t]},e.PXTBlockly.FunctionUtils.buildShadowDom_=function(t){var n=e.utils.xml.createElement("shadow"),o=e.PXTBlockly.FunctionUtils.getShadowBlockInfoFromType_(t,this.workspace);t=o[1];var r=o[2];return n.setAttribute("type",o[0]),(o=goog.dom.createDom("field",null,r)).setAttribute("name",t),n.appendChild(o),n},e.PXTBlockly.FunctionUtils.attachShadow_=function(t,n){var o=e.PXTBlockly.FunctionUtils.getShadowBlockInfoFromType_(n,this.workspace);n=o[0];var r=o[1];o=o[2],e.Events.disable();var i=null;try{(i=this.workspace.newBlock(n)).setFieldValue(o,r),i.setShadow(!0),!this.isInsertionMarker()&&i.initSvg&&(i.initSvg(),i.render(!1))}finally{e.Events.enable()}i&&i.outputConnection.connect(t.connection)},e.PXTBlockly.FunctionUtils.createArgumentReporter_=function(t){switch(t.type){case"boolean":var n="argument_reporter_boolean";break;case"number":n="argument_reporter_number";break;case"string":n="argument_reporter_string";break;case"Array":n="argument_reporter_array";break;default:n="argument_reporter_custom"}e.Events.disable();try{var o="argument_reporter_custom"==n?e.PXTBlockly.FunctionUtils.createCustomArgumentReporter(t.type,this.workspace):this.workspace.newBlock(n);o.setShadow(!0),o.setFieldValue(t.name,"VALUE"),!this.isInsertionMarker()&&o.initSvg&&(o.initSvg(),o.render(!1))}finally{e.Events.enable()}return o},e.PXTBlockly.FunctionUtils.createCollapseIcon_=function(){var t=this;if(t.workspace&&t.workspace.getRenderer){var n=t.workspace.getRenderer().getConstants().COLLAPSE_IMAGE_DATAURI;n&&t.appendDummyInput("function_collapse").appendField(new e.FieldImage(n,24,24,"",(function(){t.setCollapsed(!0)}),!1))}},e.PXTBlockly.FunctionUtils.populateArgumentOnCaller_=function(t,n,o){var r=null,i=null;n&&t.id in n&&(r=(i=n[t.id]).block,i=i.shadow),n&&r&&r.outputConnection.canConnectWithReason(o.connection)===e.Connection.CAN_CONNECT?(n[o.name]=null,r.outputConnection.connect(o.connection),t=i||this.buildShadowDom_(t.type),o.connection.setShadowDom(t)):(this.attachShadow_(o,t.type),r&&r.isShadow_&&r.setShadow(!1))},e.PXTBlockly.FunctionUtils.populateArgumentOnDefinition_=function(e,t,n){var o=null;t&&e.id in t&&(o=t[e.id].block),t&&o?(o.setFieldValue(e.name,"VALUE"),t[n.name]=null):o=this.createArgumentReporter_(e),n.connection.connect(o.outputConnection)},e.PXTBlockly.FunctionUtils.populateArgumentOnDeclaration_=function(e,t,n){e=this.createArgumentEditor_(e.type,e.name),n.connection.connect(e.outputConnection)},e.PXTBlockly.FunctionUtils.createArgumentEditor_=function(t,n){e.Events.disable();try{var o="";switch(t){case"boolean":o="argument_editor_boolean";break;case"number":o="argument_editor_number";break;case"string":o="argument_editor_string";break;case"Array":o="argument_editor_array";break;default:o="argument_editor_custom"}var r="argument_editor_custom"==o?e.PXTBlockly.FunctionUtils.createCustomArgumentEditor(t,this.workspace):this.workspace.newBlock(o);r.setFieldValue(n,"TEXT"),r.setShadow(!0),!this.isInsertionMarker()&&r.initSvg&&(r.initSvg(),r.render(!1))}finally{e.Events.enable()}return r},e.PXTBlockly.FunctionUtils.updateDeclarationMutation_=function(){this.arguments_=[];for(var t=1;t<this.inputList.length;t++){var n=this.inputList[t];switch(n.type){case e.NEXT_STATEMENT:break;case e.DUMMY_INPUT:this.name_=n.fieldRow[0].getValue()||n.fieldRow[0].getText();break;case e.INPUT_VALUE:var o=n.connection.targetBlock();this.arguments_.push({id:n.name,name:o.getFieldValue("TEXT"),type:o.getTypeName()});break;default:console.warn("Unexpected input type on a function mutator root: "+n.type)}}},e.PXTBlockly.FunctionUtils.focusLastEditor_=function(){if(0<this.inputList.length){var t=this.inputList[this.inputList.length-2];t.type==e.DUMMY_INPUT?(this.workspace.centerOnBlock(this.id),t.fieldRow[0].showEditor_()):t.type==e.INPUT_VALUE&&((t=t.connection.targetBlock()).workspace.centerOnBlock(t.id),t.getField("TEXT").showEditor_())}},e.PXTBlockly.FunctionUtils.addParam_=function(t,n){e.WidgetDiv.hide(!0),n=e.Functions.findUniqueParamName(n,this.arguments_.map((function(e){return e.name}))),this.arguments_.push({id:e.utils.genUid(),name:n,type:t}),this.updateDisplay_(),this.focusLastEditor_()},e.PXTBlockly.FunctionUtils.addBooleanExternal=function(){this.addParam_("boolean",e.Msg.FUNCTIONS_DEFAULT_BOOLEAN_ARG_NAME)},e.PXTBlockly.FunctionUtils.addStringExternal=function(){this.addParam_("string",e.Msg.FUNCTIONS_DEFAULT_STRING_ARG_NAME)},e.PXTBlockly.FunctionUtils.addNumberExternal=function(){this.addParam_("number",e.Msg.FUNCTIONS_DEFAULT_NUMBER_ARG_NAME)},e.PXTBlockly.FunctionUtils.addArrayExternal=function(){this.addParam_("Array",e.Msg.FUNCTIONS_DEFAULT_ARRAY_ARG_NAME)},e.PXTBlockly.FunctionUtils.addCustomExternal=function(t){this.addParam_(t,e.PXTBlockly.FunctionUtils.getArgumentDefaultName(t))},e.PXTBlockly.FunctionUtils.removeFieldCallback=function(t){for(var n=null,o=0;o<this.inputList.length&&!n;o++){var r=this.inputList[o];if(r.connection){var i=r.connection.targetBlock();i&&i.getField(t.name)===t&&(n=r.name)}else for(i=0;i<r.fieldRow.length;i++)r.fieldRow[i]==t&&(n=r.name)}n&&(e.WidgetDiv.hide(!0),this.removeInput(n),this.updateFunctionSignature(),this.updateDisplay_())},e.PXTBlockly.FunctionUtils.removeArgumentCallback_=function(e){this.parentBlock_&&this.parentBlock_.removeFieldCallback&&this.parentBlock_.removeFieldCallback(e)},e.PXTBlockly.FunctionUtils.onCallerChange=function(t){if(this.workspace&&!this.workspace.isFlyout)if(t.type==e.Events.BLOCK_CREATE&&-1!=t.ids.indexOf(this.id)){var n=this.getName();if(n=e.Functions.getDefinition(n,this.workspace)){t=n.getArguments().slice();var o=this.arguments_.slice();JSON.stringify(o)!==JSON.stringify(t)&&e.Functions.mutateCallersAndDefinition(n.getName(),this.workspace,n.mutationToDom()),this.functionId_=n.functionId_}else{e.Events.setGroup(t.group),n=e.utils.xml.createElement("xml"),(t=e.utils.xml.createElement("block")).setAttribute("type",e.FUNCTION_DEFINITION_BLOCK_TYPE);var r=(o=this.getRelativeToSurfaceXY()).y+2*e.SNAP_RADIUS;t.setAttribute("x",o.x+e.SNAP_RADIUS*(this.RTL?-1:1)),t.setAttribute("y",r),o=this.mutationToDom(),t.appendChild(o),n.appendChild(t),e.Xml.domToWorkspace(n,this.workspace),e.Events.setGroup(!1)}}else t.type==e.Events.BLOCK_DELETE&&(n=this.getName(),(n=e.Functions.getDefinition(n,this.workspace))||(e.Events.setGroup(t.group),this.dispose(!0,!1),e.Events.setGroup(!1)))},e.Blocks.function_declaration={init:function(){this.jsonInit({style:{hat:"cap"}}),this.name_="",this.arguments_=[],this.functionId_="",this.createAllInputs_(),this.setColour(e.Msg.PROCEDURES_HUE),this.setStatements_(!0),this.setDeletable(!1),this.setMovable(!1),this.contextMenu=!1,this.setInputsInline(!0),this.statementConnection_=null},mutationToDom:e.PXTBlockly.FunctionUtils.mutationToDom,domToMutation:e.PXTBlockly.FunctionUtils.domToMutation,getName:e.PXTBlockly.FunctionUtils.getName,getFunctionId:e.PXTBlockly.FunctionUtils.getFunctionId,getArguments:e.PXTBlockly.FunctionUtils.getArguments,removeValueInputs_:e.PXTBlockly.FunctionUtils.removeValueInputs_,disconnectOldBlocks_:e.PXTBlockly.FunctionUtils.disconnectOldBlocks_,deleteShadows_:e.PXTBlockly.FunctionUtils.deleteShadows_,createAllInputs_:e.PXTBlockly.FunctionUtils.createAllInputs_,updateDisplay_:e.PXTBlockly.FunctionUtils.updateDisplay_,setStatements_:e.PXTBlockly.FunctionUtils.setStatements_,ensureIds_:e.PXTBlockly.FunctionUtils.ensureIds_,populateArgument_:e.PXTBlockly.FunctionUtils.populateArgumentOnDeclaration_,addFunctionLabel_:e.PXTBlockly.FunctionUtils.addLabelEditor_,updateFunctionLabel_:e.PXTBlockly.FunctionUtils.updateLabelEditor_,createArgumentEditor_:e.PXTBlockly.FunctionUtils.createArgumentEditor_,focusLastEditor_:e.PXTBlockly.FunctionUtils.focusLastEditor_,removeFieldCallback:e.PXTBlockly.FunctionUtils.removeFieldCallback,addParam_:e.PXTBlockly.FunctionUtils.addParam_,addBooleanExternal:e.PXTBlockly.FunctionUtils.addBooleanExternal,addStringExternal:e.PXTBlockly.FunctionUtils.addStringExternal,addNumberExternal:e.PXTBlockly.FunctionUtils.addNumberExternal,addArrayExternal:e.PXTBlockly.FunctionUtils.addArrayExternal,addCustomExternal:e.PXTBlockly.FunctionUtils.addCustomExternal,updateFunctionSignature:e.PXTBlockly.FunctionUtils.updateDeclarationMutation_},e.Blocks.function_definition={init:function(){this.jsonInit({style:{hat:"cap"}}),this.name_="",this.arguments_=[],this.functionId_="",this.createAllInputs_(),this.setColour(e.Msg.PROCEDURES_HUE),this.setTooltip(e.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(e.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.setStatements_(!0),this.createCollapseIcon_(),this.setInputsInline(!0),this.statementConnection_=null},customContextMenu:function(t){this.inDebugWorkspace()||(t.push(e.Functions.makeEditOption(this)),t.push(e.Functions.makeCreateCallOption(this)))},mutationToDom:e.PXTBlockly.FunctionUtils.mutationToDom,domToMutation:e.PXTBlockly.FunctionUtils.domToMutation,getName:e.PXTBlockly.FunctionUtils.getName,getFunctionId:e.PXTBlockly.FunctionUtils.getFunctionId,getArguments:e.PXTBlockly.FunctionUtils.getArguments,removeValueInputs_:e.PXTBlockly.FunctionUtils.removeValueInputs_,disconnectOldBlocks_:e.PXTBlockly.FunctionUtils.disconnectOldBlocks_,deleteShadows_:e.PXTBlockly.FunctionUtils.deleteShadows_,createAllInputs_:e.PXTBlockly.FunctionUtils.createAllInputs_,updateDisplay_:e.PXTBlockly.FunctionUtils.updateDisplay_,setStatements_:e.PXTBlockly.FunctionUtils.setStatements_,ensureIds_:e.PXTBlockly.FunctionUtils.ensureIds_,populateArgument_:e.PXTBlockly.FunctionUtils.populateArgumentOnDefinition_,addFunctionLabel_:e.PXTBlockly.FunctionUtils.addLabelEditor_,updateFunctionLabel_:e.PXTBlockly.FunctionUtils.updateLabelEditor_,createArgumentReporter_:e.PXTBlockly.FunctionUtils.createArgumentReporter_,createCollapseIcon_:e.PXTBlockly.FunctionUtils.createCollapseIcon_},e.Blocks.function_call={init:function(){this.jsonInit({extensions:["function_contextmenu_edit"]}),this.name_="",this.arguments_=[],this.functionId_="",this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(e.Msg.PROCEDURES_HUE),this.setHelpUrl(e.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.setTooltip(e.Msg.FUNCTION_CALL_TOOLTIP),this.setInputsInline(!0)},mutationToDom:e.PXTBlockly.FunctionUtils.mutationToDom,domToMutation:e.PXTBlockly.FunctionUtils.domToMutation,getName:e.PXTBlockly.FunctionUtils.getName,getFunctionId:e.PXTBlockly.FunctionUtils.getFunctionId,getArguments:e.PXTBlockly.FunctionUtils.getArguments,removeValueInputs_:e.PXTBlockly.FunctionUtils.removeValueInputs_,disconnectOldBlocks_:e.PXTBlockly.FunctionUtils.disconnectOldBlocks_,deleteShadows_:e.PXTBlockly.FunctionUtils.deleteShadows_,createAllInputs_:e.PXTBlockly.FunctionUtils.createAllInputs_,updateDisplay_:e.PXTBlockly.FunctionUtils.updateDisplay_,setStatements_:e.PXTBlockly.FunctionUtils.setStatements_,ensureIds_:e.PXTBlockly.FunctionUtils.ensureIds_,populateArgument_:e.PXTBlockly.FunctionUtils.populateArgumentOnCaller_,addFunctionLabel_:e.PXTBlockly.FunctionUtils.addLabelField_,updateFunctionLabel_:e.PXTBlockly.FunctionUtils.updateLabelField_,attachShadow_:e.PXTBlockly.FunctionUtils.attachShadow_,buildShadowDom_:e.PXTBlockly.FunctionUtils.buildShadowDom_,onchange:e.PXTBlockly.FunctionUtils.onCallerChange},e.Blocks.function_call_output={init:function(){this.jsonInit({extensions:["function_contextmenu_edit"]}),this.name_="",this.arguments_=[],this.functionId_="",this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0,null),this.setOutputShape(e.OUTPUT_SHAPE_ROUND),this.setColour(e.Msg.PROCEDURES_HUE),this.setHelpUrl(e.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.setTooltip(e.Msg.FUNCTION_CALL_TOOLTIP),this.setInputsInline(!0)},mutationToDom:e.PXTBlockly.FunctionUtils.mutationToDom,domToMutation:e.PXTBlockly.FunctionUtils.domToMutation,getName:e.PXTBlockly.FunctionUtils.getName,getFunctionId:e.PXTBlockly.FunctionUtils.getFunctionId,getArguments:e.PXTBlockly.FunctionUtils.getArguments,removeValueInputs_:e.PXTBlockly.FunctionUtils.removeValueInputs_,disconnectOldBlocks_:e.PXTBlockly.FunctionUtils.disconnectOldBlocks_,deleteShadows_:e.PXTBlockly.FunctionUtils.deleteShadows_,createAllInputs_:e.PXTBlockly.FunctionUtils.createAllInputs_,updateDisplay_:e.PXTBlockly.FunctionUtils.updateDisplay_,setStatements_:e.PXTBlockly.FunctionUtils.setStatements_,ensureIds_:e.PXTBlockly.FunctionUtils.ensureIds_,populateArgument_:e.PXTBlockly.FunctionUtils.populateArgumentOnCaller_,addFunctionLabel_:e.PXTBlockly.FunctionUtils.addLabelField_,updateFunctionLabel_:e.PXTBlockly.FunctionUtils.updateLabelField_,attachShadow_:e.PXTBlockly.FunctionUtils.attachShadow_,buildShadowDom_:e.PXTBlockly.FunctionUtils.buildShadowDom_,onchange:e.PXTBlockly.FunctionUtils.onCallerChange},e.PXTBlockly.FunctionUtils.getTypeName=function(){return this.typeName_},e.PXTBlockly.FunctionUtils.argumentMutationToDom=function(){var t=e.utils.xml.createElement("mutation");return t.setAttribute("typename",this.typeName_),t},e.PXTBlockly.FunctionUtils.argumentDomToMutation=function(e){this.typeName_=e.getAttribute("typename"),this.setOutput(!0,this.typeName_)},e.PXTBlockly.FunctionUtils.createCustomArgumentBlock=function(t,n,o){return t=e.Xml.textToDom('<xml><block type="'+t+'"><mutation typename="'+n+'"></mutation></block></xml>'),e.Xml.domToBlock(t.firstChild,o)},e.PXTBlockly.FunctionUtils.createCustomArgumentEditor=function(t,n){return e.PXTBlockly.FunctionUtils.createCustomArgumentBlock("argument_editor_custom",t,n)},e.PXTBlockly.FunctionUtils.createCustomArgumentReporter=function(t,n){return e.PXTBlockly.FunctionUtils.createCustomArgumentBlock("argument_reporter_custom",t,n)},e.Blocks.argument_editor_boolean={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_argument_editor",name:"TEXT",text:"bool"}],colour:e.Colours.textField,colourSecondary:e.Colours.textField,colourTertiary:e.Colours.textField,extensions:["output_boolean"]}),this.typeName_="boolean"},getTypeName:e.PXTBlockly.FunctionUtils.getTypeName,removeFieldCallback:e.PXTBlockly.FunctionUtils.removeArgumentCallback_},e.Blocks.argument_editor_string={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_argument_editor",name:"TEXT",text:"text"}],colour:e.Colours.textField,colourSecondary:e.Colours.textField,colourTertiary:e.Colours.textField,extensions:["output_string"]}),this.typeName_="string"},getTypeName:e.PXTBlockly.FunctionUtils.getTypeName,removeFieldCallback:e.PXTBlockly.FunctionUtils.removeArgumentCallback_},e.Blocks.argument_editor_number={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_argument_editor",name:"TEXT",text:"num"}],colour:e.Colours.textField,colourSecondary:e.Colours.textField,colourTertiary:e.Colours.textField,extensions:["output_number"]}),this.typeName_="number"},getTypeName:e.PXTBlockly.FunctionUtils.getTypeName,removeFieldCallback:e.PXTBlockly.FunctionUtils.removeArgumentCallback_},e.Blocks.argument_editor_array={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_argument_editor",name:"TEXT",text:"list"}],colour:e.Colours.textField,colourSecondary:e.Colours.textField,colourTertiary:e.Colours.textField,extensions:["output_array"]}),this.typeName_="Array"},getTypeName:e.PXTBlockly.FunctionUtils.getTypeName,removeFieldCallback:e.PXTBlockly.FunctionUtils.removeArgumentCallback_},e.Blocks.argument_editor_custom={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_argument_editor",name:"TEXT",text:"arg"}],colour:e.Colours.textField,colourSecondary:e.Colours.textField,colourTertiary:e.Colours.textField,outputShape:e.OUTPUT_SHAPE_ROUND}),this.typeName_="any"},getTypeName:e.PXTBlockly.FunctionUtils.getTypeName,removeFieldCallback:e.PXTBlockly.FunctionUtils.removeArgumentCallback_,mutationToDom:e.PXTBlockly.FunctionUtils.argumentMutationToDom,domToMutation:e.PXTBlockly.FunctionUtils.argumentDomToMutation},e.Blocks.argument_reporter_boolean={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_label_hover",name:"VALUE",text:""}],colour:e.Msg.REPORTERS_HUE,extensions:["output_boolean"]}),this.typeName_="boolean"},getTypeName:e.PXTBlockly.FunctionUtils.getTypeName},e.Blocks.argument_reporter_number={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_label_hover",name:"VALUE",text:""}],colour:e.Msg.REPORTERS_HUE,extensions:["output_number"]}),this.typeName_="number"},getTypeName:e.PXTBlockly.FunctionUtils.getTypeName},e.Blocks.argument_reporter_string={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_label_hover",name:"VALUE",text:""}],colour:e.Msg.REPORTERS_HUE,extensions:["output_string"]}),this.typeName_="string"},getTypeName:e.PXTBlockly.FunctionUtils.getTypeName},e.Blocks.argument_reporter_array={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_label_hover",name:"VALUE",text:""}],colour:e.Msg.REPORTERS_HUE,extensions:["output_array"]}),this.typeName_="Array"},getTypeName:e.PXTBlockly.FunctionUtils.getTypeName},e.Blocks.argument_reporter_custom={init:function(){this.jsonInit({message0:" %1",args0:[{type:"field_label_hover",name:"VALUE",text:""}],colour:e.Msg.REPORTERS_HUE,inputsInline:!0,outputShape:e.OUTPUT_SHAPE_ROUND,output:null}),this.typeName_=""},getTypeName:e.PXTBlockly.FunctionUtils.getTypeName,mutationToDom:e.PXTBlockly.FunctionUtils.argumentMutationToDom,domToMutation:e.PXTBlockly.FunctionUtils.argumentDomToMutation},e.Blocks.texts={},e.Constants.Text={},e.Constants.Text.HUE=160,e.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_string",name:"TEXT",text:""}],output:"String",outputShape:e.OUTPUT_SHAPE_ROUND,style:"field_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:""},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",outputShape:e.OUTPUT_SHAPE_ROUND,style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",outputShape:e.OUTPUT_SHAPE_HEXAGONAL,style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",outputShape:e.OUTPUT_SHAPE_ROUND,style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),e.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[e.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[e.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[e.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[e.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[e.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[e.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(e.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(e.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),e.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.setOutputShape(e.OUTPUT_SHAPE_ROUND),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(e.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var t=e.utils.xml.createElement("mutation"),n=this.getInput("AT1").type==e.INPUT_VALUE;return t.setAttribute("at1",n),n=this.getInput("AT2").type==e.INPUT_VALUE,t.setAttribute("at2",n),t},domToMutation:function(e){var t="true"==e.getAttribute("at1");e="true"==e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},updateAt_:function(t,n){this.removeInput("AT"+t),this.removeInput("ORDINAL"+t,!0),n?(this.appendValueInput("AT"+t).setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+t).appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+t),2==t&&e.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(e.Msg.TEXT_GET_SUBSTRING_TAIL));var o=new e.FieldDropdown(this["WHERE_OPTIONS_"+t],(function(e){var o="FROM_START"==e||"FROM_END"==e;if(o!=n){var r=this.getSourceBlock();return r.updateAt_(t,o),r.setFieldValue(e,"WHERE"+t),null}}));this.getInput("AT"+t).appendField(o,"WHERE"+t),1==t&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},e.Blocks.text_changeCase={init:function(){var t=[[e.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[e.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[e.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(e.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new e.FieldDropdown(t),"CASE"),this.setOutput(!0,"String"),this.setOutputShape(e.OUTPUT_SHAPE_ROUND),this.setTooltip(e.Msg.TEXT_CHANGECASE_TOOLTIP)}},e.Blocks.text_trim={init:function(){var t=[[e.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[e.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[e.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(e.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new e.FieldDropdown(t),"MODE"),this.setOutput(!0,"String"),this.setOutputShape(e.OUTPUT_SHAPE_ROUND),this.setTooltip(e.Msg.TEXT_TRIM_TOOLTIP)}},e.Blocks.text_print={init:function(){this.jsonInit({message0:e.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:e.Msg.TEXT_PRINT_TOOLTIP,helpUrl:e.Msg.TEXT_PRINT_HELPURL})}},e.Blocks.text_prompt_ext={init:function(){var t=[[e.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[e.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(e.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var n=this;t=new e.FieldDropdown(t,(function(e){n.updateType_(e)})),this.appendValueInput("TEXT").appendField(t,"TYPE"),this.setOutput(!0,"String"),this.setOutputShape(e.OUTPUT_SHAPE_ROUND),this.setTooltip((function(){return"TEXT"==n.getFieldValue("TYPE")?e.Msg.TEXT_PROMPT_TOOLTIP_TEXT:e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER}))},updateType_:function(e){this.outputConnection.setCheck("NUMBER"==e?"Number":"String")},mutationToDom:function(){var t=e.utils.xml.createElement("mutation");return t.setAttribute("type",this.getFieldValue("TYPE")),t},domToMutation:function(e){this.updateType_(e.getAttribute("type"))}},e.Blocks.text_prompt={init:function(){this.mixin(e.Constants.Text.QUOTE_IMAGE_MIXIN);var t=[[e.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[e.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],n=this;this.setHelpUrl(e.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),t=new e.FieldDropdown(t,(function(e){n.updateType_(e)})),this.appendDummyInput().appendField(t,"TYPE").appendField(this.newQuote_(!0)).appendField(new e.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setOutputShape(e.OUTPUT_SHAPE_ROUND),this.setTooltip((function(){return"TEXT"==n.getFieldValue("TYPE")?e.Msg.TEXT_PROMPT_TOOLTIP_TEXT:e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER}))},updateType_:e.Blocks.text_prompt_ext.updateType_,mutationToDom:e.Blocks.text_prompt_ext.mutationToDom,domToMutation:e.Blocks.text_prompt_ext.domToMutation},e.Blocks.text_count={init:function(){this.jsonInit({message0:e.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",outputShape:e.OUTPUT_SHAPE_ROUND,inputsInline:!0,style:"text_blocks",tooltip:e.Msg.TEXT_COUNT_TOOLTIP,helpUrl:e.Msg.TEXT_COUNT_HELPURL})}},e.Blocks.text_replace={init:function(){this.jsonInit({message0:e.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",outputShape:e.OUTPUT_SHAPE_ROUND,inputsInline:!0,style:"text_blocks",tooltip:e.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:e.Msg.TEXT_REPLACE_HELPURL})}},e.Blocks.text_reverse={init:function(){this.jsonInit({message0:e.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",outputShape:e.OUTPUT_SHAPE_ROUND,inputsInline:!0,style:"text_blocks",tooltip:e.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:e.Msg.TEXT_REVERSE_HELPURL})}},e.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(e){for(var t,n=0;t=this.inputList[n];n++)for(var o,r=0;o=t.fieldRow[r];r++)if(e==o.name)return t.insertFieldAt(r,this.newQuote_(!0)),void t.insertFieldAt(r+2,this.newQuote_(!1));console.warn('field named "'+e+'" not found in '+this.toDevString())},newQuote_:function(t){return t=this.RTL?!t:t,new e.FieldImage(t?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,t?"":"")}},e.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(e.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},e.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var t=e.utils.xml.createElement("mutation");return t.setAttribute("items",this.itemCount_),t},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10),this.updateShape_()},saveConnections:function(e){e=e.getInputTargetBlock("STACK");for(var t=0;e;){var n=this.getInput("ADD"+t);e.valueConnection_=n&&n.connection.targetConnection,t++,e=e.nextConnection&&e.nextConnection.targetBlock()}},storeValueConnections_:function(){this.valueConnections_=[];for(var e=0;e<this.itemCount_;e++)this.valueConnections_.push(this.getInput("ADD"+e).connection.targetConnection)},restoreValueConnections_:function(){for(var t=0;t<this.itemCount_;t++)e.Mutator.reconnect(this.valueConnections_[t],this,"ADD"+t)},addItem_:function(){if(this.storeValueConnections_(),this.update_((function(){this.itemCount_++})),this.restoreValueConnections_(),1<this.itemCount_){var t=this.getInput("ADD0");if(t&&t.connection.targetConnection){var n=this.getInput("ADD"+(this.itemCount_-1)),o=t.connection.getShadowDom();o&&(t=e.utils.xml.createElement("shadow"),o=o.getAttribute("type"),t.setAttribute("type",o),t&&(t.setAttribute("id",e.utils.genUid()),n.connection.setShadowDom(t),n.connection.respawnShadow_()))}}},removeItem_:function(){this.storeValueConnections_(),this.update_((function(){this.itemCount_--})),this.restoreValueConnections_()},update_:function(t){e.Events.setGroup(!0);var n=this,o=n.mutationToDom();o=o&&e.Xml.domToText(o);var r=n.rendered;n.rendered=!1,t&&t.call(this),this.updateShape_(),n.rendered=r,n.initSvg();var i=e.Events.getGroup();o!=(t=(t=n.mutationToDom())&&e.Xml.domToText(t))&&(e.Events.fire(new e.Events.BlockChange(n,"mutation",null,o,t)),setTimeout((function(){e.Events.setGroup(i),n.bumpNeighbours(),e.Events.setGroup(!1)}),e.BUMP_DELAY)),n.rendered&&n.render(),e.Events.setGroup(!1)},updateShape_:function(){var t=this,n=function(){t.removeItem_()};this.getInput("EMPTY")&&this.removeInput("EMPTY"),this.getInput("TITLE")||this.appendDummyInput("TITLE").appendField(e.Msg.TEXT_JOIN_TITLE_CREATEWITH);for(var o=0;o<this.itemCount_;o++)this.getInput("ADD"+o)||this.appendValueInput("ADD"+o).setAlign(e.ALIGN_LEFT);for(;this.getInput("ADD"+o);)this.removeInput("ADD"+o),o++;this.getInput("BUTTONS")&&this.removeInput("BUTTONS"),o=this.appendDummyInput("BUTTONS"),1<this.itemCount_&&o.appendField(new e.FieldImage(this.REMOVE_IMAGE_DATAURI,24,24,"*",n,!1)),o.appendField(new e.FieldImage(this.ADD_IMAGE_DATAURI,24,24,"*",(function(){t.addItem_()}),!1)),n=4>=this.itemCount_,this.setInputsInline(n),this.setOutputShape(n?e.OUTPUT_SHAPE_ROUND:e.OUTPUT_SHAPE_SQUARE)}},e.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(e.Constants.Text.QUOTE_IMAGE_MIXIN),e.Extensions.apply("inline-svgs",this,!1),this.itemCount_=2,this.updateShape_()},e.Extensions.register("text_append_tooltip",e.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),e.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var t=this;this.setTooltip((function(){return e.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",t.workspace.options.oneBasedIndex?"0":"-1")}))},e.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var t=e.utils.xml.createElement("mutation");return t.setAttribute("at",!!this.isAt_),t},domToMutation:function(e){e="false"!=e.getAttribute("at"),this.updateAt_(e)},updateAt_:function(t){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),t&&(this.appendValueInput("AT").setCheck("Number"),e.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg.ORDINAL_NUMBER_SUFFIX)),e.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(e.Msg.TEXT_CHARAT_TAIL)),this.isAt_=t}},e.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator((function(e){(e="FROM_START"==e||"FROM_END"==e)!=this.isAt_&&this.getSourceBlock().updateAt_(e)})),this.updateAt_(!0);var t=this;this.setTooltip((function(){var n=t.getFieldValue("WHERE"),o=e.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==n||"FROM_END"==n)&&(n="FROM_START"==n?e.Msg.LISTS_INDEX_FROM_START_TOOLTIP:e.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(o+="  "+n.replace("%1",t.workspace.options.oneBasedIndex?"#1":"#0")),o}))},e.Extensions.register("text_indexOf_tooltip",e.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),e.Extensions.register("text_quotes",e.Constants.Text.TEXT_QUOTES_EXTENSION),e.Extensions.registerMutator("text_join_mutator",e.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,e.Constants.Text.TEXT_JOIN_EXTENSION),e.Extensions.registerMutator("text_charAt_mutator",e.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,e.Constants.Text.TEXT_CHARAT_EXTENSION),e.Blocks.variables={},e.Constants.Variables={},e.Constants.Variables.HUE=330,e.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,outputShape:e.OUTPUT_SHAPE_ROUND,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_get_reporter",message0:"%1",args0:[{type:"field_variable_getter",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,colour:"%{BKY_VARIABLES_HUE}",outputShape:e.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableReporter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),e.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(t){if(!this.isCollapsed())if(this.isInFlyout)"variables_get"!=this.type&&"variables_get_reporter"!=this.type||(n={text:e.Msg.RENAME_VARIABLE,enabled:!this.inDebugWorkspace(),callback:e.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},i=this.getField("VAR").getText(),r={text:e.Msg.DELETE_VARIABLE.replace("%1",i),enabled:!this.inDebugWorkspace(),callback:e.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},t.unshift(n),t.unshift(r));else{if("variables_get"==this.type||"variables_get_reporter"==this.type)var n="variables_set",o=e.Msg.VARIABLES_GET_CREATE_SET;else n="variables_get",o=e.Msg.VARIABLES_SET_CREATE_GET;var r={enabled:0<this.workspace.remainingCapacity()&&!this.inDebugWorkspace()},i=this.getField("VAR").getText();r.text=o.replace("%1",i),(o=e.utils.xml.createElement("field")).setAttribute("name","VAR"),o.appendChild(e.utils.xml.createTextNode(i)),(i=e.utils.xml.createElement("block")).setAttribute("type",n),i.appendChild(o),r.callback=e.ContextMenu.callbackFactory(this,i),t.push(r)}}},e.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_REPORTER_MIXIN={customContextMenu:function(t){if(!this.isCollapsed()){var n={text:e.Msg.RENAME_VARIABLE,enabled:!this.inDebugWorkspace(),callback:e.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)};if(t.unshift(n),!this.isInFlyout){0<(n=this.workspace.getVariablesOfType("")).length&&t.unshift({separator:!0});for(var o=n.length-1;0<=o;o--){var r={enabled:!this.inDebugWorkspace()};r.text=n[o].name,r.callback=e.Constants.Variables.VARIABLE_OPTION_CALLBACK_FACTORY(this,r.text,n[o].getId()),t.unshift(r)}}}}},e.Constants.Variables.VARIABLE_OPTION_CALLBACK_FACTORY=function(e,t,n){return function(){var t=e.getField("VAR");t||console.log("Tried to get a variable field on the wrong type of block."),t.setValue(n)}},e.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY=function(t){return function(){var n=t.workspace,o=t.getField("VAR").getVariable();e.Variables.renameVariable(n,o)}},e.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY=function(e){return function(){var t=e.workspace,n=e.getField("VAR").getVariable();t.deleteVariableById(n.getId()),t.refreshToolboxSelection()}},e.Extensions.registerMixin("contextMenu_variableSetterGetter",e.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),e.Extensions.registerMixin("contextMenu_variableReporter",e.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_REPORTER_MIXIN),e.Constants.VariablesDynamic={},e.Constants.VariablesDynamic.HUE=310,e.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),e.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(t){if(this.inDebugWorkspace())if(this.isInFlyout)"variables_get_dynamic"!=this.type&&"variables_get_reporter_dynamic"!=this.type||(n={text:e.Msg.RENAME_VARIABLE,enabled:!this.inDebugWorkspace(),callback:e.Constants.Variables.RENAME_OPTION_CALLBACK_FACTORY(this)},s=this.getField("VAR").getText(),i={text:e.Msg.DELETE_VARIABLE.replace("%1",s),enabled:!this.inDebugWorkspace(),callback:e.Constants.Variables.DELETE_OPTION_CALLBACK_FACTORY(this)},t.unshift(n),t.unshift(i));else{var n=this.getFieldValue("VAR"),o=this.workspace.getVariableById(n).type;if("variables_get_dynamic"==this.type){n="variables_set_dynamic";var r=e.Msg.VARIABLES_GET_CREATE_SET}else n="variables_get_dynamic",r=e.Msg.VARIABLES_SET_CREATE_GET;var i={enabled:0<this.workspace.remainingCapacity()},s=this.getField("VAR").getText();i.text=r.replace("%1",s),(r=e.utils.xml.createElement("field")).setAttribute("name","VAR"),r.setAttribute("variabletype",o),r.appendChild(e.utils.xml.createTextNode(s)),(s=e.utils.xml.createElement("block")).setAttribute("type",n),s.appendChild(r),i.callback=e.ContextMenu.callbackFactory(this,s),t.push(i)}},onchange:function(t){t=this.getFieldValue("VAR"),t=e.Variables.getVariable(this.workspace,t),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(t.type):this.getInput("VALUE").connection.setCheck(t.type)}},e.Constants.VariablesDynamic.RENAME_OPTION_CALLBACK_FACTORY=function(t){return function(){var n=t.workspace,o=t.getField("VAR").getVariable();e.Variables.renameVariable(n,o)}},e.Constants.VariablesDynamic.DELETE_OPTION_CALLBACK_FACTORY=function(e){return function(){var t=e.workspace,n=e.getField("VAR").getVariable();t.deleteVariableById(n.getId()),t.refreshToolboxSelection()}},e.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",e.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),e.Blocks})),Blockly.Msg.ADD_COMMENT="Add Comment",Blockly.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",Blockly.Msg.CHANGE_VALUE_TITLE="Change value:",Blockly.Msg.CLEAN_UP="Clean up Blocks",Blockly.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",Blockly.Msg.COLLAPSE_ALL="Collapse Blocks",Blockly.Msg.COLLAPSE_BLOCK="Collapse Block",Blockly.Msg.COLOUR_BLEND_COLOUR1="colour 1",Blockly.Msg.COLOUR_BLEND_COLOUR2="colour 2",Blockly.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",Blockly.Msg.COLOUR_BLEND_RATIO="ratio",Blockly.Msg.COLOUR_BLEND_TITLE="blend",Blockly.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",Blockly.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",Blockly.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",Blockly.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",Blockly.Msg.COLOUR_RANDOM_TITLE="random colour",Blockly.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",Blockly.Msg.COLOUR_RGB_BLUE="blue",Blockly.Msg.COLOUR_RGB_GREEN="green",Blockly.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",Blockly.Msg.COLOUR_RGB_RED="red",Blockly.Msg.COLOUR_RGB_TITLE="colour with",Blockly.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",Blockly.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",Blockly.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",Blockly.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",Blockly.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",Blockly.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",Blockly.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",Blockly.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",Blockly.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",Blockly.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",Blockly.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",Blockly.Msg.CONTROLS_IF_MSG_ELSE="else",Blockly.Msg.CONTROLS_IF_MSG_ELSEIF="else if",Blockly.Msg.CONTROLS_IF_MSG_IF="if",Blockly.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",Blockly.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",Blockly.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",Blockly.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",Blockly.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",Blockly.Msg.CONTROLS_REPEAT_INPUT_DO="do",Blockly.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",Blockly.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",Blockly.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",Blockly.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",Blockly.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",Blockly.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",Blockly.Msg.DELETE_BLOCK="Delete Block",Blockly.Msg.DELETE_VARIABLE="Delete the '%1' variable",Blockly.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",Blockly.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",Blockly.Msg.DIALOG_CANCEL="Cancel",Blockly.Msg.DIALOG_OK="OK",Blockly.Msg.DISABLE_BLOCK="Disable Block",Blockly.Msg.DUPLICATE_BLOCK="Duplicate",Blockly.Msg.DUPLICATE_COMMENT="Duplicate Comment",Blockly.Msg.ENABLE_BLOCK="Enable Block",Blockly.Msg.EXPAND_ALL="Expand Blocks",Blockly.Msg.EXPAND_BLOCK="Expand Block",Blockly.Msg.EXTERNAL_INPUTS="External Inputs",Blockly.Msg.FUNCTIONS_CALL_TITLE="call",Blockly.Msg.FUNCTIONS_CREATE_CALL_OPTION="Create 'call %1'",Blockly.Msg.FUNCTIONS_DEFAULT_ARRAY_ARG_NAME="list",Blockly.Msg.FUNCTIONS_DEFAULT_BOOLEAN_ARG_NAME="bool",Blockly.Msg.FUNCTIONS_DEFAULT_CUSTOM_ARG_NAME="arg",Blockly.Msg.FUNCTIONS_DEFAULT_FUNCTION_NAME="do_something",Blockly.Msg.FUNCTIONS_DEFAULT_NUMBER_ARG_NAME="num",Blockly.Msg.FUNCTIONS_DEFAULT_STRING_ARG_NAME="text",Blockly.Msg.FUNCTIONS_EDIT_OPTION="Edit",Blockly.Msg.FUNCTIONS_GO_TO_DEFINITION_OPTION="Go to definition",Blockly.Msg.FUNCTION_CALL_TOOLTIP="Call a function that was previously defined.",Blockly.Msg.FUNCTION_CREATE_NEW="Create a Function",Blockly.Msg.FUNCTION_WARNING_ARG_NAME_IS_FUNCTION_NAME="Argument names must not be the same as the function name.",Blockly.Msg.FUNCTION_WARNING_DUPLICATE_ARG="Functions cannot use the same argument name more than once.",Blockly.Msg.FUNCTION_WARNING_EMPTY_NAME="Function and argument names cannot be empty.",Blockly.Msg.HELP="Help",Blockly.Msg.INLINE_INPUTS="Inline Inputs",Blockly.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",Blockly.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",Blockly.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",Blockly.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",Blockly.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",Blockly.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",Blockly.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",Blockly.Msg.LISTS_GET_INDEX_FIRST="first",Blockly.Msg.LISTS_GET_INDEX_FROM_END="# from end",Blockly.Msg.LISTS_GET_INDEX_FROM_START="#",Blockly.Msg.LISTS_GET_INDEX_GET="get",Blockly.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",Blockly.Msg.LISTS_GET_INDEX_LAST="last",Blockly.Msg.LISTS_GET_INDEX_RANDOM="random",Blockly.Msg.LISTS_GET_INDEX_REMOVE="remove",Blockly.Msg.LISTS_GET_INDEX_TAIL="",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",Blockly.Msg.LISTS_GET_SUBLIST_END_LAST="to last",Blockly.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",Blockly.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #";Blockly.Msg.LISTS_GET_SUBLIST_TAIL="",Blockly.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",Blockly.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",Blockly.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",Blockly.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",Blockly.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",Blockly.Msg.LISTS_INLIST="in list",Blockly.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",Blockly.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",Blockly.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",Blockly.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",Blockly.Msg.LISTS_LENGTH_TITLE="length of %1",Blockly.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",Blockly.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",Blockly.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",Blockly.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",Blockly.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",Blockly.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",Blockly.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",Blockly.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",Blockly.Msg.LISTS_SET_INDEX_INPUT_TO="as",Blockly.Msg.LISTS_SET_INDEX_INSERT="insert at",Blockly.Msg.LISTS_SET_INDEX_SET="set",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",Blockly.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",Blockly.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",Blockly.Msg.LISTS_SORT_ORDER_DESCENDING="descending",Blockly.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",Blockly.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",Blockly.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",Blockly.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",Blockly.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",Blockly.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",Blockly.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",Blockly.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",Blockly.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",Blockly.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",Blockly.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",Blockly.Msg.LOGIC_BOOLEAN_FALSE="false",Blockly.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",Blockly.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",Blockly.Msg.LOGIC_BOOLEAN_TRUE="true",Blockly.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",Blockly.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",Blockly.Msg.LOGIC_NEGATE_TITLE="not %1",Blockly.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",Blockly.Msg.LOGIC_NULL="null",Blockly.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",Blockly.Msg.LOGIC_NULL_TOOLTIP="Returns null.",Blockly.Msg.LOGIC_OPERATION_AND="and",Blockly.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",Blockly.Msg.LOGIC_OPERATION_OR="or",Blockly.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",Blockly.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",Blockly.Msg.LOGIC_TERNARY_CONDITION="test",Blockly.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",Blockly.Msg.LOGIC_TERNARY_IF_FALSE="if false",Blockly.Msg.LOGIC_TERNARY_IF_TRUE="if true",Blockly.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",Blockly.Msg.MATH_ADDITION_SYMBOL="+",Blockly.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",Blockly.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",Blockly.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",Blockly.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",Blockly.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",Blockly.Msg.MATH_CHANGE_TITLE="change %1 by %2",Blockly.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",Blockly.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",Blockly.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",Blockly.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",Blockly.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",Blockly.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",Blockly.Msg.MATH_DIVISION_SYMBOL="",Blockly.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",Blockly.Msg.MATH_IS_EVEN="is even",Blockly.Msg.MATH_IS_NEGATIVE="is negative",Blockly.Msg.MATH_IS_ODD="is odd",Blockly.Msg.MATH_IS_POSITIVE="is positive",Blockly.Msg.MATH_IS_PRIME="is prime",Blockly.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",Blockly.Msg.MATH_IS_WHOLE="is whole",Blockly.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",Blockly.Msg.MATH_MODULO_TITLE="remainder of %1  %2",Blockly.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",Blockly.Msg.MATH_MULTIPLICATION_SYMBOL="",Blockly.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",Blockly.Msg.MATH_NUMBER_TOOLTIP="A number.",Blockly.Msg.MATH_ONLIST_HELPURL="",Blockly.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",Blockly.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",Blockly.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",Blockly.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",Blockly.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",Blockly.Msg.MATH_POWER_SYMBOL="^",Blockly.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",Blockly.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",Blockly.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",Blockly.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",Blockly.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",Blockly.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",Blockly.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",Blockly.Msg.MATH_ROUND_OPERATOR_ROUND="round",Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",Blockly.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",Blockly.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",Blockly.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",Blockly.Msg.MATH_SINGLE_OP_ROOT="square root",Blockly.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",Blockly.Msg.MATH_SUBTRACTION_SYMBOL="-",Blockly.Msg.MATH_TRIG_ACOS="acos",Blockly.Msg.MATH_TRIG_ASIN="asin",Blockly.Msg.MATH_TRIG_ATAN="atan",Blockly.Msg.MATH_TRIG_COS="cos",Blockly.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",Blockly.Msg.MATH_TRIG_SIN="sin",Blockly.Msg.MATH_TRIG_TAN="tan",Blockly.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",Blockly.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",Blockly.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",Blockly.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",Blockly.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",Blockly.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",Blockly.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",Blockly.Msg.NEW_NUMBER_VARIABLE="Create number variable...",Blockly.Msg.NEW_STRING_VARIABLE="Create string variable...",Blockly.Msg.NEW_VARIABLE="Create variable...",Blockly.Msg.NEW_VARIABLE_TITLE="New variable name:",Blockly.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",Blockly.Msg.ORDINAL_NUMBER_SUFFIX="",Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",Blockly.Msg.PROCEDURES_BEFORE_PARAMS="with:",Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",Blockly.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",Blockly.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",Blockly.Msg.PROCEDURES_CREATE_DO="Create '%1'",Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",Blockly.Msg.PROCEDURES_DEFNORETURN_DO="",Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE="to",Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",Blockly.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_DEFRETURN_RETURN="return",Blockly.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",Blockly.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",Blockly.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",Blockly.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",Blockly.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",Blockly.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",Blockly.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",Blockly.Msg.REDO="Redo",Blockly.Msg.REMOVE_COMMENT="Remove Comment",Blockly.Msg.RENAME_VARIABLE="Rename variable...",Blockly.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",Blockly.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",Blockly.Msg.TEXT_APPEND_TITLE="to %1 append text %2",Blockly.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",Blockly.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",Blockly.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",Blockly.Msg.TEXT_CHARAT_FIRST="get first letter",Blockly.Msg.TEXT_CHARAT_FROM_END="get letter # from end",Blockly.Msg.TEXT_CHARAT_FROM_START="get letter #",Blockly.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",Blockly.Msg.TEXT_CHARAT_LAST="get last letter",Blockly.Msg.TEXT_CHARAT_RANDOM="get random letter",Blockly.Msg.TEXT_CHARAT_TAIL="",Blockly.Msg.TEXT_CHARAT_TITLE="in text %1 %2",Blockly.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",Blockly.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",Blockly.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",Blockly.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",Blockly.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",Blockly.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",Blockly.Msg.TEXT_GET_SUBSTRING_TAIL="",Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",Blockly.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",Blockly.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",Blockly.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",Blockly.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",Blockly.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",Blockly.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",Blockly.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",Blockly.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",Blockly.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",Blockly.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",Blockly.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",Blockly.Msg.TEXT_LENGTH_TITLE="length of %1",Blockly.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",Blockly.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",Blockly.Msg.TEXT_PRINT_TITLE="print %1",Blockly.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",Blockly.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",Blockly.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",Blockly.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",Blockly.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",Blockly.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",Blockly.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",Blockly.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",Blockly.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",Blockly.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",Blockly.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",Blockly.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",Blockly.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",Blockly.Msg.TODAY="Today",Blockly.Msg.UNDO="Undo",Blockly.Msg.UNNAMED_KEY="unnamed",Blockly.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",Blockly.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",Blockly.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",Blockly.Msg.VARIABLES_SET="set %1 to %2",Blockly.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",Blockly.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",Blockly.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",Blockly.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",Blockly.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",Blockly.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",Blockly.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",Blockly.Msg.CONTROLS_FOREACH_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.CONTROLS_FOR_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=Blockly.Msg.CONTROLS_IF_MSG_ELSEIF,Blockly.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=Blockly.Msg.CONTROLS_IF_MSG_ELSE,Blockly.Msg.CONTROLS_IF_IF_TITLE_IF=Blockly.Msg.CONTROLS_IF_MSG_IF,Blockly.Msg.CONTROLS_IF_MSG_THEN=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.LISTS_CREATE_WITH_ITEM_TITLE=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.LISTS_GET_INDEX_HELPURL=Blockly.Msg.LISTS_INDEX_OF_HELPURL,Blockly.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.MATH_CHANGE_TITLE_ITEM=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT=Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT,Blockly.Msg.PROCEDURES_DEFRETURN_DO=Blockly.Msg.PROCEDURES_DEFNORETURN_DO,Blockly.Msg.PROCEDURES_DEFRETURN_PROCEDURE=Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,Blockly.Msg.PROCEDURES_DEFRETURN_TITLE=Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE,Blockly.Msg.TEXT_APPEND_VARIABLE=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.LOGIC_HUE="210",Blockly.Msg.LOOPS_HUE="120",Blockly.Msg.MATH_HUE="230",Blockly.Msg.TEXTS_HUE="160",Blockly.Msg.LISTS_HUE="260",Blockly.Msg.COLOUR_HUE="20",Blockly.Msg.VARIABLES_HUE="330",Blockly.Msg.VARIABLES_DYNAMIC_HUE="310",Blockly.Msg.PROCEDURES_HUE="290",Blockly.Msg.VARIABLES_DEFAULT_NAME="item",function(e){!function(t){function n(t,n){return e.worker.getWorker(e.webConfig.workerjs).opAsync(t,n)}t.workerOpAsync=n;let o={};function r(e,t){e.push.apply(e,t)}function i(e){if(!e)throw new Error("Assertion failure")}class s{constructor(e,t,n,o,r){this.link=e,this.type=t,this.parentType=n,this.childType=o,this.isArrayType=r}}let a;function l(e){return e.link?l(e.link):e}function c(e,t){let n=l(e),o=l(t);if(i(null==n.link&&null==o.link),n==o)return;if(n.childType&&o.childType){const e=n.childType;n.childType=null,c(e,o.childType)}else n.childType&&!o.childType&&(o.childType=n.childType);if(n.parentType&&o.parentType){const e=n.parentType;n.parentType=null,c(e,o.parentType)}else!n.parentType||o.parentType||o.type||(o.parentType=n.parentType);let r=function(e,t){if(null==e||"Array"===e&&y(t))return t;if(null==t||"Array"===t&&y(e))return e;if(e==t)return e;throw new Error("cannot mix "+e+" with "+t)}(n.type,o.type);e.link=o,n.link=o,n.isArrayType=o.isArrayType,e.type=null,t.type=r}function u(e,t=!1){return new s(null,e,null,null,t)}t.Point=s,function(e){e[e.None=0]="None",e[e.Argument=1]="Argument",e[e.Assigned=2]="Assigned",e[e.Implicit=3]="Implicit"}(a=t.BlockDeclarationType||(t.BlockDeclarationType={}));const p=u("number"),d=u("boolean"),g=u("string"),h=u("void");function f(e){if(!e)return u(e);switch(e.toLowerCase()){case"number":return p;case"boolean":return d;case"string":return g;case"void":return h;default:return u(e)}}function _(e,t){if(i(null!=t),function(e){return"placeholder"==e.type||e.type===pxtc.TS_OUTPUT_TYPE}(t))return t.p||(t.p=u(null)),l(t.p);if("variables_get"==t.type)return l(L(e,t,t.getField("VAR").getText()).type);if("function_call_output"==t.type)return function(e,t){const n=t.getField("function_name").getText();return m(e,n)}(e,t);if(!t.outputConnection)return f(h.type);const n=t.outputConnection.check_&&t.outputConnection.check_.length?t.outputConnection.check_[0]:"T";if("Array"===n){if(t.outputConnection.check_.length>1)return f(t.outputConnection.check_[1]);let n;if("lists_create_with"==t.type){if(t.inputList&&t.inputList.length)for(const o of t.inputList)if(o.connection&&o.connection.targetBlock()){let t=l(_(e,o.connection.targetBlock()));if(t){if(t.parentType)return t.parentType;n=t.type?f(t.type+"[]"):u(null),C(n,t);break}}}else"argument_reporter_array"==t.type&&(n||(n=f("any[]")));return n&&(n.isArrayType=!0),n||u(null,!0)}if("T"===n){const n=e.stdCallTable[t.type],o="lists_index_get"===t.type;if(o||n&&n.comp.thisParameter){let r;if(r=o?t.inputList.find((e=>"LIST"===e.name)):t.inputList.find((e=>e.name===n.comp.thisParameter.definitionName)),r.connection&&r.connection.targetBlock()){const t=_(e,r.connection.targetBlock());if(t.childType)return t.childType;const n=y(t.type)&&"Array"!==t.type?u(t.type.substr(0,t.type.length-2)):u(null);return C(t,n),n}}return u(null)}return f(n)}function m(t,n){if(!t.userFunctionReturnValues[n]){const o=Blockly.Functions.getDefinition(n,t.workspace);let r=u("void");if(me(o,!0))r=u("any");else{const i=[];for(const e of o.getDescendants(!1))"function_return"===e.type&&(k(t,e,"RETURN_VALUE"),i.push(_(t,v(e,"RETURN_VALUE"))));if(i.length)try{const e=u(null);for(const t of i)c(e,t);r=e}catch(i){t.diagnostics.push({blockId:o.id,message:e.Util.lf("Function '{0}' has an invalid return type",n)}),r=u("any")}}t.userFunctionReturnValues[n]=r}return t.userFunctionReturnValues[n]}function y(e){return e&&(-1!==e.indexOf("[]")||"Array"==e)}function k(e,t,n,r){const i=t.getInputTargetBlock(n);i?i.type!==pxtc.TS_OUTPUT_TYPE||i.p||(i.p=u(null)):(o[t.id]||(o[t.id]={}),o[t.id][n]||(o[t.id][n]=function(e,t,n){return{type:"placeholder",p:u(n||null),workspace:e.workspace,parentBlock_:t}}(e,t,r)))}function b(e){return"pxt_controls_for"==e.type||"pxt_controls_for_of"==e.type?v(e,"VAR"):e}function v(e,t){const n=e.getInputTargetBlock(t);return n||o[e.id]&&o[e.id][t]}function T(){o={}}function E(e,t,n,o){k(e,t,n);try{c(_(e,v(t,n)),o)}catch(e){}}function S(e,t,n){function o(e){return e.name?e.connection&&e.connection.check_&&e.connection.check_.length?e.connection.check_[0]:"T":void 0}function r(e,n){let r=e.inputList.filter((e=>"T"===o(e)));if(r.length){const o=v(e,r[0].name);if(o){const r=_(t,o),i=r.type?f(_(t,o).type+"[]"):f(null);return C(i,r),E(t,e,n,i),!0}}return!1}e&&e.filter((e=>e.isEnabled())).forEach((e=>{try{switch(e.type){case"math_op2":E(t,e,"x",f(p.type)),E(t,e,"y",f(p.type));break;case"math_op3":E(t,e,"x",f(p.type));break;case"math_arithmetic":case"logic_compare":switch(e.getFieldValue("OP")){case"ADD":case"MINUS":case"MULTIPLY":case"DIVIDE":case"LT":case"LTE":case"GT":case"GTE":case"POWER":E(t,e,"A",f(p.type)),E(t,e,"B",f(p.type));break;case"AND":case"OR":k(t,e,"A",d.type),k(t,e,"B",d.type);break;case"EQ":case"NEQ":k(t,e,"A"),k(t,e,"B");let n=_(t,v(e,"A")),o=_(t,v(e,"B"));try{c(n,o)}catch(e){}}break;case"logic_operation":k(t,e,"A",d.type),k(t,e,"B",d.type);break;case"logic_negate":k(t,e,"BOOL",d.type);break;case"controls_if":for(let n=0;n<=e.elseifCount_;++n)k(t,e,"IF"+n,d.type);break;case"pxt_controls_for":case"controls_simple_for":E(t,e,"TO",f(p.type));break;case"pxt_controls_for_of":case"controls_for_of":const n=_(t,v(e,"LIST"));C(n,L(t,e,b(e).getField("VAR").getText()).type);break;case"variables_set":case"variables_change":let i=L(t,e,e.getField("VAR").getText()).type;k(t,e,"VALUE");let s=v(e,"VALUE");if(s){let e=function(e,t){var n,o;return(null===(o=null===(n=t.outputConnection)||void 0===n?void 0:n.check_)||void 0===o?void 0:o.length)&&"Array"!==t.outputConnection.check_[0]&&"T"!==t.outputConnection.check_[0]?t.outputConnection.check_.map((e=>f(e))):[_(e,t)]}(t,s);const n=l(i);if(n.type&&e.slice(1).some((e=>e.type===n.type)))i.link=l(e[0]);else try{c(i,e[0])}catch(e){}}break;case"controls_repeat_ext":E(t,e,"TIMES",f(p.type));break;case"device_while":k(t,e,"COND",d.type);break;case"lists_index_get":E(t,e,"LIST",f("Array")),E(t,e,"INDEX",f(p.type));const a=_(t,v(e,"LIST"));C(a,_(t,e));break;case"lists_index_set":E(t,e,"LIST",f("Array")),k(t,e,"VALUE"),r(e,"LIST"),E(t,e,"INDEX",f(p.type));break;case"function_definition":m(t,e.getField("function_name").getText());break;case"function_call":case"function_call_output":e.getArguments().forEach((n=>{E(t,e,n.id,f(n.type))}));break;case pxtc.TS_RETURN_STATEMENT_TYPE:k(t,e,"RETURN_VALUE");break;case pxtc.PAUSE_UNTIL_TYPE:E(t,e,"PREDICATE",d);break;default:if(e.type in t.stdCallTable){const n=t.stdCallTable[e.type];if("ENUM_GET"===n.attrs.shim||"KIND_GET"===n.attrs.shim)return;ie(n,re(e)).forEach(((i,s)=>{const a=n.isExtensionMethod&&0===s;if(i.definitionName&&!e.getFieldValue(i.definitionName)){let n=e.inputList.find((e=>e.name==i.definitionName));if(n&&n.connection&&n.connection.check_){if(a&&"Array"===o(n)){if(r(e,i.definitionName))return}for(let o=0;o<n.connection.check_.length;o++)try{let r=n.connection.check_[o];E(t,e,i.definitionName,f(r));break}catch(e){}}}}))}}}catch(n){const o=n.block||e;o.setWarningText(n+""),t.errors.push(o)}})),t.allVariables.forEach((e=>{null==x(e.type).type&&c(e.type,f(e.type.isArrayType?"number[]":p.type))}))}function C(e,t){const n=l(e),o=l(t);n.childType?c(n.childType,o):n.type||(n.childType=o),o.parentType?c(o.parentType,n):o.type||(o.parentType=n),y(n.type)&&(n.isArrayType=!0)}function x(e,t=[]){const n=l(e);if(-1===t.indexOf(n)&&(t.push(n),!n.type||"Array"===n.type)){if(n.parentType){const e=x(n.parentType,t);if(e.type&&"Array"!==e.type)return y(e.type)?n.type=e.type.substr(0,e.type.length-2):n.type=e.type,n}if(n.childType){const e=x(n.childType,t);if(e.type)return n.type=e.type+"[]",n}}return n}function B(e){let t=e.getFieldValue("math_number_minmax"===e.type?"SLIDER":"NUM");const n=parseFloat(t);return function(e,t){isFinite(e)&&!isNaN(e)||function(e,t){let n=new Error(e);throw n.block=t,n}(lf("Number entered is either too large or too small"),t)}(n,e),n}function A(e,n,o){return t.H.mkNumberLiteral(B(n))}let I={ADD:"+",MINUS:"-",MULTIPLY:"*",DIVIDE:"/",LT:"<",LTE:"<=",GT:">",GTE:">=",AND:"&&",OR:"||",EQ:"==",NEQ:"!=",POWER:"**"};function D(e,n,o){const r=M(n.getFieldValue("NAME"),e,!0);return t.mkStmt(t.mkText(r+"()"))}function N(e,n,o,r){const i=M(n.getField("function_name").getText(),e,!0),s=!n.getInputsInline(),a=n.getArguments().map((e=>({actualName:e.name,definitionName:e.id}))).map((t=>V(e,n,t,o))),l=t.H.stdCall(i,a,s);return r?t.mkStmt(l):l}function w(e,n,o){const r=v(n,"RETURN_VALUE");return r&&"placeholder"!=r.type?t.mkStmt(t.mkText("return "),P(e,r,o)):t.mkStmt(t.mkText("return"))}function R(e){const n=e.getContent();return t.Helpers.mkMultiComment(n.trim())}function O(e){if(null==e.type&&(c(e,f(p.type)),e=l(e)),y(e.type)||e.isArrayType)return t.mkText("[]");switch(e.type){case"boolean":return t.H.mkBooleanLiteral(!1);case"number":return t.H.mkNumberLiteral(0);case"string":return t.H.mkStringLiteral("");default:return t.mkText("null")}}function P(n,o,r){let s;if(i(null!=o),n.stats[o.type]=(n.stats[o.type]||0)+1,ne(o,r),"placeholder"!=o.type&&o.isEnabled&&o.isEnabled())switch(o.type){case"math_number":case"math_integer":case"math_whole_number":case"math_number_minmax":s=A(0,o);break;case"math_op2":s=function(e,n,o){let r=n.getFieldValue("op"),i=P(e,v(n,"x"),o),s=P(e,v(n,"y"),o);return t.H.mathCall(r,[i,s])}(n,o,r);break;case"math_op3":s=function(e,n,o){let r=P(e,v(n,"x"),o);return t.H.mathCall("abs",[r])}(n,o,r);break;case"math_arithmetic":case"logic_compare":case"logic_operation":s=function(e,n,o){let r=n.getFieldValue("OP"),s=v(n,"A"),a=v(n,"B"),l=[P(e,s,o),P(e,a,o)],c=_(e,s).type;if(c==g.type){if("EQ"==r)return t.H.mkSimpleCall("==",l);if("NEQ"==r)return t.H.mkSimpleCall("!=",l)}else if(c==d.type)return t.H.mkSimpleCall(I[r],l);return i(r in I),t.H.mkSimpleCall(I[r],l)}(n,o,r);break;case"math_modulo":s=function(e,n,o){let r=v(n,"DIVIDEND"),i=v(n,"DIVISOR"),s=[P(e,r,o),P(e,i,o)];return t.H.mkSimpleCall("%",s)}(n,o,r);break;case"logic_boolean":s=function(e,n,o){return t.H.mkBooleanLiteral("TRUE"==n.getFieldValue("BOOL"))}(0,o);break;case"logic_negate":s=function(e,n,o){let r=P(e,v(n,"BOOL"),o);return t.mkPrefix("!",[t.H.mkParenthesizedExpression(r)])}(n,o,r);break;case"variables_get":s=function(e,n){const o=n.getField("VAR").getText();let r=L(e,n,o);if(!r)return t.mkText(o);r.firstReference||(r.firstReference=n);return i(null!=r&&null!=r.type),t.mkText(r.escapedName)}(n,o);break;case"text":s=function(e,n,o){return t.H.mkStringLiteral(n.getFieldValue("TEXT"))}(0,o);break;case"text_join":s=function(e,n,o){let r,i=0;for(;;){const s=v(n,"ADD"+i);if(i++,!s){if(i<n.inputList.length)continue;break}const a=P(e,s,o);r=r?t.H.mkSimpleCall("+",[r,a]):0===s.type.indexOf("text")?a:t.H.mkSimpleCall("+",[t.H.mkStringLiteral(""),a])}return r||t.H.mkStringLiteral("")}(n,o,r);break;case"lists_create_with":s=function(e,n,o){let r=n.inputList.map((t=>t.connection&&t.connection.targetBlock()?P(e,t.connection.targetBlock(),o):void 0)).filter((e=>!!e));return t.H.mkArrayLiteral(r,!n.getInputsInline())}(n,o,r);break;case"lists_index_get":s=function(e,n,o){const r=P(e,v(n,"LIST"),o),i=P(e,v(n,"INDEX"),o);return t.mkGroup([r,t.mkText("["),i,t.mkText("]")])}(n,o,r);break;case"lists_index_set":s=function(e,n,o){const r=v(n,"LIST"),i=P(e,r,o),s=P(e,v(n,"INDEX"),o),a=P(e,v(n,"VALUE"),o),l=t.mkGroup([i,t.mkText("["),s,t.mkText("] = "),a]);return"lists_create_with"===r.type?X(l):l}(n,o,r);break;case"math_js_op":case"math_js_round":s=function(e,n,o){const r=n.getFieldValue("OP"),i=[P(e,v(n,"ARG0"),o)];return n.getInput("ARG1")&&i.push(P(e,v(n,"ARG1"),o)),t.H.mathCall(r,i)}(n,o,r);break;case pxtc.TS_OUTPUT_TYPE:s=function(e,n,o){return t.mkText(n.getFieldValue("EXPRESSION").trim())}(0,o);break;case"argument_reporter_boolean":case"argument_reporter_number":case"argument_reporter_string":case"argument_reporter_array":case"argument_reporter_custom":s=function(e,n,o){const r=M(n.getFieldValue("VALUE"),e);return t.mkText(r)}(n,o);break;case"function_call_output":s=N(n,o,r,!1);break;default:let a=n.stdCallTable[o.type];a?s=a.imageLiteral?j(n,o,a.imageLiteral,a.imageLiteralColumns,a.imageLiteralRows,a.namespace,a.f,ie(a,re(o)).map((e=>V(n,o,e,r)))):G(n,o,a,r):(e.reportError("blocks","unable to compile expression",{details:o.type}),s=O(_(n,o)))}else{if("Array"===l(_(n,o)).type){let e="lists_index_get"===o.parentBlock_.type;if(!e){const t=n.stdCallTable[o.parentBlock_.type];e=t&&t.isExpression}const r=t.mkText("[0]");s=e?r:X(r)}else s=O(_(n,o))}return s.id=o.id,s}function L(e,t,n){return pe(n,e.idToScope[t.id])}function M(e,t,n=!1){if(!e)return"_";if(n){if(t.renames.oldToNewFunctions[e])return t.renames.oldToNewFunctions[e]}else if(t.renames.oldToNew[e])return t.renames.oldToNew[e];let o=ts.pxtc.escapeIdentifier(e);if(t.renames.takenNames[o]){let e=2;for(;t.renames.takenNames[o+e];)e++;o+=e}return n?(t.renames.oldToNewFunctions[e]=o,t.renames.takenNames[o]=!0):t.renames.oldToNew[e]=o,o}function F(e,n,o){let r=v(n,"VALUE"),i=L(e,n,n.getField("VAR").getText());let s=e.idToScope[n.id].declaredVars[i.name]===i&&!i.firstReference&&!i.alreadyDeclared;s&&de(n,(t=>{if("variables_get"===t.type){L(e,t,t.getField("VAR").getText())===i&&(s=!1)}}),!0);let l=P(e,r,o),c=i.escapedName+" = ";if(i.isAssigned=!0,s){i.alreadyDeclared=a.Assigned;const t=x(i.type);if(c=`let ${i.escapedName} = `,t){const n=x(_(e,r));t.type!==n.type&&(c=`let ${i.escapedName}: ${t.type} = `)}}else i.firstReference||(i.firstReference=n);return t.mkStmt(t.mkText(c),l)}function U(e,n,o){let r=v(n,"VALUE"),i=L(e,n,n.getField("VAR").getText()),s=P(e,r,o),a=t.mkText(i.escapedName);return t.mkStmt(t.mkInfix(a,"+=",s))}function H(n,o,r){const i=n.stdCallTable[o.type];return i.imageLiteral?t.mkStmt(j(n,o,i.imageLiteral,i.imageLiteralColumns,i.imageLiteralRows,i.namespace,i.f,ie(i,re(o)).map((e=>V(n,o,e,r))))):i.hasHandler?function(n,o,r,i,s,a){const l=i.map((e=>V(n,o,e,a))),c=v(o,"HANDLER"),u=$(n,c);e.appTarget.compile&&e.appTarget.compile.emptyEventHandlerComments&&0===u.children.length&&u.children.unshift(t.mkStmt(t.mkText(`// ${pxtc.HANDLER_COMMENT}`)));let p;if(K(o)&&o.mutation.getMutationType()===t.MutatorTypes.ObjectDestructuringMutator)p=o.mutation.compileMutation(n,a);else if(r.comp.handlerArgs.length){let e=function(e,t,n){return se(e,t).map((t=>L(n,e,t[0]).escapedName))}(o,r,n);p=t.mkText(`function (${e.join(", ")})`)}return W(n,s,r.f,l,u,p,r.isExtensionMethod)}(n,o,i,function(e,t){return ie(e,re(t)).filter((e=>!!e.definitionName))}(i,o),i.namespace,r):t.mkStmt(G(n,o,i,r))}function V(n,o,r,i,s=!1){let a=o.getFieldValue(r.definitionName);if(null!=a){const i=o.getField(r.definitionName);if(i instanceof pxtblockly.FieldTextInput)return t.H.mkStringLiteral(a);if(i instanceof pxtblockly.FieldTilemap&&!i.isGreyBlock){const o=e.react.getTilemapProject(),r=i.getValue();if(r.startsWith("tilemap`"))return t.mkText(r);if(n.options.emitTilemapLiterals)try{const n=e.sprite.decodeTilemap(r,"typescript",o);if(n){const[e]=o.createNewTilemapFromData(n);return t.mkText(`tilemap\`${e}\``)}}catch(n){}}const s=n.blocksInfo.apis.byQName[r.type];if(s&&s.attributes.emitAsConstant)for(const e of Object.keys(n.blocksInfo.apis.byQName)){const o=n.blocksInfo.apis.byQName[e];if(o&&o.attributes&&o.attributes.enumIdentity===a)return t.mkText(e)}let l=t.mkText(a);return l.canIndentInside="string"==typeof a&&a.indexOf("\n")>=0,l}{k(n,o,r.definitionName);const e=v(o,r.definitionName);return s&&"lists_create_with"===e.type?X(P(n,e,i)):r.shadowOptions&&r.shadowOptions.toString&&_(n,e)!==g?t.H.mkSimpleCall("+",[t.H.mkStringLiteral(""),t.H.mkParenthesizedExpression(P(n,e,i))]):P(n,e,i)}}function G(e,n,o,r){let i;if(K(n)&&n.mutation.getMutationType()===t.MutatorTypes.RestParameterMutator)i=n.mutation.compileMutation(e,r).children;else{if("ENUM_GET"===o.attrs.shim){const e=o.attrs.enumName,r=n.getFieldValue("MEMBER").replace(/^\d+/,"");return t.H.mkPropertyAccess(r,t.mkText(e))}if("KIND_GET"===o.attrs.shim){const r=e.kinds.filter((e=>e.blockId===o.attrs.blockId))[0];return t.H.mkPropertyAccess(n.getFieldValue("MEMBER"),t.mkText(r.name))}i=ie(o,re(n)).map(((t,i)=>V(e,n,t,r,o.isExtensionMethod&&0===i&&!o.isExpression)))}let s=o.namespace,a=o.f;if(o.attrs.blockAliasFor){const t=e.blocksInfo.apis.byQName[o.attrs.blockAliasFor];t&&(a=t.name,s=t.namespace)}const l=!n.getInputsInline();if(o.isIdentity)return i[0];if(o.property)return t.H.mkPropertyAccess(a,i[0]);if("@get@"==a)return t.H.mkPropertyAccess(i[1].op.replace(/.*\./,""),i[0]);if("@set@"==a)return t.H.mkAssign(t.H.mkPropertyAccess(i[1].op.replace(/.*\./,"").replace(/@set/,""),i[0]),i[2]);if("@change@"==a)return t.H.mkSimpleCall("+=",[t.H.mkPropertyAccess(i[1].op.replace(/.*\./,"").replace(/@set/,""),i[0]),i[2]]);if(o.isExtensionMethod){if(o.attrs.defaultInstance){let s;K(n)&&n.mutation.getMutationType()===t.MutatorTypes.DefaultInstanceMutator&&(s=n.mutation.compileMutation(e,r)),s?i.unshift(s):i.unshift(t.mkText(o.attrs.defaultInstance))}return t.H.extensionCall(a,i,l)}return s?t.H.namespaceCall(s,a,i,l):t.H.stdCall(a,i,l)}function W(e,n,o,r,i,s,a=!1){let l;return i.noFinalNewline=!0,l=s?t.mkGroup([s,i]):t.mkGroup([t.mkText("function ()"),i]),a?t.mkStmt(t.H.extensionCall(o,r.concat([l]),!1)):n?t.mkStmt(t.H.namespaceCall(n,o,r.concat([l]),!1)):t.mkStmt(t.H.mkCall(o,r.concat([l]),!1))}function K(e){return!!e.mutation}function j(e,n,o,r,i,s,a,l){l=void 0===l?[]:l;let c="\n";i=i||5,r=(r||5)*o;let u=n.getFieldValue("LEDS");u=u.replace(/[ `\n]+/g,"");for(let e=0;e<i;++e){for(let t=0;t<r;++t)t>0&&(c+=" "),c+="#"===u[e*r+t]?"#":".";c+="\n"}let p=t.H.mkStringLiteral(c);return p.canIndentInside=!0,t.H.namespaceCall(s,a,[p].concat(l),!1)}function z(n,o){let i;const s=[];switch(n.stats[o.type]=(n.stats[o.type]||0)+1,ne(o,s),o.type){case"controls_if":i=function(e,n,o){let i=[];for(let s=0;s<=n.elseifCount_;++s){let a=P(e,v(n,"IF"+s),o),l=$(e,v(n,"DO"+s)),c=t.mkText("if (");s>0&&(c=t.mkText("else if ("),c.glueToBlock=t.GlueMode.WithSpace),r(i,[c,a,t.mkText(")"),l])}if(n.elseCount_){let o=t.mkText("else");o.glueToBlock=t.GlueMode.WithSpace,r(i,[o,$(e,v(n,"ELSE"))])}return i}(n,o,s);break;case"pxt_controls_for":case"controls_for":case"controls_simple_for":i=function(e,n,o){let r=v(n,"TO"),i=v(n,"DO"),s=v(n,"BY"),a=v(n,"FROM"),l=!s||s.type.match(/^math_number/)&&1==B(s),c=L(e,n,b(n).getField("VAR").getText());return[t.mkText("for (let "+c.escapedName+" = "),a?P(e,a,o):t.mkText("0"),t.mkText("; "),t.mkInfix(t.mkText(c.escapedName),"<=",P(e,r,o)),t.mkText("; "),l?t.mkText(c.escapedName+"++"):t.mkInfix(t.mkText(c.escapedName),"+=",P(e,s,o)),t.mkText(")"),$(e,i)]}(n,o,s);break;case"pxt_controls_for_of":case"controls_for_of":i=function(e,n,o){let r=v(n,"LIST"),i=v(n,"DO"),s=L(e,n,b(n).getField("VAR").getText());return[t.mkText("for (let "+s.escapedName+" of "),P(e,r,o),t.mkText(")"),$(e,i)]}(n,o,s);break;case"variables_set":i=[F(n,o,s)];break;case"variables_change":i=[U(n,o,s)];break;case"controls_repeat_ext":i=function(e,n,o){let r=P(e,v(n,"TIMES"),o),i=$(e,v(n,"DO")),s="index";for(let t=2;L(e,n,s);t++)s="index"+t;return[t.mkText("for (let "+s+" = 0; "),t.mkInfix(t.mkText(s),"<",r),t.mkText("; "+s+"++)"),i]}(n,o,s);break;case"device_while":i=function(e,n,o){let r=P(e,v(n,"COND"),o),i=$(e,v(n,"DO"));return[t.mkText("while ("),r,t.mkText(")"),i]}(n,o,s);break;case"procedures_defnoreturn":i=function(e,n,o){const r=M(n.getFieldValue("NAME"),e,!0),i=v(n,"STACK");return[t.mkText("function "+r+"() "),$(e,i)]}(n,o);break;case"function_definition":i=function(e,n,o){const r=M(n.getField("function_name").getText(),e,!0),i=v(n,"STACK"),s=n.getArguments().map((t=>"Array"==t.type?`${M(t.name,e)}: any[]`:`${M(t.name,e)}: ${t.type}`)),a=me(n,!1);return[t.mkText(`function ${r} (${s.join(", ")})${a?": any":""}`),$(e,i)]}(n,o);break;case"procedures_callnoreturn":i=[D(n,o)];break;case"function_call":i=[N(n,o,s,!0)];break;case pxtc.TS_RETURN_STATEMENT_TYPE:i=[w(n,o,s)];break;case ts.pxtc.ON_START_TYPE:i=function(n,o){const r=$(n,v(o,"HANDLER"));return e.appTarget.compile&&e.appTarget.compile.onStartText&&r&&r.children&&r.children.unshift(t.mkStmt(t.mkText(`// ${pxtc.ON_START_COMMENT}\n`))),r}(n,o).children;break;case pxtc.TS_STATEMENT_TYPE:i=function(e,n){return n.getLines().map((e=>t.mkText(e+"\n")))}(0,o);break;case pxtc.PAUSE_UNTIL_TYPE:i=function(n,o,r){const i=e.appTarget.runtime&&e.appTarget.runtime.pauseUntilBlock;e.Util.assert(!!i,"target has block enabled");const s=i.namespace,a=i.callName||"pauseUntil",l=V(n,o,{definitionName:"PREDICATE",actualName:"PREDICATE"},r),c=[t.mkGroup([t.mkText("() => "),l])];return s?[t.mkStmt(t.H.namespaceCall(s,a,c,!1))]:[t.mkStmt(t.H.mkCall(a,c,!1,!1))]}(n,o,s);break;case pxtc.TS_DEBUGGER_TYPE:i=function(e,n){if("1"==n.getFieldValue("ON_OFF"))return[t.mkText("debugger;\n")];return[]}(0,o);break;case pxtc.TS_BREAK_TYPE:i=[t.mkText("break;\n")];break;case pxtc.TS_CONTINUE_TYPE:i=[t.mkText("continue;\n")];break;default:i=n.stdCallTable[o.type]?[H(n,o,s)]:[t.mkStmt(P(n,o,s))]}let a=i[i.length-1];return a&&!a.id&&(a.id=o.id),s.length&&function(e,n){const o=[];for(const n of e)for(const e of n.split("\n"))o.push(t.mkText(`// ${e}`)),o.push(t.mkNewLine());for(const e of o.reverse())n.unshift(e)}(s,i),i.forEach((n=>{!(n.type===t.NT.Block||n.type===t.NT.Prefix&&e.Util.startsWith(n.op,"//"))||o.type==pxtc.ON_START_TYPE&&n.id||(n.id=o.id)})),i}function $(e,n){let o=[],i=n;for(;n;)n.isEnabled()&&r(o,z(e,n)),n=n.getNextBlock();return i&&e.blockDeclarations[i.id]&&e.blockDeclarations[i.id].filter((e=>!e.alreadyDeclared)).forEach((t=>{o.unshift(oe(t,e.blocksInfo)),t.alreadyDeclared=a.Implicit})),t.mkBlock(o)}function X(e){const n=t.mkStmt(t.mkText(";"));return n.glueToBlock=t.GlueMode.NoSpace,t.mkGroup([n,e])}function Y(t,n,o={}){let r=function(e,t){return{workspace:e,options:t,stdCallTable:{},userFunctionReturnValues:{},diagnostics:[],errors:[],renames:{oldToNew:{},takenNames:{},oldToNewFunctions:{}},stats:{},enums:[],kinds:[],idToScope:{},blockDeclarations:{},allVariables:[],blocksInfo:null}}(t,o);return r.blocksInfo=n,n&&(Object.keys(n.apis.byQName).forEach((e=>{const t=n.apis.byQName[e];!t.pkg||6!==t.kind&&3!==t.kind&&5!==t.kind&&4!==t.kind||(r.renames.takenNames[t.qName]=!0)})),n.enumsByName&&Object.keys(n.enumsByName).forEach((e=>r.enums.push(n.enumsByName[e]))),n.kindsByName&&Object.keys(n.kindsByName).forEach((e=>r.kinds.push(n.kindsByName[e]))),n.blocks.forEach((t=>{if(r.stdCallTable[t.attributes.blockId])return void e.reportError("blocks","function already defined",{details:t.attributes.blockId,qualifiedName:t.qName,packageName:t.pkg});r.renames.takenNames[t.namespace]=!0;const n=e.blocks.compileInfo(t),o=!!n.thisParameter;r.stdCallTable[t.attributes.blockId]={namespace:t.namespace,f:t.name,comp:n,attrs:t.attributes,isExtensionMethod:o,isExpression:t.retType&&"void"!==t.retType,imageLiteral:t.attributes.imageLiteral,imageLiteralColumns:t.attributes.imageLiteralColumns,imageLiteralRows:t.attributes.imageLiteralRows,hasHandler:e.blocks.hasHandler(t),property:!t.parameters,isIdentity:"TD_ID"==t.attributes.shim}})),t.getTopBlocks(!1).filter(fe).forEach((e=>{M("procedures_defnoreturn"===e.type?e.getFieldValue("NAME"):e.getField("function_name").getText(),r,!0)}))),r}function J(e,t){if(e.type===ts.pxtc.ON_START_TYPE)return 0;const n=t.stdCallTable[e.type],o=Z(t,e),r=1+ts.pxtc.Util.codalHash16(o);return n&&n.attrs.afterOnStart?r:-r}function q(n,o,i){try{let s=o.getAllBlocks(!1);e.react.getTilemapProject&&e.react.getTilemapProject().removeInactiveBlockAssets(s.map((e=>e.id)));let l=o.getTopBlocks(!0);l=l.sort(((e,t)=>J(e,n)-J(t,n))),function(e,t,n){t.forEach((e=>e.setEnabled(!0)));const o={};function r(e,t){o[e]?ee(t,!1):(ee(t,!0),o[e]=t)}n.forEach((t=>{const n=e.stdCallTable[t.type];if(t.type==ts.pxtc.ON_START_TYPE)r(ts.pxtc.ON_START_TYPE,t);else{if(fe(t)||n&&n.attrs.blockAllowMultiple&&!n.attrs.handlerStatement)return;if(n&&n.hasHandler&&!n.attrs.handlerStatement){r(n.attrs.blockHandlerKey||Z(e,t),t)}else{let e=t;for(;e;)ee(t,!1),e=e.getNextBlock()}}}))}(n,s,l),s=s.filter((e=>e.isEnabled())),l=l.filter((e=>e.isEnabled())),function(e,t){let n,o=1;e.forEach((e=>{if(e.type===ts.pxtc.ON_START_TYPE){const o=e.getInputTargetBlock("HANDLER");o&&(n={firstStatement:o,declaredVars:{},referencedVars:[],children:[],assignedVars:[]},r(o,n,t))}})),n||(n={firstStatement:null,declaredVars:{},referencedVars:[],children:[],assignedVars:[]});return e.forEach((e=>{e.type!==ts.pxtc.ON_START_TYPE&&r(e,n,t)})),Object.keys(n.declaredVars).forEach((e=>{const t=n.declaredVars[e];delete n.declaredVars[e];(ue(n,t.id)||n).declaredVars[e]=t})),ge(n,t),ce(n,t),n;function r(e,t,n){if(n.idToScope[e.id]=t,"variables_get"===e.type){const n=i(e.getField("VAR").getText(),t);t.referencedVars.push(n.id)}else if("variables_set"===e.type||"variables_change"===e.type){const n=i(e.getField("VAR").getText(),t);t.assignedVars.push(n.id),t.referencedVars.push(n.id)}else if(e.type===pxtc.TS_STATEMENT_TYPE){const n=e.declaredVariables;if(n){n.split(",").forEach((e=>{i(e,t).alreadyDeclared=a.Argument}))}}if(function(e){return e.inputList.some((e=>e.type===Blockly.NEXT_STATEMENT))}(e)){const i=function(e,t){switch(e.type){case"pxt_controls_for":case"controls_simple_for":return[[b(e).getField("VAR").getText(),p]];case"pxt_controls_for_of":case"controls_for_of":return[[b(e).getField("VAR").getText(),u(null)]]}if(K(e)){const t=e.mutation.getDeclaredVariables();if(t)return Object.keys(t).map((e=>[e,u(t[e])]))}let n=t.stdCallTable[e.type];if(n&&n.comp.handlerArgs.length)return se(e,n);return[]}(e,n).map((e=>({name:e[0],type:e[1],id:o++})));let s=t;i.length&&(s={parent:t,firstStatement:e,declaredVars:{},referencedVars:[],assignedVars:[],children:[]},i.forEach((e=>{e.alreadyDeclared=a.Assigned,s.declaredVars[e.name]=e})),n.idToScope[e.id]=s),t!==s&&t.children.push(s),de(e,(e=>{r(e,s,n)})),function(e,t){e.inputList.filter((e=>e.type===Blockly.NEXT_STATEMENT)).forEach((e=>{e.connection&&e.connection.targetBlock()&&t(e.connection.targetBlock())}))}(e,(e=>{const t={parent:s,firstStatement:e,declaredVars:{},referencedVars:[],assignedVars:[],children:[]};s.children.push(t),r(e,t,n)}))}else de(e,(e=>{r(e,t,n)}));e.nextConnection&&e.nextConnection.targetBlock()&&r(e.nextConnection.targetBlock(),t,n)}function i(e,t){return t.declaredVars[e]?t.declaredVars[e]:t.parent?i(e,t.parent):(t.declaredVars[e]={name:e,type:u(null),id:o++},t.declaredVars[e])}}(l,n),S(s,n);const c=[],d=function(e,t){if(!e.length||e.some((e=>!e.rendered)))return{orphans:t,idToComments:{}};const n=e.map((e=>{const t=e.getBoundingRectangle(),n=e.getHeightWidth();return{id:e.id,x:t.left,y:t.top,width:n.width,height:n.height}})),o={orphans:[],idToComments:{}},r=20;for(const e of t){const t=e.getBoundingRectangle(),i=e.getHeightWidth(),s=t.left,a=t.top;let l;for(const e of n)(he(s,a,i.width,i.height,e)||!l&&he(s-r,a-r,i.width+2*r,i.height+2*r,e))&&(l=e);l?(o.idToComments[l.id]||(o.idToComments[l.id]=[]),o.idToComments[l.id].push(e)):o.orphans.push(e)}return o}(l,o.getTopComments(!0));d.orphans.forEach((e=>r(c,R(e).children))),l.forEach((e=>{if(d.idToComments[e.id]&&d.idToComments[e.id].forEach((e=>{r(c,R(e).children)})),e.type==ts.pxtc.ON_START_TYPE)r(c,z(n,e));else{const o=t.mkBlock(z(n,e));o.type==t.NT.Block?r(c,o.children):c.push(o)}}));const g=[];n.enums.forEach((e=>{const n=o.getVariablesOfType(e.name);if(n&&n.length){const o=n.map((e=>{const t=/^(\d+)([^0-9].*)$/.exec(e.name);return t?[t[2],parseInt(t[1])]:[e.name,-1]}));o.sort(((e,t)=>e[1]-t[1]));const r=[];let i=-1;o.forEach((([n,o],s)=>{let a;if(e.isBitMask){const e=Math.log2(o);e>=0&&Math.floor(e)===e&&(a=t.H.mkAssign(t.mkText(n),t.H.mkSimpleCall("<<",[t.H.mkNumberLiteral(1),t.H.mkNumberLiteral(e)])))}else if(e.isHash){const e=ts.pxtc.Util.codalHash16(n.toLowerCase());a=t.H.mkAssign(t.mkText(n),t.H.mkNumberLiteral(e))}a||(a=o===i+1?t.mkText(n):t.H.mkAssign(t.mkText(n),t.H.mkNumberLiteral(o))),r.push(a),i=o}));const s=t.mkCommaSep(r,!0);s.glueToBlock=t.GlueMode.NoSpace,g.push(t.mkGroup([t.mkText(`enum ${e.name}`),t.mkBlock([s])]))}})),n.kinds.forEach((e=>{const n=o.getVariablesOfType("KIND_"+e.name);if(n&&n.length){const o=n.map((e=>e.name)).filter((t=>-1===e.initialMembers.indexOf(t)));o.length&&g.push(t.mkGroup([t.mkText(`namespace ${e.name}`),t.mkBlock(o.map((n=>t.mkStmt(t.mkText(`export const ${n} = ${e.name}.${e.createFunctionName}()`)))))]))}}));const h=n.allVariables.filter((e=>!e.alreadyDeclared)).map((e=>oe(e,i)));return n.allVariables.filter((e=>e.alreadyDeclared===a.Implicit&&!e.isAssigned)).forEach((e=>{const t=x(e.type);"string"===t.type||"number"===t.type||"boolean"===t.type||y(t.type)||n.diagnostics.push({blockId:e.firstReference&&e.firstReference.id,message:lf("Variable '{0}' is never assigned",e.name)})})),[g.concat(h.concat(c)),n.diagnostics]}catch(e){let t=e.block;if(!t)throw e;t.setWarningText(e+""),n.errors.push(t)}finally{T()}return[null,null]}function Z(e,t){if(t.type==ts.pxtc.ON_START_TYPE)return JSON.stringify({name:ts.pxtc.ON_START_TYPE});if(t.type==ts.pxtc.FUNCTION_DEFINITION_TYPE)return JSON.stringify({type:"function",name:t.getFieldValue("function_name")});return JSON.stringify(Q(t)).replace(/"id"\s*:\s*"[^"]+"/g,"")}function Q(e){const t=[],n=[];for(const o of e.inputList){for(const e of o.fieldRow)e.name&&t.push(e.getText());o.type===Blockly.INPUT_VALUE&&(o.connection.targetBlock()?n.push(Q(o.connection.targetBlock())):n.push(null))}return{type:e.type,fields:t,inputs:n}}function ee(e,t){e.setEnabled(t);const n=e.getDescendants(!1);for(const e of n)e.setEnabled(t)}function te(e,o,r){let i=t.flattenNode(o);return n("format",{format:{input:i.output,pos:1}}).then((()=>({source:i.output,sourceMap:i.sourceMap,stats:e.stats,diagnostics:r||[]})))}function ne(e,t){var n;const o=null===(n=e.getCommentText)||void 0===n?void 0:n.call(e);o&&t.push(o)}function oe(e,n){const o=x(e.type);let r;r="Array"===o.type?t.mkText("[]"):O(o);let i="";if("null"==r.op||"[]"==r.op){let e=o.type;"Array"!==e&&"null[]"!==e||(e="number[]");let s=n.apis.byQName[e];s&&s.attributes.autoCreate?r=t.mkText(s.attributes.autoCreate+"()"):i=": "+e}return t.mkStmt(t.mkText("let "+e.escapedName+i+" = "),r)}function re(e){if(e.mutationToDom){const t=e.mutationToDom();if(t.hasAttribute("_expanded")){const e=parseInt(t.getAttribute("_expanded"));return isNaN(e)?0:Math.max(e,0)}}return 0}function ie({comp:e},t){const n=[];return e.thisParameter&&n.push(e.thisParameter),e.parameters.forEach((e=>{e.isOptional&&t>0?(n.push(e),--t):e.isOptional||n.push(e)})),n}function se(e,t){let n=[];if(t.attrs.draggableParameters)for(let o=0;o<t.comp.handlerArgs.length;o++){const r=t.comp.handlerArgs[o];let i;const s=v(e,"HANDLER_DRAG_PARAM_"+r.name);if(i="reporter"===t.attrs.draggableParameters?s&&s.getFieldValue("VALUE"):s&&s.getField("VAR").getText(),null===i)break;n.push([i,u(r.type)])}else for(let o=0;o<t.comp.handlerArgs.length;o++){const r=t.comp.handlerArgs[o],i=e.getField("HANDLER_"+r.name),s=i&&i.getText();if(null===s)break;n.push([s,u(r.type)])}return n}function ae(e,t){if(-1!==e.referencedVars.indexOf(t))return!0;for(const n of e.children)if(ae(n,t))return!0;return!1}function le(e,t){if(-1!==e.assignedVars.indexOf(t))return!0;for(const n of e.children)if(le(n,t))return!0;return!1}function ce(e,t){for(const t of Object.keys(e.declaredVars)){const o=e.declaredVars[t];o.escapedName||(o.escapedName=n(t))}function n(n){if(!n)return"_";let r=ts.pxtc.escapeIdentifier(n);if(t.renames.takenNames[r]||o(r,e,n)){let i=2;for(;t.renames.takenNames[r+i]||o(r+i,e,n);)i++;r+=i}return r}function o(e,t,n){if(t){for(const o of Object.keys(t.declaredVars)){const r=t.declaredVars[o];if((n!==r.name||r.name!==r.escapedName)&&r.escapedName===e)return!0}return o(e,t.parent,n)}return!1}e.children.forEach((e=>ce(e,t)))}function ue(e,t){let n;if(-1!==e.referencedVars.indexOf(t))return e;for(const o of e.children)if(ae(o,t)){if(le(o,t))return e;if(n)return e;n=o}return n?ue(n,t):void 0}function pe(e,t){return t&&t.declaredVars[e]?t.declaredVars[e]:t&&t.parent?pe(e,t.parent):null}function de(e,t,n=!1){e.inputList.filter((e=>e.type===Blockly.INPUT_VALUE)).forEach((e=>{e.connection&&e.connection.targetBlock()&&(t(e.connection.targetBlock()),n&&de(e.connection.targetBlock(),t,n))}))}function ge(e,t){const n=Object.keys(e.declaredVars);if(n.length){const o=n.map((t=>e.declaredVars[t]));e.firstStatement&&(t.blockDeclarations[e.firstStatement.id]=o.concat(t.blockDeclarations[e.firstStatement.id]||[])),o.forEach((e=>t.allVariables.push(e)))}e.children.forEach((e=>ge(e,t)))}function he(e,t,n,o,r){const i=a(e,r.x,r.x+r.width)||a(r.x,e,e+n),s=a(t,r.y,r.y+r.height)||a(r.y,t,t+o);return i&&s;function a(e,t,n){return e>=t&&e<=n}}function fe(e){return"procedures_defnoreturn"===e.type||"function_definition"===e.type}function _e(e){return e.getField("function_name").getText()}function me(e,t){const n=_e(e),o={};return function e(r){let i;i=t?r.getDescendants(!1).filter((e=>"function_return"==e.type)).map((e=>v(e,"RETURN_VALUE"))).filter((e=>e&&"function_call_output"===e.type)):r.getDescendants(!1).filter((e=>"function_call_output"==e.type));for(const t of i){const r=_e(t);if(r===n)return!0;if(!o[r]&&(o[r]=!0,e(Blockly.Functions.getDefinition(r,t.workspace))))return!0}return!1}(e)}t.compileExpression=P,t.escapeVarName=M,t.mkEnv=Y,t.compileBlockAsync=function(e,t){const n=e.workspace,o=Y(n,t);S(n&&n.getAllBlocks(!1),o);const r=z(o,e);return T(),te(o,r)},t.callKey=Z,t.findBlockIdByPosition=function(e,t){if(!t)return;let n,o;for(let r=0;r<e.length;++r){let i=e[r];i.startPos<=t.start&&i.endPos>=t.start+t.length&&(!n||o>i.endPos-i.startPos)&&(n=i,o=i.endPos-i.startPos)}return n?n.id:void 0},t.findBlockIdByLine=function(e,t){if(!t)return;let n,o;for(let r=0;r<e.length;++r){let i=e[r];i.startLine<=t.start&&i.endLine>t.start+t.length&&(!n||o>i.endLine-i.startLine)&&(n=i,o=i.endLine-i.startLine)}return n?n.id:void 0},t.compileAsync=function(e,t,n={}){const o=Y(e,t,n),[r,i]=q(o,e,t);return te(o,r,i)}}(e.blocks||(e.blocks={}))}(pxt||(pxt={})),function(e){!function(t){let n={};function o(e,t,o){null==n[e]&&(n[e]={field:t,validator:o})}t.initFieldEditors=function(){o("text",pxtblockly.FieldTextInput),o("note",pxtblockly.FieldNote),o("gridpicker",pxtblockly.FieldGridPicker),o("textdropdown",pxtblockly.FieldTextDropdown),o("numberdropdown",pxtblockly.FieldNumberDropdown),o("imagedropdown",pxtblockly.FieldImageDropdown),o("colorwheel",pxtblockly.FieldColorWheel),o("toggle",pxtblockly.FieldToggle),o("toggleonoff",pxtblockly.FieldToggleOnOff),o("toggleyesno",pxtblockly.FieldToggleYesNo),o("toggleupdown",pxtblockly.FieldToggleUpDown),o("toggledownup",pxtblockly.FieldToggleDownUp),o("togglehighlow",pxtblockly.FieldToggleHighLow),o("togglewinlose",pxtblockly.FieldToggleWinLose),o("colornumber",pxtblockly.FieldColorNumber),o("images",pxtblockly.FieldImages),o("sprite",pxtblockly.FieldSpriteEditor),o("animation",pxtblockly.FieldAnimationEditor),o("tilemap",pxtblockly.FieldTilemap),o("tileset",pxtblockly.FieldTileset),o("speed",pxtblockly.FieldSpeed),o("turnratio",pxtblockly.FieldTurnRatio),o("protractor",pxtblockly.FieldProtractor),o("position",pxtblockly.FieldPosition),o("melody",pxtblockly.FieldCustomMelody)},t.registerFieldEditor=o,t.createFieldEditor=function(t,o,r){if(null==n[t])return console.error(`Field editor ${t} not registered`),null;r||(r={}),e.Util.assert(null==r.lightMode,"lightMode is a reserved parameter for custom fields"),r.lightMode=e.options.light;let i=n[t];return new i.field(o,r,i.validator)}}(e.blocks||(e.blocks={}))}(pxt||(pxt={})),function(e){!function(t){t.needsDecompiledDiff=function(e,t){if(!e||!t)return!1;const n={};if(e.replace(/id="([^"]+)"/g,((e,t)=>(n[t]=!0,""))),!Object.keys(n).length)return!1;let o=0,r=0;return t.replace(/id="([^"]+)"/g,((e,t)=>(o++,n[t]&&r++,""))),o>0&&0==r},t.diffXml=function(t,n,r){return o(e.blocks.loadWorkspaceXml(t,!0),e.blocks.loadWorkspaceXml(n,!0),r)};const n="#d0d0d0";function o(o,s,a){try{return Blockly.Events.disable(),function(o,s,a){e.tickEvent("blocks.diff",{started:1}),a=a||{};const l=r();if(!o)return{ws:void 0,message:lf("All blocks are new."),added:0,deleted:0,modified:1};if(!s)return{ws:void 0,message:lf("The current blocks seem corrupted."),added:0,deleted:0,modified:1};const c=e.Util.toDictionary(o.getTopBlocks(!1),(e=>i(e,!0)));s.getTopBlocks(!1).forEach((e=>{const t=i(e,!0),n=o.getBlockById(e.id)||c[t];if(n){t==i(n,!0)&&(l("fast unmodified top ",e.id),e.dispose(!1),n.dispose(!1))}}));const u=o.getAllBlocks(!1).filter((e=>e.isEnabled())),p=o.getTopBlocks(!1).filter((e=>e.isEnabled())),d=s.getAllBlocks(!1).filter((e=>e.isEnabled()));if(l("blocks",d.map((e=>e.toDevString()))),l(d),0==u.length&&0==d.length)return e.tickEvent("blocks.diff",{moves:1}),{ws:void 0,message:lf("Some blocks were moved or changed."),added:0,deleted:0,modified:1};const g=p.filter((e=>!s.getBlockById(e.id))),h=u.filter((e=>!s.getBlockById(e.id))),f=d.filter((e=>!o.getBlockById(e.id))),_=e.blocks.initRenderingWorkspace(),m=e.blocks.saveWorkspaceXml(s,!0);e.blocks.domToWorkspaceNoEvents(Blockly.Xml.textToDom(m),_),_.getAllBlocks(!1).filter((e=>!e.isEnabled())).forEach((e=>{l("disabled ",e.toDevString()),e.dispose(!1)}));const y=e.Util.toDictionary(_.getAllBlocks(!1),(e=>e.id));l("todo blocks",y),D("start"),a.hideDeletedTopBlocks||(g.forEach((e=>{l(`deleted top ${e.toDevString()}`),A(e);const t=x(e);A(t),t.setEnabled(!1)})),D("deleted top"));f.map((e=>_.getBlockById(e.id))).filter((e=>!!e)).forEach((e=>{l(`added ${e.toDevString()}`),A(e)})),D("added");const k={};if(!a.hideDeletedBlocks){const e=h.filter((e=>!(y[e.id]||C(e)||e.outputConnection&&e.outputConnection.isConnected())));e.forEach((e=>{const t=x(e);k[e.id]=t.id,l(`deleted block ${e.toDevString()}->${t.toDevString()}`)})),e.forEach((e=>E(e)))}let b=0;if(e.Util.values(y).filter((e=>N(e))).forEach((e=>{l(`moved ${e.toDevString()}`),delete y[e.id],S(e),b++})),D("moved"),e.Util.values(y).filter((e=>w(e))).forEach((e=>{l(`changed ${e.toDevString()}`),delete y[e.id],S(e),b++})),D("changed"),_.getTopBlocks(!1).forEach((e=>{I(e)||(l(`unmodified top ${e.toDevString()}`),delete y[e.id],e.dispose(!1))})),D("cleaned"),e.Util.values(y).filter((e=>!!_.getBlockById(e.id))).forEach((e=>{R(e)})),D("unmodified"),!_.getAllBlocks(!1).length)return e.tickEvent("blocks.diff",{missed:1}),{ws:_,message:lf("Some blocks were changed."),deleted:h.length,added:f.length,modified:b};_.resize(),Blockly.svgResize(_);const v=e.blocks.renderWorkspace(a.renderOptions||{emPixels:20,layout:t.BlockLayout.Flow,aspectRatio:.5,useViewWidth:!0}),T={ws:_,svg:v,deleted:h.length,added:f.length,modified:b};return e.tickEvent("blocks.diff",{deleted:T.deleted,added:T.added,modified:T.modified}),T;function E(e){l(`stitching ${e.toDevString()}->${k[e.id]}`);const t=_.getBlockById(k[e.id]);t.setEnabled(!1),S(t),A(t);const n=e.getPreviousBlock();if(n){const o=_.getBlockById(k[n.id])||_.getBlockById(n.id);if(l(`previous ${e.id}->${t.toDevString()}: ${o.toDevString()}`),o)if(o.nextConnection)t.previousConnection.connect(o.nextConnection);else{const e=o.inputList.slice().reverse().find((e=>e.connection&&e.connection.type==Blockly.NEXT_STATEMENT));e&&t.previousConnection.connect(e.connection)}}const o=e.getNextBlock();if(o){const n=_.getBlockById(k[o.id])||_.getBlockById(o.id);n&&(l(`next ${e.id}->${t.toDevString()}: ${n.toDevString()}`),t.nextConnection.connect(n.previousConnection))}}function S(e){e.__pxt_used=!0}function C(e){return!!e.__pxt_used}function x(e){const t=Blockly.Xml.blockToDom(e,!1),n=Blockly.Xml.domToBlock(t,_);return n.nextConnection&&n.nextConnection.targetConnection&&n.nextConnection.disconnect(),n.previousConnection&&n.previousConnection.targetConnection&&n.previousConnection.disconnect(),n}function B(e){e.rendered=!1,e.inputList.forEach((t=>t.fieldRow.forEach((t=>{t.init(),t.borderRect_&&(t.borderRect_.setAttribute("fill",e.getColour()),t.borderRect_.setAttribute("stroke",e.getColourTertiary()))}))))}function A(e){e.getDescendants(!1).forEach((e=>{delete y[e.id],S(e)}))}function I(e){return!!e.getDescendants(!1).find((e=>C(e)))}function D(t){l(`${t}:`,e.Util.values(y).map((e=>e.toDevString())))}function N(e){const t=o.getBlockById(e.id);if(!t)return!1;const n=e.getPreviousBlock();if(n&&!y[n.id])return!1;const r=e.getNextBlock();if(r&&!y[r.id])return!1;const i=t.getPreviousBlock();if(!i&&!n)return!1;if(!!i!=!!n||i.id!=n.id)return!0;const s=t.getNextBlock();return!(!s&&!r)&&(!!s!=!!r||s.id!=r.id)}function w(e){let t=o.getBlockById(e.id);if(!t)return!1;const n=i(t),r=i(e);return n!=r&&(l(`old ${t.toDevString()}`,n),l(`new ${e.toDevString()}`,r),!0)}function R(e){e.setColour(n),B(e),a.statementsOnly&&(e.inputList||[]).map((e=>e.type==Blockly.INPUT_VALUE&&e.connection&&e.connection.targetBlock())).filter((e=>!!e)).forEach((e=>R(e)))}}(o,s,a)}catch(t){return e.reportException(t),{ws:void 0,message:lf("Oops, we could not diff those blocks."),error:t,deleted:0,added:0,modified:0}}finally{Blockly.Events.enable()}}function r(){return e.options.debug||window&&/diffdbg=1/.test(window.location.href)?console.log:(e,...t)=>{}}function i(e,t){const n=Blockly.Xml.blockToDom(e,!0);return s(n),a(n,(e=>{s(e),t||("next"==e.localName||"statement"==e.localName||"shadow"==e.localName)&&e.remove()})),Blockly.Xml.domToText(n)}function s(e){e.removeAttribute("id"),e.removeAttribute("x"),e.removeAttribute("y"),e.removeAttribute("deletable"),e.removeAttribute("editable"),e.removeAttribute("movable")}function a(t,n){if(t){n(t);for(const o of e.Util.toArray(t.children))a(o,n)}}t.mergeXml=function(e,t,n){return e==t?n:n==t?e:void 0},t.decompiledDiffAsync=function(t,n,i,s,a={}){const l=r(),c=n.outfiles[e.MAIN_BLOCKS];let u=s.outfiles[e.MAIN_BLOCKS];l(c),l(u);const p=e.diff.compute(t,i,{ignoreWhitespace:!0,full:!0});l(p);const d={};let g=0,h=0;p.forEach(((t,o)=>{const r=t[0],i=t.substr(2);let a=i.length;switch(r){case"-":g+=a+1;break;case"+":h+=a+1;break;default:const o=/^\s+/.exec(i);if(o){const e=o[0].length;g+=e,h+=e,a-=e}const r=e.blocks.findBlockIdByPosition(s.blockSourceMap,{start:h,length:a});if(r&&!d[r]){const o=e.blocks.findBlockIdByPosition(n.blockSourceMap,{start:g,length:a});o&&(l(t),l(`id ${g}:${i.length}>${o} ==> ${h}:${i.length}>${r}`),d[r]=o,u=u.replace(r,o))}g+=a+1,h+=a+1}}));const f=e.blocks.loadWorkspaceXml(c,!0),_=e.blocks.loadWorkspaceXml(u,!0);return a.statementsOnly=!0,o(f,_,a)}}(e.blocks||(e.blocks={}))}(pxt||(pxt={})),function(e){!function(t){function n(e,t){const n=[];for(let o=0;o<e.childNodes.length;o++){const r=e.childNodes.item(o);r.tagName===t&&n.push(r)}return n}function o(e,t){return r(e,"block","type",t).concat(r(e,"shadow","type",t))}function r(t,n,o,r){return e.Util.toArray(t.getElementsByTagName(n)).filter((e=>e.getAttribute(o)===r))}function i(e,t,n,o){const i=r(e,t,n,o);return i.length?i[0]:void 0}function s(e,n,o){var r;let s=o.getAttribute("type"),a=Blockly.Blocks[s],l=t.blockSymbol(s);if(!l||!a)return;let c=t.compileInfo(l);null===(r=l.parameters)||void 0===r||r.forEach(((t,r)=>{let s=e.apis.byQName[t.type];if(s&&6==s.kind){let e=i(o,"field","name",c.actualNameToParam[t.name].definitionName);if(e){let t=n[s.name+"."+e.textContent];t&&(e.textContent=t)}}}))}t.domToWorkspaceNoEvents=function(t,n){e.tickEvent("blocks.domtow");let o=[];try{Blockly.Events.disable(),o=Blockly.Xml.domToWorkspace(t,n),function(e){e.getAllBlocks(!1).filter((e=>!!e.getCommentText())).forEach((t=>{const n=t.getCommentText();if(/@highlight/.test(n)){const o=n.replace(/@highlight/g,"").trim();t.setCommentText(o||null),e.highlightBlock(t.id)}}))}(n)}catch(t){e.reportException(t)}finally{Blockly.Events.enable()}return o},t.clearWithoutEvents=function(t){if(e.tickEvent("blocks.clear"),t)try{Blockly.Events.disable(),t.clear(),t.clearUndo()}finally{Blockly.Events.enable()}},t.saveWorkspaceXml=function(e,t){const n=Blockly.Xml.workspaceToDom(e,!t);return Blockly.Xml.domToText(n)},t.saveBlocksXml=function(e,t){return e.getTopBlocks(!1).map((e=>Blockly.Xml.domToText(Blockly.Xml.blockToDom(e,!t))))},t.getDirectChildren=n,t.getBlocksWithType=o,t.getChildrenWithAttr=r,t.getFirstChildWithAttr=i,t.loadBlocksXml=function(e,t){let n=Blockly.Xml.textToDom(t),o=Blockly.Xml.domToBlock(n,e);if(e.getMetrics){let t=e.getMetrics(),n=o.getHeightWidth();o.moveBy(t.viewLeft+t.viewWidth/2-n.width/2,t.viewTop+t.viewHeight/2-n.height/2)}},t.loadWorkspaceXml=function(t,n=!1){const o=new Blockly.Workspace;try{const n=Blockly.Xml.textToDom(t);return e.blocks.domToWorkspaceNoEvents(n,o),o}catch(t){return n||e.reportException(t),null}},t.importXml=function(i,a,l,c=!1){try{e.blocks.initializeAndInject(l);const c=(new DOMParser).parseFromString(a,"application/xml"),p=e.patching.computePatches(i);p&&(p.filter((e=>"blockId"==e.type)).forEach((t=>Object.keys(t.map).forEach((n=>{o(c,n).forEach((o=>{o.setAttribute("type",t.map[n]),e.debug(`patched block ${n} -> ${t.map[n]}`)}))})))),p.filter((e=>"blockValue"==e.type)).forEach((t=>Object.keys(t.map).forEach((r=>{const i=r.split("."),s=i[0];i[1];o(c,s).reduce(((e,t)=>e.concat(n(t,"value"))),[]).forEach((n=>{n.setAttribute("name",t.map[r]),e.debug(`patched block value ${r} -> ${t.map[r]}`)}))})))),p.filter((e=>"userenum"==e.type)).forEach((t=>Object.keys(t.map).forEach((n=>{r(c,"variable","type",n).forEach((o=>{o.setAttribute("type",t.map[n]),e.debug(`patched enum variable type ${n} -> ${t.map[n]}`)}))})))));const d=n(c.children.item(0),"shadow");for(const e of d){const t=c.createElement("block");e.getAttributeNames().forEach((n=>t.setAttribute(n,e.getAttribute(n))));for(let n=0;n<e.childNodes.length;n++)t.appendChild(e.childNodes.item(n));e.replaceWith(t)}const g={};Object.keys(l.apis.byQName).forEach((e=>{let t=l.apis.byQName[e];7==t.kind&&(g[t.namespace+"."+(t.attributes.blockImportId||t.attributes.block||t.attributes.blockId||t.name)]=t.namespace+"."+t.name)}));const h=c.getElementsByTagName("block");for(let e=0;e<h.length;++e)s(l,g,h[e]);return function(n,r){const i=o(n,ts.pxtc.ON_START_TYPE);let s=i.length?i[0]:void 0;if(s)return void s.removeAttribute("deletable");let a=[];const l=r.blocksById;let c,u=n.firstElementChild;for(;u;){const o=u.nextElementSibling,r=u.getAttribute("type");if(!u.getAttribute("disabled")&&!u.getElementsByTagName("statement").length&&(e.blocks.buildinBlockStatements[r]||l[r]&&"void"==l[r].retType&&!t.hasArrowFunction(l[r])))if(c){const e=n.ownerDocument.createElement("next");e.appendChild(u),c.appendChild(e),u.removeAttribute("x"),u.removeAttribute("y"),c=u}else c=n.ownerDocument.createElement("statement"),c.setAttribute("name","HANDLER"),s||(s=n.ownerDocument.createElement("block"),s.setAttribute("type",ts.pxtc.ON_START_TYPE),a.push(s)),s.appendChild(c),c.appendChild(u),u.removeAttribute("x"),u.removeAttribute("y"),c=u;u=o}a.forEach((e=>n.appendChild(e)))}(c.documentElement,l),u=c.documentElement,e.U.toArray(u.querySelectorAll("block[type=procedures_defnoreturn]")).forEach((e=>{e.setAttribute("type","function_definition"),e.querySelector("field[name=NAME]").setAttribute("name","function_name")})),e.U.toArray(u.querySelectorAll("block[type=procedures_callnoreturn]")).forEach((e=>{e.setAttribute("type","function_call"),e.querySelector("field[name=NAME]").setAttribute("name","function_name")})),e.blocks.extensionBlocklyPatch&&e.blocks.extensionBlocklyPatch(i,c.documentElement),(new XMLSerializer).serializeToString(c)}catch(t){return c||e.reportException(t),a}var u}}(e.blocks||(e.blocks={}))}(pxt||(pxt={})),function(e){var t;(function(n){n.patchBlocksFromOldWorkspace=function(t,n,o){const r=e.blocks.loadWorkspaceXml(o,!0);return function(t,n,o){let r,i;n.getTopBlocks(!1).filter((e=>e.isEnabled())).forEach((s=>{const a=s.xy_;if(a&&0!=a.x&&0!=a.y){r||(r=e.blocks.mkEnv(n,t),i={},o.getTopBlocks(!1).forEach((t=>{const n=e.blocks.callKey(r,t),o=i[n]||[];o.push(t),i[n]=o})));const l=e.blocks.callKey(r,s),c=(i[l]||[]).shift();c&&(c.xy_=a.clone())}}))}(t,n,r),function(t,n){const o=Blockly.Xml.workspaceToDom(t,!0),r=Blockly.Xml.workspaceToDom(n,!0);return e.Util.toArray(o.childNodes).filter((e=>e.nodeType==Node.ELEMENT_NODE&&"block"==e.localName&&"true"==e.getAttribute("disabled"))).forEach((e=>r.appendChild(r.ownerDocument.importNode(e,!0)))),Blockly.Xml.domToText(r)}(n,r)},n.splitSvg=function(t,n,o=18){const r=n.getTopComments(!0),i=n.getTopBlocks(!0);if(r.length+i.length<2)return t;const s=document.createElement("div");function a(n,r,i,a,l,c){const u=t.cloneNode(!0),p=u.querySelector(`g.blocklyWorkspace > g.${n}`),d=u.querySelector(`g.blocklyWorkspace > g.${r}`),g=e.Util.toArray(p.querySelectorAll(`g.blocklyWorkspace > g.${n} > ${c?"."+c:"g[transform]"}`)),h=g.splice(i,1)[0];if(!h)return void e.log("missing block, did block failed to load?");g.filter((e=>e!=h)).forEach((e=>{e.parentNode.removeChild(e)})),p.removeAttribute("transform"),d.parentNode.removeChild(d),h.setAttribute("transform",`translate(${l.x}, ${l.y})`);const f=a.width/o+"em",_=a.height/o+"em";u.setAttribute("viewBox",`0 0 ${a.width} ${a.height}`),u.style.width=f,u.style.height=_,u.setAttribute("width",f),u.setAttribute("height",_),s.appendChild(u)}return s.className=`blocks-svg-list ${n.getInjectionDiv().className}`,r.forEach(((e,t)=>a("blocklyBubbleCanvas","blocklyBlockCanvas",t,e.getHeightWidth(),{x:0,y:0},"blocklyComment"))),i.forEach(((e,t)=>{const n=e.getHeightWidth(),r={x:0,y:0};e.getStartHat()&&(n.height+=o,r.y+=o),a("blocklyBlockCanvas","blocklyBubbleCanvas",t,n,r)})),s},n.verticalAlign=function(e,t){let n=0;e.getTopComments(!0).forEach((e=>{e.moveBy(0,n),n+=e.getHeightWidth().height,n+=t})),e.getTopBlocks(!0).forEach(((e,o)=>{e.getStartHat()&&(n+=t),e.moveBy(0,n),n+=e.getHeightWidth().height,n+=t}))},n.setCollapsedAll=function(e,t){e.getTopBlocks(!1).filter((e=>e.isEnabled())).forEach((e=>e.setCollapsed(t)))};const o=20;function r(t,n,o){let r;o&&(r={target:e.appTarget.id,versions:e.appTarget.versions,xml:e.blocks.saveBlocksXml(t).map((t=>e.Util.htmlEscape(t)))});const i=0|n||4;return a(t,i).then((t=>t?e.BrowserUtils.encodeToPngAsync(t.xml,{width:t.width,height:t.height,pixelDensity:i,text:o?JSON.stringify(r,null,2):null}):Promise.resolve(void 0))).catch((t=>{e.reportException(t)}))}n.flow=function(e,t){if(t){if(t.useViewWidth){const t=e.getMetrics();if(t.viewHeight>t.viewWidth)return f(e.getTopComments(!0),e.getTopBlocks(!0),void 0,t.viewWidth),void e.scroll(o,20)}f(e.getTopComments(!0),e.getTopBlocks(!0),t.ratio)}else f(e.getTopComments(!0),e.getTopBlocks(!0));e.scroll(o,20)},n.screenshotEnabled=function(){return!e.BrowserUtils.isIE()&&!e.BrowserUtils.isUwpEdge()},n.screenshotAsync=function(e,t,n){return r(e,t,n)},n.toPngAsync=r;const i="http://www.w3.org/1999/xlink",s=12e7;function a(e,t){if(!e)return Promise.resolve(void 0);const n=e.getBlocksBoundingBox(),o=e.getParentSvg().cloneNode(!0);u(o);let r=n.right-n.left,i=n.bottom-n.top,a=1;const l=r*i*Math.pow(t,2);return l>s&&(a=Math.sqrt(s/l)),p(o,n.left,n.top,r,i,a)}function l(e){return c((new XMLSerializer).serializeToString(e))}function c(e){return e.replace(new RegExp("&nbsp;","g"),"&#160;")}function u(t){e.BrowserUtils.removeClass(t,"blocklySvg"),e.BrowserUtils.addClass(t,"blocklyPreview pxt-renderer"),e.U.toArray(t.querySelectorAll(".blocklyMainBackground,.blocklyScrollbarBackground")).forEach((e=>{e&&e.parentNode.removeChild(e)})),e.U.toArray(t.querySelectorAll(".blocklyConnectionIndicator,.blocklyInputConnectionIndicator")).forEach((e=>{e&&e.parentNode.removeChild(e)})),t.removeAttribute("width"),t.removeAttribute("height"),e.U.toArray(t.querySelectorAll(".blocklyBlockCanvas,.blocklyBubbleCanvas")).forEach((e=>e.removeAttribute("transform")));const n=new DOMParser;return e.U.toArray(t.querySelectorAll(".blocklyCommentTextarea")).forEach((t=>{const o=n.parseFromString("<!doctype html><body>"+e.docs.html2Quote(t.value),"text/html");t.textContent=o.body.textContent})),t}function p(t,n,o,r,s,a){if(!t.childNodes[0])return Promise.resolve(void 0);t.removeAttribute("width"),t.removeAttribute("height"),t.removeAttribute("transform");let c=Math.round(r*(a||1)),u=Math.round(s*(a||1));const p=l(t).replace(/^\s*<svg[^>]+>/i,"").replace(/<\/svg>\s*$/i,""),f=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="${i}" width="${c}" height="${u}" viewBox="${n} ${o} ${r} ${s}" class="pxt-renderer">${p}</svg>`,_=(new DOMParser).parseFromString(f,"image/svg+xml"),m=_.createElementNS("http://www.w3.org/1999/xhtml","style"),y=e.Util.isUserLanguageRtl(),k=document.getElementById(`style-${y?"rtl":""}blockly.css`).href,b=e.Util.toArray(document.head.getElementsByTagName("link")).filter((t=>e.Util.endsWith(t.getAttribute("href"),"semantic.css")))[0].href;return Promise.all([e.BrowserUtils.loadAjaxAsync(k),e.BrowserUtils.loadAjaxAsync(b)]).then((t=>{var n,o;const r=e.Util.toArray(document.head.querySelectorAll("style")).filter((e=>/\.blocklySvg/.test(e.innerText)))[0];t.unshift((null===(n=document.getElementById("blockly-common-style"))||void 0===n?void 0:n.innerText)||""),t.unshift((null===(o=document.getElementById("blockly-renderer-style-pxt"))||void 0===o?void 0:o.innerText)||"");const s=(r?r.innerText:"")+"\n\n"+t.map((e=>e+"\n\n"));return m.appendChild(_.createCDATASection(s)),_.documentElement.insertBefore(m,_.documentElement.firstElementChild),function(t){g||(g={});const n=t.getElementsByTagName("image"),o=e.Util.toArray(n).filter((e=>{const t=e.getAttributeNS(i,"href");return t&&!/^data:/.test(t)})).map((e=>e)).map((t=>{const n=t.getAttributeNS(i,"href");let o=g[n];return(o?Promise.resolve(g[n]):e.BrowserUtils.loadImageAsync(t.getAttributeNS(i,"href")).then((e=>{const t=document.createElement("canvas"),r=t.getContext("2d");let i=e.width,s=e.height;return t.width=i,t.height=s,r.drawImage(e,0,0,i,s,0,0,t.width,t.height),g[n]=o=t.toDataURL("image/png"),o})).catch((t=>(e.debug(`svg render: failed to load ${n}`),"")))).then((e=>{t.setAttributeNS(i,"href",e)}))}));return Promise.all(o).then((()=>{}))}(_).then((()=>function(t){if(h||(h={}),!e.BrowserUtils.isEdge())return Promise.resolve();const n=t.getElementsByTagName("image"),o=e.Util.toArray(n).filter((e=>/^data:image\/svg\+xml/.test(e.getAttributeNS(i,"href")))).map((e=>e)).map((t=>{const n=t.getAttributeNS(i,"href"),o=parseInt(t.getAttribute("width").replace(/[^0-9]/g,"")),r=parseInt(t.getAttribute("height").replace(/[^0-9]/g,""));let s=h[n];return(s?Promise.resolve(s):e.BrowserUtils.encodeToPngAsync(n,{width:o,height:r,pixelDensity:2})).then((e=>{h[n]=e,t.setAttributeNS(i,"href",e)}))}));return Promise.all(o).then((()=>{}))}(_))).then((()=>({width:c,height:u,svg:l(_).replace('<style xmlns="http://www.w3.org/1999/xhtml">',"<style>"),xml:d(_),css:s})))}))}function d(e){const t=(new XMLSerializer).serializeToString(e);return"data:image/svg+xml;base64,"+ts.pxtc.encodeBase64(unescape(encodeURIComponent(t)))}let g,h;function f(e,n,r=1.62,i){const s=[],a={};let l;e.forEach((e=>{const t=e.data;null!=t&&(a[t]=e)})),n.sort(((e,t)=>e.isEnabled()===t.isEnabled()?e.type===t.type?0:"function_definition"===e.type?1:"function_definition"===t.type?-1:e.type.localeCompare(t.type):e.isEnabled()?-1:1)),n.forEach((e=>{const n=t.getBlockData(e).commentRefs;if(n.length){const t=[];for(let e=0;e<n.length;e++){const o=a[n[e]];o&&(t.push(_(o)),delete a[n[e]])}if(t.length)return void s.push({value:e,width:-1,height:-1,children:t})}const o=_(e);!l&&e.isEnabled()&&e.type===pxtc.ON_START_TYPE?l=o:s.push(o)})),l&&s.unshift(l),Object.keys(a).sort(((e,t)=>e.length===t.length?e>t?-1:1:e.length>t.length?-1:1)).forEach((e=>{a[e]&&s.push(_(a[e]))})),e.forEach((e=>{null==e.data&&s.push(_(e))}));let c,u=0;for(let e=0;e<s.length;e++){const t=s[e];if(t.children){const e=t.value.getHeightWidth();t.x=0,t.y=0;let n=e.width+13,o=0;for(let e=0;e<t.children.length;e++){const r=t.children[e];r.x=n,r.y=o,o+=r.height+13,t.width=Math.max(t.width,n+r.width)}t.height=Math.max(o-13,e.height)}u+=(t.height+13)*(t.width+13)}c=i>o?i-o:Math.sqrt(u)*r;let p=o,d=20,g=0;for(let e=0;e<s.length;e++){const t=s[e];if(t.children){h(t,p+t.x,d+t.y);for(let e=0;e<t.children.length;e++){const n=t.children[e];h(n,p+n.x,d+n.y)}}else h(t,p,d);p+=t.width+45,g=Math.max(g,d+t.height+45),p>c&&(p=o,d=g)}function h(e,t,n){const o=e.value.getBoundingRectangle();e.value.moveBy(t-o.left,n-o.top)}}function _(e){const t=e.getHeightWidth();return{value:e,height:t.height,width:t.width}}n.toSvgAsync=a,n.serializeNode=l,n.serializeSvgString=c,n.cleanUpBlocklySvg=u,n.blocklyToSvgAsync=p,n.documentToSvg=d})((t=e.blocks||(e.blocks={})).layout||(t.layout={}))}(pxt||(pxt={})),function(e){!function(t){const n={string:{field:"TEXT",block:"text",defaultValue:""},number:{field:"NUM",block:"math_number",defaultValue:"0"},boolean:{field:"BOOL",block:"logic_boolean",defaultValue:"false"},Array:{field:"VAR",block:"variables_get",defaultValue:"list"}};function o(e){let t=/^(?:Array<(.+)>)|(?:(.+)\[\])|(?:\[.+\])$/.exec(e);return t?t[1]?t[1]:t[2]:void 0}t.optionalDummyInputPrefix="0_optional_dummy",t.optionalInputWithFieldPrefix="0_optional_field",t.isArrayType=o,t.isTupleType=function(e){let t=/^\[(.+)\]$/.exec(e);return t?t[1].split(/,\s*/):void 0};const r=/^(string|number|boolean)$/;let i,s;function a(){return i||(i={},Object.keys(Blockly.Blocks).forEach((e=>i[e]={block:Blockly.Blocks[e]}))),i}t.builtinBlocks=a,t.buildinBlockStatements={controls_if:!0,controls_for:!0,pxt_controls_for:!0,controls_simple_for:!0,controls_repeat_ext:!0,pxt_controls_for_of:!0,controls_for_of:!0,variables_set:!0,variables_change:!0,device_while:!0};let l={};function c(e,t,r,i){let s;if(i=i||t.defaultValue,!(r=r||t.shadowBlockId)&&t.range&&(r="math_number_minmax"),s=i&&'"'==i.slice(0,1)?JSON.parse(i):i,"number"==t.type&&"value"==r){const e=document.createElement("field");return e.setAttribute("name",t.definitionName),e.appendChild(document.createTextNode("0")),e}const a="variables_get"==r,l="text"==r,c=document.createElement("value");c.setAttribute("name",t.definitionName);const p=o(t.type),d=document.createElement(a||p?"block":"shadow");c.appendChild(d);const g=n[p||t.type];if(d.setAttribute("type",r||(p?"lists_create_with":g&&g.block||t.type)),d.setAttribute("colour",Blockly.Colours.textField),p){if(g&&!r){let e;switch(p){case"number":e=["0","1"];break;case"string":e=["a","b","c"];break;case"boolean":e=["FALSE","FALSE","FALSE"]}return u(d,g.block,g.field,e),c}if(r&&s)return u(d,s),c}if(!g||r&&g.block!==r&&"math_number_minmax"!==r){if(s){const n=document.createElement("field");if(n.textContent=s,a)n.setAttribute("name","VAR"),d.appendChild(n);else if(l)n.setAttribute("name","TEXT"),d.appendChild(n);else if(r){const t=e.blocksById[r];if(t&&t.attributes._def&&t.attributes._def.parameters.length){const e=t.attributes._def.parameters[0];n.setAttribute("name",e.name),d.appendChild(n)}}else n.setAttribute("name",t.definitionName),d.appendChild(n)}}else{const e=document.createElement("field");let n,o;switch(d.appendChild(e),r){case"variables_get":n="VAR";break;case"math_number_minmax":n="SLIDER";break;default:n=g.field}e.setAttribute("name",n),o="boolean"==t.type?document.createTextNode((s||g.defaultValue).toUpperCase()):document.createTextNode(s||g.defaultValue),e.appendChild(o)}let h;return t.range&&(h=document.createElement("mutation"),h.setAttribute("min",t.range.min.toString()),h.setAttribute("max",t.range.max.toString()),h.setAttribute("label",t.actualName.charAt(0).toUpperCase()+t.actualName.slice(1)),t.fieldOptions&&(t.fieldOptions.step&&h.setAttribute("step",t.fieldOptions.step),t.fieldOptions.color&&h.setAttribute("color",t.fieldOptions.color),t.fieldOptions.precision&&h.setAttribute("precision",t.fieldOptions.precision))),t.fieldOptions&&(h||(h=document.createElement("mutation")),h.setAttribute("customfield",JSON.stringify(t.fieldOptions))),h&&d.appendChild(h),c}function u(e,t,n,o){const r=o?o.length:2,i=document.createElement("mutation");i.setAttribute("items",""+r),i.setAttribute("horizontalafter",""+r),e.appendChild(i);for(let i=0;i<r;i++){const r=document.createElement("value");r.setAttribute("name","ADD"+i);const s=document.createElement("shadow");if(s.setAttribute("type",t),n){const e=document.createElement("field");e.setAttribute("name",n),o&&e.appendChild(document.createTextNode(o[i])),s.appendChild(e)}r.appendChild(s),e.appendChild(r)}}function p(t,n,o,r){const i=d(t,e.toolbox.convertColor(n),o,r);return i.setAttribute("web-class","blocklyFlyoutHeading"),i}function d(t,n,o,r){let i=Blockly.utils.xml.createElement("label");return i.setAttribute("text",t),n&&i.setAttribute("web-icon-color",e.toolbox.convertColor(n)),o&&(1===o.length?(i.setAttribute("web-icon",o),r&&i.setAttribute("web-icon-class",r)):i.setAttribute("web-icon-class",`blocklyFlyoutIcon${t}`)),i}function g(t,n,i){let s=document.createElement("block");if(s.setAttribute("type",n.attributes.blockId),n.attributes.blockGap?s.setAttribute("gap",n.attributes.blockGap):e.appTarget.appTheme&&e.appTarget.appTheme.defaultBlockGap&&s.setAttribute("gap",e.appTarget.appTheme.defaultBlockGap.toString()),i.thisParameter){const e=i.thisParameter;s.appendChild(c(t,e,e.shadowBlockId||"variables_get",e.defaultValue||e.definitionName))}return n.parameters&&(i.parameters.filter((e=>!e.isOptional&&(r.test(e.type)||r.test(o(e.type))||e.shadowBlockId||e.defaultValue))).forEach((e=>{s.appendChild(c(t,e))})),n.attributes.draggableParameters?i.handlerArgs.forEach((t=>{const o="reporter"===n.attributes.draggableParameters,r=document.createElement("value");r.setAttribute("name","HANDLER_DRAG_PARAM_"+t.name);const i=o?e.blocks.reporterTypeForArgType(t.type):"variables_get_reporter",a=document.createElement("shadow");if(a.setAttribute("type",i),o&&"argument_reporter_custom"===i){const e=document.createElement("mutation");e.setAttribute("typename",t.type),a.appendChild(e)}const l=document.createElement("field");l.setAttribute("name",o?"VALUE":"VAR"),l.textContent=e.Util.htmlEscape(t.name),a.appendChild(l),r.appendChild(a),s.appendChild(r)})):i.handlerArgs.forEach((e=>{const t=document.createElement("field");t.setAttribute("name","HANDLER_"+e.name),t.textContent=e.name,s.appendChild(t)}))),s}function h(n){return s=n,Blockly.pxtBlocklyUtils.whitelistDraggableBlockTypes(n.blocks.filter((e=>e.attributes.duplicateShadowOnDrag)).map((e=>e.attributes.blockId))),n.blocks.map((o=>{const r=t.compileInfo(o),i=g(n,o,r);if(o.attributes.blockBuiltin){e.Util.assert(!!a()[o.attributes.blockId]);const t=a()[o.attributes.blockId];t.symbol=o,t.block.codeCard=_(o,i)}else!function(n,o,r,i){let s=o.attributes.blockId;if(a()[s])return e.reportError("blocks","trying to override builtin block",{details:s}),!1;let c=JSON.stringify(o);if(l[s]&&l[s].hash==c)return!0;if(Blockly.Blocks[o.attributes.blockId])return console.error("duplicate block definition: "+s),!1;let u={hash:c,fn:o,block:{codeCard:_(o,i),init:function(){!function(n,o,r,i){var s;const a=(r.attributes.blockNamespace||r.namespace).split(".")[0],l=1==r.kind||2==r.kind,c=o.apis.byQName[a],u=r.attributes.blockNamespace&&c&&c.attributes.color||r.attributes.color||c&&c.attributes.color||e.toolbox.getNamespaceColor(a)||255;if(r.attributes.help){const e=r.attributes.help.replace(/^\//,"");/^github:/.test(e)?n.setHelpUrl(e):"none"!==e&&n.setHelpUrl("/reference/"+e)}else if(r.pkg&&!e.appTarget.bundledpkgs[r.pkg]){let e=r.qName.toLowerCase().split(".");e[0]==r.pkg&&e.shift(),n.setHelpUrl(`/pkg/${r.pkg}#${encodeURIComponent(e.join("-"))}`)}n.setColour(u);let p=Blockly.OUTPUT_SHAPE_ROUND;"boolean"==r.retType&&(p=Blockly.OUTPUT_SHAPE_HEXAGONAL);n.setOutputShape(p),r.attributes.undeletable&&n.setDeletable(!1);h(r.attributes._def);let d=!1;if(r.attributes.mutate)t.addMutation(n,r,r.attributes.mutate);else if(r.attributes.defaultInstance)t.addMutation(n,r,t.MutatorTypes.DefaultInstanceMutator);else if(r.attributes._expandedDef&&"disabled"!==r.attributes.expandableArgumentMode){const e="toggle"===r.attributes.expandableArgumentMode;t.initExpandableBlock(o,n,r.attributes._expandedDef,i,e,(()=>h(r.attributes._expandedDef,!0)))}else if(i.handlerArgs.length)if(d=!0,r.attributes.optionalVariableArgs)t.initVariableArgsBlock(n,i.handlerArgs);else if(r.attributes.draggableParameters)i.handlerArgs.filter((e=>!e.inBlockDef)).forEach((e=>{const t=n.appendValueInput("HANDLER_DRAG_PARAM_"+e.name);"reporter"==r.attributes.draggableParameters?t.setCheck(b(e.type,o)):t.setCheck("Variable")}));else{let e=n.appendDummyInput();i.handlerArgs.filter((e=>!e.inBlockDef)).forEach((t=>{e.appendField(new Blockly.FieldVariable(t.name),"HANDLER_"+t.name)}))}if(t.appendMutation(n,{mutationToDom:e=>(n.inputList.forEach((t=>{t.fieldRow.forEach((t=>{if(t.isFieldCustom_&&t.saveOptions){const n=t.saveOptions();n&&e.setAttribute("customfield",JSON.stringify(n))}}))})),e),domToMutation:e=>{n.inputList.forEach((t=>{t.fieldRow.forEach((t=>{if(t.isFieldCustom_&&t.restoreOptions){const n=JSON.parse(e.getAttribute("customfield"));n&&t.restoreOptions(n)}}))}))}}),r.attributes.imageLiteral){const e=(r.attributes.imageLiteralColumns||5)*r.attributes.imageLiteral,t=r.attributes.imageLiteralRows||5,o=r.attributes.imageLiteralScale;n.appendDummyInput().appendField(new pxtblockly.FieldMatrix("",{columns:e,rows:t,scale:o}),"LEDS")}"external"===r.attributes.inlineInputMode?n.setInputsInline(!1):"inline"===r.attributes.inlineInputMode?n.setInputsInline(!0):n.setInputsInline(!r.parameters||r.parameters.length<4&&!r.attributes.imageLiteral);((null===(s=r.parameters)||void 0===s?void 0:s.find((e=>pxtc.parameterTypeIsArrowFunction(e))))||d)&&(n.appendStatementInput("HANDLER").setCheck(null),n.setInputsInline(!0));v(n,r.retType,o);const g=m(r);function h(s,a=!1){let c=0,p=!a&&!!i.thisParameter;const d=function(e){const t=[];let n=[];return e.parts.forEach((e=>{switch(e.kind){case"break":o();break;case"param":n.push(e),o();break;case"image":case"label":n.push(e)}})),o(),t;function o(){n.length&&(t.push(n),n=[])}}(s),g=new e.ImageConverter;"ENUM_GET"!==r.attributes.shim&&"KIND_GET"!==r.attributes.shim||!(i.parameters.length>1||i.thisParameter)?(d.forEach((s=>{const d=[];let h,f,_,m=!1;if(s.forEach((n=>{if("param"!==n.kind){const t=function(t){if("image"===t.kind)return function(t){let n=I[t];if(!n)return void e.log(`missing jres icon ${t}`);return new Blockly.FieldImage(n,40,40,"",null,e.Util.isUserLanguageRtl())}(t.uri);const n=function(e){if(" "===e)return"";if(e.length>1){const t=" "==e.charAt(0),n=" "==e.charAt(e.length-1);if(t||n)return e.substring(t?1:0,n?e.length-1:e.length)}return e}(t.text);if(!n)return;return t.cssClass?new Blockly.FieldLabel(n,t.cssClass):t.style.length?new pxtblockly.FieldStyledLabel(n,{bold:-1!==t.style.indexOf("bold"),italics:-1!==t.style.indexOf("italics"),blocksInfo:void 0}):new Blockly.FieldLabel(n,void 0)}(n);t&&d.push({field:t})}else{if("ENUM_GET"===r.attributes.shim)return e.U.assert(!!r.attributes.enumName,"Trying to create an ENUM_GET block without a valid enum name"),void d.push({name:"MEMBER",field:new pxtblockly.FieldUserEnum(o.enumsByName[r.attributes.enumName])});if("KIND_GET"===r.attributes.shim)return void d.push({name:"MEMBER",field:new pxtblockly.FieldKind(o.kindsByName[r.attributes.kindNamespace||r.attributes.blockNamespace||r.namespace])});{let c=function(e,t,n=!1){if(e.ref){const n="this"===e.name?t.thisParameter:t.actualNameToParam[e.name];if(!n){let n;if(t.handlerArgs.forEach((t=>{t.name===e.name&&(n=t)})),n)return n}return n}return n?t.thisParameter:t.definitionNameToParam[e.name]}(n,i,p);if(p=!1,!c)return void console.error("block "+r.attributes.blockId+": unknown parameter "+n.name+(n.ref?` (${n.ref})`:""));if(!c.definitionName)return h="HANDLER_DRAG_PARAM_"+c.name,void(f="reporter"===r.attributes.draggableParameters?b(c.type,o):"Variable");let _=e.U.lookup(o.apis.byQName,c.type);m=!0;const y=c.definitionName,k=c.actualName;let v=_&&6==_.kind,T=_&&!!_.attributes.fixedInstances&&!c.shadowBlockId,E=!!r.attributes.constantShim,S="@combined@"==c.type,C=c.fieldEditor,x=y.charAt(0).toUpperCase()+y.slice(1),B=c.type;if(v||T||E||S){let n;v?(s=o.apis,a=c.type,n=e.Util.values(s.byQName).filter((e=>e.namespace===a&&!e.attributes.blockHidden))):n=T?N(o.apis,_.qName):S?r.combinedProperties.map((t=>e.U.lookup(o.apis.byQName,t))):function(t,n){return e.Util.values(t.byQName).filter((e=>e.attributes.blockIdentity===n))}(o.apis,r.qName),0==n.length&&console.error(`no instances of ${_.qName} found`);const i=n.map((t=>{let n=t.attributes.block||t.attributes.blockId||t.name,o=t.attributes.blockCombine;return t.attributes.jresURL&&!t.attributes.iconURL&&e.U.startsWith(t.attributes.jresURL,"data:image/x-mkcd-f")&&(t.attributes.iconURL=g.convert(t.attributes.jresURL)),o&&(n=n.replace(/@set/,"")),[t.attributes.iconURL||t.attributes.blockImage?{src:t.attributes.iconURL||e.Util.pathJoin(e.webConfig.commitCdnUrl,`blocks/${t.namespace.toLowerCase()}/${t.name.toLowerCase()}.png`),alt:n,width:36,height:36,value:t.name}:n,t.namespace+"."+t.name]}));if(c.defaultValue){let e=-1;if(i.some(((t,n)=>t[1]===c.defaultValue&&(e=n,!0))),e>-1){const t=i.splice(e,1)[0];i.unshift(t)}}if(C){let n=r.attributes.paramDefl[k]||"";const s={data:i,colour:u,label:x,type:B,blocksInfo:o};e.Util.jsonMergeFrom(s,r.attributes.paramFieldEditorOptions&&r.attributes.paramFieldEditorOptions[k]||{}),d.push(D(t.createFieldEditor(C,n,s),y))}else d.push(D(new Blockly.FieldDropdown(i),y))}else if(C){const n=r.attributes.paramDefl[c.actualName]||"",i={colour:u,label:x,type:B,blocksInfo:o};e.Util.jsonMergeFrom(i,r.attributes.paramFieldEditorOptions&&r.attributes.paramFieldEditorOptions[c.actualName]||{}),d.push(D(t.createFieldEditor(C,n,i),c.definitionName))}else h=y,l&&"this"===n.name?f=c.type:"number"==c.type&&c.shadowBlockId&&"value"==c.shadowBlockId?(h=void 0,d.push(D(new Blockly.FieldNumber("0"),y))):f="string"==c.type&&c.shadowOptions&&c.shadowOptions.toString?null:b(c.type,o)}}var s,a})),h)_=n.appendValueInput(h),_.setAlign(Blockly.ALIGN_LEFT);else if(a){const e=m?t.optionalInputWithFieldPrefix:t.optionalDummyInputPrefix;_=n.appendDummyInput(e+c++)}else _=n.appendDummyInput();f&&_.setCheck(f),d.forEach((e=>_.appendField(e.field,e.name)))})),g.logTime()):console.warn(`Enum blocks may only have 1 parameter but ${r.attributes.blockId} has ${i.parameters.length}`)}n.setPreviousStatement(!(g&&!r.attributes.handlerStatement)&&"void"==r.retType),n.setNextStatement(!(g&&!r.attributes.handlerStatement)&&"void"==r.retType),n.setTooltip(/^__/.test(r.namespace)?"":r.attributes.jsDoc)}(this,n,o,r)}}};e.Util.isTranslationMode()&&e.blocks.promptTranslateBlock&&(u.block.customContextMenu=t=>{o.attributes.translationId&&t.push({enabled:!0,text:lf("Translate this block"),callback:function(){e.blocks.promptTranslateBlock(s,[o.attributes.translationId])}})});l[s]=u,Blockly.Blocks[s]=u.block}(n,o,r,i);return o}))}function f(e){return e.outerHTML.replace(/^<\?[^>]*>/,"")}function _(e,t){return{name:e.namespace+"."+e.name,shortName:e.name,description:e.attributes.jsDoc,url:e.attributes.help?"reference/"+e.attributes.help.replace(/^\//,""):void 0,blocksXml:`<xml xmlns="http://www.w3.org/1999/xhtml">${f(t)}</xml>`}}function m(e){var t;return!!(null===(t=e.parameters)||void 0===t?void 0:t.some((e=>pxtc.parameterTypeIsArrowFunction(e))))}t.blockSymbol=function(e){let t=l[e];return t?t.fn:void 0},t.createShadowValue=c,t.createFlyoutHeadingLabel=p,t.createFlyoutGroupLabel=function(e,t,n,o){const r=d(e,void 0,t);return r.setAttribute("web-class","blocklyFlyoutGroup"),r.setAttribute("web-line","1.5"),n&&r.setAttribute("web-line-width",n),o&&(r.setAttribute("web-help-button","true"),r.setAttribute("callbackKey",o)),r},t.createFlyoutButton=function(e,t){let n=Blockly.utils.xml.createElement("button");return n.setAttribute("text",t),n.setAttribute("callbackKey",e),n},t.createToolboxBlock=g,t.injectBlocks=h,t.hasArrowFunction=m,t.cleanBlocks=function(){e.debug("removing all custom blocks");for(const e in l)x(l[e].fn)},t.initializeAndInject=function(e){k(),h(e)},t.initialize=function(e){k(),function(e){I={};const t=e.apis.jres;if(!t)return;Object.keys(t).forEach((e=>{const n=t[e];n&&n.icon&&(I[e]=n.icon)}))}(e)};let y=!1;function k(){y||(y=!0,goog.provide("Blockly.Blocks.device"),goog.require("Blockly.Blocks"),Blockly.FieldCheckbox.CHECK_CHAR="",Blockly.Constants.ADD_START_HATS=!!e.appTarget.appTheme.blockHats,t.initFieldEditors(),function(){const n=Blockly.Msg;n.DUPLICATE_BLOCK=lf("{id:block}Duplicate"),n.DUPLICATE_COMMENT=lf("Duplicate Comment"),n.REMOVE_COMMENT=lf("Remove Comment"),n.ADD_COMMENT=lf("Add Comment"),n.EXTERNAL_INPUTS=lf("External Inputs"),n.INLINE_INPUTS=lf("Inline Inputs"),n.EXPAND_BLOCK=lf("Expand Block"),n.COLLAPSE_BLOCK=lf("Collapse Block"),n.ENABLE_BLOCK=lf("Enable Block"),n.DISABLE_BLOCK=lf("Disable Block"),n.DELETE_BLOCK=lf("Delete Block"),n.DELETE_X_BLOCKS=lf("Delete Blocks"),n.DELETE_ALL_BLOCKS=lf("Delete All Blocks"),n.HELP=lf("Help"),Blockly.BlockSvg.prototype.showHelp=function(){const t=goog.isFunction(this.helpUrl)?this.helpUrl():this.helpUrl;t&&(e.blocks.openHelpUrl||window.open)(t)},Blockly.WorkspaceSvg.prototype.configureContextMenu=function(o,r){if(this.options.readOnly||this.isFlyout)return;o.length=0;let i=this.getTopBlocks(!0),s=Blockly.utils.genUid(),a=this.getTopComments(),l=this;const c=!(this.options.debugMode||this.options.readOnly);if(this.options.comments&&!e.BrowserUtils.isIE()){const e=Blockly.ContextMenu.workspaceCommentOption(l,r);e.enabled=e.enabled&&c,o.push(e)}let u=Blockly.WorkspaceSvg.buildDeleteList_(i),p=0;for(let e=0;e<u.length;e++)u[e].isShadow()||p++;const d=10;function g(){Blockly.Events.setGroup(s);let e=u.shift();e&&(e.workspace?(e.dispose(!1,!0),setTimeout(g,d)):g()),Blockly.Events.setGroup(!1)}const h={text:1==p?n.DELETE_BLOCK:n.DELETE_ALL_BLOCKS,enabled:p>0&&c,callback:()=>{e.tickEvent("blocks.context.delete",void 0,{interactiveConsent:!0}),p<2?g():Blockly.confirm(lf("Delete all {0} blocks?",p),(e=>{e&&g()}))}};o.push(h);const f={text:lf("Format Code"),enabled:c,callback:()=>{e.tickEvent("blocks.context.format",void 0,{interactiveConsent:!0}),e.blocks.layout.flow(this,{useViewWidth:!0})}};if(o.push(f),e.appTarget.appTheme.blocksCollapsing){const t={text:lf("Collapse Blocks"),enabled:i.length&&i.find((e=>e.isEnabled()&&!e.isCollapsed()))&&c,callback:()=>{e.tickEvent("blocks.context.collapse",void 0,{interactiveConsent:!0}),e.blocks.layout.setCollapsedAll(this,!0)}};o.push(t);const n={text:lf("Expand Blocks"),enabled:i.length&&i.find((e=>e.isEnabled()&&e.isCollapsed()))&&c,callback:()=>{e.tickEvent("blocks.context.expand",void 0,{interactiveConsent:!0}),e.blocks.layout.setCollapsedAll(this,!1)}};o.push(n)}if(e.blocks.layout.screenshotEnabled()){const t={text:lf("Snapshot"),enabled:i.length>0||a.length>0,callback:()=>{var t;e.tickEvent("blocks.context.screenshot",void 0,{interactiveConsent:!0}),e.blocks.layout.screenshotAsync(this,null,null===(t=e.appTarget.appTheme)||void 0===t?void 0:t.embedBlocksInSnapshot).then((t=>{e.BrowserUtils.isSafari()&&(t=t.replace(/^data:image\/[^;]/,"data:application/octet-stream")),e.BrowserUtils.browserDownloadDataUri(t,`${e.appTarget.nickname||e.appTarget.id}-${lf("screenshot")}.png`)}))}};o.push(t)}t.onShowContextMenu&&t.onShowContextMenu(this,o)},Blockly.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN.onchange=function(){}}(),function(){const t=e.blocks.getBlockDefinition(ts.pxtc.ON_START_TYPE);if(Blockly.Blocks[ts.pxtc.ON_START_TYPE]={init:function(){this.jsonInit({message0:t.block.message0,args0:[{type:"input_dummy"},{type:"input_statement",name:"HANDLER"}],colour:(e.appTarget.runtime?e.appTarget.runtime.onStartColor:"")||e.toolbox.getNamespaceColor("loops")}),S(this,ts.pxtc.ON_START_TYPE,t.name,t.tooltip,t.url,String((e.appTarget.runtime?e.appTarget.runtime.onStartColor:"")||e.toolbox.getNamespaceColor("loops")),void 0,void 0,!!e.appTarget.runtime&&e.appTarget.runtime.onStartUnDeletable)}},Blockly.Blocks[pxtc.TS_STATEMENT_TYPE]={init:function(){let t,n,o=this;o.setColour("#717171"),o.setPreviousStatement(!0),o.setNextStatement(!0),o.setInputsInline(!1),o.domToMutation=e=>{const t=parseInt(e.getAttribute("numlines"));o.declaredVariables=e.getAttribute("declaredvars"),n=[];for(let o=0;o<t;o++){const t=e.getAttribute("line"+o);n.push(t)}o.setPythonEnabled(!1)},o.mutationToDom=()=>{let e=document.createElement("mutation");return n&&(n.forEach(((t,n)=>e.setAttribute("line"+n,t))),e.setAttribute("numlines",n.length.toString())),o.declaredVariables&&e.setAttribute("declaredvars",this.declaredVariables),e},o.setPythonEnabled=r=>{if(t!==r){for(;o.inputList.length;)o.removeInput(o.inputList[0].name);t=r,r?(o.appendDummyInput().appendField(e.Util.lf("<python code>"),"LINE0"),o.setTooltip(lf("A Python statement that could not be converted to blocks"))):(n.forEach(((e,t)=>{o.appendDummyInput().appendField(e,"LINE"+t)})),o.setTooltip(lf("A JavaScript statement that could not be converted to blocks")))}},o.getLines=()=>n,o.setEditable(!1),S(this,pxtc.TS_STATEMENT_TYPE,lf("JavaScript statement"),lf("A JavaScript statement that could not be converted to blocks"),"/blocks/javascript-blocks","#717171")}},Blockly.Blocks[pxtc.TS_OUTPUT_TYPE]={init:function(){let e=this;e.setColour("#717171"),e.setPreviousStatement(!1),e.setNextStatement(!1),e.setOutput(!0),e.setEditable(!1),e.appendDummyInput().appendField(new pxtblockly.FieldTsExpression(""),"EXPRESSION"),e.setPythonEnabled=t=>{e.getField("EXPRESSION").setPythonEnabled(t),t?e.setTooltip(lf("A Python expression that could not be converted to blocks")):e.setTooltip(lf("A JavaScript expression that could not be converted to blocks"))},S(e,pxtc.TS_OUTPUT_TYPE,lf("JavaScript expression"),lf("A JavaScript expression that could not be converted to blocks"),"/blocks/javascript-blocks","#717171")}},e.appTarget.runtime&&e.appTarget.runtime.pauseUntilBlock){const t=e.appTarget.runtime.pauseUntilBlock,n=e.blocks.getBlockDefinition(ts.pxtc.PAUSE_UNTIL_TYPE);Blockly.Blocks[pxtc.PAUSE_UNTIL_TYPE]={init:function(){const o=t.color||e.toolbox.getNamespaceColor("loops");this.jsonInit({message0:n.block.message0,args0:[{type:"input_value",name:"PREDICATE",check:"Boolean"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:o}),S(this,ts.pxtc.PAUSE_UNTIL_TYPE,n.name,n.tooltip,n.url,o,void 0,void 0,!1)}}}const n="pxt_controls_for_of",o=e.blocks.getBlockDefinition(n);Blockly.Blocks[n]={init:function(){this.jsonInit({message0:o.block.message0,args0:[{type:"input_value",name:"VAR",variable:o.block.variable,check:"Variable"},{type:"input_value",name:"LIST",check:["Array","String"]}],previousStatement:null,nextStatement:null,colour:e.toolbox.blockColors.loops,inputsInline:!0}),this.appendStatementInput("DO").appendField(o.block.appendField);let t=this;S(this,n,o.name,(function(){return e.U.rlf(o.tooltip,t.getInputTargetBlock("VAR")?t.getInputTargetBlock("VAR").getField("VAR").getText():"")}),o.url,String(e.toolbox.getNamespaceColor("loops")))}};const r="controls_for_of",i=e.blocks.getBlockDefinition(r);Blockly.Blocks[r]={init:function(){this.jsonInit({message0:i.block.message0,args0:[{type:"field_variable",name:"VAR",variable:i.block.variable},{type:"input_value",name:"LIST",check:"Array"}],previousStatement:null,nextStatement:null,colour:e.toolbox.blockColors.loops,inputsInline:!0}),this.appendStatementInput("DO").appendField(i.block.appendField);let t=this;S(this,r,i.name,(function(){return e.U.rlf(i.tooltip,t.getField("VAR").getText())}),i.url,String(e.toolbox.getNamespaceColor("loops")))}};const s="lists_index_get",a=e.blocks.getBlockDefinition(s);Blockly.Blocks.lists_index_get={init:function(){this.jsonInit({message0:a.block.message0,args0:[{type:"input_value",name:"LIST",check:"Array"},{type:"input_value",name:"INDEX",check:"Number"}],colour:e.toolbox.blockColors.arrays,outputShape:Blockly.OUTPUT_SHAPE_ROUND,inputsInline:!0}),this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0),T(this,s)}};const l="lists_index_set",c=e.blocks.getBlockDefinition(l);Blockly.Blocks[l]={init:function(){this.jsonInit({message0:c.block.message0,args0:[{type:"input_value",name:"LIST",check:"Array"},{type:"input_value",name:"INDEX",check:"Number"},{type:"input_value",name:"VALUE",check:null}],previousStatement:null,nextStatement:null,colour:e.toolbox.blockColors.arrays,inputsInline:!0}),T(this,l)}}}(),function(){const n="math_op2",o=e.blocks.getBlockDefinition(n),r=o.tooltip;Blockly.Blocks[n]={init:function(){this.jsonInit({message0:lf("%1 of %2 and %3"),args0:[{type:"field_dropdown",name:"op",options:[[lf("{id:op}min"),"min"],[lf("{id:op}max"),"max"]]},{type:"input_value",name:"x",check:"Number"},{type:"input_value",name:"y",check:"Number"}],inputsInline:!0,output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:e.toolbox.getNamespaceColor("math")});S(this,n,o.name,(function(e){return r[e.getFieldValue("op")]}),o.url,e.toolbox.getNamespaceColor(o.category))}};const i="math_op3",s=e.blocks.getBlockDefinition(i);Blockly.Blocks[i]={init:function(){this.jsonInit({message0:s.block.message0,args0:[{type:"input_value",name:"x",check:"Number"}],inputsInline:!0,output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:e.toolbox.getNamespaceColor("math")}),T(this,i)}};["math_number","math_integer","math_whole_number","math_number_minmax"].forEach((t=>{const n=e.blocks.getBlockDefinition(t);C(t,n.name,n.tooltip,n.url,Blockly.Colours.textField,Blockly.Colours.textField,Blockly.Colours.textField)}));const a=Blockly.Msg,l="math_arithmetic",c=e.blocks.getBlockDefinition(l),u=c.tooltip;a.MATH_ADDITION_SYMBOL=c.block.MATH_ADDITION_SYMBOL,a.MATH_SUBTRACTION_SYMBOL=c.block.MATH_SUBTRACTION_SYMBOL,a.MATH_MULTIPLICATION_SYMBOL=c.block.MATH_MULTIPLICATION_SYMBOL,a.MATH_DIVISION_SYMBOL=c.block.MATH_DIVISION_SYMBOL,a.MATH_POWER_SYMBOL=c.block.MATH_POWER_SYMBOL,C(l,c.name,(function(e){return u[e.getFieldValue("OP")]}),c.url,e.toolbox.getNamespaceColor(c.category));const p="math_modulo",d=e.blocks.getBlockDefinition(p);a.MATH_MODULO_TITLE=d.block.MATH_MODULO_TITLE,E(p),t.initMathOpBlock(),t.initMathRoundBlock()}(),function(){Blockly.FieldVariable.prototype.getVariableTypes_=()=>[""];let t=lf("{id:var}item");Blockly.Variables.flyoutCategory=function(t){let n=[];if(!e.appTarget.appTheme.hideFlyoutHeadings){let t=p(lf("Variables"),e.toolbox.getNamespaceColor("variables"),e.toolbox.getNamespaceIcon("variables"));n.push(t)}let o=document.createElement("button");o.setAttribute("text",lf("Make a Variable...")),o.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",(function(e){Blockly.Variables.createVariable(e.getTargetWorkspace())})),n.push(o);let r=Blockly.Variables.flyoutCategoryBlocks(t);return n=n.concat(r),n},Blockly.Variables.flyoutCategoryBlocks=function(e){let t=e.getVariablesOfType(""),n=[];if(t.length>0){let e=t[t.length-1];t.sort(Blockly.VariableModel.compareByName);for(let e=0;e<t.length;e++){const o=t[e];if(Blockly.Blocks.variables_get){let e='<xml><block type="variables_get" gap="8">'+Blockly.Variables.generateVariableFieldXmlString(o)+"</block></xml>",t=Blockly.Xml.textToDom(e).firstChild;n.push(t)}}if(n[n.length-1].setAttribute("gap","24"),Blockly.Blocks.variables_set){let t='<xml><block type="variables_set" gap="'+(Blockly.Blocks.variables_change?8:24)+'">'+Blockly.Variables.generateVariableFieldXmlString(e)+"</block></xml>",o=Blockly.Xml.textToDom(t).firstChild;{let e=goog.dom.createDom("value");e.setAttribute("name","VALUE");let t=goog.dom.createDom("shadow");t.setAttribute("type","math_number"),e.appendChild(t);let n=goog.dom.createDom("field");n.setAttribute("name","NUM"),n.appendChild(document.createTextNode("0")),t.appendChild(n),o.appendChild(e)}n.push(o)}if(Blockly.Blocks.variables_change){let t='<xml><block type="variables_change" gap="'+(Blockly.Blocks.variables_get?20:8)+'">'+Blockly.Variables.generateVariableFieldXmlString(e)+"</block></xml>",o=Blockly.Xml.textToDom(t).firstChild;{let e=goog.dom.createDom("value");e.setAttribute("name","VALUE");let t=goog.dom.createDom("shadow");t.setAttribute("type","math_number"),e.appendChild(t);let n=goog.dom.createDom("field");n.setAttribute("name","NUM"),n.appendChild(document.createTextNode("1")),t.appendChild(n),o.appendChild(e)}n.push(o)}}return n};const n=Blockly.Msg,o="variables_get",r=e.blocks.getBlockDefinition(o);n.VARIABLES_GET_CREATE_SET=r.block.VARIABLES_GET_CREATE_SET,E(o);E("variables_get_reporter"),n.RENAME_VARIABLE=lf("Rename variable..."),n.DELETE_VARIABLE=lf('Delete the "%1" variable'),n.DELETE_VARIABLE_CONFIRMATION=lf('Delete %1 uses of the "%2" variable?'),n.NEW_VARIABLE_DROPDOWN=lf("New variable...");const i="variables_set",s=e.blocks.getBlockDefinition(i);n.VARIABLES_SET=s.block.VARIABLES_SET,n.VARIABLES_DEFAULT_NAME=t,n.VARIABLES_SET_CREATE_GET=lf("Create 'get %1'"),E(i);const a="variables_change",l=e.blocks.getBlockDefinition(a);Blockly.Blocks[a]={init:function(){this.jsonInit({message0:l.block.message0,args0:[{type:"field_variable",name:"VAR",variable:t},{type:"input_value",name:"VALUE",check:"Number"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:e.toolbox.getNamespaceColor("variables")}),T(this,a)},customContextMenu:function(e){if(!this.inDebugWorkspace()){let t={enabled:this.workspace.remainingCapacity()>0},n=this.getField("VAR").getText();t.text=lf("Create 'get {0}'",n);let o=goog.dom.createDom("field",null,n);o.setAttribute("name","VAR");let r=goog.dom.createDom("block",null,o);r.setAttribute("type","variables_get"),t.callback=Blockly.ContextMenu.callbackFactory(this,r),e.push(t)}}},n.NEW_VARIABLE_TITLE=lf("New variable name:"),n.RENAME_VARIABLE_TITLE=lf("Rename all '%1' variables to:")}(),function(){const n=Blockly.Msg;n.FUNCTION_CREATE_NEW=lf("Make a Function..."),n.FUNCTION_WARNING_DUPLICATE_ARG=lf("Functions cannot use the same argument name more than once."),n.FUNCTION_WARNING_ARG_NAME_IS_FUNCTION_NAME=lf("Argument names must not be the same as the function name."),n.FUNCTION_WARNING_EMPTY_NAME=lf("Function and argument names cannot be empty."),n.FUNCTIONS_DEFAULT_FUNCTION_NAME=lf("doSomething"),n.FUNCTIONS_DEFAULT_BOOLEAN_ARG_NAME=lf("bool"),n.FUNCTIONS_DEFAULT_STRING_ARG_NAME=lf("text"),n.FUNCTIONS_DEFAULT_NUMBER_ARG_NAME=lf("num"),n.FUNCTIONS_DEFAULT_CUSTOM_ARG_NAME=lf("arg"),n.PROCEDURES_HUE=e.toolbox.getNamespaceColor("functions"),n.REPORTERS_HUE=e.toolbox.getNamespaceColor("variables");const o="procedures_defnoreturn",r=e.blocks.getBlockDefinition(o);n.PROCEDURES_DEFNORETURN_TITLE=r.block.PROCEDURES_DEFNORETURN_TITLE,n.PROCEDURE_ALREADY_EXISTS=r.block.PROCEDURE_ALREADY_EXISTS,Blockly.Blocks.procedures_defnoreturn.init=function(){let t=new Blockly.FieldTextInput("",Blockly.Procedures.rename);this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(t,"NAME").appendField("","PARAMS"),this.setColour(e.toolbox.getNamespaceColor("functions")),this.arguments_=[],this.argumentVarModels_=[],this.setStartHat(!0),this.setStatements_(!0),this.statementConnection_=null},E(o);const i="procedures_callnoreturn",a=e.blocks.getBlockDefinition(i);n.PROCEDURES_CALLRETURN_TOOLTIP=r.tooltip.toString(),Blockly.Blocks.procedures_callnoreturn={init:function(){let t=new pxtblockly.FieldProcedure("");this.appendDummyInput("TOPROW").appendField(a.block.PROCEDURES_CALLNORETURN_TITLE).appendField(t,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(e.toolbox.getNamespaceColor("functions")),this.arguments_=[],this.quarkConnections_={},this.quarkIds_=null},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(e,t){Blockly.Names.equals(e,this.getProcedureCall())&&this.setFieldValue(t,"NAME")},onchange:function(t){if(this.workspace&&!this.workspace.isFlyout&&!this.isInsertionMarker())if(t.type==Blockly.Events.CREATE&&-1!=t.ids.indexOf(this.id)){let n=this.getProcedureCall(),o=Blockly.Procedures.getDefinition(n,this.workspace);if(!o||o.type==this.defType_&&JSON.stringify(o.arguments_)==JSON.stringify(this.arguments_)||(o=null),!o){Blockly.Events.setGroup(t.group);let n=Blockly.utils.xml.createElement("xml"),o=Blockly.utils.xml.createElement("block");o.setAttribute("type",this.defType_);let r=this.getRelativeToSurfaceXY(),i=r.x+Blockly.SNAP_RADIUS*(this.RTL?-1:1),s=r.y+2*Blockly.SNAP_RADIUS;o.setAttribute("x",i),o.setAttribute("y",s);let a=Blockly.utils.xml.createElement("field");a.setAttribute("name","NAME"),a.appendChild(document.createTextNode(this.getProcedureCall())),o.appendChild(a),n.appendChild(o),e.blocks.domToWorkspaceNoEvents(n,this.workspace),Blockly.Events.setGroup(!1)}}else if(t.type==Blockly.Events.DELETE){let e=this.getProcedureCall();Blockly.Procedures.getDefinition(e,this.workspace)||(Blockly.Events.setGroup(t.group),this.dispose(!0,!1),Blockly.Events.setGroup(!1))}},mutationToDom:function(){const e=document.createElement("mutation");return e.setAttribute("name",this.getProcedureCall()),e},domToMutation:function(e){const t=e.getAttribute("name");this.renameProcedure(this.getProcedureCall(),t)},customContextMenu:function(e){let t={enabled:!0};t.text=Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF;let n=this.getProcedureCall(),o=this.workspace;t.callback=function(){let e=Blockly.Procedures.getDefinition(n,o);e&&e.select()},e.push(t)},defType_:"procedures_defnoreturn"},E(i);const l="function_definition",c=e.blocks.getBlockDefinition(l);n.FUNCTIONS_EDIT_OPTION=c.block.FUNCTIONS_EDIT_OPTION,E(l);const u="function_call",d=e.blocks.getBlockDefinition(u);n.FUNCTIONS_CALL_TITLE=d.block.FUNCTIONS_CALL_TITLE,n.FUNCTIONS_GO_TO_DEFINITION_OPTION=d.block.FUNCTIONS_GO_TO_DEFINITION_OPTION,E(u),E("function_call_output");const g="function_return";Blockly.Blocks[g]={init:function(){t.initReturnStatement(this)},onchange:function(e){const t=this;if(!t.workspace||t.workspace.isFlyout)return;const n=e.type===Blockly.Events.BLOCK_CREATE&&-1!=e.ids.indexOf(t.id),o=e.type===Blockly.Events.END_DRAG&&-1!=e.allNestedIds.indexOf(t.id);if(n||o){const n=t.getRootBlock();if(n.type===g||null!=n.previousConnection)return;n.type!==l&&(Blockly.Events.setGroup(e.group),t.previousConnection.disconnect(),Blockly.Events.setGroup(!1))}}},E(g),Blockly.Procedures.flyoutCategory=function(t){let n=[];if(!e.appTarget.appTheme.hideFlyoutHeadings){let t=p(lf("Functions"),e.toolbox.getNamespaceColor("functions"),e.toolbox.getNamespaceIcon("functions"),"blocklyFlyoutIconfunctions");n.push(t)}const o=lf("Make a Function..."),r=lf("New function name:");let i=Blockly.utils.xml.createElement("button");i.setAttribute("text",o),i.setAttribute("callbackKey","CREATE_FUNCTION");let s=n=>{let o=t.getTopBlocks(!0)[0],r=10,i=10;if(o){let e=o.getRelativeToSurfaceXY();r=e.x+Blockly.SNAP_RADIUS*(o.RTL?-1:1),i=e.y+2*Blockly.SNAP_RADIUS}let s=Blockly.utils.xml.createElement("xml"),a=Blockly.utils.xml.createElement("block");a.setAttribute("type","procedures_defnoreturn"),a.setAttribute("x",String(r)),a.setAttribute("y",String(i));let l=Blockly.utils.xml.createElement("field");l.setAttribute("name","NAME"),l.appendChild(document.createTextNode(n)),a.appendChild(l),s.appendChild(a);let c=e.blocks.domToWorkspaceNoEvents(s,t);Blockly.hideChaff();let u=t.getBlockById(c[0]);u.select(),t.centerOnBlock(u.id)};function a(t,o){for(let r=0;r<t.length;r++){let i=t[r][0],s=(t[r][1],Blockly.utils.xml.createElement("block"));s.setAttribute("type",o),s.setAttribute("gap","16"),s.setAttribute("colour",e.toolbox.getNamespaceColor("functions"));let a=goog.dom.createDom("field",null,i);a.setAttribute("name","NAME"),s.appendChild(a),n.push(s)}}return t.registerButtonCallback("CREATE_FUNCTION",(function(n){let i=n=>{Blockly.prompt(r,n,(function(n){e.tickEvent("blocks.makeafunction"),n&&(n=n.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""))==o&&(n=null),n&&(t.getVariable(n)?Blockly.alert(Blockly.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",n.toLowerCase()),(function(){i(n)})):Blockly.Procedures.isLegalName_(n,t)?s(n):Blockly.alert(Blockly.Msg.PROCEDURE_ALREADY_EXISTS.replace("%1",n.toLowerCase()),(function(){i(n)})))}))};i("doSomething")})),n.push(i),a(Blockly.Procedures.allProcedures(t)[0],"procedures_callnoreturn"),n};const h=Blockly.Functions.flyoutCategory;Blockly.Functions.flyoutCategory=t=>{const n=h(t);if(n.length>1){let e=A();n.splice(1,0,e)}const o=Blockly.Functions.getAllFunctionDefinitionBlocks(t).filter((e=>e.getDescendants(!1).some((e=>"function_return"===e.type&&e.getInputTargetBlock("RETURN_VALUE"))))).map((e=>e.getField("function_name").getText())),r=p(lf("Functions"),e.toolbox.getNamespaceColor("functions"),e.toolbox.getNamespaceIcon("functions"),"blocklyFlyoutIconfunctions");n.unshift(r);const i=[];for(const e of n)if(i.push(e),"function_call"===e.getAttribute("type")){const t=e.children.item(0);if(t){const n=t.getAttribute("name");if(o.some((e=>e===n))){const t=e.cloneNode(!0);t.setAttribute("type","function_call_output"),i.push(t)}}}return i};const f={number:e.blocks.defaultIconForArgType("number"),boolean:e.blocks.defaultIconForArgType("boolean"),string:e.blocks.defaultIconForArgType("string"),Array:e.blocks.defaultIconForArgType("Array")},_={},m=e.appTarget.runtime&&e.appTarget.runtime.functionsOptions;m&&m.extraFunctionEditorTypes&&m.extraFunctionEditorTypes.forEach((t=>{f[t.typeName]=t.icon||e.blocks.defaultIconForArgType(),t.defaultName&&(_[t.typeName]=t.defaultName)}));Blockly.PXTBlockly.FunctionUtils.argumentIcons=f,Blockly.PXTBlockly.FunctionUtils.argumentDefaultNames=_,Blockly.Blocks.argument_reporter_custom&&(Blockly.Blocks.argument_reporter_custom.domToMutation=function(e){const t=e.getAttribute("typename");this.typeName_=t,v(this,t,s)});const y=Blockly.Functions.makeCreateCallOption;Blockly.Msg.FUNCTIONS_CREATE_CALL_OPTION="",Blockly.Functions.makeCreateCallOption=function(t){let n=y(t),o=t.getField("function_name").getText();return n.text=e.Util.lf("Create 'call {0}'",o),n}}(),function(){const t=Blockly.Msg,n="lists_create_with",o=e.blocks.getBlockDefinition(n);t.LISTS_CREATE_EMPTY_TITLE=o.block.LISTS_CREATE_EMPTY_TITLE,t.LISTS_CREATE_WITH_INPUT_WITH=o.block.LISTS_CREATE_WITH_INPUT_WITH,t.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD=o.block.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD,t.LISTS_CREATE_WITH_ITEM_TITLE=o.block.LISTS_CREATE_WITH_ITEM_TITLE,E(n);const r="lists_length",i=e.blocks.getBlockDefinition(r);t.LISTS_LENGTH_TITLE=i.block.LISTS_LENGTH_TITLE,Blockly.Blocks[r].init=function(){this.jsonInit({message0:t.LISTS_LENGTH_TITLE,args0:[{type:"input_value",name:"VALUE",check:["Array"]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND})},E(r)}(),function(){const t=Blockly.Msg,n="controls_repeat_ext",o=e.blocks.getBlockDefinition(n);t.CONTROLS_REPEAT_TITLE=o.block.CONTROLS_REPEAT_TITLE,t.CONTROLS_REPEAT_INPUT_DO=o.block.CONTROLS_REPEAT_INPUT_DO,E(n);const r="device_while",i=e.blocks.getBlockDefinition(r);Blockly.Blocks[r]={init:function(){this.jsonInit({message0:i.block.message0,args0:[{type:"input_value",name:"COND",check:"Boolean"}],previousStatement:null,nextStatement:null,colour:e.toolbox.getNamespaceColor("loops")}),this.appendStatementInput("DO").appendField(i.block.appendField),T(this,r)}};const s="pxt_controls_for",a=e.blocks.getBlockDefinition(s);Blockly.Blocks[s]={init:function(){this.jsonInit({message0:a.block.message0,args0:[{type:"input_value",name:"VAR",variable:a.block.variable,check:"Variable"},{type:"input_value",name:"TO",check:"Number"}],previousStatement:null,nextStatement:null,colour:e.toolbox.getNamespaceColor("loops"),inputsInline:!0}),this.appendStatementInput("DO").appendField(a.block.appendField);let t=this;S(this,s,a.name,(function(){return e.U.rlf(a.tooltip,t.getInputTargetBlock("VAR")?t.getInputTargetBlock("VAR").getField("VAR").getText():"")}),a.url,String(e.toolbox.getNamespaceColor("loops")))},getVars:function(){return[this.getField("VAR").getText()]},renameVar:function(e,t){const n=this.getField("VAR");Blockly.Names.equals(e,n.getText())&&n.setValue(t)}};const l="controls_simple_for",c=e.blocks.getBlockDefinition(l);Blockly.Blocks[l]={init:function(){this.jsonInit({message0:c.block.message0,args0:[{type:"field_variable",name:"VAR",variable:c.block.variable},{type:"input_value",name:"TO",check:"Number"}],previousStatement:null,nextStatement:null,colour:e.toolbox.getNamespaceColor("loops"),inputsInline:!0}),this.appendStatementInput("DO").appendField(c.block.appendField);let t=this;S(this,l,c.name,(function(){return e.U.rlf(c.tooltip,t.getField("VAR").getText())}),c.url,String(e.toolbox.getNamespaceColor("loops")))},getVars:function(){return[this.getField("VAR").getText()]},renameVar:function(e,t){const n=this.getField("VAR");Blockly.Names.equals(e,n.getText())&&n.setValue(t)},customContextMenu:function(e){if(!this.isCollapsed()&&!this.inDebugWorkspace()){let t={enabled:!0},n=this.getField("VAR").getText();t.text=lf("Create 'get {0}'",n);let o=goog.dom.createDom("field",null,n);o.setAttribute("name","VAR");let r=goog.dom.createDom("block",null,o);r.setAttribute("type","variables_get"),t.callback=Blockly.ContextMenu.callbackFactory(this,r),e.push(t)}}};const u=e.blocks.getBlockDefinition(ts.pxtc.TS_BREAK_TYPE);Blockly.Blocks[pxtc.TS_BREAK_TYPE]={init:function(){const t=e.toolbox.getNamespaceColor("loops");this.jsonInit({message0:u.block.message0,inputsInline:!0,previousStatement:null,nextStatement:null,colour:t}),S(this,ts.pxtc.TS_BREAK_TYPE,u.name,u.tooltip,u.url,t,void 0,void 0,!1)}};const p=e.blocks.getBlockDefinition(ts.pxtc.TS_CONTINUE_TYPE);Blockly.Blocks[pxtc.TS_CONTINUE_TYPE]={init:function(){const t=e.toolbox.getNamespaceColor("loops");this.jsonInit({message0:p.block.message0,inputsInline:!0,previousStatement:null,nextStatement:null,colour:t}),S(this,ts.pxtc.TS_CONTINUE_TYPE,p.name,p.tooltip,p.url,t,void 0,void 0,!1)}};const d="#cccccc";Blockly.Blocks[pxtc.COLLAPSED_BLOCK]={init:function(){this.jsonInit({message0:"...",inputsInline:!0,previousStatement:null,nextStatement:null,colour:d}),S(this,ts.pxtc.COLLAPSED_BLOCK,"...",lf("a few blocks"),void 0,d,void 0,void 0,!1)}}}(),function(){const t=Blockly.Msg,n="controls_if",o=e.blocks.getBlockDefinition(n),r=o.tooltip;t.CONTROLS_IF_MSG_IF=o.block.CONTROLS_IF_MSG_IF,t.CONTROLS_IF_MSG_THEN=o.block.CONTROLS_IF_MSG_THEN,t.CONTROLS_IF_MSG_ELSE=o.block.CONTROLS_IF_MSG_ELSE,t.CONTROLS_IF_MSG_ELSEIF=o.block.CONTROLS_IF_MSG_ELSEIF,t.CONTROLS_IF_TOOLTIP_1=r.CONTROLS_IF_TOOLTIP_1,t.CONTROLS_IF_TOOLTIP_2=r.CONTROLS_IF_TOOLTIP_2,t.CONTROLS_IF_TOOLTIP_3=r.CONTROLS_IF_TOOLTIP_3,t.CONTROLS_IF_TOOLTIP_4=r.CONTROLS_IF_TOOLTIP_4,E(n);const i="logic_compare",s=e.blocks.getBlockDefinition(i).tooltip;t.LOGIC_COMPARE_TOOLTIP_EQ=s.LOGIC_COMPARE_TOOLTIP_EQ,t.LOGIC_COMPARE_TOOLTIP_NEQ=s.LOGIC_COMPARE_TOOLTIP_NEQ,t.LOGIC_COMPARE_TOOLTIP_LT=s.LOGIC_COMPARE_TOOLTIP_LT,t.LOGIC_COMPARE_TOOLTIP_LTE=s.LOGIC_COMPARE_TOOLTIP_LTE,t.LOGIC_COMPARE_TOOLTIP_GT=s.LOGIC_COMPARE_TOOLTIP_GT,t.LOGIC_COMPARE_TOOLTIP_GTE=s.LOGIC_COMPARE_TOOLTIP_GTE,E(i);const a="logic_operation",l=e.blocks.getBlockDefinition(a),c=l.tooltip;t.LOGIC_OPERATION_AND=l.block.LOGIC_OPERATION_AND,t.LOGIC_OPERATION_OR=l.block.LOGIC_OPERATION_OR,t.LOGIC_OPERATION_TOOLTIP_AND=c.LOGIC_OPERATION_TOOLTIP_AND,t.LOGIC_OPERATION_TOOLTIP_OR=c.LOGIC_OPERATION_TOOLTIP_OR,E(a);const u="logic_negate",p=e.blocks.getBlockDefinition(u);t.LOGIC_NEGATE_TITLE=p.block.LOGIC_NEGATE_TITLE,E(u);const d="logic_boolean",g=e.blocks.getBlockDefinition(d);t.LOGIC_BOOLEAN_TRUE=g.block.LOGIC_BOOLEAN_TRUE,t.LOGIC_BOOLEAN_FALSE=g.block.LOGIC_BOOLEAN_FALSE,E(d)}(),function(){const t=e.blocks.getBlockDefinition("text");C("text",t.name,t.tooltip,t.url,Blockly.Colours.textField,Blockly.Colours.textField,Blockly.Colours.textField);const n=Blockly.Msg,o="text_length",r=e.blocks.getBlockDefinition(o);n.TEXT_LENGTH_TITLE=r.block.TEXT_LENGTH_TITLE,Blockly.Blocks[o].init=function(){this.jsonInit({message0:n.TEXT_LENGTH_TITLE,args0:[{type:"input_value",name:"VALUE",check:["String"]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND})},E(o);const i="text_join",s=e.blocks.getBlockDefinition(i);n.TEXT_JOIN_TITLE_CREATEWITH=s.block.TEXT_JOIN_TITLE_CREATEWITH,E(i)}(),function(){const t=(e,t)=>Math.abs(t-(e.left+e.width/2)),n=Blockly.BlockDragger.prototype.dragBlock;Blockly.BlockDragger.prototype.dragBlock=function(o,r){const i=document.getElementsByClassName("blocklyToolboxDiv")[0],s=document.getElementsByClassName("blocklyTreeRoot")[0]||document.getElementsByClassName("blocklyFlyout")[0],a=document.getElementById("blocklyTrashIcon");if(s&&a){const n=t(s.getBoundingClientRect(),o.clientX);if(n<200){const t=n/200;a.style.opacity=""+(1-t),a.style.display="block",i&&(s.style.opacity=`${t}`,n<50&&e.BrowserUtils.addClass(i,"blocklyToolboxDeleting"))}else a.style.display="none",s.style.opacity="1",i&&e.BrowserUtils.removeClass(i,"blocklyToolboxDeleting")}return n.call(this,o,r)};const o=Blockly.BlockDragger.prototype.endBlockDrag;Blockly.BlockDragger.prototype.endBlockDrag=function(t,n){o.call(this,t,n);const r=document.getElementsByClassName("blocklyToolboxDiv")[0],i=document.getElementsByClassName("blocklyTreeRoot")[0]||document.getElementsByClassName("blocklyFlyout")[0],s=document.getElementById("blocklyTrashIcon");s&&i&&(s.style.display="none",i.style.opacity="1",r&&e.BrowserUtils.removeClass(r,"blocklyToolboxDeleting"))}}(),Blockly.Blocks[pxtc.TS_DEBUGGER_TYPE]={init:function(){let t=this;t.setColour(e.toolbox.getNamespaceColor("debug")),t.setPreviousStatement(!0),t.setNextStatement(!0),t.setInputsInline(!1),t.appendDummyInput("ON_OFF").appendField(new Blockly.FieldLabel(lf("breakpoint"),void 0),"DEBUGGER").appendField(new pxtblockly.FieldBreakpoint("1",{type:"number"}),"ON_OFF"),S(this,pxtc.TS_DEBUGGER_TYPE,lf("Debugger statement"),lf("A debugger statement invokes any available debugging functionality"),"/javascript/debugger",e.toolbox.getNamespaceColor("debug"))}},Blockly.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="",function(){const t=e=>{if(e.disabled)return lf("This block is disabled and will not run. Attach this block to an event to enable it.");let t=e.tooltip;for(;goog.isFunction(t);)t=t(e);return t};Blockly.Tooltip.show_=function(){const n=Blockly.Tooltip;if(n.poisonedElement_=n.element_,!Blockly.Tooltip.DIV)return;goog.dom.removeChildren(Blockly.Tooltip.DIV);function o(){let e=n.element_.RTL,t=goog.dom.getViewportSize(),o=Blockly.Tooltip.DIV;o.style.direction=e?"rtl":"ltr",o.style.display="block",Blockly.Tooltip.visible=!0;let r=n.lastX_;e?r-=Blockly.Tooltip.OFFSET_X+o.offsetWidth:r+=Blockly.Tooltip.OFFSET_X;let i=n.lastY_+Blockly.Tooltip.OFFSET_Y;i+o.offsetHeight>t.height+window.scrollY&&(i-=o.offsetHeight+2*Blockly.Tooltip.OFFSET_Y),e?r=Math.max(Blockly.Tooltip.MARGINS-window.scrollX,r):r+o.offsetWidth>t.width+window.scrollX-2*Blockly.Tooltip.MARGINS&&(r=t.width-o.offsetWidth-2*Blockly.Tooltip.MARGINS),o.style.top=i+"px",o.style.left=r+"px"}if(n.element_.codeCard){const r=e.docs.codeCard.render({header:t(n.element_)});Blockly.Tooltip.DIV.appendChild(r),o()}else{let e=t(n.element_);e=Blockly.utils._string.wrap(e,Blockly.Tooltip.LIMIT);let r=e.split("\n");for(let e=0;e<r.length;e++){let t=document.createElement("div");t.appendChild(document.createTextNode(r[e])),Blockly.Tooltip.DIV.appendChild(t)}o()}}}(),Blockly.Block.prototype.setEnabled=function(e){if(this.disabled==e){let t=Blockly.Events.recordUndo;Blockly.Events.recordUndo=!1,Blockly.Events.fire(new Blockly.Events.BlockChange(this,"disabled",null,this.disabled,!e)),Blockly.Events.recordUndo=t,this.disabled=!e}})}function b(e,t){const n=e.split(/\s*\|\s*/),r=[];for(const e of n)switch(e){case"number":r.push("Number");break;case"string":r.push("String");break;case"boolean":r.push("Boolean");break;case"T":case"any":return null;case"void":return;default:if(o(e)){if(n.length>1)return null;r.push("Array")}const i=t.apis.byQName[e];i&&i.extendsTypes&&0<i.extendsTypes.length?r.push(...i.extendsTypes):r.push(e)}return r}function v(e,t,n){const o=b(t,n);(o||null===o)&&e.setOutput(!0,o)}function T(t,n){const o=e.blocks.getBlockDefinition(n);S(t,n,o.name,o.tooltip,o.url,e.toolbox.getNamespaceColor(o.category))}function E(t){const n=e.blocks.getBlockDefinition(t);C(t,n.name,n.tooltip,n.url,e.toolbox.getNamespaceColor(n.category))}function S(n,o,r,i,s,a,l,c,u){!i||"string"!=typeof i&&"function"!=typeof i||n.setTooltip(i),s&&n.setHelpUrl(s),a&&n.setColour(a,l,c),u&&n.setDeletable(!1);let p=document.getElementById("blocklyToolboxDefinition"),d=p?t.getFirstChildWithAttr(p,"block","type",o):void 0;n.codeCard={header:r,name:r,software:1,description:goog.isFunction(i)?i(n):i,blocksXml:d?'<xml xmlns="http://www.w3.org/1999/xhtml">'+(f(d)||`<block type="${o}"></block>`)+"</xml>":void 0,url:s},e.Util.isTranslationMode()&&e.blocks.promptTranslateBlock&&(n.customContextMenu=t=>{const r=e.blocks.getBlockDefinition(n.type);r&&r.translationIds&&t.push({enabled:!0,text:lf("Translate this block"),callback:function(){e.blocks.promptTranslateBlock(o,r.translationIds)}})})}function C(e,t,n,o,r,i,s){let a=Blockly.Blocks[e],l=a.init;l&&(a.init=function(){l.call(this);S(this,e,t,n,o,r,i,s)})}function x(e){delete Blockly.Blocks[e.attributes.blockId],delete l[e.attributes.blockId]}function B(t,n,o,r){const i=document.createElement(r?"shadow":"block");i.setAttribute("type",e.Util.htmlEscape(t));const s=document.createElement("field");return s.setAttribute("name",e.Util.htmlEscape(n)),s.textContent=e.Util.htmlEscape(o),i.appendChild(s),i}function A(){const e=document.createElement("block");e.setAttribute("type","function_return");const t=document.createElement("value");t.setAttribute("name","RETURN_VALUE"),e.appendChild(t);const n=B("math_number","NUM","0",!0);return t.appendChild(n),e}t.installHelpResources=C,t.onShowContextMenu=void 0,t.mkPredicateBlock=function(e){const t=document.createElement("block");t.setAttribute("type",e);const n=document.createElement("value");n.setAttribute("name","PREDICATE"),t.appendChild(n);const o=B("logic_boolean","BOOL","TRUE",!0);return n.appendChild(o),t},t.mkFieldBlock=B,t.mkReturnStatementBlock=A;let I={};function D(e,t){return{field:e,name:t}}function N(t,n){return e.Util.values(t.byQName).filter((e=>4===e.kind&&e.attributes.fixedInstance&&function(e,t,n){if(t==n)return!0;let o=e.byQName[t];return!(!o||!o.extendsTypes)&&o.extendsTypes.indexOf(n)>=0}(t,e.retType,n)))}function w(e){return e.data?/^(?:\d+;?)+$/.test(e.data)?{commentRefs:e.data.split(";"),fieldData:{}}:JSON.parse(e.data):{commentRefs:[],fieldData:{}}}function R(e,t){e.data=JSON.stringify(t)}t.getFixedInstanceDropdownValues=N,t.generateIcons=function(t){const n=new e.ImageConverter;t.forEach((t=>{t.attributes.jresURL&&!t.attributes.iconURL&&e.U.startsWith(t.attributes.jresURL,"data:image/x-mkcd-f")&&(t.attributes.iconURL=n.convert(t.attributes.jresURL))}))},t.setVarFieldValue=function(e,t,n){const o=e.getField(t),r=e.workspace.getAllVariables();let i=!1;if(r&&r.length)for(let e=0;e<r.length;e++){const t=r[e];t.name===n&&(o.setValue(t.getId()),i=!0)}if(!i){o.initModel();const e=o.getVariable();e.name=n,o.setValue(e.getId())}},t.getBlockData=w,t.setBlockData=R,t.setBlockDataForField=function(e,t,n){const o=w(e);o.fieldData[t]=n,R(e,o)},t.getBlockDataForField=function(e,t){return w(e).fieldData[t]}}(e.blocks||(e.blocks={}))}(pxt||(pxt={})),function(e){!function(t){let n;!function(e){e.ObjectDestructuringMutator="objectdestructuring",e.RestParameterMutator="restparameter",e.DefaultInstanceMutator="defaultinstance"}(n=t.MutatorTypes||(t.MutatorTypes={})),t.addMutation=function(e,t,o){let a;switch(o){case n.ObjectDestructuringMutator:if(!t.parameters||t.parameters.length<1)console.error("Destructuring mutations require at least one parameter");else{let e=!1;for(const n of t.parameters)if(-1!==n.type.indexOf("=>")){if(!n.properties||0===n.properties.length)return void console.error("Destructuring mutations only supported for functions with an event parameter that has multiple properties");e=!0}if(!e)return void console.error("Destructuring mutations must have an event parameter")}a=new r(e,t);break;case n.RestParameterMutator:a=new i(e,t);break;case n.DefaultInstanceMutator:a=new s(e,t);break;default:return void console.warn("Ignoring unknown mutation type: "+o)}e.mutationToDom=a.mutationToDom.bind(a),e.domToMutation=a.domToMutation.bind(a),e.compose=a.compose.bind(a),e.decompose=a.decompose.bind(a),e.mutation=a},t.mutateToolboxBlock=function(e,t,o){const a=document.createElement("mutation");switch(t){case n.ObjectDestructuringMutator:a.setAttribute(r.propertiesAttributeName,o);break;case n.RestParameterMutator:a.setAttribute(i.countAttributeName,o);break;case n.DefaultInstanceMutator:a.setAttribute(s.attributeName,o);default:return void console.warn("Ignoring unknown mutation type: "+t)}e.appendChild(a)};class o{constructor(e,t){this.info=t,this.block=e,this.topBlockType=this.block.type+"_mutator";const n=this.getSubBlockNames();this.initializeMutatorTopBlock(),this.initializeMutatorSubBlocks(n);const o=n.map((e=>e.type));this.block.setMutator(new Blockly.Mutator(o))}compose(e){const t=e.getDescendants(!1).map((e=>({type:e.type,name:e.inputList[0].name})));t.shift(),this.updateBlock(t)}decompose(e){const t=e.newBlock(this.topBlockType);t.initSvg();for(const n of t.inputList)if(n.name===o.mutatorStatmentInput){let t=n.connection;this.getVisibleBlockTypes().forEach((n=>{const o=e.newBlock(n);o.initSvg(),t.connect(o.previousConnection),t=o.nextConnection}));break}return t}compileMutation(e,t){}getDeclaredVariables(){}isDeclaredByMutation(e){return!1}initializeMutatorSubBlock(e,t,n){e.appendDummyInput(t).appendField(t),e.setColour(n),e.setNextStatement(!0),e.setPreviousStatement(!0)}initializeMutatorTopBlock(){const e=this.info.attributes.mutateText,t=this.block.getColour();Blockly.Blocks[this.topBlockType]=Blockly.Blocks[this.topBlockType]||{init:function(){const n=this;n.appendDummyInput().appendField(e),n.setColour(t),n.appendStatementInput(o.mutatorStatmentInput)}}}initializeMutatorSubBlocks(e){const t=this.block.getColour(),n=this.initializeMutatorSubBlock.bind(this);e.forEach((e=>{Blockly.Blocks[e.type]=Blockly.Blocks[e.type]||{init:function(){n(this,e.name,t)}}}))}}o.mutatorStatmentInput="PROPERTIES",o.mutatedVariableInputName="properties";class r extends o{constructor(e,t){super(e,t),this.currentlyVisible=[],this.parameterRenames={},this.prefix=this.info.attributes.mutatePrefix,this.block.appendDummyInput(o.mutatedVariableInputName),this.block.appendStatementInput("HANDLER").setCheck("null")}getMutationType(){return n.ObjectDestructuringMutator}compileMutation(e,n){if(!this.info.attributes.mutatePropertyEnum&&!this.parameters.length)return;const o=`function ({ ${this.parameters.map((n=>{const o=this.block.getField(n),r=o&&o.getText(),i=t.escapeVarName(n,e);return r!==n?(this.parameterRenames[n]=r,`${n}: ${t.escapeVarName(r,e)}`):i})).join(", ")} })`;return this.info.attributes.mutatePropertyEnum?t.mkText(` [${this.parameters.map((e=>`${this.info.attributes.mutatePropertyEnum}.${e}`)).join(", ")}],${o}`):t.mkText(o)}getDeclaredVariables(){const e={};return this.parameters.forEach((t=>{e[this.getVarFieldValue(t)]=this.parameterTypes[t]})),e}isDeclaredByMutation(e){return this.parameters.some((t=>this.getVarFieldValue(t)===e))}mutationToDom(){const t=document.createElement("mutation"),n=this.parameters.map((t=>{const n=this.getVarFieldValue(t);return n!==t&&(this.parameterRenames[t]=e.Util.htmlEscape(n)),e.Util.htmlEscape(t)})).join(",");t.setAttribute(r.propertiesAttributeName,n);for(const e in this.parameterRenames)e===this.parameterRenames[e]&&delete this.parameterRenames[e];return t.setAttribute(r.renameAttributeName,JSON.stringify(this.parameterRenames)),t}domToMutation(e){const t=e.getAttribute(r.propertiesAttributeName);if(t){const n=t.split(","),o=[];if(void 0===this.paramIndex&&(this.paramIndex=this.getParameterIndex()),n.forEach((e=>{const t=e.split(":");this.info.parameters[this.paramIndex].properties.some((e=>e.name===t[0]))&&o.push({property:t[0],newName:t[1]})})),this.parameterRenames=void 0,e.hasAttribute(r.renameAttributeName))try{this.parameterRenames=JSON.parse(e.getAttribute(r.renameAttributeName))}catch(e){console.warn("Ignoring invalid rename map in saved block mutation")}this.parameterRenames=this.parameterRenames||{},this.parameters=[],o.forEach((e=>{this.parameters.push(e.property),e.newName&&e.newName!==e.property&&(this.parameterRenames[e.property]=e.newName)})),this.updateVisibleProperties(),o.filter((e=>!!e.newName)).forEach((e=>this.setVarFieldValue(e.property,e.newName)))}}getVarFieldValue(e){const t=this.block.getField(e);return t&&t.getText()}setVarFieldValue(e,n){this.block.getField(e);this.block.getField(e)&&t.setVarFieldValue(this.block,e,n)}updateBlock(e){this.parameters=[],e.forEach((e=>{-1===this.parameters.indexOf(e.name)&&this.parameters.push(e.name)})),this.updateVisibleProperties()}getSubBlockNames(){return this.parameters=[],this.parameterTypes={},void 0===this.paramIndex&&(this.paramIndex=this.getParameterIndex()),this.info.parameters[this.paramIndex].properties.map((e=>(this.parameterTypes[e.name]=e.type,{type:this.propertyId(e.name),name:e.name})))}getVisibleBlockTypes(){return this.currentlyVisible.map((e=>this.propertyId(e)))}updateVisibleProperties(){if(e.Util.listsEqual(this.currentlyVisible,this.parameters))return;const t=this.block.inputList.find((e=>e.name===o.mutatedVariableInputName));this.prefix&&0===this.currentlyVisible.length&&t.appendField(this.prefix,r.prefixLabel),this.currentlyVisible.forEach((e=>{if(-1===this.parameters.indexOf(e)){const n=this.getVarFieldValue(e);n!==e&&(this.parameterRenames[e]=n),t.removeField(e)}})),this.parameters.forEach((e=>{if(-1===this.currentlyVisible.indexOf(e)){const n=this.parameterRenames[e]||e;t.appendField(new Blockly.FieldVariable(n),e)}})),this.prefix&&0===this.parameters.length&&t.removeField(r.prefixLabel),this.currentlyVisible=this.parameters}propertyId(e){return this.block.type+"_"+e}getParameterIndex(){for(let e=0;e<this.info.parameters.length;e++)if(-1!==this.info.parameters[e].type.indexOf("=>"))return e}}r.propertiesAttributeName="callbackproperties",r.renameAttributeName="renamemap",r.prefixLabel="0prefix_label_";class i extends o{constructor(){super(...arguments),this.count=0}getMutationType(){return n.RestParameterMutator}compileMutation(e,n){const o=[];return this.forEachInput((r=>o.push(t.compileExpression(e,r,n)))),t.mkGroup(o)}mutationToDom(){const e=document.createElement("mutation");return e.setAttribute(i.countAttributeName,this.count.toString()),e}domToMutation(e){const t=e.getAttribute(i.countAttributeName);if(t){try{this.count=parseInt(t)}catch(e){return}for(let e=0;e<this.count;e++)this.addNumberField(!1,e)}}updateBlock(e){if(e){const t=Math.abs(this.count-e.length);if(this.count<e.length)for(let e=0;e<t;e++)this.addNumberField(!0,this.count);else if(this.count>e.length)for(let e=0;e<t;e++)this.removeNumberField()}}getSubBlockNames(){return[{name:"Value",type:i.entryTypeName}]}getVisibleBlockTypes(){const e=[];return this.forEachInput((()=>e.push(i.entryTypeName))),e}addNumberField(e,t){const n=this.block.appendValueInput(i.valueInputPrefix+t).setCheck("Number");if(e){const e=this.block.workspace.newBlock("math_number");e.initSvg(),e.setShadow(!0),n.connection.connect(e.outputConnection),this.block.workspace.render(),this.count++}}removeNumberField(){this.count>0&&this.block.removeInput(i.valueInputPrefix+(this.count-1)),this.count--}forEachInput(e){for(let t=0;t<this.count;t++)e(this.block.getInputTargetBlock(i.valueInputPrefix+t),t)}}i.countAttributeName="count",i.entryTypeName="entry",i.valueInputPrefix="value_input_";class s extends o{constructor(){super(...arguments),this.showing=!1}getMutationType(){return n.DefaultInstanceMutator}compileMutation(e,n){if(this.showing){const o=this.block.getInputTargetBlock(s.instanceInputName);if(o)return t.compileExpression(e,o,n)}}mutationToDom(){const e=document.createElement("mutation");return e.setAttribute(s.attributeName,this.showing?"true":"false"),e}domToMutation(e){const t=e.getAttribute(s.attributeName);t?this.updateShape("true"===t):this.updateShape(!1)}updateBlock(e){this.updateShape(!(!e||!e.length))}getSubBlockNames(){return[{name:"Instance",type:s.instanceSubBlockType}]}getVisibleBlockTypes(){const e=[];return this.showing&&e.push(s.instanceSubBlockType),e}updateShape(e){this.showing!==e&&(e&&!this.block.getInputTargetBlock(s.instanceInputName)?this.block.appendValueInput(s.instanceInputName):this.block.removeInput(s.instanceInputName),this.showing=e)}}s.attributeName="showing",s.instanceInputName="__instance__",s.instanceSubBlockType="instance"}(e.blocks||(e.blocks={}))}(pxt||(pxt={})),function(e){!function(t){let n,o,r;function i(){return n||(o=document.createElement("div"),o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.width="1px",o.style.height="1px",document.body.appendChild(o),n=Blockly.inject(o,{move:{scrollbars:!1},readOnly:!0,sounds:!1,media:e.webConfig.commitCdnUrl+"blockly/media/",rtl:e.Util.isUserLanguageRtl(),renderer:"pxt"})),e.blocks.clearWithoutEvents(n),n}function s(){n&&n.dispose(),n=void 0}function a(t={emPixels:18,layout:r.Align}){switch(t.splitSvg?r.Align:t.layout||r.Flow){case r.Align:e.blocks.layout.verticalAlign(n,t.emPixels||18);break;case r.Flow:e.blocks.layout.flow(n,{ratio:t.aspectRatio,useViewWidth:t.useViewWidth});break;case r.Clean:n.cleanUp_&&n.cleanUp_()}let i=n.getMetrics();const s=o.querySelectorAll("svg")[0].cloneNode(!0);return e.blocks.layout.cleanUpBlocklySvg(s),e.U.toArray(s.querySelectorAll(".blocklyBlockCanvas,.blocklyBubbleCanvas")).forEach((e=>e.setAttribute("transform",`translate(${-i.contentLeft}, ${-i.contentTop}) scale(1)`))),s.setAttribute("viewBox",`0 0 ${i.contentWidth} ${i.contentHeight}`),t.emPixels&&(s.style.width=i.contentWidth/t.emPixels+"em",s.style.height=i.contentHeight/t.emPixels+"em"),t.splitSvg?e.blocks.layout.splitSvg(s,n,t.emPixels):s}!function(e){e[e.None=0]="None",e[e.Align=1]="Align",e[e.Clean=3]="Clean",e[e.Flow=4]="Flow"}(r=t.BlockLayout||(t.BlockLayout={})),t.initRenderingWorkspace=i,t.cleanRenderingWorkspace=s,t.renderWorkspace=a,t.render=function(t,o={emPixels:18,layout:r.Align}){i();try{let r=t||'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',i=Blockly.Xml.textToDom(r);return e.blocks.domToWorkspaceNoEvents(i,n),a(o)}catch(t){return void e.reportException(t)}finally{s()}},t.blocksMetrics=function(e){const t=e.getTopBlocks(!1);if(!t.length)return{width:0,height:0};let n;return t.forEach((e=>{const t=e.getBoundingRectangle();n?(n.l=Math.min(n.l,t.left),n.r=Math.max(n.r,t.right),n.t=Math.min(n.t,t.top),n.b=Math.min(n.b,t.bottom)):n={l:t.left,r:t.right,t:t.top,b:t.bottom}})),{width:n.r-n.l,height:n.b-n.t}}}(e.blocks||(e.blocks={}))}(pxt||(pxt={})),function(e){!function(e){function t(e,t){let o=[];for(const r in e.children){const i=e.children[r];if("block"===i.tagName)if(t){const e=i.getAttribute("type");e&&e===t&&o.push(i)}else o.push(i);else{const e=n(i);e&&(o=o.concat(e))}}return o}function n(e,n){let o=t(e,n);return o.length?o[0]:null}e.findRootBlocks=t,e.findRootBlock=n}(e.blocks||(e.blocks={}))}(pxt||(pxt={})),function(e){!function(t){!function(t){t.render=function(t,n={}){const o=t.url?/^[^:]+:\/\//.test(t.url)?t.url:"/"+t.url.replace(/^\.?\/?/,""):t.youTubeId?`https://youtu.be/${t.youTubeId}`:void 0,r=!!o,i=(e,t,n="div",o="")=>{let r=document.createElement(n);return t&&(r.className=t),e&&e.appendChild(r),o&&r.appendChild(document.createTextNode(o+"")),r};let s=i(null,"ui "+(t.style||"card")+" "+(t.color||"")+(r?" link":""),r?"a":"div");if(s.setAttribute("role","option"),s.setAttribute("aria-selected","true"),r){const e=s;e.href=o,/^https?:\/\//.test(o)&&(e.target="_blank")}if(!n.hideHeader&&t.header){let e=i(s,"ui content "+(t.responsive?" tall desktop only":""));t.header&&i(e,"description","span",t.header)}const a=(n.shortName?t.shortName:"")||t.name;let l=i(s,"ui image"+(t.responsive?" tall landscape only":""));if(t.label){let e=document.createElement("label");e.className=`ui ${t.labelClass?t.labelClass:"orange right ribbon"} label`,e.textContent=t.label,l.appendChild(e)}if(t.blocksXml){const n=e.blocks.render(t.blocksXml);if(n){let e=i(l,"");e.setAttribute("style","width:100%; min-height:10em"),e.appendChild(n)}else console.error("failed to render blocks"),e.debug(t.blocksXml)}if(t.typeScript){let e=document.createElement("pre");e.appendChild(document.createTextNode(t.typeScript)),l.appendChild(e)}if(t.imageUrl||(t.youTubeId?`https://img.youtube.com/vi/${t.youTubeId}/0.jpg`:void 0)){let e=document.createElement("div");e.className="ui imagewrapper";let n=document.createElement("div");n.className="ui cardimage",n.style.backgroundImage=`url("${t.imageUrl}")`,n.title=a,n.setAttribute("role","presentation"),e.appendChild(n),l.appendChild(e)}if("file"==t.cardType){let e=i(s,"ui fileimage");l.appendChild(e)}if(a||t.description){let e=i(s,"ui content");if(a&&(s.setAttribute("aria-label",a),i(e,"header","div",a)),t.description){const n=i(e,"ui description"),o=t.description.split(".")[0]+".";n.appendChild(document.createTextNode(o))}}if(t.time){let n=i(s,"meta");if(t.time){i(n,"date","span").appendChild(document.createTextNode(e.Util.timeSince(t.time)))}}if(t.extracontent){i(s,"extra content","div").appendChild(document.createTextNode(t.extracontent))}return s}}(t.codeCard||(t.codeCard={}))}(e.docs||(e.docs={}))}(pxt||(pxt={})),function(e){!function(t){function n(e,t){const n=e,o=n.mutationToDom,r=n.domToMutation;n.mutationToDom=()=>{const e=o?o():document.createElement("mutation");return t.mutationToDom(e)},n.domToMutation=e=>{r&&r(e),t.domToMutation(e)}}t.appendMutation=n,t.initVariableArgsBlock=function(e,o){let r=0,i=0,s=e.appendDummyInput(),a=()=>{if(r!==i){if(r>i){const t=r-i;for(let n=0;n<t;n++){const t=o[i+n];s.insertFieldAt(s.fieldRow.length-1,new pxtblockly.FieldArgumentVariable(t.name),"HANDLER_"+t.name);const r=e;(null==r?void 0:r.initSvg)&&r.initSvg()}}else{let e=i-r;for(let t=0;t<e;t++){const e=o[i-t-1];s.removeField("HANDLER_"+e.name)}}r>=o.length?s.removeField("_HANDLER_ADD"):i>=o.length&&l(),i=r}};function l(){s.appendField(new Blockly.FieldImage(e.ADD_IMAGE_DATAURI,24,24,lf("Add argument"),(()=>{r=Math.min(r+1,o.length),a()}),!1),"_HANDLER_ADD")}Blockly.Extensions.apply("inline-svgs",e,!1),l(),n(e,{mutationToDom:t=>{t.setAttribute("numArgs",r.toString());for(let n=0;n<r;n++){const r=e.getField("HANDLER_"+o[n].name);let i=r&&r.getText();t.setAttribute("arg"+n,i)}return t},domToMutation:n=>{let i=parseInt(n.getAttribute("numargs"));r=Math.min(isNaN(i)?0:i,o.length),a();for(let i=0;i<r;i++){const r=n.getAttribute("arg"+i),s="HANDLER_"+o[i].name;e.getField(s)&&t.setVarFieldValue(e,s,r)}}})},t.initExpandableBlock=function(r,i,s,a,l,c){const u="0_add_button",p="0_rem_button",d="_expanded",g="_input_init",h=s.parameters.map((e=>e.name)),f=s.parameters.length,_=l?f:1,m=new o(i);function y(n,o=!1,l=!1){const c=E(n);if(!l&&!o&&c===m.getNumber(d))return;m.setValue(d,c);const u=c;if(!m.getBoolean(g)&&u>0&&(T(),!i.rendered))return;let p=0;for(let n=0;n<i.inputList.length;n++){const o=i.inputList[n];if(e.Util.startsWith(o.name,t.optionalDummyInputPrefix))S(o,p<u||u===f);else if(e.Util.startsWith(o.name,t.optionalInputWithFieldPrefix)||-1!==h.indexOf(o.name)){const e=p<u;if(S(o,e),e&&o.connection&&!o.connection.isConnected()&&!i.isInsertionMarker()){const e=a.definitionNameToParam[s.parameters[p].name];let n=t.createShadowValue(r,e);"value"===n.tagName.toLowerCase()&&(n=n.firstElementChild),Blockly.Events.disable();try{const e=Blockly.Xml.domToBlock(n,i.workspace);e&&o.connection.connect(e.outputConnection)}catch(e){}Blockly.Events.enable()}++p}}b(),o||i.render()}function k(e,t,n,o){i.appendDummyInput(e).appendField(new Blockly.FieldImage(t,24,24,n,(()=>y(o)),!1))}function b(){const e=m.getNumber(d),t=e!==f,n=0!==e,o=!!i.getInput(p),r=!!i.getInput(u);t||i.removeInput(u,!0),n||i.removeInput(p,!0),n&&!o&&k(p,i.REMOVE_IMAGE_DATAURI,lf("Hide optional arguments"),-1*_),t&&(r&&i.inputList.findIndex((e=>e.name===u))!==i.inputList.length-1?(i.removeInput(u,!0),v()):r||v())}function v(){k(u,i.ADD_IMAGE_DATAURI,lf("Reveal optional arguments"),_)}function T(){m.setValue(g,!0),c(),b()}function E(e){return Math.min(Math.max(m.getNumber(d)+e,0),f)}function S(e,t){if(i.rendered){e.setVisible(t).forEach((e=>{e.render()}))}}m.setEventsEnabled(!1),m.setValue(d,0),m.setValue(g,!1),m.setEventsEnabled(!0),Blockly.Extensions.apply("inline-svgs",i,!1),v(),n(i,{mutationToDom:e=>(e.setAttribute(d,m.getString(d)),e.setAttribute(g,m.getString(g)),e),domToMutation:e=>{if(m.setEventsEnabled(!1),e.hasAttribute(g)&&"true"==e.getAttribute(g)&&!m.getBoolean(g)&&(m.setValue(g,!0),T()),e.hasAttribute(d)){const t=parseInt(e.getAttribute(d));if(!isNaN(t)){const e=t-(m.getNumber(d)||0);m.getBoolean(g)?i.rendered||i.isInsertionMarker()?y(e,!0,i.isInsertionMarker()):m.setValue(d,E(e)):y(e,!0)}}m.setEventsEnabled(!0)}}),setTimeout((()=>{i.rendered&&!i.workspace.isDragging()&&y(0,void 0,!0)}),1)},t.initReturnStatement=function(t){const n=e.blocks.getBlockDefinition("function_return"),o="0_add_button",r="0_rem_button";Blockly.Extensions.apply("inline-svgs",t,!1);let i,s=!0;function a(){const a=t.getInput("RETURN_VALUE");if(s){if(!a){for(;t.getInput("");)t.removeInput("");t.jsonInit({message0:n.block.message_with_value,args0:[{type:"input_value",name:"RETURN_VALUE",check:null}],previousStatement:null,colour:e.toolbox.getNamespaceColor("functions")})}if(t.getInput(o)&&t.removeInput(o),t.getInput(r)||u(r,t.REMOVE_IMAGE_DATAURI,lf("Remove return value")),i){const e=t.workspace.getBlockById(i);e&&e.outputConnection&&!e.outputConnection.targetBlock()&&t.getInput("RETURN_VALUE").connection.connect(e.outputConnection),i=void 0}}else{if(a){const o=a.connection.targetBlock();o&&(o.isShadow()&&o.setShadow(!1),a.connection.disconnect(),i=o.id),t.removeInput("RETURN_VALUE"),t.jsonInit({message0:n.block.message_no_value,args0:[],previousStatement:null,colour:e.toolbox.getNamespaceColor("functions")})}t.getInput(r)&&t.removeInput(r),t.getInput(o)||u(o,t.ADD_IMAGE_DATAURI,lf("Add return value"))}t.setInputsInline(!0)}function l(){return Blockly.Xml.domToText(t.mutationToDom())}function c(e,n){e!==n&&Blockly.Events.fire(new Blockly.Events.BlockChange(t,"mutation",null,e,n))}function u(e,n,o){t.appendDummyInput(e).appendField(new Blockly.FieldImage(n,24,24,o,(()=>{const e=l();s=!s;const t=l();c(e,t),a();c(t,l())}),!1))}a(),t.domToMutation=e=>{e.hasAttribute("last_connected_id")&&(i=e.getAttribute("last_connected_id")),s="true"!==e.getAttribute("no_return_value"),a()},t.mutationToDom=()=>{const e=document.createElement("mutation");return function(e,t){e.setAttribute("no_return_value",t?"false":"true")}(e,!!t.getInput("RETURN_VALUE")),i&&e.setAttribute("last_connected_id",i),e}};class o{constructor(e,t){this.block=e,this.fireEvents=!0,this.state=t||{}}setValue(e,t){if(this.fireEvents&&this.block.mutationToDom){const n=this.block.mutationToDom();this.state[e]=t.toString();const o=this.block.mutationToDom();Object.keys(this.state).forEach((e=>{n.getAttribute(e)!==this.state[e]&&o.setAttribute(e,this.state[e])}));const r=Blockly.Xml.domToText(n),i=Blockly.Xml.domToText(o);r!=i&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.block,"mutation",null,r,i))}else this.state[e]=t.toString()}getNumber(e){return parseInt(this.state[e])}getBoolean(e){return"false"!=this.state[e]}getString(e){return this.state[e]}setEventsEnabled(e){this.fireEvents=e}}}(e.blocks||(e.blocks={}))}(pxt||(pxt={})),function(e){!function(t){const n=e.blocks.MATH_FUNCTIONS.unary.concat(e.blocks.MATH_FUNCTIONS.binary).concat(e.blocks.MATH_FUNCTIONS.infix);let o;t.initMathOpBlock=function(){const r="math_js_op",i=e.blocks.getBlockDefinition(r);function s(e,t){const n=e.appendValueInput("ARG"+(t?1:0));n.setCheck("Number"),t&&(n.connection.setShadowDom(function(){if(!o){o=document.createElement("shadow"),o.setAttribute("type","math_number");const e=document.createElement("field");e.setAttribute("name","NUM"),e.textContent="0",o.appendChild(e)}return o}()),n.connection.respawnShadow_())}function a(e,t){let n=!!e.getInput("ARG1");t?(n&&e.moveInputBefore("op_dropdown","ARG1"),e.moveInputBefore("ARG0","op_dropdown")):(n&&e.moveInputBefore("ARG0","ARG1"),e.moveInputBefore("op_dropdown","ARG0"))}Blockly.Blocks[r]={init:function(){const o=this;o.setPreviousStatement(!1),o.setNextStatement(!1),o.setOutput(!0,"Number"),o.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),o.setInputsInline(!0);o.appendDummyInput("op_dropdown").appendField(new Blockly.FieldDropdown(n.map((e=>[i.block[e],e])),(t=>function(t,n){!function(t){return-1!==e.blocks.MATH_FUNCTIONS.unary.indexOf(t)}(n)?t.getInput("ARG1")||s(t,!0):t.removeInput("ARG1",!0);a(t,function(t){return-1!==e.blocks.MATH_FUNCTIONS.infix.indexOf(t)}(n))}(o,t))),"OP"),s(o,!1),t.appendMutation(o,{mutationToDom:e=>{let t;for(let e=0;e<o.inputList.length;e++){const n=o.inputList[e];if("op_dropdown"===n.name){t=!1;break}if("ARG0"===n.name){t=!0;break}}return e.setAttribute("op-type",(o.getInput("ARG1")?t?"infix":"binary":"unary").toString()),e},domToMutation:e=>{if(e.hasAttribute("op-type")){const t=e.getAttribute("op-type");"unary"!=t&&s(o,!0),a(o,"infix"===t)}}})}},t.installHelpResources(r,i.name,(function(e){return i.tooltip[e.getFieldValue("OP")]}),i.url,e.toolbox.getNamespaceColor(i.category))}}(e.blocks||(e.blocks={}))}(pxt||(pxt={})),function(e){!function(t){const n=e.blocks.ROUNDING_FUNCTIONS;t.initMathRoundBlock=function(){const o="math_js_round",r=e.blocks.getBlockDefinition(o);Blockly.Blocks[o]={init:function(){const e=this;e.setPreviousStatement(!1),e.setNextStatement(!1),e.setOutput(!0,"Number"),e.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),e.setInputsInline(!0);e.appendDummyInput("round_dropdown").appendField(new Blockly.FieldDropdown(n.map((e=>[r.block[e],e])),(e=>{})),"OP"),function(e){e.appendValueInput("ARG0").setCheck("Number")}(e)}},t.installHelpResources(o,r.name,(function(e){return r.tooltip[e.getFieldValue("OP")]}),r.url,e.toolbox.getNamespaceColor(r.category))}}(e.blocks||(e.blocks={}))}(pxt||(pxt={})),function(e){class t extends Blockly.Field{constructor(e,t,n){super(e,n),this.SERIALIZABLE=!0,this.options=t,e&&!this.valueText&&(this.valueText=e)}init(){super.init(),this.onInit()}dispose(){this.onDispose()}getValue(){return this.valueText}doValueUpdate_(e){null!==e&&(this.valueText=this.loaded?this.onValueChanged(e):e)}getDisplayText_(){return this.valueText}onLoadedIntoWorkspace(){this.loaded||(this.loaded=!0,this.valueText=this.onValueChanged(this.valueText))}isInitialized(){return!!this.fieldGroup_}getBlockData(){return pxt.blocks.getBlockDataForField(this.sourceBlock_,this.name)}setBlockData(e){pxt.blocks.setBlockDataForField(this.sourceBlock_,this.name,e)}}e.FieldBase=t}(pxtblockly||(pxtblockly={})),function(e){var t=pxt.svgUtil;const n=32;class o extends e.FieldBase{constructor(e,t,n){super(e,t,n),this.pendingEdit=!1,this.isEmpty=!1,this.assetChangeListener=()=>{if(this.pendingEdit)return;const e=this.getBlockData();e&&(this.asset=pxt.react.getTilemapProject().lookupAsset(this.getAssetType(),e)),this.redrawPreview()},this.lightMode=t.lightMode,this.params=this.parseFieldOptions(t),this.blocksInfo=t.blocksInfo}onInit(){this.redrawPreview()}onValueChanged(e){return this.parseValueText(e),this.redrawPreview(),this.getValueText()}showEditor_(){if(this.isGreyBlock)return;const t=Object.assign({},this.params);let n;switch(t.blocksInfo=this.blocksInfo,this.asset.type){case"tile":case"image":n="image-editor",t.temporaryAssets=e.getTemporaryAssets(this.sourceBlock_.workspace,"image");break;case"animation":n="animation-editor",t.temporaryAssets=e.getTemporaryAssets(this.sourceBlock_.workspace,"image").concat(e.getTemporaryAssets(this.sourceBlock_.workspace,"animation"));break;case"tilemap":n="tilemap-editor";const o=pxt.react.getTilemapProject();pxt.sprite.addMissingTilemapTilesAndReferences(o,this.asset)}const o=pxt.react.getFieldEditorView(n,this.asset,t);this.undoRedoState&&o.restorePersistentData(this.undoRedoState),pxt.react.getTilemapProject().pushUndo(),o.onHide((()=>{var e;const t=o.getResult(),n=pxt.react.getTilemapProject();if(t){const s=this.getValue();if(pxt.assetEquals(this.asset,t))return;const a=r(this.asset)?null:this.asset.id;let l=r(t)?null:t.id;a||l!==this.sourceBlock_.id||(t.id=n.generateNewID(t.type),l=t.id),this.pendingEdit=!0,(null===(e=t.meta)||void 0===e?void 0:e.displayName)&&this.disposeOfTemporaryAsset(),this.asset=t;const c=n.revision();if(this.onEditorClose(this.asset),this.updateAssetListener(),this.updateAssetMeta(),this.redrawPreview(),this.undoRedoState=o.getPersistentData(),this.sourceBlock_&&Blockly.Events.isEnabled()){const e=new i(this.sourceBlock_,"field",this.name,s,this.getValue(),c,n.revision());a!==l&&(e.oldAssetId=a,e.newAssetId=l),Blockly.Events.fire(e)}this.pendingEdit=!1}})),o.show()}render_(){this.isGreyBlock&&!this.textElement_&&this.createTextElement_(),super.render_(),this.isGreyBlock||(this.size_.height=42,this.size_.width=50)}getDisplayText_(){if(this.isGreyBlock){const e=pxt.Util.htmlUnescape(this.valueText);return e.substr(0,e.indexOf("("))+"(...)"}return""}updateEditable(){if(this.isGreyBlock&&this.fieldGroup_){const e=this.fieldGroup_;Blockly.utils.dom.removeClass(e,"blocklyNonEditableText"),Blockly.utils.dom.removeClass(e,"blocklyEditableText"),e.style.cursor=""}else super.updateEditable()}getValue(){return this.isGreyBlock?pxt.Util.htmlUnescape(this.valueText):this.getValueText()}onDispose(){var e;(null===(e=this.sourceBlock_)||void 0===e?void 0:e.workspace)&&!this.sourceBlock_.workspace.rendered&&this.disposeOfTemporaryAsset(),pxt.react.getTilemapProject().removeChangeListener(this.getAssetType(),this.assetChangeListener)}disposeOfTemporaryAsset(){this.isTemporaryAsset()&&(pxt.react.getTilemapProject().removeAsset(this.asset),this.setBlockData(null),this.asset=void 0)}clearTemporaryAssetData(){this.isTemporaryAsset()&&this.setBlockData(null)}isTemporaryAsset(){return r(this.asset)}getAsset(){return this.asset}updateAsset(e){this.asset=e,this.setValue(this.getValue())}onEditorClose(e){}redrawPreview(){if(!this.fieldGroup_)return;if(pxsim.U.clear(this.fieldGroup_),this.isGreyBlock)return this.createTextElement_(),this.render_(),void this.updateEditable();const o=(new t.Rect).at(5,1).size(40,40).setClass("blocklySpriteField").stroke("#898989",1).corner(4);if(this.fieldGroup_.appendChild(o.el),this.asset){let o;switch(this.asset.type){case"image":case"tile":o=e.bitmapToImageURI(pxt.sprite.Bitmap.fromData(this.asset.bitmap),n,this.lightMode);break;case"animation":o=e.bitmapToImageURI(pxt.sprite.Bitmap.fromData(this.asset.frames[0]),n,this.lightMode);break;case"tilemap":o=e.tilemapToImageURI(this.asset.data,n,this.lightMode)}const r=(new t.Image).src(o).at(9,5).size(n,n);this.fieldGroup_.appendChild(r.el)}}parseValueText(e){if(e=pxt.Util.htmlUnescape(e),this.sourceBlock_&&!this.sourceBlock_.isInFlyout){const t=pxt.react.getTilemapProject(),n=this.getBlockData(),o=t.lookupAsset(this.getAssetType(),n);!o||e&&this.isEmpty?(this.setBlockData(null),this.asset&&this.sourceBlock_&&this.asset.meta.blockIDs&&(this.asset.meta.blockIDs=this.asset.meta.blockIDs.filter((e=>e!==this.sourceBlock_.id)),this.isTemporaryAsset()||t.updateAsset(this.asset)),this.isEmpty=!e,this.asset=this.createNewAsset(e)):this.asset=o,this.updateAssetMeta(),this.updateAssetListener()}}parseFieldOptions(e){const t={initWidth:16,initHeight:16,disableResize:!1,lightMode:!1};return e?(e.disableResize&&(t.disableResize="true"===e.disableResize.toLowerCase()||"1"===e.disableResize),t.initWidth=n(e.initWidth,t.initWidth),t.initHeight=n(e.initHeight,t.initHeight),t.lightMode=e.lightMode,t):t;function n(e,t){const n=parseInt(e);return isNaN(n)?t:n}}updateAssetMeta(){if(this.asset){if(this.asset.meta||(this.asset.meta={}),this.asset.meta.blockIDs||(this.asset.meta.blockIDs=[]),this.sourceBlock_){if(-1===this.asset.meta.blockIDs.indexOf(this.sourceBlock_.id)){const e=this.asset.meta.blockIDs;e.length&&this.isTemporaryAsset()&&e.some((e=>this.sourceBlock_.workspace.getBlockById(e)))&&(this.asset=pxt.cloneAsset(this.asset),this.asset.meta.blockIDs=[]),this.asset.meta.blockIDs.push(this.sourceBlock_.id)}this.setBlockData(this.asset.id)}this.isTemporaryAsset()?this.asset.meta.temporaryInfo={blockId:this.sourceBlock_.id,fieldName:this.name}:pxt.react.getTilemapProject().updateAsset(this.asset)}}updateAssetListener(){pxt.react.getTilemapProject().removeChangeListener(this.getAssetType(),this.assetChangeListener),this.asset&&!this.isTemporaryAsset()&&pxt.react.getTilemapProject().addChangeListener(this.asset,this.assetChangeListener)}}function r(e){return e&&!e.meta.displayName}e.FieldAssetEditor=o;class i extends Blockly.Events.BlockChange{constructor(e,t,n,o,r,i,s){super(e,t,n,o,r),this.oldRevision=i,this.newRevision=s,this.fieldName=n}isNull(){return this.oldRevision===this.newRevision&&super.isNull()}run(e){if(this.newAssetId||this.oldAssetId){const t=this.getEventWorkspace_().getBlockById(this.blockId);e?pxt.blocks.setBlockDataForField(t,this.fieldName,this.newAssetId):pxt.blocks.setBlockDataForField(t,this.fieldName,this.oldAssetId)}e?(pxt.react.getTilemapProject().redo(),super.run(e)):(pxt.react.getTilemapProject().undo(),super.run(e));const t=this.getEventWorkspace_(),n=new i(t.getBlockById(this.blockId),"tilemap-revision","revision",null,pxt.react.getTilemapProject().revision(),0,0);n.recordUndo=!1,Blockly.Events.fire(n)}}e.BlocklyTilemapChange=i}(pxtblockly||(pxtblockly={})),function(e){var t=pxt.svgUtil;const n=32;class o extends e.FieldAssetEditor{constructor(){super(...arguments),this.onMouseEnter=()=>{if(this.animateRef||!this.asset)return;const e=this.getParentInterval()||this.asset.interval,t=e>50?e:50;let n=0;this.animateRef=setInterval((()=>{this.preview&&this.frames[n]&&this.preview.src(this.frames[n]),n=(n+1)%this.frames.length}),t)},this.onMouseLeave=()=>{this.animateRef&&clearInterval(this.animateRef),this.animateRef=void 0,this.preview&&this.frames[0]&&this.preview.src(this.frames[0])}}initView(){this.sourceBlock_.getSvgRoot().addEventListener("mouseenter",this.onMouseEnter),this.sourceBlock_.getSvgRoot().addEventListener("mouseleave",this.onMouseLeave)}showEditor_(){this.asset&&(this.asset.interval=this.getParentInterval()||this.asset.interval),super.showEditor_()}render_(){super.render_(),this.size_.height=42,this.size_.width=80}getAssetType(){return"animation"}createNewAsset(e){const t=pxt.react.getTilemapProject();if(e){const o=pxt.lookupProjectAssetByTSReference(e,t);if(o)return o;const r=-1===(n=e).indexOf("[")?null:(n=n.replace(/[\[\]]/gm,"")).split(",").map((e=>pxt.sprite.imageLiteralToBitmap(e).data())).filter((e=>e.height&&e.width));if(r&&r.length){return{internalID:-1,id:this.sourceBlock_.id,type:"animation",frames:r,interval:this.getParentInterval(),meta:{}}}const i=t.lookupAssetByName("animation",e.trim());if(i)return i}var n;return{internalID:-1,id:this.sourceBlock_.id,type:"animation",frames:[new pxt.sprite.Bitmap(this.params.initWidth,this.params.initHeight).data()],interval:500,meta:{}}}onEditorClose(e){this.setParentInterval(e.interval)}getValueText(){return this.asset?this.isTemporaryAsset()?"["+this.asset.frames.map((e=>pxt.sprite.bitmapToImageLiteral(pxt.sprite.Bitmap.fromData(e),"typescript"))).join(",")+"]":pxt.getTSReferenceForAsset(this.asset):"[]"}redrawPreview(){if(!this.fieldGroup_)return;pxsim.U.clear(this.fieldGroup_);const o=(new t.Rect).at(35,1).size(40,40).corner(4).setClass("blocklyAnimationField");this.fieldGroup_.appendChild(o.el);const r=new t.Text("").at(5,26).fill(this.sourceBlock_.getColourSecondary()).setClass("semanticIcon");this.fieldGroup_.appendChild(r.el),this.asset&&(this.frames=this.asset.frames.map((t=>e.bitmapToImageURI(pxt.sprite.Bitmap.fromData(t),n,this.lightMode))),this.preview=(new t.Image).src(this.frames[0]).at(39,5).size(n,n),this.fieldGroup_.appendChild(this.preview.el))}getParentIntervalBlock(){const e=this.sourceBlock_;if(e.parentBlock_){const t=e.parentBlock_;for(const e of t.inputList)if("frameInterval"===e.name)return e.connection.targetBlock()}}setParentInterval(e){const t=this.getParentIntervalBlock();if(t){const n=r(t);n&&t.setFieldValue(String(e),n)}}getParentInterval(){const e=this.getParentIntervalBlock();if(e){const t=r(e);if(t)return Number(e.getFieldValue(t))}return 100}parseFieldOptions(e){return function(e){const t={initWidth:16,initHeight:16,disableResize:!1,lightMode:!1};if(!e)return t;t.lightMode=e.lightMode,e.filter&&(t.filter=e.filter);return t.initWidth=n(e.initWidth,t.initWidth),t.initHeight=n(e.initHeight,t.initHeight),t;function n(e,t){const n=parseInt(e);return isNaN(n)?t:n}}(e)}}function r(e){return"math_number_minmax"===e.type?"SLIDER":"math_number"===(t=e.type)||"math_integer"===t||"math_whole_number"===t?"NUM":"timePicker"===e.type?"ms":null;var t}e.FieldAnimationEditor=o}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldVariable{constructor(e){super(e),this.menuGenerator_=this.dropdownCreate}dropdownCreate(){return Blockly.FieldVariable.dropdownCreate.call(this).filter((e=>e[1]!=Blockly.DELETE_VARIABLE_ID))}}e.FieldArgumentVariable=t}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldNumber{constructor(e,t,n){super(e,void 0,void 0,void 0,n),this.isFieldCustom_=!0,this.CURSOR="pointer",this.params=t,this.setValue(e),this.addArgType("toggle"),this.type_=t.type}initView(){if(!this.fieldGroup_)return;null!==this.getArgTypes()&&(this.sourceBlock_.isShadow()?this.sourceBlock_.svgGroup_.setAttribute("data-argument-type",this.getArgTypes()):this.fieldGroup_.setAttribute("data-argument-type",this.getArgTypes()));const e=this.getSize();this.checkElement_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyToggle "+(this.state_?"blocklyToggleOnBreakpoint":"blocklyToggleOffBreakpoint"),transform:`translate(8, ${e.height/2})`},this.fieldGroup_),this.toggleThumb_=Blockly.utils.dom.createSvgElement("polygon",{class:"blocklyToggleRect",points:"50,5 100,5 125,30 125,80 100,105 50,105 25,80 25,30"},this.checkElement_);let t=this.sourceBlock_.RTL?-e.width/2:e.width/2;this.textElement_=Blockly.utils.dom.createSvgElement("text",{class:"blocklyText",x:t,dy:"0.6ex",y:e.height/2},this.fieldGroup_),this.switchToggle(this.state_),this.setValue(this.getValue()),this.markDirty()}updateSize_(){this.size_.width=30}getValue(){return this.toVal(this.state_)}setValue(e){let t=this.fromVal(e);this.state_!==t&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.state_,t)),this.state_=t,this.switchToggle(this.state_))}switchToggle(e){this.checkElement_&&(this.updateSize_(),e?(pxt.BrowserUtils.addClass(this.checkElement_,"blocklyToggleOnBreakpoint"),pxt.BrowserUtils.removeClass(this.checkElement_,"blocklyToggleOffBreakpoint")):(pxt.BrowserUtils.removeClass(this.checkElement_,"blocklyToggleOnBreakpoint"),pxt.BrowserUtils.addClass(this.checkElement_,"blocklyToggleOffBreakpoint")),this.checkElement_.setAttribute("transform","translate(-7, -1) scale(0.3)"))}updateDisplay_(e){super.updateDisplay_(e),this.textElement_&&pxt.BrowserUtils.addClass(this.textElement_,"blocklyToggleText")}render_(){this.visible_&&this.textElement_&&(goog.dom.removeChildren(this.textElement_),this.updateSize_())}showEditor_(){let e=!this.state_;null!==e&&this.setValue(this.toVal(e))}toVal(e){return"number"==this.type_?String(e?"1":"0"):String(e?"true":"false")}fromVal(e){return"string"==typeof e?"1"==e||"TRUE"==e.toUpperCase():!!e}}e.FieldBreakpoint=t}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldSlider{constructor(e,t,n){super(String(e),"0","255","1","10","Color",n),this.isFieldCustom_=!0,this.params=t,this.params.min&&(this.min_=parseFloat(this.params.min)),this.params.max&&(this.max_=parseFloat(this.params.max)),this.params.label&&(this.labelText_=this.params.label),this.params.channel&&(this.channel_=this.params.channel)}setBackground_(e){let t=this.createColourStops_().join(",");goog.style.setStyle(e,"background","-moz-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","-webkit-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","-o-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","-ms-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","linear-gradient(left, "+t+")"),this.params.sliderWidth&&goog.style.setStyle(e,"width",`${this.params.sliderWidth}px`)}setReadout_(e,t){const n=this.colorWheel(parseInt(t),this.channel_),o=document.createElement("span");o.className="blocklyColorReadout",o.style.backgroundColor=`${n}`,pxsim.U.clear(e),e.appendChild(o)}createColourStops_(){let e=[];for(let t=0;t<=255;t+=20)e.push(this.colorWheel(t,this.channel_));return e}colorWheel(e,t){return"hsvfast"==t?this.hsvFast(e,255,255):(e=255-e)<85?this.hex(3*e,255,255-3*e):e<170?(e-=85,this.hex(255,255-3*e,3*e)):(e-=170,this.hex(255-3*e,3*e,255))}hsvFast(e,t,n){let o=e%255>>0;o<0&&(o+=255),o=192*o/255>>0;let r,i,s,a=n*(255-t)/255>>0,l=n-a,c=o/64>>0,u=o%64>>0,p=(u*l/63.75>>0)+a,d=((63-u)*l/63.75>>0)+a;return c?1==c?(r=a,i=d,s=p):(r=p,i=a,s=d):(r=d,i=p,s=a),this.hex(r,i,s)}hex(e,t,n){return`#${this.componentToHex(255&e)}${this.componentToHex(255&t)}${this.componentToHex(255&n)}`}componentToHex(e){let t=e.toString(16);return 1==t.length?"0"+t:t}}e.FieldColorWheel=t}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldColour{constructor(e,t,n){if(super(e,n),this.isFieldCustom_=!0,this.valueMode_="rgb",t.colours)this.setColours(JSON.parse(t.colours));else if(pxt.appTarget.runtime&&pxt.appTarget.runtime.palette){let e,t=pxt.Util.clone(pxt.appTarget.runtime.palette);t[0]="#dedede",pxt.appTarget.runtime.paletteNames&&(e=pxt.Util.clone(pxt.appTarget.runtime.paletteNames),e[0]=lf("transparent")),this.setColours(t,e)}this.setValue(this.getColours_()[0]),t.columns&&this.setColumns(parseInt(t.columns)),t.className&&(this.className_=t.className),t.valueMode&&(this.valueMode_=t.valueMode)}applyColour(){var e,t,n,o,r,i;this.borderRect_?this.borderRect_.style.fill=this.value_:this.sourceBlock_&&(null===(n=null===(t=null===(e=this.sourceBlock_)||void 0===e?void 0:e.pathObject)||void 0===t?void 0:t.svgPath)||void 0===n||n.setAttribute("fill",this.value_),null===(i=null===(r=null===(o=this.sourceBlock_)||void 0===o?void 0:o.pathObject)||void 0===r?void 0:r.svgPath)||void 0===i||i.setAttribute("stroke","#fff"))}doClassValidation_(e){return"string"!=typeof e?null:n(e,this.getColours_())}getValue(e){if(e)return this.value_;switch(this.valueMode_){case"hex":return`"${this.value_}"`;case"rgb":return this.value_.indexOf("#")>-1?`0x${this.value_.replace(/^#/,"")}`:this.value_;case"index":if(!this.value_)return"-1";const e=this.getColours_();for(let t=0;t<e.length;t++)if(this.value_.toUpperCase()===e[t].toUpperCase())return t+""}return this.value_}doValueUpdate_(e){this.value_=n(e,this.getColours_()),this.applyColour()}showEditor_(){super.showEditor_(),this.className_&&this.picker_&&pxt.BrowserUtils.addClass(this.picker_,this.className_)}getColours_(){return this.colours_}}function n(e,t){if(e){const n=/Colors\.([a-zA-Z]+)/.exec(e),o=/(0x|#)([0-9a-fA-F]+)/.exec(e);if(n)switch(n[1].toLocaleLowerCase()){case"red":return"#FF0000";case"orange":return"#FF7F00";case"yellow":return"#FFFF00";case"green":return"#00FF00";case"blue":return"#0000FF";case"indigo":return"#4B0082";case"violet":return"#8A2BE2";case"purple":return"#A033E5";case"pink":return"#FF007F";case"white":return"#FFFFFF";case"black":return"#000000";default:return e}else if(o){const e=o[2];if(3===e.length){let t="#";for(let n=0;n<e.length;n++){const o=e.charAt(n);t+=o+o}return t}if(6===e.length)return"#"+e}if(t){const n=parseInt(e);return isNaN(n)||null==t[n]?t[0]:t[n]}}return e}e.FieldColorNumber=t}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldDropdown{constructor(t,n,o){super(n.data),this.isFieldCustom_=!0,this.buttonClick_=function(e){let t=e.target.getAttribute("data-value");null!==t&&(this.setValue(t),this.closeModal_&&(this.close(),this.closeModal_=!1))},this.buttonClickAndClose_=function(e){this.closeModal_=!0,this.buttonClick_(e)},this.columns_=parseInt(n.columns)||4,this.maxRows_=parseInt(n.maxRows)||0,this.width_=parseInt(n.width)||200,this.backgroundColour_=e.parseColour(n.colour),this.borderColour_=pxt.toolbox.fadeColor(this.backgroundColour_,.4,!1);let r={xOffset:parseInt(n.tooltipsXOffset)||15,yOffset:parseInt(n.tooltipsYOffset)||-10};this.tooltipConfig_=r,this.hasSearchBar_=!!n.hasSearchBar||!1,this.hideRect_=!!n.hideRect||!1}dispose(){super.dispose(),this.disposeTooltip(),this.disposeIntersectionObserver()}createTooltip_(){this.gridTooltip_||(this.gridTooltip_=document.createElement("div"),this.gridTooltip_.className="goog-tooltip blocklyGridPickerTooltip",this.gridTooltip_.style.position="absolute",this.gridTooltip_.style.display="none",this.gridTooltip_.style.visibility="hidden",document.body.appendChild(this.gridTooltip_))}populateTableContainer(e,t,n){pxsim.U.removeChildren(t),0==e.length&&(this.firstItem_=void 0);for(let n=0;n<e.length/this.columns_;n++){let o=this.populateRow(n,e,t);t.appendChild(o)}}populateRow(e,n,o){const r=this.columns_,i=document.createElement("div");i.className="blocklyGridPickerRow";for(let s=r*e;s<Math.min(r*e+r,n.length);s++){let e=n[s][0];const r=n[s][1],a=document.createElement("div");a.className="goog-menuitem goog-option",a.setAttribute("id",":"+s),a.setAttribute("role","menuitem"),a.style.userSelect="none",a.title=e.alt||e,a.setAttribute("data-value",r);const l=document.createElement("div");l.setAttribute("class","goog-menuitem-content"),l.title=e.alt||e,l.setAttribute("data-value",r);const c="object"==typeof e;let u=this.backgroundColour_;if(r==this.getValue()&&(a.setAttribute("aria-selected","true"),pxt.BrowserUtils.addClass(a,"goog-option-selected"),u=this.sourceBlock_.getColourTertiary(),this.selectedItemDom=a,c&&!this.shouldShowTooltips()&&this.updateSelectedBar_(e,r)),a.style.backgroundColor=u,a.style.borderColor=this.borderColour_,c){const n=new Image(e.width,e.height);n.setAttribute("draggable","false"),"IntersectionObserver"in window?(n.src=t.DEFAULT_IMG,n.setAttribute("data-src",e.src),this.observer.observe(n)):n.src=e.src,n.alt=e.alt||"",n.setAttribute("data-value",r),l.appendChild(n)}else l.textContent=e;if(this.shouldShowTooltips()){Blockly.bindEvent_(a,"click",this,this.buttonClickAndClose_);const e=this.sourceBlock_.RTL?-this.tooltipConfig_.xOffset:this.tooltipConfig_.xOffset,t=this.tooltipConfig_.yOffset;Blockly.bindEvent_(a,"mousemove",this,(n=>{if(c){this.gridTooltip_.style.top=`${n.clientY+t}px`,this.gridTooltip_.style.left=`${n.clientX+e}px`;const o=document.elementFromPoint(n.clientX,n.clientY),r=o.title||o.alt;this.gridTooltip_.textContent=r,this.gridTooltip_.style.visibility=r?"visible":"hidden",this.gridTooltip_.style.display=r?"":"none"}pxt.BrowserUtils.addClass(a,"goog-menuitem-highlight"),o.setAttribute("aria-activedescendant",a.id)})),Blockly.bindEvent_(a,"mouseout",this,(e=>{c&&(this.gridTooltip_.style.visibility="hidden",this.gridTooltip_.style.display="none"),pxt.BrowserUtils.removeClass(a,"goog-menuitem-highlight"),o.removeAttribute("aria-activedescendant")}))}else c?(this.selectedBar_.style.display="",Blockly.bindEvent_(a,"click",this,(t=>{if(this.closeModal_)this.buttonClick_(t);else{const t=o.getElementsByClassName("goog-menuitem-highlight");for(let e=0;e<t.length;e++)pxt.BrowserUtils.removeClass(t[e],"goog-menuitem-highlight");pxt.BrowserUtils.addClass(a,"goog-menuitem-highlight"),this.updateSelectedBar_(e,r)}}))):(Blockly.bindEvent_(a,"click",this,this.buttonClickAndClose_),Blockly.bindEvent_(a,"mouseup",this,this.buttonClickAndClose_));a.appendChild(l),i.appendChild(a),0==s&&(this.firstItem_=a)}return i}shouldShowRect_(){return!this.hideRect_&&!this.sourceBlock_.isShadow()}doClassValidation_(e){return e}close(){this.disposeTooltip(),Blockly.WidgetDiv.hideIfOwner(this),Blockly.Events.setGroup(!1)}getFirstItem(){return this.firstItem_}highlightFirstItem(e){let t=e.childNodes;if(t.length&&t[0].childNodes){for(let e=0;e<t.length;++e){let n=t[e].childNodes.length;for(let o=0;o<n;++o){const n=t[e].childNodes[o];pxt.BrowserUtils.removeClass(n,"goog-menuitem-highlight"),pxt.BrowserUtils.removeClass(n,"goog-option-selected")}}t[0].childNodes[0].className+=" goog-menuitem-highlight"}}highlightAndScrollSelected(e,t){this.selectedItemDom&&goog.style.scrollIntoContainerView(this.selectedItemDom,t,!0)}showEditor_(){Blockly.WidgetDiv.show(this,this.sourceBlock_.RTL,(()=>{this.onClose_()})),this.setupIntersectionObserver_(),this.createTooltip_();const e=document.createElement("div");this.positionMenu_(e)}positionMenu_(e){const t=Blockly.utils.getViewportBBox(),n=this.getAnchorDimensions_(),{paddingContainer:o,scrollContainer:r}=this.createWidget_(e),i={width:o.offsetWidth,height:o.offsetHeight},s=goog.dom.getViewportSize();this.width_>s.width&&(this.width_=s.width),e.style.width=this.width_+"px";let a=0;if(this.hasSearchBar_&&(a+=50),this.selectedBar_&&(a+=50),this.maxRows_){let t=e.children[0].offsetHeight*(this.maxRows_+.3);s.height<t+a&&(t=s.height-a),i.height>t&&(r.style.overflowY="auto",goog.style.setHeight(r,t),i.height=t)}i.height+=a,this.sourceBlock_.RTL&&Blockly.utils.uiMenu.adjustBBoxesForRTL(t,n,i),Blockly.WidgetDiv.positionWithAnchor(t,n,i,this.sourceBlock_.RTL),this.highlightAndScrollSelected(e,r)}shouldShowTooltips(){return!pxt.BrowserUtils.isMobile()}getAnchorDimensions_(){const e=this.getScaledBBox();return this.sourceBlock_.RTL?e.right+=Blockly.FieldDropdown.CHECKMARK_OVERHANG:e.left-=Blockly.FieldDropdown.CHECKMARK_OVERHANG,e}createWidget_(e){const t=Blockly.WidgetDiv.DIV,n=this.getOptions();e.setAttribute("role","menu"),e.setAttribute("aria-haspopup","true");const o=document.createElement("div"),r=document.createElement("div");if(r.style.border=`solid 1px ${this.borderColour_}`,e.style.backgroundColor=this.backgroundColour_,o.style.backgroundColor=this.backgroundColour_,r.style.backgroundColor=this.backgroundColour_,e.className="blocklyGridPickerMenu",o.className="blocklyGridPickerScroller",r.className="blocklyGridPickerPadder",r.appendChild(o),o.appendChild(e),t.appendChild(r),this.hasSearchBar_){const t=this.createSearchBar_(e,o,n);r.insertBefore(t,r.childNodes[0])}return this.shouldShowTooltips()||(this.selectedBar_=this.createSelectedBar_(),r.appendChild(this.selectedBar_)),this.populateTableContainer(n,e,o),{paddingContainer:r,scrollContainer:o}}createSearchBar_(e,t,n){const o=document.createElement("div");o.setAttribute("class","ui fluid icon input");const r=document.createElement("i");r.setAttribute("class","search icon");const i=document.createElement("input");return i.setAttribute("type","search"),i.setAttribute("id","search-bar"),i.setAttribute("class","blocklyGridPickerSearchBar"),i.setAttribute("placeholder",pxt.Util.lf("Search")),i.addEventListener("click",(()=>{i.focus(),i.setSelectionRange(0,i.value.length)})),i.addEventListener("keyup",pxt.Util.debounce((()=>{let o=i.value,r=new RegExp(o,"i"),s=n.filter((e=>{const t=e[0].alt,n=e[1];return t?r.test(t):r.test(n)}));this.populateTableContainer.bind(this)(s,e,t),o?this.highlightFirstItem(e):this.highlightAndScrollSelected(e,t),this.gridTooltip_.style.visibility="hidden",this.gridTooltip_.style.display="none"}),300,!1)),i.addEventListener("keyup",(t=>{if(13==t.which){const t=e.childNodes[0];if(t){const e=t.childNodes[0];e&&(this.closeModal_=!0,e.click())}}})),o.appendChild(i),o.appendChild(r),o}createSelectedBar_(){const e=document.createElement("div");e.setAttribute("class","blocklyGridPickerSelectedBar"),e.style.display="none";const n=document.createElement("div"),o=document.createElement("div");o.className="blocklyGridPickerSelectedImage",n.appendChild(o),this.selectedImg_=document.createElement("img"),this.selectedImg_.setAttribute("width","30px"),this.selectedImg_.setAttribute("height","30px"),this.selectedImg_.setAttribute("draggable","false"),this.selectedImg_.style.display="none",this.selectedImg_.src=t.DEFAULT_IMG,o.appendChild(this.selectedImg_),this.selectedBarText_=document.createElement("span"),this.selectedBarText_.className="blocklyGridPickerTooltip",n.appendChild(this.selectedBarText_);const r=document.createElement("div"),i=document.createElement("div");i.className="ui buttons mini",r.appendChild(i);const s=document.createElement("button");s.className="ui button icon green";const a=document.createElement("i");a.className="icon check",s.appendChild(a),Blockly.bindEvent_(s,"click",this,(()=>{this.setValue(this.selectedBarValue_),this.close()}));const l=document.createElement("button");l.className="ui button icon red";const c=document.createElement("i");return c.className="icon cancel",l.appendChild(c),Blockly.bindEvent_(l,"click",this,(()=>{this.close()})),i.appendChild(s),i.appendChild(l),e.appendChild(n),e.appendChild(r),e}updateSelectedBar_(e,t){e.src&&(this.selectedImg_.src=e.src,this.selectedImg_.style.display=""),this.selectedImg_.alt=e.alt||e,this.selectedBarText_.textContent=e.alt||e,this.selectedBarValue_=t}setupIntersectionObserver_(){if(!("IntersectionObserver"in window))return;this.disposeIntersectionObserver();this.observer=new IntersectionObserver((e=>{e.forEach((e=>{e.intersectionRatio>0&&(this.observer.unobserve(e.target),(e=>{const t=e.getAttribute("data-src");t&&(e.src=t,e.removeAttribute("data-src"))})(e.target))}))}),{rootMargin:"20px 0px",threshold:.01})}disposeIntersectionObserver(){this.observer&&(this.observer=null)}disposeTooltip(){this.gridTooltip_&&(pxsim.U.remove(this.gridTooltip_),this.gridTooltip_=null)}onClose_(){this.disposeTooltip()}}t.DEFAULT_IMG="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",e.FieldGridPicker=t}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldDropdown{constructor(t,n,o){super(n.data),this.isFieldCustom_=!0,this.buttonClick_=function(e){let t=e.target.getAttribute("data-value");t&&(this.setValue(t),Blockly.DropDownDiv.hide())},this.columns_=parseInt(n.columns),this.maxRows_=parseInt(n.maxRows)||0,this.width_=parseInt(n.width)||300,this.backgroundColour_=e.parseColour(n.colour),this.borderColour_=pxt.toolbox.fadeColor(this.backgroundColour_,.4,!1)}showEditor_(){if(Blockly.DropDownDiv.hideIfOwner(this))return;Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();let e=Blockly.DropDownDiv.getContentDiv(),t=document.createElement("div");t.setAttribute("role","menu"),t.setAttribute("aria-haspopup","true");const n=this.getOptions();let o=0;for(let e=0;e<n.length;e++){let r=n[e][0];const i=n[e][1];if("placeholder"==r.type){let e=document.createElement("span");e.setAttribute("class","blocklyDropDownPlaceholder"),e.style.width=r.width+"px",e.style.height=r.height+"px",t.appendChild(e);continue}let s=document.createElement("button");s.setAttribute("id",":"+e),s.setAttribute("role","menuitem"),s.setAttribute("class","blocklyDropDownButton"),s.title=r.alt;let a=r.height;this.columns_?(a=this.width_/this.columns_-8,s.style.width=a+"px",s.style.height=a+"px"):(s.style.width=r.width+"px",s.style.height=r.height+"px"),a>o&&(o=a);let l=this.backgroundColour_;i==this.getValue()&&(l=this.sourceBlock_.getColourTertiary(),s.setAttribute("aria-selected","true")),s.style.backgroundColor=l,s.style.borderColor=this.borderColour_,Blockly.bindEvent_(s,"click",this,this.buttonClick_),Blockly.bindEvent_(s,"mouseover",s,(function(){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),t.setAttribute("aria-activedescendant",this.id)})),Blockly.bindEvent_(s,"mouseout",s,(function(){this.setAttribute("class","blocklyDropDownButton"),t.removeAttribute("aria-activedescendant")}));let c=document.createElement("img");c.src=r.src,s.setAttribute("data-value",i),c.setAttribute("data-value",i),s.appendChild(c),t.appendChild(s)}t.style.width=this.width_+"px",e.appendChild(t),this.maxRows_&&(e.style.maxHeight=(this.maxRows_+.4)*(o+8)+"px"),pxt.BrowserUtils.isFirefox()&&(e.style.paddingRight="20px"),Blockly.DropDownDiv.setColour(this.backgroundColour_,this.borderColour_),Blockly.DropDownDiv.showPositionedByField(this,this.onHide_.bind(this));let r=this.sourceBlock_;this.savedPrimary_=null==r?void 0:r.getColour(),(null==r?void 0:r.isShadow())?r.setColour(r.getColourTertiary()):this.borderRect_&&this.borderRect_.setAttribute("fill",r.getColourTertiary())}onHide_(){let e=Blockly.DropDownDiv.getContentDiv();e.removeAttribute("role"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-activedescendant"),e.style.width="",e.style.paddingRight="",e.style.maxHeight="";let t=this.sourceBlock_;(null==t?void 0:t.isShadow())?this.sourceBlock_.setColour(this.savedPrimary_):this.borderRect_&&this.borderRect_.setAttribute("fill",this.savedPrimary_)}}e.FieldImageDropdown=t}(pxtblockly||(pxtblockly={})),function(e){class t extends e.FieldImageDropdown{constructor(e,t,n){super(e,t,n),this.isFieldCustom_=!0,this.shouldSort_=t.sort,this.addLabel_=!!t.addLabel}showEditor_(){if(Blockly.DropDownDiv.hideIfOwner(this))return;let e=this.sourceBlock_;Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();let t=Blockly.DropDownDiv.getContentDiv(),n=document.createElement("div");n.setAttribute("role","menu"),n.setAttribute("aria-haspopup","true");const o=this.getOptions();this.shouldSort_&&o.sort();for(let t=0;t<o.length;t++){const r=o[t][0],i=o[t][1];if("placeholder"==r.type){let e=document.createElement("span");e.setAttribute("class","blocklyDropDownPlaceholder"),e.style.width=r.width+"px",e.style.height=r.height+"px",n.appendChild(e);continue}let s=document.createElement("button");s.setAttribute("id",":"+t),s.setAttribute("role","menuitem"),s.setAttribute("class","blocklyDropDownButton"),s.title=r.alt,this.columns_?s.style.width=this.width_/this.columns_-8+"px":(s.style.width=r.width+"px",s.style.height=r.height+"px");let a=e.getColour();i==this.getValue()&&(a=e.getColourTertiary(),s.setAttribute("aria-selected","true")),s.style.backgroundColor=a,s.style.borderColor=e.getColourTertiary(),Blockly.bindEvent_(s,"click",this,this.buttonClick_),Blockly.bindEvent_(s,"mouseover",s,(function(){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),n.setAttribute("aria-activedescendant",this.id)})),Blockly.bindEvent_(s,"mouseout",s,(function(){this.setAttribute("class","blocklyDropDownButton"),n.removeAttribute("aria-activedescendant")}));let l=document.createElement("img");if(l.src=r.src,s.setAttribute("data-value",i),l.setAttribute("data-value",i),s.appendChild(l),this.addLabel_){const e=this.createTextNode_(r.alt);e.setAttribute("data-value",i),s.appendChild(e)}n.appendChild(s)}n.style.width=this.width_+"px",t.appendChild(n),Blockly.DropDownDiv.setColour(e.getColour(),e.getColourTertiary()),Blockly.DropDownDiv.showPositionedByField(this,this.onHideCallback.bind(this)),this.savedPrimary_=null==e?void 0:e.getColour(),(null==e?void 0:e.isShadow())?e.setColour(e.style.colourTertiary):this.borderRect_&&this.borderRect_.setAttribute("fill",e.style.colourTertiary)}onHideCallback(){let e=this.sourceBlock_;(null==e?void 0:e.isShadow())?e.setColour(this.savedPrimary_):this.borderRect_&&this.borderRect_.setAttribute("fill",this.savedPrimary_)}createTextNode_(e){const t=document.createElement("span");return t.setAttribute("class","blocklyDropdownTextLabel"),t.textContent=e,t}}e.FieldImages=t}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldDropdown{constructor(e){super(function(e){return function(){const t=[],n=this;if(n.sourceBlock_&&n.sourceBlock_.workspace){n.sourceBlock_.workspace.getVariablesOfType(i(e.name)).forEach((e=>{t.push([e.name,e.name])}))}else e.initialMembers.forEach((e=>t.push([e,e])));return t.push([lf("Add a new {0}...",e.memberName),"CREATE"]),t}}(e)),this.opts=e}initView(){super.initView(),this.initVariables()}onItemSelected_(e,t){"CREATE"===t.getValue()?n(this.sourceBlock_.workspace,this.opts,lf("New {0}:",this.opts.memberName),(e=>e&&this.setValue(e))):super.onItemSelected_(e,t)}doClassValidation_(e){var t;return(null===(t=this.opts)||void 0===t?void 0:t.initialMembers)&&!this.opts.initialMembers.find((t=>t==e))&&this.getOptions(),super.doClassValidation_(e)}initVariables(){if(this.sourceBlock_&&this.sourceBlock_.workspace){const e=this.sourceBlock_.workspace,t=o(e,this.opts.name);this.opts.initialMembers.forEach((n=>{-1===t.indexOf(n)&&r(e,this.opts,n)})),"CREATE"===this.getValue()&&this.opts.initialMembers.length&&this.setValue(this.opts.initialMembers[0])}}}function n(e,t,i,s){Blockly.prompt(i,null,(a=>{if(a){let l=!1;if(pxtc.isIdentifierStart(a.charCodeAt(0),2)){l=!0;for(let e=1;e<a.length;e++)pxtc.isIdentifierPart(a.charCodeAt(e),2)||(l=!1)}if(!l)return void Blockly.alert(lf("Names must start with a letter and can only contain letters, numbers, '$', and '_'."),(()=>n(e,t,i,s)));if(pxt.blocks.isReservedWord(a))return void Blockly.alert(lf("'{0}' is a reserved word and cannot be used.",a),(()=>n(e,t,i,s)));const c=o(e,t.name);for(let o=0;o<c.length;o++){if(c[o]===a)return void Blockly.alert(lf("A {0} named '{1}' already exists.",t.memberName,a),(()=>n(e,t,i,s)))}a===t.createFunctionName&&Blockly.alert(lf("'{0}' is a reserved name.",t.createFunctionName),(()=>n(e,t,i,s))),s(r(e,t,a))}}),{placeholder:t.promptHint})}function o(e,t){const n=e.getVariablesOfType(i(t));return n&&n.length?n.map((e=>e.name)):[]}function r(e,t,n){return Blockly.Variables.getOrCreateVariablePackage(e,null,n,i(t.name)),n}function i(e){return"KIND_"+e}e.FieldKind=t}(pxtblockly||(pxtblockly={}));const rowRegex=/^.*[\.#].*$/;var LabelMode,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxt,pxt,pxt;!function(e){e[e.None=0]="None",e[e.Number=1]="Number",e[e.Letter=2]="Letter"}(LabelMode||(LabelMode={})),function(e){class t extends Blockly.Field{constructor(e,t,n){if(super(e,n),this.isFieldCustom_=!0,this.SERIALIZABLE=!0,this.onColor="#FFFFFF",this.scale=1,this.matrixWidth=5,this.matrixHeight=5,this.yAxisLabel=LabelMode.None,this.xAxisLabel=LabelMode.None,this.cellState=[],this.cells=[],this.dontHandleMouseEvent_=e=>{e.stopPropagation(),e.preventDefault()},this.clearLedDragHandler=e=>{const t=this.sourceBlock_.getSvgRoot();pxsim.pointerEvents.down.forEach((e=>t.removeEventListener(e,this.dontHandleMouseEvent_))),t.removeEventListener(pxsim.pointerEvents.move,this.dontHandleMouseEvent_),document.removeEventListener(pxsim.pointerEvents.up,this.clearLedDragHandler),document.removeEventListener(pxsim.pointerEvents.leave,this.clearLedDragHandler),Blockly.Touch.clearTouchIdentifier(),this.elt.removeEventListener(pxsim.pointerEvents.move,this.handleRootMouseMoveListener),e.stopPropagation(),e.preventDefault()},this.toggleRect=(e,t)=>{this.cellState[e][t]=this.currentDragState_,this.updateValue()},this.handleRootMouseMoveListener=e=>{let t,n;e.changedTouches&&1==e.changedTouches.length?(t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY):(t=e.clientX,n=e.clientY);const o=document.elementFromPoint(t,n);if(!o)return;const r=o.getAttribute("data-x"),i=o.getAttribute("data-y");null!=r&&null!=i&&this.toggleRect(parseInt(r),parseInt(i))},this.params=t,void 0!==this.params.rows){let e=parseInt(this.params.rows);isNaN(e)||(this.matrixHeight=e)}if(void 0!==this.params.columns){let e=parseInt(this.params.columns);isNaN(e)||(this.matrixWidth=e)}void 0!==this.params.onColor&&(this.onColor=this.params.onColor),void 0!==this.params.offColor&&(this.offColor=this.params.offColor),void 0!==this.params.scale?this.scale=Math.max(.6,Math.min(2,Number(this.params.scale))):Math.max(this.matrixWidth,this.matrixHeight)>15?this.scale=.85:Math.max(this.matrixWidth,this.matrixHeight)>10&&(this.scale=.9)}showEditor_(){}initMatrix(){if(!this.sourceBlock_.isInsertionMarker()){this.elt=pxsim.svg.parseString('<svg xmlns="http://www.w3.org/2000/svg" id="field-matrix" />');for(let e=0;e<this.matrixWidth;e++){this.cellState.push([]),this.cells.push([]);for(let t=0;t<this.matrixHeight;t++)this.cellState[e].push(!1)}this.restoreStateFromString();for(let e=0;e<this.matrixWidth;e++)for(let t=0;t<this.matrixHeight;t++)this.createCell(e,t);if(this.updateValue(),this.xAxisLabel!==LabelMode.None){const e=this.scale*this.matrixHeight*(t.CELL_WIDTH+t.CELL_VERTICAL_MARGIN)+2*t.CELL_VERTICAL_MARGIN+t.BOTTOM_MARGIN,n=pxsim.svg.child(this.elt,"g",{transform:`translate(0 ${e})`});for(let e=0;e<this.matrixWidth;e++){const o=this.getYAxisWidth()+this.scale*e*(t.CELL_WIDTH+t.CELL_HORIZONTAL_MARGIN)+t.CELL_WIDTH/2+t.CELL_HORIZONTAL_MARGIN/2;pxsim.svg.child(n,"text",{x:o,class:"blocklyText"}).textContent=this.getLabel(e,this.xAxisLabel)}}if(this.yAxisLabel!==LabelMode.None){const e=pxsim.svg.child(this.elt,"g",{});for(let n=0;n<this.matrixHeight;n++){const o=this.scale*n*(t.CELL_WIDTH+t.CELL_VERTICAL_MARGIN)+t.CELL_WIDTH/2+2*t.CELL_VERTICAL_MARGIN;pxsim.svg.child(e,"text",{x:0,y:o,class:"blocklyText"}).textContent=this.getLabel(n,this.yAxisLabel)}}this.fieldGroup_.replaceChild(this.elt,this.fieldGroup_.firstChild)}}getLabel(e,t){switch(t){case LabelMode.Letter:return String.fromCharCode(e+65);default:return(e+1).toString()}}createCell(e,n){const o=this.scale*e*(t.CELL_WIDTH+t.CELL_HORIZONTAL_MARGIN)+t.CELL_HORIZONTAL_MARGIN+this.getYAxisWidth(),r=this.scale*n*(t.CELL_WIDTH+t.CELL_VERTICAL_MARGIN)+t.CELL_VERTICAL_MARGIN,i=pxsim.svg.child(this.elt,"g",{transform:`translate(${o} ${r})`}),s=pxsim.svg.child(i,"rect",{class:"blocklyLed"+(this.cellState[e][n]?"On":"Off"),cursor:"pointer",width:this.scale*t.CELL_WIDTH,height:this.scale*t.CELL_WIDTH,fill:this.getColor(e,n),"data-x":e,"data-y":n,rx:Math.max(2,this.scale*t.CELL_CORNER_RADIUS)});this.cells[e][n]=s,this.sourceBlock_.workspace.isFlyout||pxsim.pointerEvents.down.forEach((t=>s.addEventListener(t,(t=>{const o=this.sourceBlock_.getSvgRoot();this.currentDragState_=!this.cellState[e][n],Blockly.hideChaff(),this.sourceBlock_.select(),this.toggleRect(e,n),pxsim.pointerEvents.down.forEach((e=>o.addEventListener(e,this.dontHandleMouseEvent_))),o.addEventListener(pxsim.pointerEvents.move,this.dontHandleMouseEvent_),document.addEventListener(pxsim.pointerEvents.up,this.clearLedDragHandler),document.addEventListener(pxsim.pointerEvents.leave,this.clearLedDragHandler),this.elt.addEventListener(pxsim.pointerEvents.move,this.handleRootMouseMoveListener),t.stopPropagation(),t.preventDefault()}),!1)))}getColor(e,n){return this.cellState[e][n]?this.onColor:this.offColor||t.DEFAULT_OFF_COLOR}getOpacity(e,t){return this.cellState[e][t]?"1.0":"0.2"}updateCell(e,t){const n=this.cells[e][t];n.setAttribute("fill",this.getColor(e,t)),n.setAttribute("fill-opacity",this.getOpacity(e,t)),n.setAttribute("class","blocklyLed"+(this.cellState[e][t]?"On":"Off"))}setValue(e,t=!0){if(super.setValue(String(e)),this.elt){t&&this.restoreStateFromString();for(let e=0;e<this.matrixWidth;e++)for(let t=0;t<this.matrixHeight;t++)this.updateCell(e,t)}}render_(){this.visible_?(this.elt||this.initMatrix(),this.size_.height=this.scale*Number(this.matrixHeight)*(t.CELL_WIDTH+t.CELL_VERTICAL_MARGIN)+2*t.CELL_VERTICAL_MARGIN+t.BOTTOM_MARGIN+this.getXAxisHeight(),this.size_.width=this.scale*Number(this.matrixWidth)*(t.CELL_WIDTH+t.CELL_HORIZONTAL_MARGIN)+this.getYAxisWidth()):this.markDirty()}getValue(){let e=function(e){const t=(e=(e||"").trim()).charAt(0);if(t===e.charAt(e.length-1)&&-1!==o.indexOf(t))return e.substr(1,e.length-2).trim();return e}(this.value_);return`\`\n${t.TAB}${e}\n${t.TAB}\``}restoreStateFromString(){let e=this.value_;if(e){const o=e.split("\n").filter((e=>rowRegex.test(e)));for(let e=0;e<o.length&&e<this.matrixHeight;e++){let r=0;const i=o[e];for(let o=0;o<i.length&&r<this.matrixWidth;o++)"."===(t=i[o])||"_"===t||"0"===t?(this.cellState[r][e]=!1,r++):n(i[o])&&(this.cellState[r][e]=!0,r++)}}var t}updateValue(){let e="";for(let n=0;n<this.matrixHeight;n++){for(let t=0;t<this.matrixWidth;t++)e+=(this.cellState[t][n]?"#":".")+" ";e+="\n"+t.TAB}this.setValue(e,!1)}getYAxisWidth(){return this.yAxisLabel===LabelMode.None?0:t.Y_AXIS_WIDTH}getXAxisHeight(){return this.xAxisLabel===LabelMode.None?0:t.X_AXIS_HEIGHT}}function n(e){return"#"===e||"*"===e||"1"===e}t.CELL_WIDTH=25,t.CELL_HORIZONTAL_MARGIN=7,t.CELL_VERTICAL_MARGIN=5,t.CELL_CORNER_RADIUS=5,t.BOTTOM_MARGIN=9,t.Y_AXIS_WIDTH=9,t.X_AXIS_HEIGHT=10,t.TAB="        ",t.DEFAULT_OFF_COLOR="#000000",e.FieldMatrix=t;const o=["'",'"',"`"]}(pxtblockly||(pxtblockly={})),function(e){var t=pxt.svgUtil;e.HEADER_HEIGHT=50,e.TOTAL_WIDTH=300;class n extends Blockly.Field{constructor(e,t,n){super(e,n),this.isFieldCustom_=!0,this.SERIALIZABLE=!0,this.soundingKeys=0,this.numRow=8,this.numCol=8,this.tempo=120,this.isPlaying=!1,this.timeouts=[],this.params=t,this.createMelodyIfDoesntExist()}init(){super.init(),this.onInit()}showEditor_(){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent(),Blockly.DropDownDiv.setColour(this.getDropdownBackgroundColour(),this.getDropdownBorderColour());let e=Blockly.DropDownDiv.getContentDiv();pxt.BrowserUtils.addClass(e,"melody-content-div"),pxt.BrowserUtils.addClass(e.parentElement,"melody-editor-dropdown"),this.gallery=new pxtmelody.MelodyGallery,this.renderEditor(e),this.prevString=this.getValue(),Blockly.Events.fire(new Blockly.Events.Ui(this.sourceBlock_,"melody-editor",!1,!0)),Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_,(()=>{this.onEditorClose(),pxt.BrowserUtils.removeClass(e,"melody-content-div"),pxt.BrowserUtils.removeClass(e.parentElement,"melody-editor-dropdown"),Blockly.Events.fire(new Blockly.Events.Ui(this.sourceBlock_,"melody-editor",!0,!1))}))}getValue(){return this.stringRep=this.getTypeScriptValue(),this.stringRep}doValueUpdate_(e){null==e||""==e||'""'==e||this.stringRep&&this.stringRep===e||(this.stringRep=e,this.parseTypeScriptValue(e),super.doValueUpdate_(this.getValue()))}getText_(){return this.invalidString?pxt.Util.lf("Invalid Input"):this.getValue()}onInit(){this.render_(),this.createMelodyIfDoesntExist(),this.invalidString||(this.fieldGroup_||(this.fieldGroup_=Blockly.utils.dom.createSvgElement("g",{},null)),this.visible_||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.updateFieldLabel())}render_(){super.render_(),this.invalidString||(this.size_.width=n.MUSIC_ICON_WIDTH+(n.COLOR_BLOCK_WIDTH+n.COLOR_BLOCK_SPACING)*this.numCol),this.sourceBlock_.setColour("#ffffff")}renderEditor(n){let o=this.getDropdownBackgroundColour(),r=this.getDropdownBorderColour();this.topDiv=document.createElement("div"),pxt.BrowserUtils.addClass(this.topDiv,"melody-top-bar-div"),this.root=new t.SVG(this.topDiv).id("melody-editor-header-controls"),this.toggle=new i(this.root,{leftText:lf("Editor"),rightText:lf("Gallery"),baseColor:o}),this.toggle.onStateChange((e=>{e?this.hideGallery():this.showGallery()})),this.toggle.layout(),this.toggle.translate((e.TOTAL_WIDTH-this.toggle.width())/2,0),n.appendChild(this.topDiv),n.appendChild(this.gallery.getElement()),this.editorDiv=document.createElement("div"),pxt.BrowserUtils.addClass(this.editorDiv,"melody-editor-div"),this.editorDiv.style.setProperty("background-color",r),this.gridDiv=this.createGridDisplay(),this.editorDiv.appendChild(this.gridDiv),this.bottomDiv=document.createElement("div"),pxt.BrowserUtils.addClass(this.bottomDiv,"melody-bottom-bar-div"),this.doneButton=document.createElement("button"),pxt.BrowserUtils.addClass(this.doneButton,"melody-confirm-button"),this.doneButton.innerText=lf("Done"),this.doneButton.addEventListener("click",(()=>this.onDone())),this.doneButton.style.setProperty("background-color",o),this.playButton=document.createElement("button"),this.playButton.id="melody-play-button",this.playButton.addEventListener("click",(()=>this.togglePlay())),this.playIcon=document.createElement("i"),this.playIcon.id="melody-play-icon",pxt.BrowserUtils.addClass(this.playIcon,"play icon"),this.playButton.appendChild(this.playIcon),this.tempoInput=document.createElement("input"),pxt.BrowserUtils.addClass(this.tempoInput,"ui input"),this.tempoInput.type="number",this.tempoInput.title=lf("tempo"),this.tempoInput.id="melody-tempo-input",this.tempoInput.addEventListener("input",(()=>this.setTempo(+this.tempoInput.value))),this.syncTempoField(!0),this.bottomDiv.appendChild(this.tempoInput),this.bottomDiv.appendChild(this.playButton),this.bottomDiv.appendChild(this.doneButton),this.editorDiv.appendChild(this.bottomDiv),n.appendChild(this.editorDiv)}onEditorClose(){this.stopMelody(),this.gallery&&this.gallery.stopMelody(),this.clearDomReferences(),this.sourceBlock_&&Blockly.Events.isEnabled()&&this.getValue()!==this.prevString&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.prevString,this.getValue())),this.prevString=void 0}onDone(){Blockly.DropDownDiv.hideIfOwner(this),this.onEditorClose()}clearDomReferences(){this.topDiv=null,this.editorDiv=null,this.gridDiv=null,this.bottomDiv=null,this.doneButton=null,this.playButton=null,this.playIcon=null,this.tempoInput=null,this.elt=null,this.cells=null,this.toggle=null,this.root=null,this.gallery.clearDomReferences()}getTypeScriptValue(){return this.invalidString?this.invalidString:this.melody?'"'+this.melody.getStringRepresentation()+'"':""}parseTypeScriptValue(e){let t=e;try{e=(e=e.slice(1,-1)).trim(),this.createMelodyIfDoesntExist();let t=e.split(" ");t.forEach((e=>{if(!this.isValidNote(e))throw new Error(lf("Invalid note '{0}'. Notes can be C D E F G A B C5",e))})),this.melody.resetMelody();for(let e=0;e<t.length;e++)if("-"!=t[e]){let n=pxtmelody.noteToRow(t[e]);this.melody.updateMelody(n,e)}this.updateFieldLabel()}catch(e){pxt.log(e),this.invalidString=t}}isValidNote(e){switch(e){case"C":case"D":case"E":case"F":case"G":case"A":case"B":case"C5":case"-":return!0}return!1}getPreviewWidth(){return this.updateSize_(),this.size_.width}getPreviewHeight(){return this.constants_.FIELD_BORDER_RECT_HEIGHT}getDropdownBackgroundColour(){return this.sourceBlock_.parentBlock_?this.sourceBlock_.parentBlock_.getColour():"#3D3D3D"}getDropdownBorderColour(){return this.sourceBlock_.parentBlock_?this.sourceBlock_.parentBlock_.getColourTertiary():"#2A2A2A"}updateFieldLabel(){if(!this.fieldGroup_)return;pxsim.U.clear(this.fieldGroup_);let e=s("").appendClass("melody-editor-field-icon").at(6,15);this.fieldGroup_.appendChild(e.el);let o=this.melody.getStringRepresentation().trim().split(" ");for(let e=0;e<o.length;e++){let r=pxtmelody.getColorClass(pxtmelody.noteToRow(o[e]));const i=(new t.Rect).at((n.COLOR_BLOCK_WIDTH+n.COLOR_BLOCK_SPACING)*e+n.COLOR_BLOCK_X,n.COLOR_BLOCK_Y).size(n.COLOR_BLOCK_WIDTH,n.COLOR_BLOCK_HEIGHT).stroke("#898989",1).corners(3,2);pxt.BrowserUtils.addClass(i.el,r),this.fieldGroup_.appendChild(i.el)}}setTempo(e){(isNaN(e)||e<=0)&&this.tempoInput?this.tempoInput.value=this.tempo+"":this.tempo!=e&&(this.tempo=e,this.melody&&this.melody.setTempo(this.tempo),this.tempoInput&&(this.tempoInput.value=this.tempo+""),this.syncTempoField(!1))}syncTempoField(e){const t=this.sourceBlock_;if(t.parentBlock_){const n=t.parentBlock_;for(const t of n.inputList)if("tempo"===t.name){const n=t.connection.targetBlock();n&&(e?n.getFieldValue("SLIDER")?(this.tempoInput.value=n.getFieldValue("SLIDER"),this.tempo=+this.tempoInput.value):this.tempoInput.value=this.tempo+"":("math_number_minmax"===n.type?n.setFieldValue(this.tempoInput.value,"SLIDER"):n.setFieldValue(this.tempoInput.value,"NUM"),this.tempoInput.focus()));break}}}getDuration(){return 6e4/this.tempo}createMelodyIfDoesntExist(){return!this.melody&&(this.melody=new pxtmelody.MelodyArray,!0)}onNoteSelect(e,t){this.invalidString=null,this.melody.updateMelody(e,t),this.melody.getValue(e,t)&&!this.isPlaying&&this.playNote(e,t),this.updateGrid(),this.updateFieldLabel()}updateGrid(){for(let e=0;e<this.numRow;e++){const t=pxtmelody.getColorClass(e);for(let n=0;n<this.numCol;n++){const o=this.cells[e][n];this.melody.getValue(e,n)?(pxt.BrowserUtils.removeClass(o,"melody-default"),pxt.BrowserUtils.addClass(o,t)):(pxt.BrowserUtils.addClass(o,"melody-default"),pxt.BrowserUtils.removeClass(o,t))}}}playNote(e,t){let n=++this.soundingKeys;this.isPlaying?(this.timeouts.push(setTimeout((()=>{this.playToneCore(e)}),t*this.getDuration())),this.timeouts.push(setTimeout((()=>{pxt.AudioContextManager.stop()}),(t+1)*this.getDuration()))):(this.playToneCore(e),this.timeouts.push(setTimeout((()=>{this.soundingKeys==n&&pxt.AudioContextManager.stop()}),this.getDuration())))}queueToneForColumn(e,t,n){const o=setTimeout((()=>{++this.soundingKeys,pxt.AudioContextManager.stop();for(let t=0;t<this.numRow;t++)this.melody.getValue(t,e)&&this.playToneCore(t);this.highlightColumn(e,!0),this.timeouts=this.timeouts.filter((e=>e!==o))}),t),r=setTimeout((()=>{this.timeouts=this.timeouts.filter((e=>e!==r)),this.highlightColumn(e,!1)}),t+n);this.timeouts.push(o),this.timeouts.push(r)}playToneCore(e){let t=0;switch(e){case 0:t=523;break;case 1:t=494;break;case 2:t=440;break;case 3:t=392;break;case 4:t=349;break;case 5:t=330;break;case 6:t=294;break;case 7:t=262}pxt.AudioContextManager.tone(t)}highlightColumn(e,t){this.cells.map((t=>t[e])).forEach((e=>{t?pxt.BrowserUtils.addClass(e,"playing"):pxt.BrowserUtils.removeClass(e,"playing")}))}createGridDisplay(){n.VIEWBOX_WIDTH=(n.CELL_WIDTH+n.CELL_VERTICAL_MARGIN)*this.numCol+n.CELL_VERTICAL_MARGIN,pxt.BrowserUtils.isEdge()&&(n.VIEWBOX_WIDTH+=37),n.VIEWBOX_HEIGHT=(n.CELL_WIDTH+n.CELL_HORIZONTAL_MARGIN)*this.numRow+n.CELL_HORIZONTAL_MARGIN,this.elt=pxsim.svg.parseString(`<svg xmlns="http://www.w3.org/2000/svg" class="melody-grid-div" viewBox="0 0 ${n.VIEWBOX_WIDTH} ${n.VIEWBOX_HEIGHT}"/>`),this.cells=[];for(let e=0;e<this.numRow;e++)this.cells.push([]);for(let e=0;e<this.numRow;e++)for(let t=0;t<this.numCol;t++)this.createCell(e,t);return this.elt}createCell(e,t){const o=e*(n.CELL_WIDTH+n.CELL_HORIZONTAL_MARGIN)+n.CELL_HORIZONTAL_MARGIN,r=t*(n.CELL_WIDTH+n.CELL_VERTICAL_MARGIN)+n.CELL_VERTICAL_MARGIN,i=pxsim.svg.child(this.elt,"g",{transform:`translate(${r} ${o})`}),s=pxsim.svg.child(i,"rect",{cursor:"pointer",width:n.CELL_WIDTH,height:n.CELL_WIDTH,stroke:"white","data-x":e,"data-y":t,rx:n.CELL_CORNER_RADIUS});this.melody.getValue(e,t)?pxt.BrowserUtils.addClass(s,pxtmelody.getColorClass(e)):pxt.BrowserUtils.addClass(s,"melody-default"),this.sourceBlock_.workspace.isFlyout||(pxsim.pointerEvents.down.forEach((n=>s.addEventListener(n,(n=>{this.onNoteSelect(e,t),n.stopPropagation(),n.preventDefault()}),!1))),this.cells[e][t]=s)}togglePlay(){this.isPlaying?this.stopMelody():(this.isPlaying=!0,this.playMelody()),this.updatePlayButton()}updatePlayButton(){this.isPlaying?(pxt.BrowserUtils.removeClass(this.playIcon,"play icon"),pxt.BrowserUtils.addClass(this.playIcon,"stop icon")):(pxt.BrowserUtils.removeClass(this.playIcon,"stop icon"),pxt.BrowserUtils.addClass(this.playIcon,"play icon"))}playMelody(){if(this.isPlaying){for(let e=0;e<this.numCol;e++)this.queueToneForColumn(e,e*this.getDuration(),this.getDuration());this.timeouts.push(setTimeout((()=>this.playMelody()),this.numCol*this.getDuration()))}else this.stopMelody()}stopMelody(){if(this.isPlaying){for(;this.timeouts.length;)clearTimeout(this.timeouts.shift());pxt.AudioContextManager.stop(),this.isPlaying=!1,this.cells.forEach((e=>e.forEach((e=>pxt.BrowserUtils.removeClass(e,"playing")))))}}showGallery(){this.stopMelody(),this.updatePlayButton(),this.gallery.show((e=>{e&&(this.melody.parseNotes(e),this.gallery.hide(),this.toggle.toggle(),this.updateFieldLabel(),this.updateGrid())}))}hideGallery(){this.gallery.hide()}}n.CELL_WIDTH=25,n.CELL_HORIZONTAL_MARGIN=7,n.CELL_VERTICAL_MARGIN=5,n.CELL_CORNER_RADIUS=5,n.COLOR_BLOCK_WIDTH=10,n.COLOR_BLOCK_HEIGHT=20,n.COLOR_BLOCK_X=20,n.COLOR_BLOCK_Y=5,n.COLOR_BLOCK_SPACING=2,n.MUSIC_ICON_WIDTH=20,e.FieldCustomMelody=n;const o=200,r=40;class i{constructor(e,t){this.props=function(e){e.baseColor||(e.baseColor="#e95153");e.backgroundColor||(e.backgroundColor="rgba(52,73,94,.2)");e.borderColor||(e.borderColor="rgba(52,73,94,.4)");e.selectedTextColor||(e.selectedTextColor=e.baseColor);e.unselectedTextColor||(e.unselectedTextColor="hsla(0,0%,100%,.9)");e.switchColor||(e.switchColor="#ffffff");return e}(t),this.root=e.group(),this.buildDom(),this.isLeft=!0}buildDom(){this.root.style().content("\n            .toggle-left {\n                transform: translateX(0px);\n                animation: mvleft 0.2s 0s ease;\n            }\n\n            .toggle-right {\n                transform: translateX(100px);\n                animation: mvright 0.2s 0s ease;\n            }\n\n            @keyframes mvright {\n                0% {\n                    transform: translateX(0px);\n                }\n                100% {\n                    transform: translateX(100px);\n                }\n            }\n\n            @keyframes mvleft {\n                0% {\n                    transform: translateX(100px);\n                }\n                100% {\n                    transform: translateX(0px);\n                }\n            }\n            ");this.root.def().create("clipPath","sprite-editor-toggle-border").clipPathUnits(!0).draw("rect").at(0,0).corners(.02,.1).size(1,1),this.root.draw("rect").size(o,r).fill(this.props.baseColor).stroke(this.props.borderColor,4).corners(4,4).clipPath("url(#sprite-editor-toggle-border)"),this.root.draw("rect").at(2,2).size(196,36).fill(this.props.backgroundColor).corners(4,4),this.switch=this.root.draw("rect").at(2,2).size(98,36).fill(this.props.switchColor).corners(4,4),this.leftElement=this.root.group(),this.leftText=s(this.props.leftText).appendClass("sprite-editor-text").fill(this.props.selectedTextColor),this.leftElement.appendChild(this.leftText),this.rightElement=this.root.group(),this.rightText=s(this.props.rightText).appendClass("sprite-editor-text").fill(this.props.unselectedTextColor),this.rightElement.appendChild(this.rightText),this.root.onClick((()=>this.toggle()))}toggle(e=!1){this.isLeft?(this.switch.removeClass("toggle-left"),this.switch.appendClass("toggle-right"),this.leftText.fill(this.props.unselectedTextColor),this.rightText.fill(this.props.selectedTextColor)):(this.switch.removeClass("toggle-right"),this.switch.appendClass("toggle-left"),this.leftText.fill(this.props.selectedTextColor),this.rightText.fill(this.props.unselectedTextColor)),this.isLeft=!this.isLeft,!e&&this.changeHandler&&this.changeHandler(this.isLeft)}onStateChange(e){this.changeHandler=e}layout(){this.leftText.moveTo(51,20),this.rightText.moveTo(149,20)}translate(e,t){this.root.translate(e,t)}height(){return r}width(){return o}}function s(e){return new t.Text(e).anchor("middle").setAttribute("dominant-baseline","middle").setAttribute("dy",pxt.BrowserUtils.isIE()||pxt.BrowserUtils.isEdge()?"0.3em":"0.1em")}}(pxtblockly||(pxtblockly={})),function(e){let t;!function(e){e[e.C=262]="C",e[e.CSharp=277]="CSharp",e[e.D=294]="D",e[e.Eb=311]="Eb",e[e.E=330]="E",e[e.F=349]="F",e[e.FSharp=370]="FSharp",e[e.G=392]="G",e[e.GSharp=415]="GSharp",e[e.A=440]="A",e[e.Bb=466]="Bb",e[e.B=494]="B",e[e.C3=131]="C3",e[e.CSharp3=139]="CSharp3",e[e.D3=147]="D3",e[e.Eb3=156]="Eb3",e[e.E3=165]="E3",e[e.F3=175]="F3",e[e.FSharp3=185]="FSharp3",e[e.G3=196]="G3",e[e.GSharp3=208]="GSharp3",e[e.A3=220]="A3",e[e.Bb3=233]="Bb3",e[e.B3=247]="B3",e[e.C4=262]="C4",e[e.CSharp4=277]="CSharp4",e[e.D4=294]="D4",e[e.Eb4=311]="Eb4",e[e.E4=330]="E4",e[e.F4=349]="F4",e[e.FSharp4=370]="FSharp4",e[e.G4=392]="G4",e[e.GSharp4=415]="GSharp4",e[e.A4=440]="A4",e[e.Bb4=466]="Bb4",e[e.B4=494]="B4",e[e.C5=523]="C5",e[e.CSharp5=555]="CSharp5",e[e.D5=587]="D5",e[e.Eb5=622]="Eb5",e[e.E5=659]="E5",e[e.F5=698]="F5",e[e.FSharp5=740]="FSharp5",e[e.G5=784]="G5",e[e.GSharp5=831]="GSharp5",e[e.A5=880]="A5",e[e.Bb5=932]="Bb5",e[e.B5=988]="B5",e[e.C6=1047]="C6",e[e.CSharp6=1109]="CSharp6",e[e.D6=1175]="D6",e[e.Eb6=1245]="Eb6",e[e.E6=1319]="E6",e[e.F6=1397]="F6",e[e.FSharp6=1480]="FSharp6",e[e.G6=1568]="G6",e[e.GSharp6=1568]="GSharp6",e[e.A6=1760]="A6",e[e.Bb6=1865]="Bb6",e[e.B6=1976]="B6",e[e.C7=2093]="C7"}(t||(t={}));class n extends Blockly.FieldNumber{constructor(t,n,o){super(null,0,null,null,o),this.isFieldCustom_=!0,this.SERIALIZABLE=!0,this.isTextValid_=!0,this.nKeys_=36,this.minNote_=28,this.maxNote_=63,this.eps=2,this.setSpellcheck(!1),this.prepareNotes(),this.isExpanded=!1,this.currentPage=0,this.totalPlayCount=0,n.editorColour&&(this.primaryColour=e.parseColour(n.editorColour),this.borderColour=Blockly.utils.colour.darken(this.primaryColour,.2));const r=parseInt(n.eps);!Number.isNaN(r)&&r>=0&&(this.eps=r);const i=parseInt(n.minNote)||this.minNote_,s=parseInt(n.maxNote)||this.maxNote_;i>=28&&s<=75&&s>i&&(this.minNote_=i,this.maxNote_=s,this.nKeys_=this.maxNote_-this.minNote_+1),this.setValue(t)}doClassValidation_(e){const n=/^Note\.(.+)$/.exec(e),o=n&&n.length>1?n[1]:null;if(null===(e=t[o]?t[o]:String(parseFloat(e||"0"))))return null;const r=parseFloat(e||"0");if(isNaN(r)||r<0)return null;const i=Math.floor(r)!=r;return""+r.toFixed(i?2:0)}getValue(){return this.value_+""}doValueUpdate_(e){isNaN(Number(e))||Number(e)<0||(this.sourceBlock_&&Blockly.Events.isEnabled()&&this.value_!=e&&Blockly.Events.fire(new Blockly.Events.Change(this.sourceBlock_,"field",this.name,this.value_,e)),this.value_=e,this.refreshText())}getText(){if(this.isExpanded)return""+this.value_;{const e=+this.value_;for(let t=0;t<this.nKeys_;t++)if(Math.abs(this.getKeyFreq(t)-e)<this.eps)return this.getKeyName(t);let t=e.toString();return isNaN(e)||(t+=" Hz"),t}}refreshText(){this.forceRerender()}onHtmlInputChange_(e){super.onHtmlInputChange_(e),Blockly.DropDownDiv.hideWithoutAnimation(),this.htmlInput_.focus()}onFinishEditing_(e){this.refreshText()}onHide(){this.isExpanded=!1,this.refreshText()}showEditor_(e){this.isExpanded=!0,this.updateColor(),Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();const t=pxt.BrowserUtils.isMobile()||pxt.BrowserUtils.isIOS();n.superClass_.showEditor_.call(this,e,t,t),this.refreshText(),Blockly.Events.setGroup(!0),this.piano=[],this.currentSelectedKey=void 0;const r=this.nKeys_-this.nKeys_/n.notesPerOctave*n.blackKeysPerOctave,i=n.notesPerOctave-n.blackKeysPerOctave;let s=n.keyWidth*r,a=n.keyHeight+n.labelHeight;const l=window.innerWidth<s;l&&(s=i*n.keyWidth,a=n.keyHeight+n.labelHeight+n.prevNextHeight);const c=o("blocklyPianoDiv",`width: ${s}px;\n                height: ${a}px;`);Blockly.DropDownDiv.getContentDiv().appendChild(c),this.noteLabel=o("blocklyNoteLabel",`top: ${n.keyHeight}px;\n                width: ${s}px;\n                background-color: ${this.primaryColour};\n                border-color: ${this.primaryColour};`),c.appendChild(this.noteLabel),this.noteLabel.textContent="-";let u=0;for(let e=0;e<this.nKeys_;e++){const t=Math.floor(e/n.notesPerOctave);let o=this.getPosition(e);l&&e>=n.notesPerOctave&&(o-=i*t*n.keyWidth);const r=this.getKeyDiv(e,o);this.piano.push(r),c.appendChild(r),Math.abs(this.getKeyFreq(e)-Number(this.getValue()))<this.eps&&(pxt.BrowserUtils.addClass(r,"selected"),this.currentSelectedKey=r,u=t)}l&&(this.setPage(u),c.appendChild(this.getNextPrevDiv(!0,s)),c.appendChild(this.getNextPrevDiv(!1,s))),Blockly.DropDownDiv.setColour(this.primaryColour,this.borderColour),Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_,(()=>this.onHide()))}playKey(e,t){const n=++this.totalPlayCount;this.currentSelectedKey!==e&&(this.currentSelectedKey&&pxt.BrowserUtils.removeClass(this.currentSelectedKey,"selected"),pxt.BrowserUtils.addClass(e,"selected"),this.setValue(t)),this.currentSelectedKey=e,this.htmlInput_.value=this.getText(),pxt.AudioContextManager.tone(t),setTimeout((()=>{this.totalPlayCount==n&&pxt.AudioContextManager.stop()}),300)}dispose(){Blockly.DropDownDiv.hideIfOwner(this),super.dispose()}updateColor(){if(this.sourceBlock_.parentBlock_&&(this.sourceBlock_.isShadow()||1===(e=this.sourceBlock_).inputList.length&&1===e.inputList[0].fieldRow.length)){let e=this.sourceBlock_.parentBlock_;this.primaryColour=e.getColour(),this.borderColour=e.getColourTertiary()}else this.primaryColour="#3D3D3D",this.borderColour="#2A2A2A";var e}setPage(e){const t=this.nKeys_/n.notesPerOctave;e=Math.max(Math.min(e,t-1),0),this.noteLabel.textContent=`Octave #${e+1}`;const o=e*n.notesPerOctave;for(let e=0;e<this.piano.length;++e){const t=e>=o&&e<o+n.notesPerOctave;this.piano[e].style.display=t?"block":"none"}this.currentPage=e}getNextPrevDiv(e,t){const r=e?0:t/2,i=o("blocklyNotePrevNext",`top: ${n.keyHeight+n.labelHeight}px;\n                left: ${r}px;\n                width: ${Math.ceil(t/2)}px;\n                ${e?"border-left-color":"border-right-color"}: ${this.primaryColour};\n                background-color: ${this.primaryColour};\n                border-bottom-color: ${this.primaryColour};`);return pxt.BrowserUtils.pointerEvents.down.forEach((t=>{Blockly.bindEventWithChecks_(i,t,this,(()=>this.setPage(e?this.currentPage-1:this.currentPage+1)),!0)})),i.textContent=e?"<":">",i}getKeyDiv(e,t){const n=o("blocklyNote "+(this.isWhite(e)?"":"black"),`width: ${this.getKeyWidth(e)}px;\n                height: ${this.getKeyHeight(e)}px;\n                left: ${t}px;\n                border-color: ${this.primaryColour};`);return pxt.BrowserUtils.pointerEvents.down.forEach((t=>{Blockly.bindEventWithChecks_(n,t,this,(()=>this.playKey(n,this.getKeyFreq(e))),!0)})),Blockly.bindEventWithChecks_(n,"mouseover",this,(()=>this.noteLabel.textContent=this.getKeyName(e)),!0),n}isWhite(e){switch(e%12){case 1:case 3:case 6:case 8:case 10:return!1;default:return!0}}getKeyWidth(e){return this.isWhite(e)?n.keyWidth:n.keyWidth/2}getKeyHeight(e){return this.isWhite(e)?n.keyHeight:n.keyHeight/2}getKeyFreq(e){return this.getKeyNoteData(e).freq}getKeyName(e){const t=this.getKeyNoteData(e);let o=t.prefixedName;return this.nKeys_<=n.notesPerOctave?o=t.name:this.minNote_>=28&&this.maxNote_<=63&&(o=t.altPrefixedName||o),o}getKeyNoteData(e){return n.Notes[e+this.minNote_]}getPosition(e){const t=(e-Math.floor((e+1)/n.notesPerOctave*n.blackKeysPerOctave))*n.keyWidth;return this.isWhite(e)?t:t-n.keyWidth/4}prepareNotes(){n.Notes||(n.Notes={28:{name:lf("{id:note}C"),prefixedName:lf("Low C"),freq:131},29:{name:lf("C#"),prefixedName:lf("Low C#"),freq:139},30:{name:lf("{id:note}D"),prefixedName:lf("Low D"),freq:147},31:{name:lf("D#"),prefixedName:lf("Low D#"),freq:156},32:{name:lf("{id:note}E"),prefixedName:lf("Low E"),freq:165},33:{name:lf("{id:note}F"),prefixedName:lf("Low F"),freq:175},34:{name:lf("F#"),prefixedName:lf("Low F#"),freq:185},35:{name:lf("{id:note}G"),prefixedName:lf("Low G"),freq:196},36:{name:lf("G#"),prefixedName:lf("Low G#"),freq:208},37:{name:lf("{id:note}A"),prefixedName:lf("Low A"),freq:220},38:{name:lf("A#"),prefixedName:lf("Low A#"),freq:233},39:{name:lf("{id:note}B"),prefixedName:lf("Low B"),freq:247},40:{name:lf("{id:note}C"),prefixedName:lf("Middle C"),freq:262},41:{name:lf("C#"),prefixedName:lf("Middle C#"),freq:277},42:{name:lf("{id:note}D"),prefixedName:lf("Middle D"),freq:294},43:{name:lf("D#"),prefixedName:lf("Middle D#"),freq:311},44:{name:lf("{id:note}E"),prefixedName:lf("Middle E"),freq:330},45:{name:lf("{id:note}F"),prefixedName:lf("Middle F"),freq:349},46:{name:lf("F#"),prefixedName:lf("Middle F#"),freq:370},47:{name:lf("{id:note}G"),prefixedName:lf("Middle G"),freq:392},48:{name:lf("G#"),prefixedName:lf("Middle G#"),freq:415},49:{name:lf("{id:note}A"),prefixedName:lf("Middle A"),freq:440},50:{name:lf("A#"),prefixedName:lf("Middle A#"),freq:466},51:{name:lf("{id:note}B"),prefixedName:lf("Middle B"),freq:494},52:{name:lf("{id:note}C"),prefixedName:lf("Tenor C"),altPrefixedName:lf("High C"),freq:523},53:{name:lf("C#"),prefixedName:lf("Tenor C#"),altPrefixedName:lf("High C#"),freq:554},54:{name:lf("{id:note}D"),prefixedName:lf("Tenor D"),altPrefixedName:lf("High D"),freq:587},55:{name:lf("D#"),prefixedName:lf("Tenor D#"),altPrefixedName:lf("High D#"),freq:622},56:{name:lf("{id:note}E"),prefixedName:lf("Tenor E"),altPrefixedName:lf("High E"),freq:659},57:{name:lf("{id:note}F"),prefixedName:lf("Tenor F"),altPrefixedName:lf("High F"),freq:698},58:{name:lf("F#"),prefixedName:lf("Tenor F#"),altPrefixedName:lf("High F#"),freq:740},59:{name:lf("{id:note}G"),prefixedName:lf("Tenor G"),altPrefixedName:lf("High G"),freq:784},60:{name:lf("G#"),prefixedName:lf("Tenor G#"),altPrefixedName:lf("High G#"),freq:831},61:{name:lf("{id:note}A"),prefixedName:lf("Tenor A"),altPrefixedName:lf("High A"),freq:880},62:{name:lf("A#"),prefixedName:lf("Tenor A#"),altPrefixedName:lf("High A#"),freq:932},63:{name:lf("{id:note}B"),prefixedName:lf("Tenor B"),altPrefixedName:lf("High B"),freq:988},64:{name:lf("{id:note}C"),prefixedName:lf("High C"),freq:1046},65:{name:lf("C#"),prefixedName:lf("High C#"),freq:1109},66:{name:lf("{id:note}D"),prefixedName:lf("High D"),freq:1175},67:{name:lf("D#"),prefixedName:lf("High D#"),freq:1245},68:{name:lf("{id:note}E"),prefixedName:lf("High E"),freq:1319},69:{name:lf("{id:note}F"),prefixedName:lf("High F"),freq:1397},70:{name:lf("F#"),prefixedName:lf("High F#"),freq:1478},71:{name:lf("{id:note}G"),prefixedName:lf("High G"),freq:1568},72:{name:lf("G#"),prefixedName:lf("High G#"),freq:1661},73:{name:lf("{id:note}A"),prefixedName:lf("High A"),freq:1760},74:{name:lf("A#"),prefixedName:lf("High A#"),freq:1865},75:{name:lf("{id:note}B"),prefixedName:lf("High B"),freq:1976}})}}function o(e,t){const n=document.createElement("div");return pxt.BrowserUtils.addClass(n,e),n.setAttribute("style",t.replace(/\s+/g," ")),n}n.keyWidth=22,n.keyHeight=90,n.labelHeight=24,n.prevNextHeight=20,n.notesPerOctave=12,n.blackKeysPerOctave=5,e.FieldNote=n}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldNumberDropdown{constructor(e,t,n){super(e,t.data,t.min,t.max,t.precision,n),this.isFieldCustom_=!0}getOptions(){let e;return this.menuGenerator_&&(e=JSON.parse(this.menuGenerator_).map((e=>"object"==typeof e?e:[String(e),String(e)]))),e}}e.FieldNumberDropdown=t}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldSlider{constructor(e,t,n){super(e,"0","100","1","100","Value",n),this.isFieldCustom_=!0,this.params=t,this.params.screenHeight||(this.params.screenHeight=120),this.params.screenWidth||(this.params.screenWidth=160),this.params.xInputName||(this.params.xInputName="x"),this.params.yInputName||(this.params.yInputName="y"),this.params.min&&(this.min_=parseInt(this.params.min)),this.params.max&&(this.max_=parseInt(this.params.max))}showEditor_(e){this.getFieldByName(this.params.xInputName)===this&&(this.max_=this.params.screenWidth,this.labelText_=this.params.xInputName);this.getFieldByName(this.params.yInputName)===this&&(this.max_=this.params.screenHeight,this.labelText_=this.params.yInputName),super.showEditor_(e),this.renderScreenPicker()}doValueUpdate_(e){super.doValueUpdate_(e),this.resetCrosshair&&this.resetCrosshair()}renderScreenPicker(){let e=Blockly.DropDownDiv.getContentDiv();this.selectorDiv_=document.createElement("div"),this.selectorDiv_.className="blocklyCanvasOverlayOuter",e.appendChild(this.selectorDiv_);const t=document.createElement("div");t.className="blocklyCanvasOverlayDiv",this.selectorDiv_.appendChild(t);const n=document.createElement("div");n.className="cross-x",t.appendChild(n);const o=document.createElement("div");o.className="cross-y",t.appendChild(o);const r=document.createElement("div");r.className="label",t.appendChild(r);const i=1.5*this.params.screenWidth,s=1.5*this.params.screenHeight;t.style.height=s+"px",t.style.width=i+"px";const a=e.getElementsByClassName("goog-slider-horizontal")[0];if(a){a.style.width=i+"px";const e=parseFloat(this.getValue());!isNaN(e)&&e>this.getMin()&&(this.setValue(e-1+""),this.setValue(e+""))}const l=(e,t)=>{e=Math.round(Math.max(0,Math.min(i,e))),t=Math.round(Math.max(0,Math.min(s,t))),n.style.top=t+"px",o.style.left=e+"px",e=Math.round(Math.max(0,Math.min(this.params.screenWidth,e/i*this.params.screenWidth))),t=Math.round(Math.max(0,Math.min(this.params.screenHeight,t/s*this.params.screenHeight))),isNaN(e)?r.textContent=`${this.params.yInputName}=${t}`:isNaN(t)?r.textContent=`${this.params.xInputName}=${e}`:r.textContent=`${this.params.xInputName}=${e} ${this.params.yInputName}=${t}`;const a=r.getBoundingClientRect();e>this.params.screenWidth/2?r.style.left=e*(i/this.params.screenWidth)-a.width-8+"px":r.style.left=e*(i/this.params.screenWidth)+4+"px",t>this.params.screenHeight/2?r.style.top=t*(s/this.params.screenHeight)-a.height-6+"px":r.style.top=t*(s/this.params.screenHeight)+"px"};this.resetCrosshair=()=>{const{currentX:e,currentY:t}=this.getXY();l(e/this.params.screenWidth*i,t/this.params.screenHeight*s)},this.resetCrosshair(),Blockly.bindEvent_(this.selectorDiv_,"mousemove",this,(e=>{const n=t.getBoundingClientRect(),o=e.clientX-n.left,r=e.clientY-n.top;l(o,r)})),Blockly.bindEvent_(this.selectorDiv_,"mouseleave",this,this.resetCrosshair),Blockly.bindEvent_(this.selectorDiv_,"click",this,(e=>{const n=t.getBoundingClientRect(),o=e.clientX-n.left,r=e.clientY-n.top,a=Math.round(o/i*this.params.screenWidth),l=Math.round(r/s*this.params.screenHeight);this.close(),this.setXY(a,l)}))}resizeHandler(){this.close()}setXY(e,t){const n=this.getFieldByName(this.params.xInputName);n&&"number"==typeof n.getValue()&&n.setValue(String(e));const o=this.getFieldByName(this.params.yInputName);o&&"number"==typeof o.getValue()&&o.setValue(String(t))}getFieldByName(e){const t=this.sourceBlock_.parentBlock_;if(t)for(let n=0;n<t.inputList.length;n++){const o=t.inputList[n];if(o.name===e)return this.getTargetField(o)}}getXY(){let e,t;const n=this.getFieldByName(this.params.xInputName);n&&(e=n.getValue());const o=this.getFieldByName(this.params.yInputName);return o&&(t=o.getValue()),{currentX:parseInt(e),currentY:parseInt(t)}}getTargetField(e){const t=e.connection.targetBlock();if(!t)return null;const n=t.inputList[0];if(!n)return null;return n.fieldRow[0]}widgetDispose_(){Blockly.FieldNumber.superClass_.widgetDispose_.call(this),this.close(!0)}close(e){e||(Blockly.WidgetDiv.hideIfOwner(this),Blockly.DropDownDiv.hideIfOwner(this)),window.removeEventListener("resize",this.resizeHandler),this.resetCrosshair=void 0,this.selectorDiv_&&(goog.dom.removeNode(this.selectorDiv_),this.selectorDiv_=void 0)}}e.FieldPosition=t}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldDropdown{constructor(e,t){super([["Temp","Temp"]],t),this.setValue(e||"")}getOptions(){return this.dropdownCreate()}init(){this.fieldGroup_||super.init.call(this)}setSourceBlock(e){goog.asserts.assert(!e.isShadow(),"Procedure fields are not allowed to exist on shadow blocks."),super.setSourceBlock.call(this,e)}dropdownCreate(){let e=[];if(this.sourceBlock_&&this.sourceBlock_.workspace){let t=this.sourceBlock_.workspace.getAllBlocks(!1);for(let n=0;n<t.length;n++)if(t[n].getProcedureDef){let o=t[n].getProcedureDef();e.push(o[0])}}let t=this.getValue();t&&-1==e.indexOf(t)&&e.push(t),e.sort(goog.string.caseInsensitiveCompare),e.length||e.push("Temp");let n=[];for(let t=0;t<e.length;t++)n[t]=[e[t],e[t]];return n}onItemSelected(e,t){let n=t.getValue();null!==n&&this.setValue(n)}}e.FieldProcedure=t}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldSlider{constructor(e,t,n){super(String(e),"0","180","1","15",lf("Angle"),n),this.isFieldCustom_=!0,this.params=t}createLabelDom_(e){const t=document.createElement("div");this.circleSVG=document.createElementNS("http://www.w3.org/2000/svg","svg"),pxsim.svg.hydrate(this.circleSVG,{viewBox:"0 0 200 100",width:"170"}),t.appendChild(this.circleSVG);pxsim.svg.child(this.circleSVG,"circle",{"stroke-dasharray":"565.48","stroke-dashoffset":"0",cx:100,cy:100,r:"90",style:"fill:transparent; transition: stroke-dashoffset 0.1s linear;",stroke:"#a8aaa8","stroke-width":"1rem"});this.circleBar=pxsim.svg.child(this.circleSVG,"circle",{"stroke-dasharray":"565.48","stroke-dashoffset":"0",cx:100,cy:100,r:"90",style:"fill:transparent; transition: stroke-dashoffset 0.1s linear;",stroke:"#f12a21","stroke-width":"1rem"}),this.reporter=pxsim.svg.child(this.circleSVG,"text",{x:100,y:80,"text-anchor":"middle","dominant-baseline":"middle",style:"font-size: 50px",class:"sim-text inverted number"});const n=document.createElement("span");return n.setAttribute("class","blocklyFieldSliderReadout"),[t,n]}setReadout_(e,t){this.updateAngle(parseFloat(t)),this.reporter.textContent=`${t}`}updateAngle(e){const t=(180-(e=Math.max(0,Math.min(180,e))))/180*Math.PI*90;this.circleBar.setAttribute("stroke-dashoffset",`${t}`)}}e.FieldProtractor=t}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldSlider{constructor(e,t,n){super(String(e),"-100","100","1","10","Speed",n),this.isFieldCustom_=!0,this.params=t,this.params.min&&(this.min_=parseFloat(this.params.min)),this.params.max&&(this.max_=parseFloat(this.params.max)),this.params.label&&(this.labelText_=this.params.label),this.params.format||(this.params.format="{0}%")}createLabelDom_(e){const t=document.createElement("div");this.speedSVG=document.createElementNS("http://www.w3.org/2000/svg","svg"),pxsim.svg.hydrate(this.speedSVG,{viewBox:"0 0 200 100",width:"170"}),t.appendChild(this.speedSVG);pxsim.svg.child(this.speedSVG,"circle",{"stroke-dasharray":"565.48","stroke-dashoffset":"0",cx:100,cy:100,r:"90",style:"fill:transparent; transition: stroke-dashoffset 0.1s linear;",stroke:"#a8aaa8","stroke-width":"1rem"});this.circleBar=pxsim.svg.child(this.speedSVG,"circle",{"stroke-dasharray":"565.48","stroke-dashoffset":"0",cx:100,cy:100,r:"90",style:"fill:transparent; transition: stroke-dashoffset 0.1s linear;",stroke:"#f12a21","stroke-width":"1rem"}),this.reporter=pxsim.svg.child(this.speedSVG,"text",{x:100,y:80,"text-anchor":"middle","dominant-baseline":"middle",style:`font-size: ${Math.max(14,50-5*(this.params.format.length-4))}px`,class:"sim-text inverted number"});const n=document.createElement("span");return n.setAttribute("class","blocklyFieldSliderReadout"),[t,n]}setReadout_(e,t){this.updateSpeed(parseFloat(t)),this.reporter.textContent=ts.pxtc.U.rlf(this.params.format,t)}updateSpeed(e){let t=this.sign(e);e=Math.abs(e)/100*50+50,-1==t&&(e=50-e);let n=(100-e)/100*(180*Math.PI);this.circleBar.setAttribute("stroke-dashoffset",`${n}`)}sign(e){return e?e<0?-1:1:0}}e.FieldSpeed=t}(pxtblockly||(pxtblockly={})),function(e){class t extends e.FieldAssetEditor{getAssetType(){return"image"}createNewAsset(e){const t=pxt.react.getTilemapProject();if(e){const n=pxt.lookupProjectAssetByTSReference(e,t);if(n)return n}if(this.getBlockData())return t.lookupAsset("image",this.getBlockData());const n=e?pxt.sprite.imageLiteralToBitmap(e):new pxt.sprite.Bitmap(this.params.initWidth,this.params.initHeight);if(!n)return this.isGreyBlock=!0,void(this.valueText=e);const o=n.data();return{internalID:-1,id:this.sourceBlock_.id,type:"image",jresData:pxt.sprite.base64EncodeBitmap(o),meta:{},bitmap:o}}getValueText(){return this.asset&&!this.isTemporaryAsset()?pxt.getTSReferenceForAsset(this.asset):pxt.sprite.bitmapToImageLiteral(this.asset&&pxt.sprite.Bitmap.fromData(this.asset.bitmap),"typescript")}parseFieldOptions(e){return function(e){const t={initColor:1,initWidth:16,initHeight:16,disableResize:!1,lightMode:!1};if(!e)return t;if(t.lightMode=e.lightMode,e.sizes){const n=e.sizes.split(";"),o=[];for(let e=0;e<n.length;e++){const t=n[e].split(",");if(2!==t.length)continue;let r=parseInt(t[0]),i=parseInt(t[1]);if(isNaN(r)||isNaN(i))continue;const s=pxt.appTarget.runtime&&pxt.appTarget.runtime.screenSize;r<0&&s&&(r=s.width),i<0&&s&&(i=s.height),o.push([r,i])}o.length>0&&(t.initWidth=o[0][0],t.initHeight=o[0][1])}e.filter&&(t.filter=e.filter);e.disableResize&&(t.disableResize="true"===e.disableResize.toLowerCase()||"1"===e.disableResize);return t.initColor=n(e.initColor,t.initColor),t.initWidth=n(e.initWidth,t.initWidth),t.initHeight=n(e.initHeight,t.initHeight),t;function n(e,t){const n=parseInt(e);return isNaN(n)?t:n}}(e)}}e.FieldSpriteEditor=t}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldLabel{constructor(e,t,n){super(e,function(e){if(e){if(e.bold&&e.italics)return"blocklyBoldItalicizedText";if(e.bold)return"blocklyBoldText";if(e.italics)return"blocklyItalicizedText"}return}(t)),this.isFieldCustom_=!0}}e.FieldStyledLabel=t}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldTextDropdown{constructor(e,t,n){super(e,t.values,n),this.isFieldCustom_=!0}}e.FieldTextDropdown=t}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldTextInput{constructor(e,t,n){super(e,n),this.isFieldCustom_=!0}}e.FieldTextInput=t}(pxtblockly||(pxtblockly={})),function(e){class t extends e.FieldAssetEditor{getInitText(){return this.initText}getTileset(){var e;return null===(e=this.asset)||void 0===e?void 0:e.data.tileset}getAssetType(){return"tilemap"}createNewAsset(e=""){e&&(e=e.replace(/&#96;/g,"`"));const t=pxt.react.getTilemapProject(),n=pxt.lookupProjectAssetByTSReference(e,t);if(n)return n;const o=pxt.sprite.decodeTilemap(e,"typescript",t)||t.blankTilemap(this.params.tileWidth,this.params.initWidth,this.params.initHeight);let r;if(function(e){return!!(e&&e.tilemap&&e.tilemap.width&&e.tilemap.height)&&(!(!e.layers||e.layers.width!==e.tilemap.width||e.layers.height!==e.tilemap.height)&&!!e.tileset)}(o)){this.initText=e,this.isGreyBlock=!1;const[n]=t.createNewTilemapFromData(o);r=t.getTilemap(n)}else e.trim()&&(this.isGreyBlock=!0,this.valueText=e);return r}onEditorClose(e){pxt.sprite.updateTilemapReferencesFromResult(pxt.react.getTilemapProject(),e)}getValueText(){return this.isGreyBlock?pxt.Util.htmlUnescape(this.valueText):this.asset?pxt.getTSReferenceForAsset(this.asset):this.getInitText()}parseFieldOptions(e){return function(e){const t={initWidth:16,initHeight:16,disableResize:!1,tileWidth:16,lightMode:!1};if(!e)return t;t.lightMode=e.lightMode,e.filter&&(t.filter=e.filter);if(e.tileWidth)if("number"==typeof e.tileWidth)switch(e.tileWidth){case 8:t.tileWidth=8;break;case 16:t.tileWidth=16;break;case 32:t.tileWidth=32}else{switch(e.tileWidth.trim().toLowerCase()){case"8":case"eight":t.tileWidth=8;break;case"16":case"sixteen":t.tileWidth=16;break;case"32":case"thirtytwo":t.tileWidth=32}}return t.initWidth=n(e.initWidth,t.initWidth),t.initHeight=n(e.initHeight,t.initHeight),t;function n(e,t){const n=parseInt(e);return isNaN(n)?t:n}}(e)}}e.FieldTilemap=t}(pxtblockly||(pxtblockly={})),function(e){const t=32;class n extends e.FieldImages{constructor(t,r,i){super(t,r,i),this.isFieldCustom_=!0,this.menuGenerator_=()=>{var t,r;return(null===(t=this.sourceBlock_)||void 0===t?void 0:t.workspace)&&e.needsTilemapUpgrade(null===(r=this.sourceBlock_)||void 0===r?void 0:r.workspace)?[o()]:n.getReferencedTiles(this.sourceBlock_.workspace)},this.assetChangeListener=()=>{this.doValueUpdate_(this.getValue()),this.forceRerender()},this.blocksInfo=r.blocksInfo}static getReferencedTiles(o){const a=pxt.react.getTilemapProject();if(a.revision()!==n.cachedRevision||o.id!=n.cachedWorkspaceId){n.cachedRevision=a.revision(),n.cachedWorkspaceId=o.id;const l=e.getAllReferencedTiles(o),c=[16,8,32];for(const e of c){const t=a.getProjectTiles(e,16===e);if(t)for(const e of t.tiles)l.find((t=>t.id===e.id))||l.push(e)}let u={};l.sort(((e,t)=>e.id===t.id?0:e.bitmap.width!==t.bitmap.width?e.bitmap.width-t.bitmap.width:e.isProjectTile!==t.isProjectTile?e.isProjectTile?-1:1:(u[e.id]||(u[e.id]=i(e.id)))-(u[t.id]||(u[t.id]=i(t.id)))));const p=n=>i(n.id)<=2?r(n.bitmap.width):e.bitmapToImageURI(pxt.sprite.Bitmap.fromData(n.bitmap),t,!1);n.referencedTiles=l.map((e=>[{src:p(e),width:t,height:t,alt:s(e)},e.id,e]))}return n.referencedTiles}initView(){super.initView(),this.sourceBlock_&&this.sourceBlock_.isInFlyout&&this.setValue(this.getOptions()[0][1])}getValue(){if(this.selectedOption_){let e=this.selectedOption_[2];return e=pxt.react.getTilemapProject().lookupAsset(e.type,e.id),pxt.getTSReferenceForAsset(e)}const e=super.getValue();return"string"==typeof e&&-1===e.indexOf(".")&&-1===e.indexOf("`")?`img\`${e}\``:e}getText(){const e=this.getValue();return"string"==typeof e&&-1!==e.indexOf("`")?e:super.getText()}render_(){if(this.value_&&this.selectedOption_&&this.selectedOption_[1]!==this.value_){const o=pxt.react.getTilemapProject().resolveTile(this.value_);n.cachedRevision=-1,o&&(this.selectedOption_=[{src:e.bitmapToImageURI(pxt.sprite.Bitmap.fromData(o.bitmap),t,!1),width:t,height:t,alt:s(o)},this.value_,o])}super.render_()}doValueUpdate_(e){super.doValueUpdate_(e);const t=this.getOptions(!0);if(e){const n=pxt.parseAssetTSReference(e);n&&(e=n.name),e=e.trim();for(const n of t)if(e===n[2].id||e===n[2].meta.displayName||e===pxt.getShortIDForAsset(n[2]))return this.selectedOption_=n,this.value_=this.getValue(),void this.updateAssetListener();this.selectedOption_=null,this.updateAssetListener()}}getOptions(e){return"function"!=typeof this.menuGenerator_?(this.transparent=o(),[this.transparent]):this.menuGenerator_.call(this)}dispose(){super.dispose(),pxt.react.getTilemapProject().removeChangeListener("tile",this.assetChangeListener)}updateAssetListener(){const e=pxt.react.getTilemapProject();e.removeChangeListener("tile",this.assetChangeListener),this.selectedOption_&&e.addChangeListener(this.selectedOption_[2],this.assetChangeListener)}}function o(){const e=pxt.react.getTilemapProject().getTransparency(16);return[{src:r(16),width:t,height:t,alt:pxt.U.lf("transparency")},e.id,e]}function r(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.width=e,t.height=e,n.fillStyle="#aeaeae",n.fillRect(0,0,e,e),n.fillStyle="#dedede";for(let t=0;t<e;t+=4)for(let o=0;o<e;o+=4)t+o>>2&1&&n.fillRect(t,o,4,4);return t.toDataURL()}function i(e){switch(e){case"myTiles.transparency16":return 1;case"myTiles.transparency8":case"myTiles.transparency32":return 2;default:if(e.startsWith("myTiles.tile")){const t=parseInt(e.slice(12));if(!Number.isNaN(t))return t+2}return 9999999999}}function s(e){return e.meta.displayName||pxt.getShortIDForAsset(e)}e.FieldTileset=n}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldNumber{constructor(e,t,n){super(e,void 0,void 0,void 0,n),this.isFieldCustom_=!0,this.CURSOR="pointer",this.params=t,this.setValue(e),this.addArgType("toggle"),this.type_=t.type}initView(){if(!this.fieldGroup_)return;null!==this.getArgTypes()&&(this.sourceBlock_.isShadow()?this.sourceBlock_.svgGroup_.setAttribute("data-argument-type",this.getArgTypes()):this.fieldGroup_.setAttribute("data-argument-type",this.getArgTypes())),!this.sourceBlock_.isShadow()&&this.sourceBlock_.inputList&&this.sourceBlock_.inputList.length>1&&(this.borderRect_=Blockly.utils.dom.createSvgElement("rect",{rx:Blockly.BlockSvg.CORNER_RADIUS,ry:Blockly.BlockSvg.CORNER_RADIUS,x:0,y:0,width:this.size_.width,height:this.size_.height,fill:this.sourceBlock_.getColour(),stroke:this.sourceBlock_.getColourTertiary()},null),this.fieldGroup_.insertBefore(this.borderRect_,this.textElement_));const e=this.getSize();switch(this.checkElement_=Blockly.utils.dom.createSvgElement("g",{class:"blocklyToggle "+(this.state_?"blocklyToggleOn":"blocklyToggleOff"),transform:`translate(8, ${e.height/2})`},this.fieldGroup_),this.getOutputShape()){case Blockly.OUTPUT_SHAPE_HEXAGONAL:this.toggleThumb_=Blockly.utils.dom.createSvgElement("polygon",{class:"blocklyToggleRect",points:"-7,-14 -21,0 -7,14 7,14 21,0 7,-14",cursor:"pointer"},this.checkElement_);break;case Blockly.OUTPUT_SHAPE_ROUND:this.toggleThumb_=Blockly.utils.dom.createSvgElement("rect",{class:"blocklyToggleCircle",x:-6,y:-14,height:28,width:28,rx:14,ry:14,cursor:"pointer"},this.checkElement_);break;case Blockly.OUTPUT_SHAPE_SQUARE:this.toggleThumb_=Blockly.utils.dom.createSvgElement("rect",{class:"blocklyToggleRect",x:-6,y:-14,height:28,width:28,rx:3,ry:3,cursor:"pointer"},this.checkElement_)}let t=this.sourceBlock_.RTL?-e.width/2:e.width/2;this.textElement_=Blockly.utils.dom.createSvgElement("text",{class:"blocklyText",x:t,dy:"0.6ex",y:e.height/2},this.fieldGroup_),this.updateEditable();const n=this.sourceBlock_.getSvgRoot();n.appendChild(this.fieldGroup_),n.querySelector(".blocklyBlockBackground").setAttribute("fill",this.sourceBlock_.getColourTertiary()),this.switchToggle(this.state_),this.setValue(this.getValue()),this.markDirty()}getDisplayText_(){return this.state_?this.getTrueText():this.getFalseText()}getTrueText(){return lf("True")}getFalseText(){return lf("False")}updateSize_(){switch(this.getOutputShape()){case Blockly.OUTPUT_SHAPE_ROUND:this.size_.width=2*this.getInnerWidth()-7;break;case Blockly.OUTPUT_SHAPE_HEXAGONAL:this.size_.width=2*this.getInnerWidth()+8-Math.floor(this.getInnerWidth()/2);break;case Blockly.OUTPUT_SHAPE_SQUARE:this.size_.width=9+2*this.getInnerWidth()}}getInnerWidth(){return 10*this.getMaxLength()}getMaxLength(){return Math.max(this.getTrueText().length,this.getFalseText().length)}getOutputShape(){return this.sourceBlock_.isShadow()?this.sourceBlock_.getOutputShape():Blockly.OUTPUT_SHAPE_SQUARE}doClassValidation_(e){return"boolean"==typeof this.fromVal(e)?e:"false"}applyColour(){let e=this.sourceBlock_.getColourTertiary();this.borderRect_?this.borderRect_.setAttribute("stroke",e):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",e)}getValue(){return this.toVal(this.state_)}doValueUpdate_(e){let t=this.fromVal(e);this.state_!==t&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.state_,t)),this.state_=t,this.switchToggle(this.state_),this.isDirty_=!0)}switchToggle(e){if(this.checkElement_){this.updateSize_();const t=this.getSize(),n=this.getInnerWidth();e?(pxt.BrowserUtils.addClass(this.checkElement_,"blocklyToggleOn"),pxt.BrowserUtils.removeClass(this.checkElement_,"blocklyToggleOff")):(pxt.BrowserUtils.removeClass(this.checkElement_,"blocklyToggleOn"),pxt.BrowserUtils.addClass(this.checkElement_,"blocklyToggleOff"));const o=this.getOutputShape();let r=0,i=0,s=0,a=0;switch(o){case Blockly.OUTPUT_SHAPE_HEXAGONAL:r=n,i=r/2;let e=i/2;s=-i+e,a=-e;const t=-e,l=i;this.toggleThumb_.setAttribute("points",`${t},-14 ${t-14},0 ${t},14 ${l},14 ${l+14},0 ${l},-14`);break;case Blockly.OUTPUT_SHAPE_ROUND:case Blockly.OUTPUT_SHAPE_SQUARE:r=5+n,i=r/2,this.toggleThumb_.setAttribute("width",""+r),this.toggleThumb_.setAttribute("x",`-${i}`),s=a=o==Blockly.OUTPUT_SHAPE_SQUARE?2:-6}this.checkElement_.setAttribute("transform",`translate(${e?a+n+i:i+s}, ${t.height/2})`)}}render_(){if(this.visible_&&this.textElement_){goog.dom.removeChildren(this.textElement_);let e=document.createTextNode(this.getDisplayText_());this.textElement_.appendChild(e),pxt.BrowserUtils.addClass(this.textElement_,"blocklyToggleText"),this.updateSize_();let t=this.size_.width,n=(this.state_?t+t/8:t/2)-t/2;this.textElement_.setAttribute("x",`${n}`)}this.borderRect_&&(this.borderRect_.setAttribute("width",`${this.size_.width}`),this.borderRect_.setAttribute("height",`${this.size_.height}`))}showEditor_(){let e=!this.state_;null!==e&&this.setValue(this.toVal(e))}toVal(e){return"number"==this.type_?String(e?"1":"0"):String(e?"true":"false")}fromVal(e){return"string"==typeof e?"1"==e||"TRUE"==e.toUpperCase():!!e}}e.FieldToggle=t}(pxtblockly||(pxtblockly={})),function(e){class t extends e.FieldToggle{constructor(e,t,n){super(e,t,n),this.isFieldCustom_=!0}getTrueText(){return lf("HIGH")}getFalseText(){return lf("LOW")}}e.FieldToggleHighLow=t}(pxtblockly||(pxtblockly={})),function(e){class t extends e.FieldToggle{constructor(e,t,n){super(e,t,n),this.isFieldCustom_=!0}getTrueText(){return lf("ON")}getFalseText(){return lf("OFF")}}e.FieldToggleOnOff=t}(pxtblockly||(pxtblockly={})),function(e){class t extends e.FieldToggle{constructor(e,t,n){super(e,t,n),this.isFieldCustom_=!0}getTrueText(){return lf("UP")}getFalseText(){return lf("DOWN")}}e.FieldToggleUpDown=t;class n extends e.FieldToggle{constructor(e,t,n){super(e,t,n),this.isFieldCustom_=!0}getTrueText(){return lf("DOWN")}getFalseText(){return lf("UP")}}e.FieldToggleDownUp=n}(pxtblockly||(pxtblockly={})),function(e){class t extends e.FieldToggle{constructor(e,t,n){super(e,t,n),this.isFieldCustom_=!0}getTrueText(){return lf("WIN")}getFalseText(){return lf("LOSE")}}e.FieldToggleWinLose=t}(pxtblockly||(pxtblockly={})),function(e){class t extends e.FieldToggle{constructor(e,t,n){super(e,t,n),this.isFieldCustom_=!0}getTrueText(){return lf("Yes")}getFalseText(){return lf("No")}}e.FieldToggleYesNo=t}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldTextInput{constructor(){super(...arguments),this.isFieldCustom_=!0,this.pythonMode=!1}updateEditable(){let e=this.fieldGroup_;this.EDITABLE&&e&&(this.sourceBlock_.isEditable()?(pxt.BrowserUtils.addClass(e,"blocklyEditableText"),pxt.BrowserUtils.removeClass(e,"blocklyGreyExpressionBlockText"),this.fieldGroup_.style.cursor=this.CURSOR):(pxt.BrowserUtils.addClass(e,"blocklyGreyExpressionBlockText"),pxt.BrowserUtils.removeClass(e,"blocklyEditableText"),this.fieldGroup_.style.cursor=""))}setPythonEnabled(e){e!==this.pythonMode&&(this.pythonMode=e,this.forceRerender())}getText(){return this.pythonMode?pxt.Util.lf("<python code>"):this.getValue()}applyColour(){this.sourceBlock_&&this.constants_.FULL_BLOCK_FIELDS&&this.borderRect_&&this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary)}}e.FieldTsExpression=t}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldSlider{constructor(e,t,n){super(String(e),"-200","200","1","10","TurnRatio",n),this.isFieldCustom_=!0,this.params=t,this.sliderColor_="#a8aaa8"}createLabelDom_(e){let n=document.createElement("div"),o=Blockly.utils.dom.createSvgElement("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",height:t.HALF+t.HANDLE_RADIUS+10+"px",width:2*t.HALF+"px"},n),r=Blockly.utils.dom.createSvgElement("defs",{},o),i=Blockly.utils.dom.createSvgElement("marker",{id:"head",orient:"auto",markerWidth:"2",markerHeight:"4",refX:"0.1",refY:"1.5"},r);Blockly.utils.dom.createSvgElement("path",{d:"M0,0 V3 L1.5,1.5 Z",fill:"#f12a21"},i);this.reporter_=pxsim.svg.child(o,"text",{x:t.HALF,y:96,"text-anchor":"middle","dominant-baseline":"middle",style:"font-size: 50px",class:"sim-text inverted number"}),this.path_=Blockly.utils.dom.createSvgElement("path",{x1:t.HALF,y1:t.HALF,"marker-end":"url(#head)",style:"fill: none; stroke: #f12a21; stroke-width: 10"},o),this.updateGraph_();let s=document.createElement("span");return s.setAttribute("class","blocklyFieldSliderReadout"),[n,s]}updateGraph_(){if(!this.path_)return;let e=goog.math.clamp(this.getValue()||0,-200,200);const n=e/100,o=Math.max(-1,Math.min(1,n)),r=Math.max(o)*Math.PI/2,i=t.RADIUS-6;let s=t.HALF;const a=t.HALF-22;Math.abs(n)>1&&(s-=(n-(n>0?1:-1))*i/2);const l=.2+.5*Math.abs(o),c=i*l,u=i*Math.sin(Math.PI/2-r),p=i*Math.cos(Math.PI/2-r),d=u-i*l*Math.cos(2*r),g=`M ${s} ${a} C ${s} ${a-c} ${s+(p-i*l*Math.sin(2*r))} ${a-d} ${s+p} ${a-u}`;this.path_.setAttribute("d",g),this.reporter_.textContent=`${e}`}setReadout_(e,t){this.updateGraph_()}}t.HALF=80,t.HANDLE_RADIUS=30,t.RADIUS=t.HALF-t.HANDLE_RADIUS-1,e.FieldTurnRatio=t}(pxtblockly||(pxtblockly={})),function(e){class t extends Blockly.FieldDropdown{constructor(e){super(function(e){return function(){const t=[],n=this;if(n.sourceBlock_&&n.sourceBlock_.workspace){n.sourceBlock_.workspace.getVariablesOfType(e.name).forEach((e=>{const n=e.name.replace(/^\d+/,"");t.push([n,e.name])}))}else e.initialMembers.forEach((e=>t.push([e,e])));return t.push([lf("Add a new {0}...",e.memberName),"CREATE"]),t}}(e)),this.opts=e}init(){super.init(),this.initVariables()}onItemSelected_(e,t){"CREATE"===t.getValue()?n(this.sourceBlock_.workspace,this.opts,lf("New {0}:",this.opts.memberName),(e=>e&&this.setValue(e))):super.onItemSelected_(e,t)}doClassValidation_(e){var t;return(null===(t=this.opts)||void 0===t?void 0:t.initialMembers)&&!this.opts.initialMembers.find((t=>t==e))&&this.getOptions(),super.doClassValidation_(e)}initVariables(){if(this.sourceBlock_&&this.sourceBlock_.workspace){const e=this.sourceBlock_.workspace,t=r(e,this.opts.name);if(this.opts.initialMembers.forEach((n=>{t.some((([e,t])=>e===n))||s(e,this.opts,n)})),"CREATE"===this.getValue()){const t=function(e,t,n){const r=e.getVariablesOfType(t);if(r&&r.length)for(let e=0;e<r.length;e++){const[t]=o(r[e]);if(t===n)return r[e].name}return}(e,this.opts.name,this.opts.initialMembers[0]);t&&this.setValue(t)}}}}function n(e,t,o,i){Blockly.prompt(o,null,(a=>{if(a){let l=!1;if(pxtc.isIdentifierStart(a.charCodeAt(0),2)){l=!0;for(let e=1;e<a.length;e++)pxtc.isIdentifierPart(a.charCodeAt(e),2)||(l=!1)}if(!l)return void Blockly.alert(lf("Names must start with a letter and can only contain letters, numbers, '$', and '_'."),(()=>n(e,t,o,i)));const c=r(e,t.name);for(let r=0;r<c.length;r++){const[s,l]=c[r];if(s===a)return void Blockly.alert(lf("A {0} named '{1}' already exists.",t.memberName,a),(()=>n(e,t,o,i)))}i(s(e,t,a))}}),{placeholder:t.promptHint})}function o(e){const t=/^(\d+)([^0-9].*)$/.exec(e.name);return t?[t[2],parseInt(t[1])]:[e.name,-1]}function r(e,t){const n=e.getVariablesOfType(t);return n&&n.length?n.map(o):[]}function i(e,t){const n=e.map((([e,t])=>t));if(t.isBitMask){for(let e=0;e<n.length;e++){let t=1<<e;if(n.indexOf(t)<0)return t}return 1<<n.length}if(t.isHash)return 0;{const e=t.firstValue||0;for(let t=0;t<n.length;t++)if(n.indexOf(e+t)<0)return e+t;return e+n.length}}function s(e,t,n){const o=i(r(e,t.name),t)+n;return Blockly.Variables.getOrCreateVariablePackage(e,null,o,t.name),o}e.FieldUserEnum=t,e.getNextValue=i}(pxtblockly||(pxtblockly={})),function(e){let t;function n(e,t){const n=e.getVariablesOfType(pxt.sprite.BLOCKLY_TILESET_TYPE);for(const o of n)if(parseInt(o.name.substr(0,o.name.indexOf(";")))===t.projectId){e.deleteVariableById(o.getId());break}}function o(t){return i(t,(t=>t instanceof e.FieldTilemap&&!t.isGreyBlock))}function r(t){return i(t,(t=>t instanceof e.FieldTileset))}function i(e,t){const n=[];return e.getTopBlocks(!1).forEach((e=>o(e))),n;function o(e){for(const r of e.inputList){for(const o of r.fieldRow)t(o)&&n.push({block:e,field:o.name,ref:o});r.connection&&r.connection.targetBlock()&&o(r.connection.targetBlock())}e.nextConnection&&e.nextConnection.targetBlock()&&o(e.nextConnection.targetBlock())}}!function(e){e.hasClass=function(e,t){return pxt.BrowserUtils.containsClass(e,t)},e.addClass=function(e,t){pxt.BrowserUtils.addClass(e,t)},e.removeClass=function(e,t){pxt.BrowserUtils.removeClass(e,t)}}(t=e.svg||(e.svg={})),e.parseColour=function(e){const t=Number(e);return isNaN(t)?goog.isString(e)&&e.match(/^#[0-9a-fA-F]{6}$/)?e:"#000":Blockly.hueToRgb(t)},e.bitmapToImageURI=function(e,t,n){const o=pxt.appTarget.runtime.palette.slice(1),r=document.createElement("canvas");r.width=t,r.height=t;const i=Math.min(t/e.width,t/e.height),s=Math.max(Math.floor(t*(1-e.width/e.height)/2),0),a=Math.max(Math.floor(t*(1-e.height/e.width)/2),0);let l;n?(l=r.getContext("2d",{alpha:!1}),l.fillStyle="#dedede",l.fillRect(0,0,t,t)):l=r.getContext("2d");for(let t=0;t<e.width;t++)for(let r=0;r<e.height;r++){const c=e.get(t,r);c?(l.fillStyle=o[c-1],l.fillRect(s+t*i,a+r*i,i,i)):n&&(l.fillStyle="#dedede",l.fillRect(s+t*i,a+r*i,i,i))}return r.toDataURL()},e.tilemapToImageURI=function(e,t,n){const o=pxt.appTarget.runtime.palette.slice(),r=document.createElement("canvas");r.width=t,r.height=t;const i=Math.min(t/e.tilemap.width,t/e.tilemap.height),s=Math.max(Math.floor(t*(1-e.tilemap.width/e.tilemap.height)/2),0),a=Math.max(Math.floor(t*(1-e.tilemap.height/e.tilemap.width)/2),0);let l;n?(l=r.getContext("2d",{alpha:!1}),l.fillStyle="#dedede",l.fillRect(0,0,t,t)):l=r.getContext("2d");let c=[];for(let t=0;t<e.tilemap.width;t++)for(let r=0;r<e.tilemap.height;r++){const u=e.tilemap.get(t,r);if(u){if(!c[u]){const t=e.tileset.tiles[u];c[u]=t?pxt.sprite.computeAverageColor(pxt.sprite.Bitmap.fromData(t.bitmap),o):"#dedede"}l.fillStyle=c[u],l.fillRect(s+t*i,a+r*i,i,i)}else n&&(l.fillStyle="#dedede",l.fillRect(s+t*i,a+r*i,i,i))}return r.toDataURL()},e.getAllBlocksWithTilemaps=o,e.getAllBlocksWithTilesets=r,e.needsTilemapUpgrade=function(e){return!!e.getVariablesOfType(pxt.sprite.BLOCKLY_TILESET_TYPE).map((e=>pxt.sprite.legacy.blocklyVariableToTile(e.name))).length},e.upgradeTilemapsInWorkspace=function(e,t){const i=e.getVariablesOfType(pxt.sprite.BLOCKLY_TILESET_TYPE).map((e=>pxt.sprite.legacy.blocklyVariableToTile(e.name)));if(i.length)try{Blockly.Events.disable();let s=[];for(const o of i)o.qualifiedName?s[o.projectId]=t.resolveTile(o.qualifiedName):o.data&&(s[o.projectId]=t.createNewTile(o.data,"myTiles.tile"+o.projectId)),n(e,o);const a=o(e);for(const e of a){const n=pxt.sprite.legacy.decodeTilemap(e.ref.getInitText(),"typescript"),o=[],r=new pxt.sprite.TilemapData(n.tilemap,{tileWidth:n.tileset.tileWidth,tiles:n.tileset.tiles.map(((e,n)=>null!=e.projectId?s[e.projectId]:(o[n]||(o[n]=t.resolveTile(e.qualifiedName)),o[n])))},n.layers);e.ref.setValue(pxt.sprite.encodeTilemap(r,"typescript"))}const l=r(e);for(const e of l)e.ref.doValueUpdate_(e.ref.getValue()),e.ref.isDirty_&&e.ref.forceRerender()}finally{Blockly.Events.enable()}},e.getAllReferencedTiles=function(e,t){var n;let i={};const s=o(e),a=pxt.react.getTilemapProject();for(const e of s)if(e.block.id!==t)for(const t of(null===(n=e.ref.getTileset())||void 0===n?void 0:n.tiles)||[])i[t.id]=a.lookupAsset("tile",t.id);const l=a.getAssets("tilemap");for(const e of l)for(const t of e.data.tileset.tiles)i[t.id]=a.lookupAsset("tile",t.id);const c=r(e);for(const e of c){const t=e.ref.getValue(),n=/^\s*assets\s*\.\s*tile\s*`([^`]*)`\s*$/.exec(t);if(n){const e=a.lookupAssetByName("tile",n[1]);e&&!i[e.id]&&(i[e.id]=e)}else i[t]||(i[t]=a.resolveTile(t))}return Object.keys(i).map((e=>i[e])).filter((e=>!!e))},e.getTemporaryAssets=function(t,n){switch(n){case"image":return i(t,(t=>t instanceof e.FieldSpriteEditor&&t.isTemporaryAsset())).map((e=>e.ref.getAsset()));case"animation":return i(t,(t=>t instanceof e.FieldAnimationEditor&&t.isTemporaryAsset())).map((e=>e.ref.getAsset()));default:return[]}}}(pxtblockly||(pxtblockly={})),function(e){!function(t){let n,o,r,i;!function(e){e[e.Stopped=0]="Stopped",e[e.Pending=1]="Pending",e[e.Starting=2]="Starting",e[e.Running=3]="Running"}(n=t.SimState||(t.SimState={})),t.isBlocks=function(t){return e.U.endsWith(t.name,".blocks")},function(e){e.HeaderOnly="errorListHeader",e.Expanded="errorListExpanded"}(o=t.ErrorListState||(t.ErrorListState={})),function(e){e[e.Hidden=0]="Hidden",e[e.Visible=1]="Visible",e[e.Disabled=2]="Disabled"}(r=t.FilterState||(t.FilterState={})),t.initExtensionsAsync=e=>Promise.resolve({}),t.initFieldExtensionsAsync=e=>Promise.resolve({}),t.HELP_IMAGE_URI="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCAyNiAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTMiIGN5PSIxMyIgcj0iMTMiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xNy45NTIgOS4xODQwMkMxNy45NTIgMTAuMjU2IDE3LjgxNiAxMS4wNzIgMTcuNTQ0IDExLjYzMkMxNy4yODggMTIuMTkyIDE2Ljc1MiAxMi43OTIgMTUuOTM2IDEzLjQzMkMxNS4xMiAxNC4wNzIgMTQuNTc2IDE0LjU4NCAxNC4zMDQgMTQuOTY4QzE0LjA0OCAxNS4zMzYgMTMuOTIgMTUuNzM2IDEzLjkyIDE2LjE2OFYxNi45NkgxMS44MDhDMTEuNDI0IDE2LjQ2NCAxMS4yMzIgMTUuODQgMTEuMjMyIDE1LjA4OEMxMS4yMzIgMTQuNjg4IDExLjM4NCAxNC4yODggMTEuNjg4IDEzLjg4OEMxMS45OTIgMTMuNDg4IDEyLjUzNiAxMi45NjggMTMuMzIgMTIuMzI4QzE0LjEwNCAxMS42NzIgMTQuNjI0IDExLjE2OCAxNC44OCAxMC44MTZDMTUuMTM2IDEwLjQ0OCAxNS4yNjQgOS45NjgwMiAxNS4yNjQgOS4zNzYwMkMxNS4yNjQgOC4yMDgwMiAxNC40MTYgNy42MjQwMiAxMi43MiA3LjYyNDAyQzExLjc2IDcuNjI0MDIgMTAuNzUyIDcuNzM2MDIgOS42OTYgNy45NjAwMkw5LjE0NCA4LjA4MDAyTDkgNi4wODgwMkMxMC40ODggNS41NjAwMiAxMS44NCA1LjI5NjAyIDEzLjA1NiA1LjI5NjAyQzE0LjczNiA1LjI5NjAyIDE1Ljk2OCA1LjYwODAyIDE2Ljc1MiA2LjIzMjAyQzE3LjU1MiA2Ljg0MDAyIDE3Ljk1MiA3LjgyNDAyIDE3Ljk1MiA5LjE4NDAyWk0xMS40IDIyVjE4LjY0SDE0LjE4NFYyMkgxMS40WiIgZmlsbD0iIzU5NUU3NCIvPgo8L3N2Zz4K",t.initEditorExtensionsAsync=function(){if(!i&&(i=Promise.resolve(),e.appTarget&&e.appTarget.appTheme&&e.appTarget.appTheme.extendFieldEditors)){const t={};i=i.then((()=>e.BrowserUtils.loadBlocklyAsync())).then((()=>e.BrowserUtils.loadScriptAsync("fieldeditors.js"))).then((()=>e.editor.initFieldExtensionsAsync(t))).then((t=>{t.fieldEditors&&t.fieldEditors.forEach((t=>{e.blocks.registerFieldEditor(t.selector,t.editor,t.validator)}))}))}return i}}(e.editor||(e.editor={}))}(pxt||(pxt={})),function(e){!function(t){const n={};function o(e,t,n,o){e.response&&window.parent.postMessage({type:e.type,id:e.id,resp:t,success:n,error:o},"*")}function r(t){return new Promise(((o,r)=>{const i=e.Util.clone(t);i.id=ts.pxtc.Util.guidGen(),t.response&&(n[i.id]={resolve:o,reject:r}),window.parent.postMessage(i,"*"),t.response||o(void 0)}))}t.bindEditorMessages=function(t){const r=(e.appTarget.appTheme.allowParentController||e.shell.isControllerMode())&&e.BrowserUtils.isIFrame(),i=e.appTarget.appTheme.allowPackageExtensions,s=e.appTarget.appTheme.allowSimulatorTelemetry;(r||i||s)&&window.addEventListener("message",(a=>{const l=a.data;if(!l||!/^pxt(host|editor|pkgext|sim)$/.test(l.type))return!1;if("pxtpkgext"===l.type&&i)t().then((e=>{e.handleExtensionRequest(l)}));else if("pxtsim"===l.type&&s){const t=l;"event"===t.action&&(t.category||t.message?e.reportError(t.category,t.message,t.data):e.tickEvent(t.tick,t.data))}else if(r){let r,i=Promise.resolve();if("pxthost"==l.type){const t=n[l.id];t?i=i.then((()=>t.resolve(l))):e.debug(`pxthost: unknown request ${l.id}`)}else"pxteditor"==l.type&&(i=i.then((()=>t().then((t=>{const n=l;switch(e.debug(`pxteditor: ${n.action}`),n.action.toLowerCase()){case"switchjavascript":return Promise.resolve().then((()=>t.openJavaScript()));case"switchpython":return Promise.resolve().then((()=>t.openPython()));case"switchblocks":return Promise.resolve().then((()=>t.openBlocks()));case"startsimulator":return Promise.resolve().then((()=>t.startSimulator()));case"restartsimulator":return Promise.resolve().then((()=>t.restartSimulator()));case"hidesimulator":return Promise.resolve().then((()=>t.collapseSimulator()));case"showsimulator":return Promise.resolve().then((()=>t.expandSimulator()));case"closeflyout":return Promise.resolve().then((()=>t.closeFlyout()));case"unloadproject":return Promise.resolve().then((()=>t.unloadProjectAsync()));case"saveproject":return t.saveProjectAsync();case"redo":return Promise.resolve().then((()=>{const e=t.editor;e&&e.hasRedo()&&e.redo()}));case"undo":return Promise.resolve().then((()=>{const e=t.editor;e&&e.hasUndo()&&e.undo()}));case"setscale":{const e=l;return Promise.resolve().then((()=>t.editor.setScale(e.scale)))}case"stopsimulator":{const e=l;return Promise.resolve().then((()=>t.stopSimulator(e.unload)))}case"newproject":{const e=l;return Promise.resolve().then((()=>t.newProject(e.options)))}case"importproject":{const e=l;return Promise.resolve().then((()=>t.importProjectAsync(e.project,{filters:e.filters,searchBar:e.searchBar})))}case"openheader":{const e=l;return t.openProjectByHeaderIdAsync(e.headerId)}case"startactivity":{const n=l;let o,r=n.path;return/^([jt]s|py|blocks?):/i.test(r)&&(o=/^py:/i.test(r)?e.PYTHON_PROJECT_NAME:/^[jt]s:/i.test(r)?e.JAVASCRIPT_PROJECT_NAME:e.BLOCKS_PROJECT_NAME,r=r.substr(r.indexOf(":")+1)),Promise.resolve().then((()=>t.startActivity({activity:n.activityType,path:r,title:n.title,editor:o,previousProjectHeaderId:n.previousProjectHeaderId,carryoverPreviousCode:n.carryoverPreviousCode})))}case"importtutorial":{const e=l;return Promise.resolve().then((()=>t.importTutorialAsync(e.markdown)))}case"proxytosim":{const e=l;return Promise.resolve().then((()=>t.proxySimulatorMessage(e.content)))}case"renderblocks":{const e=l;return Promise.resolve().then((()=>t.renderBlocksAsync(e))).then((e=>e.xml.then((e=>{r=e.xml}))))}case"renderpython":{const e=l;return Promise.resolve().then((()=>t.renderPythonAsync(e))).then((e=>{r=e.python}))}case"toggletrace":{const e=l;return Promise.resolve().then((()=>t.toggleTrace(e.intervalSpeed)))}case"settracestate":{const e=l;return Promise.resolve().then((()=>t.setTrace(e.enabled,e.intervalSpeed)))}case"setsimulatorfullscreen":{const e=l;return Promise.resolve().then((()=>t.setSimulatorFullScreen(e.enabled)))}case"togglehighcontrast":return Promise.resolve().then((()=>t.toggleHighContrast()));case"togglegreenscreen":return Promise.resolve().then((()=>t.toggleGreenScreen()));case"print":return Promise.resolve().then((()=>t.printCode()));case"pair":return t.pairAsync();case"info":return Promise.resolve().then((()=>{r={versions:e.appTarget.versions,locale:ts.pxtc.Util.userLanguage(),availableLocales:e.appTarget.appTheme.availableLocales}}));case"shareproject":{const e=l;return t.anonymousPublishHeaderByIdAsync(e.headerId).then((e=>{r=e}))}case"savelocalprojectstocloud":{const e=l;return t.saveLocalProjectsToCloudAsync(e.headerIds).then((e=>{r={headerIdMap:e}}))}case"requestprojectcloudstatus":{const e=l;return t.requestProjectCloudStatus(e.headerIds)}case"convertcloudprojectstolocal":{const e=l;return t.convertCloudProjectsToLocal(e.userId)}case"setlanguagerestriction":{const e=l;if("no-blocks"===e.restriction)throw console.warn("no-blocks language restriction is not supported"),new Error("no-blocks language restriction is not supported");return t.setLanguageRestrictionAsync(e.restriction)}}return Promise.resolve()})))));i.then((()=>o(l,r,!0,void 0)),(e=>o(l,r,!1,e)))}return!0}),!1)},t.enableControllerAnalytics=function(){if(!e.appTarget.appTheme.allowParentController||!e.BrowserUtils.isIFrame())return;const t=e.tickEvent;e.tickEvent=function(e,n){t&&t(e,n),r({type:"pxthost",action:"event",tick:e,response:!1,data:n})};const n=e.reportException;e.reportException=function(e,t){n&&n(e,t);try{r({type:"pxthost",action:"event",tick:"error",message:e.message,response:!1,data:t})}catch(e){}};const o=e.reportError;e.reportError=function(e,t,n){o&&o(e,t,n),r({type:"pxthost",action:"event",tick:"error",category:e,message:t,data:n})}},t.shouldPostHostMessages=function(){return e.appTarget.appTheme.allowParentController&&e.BrowserUtils.isIFrame()},t.postHostMessageAsync=r}(e.editor||(e.editor={}))}(pxt||(pxt={})),function(e){!function(t){!function(t){function n(e){return`experiments-${"object"==typeof e?e.id:e}`}function o(){const t=e.savedAppTheme(),n={},o=r();return o.forEach((e=>{const o=i(e);t[e.id]=!!o,o&&(n[e.id]=o?1:0)})),o.length&&Object.keys(n).length&&(e.tickEvent("experiments.loaded",n),e.reloadAppTargetVariant()),e.appTarget.appTheme}function r(){const t=e.appTarget.appTheme.experiments;return t?[{id:"print",name:lf("Print Code"),description:lf("Print the code from the current project"),feedbackUrl:"https://github.com/microsoft/pxt/issues/4740"},{id:"greenScreen",name:lf("Green screen"),description:lf("Display a webcam video stream or a green background behind the code."),feedbackUrl:"https://github.com/microsoft/pxt/issues/4738"},{id:"allowPackageExtensions",name:lf("Editor Extensions"),description:lf("Allow Extensions to add buttons in the editor."),feedbackUrl:"https://github.com/microsoft/pxt/issues/4741"},{id:"instructions",name:lf("Wiring Instructions"),description:lf("Generate step-by-step assembly instructions for breadboard wiring."),feedbackUrl:"https://github.com/microsoft/pxt/issues/4739"},{id:"debugger",name:lf("Debugger"),description:lf("Step through code and inspect variables in the debugger"),feedbackUrl:"https://github.com/microsoft/pxt/issues/4729"},{id:"bluetoothUartConsole",name:"Bluetooth Console",description:lf("Receives UART message through Web Bluetooth"),feedbackUrl:"https://github.com/microsoft/pxt/issues/4796"},{id:"bluetoothPartialFlashing",name:"Bluetooth Download",description:lf("Download code via Web Bluetooth"),feedbackUrl:"https://github.com/microsoft/pxt/issues/4807"},{id:"simScreenshot",name:lf("Simulator Screenshots"),description:lf("Download screenshots of the simulator"),feedbackUrl:"https://github.com/microsoft/pxt/issues/5232"},{id:"python",name:lf("Static Python"),description:lf("Use Static Python to code your device"),feedbackUrl:"https://github.com/microsoft/pxt/issues/5390"},{id:"simGif",name:lf("Simulator Gifs"),description:lf("Download gifs of the simulator"),feedbackUrl:"https://github.com/microsoft/pxt/issues/5297"},{id:"qrCode",name:lf("Shared QR Code"),description:lf("Generate a QR Code form the shared project url"),feedbackUrl:"https://github.com/microsoft/pxt/issues/5456"},{id:"importExtensionFiles",name:lf("Import Extension Files"),description:lf("Import Extensions from compiled project files")},{id:"debugExtensionCode",name:lf("Debug Extension Code"),description:lf("Use the JavaScript debugger to debug extension code")},{id:"snippetBuilder",name:lf("Snippet Builder"),description:lf("Try out the new snippet dialogs.")},{id:"experimentalHw",name:lf("Experimental Hardware"),description:lf("Enable support for hardware marked 'experimental' in the hardware seletion dialog")},{id:"checkForHwVariantWebUSB",name:lf("Detect Hardware with WebUSB"),description:lf("When compiling, use WebUSB to detect hardware configuration.")},{id:"githubEditor",name:lf("GitHub editor"),description:lf("Review, commit and push to GitHub."),feedbackUrl:"https://github.com/microsoft/pxt/issues/6419",enableOnline:!0},{id:"githubCompiledJs",name:lf("GitHub Pages JavaScript"),description:lf("Commit compiled javascript when creating a release"),enableOnline:!0},{id:"blocksCollapsing",name:lf("Collapse blocks"),description:lf("Collapse and expand functions or event blocks")},{id:"tutorialBlocksDiff",name:lf("Tutorial Block Diffs"),description:lf("Automatially render blocks diff in tutorials")},{id:"openProjectNewTab",name:lf("Open in New Tab"),description:lf("Open an editor in a new tab.")},{id:"openProjectNewDependentTab",name:lf("Open in New Connected Tab"),description:lf("Open connected editors in different browser tabs.")},{id:"accessibleBlocks",name:lf("Accessible Blocks"),description:lf("Use the WASD keys to move and modify blocks."),feedbackUrl:"https://github.com/microsoft/pxt/issues/6850"},{id:"errorList",name:lf("Error List"),description:lf("Show an error list panel for JavaScript and Python.")},{id:"blocksErrorList",name:lf("Blocks Error List"),description:lf("Show an error list panel for Blocks")}].filter((n=>t.indexOf(n.id)>-1&&!(e.BrowserUtils.isPxtElectron()&&n.enableOnline))):[]}function i(t){return!!e.storage.getLocal(n(t))}function s(t,r){r!=i(t)&&(r?e.storage.setLocal(n(t),"1"):e.storage.removeLocal(n(t)),o())}t.syncTheme=o,t.all=r,t.clear=function(){r().forEach((t=>e.storage.removeLocal(n(t)))),o()},t.someEnabled=function(){return r().some((e=>i(e)))},t.isEnabled=i,t.toggle=function(e){s(e,!i(e))},t.state=function(){const e={};return r().forEach((t=>e[t.id]=i(t))),JSON.stringify(e)},t.setState=s}(t.experiments||(t.experiments={}))}(e.editor||(e.editor={}))}(pxt||(pxt={})),function(e){!function(t){function n(t){const n=e.appTarget.appTheme.invertedMonaco,o=!(!e.appTarget.appTheme.monacoFieldEditors||!e.appTarget.appTheme.monacoFieldEditors.length),r=e.BrowserUtils.isAndroid();let i=monaco.editor.create(t,{model:null,ariaLabel:e.Util.lf("JavaScript editor"),fontFamily:"'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', 'monospace'",scrollBeyondLastLine:!0,language:"typescript",mouseWheelZoom:!1,wordBasedSuggestions:!0,lineNumbersMinChars:3,formatOnPaste:!0,folding:o,glyphMargin:o||e.appTarget.appTheme.debugger,minimap:{enabled:!1},fixedOverflowWidgets:!0,autoIndent:"full",useTabStops:!0,dragAndDrop:!0,matchBrackets:"always",occurrencesHighlight:!1,quickSuggestionsDelay:200,theme:n?"vs-dark":"vs",renderIndentGuides:!0,accessibilityHelpUrl:"",quickSuggestions:{other:!r,comments:!r,strings:!r},acceptSuggestionOnCommitCharacter:!r,acceptSuggestionOnEnter:r?"off":"on",accessibilitySupport:r?"off":"on"});return i.layout(),i}t.syncModels=function(e,t,n,o){if(o)return;let r=monaco.languages.typescript.typescriptDefaults.getExtraLibs(),i={};e.sortedDeps().forEach((e=>{e.getFiles().forEach((o=>{let r=e.id+"/"+o;if(/\.(ts)$/.test(o)&&r!=n){if(!monaco.languages.typescript.typescriptDefaults.getExtraLibs()[r]){let n=e.readFile(o)||"\n";t[r]=monaco.languages.typescript.typescriptDefaults.addExtraLib(n,r)}i[r]="1"}}))})),Object.keys(r).filter((e=>/\.(ts)$/.test(e)&&!i[e])).forEach((e=>{t[e].dispose()}))},t.initMonacoAsync=function(t){return new Promise(((o,r)=>{if("object"==typeof window.monaco)return void o(n(t));let i=window.MonacoPaths,s=()=>{let r=window.require;r.config({paths:i}),r(["vs/editor/editor.main"],(()=>{monaco.languages.register({id:"asm",extensions:[".asm"]}),monaco.languages.setMonarchTokensProvider("asm",{tokenPostfix:"",keywords:["movs","mov","adds","add","adcs","adr","subs","sbcs","sub","rsbs","muls","cmp","cmn","ands","eors","orrs","bics","mvns","tst","lsls","lsrs","asrs","rors","ldr","ldrh","ldrb","ldrsh","ldrsb","ldm","str","strh","strb","stm","push","pop","cbz","cbnz","b","bl","bx","blx","sxth","sxtb","uxth","uxtb","rev","rev16","revsh","svc","cpsid","cpsie","setend","bkpt","nop","sev","wfe","wfi","yield","beq","bne","bcs","bhs","bcc","blo","bmi","bpl","bvs","bvc","bhi","bls","bge","blt","bgt","ble","bal","r0","r1","r2","r3","r4","r5","r6","r7","r8","r9","r10","r11","r12","r13","r14","r15","pc","sp","lr"],typeKeywords:[".startaddr",".hex",".short",".space",".section",".string",".byte"],operators:[],symbols:/[:\*]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/(\.)?[a-z_$\.][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/@\s*[a-zA-Z_\$][\w\$]*/,{token:"annotation"}],[/(#|(0[xX]))?[0-9a-fA-F]+/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/;.*$/,"comment"]]}}),monaco.languages.typescript&&(monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0,noSemanticValidation:!0}),monaco.languages.typescript.typescriptDefaults.setWorkerOptions({customWorkerPath:e.webConfig.typeScriptWorkerJs}),monaco.languages.typescript.typescriptDefaults.setCompilerOptions({allowUnreachableCode:!0,noImplicitAny:!0,allowJs:!1,allowUnusedLabels:!0,target:monaco.languages.typescript.ScriptTarget.ES5,outDir:"built",rootDir:".",noLib:!0,mouseWheelZoom:!1})),o(n(t))}))};if(window.require)s();else{let e=document.createElement("script");e.type="text/javascript",e.src=i["vs/loader"],e.addEventListener("load",s),document.body.appendChild(e)}}))},t.createEditor=n}(e.vs||(e.vs={}))}(pxt||(pxt={})),function(e){!function(t){t.freshHeader=function(t,n){return{target:e.appTarget.id,targetVersion:e.appTarget.versions.target,name:t,meta:{},editor:e.JAVASCRIPT_PROJECT_NAME,pubId:"",pubCurrent:!1,_rev:null,id:e.U.guidGen(),recentUse:n,modificationTime:n,cloudUserId:null,cloudCurrent:!1,cloudVersion:null,cloudLastSyncTime:0,isDeleted:!1}}}(e.workspace||(e.workspace={}))}(pxt||(pxt={})),function(e){!function(e){const t={};e.registerMonacoFieldEditor=function(e,n){t[e]=n},e.getMonacoFieldEditor=function(e){return t[e]}}(e.editor||(e.editor={}))}(pxt||(pxt={})),function(e){!function(t){t.MonacoReactFieldEditor=class{getId(){return"image-editor"}showEditorAsync(t,n,o){return this.fileType=t,this.editrange=n,this.host=o,this.initAsync().then((()=>{const t=this.textToValue(o.getText(n));return t?(this.fv=e.react.getFieldEditorView(this.getFieldEditorId(),t,this.getOptions()),this.fv.onHide((()=>{this.onClosed()})),this.fv.show(),new Promise(((e,t)=>{this.resolver=e,this.rejecter=t}))):Promise.resolve(null)}))}onClosed(){this.resolver&&(this.resolver({range:this.editrange,replacement:this.resultToText(this.fv.getResult())}),this.editrange=void 0,this.resolver=void 0,this.rejecter=void 0)}dispose(){this.onClosed()}initAsync(){return Promise.resolve()}textToValue(e){return null}resultToText(e){return e+""}getFieldEditorId(){return""}getOptions(){return null}}}(e.editor||(e.editor={}))}(pxt||(pxt={})),function(e){!function(t){const n="image-editor";class o extends t.MonacoReactFieldEditor{textToValue(t){this.isPython=-1===t.indexOf("`");const n=e.parseAssetTSReference(t);if(n){const{type:t,name:o}=n,r=o.trim(),i=e.react.getTilemapProject();this.isAsset=!0;const s=i.lookupAssetByName("image",r);if(s)return s;{const t=i.createNewImage();return r&&!i.isNameTaken("image",r)&&e.validateAssetName(r)&&(t.meta.displayName=r),t}}return{type:"image",id:"",internalID:0,bitmap:e.sprite.imageLiteralToBitmap(t).data(),meta:{},jresData:""}}resultToText(t){var n;if(null===(n=t.meta)||void 0===n?void 0:n.displayName){const n=e.react.getTilemapProject();return t=this.isAsset||n.lookupAsset(t.type,t.id)?n.updateAsset(t):n.createNewProjectImage(t.bitmap,t.meta.displayName),this.isAsset=!0,e.getTSReferenceForAsset(t,this.isPython)}return e.sprite.bitmapToImageLiteral(e.sprite.Bitmap.fromData(t.bitmap),this.isPython?"python":"typescript")}getFieldEditorId(){return"image-editor"}getOptions(){return{initWidth:16,initHeight:16,blocksInfo:this.host.blocksInfo()}}}t.MonacoSpriteEditor=o,t.spriteEditorDefinition={id:n,foldMatches:!0,glyphCssClass:"sprite-editor-glyph sprite-focus-hover",heightInPixels:510,matcher:{searchString:'(?:img|assets\\s*\\.\\s*image)\\s*(?:`|\\(\\s*""")(?:(?:[^(){}:\\[\\]"\';?/,+\\-=*&|^%!`~]|\\n)*)\\s*(?:`|"""\\s*\\))',isRegex:!0,matchCase:!0,matchWholeWord:!1},proto:o},t.registerMonacoFieldEditor(n,t.spriteEditorDefinition)}(e.editor||(e.editor={}))}(pxt||(pxt={})),function(e){!function(t){const n="tilemap-editor";class o extends t.MonacoReactFieldEditor{textToValue(t){const n=this.readTilemap(t),o=e.react.getTilemapProject();return e.sprite.addMissingTilemapTilesAndReferences(o,n),n}readTilemap(t){const n=e.react.getTilemapProject();if(/^\s*tiles\s*\./.test(t)&&(this.isTilemapLiteral=!1,t)){try{return function(e){return{type:"tilemap",id:"",internalID:0,meta:{},data:e}}(e.sprite.decodeTilemap(t,"typescript",n))}catch(e){}return null}this.isTilemapLiteral=!0;const o=/^\s*(tilemap(?:8|16|32)?)\s*(?:`([^`]*)`)|(?:\(\s*"""([^"]*)"""\s*\))\s*$/.exec(t),r=(o[2]||o[3]||"").trim();let i,s;if(this.tilemapLiteral=o[1],r){let e=ts.pxtc.escapeIdentifier(r);i=n.getTilemap(e)}if(!i){let e=16;"tilemap8"===this.tilemapLiteral?e=8:"tilemap32"===this.tilemapLiteral&&(e=32);const[t]=n.createNewTilemap(s,e,16,16);i=n.getTilemap(t),s=t}return i}resultToText(t){const n=e.react.getTilemapProject();return n.pushUndo(),e.sprite.updateTilemapReferencesFromResult(n,t),this.isTilemapLiteral?(n.updateAsset(t),e.getTSReferenceForAsset(t,"python"===this.fileType)):e.sprite.encodeTilemap(t.data,"typescript"===this.fileType?"typescript":"python")}getFieldEditorId(){return"tilemap-editor"}getOptions(){return{initWidth:16,initHeight:16,blocksInfo:this.host.blocksInfo()}}getCreateTilemapRange(){const e=this.editrange.getStartPosition();let t,n=this.editrange.getEndPosition(),o=1;for(;;){t=new monaco.Range(n.lineNumber,n.column,n.lineNumber+1,0);const r=this.host.getText(t);for(let t=0;t<r.length;t++)if("("===r.charAt(t))o++;else if(")"===r.charAt(t)&&(o--,0===o)){const o=new monaco.Position(n.lineNumber,n.column+t+2);return monaco.Range.fromPositions(e,o)}if(n=t.getEndPosition(),n.lineNumber>e.lineNumber+20)return null}}}t.MonacoTilemapEditor=o,t.tilemapEditorDefinition={id:n,foldMatches:!0,alwaysBuildOnClose:!0,glyphCssClass:"sprite-focus-hover ms-Icon ms-Icon--Nav2DMapView",heightInPixels:510,weight:5,matcher:{searchString:'(?:tilemap(?:8|16|32)?\\s*(?:`|\\(""")(?:[ a-zA-Z0-9_]|\\n)*\\s*(?:`|"""\\)))|(?:tiles\\s*\\.\\s*createTilemap\\s*\\([^\\)]+\\))',isRegex:!0,matchCase:!0,matchWholeWord:!1},proto:o},t.registerMonacoFieldEditor(n,t.tilemapEditorDefinition)}(e.editor||(e.editor={}))}(pxt||(pxt={})),function(e){!function(e){let t;e.makeFocusable=function(e){e.setAttribute("focusable","true"),e.setAttribute("tabindex","0")},e.enableKeyboardInteraction=function(e,t,n){t&&e.addEventListener("keydown",(e=>{const n="number"==typeof e.which?e.which:e.keyCode;32!==n&&13!==n||t()})),n&&e.addEventListener("keyup",(e=>{const t="number"==typeof e.which?e.which:e.keyCode;32!==t&&13!==t||n()}))},e.setAria=function(e,t,n){t&&!e.hasAttribute("role")&&e.setAttribute("role",t),n&&!e.hasAttribute("aria-label")&&e.setAttribute("aria-label",n)},e.setLiveContent=function(e){if(!t){let e="position: absolute !important;display: block;visibility: visible;overflow: hidden;width: 1px;height: 1px;margin: -1px;border: 0;padding: 0;clip: rect(0 0 0 0);";t=document.createElement("div"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-hidden","false"),t.setAttribute("style",e),document.body.appendChild(t)}t.textContent!==e&&(t.textContent=e)}}(e.accessibility||(e.accessibility={}))}(pxsim||(pxsim={})),function(e){const t="blue",n="red",o="orange";const r=e=>(e=>e.reduce(((e,t)=>e+(t?1:0)),0))(e)>0;function i(e,t){let n={};for(let t in e)n[t]=e[t];for(let e in t)n[e]=t[e];return n}function s(t){e.U.assert(!!t,"Invalid pin: "+t);const n=/^(\w+)\.\s*(?:[a-z]*)?([A-Z][A-Z\d_]+)$/.exec(t);return n?n[2]:void 0}function a(e){return"-Z"===e.orientation&&"male"===e.style}e.readPin=s;class l{constructor(t){this.availablePowerPins={top:{fiveVolt:e.mkRange(26,51).map((e=>({type:"breadboard",row:"+",col:`${e}`}))),threeVolt:e.mkRange(26,51).map((e=>({type:"breadboard",row:"+",col:`${e}`}))),ground:e.mkRange(26,51).map((e=>({type:"breadboard",row:"-",col:`${e}`})))},bottom:{fiveVolt:e.mkRange(1,26).map((e=>({type:"breadboard",row:"+",col:`${e}`}))),threeVolt:e.mkRange(1,26).map((e=>({type:"breadboard",row:"+",col:`${e}`}))),ground:e.mkRange(1,26).map((e=>({type:"breadboard",row:"-",col:`${e}`})))}},this.opts=t}allocPartIRs(e,t,n){let o=[];const r=(e,t,o,r)=>{let i=[];for(let t=0;t<e.numberOfPins;t++){let r,s=e.pinDefinitions[t];if("string"==typeof s.target)r=s.target;else{let e=s.target.pinInstantiationIdx;if(!o||void 0===o[e])return void console.log(`error: parts no pin found for PinInstantiationIdx: ${e}. (Is the part missing an ArgumentRole or "trackArgs=" annotations?)`);r=o[e]}let a=e.visual.pinLocations[t],l=n.yOffset+a.y,c=Math.round(l/e.visual.pinDistance),u=l-c*e.visual.pinDistance,p=n.xOffset+a.x,d=Math.round(p/e.visual.pinDistance),g={partRelativeRowIdx:c,partRelativeColIdx:d,xOffset:p-d*e.visual.pinDistance,yOffset:u};i.push({def:s,loc:a,target:r,bbFit:g})}return{name:t,def:e,pins:i,partParams:r||{},bbFit:n}},i=e.instantiations||[];return e.instantiation&&i.push(e.instantiation),i.forEach((n=>{if("singleton"===n.kind)o.push(r(e,t));else if("function"===n.kind){let i=n,a=i.fullyQualifiedName.split(","),l={};a.forEach((e=>{this.opts.fnArgs[e]&&this.opts.fnArgs[e].forEach((e=>{l[e]=1}))}));let c=Object.keys(l);if(!c||!c.length)return void console.log(`error: parts failed to read pin(s) from callsite for: ${a}`);c.forEach((n=>{const l=n.split(",");if(l.length!=i.argumentRoles.length)return void console.log(`error: parts mismatch between number of arguments at callsite (function name: ${a}) vs number of argument roles in part definition (part: ${t}).`);let c=[],u={};l.forEach(((e,t)=>{let n=i.argumentRoles[t];if(void 0!==n.partParameter&&(u[n.partParameter]=e),void 0!==n.pinInstantiationIdx){let t=n.pinInstantiationIdx,o=s(e);c[t]=o}})),o.push(r(e,t,c,u))}))}})),o.filter((e=>!!e))}computePartDimensions(t,n){let o=t.visual.pinLocations,r=t.pinDefinitions,s=t.numberOfPins;e.U.assert(o.length===s,`Mismatch between "numberOfPins" and length of "visual.pinLocations" for "${n}"`),e.U.assert(r.length===s,`Mismatch between "numberOfPins" and length of "pinDefinitions" for "${n}"`),e.U.assert(s>0,`Part "${n}" has no pins`);let a,l,c,u,p=o.map(((e,t)=>{return n={idx:t},o=e,s=r[t],i(i(n,o),s);var n,o,s})).filter((e=>"-Z"===e.orientation)),d=p.length>0,g=t.visual.pinDistance;if(d){let e=p[0],n=Math.ceil(e.x/g),o=Math.ceil(e.y/g);a=n*g-e.x,l=o*g-e.y,c=Math.ceil((a+t.visual.width)/g)+1,u=Math.ceil((l+t.visual.height)/g)+1}else c=Math.ceil(t.visual.width/g),u=Math.ceil(t.visual.height/g),a=c*g-t.visual.width,l=u*g-t.visual.height;return{xOffset:a,yOffset:l,rowCount:u,colCount:c}}allocColumns(t){let n=t.length;let o=e.visuals.BREADBOARD_MID_COLS-t.map((e=>e.colCount)).reduce(((e,t)=>e+t),0);o<=0&&console.log("Not enough breadboard space!");let r=Math.floor(o/(n-1+2)),i=o-r*(n-1),s=Math.floor(i/2),a=(Math.ceil(i/2),1+s);return t.map((e=>{let t=a;return a+=e.colCount+r,t}))}placeParts(t){const n=e.visuals.BREADBOARD_MID_ROWS+2;let o=this.allocColumns(t.map((e=>e.bbFit))),r=t.map((e=>{let t=n-e.bbFit.rowCount,o=Math.floor(t/2);return o>4&&(o=4),o<1&&(o=1),o}));return t.map(((e,t)=>{let n=r[t];return i({startColumnIdx:o[t],startRowIdx:n},e)}))}nextColor(){return(!this.availableWireColors||this.availableWireColors.length<=0)&&(this.availableWireColors=e.visuals.GPIO_WIRE_COLORS.map((e=>e))),this.availableWireColors.pop()}allocWireIRs(r){let s=[],l=r.pins.map(((i,l)=>{let c,u,p=i.target,d=r.startColumnIdx+i.bbFit.partRelativeColIdx,g=e.visuals.getColumnName(d),h=r.startRowIdx+i.bbFit.partRelativeRowIdx;if(h>=7&&(h-=2),a(i.def)){c={type:"breadboard",row:h<5?"j":"a",col:g,style:i.def.style}}else{c={type:"breadboard",row:e.visuals.getRowName(h),col:g,xOffset:i.bbFit.xOffset/r.def.visual.pinDistance,yOffset:i.bbFit.yOffset/r.def.visual.pinDistance,style:i.def.style}}return u="ground"===p?t:"threeVolt"===p?n:"fiveVolt"===p?o:"number"==typeof i.def.colorGroup?s[i.def.colorGroup]?s[i.def.colorGroup]:s[i.def.colorGroup]=this.nextColor():this.nextColor(),{start:c,end:p,color:u,pinIdx:l}}));return i(r,{wires:l})}allocLocation(t,n){if("ground"===t||"threeVolt"===t||"fiveVolt"==t){if("ground"===t&&this.powerUsage.singleGround){return{type:"dalboard",pin:this.getBoardGroundPin()}}if("threeVolt"===t&&this.powerUsage.singleThreeVolt){return{type:"dalboard",pin:this.getBoardThreeVoltPin()}}if("fiveVolt"===t&&this.powerUsage.singleFiveVolt){return{type:"dalboard",pin:this.getBoardFiveVoltPin()}}e.U.assert(!!n.referenceBBPin);let o=this.opts.getBBCoord(n.referenceBBPin),r=[this.availablePowerPins.top.ground[0]||this.availablePowerPins.top.threeVolt[0],this.availablePowerPins.bottom.ground[0]||this.availablePowerPins.bottom.threeVolt[0]].map((e=>this.opts.getBBCoord(e)));r[0]&&r[1]||console.debug(`No more available "${t}" locations!`);let i,s=0==e.visuals.findClosestCoordIdx(o,r);s?"ground"===t?i=this.availablePowerPins.top.ground:"threeVolt"===t?i=this.availablePowerPins.top.threeVolt:"fiveVolt"===t&&(i=this.availablePowerPins.top.fiveVolt):"ground"===t?i=this.availablePowerPins.bottom.ground:"threeVolt"===t?i=this.availablePowerPins.bottom.threeVolt:"fiveVolt"===t&&(i=this.availablePowerPins.bottom.fiveVolt);let a=i.map((e=>this.opts.getBBCoord(e))),l=e.visuals.findClosestCoordIdx(o,a),c=i[l];return s?(this.availablePowerPins.top.ground.splice(l,1),this.availablePowerPins.top.threeVolt.splice(l,1)):(this.availablePowerPins.bottom.ground.splice(l,1),this.availablePowerPins.bottom.threeVolt.splice(l,1)),c}if("breadboard"===t.type)return t;if("MOSI"===t||"MISO"===t||"SCK"===t){return this.opts.boardDef.spiPins||console.debug("No SPI pin mappings found!"),{type:"dalboard",pin:this.opts.boardDef.spiPins[t]}}if("SDA"===t||"SCL"===t){return this.opts.boardDef.i2cPins||console.debug("No I2C pin mappings found!"),{type:"dalboard",pin:this.opts.boardDef.i2cPins[t]}}{e.U.assert("string"==typeof t,"Unknown location type: "+t);let n=t,o=this.opts.boardDef.gpioPinMap[n]||n;return o?{type:"dalboard",pin:o}:void console.debug(`unknown pin location for ${n}`)}}getBoardGroundPin(){let e=this.opts.boardDef.groundPins&&this.opts.boardDef.groundPins[0]||null;return e||console.debug("No available ground pin on board!"),e}getBoardThreeVoltPin(){let e=this.opts.boardDef.threeVoltPins&&this.opts.boardDef.threeVoltPins[0]||null;return e||console.debug("No available 3.3V pin on board!"),e}getBoardFiveVoltPin(){let e=this.opts.boardDef.fiveVoltPins&&this.opts.boardDef.fiveVoltPins[0]||null;return e||console.debug("No available 5V pin on board!"),e}allocPowerWires(e){let r=this.getBoardGroundPin(),i=this.getBoardThreeVoltPin(),s=this.getBoardFiveVoltPin();const a={type:"breadboard",row:"-",col:"26"},l={type:"breadboard",row:"-",col:"1"},c={type:"breadboard",row:"-",col:"50"},u={type:"breadboard",row:"-",col:"25"};let p,d;this.opts.boardDef.attachPowerOnRight?(p=c,d=u):(p=a,d=l);let g=[],h=[],f=[];e.bottomGround&&e.topGround&&g.push({start:this.allocLocation("ground",{referenceBBPin:p}),end:this.allocLocation("ground",{referenceBBPin:d}),color:t}),e.topGround?g.push({start:this.allocLocation("ground",{referenceBBPin:p}),end:{type:"dalboard",pin:r},color:t}):e.bottomGround&&g.push({start:this.allocLocation("ground",{referenceBBPin:d}),end:{type:"dalboard",pin:r},color:t}),e.bottomThreeVolt&&e.bottomGround?h.push({start:this.allocLocation("threeVolt",{referenceBBPin:p}),end:this.allocLocation("threeVolt",{referenceBBPin:d}),color:n}):e.bottomFiveVolt&&e.bottomGround&&f.push({start:this.allocLocation("fiveVolt",{referenceBBPin:p}),end:this.allocLocation("fiveVolt",{referenceBBPin:d}),color:o}),e.topThreeVolt?h.push({start:this.allocLocation("threeVolt",{referenceBBPin:p}),end:{type:"dalboard",pin:i},color:n}):e.bottomThreeVolt&&h.push({start:this.allocLocation("threeVolt",{referenceBBPin:d}),end:{type:"dalboard",pin:i},color:o}),e.topFiveVolt&&!e.topThreeVolt?f.push({start:this.allocLocation("fiveVolt",{referenceBBPin:p}),end:{type:"dalboard",pin:s},color:n}):e.bottomFiveVolt&&!e.bottomThreeVolt&&f.push({start:this.allocLocation("fiveVolt",{referenceBBPin:d}),end:{type:"dalboard",pin:s},color:o});let _=[];g.length>0&&_.push({wireIndices:g.map(((e,t)=>t))});let m=g.length;return h.length>0&&_.push({wireIndices:h.map(((e,t)=>t+m))}),f.length>0&&_.push({wireIndices:h.map(((e,t)=>t+m+h.length))}),{wires:g.concat(h).concat(f),assembly:_}}allocWire(e){const t=[e.start,e.end],n=t.map((e=>"ground"===e||"threeVolt"===e||"fiveVolt"===e));let o=t.map(((e,t)=>n[t]?void 0:this.allocLocation(e,{})));if(o=o.map(((e,n)=>{if(e)return e;const r=o[1-n];return this.allocLocation(t[n],{referenceBBPin:r})})),o[0]&&o[1])return{start:o[0],end:o[1],color:e.color}}allocPart(t){let n=t.pins.filter((e=>a(e.def))).map((n=>{let o=t.startRowIdx+n.bbFit.partRelativeRowIdx;o>=7&&(o-=2);let r=e.visuals.getRowName(o),i=t.startColumnIdx+n.bbFit.partRelativeColIdx;return{type:"breadboard",row:r,col:e.visuals.getColumnName(i)}}));return{name:t.name,visual:t.def.visual,bbFit:t.bbFit,startColumnIdx:t.startColumnIdx,startRowIdx:t.startRowIdx,breadboardConnections:n,params:t.partParams,simulationBehavior:t.def.simulationBehavior}}allocAll(){let e=this.opts.partsList.map((e=>({name:e,def:this.opts.partDefs[e]}))).filter((e=>!!e.def));if(e.length>0){let t=e.map((e=>this.computePartDimensions(e.def,e.name))),n=[];e.forEach(((e,o)=>{let r=t[o],i=this.allocPartIRs(e.def,e.name,r);n=n.concat(i)}));const o=this.placeParts(n).map((e=>this.allocWireIRs(e))),i=o.map((e=>e.wires)).reduce(((e,t)=>e.concat(t)),[]).map((e=>function(e){let t=[e.start,e.end],n=t.map((e=>"ground"===e)),o=t.map((e=>"threeVolt"===e)),i=t.map((e=>"fiveVolt"===e)),s=t.map((e=>function(e){let t=!1;if("string"!=typeof e&&"breadboard"===e.type){let n=e.row;t=0<=["a","b","c","d","e"].indexOf(n)}return t}(e))),a=r(n),l=r(o),c=r(i),u=r(s);return{topGround:a&&!u,topThreeVolt:l&&!u,topFiveVolt:c&&!u,bottomGround:a&&u,bottomThreeVolt:l&&u,bottomFiveVolt:c&&u,singleGround:a,singleThreeVolt:l,singleFiveVolt:c}}(e)));this.powerUsage=function(e){const t=e.reduce(((e,t)=>({topGround:e.topGround||t.topGround,topThreeVolt:e.topThreeVolt||t.topThreeVolt,topFiveVolt:e.topFiveVolt||t.topFiveVolt,bottomGround:e.bottomGround||t.bottomGround,bottomThreeVolt:e.bottomThreeVolt||t.bottomThreeVolt,bottomFiveVolt:e.bottomFiveVolt||t.bottomFiveVolt,singleGround:t.singleGround?null===e.singleGround:e.singleGround,singleThreeVolt:t.singleThreeVolt?null===e.singleThreeVolt:e.singleThreeVolt,singleFiveVolt:t.singleFiveVolt?null===e.singleFiveVolt:e.singleFiveVolt})),{topGround:!1,topThreeVolt:!1,topFiveVolt:!1,bottomGround:!1,bottomThreeVolt:!1,bottomFiveVolt:!1,singleGround:null,singleThreeVolt:null,singleFiveVolt:null});return t.singleGround&&(t.topGround=t.bottomGround=!1),t.singleThreeVolt&&(t.topThreeVolt=t.bottomThreeVolt=!1),t.singleFiveVolt&&(t.topFiveVolt=t.bottomFiveVolt=!1),t}(i);const s=this.allocPowerWires(this.powerUsage),a=o.map(((e,t)=>{const n=this.allocPart(e),o=e.wires.map((e=>this.allocWire(e)));if(o.some((e=>!e)))return;const r=[];e.wires.forEach(((e,t)=>{r[e.pinIdx]=t}));return{part:n,wires:o,assembly:e.def.assembly.map((e=>({part:e.part,wireIndices:(e.pinIndices||[]).map((e=>r[e]))})))}})).filter((e=>!!e)),l=[s].concat(a).filter((e=>e.assembly&&e.assembly.length)),c=!l.some((e=>e.part&&e.part.breadboardConnections&&e.part.breadboardConnections.length>0||e.wires&&e.wires.some((e=>"breadboard"==e.end.type&&"croc"!=e.end.style||"breadboard"==e.start.type&&"croc"!=e.start.style))));return{partsAndWires:l,wires:[],parts:[],hideBreadboard:c}}return{partsAndWires:[],wires:[],parts:[]}}}e.allocateDefinitions=function(e){return new l(e).allocAll()}}(pxsim||(pxsim={})),function(e){!function(e){class t{constructor(e){this.seq=0,this.type=e}}e.Message=t;e.Response=class extends t{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}};class n extends t{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}}e.Event=n;e.Source=class{constructor(e,t,n=0,o,r){this.name=e,this.path=t,this.sourceReference=n,o&&(this.origin=o),r&&(this.adapterData=r)}};e.Scope=class{constructor(e,t,n=!1){this.name=e,this.variablesReference=t,this.expensive=n}};e.StackFrame=class{constructor(e,t,n,o=0,r=0){this.id=e,this.source=n,this.line=o,this.column=r,this.name=t}};e.Thread=class{constructor(e,t){this.id=e,this.name=t||"Thread #"+e}};e.Variable=class{constructor(e,t,n=0,o,r){this.name=e,this.value=t,this.variablesReference=n,"number"==typeof r&&(this.namedVariables=r),"number"==typeof o&&(this.indexedVariables=o)}};e.Breakpoint=class{constructor(e,t,n,o){this.verified=e;const r=this;"number"==typeof t&&(r.line=t),"number"==typeof n&&(r.column=n),o&&(r.source=o)}};e.Module=class{constructor(e,t){this.id=e,this.name=t}};e.CompletionItem=class{constructor(e,t,n=0){this.label=e,this.start=t,this.length=n}};e.StoppedEvent=class extends n{constructor(e,t,n=null){if(super("stopped"),this.body={reason:e,threadId:t},n){this.body.text=n}}};e.ContinuedEvent=class extends n{constructor(e,t){super("continued"),this.body={threadId:e},"boolean"==typeof t&&(this.body.allThreadsContinued=t)}};e.InitializedEvent=class extends n{constructor(){super("initialized")}};e.TerminatedEvent=class extends n{constructor(e){if(super("terminated"),"boolean"==typeof e){this.body={restart:e}}}};e.OutputEvent=class extends n{constructor(e,t="console",n){super("output"),this.body={category:t,output:e},void 0!==n&&(this.body.data=n)}};e.ThreadEvent=class extends n{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}};e.BreakpointEvent=class extends n{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}};e.ModuleEvent=class extends n{constructor(e,t){super("module"),this.body={reason:e,module:t}}};class o{constructor(){this._pendingRequests={}}start(e){this._sequence=1,this.host=e,this.host.onData((e=>{if("request"===e.type)this.dispatchRequest(e);else if("response"===e.type){const t=e,n=this._pendingRequests[t.seq];n&&(delete this._pendingRequests[t.seq],n(t))}}))}stop(){this.host&&this.host.close()}sendEvent(e){this.send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this.send("response",e)}sendRequest(t,n,o,r){const i={command:t};if(n&&Object.keys(n).length>0&&(i.arguments=n),this.send("request",i),r){this._pendingRequests[i.seq]=r;const t=setTimeout((()=>{clearTimeout(t);const n=this._pendingRequests[i.seq];n&&(delete this._pendingRequests[i.seq],n(new e.Response(i,"timeout")))}),o)}}send(e,t){if(t.type=e,t.seq=this._sequence++,this.host){const e=JSON.stringify(t);this.host.send(e)}}dispatchRequest(e){}}e.ProtocolServer=o;class r extends o{constructor(){super(...arguments),this._debuggerLinesStartAt1=!1,this._debuggerColumnsStartAt1=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0}shutdown(){}dispatchRequest(t){const n=new e.Response(t);try{if("initialize"===t.command){let e=t.arguments;if("boolean"==typeof e.linesStartAt1&&(this._clientLinesStartAt1=e.linesStartAt1),"boolean"==typeof e.columnsStartAt1&&(this._clientColumnsStartAt1=e.columnsStartAt1),"path"!==e.pathFormat)this.sendErrorResponse(n,2018,"debug adapter only supports native paths",null);else{const t=n;t.body={},this.initializeRequest(t,e)}}else"launch"===t.command?this.launchRequest(n,t.arguments):"attach"===t.command?this.attachRequest(n,t.arguments):"disconnect"===t.command?this.disconnectRequest(n,t.arguments):"setBreakpoints"===t.command?this.setBreakPointsRequest(n,t.arguments):"setFunctionBreakpoints"===t.command?this.setFunctionBreakPointsRequest(n,t.arguments):"setExceptionBreakpoints"===t.command?this.setExceptionBreakPointsRequest(n,t.arguments):"configurationDone"===t.command?this.configurationDoneRequest(n,t.arguments):"continue"===t.command?this.continueRequest(n,t.arguments):"next"===t.command?this.nextRequest(n,t.arguments):"stepIn"===t.command?this.stepInRequest(n,t.arguments):"stepOut"===t.command?this.stepOutRequest(n,t.arguments):"stepBack"===t.command?this.stepBackRequest(n,t.arguments):"restartFrame"===t.command?this.restartFrameRequest(n,t.arguments):"goto"===t.command?this.gotoRequest(n,t.arguments):"pause"===t.command?this.pauseRequest(n,t.arguments):"stackTrace"===t.command?this.stackTraceRequest(n,t.arguments):"scopes"===t.command?this.scopesRequest(n,t.arguments):"variables"===t.command?this.variablesRequest(n,t.arguments):"setVariable"===t.command?this.setVariableRequest(n,t.arguments):"source"===t.command?this.sourceRequest(n,t.arguments):"threads"===t.command?this.threadsRequest(n):"evaluate"===t.command?this.evaluateRequest(n,t.arguments):"stepInTargets"===t.command?this.stepInTargetsRequest(n,t.arguments):"gotoTargets"===t.command?this.gotoTargetsRequest(n,t.arguments):"completions"===t.command?this.completionsRequest(n,t.arguments):this.customRequest(t.command,n,t.arguments)}catch(e){this.sendErrorResponse(n,1104,"{_stack}",{_exception:e.message,_stack:e.stack})}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,this.sendResponse(e)}disconnectRequest(e,t){this.sendResponse(e),this.shutdown()}launchRequest(e,t){this.sendResponse(e)}attachRequest(e,t){this.sendResponse(e)}setBreakPointsRequest(e,t){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t){this.sendResponse(e)}configurationDoneRequest(e,t){this.sendResponse(e)}continueRequest(e,t){this.sendResponse(e)}nextRequest(e,t){this.sendResponse(e)}stepInRequest(e,t){this.sendResponse(e)}stepOutRequest(e,t){this.sendResponse(e)}stepBackRequest(e,t){this.sendResponse(e)}restartFrameRequest(e,t){this.sendResponse(e)}gotoRequest(e,t){this.sendResponse(e)}pauseRequest(e,t){this.sendResponse(e)}sourceRequest(e,t){this.sendResponse(e)}threadsRequest(e){this.sendResponse(e)}stackTraceRequest(e,t){this.sendResponse(e)}scopesRequest(e,t){this.sendResponse(e)}variablesRequest(e,t){this.sendResponse(e)}setVariableRequest(e,t){this.sendResponse(e)}evaluateRequest(e,t){this.sendResponse(e)}stepInTargetsRequest(e,t){this.sendResponse(e)}gotoTargetsRequest(e,t){this.sendResponse(e)}completionsRequest(e,t){this.sendResponse(e)}customRequest(e,t,n){this.sendErrorResponse(t,1014,"unrecognized request",null)}sendErrorResponse(e,t,n,o){let i;"number"==typeof t?(i={id:t,format:n},o&&(i.variables=o),i.showUser=!0):i=t,e.success=!1,r.formatPII(i.format,!0,i.variables),e.body||(e.body={}),e.body.error=i,this.sendResponse(e)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!=this._debuggerPathsAreURIs?this._clientPathsAreURIs?r.uri2path(e):r.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!=this._clientPathsAreURIs?this._debuggerPathsAreURIs?r.uri2path(e):r.path2uri(e):e}static path2uri(e){let t=e.replace(/\\/g,"/");return"/"!==t[0]&&(t="/"+t),encodeURI("file://"+t)}static uri2path(e){return e}static formatPII(e,t,n){return e.replace(r._formatPIIRegexp,(function(e,o){return t&&o.length>0&&"_"!==o[0]?e:n[o]&&n.hasOwnProperty(o)?n[o]:e}))}}r._formatPIIRegexp=/{([^}]+)}/g,e.DebugSession=r}(e.protocol||(e.protocol={}))}(pxsim||(pxsim={})),function(e){!function(e){e.injectPolyphils=function(){String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){return void 0!==e&&null!=e&&(t=!t||t<0?0:+t,this.substring(t,t+e.length)===e)}}),Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{writable:!0,enumerable:!0,value:function(e){if(null==this)throw new TypeError("this is null or not defined");let t=Object(this),n=t.length>>>0,o=arguments[1],r=o>>0,i=r<0?Math.max(n+r,0):Math.min(r,n),s=arguments[2],a=void 0===s?n:s>>0,l=a<0?Math.max(n+a,0):Math.min(a,n);for(;i<l;)t[i]=e,i++;return t}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{writable:!0,enumerable:!0,value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');let t=Object(this);const n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");const o=arguments[1];let r=0;for(;r<n;){const n=t[r];if(e.call(o,n,r,t))return n;r++}}}),Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice,writable:!0,enumerable:!0}),Uint16Array.prototype.slice||Object.defineProperty(Uint16Array.prototype,"slice",{value:Array.prototype.slice,writable:!0,enumerable:!0}),Uint32Array.prototype.slice||Object.defineProperty(Uint32Array.prototype,"slice",{value:Array.prototype.slice,writable:!0,enumerable:!0}),Uint8Array.prototype.fill||Object.defineProperty(Uint8Array.prototype,"fill",{value:Array.prototype.fill,writable:!0,enumerable:!0}),Uint16Array.prototype.fill||Object.defineProperty(Uint16Array.prototype,"fill",{value:Array.prototype.fill,writable:!0,enumerable:!0}),Uint32Array.prototype.fill||Object.defineProperty(Uint32Array.prototype,"fill",{value:Array.prototype.fill,writable:!0,enumerable:!0}),Uint8Array.prototype.some||Object.defineProperty(Uint8Array.prototype,"some",{value:Array.prototype.some,writable:!0,enumerable:!0}),Uint16Array.prototype.some||Object.defineProperty(Uint16Array.prototype,"some",{value:Array.prototype.some,writable:!0,enumerable:!0}),Uint32Array.prototype.some||Object.defineProperty(Uint32Array.prototype,"some",{value:Array.prototype.some,writable:!0,enumerable:!0}),Uint8Array.prototype.reverse||Object.defineProperty(Uint8Array.prototype,"reverse",{value:Array.prototype.reverse,writable:!0,enumerable:!0}),Uint16Array.prototype.reverse||Object.defineProperty(Uint16Array.prototype,"reverse",{value:Array.prototype.reverse,writable:!0,enumerable:!0}),Uint32Array.prototype.reverse||Object.defineProperty(Uint32Array.prototype,"reverse",{value:Array.prototype.reverse,writable:!0,enumerable:!0}),Math.imul||(Math.imul=function(e,t){const n=65535&e,o=65535&t;return n*o+((e>>>16&65535)*o+n*(t>>>16&65535)<<16>>>0)|0}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");let n=Object(e);for(let e=1;e<arguments.length;e++){let t=arguments[e];if(null!=t)for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}return n},writable:!0,configurable:!0}),Promise.prototype.finally||(Promise.prototype.finally=Promise.prototype.finally||{finally(e){const t=t=>Promise.resolve(e()).then(t);return this.then((e=>t((()=>e))),(e=>t((()=>Promise.reject(e)))))}}.finally)};function t(e){e=e.replace(/\\/g,"/");const t=[];return e.split("/").forEach((e=>{".."===e&&t.length?t.pop():e&&"."!==e&&t.push(e)})),t}e.Lazy=class{constructor(e){this._func=e,this._evaluated=!1}get value(){return this._evaluated||(this._value=this._func(),this._evaluated=!0),this._value}},e.getNormalizedParts=t,e.normalizePath=function(e){return t(e).join("/")},e.relativePath=function(e,n){const o=t(e),r=t(n);let i=0;for(;o[i]===r[i]&&(i++,i!==o.length&&i!==r.length););const s=o.slice(i),a=r.slice(i);for(let e=0;e<s.length;e++)a.unshift("..");return a.join("/")},e.pathJoin=function(...e){let t="";return e.forEach((e=>{e.replace(/\\/g,"/"),e.lastIndexOf("/")===e.length-1&&(e=e.slice(0,e.length-1)),t+="/"+e})),t},e.toArray=function(e){if(Array.isArray(e))return e;let t=[];for(let n=0;n<e.length;++n)t.push(e[n]);return t}}(e.util||(e.util={}))}(pxsim||(pxsim={})),function(e){e.getWarningMessage=function(t){let n={type:"debugger",subtype:"warning",breakpointIds:[],message:t},o=e.runtime.currFrame;for(;null!=o;)n.breakpointIds.push(o.lastBrkId),o=o.parent;return n};function t(t,n){switch(typeof t){case"string":case"number":case"boolean":return t;case"function":return{text:"(function)",type:"function"};case"undefined":return null;case"object":if(!t)return null;if(t instanceof e.RefObject){n&&(n[t.id]=t);let o=e.RefObject.toDebugString(t),r=o.startsWith("[")?"array":o;return{id:t.id,preview:o,hasFields:null!==t.fields||o.startsWith("["),type:r}}return t._width&&t._height?{text:t._width+"x"+t._height,type:"image"}:{text:"(object)",type:"object"};default:throw new Error}}function n(e,n,r,i){return function(e,r){const s={};for(let o of Object.keys(e))/^__/.test(o)||!/___\d+$/.test(o)||i&&-1===i.indexOf(o)||(s[o]=t(e[o],n));if(e.fields&&r)for(let i of r)i=i.substring(i.lastIndexOf(".")+1),s[i]=t(o(e.vtable.iface[i],e),n);if(e.fields)for(let o of Object.keys(e.fields).filter((e=>!e.startsWith("_"))))s[o]=t(e.fields[o],n);else Array.isArray(e.data)&&e.data.forEach(((e,o)=>{s[o]=t(e,n)}));return s}(e,r)}function o(e,t){let n={pc:0,arg0:t,fn:e,parent:{}};for(;n.fn;)n=n.fn(n);return n.retval}function r(e,o){let r=e.fn?e.fn.info:null;if(r){let i={thisParam:t(e.argL,o),params:[]};if(r.argumentNames){const n=r.argumentNames;i.params=n.map(((n,r)=>({name:n,value:t(e["arg"+r],o)})))}return{locals:n(e,o),funcInfo:r,breakpointId:e.lastBrkId,callLocationId:e.callLocIdx,arguments:i}}}e.BreakpointMap=class{constructor(e){this.fileMap={},this.idMap={},e.forEach((e=>{const[t,n]=e;this.fileMap[n.source.path]||(this.fileMap[n.source.path]=[]),this.fileMap[n.source.path].push(e),this.idMap[t]=n}));for(const e in this.fileMap){const t=this.fileMap[e];this.fileMap[e]=t.sort((([,e],[,t])=>e.line===t.line?t.endLine===e.endLine?e.column-t.column:t.endLine-e.endLine:e.line-t.line))}}getById(e){return this.idMap[e]}verifyBreakpoint(e,t){const n=this.fileMap[e];let o;if(n)for(const[e,r]of n)r.line<=t.line&&r.endLine>=t.line&&(o=[e,r]);return o?(o[1].verified=!0,o):[-1,{verified:!1}]}},e.dumpHeap=n,e.injectEnvironmentGlobals=function(n,o){const r=e.runtime.environmentGlobals;if(!Object.keys(r).length)return;const i=n.environmentGlobals={};Object.keys(r).forEach((n=>i[n]=t(e.runtime.environmentGlobals[n],o)))},e.getBreakpointMsg=function(t,o,i){const s={},a={type:"debugger",subtype:"breakpoint",breakpointId:o,globals:n(e.runtime.globals,s,void 0,i),stackframes:[]};for(;null!=t;){let e=r(t,s);e&&a.stackframes.push(e),t=t.parent}return{msg:a,heap:s}};class i extends e.protocol.DebugSession{constructor(t){super();let n={onDebuggerBreakpoint:e=>this.onDebuggerBreakpoint(e),onDebuggerWarning:e=>this.onDebuggerWarning(e),onDebuggerResume:()=>this.onDebuggerResume(),onStateChanged:e=>this.onStateChanged(e)};this.driver=new e.SimulatorDriver(t,n)}runCode(t,n,o,r,i){this.breakpoints=r,this.projectDir&&this.fixBreakpoints(),this.sendEvent(new e.protocol.InitializedEvent),this.driver.run(t,{parts:n,fnArgs:o,boardDefinition:i})}stopSimulator(e=!1){this.driver.stop(e)}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsConfigurationDoneRequest=!0,this.sendResponse(e)}disconnectRequest(e,t){this.sendResponse(e),this.shutdown()}launchRequest(t,n){this.projectDir||(this.projectDir=e.util.normalizePath(n.projectDir),this.breakpoints&&this.fixBreakpoints()),this.sendResponse(t)}setBreakPointsRequest(t,n){t.body={breakpoints:[]};const o=[];n.breakpoints.forEach((r=>{if(this.breakpoints){const[i,s]=this.breakpoints.verifyBreakpoint(e.util.relativePath(this.projectDir,n.source.path),r);t.body.breakpoints.push(s),s.verified&&o.push(i)}else t.body.breakpoints.push({verified:!1})})),this.driver.setBreakpoints(o),this.sendResponse(t)}continueRequest(t,n){this.driver.resume(e.SimulatorDebuggerCommand.Resume),this.sendResponse(t)}nextRequest(t,n){this.driver.resume(e.SimulatorDebuggerCommand.StepOver),this.sendResponse(t)}stepInRequest(t,n){this.driver.resume(e.SimulatorDebuggerCommand.StepInto),this.sendResponse(t)}stepOutRequest(t,n){this.driver.resume(e.SimulatorDebuggerCommand.StepOut),this.sendResponse(t)}pauseRequest(t,n){this.driver.resume(e.SimulatorDebuggerCommand.Pause),this.sendResponse(t)}threadsRequest(e){e.body={threads:[{id:i.THREAD_ID,name:"main"}]},this.sendResponse(e)}stackTraceRequest(e,t){if(this.lastBreak){const t=this.state.getFrames();e.body={stackFrames:t}}this.sendResponse(e)}scopesRequest(e,t){this.state&&(e.body={scopes:this.state.getScopes(t.frameId)}),this.sendResponse(e)}variablesRequest(e,t){this.state&&(e.body={variables:this.state.getVariables(t.variablesReference)}),this.sendResponse(e)}onDebuggerBreakpoint(t){if(this.lastBreak=t,this.state=new s(this.lastBreak,this.breakpoints,this.projectDir),t.exceptionMessage){const n=t.exceptionMessage.replace(/___\d+/g,"");this.sendEvent(new e.protocol.StoppedEvent("exception",i.THREAD_ID,n))}else this.sendEvent(new e.protocol.StoppedEvent("breakpoint",i.THREAD_ID))}onDebuggerWarning(e){}onDebuggerResume(){this.sendEvent(new e.protocol.ContinuedEvent(i.THREAD_ID,!0))}onStateChanged(t){switch(t){case e.SimulatorState.Paused:break;case e.SimulatorState.Running:this.sendEvent(new e.protocol.ContinuedEvent(i.THREAD_ID,!0));break;case e.SimulatorState.Stopped:this.sendEvent(new e.protocol.TerminatedEvent)}}fixBreakpoints(){for(const t in this.breakpoints.idMap){const n=this.breakpoints.idMap[t];n.source.path=e.util.pathJoin(this.projectDir,n.source.path),n.line=this.convertDebuggerLineToClient(n.line),n.endLine=this.convertDebuggerLineToClient(n.endLine),n.column=this.convertDebuggerColumnToClient(n.column),n.endColumn=this.convertDebuggerColumnToClient(n.endColumn)}}}i.THREAD_ID=1,e.SimDebugSession=i;class s{constructor(e,t,n){this._message=e,this._map=t,this._dir=n,this._currentId=1,this._frames={},this._vars={};const o=this.nextId();this._vars[o]=this.getVariableValues(this._message.globals),this._globalScope={name:"Globals",variablesReference:o,expensive:!1}}getFrames(){return this._message.stackframes.map(((e,t)=>{const n=this._map.getById(e.breakpointId);if(n)return this._frames[e.breakpointId]=e,{id:e.breakpointId,name:e.funcInfo?e.funcInfo.functionName:0===t?"main":"anonymous",line:n.line,column:n.column,endLine:n.endLine,endColumn:n.endLine,source:n.source}})).filter((e=>!!e))}getScopes(e){const t=this._frames[e];if(t){const e=this.nextId();return this._vars[e]=this.getVariableValues(t.locals),[{name:"Locals",variablesReference:e,expensive:!1},this._globalScope]}return[this._globalScope]}getVariables(e){const t=this._vars[e];return t&&t.value||[]}getVariableValues(t){return new e.util.Lazy((()=>{const e=[];for(const n in t){const o=t[n];let r,i=0;null===o?r="null":void 0===o?r="undefined":"object"==typeof o?(r="(object)",i=this.nextId(),this._vars[i]=this.getVariableValues(o)):r=o.toString();const s=n.substr(0,n.lastIndexOf("___"));e.push({name:s,value:r,variablesReference:i})}return e}))}nextId(){return this._currentId++}}}(pxsim||(pxsim={})),function(e){function t(e=0){function t(){try{window.print()}catch(e){}}e?setTimeout(t,e):t()}let n;function o(e,t){r({type:"pxtsim",action:"event",tick:e,data:t})}function r(e){"undefined"!=typeof window&&window.parent&&window.parent!==window&&window.parent.postMessage(e,"*")}function i(){setInterval((()=>{e.Runtime.postMessage({type:"simulator",command:"reload"})}),3e3)}e.print=t,function(n){function r(n){n.origin;let r=n.data||{},i=r.type;if(i)switch(i){case"run":l(r);break;case"instructions":e.instructions.renderInstructions(r);break;case"stop":a();break;case"mute":c(r.mute);break;case"stopsound":e.AudioContextManager.stopAll();break;case"print":t();break;case"recorder":!function(e){if(!s)return;switch(e.action){case"start":s.startRecording(e.width);break;case"stop":s.stopRecording()}}(r);break;case"screenshot":e.Runtime.postScreenshotAsync(r);break;case"custom":e.handleCustomMessage&&e.handleCustomMessage(r);break;case"pxteditor":break;case"debugger":s&&s.handleDebuggerMsg(r);break;case"simulator":let n=r;switch(n.command){case"focus":o("simulator.focus",{timestamp:n.timestamp});break;case"blur":o("simulator.blur",{timestamp:n.timestamp})}default:!function(e){if(!s||s.dead)return;s.board.receiveMessage(e)}(r)}}let s;function a(){s&&(s.kill(),s.board&&s.board.kill())}function l(t){a(),t.mute&&c(t.mute),t.localizedStrings&&e.localization.setLocalizedStrings(t.localizedStrings);const n=new e.Runtime(t);s=n,n.board.initAsync(t).then((()=>{n===s&&n.run((t=>{e.dumpLivePointers(),e.Runtime.postMessage({type:"toplevelcodefinished"})}))}))}function c(t){e.AudioContextManager.mute(t)}n.start=function(){window.addEventListener("message",r,!1),n.frameid=window.location.hash.slice(1),function(){if("serviceWorker"in navigator&&-1!==window.location.href.indexOf("---simulator")&&!e.U.isLocalHost()){const e=window.location.pathname,t=e.substring(1,e.indexOf("---"));navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("message",(e=>{const n=e.data;n&&"serviceworker"===n.type&&"activated"===n.state&&n.ref===t&&i()}));const n=window.location.href.replace(/---simulator.*$/,"---simserviceworker");navigator.serviceWorker.register(n).then((function(e){console.log("Simulator ServiceWorker registration successful with scope: ",e.scope)}),(function(e){console.log("Simulator ServiceWorker registration failed: ",e)}))}}(),e.Runtime.postMessage({type:"ready",frameid:n.frameid})},n.stop=a,n.run=l}(n=e.Embed||(e.Embed={})),e.tickEvent=o,e.reportError=function(e,t,n){r({type:"pxtsim",action:"event",tick:"error",category:e,message:t,data:n})},e.reload=i}(pxsim||(pxsim={})),pxsim.util.injectPolyphils(),"undefined"!=typeof window&&window.addEventListener("load",(function(e){pxsim.Embed.start()})),function(e){!function(t){const n=e=>`${e}x`,o=.95,[r,i]=[816*o,1056*o],s=r-86.4,a=i-86.4,[l,c]=[1,1],u=24,p=s/c-48*c,d=`\n            .instr-panel {\n                margin: 20px;\n                padding: 24px;\n                border-width: 4px;\n                border-color: gray;\n                border-style: solid;\n                border-radius: 20px;\n                display: inline-block;\n                width: ${p}px;\n                height: ${a/l-48*l}px;\n                position: relative;\n                overflow: hidden;\n                page-break-inside: avoid;\n            }\n            .board-svg {\n                margin: 0 auto;\n                display: block;\n                position: absolute;\n                bottom: 24px;\n                left: ${(p-465)/2+u}px;\n            }\n            .panel-num-outer {\n                position: absolute;\n                left: -4px;\n                top: -4px;\n                width: 120px;\n                height: 120px;\n                border-width: 4px;\n                border-style: solid;\n                border-color: gray;\n                border-radius: 20px 0 20px 0;\n            }\n            .panel-num {\n                margin: 10px 0;\n                text-align: center;\n                font-size: 80px;\n            }\n            .cmp-div {\n                display: inline-block;\n            }\n            .reqs-div {\n                margin-left: 144px;\n                margin-top: 5px;\n            }\n            .partslist-wire,\n            .partslist-cmp {\n                margin: 10px;\n            }\n            .partslist-wire {\n                display: inline-block;\n            }\n            `;function g(t,n){let o=document.createElementNS("http://www.w3.org/2000/svg","svg"),r={l:0,t:0,w:0,h:0},i=document.createElementNS("http://www.w3.org/2000/svg","svg");o.appendChild(i),i.appendChild(t.el);let s={viewBox:`${t.x} ${t.y} ${t.w} ${t.h}`,preserveAspectRatio:"xMidYMid"};r.w=t.w,r.h=t.h;let a=e=>{r.h*=e,r.w*=e,s.width=r.w,s.height=r.h};n.cmpScale&&a(n.cmpScale),n.cmpWidth&&n.cmpWidth<r.w?a(n.cmpWidth/r.w):n.cmpHeight&&n.cmpHeight<r.h&&a(n.cmpHeight/r.h),e.svg.hydrate(i,s);let l=r.l,c=r.t,u=r.w,p=r.h,d=e=>{if(e<r.l){let t=r.l-e;r.l=e,r.w+=t}},g=e=>{let t=r.l+r.w;if(t<e){let n=e-t;r.w+=n}},h=e=>{if(e<r.t){let t=r.t-e;r.t=e,r.h+=t}},f=e=>{let t=r.t+r.h;if(t<e){let n=e-t;r.h+=n}},[_,m]=[-.3,.3];const y=[1.4,1];if(n&&n.top){let t=n.topSize,r=t/y[0],i=t/y[1],[s,a]=[l+u/2,c-3-i/2],p=e.visuals.mkTxt(s,a,t,0,n.top,_,m);e.U.addClass(p,"cmp-lbl"),o.appendChild(p);let f=r*n.top.length;h(a-i/2),d(s-f/2),g(s+f/2)}if(n&&n.bot){let t=n.botSize,r=t/y[0],i=t/y[1],[s,a]=[l+u/2,c+p+3+i/2],h=e.visuals.mkTxt(s,a,t,0,n.bot,_,m);e.U.addClass(h,"cmp-lbl"),o.appendChild(h);let k=r*n.bot.length;f(a+i/2),d(s-k/2),g(s+k/2)}if(n&&n.right){let t=n.rightSize,r=t/y[1],i=t/y[0]*n.right.length,[s,a]=[l+u+5+i/2,c+p/2],d=e.visuals.mkTxt(s,a,t,0,n.right,_,m);e.U.addClass(d,"cmp-lbl"),o.appendChild(d),h(a-r/2),g(s+i/2),f(a+r/2)}if(n&&n.left){let t=n.leftSize,r=t/y[1],i=t/y[0]*n.left.length,[s,a]=[l-5-i/2,c+p/2],u=e.visuals.mkTxt(s,a,t,0,n.left,_,m);e.U.addClass(u,"cmp-lbl"),o.appendChild(u),h(a-r/2),d(s-i/2),f(a+r/2)}let k={viewBox:`${r.l} ${r.t} ${r.w} ${r.h}`,width:1.7*r.w,height:1.7*r.h,preserveAspectRatio:"xMidYMid"};e.svg.hydrate(o,k);let b=document.createElement("div");return b.appendChild(o),b}function h(t,n){let o,r=e.runtime.board;if("wire"==t)o=e.visuals.mkWirePart([0,0],n.wireClr||"red",n.crocClips);else{let n=t;if("string"==typeof n.builtIn){o=(0,r.builtinPartVisuals[n.builtIn])([0,0])}else o=e.visuals.mkGenericPartSVG(n)}return g(o,n)}function f(t,n,o=!1){const r={state:e.runtime.board,boardDef:t.boardDef,forceBreadboardLayout:!0,forceBreadboardRender:t.allAlloc.requiresBreadboard,partDefs:t.cmpDefs,maxWidth:`${n}px`,fnArgs:t.fnArgs,wireframe:o,partsList:[]};let i=new e.visuals.BoardHost(e.visuals.mkBoardView({visual:r.boardDef.visual,boardDef:r.boardDef,wireframe:r.wireframe}),r),s=i.getView();return e.U.addClass(s,"board-svg"),i}function _(){let t=document.createElement("div");return e.U.addClass(t,"instr-panel"),t}function m(t){let o=_();var r;let i=g((r=t.boardDef,e.visuals.mkBoardView({visual:r.visual,boardDef:r}).getView()),{left:n(1),leftSize:30,cmpScale:.17});o.appendChild(i);let s=g(new e.visuals.Breadboard({}).getSVGAndSize(),{left:n(1),leftSize:30,cmpScale:.25});return o.appendChild(s),t.allCmps.forEach((t=>{let r=1;"buttonpair"===t.visual.builtIn&&(r=2);let i=h(t.visual,{left:n(r),leftSize:30,cmpScale:.3});e.U.addClass(i,"partslist-cmp"),o.appendChild(i)})),t.allWireColors.forEach((r=>{let i=t.colorToWires[r].length,s=t.boardDef.pinStyles[r]||"female",a=h("wire",{left:n(i),leftSize:20,wireClr:r,cmpScale:.23,crocClips:"croc"==s});e.U.addClass(a,"partslist-wire"),o.appendChild(a)})),o}function y(t,n){let o=_(),r=f(n,465,!0);!function(t,n,o){let r=t.getView();n>0&&e.U.addClass(r,"grayed");for(let r=0;r<=n;r++){let i=o.stepToCmps[r];i&&i.forEach((o=>{let i=t.addPart(o);r===n&&(o.breadboardConnections.forEach((e=>t.highlightBreadboardPin(e))),e.U.addClass(i.element,"notgrayed"))}));let s=o.stepToWires[r];s&&s.forEach((e=>{let o=t.addWire(e);o&&r===n&&("breadboard"==e.start.type?t.highlightBreadboardPin(e.start):t.highlightBoardPin(e.start.pin),"breadboard"==e.end.type?t.highlightBreadboardPin(e.end):t.highlightBoardPin(e.end.pin),t.highlightWire(o))}))}}(r,t,n),o.appendChild(r.getView());let i=document.createElement("div");e.U.addClass(i,"panel-num-outer"),e.U.addClass(i,"noselect"),o.appendChild(i);let s=document.createElement("div");e.U.addClass(s,"panel-num"),s.textContent=t+1+"",i.appendChild(s);let a=document.createElement("div");e.U.addClass(a,"reqs-div"),o.appendChild(a);let l=n.stepToWires[t]||[],c=e=>{if("breadboard"===e.type){let{row:t,col:n}=e;return`(${t},${n})`}return e.pin};return l.forEach((t=>{let o=!1;"dalboard"==t.end.type&&(o="croc"==n.boardDef.pinStyles[t.end.pin]);let r=h("wire",{top:c(t.end),topSize:10,bot:c(t.start),botSize:10,wireClr:t.color,cmpHeight:40,crocClips:o});e.U.addClass(r,"cmp-div"),a.appendChild(r)})),(n.stepToCmps[t]||[]).forEach((t=>{let n;n="buttonpair"===t.visual.builtIn?[t.breadboardConnections[0],t.breadboardConnections[2]]:[t.breadboardConnections[0]],n.forEach(((n,o)=>{let r;if(n){let{row:e,col:t}=n;r=`(${e},${t})`}else r="";let i=1.5;"buttonpair"===t.visual.builtIn&&(i*=.5);let s=h(t.visual,{top:r,topSize:10,cmpHeight:50,cmpScale:i});e.U.addClass(s,"cmp-div"),a.appendChild(s)}))})),o}function k(t,n){n.boardDef.pinStyles||(n.boardDef.pinStyles={}),n.configData&&e.setConfigData(n.configData.cfg,n.configData.cfgKey);const o={type:"run",code:"",boardDefinition:n.boardDef,partDefinitions:n.partDefinitions};e.runtime=new e.Runtime(o),e.runtime.board=null,e.initCurrentRuntime(o);let r=document.createElement("style");r.textContent+=d,document.head.appendChild(r);const i=n.partDefinitions;let s=new e.visuals.Breadboard({}),a=function(t){let n=e.allocateDefinitions(t),o=[],r=[],i=1;n.partsAndWires.forEach((e=>{let t=e.part,n=e.wires;e.assembly.forEach(((e,s)=>{e.part&&t&&(r[i+s]=[t]),e.wireIndices&&e.wireIndices.length>0&&n&&(o[i+s]=e.wireIndices.map((e=>n[e])))})),i+=e.assembly.length}));let s=i-1,a=n.partsAndWires.map((e=>e.part)).filter((e=>!!e)),l=n.partsAndWires.map((e=>e.wires||[])).reduce(((e,t)=>e.concat(t)),[]),c={},u=[];return l.forEach((e=>{c[e.color]||(c[e.color]=[],u.push(e.color)),c[e.color].push(e)})),{boardDef:t.boardDef,cmpDefs:t.partDefs,fnArgs:t.fnArgs,allAlloc:n,stepToWires:o,stepToCmps:r,allWires:l,allCmps:a,lastStep:s,colorToWires:c,allWireColors:u}}({boardDef:n.boardDef,partDefs:i,partsList:n.parts,fnArgs:n.fnArgs,getBBCoord:s.getCoord.bind(s)});a.allAlloc.requiresBreadboard=!0;!function(e){let t=document.getElementById("front-panel"),n=f(e,400,!1);n.addAll(e.allAlloc),t.appendChild(n.getView())}(a);let l=m(a);t.appendChild(l);for(let e=0;e<=a.lastStep;e++){let n=y(e,a);t.appendChild(n)}n.print&&e.print(2e3)}t.renderParts=k,t.renderInstructions=function(e){document.getElementById("proj-title").innerText=e.options.name||"",k(document.body,e.options)}}(e.instructions||(e.instructions={}))}(pxsim||(pxsim={})),function(e){function t(e,t="sim: check failed"){if(!e)throw new Error(t)}e.quiet=!1,e.check=t,e.title="";let n,o,r,i,s,a={},l={};e.getConfig=function(e){return l.hasOwnProperty(e+"")?l[e+""]:null},e.getConfigKey=function(e){return a.hasOwnProperty(e)?a[e]:null},e.getAllConfigKeys=function(){return Object.keys(a)},e.setConfigKey=function(e,t){a[e]=t},e.setConfig=function(e,t){l[e]=t},e.setConfigData=function(e,t){l=e,a=t},e.getConfigData=function(){return{cfg:l,cfgKey:a}},e.setTitle=function(t){e.title=t};class c{constructor(){e.runtime?this.id=e.runtime.registerLiveObject(this):this.id=0}destroy(){}scan(t){throw e.U.userError("scan not implemented")}gcKey(){throw e.U.userError("gcKey not implemented")}gcSize(){throw e.U.userError("gcSize not implemented")}gcIsStatic(){return!1}print(){e.runtime&&e.runtime.refCountingDebug&&console.log(`RefObject id:${this.id}`)}toDebugString(){return"(object)"}static toAny(e){return e&&e.toAny?e.toAny():e}static toDebugString(e){return null===e?"null":void 0===e?"undefined;":e.vtable&&e.vtable.name?e.vtable.name:e.toDebugString?e.toDebugString():"string"==typeof e?JSON.stringify(e):e.toString()}}e.RefObject=c;class u{constructor(e,t,n){this.func=e,this.caps=t,this.args=n}}e.FnWrapper=u;class p extends c{constructor(){super(...arguments),this.fields={}}scan(e){for(let t of Object.keys(this.fields))e(t,this.fields[t])}gcKey(){return this.vtable.name}gcSize(){return this.vtable.numFields+1}destroy(){this.fields=null,this.vtable=null}print(){e.runtime&&e.runtime.refCountingDebug&&console.log(`RefRecord id:${this.id} (${this.vtable.name})`)}}e.RefRecord=p;class d extends c{constructor(){super(...arguments),this.fields=[]}scan(e){for(let t=0;t<this.fields.length;++t)e("_cap"+t,this.fields[t])}gcKey(){return e.functionName(this.func)}gcSize(){return this.fields.length+3}isRef(e){return t(0<=e&&e<this.fields.length),e<this.len}ldclo(e){return t(0<=(e>>=2)&&e<this.fields.length),this.fields[e]}destroy(){this.fields=null,this.func=null}print(){e.runtime&&e.runtime.refCountingDebug&&console.log(`RefAction id:${this.id} len:${this.fields.length}`)}}e.RefAction=d,function(t){t.seedAddRandom=function(e){},t.mkAction=function(e,t){let n=new d;n.len=e,n.func=t;for(let t=0;t<e;++t)n.fields.push(null);return n},t.runAction=function(t,n){let o=e.getResume();o(t instanceof d?new u(t.func,t.fields,n):new u(t,null,n))};let n={};t.dumpPerfCounters=function(){if(!e.runtime||!e.runtime.perfCounters)return;let t="calls,us,name\n";for(let n of e.runtime.perfCounters){n.lastFew.sort();const e=n.lastFew[n.lastFew.length>>1];t+=`${n.numstops},${n.value},${n.name},${e}\n`}!function(e){let t="";const o=(e,n)=>{t+=e.length>=n?e:("              "+e).slice(-n)},r=e=>o(""+Math.round(e),6),i=(e,n)=>{o(Math.round(n)+"",8),t+=" /",r(e),t+=" =",r(n/e)};for(let o of e.split(/\n/)){if(!o)continue;if(!/^\d/.test(o))continue;const e=o.split(/,/);let l=n[e[2]];l||(n[e[2]]=l={stops:0,us:0,meds:[]}),s=e[2],a=25,t+=s.length>=a?s:(s+"                         ").slice(0,a);const c=parseInt(e[0]),u=parseInt(e[1]);i(c,u),t+=" |",i(c-l.stops,u-l.us),t+=" ~";const p=parseInt(e[3]);r(p),l.meds.length>10&&l.meds.shift(),l.meds.push(p);const d=l.meds.slice();d.sort(((e,t)=>e-t));const g=d[d.length>>1];t+=" ~~",r(g),l.stops=c,l.us=u,t+="\n"}var s,a;console.log(t)}(t)}}(n=e.pxtcore||(e.pxtcore={}));class g extends c{constructor(){super(...arguments),this.v=void 0}scan(e){e("*",this.v)}gcKey(){return"LOC"}gcSize(){return 2}destroy(){}print(){e.runtime&&e.runtime.refCountingDebug&&console.log(`RefRefLocal id:${this.id} v:${this.v}`)}}e.RefRefLocal=g;class h extends c{constructor(){super(...arguments),this.vtable=e.mkMapVTable(),this.data=[]}scan(e){for(let t of this.data)e(t.key,t.val)}gcKey(){return"{...}"}gcSize(){return 2*this.data.length+4}findIdx(e){e+="";for(let t=0;t<this.data.length;++t)if(this.data[t].key==e)return t;return-1}destroy(){super.destroy();for(let e=0;e<this.data.length;++e)this.data[e].val=0;this.data=[]}print(){e.runtime&&e.runtime.refCountingDebug&&console.log(`RefMap id:${this.id} size:${this.data.length}`)}toAny(){const e={};return this.data.forEach((t=>{e[t.key]=c.toAny(t.val)})),e}}function f(){e.runtime&&e.runtime.dumpLivePointers()}e.RefMap=h,e.dumpLivePointers=f,function(e){e.toString=function(e){return null===e?"null":void 0===e?"undefined":e.toString()},e.toBoolDecr=function(e){return!!e},e.toBool=function(e){return!!e}}(o=e.numops||(e.numops={})),function(e){e.toInt=function(e){return 0|e},e.toFloat=function(e){return e},e.ignore=function(e){return e}}(r=e.langsupp||(e.langsupp={})),function(t){t.ptrOfLiteral=function(e){return e},t.debugMemLeaks=function(){f()},t.templateHash=function(){return 0},t.programHash=function(){return 0},t.programName=function(){return e.title},t.programSize=function(){return 0},t.afterProgramPage=function(){return 0},t.getConfig=function(t,n){let o=e.getConfig(t);return null==o?n:o},t.toInt=function(e){return e>>0},t.toUInt=function(e){return e>>>0},t.toDouble=function(e){return e},t.toFloat=function(e){return e},t.fromInt=function(e){return e},t.fromUInt=function(e){return e},t.fromDouble=function(e){return e},t.fromFloat=function(e){return e},t.fromBool=function(e){return!!e}}(n=e.pxtcore||(e.pxtcore={})),function(n){function o(e,t){if(t+="",e instanceof p){return e.fields[t]}let n=e.findIdx(t);if(!(n<0))return e.data[n].val}function r(e,t,n){if(t+="",e instanceof p){return void(e.fields[t]=n)}let o=e.findIdx(t);o<0?e.data.push({key:t,val:n}):e.data[o].val=n}n.toInt8=function(e){return(255&e)<<24>>24},n.toInt16=function(e){return(65535&e)<<16>>16},n.toInt32=function(e){return 0|e},n.toUInt32=function(e){return e>>>0},n.toUInt8=function(e){return 255&e},n.toUInt16=function(e){return 65535&e},n.nullFix=function(e){return null==e||!1===e?0:!0===e?1:e},n.nullCheck=function(t){null==t&&e.U.userError("Dereferencing null/undefined value.")},n.panic=function(t){e.U.userError("PANIC! Code "+t)},n.stringToBool=function(e){return e?1:0},n.ptrToBool=function(e){return e?1:0},n.emptyToNull=function(e){return""==e?0:e},n.ldlocRef=function(e){return e.v},n.stlocRef=function(e,t){e.v=t},n.mklocRef=function(){return new g},n.stclo=function(e,n,o){return t(0<=n&&n<e.fields.length),t(null===e.fields[n]),e.fields[n]=o,e},n.runtimeWarning=function(t){e.Runtime.postMessage(e.getWarningMessage(t))},n.mkMap=function(){return new h},n.mapGet=function(e,t){return o(e,n.mapKeyNames[t])},n.mapSet=function(e,t,o){return r(e,n.mapKeyNames[t],o)},n.mapGetByString=o,n.mapDeleteByString=function(e,t){e instanceof h||n.panic(923);let o=e.findIdx(t);return o>=0&&e.data.splice(o,1),!0},n.mapSetGeneric=r,n.mapGetGeneric=o,n.mapSetByString=r,n.keysOf=function(t){let n=new e.RefCollection;if(t instanceof h)for(let e of t.data)n.push(e.key);return n}}(i=e.pxtrt||(e.pxtrt={})),function(e){e.mkClassInstance=function(e){t(!!e.methods);let n=new p;return n.vtable=e,n},e.switch_eq=function(e,t){return e==t},e.typeOf=function(e){return typeof e}}(n=e.pxtcore||(e.pxtcore={})),function(t){t.panic=i.panic,t.pause=function(t){let n=e.getResume();e.runtime.schedule((()=>{n()}),t)},t.runInBackground=function(t){e.runtime.runFiberAsync(t)},t.forever=function(t){i.nullCheck(t),function n(){e.runtime.runFiberAsync(t).then((()=>e.U.delay(20))).then(n)}()}}(s=e.thread||(e.thread={}))}(pxsim||(pxsim={})),function(e){class t extends e.RefObject{constructor(){super(),this.data=[]}scan(e){for(let t=0;t<this.data.length;++t)e("["+t+"]",this.data[t])}gcKey(){return"[...]"}gcSize(){return this.data.length+2}toArray(){return this.data.slice(0)}toAny(){return this.data.map((t=>e.RefObject.toAny(t)))}toDebugString(){let t="[";for(let n=0;n<this.data.length;++n){n>0&&(t+=",");let o=e.RefObject.toDebugString(this.data[n]);if(t.length+o.length>100){0==n&&(t+=o.substr(0,100)),t+="...";break}t+=o}return t+="]",t}destroy(){let e=this.data;for(let t=0;t<e.length;++t)e[t]=0;this.data=[]}isValidIndex(e){return e>=0&&e<this.data.length}push(e){this.data.push(e)}pop(){return this.data.pop()}getLength(){return this.data.length}setLength(e){this.data.length=e}getAt(e){return this.data[e]}setAt(e,t){this.data[e]=t}insertAt(e,t){this.data.splice(e,0,t)}removeAt(e){return this.data.splice(e,1)[0]}indexOf(e,t){return this.data.indexOf(e,t)}print(){}}let n,o,r,i,s,a,l,c;e.RefCollection=t,function(n){function o(t,n){if(e.pxtrt.nullCheck(t),t.isValidIndex(n))return t.removeAt(n)}function r(t,n,o){return e.pxtrt.nullCheck(t),t.indexOf(n,o)}n.mk=function(){return new t},n.isArray=function(e){return e instanceof t},n.length=function(t){return e.pxtrt.nullCheck(t),t.getLength()},n.setLength=function(t,n){e.pxtrt.nullCheck(t),t.setLength(n)},n.push=function(t,n){e.pxtrt.nullCheck(t),t.push(n)},n.pop=function(t,n){return e.pxtrt.nullCheck(t),t.pop()},n.getAt=function(t,n){return e.pxtrt.nullCheck(t),t.getAt(n)},n.removeAt=o,n.insertAt=function(t,n,o){e.pxtrt.nullCheck(t),t.insertAt(n,o)},n.setAt=function(t,n,o){e.pxtrt.nullCheck(t),t.setAt(n,o)},n.indexOf=r,n.removeElement=function(t,n){e.pxtrt.nullCheck(t);let i=r(t,n,0);return i>=0?(o(t,i),1):0}}(n=e.Array_||(e.Array_={})),function(e){e.imul=Math.imul||function(e,t){const n=65535&e,o=65535&t;return n*o+((e>>>16&65535)*o+n*(t>>>16&65535)<<16>>>0)|0},e.idiv=function(e,t){return(0|e)/(0|t)|0},e.round=function(e){return Math.round(e)},e.roundWithPrecision=function(e,t){if((t|=0)<=0)return Math.round(e);if(0==e)return 0;let n=0;for(;0==n&&t<21;){const o=Math.pow(10,t++);n=Math.round(e*o+Number.EPSILON)/o}return n},e.ceil=function(e){return Math.ceil(e)},e.floor=function(e){return Math.floor(e)},e.sqrt=function(e){return Math.sqrt(e)},e.pow=function(e,t){return Math.pow(e,t)},e.clz32=function(e){return Math.clz32(e)},e.log=function(e){return Math.log(e)},e.log10=function(e){return Math.log10(e)},e.log2=function(e){return Math.log2(e)},e.exp=function(e){return Math.exp(e)},e.sin=function(e){return Math.sin(e)},e.sinh=function(e){return Math.sinh(e)},e.cos=function(e){return Math.cos(e)},e.cosh=function(e){return Math.cosh(e)},e.tan=function(e){return Math.tan(e)},e.tanh=function(e){return Math.tanh(e)},e.asin=function(e){return Math.asin(e)},e.asinh=function(e){return Math.asinh(e)},e.acos=function(e){return Math.acos(e)},e.acosh=function(e){return Math.acosh(e)},e.atan=function(e){return Math.atan(e)},e.atanh=function(e){return Math.atanh(e)},e.atan2=function(e,t){return Math.atan2(e,t)},e.trunc=function(e){return e>0?Math.floor(e):Math.ceil(e)},e.random=function(){return Math.random()},e.randomRange=function(e,t){if(e==t)return e;if(e>t){let n=e;e=t,t=n}return Math.floor(e)==e&&Math.floor(t)==t?e+Math.floor(Math.random()*(t-e+1)):e+Math.random()*(t-e)}}(o=e.Math_||(e.Math_={})),function(t){function n(t,n){return e.pxtrt.nullFix(t)==e.pxtrt.nullFix(n)}t.lt=function(e,t){return e<t},t.le=function(e,t){return e<=t},t.neq=function(e,t){return!n(e,t)},t.eq=n,t.eqDecr=function(t,n){return e.pxtrt.nullFix(t)==e.pxtrt.nullFix(n)},t.gt=function(e,t){return e>t},t.ge=function(e,t){return e>=t},t.div=function(e,t){return 0|Math.floor(e/t)},t.mod=function(e,t){return e%t},t.bnot=function(e){return~e},t.toString=function(e){return e+""}}(r=e.Number_||(e.Number_={})),function(e){e.adds=function(e,t){return e+t|0},e.subs=function(e,t){return e-t|0},e.divs=function(e,t){return 0|Math.floor(e/t)},e.muls=function(e,t){return o.imul(e,t)},e.ands=function(e,t){return e&t},e.orrs=function(e,t){return e|t},e.eors=function(e,t){return e^t},e.lsls=function(e,t){return e<<t},e.lsrs=function(e,t){return e>>>t},e.asrs=function(e,t){return e>>t},e.bnot=function(e){return~e},e.ignore=function(e){return e}}(i=e.thumb||(e.thumb={})),function(e){function t(e){return e<<16>>16}e.adds=function(e,n){return t(e+n)},e.subs=function(e,n){return t(e-n)},e.divs=function(e,n){return t(Math.floor(e/n))},e.muls=function(e,n){return t(o.imul(e,n))},e.ands=function(e,n){return t(e&n)},e.orrs=function(e,n){return t(e|n)},e.eors=function(e,n){return t(e^n)},e.lsls=function(e,n){return t(e<<n)},e.lsrs=function(e,t){return(65535&e)>>>t},e.asrs=function(e,n){return t(e>>n)},e.bnot=function(e){return~e},e.ignore=function(e){return e}}(s=e.avr||(e.avr={})),function(t){t.stringConv=function(t){const n=e.getResume();t instanceof e.RefRecord&&t.vtable.toStringMethod?e.runtime.runFiberAsync(t.vtable.toStringMethod,t).then((()=>{n(e.runtime.currFrame.retval+"")})):n(t+"")},t.mkEmpty=function(){return""},t.fromCharCode=function(e){return String.fromCharCode(e)},t.toNumber=function(e){return parseFloat(e)},t.concat=function(e,t){return e+t},t.substring=function(t,n,o){return e.pxtrt.nullCheck(t),t.slice(n,n+o)},t.equals=function(e,t){return e==t},t.compare=function(e,t){return e==t?0:e<t?-1:1},t.compareDecr=function(e,t){return e==t?0:e<t?-1:1},t.length=function(e){return e.length},t.substr=function(e,t,n){return e.substr(t,n)},t.charAt=function(e,t){return e.charAt(t)},t.charCodeAt=function(t,n){return e.pxtrt.nullCheck(t),function(t,n){return e.pxtrt.nullCheck(t),0<=n&&n<t.length}(t,n)?t.charCodeAt(n):0},t.indexOf=function(t,n,o){return e.pxtrt.nullCheck(t),null==n?-1:t.indexOf(n,o)},t.lastIndexOf=function(t,n,o){return e.pxtrt.nullCheck(t),null==n?-1:t.lastIndexOf(n,o)},t.includes=function(t,n,o){return e.pxtrt.nullCheck(t),null!=n&&t.includes(n,o)}}(a=e.String_||(e.String_={})),function(e){e.toString=function(e){return e?"true":"false"},e.bang=function(e){return!e}}(l=e.Boolean_||(e.Boolean_={}));class u extends e.RefObject{constructor(e){super(),this.data=e,this.isStatic=!1}scan(e){}gcKey(){return"Buffer"}gcSize(){return 2+(this.data.length+3>>2)}gcIsStatic(){return this.isStatic}print(){}toDebugString(){return c.toHex(this)}}e.RefBuffer=u,function(t){let n;function o(t){let o=function(t){switch(t){case n.Int8LE:return-1;case n.UInt8LE:return 1;case n.Int16LE:return-2;case n.UInt16LE:return 2;case n.Int32LE:return-4;case n.UInt32LE:return 4;case n.Int8BE:return-10;case n.UInt8BE:return 10;case n.Int16BE:return-20;case n.UInt16BE:return 20;case n.Int32BE:return-40;case n.UInt32BE:return 40;case n.Float32LE:return 4;case n.Float32BE:return 40;case n.Float64LE:return 8;case n.Float64BE:return 80;default:throw e.U.userError("bad format")}}(t),r=!1;o<0&&(r=!0,o=-o);let i=!1;return o>=10&&(i=!0,o/=10),{size:o,signed:r,swap:i,isFloat:t>=n.Float32LE}}function r(e){return new u(new Uint8Array(e))}function i(t,n){return e.pxtrt.nullCheck(t),0<=n&&n<t.data.length}function s(e,t){return i(e,t)?e.data[t]:0}function a(t){t.isStatic&&e.U.userError("Writing to read only buffer.")}function l(e,t,n){i(e,t)&&(a(e),e.data[t]=n)}function c(e,t,n=0,o=-1){n<0||n>e.data.length||(o<0&&(o=e.data.length),o=Math.min(o,e.data.length-n),a(e),e.data.fill(t,n,n+o))}function p(e,t,n,o,r){if(n.buffer===e.buffer)p(e,t,n.slice(o,o+r),0,r);else for(let i=0;i<r;++i)e[t+i]=n[o+i]}!function(e){e[e.Int8LE=1]="Int8LE",e[e.UInt8LE=2]="UInt8LE",e[e.Int16LE=3]="Int16LE",e[e.UInt16LE=4]="UInt16LE",e[e.Int32LE=5]="Int32LE",e[e.Int8BE=6]="Int8BE",e[e.UInt8BE=7]="UInt8BE",e[e.Int16BE=8]="Int16BE",e[e.UInt16BE=9]="UInt16BE",e[e.Int32BE=10]="Int32BE",e[e.UInt32LE=11]="UInt32LE",e[e.UInt32BE=12]="UInt32BE",e[e.Float32LE=13]="Float32LE",e[e.Float64LE=14]="Float64LE",e[e.Float32BE=15]="Float32BE",e[e.Float64BE=16]="Float64BE"}(n=t.NumberFormat||(t.NumberFormat={})),t.getNumber=function(e,t,n){let r=o(t);if(r.isFloat){let t=e.data.buffer.slice(n,n+r.size);if(r.swap){new Uint8Array(t).reverse()}return 4==r.size?new Float32Array(t)[0]:new Float64Array(t)[0]}let i=0;for(let t=0;t<r.size;++t){i<<=8;let o=r.swap?n+t:n+r.size-t-1;i|=e.data[o]}if(r.signed){let e=32-8*r.size;i=i<<e>>e}else i>>>=0;return i},t.setNumber=function(e,t,n,r){let i=o(t);if(i.isFloat){let t=new Uint8Array(i.size);4==i.size?new Float32Array(t.buffer)[0]=r:new Float64Array(t.buffer)[0]=r,i.swap&&t.reverse();for(let o=0;o<i.size;++o)e.data[n+o]=t[o]}else for(let t=0;t<i.size;++t){let o=i.swap?n+i.size-t-1:n+t;e.data[o]=255&r,r>>=8}},t.createBuffer=r,t.createBufferFromHex=function(e){let t=r(e.length>>1);for(let n=0;n<e.length;n+=2)t.data[n>>1]=parseInt(e.slice(n,n+2),16);return t.isStatic=!0,t},t.isReadOnly=function(e){return e.isStatic},t.getBytes=function(e){return e.data},t.getUint8=function(e,t){return s(e,t)},t.getByte=s,t.setUint8=function(e,t,n){l(e,t,n)},t.setByte=l,t.length=function(e){return e.data.length},t.fill=c,t.slice=function(e,t,n){return t=Math.min(e.data.length,t),n<0&&(n=e.data.length),n=Math.min(n,e.data.length-t),new u(e.data.slice(t,t+n))},t.toHex=function(e){const t="0123456789abcdef";let n="";for(let o=0;o<e.data.length;++o)n+=t[e.data[o]>>4],n+=t[15&e.data[o]];return n},t.toString=function(t){return e.U.fromUTF8Array(t.data)};const d=-2147483648;t.shift=function(e,t,n,o){o<0&&(o=e.data.length-n),n<0||n+o>e.data.length||n+o<n||0==o||0==t||t==d||0!=o&&0!=t&&t!=d&&(t<=-o||t>=o?c(e,0):(a(e),t<0?(t=-t,p(e.data,n+t,e.data,n,o-t),e.data.fill(0,n,n+t)):(o-=t,p(e.data,n,e.data,n+t,o),e.data.fill(0,n+o,n+o+t))))},t.rotate=function(e,t,n,o){if(o<0&&(o=e.data.length-n),n<0||n+o>e.data.length||n+o<n||0==o||0==t||t==d)return;a(e),t<0&&(t+=o<<8),(t%=o)<0&&(t+=o);let r=e.data,i=t,s=0,l=i,c=o;for(;s!=l;){let e=r[s+n];r[s+++n]=r[l+n],r[l+++n]=e,l==c?l=i:s==i&&(i=l)}},t.write=function(e,t,n,o=0,r=-1){r<0&&(r=n.data.length),o<0||t<0||t>e.data.length||(r=Math.min(n.data.length-o,e.data.length-t))<0||(a(e),p(e.data,t,n.data,o,r))}}(c=e.BufferMethods||(e.BufferMethods={}))}(pxsim||(pxsim={})),function(e){!function(t){t.createBufferFromUTF8=function(t){return new e.RefBuffer(e.U.toUTF8Array(t))}}(e.control||(e.control={}))}(pxsim||(pxsim={})),function(e){!function(e){let t={};e.setLocalizedStrings=function(e){t=e||{}};function n(e,t){return 0==t.length?e:e.replace(/\{([0-9]+)(\:[^\}]+)?\}/g,(function(e,n,i){let s=t[parseInt(n)],a="",l=/^:f(\d*)\.(\d+)/.exec(i);if(l){let e=parseInt(l[2]),t=parseInt(l[1])||0,n=/^0/.test(l[1])?"0":" ",o=s.toFixed(e);if(t>0&&e>0&&(t+=e+1),t>0)for(;o.length<t;)o=n+o;a=o}else a=":x"==i?"0x"+s.toString(16):void 0===s?"(undef)":null===s?"(null)":s.toString?s.toString():s+"";return":a"==i?/^\s*[euioah]/.test(a.toLowerCase())?a="an "+a:/^\s*[bcdfgjklmnpqrstvwxz]/.test(a.toLowerCase())&&(a="a "+a):":s"==i?a=1==s?"":"s":":q"==i?a=o(a):":jq"==i?a=r(a):":uri"==i?a=encodeURIComponent(a).replace(/'/g,"%27").replace(/"/g,"%22"):":url"==i?a=encodeURI(a).replace(/'/g,"%27").replace(/"/g,"%22"):":%"==i&&(a=(100*s).toFixed(1).toString()+"%"),a}))}function o(e){return e?e.replace(/([^\w .!?\-$])/g,(e=>"&#"+e.charCodeAt(0)+";")):e}function r(e){return e.replace(/[^\w .!?\-$]/g,(e=>{let t=e.charCodeAt(0).toString(16);return"\\u"+"0000".substr(0,4-t.length)+t}))}e.lf=function(e,...o){let r=t[e]||e;return r=r.replace(/^\{(id|loc):[^\}]+\}/g,""),n(r,o)},e.fmt_va=n,e.htmlEscape=o,e.jsStringQuote=r}(e.localization||(e.localization={}))}(pxsim||(pxsim={})),function(pxsim){const MIN_MESSAGE_WAIT_MS=200;let tracePauseMs=0,U,pxtcore;!function(e){function t(e){return e.split(/\s+/).filter((e=>!!e))}function n(e){for(;e.firstChild;)e.removeChild(e.firstChild)}let o;e.containsClass=function(e,n){return t(n).every((t=>function(e,t){if(e.classList)return e.classList.contains(t);return!((e.className+"").split(/\s+/).indexOf(t)<0)}(e,t)))},e.addClass=function(e,n){t(n).forEach((t=>function(e,t){if(e.classList)e.classList.add(t);else{(e.className+"").split(/\s+/).indexOf(t)<0&&(e.className.baseVal+=" "+t)}}(e,t)))},e.removeClass=function(e,n){t(n).forEach((t=>function(e,t){e.classList?e.classList.remove(t):e.className.baseVal=(e.className+"").split(/\s+/).filter((e=>e!=t)).join(" ")}(e,t)))},e.remove=function(e){e.parentElement.removeChild(e)},e.removeChildren=n,e.clear=function(e){n(e)},e.assert=function(e,t="Assertion failed"){if(!e)throw new Error(t)},e.repeatMap=function(e,t){e=e||0;let n=[];for(let o=0;o<e;++o)n.push(t(o));return n},e.userError=function(e){let t=new Error(e);throw t.isUserError=!0,t},e.now=function(){return Date.now()},e.perfNowUs=function(){return o||(o="undefined"!=typeof performance?performance.now.bind(performance)||performance.moznow.bind(performance)||performance.msNow.bind(performance)||performance.webkitNow.bind(performance)||performance.oNow.bind(performance):Date.now),1e3*o()};const r=Promise.resolve();async function i(e,t,n){let o=0;const r=[],i=[];for(let s=0;s<e;s++){const e=(async()=>{for(;o<t.length;){const e=o++,r=t[e];i[e]=await n(r)}})();r.push(e)}try{await Promise.all(r)}catch(e){throw o=t.length,e}return i}function s(){return"undefined"!=typeof window&&!!window.pxtElectron}function a(){return"undefined"!=typeof window&&!!window.ipcRenderer}function l(){return s()||a()}function c(){try{return"undefined"!=typeof window&&/^http:\/\/(localhost|127\.0\.0\.1):\d+\//.test(window.location.href)&&!/nolocalhost=1/.test(window.location.href)}catch(e){return!1}}e.nextTick=function(e){r.then(e)},e.delay=async function(e,t){const n=await t;return await new Promise((t=>setTimeout((()=>t()),e))),n},e.promiseMapAll=function(e,t){return Promise.all(e.map((e=>t(e))))},e.promiseMapAllSeries=function(e,t){return i(1,e,t)},e.promisePoolAsync=i,e.promiseTimeout=async function(e,t,n){let o,r;const i=new Promise(((t,i)=>{r=t,o=setTimeout((()=>{r=void 0,clearTimeout(o),i(n||`Promise timed out after ${e}ms`)}),e)}));return Promise.race([t,i]).then((e=>(r&&(clearTimeout(o),r()),e)))},e.stringToUint8Array=function(e){let t=e.length,n=new Uint8Array(t);for(let o=0;o<t;++o)n[o]=255&e.charCodeAt(o);return n},e.uint8ArrayToString=function(e){let t=e.length,n="";for(let o=0;o<t;++o)n+=String.fromCharCode(e[o]);return n},e.fromUTF8=function(e){if(!e)return"";let t="";for(let n=0;n<e.length;++n){let o=255&e.charCodeAt(n);t+=37==o||o>127?"%"+o.toString(16):e.charAt(n)}return decodeURIComponent(t)},e.toUTF8=function(e,t){let n="";if(!e)return n;for(let o=0;o<e.length;++o){let r=e.charCodeAt(o);if(r<=127)n+=e.charAt(o);else if(r<=2047)n+=String.fromCharCode(192|r>>6,128|63&r);else{if(!t&&55296<=r&&r<=56319){let t=e.charCodeAt(++o);isNaN(t)||(r=65536+(r-55296<<10)+(t-56320))}n+=r<=65535?String.fromCharCode(224|r>>12,128|r>>6&63,128|63&r):String.fromCharCode(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}}return n},e.toUTF8Array=function(e){return(new TextEncoder).encode(e)},e.fromUTF8Array=function(e){return(new TextDecoder).decode(e)},e.isPxtElectron=s,e.isIpcRenderer=a,e.isElectron=l,e.isLocalHost=c,e.isLocalHostDev=function(){return c()&&!l()},e.unique=function(e,t){let n=[],o={};return e.forEach((e=>{let r=t(e);o.hasOwnProperty(r)||(o[r]=null,n.push(e))})),n}}(U=pxsim.U||(pxsim.U={}));class BreakLoopException{}function getResume(){return pxsim.runtime.getResume()}pxsim.BreakLoopException=BreakLoopException,function(e){function t(e){let t=pxsim.runtime.currTryFrame();t||U.userError("unhandled exception: "+e);const n=t.handlerFrame;throw pxsim.runtime.currFrame=n,n.pc=t.handlerPC,n.tryFrame=t.parent,n.thrownValue=e,n.hasThrownValue=!0,new BreakLoopException}e.beginTry=function(e){pxsim.runtime.currFrame.tryFrame={parent:pxsim.runtime.currTryFrame(),handlerPC:e,handlerFrame:pxsim.runtime.currFrame}},e.endTry=function(){const e=pxsim.runtime.currFrame;e.tryFrame=e.tryFrame.parent},e.throwValue=t,e.getThrownValue=function(){const e=pxsim.runtime.currFrame;return U.assert(e.hasThrownValue),e.hasThrownValue=!1,e.thrownValue},e.endFinally=function(){const e=pxsim.runtime.currFrame;e.hasThrownValue&&(e.hasThrownValue=!1,t(e.thrownValue))}}(pxtcore=pxsim.pxtcore||(pxsim.pxtcore={})),pxsim.getResume=getResume;const SERIAL_BUFFER_LENGTH=16;class BaseBoard{constructor(){this.messageListeners=[],this.serialOutBuffer="",this.messages=[],this.lastSerialTime=0,this.debouncedPostAll=()=>{const e=Date.now();e-this.lastSerialTime>MIN_MESSAGE_WAIT_MS?(clearTimeout(this.serialTimeout),this.messages.length&&(Runtime.postMessage({type:"bulkserial",data:this.messages,id:pxsim.runtime.id,sim:!0}),this.messages=[],this.lastSerialTime=e)):this.serialTimeout=setTimeout(this.debouncedPostAll,50)},this.id=pxsim.Embed.frameid||"b"+Math.round(2147483647*Math.random()),this.bus=new pxsim.EventBus(pxsim.runtime,this)}updateView(){}receiveMessage(e){pxsim.runtime&&!pxsim.runtime.dead&&this.dispatchMessage(e)}dispatchMessage(e){for(const t of this.messageListeners)t(e)}addMessageListener(e){this.messageListeners.push(e)}get storedState(){return this.runOptions?(this.runOptions.storedState||(this.runOptions.storedState={}),this.runOptions.storedState):{}}initAsync(e){return this.runOptions=e,Promise.resolve()}setStoredState(e,t){null==t?delete this.storedState[e]:this.storedState[e]=t,Runtime.postMessage({type:"simulator",command:"setstate",stateKey:e,stateValue:t})}onDebuggerResume(){}screenshotAsync(e){return Promise.resolve(void 0)}kill(){}writeSerial(e){this.serialOutBuffer+=e,(/\n/.test(this.serialOutBuffer)||this.serialOutBuffer.length>SERIAL_BUFFER_LENGTH)&&(this.messages.push({time:Date.now(),data:this.serialOutBuffer}),this.debouncedPostAll(),this.serialOutBuffer="")}}pxsim.BaseBoard=BaseBoard;class CoreBoard extends BaseBoard{constructor(){super(),this.updateSubscribers=[],this.updateView=()=>{this.updateSubscribers.forEach((e=>e()))},this.builtinParts={},this.builtinVisuals={},this.builtinPartVisuals={}}kill(){super.kill(),pxsim.AudioContextManager.stopAll()}}pxsim.CoreBoard=CoreBoard;class BareBoard extends BaseBoard{}function initBareRuntime(){pxsim.runtime.board=new BareBoard;let e=pxsim;e.basic={pause:pxsim.thread.pause,showNumber:e=>{let t=getResume();console.log("SHOW NUMBER:",e),U.nextTick(t)}},e.serial={writeString:e=>pxsim.runtime.board.writeSerial(e)},e.pins={createBuffer:pxsim.BufferMethods.createBuffer},e.control={inBackground:pxsim.thread.runInBackground,createBuffer:pxsim.BufferMethods.createBuffer,dmesg:e=>console.log("DMESG: "+e),deviceDalVersion:()=>"sim",__log:(e,t)=>console.log("LOG: "+t.trim())}}let LogType;pxsim.initBareRuntime=initBareRuntime,function(e){e[e.UserSet=0]="UserSet",e[e.BackAdd=1]="BackAdd",e[e.BackRemove=2]="BackRemove"}(LogType||(LogType={}));class EventQueue{constructor(e,t){this.runtime=e,this.valueToArgs=t,this.max=5,this.events=[],this.awaiters=[],this._handlers=[],this._addRemoveLog=[]}push(e,t){if(this.awaiters.length>0)if(t){const e=this.awaiters.shift();e&&e()}else{const e=this.awaiters.slice();this.awaiters=[],e.forEach((e=>e()))}return 0==this.handlers.length||this.events.length>this.max?Promise.resolve():(this.events.push(e),this.lock?Promise.resolve():this.poke())}poke(){this.lock=!0;let e=this.events;return this.events=[],U.promiseMapAllSeries(e,(e=>U.promiseMapAllSeries(this.handlers,(t=>this.runtime.runFiberAsync(t,...this.valueToArgs?this.valueToArgs(e):[e]))))).then((()=>this.events.length>0?this.poke():(this.lock=!1,this._addRemoveLog.forEach((e=>{e.log===LogType.BackAdd?this.addHandler(e.act):e.log===LogType.BackRemove?this.removeHandler(e.act):this.setHandler(e.act)})),this._addRemoveLog=[],Promise.resolve())))}get handlers(){return this._handlers}setHandler(e){this.lock?this._addRemoveLog.push({act:e,log:LogType.UserSet}):this._handlers=[e]}addHandler(e){if(this.lock)this._addRemoveLog.push({act:e,log:LogType.BackAdd});else{-1==this._handlers.indexOf(e)&&this._handlers.push(e)}}removeHandler(e){if(this.lock)this._addRemoveLog.push({act:e,log:LogType.BackRemove});else{let t=this._handlers.indexOf(e);-1!=t&&this._handlers.splice(t,1)}}addAwaiter(e){this.awaiters.push(e)}}function bind(e){const t=e.arg0,n=e.fn;return e=>{let o=0;for(;e.hasOwnProperty("arg"+o);)o++;const r=e;for(let e=o;e>0;e--)r["arg"+e]=r["arg"+(e-1)];return e.arg0=t,n(e)}}function _leave(e,t){return e.parent.retval=t,e.parent}function syntheticRefAction(e){return pxtcore.mkAction(0,(t=>_leave(t,e(t))))}pxsim.EventQueue=EventQueue,pxsim.initCurrentRuntime=void 0,pxsim.handleCustomMessage=void 0,pxsim.syntheticRefAction=syntheticRefAction;class TimeoutScheduled{constructor(e,t,n,o){this.id=e,this.fn=t,this.totalRuntime=n,this.timestampCall=o}}pxsim.TimeoutScheduled=TimeoutScheduled;class PausedTimeout{constructor(e,t){this.fn=e,this.timeRemaining=t}}function mkVTable(e){return{name:e.name,numFields:e.numFields,classNo:e.classNo,methods:e.methods,iface:e.iface,lastSubtypeNo:e.lastSubtypeNo,toStringMethod:e.toStringMethod,maxBgInstances:e.maxBgInstances}}pxsim.PausedTimeout=PausedTimeout,pxsim.mkVTable=mkVTable;let mapVTable=null;function mkMapVTable(){return mapVTable||(mapVTable=mkVTable({name:"_Map",numFields:0,classNo:0,lastSubtypeNo:0,methods:null})),mapVTable}function functionName(e){const t=e.info;return t?`${t.functionName} (${t.fileName}:${t.line+1}:${t.column+1})`:"()"}pxsim.mkMapVTable=mkMapVTable,pxsim.functionName=functionName;class Runtime{constructor(msg){this.numGlobals=1e3,this.dead=!1,this.running=!1,this.idleTimer=void 0,this.recording=!1,this.recordingTimer=0,this.recordingLastImageData=void 0,this.recordingWidth=void 0,this.startTime=0,this.startTimeUs=0,this.pausedTime=0,this.lastPauseTimestamp=0,this.globals={},this.environmentGlobals={},this.otherFrames=[],this.loopLock=null,this.loopLockWaitList=[],this.heapSnapshots=[],this.timeoutsScheduled=[],this.timeoutsPausedOnBreakpoint=[],this.pausedOnBreakpoint=!1,this.traceDisabled=!1,this.perfOffset=0,this.perfElapsed=0,this.perfStack=0,this.refCountingDebug=!1,this.refObjId=1,this.numDisplayUpdates=0,U.assert(!!pxsim.initCurrentRuntime),this.id=msg.id,this.refCountingDebug=!!msg.refCountingDebug;let threadId=0,breakpoints=null,currResume,dbgHeap,dbgResume,breakFrame=null,lastYield=Date.now(),userGlobals,__this=this;this.traceDisabled=!!msg.traceDisabled;const evalIface={runtime:this,oops:oops,doNothing:doNothing,pxsim:pxsim,globals:this.globals,setupYield:setupYield,maybeYield:maybeYield,setupDebugger:setupDebugger,isBreakFrame:isBreakFrame,breakpoint:breakpoint,trace:trace,checkStack:checkStack,leave:_leave,checkResumeConsumed:checkResumeConsumed,setupResume:setupResume,setupLambda:setupLambda,checkSubtype:checkSubtype,failedCast:failedCast,buildResume:buildResume,mkVTable:mkVTable,bind:bind,leaveAccessor:leaveAccessor};function oops(e){throw new Error("sim error: "+e)}function doNothing(e){return e.pc=-1,_leave(e,e.parent.retval)}function flushLoopLock(){for(;__this.loopLockWaitList.length>0&&!__this.loopLock;){__this.loopLockWaitList.shift()()}}let yieldReset=()=>{};function setupYield(e){yieldReset=e}function loopForSchedule(e){const t=new Object,n=e.pc;return __this.loopLock=t,__this.otherFrames.push(e),()=>{__this.dead||(U.assert(e.pc==n),U.assert(__this.loopLock===t),__this.loopLock=null,loop(e),flushLoopLock())}}function maybeYield(e,t,n){if(__this.pausedOnBreakpoint)return!1;__this.cleanScheduledExpired(),yieldReset();let o=Date.now();return o-lastYield>=20&&(lastYield=o,e.pc=t,e.r0=n,setTimeout(loopForSchedule(e),5),!0)}function setupDebugger(e,t){return breakpoints=new Uint8Array(e),breakpoints[0]=msg.breakOnStart?1:0,userGlobals=t,breakpoints}function isBreakFrame(e){if(!breakFrame)return!0;for(let t=breakFrame;t;t=t.parent)if(t==e)return!0;return!1}function breakpoint(e,t,n,o){let r={};__this.loopLock=r,U.assert(!dbgResume),U.assert(!dbgHeap),e.pc=t,e.r0=o;const{msg:i,heap:s}=pxsim.getBreakpointMsg(e,n,userGlobals);return dbgHeap=s,pxsim.injectEnvironmentGlobals(i,s),Runtime.postMessage(i),breakpoints[0]=0,breakFrame=null,__this.pauseScheduled(),dbgResume=n=>{if(dbgResume=null,dbgHeap=null,__this.dead)return null;switch(__this.resumeAllPausedScheduled(),__this.board.onDebuggerResume(),pxsim.runtime=__this,U.assert(e.pc==t),breakpoints[0]=0,breakFrame=null,n.subtype){case"resume":break;case"stepover":breakpoints[0]=1,breakFrame=e;break;case"stepinto":breakpoints[0]=1;break;case"stepout":breakpoints[0]=1,breakFrame=e.parent||e}U.assert(__this.loopLock==r),__this.loopLock=null,__this.otherFrames.push(e),loop(e),flushLoopLock()},null}function trace(e,t,n,o){if(setupResume(t,n),"<main>"===o.functionName||"main.ts"===o.fileName){if(!pxsim.runtime.traceDisabled){const{msg:n}=pxsim.getBreakpointMsg(t,e,userGlobals);n.subtype="trace",Runtime.postMessage(n)}pxsim.thread.pause(tracePauseMs||1)}else pxsim.thread.pause(0);checkResumeConsumed()}function handleDebuggerMsg(e){switch(e.subtype){case"config":let t=e;if(t.setBreakpoints&&breakpoints){breakpoints.fill(0);for(let e of t.setBreakpoints)breakpoints[e]=1}break;case"traceConfig":tracePauseMs=e.interval;break;case"pause":breakpoints[0]=1,breakFrame=null;break;case"resume":case"stepover":case"stepinto":case"stepout":dbgResume&&dbgResume(e);break;case"variables":const n=e;let o;if(dbgHeap){const e=dbgHeap[n.variablesReference];void 0!==e&&(o=pxsim.dumpHeap(e,dbgHeap,n.fields))}Runtime.postMessage({type:"debugger",subtype:"variables",req_seq:e.seq,variables:o})}}function removeFrame(e){const t=__this.otherFrames;for(let n=t.length-1;n>=0;--n)if(t[n]===e)return void t.splice(n,1);U.userError("frame cannot be removed!")}function loop(e){if(__this.dead)console.log("Runtime terminated");else{U.assert(!__this.loopLock),__this.perfStartRuntime(),removeFrame(e);try{for(pxsim.runtime=__this;e;)__this.currFrame=e,__this.currFrame.overwrittenPC=!1,e=e.fn(e),__this.maybeUpdateDisplay(),__this.currFrame.overwrittenPC&&(e=__this.currFrame);__this.perfStopRuntime()}catch(t){if(t instanceof BreakLoopException)return void U.nextTick(loopForSchedule(__this.currFrame));if(__this.perfStopRuntime(),__this.errorHandler)__this.errorHandler(t);else{console.error("Simulator crashed, no error handler",t.stack);const{msg:n,heap:o}=pxsim.getBreakpointMsg(e,e.lastBrkId,userGlobals);pxsim.injectEnvironmentGlobals(n,o),n.exceptionMessage=t.message,n.exceptionStack=t.stack,Runtime.postMessage(n),__this.postError&&__this.postError(t)}}}}function checkStack(e){e>100&&U.userError("Stack overflow")}function actionCall(e){return e.depth=e.parent.depth+1,checkStack(e.depth),e.pc=0,e}function setupTop(e){let t=setupTopCore(e);return setupResume(t,0),t}function setupTopCore(e){let t={parent:null,pc:0,depth:0,threadId:++threadId,fn:()=>(e&&e(t.retval),null)};return t}function topCall(e,t){U.assert(!!__this.board),U.assert(!__this.running),__this.setRunning(!0);let n={parent:setupTopCore(t),fn:e,depth:0,pc:0};__this.otherFrames=[n],loop(actionCall(n))}function checkResumeConsumed(){currResume&&oops("getResume() not called")}function setupResume(e,t){currResume=buildResume(e,t)}function leaveAccessor(e,t){if(e.stage2Call){const n={pc:0,fn:null,depth:e.depth,parent:e.parent};let o=1;for(;e.hasOwnProperty("arg"+o);)n["arg"+(o-1)]=e["arg"+o],o++;return setupLambda(n,t),n}return e.parent.retval=t,e.parent}function setupLambda(e,t,n){if(n){const t=e;for(let e=1;e<n;++e)t["arg"+(e-1)]=t["arg"+e];delete t["arg"+(n-1)]}t instanceof pxsim.RefAction?(e.fn=t.func,e.caps=t.fields):"function"==typeof t?e.fn=t:oops("calling non-function")}function checkSubtype(e,t){if(!e)return!1;const n=e.vtable;return t===n||n&&t.classNo<=n.classNo&&n.classNo<=t.lastSubtypeNo}function failedCast(e){pxsim.control&&pxsim.control.dmesgValue&&pxsim.control.dmesgValue(e),oops("failed cast on "+e)}function buildResume(e,t){currResume&&oops("already has resume"),e.pc=t;let n=Date.now();__this.otherFrames.push(e);let o=r=>{if(__this.dead)return;if(__this.loopLock)return void __this.loopLockWaitList.push((()=>o(r)));pxsim.runtime=__this;let i=Date.now();if(i-n>3&&(lastYield=i),U.assert(e.pc==t),r instanceof pxsim.FnWrapper){let t=r,n={parent:e,fn:t.func,lambdaArgs:t.args,pc:0,caps:t.caps,depth:e.depth+1},o={};return __this.loopLock=o,removeFrame(e),__this.otherFrames.push(n),U.nextTick((()=>{U.assert(__this.loopLock===o),__this.loopLock=null,loop(actionCall(n)),flushLoopLock()}))}return e.retval=r,loop(e)};return o}const entryPoint=msg.code&&eval(msg.code)(evalIface);this.run=e=>topCall(entryPoint,e),this.getResume=()=>{currResume||oops("noresume");let e=currResume;return currResume=null,e},this.setupTop=setupTop,this.handleDebuggerMsg=handleDebuggerMsg,this.entry=entryPoint,this.overwriteResume=e=>{currResume=null,e>=0&&(this.currFrame.pc=e),this.currFrame.overwrittenPC=!0},pxsim.runtime=this,pxsim.initCurrentRuntime(msg)}registerLiveObject(e){return this.refObjId++}runningTime(){return U.now()-this.startTime-this.pausedTime}runningTimeUs(){return 4294967295&U.perfNowUs()-this.startTimeUs>>0}runFiberAsync(e,t,n,o){return new Promise(((r,i)=>U.nextTick((()=>{pxsim.runtime=this,this.setupTop(r),pxtcore.runAction(e,[t,n,o])}))))}currTryFrame(){for(let e=this.currFrame;e;e=e.parent)if(e.tryFrame)return e.tryFrame;return null}traceObjects(){const e={};for(;this.heapSnapshots.length>2;)this.heapSnapshots.shift();const t={count:0,size:0,name:"TOTAL"},n={TOTAL:t};function o(t,n,r=null){if(!(n instanceof pxsim.RefObject))return;const i=n;if(i.gcIsStatic())return;const s=e[i.id];if(s)return void(r&&s.pointers.push([r,t]));const a={obj:i,path:null,pointers:[[r,t]]};e[i.id]=a,i.scan(((t,n)=>{n instanceof pxsim.RefObject&&!e[n.id]&&o(t,n,a)}))}this.heapSnapshots.push({visited:e,statsByType:n});for(let e of Object.keys(this.globals))o(e.replace(/___\d+$/,""),this.globals[e]);const r=this.otherFrames.slice();this.currFrame&&r.indexOf(this.currFrame)<0&&r.unshift(this.currFrame);for(const e of this.getThreads()){const t="Thread-"+this.rootFrame(e).threadId;for(let n=e;n;n=n.parent){const e=t+"."+functionName(n.fn);for(let t of Object.keys(n))if(/^(r0|arg\d+|.*___\d+)/.test(t)){const r=n[t];r instanceof pxsim.RefObject&&(t=t.replace(/___.*/,""),o(e+"."+t,r))}if(n.caps)for(let t of n.caps)o(e+".cap",t)}}const i=Object.keys(e).map((t=>e[t]));i.sort(((e,t)=>t.obj.gcSize()-e.obj.gcSize()));const s=e=>{if(null!=e.path)return;let t="";e.path="(cycle)";for(let[n,o]of e.pointers){if(null==n)return void(e.path=o);s(n);const r=n.path+"."+o;(!t||t.length>r.length)&&(t=r)}e.path=t};i.forEach(s);const a=[t];for(const e of i){const o=e.obj.gcSize(),r=e.obj.gcKey();n.hasOwnProperty(r)||a.push(n[r]={count:0,size:0,name:r});const i=n[r];i.size+=o,i.count++,t.size+=o,t.count++}a.sort(((e,t)=>e.size-t.size));let l="";const c=e=>("        "+e.toString()).slice(-7);for(const e of a)l+=c(4*e.size)+c(e.count)+" "+e.name+"\n";const u=e=>c(4*e.obj.gcSize())+" "+e.obj.gcKey()+" "+e.path,p=i.slice(0,20).map(u).join("\n");let d="";if(this.heapSnapshots.length>=3){const e=this.heapSnapshots[this.heapSnapshots.length-3].visited,t=this.heapSnapshots[this.heapSnapshots.length-2].visited,o=e=>e instanceof pxsim.RefRecord&&!!(e.vtable&&e.vtable.maxBgInstances&&n[e.gcKey()].count<=e.vtable.maxBgInstances);d=i.filter((n=>!e[n.obj.id]&&t[n.obj.id])).filter((e=>!o(e.obj))).map(u).join("\n")}return"Threads:\n"+this.threadInfo()+"\n\nSummary:\n"+l+"\n\nLarge Objects:\n"+p+"\n\nNew Objects:\n"+d}getThreads(){const e=this.otherFrames.slice();return this.currFrame&&e.indexOf(this.currFrame)<0&&e.unshift(this.currFrame),e}rootFrame(e){let t=e;for(;t.parent;)t=t.parent;return t}threadInfo(){const e=this.getThreads();let t="";for(let n of e){t+=`Thread ${this.rootFrame(n).threadId}:\n`;for(let e of pxsim.getBreakpointMsg(n,n.lastBrkId).msg.stackframes){let n=e.funcInfo;t+=`   at ${n.functionName} (${n.fileName}:${n.line+1}:${n.column+1})\n`}t+="\n"}return t}static postMessage(e){e&&("undefined"!=typeof window&&window.parent&&window.parent.postMessage&&window.parent.postMessage(e,"*"),Runtime.messagePosted&&Runtime.messagePosted(e))}static postScreenshotAsync(e){const t=pxsim.runtime&&pxsim.runtime.board;return(t?t.screenshotAsync().catch((e=>{console.debug("screenshot failed")})):Promise.resolve(void 0)).then((t=>Runtime.postMessage({type:"screenshot",data:t,delay:e&&e.delay})))}static requestToggleRecording(){const e=pxsim.runtime;e&&Runtime.postMessage({type:"recorder",action:e.recording?"stop":"start"})}restart(){this.kill(),setTimeout((()=>pxsim.Runtime.postMessage({type:"simulator",command:"restart"})),500)}kill(){this.dead=!0,this.stopRecording(),this.stopIdle(),this.setRunning(!1)}updateDisplay(){this.board.updateView(),this.postFrame()}startRecording(e){!this.recording&&this.running&&(this.recording=!0,this.recordingTimer=setInterval((()=>this.postFrame()),66),this.recordingLastImageData=void 0,this.recordingWidth=e)}stopRecording(){this.recording&&(this.recordingTimer&&clearInterval(this.recordingTimer),this.recording=!1,this.recordingTimer=0,this.recordingLastImageData=void 0,this.recordingWidth=void 0)}postFrame(){if(!this.recording||!this.running)return;let e=pxsim.U.now();this.board.screenshotAsync(this.recordingWidth).then((t=>{if(this.recordingLastImageData&&t&&this.recordingLastImageData.data.byteLength==t.data.byteLength){const e=this.recordingLastImageData.data,n=t.data,o=e.byteLength;let r=0;for(r=0;r<o&&e[r]==n[r];++r);if(r==o)return}this.recordingLastImageData=t,Runtime.postMessage({type:"screenshot",data:t,time:e})}))}queueDisplayUpdate(){this.numDisplayUpdates++}maybeUpdateDisplay(){this.numDisplayUpdates&&(this.numDisplayUpdates=0,this.updateDisplay())}setRunning(e){this.running!=e&&(this.running=e,this.running?(this.startTime=U.now(),this.startTimeUs=U.perfNowUs(),Runtime.postMessage({type:"status",frameid:pxsim.Embed.frameid,runtimeid:this.id,state:"running"})):(this.stopRecording(),this.stopIdle(),Runtime.postMessage({type:"status",frameid:pxsim.Embed.frameid,runtimeid:this.id,state:"killed"})),this.stateChanged&&this.stateChanged())}dumpLivePointers(){}setupPerfCounters(e){e&&e.length&&(this.perfCounters=e.map((e=>new PerfCounter(e))))}perfStartRuntime(){0!==this.perfOffset?this.perfStack++:this.perfOffset=U.perfNowUs()-this.perfElapsed}perfStopRuntime(){this.perfStack?this.perfStack--:(this.perfElapsed=this.perfNow(),this.perfOffset=0)}perfNow(){return 0===this.perfOffset&&U.userError("bad time now"),U.perfNowUs()-this.perfOffset|0}startPerfCounter(e){if(!this.perfCounters)return;const t=this.perfCounters[e];t.start&&U.userError("startPerf"),t.start=this.perfNow()}stopPerfCounter(e){if(!this.perfCounters)return;const t=this.perfCounters[e];t.start||U.userError("stopPerf");const n=this.perfNow()-t.start;t.start=0,t.value+=n,t.numstops++;let o=t.lastFewPtr++;o>=t.lastFew.length&&(o=0,t.lastFewPtr=1),t.lastFew[o]=n}startIdle(){void 0===this.idleTimer&&(this.idleTimer=setInterval((()=>{if(!this.running||this.pausedOnBreakpoint)return;const e=this.board.bus;e&&e.queueIdle()}),20))}stopIdle(){void 0!==this.idleTimer&&(clearInterval(this.idleTimer),this.idleTimer=void 0)}schedule(e,t){if(t<=0&&(t=0),this.pausedOnBreakpoint)return this.timeoutsPausedOnBreakpoint.push(new PausedTimeout(e,t)),-1;const n=U.now(),o=new TimeoutScheduled(-1,e,t,n);return o.id=setTimeout((()=>{const t=this.timeoutsScheduled.indexOf(o);t>=0&&this.timeoutsScheduled.splice(t,1),e()}),t),this.timeoutsScheduled.push(o),o.id}pauseScheduled(){this.pausedOnBreakpoint=!0,this.timeoutsScheduled.forEach((e=>{clearTimeout(e.id);let t=U.now()-e.timestampCall,n=e.totalRuntime-t;n<=0&&(n=1),this.timeoutsPausedOnBreakpoint.push(new PausedTimeout(e.fn,n))})),this.lastPauseTimestamp=U.now(),this.timeoutsScheduled=[]}resumeAllPausedScheduled(){this.pausedOnBreakpoint=!1,this.timeoutsPausedOnBreakpoint.forEach((e=>{this.schedule(e.fn,e.timeRemaining)})),this.lastPauseTimestamp&&(this.pausedTime+=U.now()-this.lastPauseTimestamp,this.lastPauseTimestamp=0),this.timeoutsPausedOnBreakpoint=[]}cleanScheduledExpired(){let e=U.now();this.timeoutsScheduled=this.timeoutsScheduled.filter((t=>{let n=e-t.timestampCall;return t.totalRuntime>n}))}}pxsim.Runtime=Runtime;class PerfCounter{constructor(e){this.name=e,this.start=0,this.numstops=0,this.value=0,this.lastFew=new Uint32Array(32),this.lastFewPtr=0}}pxsim.PerfCounter=PerfCounter}(pxsim||(pxsim={})),function(e){let t,n;!function(e){e[e.Unloaded=0]="Unloaded",e[e.Stopped=1]="Stopped",e[e.Pending=2]="Pending",e[e.Starting=3]="Starting",e[e.Running=4]="Running",e[e.Paused=5]="Paused",e[e.Suspended=6]="Suspended"}(t=e.SimulatorState||(e.SimulatorState={})),function(e){e[e.StepInto=0]="StepInto",e[e.StepOver=1]="StepOver",e[e.StepOut=2]="StepOut",e[e.Resume=3]="Resume",e[e.Pause=4]="Pause"}(n=e.SimulatorDebuggerCommand||(e.SimulatorDebuggerCommand={}));const o="pxtdriver";e.SimulatorDriver=class{constructor(n,o={}){this.container=n,this.options=o,this.themes=["blue","red","green","yellow"],this.runId="",this.nextFrameId=0,this.frameCounter=0,this.traceInterval=0,this.breakpointsSet=!1,this._runOptions={},this.state=t.Unloaded,this._allowedOrigins=[],this.frameCleanupTimeout=void 0,this.debuggerSeq=1,this.debuggerResolvers={},this._allowedOrigins.push(window.location.origin),o.parentOrigin&&this._allowedOrigins.push(o.parentOrigin),this._allowedOrigins.push(this.getSimUrl().origin);const r=null==o?void 0:o.messageSimulators;r&&Object.keys(r).map((e=>r[e])).forEach((e=>{this._allowedOrigins.push(new URL(e.url).origin),e.localHostUrl&&this._allowedOrigins.push(new URL(e.localHostUrl).origin)})),this._allowedOrigins=e.U.unique(this._allowedOrigins,(e=>e))}isDebug(){return this._runOptions&&!!this._runOptions.debug}isTracing(){return this._runOptions&&!!this._runOptions.trace}hasParts(){return this._runOptions&&this._runOptions.parts&&!!this._runOptions.parts.length}setDirty(){this.state==e.SimulatorState.Running&&this.suspend()}setPending(){this.setState(t.Pending)}focus(){const e=this.simFrames()[0];e&&e.focus()}registerDependentEditor(e){e&&(this._dependentEditors||(this._dependentEditors=[]),this._dependentEditors.push(e))}dependentEditors(){return this._dependentEditors&&(this._dependentEditors=this._dependentEditors.filter((e=>!!e.parent)),this._dependentEditors.length||(this._dependentEditors=void 0)),this._dependentEditors}setStarting(){this.setState(t.Starting)}setHwDebugger(e){e?(this.hwdbg=e,this.setState(t.Running),this.container.style.opacity="0.3"):(delete this.container.style.opacity,this.hwdbg=null,this.setState(t.Running),this.stop())}handleHwDebuggerMsg(e){this.hwdbg&&this.handleMessage(e)}setThemes(t){e.U.assert(t&&t.length>0),this.themes=t}startRecording(e){this.simFrames()[0]&&this.postMessage({type:"recorder",action:"start",source:o,width:e})}stopRecording(){this.postMessage({type:"recorder",source:o,action:"stop"})}setFrameState(n){const o=n.nextElementSibling,r=o.nextElementSibling;switch(this.state){case t.Pending:case t.Starting:o.style.display="",o.className="",r.style.display="";break;case t.Stopped:case t.Suspended:e.U.addClass(n,this.state==t.Stopped||this._runOptions&&this._runOptions.autoRun?this.stoppedClass:this.invalidatedClass),this._runOptions&&this._runOptions.autoRun?o.style.display="none":(o.style.display="",o.className="videoplay xicon icon"),r.style.display="none",this.scheduleFrameCleanup();break;default:e.U.removeClass(n,this.stoppedClass),e.U.removeClass(n,this.invalidatedClass),o.style.display="none",r.style.display="none"}}setState(e){this.state!=e&&(this.state=e,this.freeze(this.state==t.Paused),this.simFrames().forEach((e=>this.setFrameState(e))),this.options.onStateChanged&&this.options.onStateChanged(this.state))}freeze(t){const n="pause-overlay";t?e.util.toArray(this.container.querySelectorAll("div.simframe")).forEach((e=>{if(e.querySelector(`div.${n}`))return;const t=document.createElement("div");t.className=n,t.onclick=e=>(e.preventDefault(),!1),e.appendChild(t)})):e.util.toArray(this.container.querySelectorAll(`div.simframe div.${n}`)).forEach((e=>e.parentElement.removeChild(e)))}simFrames(t=!1){let n=e.util.toArray(this.container.getElementsByTagName("iframe"));const o=this.loanedIFrame();return o&&!t&&n.unshift(o),n}getSimUrl(){const e=this.options.simUrl||(window.pxtConfig||{}).simUrl||`${location.origin}/sim/simulator.html`;try{return new URL(e)}catch(t){return new URL(e,location.origin)}}postMessage(t,n,o){var r;if(this.hwdbg)return void this.hwdbg.postMessage(t);const i=this.dependentEditors();let s=this.simFrames();o&&(s=s.filter((e=>e.id===o)));const a=t;if(n&&(null==a?void 0:a.broadcast)){const o=!!(null===(r=this._currentRuntime)||void 0===r?void 0:r.single),a=window.parent&&window.parent!==window.window?window.parent:window.opener;if(this.options.nestedEditorSim&&a){if(n!==a){const e=this.options.parentOrigin||window.location.origin;a.postMessage(t,e)}}else if(i)i.forEach((e=>{n!==e&&e.postMessage(t,window.location.origin)}));else if(!o){const n="messagepacket"===t.type&&t.channel,o=n&&this.options.messageSimulators&&this.options.messageSimulators[n];if(o){let t=s.find((e=>e.dataset.messagechannel===n));if(t)t.dataset.runid!=this.runId&&this.startFrame(t);else{const r=(e.U.isLocalHost()&&/localhostmessagesims=1/i.test(window.location.href)&&o.localHostUrl||o.url).replace("$PARENT_ORIGIN$",encodeURIComponent(this.options.parentOrigin||""));let i=this.createFrame(r);this.container.appendChild(i),t=i.firstElementChild,t.dataset.messagechannel=n,e.U.addClass(i,"simmsg"),e.U.addClass(i,"simmsg"+n),o.permanent&&(t.dataset.permanent="true"),this.startFrame(t),s=this.simFrames()}}else{const e=s.filter((e=>!e.dataset.messagechannel));e.length<2?(this.container.appendChild(this.createFrame()),s=this.simFrames()):e[1].dataset.runid!=this.runId&&this.startFrame(e[1])}}}for(let e=0;e<s.length;++e){const o=s[e];if((!n||o.contentWindow!=n)&&(o.contentWindow&&(this.postMessageCore(o,t),"recorder"==t.type&&"start"==t.action)))break}}postMessageCore(t,n){var o,r,i,s;if(t.contentWindow.postMessage(n,t.dataset.origin),e.U.isLocalHostDev()&&(null===(r=null===(o=pxt)||void 0===o?void 0:o.appTarget)||void 0===r?void 0:r.id))try{t.contentWindow.postMessage(n,`https://trg-${null===(s=null===(i=pxt)||void 0===i?void 0:i.appTarget)||void 0===s?void 0:s.id}.userpxt.io/---simulator`)}catch(e){}}createFrame(n){const o=document.createElement("div");o.className="simframe ui embed";const r=document.createElement("iframe");r.id="sim-frame-"+this.nextId(),r.title=e.localization.lf("Simulator"),r.allowFullscreen=!0,r.setAttribute("allow","autoplay"),r.setAttribute("sandbox","allow-same-origin allow-scripts"),r.className="no-select";const i=(n||this.getSimUrl())+"#"+r.id;r.src=i,r.frameBorder="0",r.dataset.runid=this.runId,r.dataset.origin=new URL(i).origin||"*",o.appendChild(r);const s=document.createElement("i");s.className="videoplay xicon icon",s.style.display="none",s.onclick=e=>(e.preventDefault(),this.state!=t.Running&&this.state!=t.Starting&&(this.options.restart?this.options.restart():this.start()),r.focus(),!1),o.appendChild(s);const a=document.createElement("div");return a.className="ui active loader",s.style.display="none",o.appendChild(a),this._runOptions&&this.applyAspectRatioToFrame(r),o}preload(e){this.simFrames().length||(this.container.appendChild(this.createFrame()),this.applyAspectRatio(e),this.setStarting())}stop(e=!1,n=!1){this.clearDebugger(),this.postMessage({type:"stop",source:o}),this.setState(n?t.Starting:t.Stopped),e&&this.unload()}suspend(){this.postMessage({type:"stop",source:o}),this.setState(t.Suspended)}unload(){this.cancelFrameCleanup(),e.U.removeChildren(this.container),this.setState(t.Unloaded),this._runOptions=void 0,this._currentRuntime=void 0,this.runId=void 0}mute(e){this._currentRuntime&&(this._currentRuntime.mute=e),this.postMessage({type:"mute",source:o,mute:e})}stopSound(){this.postMessage({type:"stopsound",source:o})}isLoanedSimulator(e){return!!this.loanedSimulator&&this.loanedIFrame()==e}loanSimulator(){return this.loanedSimulator||(this.loanedSimulator=this.container.firstElementChild||this.createFrame(),this.loanedSimulator.parentNode&&this.container.removeChild(this.loanedSimulator)),this.loanedSimulator}unloanSimulator(){this.loanedSimulator&&(this.loanedSimulator.parentNode&&this.loanedSimulator.parentNode.removeChild(this.loanedSimulator),this.container.insertBefore(this.loanedSimulator,this.container.firstElementChild),delete this.loanedSimulator)}loanedIFrame(){return this.loanedSimulator&&this.loanedSimulator.parentNode&&this.loanedSimulator.querySelector("iframe")}cancelFrameCleanup(){this.frameCleanupTimeout&&(clearTimeout(this.frameCleanupTimeout),this.frameCleanupTimeout=void 0)}scheduleFrameCleanup(){this.cancelFrameCleanup(),this.frameCleanupTimeout=setTimeout((()=>{this.frameCleanupTimeout=void 0,this.cleanupFrames()}),5e3)}applyAspectRatio(e){if(!e&&!this._runOptions)return;this.simFrames().forEach((t=>this.applyAspectRatioToFrame(t,e)))}applyAspectRatioToFrame(e,t){var n,o,r,i;let s=t;if(void 0===s){const t=parseFloat(e.dataset.aspectratio);isNaN(t)||(s=t)}if(void 0===s){const t=e.dataset.messagechannel;if(t){const e=null===(r=null===(o=null===(n=this.options)||void 0===n?void 0:n.messageSimulators)||void 0===o?void 0:o[t])||void 0===r?void 0:r.aspectRatio;e&&(s=e)}}void 0===s&&(s=(null===(i=this._runOptions)||void 0===i?void 0:i.aspectRatio)||1.22),e.parentElement.style.paddingBottom=100/s+"%"}cleanupFrames(){const e=this.simFrames(!0);e.shift(),e.filter((e=>!e.dataset.permanent)).forEach((e=>{this.state!=t.Stopped&&e.dataset.runid==this.runId||(this.options.removeElement?this.options.removeElement(e.parentElement):e.parentElement.remove())}))}hide(e){if(this.suspend(),!this.options.removeElement)return;const t=this.simFrames();t.forEach((t=>{this.options.removeElement(t.parentElement,e)})),0==t.length&&e&&e()}unhide(){if(!this.options.unhideElement)return;this.simFrames().forEach((e=>{this.options.unhideElement(e.parentElement)}))}run(e,t={}){this._runOptions=t,this.runId=this.nextId(),this._currentRuntime={type:"run",source:o,boardDefinition:t.boardDefinition,parts:t.parts,builtinParts:t.builtinParts,fnArgs:t.fnArgs,code:e,partDefinitions:t.partDefinitions,mute:t.mute,highContrast:t.highContrast,light:t.light,cdnUrl:t.cdnUrl,localizedStrings:t.localizedStrings,refCountingDebug:t.refCountingDebug,version:t.version,clickTrigger:t.clickTrigger,breakOnStart:t.breakOnStart,storedState:t.storedState,ipc:t.ipc,single:t.single,dependencies:t.dependencies},this.start()}restart(){this.stop(),this.cleanupFrames(),this.start()}areBreakpointsSet(){return this.breakpointsSet}start(){if(this.clearDebugger(),this.addEventListeners(),this.applyAspectRatio(),this.scheduleFrameCleanup(),!this._currentRuntime)return;this.breakpointsSet=!1;let e=this.simFrames()[0];if(e)this.startFrame(e);else{let t=this.createFrame();this.container.appendChild(t),e=t.firstElementChild}this.debuggingFrame=e.id,this.setState(t.Running),this.setTraceInterval(this.traceInterval)}startFrame(e){if(!this._currentRuntime||!e.contentWindow)return!1;const t=JSON.parse(JSON.stringify(this._currentRuntime));return t.frameCounter=++this.frameCounter,t.options={theme:this.themes[this.nextFrameId++%this.themes.length]},t.id=`${t.options.theme}-${this.nextId()}`,e.dataset.runid=this.runId,e.dataset.runtimeid=t.id,e.id!==this.debuggingFrame&&(t.traceDisabled=!0,t.breakOnStart=!1),this.postMessageCore(e,t),this.traceInterval&&this.setTraceInterval(this.traceInterval),this.applyAspectRatioToFrame(e),this.setFrameState(e),!0}handleMessage(e,n){switch(e.type||""){case"ready":{const t=e.frameid,n=document.getElementById(t);n&&(this.startFrame(n),this.options.revealElement&&this.options.revealElement(n)),this.options.onSimulatorReady&&this.options.onSimulatorReady();break}case"status":{const n=e.frameid,o=document.getElementById(n);if(o){const n=e;if(n.runtimeid==o.dataset.runtimeid)switch(n.state){case"running":this.setState(t.Running);break;case"killed":this.setState(t.Stopped)}}break}case"simulator":this.handleSimulatorCommand(e);break;case"serial":case"pxteditor":case"screenshot":case"custom":case"recorder":case"addextensions":break;case"aspectratio":{const t=e,n=t.frameid,o=document.getElementById(n);o&&(o.dataset.aspectratio=t.value+"",this.applyAspectRatioToFrame(o));break}case"debugger":this.handleDebuggerMessage(e);break;case"toplevelcodefinished":this.options.onTopLevelCodeEnd&&this.options.onTopLevelCodeEnd();break;default:this.postMessage(e,n)}}addEventListeners(){this.listener||(this.listener=t=>{if(!this.hwdbg){if(e.U.isLocalHost());else if(this._allowedOrigins.indexOf(t.origin)<0)return;this.handleMessage(t.data,t.source)}},window.addEventListener("message",this.listener,!1))}removeEventListeners(){this.listener&&(window.removeEventListener("message",this.listener,!1),this.listener=void 0)}resume(e){let r;switch(e){case n.Resume:r="resume",this.setState(t.Running);break;case n.StepInto:r="stepinto",this.setState(t.Running);break;case n.StepOut:r="stepout",this.setState(t.Running);break;case n.StepOver:r="stepover",this.setState(t.Running);break;case n.Pause:r="pause";break;default:return void console.debug("unknown command")}this.postMessage({type:"debugger",subtype:r,source:o})}setBreakpoints(e){this.breakpointsSet=!0,this.postDebuggerMessage("config",{setBreakpoints:e},void 0,this.debuggingFrame)}setTraceInterval(e){this.traceInterval=e,this.postDebuggerMessage("traceConfig",{interval:e})}variablesAsync(e,t){return this.postDebuggerMessageAsync("variables",{variablesReference:e,fields:t},this.debuggingFrame).then((e=>e),(e=>{}))}handleSimulatorCommand(e){this.options.onSimulatorCommand&&this.options.onSimulatorCommand(e)}clearDebugger(){const e=new Error("Debugging cancelled");Object.keys(this.debuggerResolvers).forEach((t=>{const{reject:n}=this.debuggerResolvers[t];n(e)})),this.debuggerResolvers={},this.debuggerSeq++}handleDebuggerMessage(e){if("trace"!==e.subtype&&console.log("DBG-MSG",e.subtype,e),e.seq){const{resolve:t}=this.debuggerResolvers[e.seq];t&&t(e)}switch(e.subtype){case"warning":this.options.onDebuggerWarning&&this.options.onDebuggerWarning(e);break;case"breakpoint":{const o=e;if(this.state==t.Running){if(o.exceptionMessage)this.suspend();else{this.setState(t.Paused);this.simFrames(!0).length>1&&this.resume(n.Pause)}this.options.onDebuggerBreakpoint&&this.options.onDebuggerBreakpoint(o);let e=o.exceptionMessage+"\n";for(let t of o.stackframes){let n=t.funcInfo;e+=`   at ${n.functionName} (${n.fileName}:${n.line+1}:${n.column+1})\n`}o.exceptionMessage&&console.error(e)}else console.error("debugger: trying to pause from "+this.state);break}case"trace":{const n=e;this.state==t.Running&&this.options.onTraceMessage&&this.options.onTraceMessage(n);break}default:const o=e.req_seq;if(o){const{resolve:t}=this.debuggerResolvers[o];t&&(delete this.debuggerResolvers[o],t(e))}}}postDebuggerMessageAsync(e,t={},n){return new Promise(((o,r)=>{const i=this.debuggerSeq++;this.debuggerResolvers[i.toString()]={resolve:o,reject:r},this.postDebuggerMessage(e,t,i,n)}))}postDebuggerMessage(e,t={},n,r){const i=JSON.parse(JSON.stringify(t));i.type="debugger",i.subtype=e,i.source=o,n&&(i.seq=n),this.postMessage(i,void 0,r)}nextId(){return this.nextFrameId+++(Math.random()+""+Math.random()).replace(/[^\d]/,"")}get stoppedClass(){return this.options&&this.options.stoppedClass||"grayscale"}get invalidatedClass(){return this.options&&this.options.invalidatedClass||"sepia"}}}(pxsim||(pxsim={})),function(e){e.mkRange=function(e,t){let n=[];for(;e<t;e++)n.push(e);return n};e.EventBus=class{constructor(e,t,n){this.runtime=e,this.board=t,this.valueToArgs=n,this.queues={},this.backgroundHandlerFlag=!1,this.nextNotifyEvent=1024,this.schedulerID=15,this.idleEventID=2,this.board.addMessageListener(this.handleMessage.bind(this))}handleMessage(e){if("eventbus"===e.type){const t=e;this.queue(t.id,t.eventid,t.value)}}setBackgroundHandlerFlag(){this.backgroundHandlerFlag=!0}setNotify(e,t){this.notifyID=e,this.notifyOneID=t}setIdle(e,t){this.schedulerID=e,this.idleEventID=t}start(t,n,o,r=!1){let i=(o?"back":"fore")+":"+t+":"+n;return!this.queues[i]&&r&&(this.queues[i]=new e.EventQueue(this.runtime,this.valueToArgs)),this.queues[i]}listen(e,t,n){e==this.schedulerID&&t==this.idleEventID&&this.runtime.startIdle();let o=this.start(e,t,this.backgroundHandlerFlag,!0);this.backgroundHandlerFlag?o.addHandler(n):o.setHandler(n),this.backgroundHandlerFlag=!1}removeBackgroundHandler(e){Object.keys(this.queues).forEach((t=>{t.startsWith("back:")&&this.queues[t].removeHandler(e)}))}getQueues(e,t,n){let o=[this.start(0,0,n)];return 0==e&&0==t||(t&&o.push(this.start(0,t,n)),e&&o.push(this.start(e,0,n)),e&&t&&o.push(this.start(e,t,n))),o}queue(t,n,o=null){if(e.runtime.pausedOnBreakpoint)return;const r=this.notifyID&&this.notifyOneID&&t==this.notifyOneID;r&&(t=this.notifyID);let i=this.getQueues(t,n,!0).concat(this.getQueues(t,n,!1));this.lastEventValue=n,this.lastEventTimestampUs=e.U.perfNowUs(),e.U.promiseMapAllSeries(i,(e=>e?e.push(o,r):Promise.resolve()))}queueIdle(){this.schedulerID&&this.idleEventID&&this.queue(this.schedulerID,this.idleEventID)}wait(e,t,n){this.start(e,t,!1,!0).addAwaiter(n)}getLastEventValue(){return this.lastEventValue}getLastEventTime(){return 4294967295&this.lastEventTimestampUs-e.runtime.startTimeUs}};let t;function n(){return"undefined"!=typeof window&&("ontouchstart"in window||navigator&&navigator.maxTouchPoints>0)}function o(){return"undefined"!=typeof window&&!!window.PointerEvent}e.AnimationQueue=class{constructor(e){this.runtime=e,this.queue=[],this.process=()=>{let t=this.queue[0];if(!t)return;if(this.runtime.dead)return;e=this.runtime;let n=t.frame();e.queueDisplayUpdate(),e.maybeUpdateDisplay(),!1===n?(this.queue.shift(),this.queue[0]&&(this.queue[0].setTimeoutHandle=setTimeout(this.process,this.queue[0].interval)),t.whenDone(!1)):t.setTimeoutHandle=setTimeout(this.process,t.interval)}}cancelAll(){let e=this.queue;this.queue=[];for(let t of e)t.whenDone(!0),t.setTimeoutHandle&&clearTimeout(t.setTimeoutHandle)}cancelCurrent(){let e=this.queue[0];e&&(this.queue.shift(),e.whenDone(!0),e.setTimeoutHandle&&clearTimeout(e.setTimeoutHandle))}enqueue(e){e.whenDone||(e.whenDone=()=>{}),this.queue.push(e),1==this.queue.length&&this.process()}executeAsync(t){return e.U.assert(!t.whenDone),new Promise(((e,n)=>{t.whenDone=e,this.enqueue(t)}))}},function(t){let n,o,r,i,s=0,a=!1;function l(){return n||(n=function(){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext)try{return new window.AudioContext}catch(e){}return}()),n}function c(){S(0),s=0,i&&i.pause()}function u(){c(),v()}function p(e,t){e.gain.value&&e.gain.setTargetAtTime(0,l().currentTime,.015),setTimeout((()=>{e.disconnect(),t&&t.disconnect()}),450)}t.mute=function(e){a=e,u();const t=l();!e&&t&&"suspended"===t.state&&t.resume()},t.stopAll=u,t.stop=function(){c(),function(){if(r){try{p(r,o)}catch(e){}r=void 0,o=void 0}}()},t.frequency=function(){return s};const d=[null,"triangle","sawtooth","sine"];let g,h,f=[],_=[];function m(e,t){let n,o=d[e];if(o){let e=l().createOscillator();return e.type=o,e.frequency.value=t,e}if(4==e)n=function(){if(!h){const e=131072;h=l().createBuffer(1,e,l().sampleRate);const t=h.getChannelData(0);let n=251771520;for(let o=0;o<e;o+=4)n^=n<<13,n^=n>>17,n^=n<<5,32768&n?(t[o]=1,t[o+1]=1,t[o+2]=-1,t[o+3]=-1):(t[o]=0,t[o+1]=0,t[o+2]=0,t[o+3]=0)}return h}();else if(5==e)n=function(){if(!g){const e=1e5;g=l().createBuffer(1,e,l().sampleRate);const t=g.getChannelData(0);let n=251771520;for(let o=0;o<e;o++)n^=n<<13,n^=n>>17,n^=n<<5,t[o]=(1023&n)/512-1}return g}();else if(11<=e&&e<=15)n=function(e){if(!_[e]){const t=1024,n=l().createBuffer(1,t,l().sampleRate),o=n.getChannelData(0);for(let n=0;n<t;n++)o[n]=n<e/100*t?1:-1;_[e]=n}return _[e]}(10*(e-10));else{if(!(16<=e&&e<=18))return null;n=function(e){if(!f[e]){const t=1024,n=l().createBuffer(1,t,l().sampleRate),o=n.getChannelData(0),r=[770763591,3356908179],i=[15,31,63];for(let n=0;n<t;n+=4){let t,s=n/4;s&=i[e-4],t=0!=(r[s>>5]&1<<(31&s)),t?(o[n]=1,o[n+1]=1,o[n+2]=-1,o[n+3]=-1):(o[n]=0,o[n+1]=0,o[n+2]=0,o[n+3]=0)}f[e]=n}return f[e]}(e-16+4)}let r=l().createBufferSource();r.buffer=n,r.loop=!0;return 4==e||16<=e&&e<=18?r.playbackRate.value=t/(l().sampleRate/4):5!=e&&(r.playbackRate.value=t/(l().sampleRate/1024)),r}const y=[];class k{mute(){this.gain?p(this.gain,this.generator):this.generator&&(this.generator.stop(),this.generator.disconnect()),this.gain=null,this.generator=null}remove(){const e=y.indexOf(this);e>=0&&y.splice(e,1),this.mute()}}let b=1;function v(){for(b++;y.length;)y[0].remove()}function T(t){const o=b;let r=l(),i=0,s=new k,c=-1,u=-1,p=0;y.length>5&&y[0].remove(),y.push(s);const d=(e,t)=>e/1024/4*(t?.5:1),g=()=>{s.mute(),p=0,c=-1,u=-1},h=()=>{if(i>=t.data.length||!t.data[i])return e.U.delay(p).then(g);const f=t.data[i],_=e.BufferMethods.getNumber(t,e.BufferMethods.NumberFormat.UInt16LE,i+2),y=e.BufferMethods.getNumber(t,e.BufferMethods.NumberFormat.UInt16LE,i+4),k=e.BufferMethods.getNumber(t,e.BufferMethods.NumberFormat.UInt16LE,i+6),v=e.BufferMethods.getNumber(t,e.BufferMethods.NumberFormat.UInt16LE,i+8),T=e.BufferMethods.getNumber(t,e.BufferMethods.NumberFormat.UInt16LE,i+10),E=11<=f&&f<=15,S=4==f||16<=f&&f<=18,C=d(k,E),x=d(v,E);if(!r||o!=b)return e.U.delay(y);if(c!=f||u!=_||_!=T){if(s.generator)return e.U.delay(p).then((()=>(g(),h())));if(s.generator=a?null:m(f,_),!s.generator)return e.U.delay(y);if(c=f,u=_,s.gain=r.createGain(),s.gain.gain.value=0,s.gain.gain.setTargetAtTime(C,n.currentTime,.015),T!=_)if(null!=s.generator.frequency){s.generator.frequency.linearRampToValueAtTime(T,r.currentTime+(p+y)/1e3)}else if(null!=s.generator.playbackRate){const e=S?4:1024;s.generator.playbackRate.linearRampToValueAtTime(T/(l().sampleRate/e),r.currentTime+(p+y)/1e3)}s.generator.connect(s.gain),s.gain.connect(r.destination),s.generator.start()}i+=12,s.gain.gain.setValueAtTime(C,r.currentTime+p/1e3),p+=y;const B=0!==x&&y>50?(p-50)/1e3:(p-10)/1e3;return s.gain.gain.linearRampToValueAtTime(x,r.currentTime+B),h()};return h().then((()=>s.remove()))}function E(e,t){if(e<0)return;s=e;let n=l();if(n){t=Math.max(0,Math.min(1,t));try{o||(o=n.createOscillator(),r=n.createGain(),r.gain.value=0,o.type="triangle",o.connect(r),r.connect(n.destination),o.start(0)),S(t)}catch(e){return o=void 0,void(r=void 0)}o.frequency.value=e,S(t)}}function S(e){(null==r?void 0:r.gain)&&r.gain.setTargetAtTime(a?0:e,n.currentTime,.015)}t.muteAllChannels=v,t.queuePlayInstructions=function(t,n){const o=b;e.U.delay(t).then((()=>o!=b?Promise.resolve():T(n)))},t.playInstructionsAsync=T,t.tone=E,t.setCurrentToneGain=S,t.playBufferAsync=function(e){return e?new Promise((t=>{function n(){t&&t(),t=void 0}const o="data:audio/wav;base64,"+window.btoa(function(e){let t=e.length,n="";for(let o=0;o<t;++o)n+=String.fromCharCode(e[o]);return n}(e.data));i=new Audio(o),a&&(i.volume=0),i.onended=()=>n(),i.onpause=()=>n(),i.onerror=()=>n(),i.play()})):Promise.resolve()};t.playPCMBufferStreamAsync=function(e,t,n=.3,o){return new Promise((r=>{let i=[],s=l().currentTime,c=!1;function u(){const t=o&&o();for(;!c&&i.length<3&&!t;){const t=e();if(!t||!t.length){c=!0;break}p(t)}c&&0===i.length&&(d.remove(),r&&r(),r=void 0)}function p(e){const n=l().createBuffer(1,e.length,t);if(n.copyToChannel)n.copyToChannel(e,0);else{const t=n.getChannelData(0);for(let n=0;n<e.length;n++)t[n]=e[n]}const o=l().createBufferSource();i.push(o),o.connect(d.gain),o.buffer=n,o.addEventListener("ended",(()=>{i.shift().disconnect(),u()})),o.start(s),s+=n.duration}const d=new k;d.gain=l().createGain(),d.gain.gain.value=0,a||d.gain.gain.setValueAtTime(n,l().currentTime),d.gain.connect(l().destination),y.length>5&&y[0].remove(),y.push(d),u()}))},t.sendMidiMessage=function(e){const t=e.data;if(!t.length)return;const n=t[0]>>4,o=15&t[0],r=t[1]||0,i=(s=r,440*Math.pow(2,(s-69)/12));var s;const a=t[2]||0;8==n||9==n&&0==a?c():9==n&&(E(i,1),9==o&&setTimeout((()=>c()),500))}}(t=e.AudioContextManager||(e.AudioContextManager={})),e.isTouchEnabled=n,e.hasPointerEvents=o,e.pointerEvents=o()?{up:"pointerup",down:["pointerdown"],move:"pointermove",enter:"pointerenter",leave:"pointerleave"}:n()?{up:"mouseup",down:["mousedown","touchstart"],move:"touchmove",enter:"touchenter",leave:"touchend"}:{up:"mouseup",down:["mousedown"],move:"mousemove",enter:"mouseenter",leave:"mouseleave"}}(pxsim||(pxsim={})),function(e){!function(t){function n(e,t){return n=>n*(t/e)}function o(e,t){let n=e[0]-t[0],o=e[1]-t[1];return n*n+o*o}t.translateEl=function(t,n){e.svg.hydrate(t,{transform:`translate(${n[0]} ${n[1]})`})},t.composeSVG=function(t){let[n,o]=[t.el1,t.el2];e.U.assert(0==n.x&&0==n.y&&0==o.x&&0==o.y,"el1 and el2 x,y offsets not supported");let r=(t,n,o)=>e.svg.hydrate(t,{x:n,y:o}),i=(t,n,o)=>e.svg.hydrate(t,{width:`${n}px`,height:`${o}px`}),s=t.scaleUnit2,a=t.scaleUnit2/t.scaleUnit1,l=n.w*a,c=n.h*a;i(n.el,l,c);let u=1*o.w,p=1*o.h;i(o.el,u,p);let[d,g,h,f]=t.margin,_=t.middleMargin,m=Math.max(l,u),y=g+(m-l)/2,k=d;r(n.el,y,k);let b=g+(m-u)/2,v=k+c+_;r(o.el,b,v);let T=[k,k+c,v,v+p],E=g+m+f,S=d+c+_+p+h,C=e.svg.elt("svg",{version:"1.0",viewBox:`0 0 ${E} ${S}`,class:"sim-bb"});((t,n,o)=>{n&&e.svg.hydrate(t,{width:n}),o&&e.svg.hydrate(t,{height:o})})(C,t.maxWidth,t.maxHeight),r(C,0,0);let x=e.svg.child(C,"g");return C.appendChild(n.el),C.appendChild(o.el),{under:x,over:e.svg.child(C,"g"),host:C,edges:T,scaleUnit:s,toHostCoord1:e=>{let[t,n]=e;return[t*a+y,n*a+k]},toHostCoord2:e=>{let[t,n]=e;return[1*t+b,1*n+v]}}},t.mkScaleFn=n,t.mkImageSVG=function(t){let o=n(t.imageUnitDist,t.targetUnitDist),r=o(t.width),i=o(t.height),s=e.svg.elt("image",{width:r,height:i});return s.setAttributeNS("http://www.w3.org/1999/xlink","href",`${t.image}`),{el:s,w:r,h:i,x:0,y:0}},t.findDistSqrd=o,t.findClosestCoordIdx=function(e,t){return t.map((t=>o(e,t))).reduce(((e,t,n,o)=>t<o[e]?n:e),0)},t.mkTxt=function(t,n,o,r,i,s,a){let l=e.svg.elt("text");a=a||.3;const c=(s=s||-.33333)*o*i.length,u=a*o;return e.svg.hydrate(l,{style:`font-size:${o}px;`,transform:`translate(${t} ${n}) rotate(${r}) translate(${c} ${u})`}),e.U.addClass(l,"noselect"),l.textContent=i,l},t.GPIO_WIRE_COLORS=["pink","orange","yellow","green","purple"],t.WIRE_COLOR_MAP={black:"#514f4d",white:"#fcfdfc",gray:"#acabab",purple:"#a772a1",blue:"#01a6e8",green:"#3cce73",yellow:"#ece600",orange:"#fdb262",red:"#f44f43",brown:"#c89764",pink:"#ff80fa"},t.mapWireColor=function(e){return t.WIRE_COLOR_MAP[e]||e},t.PIN_DIST=15,t.rgbToHsl=function(e){let t,n,o,[r,i,s]=e,[a,l,c]=[r/255,i/255,s/255],u=Math.min(a,l,c),p=Math.max(a,l,c),d=p-u,g=p+u;return o=g/2*100,0===d?n=t=0:(p===a?t=(l-c)/d%6*60:p===l?t=60*((c-a)/d+2):p===c&&(t=60*((a-l)/d+4)),n=o>50?d/(2-g)*100:d/g*100),[Math.floor(t),Math.floor(n),Math.floor(o)]}}(e.visuals||(e.visuals={}))}(pxsim||(pxsim={})),function(e){var t;!function(n){function o(e,n,o){let r={class:e,d:n};o&&(r.title=o);let i=t.elt("path");return t.hydrate(i,r),i}function r(e,n=!1){let o=t.elt("linearGradient");t.hydrate(o,{id:e,x1:"0%",y1:"0%",x2:n?"100%":"0%",y2:n?"0%":"100%"});t.child(o,"stop",{offset:"0%"}),t.child(o,"stop",{offset:"100%"}),t.child(o,"stop",{offset:"100%"}),t.child(o,"stop",{offset:"100%"});return o}function i(e){let n=t.elt("title");return n.textContent=e,n}n.parseString=function(e){return(new DOMParser).parseFromString(e,"image/svg+xml").getElementsByTagName("svg").item(0)},n.toDataUri=function(e){return"data:image/svg+xml,"+encodeURI(e)},n.cursorPoint=function(e,t,n){return e.x=null!=n.clientX?n.clientX:n.pageX,e.y=null!=n.clientY?n.clientY:n.pageY,e.matrixTransform(t.getScreenCTM().inverse())},n.rotateElement=function(e,t,n,o){e.setAttribute("transform",`translate(${t},${n}) rotate(${o+90}) translate(${-t},${-n})`)},n.hydrate=function(e,n){for(let o in n)"title"==o?t.title(e,n[o]):e.setAttributeNS(null,o,n[o])},n.elt=function(e,n){let o=document.createElementNS("http://www.w3.org/2000/svg",e);return n&&t.hydrate(o,n),o},n.child=function(e,n,o){let r=t.elt(n,o);return e.appendChild(r),r},n.mkPath=o,n.path=function(e,t,n,r){let i=o(t,n,r);return e.appendChild(i),i},n.fill=function(e,t){e.style.fill=t},n.filter=function(e,t){e.style.filter=t},n.fills=function(e,t){e.forEach((e=>e.style.fill=t))},n.isTouchEnabled=function(){return"undefined"!=typeof window&&("ontouchstart"in window||navigator.maxTouchPoints>0)},n.onClick=function(t,n){let o=!1;e.pointerEvents.down.forEach((e=>t.addEventListener(e,(e=>(o=!0,!0)),!1))),t.addEventListener(e.pointerEvents.up,(e=>!o||(o=!1,n(e),e.preventDefault(),!1)),!1)},n.buttonEvents=function(t,n,o,r,i){let s=!1;e.pointerEvents.down.forEach((e=>t.addEventListener(e,(e=>(s=!0,o&&o(e),!0)),!1))),t.addEventListener(e.pointerEvents.move,(e=>!s||(n&&n(e),e.preventDefault(),!1)),!1),t.addEventListener(e.pointerEvents.up,(e=>{s=!1,r&&r(e)}),!1),t.addEventListener(e.pointerEvents.leave,(e=>{s=!1,r&&r(e)}),!1),t.addEventListener("keydown",(e=>{s=!1,i&&i(e)}))},n.mkLinearGradient=r,n.linearGradient=function(e,t,n=!1){let o=r(t,n);return e.appendChild(o),o},n.setGradientColors=function(e,t,n){e&&(e.childNodes[0].style.stopColor=t,e.childNodes[1].style.stopColor=t,e.childNodes[2].style.stopColor=n,e.childNodes[3].style.stopColor=n)},n.setGradientValue=function(e,t){e.childNodes[1].getAttribute("offset")!=t&&(e.childNodes[1].setAttribute("offset",t),e.childNodes[2].setAttribute("offset",t))},n.animate=function(t,n){e.U.addClass(t,n);let o=t.parentElement;o&&(o.removeChild(t),o.appendChild(t))},n.mkTitle=i,n.title=function(e,t){let n=i(t);return e.appendChild(n),n},n.toHtmlColor=function(e){return`rgba(${e>>16&255}, ${e>>8&255}, ${255&e}, ${e>>24&1})`}}(t=e.svg||(e.svg={}))}(pxsim||(pxsim={})),function(e){class t{constructor(e){this.id=e}}e.Button=t;e.ButtonPairState=class{constructor(e){this.props=e,this.usesButtonAB=!1,this.aBtn=new t(this.props.ID_BUTTON_A),this.bBtn=new t(this.props.ID_BUTTON_B),this.abBtn=new t(this.props.ID_BUTTON_AB),this.abBtn.virtual=!0}}}(pxsim||(pxsim={})),function(e){e.CompassState=class{constructor(){this.usesHeading=!1,this.heading=90}}}(pxsim||(pxsim={})),function(e){e.FileSystemState=class{constructor(){this.files={}}append(e,t){this.files[e]=(this.files[e]||"")+t}remove(e){delete this.files[e]}}}(pxsim||(pxsim={})),function(e){e.LightSensorState=class{constructor(){this.usesLightLevel=!1,this.lightLevel=128}}}(pxsim||(pxsim={})),function(e){!function(t){t.mkBoardView=e=>{const n=e.visual;return new t.GenericBoardSvg({visualDef:n,boardDef:e.boardDef,wireframe:e.wireframe})};t.BoardHost=class{constructor(n,o){this.parts=[],this.boardView=n,this.opts=o,o.boardDef.pinStyles||(o.boardDef.pinStyles={}),this.state=o.state;let r=o.partsList,i=0<r.length||o.forceBreadboardLayout;if(i){this.breadboard=new t.Breadboard({wireframe:o.wireframe});const n=o.boardDef.marginWhenBreadboarding||[0,0,40,0],s=t.composeSVG({el1:this.boardView.getView(),scaleUnit1:this.boardView.getPinDist(),el2:this.breadboard.getSVGAndSize(),scaleUnit2:this.breadboard.getPinDist(),margin:[n[0],n[1],20,n[3]],middleMargin:n[2],maxWidth:o.maxWidth,maxHeight:o.maxHeight}),a=s.under,l=s.over;this.view=s.host;const c=s.edges;this.fromMBCoord=s.toHostCoord1,this.fromBBCoord=s.toHostCoord2,this.partGroup=l,this.partOverGroup=e.svg.child(this.view,"g"),this.style=e.svg.child(this.view,"style",{}),this.defs=e.svg.child(this.view,"defs",{}),this.wireFactory=new t.WireFactory(a,l,c,this.style,this.getLocCoord.bind(this),this.getPinStyle.bind(this));const u=e.allocateDefinitions({boardDef:o.boardDef,partDefs:o.partDefs,fnArgs:o.fnArgs,getBBCoord:this.breadboard.getCoord.bind(this.breadboard),partsList:r});u.partsAndWires.length||o.forceBreadboardLayout?(this.addAll(u),u.requiresBreadboard||o.forceBreadboardRender?u.hideBreadboard&&this.breadboard&&this.breadboard.hide():i=!1):i=!1}if(!i){delete this.breadboard,delete this.wireFactory,delete this.partOverGroup,delete this.partGroup,delete this.style,delete this.defs,delete this.fromBBCoord,delete this.fromMBCoord;const t=this.boardView.getView().el;this.view=t,this.partGroup=e.svg.child(this.view,"g"),this.partOverGroup=e.svg.child(this.view,"g"),o.maxWidth&&e.svg.hydrate(this.view,{width:o.maxWidth}),o.maxHeight&&e.svg.hydrate(this.view,{height:o.maxHeight})}this.state.updateSubscribers.push((()=>this.updateState()))}highlightBoardPin(e){this.boardView.highlightPin(e)}highlightBreadboardPin(e){this.breadboard.highlightLoc(e)}highlightWire(t){t.wires.forEach((t=>{e.U.addClass(t,"highlight"),t.style.visibility="visible"})),e.U.addClass(t.endG,"highlight")}getView(){return this.view}screenshotAsync(e){const t=this.view.cloneNode(!0);t.setAttribute("width",this.view.width.baseVal.value+""),t.setAttribute("height",this.view.height.baseVal.value+"");const n=(new XMLSerializer).serializeToString(t),o="data:image/svg+xml,"+encodeURIComponent(n.replace(/\s+/g," ").replace(/"/g,"'"));return new Promise(((t,n)=>{const r=document.createElement("img");r.onload=()=>{const n=document.createElement("canvas");n.width=r.width,n.height=r.height,e>0?(n.width=e,n.height=r.height*e/r.width|0):n.width<200?(n.width*=2,n.height*=2):n.width>480&&(n.width/=2,n.height/=2);const o=n.getContext("2d");o.drawImage(r,0,0,n.width,n.height),t(o.getImageData(0,0,n.width,n.height))},r.onerror=e=>{console.log(e),t(void 0)},r.src=o}))}updateState(){this.parts.forEach((e=>e.updateState()))}getBBCoord(e){let t=this.breadboard.getCoord(e);return this.fromBBCoord(t)}getPinCoord(e){let t=this.boardView.getCoord(e);if(t)return this.fromMBCoord(t);console.error(`Unable to find coord for pin: ${e}`)}getLocCoord(e){let t;if("breadboard"===e.type){let n=e;t=this.getBBCoord(n)}else{let n=e.pin;t=this.getPinCoord(n)}return t||console.debug("Unknown location: "+name),t}getPinStyle(e){return"breadboard"==e.type?"female":this.opts.boardDef.pinStyles[e.pin]||"female"}addPart(n){let o=null;if(n.simulationBehavior){let e=n.simulationBehavior,t=this.state.builtinVisuals[e],r=this.state.builtinParts[e];o=t(),o.init(this.state.bus,r,this.view,n.params)}else{let e=n.visual;o=new t.GenericPart(e)}this.parts.push(o),this.partGroup.appendChild(o.element),o.overElement&&this.partOverGroup.appendChild(o.overElement),o.defs&&o.defs.forEach((e=>this.defs.appendChild(e))),this.style.textContent+=o.style||"";let r=n.startColumnIdx,i=n.startRowIdx,s={type:"breadboard",row:t.getRowName(i),col:t.getColumnName(r),xOffset:n.bbFit.xOffset/n.visual.pinDistance,yOffset:n.bbFit.yOffset/n.visual.pinDistance},a=this.getBBCoord(s);o.moveToCoord(a);let l=`sim-${n.name}-cmp`;return e.U.addClass(o.element,l),e.U.addClass(o.element,"sim-cmp"),o.updateTheme(),o.updateState(),o}addWire(e){return this.wireFactory.addWire(e.start,e.end,e.color)}addAll(e){e.partsAndWires.forEach((t=>{const n=t.wires,o=n&&n.every((e=>this.wireFactory.checkWire(e.start,e.end)));o&&n.forEach((t=>e.wires.push(this.addWire(t))));let r=t.part;!r||n&&!o||e.parts.push(this.addPart(r))})),e.requiresBreadboard=!!e.wires.length||!!e.parts.length}}}(e.visuals||(e.visuals={}))}(pxsim||(pxsim={})),function(e){!function(t){const n=15,o="#DD4BA0",r=`\n        /* bread board */\n        .sim-bb-background {\n            fill:#E0E0E0;\n        }\n        .sim-bb-pin {\n            fill:#999;\n        }\n        .sim-bb-pin-hover {\n            visibility: hidden;\n            pointer-events: all;\n            stroke-width: 7.5px;\n            stroke: transparent;\n            fill: #777;\n        }\n        .sim-bb-pin-hover:hover {\n            visibility: visible;\n            fill:#444;\n        }\n        .sim-bb-group-wire {\n            stroke: #999;\n            stroke-width: 3.75px;\n            visibility: hidden;\n        }\n        .sim-bb-pin-group {\n            pointer-events: all;\n        }\n        .sim-bb-label,\n        .sim-bb-label-hover {\n            font-family:"Lucida Console", Monaco, monospace;\n            fill:#555;\n            pointer-events: all;\n            stroke-width: 0;\n            cursor: default;\n        }\n        .sim-bb-label-hover {\n            visibility: hidden;\n            fill:#000;\n            font-weight: bold;\n        }\n        .sim-bb-bar {\n            stroke-width: 0;\n        }\n        .sim-bb-blue {\n            fill:#1AA5D7;\n            stroke:#1AA5D7\n        }\n        .sim-bb-red {\n            fill:${o};\n            stroke:${o};\n        }\n        .sim-bb-pin-group:hover .sim-bb-pin-hover,\n        .sim-bb-pin-group:hover .sim-bb-group-wire,\n        .sim-bb-pin-group:hover .sim-bb-label-hover {\n            visibility: visible;\n        }\n        .sim-bb-pin-group:hover .sim-bb-label {\n            visibility: hidden;\n        }\n        /* outline mode */\n        .sim-bb-outline .sim-bb-background {\n            stroke-width: ${n/7}px;\n            fill: #FFF;\n            stroke: #000;\n        }\n        .sim-bb-outline .sim-bb-mid-channel {\n            fill: #FFF;\n            stroke: #888;\n            stroke-width: 2px;\n        }\n        /* grayed out */\n        .grayed .sim-bb-background {\n            stroke-width: 3px;\n        }\n        .grayed .sim-bb-red,\n        .grayed .sim-bb-blue {\n            fill: #BBB;\n        }\n        .grayed .sim-bb-bar {\n            fill: #FFF;\n        }\n        .grayed .sim-bb-pin {\n            fill: #000;\n            stroke: #FFF;\n            stroke-width: 3px;\n        }\n        .grayed .sim-bb-label {\n            fill: none;\n        }\n        .grayed .sim-bb-background {\n            stroke-width: 7.5px;\n            stroke: #555;\n        }\n        .grayed .sim-bb-group-wire {\n            stroke: #DDD;\n        }\n        .grayed .sim-bb-channel {\n            visibility: hidden;\n        }\n        /* highlighted */\n        .sim-bb-label.highlight {\n            visibility: hidden;\n        }\n        .sim-bb-label-hover.highlight {\n            visibility: visible;\n        }\n        .sim-bb-blue.highlight {\n            fill:#1AA5D7;\n        }\n        .sim-bb-red.highlight {\n            fill:${o};\n        }\n        .sim-bb-bar.highlight {\n            stroke-width: 0px;\n        }\n        `;t.BREADBOARD_MID_ROWS=10,t.BREADBOARD_MID_COLS=30;const i=[4,4],s=t.BREADBOARD_MID_ROWS+i.length,a=25,l=[4,9,14,19],c=a+l.length,u=n*(t.BREADBOARD_MID_COLS+3),p=n*(s+4+5.5),d=2/3,g=p*d,h=.16666666666666669*p,f=(t.BREADBOARD_MID_COLS-1)*n,_=(u-f)/2,m=h+(g-(s-1)*n)/2,y=(c-1)*n,k=(u-y)/2,b=(h-15)/2,v=k,T=b+h+g,E=25.5,S=12,C=1.05,x=-90,B="abcdefghij".split("").reverse();function A(e){return`${e+1}`}function I(e){return B[e]}function D(t){let n=t.xOffset||0,o=t.yOffset||0,r=[],i=e.svg.elt("g"),s=t.colStartIdx||0,a=t.rowStartIdx||0,l=e=>e?e.slice(0,e.length):[],c=(e,t)=>{let n,o=0;for(;0<=(n=e.indexOf(t));)e.splice(n,1),o+=1;return o},u=0,p=l(t.rowIdxsWithGap);for(let d=0;d<t.rowCount;d++){let g=0,h=l(t.colIdxsWithGap),f=o+d*t.pinDist+u*t.pinDist,_=d+a;for(let o=0;o<t.colCount;o++){let a=n+o*t.pinDist+g*t.pinDist,l=o+s;const u=t=>(e.svg.hydrate(t.el,"circle"==t.el.tagName?{cx:a,cy:f}:{x:a-.5*t.w,y:f-.5*t.h}),i.appendChild(t.el),t.el);let p=u(t.mkPin()),d=u(t.mkHoverPin()),m=t.getRowName(_),y=t.getColName(l),k=t.getGroupName?t.getGroupName(_,l):null,b={el:p,hoverEl:d,cx:a,cy:f,row:m,col:y,group:k};r.push(b),g+=c(h,l)}u+=c(p,_)}return{g:i,allPins:r}}function N(){let t=e.svg.elt("rect");return e.svg.hydrate(t,{class:"sim-bb-pin",rx:2,ry:2,width:6,height:6}),{el:t,w:6,h:6,x:0,y:0}}function w(){let t=e.svg.elt("rect"),n=6*1.3;return e.svg.hydrate(t,{class:"sim-bb-pin-hover",rx:2,ry:2,width:n,height:n}),{el:t,w:n,h:n,x:0,y:0}}function R(n,o,r,i,s,a,l){let c=t.mkTxt(n,o,r,i,s);e.U.addClass(c,"sim-bb-label"),l&&l.forEach((t=>e.U.addClass(c,t)));let u=t.mkTxt(n,o,1.3*r,i,s);return e.U.addClass(u,"sim-bb-label-hover"),l&&l.forEach((t=>e.U.addClass(u,t))),{el:c,hoverEl:u,txt:s,group:a}}t.getColumnName=A,t.getRowName=I,t.mkGrid=D;t.Breadboard=class{constructor(t){this.allPins=[],this.allLabels=[],this.allPowerBars=[],this.rowColToPin={},this.rowColToLbls={},this.buildDom(),t.wireframe&&e.U.addClass(this.bb,"sim-bb-outline")}hide(){this.bb.style.display="none"}updateLocation(t,n){e.svg.hydrate(this.bb,{x:`${t}px`,y:`${n}px`})}getPin(e,t){let n=this.rowColToPin[e];if(!n)return null;let o=n[t];return o||null}getCoord(e){let{row:t,col:o,xOffset:r,yOffset:i}=e,s=this.getPin(t,o);if(!s)return null;let a=(r||0)*n,l=(i||0)*n;return[s.cx+a,s.cy+l]}getPinDist(){return n}buildDom(){this.bb=e.svg.elt("svg",{version:"1.0",viewBox:`0 0 ${u} ${p}`,class:"sim-bb",width:u+"px",height:p+"px"}),this.styleEl=e.svg.child(this.bb,"style",{}),this.styleEl.textContent+=r,this.defs=e.svg.child(this.bb,"defs",{}),e.svg.child(this.bb,"rect",{class:"sim-bb-background",width:u,height:p,rx:4.5,ry:4.5});let o="sim-bb-channel-grad",s=e.svg.elt("linearGradient");e.svg.hydrate(s,{id:o,x1:"0%",y1:"0%",x2:"0%",y2:"100%"}),this.defs.appendChild(s);e.svg.child(s,"stop",{offset:"0%",style:"stop-color: #AAA;"}),e.svg.child(s,"stop",{offset:"20%",style:"stop-color: #CCC;"}),e.svg.child(s,"stop",{offset:"80%",style:"stop-color: #CCC;"}),e.svg.child(s,"stop",{offset:"100%",style:"stop-color: #AAA;"});const c=(t,n,r)=>{let i=e.svg.child(this.bb,"rect",{class:`sim-bb-channel ${r||""}`,y:t-n/2,width:u,height:n});return i.setAttribute("fill",`url(#${o})`),i};c(h+g/2,15,"sim-bb-mid-channel"),c(h,.75,"sim-bb-sml-channel"),c(h+g,.75,"sim-bb-sml-channel");const d=(e,n)=>`${(e=>e<t.BREADBOARD_MID_ROWS/2?"b":"t")(e)}${A(n)}`,f=e=>0===e?"-":"+",B=(e,t)=>{let n=(e=>e<25?"b":"t")(t);return`${f(e)}${n}`};let O=D({xOffset:_,yOffset:m,rowCount:t.BREADBOARD_MID_ROWS,colCount:t.BREADBOARD_MID_COLS,pinDist:n,mkPin:N,mkHoverPin:w,getRowName:I,getColName:A,getGroupName:d,rowIdxsWithGap:i});O.g;this.allPins=this.allPins.concat(O.allPins);let P=D({xOffset:v,yOffset:T,rowCount:2,colCount:a,pinDist:n,mkPin:N,mkHoverPin:w,getRowName:f,getColName:A,getGroupName:B,colIdxsWithGap:l});P.g;this.allPins=this.allPins.concat(P.allPins);let L=D({xOffset:k,yOffset:b,rowCount:2,colCount:a,colStartIdx:a,pinDist:n,mkPin:N,mkHoverPin:w,getRowName:f,getColName:A,getGroupName:B,colIdxsWithGap:l.map((e=>e+a))});L.g;this.allPins=this.allPins.concat(L.allPins),this.allPins.forEach((t=>{let{el:n,row:o,col:r,hoverEl:i}=t,s=`(${o},${r})`;e.svg.hydrate(n,{title:s}),e.svg.hydrate(i,{title:s})})),this.allPins.forEach((e=>{let t=this.rowColToPin[e.row];t||(t=this.rowColToPin[e.row]={}),t[e.col]=e}));const M=(e,t,n,o,r,i)=>{let s=this.getCoord({type:"breadboard",row:e,col:t}),[a,l]=s;return R(a+n,l+o,10.5,-90,r,i)};for(let e=0;e<t.BREADBOARD_MID_COLS;e++){let n=A(e),o=0,r=M(I(o),n,0,-15,n,d(o,e));this.allLabels.push(r);let i=t.BREADBOARD_MID_ROWS-1,s=M(I(i),n,0,15,n,d(i,e));this.allLabels.push(s)}for(let e=0;e<t.BREADBOARD_MID_ROWS;e++){let n=I(e),o=M(n,A(0),-15,0,n);this.allLabels.push(o);let r=M(n,A(t.BREADBOARD_MID_COLS-1),15,0,n);this.allLabels.push(r)}let F=[R(13.05,h+g+S,30,x,"-",B(0,0),["sim-bb-blue"]),R(12,h+g+h-S,E,x,"+",B(1,0),["sim-bb-red"]),R(u-S+C,h+g+S,30,x,"-",B(0,24),["sim-bb-blue"]),R(u-S,h+g+h-S,E,x,"+",B(1,24),["sim-bb-red"])];this.allLabels=this.allLabels.concat(F);let U=[R(13.05,12,30,x,"-",B(0,a),["sim-bb-blue"]),R(12,h-S,E,x,"+",B(1,a),["sim-bb-red"]),R(u-S+C,12,30,x,"-",B(0,49),["sim-bb-blue"]),R(u-S,h-S,E,x,"+",B(1,49),["sim-bb-red"])];this.allLabels=this.allLabels.concat(U);let H={};this.allLabels.forEach((e=>{let{el:t,txt:n}=e;(H[n]=H[n]||[]).push(e)}));this.allPins.forEach((e=>{let{row:t,col:n,group:o}=e,r=this.rowColToLbls[t]||(this.rowColToLbls[t]={}),i=r[n]||(r[n]=[]);if((e=>"-"===e.row||"+"===e.row)(e)){Number(n)<=a?F.filter((t=>t.group==e.group)).forEach((e=>i.push(e))):U.filter((t=>t.group==e.group)).forEach((e=>i.push(e)))}else{H[t].forEach((e=>i.push(e))),H[n].forEach((e=>i.push(e)))}}));const V=y+22.5,G=(V-y)/2,W=(t,n,o,r)=>{let i=e.svg.elt("rect");return e.svg.hydrate(i,{class:`sim-bb-bar ${r}`,x:t,y:n-1.5,width:V,height:3}),{el:i,group:o}};let K=[W(v-G,T-9,B(0,49),"sim-bb-blue"),W(v-G,T+n+9,B(1,49),"sim-bb-red"),W(k-G,b-9,B(0,0),"sim-bb-blue"),W(k-G,b+n+9,B(1,0),"sim-bb-red")];this.allPowerBars=this.allPowerBars.concat(K),this.allPowerBars.forEach((e=>this.bb.appendChild(e.el)));let j=this.allPins.map((e=>e.group)).filter(((e,t,n)=>n.indexOf(e)==t)),z=j.map((t=>e.svg.elt("g")));z.forEach((t=>e.U.addClass(t,"sim-bb-pin-group"))),z.forEach(((t,n)=>e.U.addClass(t,`group-${j[n]}`)));let $={};j.forEach(((e,t)=>$[e]=z[t]));let X={};this.allPins.forEach(((e,t)=>{let n=e.group;(X[n]||(X[n]=[])).push(e)})),j.forEach((t=>{let n=X[t],[o,r]=[n.map((e=>e.cx)),n.map((e=>e.cy))],i=e=>e.reduce(((e,t)=>e<t?e:t)),s=e=>e.reduce(((e,t)=>e>t?e:t)),[a,l,c,u]=[i(o),s(o),i(r),s(r)],p=e.svg.elt("rect"),d=Math.max(l-a,1e-4),g=Math.max(u-c,1e-4);e.svg.hydrate(p,{x:a,y:c,width:d,height:g}),e.U.addClass(p,"sim-bb-group-wire"),$[t].appendChild(p)})),this.allPins.forEach((e=>{let t=$[e.group];t.appendChild(e.el),t.appendChild(e.hoverEl)}));let Y=e.svg.elt("g");e.svg.hydrate(Y,{class:"sim-bb-group-misc"}),z.push(Y),this.allLabels.forEach((e=>{if(e.group){let t=$[e.group];t.appendChild(e.el),t.appendChild(e.hoverEl)}else Y.appendChild(e.el),Y.appendChild(e.hoverEl)})),z.forEach((e=>this.bb.appendChild(e)))}getSVGAndSize(){return{el:this.bb,y:0,x:0,w:u,h:p}}highlightLoc(t){let{row:n,col:o}=t,r=this.rowColToPin[n][o],{cx:i,cy:s}=r;this.rowColToLbls[n][o].forEach((t=>{e.U.addClass(t.el,"highlight"),e.U.addClass(t.hoverEl,"highlight")}))}}}(e.visuals||(e.visuals={}))}(pxsim||(pxsim={})),function(e){!function(t){t.BOARD_SYTLE=`\n        .noselect {\n            -webkit-touch-callout: none; /* iOS Safari */\n            -webkit-user-select: none;   /* Chrome/Safari/Opera */\n            -khtml-user-select: none;    /* Konqueror */\n            -moz-user-select: none;      /* Firefox */\n            -ms-user-select: none;       /* Internet Explorer/Microsoft Edge */\n            user-select: none;           /* Non-prefixed version, currently\n                                            not supported by any browser */\n        }\n\n        .sim-board-pin {\n            fill:#999;\n            stroke:#000;\n            stroke-width:${t.PIN_DIST/3}px;\n        }\n        .sim-board-pin-lbl {\n            fill: #333;\n        }\n        .gray-cover {\n            fill:#FFF;\n            opacity: 0.3;\n            stroke-width:0;\n            visibility: hidden;\n        }\n        .sim-board-pin-hover {\n            visibility: hidden;\n            pointer-events: all;\n            stroke-width:${t.PIN_DIST/6}px;\n        }\n        .sim-board-pin-hover:hover {\n            visibility: visible;\n        }\n        .sim-board-pin-lbl {\n            visibility: hidden;\n        }\n        .sim-board-outline .sim-board-pin-lbl {\n            visibility: visible;\n        }\n        .sim-board-pin-lbl {\n            fill: #555;\n        }\n        .sim-board-pin-lbl-hover {\n            fill: red;\n        }\n        .sim-board-outline .sim-board-pin-lbl-hover {\n            fill: black;\n        }\n        .sim-board-pin-lbl,\n        .sim-board-pin-lbl-hover {\n            font-family:"Lucida Console", Monaco, monospace;\n            pointer-events: all;\n            stroke-width: 0;\n        }\n        .sim-board-pin-lbl-hover {\n            visibility: hidden;\n        }\n        .sim-board-outline .sim-board-pin-hover:hover + .sim-board-pin-lbl,\n        .sim-board-pin-lbl.highlight {\n            visibility: hidden;\n        }\n        .sim-board-outline .sim-board-pin-hover:hover + * + .sim-board-pin-lbl-hover,\n        .sim-board-pin-lbl-hover.highlight {\n            visibility: visible;\n        }\n        /* Graying out */\n        .grayed .sim-board-pin-lbl:not(.highlight) {\n            fill: #AAA;\n        }\n        .grayed .sim-board-pin:not(.highlight) {\n            fill:#BBB;\n            stroke:#777;\n        }\n        .grayed .gray-cover {\n            visibility: inherit;\n        }\n        .grayed .sim-cmp:not(.notgrayed) {\n            opacity: 0.3;\n        }\n        /* Highlighting */\n        .sim-board-pin-lbl.highlight {\n            fill: #000;\n            font-weight: bold;\n        }\n        .sim-board-pin.highlight {\n            fill:#999;\n            stroke:#000;\n        }\n        `;const n=.7*t.PIN_DIST,o=1.5*n,r=.66666*t.PIN_DIST,i=.66666*t.PIN_DIST+t.PIN_DIST/3;let s=0;t.GenericBoardSvg=class{constructor(a){this.props=a,this.allPins=[],this.allLabels=[],this.pinNmToLbl={},this.pinNmToPin={},this.id=s++;let l=a.visualDef,c=a.wireframe&&l.outlineImage?l.outlineImage:l.image,u=t.mkImageSVG({image:c,width:l.width,height:l.height,imageUnitDist:l.pinDist,targetUnitDist:t.PIN_DIST}),p=t.mkScaleFn(l.pinDist,t.PIN_DIST);this.width=u.w,this.height=u.h;let d=u.el;this.element=e.svg.elt("svg"),e.svg.hydrate(this.element,{version:"1.0",viewBox:`0 0 ${this.width} ${this.height}`,class:`sim sim-board-id-${this.id}`,x:"0px",y:"0px"}),a.wireframe&&e.U.addClass(this.element,"sim-board-outline"),this.style=e.svg.child(this.element,"style",{}),this.style.textContent+=t.BOARD_SYTLE,this.defs=e.svg.child(this.element,"defs",{}),this.g=e.svg.elt("g"),this.element.appendChild(this.g),this.g.appendChild(d),this.background=d,e.svg.hydrate(d,{class:"sim-board"});const g=()=>{let t=e.svg.elt("circle"),n=r;return e.svg.hydrate(t,{class:"sim-board-pin",r:n/2}),{el:t,w:n,h:n,x:0,y:0}},h=()=>{let t=e.svg.elt("circle"),n=i;return e.svg.hydrate(t,{class:"sim-board-pin-hover",r:n/2}),{el:t,w:n,h:n,x:0,y:0}},f=()=>{let t=e.svg.elt("rect"),n=r;return e.svg.hydrate(t,{class:"sim-board-pin",width:n,height:n}),{el:t,w:n,h:n,x:0,y:0}},_=()=>{let t=e.svg.elt("rect"),n=i;return e.svg.hydrate(t,{class:"sim-board-pin-hover",width:n,height:n}),{el:t,w:n,h:n,x:0,y:0}};let m=l.pinBlocks.map(((n,o)=>{let r=p(n.x)+t.PIN_DIST/2,i=p(n.y)+t.PIN_DIST/2,s=n.labels.length,a=t.mkGrid({xOffset:r,yOffset:i,rowCount:1,colCount:s,pinDist:t.PIN_DIST,mkPin:l.useCrocClips?g:f,mkHoverPin:l.useCrocClips?h:_,getRowName:()=>`${o+1}`,getColName:e=>n.labels[e],getGroupName:()=>n.labels.join(" ")});a.allPins,a.g;return e.U.addClass(a.g,"sim-board-pin-group"),a})),y=[];m.forEach(((e,t)=>e.allPins.forEach(((e,n)=>{this.allPins.push(e),y.push(l.pinBlocks[t])})))),this.allPins.forEach((t=>{let n=t.col;e.svg.hydrate(t.el,{title:n}),e.svg.hydrate(t.hoverEl,{title:n})})),this.allPins.forEach((e=>{this.pinNmToPin[e.col]=e}));const k=(e,n,o,r,i)=>{let s,a;if("below"===i){a=e,s=n+12+.25*o*r.length}else{a=e,s=n-11-.32*o*r.length}return t.mkTxt(a,s,o,-90,r)};this.allLabels=this.allPins.map(((t,r)=>{let i=y[r];return((t,r,i,s)=>{let a=k(t,r,n,i,s);e.U.addClass(a,"sim-board-pin-lbl");let l=k(t,r,o,i,s);return e.U.addClass(l,"sim-board-pin-lbl-hover"),{el:a,hoverEl:l,txt:i}})(t.cx,t.cy,t.col,i.labelPosition||"above")})),this.allPins.forEach(((e,t)=>{let n=this.allLabels[t];this.pinNmToLbl[e.col]=n})),this.allPins.forEach(((e,t)=>{let n=this.allLabels[t];this.g.appendChild(e.el),this.g.appendChild(e.hoverEl),this.g.appendChild(n.el),this.g.appendChild(n.hoverEl)}))}findPin(e){let t=this.pinNmToPin[e];return!t&&this.props.boardDef.gpioPinMap&&(e=this.props.boardDef.gpioPinMap[e])&&(t=this.pinNmToPin[e]),t}findPinLabel(e){let t=this.pinNmToLbl[e];return!t&&this.props.boardDef.gpioPinMap&&(e=this.props.boardDef.gpioPinMap[e])&&(t=this.pinNmToLbl[e]),t}getCoord(e){let t=this.findPin(e);return t?[t.cx,t.cy]:null}mkGrayCover(t,n,o,r){let i=e.svg.elt("rect");return e.svg.hydrate(i,{x:t,y:n,width:o,height:r,class:"gray-cover"}),i}getView(){return{el:this.element,w:this.width,h:this.height,x:0,y:0}}getPinDist(){return t.PIN_DIST}highlightPin(t){let n=this.findPinLabel(t),o=this.findPin(t);n&&o&&(e.U.addClass(n.el,"highlight"),e.U.addClass(n.hoverEl,"highlight"),e.U.addClass(o.el,"highlight"),e.U.addClass(o.hoverEl,"highlight"))}}}(e.visuals||(e.visuals={}))}(pxsim||(pxsim={})),function(e){!function(t){function n(e){return t.mkImageSVG({image:e.image,width:e.width,height:e.height,imageUnitDist:e.pinDistance,targetUnitDist:t.PIN_DIST})}t.mkGenericPartSVG=n;t.GenericPart=class{constructor(t){this.style="",this.defs=[];let o=n(t).el;this.element=e.svg.elt("g"),this.element.appendChild(o)}moveToCoord(e){t.translateEl(this.element,e)}init(e,t,n){}updateState(){}updateTheme(){}}}(e.visuals||(e.visuals={}))}(pxsim||(pxsim={})),function(e){!function(t){const n=t.PIN_DIST/2.5,o=.7;function r(e){return e.replace(/\#/g,"-").replace(/\(/g,"-").replace(/\)/g,"-").replace(/\,/g,"-").replace(/\./g,"-").replace(/\s/g,"")}let i;function s(t,n,o,r){const i=e=>`${e[0]}, ${e[1]}`;let[s,a]=t,[l,c]=n,u=c-a,p=[s,a+u*o],d=[l,c-u*o],g=e.svg.mkPath("sim-bb-wire",`M${i(t)} C${i(p)} ${i(d)} ${i(n)}`);return e.U.addClass(g,`wire-stroke-${r}`),g}function a(t,n,o){const r=e=>`${e[0]}, ${e[1]}`;let i=e.svg.mkPath("sim-bb-wire",`M${r(t)} L${r(n)}`);return e.U.addClass(i,`wire-stroke-${o}`),i}function l(o,r){const i=t.PIN_DIST/4;let s=e.svg.elt("circle"),a=o[0],l=o[1],c=n/2+i/2;return e.svg.hydrate(s,{cx:a,cy:l,r:c,class:"sim-bb-wire-end"}),e.U.addClass(s,`wire-fill-${r}`),s.style["stroke-width"]=`${i}px`,s}function c(n,o,r){let i=.24*t.PIN_DIST,s=10*i,a=2*i,l=6*i,c=i;const u=t.PIN_DIST/4;let[p,d]=n,g=o?-1:1,h=e.svg.elt("g"),f=e.svg.elt("rect"),_=s,m=a,y=p-m/2,k=d-_/2;e.svg.hydrate(f,{x:y,y:k,width:m,height:_,rx:.5,ry:.5,class:"sim-bb-wire-end"}),f.style["stroke-width"]=`${u}px`;let b=e.svg.elt("rect"),v=l,T=c,E=p-T/2,S=d+g*(_/2+v/2)-v/2;return e.svg.hydrate(b,{x:E,y:S,width:T,height:v,class:"sim-bb-wire-bare-end"}),b.style.fill="#bbb",h.appendChild(b),h.appendChild(f),{el:h,x:y-u,y:Math.min(k,S),w:m+2*u,h:_+v}}function u(n,o,r){let i=.24*t.PIN_DIST;const s=4*i,a=10*i,l=3.5*i,c=3.5*i,u=t.PIN_DIST/4;let[p,d]=n,g=o?-1:1,h=e.svg.elt("g"),f=e.svg.elt("polygon"),_=a,m=s,y=p-m/2,k=d-_/2;const b=o?.15:.3,v=o?.7:1-.7,T=o?.3:.15;e.svg.hydrate(f,{points:((...e)=>e.map((e=>(e=>`${e[0]},${e[1]}`)(e))).join(" "))([y+m*b,k],[y+m*(1-b),k],[y+m,k+_*v],[y+m*(1-T),k+_],[y+m*T,k+_],[y,k+_*v])}),e.svg.hydrate(f,{rx:.5,ry:.5,class:"sim-bb-wire-end"}),f.style["stroke-width"]=`${u}px`;let E=e.svg.elt("rect"),S=l,C=c,x=p-C/2,B=d+g*(_/2+S/2)-S/2;return e.svg.hydrate(E,{x:x,y:B,width:C,height:S,class:"sim-bb-wire-bare-end"}),h.appendChild(E),h.appendChild(f),{el:h,x:y-u,y:Math.min(k,B),w:m+2*u,h:_+S}}t.WIRES_CSS=`\n        .sim-bb-wire {\n            fill:none;\n            stroke-linecap: round;\n            stroke-width:${n}px;\n            pointer-events: none;\n        }\n        .sim-bb-wire-end {\n            stroke:#333;\n            fill:#333;\n        }\n        .sim-bb-wire-bare-end {\n            fill: #ccc;\n        }\n        .sim-bb-wire-hover {\n            stroke-width: ${n}px;\n            visibility: hidden;\n            stroke-dasharray: ${t.PIN_DIST/10},${t.PIN_DIST/1.5};\n            /*stroke-opacity: 0.4;*/\n        }\n        .grayed .sim-bb-wire-ends-g:not(.highlight) .sim-bb-wire-end {\n            stroke: #777;\n            fill: #777;\n        }\n        .grayed .sim-bb-wire:not(.highlight) {\n            stroke: #CCC;\n        }\n        .sim-bb-wire-ends-g:hover .sim-bb-wire-end {\n            stroke: red;\n            fill: red;\n        }\n        .sim-bb-wire-ends-g:hover .sim-bb-wire-bare-end {\n            stroke: #FFF;\n            fill: #FFF;\n        }\n        `,function(e){e[e.BBJumper=0]="BBJumper",e[e.OpenJumper=1]="OpenJumper",e[e.Croc=2]="Croc"}(i=t.WireEndStyle||(t.WireEndStyle={})),t.mkWirePart=function(n,o,r=!1){let i,s=e.svg.elt("g"),[a,l]=n,p=[a-15,l-50],d=[a+15,l+50];o=t.mapWireColor(o),i=r?u(p,!0,o):c(p,!0,o);let g=function(t,n,o){const r=e=>`${e[0]}, ${e[1]}`;let[i,s]=t,[a,l]=n,c=l-s,u=[i,s+.8*c],p=[a,l-.8*c],d=e.svg.mkPath("sim-bb-wire",`M${r(t)} C${r(u)} ${r(p)} ${r(n)}`);return d.style.stroke=o,{el:d,x:Math.min(i,a),y:Math.min(s,l),w:Math.abs(i-a),h:Math.abs(s-l)}}(p,d,o),h=c(d,!1,o);s.appendChild(g.el),s.appendChild(i.el),s.appendChild(h.el);let f=Math.min(i.x,h.x),_=Math.max(i.x+i.w,h.x+h.w),m=Math.min(i.y,h.y);return{el:s,x:f,y:m,w:_-f,h:Math.max(i.y+i.h,h.y+h.h)-m}};t.WireFactory=class{constructor(e,n,o,r,i,s){this.nextWireId=0,this.styleEl=r,this.styleEl.textContent+=t.WIRES_CSS,this.underboard=e,this.overboard=n,this.boardEdges=o,this.getLocCoord=i,this.getPinStyle=s}indexOfMin(e){let t=0,n=e[0];for(let o=1;o<e.length;o++)e[o]<n&&(n=e[o],t=o);return t}closestEdgeIdx(e){let t=this.boardEdges.map((t=>Math.abs(e[1]-t)));return this.indexOfMin(t)}closestEdge(e){return this.boardEdges[this.closestEdgeIdx(e)]}drawWire(n,i,c){let u=[],p=e.svg.child(this.overboard,"g",{class:"sim-bb-wire-group"});const d=e=>{const n=t.PIN_DIST/2;let o,r=this.closestEdge(e);return o=r-e[1]<0?r-n:r+n,[e[0],o]};let g=this.nextWireId++,h=r(c),f=l(n,h),_=l(i,h),m=e.svg.child(p,"g",{class:"sim-bb-wire-ends-g"});m.appendChild(f),m.appendChild(_);let y=this.closestEdgeIdx(n),k=this.closestEdgeIdx(i);if(y==k){let e=a(n,i,h);p.appendChild(e),u.push(e)}else{let t,r,l=d(n),c=d(i),f=a(n,l,h),_=a(i,c,h);!(1!=y&&2!=y||1!=k&&2!=k)?(t=s(l,c,o,h),r=s(l,c,o,h)):(t=a(l,c,h),r=a(l,c,h)),e.U.addClass(r,"sim-bb-wire-hover"),p.appendChild(f),u.push(f),p.appendChild(_),u.push(_),this.underboard.appendChild(t),u.push(t),p.appendChild(r),u.push(r);let b=`sim-bb-wire-id-${g}`;const v=t=>e.U.addClass(t,b);v(m),v(r),this.styleEl.textContent+=`\n                    .${b}:hover ~ .${b}.sim-bb-wire-hover {\n                        visibility: visible;\n                    }`}let b=`\n                .wire-stroke-${h} {\n                    stroke: ${t.mapWireColor(c)};\n                }\n                .wire-fill-${h} {\n                    fill: ${t.mapWireColor(c)};\n                }\n                `;return this.styleEl.textContent+=b,{endG:m,end1:f,end2:_,wires:u}}drawWireWithCrocs(n,i,c,p=!1){let d=[],g=e.svg.child(this.overboard,"g",{class:"sim-bb-wire-group"});const h=e=>{const n=t.PIN_DIST/2;let o,r=this.closestEdge(e);return o=r-e[1]<0?r-n:r+n,[e[0],o]};let f=this.nextWireId++,_=r(c),m=l(n,_),y=i,[k,b]=i;i=[k,b+40],[k,b]=i;let v,T=[k,b+-17];v=p?function(n,o,r){let i=.24*t.PIN_DIST,s=4*i,a=1.2*i,l=10*i,c=i;const u=t.PIN_DIST/4;let[p,d]=n,g=o?-1:1,h=e.svg.elt("g"),f=e.svg.elt("rect"),_=s,m=a,y=p-m/2,k=d+10-_/2;e.svg.hydrate(f,{x:y,y:k,width:m,height:_,rx:.5,ry:.5,class:"sim-bb-wire-end"}),f.style["stroke-width"]=`${u}px`;let b=e.svg.elt("rect"),v=l,T=c,E=p-T/2,S=d+10+g*(_/2+v/2)-v/2;return e.svg.hydrate(b,{x:E,y:S,width:T,height:v,class:"sim-bb-wire-bare-end"}),b.style.fill="#bbb",h.appendChild(b),h.appendChild(f),{el:h,x:y-u,y:Math.min(k,S),w:m+2*u,h:_+v}}(T,!0):u(T,!0);let E=v.el,S=e.svg.child(g,"g",{class:"sim-bb-wire-ends-g"});S.appendChild(m);let C=this.closestEdgeIdx(n),x=this.closestEdgeIdx(y);if(C==x){let e=a(n,i,_);g.appendChild(e),d.push(e)}else{let t,r,l=h(n),c=a(n,l,_);!(1!=C&&2!=C||1!=x&&2!=x)?(t=s(l,i,o,_),r=s(l,i,o,_)):(t=a(l,i,_),r=a(l,i,_)),e.U.addClass(r,"sim-bb-wire-hover"),g.appendChild(c),d.push(c),this.underboard.appendChild(t),d.push(t);let u=`sim-bb-wire-id-${f}`;const p=t=>e.U.addClass(t,u);p(S),p(r),this.styleEl.textContent+=`\n                    .${u}:hover ~ .${u}.sim-bb-wire-hover {\n                        visibility: visible;\n                    }`}S.appendChild(E);let B=`\n                .wire-stroke-${_} {\n                    stroke: ${t.mapWireColor(c)};\n                }\n                .wire-fill-${_} {\n                    fill: ${t.mapWireColor(c)};\n                }\n                `;return this.styleEl.textContent+=B,{endG:S,end1:m,end2:E,wires:d}}checkWire(e,t){let n=this.getLocCoord(e),o=this.getLocCoord(t);return!!n&&!!o}addWire(e,t,n){let o=this.getLocCoord(e),r=this.getLocCoord(t);if(!o||!r)return void console.debug(`unable to allocate wire for ${e} or ${t}`);let i,s=this.getPinStyle(t);return i="dalboard"==t.type&&"croc"==s?this.drawWireWithCrocs(o,r,n):this.drawWire(o,r,n),i}}}(e.visuals||(e.visuals={}))}(pxsim||(pxsim={})),function(e){!function(t){t.startDebuggerAsync=function(e){new n(e).start()};class n{constructor(e){this.container=e,this.pkgLoaded=!1,this.intervalRunning=!1}start(){this.initializeWebsocket(),this.intervalRunning||(this.intervalRunning=!0,this.intervalId=setInterval((()=>{if(!this.ws)try{this.initializeWebsocket()}catch(e){console.warn(`Connection to server failed, retrying in ${n.RETRY_MS} ms`)}}),n.RETRY_MS)),this.session=new pxsim.SimDebugSession(this.container),this.session.start(this)}initializeWebsocket(){e.BrowserUtils.isLocalHost()&&e.Cloud.localToken&&(e.debug("initializing debug pipe"),this.ws=new WebSocket("ws://localhost:3234/"+e.Cloud.localToken+"/simdebug"),this.ws.onopen=t=>{e.debug("debug: socket opened")},this.ws.onclose=t=>{e.debug("debug: socket closed"),this.closeListener&&this.closeListener(),this.session.stopSimulator(),this.ws=void 0},this.ws.onerror=t=>{e.debug("debug: socket closed due to error"),this.errorListener&&this.errorListener(t.type),this.session.stopSimulator(),this.ws=void 0},this.ws.onmessage=t=>{let n;try{n=JSON.parse(t.data)}catch(t){e.debug("debug: could not parse message")}n&&("runner"===n.type?this.handleRunnerMessage(n):("request"===n.type&&"launch"===n.command&&this.sendRunnerMessage("configure",{projectDir:n.arguments.projectDir}),this.dataListener(n)))})}send(e){this.ws.send(e)}onData(e){this.dataListener=e}onError(e){this.errorListener=e}onClose(e){this.closeListener=e}close(){this.session&&this.session.stopSimulator(!0),this.intervalRunning&&(clearInterval(this.intervalId),this.intervalId=void 0),this.ws&&this.ws.close()}handleRunnerMessage(e){switch(e.subtype){case"ready":this.sendRunnerMessage("ready");break;case"runcode":this.runCode(e)}}runCode(t){const n=[];t.breakpoints.forEach((e=>{n.push([e.id,{verified:!0,line:e.line,column:e.column,endLine:e.endLine,endColumn:e.endColumn,source:{path:e.fileName}}])})),this.session.runCode(t.code,t.usedParts,t.usedArguments,new pxsim.BreakpointMap(n),e.appTarget.simulator.boardDefinition)}sendRunnerMessage(e,t={}){t.subtype=e,t.type="runner",this.send(JSON.stringify(t))}}n.RETRY_MS=2500,t.DebugRunner=n}(e.runner||(e.runner={}))}(pxt||(pxt={})),function(e){!function(t){function n(){return{blocksAspectRatio:window.innerHeight<window.innerWidth?1.62:1/1.62,snippetClass:"lang-blocks",signatureClass:"lang-sig",blocksClass:"lang-block",blocksXmlClass:"lang-blocksxml",diffBlocksXmlClass:"lang-diffblocksxml",diffClass:"lang-diff",diffStaticPythonClass:"lang-diffspy",diffBlocksClass:"lang-diffblocks",staticPythonClass:"lang-spy",simulatorClass:"lang-sim",linksClass:"lang-cards",namespacesClass:"lang-namespaces",apisClass:"lang-apis",codeCardClass:"lang-codecard",packageClass:"lang-package",jresClass:"lang-jres",assetJSONClass:"lang-assetsjson",projectClass:"lang-project",snippetReplaceParent:!0,simulator:!0,showEdit:!0,hex:!0,tutorial:!1,showJavaScript:!1,hexName:e.appTarget.id}}function o(e){"undefined"!=typeof hljs&&(e.hasClass("highlight")?hljs.highlightBlock(e[0]):e.find("code.highlight").each((function(e,t){hljs.highlightBlock(t)})),r(e))}function r(t){t.find("span.hljs-comment:contains(@highlight)").each(((t,n)=>{try{!function(e){const t=$(e),n=document.createElement("span");n.className="highlight-line";let o=e.nextSibling;if(!o||o.nodeType!=Node.TEXT_NODE)return;let r=o.textContent,i=r.indexOf("\n");if(i<0)return;o.textContent=r.substring(0,i+1),$(document.createTextNode(r.substring(i+1).replace(/^\s+/,""))).insertAfter($(o)),o=o.nextSibling;for(;o;){let e=o.nextSibling;if(o.nodeType==Node.TEXT_NODE){r=o.textContent;const t=r.indexOf("\n");if(!(t<0)){n.appendChild(document.createTextNode(r.substring(0,t))),o.textContent=r.substring(t+1);break}n.appendChild(o),o=e}else n.appendChild(o),o=e}$(n).insertAfter(t),t.remove()}(n)}catch(t){e.reportException(t)}}))}function i(e,t){e.append($('<div class="ui content blocks"/>').append(t))}function s(e,t,n){e.append($('<div class="ui content js"><div class="subheading"><i class="ui icon xicon js"></i>JavaScript</div></div>').append(t)),o(t)}function a(e,t,n){e.append($('<div class="ui content py"><div class="subheading"><i class="ui icon xicon python"></i>Python</div></div>').append(t)),o(t)}function l(e,t){const n=$('<a class="item" role="button" tabindex="0"><i role="presentation" aria-hidden="true"></i><span class="ui desktop only"></span></a>');return n.attr("aria-label",e),n.attr("title",e),n.find("i").attr("class",t),n.find("span").text(e),n.keypress((e=>{const t="number"==typeof e.which?e.which:e.keyCode;13!==t&&32!==t||(e.preventDefault(),e.currentTarget.click())})),n}function c(t,n,o,r,c,u,p={}){let d=$('<div class="ui bottom attached tabular icon small compact menu hideprint"> <div class="right icon menu"></div></div>'),g=$('<div class="ui top attached segment codewidget"></div>'),h=d.find(".right.menu");const f=e.appTarget.appTheme||{};if(p.showEdit&&!f.hideDocsEdit&&u){const n=l(lf("Edit"),"edit icon"),{package:o,compileBlocks:i,compilePython:s}=u,a=o.host();if(c&&i?(o.setPreferredEditor(e.BLOCKS_PROJECT_NAME),a.writeFile(o,e.MAIN_BLOCKS,i.outfiles[e.MAIN_BLOCKS])):r&&s?(o.setPreferredEditor(e.PYTHON_PROJECT_NAME),a.writeFile(o,e.MAIN_PY,i.outfiles[e.MAIN_PY])):o.setPreferredEditor(e.JAVASCRIPT_PROJECT_NAME),t.assetJSON)for(const e of Object.keys(t.assetJSON))o.config.files.indexOf(e)<0&&o.config.files.push(e),a.writeFile(o,e,t.assetJSON[e]);const p=o.compressToFileAsync();n.click((()=>{e.tickEvent("docs.btn",{button:"edit"}),p.then((n=>{window.open(`${function(t){return(t.pxtUrl||e.appTarget.appTheme.homeUrl||"").replace(/\/$/,"")}(t)}/#project:${ts.pxtc.encodeBase64(e.Util.uint8ArrayToString(n))}`,"pxt")}))})),h.append(n)}if(t.showJavaScript||!c&&!r?(g.append(o),m(),b()):c?(g.append(c),y(),b()):r&&(g.append(r),m(),y()),p.run&&!f.hideDocsSimulator){let n=l(lf("Run"),"play icon").click((()=>{if(e.tickEvent("docs.btn",{button:"sim"}),g.find(".sim")[0])g.find(".sim").remove(),v(g);else{let n="81.97%";e.appTarget.simulator&&(n=100/e.appTarget.simulator.aspectRatio+"%");const r=t.package?"&deps="+encodeURIComponent(t.package):"",i=k(t)+"#nofooter=1"+r,s=t.assetJSON?`data-assets="${encodeURIComponent(JSON.stringify(t.assetJSON))}"`:"",a=encodeURIComponent(o.text());let l=$(`<div class="ui card sim"><div class="ui content"><div style="position:relative;height:0;padding-bottom:${n};overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="${i}" data-code="${a}" ${s} allowfullscreen="allowfullscreen" sandbox="allow-popups allow-forms allow-scripts allow-same-origin" frameborder="0"></iframe></div></div></div>`);g.append(l),v(l)}}));h.append(n)}if(p.hexname&&p.hex){let t=l(lf("Download"),"download icon").click((()=>{e.tickEvent("docs.btn",{button:"hex"}),e.BrowserUtils.browserDownloadBinText(p.hex,p.hexname,{contentType:e.appTarget.compile.hexMimeType})}));h.append(t)}let _=$("<div class=codesnippet></div>");function m(){if(!c)return;const t=l(lf("Blocks"),"icon xicon blocks").click((()=>{e.tickEvent("docs.btn",{button:"blocks"}),g.find(".blocks")[0]?(g.find(".blocks").remove(),v(g)):(i(o?o.parent():g,c),v(c))}));h.append(t)}function y(){if(o)if(p.showJs)s(g,o);else{const t=l("JavaScript","icon xicon js").click((()=>{e.tickEvent("docs.btn",{button:"js"}),g.find(".js")[0]?(g.find(".js").remove(),v(g)):(s(c?c.parent():g,o),v(o))}));h.append(t)}}function b(){if(r)if(p.showPy)a(g,r);else{const t=l("Python","icon xicon python").click((()=>{e.tickEvent("docs.btn",{button:"py"}),g.find(".py")[0]?(g.find(".py").remove(),v(g)):(a(c?c.parent():g,r),v(r))}));h.append(t)}}function v(e){var t;null===(t=e[0])||void 0===t||t.scrollIntoView({behavior:"smooth",block:"center"})}h.children().length&&_.append(d),_.append(g),n.replaceWith(_)}t.defaultClientRenderOptions=n;let u,p=[];function d(t,n,o){if(!t)return Promise.resolve();let r=$("."+t).first();return r[0]?(o.emPixels||(o.emPixels=18),o.layout||(o.layout=e.blocks.BlockLayout.Align),o.splitSvg=!0,p.push({el:r,source:r.text(),options:o,render:n}),r.addClass("lang-shadow"),r.removeClass(t),d(t,n,o)):Promise.resolve()}function g(e){if(!e||e.kind!=ts.SyntaxKind.ExpressionStatement)return null;let t=e;if(!t.expression||t.expression.kind!=ts.SyntaxKind.CallExpression)return null;let n=t.expression;return pxtc.pxtInfo(n).callInfo}function h(t){return u||(u=e.runner.decompileSnippetAsync("",t)),u}function f(t,n){if(!n)return;const o=/^\/(v\d+)/.exec(n.url),r=/^\/(v\d+)/.exec(window.location.pathname),i=/#doc/i.test(window.location.href);n.url&&!o&&r&&!i&&(n.url=`/${r[1]}/${n.url}`),t.append(e.docs.codeCard.render(n,{hideHeader:!0,shortName:!0}))}function _(t,n,o){const r=n.attributes,i=!r.blockHidden&&Blockly.Blocks[r.blockId];if(null==i?void 0:i.codeCard){const n=e.U.clone(i.codeCard);o&&(n.style=o),f(t,n)}else f(t,{name:n.qName,description:r.jsDoc,url:r.help||void 0,style:o})}function m(t,n,o,r){return d(n,((t,n)=>{const i=n.compileProgram;if(!i)return;const s=i.getSourceFile(e.MAIN_TS).statements.slice(0),a=$("<div />").addClass("ui cards");a.attr("role","listbox"),s.forEach((t=>{const o=t.kind,i=g(t);if(i&&n.apiInfo&&n.apiInfo.byQName[i.qName]){const e=n.apiInfo.byQName[i.qName],t=e.attributes,o=Blockly.Blocks[t.blockId];if(r){const r=e,i=n.compileBlocks.blocksInfo.apis.byQName[r.namespace];f(a,{name:i.attributes.blockNamespace||i.name,url:i.attributes.help||"reference/"+(i.attributes.blockNamespace||i.name).toLowerCase(),description:i.attributes.jsDoc,blocksXml:o&&o.codeCard?o.codeCard.blocksXml:t.blockId?`<xml xmlns="http://www.w3.org/1999/xhtml"><block type="${t.blockId}"></block></xml>`:void 0})}else _(a,e)}else switch(o){case ts.SyntaxKind.ExpressionStatement:{const n=t;switch(n.expression.kind){case ts.SyntaxKind.TrueKeyword:case ts.SyntaxKind.FalseKeyword:f(a,{name:"Boolean",url:"blocks/logic/boolean",description:lf("True or false values"),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="logic_boolean"><field name="BOOL">TRUE</field></block></xml>'});break;default:e.debug(`card expr kind: ${n.expression.kind}`)}break}case ts.SyntaxKind.IfStatement:f(a,{name:r?"Logic":"if",url:"blocks/logic"+(r?"":"/if"),description:lf(r?"Logic operators and constants":"Conditional statement"),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="controls_if"></block></xml>'});break;case ts.SyntaxKind.WhileStatement:f(a,{name:r?"Loops":"while",url:"blocks/loops"+(r?"":"/while"),description:lf(r?"Loops and repetition":"Repeat code while a condition is true."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="device_while"></block></xml>'});break;case ts.SyntaxKind.ForOfStatement:f(a,{name:r?"Loops":"for of",url:"blocks/loops"+(r?"":"/for-of"),description:lf(r?"Loops and repetition":"Repeat code for each item in a list."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="controls_for_of"></block></xml>'});break;case ts.SyntaxKind.BreakStatement:f(a,{name:r?"Loops":"break",url:"blocks/loops"+(r?"":"/break"),description:lf(r?"Loops and repetition":"Break out of the current loop."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="break_keyword"></block></xml>'});break;case ts.SyntaxKind.ContinueStatement:f(a,{name:r?"Loops":"continue",url:"blocks/loops"+(r?"":"/continue"),description:lf(r?"Loops and repetition":"Skip iteration and continue the current loop."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="continue_keyboard"></block></xml>'});break;case ts.SyntaxKind.ForStatement:{let e=t,n=!0;3==e.condition.getChildCount()&&(n=!("0"==e.condition.getChildAt(0).getText()||e.condition.getChildAt(1).kind==ts.SyntaxKind.LessThanToken)),f(a,n?{name:r?"Loops":"for",url:"blocks/loops"+(r?"":"/for"),description:lf(r?"Loops and repetition":"Repeat code for a given number of times using an index."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="controls_simple_for"></block></xml>'}:{name:r?"Loops":"repeat",url:"blocks/loops"+(r?"":"/repeat"),description:lf(r?"Loops and repetition":"Repeat code for a given number of times."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="controls_repeat_ext"></block></xml>'});break}case ts.SyntaxKind.VariableStatement:f(a,{name:r?"Variables":"variable declaration",url:"blocks/variables"+(r?"":"/assign"),description:lf(r?"Variables":"Assign a value to a named variable."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="variables_set"></block></xml>'});break;default:e.debug(`card kind: ${o}`)}})),o&&(t=t.parent()),t.replaceWith(a)}),{package:t.package,aspectRatio:t.blocksAspectRatio,assets:t.assetJSON})}function y(t,n){if(!t)return Promise.resolve();let o=$("."+t).first();if(!o[0])return Promise.resolve();o.removeClass(t);const r=e.gallery.parseCodeCardsHtml(o[0]);return r||o.append($("<div/>").addClass("ui segment warning").text("invalid codecard format")),n.snippetReplaceParent&&(o=o.parent()),function(t,n,o){if(!n||0==n.length)return Promise.resolve();if(0==n.length){let r=e.docs.codeCard.render(n[0],o);t.replaceWith(r)}else{let r=document.createElement("div");r.className="ui cards",r.setAttribute("role","listbox"),n.forEach((t=>{const n=/^\/(v\d+)/.exec(t.url),i=/^\/(v\d+)/.exec(window.location.pathname),s=/#doc/i.test(window.location.href);t.url&&!n&&i&&!s&&(t.url=`/${i[1]}${t.url}`);const a=e.docs.codeCard.render(t,o);if(r.appendChild(a),"package"==t.cardType){const n=e.github.parseRepoId((t.url||"").replace(/^\/pkg\//,""));n&&e.packagesConfigAsync().then((i=>{switch(e.github.repoStatus(n,i)){case e.github.GitRepoStatus.Banned:a.remove();break;case e.github.GitRepoStatus.Approved:t.imageUrl=e.github.mkRepoIconUrl(n),r.insertBefore(e.docs.codeCard.render(t,o),a),a.remove()}})).catch((n=>{e.reportException(n),e.debug(`failed to load repo ${t.url}`)}))}})),t.replaceWith(r)}return Promise.resolve()}(o,r,{hideHeader:!0}).then((()=>e.U.delay(1,y(t,n))))}function k(t){return t.pxtUrl?t.pxtUrl+"/--run":e.webConfig&&e.webConfig.runUrl?e.webConfig.runUrl:"/--run"}function b(t){const n={showEdit:!!t.showEdit,run:!!t.simulator};$("code.lang-python").each(((o,i)=>{!function(o,i){"undefined"!=typeof hljs&&($(o).text($(o).text().replace(/^\s*\r?\n/,"")),hljs.highlightBlock(o),r($(o)));const s=e.U.clone(n);i&&(s.run=!1,s.showEdit=!1),c(t,$(o).parent(),$(o),void 0,void 0,void 0,s)}(i,!1),$(i).removeClass("lang-python")}))}t.renderAsync=function(t){return e.analytics.enable(),t||(t=n()),t.pxtUrl&&(t.pxtUrl=t.pxtUrl.replace(/\/$/,"")),t.showEdit&&(t.showEdit=!e.BrowserUtils.isIFrame()),function(e){e.packageClass&&($("."+e.packageClass).each(((t,n)=>{let o=$(n),r=o.text().split("\n").map((e=>e.replace(/\s*/g,""))).filter((e=>!!e)).join(",");e.package=e.package?`${e.package},${r}`:r,e.snippetReplaceParent&&(o=o.parent()),o.remove()})),$(".lang-config").each(((t,n)=>{let o=$(n);e.snippetReplaceParent&&(o=o.parent()),o.remove()})))}(t),function(t){let n,o;t.jresClass&&$(`.${t.jresClass}`).each(((e,t)=>{const n=$(t);o=n.text(),t.parentElement.remove()})),t.assetJSONClass&&$(`.${t.assetJSONClass}`).each(((e,t)=>{const o=$(t);n=o.text(),t.parentElement.remove()})),t.assetJSON=function(t,n){if(!t&&!n)return;const o=e.tutorial.parseAssetJson(t)||{};if(n){const t=JSON.parse(n);o[e.TILEMAP_JRES]=JSON.stringify(t),o[e.TILEMAP_CODE]=e.emitTilemapsFromJRes(t)}return o}(n,o)}(t),p=[],function(e){let t=$("code.lang-ghost");e.snippetReplaceParent&&(t=t.parent()),t.remove()}(t),function(t){t.simulatorClass&&$("."+t.simulatorClass).each(((n,o)=>{let r=$(o),i="81.97%";e.appTarget.simulator&&(i=100/e.appTarget.simulator.aspectRatio+"%");let s=$(`<div class="ui card"><div class="ui content">\n                    <div style="position:relative;height:0;padding-bottom:${i};overflow:hidden;">\n                    <iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" allowfullscreen="allowfullscreen" frameborder="0" sandbox="allow-popups allow-forms allow-scripts allow-same-origin"></iframe>\n                    </div>\n                    </div></div>`);const a=t.package?"&deps="+encodeURIComponent(t.package):"",l=k(t)+"#nofooter=1"+a,c=encodeURIComponent(r.text().trim()),u=s.find("iframe");u.attr("src",l),u.attr("data-code",c),t.assetJSON&&u.attr("data-assets",JSON.stringify(t.assetJSON)),t.snippetReplaceParent&&(r=r.parent()),r.replaceWith(s)}))}(t),function(t){const n={showEdit:!!t.showEdit,run:!!t.simulator};function o(o,i){"undefined"!=typeof hljs&&($(o).text($(o).text().replace(/^\s*\r?\n/,"")),hljs.highlightBlock(o),r($(o)));const s=e.U.clone(n);i&&(s.run=!1,s.showEdit=!1),c(t,$(o).parent(),$(o),void 0,void 0,void 0,s)}$("code.lang-typescript").each(((e,t)=>{o(t,!1),$(t).removeClass("lang-typescript")})),$("code.lang-typescript-ignore").each(((e,t)=>{$(t).removeClass("lang-typescript-ignore"),$(t).addClass("lang-typescript"),o(t,!0),$(t).removeClass("lang-typescript")})),$("code.lang-typescript-invalid").each(((e,t)=>{$(t).removeClass("lang-typescript-invalid"),$(t).addClass("lang-typescript"),o(t,!0),$(t).removeClass("lang-typescript"),$(t).parent("div").addClass("invalid"),$(t).parent("div").prepend($("<i>",{class:"icon ban"})),$(t).addClass("invalid")})),$("code.lang-typescript-valid").each(((e,t)=>{$(t).removeClass("lang-typescript-valid"),$(t).addClass("lang-typescript"),o(t,!0),$(t).removeClass("lang-typescript"),$(t).parent("div").addClass("valid"),$(t).parent("div").prepend($("<i>",{class:"icon check"})),$(t).addClass("valid")}))}(t),b(t),Promise.resolve().then((()=>y(t.codeCardClass,t))).then((()=>function(t){return"core"==e.appTarget.id?Promise.resolve():h(t).then((t=>{let n={};const o=t.compileBlocks.blocksInfo;o.blocks.forEach((e=>{const t=(e.attributes.blockNamespace||e.namespace).split(".")[0];if(!n[t]){const e=o.apis.byQName[t];e&&e.attributes.color&&(n[t]=e.attributes.color)}}));let r="";return Object.keys(n).forEach((t=>{const o=n[t]||"#dddddd";r+=`\n                        span.docs.${t.toLowerCase()} {\n                            background-color: ${o} !important;\n                            border-color: ${e.toolbox.fadeColor(o,.1,!1)} !important;\n                        }\n                    `})),r})).then((t=>(Object.keys(e.toolbox.blockColors).forEach((n=>{const o=e.toolbox.getNamespaceColor(n);t+=`\n                        span.docs.${n.toLowerCase()} {\n                            background-color: ${o} !important;\n                            border-color: ${e.toolbox.fadeColor(o,.1,!1)} !important;\n                        }\n                    `})),t))).then((e=>{let t=document.createElement("style");t.id="namespaceColors",t.type="text/css",(document.head||document.getElementsByTagName("head")[0]).appendChild(t),t.appendChild(document.createTextNode(e))}))}(t))).then((()=>function(t){(t=e.Util.clone(t)).emPixels=18,t.snippetMode=!0;const n=$(":not(pre) > code");let o=0;return function r(){if(o>=n.length)return Promise.resolve();const i=$(n[o++]),s=i.text(),a=/^(\|+)([^\|]+)\|+$/.exec(s);if(a){const t=/^(([^\:\.]*?)[\:\.])?(.*)$/.exec(a[2]),n=t[2]?t[2].trim().toLowerCase():"",o=1==a[1].length?`docs inlinebutton ${n}`:`docs inlineblock ${n}`,s=t[3].trim();return i.replaceWith($(`<span class="${o}"/>`).text(e.U.rlf(s))),r()}const l=/^\[(.+)\]$/.exec(s);if(!l)return r();const c=l[1];return e.runner.decompileSnippetAsync(c,t).then((t=>{if(t.blocksSvg){let n=$('<span class="block"/>').append(t.blocksSvg);const o=g(t.compileProgram.getSourceFile(e.MAIN_TS).statements[0]);if(o&&t.apiInfo){const e=t.apiInfo.byQName[o.qName];e&&e.attributes.help&&(n=$('<a class="ui link"/>').attr("href",`/reference/${e.attributes.help}`).append(n))}i.replaceWith(n)}return e.U.delay(1,r())}))}()}(t))).then((()=>m(t,t.linksClass,t.snippetReplaceParent,!1))).then((()=>m(t,t.namespacesClass,t.snippetReplaceParent,!0))).then((()=>function(t,n){const o=t.apisClass;if(!o)return Promise.resolve();const r=$("."+o);return r.length?h(t).then((t=>{const o=t.compileBlocks.blocksInfo,i=e.Util.values(o.apis.byQName).filter((e=>!(e.attributes.hidden||e.attributes.deprecated||e.attributes.blockAliasFor||!e.attributes.jsDoc||!e.attributes.block||/^__/.test(e.name))));r.each(((t,o)=>{let r=$(o);const s=e.Util.toDictionary(r.text().split("\n"),(e=>e)),a=i.filter((e=>!!s[e.attributes.blockNamespace||e.namespace]));if(!a.length)return;a.sort(((e,t)=>{const n=!e.attributes.blockHidden&&Blockly.Blocks[e.attributes.blockId],o=!t.attributes.blockHidden&&Blockly.Blocks[t.attributes.blockId];return!!n!=!!o?(o?1:0)-(n?1:0):e.name.localeCompare(t.name)}));const l=$("<div />").addClass("ui divided items");l.attr("role","listbox"),a.forEach((e=>_(l,e,"item"))),n&&(r=r.parent()),r.replaceWith(l)}))})):Promise.resolve()}(t,t.snippetReplaceParent))).then((()=>function(t){return d(t.signatureClass,((n,o)=>{var r,i,s,a;let l=o.compileProgram;if(!l)return;let u=g(l.getSourceFile(e.MAIN_TS).statements[0]);if(!u||!o.apiInfo)return;const p=o.apiInfo.byQName[u.qName];if(!p)return;let d=Blockly.Blocks[p.attributes.blockId],h=(null===(r=null==d?void 0:d.codeCard)||void 0===r?void 0:r.blocksXml)||void 0;const f=h?e.blocks.render(h):(null===(i=o.compileBlocks)||void 0===i?void 0:i.success)?o.blocksSvg:void 0,_=f?$(f):void 0;let m=ts.pxtc.service.displayStringForSymbol(p,!1,o.apiInfo).split("\n")[1]+";";const y=$('<code class="lang-typescript highlight"/>').text(m),k=(null===(a=null===(s=e.appTarget)||void 0===s?void 0:s.appTheme)||void 0===a?void 0:a.python)&&ts.pxtc.service.displayStringForSymbol(p,!0,o.apiInfo).split("\n")[1],b=k&&$('<code class="lang-python highlight"/>').text(k);if(t.snippetReplaceParent&&(n=n.parent()),e.Util.isTranslationMode()){const e=$('<div class="ui segment" />');e.append($('<div class="ui header"><i class="ui xicon globe"></i></div>')),p.attributes.translationId&&e.append($('<div class="ui message">').text(p.attributes.translationId)),p.attributes.jsDoc&&e.append($('<div class="ui message">').text(p.attributes.jsDoc)),e.insertAfter(n)}c(t,n,y,b,_,o,{showJs:!0,showPy:!0,hideGutter:!0})}),{package:t.package,snippetMode:!0,aspectRatio:t.blocksAspectRatio,assets:t.assetJSON})}(t))).then((()=>function(t){if(t.tutorial)return d(t.snippetClass,((e,n)=>{const o=n.blocksSvg;t.snippetReplaceParent&&(e=e.parent());const r=$('<div class="ui segment codewidget"/>').append(o);e.replaceWith(r)}),{package:t.package,snippetMode:!1,aspectRatio:t.blocksAspectRatio,assets:t.assetJSON});let n=0;return d(t.snippetClass,((o,r)=>{const i=r.compileBlocks&&r.compileBlocks.success?$(r.blocksSvg):void 0,s=r.compilePython&&r.compilePython.success&&r.compilePython.outfiles[e.MAIN_PY],a=$('<code class="lang-typescript highlight"/>').text(o.text().trim()),l=s?$('<code class="lang-python highlight"/>').text(s.trim()):void 0;t.snippetReplaceParent&&(o=o.parent());const u=r.compileJS&&r.compileJS.success,p=t.hex&&u&&r.compileJS.outfiles[pxtc.BINARY_HEX]?r.compileJS.outfiles[pxtc.BINARY_HEX]:void 0,d=`${e.appTarget.nickname||e.appTarget.id}-${t.hexName||""}-${n++}.hex`;c(t,o,a,l,i,r,{showEdit:t.showEdit,run:t.simulator,hexname:d,hex:p})}),{package:t.package,aspectRatio:t.blocksAspectRatio,assets:t.assetJSON})}(t))).then((()=>function(e){return d(e.blocksClass,((t,n)=>{const o=n.blocksSvg;e.snippetReplaceParent&&(t=t.parent());const r=$('<div class="ui segment codewidget"/>').append(o);t.replaceWith(r)}),{package:e.package,snippetMode:!0,aspectRatio:e.blocksAspectRatio,assets:e.assetJSON})}(t))).then((()=>{return(n=t).blocksXmlClass?function t(n,o,r){let i=$("."+n).first();return i[0]?(r.emPixels||(r.emPixels=18),r.splitSvg=!0,e.runner.compileBlocksAsync(i.text(),r).then((s=>{try{o(i,s)}catch(t){e.reportException(t),i.append($("<div/>").addClass("ui segment warning").text(t.message))}return i.removeClass(n),e.U.delay(1,t(n,o,r))}))):Promise.resolve()}(n.blocksXmlClass,((e,t)=>{const o=t.blocksSvg;n.snippetReplaceParent&&(e=e.parent());const r=$('<div class="ui segment codewidget"/>').append(o);e.replaceWith(r)}),{package:n.package,snippetMode:!0,aspectRatio:n.blocksAspectRatio,assets:n.assetJSON}):Promise.resolve();var n})).then((()=>{return(n=t).diffBlocksXmlClass?function t(n,o,r){let i=$("."+n).first();if(!i[0])return Promise.resolve();r.emPixels||(r.emPixels=18),r.splitSvg=!0;const s=i.text().split(/-{10,}/),a=s[0],l=s[1];return e.runner.compileBlocksAsync("",r).then((s=>{i.removeClass(n);try{const t=e.blocks.diffXml(a,l);t?(s.blocksSvg=t.svg,o(i,s)):i.text("no changes")}catch(t){e.reportException(t),i.append($("<div/>").addClass("ui segment warning").text(t.message))}return e.U.delay(1,t(n,o,r))}))}(n.diffBlocksXmlClass,((e,t)=>{const o=t.blocksSvg;n.snippetReplaceParent&&(e=e.parent());const r=$('<div class="ui segment codewidget"/>').append(o);e.replaceWith(r)}),{package:n.package,snippetMode:!0,aspectRatio:n.blocksAspectRatio,assets:n.assetJSON}):Promise.resolve();var n})).then((()=>{return(n=t).diffBlocksClass?function t(o){let r=$("."+o).first();if(!r[0])return Promise.resolve();const{fileA:i,fileB:s}=e.diff.split(r.text(),{removeTrailingSemiColumns:!0});return e.U.promiseMapAllSeries([i,s],(t=>e.runner.decompileSnippetAsync(t,{generateSourceMap:!0}))).then((a=>{try{const t=e.blocks.decompiledDiffAsync(i,a[0].compileBlocks,s,a[1].compileBlocks,{hideDeletedTopBlocks:!0,hideDeletedBlocks:!0}),o=e.diff.render(i,s,{hideLineNumbers:!0,hideMarkerLine:!0,hideMarker:!0,hideRemoved:!0,update:!0,ignoreWhitespace:!0});let l;const[u,p]=a.map((t=>t.compilePython&&t.compilePython.outfiles&&t.compilePython.outfiles[e.MAIN_PY]));u&&p&&(l=e.diff.render(u,p,{hideLineNumbers:!0,hideMarkerLine:!0,hideMarker:!0,hideRemoved:!0,update:!0,ignoreWhitespace:!0})),c(n,r.parent(),$(o),l&&$(l),$(t.svg),void 0,{showEdit:!1,run:!1,hexname:void 0,hex:void 0})}catch(t){e.reportException(t),r.append($("<div/>").addClass("ui segment warning").text(t.message))}return e.U.delay(1,t(o))}))}(n.diffBlocksClass):Promise.resolve();var n})).then((()=>{return(n=t).diffClass?function t(o){let r=$("."+o).first();if(!r[0])return Promise.resolve();const{fileA:i,fileB:s}=e.diff.split(r.text());try{const t=e.diff.render(i,s,{hideLineNumbers:!0,hideMarkerLine:!0,hideMarker:!0,hideRemoved:!0,update:!0,ignoreWhitespace:!0});n.snippetReplaceParent&&(r=r.parent());const a=$('<div class="ui segment codewidget"/>').append(t);r.removeClass(o),r.replaceWith(a)}catch(t){e.reportException(t),r.append($("<div/>").addClass("ui segment warning").text(t.message))}return e.U.delay(1,t(o))}(n.diffClass):Promise.resolve();var n})).then((()=>function(t){const n={showEdit:!!t.showEdit,run:!!t.simulator};return d(t.staticPythonClass,((r,i)=>{const s=i.compilePython;if(s&&s.success){const a=r.clone().removeClass("lang-shadow").addClass("highlight"),l=a.clone().addClass("lang-python").text(s.outfiles[e.MAIN_PY]);a.addClass("lang-typescript"),o(l),c(t,r.parent(),a,l,void 0,i,n)}}),{package:t.package,snippetMode:!0,assets:t.assetJSON})}(t))).then((()=>function(t){return t.projectClass?function n(){let o=$("."+t.projectClass).first(),r=o[0];if(!r)return Promise.resolve();o.removeClass(t.projectClass);let i=e.Cloud.parseScriptId(r.innerText);if(i){if(t.snippetReplaceParent){r=r.parentElement;let e=document.createElement("div");r.parentElement.insertBefore(e,r),r.parentElement.removeChild(r),r=e}return e.runner.renderProjectAsync(r,i).then((()=>n()))}return n()}():Promise.resolve()}(t))).then((()=>function(){const t={};return function n(){const o=p.shift();if(!o)return Promise.resolve();const{el:r,options:i,render:s}=o;return e.runner.decompileSnippetAsync(r.text(),i).then((n=>{const o=n.compileJS&&n.compileJS.diagnostics&&n.compileJS.diagnostics.filter((e=>e.category==pxtc.DiagnosticCategory.Error));o&&o.length&&o.forEach((t=>e.reportError("docs.decompile",""+t.messageText,{code:t.code+""}))),n.blocksSvg.querySelectorAll("defs *").forEach((e=>{t[e.id]?e.remove():t[e.id]=!0})),s(r,n)}),(t=>{e.reportException(t),r.append($("<div/>").addClass("ui segment warning").text(t.message))})).finally((()=>(r.removeClass("lang-shadow"),n())))}().then((()=>{Blockly.Workspace.getAll().forEach((e=>e.dispose())),e.blocks.cleanRenderingWorkspace()}))}()))}}(e.runner||(e.runner={}))}(pxt||(pxt={})),function(e){!function(t){class n{constructor(e,t){this.ksPkg=e,this.topPkg=t,this.files={}}getKsPkg(){return this.ksPkg}getPkgId(){return this.ksPkg?this.ksPkg.id:this.id}isTopLevel(){return this.ksPkg&&0==this.ksPkg.level}setFiles(e){this.files=e}getAllFiles(){return e.Util.mapMap(this.files,((e,t)=>t))}}class o{constructor(){this.githubPackageCache={}}readFile(t,n){let o=l(t);return e.U.lookup(o.files,n)}writeFile(e,t,n){l(e).files[t]=n}getHexInfoAsync(t){return e.hexloader.getHexInfoAsync(this,t)}cacheStoreAsync(e,t){return Promise.resolve()}cacheGetAsync(e){return Promise.resolve(null)}patchDependencies(t,n,o){if(!o)return!1;const r=e.github.parseRepoId(o);if(!r)return!1;for(const n of Object.keys(t.dependencies)){const i=t.dependencies[n],s=e.github.parseRepoId(i);if(s&&r.fullName==s.fullName)return e.semver.strcmp(r.tag,s.tag)<0&&(t.dependencies[n]=o),!0}return!1}downloadPackageAsync(t,n){let o,r=t.verProtocol();"github"==r&&(o=this.githubPackageCache[t._verspec]);let i=l(t);return(o?Promise.resolve(o):t.commonDownloadAsync()).then((s=>{if(s)return"github"!=r||o||(this.githubPackageCache[t._verspec]=e.Util.clone(s)),i.setFiles(s),Promise.resolve();if("empty"==r){if(0==Object.keys(i.files).length&&i.setFiles(c()),n&&n.length){const o=l(t).files,r=JSON.parse(o[e.CONFIG_NAME]);n.forEach((e=>{a(r,e)})),o[e.CONFIG_NAME]=e.Package.stringifyConfig(r)}return Promise.resolve()}if("docs"==r){let n=c(),o=JSON.parse(n[e.CONFIG_NAME]);return t.verArgument().split(",").forEach((e=>{a(o,e)})),o.yotta||(o.yotta={}),o.yotta.ignoreConflicts=!0,n[e.CONFIG_NAME]=e.Package.stringifyConfig(o),i.setFiles(n),Promise.resolve()}return"invalid"==r?(e.log(`skipping invalid pkg ${t.id}`),Promise.resolve()):Promise.reject(`Cannot download ${t.version()}; unknown protocol`)}))}}let r,i,s;function a(e,t){let n=/^([a-zA-Z0-9_-]+)(=(.+))?$/.exec(t);if(n){if(n[3]&&this&&this.patchDependencies(e,n[1],n[3]))return!1;e.dependencies[n[1]]=n[3]||"*"}else console.warn(`unknown package syntax ${t}`);return!0}function l(e){let o=e._editorPkg;if(o)return o;let r=null;e!=t.mainPkg&&(r=l(t.mainPkg));let i=new n(e,r);return e==t.mainPkg&&(i.topPkg=i),e._editorPkg=i,i}function c(){let t=e.appTarget.tsprj,n=e.U.clone(t.files);return n[e.CONFIG_NAME]=e.Package.stringifyConfig(t.config),n[e.MAIN_BLOCKS]="",n}function u(){e.setAppTarget(window.pxtTargetBundle),e.Util.assert(!!e.appTarget);const n=window.location.href;let r,i=!1;if(/[&?]translate=1/.test(n)&&!e.BrowserUtils.isIE())r=ts.pxtc.Util.TRANSLATION_LOCALE,i=!0,e.Util.enableLiveLocalizationUpdates();else{const t=/PXT_LANG=(.*?)(?:;|$)/.exec(document.cookie),o=/(live)?(force)?lang=([a-z]{2,}(-[A-Z]+)?)/i.exec(n);r=o?o[3]:t&&t[1]||e.appTarget.appTheme.defaultLocale||navigator.userLanguage||navigator.language;const s=e.appTarget.appTheme.defaultLocale,a=null==r?void 0:r.toLocaleLowerCase(),l=e.BrowserUtils.isLocalHostDev()&&(!a||(s?s.toLocaleLowerCase()===a:"en"===a||"en-us"===a));(e.BrowserUtils.isPxtElectron()||l||e.appTarget.appTheme.disableLiveTranslations)&&!(null==o?void 0:o[1])||e.Util.enableLiveLocalizationUpdates(),i=!!o&&!!o[2]}const s=e.appTarget.versions;$&&$.fn&&$.fn.embed&&$.fn.embed.settings&&$.fn.embed.settings.sources&&$.fn.embed.settings.sources.youtube&&($.fn.embed.settings.sources.youtube.url="//www.youtube.com/embed/{id}?rel=0");const a=e.webConfig;return e.Util.updateLocalizationAsync({targetId:e.appTarget.id,baseUrl:a.commitCdnUrl,code:r,pxtBranch:s?s.pxtCrowdinBranch:"",targetBranch:s?s.targetCrowdinBranch:"",force:i}).then((()=>{t.mainPkg=new e.MainPackage(new o)}))}function p(e){console.error(e)}function d(n,o,r){const s=n?/\w+:\w+/.test(n)?n:"pub:"+n:"empty:tsprj";let a,c,u;return i&&i._verspec==s?(t.mainPkg=i,a=t.mainPkg.host(),c=Promise.resolve(),u=Promise.resolve()):(a=t.mainPkg.host(),t.mainPkg=new e.MainPackage(a),t.mainPkg._verspec=n?/\w+:\w+/.test(n)?n:"pub:"+n:"empty:tsprj",c=a.downloadPackageAsync(t.mainPkg,r),u=t.mainPkg.installAllAsync(),i=t.mainPkg),c.then((()=>a.readFile(t.mainPkg,e.CONFIG_NAME))).then((n=>n?u.then((()=>{if(o){let n=l(t.mainPkg);n.files[e.MAIN_TS]=o;let r=JSON.parse(n.files[e.CONFIG_NAME]);r.name=window.location.href.split("/").pop().split(/[?#]/)[0],n.files[e.CONFIG_NAME]=e.Package.stringifyConfig(r),t.mainPkg.config.name=r.name,-1==t.mainPkg.config.files.indexOf(e.MAIN_BLOCKS)&&t.mainPkg.config.files.push(e.MAIN_BLOCKS)}})).catch((e=>{p(lf("Cannot load extension: {0}",e.message))})):Promise.resolve()))}function g(e){let n=t.mainPkg.getTargetOptions();return n.isNative=!!e,n.hasHex=!!e,t.mainPkg.getCompileOptionsAsync(n)}function h(e,t){return g(e).then((e=>{t&&t(e);let n=pxtc.compile(e);return n.diagnostics&&n.diagnostics.length>0&&n.diagnostics.forEach((e=>{console.error(e.messageText)})),n}))}async function f(n){var o;await d(n.id,n.code,n.dependencies);let r=!1;const i=e.appTarget.versions.target;let s=await h(!1,(o=>{var s;if(n.assets){const t=JSON.parse(n.assets);for(const n of Object.keys(t)){const r=t[n];if(o.fileSystem[n]=r,o.sourceFiles.indexOf(n)<0&&o.sourceFiles.push(n),/\.jres$/.test(n)){const t=JSON.parse(r);o.jres=e.inflateJRes(t,o.jres)}}}if(n.code&&(o.fileSystem[e.MAIN_TS]=n.code),o.target.preferredEditor===e.PYTHON_PROJECT_NAME){o.target.preferredEditor=e.JAVASCRIPT_PROJECT_NAME,o.ast=!0;const t=S(pxtc.compile(o).ast,o);o.apisInfo=t,o.target.preferredEditor=e.PYTHON_PROJECT_NAME}const a=null===(s=t.mainPkg.config.targetVersions)||void 0===s?void 0:s.target;if(a&&i&&e.semver.cmp(e.semver.parse(a),e.semver.parse(i))<0)for(const t of Object.keys(o.fileSystem))!e.Util.startsWith(t,"pxt_modules")&&e.Util.endsWith(t,".ts")&&(r=!0,o.fileSystem[t]=e.patching.patchJavaScript(a,o.fileSystem[t]))}));return(null===(o=s.diagnostics)||void 0===o?void 0:o.length)>0&&r&&(e.log("Compile with upgrade rules failed, trying again with original code"),s=await h(!1,(t=>{n.code&&(t.fileSystem[e.MAIN_TS]=n.code)}))),s.diagnostics&&s.diagnostics.length>0&&console.error("Diagnostics",s.diagnostics),pxtc.buildSimJsInfo(s)}function _(e){let t={};try{let n=window.localStorage.getItem(e);n&&(t=JSON.parse(n))}catch(e){}return t}function m(n,o){if(t.editorLanguageMode=n,o!=e.Util.localeInfo()){const t=/^live-/;return t.test(o)&&e.Util.enableLiveLocalizationUpdates(),e.Util.updateLocalizationAsync({targetId:e.appTarget.id,baseUrl:e.webConfig.commitCdnUrl,code:o.replace(t,""),pxtBranch:e.appTarget.versions.pxtCrowdinBranch,targetBranch:e.appTarget.versions.targetCrowdinBranch})}return Promise.resolve()}function y(t){let n=t.data;if(n)switch(n.type){case"fileloaded":let t=n,o=t.name;m(/\.ts$/i.test(o)?s.TypeScript:s.Blocks,t.locale);break;case"popout":let r=/((\/v[0-9+])\/)?[^\/]*#(doc|md):([^&?:]+)/i.exec(window.location.href);if(r){const t=e.webConfig.docsUrl||"/--docs";let n=r[2]||"",o="doc"==r[3]?e.webConfig.isStatic?`/docs${r[4]}.html`:`${r[4]}`:`${t}?md=${r[4]}`;window.parent&&window.parent.postMessage({type:"opendoc",url:e.BrowserUtils.urlJoin(n,o)},"*")}break;case"localtoken":let i=n;i&&i.localToken&&(e.Cloud.localToken=i.localToken,C.forEach((e=>e())),C=[])}}function k(t,n){return e.Cloud.privateGetTextAsync(n+"/text").then((e=>JSON.parse(e))).then((e=>b(t,e,n)))}function b(n,o,r=null,i=!1){const a=JSON.parse(o[e.CONFIG_NAME])||{};let l=`# ${a.name} ${a.version?a.version:""}\n\n`;const c="README.md";o[c]&&(l+=o[c].replace(/^#+/,"$0#")+"\n"),a.files.filter((t=>t!=e.CONFIG_NAME&&t!=c)).filter((e=>t.editorLanguageMode==s.Blocks==/\.blocks?$/.test(e))).forEach((e=>{/^main\.(ts|blocks)$/.test(e)||(l+=`\n## ${e}\n`),/\.ts$/.test(e)?l+=`\`\`\`typescript\n${o[e]}\n\`\`\`\n`:/\.blocks?$/.test(e)?l+=`\`\`\`blocksxml\n${o[e]}\n\`\`\`\n`:l+=`\`\`\`${e.substr(e.indexOf("."))}\n${o[e]}\n\`\`\`\n`}));const u=a&&a.dependencies&&Object.keys(a.dependencies).filter((t=>t!=e.appTarget.corepkg));if(u&&u.length&&(l+=`\n## ${lf("Extensions")} #extensions\n\n${u.map((e=>`* ${e}, ${a.dependencies[e]}`)).join("\n")}\n\n\`\`\`package\n${u.map((e=>`${e}=${a.dependencies[e]}`)).join("\n")}\n\`\`\`\n`),r){let t=(e.appTarget.appTheme.shareUrl||"https://makecode.com/")+r;i&&(t="`"+t+"`"),l+=`\n${t}\n\n`}console.debug(`print md: ${l}`);return v(n,l,{print:!0})}e.react.getTilemapProject||(e.react.getTilemapProject=()=>(r||(r=new e.TilemapProject,r.loadPackage(t.mainPkg)),r)),t.initFooter=function(t,n){if(!t)return;let o=e.appTarget.appTheme,r=$("body"),i=$(t),s=$("<a/>").attr("href",o.homeUrl).attr("target","_blank");i.append(s),o.organizationLogo?s.append($("<img/>").attr("src",e.Util.toDataUri(o.organizationLogo))):s.append(lf("powered by {0}",o.title)),r.mouseenter((e=>i.fadeOut())),r.mouseleave((e=>i.fadeIn()))},t.showError=p,t.generateHexFileAsync=function(t){return d(t.id).then((()=>h(!0,(n=>{t.code&&(n.fileSystem[e.MAIN_TS]=t.code)})))).then((e=>(e.diagnostics&&e.diagnostics.length>0&&console.error("Diagnostics",e.diagnostics),e.outfiles[pxtc.BINARY_HEX])))},t.generateVMFileAsync=function(t){return e.setHwVariant("vm"),d(t.id).then((()=>h(!0,(n=>{t.code&&(n.fileSystem[e.MAIN_TS]=t.code)})))).then((e=>(console.log(e),e)))},t.simulateAsync=async function(t,n){var o,r;const i=n.builtJsInfo||await f(n),{js:s,fnArgs:a,parts:l,usedBuiltinParts:c}=i;if(!s)return void console.error("Program failed to compile");let u={};u.onSimulatorCommand=e=>{"restart"===e.command&&(h.storedState=_(n.id),p.run(s,h)),"setstate"==e.command&&e.stateKey&&e.stateValue&&function(e,t,n){let o=_(e);if(!e)return;n?o[t]=n:delete o[t];try{window.localStorage.setItem(e,JSON.stringify(o))}catch(e){}}(n.id,e.stateKey,e.stateValue)},u.messageSimulators=null===(r=null===(o=e.appTarget)||void 0===o?void 0:o.simulator)||void 0===r?void 0:r.messageSimulators;let p=new pxsim.SimulatorDriver(t,u),d=e.appTarget.simulator.boardDefinition,g=_(n.id),h={boardDefinition:d,parts:l,builtinParts:c,fnArgs:a,cdnUrl:e.webConfig.commitCdnUrl,localizedStrings:e.Util.getLocalizedStrings(),highContrast:n.highContrast,storedState:g,light:n.light,single:n.single};return e.appTarget.simulator&&!n.fullScreen&&(h.aspectRatio=l.length&&e.appTarget.simulator.partsAspectRatio?e.appTarget.simulator.partsAspectRatio:e.appTarget.simulator.aspectRatio),p.run(s,h),i},t.buildSimJsInfo=f,function(e){e[e.Blocks=0]="Blocks",e[e.TypeScript=1]="TypeScript"}(s=t.LanguageMode||(t.LanguageMode={})),t.editorLanguageMode=s.Blocks,t.setEditorContextAsync=m,t.startRenderServer=function(){e.tickEvent("renderer.ready");const n=[];let o;function r(){if(o)return;const i=n.shift();if(!i)return;const s=i.options||{};s.splitSvg=!1,e.tickEvent("renderer.job");const a=/^\s*<xml/.test(i.code);o=(async()=>{await e.BrowserUtils.loadBlocklyAsync();const n=(a?await e.runner.compileBlocksAsync(i.code,s):await t.decompileSnippetAsync(i.code,i.options)).blocksSvg,o=n.viewBox.baseVal.width,r=n.viewBox.baseVal.height,l=n?await e.blocks.layout.blocklyToSvgAsync(n,0,0,o,r):void 0;let c;try{c=l?await e.BrowserUtils.encodeToPngAsync(l.xml,{width:o,height:r}):void 0}catch(e){console.warn(e)}window.parent.postMessage({source:"makecode",type:"renderblocks",id:i.id,width:null==l?void 0:l.width,height:null==l?void 0:l.height,svg:null==l?void 0:l.svg,uri:c||(null==l?void 0:l.xml),css:null==l?void 0:l.css},"*")})().catch((e=>{window.parent.postMessage({source:"makecode",type:"renderblocks",id:i.id,error:e.message},"*")})).finally((()=>{o=void 0,r()}))}e.editor.initEditorExtensionsAsync().then((()=>{window.addEventListener("message",(function(e){const t=e.data;"renderblocks"==t.type&&(n.push(t),r())}),!1),window.parent.postMessage({source:"makecode",type:"renderready",versions:e.appTarget.versions},"*")}))},t.startDocsServer=function(t,n,o){e.tickEvent("docrenderer.ready");const r=[];function i(r,s){e.debug(`rendering ${r}`),o&&$(o).hide(),$(n).hide(),$(t).show(),e.U.delay(100).then((()=>{switch(r){case"print":const t=window.localStorage.printjob;return delete window.localStorage.printjob,b(n,JSON.parse(t),void 0,!0).then((()=>pxsim.print(1e3)));case"project":return b(n,JSON.parse(s)).then((()=>pxsim.print(1e3)));case"projectid":return k(n,JSON.parse(s)).then((()=>pxsim.print(1e3)));case"doc":return function(t,n){return n=n.replace(/^\//,""),e.Cloud.markdownAsync(n).then((e=>v(t,e,{path:n})))}(n,s);case"book":return function(t,n){n=n.replace(/^\//,""),e.tickEvent("book",{id:n}),e.log(`rendering book from ${n}`);let o;return $("#loading").find(".loader").addClass("text").text(lf("Compiling your book (this may take a minute)")),e.U.delay(100).then((()=>e.Cloud.markdownAsync(n))).then((t=>{o=e.docs.buildTOC(t),e.log(`TOC: ${JSON.stringify(o,null,2)}`);const n=[];return e.docs.visitTOC(o,(e=>{/^\//.test(e.path)&&!/^\/pkg\//.test(e.path)&&n.push(e)})),e.U.promisePoolAsync(4,n,(async t=>{try{const n=await e.Cloud.markdownAsync(t.path);t.markdown=n}catch(e){t.markdown=`_${t.path} failed to load._`}}))})).then((n=>{let r=o[0].name;return e.docs.visitTOC(o,(e=>{e.markdown&&(r+="\n\n"+e.markdown)})),v(t,r)}))}(n,s);default:return v(n,s)}})).catch((t=>{$(n).html(`\n                    <img style="height:4em;" src="${e.appTarget.appTheme.docsLogo}" />\n                    <h1>${lf("Oops")}</h1>\n                    <h3>${lf("We could not load the documentation, please check your internet connection.")}</h3>\n                    <button class="ui button primary" id="tryagain">${lf("Try Again")}</button>`),$(n).find("#tryagain").click((()=>{i(r,s)})),window.parent&&window.parent.postMessage({type:"docfailed",docType:r,src:s},"*")})).finally((()=>{$(t).hide(),o&&$(o).show(),$(n).show()})).then((()=>{}))}function a(e,t){t?(pxsim.U.addClass(e,"disabled"),e.setAttribute("aria-disabled","true")):(pxsim.U.removeClass(e,"disabled"),e.setAttribute("aria-disabled","false"))}function l(){let e=/^#(doc|md|tutorial|book|project|projectid|print):([^&?:]+)(:([^&?:]+):([^&?:]+))?/i.exec(window.location.hash);if(e){o&&(r.push(window.location.hash),r.length>10&&r.shift(),r.length>1&&a(o,!1));(e[4]?m(/^blocks$/.test(e[4])?s.Blocks:s.TypeScript,e[5]):Promise.resolve()).then((()=>i(e[1],decodeURIComponent(e[2]))))}}o&&(o.addEventListener("click",(()=>{!function(){if(!o)return;r.length>1&&(r.pop(),window.location.hash=r.pop());r.length<=1&&a(o,!0)}()})),a(o,!0)),e.editor.initEditorExtensionsAsync().then((()=>{window.addEventListener("message",y,!1),window.addEventListener("hashchange",(()=>{l()}),!1),parent.postMessage({type:"sidedocready"},"*"),setTimeout((()=>l()),1)}))},t.renderProjectAsync=k,t.renderProjectFilesAsync=b;function v(n,o,r={}){const i=e.docs.renderMarkdown({template:'\n<aside id=button class=box>\n   <a class="ui primary button" href="@ARGS@">@BODY@</a>\n</aside>\n\n<aside id=vimeo>\n<div class="ui two column stackable grid container">\n<div class="column">\n    <div class="ui embed mdvid" data-source="vimeo" data-id="@ARGS@" data-placeholder="/thumbnail/1024/vimeo/@ARGS@" data-icon="video play">\n    </div>\n</div></div>\n</aside>\n\n<aside id=youtube>\n<div class="ui two column stackable grid container">\n<div class="column">\n    <div class="ui embed mdvid" data-source="youtube" data-id="@ARGS@" data-placeholder="https://img.youtube.com/vi/@ARGS@/0.jpg">\n    </div>\n</div></div>\n</aside>\n\n<aside id=section>\n    \x3c!-- section @ARGS@ --\x3e\n</aside>\n\n<aside id=hide class=box>\n    <div style=\'display:none\'>\n        @BODY@\n    </div>\n</aside>\n\n<aside id=avatar class=box>\n    <div class=\'avatar @ARGS@\'>\n        <div class=\'avatar-image\'></div>\n        <div class=\'ui compact message\'>\n            @BODY@\n        </div>\n    </div>\n</aside>\n\n<aside id=hint class=box>\n    <div class="ui info message">\n        <div class="content">\n            @BODY@\n        </div>\n    </div>\n</aside>\n\n<aside id=codecard class=box>\n    <pre><code class="lang-codecard">@BODY@</code></pre>\n</aside>\n\n<aside id=tutorialhint class=box>\n    <div class="ui hint message">\n        <div class="content">\n            @BODY@\n        </div>\n    </div>\n</aside>\n\n<aside id=reminder class=box>\n    <div class="ui warning message">\n        <div class="content">\n            @BODY@\n        </div>\n    </div>\n</aside>\n\n<aside id=alert class=box>\n    <div class="ui negative message">\n        <div class="content">\n            @BODY@\n        </div>\n    </div>\n</aside>\n\n<aside id=tip class=box>\n    <div class="ui positive message">\n        <div class="content">\n            @BODY@\n        </div>\n    </div>\n</aside>\n\n\x3c!-- wrapped around ordinary content --\x3e\n<aside id=main-container class=box>\n    <div class="ui text">\n        @BODY@\n    </div>\n</aside>\n\n\x3c!-- used for \'column\' box - they are collected and wrapped in \'column-container\' --\x3e\n<aside id=column class=aside>\n    <div class=\'column\'>\n        @BODY@\n    </div>\n</aside>\n<aside id=column-container class=box>\n    <div class="ui three column stackable grid text">\n        @BODY@\n    </div>\n</aside>\n@breadcrumb@\n@body@',markdown:o,theme:e.appTarget.appTheme});let a=r.blocksAspectRatio||window.innerHeight<window.innerWidth?1.62:1/1.62;$(n).html(i),$(n).find("a").attr("target","_blank");const l=e.runner.defaultClientRenderOptions();return l.tutorial=!!r.tutorial,l.blocksAspectRatio=a||l.blocksAspectRatio,l.showJavaScript=t.editorLanguageMode==s.TypeScript,r.print&&(l.showEdit=!1,l.simulator=!1),e.runner.renderAsync(l).then((()=>{$(n).find('a[href^="/"]').removeAttr("target").each(((e,t)=>{$(t).attr("href","#doc:"+$(t).attr("href").replace(/^\//,""))})),$(n).find(".ui.embed").embed()}))}let T,E;function S(e,t){E||(E={});const n=Object.keys(t.fileSystem).sort().join(";");return E[n]||(E[n]=pxtc.getApiInfo(e,t.jres)),E[n]}t.renderMarkdownAsync=v,t.decompileSnippetAsync=function(n,o){const{assets:i,forceCompilation:s,snippetMode:a,generateSourceMap:l}=o||{};return d(o&&o.packageId?"pub:"+o.packageId:o&&o.package?"docs:"+o.package:null,n).then((()=>g(!!e.appTarget.compile&&e.appTarget.compile.hasHex))).then((c=>{if(n&&(c.fileSystem[e.MAIN_TS]=n),c.ast=!0,i)for(const e of Object.keys(i))c.sourceFiles.indexOf(e)<0&&c.sourceFiles.push(e),c.fileSystem[e]=i[e];let u,p,d;s?(u=pxtc.compile(c),p=u&&u.ast):p=pxtc.getTSProgram(c,T),T=p,e.appTarget.appTheme.python&&(d=ts.pxtc.transpile.tsToPy(p,e.MAIN_TS));let g=S(p,c);return ts.pxtc.localizeApisAsync(g,t.mainPkg).then((()=>{let n=pxtc.getBlocksInfo(g);e.blocks.initializeAndInject(n);const s=null==i?void 0:i[e.TILEMAP_JRES],c=null==i?void 0:i[e.IMAGES_JRES];(s||c)&&(r=new e.TilemapProject,r.loadPackage(t.mainPkg),s&&r.loadTilemapJRes(JSON.parse(s),!0),c&&r.loadAssetsJRes(JSON.parse(c)));let h=pxtc.decompiler.decompileToBlocks(n,p.getSourceFile(e.MAIN_TS),{snippetMode:a,generateSourceMap:l});if(h.diagnostics&&h.diagnostics.length>0&&h.diagnostics.forEach((e=>console.error(e.messageText))),!h.success)return{package:t.mainPkg,compileProgram:p,compileJS:u,compileBlocks:h,apiInfo:g};e.debug(h.outfiles[e.MAIN_BLOCKS]);const f=e.blocks.render(h.outfiles[e.MAIN_BLOCKS],o);return(s||c)&&(r=null),{package:t.mainPkg,compileProgram:p,compileJS:u,compileBlocks:h,compilePython:d,apiInfo:g,blocksSvg:f}}))}))},t.compileBlocksAsync=function(n,o){const{assets:i}=o||{};return d(o&&o.packageId?"pub:"+o.packageId:o&&o.package?"docs:"+o.package:null,"").then((()=>g(!!e.appTarget.compile&&e.appTarget.compile.hasHex))).then((s=>{if(s.ast=!0,i)for(const e of Object.keys(i))s.sourceFiles.indexOf(e)<0&&s.sourceFiles.push(e),s.fileSystem[e]=i[e];const a=S(pxtc.compile(s).ast,s);return ts.pxtc.localizeApisAsync(a,t.mainPkg).then((()=>{const s=pxtc.getBlocksInfo(a);e.blocks.initializeAndInject(s);const l=null==i?void 0:i[e.TILEMAP_JRES],c=null==i?void 0:i[e.IMAGES_JRES];(l||c)&&(r=new e.TilemapProject,r.loadPackage(t.mainPkg),l&&r.loadTilemapJRes(JSON.parse(l),!0),c&&r.loadAssetsJRes(JSON.parse(c)));const u=e.blocks.render(n,o);return(l||c)&&(r=null),{package:t.mainPkg,blocksSvg:u,apiInfo:a}}))}))};let C=[];t.initCallbacks=[],t.init=function(){u().then((()=>{for(let e=0;e<t.initCallbacks.length;++e)t.initCallbacks[e]()}))},function(){let e=window.ksRunnerWhenLoaded;e&&e()}()}(e.runner||(e.runner={}))}(pxt||(pxt={}));